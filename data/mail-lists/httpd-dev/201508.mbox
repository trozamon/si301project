From dev-return-83449-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Aug  2 07:15:15 2015
Return-Path: <dev-return-83449-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 212A118123
	for <apmail-httpd-dev-archive@www.apache.org>; Sun,  2 Aug 2015 07:15:15 +0000 (UTC)
Received: (qmail 17580 invoked by uid 500); 2 Aug 2015 07:15:14 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 17502 invoked by uid 500); 2 Aug 2015 07:15:14 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 17493 invoked by uid 99); 2 Aug 2015 07:15:14 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Aug 2015 07:15:14 +0000
Received: from asf-bz1-us-mid.priv.apache.org (nat1-us-mid.apache.org [23.253.172.122])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPS id DD8341A04B0
	for <dev@httpd.apache.org>; Sun,  2 Aug 2015 07:15:13 +0000 (UTC)
Received: by asf-bz1-us-mid.priv.apache.org (ASF Mail Server at asf-bz1-us-mid.priv.apache.org, from userid 0)
	id 6723860133; Sun,  2 Aug 2015 07:15:13 +0000 (UTC)
From: bugzilla@apache.org
To: dev@httpd.apache.org
Subject: Bug report for Apache httpd-2 [2015/08/02]
Message-Id: <20150802071513.6723860133@asf-bz1-us-mid.priv.apache.org>
Date: Sun,  2 Aug 2015 07:15:05 +0000 (UTC)

+---------------------------------------------------------------------------+
| Bugzilla Bug ID                                                           |
|     +---------------------------------------------------------------------+
|     | Status: UNC=Unconfirmed NEW=New         ASS=Assigned                |
|     |         OPN=Reopened    VER=Verified    (Skipped Closed/Resolved)   |
|     |   +-----------------------------------------------------------------+
|     |   | Severity: BLK=Blocker CRI=Critical  REG=Regression  MAJ=Major   |
|     |   |           MIN=Minor   NOR=Normal    ENH=Enhancement TRV=Trivial |
|     |   |   +-------------------------------------------------------------+
|     |   |   | Date Posted                                                 |
|     |   |   |          +--------------------------------------------------+
|     |   |   |          | Description                                      |
|     |   |   |          |                                                  |
| 7483|Ass|Enh|2002-03-26|Add FileAction directive to assign a cgi interpret|
| 8713|Inf|Min|2002-05-01|No Errorlog on PROPFIND/Depth:Infinity            |
| 8867|Opn|Cri|2002-05-07|exports.c generation fails when using a symlink to|
|10747|New|Maj|2002-07-12|ftp SIZE command and 'smart' ftp servers results i|
|11294|New|Enh|2002-07-30|desired vhost_alias option                        |
|11580|Opn|Enh|2002-08-09|generate Content-Location headers                 |
|12033|Opn|Nor|2002-08-26|Graceful restart immediately result in [warn] long|
|12680|New|Enh|2002-09-16|Digest authentication with integrity protection   |
|13599|Inf|Nor|2002-10-14|autoindex formating broken for multibyte sequences|
|13661|Ass|Enh|2002-10-15|Apache cannot not handle dynamic IP reallocation  |
|14104|Opn|Enh|2002-10-30|not documented: must restart server to load new CR|
|14496|New|Enh|2002-11-13|Cannot upgrade any version on Windows. Must uninst|
|14922|Inf|Enh|2002-11-28|<target> is currently hardcoded to 'apache2'      |
|15719|Inf|Nor|2002-12-30|WebDAV MOVE to destination URI which is content-ne|
|16761|Inf|Nor|2003-02-04|CustomLog with pipe spawns process during config  |
|16802|New|Enh|2003-02-05|Additional AllowOverride directive "Restrict"     |
|16811|Ass|Maj|2003-02-05|mod_autoindex always return webpages in UTF-8.    |
|17107|New|Min|2003-02-16|Windows should not install printenv               |
|17114|New|Enh|2003-02-17|Please add strip and install-strip targets to Make|
|17244|Ass|Nor|2003-02-20|./configure --help gives false information regardi|
|17497|Opn|Nor|2003-02-27|mod_mime_magic generates incorrect response header|
|18325|New|Enh|2003-03-25|PAM support for suEXEC                            |
|18334|Inf|Cri|2003-03-25|Server crashes when authenticating users against L|
|18497|New|Min|2003-03-30|configure --help gives wrong default for sysconfdi|
|19043|New|Min|2003-04-15|Interesting interaction between cern_meta module a|
|19670|New|Enh|2003-05-05|content type header supplied upon PUT is thrown aw|
|20036|Ass|Nor|2003-05-19|Trailing Dots stripped from PATH_INFO environment |
|21253|New|Nor|2003-07-01|Mime magic doesn't continue if type is specifed fo|
|21260|New|Nor|2003-07-02|CacheMaxExpire directive not enforced !           |
|21533|Ass|Cri|2003-07-11|Multiple levels of htacces files can cause mod_aut|
|22138|Inf|Cri|2003-08-05|Webdav is not preccessing special chars right.    |
|22237|New|Enh|2003-08-08|option to disable ServerSignature on index pages  |
|22484|Opn|Maj|2003-08-16|semaphore problem takes httpd down                |
|22686|Opn|Nor|2003-08-25|ab: apr_poll: The timeout specified has expired (7|
|22898|Opn|Nor|2003-09-02|nph scripts with two HTTP header                  |
|23167|Inf|Cri|2003-09-14|--enable-layout never goes to apr apr-util        |
|23181|New|Nor|2003-09-15|Status 304 (Not modified) and chunking leads to an|
|23238|New|Cri|2003-09-18|non-async-signal-safe operations from signal handl|
|23330|New|Enh|2003-09-22|Enhance ApacheMonitor to view and control Tomcat s|
|23911|Opn|Cri|2003-10-18|CGI processes left defunct/zombie under 2.0.54    |
|24031|New|Enh|2003-10-23|Passphrase protected private key in SSLProxyMachin|
|24095|Opn|Cri|2003-10-24|ERROR "Parent: child process exited with status 32|
|24437|Opn|Nor|2003-11-05|mod_auth_ldap doubly-escapes backslash (\) charact|
|24890|Opn|Nor|2003-11-21|Apache config parser should not be local aware ( g|
|25014|New|Enh|2003-11-26|A flexible interface for mod_log_config           |
|25201|New|Enh|2003-12-04|Provide Cache Purge operation                     |
|25240|Inf|Enh|2003-12-05|SSL Library Error: 336105671 logged as information|
|25435|New|Enh|2003-12-11|sethandler and directoryindex not playing nice    |
|25469|Opn|Enh|2003-12-12|create AuthRoot for defining paths to auth files  |
|25484|Ass|Nor|2003-12-12|Non-service Apache cannot be stopped in WinXP     |
|25543|Inf|Nor|2003-12-15|mod_proxy_ajp overwrites existing response headers|
|25667|New|Nor|2003-12-19|Memory leak in function ssl_scache_dbm_retrieve().|
|25863|New|Enh|2004-01-02|new per-host initialization hooks                 |
|26005|New|Nor|2004-01-08|SERVER_NAME incorrect when using IPv6 address in U|
|26142|New|Maj|2004-01-14|EnableSendFile Off for Windows XP Home            |
|26153|Opn|Cri|2004-01-15|Apache cygwin directory traversal vulnerability   |
|26368|New|Min|2004-01-23|File extensions in AddDescription treated as part |
|26446|New|Nor|2004-01-26|flush buckets followed by eos bucket emit multiple|
|26478|New|Enh|2004-01-28|mod_dav does not expose a method for setting the D|
|26835|New|Enh|2004-02-10|[PATCH] Mod_status Readability & Browser Side Tabl|
|27257|Ass|Enh|2004-02-26|rotatelogs with getopt and setuid                 |
|27578|New|Enh|2004-03-10|made getlastmodified a writable property          |
|27715|Ass|Enh|2004-03-16|Client sending misformed Range "bytes = 0-100" ins|
|27791|Inf|Nor|2004-03-18|mod_cache doesn't re-cache expired content        |
|27835|New|Enh|2004-03-22|When proxying FTP, all errors turns into 404      |
|27869|New|Enh|2004-03-23|stopping and starting httpd again immediately caus|
|28854|Inf|Nor|2004-05-09|Build fails with missing library call on Solaris i|
|28903|New|Enh|2004-05-11|Hooks to add environment variables to CGI and othe|
|29090|Ass|Enh|2004-05-19|MultiviewsMatch NegotiatedOnly extensions not resp|
|29165|New|Nor|2004-05-24|Parent directory icon not correct                 |
|29446|New|Enh|2004-06-08|want directive for setting content negotiation qua|
|29449|New|Enh|2004-06-09|Limit length of specified fields in LogFormat     |
|29450|New|Enh|2004-06-09|Improved logging for mod_access                   |
|29510|Ass|Enh|2004-06-10|ab does not support multiple cookies              |
|29644|Ver|Nor|2004-06-17|mod_proxy keeps downloading even after the client |
|29755|Opn|Nor|2004-06-23|mod_usertrack should use err_headers_out          |
|29822|New|Enh|2004-06-26|implement FTP 'PUT' support in proxy_ftp.c        |
|29941|Ass|Enh|2004-07-06|log files are not tested for availability on confi|
|30259|Ass|Enh|2004-07-22|When proxy connects to backend, a DNS lookup is do|
|30505|Ass|Enh|2004-08-05|Apache uses 'Error', and not lower level event typ|
|30730|Inf|Nor|2004-08-18|[PatchAvailable] mod_actions and Server-Status    |
|30865|Inf|Maj|2004-08-26|mod_disk_cache leaves many temporary files slowing|
|31302|Opn|Cri|2004-09-19|suexec doesn't execute commands if they're not in |
|31311|New|Enh|2004-09-20|Remote user not logged in reverse proxy scenario  |
|31352|Ass|Enh|2004-09-21|RFE, Bind to LDAP server with browser supplier use|
|31418|Opn|Nor|2004-09-25|SSLUserName is not usable by other modules        |
|31484|New|Maj|2004-09-30|Custom environment variables not passed to content|
|31490|New|Nor|2004-09-30|mod_proxy_ftp renders filenames with spaces badly |
|31565|New|Enh|2004-10-06|Won't start correctly if parent closed stdin, stdo|
|31679|New|Enh|2004-10-12|If the argument of a CGI has two or more consecuti|
|31709|Inf|Nor|2004-10-13|Raises an error on SSL name based virtualhosts (wi|
|31712|New|Enh|2004-10-14|config_file is NULL at ap_walk_config etc         |
|31952|New|Enh|2004-10-29|mod_proxy and RealPlayer: audio content streaming |
|32051|Opn|Nor|2004-11-04|mod_example is not thread safe                    |
|32328|Opn|Enh|2004-11-19|Make mod_rewrite escaping optional / expose intern|
|32346|New|Enh|2004-11-22|mod_include/include virtual checks content-type is|
|32524|New|Enh|2004-12-03|ab: add an option to specify a source address     |
|32703|Inf|Enh|2004-12-14|Cannot determine that Apache is frozen if /var fil|
|32750|Ass|Maj|2004-12-17|mod_proxy + Win32DisableAcceptEx = memory leak    |
|32877|New|Enh|2004-12-29|wrong utf-8 encoding/escaping in a href for umlaut|
|33084|New|Enh|2005-01-13|Optional certificate validity period check on SSLV|
|33089|New|Nor|2005-01-13|mod_include: Options +Includes (or IncludesNoExec)|
|33207|New|Nor|2005-01-23|Results of my suexec.c code audit                 |
|33215|New|Nor|2005-01-24|Cygwin build/install.sh fix (OSTYPE => ext=.exe)  |
|33512|Inf|Maj|2005-02-11|mod_mem_cache and possibly mod_deflate            |
|33627|New|Nor|2005-02-18|Bite-sized changes making progress towards compila|
|33685|New|Maj|2005-02-22|Unable to install in the path containing non engli|
|34270|Inf|Nor|2005-04-01|Large POSTs over SSL from Internet Explorer do not|
|34375|New|Enh|2005-04-08|enhancements for mod_include                      |
|34377|New|Enh|2005-04-08|Allow the overriding of 401 Unauthorized returns f|
|34405|New|Enh|2005-04-11|adds DOCUMENT_NAME_WITHOUT_SUFFIX to mod_include  |
|34508|New|Nor|2005-04-19|Randomly slow graceful restart, not accepting new |
|34519|New|Enh|2005-04-19|Directory index should emit valid XHTML           |
|35049|New|Nor|2005-05-24|let AddDefaultCharset apply to text/css and applic|
|35077|New|Nor|2005-05-26|mod_dav passes incorrect paths with LocationMatch |
|35083|Inf|Enh|2005-05-26|Certificate validation problems trapping          |
|35098|Ver|Maj|2005-05-27|Install fails using --prefix                      |
|35154|New|Nor|2005-06-01|Support for NID_serialNumber, etc. in SSLUserName |
|35245|New|Nor|2005-06-06|cache ignores max-age cache-directive in requests |
|35250|New|Enh|2005-06-07|[PatchAvailable] add logging to mod_proxy_connect |
|35280|New|Nor|2005-06-09|FTP proxy breaks RFC 2428 when trying to fall back|
|35556|Inf|Nor|2005-06-30|CRL files not re-read by HUP                      |
|35652|Opn|Min|2005-07-07|Improve error message: "pcfg_openfile: unable to c|
|35702|New|Nor|2005-07-12|Using with https URL, ab freezes or gets SIGSEGV o|
|35781|New|Nor|2005-07-18|ap_sub_req_method_uri() bypasses Limit security co|
|35981|Inf|Maj|2005-08-02|mod_dav overrides dav_fs response on PUT failure  |
|36286|New|Enh|2005-08-20|configtest doesn't check SSL certificates         |
|36492|New|Nor|2005-09-04|split-logfile script dies when splitting log of ma|
|36495|Inf|Nor|2005-09-05|mod_proxy_ajp: ajp_check_msg_header() got bad sign|
|36564|New|Enh|2005-09-08|make mod_ldap really universal                    |
|36636|New|Maj|2005-09-13|database write lock taken for PROPFIND operations |
|36676|New|Nor|2005-09-15|time() bug in httpd/os/win32/util_win32.c:wait_for|
|36710|Opn|Blk|2005-09-19|CGI output not captured                           |
|36724|New|Nor|2005-09-20|Don't install Apache Monitor by default           |
|37110|New|Nor|2005-10-17|Build fails when source tree is read-only         |
|37196|Inf|Min|2005-10-21|Wrong "Parent directory" link                     |
|37201|New|Enh|2005-10-21|Add <IfInterface IP> syntax to apache configuratio|
|37290|Opn|Min|2005-10-28|DirectoryIndex don't work in scriptaliased directo|
|37307|New|Enh|2005-10-31|Can't suppress error messages                     |
|37355|New|Enh|2005-11-04|Allow to specify Proxy-Authorization in ProxyRemot|
|37360|New|Maj|2005-11-04|Install fails on Windows XP x64 when program files|
|37402|New|Nor|2005-11-08|mod_proxy has stopped allowing POST sub-requests  |
|37514|Inf|Nor|2005-11-15|mod_proxy buffers chunked data.                   |
|37564|New|Enh|2005-11-19|Suggestion: mod_suexec SuexecUserGroup directive i|
|37587|Inf|Min|2005-11-22|mod_status Total Traffic value goes up then down? |
|37823|Inf|Nor|2005-12-07|The openssl library linked is different between ht|
|37920|New|Maj|2005-12-15|mod_proxy does not flush data on POST requests fro|
|38116|New|Enh|2006-01-04|Chroot-Patch for SuExec                           |
|38164|New|Nor|2006-01-06|wrong status code for failed COPY/MOVE            |
|38182|New|Nor|2006-01-08|COPY ignores authority in Destination header      |
|38218|New|Enh|2006-01-10|Multiline Comments for *.conf files               |
|38240|Inf|Nor|2006-01-12|apache restart segfault with mutliple Include dire|
|38325|Opn|Nor|2006-01-20|impossible to determine AUTH_TYPE of interpreted r|
|38355|Unc|Enh|2006-01-23|DSO support for mod_rewrite                       |
|38369|New|Enh|2006-01-24|mod_proxy keeps alive connections that should be b|
|38408|New|Nor|2006-01-27|SSI environment vars not set in spawned processes |
|38419|New|Nor|2006-01-27|Problems with large WebDAV properties             |
|38478|New|Maj|2006-02-01|A client starting a SSL renegotiation can crash th|
|38515|New|Enh|2006-02-05|Dynamic LDAP Group Support                        |
|38550|New|Enh|2006-02-07|Setting headers based on proxied data             |
|38571|New|Enh|2006-02-08|CustomLog directive checked by apachectl configtes|
|38756|Inf|Nor|2006-02-22|errors with running make                          |
|38786|New|Nor|2006-02-26|"IndexOption VersionSort" has problems with traili|
|38827|New|Reg|2006-03-02|mod_disk_cache trying to rename locked tempfile on|
|38864|Inf|Enh|2006-03-06|ProxyPassReverse fails in <Location>              |
|38903|New|Maj|2006-03-09|r->allowed does not affect Allow response header  |
|38923|New|Min|2006-03-10|mod_speling incorrectly escapes linked URLs       |
|38928|New|Min|2006-03-11|propose removing "VARIANTS" feature               |
|38995|New|Nor|2006-03-16|httpd tries to communicate with the CGI daemon eve|
|39111|New|Nor|2006-03-27|Potential bug brought by mmapfile (mod_file_cache)|
|39128|Inf|Maj|2006-03-28|Apache 2.2 will not compile mod_ssl library's corr|
|39185|Inf|Nor|2006-04-03|Approximately in 1-2 weeks of work the server hang|
|39216|New|Maj|2006-04-05|mod_disk_cache trying to rename locked file, decre|
|39238|New|Nor|2006-04-07|mod_auth_dbm requires mod_auth or "no groups file?|
|39275|Opn|Nor|2006-04-11|slow child_init causes MaxClients warning         |
|39287|New|Nor|2006-04-12|Incorrect If-Modified-Since validation (due to syn|
|39299|New|Nor|2006-04-13|Internal Server Error (500) on COPY               |
|39329|Inf|Nor|2006-04-17|mod_dbd reconnection and prepared statements      |
|39370|New|Nor|2006-04-20|SSL session will be removed if the client is sendi|
|39380|Inf|Nor|2006-04-21|mod_disk_cache eats memory, has no LFS support, et|
|39418|New|Nor|2006-04-26|CacheMaxExpire directive not enforced             |
|39448|New|Min|2006-04-29|old-style <directory proxy:*> doesn't give any war|
|39498|New|Nor|2006-05-06|accept_filter in apr assumes if found in sys/socke|
|39517|New|Nor|2006-05-08|Corrupt chunked transfer-encoding with Content Neg|
|39658|Opn|Nor|2006-05-25|mod_proxy_ajp SSL Key Size Bug                    |
|39673|New|Nor|2006-05-29|mod_proxy opens connections that disturb NTLM     |
|39692|New|Nor|2006-05-31|mod_proxy_balancer doesn't retry a failed request |
|39723|Inf|Enh|2006-06-05|Forward proxy does not work in tranparent mode    |
|39727|Ass|Nor|2006-06-05|Incorrect ETag on gzip:ed content                 |
|39730|New|Nor|2006-06-06|LanguagePriority and DefaultLanguage are Case Sens|
|39737|New|Nor|2006-06-06|LogFormat "%{tid}P" reports wrong thread id on Win|
|39748|New|Enh|2006-06-07|Header and POST support for mod_include           |
|39753|New|Nor|2006-06-07|incorrect source for LOCALE Decimal Symbol in Win2|
|39785|Inf|Nor|2006-06-12|Status code 408 (Request Timeout) is not logged   |
|39807|Opn|Enh|2006-06-13|large files / filesystem corruption can cause apac|
|39902|New|Nor|2006-06-27|HeaderName directive breaks mod_filter somehow    |
|39904|New|Nor|2006-06-27|graceful restart error and cpu load               |
|39913|Ass|Blk|2006-06-27|detection of static OpenSSL libraries requiring li|
|39916|New|Nor|2006-06-28|Core Filters & non-blocking Sendfile              |
|39923|New|Nor|2006-06-28|AddDescription doesn't work in server config with |
|39928|New|Nor|2006-06-28|port no detected when file name not in URL        |
|39935|New|Nor|2006-06-29|AddDescription does not do literal comparisons on |
|39973|Ass|Enh|2006-07-06|apache software folder should be movable          |
|40035|New|Cri|2006-07-13|Windows Server 2003 "("R2")" 64-Bit Edition no cgi|
|40060|New|Nor|2006-07-17|AuthGroupFile should accept /etc/group syntax     |
|40075|New|Enh|2006-07-19|unable to use ldap groups that contain DNs and use|
|40102|Opn|Nor|2006-07-24|SCRIPT_NAME set incorrectly with mod_rewrite      |
|40146|New|Nor|2006-07-31|mod_ssl info in server_info is blank              |
|40174|New|Min|2006-08-03|Unable to get IndexOptionis ScanHTMLTitles to work|
|40180|Inf|Maj|2006-08-03|Mod_dav and remove folder doesn't work with Micros|
|40190|New|Nor|2006-08-05|translate file                                    |
|40196|New|Nor|2006-08-06|EILSEQ handling, NoImplicitAdd should work, and so|
|40217|Opn|Nor|2006-08-08|mod_dav PROPFIND ignores access restrictions on it|
|40266|Inf|Blk|2006-08-16|berkeley db support in httpd is screwed           |
|40312|New|Nor|2006-08-24|ssl_engine_init.c, ssl_init_ctx_verify contains a |
|40373|New|Nor|2006-08-31|mod_dir adds trailing slash after internal redirec|
|40408|New|Blk|2006-09-04|Apache 2.2.3 is not starting                      |
|40416|New|Maj|2006-09-05|mod_proxy_ftp cannot connect under http load in fo|
|40441|New|Enh|2006-09-08|intelligently handling dynamic subdomains         |
|40453|New|Nor|2006-09-09|lexicographic compare in RewriteCond isn't lexicog|
|40463|New|Nor|2006-09-11|piped logging causes some weird kill()ing         |
|40513|Opn|Maj|2006-09-14|Seeding PRNG with 0 bytes of entropy              |
|40514|New|Nor|2006-09-14|would like GracefulShutdownTimeout to work for gra|
|40540|Inf|Nor|2006-09-19|Bad interaction between MultiViews and SetOutputFi|
|40541|New|Nor|2006-09-19|Action rewrites URI used by Location?             |
|40571|New|Nor|2006-09-21|mod_proxy_ajp don't works with mod_usertrack      |
|40586|New|Enh|2006-09-22|Add option to supress default '-' output          |
|40746|New|Enh|2006-10-12|Feature request: ProxyAllow directive             |
|40749|New|Min|2006-10-12|magic file with string and "%n" causes Apache chil|
|40781|New|Nor|2006-10-17|PATH_TRANSLATED: 'redirect:/~jablko/gallery2/main.|
|40808|New|Enh|2006-10-23|ProxyRemote with optional proxy authentication    |
|40859|New|Enh|2006-11-01|[PATCH] Support -F force option to 'ab' support to|
|40917|New|Nor|2006-11-07|configure does not detect OpenSSL shared lib on HP|
|40953|New|Min|2006-11-12|Should not send any data in 1xx/204/304 reply from|
|40984|Inf|Enh|2006-11-16|AddIcon, AddIconByType for OpenDocument format    |
|40987|Opn|Enh|2006-11-16|ProxyVia Block doesn't remove Via: header for reve|
|41000|New|Nor|2006-11-19|mod_authn_dbd have an error, in function 'authn_db|
|41025|New|Nor|2006-11-23|ROBOTS META-Tag directive needed in mod_autoindex |
|41088|New|Nor|2006-11-30|installation backcolor is wrong (white)           |
|41111|New|Enh|2006-12-05|New option for filters: run only if there are spar|
|41114|New|Blk|2006-12-06|ACL HTTP method is rejected by mod_proxy_ajp      |
|41130|New|Nor|2006-12-07|mod_mime and mod_negotiation type-map both clobber|
|41143|Opn|Nor|2006-12-10|Incorrect ap_getline assumption in mod_proxy_http |
|41195|New|Nor|2006-12-17|properly set the parent pid on shutdown           |
|41196|New|Nor|2006-12-17|worker mpm usage of apr's memory pools is not thre|
|41200|Inf|Maj|2006-12-18|SSI include, prevent client from receiving full ou|
|41240|Inf|Enh|2006-12-25|BRF files support                                 |
|41262|Inf|Nor|2006-12-29|Embedded pcre causes runtime segfault             |
|41362|Inf|Maj|2007-01-14|mod_disk_cache and mod_include conflict generating|
|41375|Inf|Min|2007-01-15|Using same SSL Certificate with different ServerNa|
|41391|New|Min|2007-01-17|too long period setting makes max-age overflow    |
|41412|New|Enh|2007-01-19|RewriteRule Skip should take negative arguments   |
|41435|New|Nor|2007-01-22|Authentication fails with 500 Server Error        |
|41450|Inf|Cri|2007-01-24|Empty page (200 OK) while max-age is empty        |
|41485|New|Nor|2007-01-28|LDAP client certificates not usable in 2.2.x/trunk|
|41529|New|Enh|2007-02-02|Accept BOM in .htaccess                           |
|41556|New|Enh|2007-02-07|Feature Request: format string for masking ip addr|
|41621|New|Maj|2007-02-15|Apache 2.2.4 backend problem with Apache 2.0.59 Re|
|41646|New|Nor|2007-02-16|wrong headers are sent for HEAD requests when Prox|
|41676|Opn|Enh|2007-02-22|Refactor mod_proxy_ftp                            |
|41685|New|Enh|2007-02-22|Implement optional HTTP Authentication in a standa|
|41712|Inf|Nor|2007-02-26|threads locked at logging state                   |
|41729|New|Maj|2007-02-28|error message: ap_get_scoreboard_lb(130) failed in|
|41744|Inf|Maj|2007-03-01|SSI resolves includes but removes original HTML   |
|41763|Opn|Nor|2007-03-05|mod_disk_cache ignores CacheDirLevels and CacheDir|
|41764|New|Nor|2007-03-05|error state and conf                              |
|41771|Inf|Nor|2007-03-06|Erro with mod_proxy_ajp or mod_prox_balancer      |
|41867|New|Nor|2007-03-16|<DirectoryMatch> Matches Files                    |
|41925|New|Nor|2007-03-21|trivial patch to add automatic crypting to 'dbmman|
|41929|New|Nor|2007-03-22|ISAPI ssl variables                               |
|41953|New|Nor|2007-03-26|pidfile remains when 2nd pass of post-config retur|
|41962|New|Min|2007-03-27|Need mod_auth_ldap to authenticate with Active Dir|
|42001|New|Cri|2007-03-30|LINUX : Could not set LDAP_OPT_X_TLS to LDAP_OPT_X|
|42027|Inf|Nor|2007-04-02|FileETag directive appears to be ignored          |
|42054|New|Nor|2007-04-04|service name and parameter issues                 |
|42079|New|Nor|2007-04-10|SSLRequire: Additional access in sub-directoies   |
|42082|New|Nor|2007-04-10|filter_init is called multiple times after an INCL|
|42182|Inf|Nor|2007-04-22|Mime types for cached proxied content             |
|42216|New|Enh|2007-04-24|RFE -- external overload procedure                |
|42262|Inf|Nor|2007-04-26|mod_dav /  worker fails to allocate memory and seg|
|42287|Inf|Nor|2007-04-28|chunked encoded response to POST request to cgi sc|
|42368|Inf|Nor|2007-05-09|httpd is crashing if conf/extra/httpd-manual.conf |
|42373|Inf|Maj|2007-05-09|REPORT request fails over mod_proxy               |
|42404|New|Enh|2007-05-13|Filename/info for disk-cached proxied remote URLs |
|42425|Inf|Nor|2007-05-15|Additional freshness checks in mod_cache.c cause m|
|42471|Inf|Nor|2007-05-21|clients with IE7 take 3megs per page load. httpd.e|
|42492|Inf|Nor|2007-05-22|mod_proxy_ajp with SSL front end: data corruption |
|42499|Inf|Nor|2007-05-23|Backslash produces a 404 error instead of going to|
|42548|New|Nor|2007-05-30|INCLUDE negotiating language aborts with APR_POOL_|
|42561|New|Enh|2007-05-31|[PATCH] AuthLDAPRemoteUserAttribute only applies i|
|42633|New|Min|2007-06-11|mod_info gives wrong information about actual conf|
|42665|New|Nor|2007-06-14|spurious attempt to open ".../file.html/.htaccess"|
|42666|New|Nor|2007-06-14|code & docs corrections for FollowSymLinks and Sym|
|42667|New|Nor|2007-06-14|mod_proxy_balancer not reporting when workers are |
|42668|Inf|Nor|2007-06-14|balancer_manager shows Ok status for the workers t|
|42687|New|Nor|2007-06-18|Fully delegate certificate & key semantics to the |
|42688|New|Enh|2007-06-18|engine managed keys: per process openssl context  |
|42690|New|Nor|2007-06-18|realm is not set for each configured directory whe|
|42695|Opn|Cri|2007-06-18|mod_proxy balancer problem                        |
|42699|New|Enh|2007-06-20|share mod_logio data with other modules           |
|42711|New|Enh|2007-06-20|format string for whole log entries not just id   |
|42732|Opn|Maj|2007-06-25|Authentication against database issue.            |
|42763|New|Nor|2007-06-28|graceful-stop/restart loops go loop too far       |
|42923|Inf|Maj|2007-07-17|vhost certificate NOT overriding cert from the _de|
|42972|Inf|Nor|2007-07-25|Certificate list in mod_ssl module context are not|
|42977|New|Nor|2007-07-25|DAV locking is busted when apr-util is built with |
|42987|New|Nor|2007-07-27|Weak Etags in Apache are useless and violate RFC 2|
|43012|New|Nor|2007-08-02|AIX instdso.sh libphp5.so                         |
|43027|New|Enh|2007-08-03|Header in default language                        |
|43033|New|Nor|2007-08-04|apxs does not correctly detect module name (w/o -n|
|43177|New|Nor|2007-08-21|child pid xxxxx exit signal Segmentation fault    |
|43218|New|Nor|2007-08-27|Wrong cert used for vhost if ServerName is same   |
|43220|Opn|Cri|2007-08-27|mod_proxy truncating ajp output                   |
|43249|Inf|Maj|2007-08-30|ldap_simple_bind_s failed when using SUN LDAP Libs|
|43275|New|Enh|2007-08-31|Remove avoidable network transactions in mod_proxy|
|43289|New|Nor|2007-09-02|XBitHack full g+x returns zero sized response on I|
|43308|New|Nor|2007-09-04|Persistent backend connections not supported for R|
|43352|New|Nor|2007-09-11|Apache2: out of memory during heavy webdav files c|
|43441|New|Nor|2007-09-20|Incorrect HTTP status for pre-commit-blocked autov|
|43471|New|Min|2007-09-25|no need to create a global pool on open_scoreboard|
|43481|New|Cri|2007-09-26|AuthLDAPURL must contain a final path of branch?(l|
|43494|New|Nor|2007-09-26|mod_cgid does not kill never ending scripts       |
|43502|New|Enh|2007-09-28|httpd fails to start if log directory does not exi|
|43513|New|Nor|2007-09-29|Persistent backend connections for ProxyPassMatch |
|43532|Inf|Cri|2007-10-02|Error while compiling Apache 2.2.3 on HPUX        |
|43533|Opn|Nor|2007-10-02|Frequent crashes in mod_include's bndm()          |
|43561|New|Nor|2007-10-05|apxs -q anomaly                                   |
|43577|Inf|Blk|2007-10-09|mod_authnz_ldap not working under WLDAP32 (novell/|
|43607|New|Nor|2007-10-11|mod_proxy sends data on closed connections without|
|43649|Opn|Trv|2007-10-18|mod_autoindex is generating invalid XHTML markup  |
|43652|New|Enh|2007-10-18|Suggest small change for big fix with SuExec & Vir|
|43666|New|Nor|2007-10-20|CGI works, but client denied error messages in err|
|43679|New|Enh|2007-10-23|Contributed tests for checking that subrequests ta|
|43723|Inf|Cri|2007-10-29|Apache 2.2.6 segfault when using mod_dbd          |
|43724|New|Cri|2007-10-29|Apache 2.2.6 segfault on url wich not in cache    |
|43755|New|Enh|2007-10-31|Add a SSLOptions to don't fill SSL_CLIENT_VERIFY  |
|43762|New|Enh|2007-10-31|Misleading tips in an error message about internal|
|43777|New|Nor|2007-11-01|Wrong encoding of <href> element in response      |
|43778|New|Nor|2007-11-01|Wrong responses if httpd has not access to some el|
|43785|New|Enh|2007-11-02|Tracking the per-hit impact of mod_include        |
|43792|New|Enh|2007-11-04|Feature proposal - bind phase                     |
|43818|New|Nor|2007-11-08|PROPFIND on -w- collections returns 207 MULTI-STAT|
|43838|New|Enh|2007-11-11|If-Modified-Since request and htcacheclean conflic|
|43895|New|Nor|2007-11-18|mod_mbox improvements                             |
|43897|Inf|Cri|2007-11-18|Huge memory consumption httpd 2.2.6, mod_proxy - m|
|43931|New|Enh|2007-11-21|OpenSSL autoconfig support for mod_ssl            |
|43943|New|Nor|2007-11-22|SHMCB crash due to misalignment and GCC 4 optimiza|
|43958|Inf|Maj|2007-11-26|mod_proxy_balancer not balancing correct in combin|
|43997|Opn|Min|2007-11-29|Only issue "Init: SSL server IP/Port conflict" if |
|44025|Inf|Nor|2007-12-05|Apache 2.2.6 fails to configure on OpenBSD 4.1    |
|44027|Ass|Enh|2007-12-05|Internationalized Domain Name (IDN) support       |
|44031|Opn|Maj|2007-12-06|RemoveHandler inside subdir location              |
|44034|Ass|Enh|2007-12-06|mpm_winnt doesn't call monitor hook               |
|44105|New|Nor|2007-12-19|Core dumps when using Proxy Keepalive             |
|44155|New|Enh|2007-12-31|smarter retry for LDAP_UNAVAILABLE, LDAP_BUSY, etc|
|44181|Opn|Enh|2008-01-07|add UnAlias                                       |
|44188|Inf|Cri|2008-01-08|Empty response for certain requests (mod_proxy as |
|44218|New|Min|2008-01-13|mod_autoindex shows the default icon for files wit|
|44221|Opn|Cri|2008-01-14|CheckCaseOnly On does not stop Multiple Choices ba|
|44250|New|Nor|2008-01-16|OSX 10.5: __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_|
|44279|New|Enh|2008-01-22|Add "iterate" flag to apply rule in a loop while p|
|44302|New|Nor|2008-01-27|AuthLDAPURL does not accept ldapi:// urls         |
|44305|New|Nor|2008-01-28|Inconsistent configuration for suexec path        |
|44316|New|Nor|2008-01-28|httpd 2.0 does not follow ScriptAliases when invok|
|44322|New|Enh|2008-01-29|mod_proxy ProxyPassReverseCookieDomain with no dom|
|44351|New|Nor|2008-02-04|File descriptor leak when using prg RewriteMap    |
|44363|Inf|Maj|2008-02-05|Slow file transfers                               |
|44384|Ass|Nor|2008-02-09|mod_ssl on MacOS X 10.5.1 does not work because of|
|44453|New|Nor|2008-02-19|list_hooks.pl doesn't parse declarations that span|
|44476|New|Maj|2008-02-23|Apache service fails to start due to missing depen|
|44503|Inf|Blk|2008-02-27|Errors during SSL handshake                       |
|44518|New|Enh|2008-03-02|Don't set expires header on HTTP redirect.        |
|44578|New|Enh|2008-03-11|mod_authn_dbd option to let database validate pass|
|44601|New|Trv|2008-03-13|Add a lowercase value to Vary header for consisten|
|44602|New|Enh|2008-03-13|Options for modfying Content-Location (relative OR|
|44622|Inf|Nor|2008-03-17|POST fails to SSL vhost with proxy to HTTP backend|
|44631|New|Nor|2008-03-18|with-included-apr fails to work when using a separ|
|44638|New|Nor|2008-03-19|sed error in httpd.spec.in                        |
|44656|New|Nor|2008-03-22|Tries to retrive error document 404 instead of 406|
|44657|New|Enh|2008-03-22|prefer-type, -encoding, and -charset cookie? (as p|
|44670|New|Min|2008-03-25|Apache httpd 2.2.8 : Cannot ./configure when curre|
|44696|Inf|Nor|2008-03-27|mod_cache sometimes serves old content despite hav|
|44730|New|Nor|2008-04-01|duplicate query string in remote server url when u|
|44752|New|Nor|2008-04-03|Suexec does not correctly check that scripts are i|
|44757|New|Enh|2008-04-04|adding stderr buckets to mod_cgi                  |
|44758|New|Enh|2008-04-04|LimitRequestBody undocumented behaviour with proxi|
|44779|New|Enh|2008-04-08|Using commas and semicolons for content negotiatio|
|44855|New|Nor|2008-04-22|irregular balancing with sticky-session after re-e|
|44865|Ass|Nor|2008-04-23|mod_dav's lock database becomes consistently corru|
|44870|Inf|Nor|2008-04-24|process spinning on 100% cpu                      |
|44923|Inf|Min|2008-05-02|consequences of multiple LDAPTrustedGlobalCert    |
|44924|New|Enh|2008-05-02|allow 'CACERTDIR' in mod_ldap                     |
|44940|New|Maj|2008-05-06|Httpd randomly breaks when verifying client certif|
|44981|New|Enh|2008-05-12|Digital Certificates (CN Based) for Authorization |
|45022|New|Nor|2008-05-16|Processing of escaped glob patterns in "Include" d|
|45023|Opn|Reg|2008-05-16|DEFLATE preventing 304 NOT MODIFIED response      |
|45049|New|Nor|2008-05-20|mod_mem_cache caches partial content when client c|
|45054|New|Nor|2008-05-21|SSLVerifyClient optional_no_ca is broken          |
|45058|New|Nor|2008-05-21|Mod_SSL does not set AUTH_TYPE with client certifi|
|45078|New|Nor|2008-05-27|mod_proxy stalls when uploading files             |
|45103|Ass|Min|2008-05-30|apachectl should do config test before reload/rest|
|45111|New|Enh|2008-06-01|make mod_usertrack use mod_unique_id if available |
|45116|New|Nor|2008-06-02|fail to check return value of apr_file_dup2() in /|
|45148|New|Enh|2008-06-06|The actual host of the request will be more helpfu|
|45184|New|Enh|2008-06-11|Regular Expression in directive ServerAlias       |
|45187|New|Maj|2008-06-11|Long File name requests gives FORBIDDEN response  |
|45225|New|Nor|2008-06-17|XBitHack breaks DirectoryIndex + MultiViews conten|
|45253|New|Nor|2008-06-23|Unable to build httpd 2.2.9 on Solaris/SPARC      |
|45257|New|Enh|2008-06-23|add (en)force option for UseCanonicalName         |
|45259|New|Enh|2008-06-23|Add /home/[a-z]/* scheme to UserDir conf          |
|45275|New|Maj|2008-06-25|Locked files during expired page renew in disk cac|
|45281|New|Enh|2008-06-25|SITE CHMOD/SEARCH                                 |
|45287|Inf|Min|2008-06-26|build failure because of difference between BSD an|
|45297|New|Min|2008-06-27|mod_dir does not manage correctly the user (r->use|
|45302|New|Enh|2008-06-28|ServerRoot directive                              |
|45355|New|Nor|2008-07-07|ab text and html output jumbo unification         |
|45356|New|Nor|2008-07-07|ab: optionally reduce resource usage (qsort and me|
|45371|New|Nor|2008-07-10|MSI installer requires uninstall of previous versi|
|45374|New|Blk|2008-07-10|Shared memory error on starting httpd with mod_lda|
|45379|Inf|Nor|2008-07-11|[Bug] svn merge, apache and trailing slashes      |
|45385|Inf|Nor|2008-07-11|unable to compile/make 2.2.9 with --enable-ldap   |
|45393|New|Nor|2008-07-14|Apache returns 500 Error when no LDAP credentials |
|45402|New|Nor|2008-07-15|mod_autoindex incorrectly fails to list files     |
|45405|New|Enh|2008-07-16|Allow binding port to be set for individual worker|
|45449|New|Nor|2008-07-21|[PATCH] Add support to WebDav to MOVE/COPY to remo|
|45456|New|Enh|2008-07-22|mod_dbd don't allow more then one database pool   |
|45487|New|Trv|2008-07-27|broken log messages on startup in win32 version   |
|45497|New|Nor|2008-07-29|Scoreboard slot leaked using MaxRequestsPerChild a|
|45512|Ass|Maj|2008-07-31|Bad Performance of mod_proxy with SSL on Solaris 1|
|45524|New|Enh|2008-08-01|Specifying multiple vhost aliases                 |
|45525|New|Enh|2008-08-01|Switch mod_autoindex to Tango icons               |
|45579|New|Nor|2008-08-06|unknown URI scheme in request-URI ignored         |
|45674|New|Enh|2008-08-22|Allow to change error code returned by "Require ld|
|45726|New|Enh|2008-09-02|Build in a maintenance functionallity             |
|45736|New|Nor|2008-09-03|mod_dav needs a directory for its locks and one sh|
|45754|New|Enh|2008-09-06|autoconf macros                                   |
|45763|New|Nor|2008-09-08|No openssl.cnf defined by default causes OpenSSL c|
|45773|New|Nor|2008-09-09|pcre build generates sources to srcdir rather than|
|45788|New|Nor|2008-09-11|mod_log_forensic output shouldn't be buffered when|
|45801|Opn|Nor|2008-09-13|SSLRequireSSL with strictrequire and satisfy any d|
|45838|New|Nor|2008-09-18|mod_authz_owner & directories                     |
|45868|New|Nor|2008-09-23|mod_mem_cache update of headers in cache object is|
|45900|New|Nor|2008-09-26|"make install" fails from read-only filesystem    |
|45905|New|Enh|2008-09-26|ErrorDocument and default URL                     |
|45922|New|Enh|2008-09-30|Expand the conditions under which "SSLVerifyClient|
|45923|New|Nor|2008-09-30|htpasswd tries to open(file, O_RDONLY | O_APPEND) |
|45926|Inf|Nor|2008-10-01|Unable to start apache 2.2.9                      |
|45986|New|Nor|2008-10-10|[info]...Invalid argument: core_output_filter: wri|
|46024|Opn|Nor|2008-10-16|--enable-static is not available in apache's confi|
|46037|Inf|Nor|2008-10-18|Configuration of trusted OCSP responder certificat|
|46040|New|Enh|2008-10-20|Check for existing version of Apache while install|
|46054|New|Nor|2008-10-21|Running httpd returns the error "bad user name nob|
|46070|New|Nor|2008-10-22|MSI installer does not validate custom installatio|
|46071|New|Enh|2008-10-22|Allowing space in between comma and last option in|
|46074|New|Enh|2008-10-23|Need of friendly and easy to use configuration gra|
|46139|New|Nor|2008-11-02|Apache Restart option is not working              |
|46140|New|Enh|2008-11-03|Change error state in balancer manager            |
|46188|Inf|Nor|2008-11-11|Core dumps in apache 2.0.59                       |
|46195|Opn|Nor|2008-11-12|ProxyPass fails with literal IPv6 address         |
|46215|New|Nor|2008-11-14|Race condition in bybusyness algorithm            |
|46231|New|Maj|2008-11-18|Connection Pooling with ajp depends on syntax ?   |
|46241|New|Enh|2008-11-19|mod_expires - ExpiresByPattern or ExpiresIf       |
|46267|New|Nor|2008-11-22|No shared modules build if use --with-apr and --wi|
|46270|New|Enh|2008-11-23|Add FIPS 140-2 mode for mod_ssl for FIPS 1.2 modul|
|46282|New|Nor|2008-11-24|apache2.2 reverse proxy causing full memory and sw|
|46316|New|Maj|2008-12-01|Proxied SSI ProxyTimeout render failure           |
|46317|Inf|Nor|2008-12-01|mod_authnz_ldap.c(373)  seg fault                 |
|46412|New|Nor|2008-12-17|make_child return value not checked               |
|46417|New|Cri|2008-12-19|[notice] Parent: child process exited with status |
|46428|Opn|Nor|2008-12-21|Spaces in URI doesn't encode in proxy-requests    |
|46442|New|Nor|2008-12-29|Semicolon in allow/deny all rules cause reverse lo|
|46449|New|Maj|2008-12-30|Output out of order from SSI include virtual      |
|46454|New|Min|2008-12-30|escaping wildcards in AddIcon filename matching   |
|46475|New|Nor|2009-01-04|build warnings.                                   |
|46499|New|Maj|2009-01-09|httpd accept() return EAGAIN error                |
|46521|New|Nor|2009-01-13|mod_dav doesn't show symlinks                     |
|46529|Ass|Nor|2009-01-14|Child httpd processes crash with Segmentation faul|
|46534|New|Nor|2009-01-14|mod_proxy_ajp scheme and port do not follow UseCan|
|46578|New|Nor|2009-01-21|Flawed header                                     |
|46582|Ver|Min|2009-01-22|RewriteMap internal functions are not well documen|
|46604|New|Nor|2009-01-26|Error thrown when trying to rpmbuild -tb httpd sou|
|46629|New|Maj|2009-01-29|Apache hanging on system calls for php and perl   |
|46634|Ass|Nor|2009-01-30|Requests sometimes take too long, wrong time taken|
|46644|New|Enh|2009-01-31|Clean way to pass custom environment variables to |
|46646|Ass|Nor|2009-02-01|check group membership is sometimes case sensitive|
|46650|Opn|Nor|2009-02-02|CustomLog enviroment condition SCRIPT_FILENAME    |
|46656|New|Enh|2009-02-03|ProxyErrorOverride inside location                |
|46669|New|Enh|2009-02-06|rotatelogs doesn't autocreate directories         |
|46671|Opn|Cri|2009-02-07|Apache periodicaly crashes .                      |
|46678|New|Nor|2009-02-09|Fixed Content-Length using mod_ext_filter with mod|
|46682|New|Nor|2009-02-09|mod_proxy EAI_AGAIN DNS failure                   |
|46685|Opn|Nor|2009-02-09|401 sent without WWW-Authenticate header when requ|
|46709|Opn|Reg|2009-02-12|Expect: 100-continue to an HTTP/1.0 server change |
|46724|Inf|Cri|2009-02-17|WinXP SP3 - Apache crashes on startup in libapr-1.|
|46743|New|Nor|2009-02-19|Inconsistent behavior of "RewriteOptions inherit" |
|46745|New|Maj|2009-02-20|ab.c error :  undefined reference to `BIO_set_call|
|46751|New|Nor|2009-02-21|Can passenv variables who's name contain '(' or ')|
|46762|New|Nor|2009-02-24|Error, SSL/TLS libraries were missing or unusable |
|46765|Opn|Nor|2009-02-25|doubled HTTP header leads to error (Redmine)      |
|46785|Inf|Nor|2009-03-02|Child process increases to 100% (CPU)             |
|46788|New|Nor|2009-03-02|Set resource limits to avoid denial of service att|
|46810|New|Nor|2009-03-05|apxs / apu-1-config outputting erroneous include p|
|46824|New|Nor|2009-03-09|RemoveOutputFilter will not work for Filters added|
|46845|Inf|Cri|2009-03-12|Apache crashes in Windows when using subversion(pr|
|46847|New|Nor|2009-03-13|WebDAV methods with encoding other than "identity"|
|46873|New|Nor|2009-03-18|feature request: connection count on balancer-mana|
|46884|New|Min|2009-03-20|Call to apu_dso_load Fails In apr_ldap_stub.c On O|
|46946|Inf|Nor|2009-03-31|mod_mbox shows email addresses in plain text      |
|46963|New|Nor|2009-04-03|KeepAliveTimout prevents child process from exitin|
|46969|New|Nor|2009-04-05|CustomLog format %m always GET on errors with loca|
|46970|New|Nor|2009-04-05|CustomLog %X does not record aborted connections w|
|47011|New|Reg|2009-04-09|mod_proxy/mod_proxy_balancer hot-standby BalancerM|
|47055|New|Blk|2009-04-20|SSLVerifyClient + Directory doesn't use cache sess|
|47063|New|Nor|2009-04-21|mod_proxy doesn't call post_request handler when t|
|47134|New|Nor|2009-05-01|Last resolve handling when sending client certific|
|47138|New|Nor|2009-05-01|Reverse Proxy & Balancer generate error fault when|
|47152|New|Maj|2009-05-04|Apache is only serving the first character in the |
|47159|New|Nor|2009-05-06|2.2.x logresolve doesn't support ipv6             |
|47167|New|Nor|2009-05-07|Authenticated sessions being switched by reverse p|
|47170|New|Enh|2009-05-08|rotatelogs ring buffer option                     |
|47180|New|Nor|2009-05-11|DBM ssl_scache setting can cause extreme performan|
|47220|Opn|Enh|2009-05-19|Access to environment variables                   |
|47241|New|Min|2009-05-22|Error in rewriting with character ':'             |
|47256|New|Enh|2009-05-23|Enable SSL on a per-port basis                    |
|47289|New|Nor|2009-05-30|Can't build with dynamic libraries on Mac OS 10.4 |
|47295|New|Nor|2009-06-01|AuthDBDUserPWQueryFmt/AuthDBDUserRealmQueryFmt in |
|47329|New|Nor|2009-06-07|SSLCADNRequest* & SSLCACertificate* silently do no|
|47340|New|Nor|2009-06-09|uldap_cache_comparedn() called without a lock     |
|47344|New|Enh|2009-06-10|[FEATURE REQUEST] RedirectCanonicalName           |
|47345|New|Enh|2009-06-10|rotatelogs timeout patch                          |
|47346|New|Maj|2009-06-10|mod_cache doesn't re-cache expired content when La|
|47387|Inf|Nor|2009-06-18|SSL_CLIENT_I_DN and SSL_CLIENT_S_DN use Email inst|
|47392|Opn|Nor|2009-06-18|<FilesMatch> is using the wrong directory         |
|47435|New|Nor|2009-06-26|mod_authz_host does reading of /etc/hosts on each |
|47438|Inf|Enh|2009-06-27|how to create a non-html "listing generated by the|
|47447|New|Enh|2009-06-29|Add possibility to use client IP as a value in Req|
|47484|New|Nor|2009-07-06|Spurious RewriteLock warning when using external m|
|47485|New|Enh|2009-07-06|HTML5 Websocket implementation                    |
|47514|New|Enh|2009-07-12|Personal data and restrictions based on subject di|
|47528|New|Maj|2009-07-14|Worker process won't restart more than once using |
|47542|New|Nor|2009-07-16|Piped logging processes killed before other proces|
|47562|Inf|Nor|2009-07-23|Apache/2.2.3 (Win32) mod_perl/2.0.3-rc1           |
|47578|New|Nor|2009-07-24|compile ERROR with ssl                            |
|47580|Opn|Nor|2009-07-25|mod_cache sends 200 response instead of 304       |
|47586|New|Nor|2009-07-27|httpd -k start doesn't start service when rotatelo|
|47591|New|Min|2009-07-27|show current HTTP_HOST in mod_status scoreboard   |
|47601|New|Enh|2009-07-29|Support X-Forwarded-For in forward proxy requests |
|47625|New|Nor|2009-08-02|2.2.12 win32 msi installer missing                |
|47634|New|Maj|2009-08-04|mod_ldap connection pool session keepalive not imp|
|47643|New|Enh|2009-08-04|added meta tags to xhtml output for ease of search|
|47657|New|Nor|2009-08-06|Make WebDAV MOVE atomic when replacing files on sa|
|47659|New|Nor|2009-08-07|makefile.win needs check for DBM_LIST, dies on bui|
|47664|New|Nor|2009-08-07|ap_proxy_canonenc: does not recode all high-byte c|
|47665|Inf|Blk|2009-08-09|Apache service well launched but blank Screen     |
|47691|New|Enh|2009-08-12|libtool invocations should use --tag              |
|47693|Opn|Nor|2009-08-13|GET request has race condition w.r.t. replacement |
|47706|Inf|Nor|2009-08-19|(20014)Internal error: proxy: error reading status|
|47716|New|Min|2009-08-20|LimitRequestFieldSize and friends not merged well |
|47719|Opn|Enh|2009-08-20|Broken symbolic link (symlink) causes wrong ErrorD|
|47723|New|Nor|2009-08-22|suEXEC and low RLimitMem gives "crit: invalid uid"|
|47743|Inf|Nor|2009-08-26|mod_so segfaults at server startup in ap_find_load|
|47753|New|Nor|2009-08-27|output and error channels not explicitly passed fo|
|47778|Opn|Enh|2009-09-03|wrong exit value on graceful restart              |
|47780|New|Nor|2009-09-03|Critical errors should be marked by time and level|
|47807|Inf|Nor|2009-09-09|Proxy dialog error with Apache 2.2.13             |
|47808|New|Maj|2009-09-09|Child process core dumps when enabling CRL        |
|47814|Inf|Maj|2009-09-10|openssl_pkcs7_sign error                          |
|47838|New|Enh|2009-09-14|Ability to Dynamically Inject Current Time Into a |
|47874|New|Nor|2009-09-18|mod_fcgid crashes if added during restart         |
|47895|New|Maj|2009-09-24|Incorrect 413 error handling                      |
|47908|New|Min|2009-09-27|'invalid result code' in error_log                |
|47981|New|Nor|2009-10-12|allow language specific html-versions (index.html.|
|47982|New|Nor|2009-10-12|correctly interprete non-standard HTTP_ACCEPT_LANG|
|47988|New|Nor|2009-10-12|Segmentation fault                                |
|47989|New|Nor|2009-10-13|Junk string appended to compressed dynamic content|
|47994|New|Enh|2009-10-14|ScriptInterpreterSource apparently broken in Windo|
|48020|New|Nor|2009-10-17|KCP+ Opera support for mod_auth_digest            |
|48037|Inf|Nor|2009-10-21|mod_proxy_http does not handle asynchronous keepal|
|48045|New|Nor|2009-10-23|Apache 2 initgroups alert, Max OS X, abnormal exit|
|48057|New|Nor|2009-10-26|mod_fcgid creates 1 more process then allowed     |
|48094|New|Nor|2009-11-01|Avoid a race condition in close_worker_sockets()  |
|48107|New|Maj|2009-11-02|Mutual Authentication: Order in ca-bundle influenc|
|48115|New|Enh|2009-11-03|Duration to receive the request, generate response|
|48130|New|Maj|2009-11-04|DAV operations on large filesets consume all the O|
|48154|New|Nor|2009-11-06|Requests through mod_isapi are not parsed by HTTP_|
|48164|New|Enh|2009-11-09|add new parameters to rotatelogs                  |
|48219|New|Nor|2009-11-17|Retrying the worker for seems to omit POST variabl|
|48228|New|Nor|2009-11-18|Renegocation requires multiple client authenticati|
|48246|New|Enh|2009-11-19|Check permissions on file/directory specified for |
|48254|New|Trv|2009-11-20|Bogus "DocumentRoot does not exist" warning when s|
|48283|New|Nor|2009-11-25|Proxy errors since httpd 2.2.12 with Tomcat 6.0.20|
|48291|New|Maj|2009-11-26|mod_substitute loops                              |
|48295|Opn|Nor|2009-11-27|ProxyPassReverseCookiePath: Not changing path corr|
|48301|New|Enh|2009-11-30|Feature request: improved connection status report|
|48309|New|Maj|2009-11-30|libapreq2-2.12: "make test" fails at request.t and|
|48312|Opn|Nor|2009-11-30|ProxyPassReverseCookiePath: Not changing path corr|
|48316|Inf|Nor|2009-12-01|ap_run_insert_filter doesn't work in cache_url_han|
|48354|New|Enh|2009-12-08|void ap_custom_response is not supporting the bina|
|48360|New|Enh|2009-12-09|provide sample configuration file for inclusion in|
|48361|New|Enh|2009-12-09|Add global server option for specifying desired DS|
|48364|Opn|Nor|2009-12-10|PHP-generated pages are not cached in spite of per|
|48369|New|Enh|2009-12-10|add option to automatically restart if a script is|
|48431|New|Nor|2009-12-22|Error logging doesn't work when configured to use |
|48440|Inf|Cri|2009-12-23|Segmentation Fault                                |
|48449|Inf|Nor|2009-12-28|make distclean removes core.c and core_filters.c  |
|48465|Opn|Enh|2009-12-30|Support TCP to connect to backends                |
|48499|New|Nor|2010-01-06|mod_rewrite can't redirect to files with ? in them|
|48500|New|Nor|2010-01-06|mod_mbox mishandles right-click to open msg in new|
|48508|New|Nor|2010-01-07|BalancerMember doesn't accept nocanon directive   |
|48549|New|Enh|2010-01-14|Add Cache-Control s-maxage support                |
|48576|New|Nor|2010-01-19|MOVE or COPY in WebDAV fails with 404 when file ex|
|48585|New|Enh|2010-01-20|mod_cache no longer caches expired content        |
|48602|New|Enh|2010-01-23|use asynch ldap_compare so LDAPTimeout applies    |
|48623|New|Maj|2010-01-26|AuthLDAPURL syntax is not RFC-compliant, prevents |
|48639|New|Enh|2010-01-29|Add htcacheclean as a core monitored process      |
|48652|New|Maj|2010-02-01|"AuthType form" fails if a password contains  '&' |
|48659|New|Maj|2010-02-02|Problem with accents in filename and byte serving |
|48687|New|Nor|2010-02-05|mod_rewrite ignores trailing dot in request URI on|
|48705|New|Enh|2010-02-08|flag to allow newlines in the error log as opposed|
|48712|New|Enh|2010-02-09|Add UID and GID to status page                    |
|48719|New|Nor|2010-02-09|[BUG] mod_proxy_ajp return wrong error message whe|
|48721|New|Nor|2010-02-10|[Patch] Add ProxyAllow to mod_proxy               |
|48731|New|Maj|2010-02-11|Prefork not creating processes after 10 servers ar|
|48732|New|Nor|2010-02-12|[BUG] environment variable SCRIPT_NAME output erro|
|48769|New|Nor|2010-02-18|[PATCH] Processes in the busy list should not be k|
|48777|New|Maj|2010-02-19|proxy balancer not detecting correctly when host (|
|48780|New|Enh|2010-02-19|Enable mod_authnz_ldap to accept valid client cert|
|48792|New|Enh|2010-02-22|httpd util apachectl returns wrong status informat|
|48805|New|Nor|2010-02-23|Corrupted response for HTTPS + KEEPALIVE=ON       |
|48808|New|Enh|2010-02-24|mod_authz_owner support for POSIX access control l|
|48819|Inf|Nor|2010-02-25|After users login on the web page, the page does n|
|48842|Inf|Nor|2010-03-02|mod_log_config logs the full size of the file inst|
|48880|Opn|Nor|2010-03-09|error on make                                     |
|48888|New|Nor|2010-03-10|DOCTYPE definitions nearly 11 years out-of-date   |
|48920|New|Enh|2010-03-15|Breadcrumbs on mod_autoindex path                 |
|48921|Inf|Nor|2010-03-16|mod_mem_cache crash, version 2.2.15.0             |
|48937|New|Enh|2010-03-18|Feature proposal - support sasl_bind              |
|48949|Inf|Cri|2010-03-20|fcgid processes never get killed after graceful re|
|48958|New|Nor|2010-03-22|mod_ldap, ldap credential cache & graceful restart|
|48987|New|Trv|2010-03-25|typo in polish translation of HTTP_UNAUTHORIZED.ht|
|49037|New|Enh|2010-04-02|SSLVerifyClient require_no_ca                     |
|49043|New|Maj|2010-04-04|Using ssi include directive overwrites QUERY_STRIN|
|49058|New|Nor|2010-04-06|Prefork MPM tries to accept on closed listener soc|
|49067|New|Nor|2010-04-08|FTPOptions ShowUnAuthorizedFiles does not work    |
|49068|New|Nor|2010-04-08|UTF-8 URL Encode error                            |
|49087|New|Maj|2010-04-11|MSI installation reports "interrupted installation|
|49114|New|Maj|2010-04-13|NTFS junction directories missing from directory l|
|49123|New|Nor|2010-04-14|mod_proxy_ajp does not send the client's SSL chain|
|49131|New|Nor|2010-04-15|Very long URLs cause 404 or 403 errors with SetAct|
|49133|New|Maj|2010-04-16|Windows service recovery options do not work for A|
|49157|New|Nor|2010-04-20|Issues with xml interface for balancer manager    |
|49187|New|Nor|2010-04-26|Crash mod_mem_cache and mod_svn                   |
|49199|New|Enh|2010-04-27|Implement LDAP scope-aware caching in mod_ldap    |
|49220|New|Nor|2010-04-29|feature request for being able to disable FcgidWra|
|49239|New|Blk|2010-05-01|Apache mod_ssl gives coredump with openssl 0.9.8  |
|49277|New|Nor|2010-05-12|Expose a variable to identify SSL Session renegoti|
|49283|New|Nor|2010-05-12|Language of dates on SSI                          |
|49285|New|Enh|2010-05-13|Relative (local to current directory) URLs do not |
|49348|New|Enh|2010-05-27|[mod_log_config] Output log file name format capab|
|49385|New|Maj|2010-06-03|mod_disk_cache server side included files are inte|
|49387|Inf|Cri|2010-06-03|Unable to modify default charset setting to UTF-8 |
|49391|New|Nor|2010-06-05|mod_disk_cache needs to register a cleanup to kill|
|49396|New|Enh|2010-06-06|PATH_INFO normalization, especially relating to vo|
|49427|New|Nor|2010-06-11|mod_cgid and mod_cgi do not return proper value wh|
|49433|New|Enh|2010-06-13|improving info in server status                   |
|49439|New|Nor|2010-06-14|Bug in mod_userdir which prevents suexec from runn|
|49504|New|Nor|2010-06-25|Solaris 10/x64 worker graceful restart problem    |
|49532|New|Nor|2010-06-30|mod_cache: Set-Cookie headers are appended to cach|
|49553|New|Min|2010-07-05|Set QoS bits via APR2 API instead                 |
|49568|New|Maj|2010-07-07|Apache mod_authnz_ldap built with the MS LDAPSDK d|
|49632|Inf|Nor|2010-07-21|mod_authnz_ldap denies users when search is perfor|
|49633|New|Enh|2010-07-21|Handle AD primary groups in mod_authnz_ldap       |
|49642|New|Nor|2010-07-23|mod_rewrite mistakes encoded question mark as path|
|49643|New|Nor|2010-07-23|WebDav plus mod Negotiation causes directory creat|
|49676|New|Nor|2010-07-30|directory with german umlauts are indented by one |
|49680|New|Maj|2010-07-30|Perl script are not running on Win32, Apache 2.2.1|
|49684|New|Enh|2010-08-01|enhancement for ipv6 implementation               |
|49699|New|Nor|2010-08-03|Inconsistent Keep-alive from proxy to the origin s|
|49715|New|Maj|2010-08-06|ProxyPassMatch Url Encoder Problem                |
|49717|New|Enh|2010-08-06|PATCH: Enable SSL Timeout                         |
|49737|Inf|Nor|2010-08-10|order allow,deny does not work on IPv6            |
|49743|New|Maj|2010-08-12|SSI 'echo encoding="(url/none)"' bug              |
|49746|Opn|Enh|2010-08-12|mod_rewrite urlencode option                      |
|49766|New|Maj|2010-08-17|POST request on CGI script generating empty body c|
|49771|New|Nor|2010-08-17|After graceful restart using mod_proxy_ajp, couldn|
|49772|New|Nor|2010-08-18|mod_deflate kicks itself out on Content-Range resp|
|49798|Opn|Nor|2010-08-22|[mod_log_config] Piped Log scripts process cause w|
|49807|New|Enh|2010-08-23|hard to force Content-Type header for non static f|
|49810|New|Nor|2010-08-23|Mod_autoindex output of header/body/footer scrambl|
|49815|New|Enh|2010-08-24|Enable caching for HTTP Range requests / 206 respo|
|49829|New|Trv|2010-08-26|CGI index command line arguments excessively escap|
|49832|New|Enh|2010-08-26|void ap_custom_response is not supporting the bina|
|49859|Opn|Nor|2010-09-01|url with additional filepath generates bad environ|
|49921|New|Nor|2010-09-13|Trailers in chunked http requests are not handled |
|49926|New|Enh|2010-09-14|New option for mod_log_forensics or mod_log_config|
|49980|New|Nor|2010-09-22|can't use a FIFO for SSL key file; mod_ssl checks |
|49981|New|Enh|2010-09-22|Requesting SSLCertificateKeyFile Dialog functional|
|49990|New|Nor|2010-09-23|Feature request: implement ExpiresActive reset    |
|49996|New|Nor|2010-09-24|Proxied ErrorDocument returns 200 OK response code|
|49997|New|Nor|2010-09-24|wrowe promised me...                              |
|50004|New|Nor|2010-09-26|per-dir rewrite without DocumentRoot or RewriteBas|
|50011|New|Cri|2010-09-27|error running apache, and installing apache as a s|
|50024|New|Min|2010-09-29|Mod_cache/mod_mem_cache and mod_security combinati|
|50038|New|Enh|2010-10-01|What Directives apply to a file/directory? Resulta|
|50041|New|Min|2010-10-04|(9)Bad file descriptor: apr_socket_accept: (client|
|50051|New|Nor|2010-10-07|Log PID in first entry logged for each request    |
|50061|New|Nor|2010-10-08|Semicolon character '%3B' seems to be decoded to '|
|50082|New|Nor|2010-10-12|apachectl status returns incorrect exit code      |
|50112|New|Nor|2010-10-18|buildconf broken in two places                    |
|50116|New|Nor|2010-10-19|Apache fragments packets unnecessarily            |
|50151|New|Nor|2010-10-25|Software caused connection abort and apache proces|
|50155|Inf|Nor|2010-10-25|httpd -s attempts to read SSL certificates        |
|50172|Inf|Nor|2010-10-28|Digest allows access bypassing secuity            |
|50227|New|Enh|2010-11-07|Option to fail SSL handshake for diverted SNI conn|
|50237|Inf|Nor|2010-11-08|webdav LOCK access with multiple threads to same f|
|50261|New|Nor|2010-11-12|graceful restart with multiple listeners using pre|
|50262|New|Nor|2010-11-12|mod_rewrite log ip address vs hostname            |
|50274|New|Nor|2010-11-15|always pass CONTENT_LENGTH to the application     |
|50278|New|Nor|2010-11-16|-DFOREGROUND and ap_unixd_killpg()/ap_os_killpg() |
|50290|Inf|Nor|2010-11-18|vanilla apache 2.2.17 installation crashes (lib-ap|
|50296|New|Nor|2010-11-18|LDAPVerifyServerCert and possibly LDAPTrustedMode |
|50317|New|Nor|2010-11-22|Possible error in mod_cache's "Avoiding the Thunde|
|50336|New|Min|2010-11-25|PUT failures do not emit Allow:                   |
|50344|New|Nor|2010-11-26|ProxyPass does not handle different protocols when|
|50357|New|Enh|2010-11-28|improve matching mechanisms for mime type and enco|
|50372|New|Enh|2010-11-29|any reason for allowing ModMimeUsePathInfo only in|
|50390|New|Nor|2010-11-30|WARNING: Unrecognized options : --disable-ipv6    |
|50402|New|Nor|2010-12-02|SetEnv proxy-sendchunks is ignored for small amoun|
|50412|New|Nor|2010-12-04|if IndexOptions +XHTML, the correct MIME type shou|
|50423|Inf|Nor|2010-12-06|Apache is terminated with signal 11, Segmentation |
|50427|New|Nor|2010-12-07|Windows>=Vista+mod_auth_digest+command line=proble|
|50432|New|Enh|2010-12-08|add PCRE-mode for file based matches              |
|50436|New|Enh|2010-12-08|VirtualHost could behave like people expect it to |
|50444|New|Enh|2010-12-09|Pre-close logging handles in cgid agent           |
|50456|Inf|Nor|2010-12-10|Invalid Error 413 crash Apache                    |
|50464|New|Blk|2010-12-13|undefined reference to `BIO_set_callback' `BIO_set|
|50466|Inf|Maj|2010-12-13|httpd process doesn't recycle                     |
|50473|New|Maj|2010-12-14|zlib.dll Problem                                  |
|50521|New|Nor|2010-12-25|Comment at top of sample main config file is wrong|
|50525|New|Nor|2010-12-28|Header directive won't edit Location header from P|
|50530|New|Enh|2010-12-29|Provide rate limiting for failed authentication at|
|50532|New|Enh|2010-12-30|Mail protection                                   |
|50551|New|Nor|2011-01-06|Some proxied connections ignore ttl setting       |
|50562|Opn|Cri|2011-01-09|wrong PATH_INFO CGI environment with non-ASCII UTF|
|50584|New|Enh|2011-01-14|Add error message when RequestReadTimeout triggere|
|50592|New|Maj|2011-01-15|httpd dumps core on an IPv6 only system           |
|50602|New|Nor|2011-01-17|non thread safe functions used in apache httpd pro|
|50619|New|Min|2011-01-19|After changing resolv.conf signaling httpd doesn't|
|50628|New|Blk|2011-01-21|Core dump happens with Apache 2.2.15 using openssl|
|50630|New|Nor|2011-01-21|Apache return 500 error with authentication by LDA|
|50644|New|Enh|2011-01-24|Add support for maximum number of requests per Kee|
|50654|New|Nor|2011-01-25|FileETag ContentMD5 & Filename, optimisation to Co|
|50693|New|Nor|2011-01-31|AllowOverride Options=(not Foo) should permit no-o|
|50704|Inf|Nor|2011-02-01|mod_cache doesn't cache MultiViews                |
|50712|New|Maj|2011-02-02|Restart button only stops the server ...and do not|
|50727|New|Nor|2011-02-07|ISAPI EXTENSION_CONTROL_BLOCK Missing PostData wit|
|50765|New|Enh|2011-02-11|Runtime Backend Pinning via balancer-manager      |
|50770|New|Nor|2011-02-14|a rotatelogs issue, if time changed               |
|50773|Inf|Nor|2011-02-14|Dav lock database corruption                      |
|50774|New|Enh|2011-02-14|Have a way to invalidate cache without other reque|
|50777|New|Nor|2011-02-14|Back port buildconf specifies AC_PREREQ(2.13) fix |
|50796|New|Enh|2011-02-16|record time between keepalives in access log      |
|50807|New|Maj|2011-02-18|mod_proxy fails to send FIN response when a FIN is|
|50814|New|Nor|2011-02-21|SSI exec not working on Windows (Apache 2.x)      |
|50848|New|Enh|2011-03-01|Content Negotiation type map file precedence could|
|50869|New|Enh|2011-03-04|Need directive to control use and timeout of sessi|
|50873|New|Nor|2011-03-04|httpd does not start properly when built from sour|
|50878|New|Nor|2011-03-05|redundant operation when calling apr_stat         |
|50891|New|Nor|2011-03-08|Apache rewrites WWW-Authenticate headers from CGI |
|50902|Inf|Maj|2011-03-09|on major load on the server, poll() hangs         |
|50916|New|Nor|2011-03-11|RewriteMap program: mod_rewrite sends request but |
|50926|New|Nor|2011-03-14|unexpected <Directory> file-matching behavior     |
|50942|New|Maj|2011-03-17|Apache 2.2.16 forward proxy is 5x times slower tha|
|50945|Opn|Nor|2011-03-18|AJP: Missing support for ErrorOverride            |
|50948|Opn|Nor|2011-03-19|Connection not closed when CGI dies waiting for PO|
|50954|New|Nor|2011-03-21|ProxyRemote doesnt use CONNECT method with https s|
|50959|New|Enh|2011-03-23|Add cache-manifest to the mime type list          |
|50976|New|Nor|2011-03-26|Apache losts client's ip (%a or %h) sometimes.    |
|50999|Opn|Nor|2011-03-30|it seems the configure wrong detect my apr-util ve|
|51001|New|Nor|2011-03-31|patch for hook ap_lua_run_lua_open                |
|51005|New|Enh|2011-04-01|Allow to use username in LDAP filter              |
|51006|New|Blk|2011-04-01|Apache consume all memory and swap when setup as r|
|51019|New|Enh|2011-04-04|[PATCH] Implementation of Asynchronous processing |
|51020|Opn|Nor|2011-04-04|[PATCH] Apache/mod_fcgid.so does not start in comp|
|51022|New|Nor|2011-04-05|Segmentation fault on PUT request                 |
|51030|New|Enh|2011-04-06|Way to terminate CGI immediatly after closing conn|
|51078|Inf|Nor|2011-04-18|[PATCH] mod_fcgid spawned CGI Processes gets orpha|
|51079|New|Enh|2011-04-18|[PATCH] mod_fcgid spawned CGI Process cannot imper|
|51080|New|Nor|2011-04-18|[PATCH] mod_isapi does not support Except:100-Cont|
|51103|Opn|Nor|2011-04-21|mod_reqtimeout does not drop connection and return|
|51107|New|Min|2011-04-22|SetOutputFilter and SetInputFilter should allow "n|
|51118|New|Nor|2011-04-26|LDAP cache is cleared after graceful/restart and o|
|51127|New|Nor|2011-04-27|Make ProxyPassReverseCookiePath work as expected  |
|51168|New|Nor|2011-05-08|mod_status Total Traffic won't take account of int|
|51170|New|Nor|2011-05-09|I/O errors when using keep-alive + mod_ssl        |
|51174|New|Min|2011-05-09|SSLRequire predicates using OIDs unknown to openss|
|51186|New|Blk|2011-05-11|NEw Openssl 1.0.1 with new FIPS                   |
|51190|New|Min|2011-05-12|::/0 does not work with allow from and deny from  |
|51194|New|Nor|2011-05-13|FcgidWrapper does not support paths containing a s|
|51201|Inf|Nor|2011-05-15|Strange behavior REQUEST_METHOD & GET in mod_rewri|
|51223|New|Nor|2011-05-18|304 HTTP Not Modified strips out CORS headers     |
|51224|New|Nor|2011-05-18|mod_dav_fs should respect FileETag                |
|51239|New|Nor|2011-05-21|ap_get_client_block may block continuously sometim|
|51257|New|Nor|2011-05-24|Build failed when cross-compiling: ./gen_test_char|
|51258|New|Enh|2011-05-24|new features for mod_substitute                   |
|51296|New|Enh|2011-05-31|Dynamic engine support using SSLCryptoDevice suppo|
|51297|New|Nor|2011-05-31|Improve error handling during "UNLOCK"            |
|51303|New|Nor|2011-05-31|TraceEnable 500 error                             |
|51312|New|Nor|2011-06-01|mod_filter should support adding to the Vary heade|
|51322|New|Enh|2011-06-04|Prepend and append string to LDAP search parameter|
|51359|Inf|Enh|2011-06-11|Added shebang check for //! so that .js scripts wo|
|51365|New|Nor|2011-06-13|Mod_proxy mangles query string with mod_security  |
|51402|New|Nor|2011-06-21|"ForceLanguagePriority Fallback" not working as im|
|51406|New|Maj|2011-06-21|When listing files in subdirectories, the path is |
|51409|New|Nor|2011-06-21|Sorting options accepted by ls, but ignored       |
|51471|New|Nor|2011-07-04|<DirectoryMatch>ed IndexIgnore doesn't            |
|51479|New|Enh|2011-07-05|[PATCH] AB feature to optionally read in a reusabl|
|51491|New|Nor|2011-07-08|mod_dir breaks POSTs to URLs not ending in /      |
|51495|New|Nor|2011-07-11|mod_substitute cpu and memory limit               |
|51517|New|Maj|2011-07-16|mod_proxy_fcgi is not RFC 3875 compliant (SCRIPT_F|
|51522|Ver|Trv|2011-07-18|Wrong French translation in mpm.html ("Certains Mo|
|51542|New|Nor|2011-07-22|Apache HTTP Server vs PVS-Studio                  |
|51543|New|Nor|2011-07-22|Space in username not properly escaped in log file|
|51552|Inf|Cri|2011-07-25|Apache is not starting (2.2.15)                   |
|51573|New|Enh|2011-07-28|Easy way to erase log files                       |
|51576|Inf|Nor|2011-07-28|mod_rewrite rule stopped working                  |
|51600|New|Enh|2011-08-02|Loading the same certificate in multiple virtual h|
|51603|Inf|Maj|2011-08-02|Apache accepts completely bogus HTTP requests (pos|
|51607|Inf|Nor|2011-08-03|DBDPrepareSQL ( ap_dbd_prepare ) does not work cor|
|51629|New|Nor|2011-08-05|DocumentRoot check incorrect when running under ch|
|51674|New|Blk|2011-08-18|AJP Module Bad Request                            |
|51679|New|Min|2011-08-18|Code signature key expired                        |
|51689|New|Trv|2011-08-19|Cross compiling causes multiple Listen directives |
|51695|New|Trv|2011-08-20|Code clean up (ap_rputs merge)                    |
|51707|New|Nor|2011-08-22|ProxyPassReverse issues within <Location> (differe|
|51709|New|Nor|2011-08-23|ServerName/ServerAlias don't work if Host: header |
|51711|New|Nor|2011-08-23|mod_auth_digest have broken shared mem (nonce) cod|
|51718|New|Enh|2011-08-24|Feature Request: Add shorthand to redirect any Ser|
|51725|New|Nor|2011-08-26|Multiple Range: request accepted as "Range: n-m"  |
|51732|New|Nor|2011-08-29|Inconsistencies in log messages' verbosity levels |
|51747|New|Nor|2011-08-31|mod_fcgid loads entire request into memory while p|
|51757|Inf|Enh|2011-09-02|Add support for SASL auth in LDAP                 |
|51778|Inf|Cri|2011-09-07|while buliding(make) a unix source "httpd-2.2.20.t|
|51797|Inf|Maj|2011-09-10|Crash HTTPD(Windows)                              |
|51814|New|Enh|2011-09-14|mod_proxy in Apache HTTP 2.2 FIN_WAIT2 in server s|
|51842|New|Enh|2011-09-18|Suggesting a new action for the Header directive: |
|51858|Inf|Nor|2011-09-21|weird error for mod_rewrite with more then 3 param|
|51864|New|Nor|2011-09-22|mod_cache returns entire entity from origin server|
|51904|New|Nor|2011-09-28|output to stderr from cgi script causes script to |
|51951|New|Nor|2011-10-04|mod_mbox hang on some e-mails on press@a.o - was I|
|51964|Ver|Nor|2011-10-05|Documentation of RewriteRule flag skip unclear    |
|51965|New|Nor|2011-10-05|--with-z=DIR not being honored                    |
|51982|Opn|Nor|2011-10-06|ProxyPassReverse / balancer://cluster/ adds slash |
|51987|Inf|Nor|2011-10-07|RewriteRule doesn't work correctly with apache 2.3|
|51994|New|Enh|2011-10-07|Mod_authn_socache should have some way to flush th|
|52004|Ver|Trv|2011-10-10|Typo "indexe" in French translation of mpm.html   |
|52007|New|Nor|2011-10-10|Content-Length: 0 not set on proxy response       |
|52038|New|Nor|2011-10-16|NameWidth works incorrectly together with Charset=|
|52039|Inf|Nor|2011-10-16|Browser mode does not always work                 |
|52043|New|Nor|2011-10-17|Directories ".", "..", and "/" do not work correct|
|52081|New|Nor|2011-10-24|segfault if mbox files have unexpected names      |
|52090|New|Maj|2011-10-26|Apache thread hangs with error 500 when sending a |
|52120|Opn|Nor|2011-11-01|mod_cache edge case: uncacheable 304 sends cached |
|52123|New|Maj|2011-11-02|DoS: High memory usage in propfind                |
|52132|New|Nor|2011-11-03|[PATCH] process activity score calculated incorrec|
|52139|New|Nor|2011-11-05|Never Syntax Error on non-existent DocumentRoot   |
|52171|Ver|Nor|2011-11-13|confusing documentation of request phases         |
|52174|New|Enh|2011-11-13|Allow hard lower-limits on the number of fcgi serv|
|52178|New|Nor|2011-11-14|IPv6 IPs as ServerName not allowed                |
|52181|Ver|Nor|2011-11-14|mod_rewrite Technical Details Ruleset Processing d|
|52195|Inf|Nor|2011-11-16|Japanese texts are garbled on mailing list archive|
|52196|Inf|Nor|2011-11-16|winnt mpm, others mpm also have this bug. pool sha|
|52207|Inf|Maj|2011-11-18|Upgrade apache version from 2.0.59 to 2.2.12 or ab|
|52222|New|Nor|2011-11-21|IndexIgnore ignores parent directories in argument|
|52247|New|Nor|2011-11-26|mod_mbox gives up on unexpected message format    |
|52248|New|Nor|2011-11-26|Bugzilla version drop-down list does not offer "un|
|52252|New|Nor|2011-11-27|luajit support broken for (at least) luajit 2.0   |
|52253|Inf|Nor|2011-11-28|Timeout doesn't work. mod_proxy_balancer strongly |
|52264|New|Enh|2011-11-30|Update and complete balancer-manager XML output   |
|52269|Inf|Nor|2011-12-01|[mod_proxy] Apache reverse proxy status code trans|
|52275|New|Nor|2011-12-02|memory leak in proxy_ajp_handler                  |
|52298|Inf|Nor|2011-12-07|Can't enter website with client certificate on an |
|52301|New|Enh|2011-12-07|Error message "RSA server certificate ... CN ... d|
|52302|New|Enh|2011-12-07|Better documentation of how server name is determi|
|52304|New|Nor|2011-12-08|<Limit> Does Not Apply When URI Is Folder         |
|52313|New|Enh|2011-12-09|htdbm enhancement: options for colon-in-username, |
|52322|Inf|Enh|2011-12-13|Providing BBC developed httpd modules for inclusio|
|52342|New|Nor|2011-12-15|ap_internal_redirect dropping filters means incons|
|52370|New|Nor|2011-12-19|apreq_decode/url_decode length miscalculation     |
|52377|New|Enh|2011-12-20|Add Directives to assert user, group, and permissi|
|52383|New|Trv|2011-12-24|Instllation log typo                              |
|52391|New|Cri|2011-12-27|100% CPU usage while using Forward Proxy          |
|52395|New|Nor|2011-12-29|reload results in different end environment to res|
|52403|New|Nor|2011-12-31|FallbackResource doesn't work for non-existent PHP|
|52408|New|Nor|2012-01-01|Directoryindex matching automatically redirects   |
|52415|New|Nor|2012-01-03|LockFile placed inappropriately                   |
|52417|New|Nor|2012-01-03|HEADERS information in the file                   |
|52435|New|Nor|2012-01-06|Apache shutdown automatically                     |
|52439|New|Enh|2012-01-09|It should be possible to treat errors in .htaccess|
|52453|New|Enh|2012-01-11|Ability to configure --logfiledir                 |
|52465|New|Nor|2012-01-13|mod_dir is allowed to redirect proxy requests     |
|52481|New|Nor|2012-01-18|Rotatelog.exe crashes Apache after setting 256MB r|
|52485|New|Nor|2012-01-19|CPU load 100%                                     |
|52494|New|Enh|2012-01-22|allow the Action directive to point in the filesys|
|52495|New|Enh|2012-01-22|CACertificate, CADNCertificate, CARevocation, Cert|
|52501|New|Cri|2012-01-23|child pid 10824 exit signal Segmentation fault (11|
|52505|New|Nor|2012-01-23|Include with directory wildcards gives errors for |
|52509|New|Nor|2012-01-23|Resources protected by .htaccess file may not be a|
|52510|New|Cri|2012-01-23|Segmentation Fault 11                             |
|52520|New|Nor|2012-01-24|ProxyRemote & NoProxy directive can not take IPv6 |
|52532|New|Trv|2012-01-26|VirtualHost added TWICE to name-virtual-host list |
|52539|New|Nor|2012-01-26|Apache mod_dav 400 Bad Request for non-existent co|
|52546|New|Nor|2012-01-27|overwrite SERVER_PROTOCOL environment             |
|52573|New|Nor|2012-02-01|mod_speling case correction fails when URI has dou|
|52578|Opn|Enh|2012-02-02|Wrong "bytes sent" logged when connection is close|
|52594|New|Nor|2012-02-03|rpmbuild -ba errors out with "File not found by gl|
|52595|New|Nor|2012-02-03|requests with gzip+chunked encoded body don't prox|
|52605|Inf|Min|2012-02-05|Please allow request lines longer than 8k         |
|52612|New|Nor|2012-02-06|Default Service Account                           |
|52616|Opn|Enh|2012-02-07|SSLUserName uses SSL_CLIENT_S_DN insted of SSL_CLI|
|52617|New|Maj|2012-02-07|Visit the rewrite page from ServerAlias domain vho|
|52623|New|Nor|2012-02-08|does not build with pcre-8.30                     |
|52644|New|Nor|2012-02-12|document how SSL FakeBasicAuth works with strange |
|52668|New|Trv|2012-02-14|More future safe patch for old MSIE ssl-unclean-sh|
|52670|New|Trv|2012-02-15|please clarify the effect of SSLStrictSNIVHostChec|
|52683|New|Enh|2012-02-16|add a symlink option that rechecks the access perm|
|52700|Inf|Blk|2012-02-17|Not rendering html content instead displaying clie|
|52703|Inf|Maj|2012-02-18|SSL+SNI+client-auth "lost" after some time        |
|52710|New|Nor|2012-02-19|mod_fcgid should set PATH_INFO when configured in |
|52756|Inf|Trv|2012-02-24|proxy_html_module LoadModule line not created in h|
|52759|New|Cri|2012-02-24|Apache httpd child process consuming high CPU Util|
|52790|New|Nor|2012-02-28|ldap caching not sufficient                       |
|52795|Opn|Nor|2012-02-29|mod_fcgid fails to spawn process in C:\Program Fil|
|52806|New|Nor|2012-03-01|configure: --with-included-apr is not supported in|
|52807|New|Nor|2012-03-01|some random strings are accepted by "configure" as|
|52816|New|Nor|2012-03-03|Potential segfault in socache_shmcb_create        |
|52817|New|Nor|2012-03-03|Long directory path sucks (but it's really a valid|
|52822|New|Nor|2012-03-04|Quiet installation not fully quiet                |
|52824|Inf|Nor|2012-03-04|Conflicts between AllowOverride and AllowOverrideL|
|52828|New|Maj|2012-03-05|Child process is not replaced in Windows, after a |
|52832|New|Nor|2012-03-05|numerical configuration entry can be mistakenly in|
|52841|Opn|Nor|2012-03-06|[proxy_balancer:emerg] [pid 25593] AH01177: Failed|
|52851|New|Nor|2012-03-07|Core TimeOut directive doesn't work               |
|52855|Opn|Maj|2012-03-08|mod_ftp does not build against 2.4.x              |
|52860|New|Enh|2012-03-08|Support Transfer-Encoding: gzip                   |
|52865|New|Nor|2012-03-09|Crash by segmentation fault in mod_authn_core in A|
|52870|New|Cri|2012-03-09|100% CPU usage while using Forward Proxy          |
|52874|New|Enh|2012-03-09|Support Use TrustedFirst checking when verifying c|
|52884|New|Nor|2012-03-12|"localhost" leads to start failure                |
|52890|Inf|Nor|2012-03-12|--with-included-apr doesn't work when srclib/apr a|
|52891|New|Nor|2012-03-12|2.2 doesn't perform as well as 1.3                |
|52894|Inf|Nor|2012-03-13|Apache aborts abnormally when ChrootDir is set    |
|52927|Inf|Nor|2012-03-16|[Bug in httpd 2.2.4] [error] (70014)End of file fo|
|52933|New|Nor|2012-03-17|Child survives '-k stop', consuming lots of CPU   |
|52950|New|Nor|2012-03-20|Error when set AuthType to None with valid-user   |
|52963|New|Nor|2012-03-21|Typo in AuthLDAPURL RFC 2255 error message        |
|52975|New|Nor|2012-03-23|Receiving files is suboptimal                     |
|52976|New|Min|2012-03-23|Gratuitous string-duplication in module-configurat|
|52978|New|Enh|2012-03-23|Binding to an interface instead of an address     |
|52995|New|Nor|2012-03-28|httpd -V does not print the default Mutex         |
|53002|New|Nor|2012-03-29|<Location> and auth_form (trailing slash problem?)|
|53015|New|Nor|2012-03-31|missing apr_socket_close                          |
|53016|New|Nor|2012-03-31|missing apr_brigade_destroy                       |
|53023|New|Nor|2012-04-02|mod_rewrite RewriteCond parser error and documenta|
|53037|New|Enh|2012-04-05|clarify mod_ssl documentation on the UID/GID conte|
|53059|New|Nor|2012-04-10|Make httpd easier relocatable by using a variable |
|53098|New|Nor|2012-04-18|mod_proxy_ajp: patch to set worker secret passed t|
|53099|New|Enh|2012-04-18|feature request for mod_remoteip                  |
|53108|New|Enh|2012-04-19|clarification on url-path vs full filesystem path |
|53111|New|Nor|2012-04-20|1% of CMS sites expose database passwords         |
|53121|New|Nor|2012-04-22|Confusing documentation, gzip and deflate         |
|53149|New|Enh|2012-04-25|mod_ldap should/could use mod_socache             |
|53152|Opn|Nor|2012-04-26|RewriteRule documentation: Error about per-directo|
|53156|New|Enh|2012-04-27|CRL validation fails if CRL is missing            |
|53160|New|Cri|2012-04-29|Reverse Proxy mod_deflate doesn't zip back content|
|53183|New|Min|2012-05-03|mod_apreq2 entry point is apreq_module and not apr|
|53193|New|Nor|2012-05-04|SLVerifyClient optional_no_ca + SSLSessionCache = |
|53218|New|Blk|2012-05-11|ProxyPass worker name　(http://localhost:3128/...|
|53233|New|Maj|2012-05-15|Internal error: proxy: error reading status line f|
|53239|New|Maj|2012-05-16|Httpd has problems delivering data on rate-limited|
|53253|New|Maj|2012-05-17|TCP_NOPUSH used with sendfile(2), cause transfers |
|53284|New|Nor|2012-05-24|crash                                             |
|53290|New|Maj|2012-05-24|memory usage                                      |
|53292|New|Min|2012-05-25|add support for HTTP status code 308              |
|53305|New|Nor|2012-05-28|404 errors when adding query string in a balancer |
|53313|New|Nor|2012-05-28|SSI #echo VAR fails (#include OK) if URI/URL has f|
|53319|New|Nor|2012-05-29|Multiple DirectoryIndex statements in the same con|
|53332|New|Nor|2012-05-30|Requests with chunked encoding have no body availa|
|53350|New|Nor|2012-06-01|mod_cache caching 403 responses Apahce 2.2.22     |
|53351|New|Nor|2012-06-02|make fails if layout begins on first line of confi|
|53388|Opn|Nor|2012-06-08|mod_proxy_balanser generates 503 when proxying to |
|53402|New|Trv|2012-06-12|Incorrect error message for mod_ldap params       |
|53461|Inf|Cri|2012-06-23|Compilation problems                              |
|53462|New|Nor|2012-06-25|mod_rewrite does not remove trailing slash when as|
|53479|New|Nor|2012-06-27|mod_rewrite [B] flag should percent-encode the spa|
|53483|New|Enh|2012-06-29|dangerous PCRE patterns in *Match directives      |
|53539|New|Maj|2012-07-12|content type and character set are changing when t|
|53554|New|Nor|2012-07-16|Wrong case for hexadecimal percent encoding [patch|
|53555|New|Maj|2012-07-17|Scoreboard full error with event/ssl              |
|53579|New|Cri|2012-07-20|httpd looping writing on a pipe and unresponsive (|
|53581|New|Blk|2012-07-21|FollowSymlinks doesn't work with DirectoryMatch an|
|53594|New|Enh|2012-07-24|ipad as webserver                                 |
|53595|New|Nor|2012-07-24|Media type qs parameters for MultiViews sent in Co|
|53612|Inf|Nor|2012-07-27|Reverse Proxy causing 500 error SSL proxy 1.0.1c O|
|53618|New|Nor|2012-07-29|proxy_worker_shared fields not maintained in threa|
|53634|New|Nor|2012-08-01|mod_cache returning HTTP 200 for nonexistent resou|
|53638|New|Nor|2012-08-02|Problem with shortcuts to bugzilla in http://httpd|
|53640|Inf|Maj|2012-08-02|make: Fatal error: Command failed for target `htpa|
|53643|New|Cri|2012-08-02|apache segfaults with mod_authn_dbd when dbd_min i|
|53646|New|Nor|2012-08-02|Invalid uniformly distributed balancing of request|
|53651|New|Nor|2012-08-03|Worker failure doesn't have same behaviour as work|
|53667|New|Enh|2012-08-07|Add an equivalent option to "JkOptions ForwardLoca|
|53669|New|Nor|2012-08-07|IndexOptions Incremental IndexOptions documentatio|
|53686|New|Enh|2012-08-09|Status "501 Not Implemented" sent very late       |
|53690|New|Nor|2012-08-09|Calls to semctl() trigger "uninitialized memory" w|
|53692|New|Nor|2012-08-10|mod_auth_form loses request body before login page|
|53693|Opn|Nor|2012-08-10|mod_fcgid performance suffers under increase in re|
|53704|New|Enh|2012-08-13|True online configuration is needed - via LDAP?   |
|53705|New|Nor|2012-08-13|Align server-status balancer display to balancer-m|
|53706|New|Enh|2012-08-13|Include a status display for mod_ldap when present|
|53722|New|Nor|2012-08-15|when -D NO_DETACH is used, no PID file should be c|
|53736|New|Nor|2012-08-17|/balancer-manager doesn't save runtime adjusted se|
|53757|New|Enh|2012-08-21|RewriteMap of type txt should allow specifying col|
|53767|New|Nor|2012-08-23|htcacheclean deletes stale "vary" header files eve|
|53772|New|Nor|2012-08-24|REDIRECT_URL not accessible in mod_proxy          |
|53787|New|Reg|2012-08-28|In forward proxy, doesn't cache disk anymore      |
|53823|New|Nor|2012-09-03|[patch] pure IPv6 only host fix (server/config.c) |
|53835|New|Cri|2012-09-06|mod_proxy_ajp truncate output when using deflate i|
|53870|New|Maj|2012-09-13|Deadlock in CRYPTO_add_lock with Apache 2.2.22 wor|
|53886|New|Nor|2012-09-18|can't start apache control in Redhat Linux 3 X64  |
|53899|New|Nor|2012-09-19|SSL_OP_ALL disables the mitigation code for CVE-20|
|53915|New|Nor|2012-09-21|Colon lost when :port is used in CacheKeyBaseURL  |
|53919|Inf|Enh|2012-09-21|DEFAULT_LOG_FORMAT is not RFC6302 compliant       |
|53923|New|Min|2012-09-23|Overriding CustomLog directive seems impossible   |
|53932|New|Nor|2012-09-25|PROPFIND doesn't support If, If-Match ETag predica|
|53947|New|Enh|2012-09-29|Feature Request, RewriteRule - ProxyPreserveHost f|
|53961|New|Nor|2012-10-04|Null sessions to the default vhost                |
|53970|New|Nor|2012-10-05|Network control directives affects internal subreq|
|53981|New|Nor|2012-10-08|move def of log_request_state from mod_log_config.|
|53988|New|Enh|2012-10-10|Missing FCGIWrapper script should not be a critica|
|54030|New|Enh|2012-10-19|Support subjectAltName when (reverse-)proxying    |
|54033|New|Enh|2012-10-21|Parent languages are not ordered according to Acce|
|54072|New|Reg|2012-10-30|Syntax error front-end virtual-path too long      |
|54102|New|Enh|2012-11-05|new feature: automatic route detection            |
|54118|New|Nor|2012-11-08|Handle leak on parent httpd process when rotatelog|
|54126|New|Maj|2012-11-09|Mod_rewrite failing because of url in query string|
|54134|New|Enh|2012-11-11|new feature: ability to use multiple routes in sti|
|54136|New|Min|2012-11-11|balancer-handler shows xml not, when only xml para|
|54158|New|Nor|2012-11-16|Suggestion regarding 2.0 to 2.2 Upgrade Documentat|
|54183|Inf|Nor|2012-11-21|PROPFIND doesn't report getcontenttype property   |
|54215|New|Maj|2012-11-27|configure fails for httpd 2.2.3 with openssl 1.0.1|
|54221|Opn|Nor|2012-11-28|no ErrorLog prefix on CGI errors                  |
|54222|New|Min|2012-11-28|ServerTokens checking is not complete             |
|54223|New|Nor|2012-11-29|AH00554 error when runtime configuration Includes |
|54252|New|Nor|2012-12-05|acinclude.m4 requires -lz when linking with ssl st|
|54253|New|Nor|2012-12-05|mod_proxy_ftp doesn't handle/log partial or cancel|
|54255|New|Nor|2012-12-06|mod_deflate adjusts the headers "too late", should|
|54269|New|Maj|2012-12-09|mod_proxy_html documentation misses several things|
|54276|New|Nor|2012-12-10|rotatelogs not getting killed on graceful restart |
|54280|New|Nor|2012-12-11|mod_auth_form inline login not working with traili|
|54281|New|Nor|2012-12-11|Stick use Partial parameters from query string    |
|54289|New|Nor|2012-12-13|"ap_get_brigade" api is failing in "AP_MODE_SPECUL|
|54306|New|Enh|2012-12-15|add regexp versions of ProxyPassReverse, ProxyPass|
|54309|New|Trv|2012-12-15|clarification on the <Location> directive when use|
|54310|Opn|Nor|2012-12-15|mod_proxy_html drops meta elements with http-equiv|
|54319|New|Reg|2012-12-17|ProxyPass has no effect in <Location> if rewrite o|
|54339|New|Nor|2012-12-21|piped log entries > PIPE_BUF can be interleaved   |
|54342|New|Nor|2012-12-22|AuthnCacheSOCache can't pass args to socache provi|
|54343|New|Maj|2012-12-22|Add sanity checks for malloc() in mpm_winnt.c and |
|54358|New|Nor|2012-12-29|Status 500 when using ldap on Solaris because apr_|
|54363|New|Nor|2012-12-31|make time conversion caching functions thread-safe|
|54364|New|Nor|2012-12-31|Add ref to mod_fcgid docs                         |
|54365|New|Nor|2013-01-02|Connection closed by server during file transfer  |
|54366|New|Nor|2013-01-02|$sysconfdir/extra/httpd-dav.conf is not built base|
|54367|Opn|Maj|2013-01-02|Location header in response to PUT is not %-escape|
|54385|New|Enh|2013-01-08|SSL configuration independent from virtual hosts, |
|54401|New|Nor|2013-01-10|Suggest to make ProxyPassReverseCookieDomain accep|
|54415|New|Enh|2013-01-14|Please tell the root cause of mutex and scoreboard|
|54431|Inf|Blk|2013-01-16|Unable to start the Apache 2.4.3 windows service. |
|54498|New|Nor|2013-01-28|apache crash on any cgi request with certain http |
|54502|New|Nor|2013-01-29|Apache deadlock on epoll_ctl error (1000 process l|
|54512|Inf|Cri|2013-01-31|Apache hung                                       |
|54517|New|Nor|2013-02-01|proxy balancer: timeout or partial failure of back|
|54518|New|Nor|2013-02-01|mod_rewrite not adding Vary header                |
|54519|New|Nor|2013-02-02|httpd already running                             |
|54526|New|Nor|2013-02-05|mod_proxy_http ignores request abortion           |
|54543|New|Enh|2013-02-10|Compile regex only when need                      |
|54546|New|Nor|2013-02-11|httpd crashes on first HUP after change Listen dir|
|54549|New|Nor|2013-02-11|mod_mime AddEncoding and mod_negotiation fix_encod|
|54556|New|Enh|2013-02-13|New flag to add default rule in rule chain        |
|54560|New|Nor|2013-02-13|Potential segfault on return from ap_server_root_r|
|54563|New|Maj|2013-02-15|mod_webdav ignores quota                          |
|54578|New|Nor|2013-02-18|Bad docs or unchecked code for "LimitRequestFields|
|54587|Opn|Nor|2013-02-19|LDAPConnectionPoolTimeout does not work in all cas|
|54605|New|Enh|2013-02-24|mod_negotiation should cache the info it generates|
|54608|New|Enh|2013-02-25|Support an option to allow page caching when using|
|54622|New|Nor|2013-02-28|shared memory cleanup                             |
|54626|New|Nor|2013-03-01|mod_authnz_ldap through util_ldap.c does not suppo|
|54633|New|Nor|2013-03-04|Invalid % encoding not rejected                   |
|54637|New|Nor|2013-03-05|Digest: secret not used                           |
|54640|New|Nor|2013-03-05|Slow transaction on a balance member is holding su|
|54649|New|Nor|2013-03-06|Incorrect PIDFILE prevent httpd restart           |
|54653|New|Min|2013-03-08|Suggestion to add https example for forward proxy |
|54656|New|Maj|2013-03-09|SNI and SSLProxyCheckPeerCN based on "connection" |
|54657|New|Nor|2013-03-09|DNS lookup failure for load balancer member does n|
|54683|New|Min|2013-03-13|Ignor directive ErrorDocument with null byte      |
|54699|Opn|Enh|2013-03-15|[feature request] cli webaccess tester            |
|54701|New|Cri|2013-03-15|Apache 2.4.3 Migration Issue Not loading the pages|
|54704|New|Nor|2013-03-15|Web Services stalling on it's own                 |
|54719|New|Nor|2013-03-18|httpd should check for and eventually create pid f|
|54752|New|Nor|2013-03-25|mod_ssl should not use uninitialized memory as ran|
|54782|New|Nor|2013-04-02|Memory Corruption errors - mpm_worker mod_perl    |
|54785|New|Nor|2013-04-02|Random crash when httpd server is stopped         |
|54793|New|Nor|2013-04-03|Socket timeout handler can delete uploaded files P|
|54794|New|Reg|2013-04-03|mod_wsgi|fcgid and subversion >= 1.7 issues       |
|54795|New|Nor|2013-04-03|'apxs -g -n' should be self-referring             |
|54796|Inf|Enh|2013-04-03|CustomLog should be able to use syslog as ErrorLog|
|54804|New|Nor|2013-04-05|mod_fcgid sends a Continue 100 response automatica|
|54813|New|Nor|2013-04-08|documnt the Require args used by authz_dbm includi|
|54816|Inf|Nor|2013-04-08|AH00566: request failed: invalid characters in URI|
|54817|New|Nor|2013-04-09|if prefix and sysconfdir are the same then http.co|
|54820|Inf|Cri|2013-04-09|REwriterule stops working                         |
|54824|New|Nor|2013-04-10|Spec file is missing libuuid-devel requirement    |
|54830|New|Enh|2013-04-11|Make SSLPProxyMachineCertificateFile configurable |
|54848|New|Nor|2013-04-15|Client field too short for IPv6 addresses         |
|54856|Inf|Enh|2013-04-17|NSCreateObjectFileImageFromFile                   |
|54858|New|Nor|2013-04-17|ld duplicate                                      |
|54861|New|Blk|2013-04-18|The number of connections with mysql is more      |
|54869|Inf|Nor|2013-04-19|Non-breaking space characters cause httpd to choke|
|54875|New|Nor|2013-04-23|Conditional request predicated on another URL's ET|
|54878|New|Nor|2013-04-23|Multiple Listen directives prevent server to start|
|54905|Inf|Cri|2013-04-29|Apache2 loops in child Segfaults                  |
|54910|New|Enh|2013-04-30|Format %{Foobar}o cannot be used to log Date and S|
|54911|New|Enh|2013-04-30|Allow logging of fields set by a backend server in|
|54914|New|Nor|2013-04-30|mod_dir DirectoryIndex breaks WebDAV PROPFIND / DE|
|54915|New|Nor|2013-04-30|GET on a WebDAV-enabled collection, with Directory|
|54918|New|Enh|2013-05-02|Implement RFC 6797 HTTP Strict Transport Security |
|54919|Inf|Nor|2013-05-02|*** glibc detected *** /usr/sbin/httpd: double fre|
|54930|New|Nor|2013-05-06|Allow empty message in ErrorDocument directive    |
|54934|Inf|Cri|2013-05-07|Apache is crashing intermittently with a message "|
|54936|New|Nor|2013-05-08|Some potential bugs reported by static analysis to|
|54949|New|Nor|2013-05-10|[PATCH] mod_cache: fix uninitialized tmppath varia|
|54952|Inf|Cri|2013-05-10|[Fri May 10 17:39:01 2013] [error] proxy: CLUSTER:|
|54953|New|Nor|2013-05-11|<VirtualHost 0.0.0.0:80> matches IPv6             |
|54958|New|Nor|2013-05-13|mod_deflate + mod_mime with SSI gives mixed compre|
|54962|New|Maj|2013-05-14|Apache will set incorrect Content-Length header an|
|54965|New|Enh|2013-05-14|Allow ProxyPassMatch in Directory context         |
|54976|New|Nor|2013-05-15|ProxyPass parameter "acquire" and "ttl" ignored in|
|54986|New|Maj|2013-05-16|httpd hanging on large form submit in ap_run_handl|
|54989|New|Nor|2013-05-17|Apache Segfaults on OS X at random - how can I dia|
|54993|New|Nor|2013-05-20|Critical error: File descriptor in bad state: apr_|
|54998|Ver|Nor|2013-05-21|Apache 2.4 terminates all SSL connections using an|
|55000|New|Nor|2013-05-21|Memory usage per process doubles when Apache is co|
|55021|New|Enh|2013-05-28|Support arbitrary sql to authentication username/p|
|55022|Inf|Cri|2013-05-28|child pid 3123 exit signal Bus error (10) - Apache|
|55034|Inf|Maj|2013-05-31|Apache 2.4.4 won't open more that 32k VH file hand|
|55039|New|Enh|2013-05-31|"RequestHeader edit" can't access environment vari|
|55045|New|Nor|2013-06-01|calls to gets() in test_find.c and test_parser.c  |
|55068|New|Enh|2013-06-06|root permissions when writing to per vhosts errorl|
|55069|New|Min|2013-06-06|notice message in error_log even when LogLevel err|
|55070|Opn|Enh|2013-06-06|mod_fcgid stderr always goes to main error log    |
|55072|New|Nor|2013-06-07|ErrorLog doesn't work well when apache shutdown   |
|55093|New|Nor|2013-06-12|[PATCH] mod_fcgid 2.3.7 truncates large posts on R|
|55096|New|Nor|2013-06-12|Make not running on httpd configure Solaris       |
|55098|New|Nor|2013-06-13|does not listen to IP4 when both IP4 address and I|
|55106|New|Enh|2013-06-17|ProxyErrorOverride considers response codes >= 400|
|55117|New|Nor|2013-06-18|GracefullTimeout for worker threads               |
|55147|New|Nor|2013-06-26|"Header always" w/ cache different in 2.4         |
|55148|Inf|Nor|2013-06-26|Error during SSL Handshake with remote server     |
|55152|New|Nor|2013-06-28|graceful restart adjusts to new balancer members, |
|55156|New|Nor|2013-06-28|mod_cache not respecting s-maxage cache-control he|
|55178|New|Nor|2013-07-01|[PATCH] mod_authnz_ldap SASL authentication suppor|
|55192|New|Trv|2013-07-03|htaccess error messages missing request context   |
|55193|New|Min|2013-07-03|ErrorLogFormat is ignored by some modules         |
|55226|New|Enh|2013-07-09|Request for "domain cluster" feature for mod_proxy|
|55234|New|Maj|2013-07-10|Working of attribute "protocol" attribute "protoco|
|55276|Inf|Enh|2013-07-17|Add REST API for load balancer for dynamic registr|
|55278|New|Nor|2013-07-18|mod_session's cookie may be empty, is repeated twi|
|55284|New|Nor|2013-07-20|repeatable segv                                   |
|55286|New|Nor|2013-07-21|Floating point exception (8) in mod_auth_digest   |
|55293|New|Nor|2013-07-22|Incorrect default MIME type for .woff fonts       |
|55306|New|Nor|2013-07-25|Error when copying svn repository, which contains |
|55323|New|Nor|2013-07-29|Double unescaped uri in sub request handler       |
|55327|New|Nor|2013-07-30|Segmentation fault when stopping Apache 2.4.6 norm|
|55340|New|Maj|2013-08-01|Listen for valid, unconfigured IP address passes c|
|55344|New|Nor|2013-08-02|missing ap_hook_monitor on windows                |
|55346|New|Nor|2013-08-02|When on filled quota filesystem, mod_fcgid init in|
|55348|New|Nor|2013-08-02|%h is not changed in logging, only %a             |
|55351|New|Enh|2013-08-04|allow ProxyPassReverseCookieDomain to automaticall|
|55362|New|Nor|2013-08-05|Apache httpd sends "400 Bad Request" to client due|
|55379|New|Min|2013-08-07|htdigest -c doesn't behave as described anymore   |
|55394|New|Nor|2013-08-09|apache 2.4 randomy crashes with signal 6          |
|55401|New|Enh|2013-08-11|document that force-proxy-request-1.0 implies prox|
|55415|New|Maj|2013-08-14|Proxy loop caused by ProxyErrorOverride and ErrorD|
|55431|New|Nor|2013-08-16|mod_negotation does not force the mime type listed|
|55433|New|Nor|2013-08-16|mod_proxy ignores final status code for aborted re|
|55443|Inf|Maj|2013-08-17|never gives 300 multiple choices                  |
|55445|New|Maj|2013-08-18|mod_socache_memcache ignores expiry, creating eter|
|55447|New|Enh|2013-08-18|make type-maps usable again, by making them access|
|55448|New|Nor|2013-08-19|segfault in set_max_workers at event.c:3194 on SIG|
|55449|New|Maj|2013-08-19|AH01185: worker slotmem_create failed --> slotmem |
|55452|New|Maj|2013-08-19|Redirect                                          |
|55458|New|Enh|2013-08-20|allow to configure what mod_ssl responds when one |
|55460|New|Enh|2013-08-21|allow service names to be used in the Listen direc|
|55467|New|Nor|2013-08-21|Support for OpenSSL custom TLS extensions and supp|
|55523|New|Trv|2013-09-04|auth_groupfile error log on access even though suc|
|55535|Inf|Nor|2013-09-08|incorrect check state parametr                    |
|55540|New|Cri|2013-09-09|mod_proxy gzip chunked issue (sample site provided|
|55549|New|Min|2013-09-11|AuthLDAPSubGroupAttribute doesn't do anything     |
|55550|New|Nor|2013-09-11|AuthLDAPSubGroupClass checking is very inefficient|
|55556|New|Nor|2013-09-13|apachebench (ab) doesn't use so_reuseaddr         |
|55557|New|Nor|2013-09-14|Some cppcheck reports                             |
|55573|New|Enh|2013-09-19|FileETag needs MTimeSeconds, MTime with granularit|
|55581|New|Enh|2013-09-22|Support concurrent connections to same FastCGI pro|
|55590|Inf|Maj|2013-09-24|second commit is failing if space is in file name |
|55596|New|Enh|2013-09-25|Add date format used by Expires header            |
|55607|New|Enh|2013-09-28|Re-set HOME environment variable to directory from|
|55615|New|Nor|2013-09-30|Connections are starved and not balanced when conc|
|55619|New|Nor|2013-10-02|Apache httpd reported 500 internal error when uplo|
|55627|New|Min|2013-10-04|Remove unnecessary APLOGNO() for trace logging per|
|55636|Inf|Cri|2013-10-07|long lost child came home - Apache is not respondi|
|55646|Inf|Nor|2013-10-10|non-2xx responses are not considered errors       |
|55654|New|Nor|2013-10-15|Extract variables from configuration without start|
|55670|New|Min|2013-10-18|Startup may fail silently at post_config          |
|55673|New|Nor|2013-10-18|httpd fails to start with SSLProxyMachineCertifica|
|55680|New|Enh|2013-10-20|online manual directory option doesn't exist      |
|55698|New|Maj|2013-10-24|Apache 2.2 + mod_fcgid 2.3.7 (CentOS 6.4) graceful|
|55700|New|Enh|2013-10-24|add something like RewriteOptions InheritDown     |
|55707|New|Nor|2013-10-25|SSLProtocol directive seem to be ignored over diff|
|55708|New|Nor|2013-10-25|Access violation in msvcrt.dll when calling getenv|
|55711|New|Min|2013-10-28|--enable-foo doesn't enable foo                   |
|55712|New|Nor|2013-10-28|Relative <!--#include virtual="../file.shtml"--> g|
|55720|New|Enh|2013-10-29|separate LDAP Bind timeout from LDAPTimeout       |
|55738|New|Nor|2013-11-03|PVS-Studio: few issues                            |
|55763|New|Nor|2013-11-09|raise roots soft RLIMIT_NPROC on linux for high ma|
|55774|New|Nor|2013-11-13|ab: optionally accept tls client certificate      |
|55781|New|Nor|2013-11-15|ajp_read_header: ajp_ilink_receive failed; 120006)|
|55786|New|Maj|2013-11-16|SSLVerifyClient and OptRenegotiate result in a 403|
|55787|New|Maj|2013-11-16|Chroot fails with "Cannot chroot when not started |
|55790|New|Maj|2013-11-17|mod_fcgid lockfile hardcoded to be in /tmp        |
|55793|New|Enh|2013-11-18|DTrace/SystemTap support                          |
|55808|New|Nor|2013-11-21|File integrity verification using MD5 and SHA1    |
|55819|Inf|Nor|2013-11-27|Closing connection behaviour                      |
|55828|New|Cri|2013-11-28|Httpd not start if use ProxyPass balancer://      |
|55834|New|Maj|2013-12-02|Apache does not honor the openssl library path giv|
|55838|New|Nor|2013-12-03|PHP files are being executed instead of downloaded|
|55841|New|Nor|2013-12-04|Misleading news items on bugfix releases ("This ve|
|55856|New|Nor|2013-12-08|YYEMPTY (-2) used as index into yytname (const arr|
|55866|New|Nor|2013-12-11|When ProxyPreserveHost is on, SSL expects the wron|
|55878|New|Nor|2013-12-12|mod_fcgid kills spawned processes too early       |
|55881|New|Nor|2013-12-13|segmentation fault at proxy_util.c:1546           |
|55883|New|Enh|2013-12-14|string callers of ap_expr should be able to transf|
|55887|New|Maj|2013-12-16|In Windows apache, when user access to /con, apach|
|55897|New|Nor|2013-12-17|[PATCH]patch with SO_REUSEPORT support            |
|55898|New|Enh|2013-12-17|[RFE] listen on unix socket?                      |
|55914|New|Reg|2013-12-20|child exit segmentation fault after apache gracefu|
|55919|New|Nor|2013-12-22|EPREFIX and dynamic modules                       |
|55942|New|Nor|2014-01-01|400 - Bad Request on POST (Windows Server 2012 Hyp|
|55952|New|Nor|2014-01-05|ab: SSL keep-alive fails with apr_pollset_poll: Th|
|55962|New|Enh|2014-01-06|mod_remoteip should not allow an external proxy to|
|55963|New|Nor|2014-01-07|Add application/ld+json to mime.types             |
|55981|Opn|Nor|2014-01-09|mod_mbox hang on some e-mails on user@openoffice.a|
|55985|Opn|Nor|2014-01-10|apache does not reopen logs when multiple graceful|
|55989|Opn|Enh|2014-01-11|write to error log upon RewriteRule [F]orbidden   |
|55991|New|Nor|2014-01-12|mod_charset_lite doesn't bail out on non-identity |
|56009|Inf|Cri|2014-01-14|Memory leak in httpd 2.4.3 over time with persista|
|56014|New|Nor|2014-01-15|MOd rewrite CO Cookie method the lifetime flag not|
|56028|New|Enh|2014-01-17|Add http/1.0, http/1.1 NPN advertisement to enable|
|56034|New|Nor|2014-01-20|CPU consumption due to circular linked list in ap_|
|56040|New|Enh|2014-01-21|should be able to remove Max-Age cookie parameter |
|56041|New|Enh|2014-01-21|should be able to disable session expiry increment|
|56052|New|Nor|2014-01-22|ap_session_load called multiple times for expired |
|56055|New|Nor|2014-01-23|Route is not extracted properly when a session coo|
|56064|New|Enh|2014-01-25|Optimize PNGs                                     |
|56067|New|Nor|2014-01-27|FallbackResource doesn't work if directory exists |
|56081|New|Maj|2014-01-28|Apache 2.2.26 SIGSEGVs when POST'ing data         |
|56091|Inf|Nor|2014-01-30|SSL handshake error when httpd compiled on Oracle |
|56098|New|Nor|2014-02-01|duplicate cookie                                  |
|56101|New|Cri|2014-02-03|Apache 2.4.6 ceases processing requests (scoreboar|
|56102|New|Nor|2014-02-03|SSL_CLIENT_S_DN_x509_0 is undefined in the environ|
|56109|New|Nor|2014-02-05|Cannot increase the read limit                    |
|56113|New|Nor|2014-02-06|dist commit messages missing from mail-archives di|
|56131|New|Nor|2014-02-12|ProxyPassReverse / zealously replaces Location hea|
|56135|New|Nor|2014-02-13|Add DC to list of x509 components                 |
|56152|New|Nor|2014-02-18|ProxyBlock does not accept network addresses      |
|56176|New|Nor|2014-02-21|mod_substitute truncates the response body if the |
|56188|New|Nor|2014-02-25|mod_proxy_fcgi does not send FCGI_ABORT_REQUEST on|
|56209|New|Nor|2014-03-03|Uninitialised variables in os/win32/ap_regkey.c   |
|56226|Ver|Nor|2014-03-06|per VirtualHost KeepAliveTimeout is not recognized|
|56229|New|Enh|2014-03-06|ocsp ProxyHost and ProxyPort support              |
|56230|New|Nor|2014-03-07|mod_access_compat can log a bogus client denied me|
|56235|New|Nor|2014-03-07|quotes should be optional around expr             |
|56247|New|Cri|2014-03-12|semaphore creation for proxypass                  |
|56250|New|Nor|2014-03-12|sbindir in config.layout for Apache has bin instea|
|56251|New|Nor|2014-03-12|Increase maximum length of FcgidInitialEnv string |
|56252|New|Enh|2014-03-12|make install as privileged user creates files not |
|56262|New|Nor|2014-03-14|ab does not work with extremely long cookies      |
|56264|New|Trv|2014-03-14|Confusing error with .htaccess rewrite to proxy wh|
|56270|New|Enh|2014-03-15|--with-ssl=/foo w/o pkgconfig needs help on AIX 64|
|56288|New|Enh|2014-03-19|rewrite URLs in style attributes                  |
|56289|New|Nor|2014-03-19|Buffer overflow in mod_proxy_html's string replace|
|56308|New|Nor|2014-03-24|1 second delay in handle request kills performance|
|56312|New|Nor|2014-03-25|Can't configure different balancing workers that c|
|56314|New|Nor|2014-03-25|exiting from MPM-worker child caused assert in apr|
|56326|New|Nor|2014-03-27|cache_quick_handler does not serve responses with |
|56331|New|Nor|2014-03-29|windows 'access denied' during revalidaton of reso|
|56333|New|Enh|2014-03-31|API to resume a SUSPENDED connection              |
|56362|New|Maj|2014-04-08|ldaps only works with port 636. Non-standard port |
|56379|New|Nor|2014-04-09|Number of columns in the results returned from pgs|
|56395|New|Enh|2014-04-11|Allow SERVER_ADDR environment variable to be optio|
|56404|New|Nor|2014-04-12|endless loop  when connect to a website(https)  wh|
|56413|New|Blk|2014-04-15|can not restart httpd on centos 5.10 64bit        |
|56422|New|Nor|2014-04-17|authnz_ldap with other forms of authn can fail req|
|56457|New|Nor|2014-04-25|mod_proxy_html.c: 2 * cut'n'paste errors          |
|56473|New|Nor|2014-04-30|ETags don't change when headers do                |
|56475|New|Enh|2014-04-30|Allow TLS record size to be configured            |
|56483|New|Enh|2014-05-02|add disableKeepAlivePercentage similar to tomcat h|
|56493|New|Min|2014-05-06|mod_expires should not set expires in future for s|
|56495|New|Nor|2014-05-06|Application behind mod_proxy does not get SessionH|
|56500|Opn|Enh|2014-05-07|vhosts priority order with wildcard               |
|56504|New|Nor|2014-05-08|cannot build static support binaries              |
|56508|New|Nor|2014-05-09|Requiring SNI - SSLStrictSNIVHostCheck semantics  |
|56517|New|Enh|2014-05-12|Virtualhosts cannot inherit parent CustomLog      |
|56528|New|Enh|2014-05-15|"bad flags delimiter" - improve helpfulness       |
|56541|New|Nor|2014-05-18|Proxy 502's on large file post requests           |
|56559|New|Nor|2014-05-25|multiple unix sockets in one virtualhost fails    |
|56569|New|Nor|2014-05-27|Null CRC in gzip footer with mod_cgid and ErrorDoc|
|56587|New|Nor|2014-06-03|Many VirtualHost's with SSLEngine On              |
|56590|New|Enh|2014-06-04|(REST-) API for configuring balancer manager remot|
|56594|Inf|Nor|2014-06-05|mod_authn_dbd, mod_dbd and mod_ssl                |
|56598|New|Nor|2014-06-06|Content-Length header should be always interpreted|
|56621|New|Nor|2014-06-13|Rotatelogs.exe first start                        |
|56622|New|Nor|2014-06-13|mod_reqtimeout incorrectly applies timeouts to CON|
|56626|New|Nor|2014-06-15|Add info about rotatelogs to log rotation document|
|56633|New|Nor|2014-06-16|mod_auth_basic breaks mod_autoindex               |
|56645|New|Maj|2014-06-19|socket callback with timeout callback causes infin|
|56664|New|Nor|2014-06-24|Proxy retry timeout does not cope with system time|
|56687|New|Nor|2014-07-01|ProxySourceAddress failed to bind socket to local |
|56697|New|Maj|2014-07-04|status page still shown while blocked             |
|56718|New|Nor|2014-07-14|Cleanup request Host headers when absolute URI are|
|56719|New|Nor|2014-07-14|parallel requests get served with delays          |
|56738|New|Enh|2014-07-17|Ability to extract route from cookie with regexp  |
|56740|New|Nor|2014-07-18|suspended_count not maintained properly with wstun|
|56750|New|Enh|2014-07-20|SuexecUserGroup replacement                       |
|56751|New|Maj|2014-07-20|Fails to properly mitigate Slow Post DoS attack   |
|56753|New|Nor|2014-07-21|mod_lua.so: symbol luaL_openlib: referenced symbol|
|56778|New|Nor|2014-07-28|while running make command i got this error       |
|56794|New|Nor|2014-07-31|Added AuthDBDFullAuthQuery option                 |
|56795|Inf|Nor|2014-07-31|Apache 2.4.10 Program received signal SIGPIPE, Bro|
|56818|Inf|Nor|2014-08-05|SetEnvIf may set invalid string length on empty st|
|56843|New|Enh|2014-08-12|Support different OCSP stapling max ages          |
|56868|New|Nor|2014-08-18|relative LuaRoot broken                           |
|56879|New|Nor|2014-08-22|Information disclosure                            |
|56889|New|Nor|2014-08-26|Close state never dies                            |
|56898|New|Nor|2014-08-28|Headers in err_headers_out are not returned when a|
|56918|Opn|Blk|2014-09-06|error: 'ap_copy_scoreboard_worker' undeclared here|
|56926|New|Nor|2014-09-08|Filename causes AH02599 slotmem issue             |
|56933|New|Min|2014-09-09|not sure it's an appache bug : some browser want t|
|56942|New|Reg|2014-09-10|Unable to implement TRANSFER-CHUNKED:ENCODING with|
|56943|New|Nor|2014-09-10|mod_proxy_connect - AH02447: err/hup on backconn  |
|56977|New|Maj|2014-09-12|segfaults when using mod_mem_cache + mod_disk_cach|
|56986|New|Blk|2014-09-17|chunked Transfer-Encoding forbidden: /test/test.dl|
|57014|New|Cri|2014-09-24|Incorrect test for CC_FOR_BUILD prevents build (on|
|57023|New|Nor|2014-09-26|Socache shmcb don't cache file bigger than 11k    |
|57028|New|Enh|2014-09-27|mod_spdy - support Apache 2.4                     |
|57044|New|Nor|2014-09-29|[PatchAvailable] Use base64url in mod_unique_id ('|
|57045|New|Nor|2014-09-30|dumpio output strings are missing                 |
|57046|New|Enh|2014-09-30|Add additional parameter to enable check URL befor|
|57056|New|Maj|2014-10-03|Rewrite port is taken into hostname               |
|57067|New|Nor|2014-10-08|A proxy worker both standalone and balancer member|
|57069|New|Nor|2014-10-08|apache ssl timeout during chunked request in rever|
|57073|New|Cri|2014-10-09|Intermittent Connection Issues using default httpd|
|57085|New|Enh|2014-10-14|Implement Proxy Protocol in httpd                 |
|57087|New|Nor|2014-10-14|mod_proxy_fcgi doesn't send cgi CONTENT_LENGTH var|
|57100|Ver|Nor|2014-10-16|"SSLProtocol ALL" is ignored for virtual hosts    |
|57101|New|Enh|2014-10-16|[PATCH] Better error reporting when child spawn fa|
|57109|New|Nor|2014-10-17|GPG verification examples are wrong               |
|57119|Opn|Enh|2014-10-20|Suppress address reuse / DNS cache in mod_proxy   |
|57120|New|Nor|2014-10-21|Disable SSLv3 by default (POODLE)                 |
|57121|New|Nor|2014-10-21|ocsp stapling should not pass temporary server out|
|57131|New|Nor|2014-10-22|OCSP Stapling scalability concern                 |
|57159|New|Min|2014-10-28|mod_ssl OCSP Stapling directives don't support per|
|57160|New|Nor|2014-10-29|httxt2dbm doesn't generate files on NAS           |
|57174|New|Nor|2014-10-31|Update windows visual studio build                |
|57210|New|Nor|2014-11-14|LuaHookMapToStorage not firing in per-directory co|
|57211|New|Enh|2014-11-14|Config-time options                               |
|57212|Opn|Nor|2014-11-14|Headers returned by scripts are limited to 8190 by|
|57218|New|Nor|2014-11-15|[Feature Request] Apache Bench (AB) to output a cs|
|57219|New|Nor|2014-11-15|ApacheBench quits unexpectedly with high concurren|
|57220|New|Nor|2014-11-15|[Feature Request] Add option to ApacheBench to giv|
|57228|New|Nor|2014-11-17|glibc detected *** httpd: double free or corruptio|
|57229|New|Maj|2014-11-17|mod_sed dies on long lines                        |
|57286|New|Nor|2014-11-29|Symbolic links are not honoured                   |
|57298|New|Min|2014-12-02|RewriteBase inside FilesMatch behaves oddly       |
|57299|New|Enh|2014-12-02|mod_session_dbd should not make a database call pe|
|57300|New|Enh|2014-12-02|mod_session_dbd should not save the session at eac|
|57301|New|Enh|2014-12-02|Add SessionMaxAgeAbsolute Directive               |
|57304|Inf|Nor|2014-12-03|MySQL DBD Authentication Incompatible with SSL    |
|57311|New|Nor|2014-12-04|BalancerMember enclosed by <If> gives syntax error|
|57313|New|Nor|2014-12-05|The DefaultType directive has been removed        |
|57327|New|Nor|2014-12-08|mod_ssl seg fault on exit                         |
|57334|Ver|Maj|2014-12-09|Segmentation fault in SSL_renegotiate at ssl_lib.c|
|57337|New|Nor|2014-12-10|Content negotiation fails with conditional Redirec|
|57339|New|Enh|2014-12-10|ErrorLogFormat doesn't allow logging in Internet d|
|57360|New|Nor|2014-12-17|Fail gracefully on certificate/key mismatch       |
|57372|New|Nor|2014-12-19|httpd will lookup every home directory while start|
|57374|Ver|Nor|2014-12-19|Event MPM: Wrong KeepAliveTimeout when system cloc|
|57375|New|Enh|2014-12-19|Support LibreSSL as an alternative toolkit for mod|
|57379|New|Nor|2014-12-20|[patch] Makefile.in  with mpm-shared, cgi and cgid|
|57383|New|Cri|2014-12-21|Error retrieving Report: An Existing connection wa|
|57386|New|Blk|2014-12-22|html5 lost some comments                          |
|57398|New|Maj|2014-12-26|AH01075: Error dispatching request to : (passing b|
|57399|New|Nor|2014-12-28|Many unnecessary CPU wakeups per second           |
|57406|New|Nor|2014-12-31|cgi-bin script is not executing                   |
|57412|New|Maj|2015-01-04|rewrite rules causes duplicate requests           |
|57416|New|Nor|2015-01-06|htcacheclean thinks the cache is smaller than it a|
|57424|Opn|Nor|2015-01-07|mod_rewrite not using ap_context_document_root    |
|57436|New|Enh|2015-01-12|Option to strip extra data after websocket request|
|57439|New|Enh|2015-01-13|Allow to change body timeout per location         |
|57448|New|Nor|2015-01-16|SSI <!--#set --> cannot capture backreferences fro|
|57453|New|Maj|2015-01-17|403 error when virtualhost configured with non-exi|
|57471|New|Nor|2015-01-20|Apache 2.4.10 Compilation fails when compiling aga|
|57477|New|Nor|2015-01-21|mod_auth_digest AH00052: child pid $pid exit signa|
|57483|New|Nor|2015-01-22|Omit "Keep-Alive" header on 1.1 connections       |
|57492|New|Nor|2015-01-24|incomplete chunked-transfered request body is not |
|57506|New|Nor|2015-01-27|<If> directive doesn't work within a <Location> se|
|57510|New|Enh|2015-01-28|Engine keyform support for private keys           |
|57511|New|Maj|2015-01-28|Opening plain TCP Socket on SSL port causes denial|
|57515|New|Nor|2015-01-30|Define/Undefine don't work reasonably outside of g|
|57519|New|Nor|2015-02-01|change SSLv2 to SSLv3 or remove SSLv2 support allt|
|57526|Opn|Maj|2015-02-03|Apache 2.2.29_openssl-1.0.1k_x86_64 Error creating|
|57529|Opn|Nor|2015-02-03|htcacheclean doesn't show the cached URL with '-a'|
|57585|New|Nor|2015-02-13|httpd fails to start if there is an IncludeOptiona|
|57590|New|Nor|2015-02-18|loading mod_proxy_http makes rewriteRule's [proxy]|
|57591|New|Nor|2015-02-18|DirectoryIndex directive cannot be overwritten    |
|57616|New|Maj|2015-02-23|AB - DNS roundrobin support                       |
|57624|New|Enh|2015-02-23|Provide support for http/2.0                      |
|57631|New|Nor|2015-02-24|Useless test in acinclude.m4                      |
|57632|New|Nor|2015-02-24|mod_systemd passes invalid default to APACHE_MODUL|
|57635|New|Nor|2015-02-25|meta-refresh is not rewritten by mod_proxy_html   |
|57636|New|Nor|2015-02-25|URLs without protocol are not rewriten by mod_prox|
|57641|New|Maj|2015-02-27|mod_substitute: Invalid merge order               |
|57646|New|Enh|2015-02-27|SSLEngine inside If directive                     |
|57660|New|Trv|2015-03-04|AB - free memory allocated by xmalloc and xcalloc |
|57680|New|Nor|2015-03-09|SSLSessionCacheTimeout has no effect              |
|57685|New|Nor|2015-03-10|Requests are denied while the mod_cgid daemon star|
|57691|New|Nor|2015-03-12|mod_proxy/proxy_util confuses UDS scheme with HTTP|
|57695|New|Nor|2015-03-12|[core:warn] [pid 1120] (101)Network is unreachable|
|57710|New|Nor|2015-03-15|Wildcard matching for logging headers             |
|57725|New|Enh|2015-03-18|ApacheBench: include http status code in gnuplot o|
|57742|New|Nor|2015-03-23|"reliable piped logging" doesn't work for ErrorLog|
|57745|New|Nor|2015-03-23|httpd exits 1 with no stderr when proxy_balancer_m|
|57746|New|Nor|2015-03-23|Apache hangs on startup using MPM event           |
|57751|Inf|Maj|2015-03-24|Problems with proxy reverse to websockets         |
|57756|New|Enh|2015-03-25|Config options for handling of pipelined request  |
|57757|New|Cri|2015-03-25|extern apr_xlate_t *ap_locale_to_ascii variable gi|
|57771|New|Nor|2015-03-27|cleanup_script uses incorrect connection ID       |
|57774|Inf|Nor|2015-03-28|httpd.conf <IfModule proxy_html_module> content er|
|57777|New|Nor|2015-03-30|Security concerns with documentation of AddHandler|
|57781|New|Nor|2015-03-31|disable reconnection after connection error       |
|57784|New|Enh|2015-03-31|[RFE] Multiple ErrorLog directives                |
|57785|New|Nor|2015-04-01|REDIRECT_URL is not suitable for use in server-gen|
|57795|Opn|Maj|2015-04-07|mod_proxy_wstunnel sometimes does not connect and |
|57800|New|Nor|2015-04-09|High CPU usage in ap_core_output_filter           |
|57807|New|Enh|2015-04-13|Build-configurable environment variable length    |
|57810|New|Nor|2015-04-13|Should apache ignore difference in trailing dot be|
|57813|New|Nor|2015-04-14|Rewrite 'pre-compressed content' recipe using 2.4 |
|57814|New|Nor|2015-04-14|Teach mod_deflate how to serve pre-comressed conte|
|57819|New|Nor|2015-04-15|Need a conventions document                       |
|57832|New|Enh|2015-04-19|Reduction of response splitting attacks consequenc|
|57853|Inf|Nor|2015-04-24|mod_proxy_http sends request with header 'Expect: |
|57868|New|Nor|2015-04-28|SIGSEV when lacking correct DB access permissions |
|57876|New|Reg|2015-04-30|logresolve.exe on any Windows immediately crashes |
|57878|New|Nor|2015-04-30|Using UTF-8 for all languages, and avoiding html-e|
|57895|New|Min|2015-05-05|missing m4a mimeType in mime.types                |
|57911|New|Min|2015-05-09|Rewrite documentation unclear or wrong about what |
|57927|New|Maj|2015-05-13|Segmentation Fault at proxy_util.c:994            |
|57933|New|Min|2015-05-18|apr_port_t returns constant                       |
|57941|New|Nor|2015-05-21|config.status: line 331: syntax error near unexpec|
|57949|New|Enh|2015-05-25|new mod_ssl environment variable SSL_{CLIENT|SERVE|
|57950|New|Nor|2015-05-26|[patch] buildconf change hint in build to newer ap|
|57960|New|Nor|2015-05-27|PUT truncates response body; status_line appears t|
|57976|New|Cri|2015-05-30|Server threads stale when sending 500 status with |
|57978|New|Nor|2015-06-01|unix:/ works with any number of / slashes  except |
|57979|New|Nor|2015-06-01|can not turn change log level for mod_filter      |
|57996|New|Nor|2015-06-03|Symlinks erroneously not followed when target inod|
|57997|New|Nor|2015-06-03|Threads started during child_init don't block sign|
|57999|New|Nor|2015-06-04|ap_getparents() may remove start slash of uri     |
|58001|New|Enh|2015-06-04|Implement Forwarded header (RFC 7239) to mod_proxy|
|58007|New|Nor|2015-06-06|400 Bad Request with fully qualified domain name o|
|58020|New|Nor|2015-06-11|When user authenticates with certificate which has|
|58024|New|Nor|2015-06-11|(Graceful) Restart does not work after adding a Ba|
|58025|New|Enh|2015-06-11|mod_authz_dbd : new dbd-query and AuthzDBDQuery op|
|58026|New|Nor|2015-06-11|return 421 status code when SNI and Host: header d|
|58044|New|Cri|2015-06-16|Error sintax 'lua_dump'                           |
|58050|New|Nor|2015-06-17|ErrorDocument does not always work                |
|58073|New|Nor|2015-06-24|Extremely long time for graceful restart          |
|58089|New|Nor|2015-07-01|mod_authz_host uses proxy IP even when mod_remotei|
|58091|New|Nor|2015-07-02|mod_socache_memcache does not reuse memcache conne|
|58097|New|Enh|2015-07-03|[feat] Preserve original connecting IP            |
|58101|New|Nor|2015-07-05|DeflateCompressionLevel inside vhost resets logfor|
|58107|New|Blk|2015-07-06|Httpd crashes on startup every time, dump file att|
|58109|New|Nor|2015-07-06|Apache on windows cannot handle the hash symbol (#|
|58118|Inf|Min|2015-07-09|mod_proxy_fcgi logs 503 when user aborts connectio|
|58120|New|Nor|2015-07-10|ProxyPassInherit does not work as expect          |
|58121|New|Nor|2015-07-10|ProxyHTMLMeta seems to ignore all <meta http-equiv|
|58126|New|Nor|2015-07-11|[patch] acinclude.m4 fix "warning: underquoted def|
|58129|New|Nor|2015-07-12|man pages are not generated correctly             |
|58132|New|Nor|2015-07-12|non-standard, non-traditional man page layout make|
|58135|New|Nor|2015-07-14|mod_cache sends client "if-Modified-Since" to back|
|58141|New|Nor|2015-07-15|Apache Service doesn't start when rotatlogs.exe pa|
|58142|New|Nor|2015-07-15|authz_core ignores loglevel                       |
|58158|New|Nor|2015-07-21|Not honoring HTTP spec with regard to Accept-Encod|
|58168|New|Enh|2015-07-21|Would like full request evaluation support in Rewr|
|58171|New|Nor|2015-07-22|ap_session_save saves the wrong session after a de|
|58177|New|Enh|2015-07-24|Mod Proxy forward trailers in http chunked request|
|58180|New|Enh|2015-07-24|ErrorDocument original URL in subsequent <Location|
|58181|New|Enh|2015-07-25|mod_expire should allow "minus" keyword same like |
|58188|New|Nor|2015-07-28|http2 mod_lua: support build with lua 5.2+        |
|58197|New|Nor|2015-07-31|apr-util-1.5.4 build against openldap - "could not|
|58202|New|Enh|2015-07-31|apxs -q += HTTPD_MAJOR , HTTPD_MMN variables      |
+-----+---+---+----------+--------------------------------------------------+
| Total 1521 bugs                                                           |
+---------------------------------------------------------------------------+

From dev-return-83450-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Aug  2 07:34:00 2015
Return-Path: <dev-return-83450-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EE6FB181AF
	for <apmail-httpd-dev-archive@www.apache.org>; Sun,  2 Aug 2015 07:33:59 +0000 (UTC)
Received: (qmail 34484 invoked by uid 500); 2 Aug 2015 07:33:59 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 34398 invoked by uid 500); 2 Aug 2015 07:33:59 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 34388 invoked by uid 99); 2 Aug 2015 07:33:59 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Aug 2015 07:33:59 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 16333D99AA
	for <dev@httpd.apache.org>; Sun,  2 Aug 2015 07:33:59 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -1.17
X-Spam-Level:
X-Spam-Status: No, score=-1.17 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RP_MATCHES_RCVD=-1.07] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=velox.ch header.b=efIh0Y2X;
	dkim=pass (2048-bit key) header.d=velox.ch header.b=SI6oQcVX
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id pwYKbo6gdhGA for <dev@httpd.apache.org>;
	Sun,  2 Aug 2015 07:33:54 +0000 (UTC)
Received: from fornix.velox.ch (fornix.velox.ch [85.25.46.13])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id C94E742E74
	for <dev@httpd.apache.org>; Sun,  2 Aug 2015 07:33:53 +0000 (UTC)
Received: from cortex.velox.ch (77-57-164-164.dclient.hispeed.ch [77.57.164.164])
	(authenticated bits=0)
	by fornix.velox.ch (8.14.9/8.14.9/2.2) with ESMTP id t727Xjua027048
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-GCM-SHA384 bits=256 verify=OK)
	for <dev@httpd.apache.org>; Sun, 2 Aug 2015 09:33:45 +0200
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=velox.ch;
	s=fornix-727e; t=1438500826;
	bh=zcSJqTFqhiMHX/OUBiIF3UY1I5W+82xvFIwv49xHcqI=;
	h=Subject:References:To:From:Date:In-Reply-To;
	b=efIh0Y2X/BrUdXN5nzgAuFzH6DJWSsyuqOINiTG6UYJp6xAKtc2StQoKu3g5Q9wsP
	 AfWFQPRSpr/CJNoSuO51zNZFBuDXwVMyUaTc1jf0WsTz6+VLq3nJKxNnXa3DMHVzxV
	 xW5420wxXAiKwQl0BaIMKDmQr6guOUshynrGXknKklArOG47ZA+aZaF1qufMls0omZ
	 FrW1DPh+exY6MKyV4m1yaKvfEKt7mPpI2cgk/Qp+MQeq8bjoIDFr6UTtjhlzj0Ff2L
	 hh1p8LrW9IKnJxLrwr9bgwuc28KvLysmrFiXeP1e70qmEQai/uHlF3xUiwxnjTeCn7
	 3vHL9rclC9l9w==
Subject: Re: Using UPN from subjectAltName with SSLUserName
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=velox.ch;
	s=cortex-8a58; t=1438500825;
	bh=zcSJqTFqhiMHX/OUBiIF3UY1I5W+82xvFIwv49xHcqI=;
	h=Subject:References:To:From:Date:In-Reply-To;
	b=SI6oQcVXHJTYS6E2sA5GzC5VQo61ayn4ohILHgxSIaTftr/xsxjd0dECVubW1EFMZ
	 TKdm7EiMFegotRCX9VfF4c6MaVJCzgigt1PiPRCbjLqRid6zg99lhAMzX8mJ+rpZX6
	 jvSLfy4Etv40YComXRwL4NnXeSb+d4MYMABPjb7xAq3T6z87mWQrQS2gGwA0zC5e1a
	 AFfRytMn/cVlD74A2rarDgOvkgOEsp7IEnbWGmt2g59vid50+MyGDSDaejibcITJk6
	 taPH2WXMZwCIIbzRd87LH0vV3ZMYNM+f4uBcKQ7o98ADBMXBwnx1uYDkBFVFR6FzU1
	 erGakVs4iZWpw==
References: <20150618094946.GU18173@redhat.com>
 <CAKQ1sVPVuX7ntRt=XjSJ6Og1-gYxjkHv_N2aSNy6wR62XJ_gGw@mail.gmail.com>
 <20150619145116.GK18173@redhat.com> <55865FC6.4070802@velox.ch>
 <20150622083710.GC3448@redhat.com> <55900EBD.4020604@velox.ch>
 <20150629114745.GC11744@redhat.com> <20150629131449.GD11744@redhat.com>
 <55A12AD4.4040302@velox.ch> <20150713140310.GA28962@redhat.com>
 <55ABC11C.9030505@velox.ch>
To: dev@httpd.apache.org
From: Kaspar Brand <httpd-dev.2014@velox.ch>
Message-ID: <55BDC7DC.2040402@velox.ch>
Date: Sun, 2 Aug 2015 09:33:48 +0200
MIME-Version: 1.0
In-Reply-To: <55ABC11C.9030505@velox.ch>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit

On 19.07.2015 17:24, Kaspar Brand wrote:
> But, to be on the safe side, I think we could a) move the OBJ_create()
> call to ssl_hook_pre_config and b) omit OBJ_cleanup(). Do you concur?

For the record: I have now committed this to trunk with r1693792.

Kaspar

From dev-return-83451-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug  3 07:32:29 2015
Return-Path: <dev-return-83451-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BB5D018B3C
	for <apmail-httpd-dev-archive@www.apache.org>; Mon,  3 Aug 2015 07:32:29 +0000 (UTC)
Received: (qmail 66257 invoked by uid 500); 3 Aug 2015 07:32:29 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 66178 invoked by uid 500); 3 Aug 2015 07:32:29 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 66168 invoked by uid 99); 3 Aug 2015 07:32:29 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Aug 2015 07:32:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id B89D8C072B
	for <dev@httpd.apache.org>; Mon,  3 Aug 2015 07:32:28 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.012
X-Spam-Level:
X-Spam-Status: No, score=-0.012 tagged_above=-999 required=6.31
	tests=[SPF_HELO_PASS=-0.001, SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id lgKvXFGitNcl for <dev@httpd.apache.org>;
	Mon,  3 Aug 2015 07:32:28 +0000 (UTC)
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id E05F742E74
	for <dev@httpd.apache.org>; Mon,  3 Aug 2015 07:32:27 +0000 (UTC)
Received: from int-mx10.intmail.prod.int.phx2.redhat.com (int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by mx1.redhat.com (Postfix) with ESMTPS id 3064D8E919
	for <dev@httpd.apache.org>; Mon,  3 Aug 2015 07:32:27 +0000 (UTC)
Received: from iberis (vpn-54-216.rdu2.redhat.com [10.10.54.216])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP id t737WPxG009881
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-GCM-SHA384 bits=256 verify=NO)
	for <dev@httpd.apache.org>; Mon, 3 Aug 2015 03:32:26 -0400
Received: from jorton by iberis with local (Exim 4.85)
	(envelope-from <jorton@redhat.com>)
	id 1ZMAET-00027L-DT
	for dev@httpd.apache.org; Mon, 03 Aug 2015 08:32:25 +0100
Date: Mon, 3 Aug 2015 08:32:25 +0100
From: Joe Orton <jorton@redhat.com>
To: dev@httpd.apache.org
Subject: Re: Using UPN from subjectAltName with SSLUserName
Message-ID: <20150803073225.GA8082@redhat.com>
Mail-Followup-To: dev@httpd.apache.org
References: <20150619145116.GK18173@redhat.com>
 <55865FC6.4070802@velox.ch>
 <20150622083710.GC3448@redhat.com>
 <55900EBD.4020604@velox.ch>
 <20150629114745.GC11744@redhat.com>
 <20150629131449.GD11744@redhat.com>
 <55A12AD4.4040302@velox.ch>
 <20150713140310.GA28962@redhat.com>
 <55ABC11C.9030505@velox.ch>
 <55BDC7DC.2040402@velox.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
In-Reply-To: <55BDC7DC.2040402@velox.ch>
User-Agent: Mutt/1.5.23 (2014-03-12)
Organization: Registered in England and Wales under Company Registration No. 03798903
Directors: Michael Cunningham (US), Michael O'Neill (Ireland), Matt Parson (US), Charles Peters (US)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23

On Sun, Aug 02, 2015 at 09:33:48AM +0200, Kaspar Brand wrote:
> On 19.07.2015 17:24, Kaspar Brand wrote:
> > But, to be on the safe side, I think we could a) move the OBJ_create()
> > call to ssl_hook_pre_config and b) omit OBJ_cleanup(). Do you concur?
> 
> For the record: I have now committed this to trunk with r1693792.

Sorry - yeah, looks good to me like that.  Thanks Kaspar!

Regards, Joe

From dev-return-83452-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug  3 14:59:41 2015
Return-Path: <dev-return-83452-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 696D71860D
	for <apmail-httpd-dev-archive@www.apache.org>; Mon,  3 Aug 2015 14:59:41 +0000 (UTC)
Received: (qmail 55557 invoked by uid 500); 3 Aug 2015 14:59:39 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 55486 invoked by uid 500); 3 Aug 2015 14:59:39 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 55476 invoked by uid 99); 3 Aug 2015 14:59:39 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Aug 2015 14:59:39 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 668F5C072B
	for <dev@httpd.apache.org>; Mon,  3 Aug 2015 14:59:39 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.012
X-Spam-Level:
X-Spam-Status: No, score=-0.012 tagged_above=-999 required=6.31
	tests=[SPF_HELO_PASS=-0.001, SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01]
	autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Wqh_IeHpeTtz for <dev@httpd.apache.org>;
	Mon,  3 Aug 2015 14:59:38 +0000 (UTC)
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id CC08124E14
	for <dev@httpd.apache.org>; Mon,  3 Aug 2015 14:59:37 +0000 (UTC)
Received: from int-mx09.intmail.prod.int.phx2.redhat.com (int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by mx1.redhat.com (Postfix) with ESMTPS id 2ADEBA1011
	for <dev@httpd.apache.org>; Mon,  3 Aug 2015 14:59:36 +0000 (UTC)
Received: from ditustat.brq.redhat.com (ditustat.brq.redhat.com [10.34.131.181])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP id t73ExYpx026968
	(version=TLSv1/SSLv3 cipher=AES256-SHA bits=256 verify=NO)
	for <dev@httpd.apache.org>; Mon, 3 Aug 2015 10:59:35 -0400
Received: from adelton by ditustat.brq.redhat.com with local (Exim 4.85)
	(envelope-from <jpazdziora@redhat.com>)
	id 1ZMHDC-0003hv-0W
	for dev@httpd.apache.org; Mon, 03 Aug 2015 16:59:34 +0200
Date: Mon, 3 Aug 2015 16:59:33 +0200
From: Jan Pazdziora <jpazdziora@redhat.com>
To: dev@httpd.apache.org
Subject: Re: Using UPN from subjectAltName with SSLUserName
Message-ID: <20150803145933.GS11258@redhat.com>
References: <20150619145116.GK18173@redhat.com>
 <55865FC6.4070802@velox.ch>
 <20150622083710.GC3448@redhat.com>
 <55900EBD.4020604@velox.ch>
 <20150629114745.GC11744@redhat.com>
 <20150629131449.GD11744@redhat.com>
 <55A12AD4.4040302@velox.ch>
 <20150713140310.GA28962@redhat.com>
 <55ABC11C.9030505@velox.ch>
 <55BDC7DC.2040402@velox.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <55BDC7DC.2040402@velox.ch>
Organization: Red Hat Czech s.r.o., =?iso-8859-2?Q?Purky?=
 =?iso-8859-2?Q?=F2ova_99=2F71=2C_612_45_Brno=2C_Czech_Republic=3B_registe?=
 =?iso-8859-2?Q?red?= in Brno under identification number CZ27690016
User-Agent: Mutt/1.5.23 (2014-03-12)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22

On Sun, Aug 02, 2015 at 09:33:48AM +0200, Kaspar Brand wrote:
> On 19.07.2015 17:24, Kaspar Brand wrote:
> > But, to be on the safe side, I think we could a) move the OBJ_create()
> > call to ssl_hook_pre_config and b) omit OBJ_cleanup(). Do you concur?
> 
> For the record: I have now committed this to trunk with r1693792.

Thank you!

-- 
Jan Pazdziora
Senior Principal Software Engineer, Identity Management Engineering, Red Hat

From dev-return-83453-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug  7 20:24:33 2015
Return-Path: <dev-return-83453-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B80A518BEC
	for <apmail-httpd-dev-archive@www.apache.org>; Fri,  7 Aug 2015 20:24:33 +0000 (UTC)
Received: (qmail 19489 invoked by uid 500); 7 Aug 2015 20:24:33 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 19416 invoked by uid 500); 7 Aug 2015 20:24:32 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 19406 invoked by uid 99); 7 Aug 2015 20:24:32 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Aug 2015 20:24:32 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 84B7719E681
	for <dev@httpd.apache.org>; Fri,  7 Aug 2015 20:24:32 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.78
X-Spam-Level: *
X-Spam-Status: No, score=1.78 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 9AA1OqoSX0X8 for <dev@httpd.apache.org>;
	Fri,  7 Aug 2015 20:24:25 +0000 (UTC)
Received: from fed1rmfepo201.cox.net (fed1rmfepo201.cox.net [68.230.241.146])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTP id 96D9725015
	for <dev@httpd.apache.org>; Fri,  7 Aug 2015 20:24:25 +0000 (UTC)
Received: from fed1rmimpo210 ([68.230.241.161]) by fed1rmfepo201.cox.net
          (InterMail vM.8.01.05.15 201-2260-151-145-20131218) with ESMTP
          id <20150807202418.GKBX10498.fed1rmfepo201.cox.net@fed1rmimpo210>
          for <dev@httpd.apache.org>; Fri, 7 Aug 2015 16:24:18 -0400
Received: from [192.168.1.33] ([98.176.34.113])
	by fed1rmimpo210 with cox
	id 1wQH1r00P2STVfm01wQH2S; Fri, 07 Aug 2015 16:24:18 -0400
X-CT-Class: Clean
X-CT-Score: 0.00
X-CT-RefID: str=0001.0A020202.55C513F2.01A1,ss=1,re=0.000,fgs=0
X-CT-Spam: 0
X-Authority-Analysis: v=2.0 cv=LIa4tuq9 c=1 sm=1
 a=8xCO7h6kmYZdHn5tUOQhsw==:17 a=LrjODJgKAAAA:8 a=1zd1egijY_QA:10
 a=eEAPoe2KPWHxxuqiuQsA:9 a=QEXdDO2ut3YA:10 a=8xCO7h6kmYZdHn5tUOQhsw==:117
X-CM-Score: 0.00
Authentication-Results: cox.net; auth=pass (PLAIN) smtp.auth=glewis63@cox.net
Message-ID: <55C51376.1010706@gknw.net>
Date: Fri, 07 Aug 2015 13:22:14 -0700
From: Gregg Smith <gls@gknw.net>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2.28) Gecko/20120306 Thunderbird/3.1.20
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: Building for NetWare /1 - For Your Consideration
References: <55B2D6C4.40209@gknw.net>
In-Reply-To: <55B2D6C4.40209@gknw.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

On 7/24/2015 5:22 PM, NormW wrote:
> Hi,
> The NetWare Gurus seem to be on holidays. For your consideration:
>
> Index: modules/cache/NWGNUsocachshmcb
> ===================================================================
> --- modules/cache/NWGNUsocachshmcb    (revision 1692595)
> +++ modules/cache/NWGNUsocachshmcb    (working copy)
> @@ -28,6 +28,7 @@
>              $(SRC)/include \
>              $(SERVER)/mpm/netware \
>              $(NWOS) \
> +            $(STDMOD)/generators \
>              $(EOLIST)
>
>  #
> Needed so NWGNUsocachshmcb can find mod_status.h
> Index: modules/cache/NWGNUsocachdbm
> ===================================================================
> --- modules/cache/NWGNUsocachdbm    (revision 1692595)
> +++ modules/cache/NWGNUsocachdbm    (working copy)
> @@ -28,6 +28,7 @@
>              $(SRC)/include \
>              $(SERVER)/mpm/netware \
>              $(NWOS) \
> +            $(STDMOD)/generators \
>              $(EOLIST)
>
>  #
> Needed so NWGNUsocachdbm can find mod_status.h
> Index: modules/dav/fs/mod_dav_fs.c
> ===================================================================
> --- modules/dav/fs/mod_dav_fs.c    (revision 1692595)
> +++ modules/dav/fs/mod_dav_fs.c    (working copy)
> @@ -17,7 +17,9 @@
>  #include "httpd.h"
>  #include "http_config.h"
>  #include "apr_strings.h"
> +#if !defined(WIN32) && !defined(NETWARE)
>  #include "ap_config_auto.h"
> +#endif
>
>  #include "mod_dav.h"
>  #include "repos.h"
> Needed so mod_dav_fs.c doesn't try to load ap_config_auto.h. AFAICT 
> also not needed by WIN32.
> Give me a prod if this format isn't useful.
> Norm
>


From dev-return-83454-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug  7 20:26:30 2015
Return-Path: <dev-return-83454-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2200418BFF
	for <apmail-httpd-dev-archive@www.apache.org>; Fri,  7 Aug 2015 20:26:30 +0000 (UTC)
Received: (qmail 23154 invoked by uid 500); 7 Aug 2015 20:26:29 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 23084 invoked by uid 500); 7 Aug 2015 20:26:29 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 23074 invoked by uid 99); 7 Aug 2015 20:26:29 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Aug 2015 20:26:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 1E90419E689
	for <dev@httpd.apache.org>; Fri,  7 Aug 2015 20:26:29 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.692
X-Spam-Level:
X-Spam-Status: No, score=0.692 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H2=-1.108] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id uUXQVQ8ZiXg1 for <dev@httpd.apache.org>;
	Fri,  7 Aug 2015 20:26:22 +0000 (UTC)
Received: from fed1rmfepo101.cox.net (fed1rmfepo101.cox.net [68.230.241.143])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTP id 0F133428DB
	for <dev@httpd.apache.org>; Fri,  7 Aug 2015 20:26:21 +0000 (UTC)
Received: from fed1rmimpo109 ([68.230.241.158]) by fed1rmfepo101.cox.net
          (InterMail vM.8.01.05.15 201-2260-151-145-20131218) with ESMTP
          id <20150807202615.YGHV11887.fed1rmfepo101.cox.net@fed1rmimpo109>
          for <dev@httpd.apache.org>; Fri, 7 Aug 2015 16:26:15 -0400
Received: from [192.168.1.33] ([98.176.34.113])
	by fed1rmimpo109 with cox
	id 1wSE1r00V2STVfm01wSEqU; Fri, 07 Aug 2015 16:26:15 -0400
X-CT-Class: Clean
X-CT-Score: 0.00
X-CT-RefID: str=0001.0A020206.55C51467.006E,ss=1,re=0.000,fgs=0
X-CT-Spam: 0
X-Authority-Analysis: v=2.0 cv=MbGyTeDf c=1 sm=1
 a=8xCO7h6kmYZdHn5tUOQhsw==:17 a=LrjODJgKAAAA:8 a=1zd1egijY_QA:10
 a=nbeqnrdq-V0K1zNyb98A:9 a=QEXdDO2ut3YA:10 a=8xCO7h6kmYZdHn5tUOQhsw==:117
X-CM-Score: 0.00
Authentication-Results: cox.net; auth=pass (PLAIN) smtp.auth=glewis63@cox.net
Message-ID: <55C513EA.3060705@gknw.net>
Date: Fri, 07 Aug 2015 13:24:10 -0700
From: Gregg Smith <gls@gknw.net>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2.28) Gecko/20120306 Thunderbird/3.1.20
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: Building for NetWare /1 - For Your Consideration
References: <55B2D6C4.40209@gknw.net>
In-Reply-To: <55B2D6C4.40209@gknw.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

Argh!

Hi Norm,

Can you attach this patch to the emain, not just paste it into the body 
of the message?
I'll assume this is for trunk and 2.4.

Cheers,

Gregg


On 7/24/2015 5:22 PM, NormW wrote:
> Hi,
> The NetWare Gurus seem to be on holidays. For your consideration:
>
> Index: modules/cache/NWGNUsocachshmcb
> ===================================================================
> --- modules/cache/NWGNUsocachshmcb    (revision 1692595)
> +++ modules/cache/NWGNUsocachshmcb    (working copy)
> @@ -28,6 +28,7 @@
>              $(SRC)/include \
>              $(SERVER)/mpm/netware \
>              $(NWOS) \
> +            $(STDMOD)/generators \
>              $(EOLIST)
>
>  #
> Needed so NWGNUsocachshmcb can find mod_status.h
> Index: modules/cache/NWGNUsocachdbm
> ===================================================================
> --- modules/cache/NWGNUsocachdbm    (revision 1692595)
> +++ modules/cache/NWGNUsocachdbm    (working copy)
> @@ -28,6 +28,7 @@
>              $(SRC)/include \
>              $(SERVER)/mpm/netware \
>              $(NWOS) \
> +            $(STDMOD)/generators \
>              $(EOLIST)
>
>  #
> Needed so NWGNUsocachdbm can find mod_status.h
> Index: modules/dav/fs/mod_dav_fs.c
> ===================================================================
> --- modules/dav/fs/mod_dav_fs.c    (revision 1692595)
> +++ modules/dav/fs/mod_dav_fs.c    (working copy)
> @@ -17,7 +17,9 @@
>  #include "httpd.h"
>  #include "http_config.h"
>  #include "apr_strings.h"
> +#if !defined(WIN32) && !defined(NETWARE)
>  #include "ap_config_auto.h"
> +#endif
>
>  #include "mod_dav.h"
>  #include "repos.h"
> Needed so mod_dav_fs.c doesn't try to load ap_config_auto.h. AFAICT 
> also not needed by WIN32.
> Give me a prod if this format isn't useful.
> Norm
>


From dev-return-83455-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Aug  8 18:25:02 2015
Return-Path: <dev-return-83455-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 013A31846C
	for <apmail-httpd-dev-archive@www.apache.org>; Sat,  8 Aug 2015 18:25:02 +0000 (UTC)
Received: (qmail 46610 invoked by uid 500); 8 Aug 2015 18:25:01 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 46510 invoked by uid 500); 8 Aug 2015 18:25:01 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 46500 invoked by uid 99); 8 Aug 2015 18:25:01 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Aug 2015 18:25:01 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id D3B4AC027C
	for <dev@httpd.apache.org>; Sat,  8 Aug 2015 18:25:00 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.88
X-Spam-Level: **
X-Spam-Status: No, score=2.88 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id D-Nin_ppHWYo for <dev@httpd.apache.org>;
	Sat,  8 Aug 2015 18:24:51 +0000 (UTC)
Received: from mail-wi0-f179.google.com (mail-wi0-f179.google.com [209.85.212.179])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 0711C24E11
	for <dev@httpd.apache.org>; Sat,  8 Aug 2015 18:24:51 +0000 (UTC)
Received: by wicne3 with SMTP id ne3so92783003wic.1
        for <dev@httpd.apache.org>; Sat, 08 Aug 2015 11:24:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=DNRtzZaqkfazWMMfq/Ui9FxS659JvgZpz4bbfhMK6E4=;
        b=W3pN2efMTv+xYp+RLC8iRzi38IXQD+XwBIdx0Hay9DjI4oIrzOQJyjizDTgZ2EathP
         6vmnfxm916LfThwVqxqVqQR8zRowSIpg1u8KTh+mh8q8Mt1ZA/DtP5HHMInMS3iO75dJ
         LKMbN/UdQEaRB1MAssSm8FJ87ucMVhTvaGVhN42dcqY7clGmKMLHyDof+d7qobN0irWO
         7+Y0CdXub4ZEjk6uJYFNZrJe5pR7T8b9DzjP/l4ty2lN4XIsaA52gNu8+ZiuDqLi1K+Y
         ynnvCWmpA6Op3nQ6Lt5affsSjHlStK6M8cU0baDh1BUSM81LmNDfyp5BilebjEIgVm3U
         FWwQ==
MIME-Version: 1.0
X-Received: by 10.180.85.134 with SMTP id h6mr8733235wiz.66.1439058245807;
 Sat, 08 Aug 2015 11:24:05 -0700 (PDT)
Received: by 10.28.211.144 with HTTP; Sat, 8 Aug 2015 11:24:05 -0700 (PDT)
Date: Sat, 8 Aug 2015 20:24:05 +0200
Message-ID: <CALE5qRtG9xtZ9ET2AS6SQ2Z+xcv06Je902Ljws_xPUOkOUZYmA@mail.gmail.com>
Subject: help: need mod_cgi.so win32 fixed
From: Francesco Pasqualini <frapas@gmail.com>
To: dev@httpd.apache.org
Content-Type: multipart/alternative; boundary=f46d0444e9d38d7295051cd0db95

--f46d0444e9d38d7295051cd0db95
Content-Type: text/plain; charset=UTF-8

Hi to all,

Can someone help me ?

I have a httpd in production on windows affected by this problem:

https://bz.apache.org/bugzilla/show_bug.cgi?id=46751#c4

Can someone compile for me a fixed (john proposal) version of mod_cgi.so ?

I contacted john without success.

./httpd.exe -v
Server version: Apache/2.2.22 (Win32)
Server built:   Jan 28 2012 11:16:39




thanks

Francesco

--f46d0444e9d38d7295051cd0db95
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Hi to all,<div><br></div><div>Can someone help me ?</div><=
div><br></div><div>I have a httpd in production on windows affected by this=
 problem:</div><div><br></div><div><a href=3D"https://bz.apache.org/bugzill=
a/show_bug.cgi?id=3D46751#c4" target=3D"_blank" style=3D"font-size:12.80000=
01907349px">https://bz.apache.org/bugzilla/show_bug.cgi?id=3D46751#c4</a><b=
r><br>Can someone compile for me a fixed (john proposal) version of mod_cgi=
.so ?</div><div><br>I contacted john without success.<br><br></div><blockqu=
ote style=3D"margin:0 0 0 40px;border:none;padding:0px"><div><div>./httpd.e=
xe -v</div></div><div><div>Server version: Apache/2.2.22 (Win32)</div></div=
><div><div>Server built: =C2=A0 Jan 28 2012 11:16:39</div></div></blockquot=
e><div><br></div><div><br></div><div><br></div><div>thanks</div><div><br></=
div><div>Francesco</div></div>

--f46d0444e9d38d7295051cd0db95--

From dev-return-83456-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Aug  8 18:33:49 2015
Return-Path: <dev-return-83456-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C884B1848D
	for <apmail-httpd-dev-archive@www.apache.org>; Sat,  8 Aug 2015 18:33:49 +0000 (UTC)
Received: (qmail 63173 invoked by uid 500); 8 Aug 2015 18:33:49 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 63095 invoked by uid 500); 8 Aug 2015 18:33:49 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 63081 invoked by uid 99); 8 Aug 2015 18:33:49 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Aug 2015 18:33:49 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id B08AFC027C
	for <dev@httpd.apache.org>; Sat,  8 Aug 2015 18:33:48 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -1.208
X-Spam-Level:
X-Spam-Status: No, score=-1.208 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-1.108, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 64hLVvXGd3U3 for <dev@httpd.apache.org>;
	Sat,  8 Aug 2015 18:33:42 +0000 (UTC)
Received: from mail-yk0-f175.google.com (mail-yk0-f175.google.com [209.85.160.175])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 104C3260BF
	for <dev@httpd.apache.org>; Sat,  8 Aug 2015 18:33:42 +0000 (UTC)
Received: by ykdt205 with SMTP id t205so31526582ykd.1
        for <dev@httpd.apache.org>; Sat, 08 Aug 2015 11:33:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=iK4zI6cH/Ldm2KBCNvoQ17jn9RkVEqpN/tFBICDgCKQ=;
        b=wu67LKl5XDkTjvLTSXdwibqJyRa5bwQPQdXylUxhZ8YH+iJlzTgt5M0rHAWkRE0SDc
         7vRw1morMwVj5BzqQ8AnzAmJt3jR+6ozGwriZNwSHT0wQ+ULr7Lg6yE88YLKzy6Bo/qF
         Pd9hxo8txpTVBe23aHJR4TeJBHvcHU6fPujpLd8mivz3U3zVXbROShnhZ2AkmzbTSpd2
         ZPiFwl+2Oxe0+At9j9skRvR+eLCjwp2bnXaXpISANo0lhu6H7kWXC5SVgwuiUl8+A6Qc
         ZEIKLSfmWrvlMkRRVaZx7Q57OdLsa7cRsvYEbWaKye69sUZipNQZ0/M0V1RHMRfqhGHL
         rzEg==
MIME-Version: 1.0
X-Received: by 10.170.168.65 with SMTP id k62mr13330417ykd.99.1439058821290;
 Sat, 08 Aug 2015 11:33:41 -0700 (PDT)
Received: by 10.37.207.66 with HTTP; Sat, 8 Aug 2015 11:33:41 -0700 (PDT)
In-Reply-To: <CALE5qRtG9xtZ9ET2AS6SQ2Z+xcv06Je902Ljws_xPUOkOUZYmA@mail.gmail.com>
References: <CALE5qRtG9xtZ9ET2AS6SQ2Z+xcv06Je902Ljws_xPUOkOUZYmA@mail.gmail.com>
Date: Sat, 8 Aug 2015 14:33:41 -0400
Message-ID: <CALK=YjNAJsw12ME099SF=GRfsWMEn_gjGj189PXpg7Xy5E7Lgw@mail.gmail.com>
Subject: Re: help: need mod_cgi.so win32 fixed
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Sat, Aug 8, 2015 at 2:24 PM, Francesco Pasqualini <frapas@gmail.com> wrote:
> Hi to all,
>
> Can someone help me ?
>
> I have a httpd in production on windows affected by this problem:
>
> https://bz.apache.org/bugzilla/show_bug.cgi?id=46751#c4
>
> Can someone compile for me a fixed (john proposal) version of mod_cgi.so ?

That patch doesn't change mod_cgi, you need a new httpd.exe or
libhttpd.lib (not sure what goes where on Windows). Might have more
luck on ApacheLounge with a test build of the entire server.

From dev-return-83457-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Aug  8 19:38:25 2015
Return-Path: <dev-return-83457-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B146C18591
	for <apmail-httpd-dev-archive@www.apache.org>; Sat,  8 Aug 2015 19:38:25 +0000 (UTC)
Received: (qmail 56554 invoked by uid 500); 8 Aug 2015 19:38:20 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 56465 invoked by uid 500); 8 Aug 2015 19:38:20 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 56455 invoked by uid 99); 8 Aug 2015 19:38:20 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Aug 2015 19:38:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id D368E1A9B24
	for <dev@httpd.apache.org>; Sat,  8 Aug 2015 19:38:19 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.9
X-Spam-Level: **
X-Spam-Status: No, score=2.9 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id nJGrWKSaRZPi for <dev@httpd.apache.org>;
	Sat,  8 Aug 2015 19:38:07 +0000 (UTC)
Received: from mail-wi0-f173.google.com (mail-wi0-f173.google.com [209.85.212.173])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 647272055B
	for <dev@httpd.apache.org>; Sat,  8 Aug 2015 19:38:07 +0000 (UTC)
Received: by wicgj17 with SMTP id gj17so96330229wic.1
        for <dev@httpd.apache.org>; Sat, 08 Aug 2015 12:37:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=gZrgg7vukdu1/o3iZgVXJ6o6fEpEU/FMDweZPasPH0k=;
        b=wtTcFSlyF0GgJZ4ZNBDM4KmGGijKSCnD2F5UL25AUKYJOfXPF8IhotCZ1/i7oqz5f7
         7wR+YNHdpsMFUCBMqpzgmrDG6zGrmc2fqjriEty8UkuVD/1Ut8R9wMJXoN/QA/yzMexR
         P782WNFwLGXDFbiRQNGlhBXXYmOcXiYcVIxtnsxh+z00uR7G09wm8wY5UjwWyqh9gcUX
         POYRXDKstHw5v0ksGtUAdqXueRNt83uxLaIEEIQrBizV5axdOBd46LO2qCdiin4t5S+w
         g1xdKQLVWixLrQy+hIC3wcGpcIrxReoo4avlFr9Be5dqCvMoaG/oebkNpkdoX8FDK7K4
         2AqQ==
MIME-Version: 1.0
X-Received: by 10.180.85.231 with SMTP id k7mr9693332wiz.73.1439062635103;
 Sat, 08 Aug 2015 12:37:15 -0700 (PDT)
Received: by 10.28.211.144 with HTTP; Sat, 8 Aug 2015 12:37:15 -0700 (PDT)
In-Reply-To: <CALK=YjNAJsw12ME099SF=GRfsWMEn_gjGj189PXpg7Xy5E7Lgw@mail.gmail.com>
References: <CALE5qRtG9xtZ9ET2AS6SQ2Z+xcv06Je902Ljws_xPUOkOUZYmA@mail.gmail.com>
	<CALK=YjNAJsw12ME099SF=GRfsWMEn_gjGj189PXpg7Xy5E7Lgw@mail.gmail.com>
Date: Sat, 8 Aug 2015 21:37:15 +0200
Message-ID: <CALE5qRvVh0q4x1WQYe5mRF93jJ6KG1Vgduea+tYoYRyJFOpAtA@mail.gmail.com>
Subject: Re: help: need mod_cgi.so win32 fixed
From: Francesco Pasqualini <frapas@gmail.com>
To: dev@httpd.apache.org
Content-Type: multipart/alternative; boundary=f46d0444ef412ccaf3051cd1e1fc

--f46d0444ef412ccaf3051cd1e1fc
Content-Type: text/plain; charset=UTF-8

Thanks
I just found a temporary work around putting in sitecustomize.pl the
following:


BEGIN{
if($ENV{"ProgramFiles(x86)"} ne "C:\\Program Files (x86)"){
$ENV{ProgramFiles} = "C:\\Program Files";
$ENV{"ProgramFiles(x86)"} = "C:\\Program Files (x86)";
$ENV{ProgramFilesW6432} = "C:\\Program Files";
$ENV{CommonProgramFiles} = "C:\\Program Files\\Common Files";
$ENV{"CommonProgramFiles(x86)"} = "C:\\Program Files (x86)\\Common Files";
$ENV{CommonProgramFilesW6432} = "C:\\Program Files\\Common Files";
exec { $^X } $^X, $0, @ARGV;
};
}






On Sat, Aug 8, 2015 at 8:33 PM, Eric Covener <covener@gmail.com> wrote:

> On Sat, Aug 8, 2015 at 2:24 PM, Francesco Pasqualini <frapas@gmail.com>
> wrote:
> > Hi to all,
> >
> > Can someone help me ?
> >
> > I have a httpd in production on windows affected by this problem:
> >
> > https://bz.apache.org/bugzilla/show_bug.cgi?id=46751#c4
> >
> > Can someone compile for me a fixed (john proposal) version of mod_cgi.so
> ?
>
> That patch doesn't change mod_cgi, you need a new httpd.exe or
> libhttpd.lib (not sure what goes where on Windows). Might have more
> luck on ApacheLounge with a test build of the entire server.
>

--f46d0444ef412ccaf3051cd1e1fc
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Thanks<div>I just found a temporary work around putting in=
 <a href=3D"http://sitecustomize.pl">sitecustomize.pl</a> the following:</d=
iv><div><br></div><div><br></div><blockquote style=3D"margin:0 0 0 40px;bor=
der:none;padding:0px"><div><div><font face=3D"monospace, monospace">BEGIN{<=
/font></div></div><div><div><font face=3D"monospace, monospace">if($ENV{&qu=
ot;ProgramFiles(x86)&quot;} ne &quot;C:\\Program Files (x86)&quot;){</font>=
</div></div><div><div><font face=3D"monospace, monospace">$ENV{ProgramFiles=
} =3D &quot;C:\\Program Files&quot;;</font></div></div><div><div><font face=
=3D"monospace, monospace">$ENV{&quot;ProgramFiles(x86)&quot;} =3D &quot;C:\=
\Program Files (x86)&quot;;</font></div></div><div><div><font face=3D"monos=
pace, monospace">$ENV{ProgramFilesW6432} =3D &quot;C:\\Program Files&quot;;=
</font></div></div><div><div><font face=3D"monospace, monospace">$ENV{Commo=
nProgramFiles} =3D &quot;C:\\Program Files\\Common Files&quot;;</font></div=
></div><div><div><font face=3D"monospace, monospace">$ENV{&quot;CommonProgr=
amFiles(x86)&quot;} =3D &quot;C:\\Program Files (x86)\\Common Files&quot;;<=
/font></div></div><div><div><font face=3D"monospace, monospace">$ENV{Common=
ProgramFilesW6432} =3D &quot;C:\\Program Files\\Common Files&quot;;</font><=
/div></div><div><div><font face=3D"monospace, monospace">exec { $^X } $^X, =
$0, @ARGV;</font></div></div><div><div><font face=3D"monospace, monospace">=
};</font></div></div><div><div><font face=3D"monospace, monospace">}</font>=
</div></div></blockquote><div><br></div><div><br></div><div><br></div><div>=
<br></div></div><div class=3D"gmail_extra"><br><div class=3D"gmail_quote">O=
n Sat, Aug 8, 2015 at 8:33 PM, Eric Covener <span dir=3D"ltr">&lt;<a href=
=3D"mailto:covener@gmail.com" target=3D"_blank">covener@gmail.com</a>&gt;</=
span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8e=
x;border-left:1px #ccc solid;padding-left:1ex">On Sat, Aug 8, 2015 at 2:24 =
PM, Francesco Pasqualini &lt;<a href=3D"mailto:frapas@gmail.com">frapas@gma=
il.com</a>&gt; wrote:<br>
&gt; Hi to all,<br>
&gt;<br>
&gt; Can someone help me ?<br>
&gt;<br>
&gt; I have a httpd in production on windows affected by this problem:<br>
&gt;<br>
&gt; <a href=3D"https://bz.apache.org/bugzilla/show_bug.cgi?id=3D46751#c4" =
rel=3D"noreferrer" target=3D"_blank">https://bz.apache.org/bugzilla/show_bu=
g.cgi?id=3D46751#c4</a><br>
&gt;<br>
&gt; Can someone compile for me a fixed (john proposal) version of mod_cgi.=
so ?<br>
<br>
That patch doesn&#39;t change mod_cgi, you need a new httpd.exe or<br>
libhttpd.lib (not sure what goes where on Windows). Might have more<br>
luck on ApacheLounge with a test build of the entire server.<br>
</blockquote></div><br></div>

--f46d0444ef412ccaf3051cd1e1fc--

From dev-return-83458-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Aug  9 01:59:20 2015
Return-Path: <dev-return-83458-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E029B189AC
	for <apmail-httpd-dev-archive@www.apache.org>; Sun,  9 Aug 2015 01:59:18 +0000 (UTC)
Received: (qmail 43634 invoked by uid 500); 9 Aug 2015 01:59:18 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 43562 invoked by uid 500); 9 Aug 2015 01:59:18 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 43552 invoked by uid 99); 9 Aug 2015 01:59:18 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Aug 2015 01:59:18 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id D40A1C0484
	for <dev@httpd.apache.org>; Sun,  9 Aug 2015 01:59:17 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.88
X-Spam-Level: **
X-Spam-Status: No, score=2.88 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 4zDxtT0Z8TfX for <dev@httpd.apache.org>;
	Sun,  9 Aug 2015 01:59:10 +0000 (UTC)
Received: from mail-wi0-f181.google.com (mail-wi0-f181.google.com [209.85.212.181])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id F118231C0E
	for <dev@httpd.apache.org>; Sun,  9 Aug 2015 01:59:09 +0000 (UTC)
Received: by wibhh20 with SMTP id hh20so108542105wib.0
        for <dev@httpd.apache.org>; Sat, 08 Aug 2015 18:58:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=nDrin7TUyYOasF9mPvHOGFSeawht/JX/3WsbzZOPB4k=;
        b=LzysFyIoGAV7JnJGB1BhfZI/ZuS2a4ysIj0MX4eZycQrVv0Me+69P6TnLSkkwYLMwk
         3P6sknLQTbC2boctZiF2A3kZ4MkyshCiA2Ns2b884hFiJGLqBuXS6wA5ui790ap/9P3H
         ci+6jpXgfQS5R7BfUyENHLcJAxk2G9MVQUXnvjwEZXD2zzNQJ6qAA3AKxOS5JEecsMTM
         RrFnzJ6Y4wVaRcPCm6MHny4Tda81i8GTMTSkGo0m1JVqeEQvNGns2XF3L9ZXyEYHsmC7
         HTWgtUMxspVQjuxIYZNebF0GF+7n3m4KoOgIgSXKYAoXj/oHdLrvRlWjwZVtfIldD/8n
         kJnw==
MIME-Version: 1.0
X-Received: by 10.180.21.169 with SMTP id w9mr11671465wie.73.1439085503684;
 Sat, 08 Aug 2015 18:58:23 -0700 (PDT)
Received: by 10.28.211.144 with HTTP; Sat, 8 Aug 2015 18:58:23 -0700 (PDT)
In-Reply-To: <CALK=YjNAJsw12ME099SF=GRfsWMEn_gjGj189PXpg7Xy5E7Lgw@mail.gmail.com>
References: <CALE5qRtG9xtZ9ET2AS6SQ2Z+xcv06Je902Ljws_xPUOkOUZYmA@mail.gmail.com>
	<CALK=YjNAJsw12ME099SF=GRfsWMEn_gjGj189PXpg7Xy5E7Lgw@mail.gmail.com>
Date: Sun, 9 Aug 2015 03:58:23 +0200
Message-ID: <CALE5qRtqeODvm24neQr2jrohwXWg6xi5KNY==GT0gs=RkYH71A@mail.gmail.com>
Subject: Re: help: need mod_cgi.so win32 fixed
From: Francesco Pasqualini <frapas@gmail.com>
To: dev@httpd.apache.org
Content-Type: multipart/alternative; boundary=047d7bae48f43fa5ff051cd7344e

--047d7bae48f43fa5ff051cd7344e
Content-Type: text/plain; charset=UTF-8

Hi Eric,
I confirm that the patch changes mod_cgi

infact mod_cgi.c calls the function ap_create_environment in util_script.c:

env = ap_create_environment(r->pool, r->subprocess_env);

so applying the patch to util_script.c, recompiling mod_cgi.c and
installing mod_cgi.so under the $root/modules dir will do the trick


thanks

Francesco

On Sat, Aug 8, 2015 at 8:33 PM, Eric Covener <covener@gmail.com> wrote:

> On Sat, Aug 8, 2015 at 2:24 PM, Francesco Pasqualini <frapas@gmail.com>
> wrote:
> > Hi to all,
> >
> > Can someone help me ?
> >
> > I have a httpd in production on windows affected by this problem:
> >
> > https://bz.apache.org/bugzilla/show_bug.cgi?id=46751#c4
> >
> > Can someone compile for me a fixed (john proposal) version of mod_cgi.so
> ?
>
> That patch doesn't change mod_cgi, you need a new httpd.exe or
> libhttpd.lib (not sure what goes where on Windows). Might have more
> luck on ApacheLounge with a test build of the entire server.
>

--047d7bae48f43fa5ff051cd7344e
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Hi Eric,<div>I confirm that the patch changes mod_cgi</div=
><div><br></div><div>infact mod_cgi.c calls the function=C2=A0<span style=
=3D"color:rgb(0,0,0)">ap_create_environment in=C2=A0</span><font color=3D"#=
000000">util_script.c:</font></div><blockquote style=3D"margin:0 0 0 40px;b=
order:none;padding:0px"><div><pre style=3D"color:rgb(0,0,0)">env =3D ap_cre=
ate_environment(r-&gt;pool, r-&gt;subprocess_env);</pre></div></blockquote>=
<div><span style=3D"color:rgb(0,0,0)">so applying the patch to=C2=A0</span>=
<span style=3D"color:rgb(0,0,0)">util_script.c</span><span style=3D"color:r=
gb(0,0,0)">, recompiling mod_cgi.c and installing mod_cgi.so under the $roo=
t/modules dir will do the trick</span></div><div><span style=3D"color:rgb(0=
,0,0)"><br></span></div><div><span style=3D"color:rgb(0,0,0)"><br>thanks</s=
pan></div><div><span style=3D"color:rgb(0,0,0)"><br></span></div><div><span=
 style=3D"color:rgb(0,0,0)">Francesco</span></div><div class=3D"gmail_extra=
"><br><div class=3D"gmail_quote">On Sat, Aug 8, 2015 at 8:33 PM, Eric Coven=
er <span dir=3D"ltr">&lt;<a href=3D"mailto:covener@gmail.com" target=3D"_bl=
ank">covener@gmail.com</a>&gt;</span> wrote:<br><blockquote class=3D"gmail_=
quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1=
ex">On Sat, Aug 8, 2015 at 2:24 PM, Francesco Pasqualini &lt;<a href=3D"mai=
lto:frapas@gmail.com">frapas@gmail.com</a>&gt; wrote:<br>
&gt; Hi to all,<br>
&gt;<br>
&gt; Can someone help me ?<br>
&gt;<br>
&gt; I have a httpd in production on windows affected by this problem:<br>
&gt;<br>
&gt; <a href=3D"https://bz.apache.org/bugzilla/show_bug.cgi?id=3D46751#c4" =
rel=3D"noreferrer" target=3D"_blank">https://bz.apache.org/bugzilla/show_bu=
g.cgi?id=3D46751#c4</a><br>
&gt;<br>
&gt; Can someone compile for me a fixed (john proposal) version of mod_cgi.=
so ?<br>
<br>
That patch doesn&#39;t change mod_cgi, you need a new httpd.exe or<br>
libhttpd.lib (not sure what goes where on Windows). Might have more<br>
luck on ApacheLounge with a test build of the entire server.<br>
</blockquote></div><br></div></div>

--047d7bae48f43fa5ff051cd7344e--

From dev-return-83459-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Aug  9 03:46:59 2015
Return-Path: <dev-return-83459-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8962718B04
	for <apmail-httpd-dev-archive@www.apache.org>; Sun,  9 Aug 2015 03:46:59 +0000 (UTC)
Received: (qmail 43532 invoked by uid 500); 9 Aug 2015 03:46:59 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 43461 invoked by uid 500); 9 Aug 2015 03:46:59 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 43450 invoked by uid 99); 9 Aug 2015 03:46:58 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Aug 2015 03:46:58 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 5217C19F741
	for <dev@httpd.apache.org>; Sun,  9 Aug 2015 03:46:53 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id UyfWtMNVKhp9 for <dev@httpd.apache.org>;
	Sun,  9 Aug 2015 03:46:46 +0000 (UTC)
Received: from mail-yk0-f169.google.com (mail-yk0-f169.google.com [209.85.160.169])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id CDE9942B61
	for <dev@httpd.apache.org>; Sun,  9 Aug 2015 03:46:45 +0000 (UTC)
Received: by ykaz130 with SMTP id z130so9285482yka.0
        for <dev@httpd.apache.org>; Sat, 08 Aug 2015 20:46:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Q5titx70o6sXO83v3em8njG16kPYVPgw+S9ede0qNyg=;
        b=zFiTOIByDIFTE1VIaJsIg3RhNgkcIJn8nRqArnST4fglaUYfeRQ6becorcyx5yrZoI
         J89ZTnug1nZnSuShrhdYpc/1SDpQS670GJvLA1awDAe9AIq4aFGhADzha0Pjo/tZ/PGs
         5UkoUjGkDEx+7UZbrVHpi20Q16UQ2P14mJR4xsUybcM5+UMSDP56cukk0Uj+RFxeo8sH
         w1h02XEXUU6MTxjqnPvNTbd9+s8hvXlqpgdbK2aDXHZh8Pkf/oht9VJblc+OlyDvBGv0
         Jtu+QmggQAXg6Y7hnQyacDNoxk9pm1Yrm1nfPh6XXTufRAMCieDxK7TDPmMAEzwgdUNN
         gqPQ==
MIME-Version: 1.0
X-Received: by 10.129.128.199 with SMTP id q190mr15791513ywf.117.1439091960415;
 Sat, 08 Aug 2015 20:46:00 -0700 (PDT)
Received: by 10.37.207.66 with HTTP; Sat, 8 Aug 2015 20:46:00 -0700 (PDT)
In-Reply-To: <CALE5qRtqeODvm24neQr2jrohwXWg6xi5KNY==GT0gs=RkYH71A@mail.gmail.com>
References: <CALE5qRtG9xtZ9ET2AS6SQ2Z+xcv06Je902Ljws_xPUOkOUZYmA@mail.gmail.com>
	<CALK=YjNAJsw12ME099SF=GRfsWMEn_gjGj189PXpg7Xy5E7Lgw@mail.gmail.com>
	<CALE5qRtqeODvm24neQr2jrohwXWg6xi5KNY==GT0gs=RkYH71A@mail.gmail.com>
Date: Sat, 8 Aug 2015 23:46:00 -0400
Message-ID: <CALK=YjPmRP6q_yrjGwGU6OihNkhQQGfUTa5oUCbZ4E9Bv241jg@mail.gmail.com>
Subject: Re: help: need mod_cgi.so win32 fixed
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Sat, Aug 8, 2015 at 9:58 PM, Francesco Pasqualini <frapas@gmail.com> wrote:
> I confirm that the patch changes mod_cgi
>
> infact mod_cgi.c calls the function ap_create_environment in util_script.c:
>
> env = ap_create_environment(r->pool, r->subprocess_env);
>
> so applying the patch to util_script.c, recompiling mod_cgi.c and installing
> mod_cgi.so under the $root/modules dir will do the trick

I'm no Windows expert, but I don't see how you can expect an updated
ap_create_environment() to be used that way. I already tried to
explain why in my first response.

From dev-return-83460-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Aug  9 03:53:47 2015
Return-Path: <dev-return-83460-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9BDCB18B2D
	for <apmail-httpd-dev-archive@www.apache.org>; Sun,  9 Aug 2015 03:53:47 +0000 (UTC)
Received: (qmail 51938 invoked by uid 500); 9 Aug 2015 03:53:47 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 51810 invoked by uid 500); 9 Aug 2015 03:53:47 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 51795 invoked by uid 99); 9 Aug 2015 03:53:47 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Aug 2015 03:53:47 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id B2B791A1A7E
	for <dev@httpd.apache.org>; Sun,  9 Aug 2015 03:53:46 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.9
X-Spam-Level: **
X-Spam-Status: No, score=2.9 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id EfaCtpvgQsP1 for <dev@httpd.apache.org>;
	Sun,  9 Aug 2015 03:53:41 +0000 (UTC)
Received: from mail-wi0-f172.google.com (mail-wi0-f172.google.com [209.85.212.172])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id DC001251CA
	for <dev@httpd.apache.org>; Sun,  9 Aug 2015 03:53:40 +0000 (UTC)
Received: by wicja10 with SMTP id ja10so917920wic.1
        for <dev@httpd.apache.org>; Sat, 08 Aug 2015 20:52:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=MbHUyH60l9pKLgYRH3T3pd8J0dd8gVuY1aSzm2/pidg=;
        b=dCs7QK3dBGp54HsvZQ4JCzF/MKnpHjP+AkVsseSIODskQVnlYA9s5WuD7ZbFyuJGl4
         gGfe5KTcUUgzFKVU2ejqZTuL/BCstR5FgUgkNQbIxm1FXU209WeLEkl+V7jpOYJjegrZ
         bmSYNfs4QugMncdoAnYyrQOdaKFbXa6T82JNjHF4ukwu2pA99Ty+ylf8Ensdqsv9G1ic
         qGEYSJpwN1/o9QrX+YozmNbBqOzc3opDiHSgK21BGL7CKrYeBrnhC+fOBcHSxPrU1/jM
         iVvHIjMLGRvvSQBjrHj66WkC+1nuMb7IRWQg/n8Vfpde7js4EMrPoUmOom0oCFRAsP+f
         +W2Q==
MIME-Version: 1.0
X-Received: by 10.194.77.244 with SMTP id v20mr34423108wjw.122.1439092374595;
 Sat, 08 Aug 2015 20:52:54 -0700 (PDT)
Received: by 10.28.211.144 with HTTP; Sat, 8 Aug 2015 20:52:54 -0700 (PDT)
In-Reply-To: <CALK=YjPmRP6q_yrjGwGU6OihNkhQQGfUTa5oUCbZ4E9Bv241jg@mail.gmail.com>
References: <CALE5qRtG9xtZ9ET2AS6SQ2Z+xcv06Je902Ljws_xPUOkOUZYmA@mail.gmail.com>
	<CALK=YjNAJsw12ME099SF=GRfsWMEn_gjGj189PXpg7Xy5E7Lgw@mail.gmail.com>
	<CALE5qRtqeODvm24neQr2jrohwXWg6xi5KNY==GT0gs=RkYH71A@mail.gmail.com>
	<CALK=YjPmRP6q_yrjGwGU6OihNkhQQGfUTa5oUCbZ4E9Bv241jg@mail.gmail.com>
Date: Sun, 9 Aug 2015 05:52:54 +0200
Message-ID: <CALE5qRtNa0CACY0XqNUevE4gS6Y=-j3dpZePrWvEH7C=piCMzg@mail.gmail.com>
Subject: Re: help: need mod_cgi.so win32 fixed
From: Francesco Pasqualini <frapas@gmail.com>
To: dev@httpd.apache.org
Content-Type: multipart/alternative; boundary=047d7bb04906c96ead051cd8cd94

--047d7bb04906c96ead051cd8cd94
Content-Type: text/plain; charset=UTF-8

In apache httpd windows setup the compiled modules go as .so files in the
$root/modules directory.

So to install/update a module we have to just compile/recompile it and put
the .so file in $root/modules

My problem is that I don't have a build setup and it take too long to build
and configure one just to fix a few lines

thanks

Francesco

On Sun, Aug 9, 2015 at 5:46 AM, Eric Covener <covener@gmail.com> wrote:

> On Sat, Aug 8, 2015 at 9:58 PM, Francesco Pasqualini <frapas@gmail.com>
> wrote:
> > I confirm that the patch changes mod_cgi
> >
> > infact mod_cgi.c calls the function ap_create_environment in
> util_script.c:
> >
> > env = ap_create_environment(r->pool, r->subprocess_env);
> >
> > so applying the patch to util_script.c, recompiling mod_cgi.c and
> installing
> > mod_cgi.so under the $root/modules dir will do the trick
>
> I'm no Windows expert, but I don't see how you can expect an updated
> ap_create_environment() to be used that way. I already tried to
> explain why in my first response.
>

--047d7bb04906c96ead051cd8cd94
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">In apache httpd windows setup the compiled modules go as .=
so files in the $root/modules directory.<div><br></div><div>So to install/u=
pdate a module we have to just compile/recompile it and put the .so file in=
 $root/modules</div><div><br></div><div>My problem is that I don&#39;t have=
 a build setup and it take too long to build and configure one just to fix =
a few lines</div><div><br></div><div>thanks</div><div><br></div><div>France=
sco</div></div><div class=3D"gmail_extra"><br><div class=3D"gmail_quote">On=
 Sun, Aug 9, 2015 at 5:46 AM, Eric Covener <span dir=3D"ltr">&lt;<a href=3D=
"mailto:covener@gmail.com" target=3D"_blank">covener@gmail.com</a>&gt;</spa=
n> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;b=
order-left:1px #ccc solid;padding-left:1ex">On Sat, Aug 8, 2015 at 9:58 PM,=
 Francesco Pasqualini &lt;<a href=3D"mailto:frapas@gmail.com">frapas@gmail.=
com</a>&gt; wrote:<br>
&gt; I confirm that the patch changes mod_cgi<br>
&gt;<br>
&gt; infact mod_cgi.c calls the function ap_create_environment in util_scri=
pt.c:<br>
&gt;<br>
&gt; env =3D ap_create_environment(r-&gt;pool, r-&gt;subprocess_env);<br>
&gt;<br>
&gt; so applying the patch to util_script.c, recompiling mod_cgi.c and inst=
alling<br>
&gt; mod_cgi.so under the $root/modules dir will do the trick<br>
<br>
I&#39;m no Windows expert, but I don&#39;t see how you can expect an update=
d<br>
ap_create_environment() to be used that way. I already tried to<br>
explain why in my first response.<br>
</blockquote></div><br></div>

--047d7bb04906c96ead051cd8cd94--

From dev-return-83461-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Aug  9 07:15:15 2015
Return-Path: <dev-return-83461-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 88C6618D1E
	for <apmail-httpd-dev-archive@www.apache.org>; Sun,  9 Aug 2015 07:15:15 +0000 (UTC)
Received: (qmail 2298 invoked by uid 500); 9 Aug 2015 07:15:14 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 2231 invoked by uid 500); 9 Aug 2015 07:15:14 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 2222 invoked by uid 99); 9 Aug 2015 07:15:14 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Aug 2015 07:15:14 +0000
Received: from asf-bz1-us-mid.priv.apache.org (nat1-us-mid.apache.org [23.253.172.122])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPS id 5549C1A0331
	for <dev@httpd.apache.org>; Sun,  9 Aug 2015 07:15:14 +0000 (UTC)
Received: by asf-bz1-us-mid.priv.apache.org (ASF Mail Server at asf-bz1-us-mid.priv.apache.org, from userid 0)
	id D375E60244; Sun,  9 Aug 2015 07:15:13 +0000 (UTC)
From: bugzilla@apache.org
To: dev@httpd.apache.org
Subject: Bug report for Apache httpd-2 [2015/08/09]
Message-Id: <20150809071513.D375E60244@asf-bz1-us-mid.priv.apache.org>
Date: Sun,  9 Aug 2015 07:15:05 +0000 (UTC)

+---------------------------------------------------------------------------+
| Bugzilla Bug ID                                                           |
|     +---------------------------------------------------------------------+
|     | Status: UNC=Unconfirmed NEW=New         ASS=Assigned                |
|     |         OPN=Reopened    VER=Verified    (Skipped Closed/Resolved)   |
|     |   +-----------------------------------------------------------------+
|     |   | Severity: BLK=Blocker CRI=Critical  REG=Regression  MAJ=Major   |
|     |   |           MIN=Minor   NOR=Normal    ENH=Enhancement TRV=Trivial |
|     |   |   +-------------------------------------------------------------+
|     |   |   | Date Posted                                                 |
|     |   |   |          +--------------------------------------------------+
|     |   |   |          | Description                                      |
|     |   |   |          |                                                  |
| 7483|Ass|Enh|2002-03-26|Add FileAction directive to assign a cgi interpret|
| 8713|Inf|Min|2002-05-01|No Errorlog on PROPFIND/Depth:Infinity            |
| 8867|Opn|Cri|2002-05-07|exports.c generation fails when using a symlink to|
|10747|New|Maj|2002-07-12|ftp SIZE command and 'smart' ftp servers results i|
|11294|New|Enh|2002-07-30|desired vhost_alias option                        |
|11580|Opn|Enh|2002-08-09|generate Content-Location headers                 |
|12033|Opn|Nor|2002-08-26|Graceful restart immediately result in [warn] long|
|12680|New|Enh|2002-09-16|Digest authentication with integrity protection   |
|13599|Inf|Nor|2002-10-14|autoindex formating broken for multibyte sequences|
|13661|Ass|Enh|2002-10-15|Apache cannot not handle dynamic IP reallocation  |
|14104|Opn|Enh|2002-10-30|not documented: must restart server to load new CR|
|14496|New|Enh|2002-11-13|Cannot upgrade any version on Windows. Must uninst|
|14922|Inf|Enh|2002-11-28|<target> is currently hardcoded to 'apache2'      |
|15719|Inf|Nor|2002-12-30|WebDAV MOVE to destination URI which is content-ne|
|16761|Inf|Nor|2003-02-04|CustomLog with pipe spawns process during config  |
|16802|New|Enh|2003-02-05|Additional AllowOverride directive "Restrict"     |
|16811|Ass|Maj|2003-02-05|mod_autoindex always return webpages in UTF-8.    |
|17107|New|Min|2003-02-16|Windows should not install printenv               |
|17114|New|Enh|2003-02-17|Please add strip and install-strip targets to Make|
|17244|Ass|Nor|2003-02-20|./configure --help gives false information regardi|
|17497|Opn|Nor|2003-02-27|mod_mime_magic generates incorrect response header|
|18325|New|Enh|2003-03-25|PAM support for suEXEC                            |
|18334|Inf|Cri|2003-03-25|Server crashes when authenticating users against L|
|18497|New|Min|2003-03-30|configure --help gives wrong default for sysconfdi|
|19043|New|Min|2003-04-15|Interesting interaction between cern_meta module a|
|19670|New|Enh|2003-05-05|content type header supplied upon PUT is thrown aw|
|20036|Ass|Nor|2003-05-19|Trailing Dots stripped from PATH_INFO environment |
|21253|New|Nor|2003-07-01|Mime magic doesn't continue if type is specifed fo|
|21260|New|Nor|2003-07-02|CacheMaxExpire directive not enforced !           |
|21533|Ass|Cri|2003-07-11|Multiple levels of htacces files can cause mod_aut|
|22138|Inf|Cri|2003-08-05|Webdav is not preccessing special chars right.    |
|22237|New|Enh|2003-08-08|option to disable ServerSignature on index pages  |
|22484|Opn|Maj|2003-08-16|semaphore problem takes httpd down                |
|22686|Opn|Nor|2003-08-25|ab: apr_poll: The timeout specified has expired (7|
|22898|Opn|Nor|2003-09-02|nph scripts with two HTTP header                  |
|23167|Inf|Cri|2003-09-14|--enable-layout never goes to apr apr-util        |
|23181|New|Nor|2003-09-15|Status 304 (Not modified) and chunking leads to an|
|23238|New|Cri|2003-09-18|non-async-signal-safe operations from signal handl|
|23330|New|Enh|2003-09-22|Enhance ApacheMonitor to view and control Tomcat s|
|23911|Opn|Cri|2003-10-18|CGI processes left defunct/zombie under 2.0.54    |
|24031|New|Enh|2003-10-23|Passphrase protected private key in SSLProxyMachin|
|24095|Opn|Cri|2003-10-24|ERROR "Parent: child process exited with status 32|
|24437|Opn|Nor|2003-11-05|mod_auth_ldap doubly-escapes backslash (\) charact|
|24890|Opn|Nor|2003-11-21|Apache config parser should not be local aware ( g|
|25014|New|Enh|2003-11-26|A flexible interface for mod_log_config           |
|25201|New|Enh|2003-12-04|Provide Cache Purge operation                     |
|25240|Inf|Enh|2003-12-05|SSL Library Error: 336105671 logged as information|
|25435|New|Enh|2003-12-11|sethandler and directoryindex not playing nice    |
|25469|Opn|Enh|2003-12-12|create AuthRoot for defining paths to auth files  |
|25484|Ass|Nor|2003-12-12|Non-service Apache cannot be stopped in WinXP     |
|25543|Inf|Nor|2003-12-15|mod_proxy_ajp overwrites existing response headers|
|25667|New|Nor|2003-12-19|Memory leak in function ssl_scache_dbm_retrieve().|
|25863|New|Enh|2004-01-02|new per-host initialization hooks                 |
|26005|New|Nor|2004-01-08|SERVER_NAME incorrect when using IPv6 address in U|
|26142|New|Maj|2004-01-14|EnableSendFile Off for Windows XP Home            |
|26153|Opn|Cri|2004-01-15|Apache cygwin directory traversal vulnerability   |
|26368|New|Min|2004-01-23|File extensions in AddDescription treated as part |
|26446|New|Nor|2004-01-26|flush buckets followed by eos bucket emit multiple|
|26478|New|Enh|2004-01-28|mod_dav does not expose a method for setting the D|
|26835|New|Enh|2004-02-10|[PATCH] Mod_status Readability & Browser Side Tabl|
|27257|Ass|Enh|2004-02-26|rotatelogs with getopt and setuid                 |
|27578|New|Enh|2004-03-10|made getlastmodified a writable property          |
|27715|Ass|Enh|2004-03-16|Client sending misformed Range "bytes = 0-100" ins|
|27791|Inf|Nor|2004-03-18|mod_cache doesn't re-cache expired content        |
|27835|New|Enh|2004-03-22|When proxying FTP, all errors turns into 404      |
|27869|New|Enh|2004-03-23|stopping and starting httpd again immediately caus|
|28854|Inf|Nor|2004-05-09|Build fails with missing library call on Solaris i|
|28903|New|Enh|2004-05-11|Hooks to add environment variables to CGI and othe|
|29090|Ass|Enh|2004-05-19|MultiviewsMatch NegotiatedOnly extensions not resp|
|29165|New|Nor|2004-05-24|Parent directory icon not correct                 |
|29446|New|Enh|2004-06-08|want directive for setting content negotiation qua|
|29449|New|Enh|2004-06-09|Limit length of specified fields in LogFormat     |
|29450|New|Enh|2004-06-09|Improved logging for mod_access                   |
|29510|Ass|Enh|2004-06-10|ab does not support multiple cookies              |
|29644|Ver|Nor|2004-06-17|mod_proxy keeps downloading even after the client |
|29755|Opn|Nor|2004-06-23|mod_usertrack should use err_headers_out          |
|29822|New|Enh|2004-06-26|implement FTP 'PUT' support in proxy_ftp.c        |
|29941|Ass|Enh|2004-07-06|log files are not tested for availability on confi|
|30259|Ass|Enh|2004-07-22|When proxy connects to backend, a DNS lookup is do|
|30505|Ass|Enh|2004-08-05|Apache uses 'Error', and not lower level event typ|
|30730|Inf|Nor|2004-08-18|[PatchAvailable] mod_actions and Server-Status    |
|30865|Inf|Maj|2004-08-26|mod_disk_cache leaves many temporary files slowing|
|31302|Opn|Cri|2004-09-19|suexec doesn't execute commands if they're not in |
|31311|New|Enh|2004-09-20|Remote user not logged in reverse proxy scenario  |
|31352|Ass|Enh|2004-09-21|RFE, Bind to LDAP server with browser supplier use|
|31418|Opn|Nor|2004-09-25|SSLUserName is not usable by other modules        |
|31484|New|Maj|2004-09-30|Custom environment variables not passed to content|
|31490|New|Nor|2004-09-30|mod_proxy_ftp renders filenames with spaces badly |
|31565|New|Enh|2004-10-06|Won't start correctly if parent closed stdin, stdo|
|31679|New|Enh|2004-10-12|If the argument of a CGI has two or more consecuti|
|31709|Inf|Nor|2004-10-13|Raises an error on SSL name based virtualhosts (wi|
|31712|New|Enh|2004-10-14|config_file is NULL at ap_walk_config etc         |
|31952|New|Enh|2004-10-29|mod_proxy and RealPlayer: audio content streaming |
|32051|Opn|Nor|2004-11-04|mod_example is not thread safe                    |
|32328|Opn|Enh|2004-11-19|Make mod_rewrite escaping optional / expose intern|
|32346|New|Enh|2004-11-22|mod_include/include virtual checks content-type is|
|32524|New|Enh|2004-12-03|ab: add an option to specify a source address     |
|32703|Inf|Enh|2004-12-14|Cannot determine that Apache is frozen if /var fil|
|32750|Ass|Maj|2004-12-17|mod_proxy + Win32DisableAcceptEx = memory leak    |
|32877|New|Enh|2004-12-29|wrong utf-8 encoding/escaping in a href for umlaut|
|33084|New|Enh|2005-01-13|Optional certificate validity period check on SSLV|
|33089|New|Nor|2005-01-13|mod_include: Options +Includes (or IncludesNoExec)|
|33207|New|Nor|2005-01-23|Results of my suexec.c code audit                 |
|33215|New|Nor|2005-01-24|Cygwin build/install.sh fix (OSTYPE => ext=.exe)  |
|33512|Inf|Maj|2005-02-11|mod_mem_cache and possibly mod_deflate            |
|33627|New|Nor|2005-02-18|Bite-sized changes making progress towards compila|
|33685|New|Maj|2005-02-22|Unable to install in the path containing non engli|
|34270|Inf|Nor|2005-04-01|Large POSTs over SSL from Internet Explorer do not|
|34375|New|Enh|2005-04-08|enhancements for mod_include                      |
|34377|New|Enh|2005-04-08|Allow the overriding of 401 Unauthorized returns f|
|34405|New|Enh|2005-04-11|adds DOCUMENT_NAME_WITHOUT_SUFFIX to mod_include  |
|34508|New|Nor|2005-04-19|Randomly slow graceful restart, not accepting new |
|34519|New|Enh|2005-04-19|Directory index should emit valid XHTML           |
|35049|New|Nor|2005-05-24|let AddDefaultCharset apply to text/css and applic|
|35077|New|Nor|2005-05-26|mod_dav passes incorrect paths with LocationMatch |
|35083|Inf|Enh|2005-05-26|Certificate validation problems trapping          |
|35098|Ver|Maj|2005-05-27|Install fails using --prefix                      |
|35154|New|Nor|2005-06-01|Support for NID_serialNumber, etc. in SSLUserName |
|35245|New|Nor|2005-06-06|cache ignores max-age cache-directive in requests |
|35250|New|Enh|2005-06-07|[PatchAvailable] add logging to mod_proxy_connect |
|35280|New|Nor|2005-06-09|FTP proxy breaks RFC 2428 when trying to fall back|
|35556|Inf|Nor|2005-06-30|CRL files not re-read by HUP                      |
|35652|Opn|Min|2005-07-07|Improve error message: "pcfg_openfile: unable to c|
|35702|New|Nor|2005-07-12|Using with https URL, ab freezes or gets SIGSEGV o|
|35781|New|Nor|2005-07-18|ap_sub_req_method_uri() bypasses Limit security co|
|35981|Inf|Maj|2005-08-02|mod_dav overrides dav_fs response on PUT failure  |
|36286|New|Enh|2005-08-20|configtest doesn't check SSL certificates         |
|36492|New|Nor|2005-09-04|split-logfile script dies when splitting log of ma|
|36495|Inf|Nor|2005-09-05|mod_proxy_ajp: ajp_check_msg_header() got bad sign|
|36564|New|Enh|2005-09-08|make mod_ldap really universal                    |
|36636|New|Maj|2005-09-13|database write lock taken for PROPFIND operations |
|36676|New|Nor|2005-09-15|time() bug in httpd/os/win32/util_win32.c:wait_for|
|36710|Opn|Blk|2005-09-19|CGI output not captured                           |
|36724|New|Nor|2005-09-20|Don't install Apache Monitor by default           |
|37110|New|Nor|2005-10-17|Build fails when source tree is read-only         |
|37196|Inf|Min|2005-10-21|Wrong "Parent directory" link                     |
|37201|New|Enh|2005-10-21|Add <IfInterface IP> syntax to apache configuratio|
|37290|Opn|Min|2005-10-28|DirectoryIndex don't work in scriptaliased directo|
|37307|New|Enh|2005-10-31|Can't suppress error messages                     |
|37355|New|Enh|2005-11-04|Allow to specify Proxy-Authorization in ProxyRemot|
|37360|New|Maj|2005-11-04|Install fails on Windows XP x64 when program files|
|37402|New|Nor|2005-11-08|mod_proxy has stopped allowing POST sub-requests  |
|37514|Inf|Nor|2005-11-15|mod_proxy buffers chunked data.                   |
|37564|New|Enh|2005-11-19|Suggestion: mod_suexec SuexecUserGroup directive i|
|37587|Inf|Min|2005-11-22|mod_status Total Traffic value goes up then down? |
|37823|Inf|Nor|2005-12-07|The openssl library linked is different between ht|
|37920|New|Maj|2005-12-15|mod_proxy does not flush data on POST requests fro|
|38116|New|Enh|2006-01-04|Chroot-Patch for SuExec                           |
|38164|New|Nor|2006-01-06|wrong status code for failed COPY/MOVE            |
|38182|New|Nor|2006-01-08|COPY ignores authority in Destination header      |
|38218|New|Enh|2006-01-10|Multiline Comments for *.conf files               |
|38240|Inf|Nor|2006-01-12|apache restart segfault with mutliple Include dire|
|38325|Opn|Nor|2006-01-20|impossible to determine AUTH_TYPE of interpreted r|
|38355|Unc|Enh|2006-01-23|DSO support for mod_rewrite                       |
|38369|New|Enh|2006-01-24|mod_proxy keeps alive connections that should be b|
|38408|New|Nor|2006-01-27|SSI environment vars not set in spawned processes |
|38419|New|Nor|2006-01-27|Problems with large WebDAV properties             |
|38478|New|Maj|2006-02-01|A client starting a SSL renegotiation can crash th|
|38515|New|Enh|2006-02-05|Dynamic LDAP Group Support                        |
|38550|New|Enh|2006-02-07|Setting headers based on proxied data             |
|38571|New|Enh|2006-02-08|CustomLog directive checked by apachectl configtes|
|38756|Inf|Nor|2006-02-22|errors with running make                          |
|38786|New|Nor|2006-02-26|"IndexOption VersionSort" has problems with traili|
|38827|New|Reg|2006-03-02|mod_disk_cache trying to rename locked tempfile on|
|38864|Inf|Enh|2006-03-06|ProxyPassReverse fails in <Location>              |
|38903|New|Maj|2006-03-09|r->allowed does not affect Allow response header  |
|38923|New|Min|2006-03-10|mod_speling incorrectly escapes linked URLs       |
|38928|New|Min|2006-03-11|propose removing "VARIANTS" feature               |
|38995|New|Nor|2006-03-16|httpd tries to communicate with the CGI daemon eve|
|39111|New|Nor|2006-03-27|Potential bug brought by mmapfile (mod_file_cache)|
|39128|Inf|Maj|2006-03-28|Apache 2.2 will not compile mod_ssl library's corr|
|39185|Inf|Nor|2006-04-03|Approximately in 1-2 weeks of work the server hang|
|39216|New|Maj|2006-04-05|mod_disk_cache trying to rename locked file, decre|
|39238|New|Nor|2006-04-07|mod_auth_dbm requires mod_auth or "no groups file?|
|39275|Opn|Nor|2006-04-11|slow child_init causes MaxClients warning         |
|39287|New|Nor|2006-04-12|Incorrect If-Modified-Since validation (due to syn|
|39299|New|Nor|2006-04-13|Internal Server Error (500) on COPY               |
|39329|Inf|Nor|2006-04-17|mod_dbd reconnection and prepared statements      |
|39370|New|Nor|2006-04-20|SSL session will be removed if the client is sendi|
|39380|Inf|Nor|2006-04-21|mod_disk_cache eats memory, has no LFS support, et|
|39418|New|Nor|2006-04-26|CacheMaxExpire directive not enforced             |
|39448|New|Min|2006-04-29|old-style <directory proxy:*> doesn't give any war|
|39498|New|Nor|2006-05-06|accept_filter in apr assumes if found in sys/socke|
|39517|New|Nor|2006-05-08|Corrupt chunked transfer-encoding with Content Neg|
|39658|Opn|Nor|2006-05-25|mod_proxy_ajp SSL Key Size Bug                    |
|39673|New|Nor|2006-05-29|mod_proxy opens connections that disturb NTLM     |
|39692|New|Nor|2006-05-31|mod_proxy_balancer doesn't retry a failed request |
|39723|Inf|Enh|2006-06-05|Forward proxy does not work in tranparent mode    |
|39727|Ass|Nor|2006-06-05|Incorrect ETag on gzip:ed content                 |
|39730|New|Nor|2006-06-06|LanguagePriority and DefaultLanguage are Case Sens|
|39737|New|Nor|2006-06-06|LogFormat "%{tid}P" reports wrong thread id on Win|
|39748|New|Enh|2006-06-07|Header and POST support for mod_include           |
|39753|New|Nor|2006-06-07|incorrect source for LOCALE Decimal Symbol in Win2|
|39785|Inf|Nor|2006-06-12|Status code 408 (Request Timeout) is not logged   |
|39807|Opn|Enh|2006-06-13|large files / filesystem corruption can cause apac|
|39902|New|Nor|2006-06-27|HeaderName directive breaks mod_filter somehow    |
|39904|New|Nor|2006-06-27|graceful restart error and cpu load               |
|39913|Ass|Blk|2006-06-27|detection of static OpenSSL libraries requiring li|
|39916|New|Nor|2006-06-28|Core Filters & non-blocking Sendfile              |
|39923|New|Nor|2006-06-28|AddDescription doesn't work in server config with |
|39928|New|Nor|2006-06-28|port no detected when file name not in URL        |
|39935|New|Nor|2006-06-29|AddDescription does not do literal comparisons on |
|39973|Ass|Enh|2006-07-06|apache software folder should be movable          |
|40035|New|Cri|2006-07-13|Windows Server 2003 "("R2")" 64-Bit Edition no cgi|
|40060|New|Nor|2006-07-17|AuthGroupFile should accept /etc/group syntax     |
|40075|New|Enh|2006-07-19|unable to use ldap groups that contain DNs and use|
|40102|Opn|Nor|2006-07-24|SCRIPT_NAME set incorrectly with mod_rewrite      |
|40146|New|Nor|2006-07-31|mod_ssl info in server_info is blank              |
|40174|New|Min|2006-08-03|Unable to get IndexOptionis ScanHTMLTitles to work|
|40180|Inf|Maj|2006-08-03|Mod_dav and remove folder doesn't work with Micros|
|40190|New|Nor|2006-08-05|translate file                                    |
|40196|New|Nor|2006-08-06|EILSEQ handling, NoImplicitAdd should work, and so|
|40217|Opn|Nor|2006-08-08|mod_dav PROPFIND ignores access restrictions on it|
|40266|Inf|Blk|2006-08-16|berkeley db support in httpd is screwed           |
|40312|New|Nor|2006-08-24|ssl_engine_init.c, ssl_init_ctx_verify contains a |
|40373|New|Nor|2006-08-31|mod_dir adds trailing slash after internal redirec|
|40408|New|Blk|2006-09-04|Apache 2.2.3 is not starting                      |
|40416|New|Maj|2006-09-05|mod_proxy_ftp cannot connect under http load in fo|
|40441|New|Enh|2006-09-08|intelligently handling dynamic subdomains         |
|40453|New|Nor|2006-09-09|lexicographic compare in RewriteCond isn't lexicog|
|40463|New|Nor|2006-09-11|piped logging causes some weird kill()ing         |
|40513|Opn|Maj|2006-09-14|Seeding PRNG with 0 bytes of entropy              |
|40514|New|Nor|2006-09-14|would like GracefulShutdownTimeout to work for gra|
|40540|Inf|Nor|2006-09-19|Bad interaction between MultiViews and SetOutputFi|
|40541|New|Nor|2006-09-19|Action rewrites URI used by Location?             |
|40571|New|Nor|2006-09-21|mod_proxy_ajp don't works with mod_usertrack      |
|40586|New|Enh|2006-09-22|Add option to supress default '-' output          |
|40746|New|Enh|2006-10-12|Feature request: ProxyAllow directive             |
|40749|New|Min|2006-10-12|magic file with string and "%n" causes Apache chil|
|40781|New|Nor|2006-10-17|PATH_TRANSLATED: 'redirect:/~jablko/gallery2/main.|
|40808|New|Enh|2006-10-23|ProxyRemote with optional proxy authentication    |
|40859|New|Enh|2006-11-01|[PATCH] Support -F force option to 'ab' support to|
|40917|New|Nor|2006-11-07|configure does not detect OpenSSL shared lib on HP|
|40953|New|Min|2006-11-12|Should not send any data in 1xx/204/304 reply from|
|40984|Inf|Enh|2006-11-16|AddIcon, AddIconByType for OpenDocument format    |
|40987|Opn|Enh|2006-11-16|ProxyVia Block doesn't remove Via: header for reve|
|41000|New|Nor|2006-11-19|mod_authn_dbd have an error, in function 'authn_db|
|41025|New|Nor|2006-11-23|ROBOTS META-Tag directive needed in mod_autoindex |
|41088|New|Nor|2006-11-30|installation backcolor is wrong (white)           |
|41111|New|Enh|2006-12-05|New option for filters: run only if there are spar|
|41114|New|Blk|2006-12-06|ACL HTTP method is rejected by mod_proxy_ajp      |
|41130|New|Nor|2006-12-07|mod_mime and mod_negotiation type-map both clobber|
|41143|Opn|Nor|2006-12-10|Incorrect ap_getline assumption in mod_proxy_http |
|41195|New|Nor|2006-12-17|properly set the parent pid on shutdown           |
|41196|New|Nor|2006-12-17|worker mpm usage of apr's memory pools is not thre|
|41200|Inf|Maj|2006-12-18|SSI include, prevent client from receiving full ou|
|41240|Inf|Enh|2006-12-25|BRF files support                                 |
|41262|Inf|Nor|2006-12-29|Embedded pcre causes runtime segfault             |
|41362|Inf|Maj|2007-01-14|mod_disk_cache and mod_include conflict generating|
|41375|Inf|Min|2007-01-15|Using same SSL Certificate with different ServerNa|
|41391|New|Min|2007-01-17|too long period setting makes max-age overflow    |
|41412|New|Enh|2007-01-19|RewriteRule Skip should take negative arguments   |
|41435|New|Nor|2007-01-22|Authentication fails with 500 Server Error        |
|41450|Inf|Cri|2007-01-24|Empty page (200 OK) while max-age is empty        |
|41485|New|Nor|2007-01-28|LDAP client certificates not usable in 2.2.x/trunk|
|41529|New|Enh|2007-02-02|Accept BOM in .htaccess                           |
|41556|New|Enh|2007-02-07|Feature Request: format string for masking ip addr|
|41621|New|Maj|2007-02-15|Apache 2.2.4 backend problem with Apache 2.0.59 Re|
|41646|New|Nor|2007-02-16|wrong headers are sent for HEAD requests when Prox|
|41676|Opn|Enh|2007-02-22|Refactor mod_proxy_ftp                            |
|41685|New|Enh|2007-02-22|Implement optional HTTP Authentication in a standa|
|41712|Inf|Nor|2007-02-26|threads locked at logging state                   |
|41729|New|Maj|2007-02-28|error message: ap_get_scoreboard_lb(130) failed in|
|41744|Inf|Maj|2007-03-01|SSI resolves includes but removes original HTML   |
|41763|Opn|Nor|2007-03-05|mod_disk_cache ignores CacheDirLevels and CacheDir|
|41764|New|Nor|2007-03-05|error state and conf                              |
|41771|Inf|Nor|2007-03-06|Erro with mod_proxy_ajp or mod_prox_balancer      |
|41867|New|Nor|2007-03-16|<DirectoryMatch> Matches Files                    |
|41925|New|Nor|2007-03-21|trivial patch to add automatic crypting to 'dbmman|
|41929|New|Nor|2007-03-22|ISAPI ssl variables                               |
|41953|New|Nor|2007-03-26|pidfile remains when 2nd pass of post-config retur|
|41962|New|Min|2007-03-27|Need mod_auth_ldap to authenticate with Active Dir|
|42001|New|Cri|2007-03-30|LINUX : Could not set LDAP_OPT_X_TLS to LDAP_OPT_X|
|42027|Inf|Nor|2007-04-02|FileETag directive appears to be ignored          |
|42054|New|Nor|2007-04-04|service name and parameter issues                 |
|42079|New|Nor|2007-04-10|SSLRequire: Additional access in sub-directoies   |
|42082|New|Nor|2007-04-10|filter_init is called multiple times after an INCL|
|42182|Inf|Nor|2007-04-22|Mime types for cached proxied content             |
|42216|New|Enh|2007-04-24|RFE -- external overload procedure                |
|42262|Inf|Nor|2007-04-26|mod_dav /  worker fails to allocate memory and seg|
|42287|Inf|Nor|2007-04-28|chunked encoded response to POST request to cgi sc|
|42368|Inf|Nor|2007-05-09|httpd is crashing if conf/extra/httpd-manual.conf |
|42373|Inf|Maj|2007-05-09|REPORT request fails over mod_proxy               |
|42404|New|Enh|2007-05-13|Filename/info for disk-cached proxied remote URLs |
|42425|Inf|Nor|2007-05-15|Additional freshness checks in mod_cache.c cause m|
|42471|Inf|Nor|2007-05-21|clients with IE7 take 3megs per page load. httpd.e|
|42492|Inf|Nor|2007-05-22|mod_proxy_ajp with SSL front end: data corruption |
|42499|Inf|Nor|2007-05-23|Backslash produces a 404 error instead of going to|
|42548|New|Nor|2007-05-30|INCLUDE negotiating language aborts with APR_POOL_|
|42561|New|Enh|2007-05-31|[PATCH] AuthLDAPRemoteUserAttribute only applies i|
|42633|New|Min|2007-06-11|mod_info gives wrong information about actual conf|
|42665|New|Nor|2007-06-14|spurious attempt to open ".../file.html/.htaccess"|
|42666|New|Nor|2007-06-14|code & docs corrections for FollowSymLinks and Sym|
|42667|New|Nor|2007-06-14|mod_proxy_balancer not reporting when workers are |
|42668|Inf|Nor|2007-06-14|balancer_manager shows Ok status for the workers t|
|42687|New|Nor|2007-06-18|Fully delegate certificate & key semantics to the |
|42688|New|Enh|2007-06-18|engine managed keys: per process openssl context  |
|42690|New|Nor|2007-06-18|realm is not set for each configured directory whe|
|42695|Opn|Cri|2007-06-18|mod_proxy balancer problem                        |
|42699|New|Enh|2007-06-20|share mod_logio data with other modules           |
|42711|New|Enh|2007-06-20|format string for whole log entries not just id   |
|42732|Opn|Maj|2007-06-25|Authentication against database issue.            |
|42763|New|Nor|2007-06-28|graceful-stop/restart loops go loop too far       |
|42923|Inf|Maj|2007-07-17|vhost certificate NOT overriding cert from the _de|
|42972|Inf|Nor|2007-07-25|Certificate list in mod_ssl module context are not|
|42977|New|Nor|2007-07-25|DAV locking is busted when apr-util is built with |
|42987|New|Nor|2007-07-27|Weak Etags in Apache are useless and violate RFC 2|
|43012|New|Nor|2007-08-02|AIX instdso.sh libphp5.so                         |
|43027|New|Enh|2007-08-03|Header in default language                        |
|43033|New|Nor|2007-08-04|apxs does not correctly detect module name (w/o -n|
|43177|New|Nor|2007-08-21|child pid xxxxx exit signal Segmentation fault    |
|43218|New|Nor|2007-08-27|Wrong cert used for vhost if ServerName is same   |
|43220|Opn|Cri|2007-08-27|mod_proxy truncating ajp output                   |
|43249|Inf|Maj|2007-08-30|ldap_simple_bind_s failed when using SUN LDAP Libs|
|43275|New|Enh|2007-08-31|Remove avoidable network transactions in mod_proxy|
|43289|New|Nor|2007-09-02|XBitHack full g+x returns zero sized response on I|
|43308|New|Nor|2007-09-04|Persistent backend connections not supported for R|
|43352|New|Nor|2007-09-11|Apache2: out of memory during heavy webdav files c|
|43441|New|Nor|2007-09-20|Incorrect HTTP status for pre-commit-blocked autov|
|43471|New|Min|2007-09-25|no need to create a global pool on open_scoreboard|
|43481|New|Cri|2007-09-26|AuthLDAPURL must contain a final path of branch?(l|
|43494|New|Nor|2007-09-26|mod_cgid does not kill never ending scripts       |
|43502|New|Enh|2007-09-28|httpd fails to start if log directory does not exi|
|43513|New|Nor|2007-09-29|Persistent backend connections for ProxyPassMatch |
|43532|Inf|Cri|2007-10-02|Error while compiling Apache 2.2.3 on HPUX        |
|43533|Opn|Nor|2007-10-02|Frequent crashes in mod_include's bndm()          |
|43561|New|Nor|2007-10-05|apxs -q anomaly                                   |
|43577|Inf|Blk|2007-10-09|mod_authnz_ldap not working under WLDAP32 (novell/|
|43607|New|Nor|2007-10-11|mod_proxy sends data on closed connections without|
|43649|Opn|Trv|2007-10-18|mod_autoindex is generating invalid XHTML markup  |
|43652|New|Enh|2007-10-18|Suggest small change for big fix with SuExec & Vir|
|43666|New|Nor|2007-10-20|CGI works, but client denied error messages in err|
|43679|New|Enh|2007-10-23|Contributed tests for checking that subrequests ta|
|43723|Inf|Cri|2007-10-29|Apache 2.2.6 segfault when using mod_dbd          |
|43724|New|Cri|2007-10-29|Apache 2.2.6 segfault on url wich not in cache    |
|43755|New|Enh|2007-10-31|Add a SSLOptions to don't fill SSL_CLIENT_VERIFY  |
|43762|New|Enh|2007-10-31|Misleading tips in an error message about internal|
|43777|New|Nor|2007-11-01|Wrong encoding of <href> element in response      |
|43778|New|Nor|2007-11-01|Wrong responses if httpd has not access to some el|
|43785|New|Enh|2007-11-02|Tracking the per-hit impact of mod_include        |
|43792|New|Enh|2007-11-04|Feature proposal - bind phase                     |
|43818|New|Nor|2007-11-08|PROPFIND on -w- collections returns 207 MULTI-STAT|
|43838|New|Enh|2007-11-11|If-Modified-Since request and htcacheclean conflic|
|43895|New|Nor|2007-11-18|mod_mbox improvements                             |
|43897|Inf|Cri|2007-11-18|Huge memory consumption httpd 2.2.6, mod_proxy - m|
|43931|New|Enh|2007-11-21|OpenSSL autoconfig support for mod_ssl            |
|43943|New|Nor|2007-11-22|SHMCB crash due to misalignment and GCC 4 optimiza|
|43958|Inf|Maj|2007-11-26|mod_proxy_balancer not balancing correct in combin|
|43997|Opn|Min|2007-11-29|Only issue "Init: SSL server IP/Port conflict" if |
|44025|Inf|Nor|2007-12-05|Apache 2.2.6 fails to configure on OpenBSD 4.1    |
|44027|Ass|Enh|2007-12-05|Internationalized Domain Name (IDN) support       |
|44031|Opn|Maj|2007-12-06|RemoveHandler inside subdir location              |
|44034|Ass|Enh|2007-12-06|mpm_winnt doesn't call monitor hook               |
|44105|New|Nor|2007-12-19|Core dumps when using Proxy Keepalive             |
|44155|New|Enh|2007-12-31|smarter retry for LDAP_UNAVAILABLE, LDAP_BUSY, etc|
|44181|Opn|Enh|2008-01-07|add UnAlias                                       |
|44188|Inf|Cri|2008-01-08|Empty response for certain requests (mod_proxy as |
|44218|New|Min|2008-01-13|mod_autoindex shows the default icon for files wit|
|44221|Opn|Cri|2008-01-14|CheckCaseOnly On does not stop Multiple Choices ba|
|44250|New|Nor|2008-01-16|OSX 10.5: __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_|
|44279|New|Enh|2008-01-22|Add "iterate" flag to apply rule in a loop while p|
|44302|New|Nor|2008-01-27|AuthLDAPURL does not accept ldapi:// urls         |
|44305|New|Nor|2008-01-28|Inconsistent configuration for suexec path        |
|44316|New|Nor|2008-01-28|httpd 2.0 does not follow ScriptAliases when invok|
|44322|New|Enh|2008-01-29|mod_proxy ProxyPassReverseCookieDomain with no dom|
|44351|New|Nor|2008-02-04|File descriptor leak when using prg RewriteMap    |
|44363|Inf|Maj|2008-02-05|Slow file transfers                               |
|44384|Ass|Nor|2008-02-09|mod_ssl on MacOS X 10.5.1 does not work because of|
|44453|New|Nor|2008-02-19|list_hooks.pl doesn't parse declarations that span|
|44476|New|Maj|2008-02-23|Apache service fails to start due to missing depen|
|44503|Inf|Blk|2008-02-27|Errors during SSL handshake                       |
|44518|New|Enh|2008-03-02|Don't set expires header on HTTP redirect.        |
|44578|New|Enh|2008-03-11|mod_authn_dbd option to let database validate pass|
|44601|New|Trv|2008-03-13|Add a lowercase value to Vary header for consisten|
|44602|New|Enh|2008-03-13|Options for modfying Content-Location (relative OR|
|44622|Inf|Nor|2008-03-17|POST fails to SSL vhost with proxy to HTTP backend|
|44631|New|Nor|2008-03-18|with-included-apr fails to work when using a separ|
|44638|New|Nor|2008-03-19|sed error in httpd.spec.in                        |
|44656|New|Nor|2008-03-22|Tries to retrive error document 404 instead of 406|
|44657|New|Enh|2008-03-22|prefer-type, -encoding, and -charset cookie? (as p|
|44670|New|Min|2008-03-25|Apache httpd 2.2.8 : Cannot ./configure when curre|
|44696|Inf|Nor|2008-03-27|mod_cache sometimes serves old content despite hav|
|44730|New|Nor|2008-04-01|duplicate query string in remote server url when u|
|44752|New|Nor|2008-04-03|Suexec does not correctly check that scripts are i|
|44757|New|Enh|2008-04-04|adding stderr buckets to mod_cgi                  |
|44758|New|Enh|2008-04-04|LimitRequestBody undocumented behaviour with proxi|
|44779|New|Enh|2008-04-08|Using commas and semicolons for content negotiatio|
|44855|New|Nor|2008-04-22|irregular balancing with sticky-session after re-e|
|44865|Ass|Nor|2008-04-23|mod_dav's lock database becomes consistently corru|
|44870|Inf|Nor|2008-04-24|process spinning on 100% cpu                      |
|44923|Inf|Min|2008-05-02|consequences of multiple LDAPTrustedGlobalCert    |
|44924|New|Enh|2008-05-02|allow 'CACERTDIR' in mod_ldap                     |
|44940|New|Maj|2008-05-06|Httpd randomly breaks when verifying client certif|
|44981|New|Enh|2008-05-12|Digital Certificates (CN Based) for Authorization |
|45022|New|Nor|2008-05-16|Processing of escaped glob patterns in "Include" d|
|45023|Opn|Reg|2008-05-16|DEFLATE preventing 304 NOT MODIFIED response      |
|45049|New|Nor|2008-05-20|mod_mem_cache caches partial content when client c|
|45054|New|Nor|2008-05-21|SSLVerifyClient optional_no_ca is broken          |
|45058|New|Nor|2008-05-21|Mod_SSL does not set AUTH_TYPE with client certifi|
|45078|New|Nor|2008-05-27|mod_proxy stalls when uploading files             |
|45103|Ass|Min|2008-05-30|apachectl should do config test before reload/rest|
|45111|New|Enh|2008-06-01|make mod_usertrack use mod_unique_id if available |
|45116|New|Nor|2008-06-02|fail to check return value of apr_file_dup2() in /|
|45148|New|Enh|2008-06-06|The actual host of the request will be more helpfu|
|45184|New|Enh|2008-06-11|Regular Expression in directive ServerAlias       |
|45187|New|Maj|2008-06-11|Long File name requests gives FORBIDDEN response  |
|45225|New|Nor|2008-06-17|XBitHack breaks DirectoryIndex + MultiViews conten|
|45253|New|Nor|2008-06-23|Unable to build httpd 2.2.9 on Solaris/SPARC      |
|45257|New|Enh|2008-06-23|add (en)force option for UseCanonicalName         |
|45259|New|Enh|2008-06-23|Add /home/[a-z]/* scheme to UserDir conf          |
|45275|New|Maj|2008-06-25|Locked files during expired page renew in disk cac|
|45281|New|Enh|2008-06-25|SITE CHMOD/SEARCH                                 |
|45287|Inf|Min|2008-06-26|build failure because of difference between BSD an|
|45297|New|Min|2008-06-27|mod_dir does not manage correctly the user (r->use|
|45302|New|Enh|2008-06-28|ServerRoot directive                              |
|45355|New|Nor|2008-07-07|ab text and html output jumbo unification         |
|45356|New|Nor|2008-07-07|ab: optionally reduce resource usage (qsort and me|
|45371|New|Nor|2008-07-10|MSI installer requires uninstall of previous versi|
|45374|New|Blk|2008-07-10|Shared memory error on starting httpd with mod_lda|
|45379|Inf|Nor|2008-07-11|[Bug] svn merge, apache and trailing slashes      |
|45385|Inf|Nor|2008-07-11|unable to compile/make 2.2.9 with --enable-ldap   |
|45393|New|Nor|2008-07-14|Apache returns 500 Error when no LDAP credentials |
|45402|New|Nor|2008-07-15|mod_autoindex incorrectly fails to list files     |
|45405|New|Enh|2008-07-16|Allow binding port to be set for individual worker|
|45449|New|Nor|2008-07-21|[PATCH] Add support to WebDav to MOVE/COPY to remo|
|45456|New|Enh|2008-07-22|mod_dbd don't allow more then one database pool   |
|45487|New|Trv|2008-07-27|broken log messages on startup in win32 version   |
|45497|New|Nor|2008-07-29|Scoreboard slot leaked using MaxRequestsPerChild a|
|45512|Ass|Maj|2008-07-31|Bad Performance of mod_proxy with SSL on Solaris 1|
|45524|New|Enh|2008-08-01|Specifying multiple vhost aliases                 |
|45525|New|Enh|2008-08-01|Switch mod_autoindex to Tango icons               |
|45579|New|Nor|2008-08-06|unknown URI scheme in request-URI ignored         |
|45674|New|Enh|2008-08-22|Allow to change error code returned by "Require ld|
|45726|New|Enh|2008-09-02|Build in a maintenance functionallity             |
|45736|New|Nor|2008-09-03|mod_dav needs a directory for its locks and one sh|
|45754|New|Enh|2008-09-06|autoconf macros                                   |
|45763|New|Nor|2008-09-08|No openssl.cnf defined by default causes OpenSSL c|
|45773|New|Nor|2008-09-09|pcre build generates sources to srcdir rather than|
|45788|New|Nor|2008-09-11|mod_log_forensic output shouldn't be buffered when|
|45801|Opn|Nor|2008-09-13|SSLRequireSSL with strictrequire and satisfy any d|
|45838|New|Nor|2008-09-18|mod_authz_owner & directories                     |
|45868|New|Nor|2008-09-23|mod_mem_cache update of headers in cache object is|
|45900|New|Nor|2008-09-26|"make install" fails from read-only filesystem    |
|45905|New|Enh|2008-09-26|ErrorDocument and default URL                     |
|45922|New|Enh|2008-09-30|Expand the conditions under which "SSLVerifyClient|
|45923|New|Nor|2008-09-30|htpasswd tries to open(file, O_RDONLY | O_APPEND) |
|45926|Inf|Nor|2008-10-01|Unable to start apache 2.2.9                      |
|45986|New|Nor|2008-10-10|[info]...Invalid argument: core_output_filter: wri|
|46024|Opn|Nor|2008-10-16|--enable-static is not available in apache's confi|
|46037|Inf|Nor|2008-10-18|Configuration of trusted OCSP responder certificat|
|46040|New|Enh|2008-10-20|Check for existing version of Apache while install|
|46054|New|Nor|2008-10-21|Running httpd returns the error "bad user name nob|
|46070|New|Nor|2008-10-22|MSI installer does not validate custom installatio|
|46071|New|Enh|2008-10-22|Allowing space in between comma and last option in|
|46074|New|Enh|2008-10-23|Need of friendly and easy to use configuration gra|
|46139|New|Nor|2008-11-02|Apache Restart option is not working              |
|46140|New|Enh|2008-11-03|Change error state in balancer manager            |
|46188|Inf|Nor|2008-11-11|Core dumps in apache 2.0.59                       |
|46195|Opn|Nor|2008-11-12|ProxyPass fails with literal IPv6 address         |
|46215|New|Nor|2008-11-14|Race condition in bybusyness algorithm            |
|46231|New|Maj|2008-11-18|Connection Pooling with ajp depends on syntax ?   |
|46241|New|Enh|2008-11-19|mod_expires - ExpiresByPattern or ExpiresIf       |
|46267|New|Nor|2008-11-22|No shared modules build if use --with-apr and --wi|
|46270|New|Enh|2008-11-23|Add FIPS 140-2 mode for mod_ssl for FIPS 1.2 modul|
|46282|New|Nor|2008-11-24|apache2.2 reverse proxy causing full memory and sw|
|46316|New|Maj|2008-12-01|Proxied SSI ProxyTimeout render failure           |
|46317|Inf|Nor|2008-12-01|mod_authnz_ldap.c(373)  seg fault                 |
|46412|New|Nor|2008-12-17|make_child return value not checked               |
|46417|New|Cri|2008-12-19|[notice] Parent: child process exited with status |
|46428|Opn|Nor|2008-12-21|Spaces in URI doesn't encode in proxy-requests    |
|46442|New|Nor|2008-12-29|Semicolon in allow/deny all rules cause reverse lo|
|46449|New|Maj|2008-12-30|Output out of order from SSI include virtual      |
|46454|New|Min|2008-12-30|escaping wildcards in AddIcon filename matching   |
|46475|New|Nor|2009-01-04|build warnings.                                   |
|46499|New|Maj|2009-01-09|httpd accept() return EAGAIN error                |
|46521|New|Nor|2009-01-13|mod_dav doesn't show symlinks                     |
|46529|Ass|Nor|2009-01-14|Child httpd processes crash with Segmentation faul|
|46534|New|Nor|2009-01-14|mod_proxy_ajp scheme and port do not follow UseCan|
|46578|New|Nor|2009-01-21|Flawed header                                     |
|46582|Ver|Min|2009-01-22|RewriteMap internal functions are not well documen|
|46604|New|Nor|2009-01-26|Error thrown when trying to rpmbuild -tb httpd sou|
|46629|New|Maj|2009-01-29|Apache hanging on system calls for php and perl   |
|46634|Ass|Nor|2009-01-30|Requests sometimes take too long, wrong time taken|
|46644|New|Enh|2009-01-31|Clean way to pass custom environment variables to |
|46646|Ass|Nor|2009-02-01|check group membership is sometimes case sensitive|
|46650|Opn|Nor|2009-02-02|CustomLog enviroment condition SCRIPT_FILENAME    |
|46656|New|Enh|2009-02-03|ProxyErrorOverride inside location                |
|46669|New|Enh|2009-02-06|rotatelogs doesn't autocreate directories         |
|46671|Opn|Cri|2009-02-07|Apache periodicaly crashes .                      |
|46678|New|Nor|2009-02-09|Fixed Content-Length using mod_ext_filter with mod|
|46682|New|Nor|2009-02-09|mod_proxy EAI_AGAIN DNS failure                   |
|46685|Opn|Nor|2009-02-09|401 sent without WWW-Authenticate header when requ|
|46709|Opn|Reg|2009-02-12|Expect: 100-continue to an HTTP/1.0 server change |
|46724|Inf|Cri|2009-02-17|WinXP SP3 - Apache crashes on startup in libapr-1.|
|46743|New|Nor|2009-02-19|Inconsistent behavior of "RewriteOptions inherit" |
|46745|New|Maj|2009-02-20|ab.c error :  undefined reference to `BIO_set_call|
|46751|New|Nor|2009-02-21|Can passenv variables who's name contain '(' or ')|
|46762|New|Nor|2009-02-24|Error, SSL/TLS libraries were missing or unusable |
|46765|Opn|Nor|2009-02-25|doubled HTTP header leads to error (Redmine)      |
|46785|Inf|Nor|2009-03-02|Child process increases to 100% (CPU)             |
|46788|New|Nor|2009-03-02|Set resource limits to avoid denial of service att|
|46810|New|Nor|2009-03-05|apxs / apu-1-config outputting erroneous include p|
|46824|New|Nor|2009-03-09|RemoveOutputFilter will not work for Filters added|
|46845|Inf|Cri|2009-03-12|Apache crashes in Windows when using subversion(pr|
|46847|New|Nor|2009-03-13|WebDAV methods with encoding other than "identity"|
|46873|New|Nor|2009-03-18|feature request: connection count on balancer-mana|
|46884|New|Min|2009-03-20|Call to apu_dso_load Fails In apr_ldap_stub.c On O|
|46946|Inf|Nor|2009-03-31|mod_mbox shows email addresses in plain text      |
|46963|New|Nor|2009-04-03|KeepAliveTimout prevents child process from exitin|
|46969|New|Nor|2009-04-05|CustomLog format %m always GET on errors with loca|
|46970|New|Nor|2009-04-05|CustomLog %X does not record aborted connections w|
|47011|New|Reg|2009-04-09|mod_proxy/mod_proxy_balancer hot-standby BalancerM|
|47055|New|Blk|2009-04-20|SSLVerifyClient + Directory doesn't use cache sess|
|47063|New|Nor|2009-04-21|mod_proxy doesn't call post_request handler when t|
|47134|New|Nor|2009-05-01|Last resolve handling when sending client certific|
|47138|New|Nor|2009-05-01|Reverse Proxy & Balancer generate error fault when|
|47152|New|Maj|2009-05-04|Apache is only serving the first character in the |
|47159|New|Nor|2009-05-06|2.2.x logresolve doesn't support ipv6             |
|47167|New|Nor|2009-05-07|Authenticated sessions being switched by reverse p|
|47170|New|Enh|2009-05-08|rotatelogs ring buffer option                     |
|47180|New|Nor|2009-05-11|DBM ssl_scache setting can cause extreme performan|
|47220|Opn|Enh|2009-05-19|Access to environment variables                   |
|47241|New|Min|2009-05-22|Error in rewriting with character ':'             |
|47256|New|Enh|2009-05-23|Enable SSL on a per-port basis                    |
|47289|New|Nor|2009-05-30|Can't build with dynamic libraries on Mac OS 10.4 |
|47295|New|Nor|2009-06-01|AuthDBDUserPWQueryFmt/AuthDBDUserRealmQueryFmt in |
|47329|New|Nor|2009-06-07|SSLCADNRequest* & SSLCACertificate* silently do no|
|47340|New|Nor|2009-06-09|uldap_cache_comparedn() called without a lock     |
|47344|New|Enh|2009-06-10|[FEATURE REQUEST] RedirectCanonicalName           |
|47345|New|Enh|2009-06-10|rotatelogs timeout patch                          |
|47346|New|Maj|2009-06-10|mod_cache doesn't re-cache expired content when La|
|47387|Inf|Nor|2009-06-18|SSL_CLIENT_I_DN and SSL_CLIENT_S_DN use Email inst|
|47392|Opn|Nor|2009-06-18|<FilesMatch> is using the wrong directory         |
|47435|New|Nor|2009-06-26|mod_authz_host does reading of /etc/hosts on each |
|47438|Inf|Enh|2009-06-27|how to create a non-html "listing generated by the|
|47447|New|Enh|2009-06-29|Add possibility to use client IP as a value in Req|
|47484|New|Nor|2009-07-06|Spurious RewriteLock warning when using external m|
|47485|New|Enh|2009-07-06|HTML5 Websocket implementation                    |
|47514|New|Enh|2009-07-12|Personal data and restrictions based on subject di|
|47528|New|Maj|2009-07-14|Worker process won't restart more than once using |
|47542|New|Nor|2009-07-16|Piped logging processes killed before other proces|
|47562|Inf|Nor|2009-07-23|Apache/2.2.3 (Win32) mod_perl/2.0.3-rc1           |
|47578|New|Nor|2009-07-24|compile ERROR with ssl                            |
|47580|Opn|Nor|2009-07-25|mod_cache sends 200 response instead of 304       |
|47586|New|Nor|2009-07-27|httpd -k start doesn't start service when rotatelo|
|47591|New|Min|2009-07-27|show current HTTP_HOST in mod_status scoreboard   |
|47601|New|Enh|2009-07-29|Support X-Forwarded-For in forward proxy requests |
|47625|New|Nor|2009-08-02|2.2.12 win32 msi installer missing                |
|47634|New|Maj|2009-08-04|mod_ldap connection pool session keepalive not imp|
|47643|New|Enh|2009-08-04|added meta tags to xhtml output for ease of search|
|47657|New|Nor|2009-08-06|Make WebDAV MOVE atomic when replacing files on sa|
|47659|New|Nor|2009-08-07|makefile.win needs check for DBM_LIST, dies on bui|
|47664|New|Nor|2009-08-07|ap_proxy_canonenc: does not recode all high-byte c|
|47665|Inf|Blk|2009-08-09|Apache service well launched but blank Screen     |
|47691|New|Enh|2009-08-12|libtool invocations should use --tag              |
|47693|Opn|Nor|2009-08-13|GET request has race condition w.r.t. replacement |
|47706|Inf|Nor|2009-08-19|(20014)Internal error: proxy: error reading status|
|47716|New|Min|2009-08-20|LimitRequestFieldSize and friends not merged well |
|47719|Opn|Enh|2009-08-20|Broken symbolic link (symlink) causes wrong ErrorD|
|47723|New|Nor|2009-08-22|suEXEC and low RLimitMem gives "crit: invalid uid"|
|47743|Inf|Nor|2009-08-26|mod_so segfaults at server startup in ap_find_load|
|47753|New|Nor|2009-08-27|output and error channels not explicitly passed fo|
|47778|Opn|Enh|2009-09-03|wrong exit value on graceful restart              |
|47780|New|Nor|2009-09-03|Critical errors should be marked by time and level|
|47807|Inf|Nor|2009-09-09|Proxy dialog error with Apache 2.2.13             |
|47808|New|Maj|2009-09-09|Child process core dumps when enabling CRL        |
|47814|Inf|Maj|2009-09-10|openssl_pkcs7_sign error                          |
|47838|New|Enh|2009-09-14|Ability to Dynamically Inject Current Time Into a |
|47874|New|Nor|2009-09-18|mod_fcgid crashes if added during restart         |
|47895|New|Maj|2009-09-24|Incorrect 413 error handling                      |
|47908|New|Min|2009-09-27|'invalid result code' in error_log                |
|47981|New|Nor|2009-10-12|allow language specific html-versions (index.html.|
|47982|New|Nor|2009-10-12|correctly interprete non-standard HTTP_ACCEPT_LANG|
|47988|New|Nor|2009-10-12|Segmentation fault                                |
|47989|New|Nor|2009-10-13|Junk string appended to compressed dynamic content|
|47994|New|Enh|2009-10-14|ScriptInterpreterSource apparently broken in Windo|
|48020|New|Nor|2009-10-17|KCP+ Opera support for mod_auth_digest            |
|48037|Inf|Nor|2009-10-21|mod_proxy_http does not handle asynchronous keepal|
|48045|New|Nor|2009-10-23|Apache 2 initgroups alert, Max OS X, abnormal exit|
|48057|New|Nor|2009-10-26|mod_fcgid creates 1 more process then allowed     |
|48094|New|Nor|2009-11-01|Avoid a race condition in close_worker_sockets()  |
|48107|New|Maj|2009-11-02|Mutual Authentication: Order in ca-bundle influenc|
|48115|New|Enh|2009-11-03|Duration to receive the request, generate response|
|48130|New|Maj|2009-11-04|DAV operations on large filesets consume all the O|
|48154|New|Nor|2009-11-06|Requests through mod_isapi are not parsed by HTTP_|
|48164|New|Enh|2009-11-09|add new parameters to rotatelogs                  |
|48219|New|Nor|2009-11-17|Retrying the worker for seems to omit POST variabl|
|48228|New|Nor|2009-11-18|Renegocation requires multiple client authenticati|
|48246|New|Enh|2009-11-19|Check permissions on file/directory specified for |
|48254|New|Trv|2009-11-20|Bogus "DocumentRoot does not exist" warning when s|
|48283|New|Nor|2009-11-25|Proxy errors since httpd 2.2.12 with Tomcat 6.0.20|
|48291|New|Maj|2009-11-26|mod_substitute loops                              |
|48295|Opn|Nor|2009-11-27|ProxyPassReverseCookiePath: Not changing path corr|
|48301|New|Enh|2009-11-30|Feature request: improved connection status report|
|48309|New|Maj|2009-11-30|libapreq2-2.12: "make test" fails at request.t and|
|48312|Opn|Nor|2009-11-30|ProxyPassReverseCookiePath: Not changing path corr|
|48316|Inf|Nor|2009-12-01|ap_run_insert_filter doesn't work in cache_url_han|
|48354|New|Enh|2009-12-08|void ap_custom_response is not supporting the bina|
|48360|New|Enh|2009-12-09|provide sample configuration file for inclusion in|
|48361|New|Enh|2009-12-09|Add global server option for specifying desired DS|
|48364|Opn|Nor|2009-12-10|PHP-generated pages are not cached in spite of per|
|48369|New|Enh|2009-12-10|add option to automatically restart if a script is|
|48431|New|Nor|2009-12-22|Error logging doesn't work when configured to use |
|48440|Inf|Cri|2009-12-23|Segmentation Fault                                |
|48449|Inf|Nor|2009-12-28|make distclean removes core.c and core_filters.c  |
|48465|Opn|Enh|2009-12-30|Support TCP to connect to backends                |
|48499|New|Nor|2010-01-06|mod_rewrite can't redirect to files with ? in them|
|48500|New|Nor|2010-01-06|mod_mbox mishandles right-click to open msg in new|
|48508|New|Nor|2010-01-07|BalancerMember doesn't accept nocanon directive   |
|48549|New|Enh|2010-01-14|Add Cache-Control s-maxage support                |
|48576|New|Nor|2010-01-19|MOVE or COPY in WebDAV fails with 404 when file ex|
|48585|New|Enh|2010-01-20|mod_cache no longer caches expired content        |
|48602|New|Enh|2010-01-23|use asynch ldap_compare so LDAPTimeout applies    |
|48623|New|Maj|2010-01-26|AuthLDAPURL syntax is not RFC-compliant, prevents |
|48639|New|Enh|2010-01-29|Add htcacheclean as a core monitored process      |
|48652|New|Maj|2010-02-01|"AuthType form" fails if a password contains  '&' |
|48659|New|Maj|2010-02-02|Problem with accents in filename and byte serving |
|48687|New|Nor|2010-02-05|mod_rewrite ignores trailing dot in request URI on|
|48705|New|Enh|2010-02-08|flag to allow newlines in the error log as opposed|
|48712|New|Enh|2010-02-09|Add UID and GID to status page                    |
|48719|New|Nor|2010-02-09|[BUG] mod_proxy_ajp return wrong error message whe|
|48721|New|Nor|2010-02-10|[Patch] Add ProxyAllow to mod_proxy               |
|48731|New|Maj|2010-02-11|Prefork not creating processes after 10 servers ar|
|48732|New|Nor|2010-02-12|[BUG] environment variable SCRIPT_NAME output erro|
|48769|New|Nor|2010-02-18|[PATCH] Processes in the busy list should not be k|
|48777|New|Maj|2010-02-19|proxy balancer not detecting correctly when host (|
|48780|New|Enh|2010-02-19|Enable mod_authnz_ldap to accept valid client cert|
|48792|New|Enh|2010-02-22|httpd util apachectl returns wrong status informat|
|48805|New|Nor|2010-02-23|Corrupted response for HTTPS + KEEPALIVE=ON       |
|48808|New|Enh|2010-02-24|mod_authz_owner support for POSIX access control l|
|48819|Inf|Nor|2010-02-25|After users login on the web page, the page does n|
|48842|Inf|Nor|2010-03-02|mod_log_config logs the full size of the file inst|
|48880|Opn|Nor|2010-03-09|error on make                                     |
|48888|New|Nor|2010-03-10|DOCTYPE definitions nearly 11 years out-of-date   |
|48920|New|Enh|2010-03-15|Breadcrumbs on mod_autoindex path                 |
|48921|Inf|Nor|2010-03-16|mod_mem_cache crash, version 2.2.15.0             |
|48937|New|Enh|2010-03-18|Feature proposal - support sasl_bind              |
|48949|Inf|Cri|2010-03-20|fcgid processes never get killed after graceful re|
|48958|New|Nor|2010-03-22|mod_ldap, ldap credential cache & graceful restart|
|48987|New|Trv|2010-03-25|typo in polish translation of HTTP_UNAUTHORIZED.ht|
|49037|New|Enh|2010-04-02|SSLVerifyClient require_no_ca                     |
|49043|New|Maj|2010-04-04|Using ssi include directive overwrites QUERY_STRIN|
|49058|New|Nor|2010-04-06|Prefork MPM tries to accept on closed listener soc|
|49067|New|Nor|2010-04-08|FTPOptions ShowUnAuthorizedFiles does not work    |
|49068|New|Nor|2010-04-08|UTF-8 URL Encode error                            |
|49087|New|Maj|2010-04-11|MSI installation reports "interrupted installation|
|49114|New|Maj|2010-04-13|NTFS junction directories missing from directory l|
|49123|New|Nor|2010-04-14|mod_proxy_ajp does not send the client's SSL chain|
|49131|New|Nor|2010-04-15|Very long URLs cause 404 or 403 errors with SetAct|
|49133|New|Maj|2010-04-16|Windows service recovery options do not work for A|
|49157|New|Nor|2010-04-20|Issues with xml interface for balancer manager    |
|49187|New|Nor|2010-04-26|Crash mod_mem_cache and mod_svn                   |
|49199|New|Enh|2010-04-27|Implement LDAP scope-aware caching in mod_ldap    |
|49220|New|Nor|2010-04-29|feature request for being able to disable FcgidWra|
|49239|New|Blk|2010-05-01|Apache mod_ssl gives coredump with openssl 0.9.8  |
|49277|New|Nor|2010-05-12|Expose a variable to identify SSL Session renegoti|
|49283|New|Nor|2010-05-12|Language of dates on SSI                          |
|49285|New|Enh|2010-05-13|Relative (local to current directory) URLs do not |
|49348|New|Enh|2010-05-27|[mod_log_config] Output log file name format capab|
|49385|New|Maj|2010-06-03|mod_disk_cache server side included files are inte|
|49387|Inf|Cri|2010-06-03|Unable to modify default charset setting to UTF-8 |
|49391|New|Nor|2010-06-05|mod_disk_cache needs to register a cleanup to kill|
|49396|New|Enh|2010-06-06|PATH_INFO normalization, especially relating to vo|
|49427|New|Nor|2010-06-11|mod_cgid and mod_cgi do not return proper value wh|
|49433|New|Enh|2010-06-13|improving info in server status                   |
|49439|New|Nor|2010-06-14|Bug in mod_userdir which prevents suexec from runn|
|49504|New|Nor|2010-06-25|Solaris 10/x64 worker graceful restart problem    |
|49532|New|Nor|2010-06-30|mod_cache: Set-Cookie headers are appended to cach|
|49553|New|Min|2010-07-05|Set QoS bits via APR2 API instead                 |
|49568|New|Maj|2010-07-07|Apache mod_authnz_ldap built with the MS LDAPSDK d|
|49632|Inf|Nor|2010-07-21|mod_authnz_ldap denies users when search is perfor|
|49633|New|Enh|2010-07-21|Handle AD primary groups in mod_authnz_ldap       |
|49642|New|Nor|2010-07-23|mod_rewrite mistakes encoded question mark as path|
|49643|New|Nor|2010-07-23|WebDav plus mod Negotiation causes directory creat|
|49676|New|Nor|2010-07-30|directory with german umlauts are indented by one |
|49680|New|Maj|2010-07-30|Perl script are not running on Win32, Apache 2.2.1|
|49684|New|Enh|2010-08-01|enhancement for ipv6 implementation               |
|49699|New|Nor|2010-08-03|Inconsistent Keep-alive from proxy to the origin s|
|49715|New|Maj|2010-08-06|ProxyPassMatch Url Encoder Problem                |
|49717|New|Enh|2010-08-06|PATCH: Enable SSL Timeout                         |
|49737|Inf|Nor|2010-08-10|order allow,deny does not work on IPv6            |
|49743|New|Maj|2010-08-12|SSI 'echo encoding="(url/none)"' bug              |
|49746|Opn|Enh|2010-08-12|mod_rewrite urlencode option                      |
|49766|New|Maj|2010-08-17|POST request on CGI script generating empty body c|
|49771|New|Nor|2010-08-17|After graceful restart using mod_proxy_ajp, couldn|
|49772|New|Nor|2010-08-18|mod_deflate kicks itself out on Content-Range resp|
|49798|Opn|Nor|2010-08-22|[mod_log_config] Piped Log scripts process cause w|
|49807|New|Enh|2010-08-23|hard to force Content-Type header for non static f|
|49810|New|Nor|2010-08-23|Mod_autoindex output of header/body/footer scrambl|
|49815|New|Enh|2010-08-24|Enable caching for HTTP Range requests / 206 respo|
|49829|New|Trv|2010-08-26|CGI index command line arguments excessively escap|
|49832|New|Enh|2010-08-26|void ap_custom_response is not supporting the bina|
|49859|Opn|Nor|2010-09-01|url with additional filepath generates bad environ|
|49921|New|Nor|2010-09-13|Trailers in chunked http requests are not handled |
|49926|New|Enh|2010-09-14|New option for mod_log_forensics or mod_log_config|
|49980|New|Nor|2010-09-22|can't use a FIFO for SSL key file; mod_ssl checks |
|49981|New|Enh|2010-09-22|Requesting SSLCertificateKeyFile Dialog functional|
|49990|New|Nor|2010-09-23|Feature request: implement ExpiresActive reset    |
|49996|New|Nor|2010-09-24|Proxied ErrorDocument returns 200 OK response code|
|49997|New|Nor|2010-09-24|wrowe promised me...                              |
|50004|New|Nor|2010-09-26|per-dir rewrite without DocumentRoot or RewriteBas|
|50011|New|Cri|2010-09-27|error running apache, and installing apache as a s|
|50024|New|Min|2010-09-29|Mod_cache/mod_mem_cache and mod_security combinati|
|50038|New|Enh|2010-10-01|What Directives apply to a file/directory? Resulta|
|50041|New|Min|2010-10-04|(9)Bad file descriptor: apr_socket_accept: (client|
|50051|New|Nor|2010-10-07|Log PID in first entry logged for each request    |
|50061|New|Nor|2010-10-08|Semicolon character '%3B' seems to be decoded to '|
|50082|New|Nor|2010-10-12|apachectl status returns incorrect exit code      |
|50112|New|Nor|2010-10-18|buildconf broken in two places                    |
|50116|New|Nor|2010-10-19|Apache fragments packets unnecessarily            |
|50151|New|Nor|2010-10-25|Software caused connection abort and apache proces|
|50155|Inf|Nor|2010-10-25|httpd -s attempts to read SSL certificates        |
|50172|Inf|Nor|2010-10-28|Digest allows access bypassing secuity            |
|50227|New|Enh|2010-11-07|Option to fail SSL handshake for diverted SNI conn|
|50237|Inf|Nor|2010-11-08|webdav LOCK access with multiple threads to same f|
|50261|New|Nor|2010-11-12|graceful restart with multiple listeners using pre|
|50262|New|Nor|2010-11-12|mod_rewrite log ip address vs hostname            |
|50274|New|Nor|2010-11-15|always pass CONTENT_LENGTH to the application     |
|50278|New|Nor|2010-11-16|-DFOREGROUND and ap_unixd_killpg()/ap_os_killpg() |
|50290|Inf|Nor|2010-11-18|vanilla apache 2.2.17 installation crashes (lib-ap|
|50296|New|Nor|2010-11-18|LDAPVerifyServerCert and possibly LDAPTrustedMode |
|50317|New|Nor|2010-11-22|Possible error in mod_cache's "Avoiding the Thunde|
|50336|New|Min|2010-11-25|PUT failures do not emit Allow:                   |
|50344|New|Nor|2010-11-26|ProxyPass does not handle different protocols when|
|50357|New|Enh|2010-11-28|improve matching mechanisms for mime type and enco|
|50372|New|Enh|2010-11-29|any reason for allowing ModMimeUsePathInfo only in|
|50390|New|Nor|2010-11-30|WARNING: Unrecognized options : --disable-ipv6    |
|50402|New|Nor|2010-12-02|SetEnv proxy-sendchunks is ignored for small amoun|
|50412|New|Nor|2010-12-04|if IndexOptions +XHTML, the correct MIME type shou|
|50423|Inf|Nor|2010-12-06|Apache is terminated with signal 11, Segmentation |
|50427|New|Nor|2010-12-07|Windows>=Vista+mod_auth_digest+command line=proble|
|50432|New|Enh|2010-12-08|add PCRE-mode for file based matches              |
|50436|New|Enh|2010-12-08|VirtualHost could behave like people expect it to |
|50444|New|Enh|2010-12-09|Pre-close logging handles in cgid agent           |
|50456|Inf|Nor|2010-12-10|Invalid Error 413 crash Apache                    |
|50464|New|Blk|2010-12-13|undefined reference to `BIO_set_callback' `BIO_set|
|50466|Inf|Maj|2010-12-13|httpd process doesn't recycle                     |
|50473|New|Maj|2010-12-14|zlib.dll Problem                                  |
|50521|New|Nor|2010-12-25|Comment at top of sample main config file is wrong|
|50525|New|Nor|2010-12-28|Header directive won't edit Location header from P|
|50530|New|Enh|2010-12-29|Provide rate limiting for failed authentication at|
|50532|New|Enh|2010-12-30|Mail protection                                   |
|50551|New|Nor|2011-01-06|Some proxied connections ignore ttl setting       |
|50562|Opn|Cri|2011-01-09|wrong PATH_INFO CGI environment with non-ASCII UTF|
|50584|New|Enh|2011-01-14|Add error message when RequestReadTimeout triggere|
|50592|New|Maj|2011-01-15|httpd dumps core on an IPv6 only system           |
|50602|New|Nor|2011-01-17|non thread safe functions used in apache httpd pro|
|50619|New|Min|2011-01-19|After changing resolv.conf signaling httpd doesn't|
|50628|New|Blk|2011-01-21|Core dump happens with Apache 2.2.15 using openssl|
|50630|New|Nor|2011-01-21|Apache return 500 error with authentication by LDA|
|50644|New|Enh|2011-01-24|Add support for maximum number of requests per Kee|
|50654|New|Nor|2011-01-25|FileETag ContentMD5 & Filename, optimisation to Co|
|50693|New|Nor|2011-01-31|AllowOverride Options=(not Foo) should permit no-o|
|50704|Inf|Nor|2011-02-01|mod_cache doesn't cache MultiViews                |
|50712|New|Maj|2011-02-02|Restart button only stops the server ...and do not|
|50727|New|Nor|2011-02-07|ISAPI EXTENSION_CONTROL_BLOCK Missing PostData wit|
|50765|New|Enh|2011-02-11|Runtime Backend Pinning via balancer-manager      |
|50770|New|Nor|2011-02-14|a rotatelogs issue, if time changed               |
|50773|Inf|Nor|2011-02-14|Dav lock database corruption                      |
|50774|New|Enh|2011-02-14|Have a way to invalidate cache without other reque|
|50777|New|Nor|2011-02-14|Back port buildconf specifies AC_PREREQ(2.13) fix |
|50796|New|Enh|2011-02-16|record time between keepalives in access log      |
|50807|New|Maj|2011-02-18|mod_proxy fails to send FIN response when a FIN is|
|50814|New|Nor|2011-02-21|SSI exec not working on Windows (Apache 2.x)      |
|50848|New|Enh|2011-03-01|Content Negotiation type map file precedence could|
|50869|New|Enh|2011-03-04|Need directive to control use and timeout of sessi|
|50873|New|Nor|2011-03-04|httpd does not start properly when built from sour|
|50878|New|Nor|2011-03-05|redundant operation when calling apr_stat         |
|50891|New|Nor|2011-03-08|Apache rewrites WWW-Authenticate headers from CGI |
|50902|Inf|Maj|2011-03-09|on major load on the server, poll() hangs         |
|50916|New|Nor|2011-03-11|RewriteMap program: mod_rewrite sends request but |
|50926|New|Nor|2011-03-14|unexpected <Directory> file-matching behavior     |
|50942|New|Maj|2011-03-17|Apache 2.2.16 forward proxy is 5x times slower tha|
|50945|Opn|Nor|2011-03-18|AJP: Missing support for ErrorOverride            |
|50948|Opn|Nor|2011-03-19|Connection not closed when CGI dies waiting for PO|
|50954|New|Nor|2011-03-21|ProxyRemote doesnt use CONNECT method with https s|
|50959|New|Enh|2011-03-23|Add cache-manifest to the mime type list          |
|50976|New|Nor|2011-03-26|Apache losts client's ip (%a or %h) sometimes.    |
|50999|Opn|Nor|2011-03-30|it seems the configure wrong detect my apr-util ve|
|51001|New|Nor|2011-03-31|patch for hook ap_lua_run_lua_open                |
|51005|New|Enh|2011-04-01|Allow to use username in LDAP filter              |
|51006|New|Blk|2011-04-01|Apache consume all memory and swap when setup as r|
|51019|New|Enh|2011-04-04|[PATCH] Implementation of Asynchronous processing |
|51020|Opn|Nor|2011-04-04|[PATCH] Apache/mod_fcgid.so does not start in comp|
|51022|New|Nor|2011-04-05|Segmentation fault on PUT request                 |
|51030|New|Enh|2011-04-06|Way to terminate CGI immediatly after closing conn|
|51078|Inf|Nor|2011-04-18|[PATCH] mod_fcgid spawned CGI Processes gets orpha|
|51079|New|Enh|2011-04-18|[PATCH] mod_fcgid spawned CGI Process cannot imper|
|51080|New|Nor|2011-04-18|[PATCH] mod_isapi does not support Except:100-Cont|
|51103|Opn|Nor|2011-04-21|mod_reqtimeout does not drop connection and return|
|51107|New|Min|2011-04-22|SetOutputFilter and SetInputFilter should allow "n|
|51118|New|Nor|2011-04-26|LDAP cache is cleared after graceful/restart and o|
|51127|New|Nor|2011-04-27|Make ProxyPassReverseCookiePath work as expected  |
|51168|New|Nor|2011-05-08|mod_status Total Traffic won't take account of int|
|51170|New|Nor|2011-05-09|I/O errors when using keep-alive + mod_ssl        |
|51174|New|Min|2011-05-09|SSLRequire predicates using OIDs unknown to openss|
|51186|New|Blk|2011-05-11|NEw Openssl 1.0.1 with new FIPS                   |
|51190|New|Min|2011-05-12|::/0 does not work with allow from and deny from  |
|51194|New|Nor|2011-05-13|FcgidWrapper does not support paths containing a s|
|51201|Inf|Nor|2011-05-15|Strange behavior REQUEST_METHOD & GET in mod_rewri|
|51223|New|Nor|2011-05-18|304 HTTP Not Modified strips out CORS headers     |
|51224|New|Nor|2011-05-18|mod_dav_fs should respect FileETag                |
|51239|New|Nor|2011-05-21|ap_get_client_block may block continuously sometim|
|51257|New|Nor|2011-05-24|Build failed when cross-compiling: ./gen_test_char|
|51258|New|Enh|2011-05-24|new features for mod_substitute                   |
|51296|New|Enh|2011-05-31|Dynamic engine support using SSLCryptoDevice suppo|
|51297|New|Nor|2011-05-31|Improve error handling during "UNLOCK"            |
|51303|New|Nor|2011-05-31|TraceEnable 500 error                             |
|51312|New|Nor|2011-06-01|mod_filter should support adding to the Vary heade|
|51322|New|Enh|2011-06-04|Prepend and append string to LDAP search parameter|
|51359|Inf|Enh|2011-06-11|Added shebang check for //! so that .js scripts wo|
|51365|New|Nor|2011-06-13|Mod_proxy mangles query string with mod_security  |
|51402|New|Nor|2011-06-21|"ForceLanguagePriority Fallback" not working as im|
|51406|New|Maj|2011-06-21|When listing files in subdirectories, the path is |
|51409|New|Nor|2011-06-21|Sorting options accepted by ls, but ignored       |
|51471|New|Nor|2011-07-04|<DirectoryMatch>ed IndexIgnore doesn't            |
|51479|New|Enh|2011-07-05|[PATCH] AB feature to optionally read in a reusabl|
|51491|New|Nor|2011-07-08|mod_dir breaks POSTs to URLs not ending in /      |
|51495|New|Nor|2011-07-11|mod_substitute cpu and memory limit               |
|51517|New|Maj|2011-07-16|mod_proxy_fcgi is not RFC 3875 compliant (SCRIPT_F|
|51522|Ver|Trv|2011-07-18|Wrong French translation in mpm.html ("Certains Mo|
|51542|New|Nor|2011-07-22|Apache HTTP Server vs PVS-Studio                  |
|51543|New|Nor|2011-07-22|Space in username not properly escaped in log file|
|51552|Inf|Cri|2011-07-25|Apache is not starting (2.2.15)                   |
|51573|New|Enh|2011-07-28|Easy way to erase log files                       |
|51576|Inf|Nor|2011-07-28|mod_rewrite rule stopped working                  |
|51600|New|Enh|2011-08-02|Loading the same certificate in multiple virtual h|
|51603|Inf|Maj|2011-08-02|Apache accepts completely bogus HTTP requests (pos|
|51607|Inf|Nor|2011-08-03|DBDPrepareSQL ( ap_dbd_prepare ) does not work cor|
|51629|New|Nor|2011-08-05|DocumentRoot check incorrect when running under ch|
|51674|New|Blk|2011-08-18|AJP Module Bad Request                            |
|51679|New|Min|2011-08-18|Code signature key expired                        |
|51689|New|Trv|2011-08-19|Cross compiling causes multiple Listen directives |
|51695|New|Trv|2011-08-20|Code clean up (ap_rputs merge)                    |
|51707|New|Nor|2011-08-22|ProxyPassReverse issues within <Location> (differe|
|51709|New|Nor|2011-08-23|ServerName/ServerAlias don't work if Host: header |
|51711|New|Nor|2011-08-23|mod_auth_digest have broken shared mem (nonce) cod|
|51718|New|Enh|2011-08-24|Feature Request: Add shorthand to redirect any Ser|
|51725|New|Nor|2011-08-26|Multiple Range: request accepted as "Range: n-m"  |
|51732|New|Nor|2011-08-29|Inconsistencies in log messages' verbosity levels |
|51747|New|Nor|2011-08-31|mod_fcgid loads entire request into memory while p|
|51757|Inf|Enh|2011-09-02|Add support for SASL auth in LDAP                 |
|51778|Inf|Cri|2011-09-07|while buliding(make) a unix source "httpd-2.2.20.t|
|51797|Inf|Maj|2011-09-10|Crash HTTPD(Windows)                              |
|51814|New|Enh|2011-09-14|mod_proxy in Apache HTTP 2.2 FIN_WAIT2 in server s|
|51842|New|Enh|2011-09-18|Suggesting a new action for the Header directive: |
|51858|Inf|Nor|2011-09-21|weird error for mod_rewrite with more then 3 param|
|51864|New|Nor|2011-09-22|mod_cache returns entire entity from origin server|
|51904|New|Nor|2011-09-28|output to stderr from cgi script causes script to |
|51951|New|Nor|2011-10-04|mod_mbox hang on some e-mails on press@a.o - was I|
|51964|Ver|Nor|2011-10-05|Documentation of RewriteRule flag skip unclear    |
|51965|New|Nor|2011-10-05|--with-z=DIR not being honored                    |
|51982|Opn|Nor|2011-10-06|ProxyPassReverse / balancer://cluster/ adds slash |
|51987|Inf|Nor|2011-10-07|RewriteRule doesn't work correctly with apache 2.3|
|51994|New|Enh|2011-10-07|Mod_authn_socache should have some way to flush th|
|52004|Ver|Trv|2011-10-10|Typo "indexe" in French translation of mpm.html   |
|52007|New|Nor|2011-10-10|Content-Length: 0 not set on proxy response       |
|52038|New|Nor|2011-10-16|NameWidth works incorrectly together with Charset=|
|52039|Inf|Nor|2011-10-16|Browser mode does not always work                 |
|52043|New|Nor|2011-10-17|Directories ".", "..", and "/" do not work correct|
|52081|New|Nor|2011-10-24|segfault if mbox files have unexpected names      |
|52090|New|Maj|2011-10-26|Apache thread hangs with error 500 when sending a |
|52120|Opn|Nor|2011-11-01|mod_cache edge case: uncacheable 304 sends cached |
|52123|New|Maj|2011-11-02|DoS: High memory usage in propfind                |
|52132|New|Nor|2011-11-03|[PATCH] process activity score calculated incorrec|
|52139|New|Nor|2011-11-05|Never Syntax Error on non-existent DocumentRoot   |
|52171|Ver|Nor|2011-11-13|confusing documentation of request phases         |
|52174|New|Enh|2011-11-13|Allow hard lower-limits on the number of fcgi serv|
|52178|New|Nor|2011-11-14|IPv6 IPs as ServerName not allowed                |
|52181|Ver|Nor|2011-11-14|mod_rewrite Technical Details Ruleset Processing d|
|52195|Inf|Nor|2011-11-16|Japanese texts are garbled on mailing list archive|
|52196|Inf|Nor|2011-11-16|winnt mpm, others mpm also have this bug. pool sha|
|52207|Inf|Maj|2011-11-18|Upgrade apache version from 2.0.59 to 2.2.12 or ab|
|52222|New|Nor|2011-11-21|IndexIgnore ignores parent directories in argument|
|52247|New|Nor|2011-11-26|mod_mbox gives up on unexpected message format    |
|52248|New|Nor|2011-11-26|Bugzilla version drop-down list does not offer "un|
|52252|New|Nor|2011-11-27|luajit support broken for (at least) luajit 2.0   |
|52253|Inf|Nor|2011-11-28|Timeout doesn't work. mod_proxy_balancer strongly |
|52264|New|Enh|2011-11-30|Update and complete balancer-manager XML output   |
|52269|Inf|Nor|2011-12-01|[mod_proxy] Apache reverse proxy status code trans|
|52275|New|Nor|2011-12-02|memory leak in proxy_ajp_handler                  |
|52298|Inf|Nor|2011-12-07|Can't enter website with client certificate on an |
|52301|New|Enh|2011-12-07|Error message "RSA server certificate ... CN ... d|
|52302|New|Enh|2011-12-07|Better documentation of how server name is determi|
|52304|New|Nor|2011-12-08|<Limit> Does Not Apply When URI Is Folder         |
|52313|New|Enh|2011-12-09|htdbm enhancement: options for colon-in-username, |
|52322|Inf|Enh|2011-12-13|Providing BBC developed httpd modules for inclusio|
|52342|New|Nor|2011-12-15|ap_internal_redirect dropping filters means incons|
|52370|New|Nor|2011-12-19|apreq_decode/url_decode length miscalculation     |
|52377|New|Enh|2011-12-20|Add Directives to assert user, group, and permissi|
|52383|New|Trv|2011-12-24|Instllation log typo                              |
|52391|New|Cri|2011-12-27|100% CPU usage while using Forward Proxy          |
|52395|New|Nor|2011-12-29|reload results in different end environment to res|
|52403|New|Nor|2011-12-31|FallbackResource doesn't work for non-existent PHP|
|52408|New|Nor|2012-01-01|Directoryindex matching automatically redirects   |
|52415|New|Nor|2012-01-03|LockFile placed inappropriately                   |
|52417|New|Nor|2012-01-03|HEADERS information in the file                   |
|52435|New|Nor|2012-01-06|Apache shutdown automatically                     |
|52439|New|Enh|2012-01-09|It should be possible to treat errors in .htaccess|
|52453|New|Enh|2012-01-11|Ability to configure --logfiledir                 |
|52465|New|Nor|2012-01-13|mod_dir is allowed to redirect proxy requests     |
|52481|New|Nor|2012-01-18|Rotatelog.exe crashes Apache after setting 256MB r|
|52485|New|Nor|2012-01-19|CPU load 100%                                     |
|52494|New|Enh|2012-01-22|allow the Action directive to point in the filesys|
|52495|New|Enh|2012-01-22|CACertificate, CADNCertificate, CARevocation, Cert|
|52501|New|Cri|2012-01-23|child pid 10824 exit signal Segmentation fault (11|
|52505|New|Nor|2012-01-23|Include with directory wildcards gives errors for |
|52509|New|Nor|2012-01-23|Resources protected by .htaccess file may not be a|
|52510|New|Cri|2012-01-23|Segmentation Fault 11                             |
|52520|New|Nor|2012-01-24|ProxyRemote & NoProxy directive can not take IPv6 |
|52532|New|Trv|2012-01-26|VirtualHost added TWICE to name-virtual-host list |
|52539|New|Nor|2012-01-26|Apache mod_dav 400 Bad Request for non-existent co|
|52546|New|Nor|2012-01-27|overwrite SERVER_PROTOCOL environment             |
|52573|New|Nor|2012-02-01|mod_speling case correction fails when URI has dou|
|52578|Opn|Enh|2012-02-02|Wrong "bytes sent" logged when connection is close|
|52594|New|Nor|2012-02-03|rpmbuild -ba errors out with "File not found by gl|
|52595|New|Nor|2012-02-03|requests with gzip+chunked encoded body don't prox|
|52605|Inf|Min|2012-02-05|Please allow request lines longer than 8k         |
|52612|New|Nor|2012-02-06|Default Service Account                           |
|52616|Opn|Enh|2012-02-07|SSLUserName uses SSL_CLIENT_S_DN insted of SSL_CLI|
|52617|New|Maj|2012-02-07|Visit the rewrite page from ServerAlias domain vho|
|52623|New|Nor|2012-02-08|does not build with pcre-8.30                     |
|52644|New|Nor|2012-02-12|document how SSL FakeBasicAuth works with strange |
|52668|New|Trv|2012-02-14|More future safe patch for old MSIE ssl-unclean-sh|
|52670|New|Trv|2012-02-15|please clarify the effect of SSLStrictSNIVHostChec|
|52683|New|Enh|2012-02-16|add a symlink option that rechecks the access perm|
|52700|Inf|Blk|2012-02-17|Not rendering html content instead displaying clie|
|52703|Inf|Maj|2012-02-18|SSL+SNI+client-auth "lost" after some time        |
|52710|New|Nor|2012-02-19|mod_fcgid should set PATH_INFO when configured in |
|52756|Inf|Trv|2012-02-24|proxy_html_module LoadModule line not created in h|
|52759|New|Cri|2012-02-24|Apache httpd child process consuming high CPU Util|
|52790|New|Nor|2012-02-28|ldap caching not sufficient                       |
|52795|Opn|Nor|2012-02-29|mod_fcgid fails to spawn process in C:\Program Fil|
|52806|New|Nor|2012-03-01|configure: --with-included-apr is not supported in|
|52807|New|Nor|2012-03-01|some random strings are accepted by "configure" as|
|52816|New|Nor|2012-03-03|Potential segfault in socache_shmcb_create        |
|52817|New|Nor|2012-03-03|Long directory path sucks (but it's really a valid|
|52822|New|Nor|2012-03-04|Quiet installation not fully quiet                |
|52824|Inf|Nor|2012-03-04|Conflicts between AllowOverride and AllowOverrideL|
|52828|New|Maj|2012-03-05|Child process is not replaced in Windows, after a |
|52832|New|Nor|2012-03-05|numerical configuration entry can be mistakenly in|
|52841|Opn|Nor|2012-03-06|[proxy_balancer:emerg] [pid 25593] AH01177: Failed|
|52851|New|Nor|2012-03-07|Core TimeOut directive doesn't work               |
|52855|Opn|Maj|2012-03-08|mod_ftp does not build against 2.4.x              |
|52860|New|Enh|2012-03-08|Support Transfer-Encoding: gzip                   |
|52865|New|Nor|2012-03-09|Crash by segmentation fault in mod_authn_core in A|
|52870|New|Cri|2012-03-09|100% CPU usage while using Forward Proxy          |
|52874|New|Enh|2012-03-09|Support Use TrustedFirst checking when verifying c|
|52884|New|Nor|2012-03-12|"localhost" leads to start failure                |
|52890|Inf|Nor|2012-03-12|--with-included-apr doesn't work when srclib/apr a|
|52891|New|Nor|2012-03-12|2.2 doesn't perform as well as 1.3                |
|52894|Inf|Nor|2012-03-13|Apache aborts abnormally when ChrootDir is set    |
|52927|Inf|Nor|2012-03-16|[Bug in httpd 2.2.4] [error] (70014)End of file fo|
|52933|New|Nor|2012-03-17|Child survives '-k stop', consuming lots of CPU   |
|52950|New|Nor|2012-03-20|Error when set AuthType to None with valid-user   |
|52963|New|Nor|2012-03-21|Typo in AuthLDAPURL RFC 2255 error message        |
|52975|New|Nor|2012-03-23|Receiving files is suboptimal                     |
|52976|New|Min|2012-03-23|Gratuitous string-duplication in module-configurat|
|52978|New|Enh|2012-03-23|Binding to an interface instead of an address     |
|52995|New|Nor|2012-03-28|httpd -V does not print the default Mutex         |
|53002|New|Nor|2012-03-29|<Location> and auth_form (trailing slash problem?)|
|53015|New|Nor|2012-03-31|missing apr_socket_close                          |
|53016|New|Nor|2012-03-31|missing apr_brigade_destroy                       |
|53023|New|Nor|2012-04-02|mod_rewrite RewriteCond parser error and documenta|
|53037|New|Enh|2012-04-05|clarify mod_ssl documentation on the UID/GID conte|
|53059|New|Nor|2012-04-10|Make httpd easier relocatable by using a variable |
|53098|New|Nor|2012-04-18|mod_proxy_ajp: patch to set worker secret passed t|
|53099|New|Enh|2012-04-18|feature request for mod_remoteip                  |
|53108|New|Enh|2012-04-19|clarification on url-path vs full filesystem path |
|53111|New|Nor|2012-04-20|1% of CMS sites expose database passwords         |
|53121|New|Nor|2012-04-22|Confusing documentation, gzip and deflate         |
|53149|New|Enh|2012-04-25|mod_ldap should/could use mod_socache             |
|53152|Opn|Nor|2012-04-26|RewriteRule documentation: Error about per-directo|
|53156|New|Enh|2012-04-27|CRL validation fails if CRL is missing            |
|53160|New|Cri|2012-04-29|Reverse Proxy mod_deflate doesn't zip back content|
|53183|New|Min|2012-05-03|mod_apreq2 entry point is apreq_module and not apr|
|53193|New|Nor|2012-05-04|SLVerifyClient optional_no_ca + SSLSessionCache = |
|53218|New|Blk|2012-05-11|ProxyPass worker name　(http://localhost:3128/...|
|53233|New|Maj|2012-05-15|Internal error: proxy: error reading status line f|
|53239|New|Maj|2012-05-16|Httpd has problems delivering data on rate-limited|
|53253|New|Maj|2012-05-17|TCP_NOPUSH used with sendfile(2), cause transfers |
|53284|New|Nor|2012-05-24|crash                                             |
|53290|New|Maj|2012-05-24|memory usage                                      |
|53292|New|Min|2012-05-25|add support for HTTP status code 308              |
|53305|New|Nor|2012-05-28|404 errors when adding query string in a balancer |
|53313|New|Nor|2012-05-28|SSI #echo VAR fails (#include OK) if URI/URL has f|
|53319|New|Nor|2012-05-29|Multiple DirectoryIndex statements in the same con|
|53332|New|Nor|2012-05-30|Requests with chunked encoding have no body availa|
|53350|New|Nor|2012-06-01|mod_cache caching 403 responses Apahce 2.2.22     |
|53351|New|Nor|2012-06-02|make fails if layout begins on first line of confi|
|53388|Opn|Nor|2012-06-08|mod_proxy_balanser generates 503 when proxying to |
|53402|New|Trv|2012-06-12|Incorrect error message for mod_ldap params       |
|53461|Inf|Cri|2012-06-23|Compilation problems                              |
|53462|New|Nor|2012-06-25|mod_rewrite does not remove trailing slash when as|
|53479|New|Nor|2012-06-27|mod_rewrite [B] flag should percent-encode the spa|
|53483|New|Enh|2012-06-29|dangerous PCRE patterns in *Match directives      |
|53539|New|Maj|2012-07-12|content type and character set are changing when t|
|53554|New|Nor|2012-07-16|Wrong case for hexadecimal percent encoding [patch|
|53555|New|Maj|2012-07-17|Scoreboard full error with event/ssl              |
|53579|New|Cri|2012-07-20|httpd looping writing on a pipe and unresponsive (|
|53581|New|Blk|2012-07-21|FollowSymlinks doesn't work with DirectoryMatch an|
|53594|New|Enh|2012-07-24|ipad as webserver                                 |
|53595|New|Nor|2012-07-24|Media type qs parameters for MultiViews sent in Co|
|53612|Inf|Nor|2012-07-27|Reverse Proxy causing 500 error SSL proxy 1.0.1c O|
|53618|New|Nor|2012-07-29|proxy_worker_shared fields not maintained in threa|
|53634|New|Nor|2012-08-01|mod_cache returning HTTP 200 for nonexistent resou|
|53638|New|Nor|2012-08-02|Problem with shortcuts to bugzilla in http://httpd|
|53640|Inf|Maj|2012-08-02|make: Fatal error: Command failed for target `htpa|
|53643|New|Cri|2012-08-02|apache segfaults with mod_authn_dbd when dbd_min i|
|53646|New|Nor|2012-08-02|Invalid uniformly distributed balancing of request|
|53651|New|Nor|2012-08-03|Worker failure doesn't have same behaviour as work|
|53667|New|Enh|2012-08-07|Add an equivalent option to "JkOptions ForwardLoca|
|53669|New|Nor|2012-08-07|IndexOptions Incremental IndexOptions documentatio|
|53686|New|Enh|2012-08-09|Status "501 Not Implemented" sent very late       |
|53690|New|Nor|2012-08-09|Calls to semctl() trigger "uninitialized memory" w|
|53692|New|Nor|2012-08-10|mod_auth_form loses request body before login page|
|53693|Opn|Nor|2012-08-10|mod_fcgid performance suffers under increase in re|
|53704|New|Enh|2012-08-13|True online configuration is needed - via LDAP?   |
|53705|New|Nor|2012-08-13|Align server-status balancer display to balancer-m|
|53706|New|Enh|2012-08-13|Include a status display for mod_ldap when present|
|53722|New|Nor|2012-08-15|when -D NO_DETACH is used, no PID file should be c|
|53736|New|Nor|2012-08-17|/balancer-manager doesn't save runtime adjusted se|
|53757|New|Enh|2012-08-21|RewriteMap of type txt should allow specifying col|
|53767|New|Nor|2012-08-23|htcacheclean deletes stale "vary" header files eve|
|53772|New|Nor|2012-08-24|REDIRECT_URL not accessible in mod_proxy          |
|53787|New|Reg|2012-08-28|In forward proxy, doesn't cache disk anymore      |
|53823|New|Nor|2012-09-03|[patch] pure IPv6 only host fix (server/config.c) |
|53835|New|Cri|2012-09-06|mod_proxy_ajp truncate output when using deflate i|
|53870|New|Maj|2012-09-13|Deadlock in CRYPTO_add_lock with Apache 2.2.22 wor|
|53886|New|Nor|2012-09-18|can't start apache control in Redhat Linux 3 X64  |
|53899|New|Nor|2012-09-19|SSL_OP_ALL disables the mitigation code for CVE-20|
|53915|New|Nor|2012-09-21|Colon lost when :port is used in CacheKeyBaseURL  |
|53919|Inf|Enh|2012-09-21|DEFAULT_LOG_FORMAT is not RFC6302 compliant       |
|53923|New|Min|2012-09-23|Overriding CustomLog directive seems impossible   |
|53932|New|Nor|2012-09-25|PROPFIND doesn't support If, If-Match ETag predica|
|53947|New|Enh|2012-09-29|Feature Request, RewriteRule - ProxyPreserveHost f|
|53961|New|Nor|2012-10-04|Null sessions to the default vhost                |
|53970|New|Nor|2012-10-05|Network control directives affects internal subreq|
|53981|New|Nor|2012-10-08|move def of log_request_state from mod_log_config.|
|53988|New|Enh|2012-10-10|Missing FCGIWrapper script should not be a critica|
|54030|New|Enh|2012-10-19|Support subjectAltName when (reverse-)proxying    |
|54033|New|Enh|2012-10-21|Parent languages are not ordered according to Acce|
|54072|New|Reg|2012-10-30|Syntax error front-end virtual-path too long      |
|54102|New|Enh|2012-11-05|new feature: automatic route detection            |
|54118|New|Nor|2012-11-08|Handle leak on parent httpd process when rotatelog|
|54126|New|Maj|2012-11-09|Mod_rewrite failing because of url in query string|
|54134|New|Enh|2012-11-11|new feature: ability to use multiple routes in sti|
|54136|New|Min|2012-11-11|balancer-handler shows xml not, when only xml para|
|54158|New|Nor|2012-11-16|Suggestion regarding 2.0 to 2.2 Upgrade Documentat|
|54183|Inf|Nor|2012-11-21|PROPFIND doesn't report getcontenttype property   |
|54215|New|Maj|2012-11-27|configure fails for httpd 2.2.3 with openssl 1.0.1|
|54221|Opn|Nor|2012-11-28|no ErrorLog prefix on CGI errors                  |
|54222|New|Min|2012-11-28|ServerTokens checking is not complete             |
|54223|New|Nor|2012-11-29|AH00554 error when runtime configuration Includes |
|54252|New|Nor|2012-12-05|acinclude.m4 requires -lz when linking with ssl st|
|54253|New|Nor|2012-12-05|mod_proxy_ftp doesn't handle/log partial or cancel|
|54255|New|Nor|2012-12-06|mod_deflate adjusts the headers "too late", should|
|54269|New|Maj|2012-12-09|mod_proxy_html documentation misses several things|
|54276|New|Nor|2012-12-10|rotatelogs not getting killed on graceful restart |
|54280|New|Nor|2012-12-11|mod_auth_form inline login not working with traili|
|54281|New|Nor|2012-12-11|Stick use Partial parameters from query string    |
|54289|New|Nor|2012-12-13|"ap_get_brigade" api is failing in "AP_MODE_SPECUL|
|54306|New|Enh|2012-12-15|add regexp versions of ProxyPassReverse, ProxyPass|
|54309|New|Trv|2012-12-15|clarification on the <Location> directive when use|
|54310|Opn|Nor|2012-12-15|mod_proxy_html drops meta elements with http-equiv|
|54319|New|Reg|2012-12-17|ProxyPass has no effect in <Location> if rewrite o|
|54339|New|Nor|2012-12-21|piped log entries > PIPE_BUF can be interleaved   |
|54342|New|Nor|2012-12-22|AuthnCacheSOCache can't pass args to socache provi|
|54343|New|Maj|2012-12-22|Add sanity checks for malloc() in mpm_winnt.c and |
|54358|New|Nor|2012-12-29|Status 500 when using ldap on Solaris because apr_|
|54363|New|Nor|2012-12-31|make time conversion caching functions thread-safe|
|54364|New|Nor|2012-12-31|Add ref to mod_fcgid docs                         |
|54365|New|Nor|2013-01-02|Connection closed by server during file transfer  |
|54366|New|Nor|2013-01-02|$sysconfdir/extra/httpd-dav.conf is not built base|
|54367|Opn|Maj|2013-01-02|Location header in response to PUT is not %-escape|
|54385|New|Enh|2013-01-08|SSL configuration independent from virtual hosts, |
|54401|New|Nor|2013-01-10|Suggest to make ProxyPassReverseCookieDomain accep|
|54415|New|Enh|2013-01-14|Please tell the root cause of mutex and scoreboard|
|54431|Inf|Blk|2013-01-16|Unable to start the Apache 2.4.3 windows service. |
|54498|New|Nor|2013-01-28|apache crash on any cgi request with certain http |
|54502|New|Nor|2013-01-29|Apache deadlock on epoll_ctl error (1000 process l|
|54512|Inf|Cri|2013-01-31|Apache hung                                       |
|54517|New|Nor|2013-02-01|proxy balancer: timeout or partial failure of back|
|54518|New|Nor|2013-02-01|mod_rewrite not adding Vary header                |
|54519|New|Nor|2013-02-02|httpd already running                             |
|54526|New|Nor|2013-02-05|mod_proxy_http ignores request abortion           |
|54543|New|Enh|2013-02-10|Compile regex only when need                      |
|54546|New|Nor|2013-02-11|httpd crashes on first HUP after change Listen dir|
|54549|New|Nor|2013-02-11|mod_mime AddEncoding and mod_negotiation fix_encod|
|54556|New|Enh|2013-02-13|New flag to add default rule in rule chain        |
|54560|New|Nor|2013-02-13|Potential segfault on return from ap_server_root_r|
|54563|New|Maj|2013-02-15|mod_webdav ignores quota                          |
|54578|New|Nor|2013-02-18|Bad docs or unchecked code for "LimitRequestFields|
|54587|Opn|Nor|2013-02-19|LDAPConnectionPoolTimeout does not work in all cas|
|54605|New|Enh|2013-02-24|mod_negotiation should cache the info it generates|
|54608|New|Enh|2013-02-25|Support an option to allow page caching when using|
|54622|New|Nor|2013-02-28|shared memory cleanup                             |
|54626|New|Nor|2013-03-01|mod_authnz_ldap through util_ldap.c does not suppo|
|54633|New|Nor|2013-03-04|Invalid % encoding not rejected                   |
|54637|New|Nor|2013-03-05|Digest: secret not used                           |
|54640|New|Nor|2013-03-05|Slow transaction on a balance member is holding su|
|54649|New|Nor|2013-03-06|Incorrect PIDFILE prevent httpd restart           |
|54653|New|Min|2013-03-08|Suggestion to add https example for forward proxy |
|54656|New|Maj|2013-03-09|SNI and SSLProxyCheckPeerCN based on "connection" |
|54657|New|Nor|2013-03-09|DNS lookup failure for load balancer member does n|
|54683|New|Min|2013-03-13|Ignor directive ErrorDocument with null byte      |
|54699|Opn|Enh|2013-03-15|[feature request] cli webaccess tester            |
|54701|New|Cri|2013-03-15|Apache 2.4.3 Migration Issue Not loading the pages|
|54704|New|Nor|2013-03-15|Web Services stalling on it's own                 |
|54719|New|Nor|2013-03-18|httpd should check for and eventually create pid f|
|54752|New|Nor|2013-03-25|mod_ssl should not use uninitialized memory as ran|
|54782|New|Nor|2013-04-02|Memory Corruption errors - mpm_worker mod_perl    |
|54785|New|Nor|2013-04-02|Random crash when httpd server is stopped         |
|54793|New|Nor|2013-04-03|Socket timeout handler can delete uploaded files P|
|54794|New|Reg|2013-04-03|mod_wsgi|fcgid and subversion >= 1.7 issues       |
|54795|New|Nor|2013-04-03|'apxs -g -n' should be self-referring             |
|54796|Inf|Enh|2013-04-03|CustomLog should be able to use syslog as ErrorLog|
|54804|New|Nor|2013-04-05|mod_fcgid sends a Continue 100 response automatica|
|54813|New|Nor|2013-04-08|documnt the Require args used by authz_dbm includi|
|54816|Inf|Nor|2013-04-08|AH00566: request failed: invalid characters in URI|
|54817|New|Nor|2013-04-09|if prefix and sysconfdir are the same then http.co|
|54820|Inf|Cri|2013-04-09|REwriterule stops working                         |
|54824|New|Nor|2013-04-10|Spec file is missing libuuid-devel requirement    |
|54830|New|Enh|2013-04-11|Make SSLPProxyMachineCertificateFile configurable |
|54848|New|Nor|2013-04-15|Client field too short for IPv6 addresses         |
|54856|Inf|Enh|2013-04-17|NSCreateObjectFileImageFromFile                   |
|54858|New|Nor|2013-04-17|ld duplicate                                      |
|54861|New|Blk|2013-04-18|The number of connections with mysql is more      |
|54869|Inf|Nor|2013-04-19|Non-breaking space characters cause httpd to choke|
|54875|New|Nor|2013-04-23|Conditional request predicated on another URL's ET|
|54878|New|Nor|2013-04-23|Multiple Listen directives prevent server to start|
|54905|Inf|Cri|2013-04-29|Apache2 loops in child Segfaults                  |
|54910|New|Enh|2013-04-30|Format %{Foobar}o cannot be used to log Date and S|
|54911|New|Enh|2013-04-30|Allow logging of fields set by a backend server in|
|54914|New|Nor|2013-04-30|mod_dir DirectoryIndex breaks WebDAV PROPFIND / DE|
|54915|New|Nor|2013-04-30|GET on a WebDAV-enabled collection, with Directory|
|54918|New|Enh|2013-05-02|Implement RFC 6797 HTTP Strict Transport Security |
|54919|Inf|Nor|2013-05-02|*** glibc detected *** /usr/sbin/httpd: double fre|
|54930|New|Nor|2013-05-06|Allow empty message in ErrorDocument directive    |
|54934|Inf|Cri|2013-05-07|Apache is crashing intermittently with a message "|
|54936|New|Nor|2013-05-08|Some potential bugs reported by static analysis to|
|54949|New|Nor|2013-05-10|[PATCH] mod_cache: fix uninitialized tmppath varia|
|54952|Inf|Cri|2013-05-10|[Fri May 10 17:39:01 2013] [error] proxy: CLUSTER:|
|54953|New|Nor|2013-05-11|<VirtualHost 0.0.0.0:80> matches IPv6             |
|54958|New|Nor|2013-05-13|mod_deflate + mod_mime with SSI gives mixed compre|
|54962|New|Maj|2013-05-14|Apache will set incorrect Content-Length header an|
|54965|New|Enh|2013-05-14|Allow ProxyPassMatch in Directory context         |
|54976|New|Nor|2013-05-15|ProxyPass parameter "acquire" and "ttl" ignored in|
|54986|New|Maj|2013-05-16|httpd hanging on large form submit in ap_run_handl|
|54989|New|Nor|2013-05-17|Apache Segfaults on OS X at random - how can I dia|
|54993|New|Nor|2013-05-20|Critical error: File descriptor in bad state: apr_|
|54998|Ver|Nor|2013-05-21|Apache 2.4 terminates all SSL connections using an|
|55000|New|Nor|2013-05-21|Memory usage per process doubles when Apache is co|
|55021|New|Enh|2013-05-28|Support arbitrary sql to authentication username/p|
|55022|Inf|Cri|2013-05-28|child pid 3123 exit signal Bus error (10) - Apache|
|55034|Inf|Maj|2013-05-31|Apache 2.4.4 won't open more that 32k VH file hand|
|55039|New|Enh|2013-05-31|"RequestHeader edit" can't access environment vari|
|55045|New|Nor|2013-06-01|calls to gets() in test_find.c and test_parser.c  |
|55068|New|Enh|2013-06-06|root permissions when writing to per vhosts errorl|
|55069|New|Min|2013-06-06|notice message in error_log even when LogLevel err|
|55070|Opn|Enh|2013-06-06|mod_fcgid stderr always goes to main error log    |
|55072|New|Nor|2013-06-07|ErrorLog doesn't work well when apache shutdown   |
|55093|New|Nor|2013-06-12|[PATCH] mod_fcgid 2.3.7 truncates large posts on R|
|55096|New|Nor|2013-06-12|Make not running on httpd configure Solaris       |
|55098|New|Nor|2013-06-13|does not listen to IP4 when both IP4 address and I|
|55106|New|Enh|2013-06-17|ProxyErrorOverride considers response codes >= 400|
|55117|New|Nor|2013-06-18|GracefullTimeout for worker threads               |
|55147|New|Nor|2013-06-26|"Header always" w/ cache different in 2.4         |
|55148|Inf|Nor|2013-06-26|Error during SSL Handshake with remote server     |
|55152|New|Nor|2013-06-28|graceful restart adjusts to new balancer members, |
|55156|New|Nor|2013-06-28|mod_cache not respecting s-maxage cache-control he|
|55178|New|Nor|2013-07-01|[PATCH] mod_authnz_ldap SASL authentication suppor|
|55192|New|Trv|2013-07-03|htaccess error messages missing request context   |
|55193|New|Min|2013-07-03|ErrorLogFormat is ignored by some modules         |
|55226|New|Enh|2013-07-09|Request for "domain cluster" feature for mod_proxy|
|55234|New|Maj|2013-07-10|Working of attribute "protocol" attribute "protoco|
|55276|Inf|Enh|2013-07-17|Add REST API for load balancer for dynamic registr|
|55278|New|Nor|2013-07-18|mod_session's cookie may be empty, is repeated twi|
|55284|New|Nor|2013-07-20|repeatable segv                                   |
|55286|New|Nor|2013-07-21|Floating point exception (8) in mod_auth_digest   |
|55293|New|Nor|2013-07-22|Incorrect default MIME type for .woff fonts       |
|55306|New|Nor|2013-07-25|Error when copying svn repository, which contains |
|55323|New|Nor|2013-07-29|Double unescaped uri in sub request handler       |
|55327|New|Nor|2013-07-30|Segmentation fault when stopping Apache 2.4.6 norm|
|55340|New|Maj|2013-08-01|Listen for valid, unconfigured IP address passes c|
|55344|New|Nor|2013-08-02|missing ap_hook_monitor on windows                |
|55346|New|Nor|2013-08-02|When on filled quota filesystem, mod_fcgid init in|
|55348|New|Nor|2013-08-02|%h is not changed in logging, only %a             |
|55351|New|Enh|2013-08-04|allow ProxyPassReverseCookieDomain to automaticall|
|55362|New|Nor|2013-08-05|Apache httpd sends "400 Bad Request" to client due|
|55379|New|Min|2013-08-07|htdigest -c doesn't behave as described anymore   |
|55394|New|Nor|2013-08-09|apache 2.4 randomy crashes with signal 6          |
|55401|New|Enh|2013-08-11|document that force-proxy-request-1.0 implies prox|
|55415|New|Maj|2013-08-14|Proxy loop caused by ProxyErrorOverride and ErrorD|
|55431|New|Nor|2013-08-16|mod_negotation does not force the mime type listed|
|55433|New|Nor|2013-08-16|mod_proxy ignores final status code for aborted re|
|55443|Inf|Maj|2013-08-17|never gives 300 multiple choices                  |
|55445|New|Maj|2013-08-18|mod_socache_memcache ignores expiry, creating eter|
|55447|New|Enh|2013-08-18|make type-maps usable again, by making them access|
|55448|New|Nor|2013-08-19|segfault in set_max_workers at event.c:3194 on SIG|
|55449|New|Maj|2013-08-19|AH01185: worker slotmem_create failed --> slotmem |
|55452|New|Maj|2013-08-19|Redirect                                          |
|55458|New|Enh|2013-08-20|allow to configure what mod_ssl responds when one |
|55460|New|Enh|2013-08-21|allow service names to be used in the Listen direc|
|55467|New|Nor|2013-08-21|Support for OpenSSL custom TLS extensions and supp|
|55523|New|Trv|2013-09-04|auth_groupfile error log on access even though suc|
|55535|Inf|Nor|2013-09-08|incorrect check state parametr                    |
|55540|New|Cri|2013-09-09|mod_proxy gzip chunked issue (sample site provided|
|55549|New|Min|2013-09-11|AuthLDAPSubGroupAttribute doesn't do anything     |
|55550|New|Nor|2013-09-11|AuthLDAPSubGroupClass checking is very inefficient|
|55556|New|Nor|2013-09-13|apachebench (ab) doesn't use so_reuseaddr         |
|55557|New|Nor|2013-09-14|Some cppcheck reports                             |
|55573|New|Enh|2013-09-19|FileETag needs MTimeSeconds, MTime with granularit|
|55581|New|Enh|2013-09-22|Support concurrent connections to same FastCGI pro|
|55590|Inf|Maj|2013-09-24|second commit is failing if space is in file name |
|55596|New|Enh|2013-09-25|Add date format used by Expires header            |
|55607|New|Enh|2013-09-28|Re-set HOME environment variable to directory from|
|55615|New|Nor|2013-09-30|Connections are starved and not balanced when conc|
|55619|New|Nor|2013-10-02|Apache httpd reported 500 internal error when uplo|
|55627|New|Min|2013-10-04|Remove unnecessary APLOGNO() for trace logging per|
|55636|Inf|Cri|2013-10-07|long lost child came home - Apache is not respondi|
|55646|Inf|Nor|2013-10-10|non-2xx responses are not considered errors       |
|55654|New|Nor|2013-10-15|Extract variables from configuration without start|
|55670|New|Min|2013-10-18|Startup may fail silently at post_config          |
|55673|New|Nor|2013-10-18|httpd fails to start with SSLProxyMachineCertifica|
|55680|New|Enh|2013-10-20|online manual directory option doesn't exist      |
|55698|New|Maj|2013-10-24|Apache 2.2 + mod_fcgid 2.3.7 (CentOS 6.4) graceful|
|55700|New|Enh|2013-10-24|add something like RewriteOptions InheritDown     |
|55707|New|Nor|2013-10-25|SSLProtocol directive seem to be ignored over diff|
|55708|New|Nor|2013-10-25|Access violation in msvcrt.dll when calling getenv|
|55711|New|Min|2013-10-28|--enable-foo doesn't enable foo                   |
|55712|New|Nor|2013-10-28|Relative <!--#include virtual="../file.shtml"--> g|
|55720|New|Enh|2013-10-29|separate LDAP Bind timeout from LDAPTimeout       |
|55738|New|Nor|2013-11-03|PVS-Studio: few issues                            |
|55763|New|Nor|2013-11-09|raise roots soft RLIMIT_NPROC on linux for high ma|
|55774|New|Nor|2013-11-13|ab: optionally accept tls client certificate      |
|55781|New|Nor|2013-11-15|ajp_read_header: ajp_ilink_receive failed; 120006)|
|55786|New|Maj|2013-11-16|SSLVerifyClient and OptRenegotiate result in a 403|
|55787|New|Maj|2013-11-16|Chroot fails with "Cannot chroot when not started |
|55790|New|Maj|2013-11-17|mod_fcgid lockfile hardcoded to be in /tmp        |
|55793|New|Enh|2013-11-18|DTrace/SystemTap support                          |
|55808|New|Nor|2013-11-21|File integrity verification using MD5 and SHA1    |
|55819|Inf|Nor|2013-11-27|Closing connection behaviour                      |
|55828|New|Cri|2013-11-28|Httpd not start if use ProxyPass balancer://      |
|55834|New|Maj|2013-12-02|Apache does not honor the openssl library path giv|
|55838|New|Nor|2013-12-03|PHP files are being executed instead of downloaded|
|55841|New|Nor|2013-12-04|Misleading news items on bugfix releases ("This ve|
|55856|New|Nor|2013-12-08|YYEMPTY (-2) used as index into yytname (const arr|
|55866|New|Nor|2013-12-11|When ProxyPreserveHost is on, SSL expects the wron|
|55878|New|Nor|2013-12-12|mod_fcgid kills spawned processes too early       |
|55881|New|Nor|2013-12-13|segmentation fault at proxy_util.c:1546           |
|55883|New|Enh|2013-12-14|string callers of ap_expr should be able to transf|
|55887|New|Maj|2013-12-16|In Windows apache, when user access to /con, apach|
|55897|New|Nor|2013-12-17|[PATCH]patch with SO_REUSEPORT support            |
|55898|New|Enh|2013-12-17|[RFE] listen on unix socket?                      |
|55914|New|Reg|2013-12-20|child exit segmentation fault after apache gracefu|
|55919|New|Nor|2013-12-22|EPREFIX and dynamic modules                       |
|55942|New|Nor|2014-01-01|400 - Bad Request on POST (Windows Server 2012 Hyp|
|55952|New|Nor|2014-01-05|ab: SSL keep-alive fails with apr_pollset_poll: Th|
|55962|New|Enh|2014-01-06|mod_remoteip should not allow an external proxy to|
|55963|New|Nor|2014-01-07|Add application/ld+json to mime.types             |
|55981|Opn|Nor|2014-01-09|mod_mbox hang on some e-mails on user@openoffice.a|
|55985|Opn|Nor|2014-01-10|apache does not reopen logs when multiple graceful|
|55989|Opn|Enh|2014-01-11|write to error log upon RewriteRule [F]orbidden   |
|55991|New|Nor|2014-01-12|mod_charset_lite doesn't bail out on non-identity |
|56009|Inf|Cri|2014-01-14|Memory leak in httpd 2.4.3 over time with persista|
|56014|New|Nor|2014-01-15|MOd rewrite CO Cookie method the lifetime flag not|
|56028|New|Enh|2014-01-17|Add http/1.0, http/1.1 NPN advertisement to enable|
|56034|New|Nor|2014-01-20|CPU consumption due to circular linked list in ap_|
|56040|New|Enh|2014-01-21|should be able to remove Max-Age cookie parameter |
|56041|New|Enh|2014-01-21|should be able to disable session expiry increment|
|56052|New|Nor|2014-01-22|ap_session_load called multiple times for expired |
|56055|New|Nor|2014-01-23|Route is not extracted properly when a session coo|
|56064|New|Enh|2014-01-25|Optimize PNGs                                     |
|56067|New|Nor|2014-01-27|FallbackResource doesn't work if directory exists |
|56081|New|Maj|2014-01-28|Apache 2.2.26 SIGSEGVs when POST'ing data         |
|56091|Inf|Nor|2014-01-30|SSL handshake error when httpd compiled on Oracle |
|56098|New|Nor|2014-02-01|duplicate cookie                                  |
|56101|New|Cri|2014-02-03|Apache 2.4.6 ceases processing requests (scoreboar|
|56102|New|Nor|2014-02-03|SSL_CLIENT_S_DN_x509_0 is undefined in the environ|
|56109|New|Nor|2014-02-05|Cannot increase the read limit                    |
|56113|New|Nor|2014-02-06|dist commit messages missing from mail-archives di|
|56131|New|Nor|2014-02-12|ProxyPassReverse / zealously replaces Location hea|
|56135|New|Nor|2014-02-13|Add DC to list of x509 components                 |
|56152|New|Nor|2014-02-18|ProxyBlock does not accept network addresses      |
|56176|New|Nor|2014-02-21|mod_substitute truncates the response body if the |
|56188|New|Nor|2014-02-25|mod_proxy_fcgi does not send FCGI_ABORT_REQUEST on|
|56209|New|Nor|2014-03-03|Uninitialised variables in os/win32/ap_regkey.c   |
|56226|Ver|Nor|2014-03-06|per VirtualHost KeepAliveTimeout is not recognized|
|56229|New|Enh|2014-03-06|ocsp ProxyHost and ProxyPort support              |
|56230|New|Nor|2014-03-07|mod_access_compat can log a bogus client denied me|
|56235|New|Nor|2014-03-07|quotes should be optional around expr             |
|56247|New|Cri|2014-03-12|semaphore creation for proxypass                  |
|56250|New|Nor|2014-03-12|sbindir in config.layout for Apache has bin instea|
|56251|New|Nor|2014-03-12|Increase maximum length of FcgidInitialEnv string |
|56252|New|Enh|2014-03-12|make install as privileged user creates files not |
|56262|New|Nor|2014-03-14|ab does not work with extremely long cookies      |
|56264|New|Trv|2014-03-14|Confusing error with .htaccess rewrite to proxy wh|
|56270|New|Enh|2014-03-15|--with-ssl=/foo w/o pkgconfig needs help on AIX 64|
|56288|New|Enh|2014-03-19|rewrite URLs in style attributes                  |
|56289|New|Nor|2014-03-19|Buffer overflow in mod_proxy_html's string replace|
|56308|New|Nor|2014-03-24|1 second delay in handle request kills performance|
|56312|New|Nor|2014-03-25|Can't configure different balancing workers that c|
|56314|New|Nor|2014-03-25|exiting from MPM-worker child caused assert in apr|
|56326|New|Nor|2014-03-27|cache_quick_handler does not serve responses with |
|56331|New|Nor|2014-03-29|windows 'access denied' during revalidaton of reso|
|56333|New|Enh|2014-03-31|API to resume a SUSPENDED connection              |
|56362|New|Maj|2014-04-08|ldaps only works with port 636. Non-standard port |
|56379|New|Nor|2014-04-09|Number of columns in the results returned from pgs|
|56395|New|Enh|2014-04-11|Allow SERVER_ADDR environment variable to be optio|
|56404|New|Nor|2014-04-12|endless loop  when connect to a website(https)  wh|
|56413|New|Blk|2014-04-15|can not restart httpd on centos 5.10 64bit        |
|56422|New|Nor|2014-04-17|authnz_ldap with other forms of authn can fail req|
|56457|New|Nor|2014-04-25|mod_proxy_html.c: 2 * cut'n'paste errors          |
|56473|New|Nor|2014-04-30|ETags don't change when headers do                |
|56475|New|Enh|2014-04-30|Allow TLS record size to be configured            |
|56483|New|Enh|2014-05-02|add disableKeepAlivePercentage similar to tomcat h|
|56493|New|Min|2014-05-06|mod_expires should not set expires in future for s|
|56495|New|Nor|2014-05-06|Application behind mod_proxy does not get SessionH|
|56500|Opn|Enh|2014-05-07|vhosts priority order with wildcard               |
|56504|New|Nor|2014-05-08|cannot build static support binaries              |
|56508|New|Nor|2014-05-09|Requiring SNI - SSLStrictSNIVHostCheck semantics  |
|56517|New|Enh|2014-05-12|Virtualhosts cannot inherit parent CustomLog      |
|56528|New|Enh|2014-05-15|"bad flags delimiter" - improve helpfulness       |
|56541|New|Nor|2014-05-18|Proxy 502's on large file post requests           |
|56559|New|Nor|2014-05-25|multiple unix sockets in one virtualhost fails    |
|56569|New|Nor|2014-05-27|Null CRC in gzip footer with mod_cgid and ErrorDoc|
|56587|New|Nor|2014-06-03|Many VirtualHost's with SSLEngine On              |
|56590|New|Enh|2014-06-04|(REST-) API for configuring balancer manager remot|
|56594|Inf|Nor|2014-06-05|mod_authn_dbd, mod_dbd and mod_ssl                |
|56598|New|Nor|2014-06-06|Content-Length header should be always interpreted|
|56621|New|Nor|2014-06-13|Rotatelogs.exe first start                        |
|56622|New|Nor|2014-06-13|mod_reqtimeout incorrectly applies timeouts to CON|
|56626|New|Nor|2014-06-15|Add info about rotatelogs to log rotation document|
|56633|New|Nor|2014-06-16|mod_auth_basic breaks mod_autoindex               |
|56645|New|Maj|2014-06-19|socket callback with timeout callback causes infin|
|56664|New|Nor|2014-06-24|Proxy retry timeout does not cope with system time|
|56687|New|Nor|2014-07-01|ProxySourceAddress failed to bind socket to local |
|56697|New|Maj|2014-07-04|status page still shown while blocked             |
|56718|New|Nor|2014-07-14|Cleanup request Host headers when absolute URI are|
|56719|New|Nor|2014-07-14|parallel requests get served with delays          |
|56738|New|Enh|2014-07-17|Ability to extract route from cookie with regexp  |
|56740|New|Nor|2014-07-18|suspended_count not maintained properly with wstun|
|56750|New|Enh|2014-07-20|SuexecUserGroup replacement                       |
|56751|New|Maj|2014-07-20|Fails to properly mitigate Slow Post DoS attack   |
|56753|New|Nor|2014-07-21|mod_lua.so: symbol luaL_openlib: referenced symbol|
|56778|New|Nor|2014-07-28|while running make command i got this error       |
|56794|New|Nor|2014-07-31|Added AuthDBDFullAuthQuery option                 |
|56795|Inf|Nor|2014-07-31|Apache 2.4.10 Program received signal SIGPIPE, Bro|
|56818|Inf|Nor|2014-08-05|SetEnvIf may set invalid string length on empty st|
|56843|New|Enh|2014-08-12|Support different OCSP stapling max ages          |
|56868|New|Nor|2014-08-18|relative LuaRoot broken                           |
|56879|New|Nor|2014-08-22|Information disclosure                            |
|56889|New|Nor|2014-08-26|Close state never dies                            |
|56898|New|Nor|2014-08-28|Headers in err_headers_out are not returned when a|
|56918|Opn|Blk|2014-09-06|error: 'ap_copy_scoreboard_worker' undeclared here|
|56926|New|Nor|2014-09-08|Filename causes AH02599 slotmem issue             |
|56933|New|Min|2014-09-09|not sure it's an appache bug : some browser want t|
|56942|New|Reg|2014-09-10|Unable to implement TRANSFER-CHUNKED:ENCODING with|
|56943|New|Nor|2014-09-10|mod_proxy_connect - AH02447: err/hup on backconn  |
|56977|New|Maj|2014-09-12|segfaults when using mod_mem_cache + mod_disk_cach|
|56986|New|Blk|2014-09-17|chunked Transfer-Encoding forbidden: /test/test.dl|
|57014|New|Cri|2014-09-24|Incorrect test for CC_FOR_BUILD prevents build (on|
|57023|New|Nor|2014-09-26|Socache shmcb don't cache file bigger than 11k    |
|57028|New|Enh|2014-09-27|mod_spdy - support Apache 2.4                     |
|57044|New|Nor|2014-09-29|[PatchAvailable] Use base64url in mod_unique_id ('|
|57045|New|Nor|2014-09-30|dumpio output strings are missing                 |
|57046|New|Enh|2014-09-30|Add additional parameter to enable check URL befor|
|57056|New|Maj|2014-10-03|Rewrite port is taken into hostname               |
|57067|New|Nor|2014-10-08|A proxy worker both standalone and balancer member|
|57069|New|Nor|2014-10-08|apache ssl timeout during chunked request in rever|
|57073|New|Cri|2014-10-09|Intermittent Connection Issues using default httpd|
|57085|New|Enh|2014-10-14|Implement Proxy Protocol in httpd                 |
|57087|New|Nor|2014-10-14|mod_proxy_fcgi doesn't send cgi CONTENT_LENGTH var|
|57100|Ver|Nor|2014-10-16|"SSLProtocol ALL" is ignored for virtual hosts    |
|57101|New|Enh|2014-10-16|[PATCH] Better error reporting when child spawn fa|
|57109|New|Nor|2014-10-17|GPG verification examples are wrong               |
|57119|Opn|Enh|2014-10-20|Suppress address reuse / DNS cache in mod_proxy   |
|57120|New|Nor|2014-10-21|Disable SSLv3 by default (POODLE)                 |
|57121|New|Nor|2014-10-21|ocsp stapling should not pass temporary server out|
|57131|New|Nor|2014-10-22|OCSP Stapling scalability concern                 |
|57159|New|Min|2014-10-28|mod_ssl OCSP Stapling directives don't support per|
|57160|New|Nor|2014-10-29|httxt2dbm doesn't generate files on NAS           |
|57174|New|Nor|2014-10-31|Update windows visual studio build                |
|57210|New|Nor|2014-11-14|LuaHookMapToStorage not firing in per-directory co|
|57211|New|Enh|2014-11-14|Config-time options                               |
|57212|Opn|Nor|2014-11-14|Headers returned by scripts are limited to 8190 by|
|57218|New|Nor|2014-11-15|[Feature Request] Apache Bench (AB) to output a cs|
|57219|New|Nor|2014-11-15|ApacheBench quits unexpectedly with high concurren|
|57220|New|Nor|2014-11-15|[Feature Request] Add option to ApacheBench to giv|
|57228|New|Nor|2014-11-17|glibc detected *** httpd: double free or corruptio|
|57229|New|Maj|2014-11-17|mod_sed dies on long lines                        |
|57286|New|Nor|2014-11-29|Symbolic links are not honoured                   |
|57298|New|Min|2014-12-02|RewriteBase inside FilesMatch behaves oddly       |
|57299|New|Enh|2014-12-02|mod_session_dbd should not make a database call pe|
|57300|New|Enh|2014-12-02|mod_session_dbd should not save the session at eac|
|57301|New|Enh|2014-12-02|Add SessionMaxAgeAbsolute Directive               |
|57304|Inf|Nor|2014-12-03|MySQL DBD Authentication Incompatible with SSL    |
|57311|New|Nor|2014-12-04|BalancerMember enclosed by <If> gives syntax error|
|57313|New|Nor|2014-12-05|The DefaultType directive has been removed        |
|57327|New|Nor|2014-12-08|mod_ssl seg fault on exit                         |
|57334|Ver|Maj|2014-12-09|Segmentation fault in SSL_renegotiate at ssl_lib.c|
|57337|New|Nor|2014-12-10|Content negotiation fails with conditional Redirec|
|57339|New|Enh|2014-12-10|ErrorLogFormat doesn't allow logging in Internet d|
|57360|New|Nor|2014-12-17|Fail gracefully on certificate/key mismatch       |
|57372|New|Nor|2014-12-19|httpd will lookup every home directory while start|
|57374|Ver|Nor|2014-12-19|Event MPM: Wrong KeepAliveTimeout when system cloc|
|57375|New|Enh|2014-12-19|Support LibreSSL as an alternative toolkit for mod|
|57379|New|Nor|2014-12-20|[patch] Makefile.in  with mpm-shared, cgi and cgid|
|57383|New|Cri|2014-12-21|Error retrieving Report: An Existing connection wa|
|57386|New|Blk|2014-12-22|html5 lost some comments                          |
|57398|New|Maj|2014-12-26|AH01075: Error dispatching request to : (passing b|
|57399|New|Nor|2014-12-28|Many unnecessary CPU wakeups per second           |
|57406|New|Nor|2014-12-31|cgi-bin script is not executing                   |
|57412|New|Maj|2015-01-04|rewrite rules causes duplicate requests           |
|57416|New|Nor|2015-01-06|htcacheclean thinks the cache is smaller than it a|
|57424|Opn|Nor|2015-01-07|mod_rewrite not using ap_context_document_root    |
|57436|New|Enh|2015-01-12|Option to strip extra data after websocket request|
|57439|New|Enh|2015-01-13|Allow to change body timeout per location         |
|57448|New|Nor|2015-01-16|SSI <!--#set --> cannot capture backreferences fro|
|57453|New|Maj|2015-01-17|403 error when virtualhost configured with non-exi|
|57471|New|Nor|2015-01-20|Apache 2.4.10 Compilation fails when compiling aga|
|57477|New|Nor|2015-01-21|mod_auth_digest AH00052: child pid $pid exit signa|
|57483|New|Nor|2015-01-22|Omit "Keep-Alive" header on 1.1 connections       |
|57492|New|Nor|2015-01-24|incomplete chunked-transfered request body is not |
|57506|New|Nor|2015-01-27|<If> directive doesn't work within a <Location> se|
|57510|New|Enh|2015-01-28|Engine keyform support for private keys           |
|57511|New|Maj|2015-01-28|Opening plain TCP Socket on SSL port causes denial|
|57515|New|Nor|2015-01-30|Define/Undefine don't work reasonably outside of g|
|57519|New|Nor|2015-02-01|change SSLv2 to SSLv3 or remove SSLv2 support allt|
|57526|Opn|Maj|2015-02-03|Apache 2.2.29_openssl-1.0.1k_x86_64 Error creating|
|57529|Opn|Nor|2015-02-03|htcacheclean doesn't show the cached URL with '-a'|
|57585|New|Nor|2015-02-13|httpd fails to start if there is an IncludeOptiona|
|57590|New|Nor|2015-02-18|loading mod_proxy_http makes rewriteRule's [proxy]|
|57591|New|Nor|2015-02-18|DirectoryIndex directive cannot be overwritten    |
|57616|New|Maj|2015-02-23|AB - DNS roundrobin support                       |
|57624|New|Enh|2015-02-23|Provide support for http/2.0                      |
|57631|New|Nor|2015-02-24|Useless test in acinclude.m4                      |
|57632|New|Nor|2015-02-24|mod_systemd passes invalid default to APACHE_MODUL|
|57635|New|Nor|2015-02-25|meta-refresh is not rewritten by mod_proxy_html   |
|57636|New|Nor|2015-02-25|URLs without protocol are not rewriten by mod_prox|
|57641|New|Maj|2015-02-27|mod_substitute: Invalid merge order               |
|57646|New|Enh|2015-02-27|SSLEngine inside If directive                     |
|57660|New|Trv|2015-03-04|AB - free memory allocated by xmalloc and xcalloc |
|57680|New|Nor|2015-03-09|SSLSessionCacheTimeout has no effect              |
|57685|New|Nor|2015-03-10|Requests are denied while the mod_cgid daemon star|
|57691|New|Nor|2015-03-12|mod_proxy/proxy_util confuses UDS scheme with HTTP|
|57695|New|Nor|2015-03-12|[core:warn] [pid 1120] (101)Network is unreachable|
|57710|New|Nor|2015-03-15|Wildcard matching for logging headers             |
|57725|New|Enh|2015-03-18|ApacheBench: include http status code in gnuplot o|
|57742|New|Nor|2015-03-23|"reliable piped logging" doesn't work for ErrorLog|
|57745|New|Nor|2015-03-23|httpd exits 1 with no stderr when proxy_balancer_m|
|57746|New|Nor|2015-03-23|Apache hangs on startup using MPM event           |
|57751|Inf|Maj|2015-03-24|Problems with proxy reverse to websockets         |
|57756|New|Enh|2015-03-25|Config options for handling of pipelined request  |
|57757|New|Cri|2015-03-25|extern apr_xlate_t *ap_locale_to_ascii variable gi|
|57771|New|Nor|2015-03-27|cleanup_script uses incorrect connection ID       |
|57774|Inf|Nor|2015-03-28|httpd.conf <IfModule proxy_html_module> content er|
|57777|New|Nor|2015-03-30|Security concerns with documentation of AddHandler|
|57781|New|Nor|2015-03-31|disable reconnection after connection error       |
|57784|New|Enh|2015-03-31|[RFE] Multiple ErrorLog directives                |
|57785|New|Nor|2015-04-01|REDIRECT_URL is not suitable for use in server-gen|
|57795|Opn|Maj|2015-04-07|mod_proxy_wstunnel sometimes does not connect and |
|57800|New|Nor|2015-04-09|High CPU usage in ap_core_output_filter           |
|57807|New|Enh|2015-04-13|Build-configurable environment variable length    |
|57810|New|Nor|2015-04-13|Should apache ignore difference in trailing dot be|
|57813|New|Nor|2015-04-14|Rewrite 'pre-compressed content' recipe using 2.4 |
|57814|New|Nor|2015-04-14|Teach mod_deflate how to serve pre-comressed conte|
|57819|New|Nor|2015-04-15|Need a conventions document                       |
|57832|New|Enh|2015-04-19|Reduction of response splitting attacks consequenc|
|57853|Inf|Nor|2015-04-24|mod_proxy_http sends request with header 'Expect: |
|57868|New|Nor|2015-04-28|SIGSEV when lacking correct DB access permissions |
|57876|New|Reg|2015-04-30|logresolve.exe on any Windows immediately crashes |
|57878|New|Nor|2015-04-30|Using UTF-8 for all languages, and avoiding html-e|
|57895|New|Min|2015-05-05|missing m4a mimeType in mime.types                |
|57911|New|Min|2015-05-09|Rewrite documentation unclear or wrong about what |
|57927|New|Maj|2015-05-13|Segmentation Fault at proxy_util.c:994            |
|57933|New|Min|2015-05-18|apr_port_t returns constant                       |
|57941|New|Nor|2015-05-21|config.status: line 331: syntax error near unexpec|
|57949|New|Enh|2015-05-25|new mod_ssl environment variable SSL_{CLIENT|SERVE|
|57950|New|Nor|2015-05-26|[patch] buildconf change hint in build to newer ap|
|57960|New|Nor|2015-05-27|PUT truncates response body; status_line appears t|
|57976|New|Cri|2015-05-30|Server threads stale when sending 500 status with |
|57978|New|Nor|2015-06-01|unix:/ works with any number of / slashes  except |
|57979|New|Nor|2015-06-01|can not turn change log level for mod_filter      |
|57996|New|Nor|2015-06-03|Symlinks erroneously not followed when target inod|
|57997|New|Nor|2015-06-03|Threads started during child_init don't block sign|
|57999|New|Nor|2015-06-04|ap_getparents() may remove start slash of uri     |
|58001|New|Enh|2015-06-04|Implement Forwarded header (RFC 7239) to mod_proxy|
|58007|New|Nor|2015-06-06|400 Bad Request with fully qualified domain name o|
|58020|New|Nor|2015-06-11|When user authenticates with certificate which has|
|58024|New|Nor|2015-06-11|(Graceful) Restart does not work after adding a Ba|
|58025|New|Enh|2015-06-11|mod_authz_dbd : new dbd-query and AuthzDBDQuery op|
|58026|New|Nor|2015-06-11|return 421 status code when SNI and Host: header d|
|58044|New|Cri|2015-06-16|Error sintax 'lua_dump'                           |
|58050|New|Nor|2015-06-17|ErrorDocument does not always work                |
|58073|New|Nor|2015-06-24|Extremely long time for graceful restart          |
|58089|New|Nor|2015-07-01|mod_authz_host uses proxy IP even when mod_remotei|
|58091|New|Nor|2015-07-02|mod_socache_memcache does not reuse memcache conne|
|58097|New|Enh|2015-07-03|[feat] Preserve original connecting IP            |
|58101|New|Nor|2015-07-05|DeflateCompressionLevel inside vhost resets logfor|
|58107|New|Blk|2015-07-06|Httpd crashes on startup every time, dump file att|
|58109|New|Nor|2015-07-06|Apache on windows cannot handle the hash symbol (#|
|58118|Inf|Min|2015-07-09|mod_proxy_fcgi logs 503 when user aborts connectio|
|58120|New|Nor|2015-07-10|ProxyPassInherit does not work as expect          |
|58121|New|Nor|2015-07-10|ProxyHTMLMeta seems to ignore all <meta http-equiv|
|58126|New|Nor|2015-07-11|[patch] acinclude.m4 fix "warning: underquoted def|
|58129|New|Nor|2015-07-12|man pages are not generated correctly             |
|58132|New|Nor|2015-07-12|non-standard, non-traditional man page layout make|
|58135|New|Nor|2015-07-14|mod_cache sends client "if-Modified-Since" to back|
|58141|New|Nor|2015-07-15|Apache Service doesn't start when rotatlogs.exe pa|
|58142|New|Nor|2015-07-15|authz_core ignores loglevel                       |
|58158|New|Nor|2015-07-21|Not honoring HTTP spec with regard to Accept-Encod|
|58168|New|Enh|2015-07-21|Would like full request evaluation support in Rewr|
|58171|New|Nor|2015-07-22|ap_session_save saves the wrong session after a de|
|58177|New|Enh|2015-07-24|Mod Proxy forward trailers in http chunked request|
|58180|New|Enh|2015-07-24|ErrorDocument original URL in subsequent <Location|
|58181|New|Enh|2015-07-25|mod_expire should allow "minus" keyword same like |
|58188|New|Nor|2015-07-28|http2 mod_lua: support build with lua 5.2+        |
|58197|New|Nor|2015-07-31|apr-util-1.5.4 build against openldap - "could not|
|58202|New|Enh|2015-07-31|apxs -q += HTTPD_MAJOR , HTTPD_MMN variables      |
|58213|New|Nor|2015-08-05|Can't use SUITEB128 etc. ciphers with apache.     |
|58225|New|Reg|2015-08-08|intermitant segfault 11 in session_identity_encode|
|58226|New|Nor|2015-08-08|XSS in Error Page                                 |
+-----+---+---+----------+--------------------------------------------------+
| Total 1524 bugs                                                           |
+---------------------------------------------------------------------------+

From dev-return-83462-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Aug  9 12:45:41 2015
Return-Path: <dev-return-83462-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 681C417475
	for <apmail-httpd-dev-archive@www.apache.org>; Sun,  9 Aug 2015 12:45:41 +0000 (UTC)
Received: (qmail 26450 invoked by uid 500); 9 Aug 2015 12:45:41 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 26382 invoked by uid 500); 9 Aug 2015 12:45:41 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 26372 invoked by uid 99); 9 Aug 2015 12:45:40 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Aug 2015 12:45:40 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 884491A9B1D
	for <dev@httpd.apache.org>; Sun,  9 Aug 2015 12:45:40 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.899
X-Spam-Level: **
X-Spam-Status: No, score=2.899 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 7esdOn1JZtU4 for <dev@httpd.apache.org>;
	Sun,  9 Aug 2015 12:45:25 +0000 (UTC)
Received: from mail-yk0-f181.google.com (mail-yk0-f181.google.com [209.85.160.181])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id E55B8215CE
	for <dev@httpd.apache.org>; Sun,  9 Aug 2015 12:37:44 +0000 (UTC)
Received: by ykaz130 with SMTP id z130so13338237yka.0
        for <dev@httpd.apache.org>; Sun, 09 Aug 2015 05:37:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=NTvO7sWJm6SHdcD5QePMAix4Oodm22pQ/LxzpXAXAjg=;
        b=gVBwCtr+sa3TZNzmf0fjCB3fOgKVu2sXZKIEoWZIwWm8OFGZqDRSAXawQGyJtQFZy2
         J7Eb83yFpfp2uhGYpVh3J2NdwZU4wOvPQhoIR1quPHxhBHTjs1kTRwpl1f2WMQdGSPyf
         68p0VmtyU5khgeshe5ZsP+4D6CmxfRBPU0RRa1wTadfN0jqfq7NMTwRYQaBr7h2Blr64
         XVfOlLh/LSYZnXTyEOgm9AervT847WYFYXHyrBDG4Eez0F4ib51LKedM43lTlsm7di4C
         VBs/8gC8yYP9tVrsxGRVuVuH5gJGUIB288XQJw7z6jdm/SA3xUVMhlkKogU/C23CIlvI
         yWng==
MIME-Version: 1.0
X-Received: by 10.170.122.214 with SMTP id o205mr16717366ykb.12.1439123864122;
 Sun, 09 Aug 2015 05:37:44 -0700 (PDT)
Received: by 10.13.241.133 with HTTP; Sun, 9 Aug 2015 05:37:44 -0700 (PDT)
In-Reply-To: <CALE5qRtqeODvm24neQr2jrohwXWg6xi5KNY==GT0gs=RkYH71A@mail.gmail.com>
References: <CALE5qRtG9xtZ9ET2AS6SQ2Z+xcv06Je902Ljws_xPUOkOUZYmA@mail.gmail.com>
	<CALK=YjNAJsw12ME099SF=GRfsWMEn_gjGj189PXpg7Xy5E7Lgw@mail.gmail.com>
	<CALE5qRtqeODvm24neQr2jrohwXWg6xi5KNY==GT0gs=RkYH71A@mail.gmail.com>
Date: Sun, 9 Aug 2015 08:37:44 -0400
Message-ID: <CAKUrXK6=xF5hM-yxfPJa8X09QB6NOFO2wtYzAqPYahDm6GoQuQ@mail.gmail.com>
Subject: Re: help: need mod_cgi.so win32 fixed
From: Jeff Trawick <trawick@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1138e99cb57e9b051ce02293

--001a1138e99cb57e9b051ce02293
Content-Type: text/plain; charset=UTF-8

On Sat, Aug 8, 2015 at 9:58 PM, Francesco Pasqualini <frapas@gmail.com>
wrote:

> Hi Eric,
> I confirm that the patch changes mod_cgi
>
> infact mod_cgi.c calls the function ap_create_environment in
> util_script.c:
>
> env = ap_create_environment(r->pool, r->subprocess_env);
>
> so applying the patch to util_script.c, recompiling mod_cgi.c and
> installing mod_cgi.so under the $root/modules dir will do the trick
>

No, util_script code is not included in individual modules; it is compiled
into the main httpd core, which on Windows is largely in libhttpd.dll.

There are a number of ways that httpd can be built on Windows (largely
based on the Microsoft compiler version and 32-bit vs. 64-bit but also
based on SDK level and support libraries).  The provider of your httpd
build would need to compile a new version for you in order to avoid
compatibility problems.



>
>
> thanks
>
> Francesco
>
> On Sat, Aug 8, 2015 at 8:33 PM, Eric Covener <covener@gmail.com> wrote:
>
>> On Sat, Aug 8, 2015 at 2:24 PM, Francesco Pasqualini <frapas@gmail.com>
>> wrote:
>> > Hi to all,
>> >
>> > Can someone help me ?
>> >
>> > I have a httpd in production on windows affected by this problem:
>> >
>> > https://bz.apache.org/bugzilla/show_bug.cgi?id=46751#c4
>> >
>> > Can someone compile for me a fixed (john proposal) version of
>> mod_cgi.so ?
>>
>> That patch doesn't change mod_cgi, you need a new httpd.exe or
>> libhttpd.lib (not sure what goes where on Windows). Might have more
>> luck on ApacheLounge with a test build of the entire server.
>>
>
>


-- 
Born in Roswell... married an alien...
http://emptyhammock.com/

--001a1138e99cb57e9b051ce02293
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On S=
at, Aug 8, 2015 at 9:58 PM, Francesco Pasqualini <span dir=3D"ltr">&lt;<a h=
ref=3D"mailto:frapas@gmail.com" target=3D"_blank">frapas@gmail.com</a>&gt;<=
/span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8=
ex;border-left:1px #ccc solid;padding-left:1ex"><div dir=3D"ltr">Hi Eric,<d=
iv>I confirm that the patch changes mod_cgi</div><div><br></div><div>infact=
 mod_cgi.c calls the function=C2=A0<span style=3D"color:rgb(0,0,0)">ap_crea=
te_environment in=C2=A0</span><font color=3D"#000000">util_script.c:</font>=
</div><blockquote style=3D"margin:0 0 0 40px;border:none;padding:0px"><div>=
<pre style=3D"color:rgb(0,0,0)">env =3D ap_create_environment(r-&gt;pool, r=
-&gt;subprocess_env);</pre></div></blockquote><div><span style=3D"color:rgb=
(0,0,0)">so applying the patch to=C2=A0</span><span style=3D"color:rgb(0,0,=
0)">util_script.c</span><span style=3D"color:rgb(0,0,0)">, recompiling mod_=
cgi.c and installing mod_cgi.so under the $root/modules dir will do the tri=
ck</span></div></div></blockquote><div><br></div><div>No, util_script code =
is not included in individual modules; it is compiled into the main httpd c=
ore, which on Windows is largely in libhttpd.dll.</div><div><br></div><div>=
There are a number of ways that httpd can be built on Windows (largely base=
d on the Microsoft compiler version and 32-bit vs. 64-bit but also based on=
 SDK level and support libraries).=C2=A0 The provider of your httpd build w=
ould need to compile a new version for you in order to avoid compatibility =
problems.</div><div><br></div><div>=C2=A0</div><blockquote class=3D"gmail_q=
uote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1e=
x"><div dir=3D"ltr"><div><span style=3D"color:rgb(0,0,0)"><br></span></div>=
<div><span style=3D"color:rgb(0,0,0)"><br>thanks</span></div><span class=3D=
"HOEnZb"><font color=3D"#888888"><div><span style=3D"color:rgb(0,0,0)"><br>=
</span></div><div><span style=3D"color:rgb(0,0,0)">Francesco</span></div></=
font></span><div class=3D"gmail_extra"><br><div class=3D"gmail_quote"><span=
 class=3D"">On Sat, Aug 8, 2015 at 8:33 PM, Eric Covener <span dir=3D"ltr">=
&lt;<a href=3D"mailto:covener@gmail.com" target=3D"_blank">covener@gmail.co=
m</a>&gt;</span> wrote:<br></span><div><div class=3D"h5"><blockquote class=
=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padd=
ing-left:1ex">On Sat, Aug 8, 2015 at 2:24 PM, Francesco Pasqualini &lt;<a h=
ref=3D"mailto:frapas@gmail.com" target=3D"_blank">frapas@gmail.com</a>&gt; =
wrote:<br>
&gt; Hi to all,<br>
&gt;<br>
&gt; Can someone help me ?<br>
&gt;<br>
&gt; I have a httpd in production on windows affected by this problem:<br>
&gt;<br>
&gt; <a href=3D"https://bz.apache.org/bugzilla/show_bug.cgi?id=3D46751#c4" =
rel=3D"noreferrer" target=3D"_blank">https://bz.apache.org/bugzilla/show_bu=
g.cgi?id=3D46751#c4</a><br>
&gt;<br>
&gt; Can someone compile for me a fixed (john proposal) version of mod_cgi.=
so ?<br>
<br>
That patch doesn&#39;t change mod_cgi, you need a new httpd.exe or<br>
libhttpd.lib (not sure what goes where on Windows). Might have more<br>
luck on ApacheLounge with a test build of the entire server.<br>
</blockquote></div></div></div><br></div></div>
</blockquote></div><br><br clear=3D"all"><div><br></div>-- <br><div class=
=3D"gmail_signature"><div dir=3D"ltr">Born in Roswell... married an alien..=
.<br><a href=3D"http://emptyhammock.com/" target=3D"_blank">http://emptyham=
mock.com/</a><div><br></div></div></div>
</div></div>

--001a1138e99cb57e9b051ce02293--

From dev-return-83463-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 10 05:40:51 2015
Return-Path: <dev-return-83463-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DC69D1884F
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 10 Aug 2015 05:40:51 +0000 (UTC)
Received: (qmail 34793 invoked by uid 500); 10 Aug 2015 05:40:51 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 34723 invoked by uid 500); 10 Aug 2015 05:40:51 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 34713 invoked by uid 99); 10 Aug 2015 05:40:51 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Aug 2015 05:40:51 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id F0F5D1A1556
	for <dev@httpd.apache.org>; Mon, 10 Aug 2015 05:40:50 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.308
X-Spam-Level:
X-Spam-Status: No, score=-0.308 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, RCVD_IN_MSPIKE_H2=-1.108]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id piq9F-QuRfSl for <dev@httpd.apache.org>;
	Mon, 10 Aug 2015 05:40:44 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp02.smtpout.orange.fr [80.12.242.124])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 8024824E0F
	for <dev@httpd.apache.org>; Mon, 10 Aug 2015 05:40:43 +0000 (UTC)
Received: from [127.0.0.1] ([92.140.233.206])
	by mwinf5d49 with ME
	id 2tgb1r0034TrMBw03tgbfu; Mon, 10 Aug 2015 07:40:35 +0200
X-ME-Helo: [127.0.0.1]
X-ME-Date: Mon, 10 Aug 2015 07:40:35 +0200
X-ME-IP: 92.140.233.206
Subject: Re: svn commit: r1694950 - in /httpd/httpd/trunk:
 include/http_request.h modules/http/http_request.c
To: dev@httpd.apache.org
References: <20150810033025.E37D4AC0095@hades.apache.org>
From: Marion & Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Message-ID: <55C83953.1000904@wanadoo.fr>
Date: Mon, 10 Aug 2015 07:40:35 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.1.0
MIME-Version: 1.0
In-Reply-To: <20150810033025.E37D4AC0095@hades.apache.org>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 150809-1, 09/08/2015), Outbound message
X-Antivirus-Status: Clean

Hi,

doesn't it require a minor ap_mmn.h bump ?

cj

Le 10/08/2015 05:30, gsmith@apache.org a écrit :
> Author: gsmith
> Date: Mon Aug 10 03:30:25 2015
> New Revision: 1694950
>
> URL: http://svn.apache.org/r1694950
> Log:
> ap_process_request needs exportation for use in mod_h2 on Windows
>
> Modified:
>      httpd/httpd/trunk/include/http_request.h
>      httpd/httpd/trunk/modules/http/http_request.c
>
> Modified: httpd/httpd/trunk/include/http_request.h
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/include/http_request.h?rev=1694950&r1=1694949&r2=1694950&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/include/http_request.h (original)
> +++ httpd/httpd/trunk/include/http_request.h Mon Aug 10 03:30:25 2015
> @@ -316,7 +316,7 @@ AP_DECLARE(void) ap_allow_standard_metho
>    * the response to the client
>    * @param r The current request
>    */
> -void ap_process_request(request_rec *r);
> +AP_DECLARE(void) ap_process_request(request_rec *r);
>   
>   /* For post-processing after a handler has finished with a request.
>    * (Commonly used after it was suspended)
>
> Modified: httpd/httpd/trunk/modules/http/http_request.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http/http_request.c?rev=1694950&r1=1694949&r2=1694950&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/modules/http/http_request.c (original)
> +++ httpd/httpd/trunk/modules/http/http_request.c Mon Aug 10 03:30:25 2015
> @@ -363,7 +363,7 @@ void ap_process_async_request(request_re
>       ap_process_request_after_handler(r);
>   }
>   
> -void ap_process_request(request_rec *r)
> +AP_DECLARE(void) ap_process_request(request_rec *r)
>   {
>       apr_bucket_brigade *bb;
>       apr_bucket *b;
>


From dev-return-83464-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 10 08:59:29 2015
Return-Path: <dev-return-83464-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9788918F0D
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 10 Aug 2015 08:59:29 +0000 (UTC)
Received: (qmail 31734 invoked by uid 500); 10 Aug 2015 08:59:29 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 31659 invoked by uid 500); 10 Aug 2015 08:59:29 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 31649 invoked by uid 99); 10 Aug 2015 08:59:29 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Aug 2015 08:59:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 9ACD2183C22
	for <dev@httpd.apache.org>; Mon, 10 Aug 2015 08:59:28 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.799
X-Spam-Level: *
X-Spam-Status: No, score=1.799 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, KAM_LAZY_DOMAIN_SECURITY=1,
	SPF_HELO_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id Bb83lPGSG8Pm for <dev@httpd.apache.org>;
	Mon, 10 Aug 2015 08:59:17 +0000 (UTC)
Received: from mail1.bemta14.messagelabs.com (mail1.bemta14.messagelabs.com [193.109.254.108])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id ED36F42BE6
	for <dev@httpd.apache.org>; Mon, 10 Aug 2015 08:59:16 +0000 (UTC)
Received: from [193.109.255.99] by server-4.bemta-14.messagelabs.com id 4A/20-10715-66768C55; Mon, 10 Aug 2015 08:57:10 +0000
X-Env-Sender: ruediger.pluem@vodafone.com
X-Msg-Ref: server-15.tower-48.messagelabs.com!1439197030!23370464!1
X-Originating-IP: [195.232.244.133]
X-StarScan-Received:
X-StarScan-Version: 6.13.16; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 24224 invoked from network); 10 Aug 2015 08:57:10 -0000
Received: from mailout01.vodafone.com (HELO mailout01.vodafone.com) (195.232.244.133)
  by server-15.tower-48.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 10 Aug 2015 08:57:10 -0000
Received: from mailint01.vodafone.com (mailint01.vodafone.com [195.232.244.198])
	by mailout01.vodafone.com (Postfix) with ESMTP id 3mqWPy0ctvz1yG2
	for <dev@httpd.apache.org>; Mon, 10 Aug 2015 10:57:10 +0200 (CEST)
Received: from mailint01.vodafone.com (localhost [127.0.0.1])
	by mailint01.vodafone.com (Postfix) with ESMTP id 3mqWPx6j9lzxPq1
	for <dev@httpd.apache.org>; Mon, 10 Aug 2015 10:57:09 +0200 (CEST)
Received: from VOEXC03W.internal.vodafone.com (voexc03w.dc-ratingen.de [145.230.101.23])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mailint01.vodafone.com (Postfix) with ESMTPS id 3mqWPx6MNczxPmj
	for <dev@httpd.apache.org>; Mon, 10 Aug 2015 10:57:09 +0200 (CEST)
Received: from VOEXC15W.internal.vodafone.com (145.230.101.17) by
 VOEXC03W.internal.vodafone.com (145.230.101.23) with Microsoft SMTP Server
 (TLS) id 14.3.224.2; Mon, 10 Aug 2015 10:57:09 +0200
Received: from VOEXM10W.internal.vodafone.com ([169.254.2.132]) by
 voexc15w.internal.vodafone.com ([145.230.101.17]) with mapi id
 14.03.0224.002; Mon, 10 Aug 2015 10:57:09 +0200
From: =?utf-8?B?UGzDvG0sIFLDvGRpZ2VyLCBWb2RhZm9uZSBHcm91cA==?=
	<ruediger.pluem@vodafone.com>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
Subject: RE: svn commit: r1694950 - in /httpd/httpd/trunk:
 include/http_request.h modules/http/http_request.c
Thread-Topic: svn commit: r1694950 - in /httpd/httpd/trunk:
 include/http_request.h modules/http/http_request.c
Thread-Index: AQHQ0y8gDUmQUtQf/0yDIRcVKYYT354E7m1w
Date: Mon, 10 Aug 2015 08:57:07 +0000
Message-ID: <AB1691BE05AE7F4992697F2A0835627AC62E1DE7@VOEXM10W.internal.vodafone.com>
References: <20150810033025.E37D4AC0095@hades.apache.org>
 <55C83953.1000904@wanadoo.fr>
In-Reply-To: <55C83953.1000904@wanadoo.fr>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

DQoNCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogTWFyaW9uICYgQ2hyaXN0
b3BoZSBKQUlMTEVUIA0KPiBTZW50OiBNb250YWcsIDEwLiBBdWd1c3QgMjAxNSAwNzo0MQ0KPiBU
bzogZGV2QGh0dHBkLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogUmU6IHN2biBjb21taXQ6IHIxNjk0
OTUwIC0gaW4gL2h0dHBkL2h0dHBkL3RydW5rOg0KPiBpbmNsdWRlL2h0dHBfcmVxdWVzdC5oIG1v
ZHVsZXMvaHR0cC9odHRwX3JlcXVlc3QuYw0KPiANCj4gSGksDQo+IA0KPiBkb2Vzbid0IGl0IHJl
cXVpcmUgYSBtaW5vciBhcF9tbW4uaCBidW1wID8NCg0KSSBkb24ndCB0aGluayBzbywgc2luY2Ug
aXQgb25seSBmaXhlcyBhIGJ1aWxkIGlzc3VlIG9uIFdpbmRvd3MgYW5kIGRvZXMgbm90IHRvdWNo
IHRoZSBBUEkgZWxzZXdoZXJlLg0KDQpSZWdhcmRzDQoNClLDvGRpZ2VyDQoNCj4gDQo+IGNqDQo+
IA0KPiBMZSAxMC8wOC8yMDE1IDA1OjMwLCBnc21pdGhAYXBhY2hlLm9yZyBhIMOpY3JpdCA6DQo+
ID4gQXV0aG9yOiBnc21pdGgNCj4gPiBEYXRlOiBNb24gQXVnIDEwIDAzOjMwOjI1IDIwMTUNCj4g
PiBOZXcgUmV2aXNpb246IDE2OTQ5NTANCj4gPg0KPiA+IFVSTDogaHR0cDovL3N2bi5hcGFjaGUu
b3JnL3IxNjk0OTUwDQo+ID4gTG9nOg0KPiA+IGFwX3Byb2Nlc3NfcmVxdWVzdCBuZWVkcyBleHBv
cnRhdGlvbiBmb3IgdXNlIGluIG1vZF9oMiBvbiBXaW5kb3dzDQo+ID4NCj4gPiBNb2RpZmllZDoN
Cj4gPiAgICAgIGh0dHBkL2h0dHBkL3RydW5rL2luY2x1ZGUvaHR0cF9yZXF1ZXN0LmgNCj4gPiAg
ICAgIGh0dHBkL2h0dHBkL3RydW5rL21vZHVsZXMvaHR0cC9odHRwX3JlcXVlc3QuYw0KPiA+DQo+
ID4gTW9kaWZpZWQ6IGh0dHBkL2h0dHBkL3RydW5rL2luY2x1ZGUvaHR0cF9yZXF1ZXN0LmgNCj4g
PiBVUkw6DQo+IGh0dHA6Ly9zdm4uYXBhY2hlLm9yZy92aWV3dmMvaHR0cGQvaHR0cGQvdHJ1bmsv
aW5jbHVkZS9odHRwX3JlcXVlc3QuaD9yZXY9DQo+IDE2OTQ5NTAmcjE9MTY5NDk0OSZyMj0xNjk0
OTUwJnZpZXc9ZGlmZg0KPiA+DQo+ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQo+ID09PT0NCj4gPiAtLS0g
aHR0cGQvaHR0cGQvdHJ1bmsvaW5jbHVkZS9odHRwX3JlcXVlc3QuaCAob3JpZ2luYWwpDQo+ID4g
KysrIGh0dHBkL2h0dHBkL3RydW5rL2luY2x1ZGUvaHR0cF9yZXF1ZXN0LmggTW9uIEF1ZyAxMCAw
MzozMDoyNSAyMDE1DQo+ID4gQEAgLTMxNiw3ICszMTYsNyBAQCBBUF9ERUNMQVJFKHZvaWQpIGFw
X2FsbG93X3N0YW5kYXJkX21ldGhvDQo+ID4gICAgKiB0aGUgcmVzcG9uc2UgdG8gdGhlIGNsaWVu
dA0KPiA+ICAgICogQHBhcmFtIHIgVGhlIGN1cnJlbnQgcmVxdWVzdA0KPiA+ICAgICovDQo+ID4g
LXZvaWQgYXBfcHJvY2Vzc19yZXF1ZXN0KHJlcXVlc3RfcmVjICpyKTsNCj4gPiArQVBfREVDTEFS
RSh2b2lkKSBhcF9wcm9jZXNzX3JlcXVlc3QocmVxdWVzdF9yZWMgKnIpOw0KPiA+DQo+ID4gICAv
KiBGb3IgcG9zdC1wcm9jZXNzaW5nIGFmdGVyIGEgaGFuZGxlciBoYXMgZmluaXNoZWQgd2l0aCBh
IHJlcXVlc3QuDQo+ID4gICAgKiAoQ29tbW9ubHkgdXNlZCBhZnRlciBpdCB3YXMgc3VzcGVuZGVk
KQ0KPiA+DQo+ID4gTW9kaWZpZWQ6IGh0dHBkL2h0dHBkL3RydW5rL21vZHVsZXMvaHR0cC9odHRw
X3JlcXVlc3QuYw0KPiA+IFVSTDoNCj4gaHR0cDovL3N2bi5hcGFjaGUub3JnL3ZpZXd2Yy9odHRw
ZC9odHRwZC90cnVuay9tb2R1bGVzL2h0dHAvaHR0cF9yZXF1ZXN0LmMNCj4gP3Jldj0xNjk0OTUw
JnIxPTE2OTQ5NDkmcjI9MTY5NDk1MCZ2aWV3PWRpZmYNCj4gPg0KPiA9PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PQ0KPiA9PT09DQo+ID4gLS0tIGh0dHBkL2h0dHBkL3RydW5rL21vZHVsZXMvaHR0cC9odHRwX3Jl
cXVlc3QuYyAob3JpZ2luYWwpDQo+ID4gKysrIGh0dHBkL2h0dHBkL3RydW5rL21vZHVsZXMvaHR0
cC9odHRwX3JlcXVlc3QuYyBNb24gQXVnIDEwIDAzOjMwOjI1DQo+IDIwMTUNCj4gPiBAQCAtMzYz
LDcgKzM2Myw3IEBAIHZvaWQgYXBfcHJvY2Vzc19hc3luY19yZXF1ZXN0KHJlcXVlc3RfcmUNCj4g
PiAgICAgICBhcF9wcm9jZXNzX3JlcXVlc3RfYWZ0ZXJfaGFuZGxlcihyKTsNCj4gPiAgIH0NCj4g
Pg0KPiA+IC12b2lkIGFwX3Byb2Nlc3NfcmVxdWVzdChyZXF1ZXN0X3JlYyAqcikNCj4gPiArQVBf
REVDTEFSRSh2b2lkKSBhcF9wcm9jZXNzX3JlcXVlc3QocmVxdWVzdF9yZWMgKnIpDQo+ID4gICB7
DQo+ID4gICAgICAgYXByX2J1Y2tldF9icmlnYWRlICpiYjsNCj4gPiAgICAgICBhcHJfYnVja2V0
ICpiOw0KPiA+DQoNCg==

From dev-return-83465-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 10 17:33:58 2015
Return-Path: <dev-return-83465-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AD8FE1841F
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 10 Aug 2015 17:33:58 +0000 (UTC)
Received: (qmail 70392 invoked by uid 500); 10 Aug 2015 17:33:58 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 70320 invoked by uid 500); 10 Aug 2015 17:33:58 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 70310 invoked by uid 99); 10 Aug 2015 17:33:58 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Aug 2015 17:33:58 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id AD1E8C0484
	for <dev@httpd.apache.org>; Mon, 10 Aug 2015 17:33:57 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.78
X-Spam-Level: *
X-Spam-Status: No, score=1.78 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id atgEDDwghpmO for <dev@httpd.apache.org>;
	Mon, 10 Aug 2015 17:33:51 +0000 (UTC)
Received: from fed1rmfepo202.cox.net (fed1rmfepo202.cox.net [68.230.241.147])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTP id 9F84642B51
	for <dev@httpd.apache.org>; Mon, 10 Aug 2015 17:33:50 +0000 (UTC)
Received: from fed1rmimpo209 ([68.230.241.160]) by fed1rmfepo202.cox.net
          (InterMail vM.8.01.05.15 201-2260-151-145-20131218) with ESMTP
          id <20150810173344.JGAW19274.fed1rmfepo202.cox.net@fed1rmimpo209>
          for <dev@httpd.apache.org>; Mon, 10 Aug 2015 13:33:44 -0400
Received: from [192.168.1.33] ([98.176.34.113])
	by fed1rmimpo209 with cox
	id 35Zj1r00L2STVfm015ZjhQ; Mon, 10 Aug 2015 13:33:44 -0400
X-CT-Class: Clean
X-CT-Score: 0.00
X-CT-RefID: str=0001.0A020204.55C8E078.00A7,ss=1,re=0.000,fgs=0
X-CT-Spam: 0
X-Authority-Analysis: v=2.0 cv=RP5t6fe+ c=1 sm=1
 a=8xCO7h6kmYZdHn5tUOQhsw==:17 a=LrjODJgKAAAA:8 a=1zd1egijY_QA:10
 a=mV9VRH-2AAAA:8 a=BjTPnnZ5GVvKjR0mWEoA:9 a=QEXdDO2ut3YA:10
 a=8xCO7h6kmYZdHn5tUOQhsw==:117
X-CM-Score: 0.00
Authentication-Results: cox.net; auth=pass (PLAIN) smtp.auth=glewis63@cox.net
Message-ID: <55C8DFF9.3070400@gknw.net>
Date: Mon, 10 Aug 2015 10:31:37 -0700
From: Gregg Smith <gls@gknw.net>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2.28) Gecko/20120306 Thunderbird/3.1.20
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: svn commit: r1694950 - in /httpd/httpd/trunk: include/http_request.h
 modules/http/http_request.c
References: <20150810033025.E37D4AC0095@hades.apache.org> <55C83953.1000904@wanadoo.fr>
In-Reply-To: <55C83953.1000904@wanadoo.fr>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit

Hi,

I guess a minor at least.

I did not add, remove or change the structure of the function, I simply 
made it available to modules. Does that warrant a major bump?



On 8/9/2015 10:40 PM, Marion & Christophe JAILLET wrote:
> Hi,
>
> doesn't it require a minor ap_mmn.h bump ?
>
> cj
>
> Le 10/08/2015 05:30, gsmith@apache.org a écrit :
>> Author: gsmith
>> Date: Mon Aug 10 03:30:25 2015
>> New Revision: 1694950
>>
>> URL: http://svn.apache.org/r1694950
>> Log:
>> ap_process_request needs exportation for use in mod_h2 on Windows
>>
>> Modified:
>>      httpd/httpd/trunk/include/http_request.h
>>      httpd/httpd/trunk/modules/http/http_request.c
>>
>> Modified: httpd/httpd/trunk/include/http_request.h
>> URL: 
>> http://svn.apache.org/viewvc/httpd/httpd/trunk/include/http_request.h?rev=1694950&r1=1694949&r2=1694950&view=diff
>> ============================================================================== 
>>
>> --- httpd/httpd/trunk/include/http_request.h (original)
>> +++ httpd/httpd/trunk/include/http_request.h Mon Aug 10 03:30:25 2015
>> @@ -316,7 +316,7 @@ AP_DECLARE(void) ap_allow_standard_metho
>>    * the response to the client
>>    * @param r The current request
>>    */
>> -void ap_process_request(request_rec *r);
>> +AP_DECLARE(void) ap_process_request(request_rec *r);
>>     /* For post-processing after a handler has finished with a request.
>>    * (Commonly used after it was suspended)
>>
>> Modified: httpd/httpd/trunk/modules/http/http_request.c
>> URL: 
>> http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http/http_request.c?rev=1694950&r1=1694949&r2=1694950&view=diff
>> ============================================================================== 
>>
>> --- httpd/httpd/trunk/modules/http/http_request.c (original)
>> +++ httpd/httpd/trunk/modules/http/http_request.c Mon Aug 10 03:30:25 
>> 2015
>> @@ -363,7 +363,7 @@ void ap_process_async_request(request_re
>>       ap_process_request_after_handler(r);
>>   }
>>   -void ap_process_request(request_rec *r)
>> +AP_DECLARE(void) ap_process_request(request_rec *r)
>>   {
>>       apr_bucket_brigade *bb;
>>       apr_bucket *b;
>>
>


From dev-return-83466-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 10 18:44:17 2015
Return-Path: <dev-return-83466-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A8797187F1
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 10 Aug 2015 18:44:17 +0000 (UTC)
Received: (qmail 42565 invoked by uid 500); 10 Aug 2015 18:44:17 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 42489 invoked by uid 500); 10 Aug 2015 18:44:17 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 42479 invoked by uid 99); 10 Aug 2015 18:44:17 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Aug 2015 18:44:17 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id C4B75C0CE8
	for <dev@httpd.apache.org>; Mon, 10 Aug 2015 18:44:16 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.98
X-Spam-Level: **
X-Spam-Status: No, score=2.98 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01,
	RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 21B8FFVfOzPE for <dev@httpd.apache.org>;
	Mon, 10 Aug 2015 18:44:08 +0000 (UTC)
Received: from mail-ig0-f169.google.com (mail-ig0-f169.google.com [209.85.213.169])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 88CCF428CC
	for <dev@httpd.apache.org>; Mon, 10 Aug 2015 18:44:08 +0000 (UTC)
Received: by igui7 with SMTP id i7so24918071igu.1
        for <dev@httpd.apache.org>; Mon, 10 Aug 2015 11:44:08 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=8LFvk7ATnrJiS3wfRltufniYe+xwkOacR7sWO8hOjW4=;
        b=Zx0WtIij2ArKpLUqSWT8/qcrEyLvv+UJ1NRuQiMw//bABELLFj+sxutONNABUreHUM
         cjkrJDOq5p1NzG/JlcrlyhsgWbu7TKnjLNnsUVHIpMWSZNlGxaLauhEMQ8YAKd79lyRX
         w0dc/YB3JRfdMPfuJw/yver+Zwmix//KnwBS+uDNxdK+x2jtbpFQX5w655vXquV7M6gU
         zlPevxheRQ8bSerNfYhpxLg+h0lWcwwNvirY6M4oPSecxX4s1TiKxxdDtlWMXdpz50Lp
         MRG/o+XN0h87DFw6ZAFQMOw86bbu4T45yzw0/xYYY6lZDRHE+Lmi6q7e/9DCjvGJUp+5
         r9IQ==
X-Gm-Message-State: ALoCoQmAZPrGePAk8pzFwVTqYHeha6+VUC3C01sa4YjWgKi6j+VAdf6WbP3sYgCr7W1eSqBXa8Uo
MIME-Version: 1.0
X-Received: by 10.50.176.138 with SMTP id ci10mr13336383igc.32.1439232248042;
 Mon, 10 Aug 2015 11:44:08 -0700 (PDT)
Received: by 10.107.41.9 with HTTP; Mon, 10 Aug 2015 11:44:07 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
In-Reply-To: <55C8DFF9.3070400@gknw.net>
References: <20150810033025.E37D4AC0095@hades.apache.org>
	<55C83953.1000904@wanadoo.fr>
	<55C8DFF9.3070400@gknw.net>
Date: Mon, 10 Aug 2015 13:44:07 -0500
Message-ID: <CACsi2502KGeb-KPjDuAVwdALubzb8vgfgewVayurv5OGnYUO+Q@mail.gmail.com>
Subject: Re: svn commit: r1694950 - in /httpd/httpd/trunk: include/http_request.h
 modules/http/http_request.c
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=089e0111d7fae4ed35051cf95e5f

--089e0111d7fae4ed35051cf95e5f
Content-Type: text/plain; charset=UTF-8

On Mon, Aug 10, 2015 at 12:31 PM, Gregg Smith <gls@gknw.net> wrote:

> Hi,
>
> I guess a minor at least.
>
> I did not add, remove or change the structure of the function, I simply
> made it available to modules. Does that warrant a major bump?
>

Never a major - that is reserved for changing the signature of functions
or members of structures that are catastrophic for previously compiled
modules.  This is not one of those :)

The previous absence of these exports was simply a bug, I don't see
a reason to bump the version minor for bug fixing.

If users were looking to determine compatibility, e.g. on the 2.4 released
branch, I might have another opinion, but during trunk development, we
fix it and move on.  A previously compiled module simply wouldn't have
any insight on these functions so correcting it doesn't break what they
were already aware of.

--089e0111d7fae4ed35051cf95e5f
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On M=
on, Aug 10, 2015 at 12:31 PM, Gregg Smith <span dir=3D"ltr">&lt;<a href=3D"=
mailto:gls@gknw.net" target=3D"_blank">gls@gknw.net</a>&gt;</span> wrote:<b=
r><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:=
1px #ccc solid;padding-left:1ex">Hi,<br>
<br>
I guess a minor at least.<br>
<br>
I did not add, remove or change the structure of the function, I simply mad=
e it available to modules. Does that warrant a major bump?<div class=3D"HOE=
nZb"><div class=3D"h5"></div></div></blockquote></div><br></div><div class=
=3D"gmail_extra">Never a major - that is reserved for changing the signatur=
e of functions</div><div class=3D"gmail_extra">or members of structures tha=
t are catastrophic for previously compiled</div><div class=3D"gmail_extra">=
modules.=C2=A0 This is not one of those :)</div><div class=3D"gmail_extra">=
<br></div><div class=3D"gmail_extra">The previous absence of these exports =
was simply a bug, I don&#39;t see=C2=A0</div><div class=3D"gmail_extra">a r=
eason to bump the version minor for bug fixing.</div><div class=3D"gmail_ex=
tra"><br></div><div class=3D"gmail_extra">If users were looking to determin=
e compatibility, e.g. on the 2.4 released</div><div class=3D"gmail_extra">b=
ranch, I might have another opinion, but during trunk development, we</div>=
<div class=3D"gmail_extra">fix it and move on.=C2=A0 A previously compiled =
module simply wouldn&#39;t have</div><div class=3D"gmail_extra">any insight=
 on these functions so correcting it doesn&#39;t break what they</div><div =
class=3D"gmail_extra">were already aware of.</div><div class=3D"gmail_extra=
"><br></div><div class=3D"gmail_extra"><br></div></div>

--089e0111d7fae4ed35051cf95e5f--

From dev-return-83467-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 10 18:59:22 2015
Return-Path: <dev-return-83467-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1696A1888F
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 10 Aug 2015 18:59:22 +0000 (UTC)
Received: (qmail 87752 invoked by uid 500); 10 Aug 2015 18:59:21 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 87676 invoked by uid 500); 10 Aug 2015 18:59:21 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 87666 invoked by uid 99); 10 Aug 2015 18:59:21 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Aug 2015 18:59:21 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 315EEDC051
	for <dev@httpd.apache.org>; Mon, 10 Aug 2015 18:59:21 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1
X-Spam-Level: *
X-Spam-Status: No, score=1 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H2=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id De1WNrxe3qKv for <dev@httpd.apache.org>;
	Mon, 10 Aug 2015 18:59:11 +0000 (UTC)
Received: from fed1rmfepo101.cox.net (fed1rmfepo101.cox.net [68.230.241.143])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTP id 4D8D62055B
	for <dev@httpd.apache.org>; Mon, 10 Aug 2015 18:59:10 +0000 (UTC)
Received: from fed1rmimpo306 ([68.230.241.174]) by fed1rmfepo101.cox.net
          (InterMail vM.8.01.05.15 201-2260-151-145-20131218) with ESMTP
          id <20150810185904.SZWJ11887.fed1rmfepo101.cox.net@fed1rmimpo306>
          for <dev@httpd.apache.org>; Mon, 10 Aug 2015 14:59:04 -0400
Received: from [192.168.1.33] ([98.176.34.113])
	by fed1rmimpo306 with cox
	id 36z31r00L2STVfm016z3wR; Mon, 10 Aug 2015 14:59:03 -0400
X-CT-Class: Clean
X-CT-Score: 0.00
X-CT-RefID: str=0001.0A020204.55C8F478.0024,ss=1,re=0.000,fgs=0
X-CT-Spam: 0
X-Authority-Analysis: v=2.0 cv=LKq4tuq9 c=1 sm=1
 a=8xCO7h6kmYZdHn5tUOQhsw==:17 a=LrjODJgKAAAA:8 a=1zd1egijY_QA:10
 a=FWV__3__GpZYPCpjQukA:9 a=QEXdDO2ut3YA:10 a=8xCO7h6kmYZdHn5tUOQhsw==:117
X-CM-Score: 0.00
Authentication-Results: cox.net; auth=pass (PLAIN) smtp.auth=glewis63@cox.net
Message-ID: <55C8F3FA.8050302@gknw.net>
Date: Mon, 10 Aug 2015 11:56:58 -0700
From: Gregg Smith <gls@gknw.net>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2.28) Gecko/20120306 Thunderbird/3.1.20
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: svn commit: r1694950 - in /httpd/httpd/trunk: include/http_request.h
 modules/http/http_request.c
References: <20150810033025.E37D4AC0095@hades.apache.org>	<55C83953.1000904@wanadoo.fr>	<55C8DFF9.3070400@gknw.net> <CACsi2502KGeb-KPjDuAVwdALubzb8vgfgewVayurv5OGnYUO+Q@mail.gmail.com>
In-Reply-To: <CACsi2502KGeb-KPjDuAVwdALubzb8vgfgewVayurv5OGnYUO+Q@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit

On 8/10/2015 11:44 AM, William A Rowe Jr wrote:
> On Mon, Aug 10, 2015 at 12:31 PM, Gregg Smith<gls@gknw.net>  wrote:
>
>> Hi,
>>
>> I guess a minor at least.
>>
>> I did not add, remove or change the structure of the function, I simply
>> made it available to modules. Does that warrant a major bump?
>>
> Never a major - that is reserved for changing the signature of functions
> or members of structures that are catastrophic for previously compiled
> modules.  This is not one of those :)
>
> The previous absence of these exports was simply a bug, I don't see
> a reason to bump the version minor for bug fixing.
>
> If users were looking to determine compatibility, e.g. on the 2.4 released
> branch, I might have another opinion, but during trunk development, we
> fix it and move on.  A previously compiled module simply wouldn't have
> any insight on these functions so correcting it doesn't break what they
> were already aware of

Thanks Christophe for bringing it up.
Thanks Bill and Rüdiger for the answer. I was sure it was not a major 
bump yet was foggy on the minor. My feeling on it was as Bill stated in 
his last sentence above.

G




From dev-return-83468-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 11 09:33:12 2015
Return-Path: <dev-return-83468-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8F5C718975
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 11 Aug 2015 09:33:12 +0000 (UTC)
Received: (qmail 67192 invoked by uid 500); 11 Aug 2015 09:33:12 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 67110 invoked by uid 500); 11 Aug 2015 09:33:12 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 67100 invoked by uid 99); 11 Aug 2015 09:33:12 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Aug 2015 09:33:12 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id A8C2E1A9CC3
	for <dev@httpd.apache.org>; Tue, 11 Aug 2015 09:33:11 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.879
X-Spam-Level: **
X-Spam-Status: No, score=2.879 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01,
	SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id K11OlwHjshzx for <dev@httpd.apache.org>;
	Tue, 11 Aug 2015 09:33:11 +0000 (UTC)
Received: from mail-wi0-f176.google.com (mail-wi0-f176.google.com [209.85.212.176])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 791CA24E12
	for <dev@httpd.apache.org>; Tue, 11 Aug 2015 09:33:10 +0000 (UTC)
Received: by wicne3 with SMTP id ne3so168733239wic.1
        for <dev@httpd.apache.org>; Tue, 11 Aug 2015 02:33:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:from:date:message-id:subject:to:content-type;
        bh=ax53lXNhZo2KU/ofBysuHxiR61Feuknx6S8DzP4JUb4=;
        b=paQ2sdkv7tqRUUYo2mLyE5ABJf00U/7caN+x81VSdujvo3766+pgI9bx+zufwlMrlZ
         brriIHYwnU/Q9miyHhA4CPvWUGhlnQ5nyTpVYivF7x9pwU04aBQtAd5WRkb1Q2qS8OhB
         5mvjb/nIdzJyVUggH63kOXR7XWEXDn/NsNzmkNzYJ53RcB/Uy3YlU3zXM6wJghEjLYlz
         VZA21cxxvJdBQbFkO298t8CTIgBIqoSsrj6qbzKubWZ06vZovCA1mkuMeGj5wwJ8pfq2
         xBiX39ORLs1QxYQQW4fUbo9VuVx34DiXHpTKKLMT0NU4XVKVY5EJ1Hfqazs1gbLrIGgl
         /ySg==
X-Received: by 10.180.107.70 with SMTP id ha6mr33030860wib.20.1439285590287;
 Tue, 11 Aug 2015 02:33:10 -0700 (PDT)
MIME-Version: 1.0
From: =?UTF-8?Q?Christian_K=C3=BCtbach?= <ckuetbach@gmail.com>
Date: Tue, 11 Aug 2015 09:33:00 +0000
Message-ID: <CALw+BujJqdWCOPxkX2seOA7iw7q74_0UP_HgYpRZKuqSgFSHSg@mail.gmail.com>
Subject: Crash while graceful restating a httpd installed at windows
To: dev@httpd.apache.org
Content-Type: multipart/alternative; boundary=e89a8f234d0956ee61051d05ca0e

--e89a8f234d0956ee61051d05ca0e
Content-Type: text/plain; charset=UTF-8

Hello,

there is a bug (server crash), while graceful restart a httpd at windows:

https://bz.apache.org/bugzilla/show_bug.cgi?id=58024

Is there any progress?

Can I help with testing or debugging, because I also would need a solution
to this crash?

Regards,
Christian

--e89a8f234d0956ee61051d05ca0e
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Hello,<div><br></div><div>there is a bug (server crash), w=
hile graceful restart a httpd at windows:<br><br><a href=3D"https://bz.apac=
he.org/bugzilla/show_bug.cgi?id=3D58024">https://bz.apache.org/bugzilla/sho=
w_bug.cgi?id=3D58024</a><br></div><div><br></div><div>Is there any progress=
?</div><div><br></div><div>Can I help with testing or debugging, because I =
also would need a solution to this crash?</div><div><br></div><div>Regards,=
=C2=A0</div><div>Christian</div></div>

--e89a8f234d0956ee61051d05ca0e--

From dev-return-83469-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 11 13:16:42 2015
Return-Path: <dev-return-83469-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 120C918059
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 11 Aug 2015 13:16:42 +0000 (UTC)
Received: (qmail 68349 invoked by uid 500); 11 Aug 2015 13:09:21 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 68282 invoked by uid 500); 11 Aug 2015 13:09:21 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 68270 invoked by uid 99); 11 Aug 2015 13:09:21 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Aug 2015 13:09:21 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 47965C09A9
	for <dev@httpd.apache.org>; Tue, 11 Aug 2015 13:09:21 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.891
X-Spam-Level: *
X-Spam-Status: No, score=1.891 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H2=-1.108, SPF_PASS=-0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id gL344FPhKhLR for <dev@httpd.apache.org>;
	Tue, 11 Aug 2015 13:09:20 +0000 (UTC)
Received: from mail-io0-f172.google.com (mail-io0-f172.google.com [209.85.223.172])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 10DA52122C
	for <dev@httpd.apache.org>; Tue, 11 Aug 2015 13:09:20 +0000 (UTC)
Received: by ioeg141 with SMTP id g141so201036425ioe.3
        for <dev@httpd.apache.org>; Tue, 11 Aug 2015 06:09:19 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=wX+5LBsg6JyinLO2gAxMscMKWOnjUnAjXAc7mUJ02+8=;
        b=BRCtd9FYcSvUCU8ruazL6qNkokPYSThM/mhDnHeCGAeoIsVBUmOxSdavoqplEtV6sY
         TE58nERLyBc0get09dPW/p8OvgQh1CcAcrQNmUXsXlVOY5Muic7JQ0eanDjE1i1+MKe9
         gljogdSkWczysxyWwtBPhxTNkLyU/a3azRpMwS1izHmGJEQuK5A+bljPh63iE3ayM8NC
         Prcsp2ENLqk5Pmlg0Kbb+F+lEkjtyo8Fi/g8gUhUFhYkmm6ZoohS3d4hXgfwxKDJax+9
         p3q8kCfHx4PMaJy3eMGPvgDGBdU9f23jC+QxLFQYGst8Qr4MKA0uBC/HBRMfpchOL6sQ
         cl5Q==
X-Gm-Message-State: ALoCoQn+OgjDk9bYZq+8/m6Cg3inBU8mmUJeI8CaSSAIYbK0DmT5SUVjssbXJz+VDWTfVcsRjDLU
MIME-Version: 1.0
X-Received: by 10.107.32.147 with SMTP id g141mr25749739iog.86.1439298559214;
 Tue, 11 Aug 2015 06:09:19 -0700 (PDT)
Received: by 10.107.41.9 with HTTP; Tue, 11 Aug 2015 06:09:19 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
Received: by 10.107.41.9 with HTTP; Tue, 11 Aug 2015 06:09:19 -0700 (PDT)
In-Reply-To: <CALw+BujJqdWCOPxkX2seOA7iw7q74_0UP_HgYpRZKuqSgFSHSg@mail.gmail.com>
References: <CALw+BujJqdWCOPxkX2seOA7iw7q74_0UP_HgYpRZKuqSgFSHSg@mail.gmail.com>
Date: Tue, 11 Aug 2015 08:09:19 -0500
Message-ID: <CACsi251YCySM8cke7PHZYcrJHaLo=P3dzGBxLT1HD5MuT=_qWA@mail.gmail.com>
Subject: Re: Crash while graceful restating a httpd installed at windows
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1141bb8a59239e051d08cf0f

--001a1141bb8a59239e051d08cf0f
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Aug 11, 2015 4:33 AM, "Christian K=C3=BCtbach" <ckuetbach@gmail.com> wro=
te:
>
> Hello,
>
> there is a bug (server crash), while graceful restart a httpd at windows:
>
> https://bz.apache.org/bugzilla/show_bug.cgi?id=3D58024
>
> Is there any progress?
>
> Can I help with testing or debugging, because I also would need a
solution to this crash?

Assistance is always welcome.

Ensure you have the .pdb files corresponding to the build you are running.

Toggle crash dump collection on windows.

Reproduce the crash.

Use windbg to open the newly created crash dump and collect a backtrace of
the crashed process and crashed thread.

Add this to the bug report, which will help the devs isolate what happened.

I expect this has everything to do with the fact that balancer members may
now be added during the running process.

--001a1141bb8a59239e051d08cf0f
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<p dir=3D"ltr">On Aug 11, 2015 4:33 AM, &quot;Christian K=C3=BCtbach&quot; =
&lt;<a href=3D"mailto:ckuetbach@gmail.com">ckuetbach@gmail.com</a>&gt; wrot=
e:<br>
&gt;<br>
&gt; Hello,<br>
&gt;<br>
&gt; there is a bug (server crash), while graceful restart a httpd at windo=
ws:<br>
&gt;<br>
&gt; <a href=3D"https://bz.apache.org/bugzilla/show_bug.cgi?id=3D58024">htt=
ps://bz.apache.org/bugzilla/show_bug.cgi?id=3D58024</a><br>
&gt;<br>
&gt; Is there any progress?<br>
&gt;<br>
&gt; Can I help with testing or debugging, because I also would need a solu=
tion to this crash?<br></p>
<p dir=3D"ltr">Assistance is always welcome.</p>
<p dir=3D"ltr">Ensure you have the .pdb files corresponding to the build yo=
u are running.</p>
<p dir=3D"ltr">Toggle crash dump collection on windows.</p>
<p dir=3D"ltr">Reproduce the crash.</p>
<p dir=3D"ltr">Use windbg to open the newly created crash dump and collect =
a backtrace of the crashed process and crashed thread.</p>
<p dir=3D"ltr">Add this to the bug report, which will help the devs isolate=
 what happened.</p>
<p dir=3D"ltr">I expect this has everything to do with the fact that balanc=
er members may now be added during the running process.</p>

--001a1141bb8a59239e051d08cf0f--

From dev-return-83470-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 13 20:28:53 2015
Return-Path: <dev-return-83470-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CC3091837A
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 13 Aug 2015 20:28:53 +0000 (UTC)
Received: (qmail 87491 invoked by uid 500); 13 Aug 2015 20:28:44 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 87403 invoked by uid 500); 13 Aug 2015 20:28:43 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 87393 invoked by uid 99); 13 Aug 2015 20:28:43 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Aug 2015 20:28:43 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 7499C19ADCE
	for <dev@httpd.apache.org>; Thu, 13 Aug 2015 20:28:43 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id woYyyubyf6TL for <dev@httpd.apache.org>;
	Thu, 13 Aug 2015 20:28:42 +0000 (UTC)
Received: from mgap1c-mgmt.jacksonnational.com (mgap1c-mgmt.jacksonnational.com [12.148.227.38])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id DC7CF42B4B
	for <dev@httpd.apache.org>; Thu, 13 Aug 2015 20:28:41 +0000 (UTC)
X-IronPort-AV: E=Sophos;i="5.15,672,1432612800"; 
   d="scan'208,217";a="223220655"
Received: from vtunpep1c.jacksonnational.com (HELO DC01PXMBP003.jacksonnational.com) ([10.12.111.24])
  by mgap1c-mgmt.jacksonnational.com with ESMTP; 13 Aug 2015 16:28:41 -0400
Received: from DC01PXMBP003.jacksonnational.com (10.8.105.32) by
 DC01PXMBP003.jacksonnational.com (10.8.105.32) with Microsoft SMTP Server
 (TLS) id 15.0.1044.25; Thu, 13 Aug 2015 16:28:40 -0400
Received: from DC01PXMBP003.jacksonnational.com ([10.8.105.32]) by
 DC01PXMBP003.jacksonnational.com ([10.8.105.32]) with mapi id 15.00.1044.021;
 Thu, 13 Aug 2015 16:28:40 -0400
From: "Houser, Rick" <rick.houser@jackson.com>
To: httpd <dev@httpd.apache.org>
Subject: HSTS Header Duplication
Thread-Topic: HSTS Header Duplication
Thread-Index: AdDWBe57voXo4adLSw2JI6wHhgPcYg==
Date: Thu, 13 Aug 2015 20:28:40 +0000
Message-ID: <da8ead4415cd477bb3fdac3d7756b946@DC01PXMBP003.jacksonnational.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-ms-exchange-transport-fromentityheader: Hosted
x-originating-ip: [10.6.30.191]
x-tm-as-product-ver: SMEX-11.0.0.1251-8.000.1202-21744.002
x-tm-as-result: No--42.495400-0.000000-31
x-tm-as-user-approved-sender: Yes
x-tm-as-user-blocked-sender: No
Content-Type: multipart/alternative;
	boundary="_000_da8ead4415cd477bb3fdac3d7756b946DC01PXMBP003jacksonnati_"
MIME-Version: 1.0
X-DLP-JNL: Passed

--_000_da8ead4415cd477bb3fdac3d7756b946DC01PXMBP003jacksonnati_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Some time back, I turned on HSTS for our sites with something like this:

Header always set Strict-Transport-Security "max-age=3D#######"

As near as I could tell, everything was working correctly (2.4.12 presently=
 - will be on 2.4.16 shortly).  However, one of our development teams recen=
tly added a similar HSTS directive into a backend application (which happen=
s to be accessed via mod_cluster).  Now, browsers are seeing two different =
copies of this header on the response (first my values, then the backend va=
lues I intended to override).  I've verified that direct backend applicatio=
n connections only return one copy of that header.

I went back and took a closer look at that various documentation/tutorials =
scattered around the web for implementing HSTS, and it all seems to indicat=
e "Header always set" for this purpose.  I also read the mod_headers docume=
ntation several times, but I don't see anything that provides clarity in th=
is case

Based on our observations, I suspect that we are looking at a bug of some k=
ind here: either a traditional error in the code or a necessary documentati=
on fix.  Would someone please confirm how "Header always set" feature is in=
tended to function (specifically in the presence of an existing header) so =
I know which direction to research and ultimately submit a patch?

Thank you,


Rick Houser


--_000_da8ead4415cd477bb3fdac3d7756b946DC01PXMBP003jacksonnati_
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" xmlns:o=3D"urn:schemas-micr=
osoft-com:office:office" xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" xmlns=3D"http:=
//www.w3.org/TR/REC-html40">
<head>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dus-ascii"=
>
<meta name=3D"Generator" content=3D"Microsoft Word 15 (filtered medium)">
<style><!--
/* Font Definitions */
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:#954F72;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri",sans-serif;
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri",sans-serif;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]-->
</head>
<body lang=3D"EN-US" link=3D"#0563C1" vlink=3D"#954F72">
<div class=3D"WordSection1">
<p class=3D"MsoNormal">Some time back, I turned on HSTS for our sites with =
something like this:<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal" style=3D"text-indent:.5in">Header always set Strict-=
Transport-Security &#8220;max-age=3D#######&#8221;<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">As near as I could tell, everything was working corr=
ectly (2.4.12 presently &#8211; will be on 2.4.16 shortly).&nbsp; However, =
one of our development teams recently added a similar HSTS directive into a=
 backend application (which happens to be accessed
 via mod_cluster).&nbsp; Now, browsers are seeing two different copies of t=
his header on the response (first my values, then the backend values I inte=
nded to override).&nbsp; I&#8217;ve verified that direct backend applicatio=
n connections only return one copy of that header.<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">I went back and took a closer look at that various d=
ocumentation/tutorials scattered around the web for implementing HSTS, and =
it all seems to indicate &#8220;Header always set&#8221; for this purpose.&=
nbsp; I also read the mod_headers documentation several
 times, but I don&#8217;t see anything that provides clarity in this case<o=
:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">Based on our observations, I suspect that we are loo=
king at a bug of some kind here: either a traditional error in the code or =
a necessary documentation fix.&nbsp; Would someone please confirm how &#822=
0;Header always set&#8221; feature is intended to function
 (specifically in the presence of an existing header) so I know which direc=
tion to research and ultimately submit a patch?<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">Thank you,<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">Rick Houser<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
</div>
</body>
</html>

--_000_da8ead4415cd477bb3fdac3d7756b946DC01PXMBP003jacksonnati_--

From dev-return-83471-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 13 22:29:26 2015
Return-Path: <dev-return-83471-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F3F0D18A29
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 13 Aug 2015 22:29:25 +0000 (UTC)
Received: (qmail 4886 invoked by uid 500); 13 Aug 2015 22:29:20 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 4806 invoked by uid 500); 13 Aug 2015 22:29:20 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 4796 invoked by uid 99); 13 Aug 2015 22:29:20 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Aug 2015 22:29:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 202AE187DAA
	for <dev@httpd.apache.org>; Thu, 13 Aug 2015 22:29:20 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.364
X-Spam-Level: *
X-Spam-Status: No, score=1.364 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RDNS_DYNAMIC=0.363,
	URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id oUUJVFc5ivcy for <dev@httpd.apache.org>;
	Thu, 13 Aug 2015 22:29:11 +0000 (UTC)
Received: from gungnir.webthing.com (209-20-83-52.slicehost.net [209.20.83.52])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTP id 8299A2055B
	for <dev@httpd.apache.org>; Thu, 13 Aug 2015 22:29:11 +0000 (UTC)
Received: from baldur (cpc14-newt30-2-0-cust22.newt.cable.virginm.net [92.232.45.23])
	by gungnir.webthing.com (Postfix) with ESMTPSA id DD08C8022F
	for <dev@httpd.apache.org>; Thu, 13 Aug 2015 22:29:04 +0000 (UTC)
Date: Thu, 13 Aug 2015 23:28:56 +0100
From: Nick Kew <nick@webthing.com>
To: dev@httpd.apache.org
Subject: Re: HSTS Header Duplication
Message-ID: <20150813232856.01112b28@baldur>
In-Reply-To: <da8ead4415cd477bb3fdac3d7756b946@DC01PXMBP003.jacksonnational.com>
References: <da8ead4415cd477bb3fdac3d7756b946@DC01PXMBP003.jacksonnational.com>
X-Mailer: Claws Mail 3.7.4 (GTK+ 2.20.1; i486-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

On Thu, 13 Aug 2015 20:28:40 +0000
"Houser, Rick" <rick.houser@jackson.com> wrote:

> Some time back, I turned on HSTS for our sites with something like this:
> 
> Header always set Strict-Transport-Security "max-age=#######"

I think you're misunderstanding mod_headers and the headers structure.
In general terms, HTTP permits duplicate headers, which may have
different values.  For example,.multiple cookies.  So mod_headers
lets you set them, regardless of whether they're already set.

If that's not what you want, you can of course configure mod_headers
to unset an existing header before setting a new one.  Or other
configuration variants.

-- 
Nick Kew

From dev-return-83472-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 13 22:46:06 2015
Return-Path: <dev-return-83472-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4296518ACB
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 13 Aug 2015 22:46:06 +0000 (UTC)
Received: (qmail 30053 invoked by uid 500); 13 Aug 2015 22:46:05 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 29980 invoked by uid 500); 13 Aug 2015 22:46:05 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 29968 invoked by uid 99); 13 Aug 2015 22:46:05 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Aug 2015 22:46:05 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 6B1BD19EC63
	for <dev@httpd.apache.org>; Thu, 13 Aug 2015 22:46:05 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id KRoteebBQ6A3 for <dev@httpd.apache.org>;
	Thu, 13 Aug 2015 22:45:55 +0000 (UTC)
Received: from mail-yk0-f171.google.com (mail-yk0-f171.google.com [209.85.160.171])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 231FB42B88
	for <dev@httpd.apache.org>; Thu, 13 Aug 2015 22:45:55 +0000 (UTC)
Received: by ykfw73 with SMTP id w73so1279743ykf.3
        for <dev@httpd.apache.org>; Thu, 13 Aug 2015 15:45:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=3/TrtQFD2iy96jRktfS5tE4D7wMtUUALnu7Q1jwO77o=;
        b=gE1NHQJkWELYXTL1aZwLhR+DbzPn41fplmNIKW/HcJH5pfXI4P3p7ntLBWjiDjcCxa
         KWmIAqZHEihw+JszmEb9byvkLMVZbtUXzoQlnZ+83rbFpnTKxQKwfoOXz3Gsc9XtNj3R
         dS3EOOoMWAFAyZ1RqZrEn9c+D0avkVncrwvomaxauMzGi52LqlOUQo/psIlQDOQa5ZJ+
         znP1jpirG5a6ONTH3H/ud25L/cckDHpdxtj35Ymq20d7VmRfh1btWDOxmA2ctjL85zqw
         db4n+f4hDQnvtKlapHkqGDiOFZyT1tBkDpsknqzBcjhm1TEtgtTIHy6H6KaDQ5DJLBnk
         eCQA==
MIME-Version: 1.0
X-Received: by 10.170.143.10 with SMTP id k10mr42557810ykc.55.1439505954926;
 Thu, 13 Aug 2015 15:45:54 -0700 (PDT)
Received: by 10.37.207.66 with HTTP; Thu, 13 Aug 2015 15:45:54 -0700 (PDT)
In-Reply-To: <20150813232856.01112b28@baldur>
References: <da8ead4415cd477bb3fdac3d7756b946@DC01PXMBP003.jacksonnational.com>
	<20150813232856.01112b28@baldur>
Date: Thu, 13 Aug 2015 18:45:54 -0400
Message-ID: <CALK=YjO3STZOH0xw37sf2cK9Ey3ukGrwn6YEiphN72XgRX0u=A@mail.gmail.com>
Subject: Re: HSTS Header Duplication
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Thu, Aug 13, 2015 at 6:28 PM, Nick Kew <nick@webthing.com> wrote:
> On Thu, 13 Aug 2015 20:28:40 +0000
> "Houser, Rick" <rick.houser@jackson.com> wrote:
>
>> Some time back, I turned on HSTS for our sites with something like this:
>>
>> Header always set Strict-Transport-Security "max-age=#######"
>
> I think you're misunderstanding mod_headers and the headers structure.
> In general terms, HTTP permits duplicate headers, which may have
> different values.  For example,.multiple cookies.  So mod_headers
> lets you set them, regardless of whether they're already set.
>
> If that's not what you want, you can of course configure mod_headers
> to unset an existing header before setting a new one.  Or other
> configuration variants.

mod_headers already has 'set' vs 'add' so I think his expectation is
OK.  My first guess would be some issue with headers_out vs
err_headers_out ?

From dev-return-83473-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 14 10:06:30 2015
Return-Path: <dev-return-83473-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7BE8518E23
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 14 Aug 2015 10:06:30 +0000 (UTC)
Received: (qmail 13496 invoked by uid 500); 14 Aug 2015 10:06:30 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 13419 invoked by uid 500); 14 Aug 2015 10:06:30 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 13409 invoked by uid 99); 14 Aug 2015 10:06:30 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Aug 2015 10:06:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 980E9C131E
	for <dev@httpd.apache.org>; Fri, 14 Aug 2015 10:06:29 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.007
X-Spam-Level:
X-Spam-Status: No, score=-0.007 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id fuA6BhWbAnWc for <dev@httpd.apache.org>;
	Fri, 14 Aug 2015 10:06:28 +0000 (UTC)
Received: from mailserver.kippdata.de (capsella.kippdata.de [195.227.30.149])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTP id BFB4442B2B
	for <dev@httpd.apache.org>; Fri, 14 Aug 2015 10:06:27 +0000 (UTC)
Received: from [172.28.1.110] ([192.168.2.104])
	by mailserver.kippdata.de (8.13.5/8.13.5) with ESMTP id t7EA6LqF002036
	for <dev@httpd.apache.org>; Fri, 14 Aug 2015 12:06:21 +0200 (CEST)
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
From: Rainer Jung <rainer.jung@kippdata.de>
Subject: BalancerInherit, ProxyPassInherit: docs and code inconsistent
Message-ID: <55CDBD9A.2070709@kippdata.de>
Date: Fri, 14 Aug 2015 12:06:18 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.1.0
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

Docs say: "Disabling ProxyPassInherit also disables BalancerInherit."

Code (2.4) says:

if (ps->inherit || ps->ppinherit) {
     ps->workers = apr_array_append(p, base->workers, overrides->workers);
     ps->balancers = apr_array_append(p, base->balancers, 
overrides->balancers);
}

and both inherit flags are set by default. So in order to disable worker 
inheritance, you currently have to set both

ProxyPassInherit Off
BalancerInherit Off

Only setting "BalancerInherit Off" or setting "ProxyPassInherit Off" 
doesn't turn inheritance off.

I would have expected:

ProxyPassInherit Off => disables ProxyPass inheritance (works)
BalancerInherit Off  => disables Balancer/Worker inheritance (does not work)

Any side effects from one to the other are IMHO questionable. There are 
cases where both directions make sense but also where you don't want it. 
But we have documented the side effect from ProxyPassInherit to 
BalancerInherit so probably should stick to it (although it had not 
worked). I would prefer that one could overwrite "Disabling 
ProxyPassInherit also disables BalancerInherit." by explicitly setting 
"BalancerInherit On".

That would mean changing code to

if (ps->inherit && (ps->ppinherit || ps->inherit_set)) {
     ps->workers = apr_array_append(p, base->workers, overrides->workers);
     ps->balancers = apr_array_append(p, base->balancers, 
overrides->balancers);
}

so we inherit workers only if BalancerInherit is On and either 
ProxyPassInherit is On or BalancerInherit was set to On explicitly.

Any comments? Otherwise I would go ahead and apply for trunk and propose 
for backport.

Regards,

Rainer

From dev-return-83474-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 14 14:12:44 2015
Return-Path: <dev-return-83474-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0CC54185D2
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 14 Aug 2015 14:12:44 +0000 (UTC)
Received: (qmail 40999 invoked by uid 500); 14 Aug 2015 14:12:43 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 40914 invoked by uid 500); 14 Aug 2015 14:12:43 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 40900 invoked by uid 99); 14 Aug 2015 14:12:43 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Aug 2015 14:12:43 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 9D4C9DDD75
	for <dev@httpd.apache.org>; Fri, 14 Aug 2015 14:12:42 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -1
X-Spam-Level:
X-Spam-Status: No, score=-1 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-1] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id Ri9PDRWCT5Ag for <dev@httpd.apache.org>;
	Fri, 14 Aug 2015 14:12:38 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 5798E210B6
	for <dev@httpd.apache.org>; Fri, 14 Aug 2015 14:12:38 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id E87BD15A00A5
	for <dev@httpd.apache.org>; Fri, 14 Aug 2015 16:12:29 +0200 (CEST)
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Subject: directive elimination
Message-Id: <780F48F6-A5B8-4A05-8F4C-68AB2489D3F0@greenbytes.de>
Date: Fri, 14 Aug 2015 16:12:29 +0200
To: dev@httpd.apache.org
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
X-Mailer: Apple Mail (2.2104)

Hi,

I am currently eliminating some mod_h2 directives which are no longer =
needed or wanted. If your want to regression test the trunk, please also =
update the test framework. Thanks.

//Stefan

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83475-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 14 15:29:29 2015
Return-Path: <dev-return-83475-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9311C1891A
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 14 Aug 2015 15:29:29 +0000 (UTC)
Received: (qmail 76402 invoked by uid 500); 14 Aug 2015 15:29:28 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 76339 invoked by uid 500); 14 Aug 2015 15:29:28 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 76329 invoked by uid 99); 14 Aug 2015 15:29:28 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Aug 2015 15:29:28 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 4352519ADCE
	for <dev@httpd.apache.org>; Fri, 14 Aug 2015 15:29:28 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id gnboqxJVwurO for <dev@httpd.apache.org>;
	Fri, 14 Aug 2015 15:29:19 +0000 (UTC)
Received: from resqmta-ch2-03v.sys.comcast.net (resqmta-ch2-03v.sys.comcast.net [69.252.207.35])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 564972055B
	for <dev@httpd.apache.org>; Fri, 14 Aug 2015 15:29:19 +0000 (UTC)
Received: from resomta-ch2-14v.sys.comcast.net ([69.252.207.110])
	by resqmta-ch2-03v.sys.comcast.net with comcast
	id 4fUw1r0072PT3Qt01fVCSz; Fri, 14 Aug 2015 15:29:12 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-14v.sys.comcast.net with comcast
	id 4fVC1r0042U0RYt01fVCXe; Fri, 14 Aug 2015 15:29:12 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: BalancerInherit, ProxyPassInherit: docs and code inconsistent
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <55CDBD9A.2070709@kippdata.de>
Date: Fri, 14 Aug 2015 11:29:11 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <3278E2FF-0383-4681-A7D8-24FDD8B4373F@jaguNET.com>
References: <55CDBD9A.2070709@kippdata.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1439566152;
	bh=RLFdem8n/mZ1DIuox1Q1ymRyfpZZAxUGuUz4GAcSB5A=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=U0Hx+n1Ka2kYlePZkErw+TZt9XQHPIdu/PV799prc36AUFylvUpUP7a4XLOogxRQR
	 6AUN70eAyk8gDra6h7mCf+D4IKRGUUi3veIZ7+XJaQlCOq159EtGLL7eGgjd0BS73V
	 9+6o5Ruva0K1a26nga9STx098wvhvR6dlBDPv1pEJemt6t7hdN6Woimw+9mDFRg6of
	 V1k7A6808lS/WFlTl4Ab5VXybBqAge6iR2NXWeLNeskvgFPdM1v8JBwKfCZ2FQ1YL9
	 XwNlzFNiyf0kFpDaGxQt0dAj/S8GLVL/Oga/SYPS4nkgM04jOj15ZhWYGxrcN97VUH
	 kfoNpScZcjcdQ==

Let me check my notes on regarding the issue associated with
that implementation... as well as what the "correct" behavior
should be ;)

> On Aug 14, 2015, at 6:06 AM, Rainer Jung <rainer.jung@kippdata.de> =
wrote:
>=20
> Docs say: "Disabling ProxyPassInherit also disables BalancerInherit."
>=20
> Code (2.4) says:
>=20
> if (ps->inherit || ps->ppinherit) {
>    ps->workers =3D apr_array_append(p, base->workers, =
overrides->workers);
>    ps->balancers =3D apr_array_append(p, base->balancers, =
overrides->balancers);
> }
>=20
> and both inherit flags are set by default. So in order to disable =
worker inheritance, you currently have to set both
>=20
> ProxyPassInherit Off
> BalancerInherit Off
>=20
> Only setting "BalancerInherit Off" or setting "ProxyPassInherit Off" =
doesn't turn inheritance off.
>=20
> I would have expected:
>=20
> ProxyPassInherit Off =3D> disables ProxyPass inheritance (works)
> BalancerInherit Off  =3D> disables Balancer/Worker inheritance (does =
not work)
>=20
> Any side effects from one to the other are IMHO questionable. There =
are cases where both directions make sense but also where you don't want =
it. But we have documented the side effect from ProxyPassInherit to =
BalancerInherit so probably should stick to it (although it had not =
worked). I would prefer that one could overwrite "Disabling =
ProxyPassInherit also disables BalancerInherit." by explicitly setting =
"BalancerInherit On".
>=20
> That would mean changing code to
>=20
> if (ps->inherit && (ps->ppinherit || ps->inherit_set)) {
>    ps->workers =3D apr_array_append(p, base->workers, =
overrides->workers);
>    ps->balancers =3D apr_array_append(p, base->balancers, =
overrides->balancers);
> }
>=20
> so we inherit workers only if BalancerInherit is On and either =
ProxyPassInherit is On or BalancerInherit was set to On explicitly.
>=20
> Any comments? Otherwise I would go ahead and apply for trunk and =
propose for backport.
>=20
> Regards,
>=20
> Rainer


From dev-return-83476-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 14 18:01:23 2015
Return-Path: <dev-return-83476-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8864B1806C
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 14 Aug 2015 18:01:23 +0000 (UTC)
Received: (qmail 90709 invoked by uid 500); 14 Aug 2015 18:01:22 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 90642 invoked by uid 500); 14 Aug 2015 18:01:22 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 90632 invoked by uid 99); 14 Aug 2015 18:01:22 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Aug 2015 18:01:22 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 44EB11AA12D
	for <dev@httpd.apache.org>; Fri, 14 Aug 2015 18:01:22 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id ZniFWJAb2PC4 for <dev@httpd.apache.org>;
	Fri, 14 Aug 2015 18:01:21 +0000 (UTC)
Received: from mail-yk0-f180.google.com (mail-yk0-f180.google.com [209.85.160.180])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id B601820786
	for <dev@httpd.apache.org>; Fri, 14 Aug 2015 18:01:20 +0000 (UTC)
Received: by ykll84 with SMTP id l84so12185947ykl.0
        for <dev@httpd.apache.org>; Fri, 14 Aug 2015 11:01:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=bBrg3fQ+7dVpNi6GOCDX5E8Wgxp93wz1M0pXBHnIESw=;
        b=jpXxetfdHnqs5gKU6pghIqAFoZf9sua4a5yoxnNh0soowUGkdF6aAdtCbu/4fh87g3
         vT/laKwUt1lgHiMbY65MHsSChE4Vq23efgHrhPQDWU1lu2k+1k7xrpsOyh8DjmxymKtQ
         WTbQ50EKIeWv8f/EFiQBvClMjuy0bqhTuab143dhH0dXZTzQYkoC7oUfhbqmER8fLCZj
         +OuOWKpfB5vDkFIUk2/WdWjrsptlbxm4/VqykaiwU+N61zT0FSbskHcrlDa8TRJXhKQV
         I/xTjUB9grIMWAa2sMKpBs9QnnGZ+S1aLkKU1aH+HWD850ZEez14wkuudXC1g0r2GqNh
         R31g==
MIME-Version: 1.0
X-Received: by 10.13.225.2 with SMTP id k2mr20028305ywe.122.1439575279635;
 Fri, 14 Aug 2015 11:01:19 -0700 (PDT)
Received: by 10.37.207.66 with HTTP; Fri, 14 Aug 2015 11:01:19 -0700 (PDT)
In-Reply-To: <552E8BA7.2000807@velox.ch>
References: <20150408073339.A26E2AC0236@hades.apache.org>
	<552C2181.3070303@apache.org>
	<552C9D9F.2090209@velox.ch>
	<552E8BA7.2000807@velox.ch>
Date: Fri, 14 Aug 2015 14:01:19 -0400
Message-ID: <CALK=YjNRdXv9Zbn0tqZ3N5eNYGZrU_zxGuWaDDg2LvmKCM9TUg@mail.gmail.com>
Subject: Re: svn commit: r1672014 - in /httpd/httpd/trunk: CHANGES server/config.c
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Wed, Apr 15, 2015 at 12:02 PM, Kaspar Brand <httpd-dev.2014@velox.ch> wrote:
> The other option to fix the problem which originally triggered this
> investigation would be to simply replace "cmd->server" in
> ssl_engine_config.c:836 with "NULL", though it would only fix this
> particular case, and not help with other places with the same underlying
> problem.

What are the different scenarios that are bad in 2.4? I stumbled on
this thread on a search about a related topic.

I think this is the immediate one, but I really don't like the idea of
using the default loglevel there:

LogLevel crit
<virtualhost *:443>
  SSLSomethingThatWouldWarn
  LogLevel warn
</virtualhost>

What are the other variants?

I know prior to 2.4, the following scenario was broken:

LogLevel crit
<virtualhost *:443>
  SSLSomethingThatWouldWarn
</virtualhost>
...
LogLevel warn


-- 
Eric Covener
covener@gmail.com

From dev-return-83477-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Aug 15 22:19:24 2015
Return-Path: <dev-return-83477-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DCE351732E
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 15 Aug 2015 22:19:23 +0000 (UTC)
Received: (qmail 66149 invoked by uid 500); 15 Aug 2015 22:19:23 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 66079 invoked by uid 500); 15 Aug 2015 22:19:23 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 66069 invoked by uid 99); 15 Aug 2015 22:19:23 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Aug 2015 22:19:23 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id C116BDE12F
	for <dev@httpd.apache.org>; Sat, 15 Aug 2015 22:19:22 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.011
X-Spam-Level:
X-Spam-Status: No, score=-0.011 tagged_above=-999 required=6.31
	tests=[HEADER_FROM_DIFFERENT_DOMAINS=0.001, SPF_HELO_PASS=-0.001,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id uKRZ49jd8qEl for <dev@httpd.apache.org>;
	Sat, 15 Aug 2015 22:19:22 +0000 (UTC)
Received: from plane.gmane.org (plane.gmane.org [80.91.229.3])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id C539C2055B
	for <dev@httpd.apache.org>; Sat, 15 Aug 2015 22:19:20 +0000 (UTC)
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <apache-dev@m.gmane.org>)
	id 1ZQjnD-0007aW-1b
	for dev@httpd.apache.org; Sun, 16 Aug 2015 00:19:11 +0200
Received: from aorleans-552-1-107-64.w92-140.abo.wanadoo.fr ([92.140.234.64])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Sun, 16 Aug 2015 00:19:11 +0200
Received: from christophe.jaillet by aorleans-552-1-107-64.w92-140.abo.wanadoo.fr with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Sun, 16 Aug 2015 00:19:11 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: dev@httpd.apache.org
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Subject: Erroneous comment in command structure declaration
Date: Sun, 16 Aug 2015 00:19:04 +0200
Lines: 15
Message-ID: <mqodso$8mh$1@ger.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: aorleans-552-1-107-64.w92-140.abo.wanadoo.fr
X-Mozilla-News-Host: news://news.gmane.org:119
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.1.0
X-Antivirus: avast! (VPS 150815-2, 15/08/2015), Outbound message
X-Antivirus-Status: Clean

Hi,

in many modules, the module declaration structure has the following 
comment for the command structure:
     XXX_cmds,                /* command apr_table_t */
(86 occurrences in trunk)

but this is just a null-terminated array and not an apr_table_t, right?


Using "table of config file commands" (as generated by apxs) or "command 
table" (as seen sometimes) sounds more appropriate.

Best regards,
CJ


From dev-return-83478-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Aug 16 07:15:18 2015
Return-Path: <dev-return-83478-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 53E8517969
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 16 Aug 2015 07:15:18 +0000 (UTC)
Received: (qmail 30275 invoked by uid 500); 16 Aug 2015 07:15:17 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 30201 invoked by uid 500); 16 Aug 2015 07:15:17 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 30192 invoked by uid 99); 16 Aug 2015 07:15:17 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Aug 2015 07:15:17 +0000
Received: from asf-bz1-us-mid.priv.apache.org (nat1-us-mid.apache.org [23.253.172.122])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPS id E7D1A1A04B0
	for <dev@httpd.apache.org>; Sun, 16 Aug 2015 07:15:16 +0000 (UTC)
Received: by asf-bz1-us-mid.priv.apache.org (ASF Mail Server at asf-bz1-us-mid.priv.apache.org, from userid 0)
	id 52F3E60018; Sun, 16 Aug 2015 07:15:16 +0000 (UTC)
From: bugzilla@apache.org
To: dev@httpd.apache.org
Subject: Bug report for Apache httpd-2 [2015/08/16]
Message-Id: <20150816071516.52F3E60018@asf-bz1-us-mid.priv.apache.org>
Date: Sun, 16 Aug 2015 07:15:05 +0000 (UTC)

+---------------------------------------------------------------------------+
| Bugzilla Bug ID                                                           |
|     +---------------------------------------------------------------------+
|     | Status: UNC=Unconfirmed NEW=New         ASS=Assigned                |
|     |         OPN=Reopened    VER=Verified    (Skipped Closed/Resolved)   |
|     |   +-----------------------------------------------------------------+
|     |   | Severity: BLK=Blocker CRI=Critical  REG=Regression  MAJ=Major   |
|     |   |           MIN=Minor   NOR=Normal    ENH=Enhancement TRV=Trivial |
|     |   |   +-------------------------------------------------------------+
|     |   |   | Date Posted                                                 |
|     |   |   |          +--------------------------------------------------+
|     |   |   |          | Description                                      |
|     |   |   |          |                                                  |
| 7483|Ass|Enh|2002-03-26|Add FileAction directive to assign a cgi interpret|
| 8713|Inf|Min|2002-05-01|No Errorlog on PROPFIND/Depth:Infinity            |
| 8867|Opn|Cri|2002-05-07|exports.c generation fails when using a symlink to|
|10747|New|Maj|2002-07-12|ftp SIZE command and 'smart' ftp servers results i|
|11294|New|Enh|2002-07-30|desired vhost_alias option                        |
|11580|Opn|Enh|2002-08-09|generate Content-Location headers                 |
|12033|Opn|Nor|2002-08-26|Graceful restart immediately result in [warn] long|
|12680|New|Enh|2002-09-16|Digest authentication with integrity protection   |
|13599|Inf|Nor|2002-10-14|autoindex formating broken for multibyte sequences|
|13661|Ass|Enh|2002-10-15|Apache cannot not handle dynamic IP reallocation  |
|14104|Opn|Enh|2002-10-30|not documented: must restart server to load new CR|
|14496|New|Enh|2002-11-13|Cannot upgrade any version on Windows. Must uninst|
|14922|Inf|Enh|2002-11-28|<target> is currently hardcoded to 'apache2'      |
|15719|Inf|Nor|2002-12-30|WebDAV MOVE to destination URI which is content-ne|
|16761|Inf|Nor|2003-02-04|CustomLog with pipe spawns process during config  |
|16802|New|Enh|2003-02-05|Additional AllowOverride directive "Restrict"     |
|16811|Ass|Maj|2003-02-05|mod_autoindex always return webpages in UTF-8.    |
|17107|New|Min|2003-02-16|Windows should not install printenv               |
|17114|New|Enh|2003-02-17|Please add strip and install-strip targets to Make|
|17244|Ass|Nor|2003-02-20|./configure --help gives false information regardi|
|17497|Opn|Nor|2003-02-27|mod_mime_magic generates incorrect response header|
|18325|New|Enh|2003-03-25|PAM support for suEXEC                            |
|18334|Inf|Cri|2003-03-25|Server crashes when authenticating users against L|
|18497|New|Min|2003-03-30|configure --help gives wrong default for sysconfdi|
|19043|New|Min|2003-04-15|Interesting interaction between cern_meta module a|
|19670|New|Enh|2003-05-05|content type header supplied upon PUT is thrown aw|
|20036|Ass|Nor|2003-05-19|Trailing Dots stripped from PATH_INFO environment |
|21253|New|Nor|2003-07-01|Mime magic doesn't continue if type is specifed fo|
|21260|New|Nor|2003-07-02|CacheMaxExpire directive not enforced !           |
|21533|Ass|Cri|2003-07-11|Multiple levels of htacces files can cause mod_aut|
|22138|Inf|Cri|2003-08-05|Webdav is not preccessing special chars right.    |
|22237|New|Enh|2003-08-08|option to disable ServerSignature on index pages  |
|22484|Opn|Maj|2003-08-16|semaphore problem takes httpd down                |
|22686|Opn|Nor|2003-08-25|ab: apr_poll: The timeout specified has expired (7|
|22898|Opn|Nor|2003-09-02|nph scripts with two HTTP header                  |
|23167|Inf|Cri|2003-09-14|--enable-layout never goes to apr apr-util        |
|23181|New|Nor|2003-09-15|Status 304 (Not modified) and chunking leads to an|
|23238|New|Cri|2003-09-18|non-async-signal-safe operations from signal handl|
|23330|New|Enh|2003-09-22|Enhance ApacheMonitor to view and control Tomcat s|
|23911|Opn|Cri|2003-10-18|CGI processes left defunct/zombie under 2.0.54    |
|24031|New|Enh|2003-10-23|Passphrase protected private key in SSLProxyMachin|
|24095|Opn|Cri|2003-10-24|ERROR "Parent: child process exited with status 32|
|24437|Opn|Nor|2003-11-05|mod_auth_ldap doubly-escapes backslash (\) charact|
|24890|Opn|Nor|2003-11-21|Apache config parser should not be local aware ( g|
|25014|New|Enh|2003-11-26|A flexible interface for mod_log_config           |
|25201|New|Enh|2003-12-04|Provide Cache Purge operation                     |
|25240|Inf|Enh|2003-12-05|SSL Library Error: 336105671 logged as information|
|25435|New|Enh|2003-12-11|sethandler and directoryindex not playing nice    |
|25469|Opn|Enh|2003-12-12|create AuthRoot for defining paths to auth files  |
|25484|Ass|Nor|2003-12-12|Non-service Apache cannot be stopped in WinXP     |
|25543|Inf|Nor|2003-12-15|mod_proxy_ajp overwrites existing response headers|
|25667|New|Nor|2003-12-19|Memory leak in function ssl_scache_dbm_retrieve().|
|25863|New|Enh|2004-01-02|new per-host initialization hooks                 |
|26005|New|Nor|2004-01-08|SERVER_NAME incorrect when using IPv6 address in U|
|26142|New|Maj|2004-01-14|EnableSendFile Off for Windows XP Home            |
|26153|Opn|Cri|2004-01-15|Apache cygwin directory traversal vulnerability   |
|26368|New|Min|2004-01-23|File extensions in AddDescription treated as part |
|26446|New|Nor|2004-01-26|flush buckets followed by eos bucket emit multiple|
|26478|New|Enh|2004-01-28|mod_dav does not expose a method for setting the D|
|26835|New|Enh|2004-02-10|[PATCH] Mod_status Readability & Browser Side Tabl|
|27257|Ass|Enh|2004-02-26|rotatelogs with getopt and setuid                 |
|27578|New|Enh|2004-03-10|made getlastmodified a writable property          |
|27715|Ass|Enh|2004-03-16|Client sending misformed Range "bytes = 0-100" ins|
|27791|Inf|Nor|2004-03-18|mod_cache doesn't re-cache expired content        |
|27835|New|Enh|2004-03-22|When proxying FTP, all errors turns into 404      |
|27869|New|Enh|2004-03-23|stopping and starting httpd again immediately caus|
|28854|Inf|Nor|2004-05-09|Build fails with missing library call on Solaris i|
|28903|New|Enh|2004-05-11|Hooks to add environment variables to CGI and othe|
|29090|Ass|Enh|2004-05-19|MultiviewsMatch NegotiatedOnly extensions not resp|
|29165|New|Nor|2004-05-24|Parent directory icon not correct                 |
|29446|New|Enh|2004-06-08|want directive for setting content negotiation qua|
|29449|New|Enh|2004-06-09|Limit length of specified fields in LogFormat     |
|29450|New|Enh|2004-06-09|Improved logging for mod_access                   |
|29510|Ass|Enh|2004-06-10|ab does not support multiple cookies              |
|29644|Ver|Nor|2004-06-17|mod_proxy keeps downloading even after the client |
|29755|Opn|Nor|2004-06-23|mod_usertrack should use err_headers_out          |
|29822|New|Enh|2004-06-26|implement FTP 'PUT' support in proxy_ftp.c        |
|29941|Ass|Enh|2004-07-06|log files are not tested for availability on confi|
|30259|Ass|Enh|2004-07-22|When proxy connects to backend, a DNS lookup is do|
|30505|Ass|Enh|2004-08-05|Apache uses 'Error', and not lower level event typ|
|30730|Inf|Nor|2004-08-18|[PatchAvailable] mod_actions and Server-Status    |
|30865|Inf|Maj|2004-08-26|mod_disk_cache leaves many temporary files slowing|
|31302|Opn|Cri|2004-09-19|suexec doesn't execute commands if they're not in |
|31311|New|Enh|2004-09-20|Remote user not logged in reverse proxy scenario  |
|31352|Ass|Enh|2004-09-21|RFE, Bind to LDAP server with browser supplier use|
|31418|Opn|Nor|2004-09-25|SSLUserName is not usable by other modules        |
|31484|New|Maj|2004-09-30|Custom environment variables not passed to content|
|31490|New|Nor|2004-09-30|mod_proxy_ftp renders filenames with spaces badly |
|31565|New|Enh|2004-10-06|Won't start correctly if parent closed stdin, stdo|
|31679|New|Enh|2004-10-12|If the argument of a CGI has two or more consecuti|
|31709|Inf|Nor|2004-10-13|Raises an error on SSL name based virtualhosts (wi|
|31712|New|Enh|2004-10-14|config_file is NULL at ap_walk_config etc         |
|31952|New|Enh|2004-10-29|mod_proxy and RealPlayer: audio content streaming |
|32051|Opn|Nor|2004-11-04|mod_example is not thread safe                    |
|32328|Opn|Enh|2004-11-19|Make mod_rewrite escaping optional / expose intern|
|32346|New|Enh|2004-11-22|mod_include/include virtual checks content-type is|
|32524|New|Enh|2004-12-03|ab: add an option to specify a source address     |
|32703|Inf|Enh|2004-12-14|Cannot determine that Apache is frozen if /var fil|
|32750|Ass|Maj|2004-12-17|mod_proxy + Win32DisableAcceptEx = memory leak    |
|32877|New|Enh|2004-12-29|wrong utf-8 encoding/escaping in a href for umlaut|
|33084|New|Enh|2005-01-13|Optional certificate validity period check on SSLV|
|33089|New|Nor|2005-01-13|mod_include: Options +Includes (or IncludesNoExec)|
|33207|New|Nor|2005-01-23|Results of my suexec.c code audit                 |
|33215|New|Nor|2005-01-24|Cygwin build/install.sh fix (OSTYPE => ext=.exe)  |
|33512|Inf|Maj|2005-02-11|mod_mem_cache and possibly mod_deflate            |
|33627|New|Nor|2005-02-18|Bite-sized changes making progress towards compila|
|33685|New|Maj|2005-02-22|Unable to install in the path containing non engli|
|34270|Inf|Nor|2005-04-01|Large POSTs over SSL from Internet Explorer do not|
|34375|New|Enh|2005-04-08|enhancements for mod_include                      |
|34377|New|Enh|2005-04-08|Allow the overriding of 401 Unauthorized returns f|
|34405|New|Enh|2005-04-11|adds DOCUMENT_NAME_WITHOUT_SUFFIX to mod_include  |
|34508|New|Nor|2005-04-19|Randomly slow graceful restart, not accepting new |
|34519|New|Enh|2005-04-19|Directory index should emit valid XHTML           |
|35049|New|Nor|2005-05-24|let AddDefaultCharset apply to text/css and applic|
|35077|New|Nor|2005-05-26|mod_dav passes incorrect paths with LocationMatch |
|35083|Inf|Enh|2005-05-26|Certificate validation problems trapping          |
|35098|Ver|Maj|2005-05-27|Install fails using --prefix                      |
|35154|New|Nor|2005-06-01|Support for NID_serialNumber, etc. in SSLUserName |
|35245|New|Nor|2005-06-06|cache ignores max-age cache-directive in requests |
|35250|New|Enh|2005-06-07|[PatchAvailable] add logging to mod_proxy_connect |
|35280|New|Nor|2005-06-09|FTP proxy breaks RFC 2428 when trying to fall back|
|35556|Inf|Nor|2005-06-30|CRL files not re-read by HUP                      |
|35652|Opn|Min|2005-07-07|Improve error message: "pcfg_openfile: unable to c|
|35702|New|Nor|2005-07-12|Using with https URL, ab freezes or gets SIGSEGV o|
|35781|New|Nor|2005-07-18|ap_sub_req_method_uri() bypasses Limit security co|
|35981|Inf|Maj|2005-08-02|mod_dav overrides dav_fs response on PUT failure  |
|36286|New|Enh|2005-08-20|configtest doesn't check SSL certificates         |
|36492|New|Nor|2005-09-04|split-logfile script dies when splitting log of ma|
|36495|Inf|Nor|2005-09-05|mod_proxy_ajp: ajp_check_msg_header() got bad sign|
|36564|New|Enh|2005-09-08|make mod_ldap really universal                    |
|36636|New|Maj|2005-09-13|database write lock taken for PROPFIND operations |
|36676|New|Nor|2005-09-15|time() bug in httpd/os/win32/util_win32.c:wait_for|
|36710|Opn|Blk|2005-09-19|CGI output not captured                           |
|36724|New|Nor|2005-09-20|Don't install Apache Monitor by default           |
|37110|New|Nor|2005-10-17|Build fails when source tree is read-only         |
|37196|Inf|Min|2005-10-21|Wrong "Parent directory" link                     |
|37201|New|Enh|2005-10-21|Add <IfInterface IP> syntax to apache configuratio|
|37290|Opn|Min|2005-10-28|DirectoryIndex don't work in scriptaliased directo|
|37307|New|Enh|2005-10-31|Can't suppress error messages                     |
|37355|New|Enh|2005-11-04|Allow to specify Proxy-Authorization in ProxyRemot|
|37360|New|Maj|2005-11-04|Install fails on Windows XP x64 when program files|
|37402|New|Nor|2005-11-08|mod_proxy has stopped allowing POST sub-requests  |
|37514|Inf|Nor|2005-11-15|mod_proxy buffers chunked data.                   |
|37564|New|Enh|2005-11-19|Suggestion: mod_suexec SuexecUserGroup directive i|
|37587|Inf|Min|2005-11-22|mod_status Total Traffic value goes up then down? |
|37823|Inf|Nor|2005-12-07|The openssl library linked is different between ht|
|37920|New|Maj|2005-12-15|mod_proxy does not flush data on POST requests fro|
|38116|New|Enh|2006-01-04|Chroot-Patch for SuExec                           |
|38164|New|Nor|2006-01-06|wrong status code for failed COPY/MOVE            |
|38182|New|Nor|2006-01-08|COPY ignores authority in Destination header      |
|38218|New|Enh|2006-01-10|Multiline Comments for *.conf files               |
|38240|Inf|Nor|2006-01-12|apache restart segfault with mutliple Include dire|
|38325|Opn|Nor|2006-01-20|impossible to determine AUTH_TYPE of interpreted r|
|38355|Unc|Enh|2006-01-23|DSO support for mod_rewrite                       |
|38369|New|Enh|2006-01-24|mod_proxy keeps alive connections that should be b|
|38408|New|Nor|2006-01-27|SSI environment vars not set in spawned processes |
|38419|New|Nor|2006-01-27|Problems with large WebDAV properties             |
|38478|New|Maj|2006-02-01|A client starting a SSL renegotiation can crash th|
|38515|New|Enh|2006-02-05|Dynamic LDAP Group Support                        |
|38550|New|Enh|2006-02-07|Setting headers based on proxied data             |
|38571|New|Enh|2006-02-08|CustomLog directive checked by apachectl configtes|
|38756|Inf|Nor|2006-02-22|errors with running make                          |
|38786|New|Nor|2006-02-26|"IndexOption VersionSort" has problems with traili|
|38827|New|Reg|2006-03-02|mod_disk_cache trying to rename locked tempfile on|
|38864|Inf|Enh|2006-03-06|ProxyPassReverse fails in <Location>              |
|38903|New|Maj|2006-03-09|r->allowed does not affect Allow response header  |
|38923|New|Min|2006-03-10|mod_speling incorrectly escapes linked URLs       |
|38928|New|Min|2006-03-11|propose removing "VARIANTS" feature               |
|38995|New|Nor|2006-03-16|httpd tries to communicate with the CGI daemon eve|
|39111|New|Nor|2006-03-27|Potential bug brought by mmapfile (mod_file_cache)|
|39128|Inf|Maj|2006-03-28|Apache 2.2 will not compile mod_ssl library's corr|
|39185|Inf|Nor|2006-04-03|Approximately in 1-2 weeks of work the server hang|
|39216|New|Maj|2006-04-05|mod_disk_cache trying to rename locked file, decre|
|39238|New|Nor|2006-04-07|mod_auth_dbm requires mod_auth or "no groups file?|
|39275|Opn|Nor|2006-04-11|slow child_init causes MaxClients warning         |
|39287|New|Nor|2006-04-12|Incorrect If-Modified-Since validation (due to syn|
|39299|New|Nor|2006-04-13|Internal Server Error (500) on COPY               |
|39329|Inf|Nor|2006-04-17|mod_dbd reconnection and prepared statements      |
|39370|New|Nor|2006-04-20|SSL session will be removed if the client is sendi|
|39380|Inf|Nor|2006-04-21|mod_disk_cache eats memory, has no LFS support, et|
|39418|New|Nor|2006-04-26|CacheMaxExpire directive not enforced             |
|39448|New|Min|2006-04-29|old-style <directory proxy:*> doesn't give any war|
|39498|New|Nor|2006-05-06|accept_filter in apr assumes if found in sys/socke|
|39517|New|Nor|2006-05-08|Corrupt chunked transfer-encoding with Content Neg|
|39658|Opn|Nor|2006-05-25|mod_proxy_ajp SSL Key Size Bug                    |
|39673|New|Nor|2006-05-29|mod_proxy opens connections that disturb NTLM     |
|39692|New|Nor|2006-05-31|mod_proxy_balancer doesn't retry a failed request |
|39723|Inf|Enh|2006-06-05|Forward proxy does not work in tranparent mode    |
|39727|Ass|Nor|2006-06-05|Incorrect ETag on gzip:ed content                 |
|39730|New|Nor|2006-06-06|LanguagePriority and DefaultLanguage are Case Sens|
|39737|New|Nor|2006-06-06|LogFormat "%{tid}P" reports wrong thread id on Win|
|39748|New|Enh|2006-06-07|Header and POST support for mod_include           |
|39753|New|Nor|2006-06-07|incorrect source for LOCALE Decimal Symbol in Win2|
|39785|Inf|Nor|2006-06-12|Status code 408 (Request Timeout) is not logged   |
|39807|Opn|Enh|2006-06-13|large files / filesystem corruption can cause apac|
|39902|New|Nor|2006-06-27|HeaderName directive breaks mod_filter somehow    |
|39904|New|Nor|2006-06-27|graceful restart error and cpu load               |
|39913|Ass|Blk|2006-06-27|detection of static OpenSSL libraries requiring li|
|39916|New|Nor|2006-06-28|Core Filters & non-blocking Sendfile              |
|39923|New|Nor|2006-06-28|AddDescription doesn't work in server config with |
|39928|New|Nor|2006-06-28|port no detected when file name not in URL        |
|39935|New|Nor|2006-06-29|AddDescription does not do literal comparisons on |
|39973|Ass|Enh|2006-07-06|apache software folder should be movable          |
|40035|New|Cri|2006-07-13|Windows Server 2003 "("R2")" 64-Bit Edition no cgi|
|40060|New|Nor|2006-07-17|AuthGroupFile should accept /etc/group syntax     |
|40075|New|Enh|2006-07-19|unable to use ldap groups that contain DNs and use|
|40102|Opn|Nor|2006-07-24|SCRIPT_NAME set incorrectly with mod_rewrite      |
|40146|New|Nor|2006-07-31|mod_ssl info in server_info is blank              |
|40174|New|Min|2006-08-03|Unable to get IndexOptionis ScanHTMLTitles to work|
|40180|Inf|Maj|2006-08-03|Mod_dav and remove folder doesn't work with Micros|
|40190|New|Nor|2006-08-05|translate file                                    |
|40196|New|Nor|2006-08-06|EILSEQ handling, NoImplicitAdd should work, and so|
|40217|Opn|Nor|2006-08-08|mod_dav PROPFIND ignores access restrictions on it|
|40266|Inf|Blk|2006-08-16|berkeley db support in httpd is screwed           |
|40312|New|Nor|2006-08-24|ssl_engine_init.c, ssl_init_ctx_verify contains a |
|40373|New|Nor|2006-08-31|mod_dir adds trailing slash after internal redirec|
|40408|New|Blk|2006-09-04|Apache 2.2.3 is not starting                      |
|40416|New|Maj|2006-09-05|mod_proxy_ftp cannot connect under http load in fo|
|40441|New|Enh|2006-09-08|intelligently handling dynamic subdomains         |
|40453|New|Nor|2006-09-09|lexicographic compare in RewriteCond isn't lexicog|
|40463|New|Nor|2006-09-11|piped logging causes some weird kill()ing         |
|40513|Opn|Maj|2006-09-14|Seeding PRNG with 0 bytes of entropy              |
|40514|New|Nor|2006-09-14|would like GracefulShutdownTimeout to work for gra|
|40540|Inf|Nor|2006-09-19|Bad interaction between MultiViews and SetOutputFi|
|40541|New|Nor|2006-09-19|Action rewrites URI used by Location?             |
|40571|New|Nor|2006-09-21|mod_proxy_ajp don't works with mod_usertrack      |
|40586|New|Enh|2006-09-22|Add option to supress default '-' output          |
|40746|New|Enh|2006-10-12|Feature request: ProxyAllow directive             |
|40749|New|Min|2006-10-12|magic file with string and "%n" causes Apache chil|
|40781|New|Nor|2006-10-17|PATH_TRANSLATED: 'redirect:/~jablko/gallery2/main.|
|40808|New|Enh|2006-10-23|ProxyRemote with optional proxy authentication    |
|40859|New|Enh|2006-11-01|[PATCH] Support -F force option to 'ab' support to|
|40917|New|Nor|2006-11-07|configure does not detect OpenSSL shared lib on HP|
|40953|New|Min|2006-11-12|Should not send any data in 1xx/204/304 reply from|
|40984|Inf|Enh|2006-11-16|AddIcon, AddIconByType for OpenDocument format    |
|40987|Opn|Enh|2006-11-16|ProxyVia Block doesn't remove Via: header for reve|
|41000|New|Nor|2006-11-19|mod_authn_dbd have an error, in function 'authn_db|
|41025|New|Nor|2006-11-23|ROBOTS META-Tag directive needed in mod_autoindex |
|41088|New|Nor|2006-11-30|installation backcolor is wrong (white)           |
|41111|New|Enh|2006-12-05|New option for filters: run only if there are spar|
|41114|New|Blk|2006-12-06|ACL HTTP method is rejected by mod_proxy_ajp      |
|41130|New|Nor|2006-12-07|mod_mime and mod_negotiation type-map both clobber|
|41143|Opn|Nor|2006-12-10|Incorrect ap_getline assumption in mod_proxy_http |
|41195|New|Nor|2006-12-17|properly set the parent pid on shutdown           |
|41196|New|Nor|2006-12-17|worker mpm usage of apr's memory pools is not thre|
|41200|Inf|Maj|2006-12-18|SSI include, prevent client from receiving full ou|
|41240|Inf|Enh|2006-12-25|BRF files support                                 |
|41262|Inf|Nor|2006-12-29|Embedded pcre causes runtime segfault             |
|41362|Inf|Maj|2007-01-14|mod_disk_cache and mod_include conflict generating|
|41375|Inf|Min|2007-01-15|Using same SSL Certificate with different ServerNa|
|41391|New|Min|2007-01-17|too long period setting makes max-age overflow    |
|41412|New|Enh|2007-01-19|RewriteRule Skip should take negative arguments   |
|41435|New|Nor|2007-01-22|Authentication fails with 500 Server Error        |
|41450|Inf|Cri|2007-01-24|Empty page (200 OK) while max-age is empty        |
|41485|New|Nor|2007-01-28|LDAP client certificates not usable in 2.2.x/trunk|
|41529|New|Enh|2007-02-02|Accept BOM in .htaccess                           |
|41556|New|Enh|2007-02-07|Feature Request: format string for masking ip addr|
|41621|New|Maj|2007-02-15|Apache 2.2.4 backend problem with Apache 2.0.59 Re|
|41646|New|Nor|2007-02-16|wrong headers are sent for HEAD requests when Prox|
|41676|Opn|Enh|2007-02-22|Refactor mod_proxy_ftp                            |
|41685|New|Enh|2007-02-22|Implement optional HTTP Authentication in a standa|
|41712|Inf|Nor|2007-02-26|threads locked at logging state                   |
|41729|New|Maj|2007-02-28|error message: ap_get_scoreboard_lb(130) failed in|
|41744|Inf|Maj|2007-03-01|SSI resolves includes but removes original HTML   |
|41763|Opn|Nor|2007-03-05|mod_disk_cache ignores CacheDirLevels and CacheDir|
|41764|New|Nor|2007-03-05|error state and conf                              |
|41771|Inf|Nor|2007-03-06|Erro with mod_proxy_ajp or mod_prox_balancer      |
|41867|New|Nor|2007-03-16|<DirectoryMatch> Matches Files                    |
|41925|New|Nor|2007-03-21|trivial patch to add automatic crypting to 'dbmman|
|41929|New|Nor|2007-03-22|ISAPI ssl variables                               |
|41953|New|Nor|2007-03-26|pidfile remains when 2nd pass of post-config retur|
|41962|New|Min|2007-03-27|Need mod_auth_ldap to authenticate with Active Dir|
|42001|New|Cri|2007-03-30|LINUX : Could not set LDAP_OPT_X_TLS to LDAP_OPT_X|
|42027|Inf|Nor|2007-04-02|FileETag directive appears to be ignored          |
|42054|New|Nor|2007-04-04|service name and parameter issues                 |
|42079|New|Nor|2007-04-10|SSLRequire: Additional access in sub-directoies   |
|42082|New|Nor|2007-04-10|filter_init is called multiple times after an INCL|
|42182|Inf|Nor|2007-04-22|Mime types for cached proxied content             |
|42216|New|Enh|2007-04-24|RFE -- external overload procedure                |
|42262|Inf|Nor|2007-04-26|mod_dav /  worker fails to allocate memory and seg|
|42287|Inf|Nor|2007-04-28|chunked encoded response to POST request to cgi sc|
|42368|Inf|Nor|2007-05-09|httpd is crashing if conf/extra/httpd-manual.conf |
|42373|Inf|Maj|2007-05-09|REPORT request fails over mod_proxy               |
|42404|New|Enh|2007-05-13|Filename/info for disk-cached proxied remote URLs |
|42425|Inf|Nor|2007-05-15|Additional freshness checks in mod_cache.c cause m|
|42471|Inf|Nor|2007-05-21|clients with IE7 take 3megs per page load. httpd.e|
|42492|Inf|Nor|2007-05-22|mod_proxy_ajp with SSL front end: data corruption |
|42499|Inf|Nor|2007-05-23|Backslash produces a 404 error instead of going to|
|42548|New|Nor|2007-05-30|INCLUDE negotiating language aborts with APR_POOL_|
|42561|New|Enh|2007-05-31|[PATCH] AuthLDAPRemoteUserAttribute only applies i|
|42633|New|Min|2007-06-11|mod_info gives wrong information about actual conf|
|42665|New|Nor|2007-06-14|spurious attempt to open ".../file.html/.htaccess"|
|42666|New|Nor|2007-06-14|code & docs corrections for FollowSymLinks and Sym|
|42667|New|Nor|2007-06-14|mod_proxy_balancer not reporting when workers are |
|42668|Inf|Nor|2007-06-14|balancer_manager shows Ok status for the workers t|
|42687|New|Nor|2007-06-18|Fully delegate certificate & key semantics to the |
|42688|New|Enh|2007-06-18|engine managed keys: per process openssl context  |
|42690|New|Nor|2007-06-18|realm is not set for each configured directory whe|
|42695|Opn|Cri|2007-06-18|mod_proxy balancer problem                        |
|42699|New|Enh|2007-06-20|share mod_logio data with other modules           |
|42711|New|Enh|2007-06-20|format string for whole log entries not just id   |
|42732|Opn|Maj|2007-06-25|Authentication against database issue.            |
|42763|New|Nor|2007-06-28|graceful-stop/restart loops go loop too far       |
|42923|Inf|Maj|2007-07-17|vhost certificate NOT overriding cert from the _de|
|42972|Inf|Nor|2007-07-25|Certificate list in mod_ssl module context are not|
|42977|New|Nor|2007-07-25|DAV locking is busted when apr-util is built with |
|42987|New|Nor|2007-07-27|Weak Etags in Apache are useless and violate RFC 2|
|43012|New|Nor|2007-08-02|AIX instdso.sh libphp5.so                         |
|43027|New|Enh|2007-08-03|Header in default language                        |
|43033|New|Nor|2007-08-04|apxs does not correctly detect module name (w/o -n|
|43177|New|Nor|2007-08-21|child pid xxxxx exit signal Segmentation fault    |
|43218|New|Nor|2007-08-27|Wrong cert used for vhost if ServerName is same   |
|43220|Opn|Cri|2007-08-27|mod_proxy truncating ajp output                   |
|43249|Inf|Maj|2007-08-30|ldap_simple_bind_s failed when using SUN LDAP Libs|
|43275|New|Enh|2007-08-31|Remove avoidable network transactions in mod_proxy|
|43289|New|Nor|2007-09-02|XBitHack full g+x returns zero sized response on I|
|43308|New|Nor|2007-09-04|Persistent backend connections not supported for R|
|43352|New|Nor|2007-09-11|Apache2: out of memory during heavy webdav files c|
|43441|New|Nor|2007-09-20|Incorrect HTTP status for pre-commit-blocked autov|
|43471|New|Min|2007-09-25|no need to create a global pool on open_scoreboard|
|43481|New|Cri|2007-09-26|AuthLDAPURL must contain a final path of branch?(l|
|43494|New|Nor|2007-09-26|mod_cgid does not kill never ending scripts       |
|43502|New|Enh|2007-09-28|httpd fails to start if log directory does not exi|
|43513|New|Nor|2007-09-29|Persistent backend connections for ProxyPassMatch |
|43532|Inf|Cri|2007-10-02|Error while compiling Apache 2.2.3 on HPUX        |
|43533|Opn|Nor|2007-10-02|Frequent crashes in mod_include's bndm()          |
|43561|New|Nor|2007-10-05|apxs -q anomaly                                   |
|43577|Inf|Blk|2007-10-09|mod_authnz_ldap not working under WLDAP32 (novell/|
|43607|New|Nor|2007-10-11|mod_proxy sends data on closed connections without|
|43649|Opn|Trv|2007-10-18|mod_autoindex is generating invalid XHTML markup  |
|43652|New|Enh|2007-10-18|Suggest small change for big fix with SuExec & Vir|
|43666|New|Nor|2007-10-20|CGI works, but client denied error messages in err|
|43679|New|Enh|2007-10-23|Contributed tests for checking that subrequests ta|
|43723|Inf|Cri|2007-10-29|Apache 2.2.6 segfault when using mod_dbd          |
|43724|New|Cri|2007-10-29|Apache 2.2.6 segfault on url wich not in cache    |
|43755|New|Enh|2007-10-31|Add a SSLOptions to don't fill SSL_CLIENT_VERIFY  |
|43762|New|Enh|2007-10-31|Misleading tips in an error message about internal|
|43777|New|Nor|2007-11-01|Wrong encoding of <href> element in response      |
|43778|New|Nor|2007-11-01|Wrong responses if httpd has not access to some el|
|43785|New|Enh|2007-11-02|Tracking the per-hit impact of mod_include        |
|43792|New|Enh|2007-11-04|Feature proposal - bind phase                     |
|43818|New|Nor|2007-11-08|PROPFIND on -w- collections returns 207 MULTI-STAT|
|43838|New|Enh|2007-11-11|If-Modified-Since request and htcacheclean conflic|
|43895|New|Nor|2007-11-18|mod_mbox improvements                             |
|43897|Inf|Cri|2007-11-18|Huge memory consumption httpd 2.2.6, mod_proxy - m|
|43931|New|Enh|2007-11-21|OpenSSL autoconfig support for mod_ssl            |
|43943|New|Nor|2007-11-22|SHMCB crash due to misalignment and GCC 4 optimiza|
|43958|Inf|Maj|2007-11-26|mod_proxy_balancer not balancing correct in combin|
|43997|Opn|Min|2007-11-29|Only issue "Init: SSL server IP/Port conflict" if |
|44025|Inf|Nor|2007-12-05|Apache 2.2.6 fails to configure on OpenBSD 4.1    |
|44027|Ass|Enh|2007-12-05|Internationalized Domain Name (IDN) support       |
|44031|Opn|Maj|2007-12-06|RemoveHandler inside subdir location              |
|44034|Ass|Enh|2007-12-06|mpm_winnt doesn't call monitor hook               |
|44105|New|Nor|2007-12-19|Core dumps when using Proxy Keepalive             |
|44155|New|Enh|2007-12-31|smarter retry for LDAP_UNAVAILABLE, LDAP_BUSY, etc|
|44181|Opn|Enh|2008-01-07|add UnAlias                                       |
|44188|Inf|Cri|2008-01-08|Empty response for certain requests (mod_proxy as |
|44218|New|Min|2008-01-13|mod_autoindex shows the default icon for files wit|
|44221|Opn|Cri|2008-01-14|CheckCaseOnly On does not stop Multiple Choices ba|
|44250|New|Nor|2008-01-16|OSX 10.5: __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_|
|44279|New|Enh|2008-01-22|Add "iterate" flag to apply rule in a loop while p|
|44302|New|Nor|2008-01-27|AuthLDAPURL does not accept ldapi:// urls         |
|44305|New|Nor|2008-01-28|Inconsistent configuration for suexec path        |
|44316|New|Nor|2008-01-28|httpd 2.0 does not follow ScriptAliases when invok|
|44322|New|Enh|2008-01-29|mod_proxy ProxyPassReverseCookieDomain with no dom|
|44351|New|Nor|2008-02-04|File descriptor leak when using prg RewriteMap    |
|44363|Inf|Maj|2008-02-05|Slow file transfers                               |
|44384|Ass|Nor|2008-02-09|mod_ssl on MacOS X 10.5.1 does not work because of|
|44453|New|Nor|2008-02-19|list_hooks.pl doesn't parse declarations that span|
|44476|New|Maj|2008-02-23|Apache service fails to start due to missing depen|
|44503|Inf|Blk|2008-02-27|Errors during SSL handshake                       |
|44518|New|Enh|2008-03-02|Don't set expires header on HTTP redirect.        |
|44578|New|Enh|2008-03-11|mod_authn_dbd option to let database validate pass|
|44601|New|Trv|2008-03-13|Add a lowercase value to Vary header for consisten|
|44602|New|Enh|2008-03-13|Options for modfying Content-Location (relative OR|
|44622|Inf|Nor|2008-03-17|POST fails to SSL vhost with proxy to HTTP backend|
|44631|New|Nor|2008-03-18|with-included-apr fails to work when using a separ|
|44638|New|Nor|2008-03-19|sed error in httpd.spec.in                        |
|44656|New|Nor|2008-03-22|Tries to retrive error document 404 instead of 406|
|44657|New|Enh|2008-03-22|prefer-type, -encoding, and -charset cookie? (as p|
|44670|New|Min|2008-03-25|Apache httpd 2.2.8 : Cannot ./configure when curre|
|44696|Inf|Nor|2008-03-27|mod_cache sometimes serves old content despite hav|
|44730|New|Nor|2008-04-01|duplicate query string in remote server url when u|
|44752|New|Nor|2008-04-03|Suexec does not correctly check that scripts are i|
|44757|New|Enh|2008-04-04|adding stderr buckets to mod_cgi                  |
|44758|New|Enh|2008-04-04|LimitRequestBody undocumented behaviour with proxi|
|44779|New|Enh|2008-04-08|Using commas and semicolons for content negotiatio|
|44855|New|Nor|2008-04-22|irregular balancing with sticky-session after re-e|
|44865|Ass|Nor|2008-04-23|mod_dav's lock database becomes consistently corru|
|44870|Inf|Nor|2008-04-24|process spinning on 100% cpu                      |
|44923|Inf|Min|2008-05-02|consequences of multiple LDAPTrustedGlobalCert    |
|44924|New|Enh|2008-05-02|allow 'CACERTDIR' in mod_ldap                     |
|44940|New|Maj|2008-05-06|Httpd randomly breaks when verifying client certif|
|44981|New|Enh|2008-05-12|Digital Certificates (CN Based) for Authorization |
|45022|New|Nor|2008-05-16|Processing of escaped glob patterns in "Include" d|
|45023|Opn|Reg|2008-05-16|DEFLATE preventing 304 NOT MODIFIED response      |
|45049|New|Nor|2008-05-20|mod_mem_cache caches partial content when client c|
|45054|New|Nor|2008-05-21|SSLVerifyClient optional_no_ca is broken          |
|45058|New|Nor|2008-05-21|Mod_SSL does not set AUTH_TYPE with client certifi|
|45078|New|Nor|2008-05-27|mod_proxy stalls when uploading files             |
|45103|Ass|Min|2008-05-30|apachectl should do config test before reload/rest|
|45111|New|Enh|2008-06-01|make mod_usertrack use mod_unique_id if available |
|45116|New|Nor|2008-06-02|fail to check return value of apr_file_dup2() in /|
|45148|New|Enh|2008-06-06|The actual host of the request will be more helpfu|
|45184|New|Enh|2008-06-11|Regular Expression in directive ServerAlias       |
|45187|New|Maj|2008-06-11|Long File name requests gives FORBIDDEN response  |
|45225|New|Nor|2008-06-17|XBitHack breaks DirectoryIndex + MultiViews conten|
|45253|New|Nor|2008-06-23|Unable to build httpd 2.2.9 on Solaris/SPARC      |
|45257|New|Enh|2008-06-23|add (en)force option for UseCanonicalName         |
|45259|New|Enh|2008-06-23|Add /home/[a-z]/* scheme to UserDir conf          |
|45275|New|Maj|2008-06-25|Locked files during expired page renew in disk cac|
|45281|New|Enh|2008-06-25|SITE CHMOD/SEARCH                                 |
|45287|Inf|Min|2008-06-26|build failure because of difference between BSD an|
|45297|New|Min|2008-06-27|mod_dir does not manage correctly the user (r->use|
|45302|New|Enh|2008-06-28|ServerRoot directive                              |
|45355|New|Nor|2008-07-07|ab text and html output jumbo unification         |
|45356|New|Nor|2008-07-07|ab: optionally reduce resource usage (qsort and me|
|45371|New|Nor|2008-07-10|MSI installer requires uninstall of previous versi|
|45374|New|Blk|2008-07-10|Shared memory error on starting httpd with mod_lda|
|45379|Inf|Nor|2008-07-11|[Bug] svn merge, apache and trailing slashes      |
|45385|Inf|Nor|2008-07-11|unable to compile/make 2.2.9 with --enable-ldap   |
|45393|New|Nor|2008-07-14|Apache returns 500 Error when no LDAP credentials |
|45402|New|Nor|2008-07-15|mod_autoindex incorrectly fails to list files     |
|45405|New|Enh|2008-07-16|Allow binding port to be set for individual worker|
|45449|New|Nor|2008-07-21|[PATCH] Add support to WebDav to MOVE/COPY to remo|
|45456|New|Enh|2008-07-22|mod_dbd don't allow more then one database pool   |
|45487|New|Trv|2008-07-27|broken log messages on startup in win32 version   |
|45497|New|Nor|2008-07-29|Scoreboard slot leaked using MaxRequestsPerChild a|
|45512|Ass|Maj|2008-07-31|Bad Performance of mod_proxy with SSL on Solaris 1|
|45524|New|Enh|2008-08-01|Specifying multiple vhost aliases                 |
|45525|New|Enh|2008-08-01|Switch mod_autoindex to Tango icons               |
|45579|New|Nor|2008-08-06|unknown URI scheme in request-URI ignored         |
|45674|New|Enh|2008-08-22|Allow to change error code returned by "Require ld|
|45726|New|Enh|2008-09-02|Build in a maintenance functionallity             |
|45736|New|Nor|2008-09-03|mod_dav needs a directory for its locks and one sh|
|45754|New|Enh|2008-09-06|autoconf macros                                   |
|45763|New|Nor|2008-09-08|No openssl.cnf defined by default causes OpenSSL c|
|45773|New|Nor|2008-09-09|pcre build generates sources to srcdir rather than|
|45788|New|Nor|2008-09-11|mod_log_forensic output shouldn't be buffered when|
|45801|Opn|Nor|2008-09-13|SSLRequireSSL with strictrequire and satisfy any d|
|45838|New|Nor|2008-09-18|mod_authz_owner & directories                     |
|45868|New|Nor|2008-09-23|mod_mem_cache update of headers in cache object is|
|45900|New|Nor|2008-09-26|"make install" fails from read-only filesystem    |
|45905|New|Enh|2008-09-26|ErrorDocument and default URL                     |
|45922|New|Enh|2008-09-30|Expand the conditions under which "SSLVerifyClient|
|45923|New|Nor|2008-09-30|htpasswd tries to open(file, O_RDONLY | O_APPEND) |
|45926|Inf|Nor|2008-10-01|Unable to start apache 2.2.9                      |
|45986|New|Nor|2008-10-10|[info]...Invalid argument: core_output_filter: wri|
|46024|Opn|Nor|2008-10-16|--enable-static is not available in apache's confi|
|46037|Inf|Nor|2008-10-18|Configuration of trusted OCSP responder certificat|
|46040|New|Enh|2008-10-20|Check for existing version of Apache while install|
|46054|New|Nor|2008-10-21|Running httpd returns the error "bad user name nob|
|46070|New|Nor|2008-10-22|MSI installer does not validate custom installatio|
|46071|New|Enh|2008-10-22|Allowing space in between comma and last option in|
|46074|New|Enh|2008-10-23|Need of friendly and easy to use configuration gra|
|46139|New|Nor|2008-11-02|Apache Restart option is not working              |
|46140|New|Enh|2008-11-03|Change error state in balancer manager            |
|46188|Inf|Nor|2008-11-11|Core dumps in apache 2.0.59                       |
|46195|Opn|Nor|2008-11-12|ProxyPass fails with literal IPv6 address         |
|46215|New|Nor|2008-11-14|Race condition in bybusyness algorithm            |
|46231|New|Maj|2008-11-18|Connection Pooling with ajp depends on syntax ?   |
|46241|New|Enh|2008-11-19|mod_expires - ExpiresByPattern or ExpiresIf       |
|46267|New|Nor|2008-11-22|No shared modules build if use --with-apr and --wi|
|46270|New|Enh|2008-11-23|Add FIPS 140-2 mode for mod_ssl for FIPS 1.2 modul|
|46282|New|Nor|2008-11-24|apache2.2 reverse proxy causing full memory and sw|
|46316|New|Maj|2008-12-01|Proxied SSI ProxyTimeout render failure           |
|46317|Inf|Nor|2008-12-01|mod_authnz_ldap.c(373)  seg fault                 |
|46412|New|Nor|2008-12-17|make_child return value not checked               |
|46417|New|Cri|2008-12-19|[notice] Parent: child process exited with status |
|46428|Opn|Nor|2008-12-21|Spaces in URI doesn't encode in proxy-requests    |
|46442|New|Nor|2008-12-29|Semicolon in allow/deny all rules cause reverse lo|
|46449|New|Maj|2008-12-30|Output out of order from SSI include virtual      |
|46454|New|Min|2008-12-30|escaping wildcards in AddIcon filename matching   |
|46475|New|Nor|2009-01-04|build warnings.                                   |
|46499|New|Maj|2009-01-09|httpd accept() return EAGAIN error                |
|46521|New|Nor|2009-01-13|mod_dav doesn't show symlinks                     |
|46529|Ass|Nor|2009-01-14|Child httpd processes crash with Segmentation faul|
|46534|New|Nor|2009-01-14|mod_proxy_ajp scheme and port do not follow UseCan|
|46578|New|Nor|2009-01-21|Flawed header                                     |
|46582|Ver|Min|2009-01-22|RewriteMap internal functions are not well documen|
|46604|New|Nor|2009-01-26|Error thrown when trying to rpmbuild -tb httpd sou|
|46629|New|Maj|2009-01-29|Apache hanging on system calls for php and perl   |
|46634|Ass|Nor|2009-01-30|Requests sometimes take too long, wrong time taken|
|46644|New|Enh|2009-01-31|Clean way to pass custom environment variables to |
|46646|Ass|Nor|2009-02-01|check group membership is sometimes case sensitive|
|46650|Opn|Nor|2009-02-02|CustomLog enviroment condition SCRIPT_FILENAME    |
|46656|New|Enh|2009-02-03|ProxyErrorOverride inside location                |
|46669|New|Enh|2009-02-06|rotatelogs doesn't autocreate directories         |
|46671|Opn|Cri|2009-02-07|Apache periodicaly crashes .                      |
|46678|New|Nor|2009-02-09|Fixed Content-Length using mod_ext_filter with mod|
|46682|New|Nor|2009-02-09|mod_proxy EAI_AGAIN DNS failure                   |
|46685|Opn|Nor|2009-02-09|401 sent without WWW-Authenticate header when requ|
|46709|Opn|Reg|2009-02-12|Expect: 100-continue to an HTTP/1.0 server change |
|46724|Inf|Cri|2009-02-17|WinXP SP3 - Apache crashes on startup in libapr-1.|
|46743|New|Nor|2009-02-19|Inconsistent behavior of "RewriteOptions inherit" |
|46745|New|Maj|2009-02-20|ab.c error :  undefined reference to `BIO_set_call|
|46751|New|Nor|2009-02-21|Can passenv variables who's name contain '(' or ')|
|46762|New|Nor|2009-02-24|Error, SSL/TLS libraries were missing or unusable |
|46765|Opn|Nor|2009-02-25|doubled HTTP header leads to error (Redmine)      |
|46785|Inf|Nor|2009-03-02|Child process increases to 100% (CPU)             |
|46788|New|Nor|2009-03-02|Set resource limits to avoid denial of service att|
|46810|New|Nor|2009-03-05|apxs / apu-1-config outputting erroneous include p|
|46824|New|Nor|2009-03-09|RemoveOutputFilter will not work for Filters added|
|46845|Inf|Cri|2009-03-12|Apache crashes in Windows when using subversion(pr|
|46847|New|Nor|2009-03-13|WebDAV methods with encoding other than "identity"|
|46873|New|Nor|2009-03-18|feature request: connection count on balancer-mana|
|46884|New|Min|2009-03-20|Call to apu_dso_load Fails In apr_ldap_stub.c On O|
|46946|Inf|Nor|2009-03-31|mod_mbox shows email addresses in plain text      |
|46963|New|Nor|2009-04-03|KeepAliveTimout prevents child process from exitin|
|46969|New|Nor|2009-04-05|CustomLog format %m always GET on errors with loca|
|46970|New|Nor|2009-04-05|CustomLog %X does not record aborted connections w|
|47011|New|Reg|2009-04-09|mod_proxy/mod_proxy_balancer hot-standby BalancerM|
|47055|New|Blk|2009-04-20|SSLVerifyClient + Directory doesn't use cache sess|
|47063|New|Nor|2009-04-21|mod_proxy doesn't call post_request handler when t|
|47134|New|Nor|2009-05-01|Last resolve handling when sending client certific|
|47138|New|Nor|2009-05-01|Reverse Proxy & Balancer generate error fault when|
|47152|New|Maj|2009-05-04|Apache is only serving the first character in the |
|47159|New|Nor|2009-05-06|2.2.x logresolve doesn't support ipv6             |
|47167|New|Nor|2009-05-07|Authenticated sessions being switched by reverse p|
|47170|New|Enh|2009-05-08|rotatelogs ring buffer option                     |
|47180|New|Nor|2009-05-11|DBM ssl_scache setting can cause extreme performan|
|47220|Opn|Enh|2009-05-19|Access to environment variables                   |
|47241|New|Min|2009-05-22|Error in rewriting with character ':'             |
|47256|New|Enh|2009-05-23|Enable SSL on a per-port basis                    |
|47289|New|Nor|2009-05-30|Can't build with dynamic libraries on Mac OS 10.4 |
|47295|New|Nor|2009-06-01|AuthDBDUserPWQueryFmt/AuthDBDUserRealmQueryFmt in |
|47329|New|Nor|2009-06-07|SSLCADNRequest* & SSLCACertificate* silently do no|
|47340|New|Nor|2009-06-09|uldap_cache_comparedn() called without a lock     |
|47344|New|Enh|2009-06-10|[FEATURE REQUEST] RedirectCanonicalName           |
|47345|New|Enh|2009-06-10|rotatelogs timeout patch                          |
|47346|New|Maj|2009-06-10|mod_cache doesn't re-cache expired content when La|
|47387|Inf|Nor|2009-06-18|SSL_CLIENT_I_DN and SSL_CLIENT_S_DN use Email inst|
|47392|Opn|Nor|2009-06-18|<FilesMatch> is using the wrong directory         |
|47435|New|Nor|2009-06-26|mod_authz_host does reading of /etc/hosts on each |
|47438|Inf|Enh|2009-06-27|how to create a non-html "listing generated by the|
|47447|New|Enh|2009-06-29|Add possibility to use client IP as a value in Req|
|47484|New|Nor|2009-07-06|Spurious RewriteLock warning when using external m|
|47485|New|Enh|2009-07-06|HTML5 Websocket implementation                    |
|47514|New|Enh|2009-07-12|Personal data and restrictions based on subject di|
|47528|New|Maj|2009-07-14|Worker process won't restart more than once using |
|47542|New|Nor|2009-07-16|Piped logging processes killed before other proces|
|47562|Inf|Nor|2009-07-23|Apache/2.2.3 (Win32) mod_perl/2.0.3-rc1           |
|47578|New|Nor|2009-07-24|compile ERROR with ssl                            |
|47580|Opn|Nor|2009-07-25|mod_cache sends 200 response instead of 304       |
|47586|New|Nor|2009-07-27|httpd -k start doesn't start service when rotatelo|
|47591|New|Min|2009-07-27|show current HTTP_HOST in mod_status scoreboard   |
|47601|New|Enh|2009-07-29|Support X-Forwarded-For in forward proxy requests |
|47625|New|Nor|2009-08-02|2.2.12 win32 msi installer missing                |
|47634|New|Maj|2009-08-04|mod_ldap connection pool session keepalive not imp|
|47643|New|Enh|2009-08-04|added meta tags to xhtml output for ease of search|
|47657|New|Nor|2009-08-06|Make WebDAV MOVE atomic when replacing files on sa|
|47659|New|Nor|2009-08-07|makefile.win needs check for DBM_LIST, dies on bui|
|47664|New|Nor|2009-08-07|ap_proxy_canonenc: does not recode all high-byte c|
|47665|Inf|Blk|2009-08-09|Apache service well launched but blank Screen     |
|47691|New|Enh|2009-08-12|libtool invocations should use --tag              |
|47693|Opn|Nor|2009-08-13|GET request has race condition w.r.t. replacement |
|47706|Inf|Nor|2009-08-19|(20014)Internal error: proxy: error reading status|
|47716|New|Min|2009-08-20|LimitRequestFieldSize and friends not merged well |
|47719|Opn|Enh|2009-08-20|Broken symbolic link (symlink) causes wrong ErrorD|
|47723|New|Nor|2009-08-22|suEXEC and low RLimitMem gives "crit: invalid uid"|
|47743|Inf|Nor|2009-08-26|mod_so segfaults at server startup in ap_find_load|
|47753|New|Nor|2009-08-27|output and error channels not explicitly passed fo|
|47778|Opn|Enh|2009-09-03|wrong exit value on graceful restart              |
|47780|New|Nor|2009-09-03|Critical errors should be marked by time and level|
|47807|Inf|Nor|2009-09-09|Proxy dialog error with Apache 2.2.13             |
|47808|New|Maj|2009-09-09|Child process core dumps when enabling CRL        |
|47814|Inf|Maj|2009-09-10|openssl_pkcs7_sign error                          |
|47838|New|Enh|2009-09-14|Ability to Dynamically Inject Current Time Into a |
|47874|New|Nor|2009-09-18|mod_fcgid crashes if added during restart         |
|47895|New|Maj|2009-09-24|Incorrect 413 error handling                      |
|47908|New|Min|2009-09-27|'invalid result code' in error_log                |
|47981|New|Nor|2009-10-12|allow language specific html-versions (index.html.|
|47982|New|Nor|2009-10-12|correctly interprete non-standard HTTP_ACCEPT_LANG|
|47988|New|Nor|2009-10-12|Segmentation fault                                |
|47989|New|Nor|2009-10-13|Junk string appended to compressed dynamic content|
|47994|New|Enh|2009-10-14|ScriptInterpreterSource apparently broken in Windo|
|48020|New|Nor|2009-10-17|KCP+ Opera support for mod_auth_digest            |
|48037|Inf|Nor|2009-10-21|mod_proxy_http does not handle asynchronous keepal|
|48045|New|Nor|2009-10-23|Apache 2 initgroups alert, Max OS X, abnormal exit|
|48057|New|Nor|2009-10-26|mod_fcgid creates 1 more process then allowed     |
|48094|New|Nor|2009-11-01|Avoid a race condition in close_worker_sockets()  |
|48107|New|Maj|2009-11-02|Mutual Authentication: Order in ca-bundle influenc|
|48115|New|Enh|2009-11-03|Duration to receive the request, generate response|
|48130|New|Maj|2009-11-04|DAV operations on large filesets consume all the O|
|48154|New|Nor|2009-11-06|Requests through mod_isapi are not parsed by HTTP_|
|48164|New|Enh|2009-11-09|add new parameters to rotatelogs                  |
|48219|New|Nor|2009-11-17|Retrying the worker for seems to omit POST variabl|
|48228|New|Nor|2009-11-18|Renegocation requires multiple client authenticati|
|48246|New|Enh|2009-11-19|Check permissions on file/directory specified for |
|48254|New|Trv|2009-11-20|Bogus "DocumentRoot does not exist" warning when s|
|48283|New|Nor|2009-11-25|Proxy errors since httpd 2.2.12 with Tomcat 6.0.20|
|48291|New|Maj|2009-11-26|mod_substitute loops                              |
|48295|Opn|Nor|2009-11-27|ProxyPassReverseCookiePath: Not changing path corr|
|48301|New|Enh|2009-11-30|Feature request: improved connection status report|
|48309|New|Maj|2009-11-30|libapreq2-2.12: "make test" fails at request.t and|
|48312|Opn|Nor|2009-11-30|ProxyPassReverseCookiePath: Not changing path corr|
|48316|Inf|Nor|2009-12-01|ap_run_insert_filter doesn't work in cache_url_han|
|48354|New|Enh|2009-12-08|void ap_custom_response is not supporting the bina|
|48360|New|Enh|2009-12-09|provide sample configuration file for inclusion in|
|48361|New|Enh|2009-12-09|Add global server option for specifying desired DS|
|48364|Opn|Nor|2009-12-10|PHP-generated pages are not cached in spite of per|
|48369|New|Enh|2009-12-10|add option to automatically restart if a script is|
|48431|New|Nor|2009-12-22|Error logging doesn't work when configured to use |
|48440|Inf|Cri|2009-12-23|Segmentation Fault                                |
|48449|Inf|Nor|2009-12-28|make distclean removes core.c and core_filters.c  |
|48465|Opn|Enh|2009-12-30|Support TCP to connect to backends                |
|48499|New|Nor|2010-01-06|mod_rewrite can't redirect to files with ? in them|
|48500|New|Nor|2010-01-06|mod_mbox mishandles right-click to open msg in new|
|48508|New|Nor|2010-01-07|BalancerMember doesn't accept nocanon directive   |
|48549|New|Enh|2010-01-14|Add Cache-Control s-maxage support                |
|48576|New|Nor|2010-01-19|MOVE or COPY in WebDAV fails with 404 when file ex|
|48585|New|Enh|2010-01-20|mod_cache no longer caches expired content        |
|48602|New|Enh|2010-01-23|use asynch ldap_compare so LDAPTimeout applies    |
|48623|New|Maj|2010-01-26|AuthLDAPURL syntax is not RFC-compliant, prevents |
|48639|New|Enh|2010-01-29|Add htcacheclean as a core monitored process      |
|48652|New|Maj|2010-02-01|"AuthType form" fails if a password contains  '&' |
|48659|New|Maj|2010-02-02|Problem with accents in filename and byte serving |
|48687|New|Nor|2010-02-05|mod_rewrite ignores trailing dot in request URI on|
|48705|New|Enh|2010-02-08|flag to allow newlines in the error log as opposed|
|48712|New|Enh|2010-02-09|Add UID and GID to status page                    |
|48719|New|Nor|2010-02-09|[BUG] mod_proxy_ajp return wrong error message whe|
|48721|New|Nor|2010-02-10|[Patch] Add ProxyAllow to mod_proxy               |
|48731|New|Maj|2010-02-11|Prefork not creating processes after 10 servers ar|
|48732|New|Nor|2010-02-12|[BUG] environment variable SCRIPT_NAME output erro|
|48769|New|Nor|2010-02-18|[PATCH] Processes in the busy list should not be k|
|48777|New|Maj|2010-02-19|proxy balancer not detecting correctly when host (|
|48780|New|Enh|2010-02-19|Enable mod_authnz_ldap to accept valid client cert|
|48792|New|Enh|2010-02-22|httpd util apachectl returns wrong status informat|
|48805|New|Nor|2010-02-23|Corrupted response for HTTPS + KEEPALIVE=ON       |
|48808|New|Enh|2010-02-24|mod_authz_owner support for POSIX access control l|
|48819|Inf|Nor|2010-02-25|After users login on the web page, the page does n|
|48842|Inf|Nor|2010-03-02|mod_log_config logs the full size of the file inst|
|48880|Opn|Nor|2010-03-09|error on make                                     |
|48888|New|Nor|2010-03-10|DOCTYPE definitions nearly 11 years out-of-date   |
|48920|New|Enh|2010-03-15|Breadcrumbs on mod_autoindex path                 |
|48921|Inf|Nor|2010-03-16|mod_mem_cache crash, version 2.2.15.0             |
|48937|New|Enh|2010-03-18|Feature proposal - support sasl_bind              |
|48949|Inf|Cri|2010-03-20|fcgid processes never get killed after graceful re|
|48958|New|Nor|2010-03-22|mod_ldap, ldap credential cache & graceful restart|
|48987|New|Trv|2010-03-25|typo in polish translation of HTTP_UNAUTHORIZED.ht|
|49037|New|Enh|2010-04-02|SSLVerifyClient require_no_ca                     |
|49043|New|Maj|2010-04-04|Using ssi include directive overwrites QUERY_STRIN|
|49058|New|Nor|2010-04-06|Prefork MPM tries to accept on closed listener soc|
|49067|New|Nor|2010-04-08|FTPOptions ShowUnAuthorizedFiles does not work    |
|49068|New|Nor|2010-04-08|UTF-8 URL Encode error                            |
|49087|New|Maj|2010-04-11|MSI installation reports "interrupted installation|
|49114|New|Maj|2010-04-13|NTFS junction directories missing from directory l|
|49123|New|Nor|2010-04-14|mod_proxy_ajp does not send the client's SSL chain|
|49131|New|Nor|2010-04-15|Very long URLs cause 404 or 403 errors with SetAct|
|49133|New|Maj|2010-04-16|Windows service recovery options do not work for A|
|49157|New|Nor|2010-04-20|Issues with xml interface for balancer manager    |
|49187|New|Nor|2010-04-26|Crash mod_mem_cache and mod_svn                   |
|49199|New|Enh|2010-04-27|Implement LDAP scope-aware caching in mod_ldap    |
|49220|New|Nor|2010-04-29|feature request for being able to disable FcgidWra|
|49239|New|Blk|2010-05-01|Apache mod_ssl gives coredump with openssl 0.9.8  |
|49277|New|Nor|2010-05-12|Expose a variable to identify SSL Session renegoti|
|49283|New|Nor|2010-05-12|Language of dates on SSI                          |
|49285|New|Enh|2010-05-13|Relative (local to current directory) URLs do not |
|49348|New|Enh|2010-05-27|[mod_log_config] Output log file name format capab|
|49385|New|Maj|2010-06-03|mod_disk_cache server side included files are inte|
|49387|Inf|Cri|2010-06-03|Unable to modify default charset setting to UTF-8 |
|49391|New|Nor|2010-06-05|mod_disk_cache needs to register a cleanup to kill|
|49396|New|Enh|2010-06-06|PATH_INFO normalization, especially relating to vo|
|49427|New|Nor|2010-06-11|mod_cgid and mod_cgi do not return proper value wh|
|49433|New|Enh|2010-06-13|improving info in server status                   |
|49439|New|Nor|2010-06-14|Bug in mod_userdir which prevents suexec from runn|
|49504|New|Nor|2010-06-25|Solaris 10/x64 worker graceful restart problem    |
|49532|New|Nor|2010-06-30|mod_cache: Set-Cookie headers are appended to cach|
|49553|New|Min|2010-07-05|Set QoS bits via APR2 API instead                 |
|49568|New|Maj|2010-07-07|Apache mod_authnz_ldap built with the MS LDAPSDK d|
|49632|Inf|Nor|2010-07-21|mod_authnz_ldap denies users when search is perfor|
|49633|New|Enh|2010-07-21|Handle AD primary groups in mod_authnz_ldap       |
|49642|New|Nor|2010-07-23|mod_rewrite mistakes encoded question mark as path|
|49643|New|Nor|2010-07-23|WebDav plus mod Negotiation causes directory creat|
|49676|New|Nor|2010-07-30|directory with german umlauts are indented by one |
|49680|New|Maj|2010-07-30|Perl script are not running on Win32, Apache 2.2.1|
|49684|New|Enh|2010-08-01|enhancement for ipv6 implementation               |
|49699|New|Nor|2010-08-03|Inconsistent Keep-alive from proxy to the origin s|
|49715|New|Maj|2010-08-06|ProxyPassMatch Url Encoder Problem                |
|49717|New|Enh|2010-08-06|PATCH: Enable SSL Timeout                         |
|49737|Inf|Nor|2010-08-10|order allow,deny does not work on IPv6            |
|49743|New|Maj|2010-08-12|SSI 'echo encoding="(url/none)"' bug              |
|49746|Opn|Enh|2010-08-12|mod_rewrite urlencode option                      |
|49766|New|Maj|2010-08-17|POST request on CGI script generating empty body c|
|49771|New|Nor|2010-08-17|After graceful restart using mod_proxy_ajp, couldn|
|49772|New|Nor|2010-08-18|mod_deflate kicks itself out on Content-Range resp|
|49798|Opn|Nor|2010-08-22|[mod_log_config] Piped Log scripts process cause w|
|49807|New|Enh|2010-08-23|hard to force Content-Type header for non static f|
|49810|New|Nor|2010-08-23|Mod_autoindex output of header/body/footer scrambl|
|49815|New|Enh|2010-08-24|Enable caching for HTTP Range requests / 206 respo|
|49829|New|Trv|2010-08-26|CGI index command line arguments excessively escap|
|49832|New|Enh|2010-08-26|void ap_custom_response is not supporting the bina|
|49859|Opn|Nor|2010-09-01|url with additional filepath generates bad environ|
|49921|New|Nor|2010-09-13|Trailers in chunked http requests are not handled |
|49926|New|Enh|2010-09-14|New option for mod_log_forensics or mod_log_config|
|49980|New|Nor|2010-09-22|can't use a FIFO for SSL key file; mod_ssl checks |
|49981|New|Enh|2010-09-22|Requesting SSLCertificateKeyFile Dialog functional|
|49990|New|Nor|2010-09-23|Feature request: implement ExpiresActive reset    |
|49996|New|Nor|2010-09-24|Proxied ErrorDocument returns 200 OK response code|
|49997|New|Nor|2010-09-24|wrowe promised me...                              |
|50004|New|Nor|2010-09-26|per-dir rewrite without DocumentRoot or RewriteBas|
|50011|New|Cri|2010-09-27|error running apache, and installing apache as a s|
|50024|New|Min|2010-09-29|Mod_cache/mod_mem_cache and mod_security combinati|
|50038|New|Enh|2010-10-01|What Directives apply to a file/directory? Resulta|
|50041|New|Min|2010-10-04|(9)Bad file descriptor: apr_socket_accept: (client|
|50051|New|Nor|2010-10-07|Log PID in first entry logged for each request    |
|50061|New|Nor|2010-10-08|Semicolon character '%3B' seems to be decoded to '|
|50082|New|Nor|2010-10-12|apachectl status returns incorrect exit code      |
|50112|New|Nor|2010-10-18|buildconf broken in two places                    |
|50116|New|Nor|2010-10-19|Apache fragments packets unnecessarily            |
|50151|New|Nor|2010-10-25|Software caused connection abort and apache proces|
|50155|Inf|Nor|2010-10-25|httpd -s attempts to read SSL certificates        |
|50172|Inf|Nor|2010-10-28|Digest allows access bypassing secuity            |
|50227|New|Enh|2010-11-07|Option to fail SSL handshake for diverted SNI conn|
|50237|Inf|Nor|2010-11-08|webdav LOCK access with multiple threads to same f|
|50261|New|Nor|2010-11-12|graceful restart with multiple listeners using pre|
|50262|New|Nor|2010-11-12|mod_rewrite log ip address vs hostname            |
|50274|New|Nor|2010-11-15|always pass CONTENT_LENGTH to the application     |
|50278|New|Nor|2010-11-16|-DFOREGROUND and ap_unixd_killpg()/ap_os_killpg() |
|50290|Inf|Nor|2010-11-18|vanilla apache 2.2.17 installation crashes (lib-ap|
|50296|New|Nor|2010-11-18|LDAPVerifyServerCert and possibly LDAPTrustedMode |
|50317|New|Nor|2010-11-22|Possible error in mod_cache's "Avoiding the Thunde|
|50336|New|Min|2010-11-25|PUT failures do not emit Allow:                   |
|50344|New|Nor|2010-11-26|ProxyPass does not handle different protocols when|
|50357|New|Enh|2010-11-28|improve matching mechanisms for mime type and enco|
|50372|New|Enh|2010-11-29|any reason for allowing ModMimeUsePathInfo only in|
|50390|New|Nor|2010-11-30|WARNING: Unrecognized options : --disable-ipv6    |
|50402|New|Nor|2010-12-02|SetEnv proxy-sendchunks is ignored for small amoun|
|50412|New|Nor|2010-12-04|if IndexOptions +XHTML, the correct MIME type shou|
|50423|Inf|Nor|2010-12-06|Apache is terminated with signal 11, Segmentation |
|50427|New|Nor|2010-12-07|Windows>=Vista+mod_auth_digest+command line=proble|
|50432|New|Enh|2010-12-08|add PCRE-mode for file based matches              |
|50436|New|Enh|2010-12-08|VirtualHost could behave like people expect it to |
|50444|New|Enh|2010-12-09|Pre-close logging handles in cgid agent           |
|50456|Inf|Nor|2010-12-10|Invalid Error 413 crash Apache                    |
|50464|New|Blk|2010-12-13|undefined reference to `BIO_set_callback' `BIO_set|
|50466|Inf|Maj|2010-12-13|httpd process doesn't recycle                     |
|50473|New|Maj|2010-12-14|zlib.dll Problem                                  |
|50521|New|Nor|2010-12-25|Comment at top of sample main config file is wrong|
|50525|New|Nor|2010-12-28|Header directive won't edit Location header from P|
|50530|New|Enh|2010-12-29|Provide rate limiting for failed authentication at|
|50532|New|Enh|2010-12-30|Mail protection                                   |
|50551|New|Nor|2011-01-06|Some proxied connections ignore ttl setting       |
|50562|Opn|Cri|2011-01-09|wrong PATH_INFO CGI environment with non-ASCII UTF|
|50584|New|Enh|2011-01-14|Add error message when RequestReadTimeout triggere|
|50592|New|Maj|2011-01-15|httpd dumps core on an IPv6 only system           |
|50602|New|Nor|2011-01-17|non thread safe functions used in apache httpd pro|
|50619|New|Min|2011-01-19|After changing resolv.conf signaling httpd doesn't|
|50628|New|Blk|2011-01-21|Core dump happens with Apache 2.2.15 using openssl|
|50630|New|Nor|2011-01-21|Apache return 500 error with authentication by LDA|
|50644|New|Enh|2011-01-24|Add support for maximum number of requests per Kee|
|50654|New|Nor|2011-01-25|FileETag ContentMD5 & Filename, optimisation to Co|
|50693|New|Nor|2011-01-31|AllowOverride Options=(not Foo) should permit no-o|
|50704|Inf|Nor|2011-02-01|mod_cache doesn't cache MultiViews                |
|50712|New|Maj|2011-02-02|Restart button only stops the server ...and do not|
|50727|New|Nor|2011-02-07|ISAPI EXTENSION_CONTROL_BLOCK Missing PostData wit|
|50765|New|Enh|2011-02-11|Runtime Backend Pinning via balancer-manager      |
|50770|New|Nor|2011-02-14|a rotatelogs issue, if time changed               |
|50773|Inf|Nor|2011-02-14|Dav lock database corruption                      |
|50774|New|Enh|2011-02-14|Have a way to invalidate cache without other reque|
|50777|New|Nor|2011-02-14|Back port buildconf specifies AC_PREREQ(2.13) fix |
|50796|New|Enh|2011-02-16|record time between keepalives in access log      |
|50807|New|Maj|2011-02-18|mod_proxy fails to send FIN response when a FIN is|
|50814|New|Nor|2011-02-21|SSI exec not working on Windows (Apache 2.x)      |
|50848|New|Enh|2011-03-01|Content Negotiation type map file precedence could|
|50869|New|Enh|2011-03-04|Need directive to control use and timeout of sessi|
|50873|New|Nor|2011-03-04|httpd does not start properly when built from sour|
|50878|New|Nor|2011-03-05|redundant operation when calling apr_stat         |
|50891|New|Nor|2011-03-08|Apache rewrites WWW-Authenticate headers from CGI |
|50902|Inf|Maj|2011-03-09|on major load on the server, poll() hangs         |
|50916|New|Nor|2011-03-11|RewriteMap program: mod_rewrite sends request but |
|50926|New|Nor|2011-03-14|unexpected <Directory> file-matching behavior     |
|50942|New|Maj|2011-03-17|Apache 2.2.16 forward proxy is 5x times slower tha|
|50945|Opn|Nor|2011-03-18|AJP: Missing support for ErrorOverride            |
|50948|Opn|Nor|2011-03-19|Connection not closed when CGI dies waiting for PO|
|50954|New|Nor|2011-03-21|ProxyRemote doesnt use CONNECT method with https s|
|50959|New|Enh|2011-03-23|Add cache-manifest to the mime type list          |
|50976|New|Nor|2011-03-26|Apache losts client's ip (%a or %h) sometimes.    |
|50999|Opn|Nor|2011-03-30|it seems the configure wrong detect my apr-util ve|
|51001|New|Nor|2011-03-31|patch for hook ap_lua_run_lua_open                |
|51005|New|Enh|2011-04-01|Allow to use username in LDAP filter              |
|51006|New|Blk|2011-04-01|Apache consume all memory and swap when setup as r|
|51019|New|Enh|2011-04-04|[PATCH] Implementation of Asynchronous processing |
|51020|Opn|Nor|2011-04-04|[PATCH] Apache/mod_fcgid.so does not start in comp|
|51022|New|Nor|2011-04-05|Segmentation fault on PUT request                 |
|51030|New|Enh|2011-04-06|Way to terminate CGI immediatly after closing conn|
|51078|Inf|Nor|2011-04-18|[PATCH] mod_fcgid spawned CGI Processes gets orpha|
|51079|New|Enh|2011-04-18|[PATCH] mod_fcgid spawned CGI Process cannot imper|
|51080|New|Nor|2011-04-18|[PATCH] mod_isapi does not support Except:100-Cont|
|51103|Opn|Nor|2011-04-21|mod_reqtimeout does not drop connection and return|
|51107|New|Min|2011-04-22|SetOutputFilter and SetInputFilter should allow "n|
|51118|New|Nor|2011-04-26|LDAP cache is cleared after graceful/restart and o|
|51127|New|Nor|2011-04-27|Make ProxyPassReverseCookiePath work as expected  |
|51168|New|Nor|2011-05-08|mod_status Total Traffic won't take account of int|
|51170|New|Nor|2011-05-09|I/O errors when using keep-alive + mod_ssl        |
|51174|New|Min|2011-05-09|SSLRequire predicates using OIDs unknown to openss|
|51186|New|Blk|2011-05-11|NEw Openssl 1.0.1 with new FIPS                   |
|51190|New|Min|2011-05-12|::/0 does not work with allow from and deny from  |
|51194|New|Nor|2011-05-13|FcgidWrapper does not support paths containing a s|
|51201|Inf|Nor|2011-05-15|Strange behavior REQUEST_METHOD & GET in mod_rewri|
|51223|New|Nor|2011-05-18|304 HTTP Not Modified strips out CORS headers     |
|51224|New|Nor|2011-05-18|mod_dav_fs should respect FileETag                |
|51239|New|Nor|2011-05-21|ap_get_client_block may block continuously sometim|
|51257|New|Nor|2011-05-24|Build failed when cross-compiling: ./gen_test_char|
|51258|New|Enh|2011-05-24|new features for mod_substitute                   |
|51296|New|Enh|2011-05-31|Dynamic engine support using SSLCryptoDevice suppo|
|51297|New|Nor|2011-05-31|Improve error handling during "UNLOCK"            |
|51303|New|Nor|2011-05-31|TraceEnable 500 error                             |
|51312|New|Nor|2011-06-01|mod_filter should support adding to the Vary heade|
|51322|New|Enh|2011-06-04|Prepend and append string to LDAP search parameter|
|51359|Inf|Enh|2011-06-11|Added shebang check for //! so that .js scripts wo|
|51365|New|Nor|2011-06-13|Mod_proxy mangles query string with mod_security  |
|51402|New|Nor|2011-06-21|"ForceLanguagePriority Fallback" not working as im|
|51406|New|Maj|2011-06-21|When listing files in subdirectories, the path is |
|51409|New|Nor|2011-06-21|Sorting options accepted by ls, but ignored       |
|51471|New|Nor|2011-07-04|<DirectoryMatch>ed IndexIgnore doesn't            |
|51479|New|Enh|2011-07-05|[PATCH] AB feature to optionally read in a reusabl|
|51491|New|Nor|2011-07-08|mod_dir breaks POSTs to URLs not ending in /      |
|51495|New|Nor|2011-07-11|mod_substitute cpu and memory limit               |
|51517|New|Maj|2011-07-16|mod_proxy_fcgi is not RFC 3875 compliant (SCRIPT_F|
|51522|Ver|Trv|2011-07-18|Wrong French translation in mpm.html ("Certains Mo|
|51542|New|Nor|2011-07-22|Apache HTTP Server vs PVS-Studio                  |
|51543|New|Nor|2011-07-22|Space in username not properly escaped in log file|
|51552|Inf|Cri|2011-07-25|Apache is not starting (2.2.15)                   |
|51573|New|Enh|2011-07-28|Easy way to erase log files                       |
|51576|Inf|Nor|2011-07-28|mod_rewrite rule stopped working                  |
|51600|New|Enh|2011-08-02|Loading the same certificate in multiple virtual h|
|51603|Inf|Maj|2011-08-02|Apache accepts completely bogus HTTP requests (pos|
|51607|Inf|Nor|2011-08-03|DBDPrepareSQL ( ap_dbd_prepare ) does not work cor|
|51629|New|Nor|2011-08-05|DocumentRoot check incorrect when running under ch|
|51674|New|Blk|2011-08-18|AJP Module Bad Request                            |
|51679|New|Min|2011-08-18|Code signature key expired                        |
|51689|New|Trv|2011-08-19|Cross compiling causes multiple Listen directives |
|51695|New|Trv|2011-08-20|Code clean up (ap_rputs merge)                    |
|51707|New|Nor|2011-08-22|ProxyPassReverse issues within <Location> (differe|
|51709|New|Nor|2011-08-23|ServerName/ServerAlias don't work if Host: header |
|51711|New|Nor|2011-08-23|mod_auth_digest have broken shared mem (nonce) cod|
|51718|New|Enh|2011-08-24|Feature Request: Add shorthand to redirect any Ser|
|51725|New|Nor|2011-08-26|Multiple Range: request accepted as "Range: n-m"  |
|51732|New|Nor|2011-08-29|Inconsistencies in log messages' verbosity levels |
|51747|New|Nor|2011-08-31|mod_fcgid loads entire request into memory while p|
|51757|Inf|Enh|2011-09-02|Add support for SASL auth in LDAP                 |
|51778|Inf|Cri|2011-09-07|while buliding(make) a unix source "httpd-2.2.20.t|
|51797|Inf|Maj|2011-09-10|Crash HTTPD(Windows)                              |
|51814|New|Enh|2011-09-14|mod_proxy in Apache HTTP 2.2 FIN_WAIT2 in server s|
|51842|New|Enh|2011-09-18|Suggesting a new action for the Header directive: |
|51858|Inf|Nor|2011-09-21|weird error for mod_rewrite with more then 3 param|
|51864|New|Nor|2011-09-22|mod_cache returns entire entity from origin server|
|51904|New|Nor|2011-09-28|output to stderr from cgi script causes script to |
|51951|New|Nor|2011-10-04|mod_mbox hang on some e-mails on press@a.o - was I|
|51964|Ver|Nor|2011-10-05|Documentation of RewriteRule flag skip unclear    |
|51965|New|Nor|2011-10-05|--with-z=DIR not being honored                    |
|51982|Opn|Nor|2011-10-06|ProxyPassReverse / balancer://cluster/ adds slash |
|51987|Inf|Nor|2011-10-07|RewriteRule doesn't work correctly with apache 2.3|
|51994|New|Enh|2011-10-07|Mod_authn_socache should have some way to flush th|
|52004|Ver|Trv|2011-10-10|Typo "indexe" in French translation of mpm.html   |
|52007|New|Nor|2011-10-10|Content-Length: 0 not set on proxy response       |
|52038|New|Nor|2011-10-16|NameWidth works incorrectly together with Charset=|
|52039|Inf|Nor|2011-10-16|Browser mode does not always work                 |
|52043|New|Nor|2011-10-17|Directories ".", "..", and "/" do not work correct|
|52081|New|Nor|2011-10-24|segfault if mbox files have unexpected names      |
|52090|New|Maj|2011-10-26|Apache thread hangs with error 500 when sending a |
|52120|Opn|Nor|2011-11-01|mod_cache edge case: uncacheable 304 sends cached |
|52123|New|Maj|2011-11-02|DoS: High memory usage in propfind                |
|52132|New|Nor|2011-11-03|[PATCH] process activity score calculated incorrec|
|52139|New|Nor|2011-11-05|Never Syntax Error on non-existent DocumentRoot   |
|52171|Ver|Nor|2011-11-13|confusing documentation of request phases         |
|52174|New|Enh|2011-11-13|Allow hard lower-limits on the number of fcgi serv|
|52178|New|Nor|2011-11-14|IPv6 IPs as ServerName not allowed                |
|52181|Ver|Nor|2011-11-14|mod_rewrite Technical Details Ruleset Processing d|
|52195|Inf|Nor|2011-11-16|Japanese texts are garbled on mailing list archive|
|52196|Inf|Nor|2011-11-16|winnt mpm, others mpm also have this bug. pool sha|
|52207|Inf|Maj|2011-11-18|Upgrade apache version from 2.0.59 to 2.2.12 or ab|
|52222|New|Nor|2011-11-21|IndexIgnore ignores parent directories in argument|
|52247|New|Nor|2011-11-26|mod_mbox gives up on unexpected message format    |
|52248|New|Nor|2011-11-26|Bugzilla version drop-down list does not offer "un|
|52252|New|Nor|2011-11-27|luajit support broken for (at least) luajit 2.0   |
|52253|Inf|Nor|2011-11-28|Timeout doesn't work. mod_proxy_balancer strongly |
|52264|New|Enh|2011-11-30|Update and complete balancer-manager XML output   |
|52269|Inf|Nor|2011-12-01|[mod_proxy] Apache reverse proxy status code trans|
|52275|New|Nor|2011-12-02|memory leak in proxy_ajp_handler                  |
|52298|Inf|Nor|2011-12-07|Can't enter website with client certificate on an |
|52301|New|Enh|2011-12-07|Error message "RSA server certificate ... CN ... d|
|52302|New|Enh|2011-12-07|Better documentation of how server name is determi|
|52304|New|Nor|2011-12-08|<Limit> Does Not Apply When URI Is Folder         |
|52313|New|Enh|2011-12-09|htdbm enhancement: options for colon-in-username, |
|52322|Inf|Enh|2011-12-13|Providing BBC developed httpd modules for inclusio|
|52342|New|Nor|2011-12-15|ap_internal_redirect dropping filters means incons|
|52370|New|Nor|2011-12-19|apreq_decode/url_decode length miscalculation     |
|52377|New|Enh|2011-12-20|Add Directives to assert user, group, and permissi|
|52383|New|Trv|2011-12-24|Instllation log typo                              |
|52391|New|Cri|2011-12-27|100% CPU usage while using Forward Proxy          |
|52395|New|Nor|2011-12-29|reload results in different end environment to res|
|52403|New|Nor|2011-12-31|FallbackResource doesn't work for non-existent PHP|
|52408|New|Nor|2012-01-01|Directoryindex matching automatically redirects   |
|52415|New|Nor|2012-01-03|LockFile placed inappropriately                   |
|52417|New|Nor|2012-01-03|HEADERS information in the file                   |
|52435|New|Nor|2012-01-06|Apache shutdown automatically                     |
|52439|New|Enh|2012-01-09|It should be possible to treat errors in .htaccess|
|52453|New|Enh|2012-01-11|Ability to configure --logfiledir                 |
|52465|New|Nor|2012-01-13|mod_dir is allowed to redirect proxy requests     |
|52481|New|Nor|2012-01-18|Rotatelog.exe crashes Apache after setting 256MB r|
|52485|New|Nor|2012-01-19|CPU load 100%                                     |
|52494|New|Enh|2012-01-22|allow the Action directive to point in the filesys|
|52495|New|Enh|2012-01-22|CACertificate, CADNCertificate, CARevocation, Cert|
|52501|New|Cri|2012-01-23|child pid 10824 exit signal Segmentation fault (11|
|52505|New|Nor|2012-01-23|Include with directory wildcards gives errors for |
|52509|New|Nor|2012-01-23|Resources protected by .htaccess file may not be a|
|52510|New|Cri|2012-01-23|Segmentation Fault 11                             |
|52520|New|Nor|2012-01-24|ProxyRemote & NoProxy directive can not take IPv6 |
|52532|New|Trv|2012-01-26|VirtualHost added TWICE to name-virtual-host list |
|52539|New|Nor|2012-01-26|Apache mod_dav 400 Bad Request for non-existent co|
|52546|New|Nor|2012-01-27|overwrite SERVER_PROTOCOL environment             |
|52573|New|Nor|2012-02-01|mod_speling case correction fails when URI has dou|
|52578|Opn|Enh|2012-02-02|Wrong "bytes sent" logged when connection is close|
|52594|New|Nor|2012-02-03|rpmbuild -ba errors out with "File not found by gl|
|52595|New|Nor|2012-02-03|requests with gzip+chunked encoded body don't prox|
|52605|Inf|Min|2012-02-05|Please allow request lines longer than 8k         |
|52612|New|Nor|2012-02-06|Default Service Account                           |
|52616|Opn|Enh|2012-02-07|SSLUserName uses SSL_CLIENT_S_DN insted of SSL_CLI|
|52617|New|Maj|2012-02-07|Visit the rewrite page from ServerAlias domain vho|
|52623|New|Nor|2012-02-08|does not build with pcre-8.30                     |
|52644|New|Nor|2012-02-12|document how SSL FakeBasicAuth works with strange |
|52668|New|Trv|2012-02-14|More future safe patch for old MSIE ssl-unclean-sh|
|52670|New|Trv|2012-02-15|please clarify the effect of SSLStrictSNIVHostChec|
|52683|New|Enh|2012-02-16|add a symlink option that rechecks the access perm|
|52700|Inf|Blk|2012-02-17|Not rendering html content instead displaying clie|
|52703|Inf|Maj|2012-02-18|SSL+SNI+client-auth "lost" after some time        |
|52710|New|Nor|2012-02-19|mod_fcgid should set PATH_INFO when configured in |
|52756|Inf|Trv|2012-02-24|proxy_html_module LoadModule line not created in h|
|52759|New|Cri|2012-02-24|Apache httpd child process consuming high CPU Util|
|52790|New|Nor|2012-02-28|ldap caching not sufficient                       |
|52795|Opn|Nor|2012-02-29|mod_fcgid fails to spawn process in C:\Program Fil|
|52806|New|Nor|2012-03-01|configure: --with-included-apr is not supported in|
|52807|New|Nor|2012-03-01|some random strings are accepted by "configure" as|
|52816|New|Nor|2012-03-03|Potential segfault in socache_shmcb_create        |
|52817|New|Nor|2012-03-03|Long directory path sucks (but it's really a valid|
|52822|New|Nor|2012-03-04|Quiet installation not fully quiet                |
|52824|Inf|Nor|2012-03-04|Conflicts between AllowOverride and AllowOverrideL|
|52828|New|Maj|2012-03-05|Child process is not replaced in Windows, after a |
|52832|New|Nor|2012-03-05|numerical configuration entry can be mistakenly in|
|52841|Opn|Nor|2012-03-06|[proxy_balancer:emerg] [pid 25593] AH01177: Failed|
|52851|New|Nor|2012-03-07|Core TimeOut directive doesn't work               |
|52855|Opn|Maj|2012-03-08|mod_ftp does not build against 2.4.x              |
|52860|New|Enh|2012-03-08|Support Transfer-Encoding: gzip                   |
|52865|New|Nor|2012-03-09|Crash by segmentation fault in mod_authn_core in A|
|52870|New|Cri|2012-03-09|100% CPU usage while using Forward Proxy          |
|52874|New|Enh|2012-03-09|Support Use TrustedFirst checking when verifying c|
|52884|New|Nor|2012-03-12|"localhost" leads to start failure                |
|52890|Inf|Nor|2012-03-12|--with-included-apr doesn't work when srclib/apr a|
|52891|New|Nor|2012-03-12|2.2 doesn't perform as well as 1.3                |
|52894|Inf|Nor|2012-03-13|Apache aborts abnormally when ChrootDir is set    |
|52927|Inf|Nor|2012-03-16|[Bug in httpd 2.2.4] [error] (70014)End of file fo|
|52933|New|Nor|2012-03-17|Child survives '-k stop', consuming lots of CPU   |
|52950|New|Nor|2012-03-20|Error when set AuthType to None with valid-user   |
|52963|New|Nor|2012-03-21|Typo in AuthLDAPURL RFC 2255 error message        |
|52975|New|Nor|2012-03-23|Receiving files is suboptimal                     |
|52976|New|Min|2012-03-23|Gratuitous string-duplication in module-configurat|
|52978|New|Enh|2012-03-23|Binding to an interface instead of an address     |
|52995|New|Nor|2012-03-28|httpd -V does not print the default Mutex         |
|53002|New|Nor|2012-03-29|<Location> and auth_form (trailing slash problem?)|
|53015|New|Nor|2012-03-31|missing apr_socket_close                          |
|53016|New|Nor|2012-03-31|missing apr_brigade_destroy                       |
|53023|New|Nor|2012-04-02|mod_rewrite RewriteCond parser error and documenta|
|53037|New|Enh|2012-04-05|clarify mod_ssl documentation on the UID/GID conte|
|53059|New|Nor|2012-04-10|Make httpd easier relocatable by using a variable |
|53098|New|Nor|2012-04-18|mod_proxy_ajp: patch to set worker secret passed t|
|53099|New|Enh|2012-04-18|feature request for mod_remoteip                  |
|53108|New|Enh|2012-04-19|clarification on url-path vs full filesystem path |
|53111|New|Nor|2012-04-20|1% of CMS sites expose database passwords         |
|53121|New|Nor|2012-04-22|Confusing documentation, gzip and deflate         |
|53149|New|Enh|2012-04-25|mod_ldap should/could use mod_socache             |
|53152|Opn|Nor|2012-04-26|RewriteRule documentation: Error about per-directo|
|53156|New|Enh|2012-04-27|CRL validation fails if CRL is missing            |
|53160|New|Cri|2012-04-29|Reverse Proxy mod_deflate doesn't zip back content|
|53183|New|Min|2012-05-03|mod_apreq2 entry point is apreq_module and not apr|
|53193|New|Nor|2012-05-04|SLVerifyClient optional_no_ca + SSLSessionCache = |
|53218|New|Blk|2012-05-11|ProxyPass worker name　(http://localhost:3128/...|
|53233|New|Maj|2012-05-15|Internal error: proxy: error reading status line f|
|53239|New|Maj|2012-05-16|Httpd has problems delivering data on rate-limited|
|53253|New|Maj|2012-05-17|TCP_NOPUSH used with sendfile(2), cause transfers |
|53284|New|Nor|2012-05-24|crash                                             |
|53290|New|Maj|2012-05-24|memory usage                                      |
|53292|New|Min|2012-05-25|add support for HTTP status code 308              |
|53305|New|Nor|2012-05-28|404 errors when adding query string in a balancer |
|53313|New|Nor|2012-05-28|SSI #echo VAR fails (#include OK) if URI/URL has f|
|53319|New|Nor|2012-05-29|Multiple DirectoryIndex statements in the same con|
|53332|New|Nor|2012-05-30|Requests with chunked encoding have no body availa|
|53350|New|Nor|2012-06-01|mod_cache caching 403 responses Apahce 2.2.22     |
|53351|New|Nor|2012-06-02|make fails if layout begins on first line of confi|
|53388|Opn|Nor|2012-06-08|mod_proxy_balanser generates 503 when proxying to |
|53402|New|Trv|2012-06-12|Incorrect error message for mod_ldap params       |
|53461|Inf|Cri|2012-06-23|Compilation problems                              |
|53462|New|Nor|2012-06-25|mod_rewrite does not remove trailing slash when as|
|53479|New|Nor|2012-06-27|mod_rewrite [B] flag should percent-encode the spa|
|53483|New|Enh|2012-06-29|dangerous PCRE patterns in *Match directives      |
|53539|New|Maj|2012-07-12|content type and character set are changing when t|
|53554|New|Nor|2012-07-16|Wrong case for hexadecimal percent encoding [patch|
|53555|New|Maj|2012-07-17|Scoreboard full error with event/ssl              |
|53579|New|Cri|2012-07-20|httpd looping writing on a pipe and unresponsive (|
|53581|New|Blk|2012-07-21|FollowSymlinks doesn't work with DirectoryMatch an|
|53594|New|Enh|2012-07-24|ipad as webserver                                 |
|53595|New|Nor|2012-07-24|Media type qs parameters for MultiViews sent in Co|
|53612|Inf|Nor|2012-07-27|Reverse Proxy causing 500 error SSL proxy 1.0.1c O|
|53618|New|Nor|2012-07-29|proxy_worker_shared fields not maintained in threa|
|53634|New|Nor|2012-08-01|mod_cache returning HTTP 200 for nonexistent resou|
|53638|New|Nor|2012-08-02|Problem with shortcuts to bugzilla in http://httpd|
|53640|Inf|Maj|2012-08-02|make: Fatal error: Command failed for target `htpa|
|53643|New|Cri|2012-08-02|apache segfaults with mod_authn_dbd when dbd_min i|
|53646|New|Nor|2012-08-02|Invalid uniformly distributed balancing of request|
|53651|New|Nor|2012-08-03|Worker failure doesn't have same behaviour as work|
|53667|New|Enh|2012-08-07|Add an equivalent option to "JkOptions ForwardLoca|
|53669|New|Nor|2012-08-07|IndexOptions Incremental IndexOptions documentatio|
|53686|New|Enh|2012-08-09|Status "501 Not Implemented" sent very late       |
|53690|New|Nor|2012-08-09|Calls to semctl() trigger "uninitialized memory" w|
|53692|New|Nor|2012-08-10|mod_auth_form loses request body before login page|
|53693|Opn|Nor|2012-08-10|mod_fcgid performance suffers under increase in re|
|53704|New|Enh|2012-08-13|True online configuration is needed - via LDAP?   |
|53705|New|Nor|2012-08-13|Align server-status balancer display to balancer-m|
|53706|New|Enh|2012-08-13|Include a status display for mod_ldap when present|
|53722|New|Nor|2012-08-15|when -D NO_DETACH is used, no PID file should be c|
|53736|New|Nor|2012-08-17|/balancer-manager doesn't save runtime adjusted se|
|53757|New|Enh|2012-08-21|RewriteMap of type txt should allow specifying col|
|53767|New|Nor|2012-08-23|htcacheclean deletes stale "vary" header files eve|
|53772|New|Nor|2012-08-24|REDIRECT_URL not accessible in mod_proxy          |
|53787|New|Reg|2012-08-28|In forward proxy, doesn't cache disk anymore      |
|53823|New|Nor|2012-09-03|[patch] pure IPv6 only host fix (server/config.c) |
|53835|New|Cri|2012-09-06|mod_proxy_ajp truncate output when using deflate i|
|53870|New|Maj|2012-09-13|Deadlock in CRYPTO_add_lock with Apache 2.2.22 wor|
|53886|New|Nor|2012-09-18|can't start apache control in Redhat Linux 3 X64  |
|53899|New|Nor|2012-09-19|SSL_OP_ALL disables the mitigation code for CVE-20|
|53915|New|Nor|2012-09-21|Colon lost when :port is used in CacheKeyBaseURL  |
|53919|Inf|Enh|2012-09-21|DEFAULT_LOG_FORMAT is not RFC6302 compliant       |
|53923|New|Min|2012-09-23|Overriding CustomLog directive seems impossible   |
|53932|New|Nor|2012-09-25|PROPFIND doesn't support If, If-Match ETag predica|
|53947|New|Enh|2012-09-29|Feature Request, RewriteRule - ProxyPreserveHost f|
|53961|New|Nor|2012-10-04|Null sessions to the default vhost                |
|53970|New|Nor|2012-10-05|Network control directives affects internal subreq|
|53981|New|Nor|2012-10-08|move def of log_request_state from mod_log_config.|
|53988|New|Enh|2012-10-10|Missing FCGIWrapper script should not be a critica|
|54030|New|Enh|2012-10-19|Support subjectAltName when (reverse-)proxying    |
|54033|New|Enh|2012-10-21|Parent languages are not ordered according to Acce|
|54072|New|Reg|2012-10-30|Syntax error front-end virtual-path too long      |
|54102|New|Enh|2012-11-05|new feature: automatic route detection            |
|54118|New|Nor|2012-11-08|Handle leak on parent httpd process when rotatelog|
|54126|New|Maj|2012-11-09|Mod_rewrite failing because of url in query string|
|54134|New|Enh|2012-11-11|new feature: ability to use multiple routes in sti|
|54136|New|Min|2012-11-11|balancer-handler shows xml not, when only xml para|
|54158|New|Nor|2012-11-16|Suggestion regarding 2.0 to 2.2 Upgrade Documentat|
|54183|Inf|Nor|2012-11-21|PROPFIND doesn't report getcontenttype property   |
|54215|New|Maj|2012-11-27|configure fails for httpd 2.2.3 with openssl 1.0.1|
|54221|Opn|Nor|2012-11-28|no ErrorLog prefix on CGI errors                  |
|54222|New|Min|2012-11-28|ServerTokens checking is not complete             |
|54223|New|Nor|2012-11-29|AH00554 error when runtime configuration Includes |
|54252|New|Nor|2012-12-05|acinclude.m4 requires -lz when linking with ssl st|
|54253|New|Nor|2012-12-05|mod_proxy_ftp doesn't handle/log partial or cancel|
|54255|New|Nor|2012-12-06|mod_deflate adjusts the headers "too late", should|
|54269|New|Maj|2012-12-09|mod_proxy_html documentation misses several things|
|54276|New|Nor|2012-12-10|rotatelogs not getting killed on graceful restart |
|54280|New|Nor|2012-12-11|mod_auth_form inline login not working with traili|
|54281|New|Nor|2012-12-11|Stick use Partial parameters from query string    |
|54289|New|Nor|2012-12-13|"ap_get_brigade" api is failing in "AP_MODE_SPECUL|
|54306|New|Enh|2012-12-15|add regexp versions of ProxyPassReverse, ProxyPass|
|54309|New|Trv|2012-12-15|clarification on the <Location> directive when use|
|54310|Opn|Nor|2012-12-15|mod_proxy_html drops meta elements with http-equiv|
|54319|New|Reg|2012-12-17|ProxyPass has no effect in <Location> if rewrite o|
|54339|New|Nor|2012-12-21|piped log entries > PIPE_BUF can be interleaved   |
|54342|New|Nor|2012-12-22|AuthnCacheSOCache can't pass args to socache provi|
|54343|New|Maj|2012-12-22|Add sanity checks for malloc() in mpm_winnt.c and |
|54358|New|Nor|2012-12-29|Status 500 when using ldap on Solaris because apr_|
|54363|New|Nor|2012-12-31|make time conversion caching functions thread-safe|
|54364|New|Nor|2012-12-31|Add ref to mod_fcgid docs                         |
|54365|New|Nor|2013-01-02|Connection closed by server during file transfer  |
|54366|New|Nor|2013-01-02|$sysconfdir/extra/httpd-dav.conf is not built base|
|54367|Opn|Maj|2013-01-02|Location header in response to PUT is not %-escape|
|54385|New|Enh|2013-01-08|SSL configuration independent from virtual hosts, |
|54401|New|Nor|2013-01-10|Suggest to make ProxyPassReverseCookieDomain accep|
|54415|New|Enh|2013-01-14|Please tell the root cause of mutex and scoreboard|
|54431|Inf|Blk|2013-01-16|Unable to start the Apache 2.4.3 windows service. |
|54498|New|Nor|2013-01-28|apache crash on any cgi request with certain http |
|54502|New|Nor|2013-01-29|Apache deadlock on epoll_ctl error (1000 process l|
|54512|Inf|Cri|2013-01-31|Apache hung                                       |
|54517|New|Nor|2013-02-01|proxy balancer: timeout or partial failure of back|
|54518|New|Nor|2013-02-01|mod_rewrite not adding Vary header                |
|54519|New|Nor|2013-02-02|httpd already running                             |
|54526|New|Nor|2013-02-05|mod_proxy_http ignores request abortion           |
|54543|New|Enh|2013-02-10|Compile regex only when need                      |
|54546|New|Nor|2013-02-11|httpd crashes on first HUP after change Listen dir|
|54549|New|Nor|2013-02-11|mod_mime AddEncoding and mod_negotiation fix_encod|
|54556|New|Enh|2013-02-13|New flag to add default rule in rule chain        |
|54560|New|Nor|2013-02-13|Potential segfault on return from ap_server_root_r|
|54563|New|Maj|2013-02-15|mod_webdav ignores quota                          |
|54578|New|Nor|2013-02-18|Bad docs or unchecked code for "LimitRequestFields|
|54587|Opn|Nor|2013-02-19|LDAPConnectionPoolTimeout does not work in all cas|
|54605|New|Enh|2013-02-24|mod_negotiation should cache the info it generates|
|54608|New|Enh|2013-02-25|Support an option to allow page caching when using|
|54622|New|Nor|2013-02-28|shared memory cleanup                             |
|54626|New|Nor|2013-03-01|mod_authnz_ldap through util_ldap.c does not suppo|
|54633|New|Nor|2013-03-04|Invalid % encoding not rejected                   |
|54637|New|Nor|2013-03-05|Digest: secret not used                           |
|54640|New|Nor|2013-03-05|Slow transaction on a balance member is holding su|
|54649|New|Nor|2013-03-06|Incorrect PIDFILE prevent httpd restart           |
|54653|New|Min|2013-03-08|Suggestion to add https example for forward proxy |
|54656|New|Maj|2013-03-09|SNI and SSLProxyCheckPeerCN based on "connection" |
|54657|New|Nor|2013-03-09|DNS lookup failure for load balancer member does n|
|54683|New|Min|2013-03-13|Ignor directive ErrorDocument with null byte      |
|54699|Opn|Enh|2013-03-15|[feature request] cli webaccess tester            |
|54701|New|Cri|2013-03-15|Apache 2.4.3 Migration Issue Not loading the pages|
|54704|New|Nor|2013-03-15|Web Services stalling on it's own                 |
|54719|New|Nor|2013-03-18|httpd should check for and eventually create pid f|
|54752|New|Nor|2013-03-25|mod_ssl should not use uninitialized memory as ran|
|54782|New|Nor|2013-04-02|Memory Corruption errors - mpm_worker mod_perl    |
|54785|New|Nor|2013-04-02|Random crash when httpd server is stopped         |
|54793|New|Nor|2013-04-03|Socket timeout handler can delete uploaded files P|
|54794|New|Reg|2013-04-03|mod_wsgi|fcgid and subversion >= 1.7 issues       |
|54795|New|Nor|2013-04-03|'apxs -g -n' should be self-referring             |
|54796|Inf|Enh|2013-04-03|CustomLog should be able to use syslog as ErrorLog|
|54804|New|Nor|2013-04-05|mod_fcgid sends a Continue 100 response automatica|
|54813|New|Nor|2013-04-08|documnt the Require args used by authz_dbm includi|
|54816|Inf|Nor|2013-04-08|AH00566: request failed: invalid characters in URI|
|54817|New|Nor|2013-04-09|if prefix and sysconfdir are the same then http.co|
|54820|Inf|Cri|2013-04-09|REwriterule stops working                         |
|54824|New|Nor|2013-04-10|Spec file is missing libuuid-devel requirement    |
|54830|New|Enh|2013-04-11|Make SSLPProxyMachineCertificateFile configurable |
|54848|New|Nor|2013-04-15|Client field too short for IPv6 addresses         |
|54856|Inf|Enh|2013-04-17|NSCreateObjectFileImageFromFile                   |
|54858|New|Nor|2013-04-17|ld duplicate                                      |
|54861|New|Blk|2013-04-18|The number of connections with mysql is more      |
|54869|Inf|Nor|2013-04-19|Non-breaking space characters cause httpd to choke|
|54875|New|Nor|2013-04-23|Conditional request predicated on another URL's ET|
|54878|New|Nor|2013-04-23|Multiple Listen directives prevent server to start|
|54905|Inf|Cri|2013-04-29|Apache2 loops in child Segfaults                  |
|54910|New|Enh|2013-04-30|Format %{Foobar}o cannot be used to log Date and S|
|54911|New|Enh|2013-04-30|Allow logging of fields set by a backend server in|
|54914|New|Nor|2013-04-30|mod_dir DirectoryIndex breaks WebDAV PROPFIND / DE|
|54915|New|Nor|2013-04-30|GET on a WebDAV-enabled collection, with Directory|
|54918|New|Enh|2013-05-02|Implement RFC 6797 HTTP Strict Transport Security |
|54919|Inf|Nor|2013-05-02|*** glibc detected *** /usr/sbin/httpd: double fre|
|54930|New|Nor|2013-05-06|Allow empty message in ErrorDocument directive    |
|54934|Inf|Cri|2013-05-07|Apache is crashing intermittently with a message "|
|54936|New|Nor|2013-05-08|Some potential bugs reported by static analysis to|
|54949|New|Nor|2013-05-10|[PATCH] mod_cache: fix uninitialized tmppath varia|
|54952|Inf|Cri|2013-05-10|[Fri May 10 17:39:01 2013] [error] proxy: CLUSTER:|
|54953|New|Nor|2013-05-11|<VirtualHost 0.0.0.0:80> matches IPv6             |
|54958|New|Nor|2013-05-13|mod_deflate + mod_mime with SSI gives mixed compre|
|54962|New|Maj|2013-05-14|Apache will set incorrect Content-Length header an|
|54965|New|Enh|2013-05-14|Allow ProxyPassMatch in Directory context         |
|54976|New|Nor|2013-05-15|ProxyPass parameter "acquire" and "ttl" ignored in|
|54986|New|Maj|2013-05-16|httpd hanging on large form submit in ap_run_handl|
|54989|New|Nor|2013-05-17|Apache Segfaults on OS X at random - how can I dia|
|54993|New|Nor|2013-05-20|Critical error: File descriptor in bad state: apr_|
|54998|Ver|Nor|2013-05-21|Apache 2.4 terminates all SSL connections using an|
|55000|New|Nor|2013-05-21|Memory usage per process doubles when Apache is co|
|55021|New|Enh|2013-05-28|Support arbitrary sql to authentication username/p|
|55022|Inf|Cri|2013-05-28|child pid 3123 exit signal Bus error (10) - Apache|
|55034|Inf|Maj|2013-05-31|Apache 2.4.4 won't open more that 32k VH file hand|
|55039|New|Enh|2013-05-31|"RequestHeader edit" can't access environment vari|
|55045|New|Nor|2013-06-01|calls to gets() in test_find.c and test_parser.c  |
|55068|New|Enh|2013-06-06|root permissions when writing to per vhosts errorl|
|55069|New|Min|2013-06-06|notice message in error_log even when LogLevel err|
|55070|Opn|Enh|2013-06-06|mod_fcgid stderr always goes to main error log    |
|55072|New|Nor|2013-06-07|ErrorLog doesn't work well when apache shutdown   |
|55093|New|Nor|2013-06-12|[PATCH] mod_fcgid 2.3.7 truncates large posts on R|
|55096|New|Nor|2013-06-12|Make not running on httpd configure Solaris       |
|55098|New|Nor|2013-06-13|does not listen to IP4 when both IP4 address and I|
|55106|New|Enh|2013-06-17|ProxyErrorOverride considers response codes >= 400|
|55117|New|Nor|2013-06-18|GracefullTimeout for worker threads               |
|55147|New|Nor|2013-06-26|"Header always" w/ cache different in 2.4         |
|55148|Inf|Nor|2013-06-26|Error during SSL Handshake with remote server     |
|55152|New|Nor|2013-06-28|graceful restart adjusts to new balancer members, |
|55156|New|Nor|2013-06-28|mod_cache not respecting s-maxage cache-control he|
|55178|New|Nor|2013-07-01|[PATCH] mod_authnz_ldap SASL authentication suppor|
|55192|New|Trv|2013-07-03|htaccess error messages missing request context   |
|55193|New|Min|2013-07-03|ErrorLogFormat is ignored by some modules         |
|55226|New|Enh|2013-07-09|Request for "domain cluster" feature for mod_proxy|
|55234|New|Maj|2013-07-10|Working of attribute "protocol" attribute "protoco|
|55276|Inf|Enh|2013-07-17|Add REST API for load balancer for dynamic registr|
|55278|New|Nor|2013-07-18|mod_session's cookie may be empty, is repeated twi|
|55284|New|Nor|2013-07-20|repeatable segv                                   |
|55286|New|Nor|2013-07-21|Floating point exception (8) in mod_auth_digest   |
|55293|New|Nor|2013-07-22|Incorrect default MIME type for .woff fonts       |
|55306|New|Nor|2013-07-25|Error when copying svn repository, which contains |
|55323|New|Nor|2013-07-29|Double unescaped uri in sub request handler       |
|55327|New|Nor|2013-07-30|Segmentation fault when stopping Apache 2.4.6 norm|
|55340|New|Maj|2013-08-01|Listen for valid, unconfigured IP address passes c|
|55344|New|Nor|2013-08-02|missing ap_hook_monitor on windows                |
|55346|New|Nor|2013-08-02|When on filled quota filesystem, mod_fcgid init in|
|55348|New|Nor|2013-08-02|%h is not changed in logging, only %a             |
|55351|New|Enh|2013-08-04|allow ProxyPassReverseCookieDomain to automaticall|
|55362|New|Nor|2013-08-05|Apache httpd sends "400 Bad Request" to client due|
|55379|New|Min|2013-08-07|htdigest -c doesn't behave as described anymore   |
|55394|New|Nor|2013-08-09|apache 2.4 randomy crashes with signal 6          |
|55401|New|Enh|2013-08-11|document that force-proxy-request-1.0 implies prox|
|55415|New|Maj|2013-08-14|Proxy loop caused by ProxyErrorOverride and ErrorD|
|55431|New|Nor|2013-08-16|mod_negotation does not force the mime type listed|
|55433|New|Nor|2013-08-16|mod_proxy ignores final status code for aborted re|
|55443|Inf|Maj|2013-08-17|never gives 300 multiple choices                  |
|55445|New|Maj|2013-08-18|mod_socache_memcache ignores expiry, creating eter|
|55447|New|Enh|2013-08-18|make type-maps usable again, by making them access|
|55448|New|Nor|2013-08-19|segfault in set_max_workers at event.c:3194 on SIG|
|55449|New|Maj|2013-08-19|AH01185: worker slotmem_create failed --> slotmem |
|55452|New|Maj|2013-08-19|Redirect                                          |
|55458|New|Enh|2013-08-20|allow to configure what mod_ssl responds when one |
|55460|New|Enh|2013-08-21|allow service names to be used in the Listen direc|
|55467|New|Nor|2013-08-21|Support for OpenSSL custom TLS extensions and supp|
|55523|New|Trv|2013-09-04|auth_groupfile error log on access even though suc|
|55535|Inf|Nor|2013-09-08|incorrect check state parametr                    |
|55540|New|Cri|2013-09-09|mod_proxy gzip chunked issue (sample site provided|
|55549|New|Min|2013-09-11|AuthLDAPSubGroupAttribute doesn't do anything     |
|55550|New|Nor|2013-09-11|AuthLDAPSubGroupClass checking is very inefficient|
|55556|New|Nor|2013-09-13|apachebench (ab) doesn't use so_reuseaddr         |
|55557|New|Nor|2013-09-14|Some cppcheck reports                             |
|55573|New|Enh|2013-09-19|FileETag needs MTimeSeconds, MTime with granularit|
|55581|New|Enh|2013-09-22|Support concurrent connections to same FastCGI pro|
|55590|Inf|Maj|2013-09-24|second commit is failing if space is in file name |
|55596|New|Enh|2013-09-25|Add date format used by Expires header            |
|55607|New|Enh|2013-09-28|Re-set HOME environment variable to directory from|
|55615|New|Nor|2013-09-30|Connections are starved and not balanced when conc|
|55619|New|Nor|2013-10-02|Apache httpd reported 500 internal error when uplo|
|55627|New|Min|2013-10-04|Remove unnecessary APLOGNO() for trace logging per|
|55636|Inf|Cri|2013-10-07|long lost child came home - Apache is not respondi|
|55646|Inf|Nor|2013-10-10|non-2xx responses are not considered errors       |
|55654|New|Nor|2013-10-15|Extract variables from configuration without start|
|55670|New|Min|2013-10-18|Startup may fail silently at post_config          |
|55673|New|Nor|2013-10-18|httpd fails to start with SSLProxyMachineCertifica|
|55680|New|Enh|2013-10-20|online manual directory option doesn't exist      |
|55698|New|Maj|2013-10-24|Apache 2.2 + mod_fcgid 2.3.7 (CentOS 6.4) graceful|
|55700|New|Enh|2013-10-24|add something like RewriteOptions InheritDown     |
|55707|New|Nor|2013-10-25|SSLProtocol directive seem to be ignored over diff|
|55708|New|Nor|2013-10-25|Access violation in msvcrt.dll when calling getenv|
|55711|New|Min|2013-10-28|--enable-foo doesn't enable foo                   |
|55712|New|Nor|2013-10-28|Relative <!--#include virtual="../file.shtml"--> g|
|55720|New|Enh|2013-10-29|separate LDAP Bind timeout from LDAPTimeout       |
|55738|New|Nor|2013-11-03|PVS-Studio: few issues                            |
|55763|New|Nor|2013-11-09|raise roots soft RLIMIT_NPROC on linux for high ma|
|55774|New|Nor|2013-11-13|ab: optionally accept tls client certificate      |
|55781|New|Nor|2013-11-15|ajp_read_header: ajp_ilink_receive failed; 120006)|
|55786|New|Maj|2013-11-16|SSLVerifyClient and OptRenegotiate result in a 403|
|55787|New|Maj|2013-11-16|Chroot fails with "Cannot chroot when not started |
|55790|New|Maj|2013-11-17|mod_fcgid lockfile hardcoded to be in /tmp        |
|55793|New|Enh|2013-11-18|DTrace/SystemTap support                          |
|55808|New|Nor|2013-11-21|File integrity verification using MD5 and SHA1    |
|55819|Inf|Nor|2013-11-27|Closing connection behaviour                      |
|55828|New|Cri|2013-11-28|Httpd not start if use ProxyPass balancer://      |
|55834|New|Maj|2013-12-02|Apache does not honor the openssl library path giv|
|55838|New|Nor|2013-12-03|PHP files are being executed instead of downloaded|
|55841|New|Nor|2013-12-04|Misleading news items on bugfix releases ("This ve|
|55856|New|Nor|2013-12-08|YYEMPTY (-2) used as index into yytname (const arr|
|55866|New|Nor|2013-12-11|When ProxyPreserveHost is on, SSL expects the wron|
|55878|New|Nor|2013-12-12|mod_fcgid kills spawned processes too early       |
|55881|New|Nor|2013-12-13|segmentation fault at proxy_util.c:1546           |
|55883|New|Enh|2013-12-14|string callers of ap_expr should be able to transf|
|55887|New|Maj|2013-12-16|In Windows apache, when user access to /con, apach|
|55897|New|Nor|2013-12-17|[PATCH]patch with SO_REUSEPORT support            |
|55898|New|Enh|2013-12-17|[RFE] listen on unix socket?                      |
|55914|New|Reg|2013-12-20|child exit segmentation fault after apache gracefu|
|55919|New|Nor|2013-12-22|EPREFIX and dynamic modules                       |
|55942|New|Nor|2014-01-01|400 - Bad Request on POST (Windows Server 2012 Hyp|
|55952|New|Nor|2014-01-05|ab: SSL keep-alive fails with apr_pollset_poll: Th|
|55962|New|Enh|2014-01-06|mod_remoteip should not allow an external proxy to|
|55963|New|Nor|2014-01-07|Add application/ld+json to mime.types             |
|55981|Opn|Nor|2014-01-09|mod_mbox hang on some e-mails on user@openoffice.a|
|55985|Opn|Nor|2014-01-10|apache does not reopen logs when multiple graceful|
|55989|Opn|Enh|2014-01-11|write to error log upon RewriteRule [F]orbidden   |
|55991|New|Nor|2014-01-12|mod_charset_lite doesn't bail out on non-identity |
|56009|Inf|Cri|2014-01-14|Memory leak in httpd 2.4.3 over time with persista|
|56014|New|Nor|2014-01-15|MOd rewrite CO Cookie method the lifetime flag not|
|56028|New|Enh|2014-01-17|Add http/1.0, http/1.1 NPN advertisement to enable|
|56034|New|Nor|2014-01-20|CPU consumption due to circular linked list in ap_|
|56040|New|Enh|2014-01-21|should be able to remove Max-Age cookie parameter |
|56041|New|Enh|2014-01-21|should be able to disable session expiry increment|
|56052|New|Nor|2014-01-22|ap_session_load called multiple times for expired |
|56055|New|Nor|2014-01-23|Route is not extracted properly when a session coo|
|56064|New|Enh|2014-01-25|Optimize PNGs                                     |
|56067|New|Nor|2014-01-27|FallbackResource doesn't work if directory exists |
|56081|New|Maj|2014-01-28|Apache 2.2.26 SIGSEGVs when POST'ing data         |
|56091|Inf|Nor|2014-01-30|SSL handshake error when httpd compiled on Oracle |
|56098|New|Nor|2014-02-01|duplicate cookie                                  |
|56101|New|Cri|2014-02-03|Apache 2.4.6 ceases processing requests (scoreboar|
|56102|New|Nor|2014-02-03|SSL_CLIENT_S_DN_x509_0 is undefined in the environ|
|56109|New|Nor|2014-02-05|Cannot increase the read limit                    |
|56113|New|Nor|2014-02-06|dist commit messages missing from mail-archives di|
|56131|New|Nor|2014-02-12|ProxyPassReverse / zealously replaces Location hea|
|56135|New|Nor|2014-02-13|Add DC to list of x509 components                 |
|56152|New|Nor|2014-02-18|ProxyBlock does not accept network addresses      |
|56176|New|Nor|2014-02-21|mod_substitute truncates the response body if the |
|56188|New|Nor|2014-02-25|mod_proxy_fcgi does not send FCGI_ABORT_REQUEST on|
|56209|New|Nor|2014-03-03|Uninitialised variables in os/win32/ap_regkey.c   |
|56226|Ver|Nor|2014-03-06|per VirtualHost KeepAliveTimeout is not recognized|
|56229|New|Enh|2014-03-06|ocsp ProxyHost and ProxyPort support              |
|56230|New|Nor|2014-03-07|mod_access_compat can log a bogus client denied me|
|56235|New|Nor|2014-03-07|quotes should be optional around expr             |
|56247|New|Cri|2014-03-12|semaphore creation for proxypass                  |
|56250|New|Nor|2014-03-12|sbindir in config.layout for Apache has bin instea|
|56251|New|Nor|2014-03-12|Increase maximum length of FcgidInitialEnv string |
|56252|New|Enh|2014-03-12|make install as privileged user creates files not |
|56262|New|Nor|2014-03-14|ab does not work with extremely long cookies      |
|56264|New|Trv|2014-03-14|Confusing error with .htaccess rewrite to proxy wh|
|56270|New|Enh|2014-03-15|--with-ssl=/foo w/o pkgconfig needs help on AIX 64|
|56288|New|Enh|2014-03-19|rewrite URLs in style attributes                  |
|56289|New|Nor|2014-03-19|Buffer overflow in mod_proxy_html's string replace|
|56308|New|Nor|2014-03-24|1 second delay in handle request kills performance|
|56312|New|Nor|2014-03-25|Can't configure different balancing workers that c|
|56314|New|Nor|2014-03-25|exiting from MPM-worker child caused assert in apr|
|56326|New|Nor|2014-03-27|cache_quick_handler does not serve responses with |
|56331|New|Nor|2014-03-29|windows 'access denied' during revalidaton of reso|
|56333|New|Enh|2014-03-31|API to resume a SUSPENDED connection              |
|56362|New|Maj|2014-04-08|ldaps only works with port 636. Non-standard port |
|56379|New|Nor|2014-04-09|Number of columns in the results returned from pgs|
|56395|New|Enh|2014-04-11|Allow SERVER_ADDR environment variable to be optio|
|56404|New|Nor|2014-04-12|endless loop  when connect to a website(https)  wh|
|56413|New|Blk|2014-04-15|can not restart httpd on centos 5.10 64bit        |
|56422|New|Nor|2014-04-17|authnz_ldap with other forms of authn can fail req|
|56457|New|Nor|2014-04-25|mod_proxy_html.c: 2 * cut'n'paste errors          |
|56473|New|Nor|2014-04-30|ETags don't change when headers do                |
|56475|New|Enh|2014-04-30|Allow TLS record size to be configured            |
|56483|New|Enh|2014-05-02|add disableKeepAlivePercentage similar to tomcat h|
|56493|New|Min|2014-05-06|mod_expires should not set expires in future for s|
|56495|New|Nor|2014-05-06|Application behind mod_proxy does not get SessionH|
|56500|Opn|Enh|2014-05-07|vhosts priority order with wildcard               |
|56504|New|Nor|2014-05-08|cannot build static support binaries              |
|56508|New|Nor|2014-05-09|Requiring SNI - SSLStrictSNIVHostCheck semantics  |
|56517|New|Enh|2014-05-12|Virtualhosts cannot inherit parent CustomLog      |
|56528|New|Enh|2014-05-15|"bad flags delimiter" - improve helpfulness       |
|56541|New|Nor|2014-05-18|Proxy 502's on large file post requests           |
|56559|New|Nor|2014-05-25|multiple unix sockets in one virtualhost fails    |
|56569|New|Nor|2014-05-27|Null CRC in gzip footer with mod_cgid and ErrorDoc|
|56587|New|Nor|2014-06-03|Many VirtualHost's with SSLEngine On              |
|56590|New|Enh|2014-06-04|(REST-) API for configuring balancer manager remot|
|56594|Inf|Nor|2014-06-05|mod_authn_dbd, mod_dbd and mod_ssl                |
|56598|New|Nor|2014-06-06|Content-Length header should be always interpreted|
|56621|New|Nor|2014-06-13|Rotatelogs.exe first start                        |
|56622|New|Nor|2014-06-13|mod_reqtimeout incorrectly applies timeouts to CON|
|56626|New|Nor|2014-06-15|Add info about rotatelogs to log rotation document|
|56633|New|Nor|2014-06-16|mod_auth_basic breaks mod_autoindex               |
|56645|New|Maj|2014-06-19|socket callback with timeout callback causes infin|
|56664|New|Nor|2014-06-24|Proxy retry timeout does not cope with system time|
|56687|New|Nor|2014-07-01|ProxySourceAddress failed to bind socket to local |
|56697|New|Maj|2014-07-04|status page still shown while blocked             |
|56718|New|Nor|2014-07-14|Cleanup request Host headers when absolute URI are|
|56719|New|Nor|2014-07-14|parallel requests get served with delays          |
|56738|New|Enh|2014-07-17|Ability to extract route from cookie with regexp  |
|56740|New|Nor|2014-07-18|suspended_count not maintained properly with wstun|
|56750|New|Enh|2014-07-20|SuexecUserGroup replacement                       |
|56751|New|Maj|2014-07-20|Fails to properly mitigate Slow Post DoS attack   |
|56753|New|Nor|2014-07-21|mod_lua.so: symbol luaL_openlib: referenced symbol|
|56778|New|Nor|2014-07-28|while running make command i got this error       |
|56794|New|Nor|2014-07-31|Added AuthDBDFullAuthQuery option                 |
|56795|Inf|Nor|2014-07-31|Apache 2.4.10 Program received signal SIGPIPE, Bro|
|56818|Inf|Nor|2014-08-05|SetEnvIf may set invalid string length on empty st|
|56843|New|Enh|2014-08-12|Support different OCSP stapling max ages          |
|56868|New|Nor|2014-08-18|relative LuaRoot broken                           |
|56879|New|Nor|2014-08-22|Information disclosure                            |
|56889|New|Nor|2014-08-26|Close state never dies                            |
|56898|New|Nor|2014-08-28|Headers in err_headers_out are not returned when a|
|56918|Opn|Blk|2014-09-06|error: 'ap_copy_scoreboard_worker' undeclared here|
|56926|New|Nor|2014-09-08|Filename causes AH02599 slotmem issue             |
|56933|New|Min|2014-09-09|not sure it's an appache bug : some browser want t|
|56942|New|Reg|2014-09-10|Unable to implement TRANSFER-CHUNKED:ENCODING with|
|56943|New|Nor|2014-09-10|mod_proxy_connect - AH02447: err/hup on backconn  |
|56977|New|Maj|2014-09-12|segfaults when using mod_mem_cache + mod_disk_cach|
|56986|New|Blk|2014-09-17|chunked Transfer-Encoding forbidden: /test/test.dl|
|57014|New|Cri|2014-09-24|Incorrect test for CC_FOR_BUILD prevents build (on|
|57023|New|Nor|2014-09-26|Socache shmcb don't cache file bigger than 11k    |
|57028|New|Enh|2014-09-27|mod_spdy - support Apache 2.4                     |
|57044|New|Nor|2014-09-29|[PatchAvailable] Use base64url in mod_unique_id ('|
|57045|New|Nor|2014-09-30|dumpio output strings are missing                 |
|57046|New|Enh|2014-09-30|Add additional parameter to enable check URL befor|
|57056|New|Maj|2014-10-03|Rewrite port is taken into hostname               |
|57067|New|Nor|2014-10-08|A proxy worker both standalone and balancer member|
|57069|New|Nor|2014-10-08|apache ssl timeout during chunked request in rever|
|57073|New|Cri|2014-10-09|Intermittent Connection Issues using default httpd|
|57085|New|Enh|2014-10-14|Implement Proxy Protocol in httpd                 |
|57087|New|Nor|2014-10-14|mod_proxy_fcgi doesn't send cgi CONTENT_LENGTH var|
|57100|Ver|Nor|2014-10-16|"SSLProtocol ALL" is ignored for virtual hosts    |
|57101|New|Enh|2014-10-16|[PATCH] Better error reporting when child spawn fa|
|57109|New|Nor|2014-10-17|GPG verification examples are wrong               |
|57119|Opn|Enh|2014-10-20|Suppress address reuse / DNS cache in mod_proxy   |
|57120|New|Nor|2014-10-21|Disable SSLv3 by default (POODLE)                 |
|57121|New|Nor|2014-10-21|ocsp stapling should not pass temporary server out|
|57131|New|Nor|2014-10-22|OCSP Stapling scalability concern                 |
|57159|New|Min|2014-10-28|mod_ssl OCSP Stapling directives don't support per|
|57160|New|Nor|2014-10-29|httxt2dbm doesn't generate files on NAS           |
|57174|New|Nor|2014-10-31|Update windows visual studio build                |
|57210|New|Nor|2014-11-14|LuaHookMapToStorage not firing in per-directory co|
|57211|New|Enh|2014-11-14|Config-time options                               |
|57212|Opn|Nor|2014-11-14|Headers returned by scripts are limited to 8190 by|
|57218|New|Nor|2014-11-15|[Feature Request] Apache Bench (AB) to output a cs|
|57219|New|Nor|2014-11-15|ApacheBench quits unexpectedly with high concurren|
|57220|New|Nor|2014-11-15|[Feature Request] Add option to ApacheBench to giv|
|57228|New|Nor|2014-11-17|glibc detected *** httpd: double free or corruptio|
|57229|New|Maj|2014-11-17|mod_sed dies on long lines                        |
|57286|New|Nor|2014-11-29|Symbolic links are not honoured                   |
|57298|New|Min|2014-12-02|RewriteBase inside FilesMatch behaves oddly       |
|57299|New|Enh|2014-12-02|mod_session_dbd should not make a database call pe|
|57300|New|Enh|2014-12-02|mod_session_dbd should not save the session at eac|
|57301|New|Enh|2014-12-02|Add SessionMaxAgeAbsolute Directive               |
|57304|Inf|Nor|2014-12-03|MySQL DBD Authentication Incompatible with SSL    |
|57311|New|Nor|2014-12-04|BalancerMember enclosed by <If> gives syntax error|
|57313|New|Nor|2014-12-05|The DefaultType directive has been removed        |
|57327|New|Nor|2014-12-08|mod_ssl seg fault on exit                         |
|57334|Ver|Maj|2014-12-09|Segmentation fault in SSL_renegotiate at ssl_lib.c|
|57337|New|Nor|2014-12-10|Content negotiation fails with conditional Redirec|
|57339|New|Enh|2014-12-10|ErrorLogFormat doesn't allow logging in Internet d|
|57360|New|Nor|2014-12-17|Fail gracefully on certificate/key mismatch       |
|57372|New|Nor|2014-12-19|httpd will lookup every home directory while start|
|57374|Ver|Nor|2014-12-19|Event MPM: Wrong KeepAliveTimeout when system cloc|
|57375|New|Enh|2014-12-19|Support LibreSSL as an alternative toolkit for mod|
|57379|New|Nor|2014-12-20|[patch] Makefile.in  with mpm-shared, cgi and cgid|
|57383|New|Cri|2014-12-21|Error retrieving Report: An Existing connection wa|
|57386|New|Blk|2014-12-22|html5 lost some comments                          |
|57398|New|Maj|2014-12-26|AH01075: Error dispatching request to : (passing b|
|57399|New|Nor|2014-12-28|Many unnecessary CPU wakeups per second           |
|57406|New|Nor|2014-12-31|cgi-bin script is not executing                   |
|57412|New|Maj|2015-01-04|rewrite rules causes duplicate requests           |
|57416|New|Nor|2015-01-06|htcacheclean thinks the cache is smaller than it a|
|57424|Opn|Nor|2015-01-07|mod_rewrite not using ap_context_document_root    |
|57436|New|Enh|2015-01-12|Option to strip extra data after websocket request|
|57439|New|Enh|2015-01-13|Allow to change body timeout per location         |
|57448|New|Nor|2015-01-16|SSI <!--#set --> cannot capture backreferences fro|
|57453|New|Maj|2015-01-17|403 error when virtualhost configured with non-exi|
|57471|New|Nor|2015-01-20|Apache 2.4.10 Compilation fails when compiling aga|
|57477|New|Nor|2015-01-21|mod_auth_digest AH00052: child pid $pid exit signa|
|57483|New|Nor|2015-01-22|Omit "Keep-Alive" header on 1.1 connections       |
|57492|New|Nor|2015-01-24|incomplete chunked-transfered request body is not |
|57506|New|Nor|2015-01-27|<If> directive doesn't work within a <Location> se|
|57510|New|Enh|2015-01-28|Engine keyform support for private keys           |
|57511|New|Maj|2015-01-28|Opening plain TCP Socket on SSL port causes denial|
|57515|New|Nor|2015-01-30|Define/Undefine don't work reasonably outside of g|
|57519|New|Nor|2015-02-01|change SSLv2 to SSLv3 or remove SSLv2 support allt|
|57526|Opn|Maj|2015-02-03|Apache 2.2.29_openssl-1.0.1k_x86_64 Error creating|
|57529|Opn|Nor|2015-02-03|htcacheclean doesn't show the cached URL with '-a'|
|57585|New|Nor|2015-02-13|httpd fails to start if there is an IncludeOptiona|
|57590|New|Nor|2015-02-18|loading mod_proxy_http makes rewriteRule's [proxy]|
|57591|New|Nor|2015-02-18|DirectoryIndex directive cannot be overwritten    |
|57616|New|Maj|2015-02-23|AB - DNS roundrobin support                       |
|57624|New|Enh|2015-02-23|Provide support for http/2.0                      |
|57631|New|Nor|2015-02-24|Useless test in acinclude.m4                      |
|57632|New|Nor|2015-02-24|mod_systemd passes invalid default to APACHE_MODUL|
|57635|New|Nor|2015-02-25|meta-refresh is not rewritten by mod_proxy_html   |
|57636|New|Nor|2015-02-25|URLs without protocol are not rewriten by mod_prox|
|57641|New|Maj|2015-02-27|mod_substitute: Invalid merge order               |
|57646|New|Enh|2015-02-27|SSLEngine inside If directive                     |
|57660|New|Trv|2015-03-04|AB - free memory allocated by xmalloc and xcalloc |
|57680|New|Nor|2015-03-09|SSLSessionCacheTimeout has no effect              |
|57685|New|Nor|2015-03-10|Requests are denied while the mod_cgid daemon star|
|57691|New|Nor|2015-03-12|mod_proxy/proxy_util confuses UDS scheme with HTTP|
|57695|New|Nor|2015-03-12|[core:warn] [pid 1120] (101)Network is unreachable|
|57710|New|Nor|2015-03-15|Wildcard matching for logging headers             |
|57725|New|Enh|2015-03-18|ApacheBench: include http status code in gnuplot o|
|57742|New|Nor|2015-03-23|"reliable piped logging" doesn't work for ErrorLog|
|57745|New|Nor|2015-03-23|httpd exits 1 with no stderr when proxy_balancer_m|
|57746|New|Nor|2015-03-23|Apache hangs on startup using MPM event           |
|57751|Inf|Maj|2015-03-24|Problems with proxy reverse to websockets         |
|57756|New|Enh|2015-03-25|Config options for handling of pipelined request  |
|57757|New|Cri|2015-03-25|extern apr_xlate_t *ap_locale_to_ascii variable gi|
|57771|New|Nor|2015-03-27|cleanup_script uses incorrect connection ID       |
|57774|Inf|Nor|2015-03-28|httpd.conf <IfModule proxy_html_module> content er|
|57777|New|Nor|2015-03-30|Security concerns with documentation of AddHandler|
|57781|New|Nor|2015-03-31|disable reconnection after connection error       |
|57784|New|Enh|2015-03-31|[RFE] Multiple ErrorLog directives                |
|57785|New|Nor|2015-04-01|REDIRECT_URL is not suitable for use in server-gen|
|57795|Opn|Maj|2015-04-07|mod_proxy_wstunnel sometimes does not connect and |
|57800|New|Nor|2015-04-09|High CPU usage in ap_core_output_filter           |
|57807|New|Enh|2015-04-13|Build-configurable environment variable length    |
|57810|New|Nor|2015-04-13|Should apache ignore difference in trailing dot be|
|57813|New|Nor|2015-04-14|Rewrite 'pre-compressed content' recipe using 2.4 |
|57814|New|Nor|2015-04-14|Teach mod_deflate how to serve pre-comressed conte|
|57819|New|Nor|2015-04-15|Need a conventions document                       |
|57832|New|Enh|2015-04-19|Reduction of response splitting attacks consequenc|
|57853|Inf|Nor|2015-04-24|mod_proxy_http sends request with header 'Expect: |
|57868|New|Nor|2015-04-28|SIGSEV when lacking correct DB access permissions |
|57876|New|Reg|2015-04-30|logresolve.exe on any Windows immediately crashes |
|57878|New|Nor|2015-04-30|Using UTF-8 for all languages, and avoiding html-e|
|57895|New|Min|2015-05-05|missing m4a mimeType in mime.types                |
|57911|New|Min|2015-05-09|Rewrite documentation unclear or wrong about what |
|57927|New|Maj|2015-05-13|Segmentation Fault at proxy_util.c:994            |
|57933|New|Min|2015-05-18|apr_port_t returns constant                       |
|57941|New|Nor|2015-05-21|config.status: line 331: syntax error near unexpec|
|57949|New|Enh|2015-05-25|new mod_ssl environment variable SSL_{CLIENT|SERVE|
|57950|New|Nor|2015-05-26|[patch] buildconf change hint in build to newer ap|
|57960|New|Nor|2015-05-27|PUT truncates response body; status_line appears t|
|57976|New|Cri|2015-05-30|Server threads stale when sending 500 status with |
|57978|New|Nor|2015-06-01|unix:/ works with any number of / slashes  except |
|57979|New|Nor|2015-06-01|can not turn change log level for mod_filter      |
|57996|New|Nor|2015-06-03|Symlinks erroneously not followed when target inod|
|57997|New|Nor|2015-06-03|Threads started during child_init don't block sign|
|57999|New|Nor|2015-06-04|ap_getparents() may remove start slash of uri     |
|58001|New|Enh|2015-06-04|Implement Forwarded header (RFC 7239) to mod_proxy|
|58007|New|Nor|2015-06-06|400 Bad Request with fully qualified domain name o|
|58020|New|Nor|2015-06-11|When user authenticates with certificate which has|
|58024|New|Nor|2015-06-11|(Graceful) Restart does not work after adding a Ba|
|58025|New|Enh|2015-06-11|mod_authz_dbd : new dbd-query and AuthzDBDQuery op|
|58026|New|Nor|2015-06-11|return 421 status code when SNI and Host: header d|
|58044|New|Cri|2015-06-16|Error sintax 'lua_dump'                           |
|58050|New|Nor|2015-06-17|ErrorDocument does not always work                |
|58073|New|Nor|2015-06-24|Extremely long time for graceful restart          |
|58089|New|Nor|2015-07-01|mod_authz_host uses proxy IP even when mod_remotei|
|58091|New|Nor|2015-07-02|mod_socache_memcache does not reuse memcache conne|
|58097|New|Enh|2015-07-03|[feat] Preserve original connecting IP            |
|58101|New|Nor|2015-07-05|DeflateCompressionLevel inside vhost resets logfor|
|58107|New|Blk|2015-07-06|Httpd crashes on startup every time, dump file att|
|58109|New|Nor|2015-07-06|Apache on windows cannot handle the hash symbol (#|
|58118|Inf|Min|2015-07-09|mod_proxy_fcgi logs 503 when user aborts connectio|
|58120|New|Nor|2015-07-10|ProxyPassInherit does not work as expect          |
|58121|New|Nor|2015-07-10|ProxyHTMLMeta seems to ignore all <meta http-equiv|
|58126|New|Nor|2015-07-11|[patch] acinclude.m4 fix "warning: underquoted def|
|58129|New|Nor|2015-07-12|man pages are not generated correctly             |
|58132|New|Nor|2015-07-12|non-standard, non-traditional man page layout make|
|58135|New|Nor|2015-07-14|mod_cache sends client "if-Modified-Since" to back|
|58141|New|Nor|2015-07-15|Apache Service doesn't start when rotatlogs.exe pa|
|58142|New|Nor|2015-07-15|authz_core ignores loglevel                       |
|58158|New|Nor|2015-07-21|Not honoring HTTP spec with regard to Accept-Encod|
|58168|New|Enh|2015-07-21|Would like full request evaluation support in Rewr|
|58171|New|Nor|2015-07-22|ap_session_save saves the wrong session after a de|
|58177|New|Enh|2015-07-24|Mod Proxy forward trailers in http chunked request|
|58180|New|Enh|2015-07-24|ErrorDocument original URL in subsequent <Location|
|58181|New|Enh|2015-07-25|mod_expire should allow "minus" keyword same like |
|58188|New|Nor|2015-07-28|http2 mod_lua: support build with lua 5.2+        |
|58197|New|Nor|2015-07-31|apr-util-1.5.4 build against openldap - "could not|
|58202|New|Enh|2015-07-31|apxs -q += HTTPD_MAJOR , HTTPD_MMN variables      |
|58213|New|Nor|2015-08-05|Can't use SUITEB128 etc. ciphers with apache.     |
|58225|New|Reg|2015-08-08|intermitant segfault 11 in session_identity_encode|
|58226|New|Nor|2015-08-08|XSS in Error Page                                 |
|58231|New|Nor|2015-08-11|RewriteCond can add "Host" to the Vary-Header     |
|58235|New|Enh|2015-08-12|Ability to allow from domain but with using forwar|
|58243|New|Nor|2015-08-14|rotatelogs goes infinite at startup               |
+-----+---+---+----------+--------------------------------------------------+
| Total 1527 bugs                                                           |
+---------------------------------------------------------------------------+

From dev-return-83479-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 17 11:32:08 2015
Return-Path: <dev-return-83479-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9093518665
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 17 Aug 2015 11:32:08 +0000 (UTC)
Received: (qmail 70979 invoked by uid 500); 17 Aug 2015 11:32:05 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 70901 invoked by uid 500); 17 Aug 2015 11:32:05 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 70892 invoked by uid 99); 17 Aug 2015 11:32:04 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Aug 2015 11:32:04 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 8EA1F1AA099
	for <dev@httpd.apache.org>; Mon, 17 Aug 2015 11:32:04 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level:
X-Spam-Status: No, score=0.001 tagged_above=-999 required=6.31
	tests=[URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id HE6lyLmBWOdm for <dev@httpd.apache.org>;
	Mon, 17 Aug 2015 11:31:58 +0000 (UTC)
Received: from fornix.velox.ch (fornix.velox.ch [85.25.46.13])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 87CE0207D6
	for <dev@httpd.apache.org>; Mon, 17 Aug 2015 11:31:57 +0000 (UTC)
Received: from cortex.velox.ch (77-57-164-164.dclient.hispeed.ch [77.57.164.164])
	(authenticated bits=0)
	by fornix.velox.ch (8.14.9/8.14.9/2.2) with ESMTP id t7HBVoXr004745
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-GCM-SHA384 bits=256 verify=OK)
	for <dev@httpd.apache.org>; Mon, 17 Aug 2015 13:31:51 +0200
From: Kaspar Brand <httpd-dev.2014@apache.org>
Subject: Re: svn commit: r1672014 - in /httpd/httpd/trunk: CHANGES
 server/config.c
To: dev@httpd.apache.org
References: <20150408073339.A26E2AC0236@hades.apache.org>
 <552C2181.3070303@apache.org> <552C9D9F.2090209@velox.ch>
 <552E8BA7.2000807@velox.ch>
 <CALK=YjNRdXv9Zbn0tqZ3N5eNYGZrU_zxGuWaDDg2LvmKCM9TUg@mail.gmail.com>
Message-ID: <55D1C625.6020606@apache.org>
Date: Mon, 17 Aug 2015 13:31:49 +0200
MIME-Version: 1.0
In-Reply-To: <CALK=YjNRdXv9Zbn0tqZ3N5eNYGZrU_zxGuWaDDg2LvmKCM9TUg@mail.gmail.com>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit

On 14.8.15 20:01, Eric Covener wrote:
> On Wed, Apr 15, 2015 at 12:02 PM, Kaspar Brand <httpd-dev.2014@velox.ch> wrote:
>> The other option to fix the problem which originally triggered this
>> investigation would be to simply replace "cmd->server" in
>> ssl_engine_config.c:836 with "NULL", though it would only fix this
>> particular case, and not help with other places with the same underlying
>> problem.
> 
> What are the different scenarios that are bad in 2.4? I stumbled on
> this thread on a search about a related topic.
> 
> I think this is the immediate one, but I really don't like the idea of
> using the default loglevel there:
> 
> LogLevel crit
> <virtualhost *:443>
>   SSLSomethingThatWouldWarn
>   LogLevel warn
> </virtualhost>
> 
> What are the other variants?

That's basically the pattern I meant. With "other places with the same
underlying problem", I was referring to other modules which use
cmd->server for logging during ap_process_config_tree walking (and
before ap_fixup_virtual_hosts is called).

There are a number of "ap_log_error(..., cmd->server, ...)" occurrences
in mod_env, mod_ldap, mod_proxy, mod_authnz_ldap, mod_auth_digest,
mod_file_cache, mod_rewrite, and mod_alias, and in particular when they
are using APLOG_WARNING, these messages are not logged unless there's a
preceding LogLevel statement in the respective VirtualHost block.

server/core.c on the other hand also has a few places where this problem
occurs, here's an example:

LogLevel warn
<VirtualHost *:80>
  ServerName example.net
  DefaultType text/plain
</VirtualHost>

The "Ignoring deprecated use of DefaultType..." message is only output
if an additional "LogLevel warn" statement in the VirtualHost block is
inserted (which must appear before the DefaultType statement).

Kaspar

From dev-return-83480-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 17 12:47:26 2015
Return-Path: <dev-return-83480-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2348D188A9
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 17 Aug 2015 12:47:26 +0000 (UTC)
Received: (qmail 35039 invoked by uid 500); 17 Aug 2015 12:47:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 34963 invoked by uid 500); 17 Aug 2015 12:47:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 34953 invoked by uid 99); 17 Aug 2015 12:47:16 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Aug 2015 12:47:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id DA10BC0332
	for <dev@httpd.apache.org>; Mon, 17 Aug 2015 12:47:15 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.007
X-Spam-Level:
X-Spam-Status: No, score=-0.007 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id MGzteReuBd4V for <dev@httpd.apache.org>;
	Mon, 17 Aug 2015 12:47:14 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 1960F20F4F
	for <dev@httpd.apache.org>; Mon, 17 Aug 2015 12:47:14 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 25F6A15A0448
	for <dev@httpd.apache.org>; Mon, 17 Aug 2015 14:47:13 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1692486 [2/2] - in /httpd/httpd/trunk: docs/log-message-tags/ include/ modules/http2/ modules/ssl/ server/
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <55B242EF.7020801@apache.org>
Date: Mon, 17 Aug 2015 14:47:12 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <A29C7299-41FD-48C2-AAC1-8A54F26C51D9@greenbytes.de>
References: <20150724120946.2A185AC09E1@hades.apache.org> <55B242EF.7020801@apache.org>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)


> Am 24.07.2015 um 15:51 schrieb Ruediger Pluem <rpluem@apache.org>:
>>=20
>> +/* Something like this must be in APR, only I do not find it... */
>> +static int array_index(apr_array_header_t *array, const char *s)
>> +{
>> +    int i;
>> +    for (i =3D 0; i < array->nelts; i++) {
>> +        const char *p =3D APR_ARRAY_IDX(array, i, const char *);
>> +        if (!strcmp(p, s)) {
>> +            return i;
>> +        }
>> +    }
>> +    return -1;
>> +}
>=20
> If not in APR it should probably be put into util.c and made =
ap_array_index.
> Once in APR it could be converted into a wrapper macro around the APR =
function.

Checked in as r1696264.

//Stefan

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83481-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 17 12:55:44 2015
Return-Path: <dev-return-83481-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 876BD18904
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 17 Aug 2015 12:55:44 +0000 (UTC)
Received: (qmail 55822 invoked by uid 500); 17 Aug 2015 12:55:43 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 55743 invoked by uid 500); 17 Aug 2015 12:55:43 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 55730 invoked by uid 99); 17 Aug 2015 12:55:43 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Aug 2015 12:55:43 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 57E06C0332
	for <dev@httpd.apache.org>; Mon, 17 Aug 2015 12:55:43 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.007
X-Spam-Level:
X-Spam-Status: No, score=-0.007 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id lnZONJu8KpBS for <dev@httpd.apache.org>;
	Mon, 17 Aug 2015 12:55:42 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 6E9EE428E7
	for <dev@httpd.apache.org>; Mon, 17 Aug 2015 12:55:42 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 3776C15A035F
	for <dev@httpd.apache.org>; Mon, 17 Aug 2015 14:55:35 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1692486 [1/2] - in /httpd/httpd/trunk: docs/log-message-tags/ include/ modules/http2/ modules/ssl/ server/
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <55B2438B.8040701@apache.org>
Date: Mon, 17 Aug 2015 14:55:34 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <3D4C4909-AAED-4566-A9EB-EA78971E2461@greenbytes.de>
References: <20150724120946.26BD4AC0623@hades.apache.org> <55B2406A.2090606@apache.org> <A1E382D0-94C3-4EEE-BC6E-E3B789750935@greenbytes.de> <55B2438B.8040701@apache.org>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

Done in r1696266.

> Am 24.07.2015 um 15:54 schrieb Ruediger Pluem <rpluem@apache.org>:
>>>> +
>>>> +                    /* make sure httpd closes the connection after =
this */
>>>> +                    c->keepalive =3D AP_CONN_CLOSE;
>>>> +                    ap_lingering_close(c);
>>>> +                   =20
>>>> +                    if (c->sbh) {
>>>> +                        ap_update_child_status_from_conn(c->sbh,=20=

>>>> +                                                         =
SERVER_CLOSING, c);
>>>> +                    }
>>>=20
>>> The c->keepalive =3D AP_CONN_CLOSE looks fine to me, but why should =
we do the other stuff in a handler.
>>> IMHO that should be done by the existing code.
>>=20
>> Not sure I understand. You mean the interim response or the whole =
handler?
>=20
> No I mean the
>=20
> ap_lingering_close(c);
>=20
> and the scoreboard update.
>=20
> Regards
>=20
> R=C3=BCdiger
>=20

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83482-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 19 09:57:49 2015
Return-Path: <dev-return-83482-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 81616181A9
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 19 Aug 2015 09:57:49 +0000 (UTC)
Received: (qmail 59762 invoked by uid 500); 19 Aug 2015 09:57:44 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 59679 invoked by uid 500); 19 Aug 2015 09:57:44 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 59669 invoked by uid 99); 19 Aug 2015 09:57:44 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Aug 2015 09:57:44 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id A0C7CDF1DE
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 09:57:43 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level:
X-Spam-Status: No, score=0.001 tagged_above=-999 required=6.31
	tests=[URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id CAP1e7eHC1dH for <dev@httpd.apache.org>;
	Wed, 19 Aug 2015 09:57:34 +0000 (UTC)
Received: from node176.itex.at (mail.123x.at [194.242.35.176])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id F012E42B21
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 09:57:33 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
	by node176.itex.at (Postfix) with ESMTP id 0D38F22A99
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 11:57:33 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at node176.itex.at
Received: from node176.itex.at ([127.0.0.1])
	by localhost (node176.itex.at [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Y7AafmF7oFGp for <dev@httpd.apache.org>;
	Wed, 19 Aug 2015 11:57:32 +0200 (CEST)
Received: from [10.202.65.180] (unknown [101.174.192.10])
	(Authenticated sender: normw@gknw.net)
	by node176.itex.at (Postfix) with ESMTPSA id AD34122AC5
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 11:57:30 +0200 (CEST)
To: dev@httpd.apache.org
From: NormW <normw@gknw.net>
Subject: C89-ify a recent change to h2_io_set.c
Message-ID: <55D4530B.8000901@gknw.net>
Date: Wed, 19 Aug 2015 19:57:31 +1000
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:38.0) Gecko/20100101
 Thunderbird/38.1.0
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

G/Evening (Is here)
A very small tweak is proposed for:
  httpd-trunk\modules\http2\h2_io_set.c
to keep the C89-ers in their seats.

The svn diff looks like:
Index: modules/http2/h2_io_set.c
===================================================================
--- modules/http2/h2_io_set.c   (revision 1696548)
+++ modules/http2/h2_io_set.c   (working copy)
@@ -67,12 +67,13 @@
      /* we keep the array sorted by id, so lookup can be done
       * by bsearch.
       */
+    h2_io **ps;
      h2_io key;
      h2_io *pkey = &key;

      memset(&key, 0, sizeof(key));
      key.id = stream_id;
-    h2_io **ps = bsearch(&pkey, sp->list->elts, sp->list->nelts,
+    ps = bsearch(&pkey, sp->list->elts, sp->list->nelts,
                           sp->list->elt_size, h2_stream_id_cmp);
      return ps? *ps : NULL;
  }

I won't bore anyone who can follow that module with a patch.
Cheers,
Norm


From dev-return-83483-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 19 12:01:00 2015
Return-Path: <dev-return-83483-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E6F6118560
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 19 Aug 2015 12:00:59 +0000 (UTC)
Received: (qmail 6623 invoked by uid 500); 19 Aug 2015 12:00:59 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 6547 invoked by uid 500); 19 Aug 2015 12:00:59 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 6533 invoked by uid 99); 19 Aug 2015 12:00:59 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Aug 2015 12:00:59 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 125DA182108
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 12:00:59 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id N11pb8Xsa2Mp for <dev@httpd.apache.org>;
	Wed, 19 Aug 2015 12:00:57 +0000 (UTC)
Received: from mail-wi0-f180.google.com (mail-wi0-f180.google.com [209.85.212.180])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 05D08212E0
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 12:00:57 +0000 (UTC)
Received: by wicne3 with SMTP id ne3so118692995wic.0
        for <dev@httpd.apache.org>; Wed, 19 Aug 2015 05:00:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=subject:to:references:from:message-id:date:user-agent:mime-version
         :in-reply-to:content-type:content-transfer-encoding;
        bh=uK/wJFLReaCimemoIAb5Ss13NHoBbi09jmrVrArbn6A=;
        b=O/JCtqqj5fnBJx6gSdRpm5yOO+41SGN2aSjdyR3I++BKpmHdFe5HAqIM3UqSjB1qL7
         OQfwOI1FjI2+nruT9ASoHKNwxIsgWXYVYh86lFODkdK8qcGM039eALup/5JtW/BnmjYX
         Us2Ea5/J9ONBiAVb/+rpDeTLKsyUsRRFBu2x8vVgofmljCALoh7bmVjUR/+Ew44//WJJ
         FByIdo8xRUNv0lsWOU7de+twKF2h2+yuvYySnIe3QMb31swAi/LOz5xR9kPoIX8HnVJp
         kE55BW69O2FxT33vC9pDxOWqaAq+Rqb/gpJne8yffTrc0ZzpRk06duMMqPquG1BC+YT/
         M1NQ==
X-Received: by 10.180.73.13 with SMTP id h13mr51484236wiv.79.1439985656787;
        Wed, 19 Aug 2015 05:00:56 -0700 (PDT)
Received: from [10.33.144.3] (nat-pool-gva-t.redhat.com. [209.132.186.32])
        by smtp.gmail.com with ESMTPSA id bg9sm1286449wib.16.2015.08.19.05.00.55
        for <dev@httpd.apache.org>
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Wed, 19 Aug 2015 05:00:55 -0700 (PDT)
Subject: Re: C89-ify a recent change to h2_io_set.c
To: dev@httpd.apache.org
References: <55D4530B.8000901@gknw.net>
From: jean-frederic clere <jfclere@gmail.com>
Message-ID: <55D46FF6.4040803@gmail.com>
Date: Wed, 19 Aug 2015 14:00:54 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.0.1
MIME-Version: 1.0
In-Reply-To: <55D4530B.8000901@gknw.net>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

On 08/19/2015 11:57 AM, NormW wrote:
> G/Evening (Is here)
> A very small tweak is proposed for:
>   httpd-trunk\modules\http2\h2_io_set.c
> to keep the C89-ers in their seats.

thanks committed.

Cheers

Jean-Frederic

From dev-return-83484-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 19 12:23:17 2015
Return-Path: <dev-return-83484-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 27B2F1863A
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 19 Aug 2015 12:23:17 +0000 (UTC)
Received: (qmail 67225 invoked by uid 500); 19 Aug 2015 12:23:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 67149 invoked by uid 500); 19 Aug 2015 12:23:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 67139 invoked by uid 99); 19 Aug 2015 12:23:16 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Aug 2015 12:23:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 3E495182108
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 12:23:16 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id orL7fpKdEnXk for <dev@httpd.apache.org>;
	Wed, 19 Aug 2015 12:23:01 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 6705C212E0
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 12:23:00 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id A774215A028F
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 14:22:52 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: C89-ify a recent change to h2_io_set.c
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <55D46FF6.4040803@gmail.com>
Date: Wed, 19 Aug 2015 14:22:51 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <CBA9CE46-E623-45C4-968D-72C77FDE24B0@greenbytes.de>
References: <55D4530B.8000901@gknw.net> <55D46FF6.4040803@gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

Thanks Jean-Frederic.

Is there a way to ./configure - other than CFLAGS - so that all =
developers can compile with similar subsets of features and warnings? I =
would like to write code so that it does not generate warnings for the =
rest of you...

//Stefan

> Am 19.08.2015 um 14:00 schrieb jean-frederic clere =
<jfclere@gmail.com>:
>=20
> On 08/19/2015 11:57 AM, NormW wrote:
>> G/Evening (Is here)
>> A very small tweak is proposed for:
>>  httpd-trunk\modules\http2\h2_io_set.c
>> to keep the C89-ers in their seats.
>=20
> thanks committed.
>=20
> Cheers
>=20
> Jean-Frederic

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83485-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 19 13:34:05 2015
Return-Path: <dev-return-83485-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D903118811
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 19 Aug 2015 13:34:05 +0000 (UTC)
Received: (qmail 23641 invoked by uid 500); 19 Aug 2015 13:34:05 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 23565 invoked by uid 500); 19 Aug 2015 13:34:05 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 23555 invoked by uid 99); 19 Aug 2015 13:34:05 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Aug 2015 13:34:05 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 057F11AA71A
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 13:34:05 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level:
X-Spam-Status: No, score=0.001 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 42ZLc5GngtBr for <dev@httpd.apache.org>;
	Wed, 19 Aug 2015 13:33:56 +0000 (UTC)
Received: from resqmta-ch2-07v.sys.comcast.net (resqmta-ch2-07v.sys.comcast.net [69.252.207.39])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 1150E42B53
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 13:33:55 +0000 (UTC)
Received: from resomta-ch2-09v.sys.comcast.net ([69.252.207.105])
	by resqmta-ch2-07v.sys.comcast.net with comcast
	id 6dZQ1r0042GyhjZ01dZvr9; Wed, 19 Aug 2015 13:33:55 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-09v.sys.comcast.net with comcast
	id 6dZu1r00K2U0RYt01dZv0r; Wed, 19 Aug 2015 13:33:55 +0000
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: C89-ify a recent change to h2_io_set.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CBA9CE46-E623-45C4-968D-72C77FDE24B0@greenbytes.de>
Date: Wed, 19 Aug 2015 09:33:54 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <E17BFCB5-D5DD-4CB0-840F-9A7AC02F48A2@jaguNET.com>
References: <55D4530B.8000901@gknw.net> <55D46FF6.4040803@gmail.com> <CBA9CE46-E623-45C4-968D-72C77FDE24B0@greenbytes.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1439991235;
	bh=2OUTlLX81fDuTGPls9FkSc3Y7aRnULZEmwlQTYC+uZM=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=wC0JsLGH79hwBTScFChYygXIFlUfdA7gYS0MJc1Gw/R1fUc76nSBzhM6sj8jWhvV+
	 n4gJHph2oa+k6kUtuZHBicDjAS96XD3Ut15ead9WUJC8dv70peydQsbMyFH8V4RSx8
	 Ac/cD6kEQTSYrftP2voS/IwpjPYRJFHDcqiucySjtHg8WcVKq76+qqoKBfkPXAqdyo
	 6i7RFMTYDYEELIRL7tyKMXK4G1lApMvAsVlpjPgFij8K0yD6VqslM2p4i8VN79H2G6
	 +6Rme2lC9rOLIPwHDv2JBR9s1P0uZb+hnIw+wauX6L7NhMtPO2rOTyEHTCQuxfajW8
	 yiKuEF4TTGj4Q==

That's the intent for --enable-maintainer-mode

> On Aug 19, 2015, at 8:22 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>=20
> Thanks Jean-Frederic.
>=20
> Is there a way to ./configure - other than CFLAGS - so that all =
developers can compile with similar subsets of features and warnings? I =
would like to write code so that it does not generate warnings for the =
rest of you...
>=20
> //Stefan
>=20
>> Am 19.08.2015 um 14:00 schrieb jean-frederic clere =
<jfclere@gmail.com>:
>>=20
>> On 08/19/2015 11:57 AM, NormW wrote:
>>> G/Evening (Is here)
>>> A very small tweak is proposed for:
>>> httpd-trunk\modules\http2\h2_io_set.c
>>> to keep the C89-ers in their seats.
>>=20
>> thanks committed.
>>=20
>> Cheers
>>=20
>> Jean-Frederic
>=20
> <green/>bytes GmbH
> Hafenweg 16, 48155 M=C3=BCnster, Germany
> Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782
>=20
>=20
>=20


From dev-return-83486-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 19 14:14:31 2015
Return-Path: <dev-return-83486-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 80D211896E
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 19 Aug 2015 14:14:31 +0000 (UTC)
Received: (qmail 24827 invoked by uid 500); 19 Aug 2015 14:14:26 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 24748 invoked by uid 500); 19 Aug 2015 14:14:26 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 24735 invoked by uid 99); 19 Aug 2015 14:14:26 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Aug 2015 14:14:26 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id A0BAAC0992
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 14:14:25 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id NEQBsD1nZkmN for <dev@httpd.apache.org>;
	Wed, 19 Aug 2015 14:14:24 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 602CB20757
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 14:14:24 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id E0A3115A064D
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 16:14:15 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: C89-ify a recent change to h2_io_set.c
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <E17BFCB5-D5DD-4CB0-840F-9A7AC02F48A2@jaguNET.com>
Date: Wed, 19 Aug 2015 16:14:14 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <E27648D2-561F-4979-AB88-7132831848B3@greenbytes.de>
References: <55D4530B.8000901@gknw.net> <55D46FF6.4040803@gmail.com> <CBA9CE46-E623-45C4-968D-72C77FDE24B0@greenbytes.de> <E17BFCB5-D5DD-4CB0-840F-9A7AC02F48A2@jaguNET.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)


> Am 19.08.2015 um 15:33 schrieb Jim Jagielski <jim@jaguNET.com>:
>=20
> That's the intent for --enable-maintainer-mode

Excellent. Thx!

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83487-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 19 14:38:26 2015
Return-Path: <dev-return-83487-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 475E518A51
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 19 Aug 2015 14:38:26 +0000 (UTC)
Received: (qmail 76399 invoked by uid 500); 19 Aug 2015 14:37:27 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 76315 invoked by uid 500); 19 Aug 2015 14:37:27 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 76305 invoked by uid 99); 19 Aug 2015 14:37:27 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Aug 2015 14:37:27 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id D7B681AA7D7
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 14:37:26 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H2=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id XyhyBtbXlHen for <dev@httpd.apache.org>;
	Wed, 19 Aug 2015 14:37:22 +0000 (UTC)
Received: from mail-io0-f173.google.com (mail-io0-f173.google.com [209.85.223.173])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 908B320488
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 14:37:22 +0000 (UTC)
Received: by iodv127 with SMTP id v127so11021598iod.3
        for <dev@httpd.apache.org>; Wed, 19 Aug 2015 07:37:16 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=qlruNrQiKB9VYVlPta1dxPKIPoerwMiF4+mf+jehQnI=;
        b=f7s5CiFUePEuiq7aphRuQUop9kLaFXX5++GoJ/15fbe65h4dq+tkWR4V3uqAK3BElY
         KuXWtPwyLDgA2YBMLw3qG1PuAw0njJSYWiqtNecPa/0yx+IrHcDaEM1bYyeCYuHnEhXD
         OLfumuRaaUhMkyDMdq5ncAIMYgK2R1Ce+sPuzQcws301YeOPb0Hns08XTP6j3xwf/FUB
         cfxHuT/r+YZEGU6nC9iTBYYOqyRaZGJ7A7bJJsAodeBsgapI+KR4dSL48pX2z6eEDy06
         CWlc/T6GKRce9bajz3Ap+l68AcNX507NX8SWRfIPJMf98pFSLyfe3KQf7vP3FMr+ew5U
         sx1A==
X-Gm-Message-State: ALoCoQl8mmMnpaxq1IomKKwtHgYaPGDnQbg8jEBOii85A+/PtXmjnJXJqvLlutw5uMBmkbx3BHS6
MIME-Version: 1.0
X-Received: by 10.107.166.136 with SMTP id p130mr12731179ioe.163.1439995036170;
 Wed, 19 Aug 2015 07:37:16 -0700 (PDT)
Received: by 10.107.41.9 with HTTP; Wed, 19 Aug 2015 07:37:16 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
In-Reply-To: <20150819141349.C002DAC06BC@hades.apache.org>
References: <20150819141349.C002DAC06BC@hades.apache.org>
Date: Wed, 19 Aug 2015 09:37:16 -0500
Message-ID: <CACsi253zC7CK9RjGUej3GPQheKcA_GGfA__Ms4kbUmLNiTBVCw@mail.gmail.com>
Subject: Re: svn commit: r1696592 - in /httpd/httpd/trunk/modules/http2:
 h2_alt_svc.c h2_conn.c h2_from_h1.c h2_request.c h2_switch.c
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1141f3929c187c051daaf860

--001a1141f3929c187c051daaf860
Content-Type: text/plain; charset=UTF-8

On Wed, Aug 19, 2015 at 9:13 AM, <icing@apache.org> wrote:

> Author: icing
> Date: Wed Aug 19 14:13:49 2015
> New Revision: 1696592
>
> URL: http://svn.apache.org/r1696592
> Log:
> mod_h2 compiles warning free in maintainer-mode
>
> --- httpd/httpd/trunk/modules/http2/h2_alt_svc.c (original)
> +++ httpd/httpd/trunk/modules/http2/h2_alt_svc.c Wed Aug 19 14:13:49 2015
> @@ -42,13 +42,13 @@ void h2_alt_svc_register_hooks(void)
>   * - do not use quotation marks
>   */
>  h2_alt_svc *h2_alt_svc_parse(const char *s, apr_pool_t *pool) {
> -    const char *sep = strchr(s, '=');
> +    const char *sep = strchr((char *)s, '=');
>


We solve these issues with ap_strchr_c, ap_strrchr_c, ap_strstr_c etc.
This avoids the casts, which are always worth avoiding for other analysis
tools and inadvertent overwriting.

--001a1141f3929c187c051daaf860
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On W=
ed, Aug 19, 2015 at 9:13 AM,  <span dir=3D"ltr">&lt;<a href=3D"mailto:icing=
@apache.org" target=3D"_blank">icing@apache.org</a>&gt;</span> wrote:<br><b=
lockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px =
#ccc solid;padding-left:1ex">Author: icing<br>
Date: Wed Aug 19 14:13:49 2015<br>
New Revision: 1696592<br>
<br>
URL: <a href=3D"http://svn.apache.org/r1696592" rel=3D"noreferrer" target=
=3D"_blank">http://svn.apache.org/r1696592</a><br>
Log:<br>
mod_h2 compiles warning free in maintainer-mode<br><br>--- httpd/httpd/trun=
k/modules/http2/h2_alt_svc.c (original)<br>
+++ httpd/httpd/trunk/modules/http2/h2_alt_svc.c Wed Aug 19 14:13:49 2015<b=
r>
@@ -42,13 +42,13 @@ void h2_alt_svc_register_hooks(void)<br>
=C2=A0 * - do not use quotation marks<br>
=C2=A0 */<br>
=C2=A0h2_alt_svc *h2_alt_svc_parse(const char *s, apr_pool_t *pool) {<br>
-=C2=A0 =C2=A0 const char *sep =3D strchr(s, &#39;=3D&#39;);<br>
+=C2=A0 =C2=A0 const char *sep =3D strchr((char *)s, &#39;=3D&#39;);<br>
</blockquote><div><br></div><div><br></div><div>We solve these issues with=
=C2=A0ap_strchr_c,=C2=A0ap_strrchr_c,=C2=A0ap_strstr_c etc.=C2=A0 This avoi=
ds the casts, which are always worth avoiding for other analysis tools and =
inadvertent overwriting.</div><div><br></div></div></div></div>

--001a1141f3929c187c051daaf860--

From dev-return-83488-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 19 14:56:52 2015
Return-Path: <dev-return-83488-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4C7D918AEA
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 19 Aug 2015 14:56:52 +0000 (UTC)
Received: (qmail 33293 invoked by uid 500); 19 Aug 2015 14:56:51 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 33220 invoked by uid 500); 19 Aug 2015 14:56:51 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 33210 invoked by uid 99); 19 Aug 2015 14:56:51 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Aug 2015 14:56:51 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 3C3EDC0856
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 14:56:51 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id LxycBZA_LGB3 for <dev@httpd.apache.org>;
	Wed, 19 Aug 2015 14:56:43 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id ECF4F428E7
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 14:56:42 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 94ECD15A074A
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 16:56:34 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1696592 - in /httpd/httpd/trunk/modules/http2: h2_alt_svc.c h2_conn.c h2_from_h1.c h2_request.c h2_switch.c
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CACsi253zC7CK9RjGUej3GPQheKcA_GGfA__Ms4kbUmLNiTBVCw@mail.gmail.com>
Date: Wed, 19 Aug 2015 16:56:33 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <2BA23646-AF5B-495F-8EDB-E64B53CD365B@greenbytes.de>
References: <20150819141349.C002DAC06BC@hades.apache.org> <CACsi253zC7CK9RjGUej3GPQheKcA_GGfA__Ms4kbUmLNiTBVCw@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)


> Am 19.08.2015 um 16:37 schrieb William A Rowe Jr =
<wrowe@rowe-clan.net>:
>  h2_alt_svc *h2_alt_svc_parse(const char *s, apr_pool_t *pool) {
> -    const char *sep =3D strchr(s, '=3D');
> +    const char *sep =3D strchr((char *)s, '=3D');
>=20
>=20
> We solve these issues with ap_strchr_c, ap_strrchr_c, ap_strstr_c etc. =
 This avoids the casts, which are always worth avoiding for other =
analysis tools and inadvertent overwriting.

I live to learn. Changed in r1696607.

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83489-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 19 17:43:17 2015
Return-Path: <dev-return-83489-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A500718398
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 19 Aug 2015 17:43:17 +0000 (UTC)
Received: (qmail 87195 invoked by uid 500); 19 Aug 2015 17:43:01 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 87115 invoked by uid 500); 19 Aug 2015 17:43:01 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 87105 invoked by uid 99); 19 Aug 2015 17:43:01 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Aug 2015 17:43:01 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id E0C821AA807
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 17:43:00 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.999
X-Spam-Level:
X-Spam-Status: No, score=0.999 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H2=-0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id hD2Xb5O8amSS for <dev@httpd.apache.org>;
	Wed, 19 Aug 2015 17:43:00 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp12.smtpout.orange.fr [80.12.242.134])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 8E31920F51
	for <dev@httpd.apache.org>; Wed, 19 Aug 2015 17:42:59 +0000 (UTC)
Received: from [127.0.0.1] ([92.140.191.49])
	by mwinf5d47 with ME
	id 6hiq1r00C14Q3as03hiq8t; Wed, 19 Aug 2015 19:42:50 +0200
X-ME-Helo: [127.0.0.1]
X-ME-Date: Wed, 19 Aug 2015 19:42:50 +0200
X-ME-IP: 92.140.191.49
Subject: Re: svn commit: r1696607 - in /httpd/httpd/trunk/modules/http2:
 h2_alt_svc.c h2_config.c h2_request.c h2_response.c
To: dev@httpd.apache.org
References: <20150819145526.DA4E2AC006B@hades.apache.org>
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Message-ID: <55D4C019.8070501@wanadoo.fr>
Date: Wed, 19 Aug 2015 19:42:49 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
In-Reply-To: <20150819145526.DA4E2AC006B@hades.apache.org>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 150819-0, 19/08/2015), Outbound message
X-Antivirus-Status: Clean

Hi,

in the 2 functions below, you could also use apr_pstrcat instead of a 
hard coded (20) for extra space needed by '[', ']', ... + 
apr_pcalloc/strlen/strcpy/strcat
This is cleaner, IMHO and less verbose (and faster but we don't really 
care here).

CJ

Le 19/08/2015 16:55, icing@apache.org a écrit :
> Author: icing
> Date: Wed Aug 19 14:55:26 2015
> New Revision: 1696607
>
>
>
> Modified: httpd/httpd/trunk/modules/http2/h2_config.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_config.c?rev=1696607&r1=1696606&r2=1696607&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/modules/http2/h2_config.c (original)
> +++ httpd/httpd/trunk/modules/http2/h2_config.c Wed Aug 19 14:55:26 2015
> @@ -58,7 +58,7 @@ static void *h2_config_create(apr_pool_t
>       h2_config *conf = (h2_config *)apr_pcalloc(pool, sizeof(h2_config));
>       
>       const char *s = x? x : "unknown";
> -    char *name = (char *)apr_pcalloc(pool, strlen(prefix) + strlen(s) + 20);
> +    char *name = apr_pcalloc(pool, strlen(prefix) + strlen(s) + 20);
>       strcpy(name, prefix);
>       strcat(name, "[");
>       strcat(name, s);
> @@ -97,8 +97,7 @@ void *h2_config_merge(apr_pool_t *pool,
>       h2_config *add = (h2_config *)addv;
>       h2_config *n = (h2_config *)apr_pcalloc(pool, sizeof(h2_config));
>   
> -    char *name = (char *)apr_pcalloc(pool,
> -        20 + strlen(add->name) + strlen(base->name));
> +    char *name = apr_pcalloc(pool, 20 + strlen(add->name) + strlen(base->name));
>       strcpy(name, "merged[");
>       strcat(name, add->name);
>       strcat(name, ", ");
>
>


From dev-return-83490-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 20 09:56:59 2015
Return-Path: <dev-return-83490-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 13F3317DF2
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 20 Aug 2015 09:56:59 +0000 (UTC)
Received: (qmail 22361 invoked by uid 500); 20 Aug 2015 09:56:58 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 22280 invoked by uid 500); 20 Aug 2015 09:56:58 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 22270 invoked by uid 99); 20 Aug 2015 09:56:58 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Aug 2015 09:56:58 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id D5B73C0332
	for <dev@httpd.apache.org>; Thu, 20 Aug 2015 09:56:57 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1
X-Spam-Level: *
X-Spam-Status: No, score=1 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id C7O2214AHhhf for <dev@httpd.apache.org>;
	Thu, 20 Aug 2015 09:56:56 +0000 (UTC)
Received: from node176.itex.at (mail.123x.at [194.242.35.176])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 38EC32526D
	for <dev@httpd.apache.org>; Thu, 20 Aug 2015 09:56:55 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
	by node176.itex.at (Postfix) with ESMTP id 46A4520AA5
	for <dev@httpd.apache.org>; Thu, 20 Aug 2015 11:56:46 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at node176.itex.at
Received: from node176.itex.at ([127.0.0.1])
	by localhost (node176.itex.at [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id GZRRE7ZR9UU3 for <dev@httpd.apache.org>;
	Thu, 20 Aug 2015 11:56:45 +0200 (CEST)
Received: from [10.202.65.180] (CPE-58-168-41-204.lns7.cht.bigpond.net.au [58.168.41.204])
	(Authenticated sender: normw@gknw.net)
	by node176.itex.at (Postfix) with ESMTPSA id 0A14F1FFE0
	for <dev@httpd.apache.org>; Thu, 20 Aug 2015 11:56:44 +0200 (CEST)
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
From: NormW <normw@gknw.net>
Subject: httpd-trunk\modules\http2\h2_session.c Mystery
Message-ID: <55D5A44F.1070107@gknw.net>
Date: Thu, 20 Aug 2015 19:56:31 +1000
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:38.0) Gecko/20100101
 Thunderbird/38.1.0
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

Hi,
My compiler (no names) is vastly smarter than I at understanding C, but 
I can't tell if the following 'error' is drivel or just over my head;
> #    File: h2_session.c
> # ---------------------
> #     512:nghttp2_session_callbacks_set_on_invalid_frame_recv_callback(*pcb, 
on_invalid_frame_recv_cb)
> #   Error:                                                                                            ^
> #   illegal implicit conversion
> #   from 'int    (struct nghttp2_session *, const union  *, @enum$24h2_session_c, void *)'
> #   to   'int (*)(struct nghttp2_session *, const union  *, int, void *)'
Beyond this one 'blip', mod_h2 builds without issue, even the static 
build/link of nghttp2 lib.
TIA,
Norm



From dev-return-83491-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 20 10:39:11 2015
Return-Path: <dev-return-83491-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D734218204
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 20 Aug 2015 10:39:11 +0000 (UTC)
Received: (qmail 28860 invoked by uid 500); 20 Aug 2015 10:39:11 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 28776 invoked by uid 500); 20 Aug 2015 10:39:11 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 28765 invoked by uid 99); 20 Aug 2015 10:39:11 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Aug 2015 10:39:11 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id D99ABDF786
	for <dev@httpd.apache.org>; Thu, 20 Aug 2015 10:39:10 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.7
X-Spam-Level:
X-Spam-Status: No, score=0.7 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	KAM_ASCII_DIVIDERS=0.8, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id zcTQdUUc0UMh for <dev@httpd.apache.org>;
	Thu, 20 Aug 2015 10:39:03 +0000 (UTC)
Received: from mail-io0-f176.google.com (mail-io0-f176.google.com [209.85.223.176])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 132B921044
	for <dev@httpd.apache.org>; Thu, 20 Aug 2015 10:39:03 +0000 (UTC)
Received: by iodv127 with SMTP id v127so40882231iod.3
        for <dev@httpd.apache.org>; Thu, 20 Aug 2015 03:39:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=ZMzKr7d+9nzUCCuhFxd9M8HhacdfT2AuMjcahnRgnkQ=;
        b=nVD9fDfB2IMG8D2TVPhc6eUL9SAeNQdDAplm2euGvemLssjYBu2GhsKyH45xiDvoeT
         lpZRpg1hn+eF+DRyhbOeoVv/nhDagHDYHl0rr6a37GyioPtCBiv/COhWF9F1wls6uvvO
         UH+0m8GM/6oXMBZMtsLN7DTcH9OZSQmv+qzDUK799engsLSgPYwZsjoWCl9K3IHVhGDr
         /KqRwPp2NMQbNwCLpWbh5yrOVDQ5QeeB0BOWvJWSMd+0tO8d+lB4BLGuOYJENWVkRJ8C
         orlWop87avQ/PYH1874sAxuq81PiWbL1fMEACiCgMXximU3HONdJYj9iUapvu57nUp7F
         JUow==
MIME-Version: 1.0
X-Received: by 10.107.14.145 with SMTP id 139mr1700773ioo.37.1440067141992;
 Thu, 20 Aug 2015 03:39:01 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Thu, 20 Aug 2015 03:39:01 -0700 (PDT)
In-Reply-To: <55D5A44F.1070107@gknw.net>
References: <55D5A44F.1070107@gknw.net>
Date: Thu, 20 Aug 2015 12:39:01 +0200
Message-ID: <CAKQ1sVMbj5B6N5u5M-8qtL3AC6VGu2c_+ZfHyx8UqG40+hAgXg@mail.gmail.com>
Subject: Re: httpd-trunk\modules\http2\h2_session.c Mystery
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: multipart/mixed; boundary=001a113fa78477d7b7051dbbc2c3

--001a113fa78477d7b7051dbbc2c3
Content-Type: text/plain; charset=UTF-8

Hi,

On Thu, Aug 20, 2015 at 11:56 AM, NormW <normw@gknw.net> wrote:
>>
>> #    File: h2_session.c
>> # ---------------------
>> #
>> 512:nghttp2_session_callbacks_set_on_invalid_frame_recv_callback(*pcb,
>
> on_invalid_frame_recv_cb)
>>
>> #   Error:
>> ^
>> #   illegal implicit conversion
>> #   from 'int    (struct nghttp2_session *, const union  *,
>> @enum$24h2_session_c, void *)'
>> #   to   'int (*)(struct nghttp2_session *, const union  *, int, void *)'

It seems that the nghttp2_on_invalid_frame_recv_callback type requires
an int for its error parameter, not a nghttp2_error enum.

Does the attached patch helps?

Regards,
Yann.

--001a113fa78477d7b7051dbbc2c3
Content-Type: text/x-diff; charset=US-ASCII; 
	name="httpd-trunk-h2_session_on_invalid_frame_recv_cb.patch"
Content-Disposition: attachment; 
	filename="httpd-trunk-h2_session_on_invalid_frame_recv_cb.patch"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_idk2rica0

SW5kZXg6IG1vZHVsZXMvaHR0cDIvaDJfc2Vzc2lvbi5jCj09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0tIG1vZHVsZXMv
aHR0cDIvaDJfc2Vzc2lvbi5jCShyZXZpc2lvbiAxNjk2NzUxKQorKysgbW9kdWxlcy9odHRwMi9o
Ml9zZXNzaW9uLmMJKHdvcmtpbmcgY29weSkKQEAgLTExMiw3ICsxMTIsNyBAQCBzdGF0aWMgc3Np
emVfdCBzZW5kX2NiKG5naHR0cDJfc2Vzc2lvbiAqbmdoMiwKIAogc3RhdGljIGludCBvbl9pbnZh
bGlkX2ZyYW1lX3JlY3ZfY2IobmdodHRwMl9zZXNzaW9uICpuZ2gyLAogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmdodHRwMl9mcmFtZSAqZnJhbWUsCi0gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ2h0dHAyX2Vycm9yIGVycm9yLCB2b2lkICp1
c2VycCkKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBlcnJvciwgdm9p
ZCAqdXNlcnApCiB7CiAgICAgaDJfc2Vzc2lvbiAqc2Vzc2lvbiA9IChoMl9zZXNzaW9uICopdXNl
cnA7CiAgICAgKHZvaWQpbmdoMjsKQEAgLTEyNiw3ICsxMjYsNyBAQCBzdGF0aWMgaW50IG9uX2lu
dmFsaWRfZnJhbWVfcmVjdl9jYihuZ2h0dHAyX3Nlc3NpbwogICAgICAgICBmcmFtZV9wcmludChm
cmFtZSwgYnVmZmVyLCBzaXplb2YoYnVmZmVyKS9zaXplb2YoYnVmZmVyWzBdKSk7CiAgICAgICAg
IGFwX2xvZ19jZXJyb3IoQVBMT0dfTUFSSywgQVBMT0dfVFJBQ0UyLCAwLCBzZXNzaW9uLT5jLAog
ICAgICAgICAgICAgICAgICAgICAgICJoMl9zZXNzaW9uOiBjYWxsYmFjayBvbl9pbnZhbGlkX2Zy
YW1lX3JlY3YgZXJyb3I9JWQgJXMiLAotICAgICAgICAgICAgICAgICAgICAgIChpbnQpZXJyb3Is
IGJ1ZmZlcik7CisgICAgICAgICAgICAgICAgICAgICAgZXJyb3IsIGJ1ZmZlcik7CiAgICAgfQog
ICAgIHJldHVybiAwOwogfQo=
--001a113fa78477d7b7051dbbc2c3--

From dev-return-83492-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 20 10:47:26 2015
Return-Path: <dev-return-83492-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4C2D9182C0
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 20 Aug 2015 10:47:26 +0000 (UTC)
Received: (qmail 54492 invoked by uid 500); 20 Aug 2015 10:47:25 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 54406 invoked by uid 500); 20 Aug 2015 10:47:25 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 54396 invoked by uid 99); 20 Aug 2015 10:47:25 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Aug 2015 10:47:25 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 40E731AA7FD
	for <dev@httpd.apache.org>; Thu, 20 Aug 2015 10:47:25 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id Db43P4-E2FKC for <dev@httpd.apache.org>;
	Thu, 20 Aug 2015 10:47:24 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id C666521044
	for <dev@httpd.apache.org>; Thu, 20 Aug 2015 10:47:23 +0000 (UTC)
Received: from [192.168.1.42] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 3DCED15A059A
	for <dev@httpd.apache.org>; Thu, 20 Aug 2015 12:47:21 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: httpd-trunk\modules\http2\h2_session.c Mystery
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CAKQ1sVMbj5B6N5u5M-8qtL3AC6VGu2c_+ZfHyx8UqG40+hAgXg@mail.gmail.com>
Date: Thu, 20 Aug 2015 12:47:20 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <2E2E20BE-9D7C-44CE-82F8-7021E2927686@greenbytes.de>
References: <55D5A44F.1070107@gknw.net> <CAKQ1sVMbj5B6N5u5M-8qtL3AC6VGu2c_+ZfHyx8UqG40+hAgXg@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

Ah, yes. I think that once changed in an older nghttp2 release and went =
unnoticed. Thanks for the fix!

> Am 20.08.2015 um 12:39 schrieb Yann Ylavic <ylavic.dev@gmail.com>:
>=20
> Hi,
>=20
> On Thu, Aug 20, 2015 at 11:56 AM, NormW <normw@gknw.net> wrote:
>>>=20
>>> #    File: h2_session.c
>>> # ---------------------
>>> #
>>> =
512:nghttp2_session_callbacks_set_on_invalid_frame_recv_callback(*pcb,
>>=20
>> on_invalid_frame_recv_cb)
>>>=20
>>> #   Error:
>>> ^
>>> #   illegal implicit conversion
>>> #   from 'int    (struct nghttp2_session *, const union  *,
>>> @enum$24h2_session_c, void *)'
>>> #   to   'int (*)(struct nghttp2_session *, const union  *, int, =
void *)'
>=20
> It seems that the nghttp2_on_invalid_frame_recv_callback type requires
> an int for its error parameter, not a nghttp2_error enum.
>=20
> Does the attached patch helps?
>=20
> Regards,
> Yann.
> <httpd-trunk-h2_session_on_invalid_frame_recv_cb.patch>

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83493-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 20 11:07:54 2015
Return-Path: <dev-return-83493-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DF60A1849B
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 20 Aug 2015 11:07:53 +0000 (UTC)
Received: (qmail 99089 invoked by uid 500); 20 Aug 2015 11:07:53 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 99015 invoked by uid 500); 20 Aug 2015 11:07:53 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 99005 invoked by uid 99); 20 Aug 2015 11:07:53 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Aug 2015 11:07:53 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id E919CC0332
	for <dev@httpd.apache.org>; Thu, 20 Aug 2015 11:07:52 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.001
X-Spam-Level: *
X-Spam-Status: No, score=1.001 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id xndw2e2kG-ql for <dev@httpd.apache.org>;
	Thu, 20 Aug 2015 11:07:46 +0000 (UTC)
Received: from node176.itex.at (mail.123x.at [194.242.35.176])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id E8B4C24F53
	for <dev@httpd.apache.org>; Thu, 20 Aug 2015 11:07:45 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
	by node176.itex.at (Postfix) with ESMTP id 5DF7A22871
	for <dev@httpd.apache.org>; Thu, 20 Aug 2015 13:07:43 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at node176.itex.at
Received: from node176.itex.at ([127.0.0.1])
	by localhost (node176.itex.at [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id gjDasa7_YR3y for <dev@httpd.apache.org>;
	Thu, 20 Aug 2015 13:07:43 +0200 (CEST)
Received: from [10.202.65.180] (CPE-58-168-41-204.lns7.cht.bigpond.net.au [58.168.41.204])
	(Authenticated sender: normw@gknw.net)
	by node176.itex.at (Postfix) with ESMTPSA id 1864C1FFE0
	for <dev@httpd.apache.org>; Thu, 20 Aug 2015 13:07:41 +0200 (CEST)
Subject: Re: httpd-trunk\modules\http2\h2_session.c Mystery
To: dev@httpd.apache.org
References: <55D5A44F.1070107@gknw.net>
 <CAKQ1sVMbj5B6N5u5M-8qtL3AC6VGu2c_+ZfHyx8UqG40+hAgXg@mail.gmail.com>
From: NormW <normw@gknw.net>
Message-ID: <55D5B4F4.6030301@gknw.net>
Date: Thu, 20 Aug 2015 21:07:32 +1000
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:38.0) Gecko/20100101
 Thunderbird/38.1.0
MIME-Version: 1.0
In-Reply-To: <CAKQ1sVMbj5B6N5u5M-8qtL3AC6VGu2c_+ZfHyx8UqG40+hAgXg@mail.gmail.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit

On 20/08/2015 8:39 PM, Yann Ylavic wrote:
> Hi,
>
> On Thu, Aug 20, 2015 at 11:56 AM, NormW <normw@gknw.net> wrote:
>>>
>>> #    File: h2_session.c
>>> # ---------------------
>>> #
>>> 512:nghttp2_session_callbacks_set_on_invalid_frame_recv_callback(*pcb,
>>
>> on_invalid_frame_recv_cb)
>>>
>>> #   Error:
>>> ^
>>> #   illegal implicit conversion
>>> #   from 'int    (struct nghttp2_session *, const union  *,
>>> @enum$24h2_session_c, void *)'
>>> #   to   'int (*)(struct nghttp2_session *, const union  *, int, void *)'
>
> It seems that the nghttp2_on_invalid_frame_recv_callback type requires
> an int for its error parameter, not a nghttp2_error enum.
>
> Does the attached patch helps?
>
> Regards,
> Yann.
>
G/Evening from Down Under,
Yes! Whatever the patch did (not yet looked) it worked; h2_session.c 
(and mod_h2 now compile/link without error.
If my compiler was a person I'd have to shout it a beer.
Regards,
Thanks for solving my Mystery.
Norm


From dev-return-83494-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 20 21:59:28 2015
Return-Path: <dev-return-83494-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 27FAE10C59
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 20 Aug 2015 21:59:28 +0000 (UTC)
Received: (qmail 96593 invoked by uid 500); 20 Aug 2015 21:59:22 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 96528 invoked by uid 500); 20 Aug 2015 21:59:22 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 96518 invoked by uid 99); 20 Aug 2015 21:59:22 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Aug 2015 21:59:22 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 1D7C5DF998
	for <dev@httpd.apache.org>; Thu, 20 Aug 2015 21:59:22 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.001
X-Spam-Level:
X-Spam-Status: No, score=-0.001 tagged_above=-999 required=6.31
	tests=[SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id iiZK1gvHfZKp for <dev@httpd.apache.org>;
	Thu, 20 Aug 2015 21:59:08 +0000 (UTC)
Received: from ni.com (skprod3.natinst.com [130.164.80.24])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 35A7121381
	for <dev@httpd.apache.org>; Thu, 20 Aug 2015 21:59:07 +0000 (UTC)
Received: from us-aus-mgwout2.amer.corp.natinst.com (nb-snip2-1338.natinst.com [130.164.19.135])
	by us-aus-skprod3.natinst.com (8.15.0.59/8.15.0.59) with ESMTP id t7KLwxwZ021511
	for <dev@httpd.apache.org>; Thu, 20 Aug 2015 16:58:59 -0500
Received: from [10.2.33.35] ([130.164.14.198])
          by us-aus-mgwout2.amer.corp.natinst.com (Lotus Domino Release 8.5.3FP6 HF1218)
          with ESMTP id 2015082016585912-318553 ;
          Thu, 20 Aug 2015 16:58:59 -0500 
To: Apache Dev <dev@httpd.apache.org>
From: Paul Spangler <paul.spangler@ni.com>
Subject: [PATCH 57300] mod_session save optimization
Message-ID: <55D64DA2.8090309@ni.com>
Date: Thu, 20 Aug 2015 16:58:58 -0500
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.1.0
MIME-Version: 1.0
X-MIMETrack: Itemize by SMTP Server on US-AUS-MGWOut2/AUS/H/NIC(Release 8.5.3FP6 HF1218|December
 12, 2014) at 08/20/2015 04:58:59 PM,
	Serialize by Router on US-AUS-MGWOut2/AUS/H/NIC(Release 8.5.3FP6 HF1218|December
 12, 2014) at 08/20/2015 04:58:59 PM,
	Serialize complete at 08/20/2015 04:58:59 PM
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset=utf-8; format=flowed
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:,, definitions=2015-08-20_10:,,
 signatures=0

Hello,

The bug report contains a more detailed explanation of the patch, but 
there are some points I thought might lead to some discussion.

First a quick summary of the issue: mod_session writes out the session 
every request even if there aren't any changes to the data. This makes 
some sense when the session has a max age and the expiry value needs to 
be refreshed. However, there isn't likely to be much benefit in 
repeatedly refreshing the expiry by a few milliseconds, possibly 
generating database traffic each time. This patch proposes a new 
directive to define an interval of time where the expiry doesn't need to 
be refreshed if there are no session data changes.

1. We had a hard time coming up with a name for the directive. The patch 
goes with SessionExpiryUpdateInterval, being the interval of time that 
may pass before updating the expiry value is required. I don't know if 
there are any existing directives with a similar function that we should 
mimic instead.

2. The patch includes a behavior change independent of the new directive 
when using sessions without a max age: if the data hasn't changed, don't 
write out the session. Most noticeably, this means new sessions that 
never get data are discarded without being saved.

3. I wasn't sure how best to add tests for a new directive since the 
test server won't start if the directive is missing. The patch that 
includes the test changes look for the 2.5 version to know the new 
directive is there, and will require a modification if/when the 
directive is back-ported to 2.4 to enable the new tests.

https://bz.apache.org/bugzilla/show_bug.cgi?id=57300

Thanks for your consideration.
-- 
Paul Spangler
LabVIEW R&D
National Instruments

From dev-return-83495-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 21 13:48:02 2015
Return-Path: <dev-return-83495-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7B27818F3F
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 21 Aug 2015 13:48:02 +0000 (UTC)
Received: (qmail 38176 invoked by uid 500); 21 Aug 2015 13:48:01 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 38093 invoked by uid 500); 21 Aug 2015 13:48:01 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 38079 invoked by uid 99); 21 Aug 2015 13:48:01 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Aug 2015 13:48:01 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id DCEDAC0C0C
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 13:48:00 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 63fpxtKJqXTK for <dev@httpd.apache.org>;
	Fri, 21 Aug 2015 13:48:00 +0000 (UTC)
Received: from mail-ig0-f178.google.com (mail-ig0-f178.google.com [209.85.213.178])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 5074824B15
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 13:47:59 +0000 (UTC)
Received: by igfj19 with SMTP id j19so14411984igf.1
        for <dev@httpd.apache.org>; Fri, 21 Aug 2015 06:47:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=WzuRPcXmOfHsIvLZY4DeNISriVkIXZsZrrPkFBzdTnY=;
        b=Z81iVVXTRKObdgtlILVo22/s4em45aOkjXnHGAzBYZzvX+5giOotnBMOiZ1pFpyXPC
         gBGiHOVTCb8LT8ZlKMf6VGXavdqIYv7Zhu2RPMmsEtiIWR16hOAGPDeQVJvzuRTWrxOh
         Z/f+EtN33GjMmhdLOavHLCP+uNCB5EGGT1/NB4DvZjgWOD5WPEIxVzYcjixGEvAtmVQn
         UXs/6uJzti5dRuGQqcc81CWFjm1H1AJqkAhyEcaIsQ/1+R+LBZqhvkiSwcVF3LWnWJrd
         ejBLotHlSZkvsF4jdiLi4y6WElkcjndPm3ruF4bwYH0/OTMUNCBdDO9Q/tJUh0u6WFHc
         je6w==
MIME-Version: 1.0
X-Received: by 10.50.138.70 with SMTP id qo6mr2852274igb.15.1440164878300;
 Fri, 21 Aug 2015 06:47:58 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Fri, 21 Aug 2015 06:47:58 -0700 (PDT)
In-Reply-To: <20150815220509.75D1BAC0456@hades.apache.org>
References: <20150815220509.75D1BAC0456@hades.apache.org>
Date: Fri, 21 Aug 2015 15:47:58 +0200
Message-ID: <CAKQ1sVO_jvv1NaE8jJ2boadFa8RBre3P6bdz+V3M9MOV=b2Rrw@mail.gmail.com>
Subject: Re: svn commit: r1696105 - in /httpd/httpd/trunk: CHANGES
 docs/manual/mod/mod_socache_memcache.xml modules/cache/mod_socache_memcache.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

On Sun, Aug 16, 2015 at 12:05 AM,  <jailletc36@apache.org> wrote:
> Author: jailletc36
> Date: Sat Aug 15 22:05:08 2015
> New Revision: 1696105
>
> URL: http://svn.apache.org/r1696105
[]
> Modified: httpd/httpd/trunk/modules/cache/mod_socache_memcache.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/cache/mod_socache_memcache.c?rev=1696105&r1=1696104&r2=1696105&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/modules/cache/mod_socache_memcache.c (original)
> +++ httpd/httpd/trunk/modules/cache/mod_socache_memcache.c Sat Aug 15 22:05:08 2015
[]
> @@ -310,6 +319,35 @@ static const ap_socache_provider_t socac
[]
> +static const char *socache_mc_set_ttl(cmd_parms *cmd, void *dummy,
> +                                      const char *arg)
> +{
> +    socache_mc_svr_cfg *sconf = ap_get_module_config(cmd->server->module_config,
> +                                                     &socache_memcache_module);
> +    int i;
> +
> +    i = atoi(arg);
> +
> +    if ((i < 1) || (i > 1800)) {

Why a limit of 1800? Maybe the implicit INT_MAX is good enough.
Also the memcached may never close its connections by itself, or
always do, so -1 and 0 could also be interesting...

> +        return apr_pstrcat(cmd->pool, cmd->cmd->name,
> +                           " must be a number between 1 and 1800.", NULL);
> +    }
> +
> +    /* apr_memcache_server_create needs a ttl in usec. */
> +    sconf->ttl = i * 1000 * 1000;

sconf->ttl = apr_time_from_sec(i) ?

> +
> +    return NULL;
> +}

Regards,
Yann.

From dev-return-83496-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 21 14:15:28 2015
Return-Path: <dev-return-83496-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8C85918079
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 21 Aug 2015 14:15:28 +0000 (UTC)
Received: (qmail 7929 invoked by uid 500); 21 Aug 2015 14:15:26 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 7858 invoked by uid 500); 21 Aug 2015 14:15:26 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 7840 invoked by uid 99); 21 Aug 2015 14:15:26 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Aug 2015 14:15:25 +0000
Received: from gauss.localdomain (v4-861345e7.pool.vitroconnect.de [134.19.69.231])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPSA id 7F5AA1A0046
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 14:15:25 +0000 (UTC)
Received: from [IPv6:::1] (localhost [IPv6:::1])
	by gauss.localdomain (Postfix) with ESMTP id B3C49255
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 16:15:22 +0200 (CEST)
Message-ID: <55D7327A.9000708@apache.org>
Date: Fri, 21 Aug 2015 16:15:22 +0200
From: Ruediger Pluem <rpluem@apache.org>
User-Agent: Mozilla/5.0 (X11; Linux i686 on x86_64; rv:36.0) Gecko/20100101 Firefox/36.0 SeaMonkey/2.33.1
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES
 docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
References: <20150821123403.6E568AC04B1@hades.apache.org>
In-Reply-To: <20150821123403.6E568AC04B1@hades.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit



On 08/21/2015 02:34 PM, ylavic@apache.org wrote:
> Author: ylavic
> Date: Fri Aug 21 12:34:02 2015
> New Revision: 1696960
> 
> URL: http://svn.apache.org/r1696960
> Log:
> mod_proxy_balancer: Fix balancers and balancer members reuse on
> restart when new ones are added.  PR 58024.
> 
> Since slotmem_create() issues a strict check on the size of an existing
> slot before reusing it, it won't reuse existing balancers and members when
> new ones are added during restart (whereas growth margins would allow it).
> Fix this by using slotmem_attach() first and if it succeeds do the checks
> based on the returned previous number of existing entries.
> 
> Modified:
>     httpd/httpd/trunk/CHANGES
>     httpd/httpd/trunk/docs/log-message-tags/next-number
>     httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
> 
> Modified: httpd/httpd/trunk/CHANGES
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=1696960&r1=1696959&r2=1696960&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Aug 21 12:34:02 2015
> @@ -1,6 +1,9 @@
>                                                           -*- coding: utf-8 -*-
>  Changes with Apache 2.5.0
>  
> +  *) mod_proxy_balancer: Fix balancers and balancer members reuse on
> +     restart when new ones are added.  PR 58024.  [Yann Ylavic]
> +
>    *) mod_socache_memcache: Add the 'MemcacheConnTTL' directive to control how 
>       long to keep idle connections with the memcache server(s).
>       Change default value from 600 usec (!) to 15 sec. PR 58091
> 
> Modified: httpd/httpd/trunk/docs/log-message-tags/next-number
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/log-message-tags/next-number?rev=1696960&r1=1696959&r2=1696960&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/docs/log-message-tags/next-number (original)
> +++ httpd/httpd/trunk/docs/log-message-tags/next-number Fri Aug 21 12:34:02 2015
> @@ -1 +1 @@
> -2964
> +2966
> 
> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c?rev=1696960&r1=1696959&r2=1696960&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c (original)
> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Fri Aug 21 12:34:02 2015
> @@ -761,8 +761,11 @@ static int balancer_post_config(apr_pool
>          char *id;
>          proxy_balancer *balancer;
>          ap_slotmem_type_t type;
> +        apr_size_t attached_size;
> +        unsigned int attached_num;
>          void *sconf = s->module_config;
>          conf = (proxy_server_conf *)ap_get_module_config(sconf, &proxy_module);
> +
>          /*
>           * During create_proxy_config() we created a dummy id. Now that
>           * we have identifying info, we can create the real id
> @@ -794,11 +797,39 @@ static int balancer_post_config(apr_pool
>                           (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>                           (int)conf->balancers->nelts, conf->max_balancers);
>  
> -            rv = storage->create(&new, conf->id,
> -                                 ALIGNED_PROXY_BALANCER_SHARED_SIZE,
> -                                 conf->max_balancers, type, pconf);
> +            /* First try to attach() since the number of configured balancers
> +             * may have changed during restart, and we don't want create() to
> +             * fail because the overall size * number of entries is not stricly
> +             * identical to the previous run.  There may still be enough room
> +             * for this new run thanks to bgrowth margin, so if attach()
> +             * succeeds we can only check for the number of available entries
> +             * to be *greater or* equal to what we need now.  If attach() fails
> +             * we simply fall back to create().
> +             */
> +            rv = storage->attach(&new, conf->id,
> +                                 &attached_size, &attached_num,
> +                                 pconf);
> +            if (rv != APR_SUCCESS) {
> +                rv = storage->create(&new, conf->id,
> +                                     ALIGNED_PROXY_BALANCER_SHARED_SIZE,
> +                                     conf->max_balancers, type, pconf);
> +            }
> +            else {
> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, APLOGNO(02964)
> +                             "Balancers attached: %d, %d (%d)",
> +                             (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
> +                             (int)attached_num, conf->max_balancers);
> +                if (attached_size == ALIGNED_PROXY_BALANCER_SHARED_SIZE
> +                        && attached_num >= conf->balancers->nelts) {
> +                    conf->max_balancers = attached_num;
> +                }
> +                else {
> +                    rv = APR_ENOSPC;

Hm. Doesn't that mean that if I keep on adding stuff and do graceful restarts that at one point in time I will have used
up all my growth and need to do a hard restart?
If yes, it should be probably documented to avoid some unexpected surprises.


Regards

Rüdiger

From dev-return-83497-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 21 14:21:25 2015
Return-Path: <dev-return-83497-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 25F5E180A2
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 21 Aug 2015 14:21:25 +0000 (UTC)
Received: (qmail 19752 invoked by uid 500); 21 Aug 2015 14:21:24 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 19694 invoked by uid 500); 21 Aug 2015 14:21:24 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 19684 invoked by uid 99); 21 Aug 2015 14:21:24 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Aug 2015 14:21:24 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id C7FC61826D6
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 14:21:23 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 5DTbG-ZgBSWy for <dev@httpd.apache.org>;
	Fri, 21 Aug 2015 14:21:16 +0000 (UTC)
Received: from mail-ig0-f182.google.com (mail-ig0-f182.google.com [209.85.213.182])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id C69A82110B
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 14:21:15 +0000 (UTC)
Received: by igcse8 with SMTP id se8so1009643igc.1
        for <dev@httpd.apache.org>; Fri, 21 Aug 2015 07:21:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Cjx1gPiWW0EJf23T2f9Dum4I6pCx/S7vsxacbU09YfM=;
        b=dbi/xwhBsOBrzm0iATVSnKSeB2mDv77qpmUU2/LD7nbzSgnHO4C9fj8dbg8XxY0ONO
         BIzMbNU8zHiOQxxFu1QGXXRDg7EpD+BC0/VImYHDxikkLDNYqDJaem3wvWDSfFr3VUBZ
         ++gBI2kgqMhXnt+kVY1lXwDNqKv5wkvO/lIYDBlVSl5GsjIIQwtA6gwBRkbbBqFgNghv
         r9xMQAcHSO/QLxaZ0Oimdf3URZxjQoA5gWaOjXaGOeWlCVu85r7n30KI7VJoGbmUMfct
         BoaWAotze11r5SmrOPe9pCtjVXFKCrfNQbiK1ImNbMFv/nYjvuBJP4lMv/QTww75Cb0S
         goXw==
MIME-Version: 1.0
X-Received: by 10.50.6.16 with SMTP id w16mr2806307igw.74.1440166875144; Fri,
 21 Aug 2015 07:21:15 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Fri, 21 Aug 2015 07:21:15 -0700 (PDT)
In-Reply-To: <20150821135934.3D6CEAC04B1@hades.apache.org>
References: <20150821135934.3D6CEAC04B1@hades.apache.org>
Date: Fri, 21 Aug 2015 16:21:15 +0200
Message-ID: <CAKQ1sVPXLBQ-0z+tc_nSbWbh35jGNJD7W3YShq1bTpk0Cy_Bng@mail.gmail.com>
Subject: Re: svn commit: r1696997 - /httpd/httpd/branches/2.2.x/STATUS
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

On Fri, Aug 21, 2015 at 3:59 PM,  <rpluem@apache.org> wrote:
>
[]
> Modified: httpd/httpd/branches/2.2.x/STATUS
> URL: http://svn.apache.org/viewvc/httpd/httpd/branches/2.2.x/STATUS?rev=1696997&r1=1696996&r2=1696997&view=diff
> ==============================================================================
> --- httpd/httpd/branches/2.2.x/STATUS (original)
> +++ httpd/httpd/branches/2.2.x/STATUS Fri Aug 21 13:59:33 2015
> @@ -126,6 +126,7 @@ PATCHES PROPOSED TO BACKPORT FROM TRUNK:
>                    http://svn.apache.org/r1688343
>       2.2.x patch: http://people.apache.org/~ylavic/httpd-2.2.x-SubstituteInheritBefore-v4.patch
>       +1: ylavic
> +     rpluem: Doesn't that change the previous behaviour if SubstituteInheritBefore is not set?

Thanks! Fixed in r1697002, I will update the backport proposals (2.4
and 2.2) too.

From dev-return-83498-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 21 14:25:52 2015
Return-Path: <dev-return-83498-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DDCD4180BE
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 21 Aug 2015 14:25:51 +0000 (UTC)
Received: (qmail 28473 invoked by uid 500); 21 Aug 2015 14:25:51 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 28400 invoked by uid 500); 21 Aug 2015 14:25:51 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 28390 invoked by uid 99); 21 Aug 2015 14:25:51 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Aug 2015 14:25:51 +0000
Received: from gauss.localdomain (v4-861345e7.pool.vitroconnect.de [134.19.69.231])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPSA id AF4261A0046
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 14:25:50 +0000 (UTC)
Received: from [IPv6:::1] (localhost [IPv6:::1])
	by gauss.localdomain (Postfix) with ESMTP id 20DBE255
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 16:25:48 +0200 (CEST)
Message-ID: <55D734EC.4000904@apache.org>
Date: Fri, 21 Aug 2015 16:25:48 +0200
From: Ruediger Pluem <rpluem@apache.org>
User-Agent: Mozilla/5.0 (X11; Linux i686 on x86_64; rv:36.0) Gecko/20100101 Firefox/36.0 SeaMonkey/2.33.1
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: svn commit: r1697002 -
 /httpd/httpd/trunk/modules/filters/mod_substitute.c
References: <20150821141918.18EBBAC07C2@hades.apache.org>
In-Reply-To: <20150821141918.18EBBAC07C2@hades.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Wasn't it intended for trunk to change the default behavior?

Regards

Rüdiger

On 08/21/2015 04:19 PM, ylavic@apache.org wrote:
> Author: ylavic
> Date: Fri Aug 21 14:19:17 2015
> New Revision: 1697002
> 
> URL: http://svn.apache.org/r1697002
> Log:
> mod_substitute: follow up r1684900.
> Really inherit before when asked to (inverse if/else contents).
> 
> Modified:
>     httpd/httpd/trunk/modules/filters/mod_substitute.c
> 
> Modified: httpd/httpd/trunk/modules/filters/mod_substitute.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/filters/mod_substitute.c?rev=1697002&r1=1697001&r2=1697002&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/modules/filters/mod_substitute.c (original)
> +++ httpd/httpd/trunk/modules/filters/mod_substitute.c Fri Aug 21 14:19:17 2015
> @@ -97,13 +97,13 @@ static void *merge_substitute_dcfg(apr_p
>       * 'off' to follow the corrected/expected behavior, without violating POLS.
>       */
>      if (a->inherit_before == 1) {
> -        a->patterns = apr_array_append(p, base->patterns,
> -                                          over->patterns);
> -    }
> -    else {
>          a->patterns = apr_array_append(p, over->patterns,
>                                            base->patterns);
>      }
> +    else {
> +        a->patterns = apr_array_append(p, base->patterns,
> +                                          over->patterns);
> +    }
>      a->max_line_length = over->max_line_length_set ?
>                               over->max_line_length : base->max_line_length;
>      a->max_line_length_set = over->max_line_length_set
> 
> 
> 

From dev-return-83499-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 21 14:30:08 2015
Return-Path: <dev-return-83499-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C1C22180DF
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 21 Aug 2015 14:30:08 +0000 (UTC)
Received: (qmail 34800 invoked by uid 500); 21 Aug 2015 14:30:00 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 34735 invoked by uid 500); 21 Aug 2015 14:30:00 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 34720 invoked by uid 99); 21 Aug 2015 14:30:00 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Aug 2015 14:30:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id E75CE1AA979
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 14:29:59 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id z31S-VAN4snU for <dev@httpd.apache.org>;
	Fri, 21 Aug 2015 14:29:59 +0000 (UTC)
Received: from mail-io0-f172.google.com (mail-io0-f172.google.com [209.85.223.172])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 1D0E242B14
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 14:29:59 +0000 (UTC)
Received: by iodv127 with SMTP id v127so83224849iod.3
        for <dev@httpd.apache.org>; Fri, 21 Aug 2015 07:29:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=6C7HSSM7m40qQWgM3C23xpHT9GD2+h8mERx3AOBpnjQ=;
        b=bz1ve19QPITUlkJUQOthY77v2sMZ8aWJR8BMyvkU0B1C+0AGNohKvqiOub0SpMnz6g
         uYFS5rKXciBWV0v0ly96l9xGSf+Vovbi/9s2YMs7jVO10D2vSXkFef3LvzSHhpZyG6xH
         cLuzCELrYPi6etu7FEiwD/ILQrpPqbhWw6URT7en5MwCjoe7jbvudwyEhkR9wXX+tflf
         J0pyd7OpTOEy9qnuaxI5CYKr+bbJC6sT8NaWBggQQbkJgPw1s9ffX/qshXV2PYNsuL7s
         eFrR5txbgWhC6CZzy5PZgMWvtWdLbSPaEx2mLNqbhK8L7pykdseNhv/75B796yoL6fef
         ZpNA==
MIME-Version: 1.0
X-Received: by 10.107.150.145 with SMTP id y139mr6941662iod.128.1440167398647;
 Fri, 21 Aug 2015 07:29:58 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Fri, 21 Aug 2015 07:29:58 -0700 (PDT)
In-Reply-To: <55D734EC.4000904@apache.org>
References: <20150821141918.18EBBAC07C2@hades.apache.org>
	<55D734EC.4000904@apache.org>
Date: Fri, 21 Aug 2015 16:29:58 +0200
Message-ID: <CAKQ1sVPWMez=RYGPcVPHonf_qAX9nXmyVyvTAP3xVDiHVVahiQ@mail.gmail.com>
Subject: Re: svn commit: r1697002 - /httpd/httpd/trunk/modules/filters/mod_substitute.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

On Fri, Aug 21, 2015 at 4:25 PM, Ruediger Pluem <rpluem@apache.org> wrote:
> Wasn't it intended for trunk to change the default behavior?

Yes it was, still when inherit_before is set we need to do that.

The code in trunk is:
    if (a->inherit_before == 1) {
whereas 2.4 and 2.2 (would) have:
    if (a->inherit_before) { <= can be 1 but also -1

Regards,
Yann.

From dev-return-83500-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 21 14:31:51 2015
Return-Path: <dev-return-83500-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0C953180EC
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 21 Aug 2015 14:31:51 +0000 (UTC)
Received: (qmail 39038 invoked by uid 500); 21 Aug 2015 14:31:49 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 38968 invoked by uid 500); 21 Aug 2015 14:31:49 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 38958 invoked by uid 99); 21 Aug 2015 14:31:49 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Aug 2015 14:31:49 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 40C3DC08D9
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 14:31:49 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id XWu881Yzhew3 for <dev@httpd.apache.org>;
	Fri, 21 Aug 2015 14:31:48 +0000 (UTC)
Received: from mail-ig0-f170.google.com (mail-ig0-f170.google.com [209.85.213.170])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 73F862110B
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 14:31:48 +0000 (UTC)
Received: by igcse8 with SMTP id se8so1257194igc.1
        for <dev@httpd.apache.org>; Fri, 21 Aug 2015 07:31:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=a3gNSh/noThnZu3cuDWVmVNjCQKaVLYmjqpneor+AFg=;
        b=TTtFqBHuTpcuZqht927gh2UmhA82VrCtiCpnbRZpTS0Xsf4ZUA1C5zI1pVRUqM5QB4
         8+rQjZKTKe0GKKBgnKFDFci34wSAtsP2QpCDbVVIJD7euF3sY0hAuFhK7VXYjbFel8Jp
         cGC3UD3CuoJHXGd+gxeh4DDhF+zJoVxWBoK8J4NbQggqmUhJ+vpa4V75qdoAtHcKs5P6
         RB+QAepMDtZ0FqgOSYqDT/XSDvDH6F5emfwkENPsX+bZL5olBcJaisV8M1uokgQ4pfS0
         xGUuIyBl3ON2Ec7tZMVlragoYnVERhAfUhVsdeWexNHa1lj5mgvcsU+ThpoMj58SZewf
         /8vw==
MIME-Version: 1.0
X-Received: by 10.50.138.70 with SMTP id qo6mr3048530igb.15.1440167507832;
 Fri, 21 Aug 2015 07:31:47 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Fri, 21 Aug 2015 07:31:47 -0700 (PDT)
In-Reply-To: <CAKQ1sVPWMez=RYGPcVPHonf_qAX9nXmyVyvTAP3xVDiHVVahiQ@mail.gmail.com>
References: <20150821141918.18EBBAC07C2@hades.apache.org>
	<55D734EC.4000904@apache.org>
	<CAKQ1sVPWMez=RYGPcVPHonf_qAX9nXmyVyvTAP3xVDiHVVahiQ@mail.gmail.com>
Date: Fri, 21 Aug 2015 16:31:47 +0200
Message-ID: <CAKQ1sVO4_ABaSe2jnqwmyum17ESDKWf-3da_fJtDYSNB6Oon0w@mail.gmail.com>
Subject: Re: svn commit: r1697002 - /httpd/httpd/trunk/modules/filters/mod_substitute.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

On Fri, Aug 21, 2015 at 4:29 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
> On Fri, Aug 21, 2015 at 4:25 PM, Ruediger Pluem <rpluem@apache.org> wrote:
>> Wasn't it intended for trunk to change the default behavior?
>
> Yes it was, still when inherit_before is set we need to do that.

I meant, we need to do "apr_array_append(p, over->patterns,
base->patterns)" and not the inverse.

From dev-return-83501-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 21 14:36:35 2015
Return-Path: <dev-return-83501-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 84A6918110
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 21 Aug 2015 14:36:35 +0000 (UTC)
Received: (qmail 52542 invoked by uid 500); 21 Aug 2015 14:36:32 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 52462 invoked by uid 500); 21 Aug 2015 14:36:32 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 52453 invoked by uid 99); 21 Aug 2015 14:36:31 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Aug 2015 14:36:31 +0000
Received: from gauss.localdomain (v4-861345e7.pool.vitroconnect.de [134.19.69.231])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPSA id 728931A0046
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 14:36:31 +0000 (UTC)
Received: from [IPv6:::1] (localhost [IPv6:::1])
	by gauss.localdomain (Postfix) with ESMTP id AE5A2255
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 16:36:28 +0200 (CEST)
Message-ID: <55D7376C.3010203@apache.org>
Date: Fri, 21 Aug 2015 16:36:28 +0200
From: Ruediger Pluem <rpluem@apache.org>
User-Agent: Mozilla/5.0 (X11; Linux i686 on x86_64; rv:36.0) Gecko/20100101 Firefox/36.0 SeaMonkey/2.33.1
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: svn commit: r1697002 -
 /httpd/httpd/trunk/modules/filters/mod_substitute.c
References: <20150821141918.18EBBAC07C2@hades.apache.org>	<55D734EC.4000904@apache.org>	<CAKQ1sVPWMez=RYGPcVPHonf_qAX9nXmyVyvTAP3xVDiHVVahiQ@mail.gmail.com> <CAKQ1sVO4_ABaSe2jnqwmyum17ESDKWf-3da_fJtDYSNB6Oon0w@mail.gmail.com>
In-Reply-To: <CAKQ1sVO4_ABaSe2jnqwmyum17ESDKWf-3da_fJtDYSNB6Oon0w@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit



On 08/21/2015 04:31 PM, Yann Ylavic wrote:
> On Fri, Aug 21, 2015 at 4:29 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>> On Fri, Aug 21, 2015 at 4:25 PM, Ruediger Pluem <rpluem@apache.org> wrote:
>>> Wasn't it intended for trunk to change the default behavior?
>>
>> Yes it was, still when inherit_before is set we need to do that.
> 
> I meant, we need to do "apr_array_append(p, over->patterns,
> base->patterns)" and not the inverse.
> 

But apr_array_append(p, over->patterns, base->patterns) means that we do NOT inherit the stuff from the base
configuration before the configuration of our section. So the code before your recent patch was correct.

Regards

Rüdiger


From dev-return-83502-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 21 15:05:36 2015
Return-Path: <dev-return-83502-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E21DA181DC
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 21 Aug 2015 15:05:36 +0000 (UTC)
Received: (qmail 31122 invoked by uid 500); 21 Aug 2015 15:05:27 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 31023 invoked by uid 500); 21 Aug 2015 15:05:27 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 31012 invoked by uid 99); 21 Aug 2015 15:05:27 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Aug 2015 15:05:27 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id ABF23C08D9
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 15:05:26 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id SSFLxBeWfEtf for <dev@httpd.apache.org>;
	Fri, 21 Aug 2015 15:05:25 +0000 (UTC)
Received: from mail-io0-f178.google.com (mail-io0-f178.google.com [209.85.223.178])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 23CB020380
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 15:05:25 +0000 (UTC)
Received: by iodb91 with SMTP id b91so84287187iod.1
        for <dev@httpd.apache.org>; Fri, 21 Aug 2015 08:05:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=eD6DsPaQNVvI4HYllwLt3y3GMFHog4L2kzTSqJHiyQE=;
        b=hf3M3dE0mWz7nxagGc6xDFo4VoPbYFD0Ioe910XLs101P7WTPjNtlUas6uZPDDsWB3
         DK+A1m+i0Ve2hWUa2Ri6oKFsMJBSKGxKEjMCxQw3GsaH6bhGbWB9fFskU4woykGpKpRs
         LYKUTVA9Cr9QIGRQZU5BvMiWZMK5Mj8wAFlb6Tf3GJBBtDlAJDr27s7oqZDXQBq0gCWj
         VUVLU0nypt5ljq15yX6fd8eHJ/k9GSOEHH21pm/UV6LdRnsT52CBJZ/IZH644V/tYOqH
         vL+2nsNA6GQA++Keb/sHjih8jdz/wS0IY/VIibHRxZHBJjoMjV/Fkbq54QEULt6eoOu3
         G+og==
MIME-Version: 1.0
X-Received: by 10.107.14.145 with SMTP id 139mr6893410ioo.37.1440169524044;
 Fri, 21 Aug 2015 08:05:24 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Fri, 21 Aug 2015 08:05:23 -0700 (PDT)
In-Reply-To: <55D7376C.3010203@apache.org>
References: <20150821141918.18EBBAC07C2@hades.apache.org>
	<55D734EC.4000904@apache.org>
	<CAKQ1sVPWMez=RYGPcVPHonf_qAX9nXmyVyvTAP3xVDiHVVahiQ@mail.gmail.com>
	<CAKQ1sVO4_ABaSe2jnqwmyum17ESDKWf-3da_fJtDYSNB6Oon0w@mail.gmail.com>
	<55D7376C.3010203@apache.org>
Date: Fri, 21 Aug 2015 17:05:23 +0200
Message-ID: <CAKQ1sVOGaa7y1VwPY5ZoOnDav7j6SKFKFp8vakg75GZZhwj3jQ@mail.gmail.com>
Subject: Re: svn commit: r1697002 - /httpd/httpd/trunk/modules/filters/mod_substitute.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

On Fri, Aug 21, 2015 at 4:36 PM, Ruediger Pluem <rpluem@apache.org> wrote:
>
>
> On 08/21/2015 04:31 PM, Yann Ylavic wrote:
>> On Fri, Aug 21, 2015 at 4:29 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>> On Fri, Aug 21, 2015 at 4:25 PM, Ruediger Pluem <rpluem@apache.org> wrote:
>>>> Wasn't it intended for trunk to change the default behavior?
>>>
>>> Yes it was, still when inherit_before is set we need to do that.
>>
>> I meant, we need to do "apr_array_append(p, over->patterns,
>> base->patterns)" and not the inverse.
>>
>
> But apr_array_append(p, over->patterns, base->patterns) means that we do NOT inherit the stuff from the base
> configuration before the configuration of our section. So the code before your recent patch was correct.

Hm, you are right, I was misleaded by the comment in trunk:
    /* SubstituteInheritBefore was the default behavior until 2.5.x, ... */
since SubstituteInheritBefore was *not* the default behavior until 2.5.x.

To recap, apr_array_append(p, over->patterns, base->patterns) is the
legacy but it is obviously not the inherited base which is merged
before...

So to keep the existing/prior-to-r1697002 logic in the code (which was
good), I propose to revert r1697002 and rename SubstituteInheritBefore
to SubstituteInheritAfter, WDYT?

From dev-return-83503-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 21 15:32:33 2015
Return-Path: <dev-return-83503-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4705B182EA
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 21 Aug 2015 15:32:33 +0000 (UTC)
Received: (qmail 22125 invoked by uid 500); 21 Aug 2015 15:32:32 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 22054 invoked by uid 500); 21 Aug 2015 15:32:32 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 22043 invoked by uid 99); 21 Aug 2015 15:32:32 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Aug 2015 15:32:32 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 46D71C6A53
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 15:32:32 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id jl-zUDmttOky for <dev@httpd.apache.org>;
	Fri, 21 Aug 2015 15:32:18 +0000 (UTC)
Received: from mail-ig0-f178.google.com (mail-ig0-f178.google.com [209.85.213.178])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 211082100B
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 15:32:16 +0000 (UTC)
Received: by igfj19 with SMTP id j19so16659161igf.1
        for <dev@httpd.apache.org>; Fri, 21 Aug 2015 08:32:15 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=8tXzK00uMd6PPhPq1CRXqHjvywLLM4QreUsOhCYYA1I=;
        b=FHmTDCB4JVVPYqOrHeOw2SFPfzDLgAAF59Ccd6Yt2EXac0hyqEY4uwlue2WIh5EUh+
         MlGbkzmIpCMUxoczLJLUfgMKWeiKXMwrrYMMry7SHAwWcHrcW2QMeCe5eyCzGHd1YiOa
         4EvGaAKkZJHO2v8MTn4IrXYzorAIXF/MEsrUpaIp+XYOcGo2lLcnHuKi+g34NHXv+2P8
         CMFGUabZcEnahsPnRu56khHhiACsM18OQCKjtSyYIsWoCQFmbt++s3alnCJ5r1dtMjah
         B8kKA2e7mwjrIQKNIYVXWNjS0bMMz0yhBjvaF2jRVQeam7KA3DymmHoe0CywAWOkSR13
         /PnQ==
X-Gm-Message-State: ALoCoQmO6ogZlNDQ+FL5yTyt1p6kkdqld1u4gfXhtiH/nZpD7RphK3kGnmi7FtqaBFOzCKTu1Hiy
MIME-Version: 1.0
X-Received: by 10.50.17.66 with SMTP id m2mr3301166igd.77.1440171135338; Fri,
 21 Aug 2015 08:32:15 -0700 (PDT)
Received: by 10.107.41.9 with HTTP; Fri, 21 Aug 2015 08:32:15 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
In-Reply-To: <CAKQ1sVOGaa7y1VwPY5ZoOnDav7j6SKFKFp8vakg75GZZhwj3jQ@mail.gmail.com>
References: <20150821141918.18EBBAC07C2@hades.apache.org>
	<55D734EC.4000904@apache.org>
	<CAKQ1sVPWMez=RYGPcVPHonf_qAX9nXmyVyvTAP3xVDiHVVahiQ@mail.gmail.com>
	<CAKQ1sVO4_ABaSe2jnqwmyum17ESDKWf-3da_fJtDYSNB6Oon0w@mail.gmail.com>
	<55D7376C.3010203@apache.org>
	<CAKQ1sVOGaa7y1VwPY5ZoOnDav7j6SKFKFp8vakg75GZZhwj3jQ@mail.gmail.com>
Date: Fri, 21 Aug 2015 10:32:15 -0500
Message-ID: <CACsi252bq9r2ocZwfAROSPmNUbLZBMk1F9tW8SQ=GxGa-jvETg@mail.gmail.com>
Subject: Re: svn commit: r1697002 - /httpd/httpd/trunk/modules/filters/mod_substitute.c
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=089e0122e6eef0284c051dd3f817

--089e0122e6eef0284c051dd3f817
Content-Type: text/plain; charset=UTF-8

On Fri, Aug 21, 2015 at 10:05 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:

> On Fri, Aug 21, 2015 at 4:36 PM, Ruediger Pluem <rpluem@apache.org> wrote:
> >
> >
> > On 08/21/2015 04:31 PM, Yann Ylavic wrote:
> >> On Fri, Aug 21, 2015 at 4:29 PM, Yann Ylavic <ylavic.dev@gmail.com>
> wrote:
> >>> On Fri, Aug 21, 2015 at 4:25 PM, Ruediger Pluem <rpluem@apache.org>
> wrote:
> >>>> Wasn't it intended for trunk to change the default behavior?
> >>>
> >>> Yes it was, still when inherit_before is set we need to do that.
> >>
> >> I meant, we need to do "apr_array_append(p, over->patterns,
> >> base->patterns)" and not the inverse.
> >>
> >
> > But apr_array_append(p, over->patterns, base->patterns) means that we do
> NOT inherit the stuff from the base
> > configuration before the configuration of our section. So the code
> before your recent patch was correct.
>
> Hm, you are right, I was misleaded by the comment in trunk:
>     /* SubstituteInheritBefore was the default behavior until 2.5.x, ... */
> since SubstituteInheritBefore was *not* the default behavior until 2.5.x.
>
> To recap, apr_array_append(p, over->patterns, base->patterns) is the
> legacy but it is obviously not the inherited base which is merged
> before...
>
> So to keep the existing/prior-to-r1697002 logic in the code (which was
> good), I propose to revert r1697002 and rename SubstituteInheritBefore
> to SubstituteInheritAfter, WDYT?
>

It's a toggle, please leave it alone.  The default state will be one case in
2.4.x, and a different case in 2.5.x and later, but a user who puts that
directive into their config will observe the same behavior when they run
their config under 2.4 or later under 2.6.

--089e0122e6eef0284c051dd3f817
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On F=
ri, Aug 21, 2015 at 10:05 AM, Yann Ylavic <span dir=3D"ltr">&lt;<a href=3D"=
mailto:ylavic.dev@gmail.com" target=3D"_blank">ylavic.dev@gmail.com</a>&gt;=
</span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .=
8ex;border-left:1px #ccc solid;padding-left:1ex"><span class=3D"">On Fri, A=
ug 21, 2015 at 4:36 PM, Ruediger Pluem &lt;<a href=3D"mailto:rpluem@apache.=
org">rpluem@apache.org</a>&gt; wrote:<br>
&gt;<br>
&gt;<br>
&gt; On 08/21/2015 04:31 PM, Yann Ylavic wrote:<br>
&gt;&gt; On Fri, Aug 21, 2015 at 4:29 PM, Yann Ylavic &lt;<a href=3D"mailto=
:ylavic.dev@gmail.com">ylavic.dev@gmail.com</a>&gt; wrote:<br>
&gt;&gt;&gt; On Fri, Aug 21, 2015 at 4:25 PM, Ruediger Pluem &lt;<a href=3D=
"mailto:rpluem@apache.org">rpluem@apache.org</a>&gt; wrote:<br>
&gt;&gt;&gt;&gt; Wasn&#39;t it intended for trunk to change the default beh=
avior?<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; Yes it was, still when inherit_before is set we need to do tha=
t.<br>
&gt;&gt;<br>
&gt;&gt; I meant, we need to do &quot;apr_array_append(p, over-&gt;patterns=
,<br>
&gt;&gt; base-&gt;patterns)&quot; and not the inverse.<br>
&gt;&gt;<br>
&gt;<br>
&gt; But apr_array_append(p, over-&gt;patterns, base-&gt;patterns) means th=
at we do NOT inherit the stuff from the base<br>
&gt; configuration before the configuration of our section. So the code bef=
ore your recent patch was correct.<br>
<br>
</span>Hm, you are right, I was misleaded by the comment in trunk:<br>
=C2=A0 =C2=A0 /* SubstituteInheritBefore was the default behavior until 2.5=
.x, ... */<br>
since SubstituteInheritBefore was *not* the default behavior until 2.5.x.<b=
r>
<br>
To recap, apr_array_append(p, over-&gt;patterns, base-&gt;patterns) is the<=
br>
legacy but it is obviously not the inherited base which is merged<br>
before...<br>
<br>
So to keep the existing/prior-to-r1697002 logic in the code (which was<br>
good), I propose to revert r1697002 and rename SubstituteInheritBefore<br>
to SubstituteInheritAfter, WDYT?<br>
</blockquote></div><br></div><div class=3D"gmail_extra">It&#39;s a toggle, =
please leave it alone.=C2=A0 The default state will be one case in</div><di=
v class=3D"gmail_extra">2.4.x, and a different case in 2.5.x and later, but=
 a user who puts that</div><div class=3D"gmail_extra">directive into their =
config will observe the same behavior when they run</div><div class=3D"gmai=
l_extra">their config under 2.4 or later under 2.6.</div><div class=3D"gmai=
l_extra"><br></div><div class=3D"gmail_extra"><br></div></div>

--089e0122e6eef0284c051dd3f817--

From dev-return-83504-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 21 15:47:09 2015
Return-Path: <dev-return-83504-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 42AF3183EE
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 21 Aug 2015 15:47:09 +0000 (UTC)
Received: (qmail 79742 invoked by uid 500); 21 Aug 2015 15:47:08 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 79659 invoked by uid 500); 21 Aug 2015 15:47:08 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 79649 invoked by uid 99); 21 Aug 2015 15:47:08 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Aug 2015 15:47:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 33D44180333
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 15:47:08 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 3ixXTYaOfqXu for <dev@httpd.apache.org>;
	Fri, 21 Aug 2015 15:47:01 +0000 (UTC)
Received: from mail-ig0-f172.google.com (mail-ig0-f172.google.com [209.85.213.172])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 4F5AF20380
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 15:47:00 +0000 (UTC)
Received: by igcse8 with SMTP id se8so3058340igc.1
        for <dev@httpd.apache.org>; Fri, 21 Aug 2015 08:46:59 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=iZeyb4PKbwZH4dZNKxx1aW4qUoQZjmqIvwmJlJWKDdM=;
        b=ABk0rmgdBfGecSBRTPiycJiHkqmEYz0IdeDSiR4RKYhr7Y4C7NQf431R2+YkD0KczB
         3GOsW8JMFTlBYJ5WtOdozMA95X5X9XLXUt6LSQ5v+DObOZSXNy+Cpbxe03eAc1yC+HC4
         QDhuDXE35LkrWsMbnhqbZ5W4QGFM7XaoI/dBBCPwIn6KZDl4xfa93wCv9nVcCjolQisM
         JIscTKAiO4JItrKpLEX25ZC9/9R8InEl6U9uaEB+CZVvIGFuxwH8zte5mE6ggI2zg0l1
         sSC+pUXd6i3DAHfRfYYR3o0cqEPcV0YiL/HDk7W1ROqw2ZKbwrKqTdEI+27OUqEUcmnj
         y2eQ==
X-Gm-Message-State: ALoCoQkoV14afIdZiOeZHX9pHmVro3IifuqOJ6UZUEP2xa6uXnM2JSLtuP9ClSLSo+rsUKXWfPll
MIME-Version: 1.0
X-Received: by 10.50.78.161 with SMTP id c1mr3408433igx.35.1440172019276; Fri,
 21 Aug 2015 08:46:59 -0700 (PDT)
Received: by 10.107.41.9 with HTTP; Fri, 21 Aug 2015 08:46:59 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
In-Reply-To: <CACsi252bq9r2ocZwfAROSPmNUbLZBMk1F9tW8SQ=GxGa-jvETg@mail.gmail.com>
References: <20150821141918.18EBBAC07C2@hades.apache.org>
	<55D734EC.4000904@apache.org>
	<CAKQ1sVPWMez=RYGPcVPHonf_qAX9nXmyVyvTAP3xVDiHVVahiQ@mail.gmail.com>
	<CAKQ1sVO4_ABaSe2jnqwmyum17ESDKWf-3da_fJtDYSNB6Oon0w@mail.gmail.com>
	<55D7376C.3010203@apache.org>
	<CAKQ1sVOGaa7y1VwPY5ZoOnDav7j6SKFKFp8vakg75GZZhwj3jQ@mail.gmail.com>
	<CACsi252bq9r2ocZwfAROSPmNUbLZBMk1F9tW8SQ=GxGa-jvETg@mail.gmail.com>
Date: Fri, 21 Aug 2015 10:46:59 -0500
Message-ID: <CACsi252bB5UYahCjOWcc7WWtgoXXz7tv_QcN2fx2dKBo4iNe4A@mail.gmail.com>
Subject: Re: svn commit: r1697002 - /httpd/httpd/trunk/modules/filters/mod_substitute.c
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=089e0111e07aa02e2e051dd42d7f

--089e0111e07aa02e2e051dd42d7f
Content-Type: text/plain; charset=UTF-8

On Fri, Aug 21, 2015 at 10:32 AM, William A Rowe Jr <wrowe@rowe-clan.net>
wrote:

>
> It's a toggle, please leave it alone.  The default state will be one case
> in
> 2.4.x, and a different case in 2.5.x and later, but a user who puts that
> directive into their config will observe the same behavior when they run
> their config under 2.4 or later under 2.6.
>

(But correcting the comments and the docs in the respective code branches
as applicable would be terrific, so users and the rest of us aren't
confused again when this is reviewed again in the future.)

--089e0111e07aa02e2e051dd42d7f
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On F=
ri, Aug 21, 2015 at 10:32 AM, William A Rowe Jr <span dir=3D"ltr">&lt;<a hr=
ef=3D"mailto:wrowe@rowe-clan.net" target=3D"_blank">wrowe@rowe-clan.net</a>=
&gt;</span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0=
 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir=3D"ltr"><div>=
<div class=3D"h5"><div class=3D"gmail_extra"><div class=3D"gmail_quote"><br=
></div></div></div></div><div class=3D"gmail_extra">It&#39;s a toggle, plea=
se leave it alone.=C2=A0 The default state will be one case in</div><div cl=
ass=3D"gmail_extra">2.4.x, and a different case in 2.5.x and later, but a u=
ser who puts that</div><div class=3D"gmail_extra">directive into their conf=
ig will observe the same behavior when they run</div><div class=3D"gmail_ex=
tra">their config under 2.4 or later under 2.6.</div><div class=3D"gmail_ex=
tra"></div></div></blockquote></div><br></div><div class=3D"gmail_extra">(B=
ut correcting the comments and the docs in the respective code branches as =
applicable would be terrific, so users and the rest of us aren&#39;t confus=
ed again when this is reviewed again in the future.)</div></div>

--089e0111e07aa02e2e051dd42d7f--

From dev-return-83505-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 21 16:56:04 2015
Return-Path: <dev-return-83505-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AFFBD1884F
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 21 Aug 2015 16:56:04 +0000 (UTC)
Received: (qmail 85576 invoked by uid 500); 21 Aug 2015 16:56:04 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 85496 invoked by uid 500); 21 Aug 2015 16:56:04 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 85486 invoked by uid 99); 21 Aug 2015 16:56:04 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Aug 2015 16:56:04 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id B98E0DFD90
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 16:56:03 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.099
X-Spam-Level:
X-Spam-Status: No, score=-0.099 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id lkqEDZjqVBAN for <dev@httpd.apache.org>;
	Fri, 21 Aug 2015 16:55:51 +0000 (UTC)
Received: from mail-io0-f182.google.com (mail-io0-f182.google.com [209.85.223.182])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 7A8D121115
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 16:55:51 +0000 (UTC)
Received: by iodt126 with SMTP id t126so88374383iod.2
        for <dev@httpd.apache.org>; Fri, 21 Aug 2015 09:55:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=GemJVEtVuwUTjd/pLPNpF2bWuefElnVvo280l6hncM8=;
        b=KX8fJIurF/x7wWRDU9nozU+LW7pv+pMLXp5XarHQcUHwuQMoBrYV+di7cm2u4+l3/v
         /JICt3J5cd6fL0U4p9YbruHJLlxYy9YLyQV/V30f1oNgdWawFXCVU8F0bZOEcbW7UJe9
         42sJv/FrxVT+E59LsKqMjLr3dn8yRx7qK1p13mCwa3sV8na+w07/XWvrx+XgYKfctYvG
         Lg8w0Cc67rQSeymyF9ow7n9TvWdzmwWdEnUASjeIgilA95HwdShjNr4Idr4o3QfyDBJl
         FmpbcHJBGwHgb73f8tGyfH2V4/9BIj2tiyPKRXSgl5VqUlR/R73aGlQmOCKTX2iXhvt4
         xeWw==
MIME-Version: 1.0
X-Received: by 10.107.3.19 with SMTP id 19mr8000363iod.132.1440176150944; Fri,
 21 Aug 2015 09:55:50 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Fri, 21 Aug 2015 09:55:50 -0700 (PDT)
In-Reply-To: <CACsi252bB5UYahCjOWcc7WWtgoXXz7tv_QcN2fx2dKBo4iNe4A@mail.gmail.com>
References: <20150821141918.18EBBAC07C2@hades.apache.org>
	<55D734EC.4000904@apache.org>
	<CAKQ1sVPWMez=RYGPcVPHonf_qAX9nXmyVyvTAP3xVDiHVVahiQ@mail.gmail.com>
	<CAKQ1sVO4_ABaSe2jnqwmyum17ESDKWf-3da_fJtDYSNB6Oon0w@mail.gmail.com>
	<55D7376C.3010203@apache.org>
	<CAKQ1sVOGaa7y1VwPY5ZoOnDav7j6SKFKFp8vakg75GZZhwj3jQ@mail.gmail.com>
	<CACsi252bq9r2ocZwfAROSPmNUbLZBMk1F9tW8SQ=GxGa-jvETg@mail.gmail.com>
	<CACsi252bB5UYahCjOWcc7WWtgoXXz7tv_QcN2fx2dKBo4iNe4A@mail.gmail.com>
Date: Fri, 21 Aug 2015 18:55:50 +0200
Message-ID: <CAKQ1sVMUSJsZZRCX=VWYegaHUjLB77OP1Jn1X8RyRYGqr5OCSg@mail.gmail.com>
Subject: Re: svn commit: r1697002 - /httpd/httpd/trunk/modules/filters/mod_substitute.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

On Fri, Aug 21, 2015 at 5:46 PM, William A Rowe Jr <wrowe@rowe-clan.net> wrote:
> On Fri, Aug 21, 2015 at 10:32 AM, William A Rowe Jr <wrowe@rowe-clan.net>
> wrote:
>>
>>
>> It's a toggle, please leave it alone.  The default state will be one case
>> in
>> 2.4.x, and a different case in 2.5.x and later, but a user who puts that
>> directive into their config will observe the same behavior when they run
>> their config under 2.4 or later under 2.6.
>
>
> (But correcting the comments and the docs in the respective code branches as
> applicable would be terrific, so users and the rest of us aren't confused
> again when this is reviewed again in the future.)

Done in r1697013 and r1697015.
Backports proposals to 2.4.x and 2.2.x updated to v5 too.

Thanks Ruediger and Bill for the review.

From dev-return-83506-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 21 17:03:09 2015
Return-Path: <dev-return-83506-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 47AF7188B5
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 21 Aug 2015 17:03:09 +0000 (UTC)
Received: (qmail 1890 invoked by uid 500); 21 Aug 2015 17:03:08 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 1801 invoked by uid 500); 21 Aug 2015 17:03:08 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 1791 invoked by uid 99); 21 Aug 2015 17:03:08 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Aug 2015 17:03:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 61BFD1826D6
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 17:03:08 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 2FihP2ArPGuz for <dev@httpd.apache.org>;
	Fri, 21 Aug 2015 17:03:07 +0000 (UTC)
Received: from mail-ig0-f180.google.com (mail-ig0-f180.google.com [209.85.213.180])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 1D9212085F
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 17:03:07 +0000 (UTC)
Received: by igcse8 with SMTP id se8so4748473igc.1
        for <dev@httpd.apache.org>; Fri, 21 Aug 2015 10:02:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Mign0FRrTxCyXAkAXkSpbwjtuLUgZY5S1+WsHMZkjVA=;
        b=OYhebAcOCEWrtjNB5I5xCxpfbzya5VR63+YgffTQiQ5ay/5qRbqnpb7Scpz2bSvtf0
         YzzQI8UEmBOThlgJnaSo59IjUxWo7kJYYb7MxzDEjQzsPot3S/iqHxnizaB98jkbhG3z
         bIcd6afQaIgqITKm3o49VujlLqkuLQSttXajQG09kDvFyfWMa/IipbY1WQGQjXYCkKDB
         LRyVTBGc9HebSWy/GOPVAEQja0elNJPv/S069/65AqJrsgNqd0nvHAY/zIIQEfEwnyTH
         ufkitx9YJgfpgpAIfLwNStDsFq31IigwOPraaIMDJPdngSX3QG7X6+CknVZeyv/zmbET
         j4uw==
MIME-Version: 1.0
X-Received: by 10.50.64.147 with SMTP id o19mr3717698igs.15.1440176579768;
 Fri, 21 Aug 2015 10:02:59 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Fri, 21 Aug 2015 10:02:59 -0700 (PDT)
In-Reply-To: <55D7327A.9000708@apache.org>
References: <20150821123403.6E568AC04B1@hades.apache.org>
	<55D7327A.9000708@apache.org>
Date: Fri, 21 Aug 2015 19:02:59 +0200
Message-ID: <CAKQ1sVOyALRO1Fi6tXK2TJ3qt9SY=avEoRuiXjrjOuttKqezSA@mail.gmail.com>
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES
 docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

On Fri, Aug 21, 2015 at 4:15 PM, Ruediger Pluem <rpluem@apache.org> wrote:
>
> Hm. Doesn't that mean that if I keep on adding stuff and do graceful restarts that at one point in time I will have used
> up all my growth and need to do a hard restart?

Yes, the last restart would fail.

> If yes, it should be probably documented to avoid some unexpected surprises.

I agree it should be documented (will do), currently we already have
this issue from the first restart though.

Regards,
Yann.

From dev-return-83507-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 21 18:07:32 2015
Return-Path: <dev-return-83507-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0A41918C3B
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 21 Aug 2015 18:07:32 +0000 (UTC)
Received: (qmail 74694 invoked by uid 500); 21 Aug 2015 18:07:31 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 74636 invoked by uid 500); 21 Aug 2015 18:07:31 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 74627 invoked by uid 99); 21 Aug 2015 18:07:31 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Aug 2015 18:07:31 +0000
Received: from gauss.localdomain (v4-861345e7.pool.vitroconnect.de [134.19.69.231])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPSA id 1D36D1A0046
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 18:07:31 +0000 (UTC)
Received: from [IPv6:::1] (localhost [IPv6:::1])
	by gauss.localdomain (Postfix) with ESMTP id 7A836255
	for <dev@httpd.apache.org>; Fri, 21 Aug 2015 20:07:28 +0200 (CEST)
Message-ID: <55D768E0.3000605@apache.org>
Date: Fri, 21 Aug 2015 20:07:28 +0200
From: Ruediger Pluem <rpluem@apache.org>
User-Agent: Mozilla/5.0 (X11; Linux i686 on x86_64; rv:36.0) Gecko/20100101 Firefox/36.0 SeaMonkey/2.33.1
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES
 docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
References: <20150821123403.6E568AC04B1@hades.apache.org>	<55D7327A.9000708@apache.org> <CAKQ1sVOyALRO1Fi6tXK2TJ3qt9SY=avEoRuiXjrjOuttKqezSA@mail.gmail.com>
In-Reply-To: <CAKQ1sVOyALRO1Fi6tXK2TJ3qt9SY=avEoRuiXjrjOuttKqezSA@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit



On 08/21/2015 07:02 PM, Yann Ylavic wrote:
> On Fri, Aug 21, 2015 at 4:15 PM, Ruediger Pluem <rpluem@apache.org> wrote:
>>
>> Hm. Doesn't that mean that if I keep on adding stuff and do graceful restarts that at one point in time I will have used
>> up all my growth and need to do a hard restart?
> 
> Yes, the last restart would fail.
> 
>> If yes, it should be probably documented to avoid some unexpected surprises.
> 
> I agree it should be documented (will do), currently we already have
> this issue from the first restart though.

So it is an improvement over what we have :-)

Regards

Rüdiger


From dev-return-83508-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Aug 22 16:34:13 2015
Return-Path: <dev-return-83508-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 050C218BCB
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 22 Aug 2015 16:34:13 +0000 (UTC)
Received: (qmail 81906 invoked by uid 500); 22 Aug 2015 16:34:11 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 81820 invoked by uid 500); 22 Aug 2015 16:34:11 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 81810 invoked by uid 99); 22 Aug 2015 16:34:11 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Aug 2015 16:34:11 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 600681AAAC7
	for <dev@httpd.apache.org>; Sat, 22 Aug 2015 16:34:11 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.099
X-Spam-Level:
X-Spam-Status: No, score=-0.099 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id UZDl5DIxIRTm for <dev@httpd.apache.org>;
	Sat, 22 Aug 2015 16:33:58 +0000 (UTC)
Received: from mail-wi0-f179.google.com (mail-wi0-f179.google.com [209.85.212.179])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id AE7D7258F3
	for <dev@httpd.apache.org>; Sat, 22 Aug 2015 16:17:24 +0000 (UTC)
Received: by widdq5 with SMTP id dq5so14687112wid.1
        for <dev@httpd.apache.org>; Sat, 22 Aug 2015 09:17:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=svtBgY1dxIZqXY3b+6VbUCm6eMe8d7hXG9YJVBoBuHU=;
        b=bP/sq6Wrbk+ycEyezPczGMUIlZCMp3SF5HXaVr1FFXZvqUBrJchzunD6/HkpT5xBI/
         /jqJ+R2Ndx7sGEpAEGl0e6G9fslk1zhnfsWDEnH2WCk2tAyizOL32Tl62JRt7yKpO3eC
         4X7VmJuc14CR3tY7QYA08g/nQREXbpNZi6tx2iTuYO6zqHr8f7CRv1hCToNCdnYlus7X
         ofGDIMfWyDoV3S2QM2QCt7i/KiDrYs07WFYS1l22XqeujGkL1qQCBGeDH2TiAf/2mj8Z
         uZ49jOvhs/IgeLMz+tmyf3I1I1ngI7msbOpaXL87wyIHKBb90t/9ggfQJz3Tb+kJKdWo
         BQRw==
X-Received: by 10.194.192.166 with SMTP id hh6mr24824699wjc.127.1440260244460;
 Sat, 22 Aug 2015 09:17:24 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.28.18.21 with HTTP; Sat, 22 Aug 2015 09:16:44 -0700 (PDT)
In-Reply-To: <CAFMGiz9gb856O2maEe3tuA2Cz_PCW8XRqXfseL4Hrvya-8ZpDw@mail.gmail.com>
References: <CAFMGiz9Brm5eC9eoSC9_Gqp5S_5fTC1mZpRWdcUXVyARzDRAzQ@mail.gmail.com>
 <54E4DFAC.4000901@gknw.net> <54E5DED2.6030602@gmail.com> <F2F55EF6-C688-4FB9-960E-5A06AE9624BD@c8h10n4o2.org.uk>
 <CAFMGiz8__iyTS54Vc4ZfbKC+BdNe0nUs8jxw_gbMHznwRta+4A@mail.gmail.com>
 <54EB1EA1.9030903@gmail.com> <CAFMGiz9Jf1ea7pg2W4n1huwPqkOmYbkFW+r0=vzZVc6Lr5mizA@mail.gmail.com>
 <54EC73E7.3010602@gmail.com> <CAFMGiz9gb856O2maEe3tuA2Cz_PCW8XRqXfseL4Hrvya-8ZpDw@mail.gmail.com>
From: Tom Browder <tom.browder@gmail.com>
Date: Sat, 22 Aug 2015 11:16:44 -0500
Message-ID: <CAFMGiz-=qK31nuHhqZGU+ZthqU6BUeMdAW_X36Vyu2dGboSwqQ@mail.gmail.com>
Subject: Re: Unexpected Warnings from Macro Use in 2.4
To: nickgearls@gmail.com, "dev@httpd.apache.org" <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Feb 24, 2015 at 7:15 AM, Tom Browder <tom.browder@gmail.com> wrote:
>
> On Feb 24, 2015 6:52 AM, "Nick Gearls" <nickgearls@gmail.com> wrote:
>>
>> Define mysite   www.mycompany.com
>>
>> <Macro NewSite $mysite>
>>  Servername${mysite}
>>  ErrorLog /var/log/httpd/${mysite}_error.log
>> </Macro>
>>
>> Use NewSite www.company1.com
>> Use NewSite www.company2.com
>
> That's similar to the way I use it for multiple virtual hosts and have no
> problems except the warnings I reported.

The problem still exists in 2.4.16.  Shall I file a bug?

-Tom

From dev-return-83509-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Aug 23 07:15:16 2015
Return-Path: <dev-return-83509-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9EA021797E
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 23 Aug 2015 07:15:16 +0000 (UTC)
Received: (qmail 76203 invoked by uid 500); 23 Aug 2015 07:15:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 76126 invoked by uid 500); 23 Aug 2015 07:15:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 76115 invoked by uid 99); 23 Aug 2015 07:15:16 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Aug 2015 07:15:16 +0000
Received: from asf-bz1-us-mid.priv.apache.org (nat1-us-mid.apache.org [23.253.172.122])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPS id 9D4831A024F
	for <dev@httpd.apache.org>; Sun, 23 Aug 2015 07:15:15 +0000 (UTC)
Received: by asf-bz1-us-mid.priv.apache.org (ASF Mail Server at asf-bz1-us-mid.priv.apache.org, from userid 0)
	id 2D9A76048B; Sun, 23 Aug 2015 07:15:15 +0000 (UTC)
From: bugzilla@apache.org
To: dev@httpd.apache.org
Subject: Bug report for Apache httpd-2 [2015/08/23]
Message-Id: <20150823071515.2D9A76048B@asf-bz1-us-mid.priv.apache.org>
Date: Sun, 23 Aug 2015 07:15:05 +0000 (UTC)

+---------------------------------------------------------------------------+
| Bugzilla Bug ID                                                           |
|     +---------------------------------------------------------------------+
|     | Status: UNC=Unconfirmed NEW=New         ASS=Assigned                |
|     |         OPN=Reopened    VER=Verified    (Skipped Closed/Resolved)   |
|     |   +-----------------------------------------------------------------+
|     |   | Severity: BLK=Blocker CRI=Critical  REG=Regression  MAJ=Major   |
|     |   |           MIN=Minor   NOR=Normal    ENH=Enhancement TRV=Trivial |
|     |   |   +-------------------------------------------------------------+
|     |   |   | Date Posted                                                 |
|     |   |   |          +--------------------------------------------------+
|     |   |   |          | Description                                      |
|     |   |   |          |                                                  |
| 7483|Ass|Enh|2002-03-26|Add FileAction directive to assign a cgi interpret|
| 8713|Inf|Min|2002-05-01|No Errorlog on PROPFIND/Depth:Infinity            |
| 8867|Opn|Cri|2002-05-07|exports.c generation fails when using a symlink to|
|10747|New|Maj|2002-07-12|ftp SIZE command and 'smart' ftp servers results i|
|11294|New|Enh|2002-07-30|desired vhost_alias option                        |
|11580|Opn|Enh|2002-08-09|generate Content-Location headers                 |
|12033|Opn|Nor|2002-08-26|Graceful restart immediately result in [warn] long|
|12680|New|Enh|2002-09-16|Digest authentication with integrity protection   |
|13599|Inf|Nor|2002-10-14|autoindex formating broken for multibyte sequences|
|13661|Ass|Enh|2002-10-15|Apache cannot not handle dynamic IP reallocation  |
|14104|Opn|Enh|2002-10-30|not documented: must restart server to load new CR|
|14496|New|Enh|2002-11-13|Cannot upgrade any version on Windows. Must uninst|
|14922|Inf|Enh|2002-11-28|<target> is currently hardcoded to 'apache2'      |
|15719|Inf|Nor|2002-12-30|WebDAV MOVE to destination URI which is content-ne|
|16761|Inf|Nor|2003-02-04|CustomLog with pipe spawns process during config  |
|16802|New|Enh|2003-02-05|Additional AllowOverride directive "Restrict"     |
|16811|Ass|Maj|2003-02-05|mod_autoindex always return webpages in UTF-8.    |
|17107|New|Min|2003-02-16|Windows should not install printenv               |
|17114|New|Enh|2003-02-17|Please add strip and install-strip targets to Make|
|17244|Ass|Nor|2003-02-20|./configure --help gives false information regardi|
|17497|Opn|Nor|2003-02-27|mod_mime_magic generates incorrect response header|
|18325|New|Enh|2003-03-25|PAM support for suEXEC                            |
|18334|Inf|Cri|2003-03-25|Server crashes when authenticating users against L|
|18497|New|Min|2003-03-30|configure --help gives wrong default for sysconfdi|
|19043|New|Min|2003-04-15|Interesting interaction between cern_meta module a|
|19670|New|Enh|2003-05-05|content type header supplied upon PUT is thrown aw|
|20036|Ass|Nor|2003-05-19|Trailing Dots stripped from PATH_INFO environment |
|21253|New|Nor|2003-07-01|Mime magic doesn't continue if type is specifed fo|
|21260|New|Nor|2003-07-02|CacheMaxExpire directive not enforced !           |
|21533|Ass|Cri|2003-07-11|Multiple levels of htacces files can cause mod_aut|
|22138|Inf|Cri|2003-08-05|Webdav is not preccessing special chars right.    |
|22237|New|Enh|2003-08-08|option to disable ServerSignature on index pages  |
|22484|Opn|Maj|2003-08-16|semaphore problem takes httpd down                |
|22686|Opn|Nor|2003-08-25|ab: apr_poll: The timeout specified has expired (7|
|22898|Opn|Nor|2003-09-02|nph scripts with two HTTP header                  |
|23167|Inf|Cri|2003-09-14|--enable-layout never goes to apr apr-util        |
|23181|New|Nor|2003-09-15|Status 304 (Not modified) and chunking leads to an|
|23238|New|Cri|2003-09-18|non-async-signal-safe operations from signal handl|
|23330|New|Enh|2003-09-22|Enhance ApacheMonitor to view and control Tomcat s|
|23911|Opn|Cri|2003-10-18|CGI processes left defunct/zombie under 2.0.54    |
|24031|New|Enh|2003-10-23|Passphrase protected private key in SSLProxyMachin|
|24095|Opn|Cri|2003-10-24|ERROR "Parent: child process exited with status 32|
|24437|Opn|Nor|2003-11-05|mod_auth_ldap doubly-escapes backslash (\) charact|
|24890|Opn|Nor|2003-11-21|Apache config parser should not be local aware ( g|
|25014|New|Enh|2003-11-26|A flexible interface for mod_log_config           |
|25201|New|Enh|2003-12-04|Provide Cache Purge operation                     |
|25240|Inf|Enh|2003-12-05|SSL Library Error: 336105671 logged as information|
|25435|New|Enh|2003-12-11|sethandler and directoryindex not playing nice    |
|25469|Opn|Enh|2003-12-12|create AuthRoot for defining paths to auth files  |
|25484|Ass|Nor|2003-12-12|Non-service Apache cannot be stopped in WinXP     |
|25543|Inf|Nor|2003-12-15|mod_proxy_ajp overwrites existing response headers|
|25667|New|Nor|2003-12-19|Memory leak in function ssl_scache_dbm_retrieve().|
|25863|New|Enh|2004-01-02|new per-host initialization hooks                 |
|26005|New|Nor|2004-01-08|SERVER_NAME incorrect when using IPv6 address in U|
|26142|New|Maj|2004-01-14|EnableSendFile Off for Windows XP Home            |
|26153|Opn|Cri|2004-01-15|Apache cygwin directory traversal vulnerability   |
|26368|New|Min|2004-01-23|File extensions in AddDescription treated as part |
|26446|New|Nor|2004-01-26|flush buckets followed by eos bucket emit multiple|
|26478|New|Enh|2004-01-28|mod_dav does not expose a method for setting the D|
|26835|New|Enh|2004-02-10|[PATCH] Mod_status Readability & Browser Side Tabl|
|27257|Ass|Enh|2004-02-26|rotatelogs with getopt and setuid                 |
|27578|New|Enh|2004-03-10|made getlastmodified a writable property          |
|27715|Ass|Enh|2004-03-16|Client sending misformed Range "bytes = 0-100" ins|
|27791|Inf|Nor|2004-03-18|mod_cache doesn't re-cache expired content        |
|27835|New|Enh|2004-03-22|When proxying FTP, all errors turns into 404      |
|27869|New|Enh|2004-03-23|stopping and starting httpd again immediately caus|
|28854|Inf|Nor|2004-05-09|Build fails with missing library call on Solaris i|
|28903|New|Enh|2004-05-11|Hooks to add environment variables to CGI and othe|
|29090|Ass|Enh|2004-05-19|MultiviewsMatch NegotiatedOnly extensions not resp|
|29165|New|Nor|2004-05-24|Parent directory icon not correct                 |
|29446|New|Enh|2004-06-08|want directive for setting content negotiation qua|
|29449|New|Enh|2004-06-09|Limit length of specified fields in LogFormat     |
|29450|New|Enh|2004-06-09|Improved logging for mod_access                   |
|29510|Ass|Enh|2004-06-10|ab does not support multiple cookies              |
|29644|Ver|Nor|2004-06-17|mod_proxy keeps downloading even after the client |
|29755|Opn|Nor|2004-06-23|mod_usertrack should use err_headers_out          |
|29822|New|Enh|2004-06-26|implement FTP 'PUT' support in proxy_ftp.c        |
|29941|Ass|Enh|2004-07-06|log files are not tested for availability on confi|
|30259|Ass|Enh|2004-07-22|When proxy connects to backend, a DNS lookup is do|
|30505|Ass|Enh|2004-08-05|Apache uses 'Error', and not lower level event typ|
|30730|Inf|Nor|2004-08-18|[PatchAvailable] mod_actions and Server-Status    |
|30865|Inf|Maj|2004-08-26|mod_disk_cache leaves many temporary files slowing|
|31302|Opn|Cri|2004-09-19|suexec doesn't execute commands if they're not in |
|31311|New|Enh|2004-09-20|Remote user not logged in reverse proxy scenario  |
|31352|Ass|Enh|2004-09-21|RFE, Bind to LDAP server with browser supplier use|
|31418|Opn|Nor|2004-09-25|SSLUserName is not usable by other modules        |
|31484|New|Maj|2004-09-30|Custom environment variables not passed to content|
|31490|New|Nor|2004-09-30|mod_proxy_ftp renders filenames with spaces badly |
|31565|New|Enh|2004-10-06|Won't start correctly if parent closed stdin, stdo|
|31679|New|Enh|2004-10-12|If the argument of a CGI has two or more consecuti|
|31709|Inf|Nor|2004-10-13|Raises an error on SSL name based virtualhosts (wi|
|31712|New|Enh|2004-10-14|config_file is NULL at ap_walk_config etc         |
|31952|New|Enh|2004-10-29|mod_proxy and RealPlayer: audio content streaming |
|32051|Opn|Nor|2004-11-04|mod_example is not thread safe                    |
|32328|Opn|Enh|2004-11-19|Make mod_rewrite escaping optional / expose intern|
|32346|New|Enh|2004-11-22|mod_include/include virtual checks content-type is|
|32524|New|Enh|2004-12-03|ab: add an option to specify a source address     |
|32703|Inf|Enh|2004-12-14|Cannot determine that Apache is frozen if /var fil|
|32750|Ass|Maj|2004-12-17|mod_proxy + Win32DisableAcceptEx = memory leak    |
|32877|New|Enh|2004-12-29|wrong utf-8 encoding/escaping in a href for umlaut|
|33084|New|Enh|2005-01-13|Optional certificate validity period check on SSLV|
|33089|New|Nor|2005-01-13|mod_include: Options +Includes (or IncludesNoExec)|
|33207|New|Nor|2005-01-23|Results of my suexec.c code audit                 |
|33215|New|Nor|2005-01-24|Cygwin build/install.sh fix (OSTYPE => ext=.exe)  |
|33512|Inf|Maj|2005-02-11|mod_mem_cache and possibly mod_deflate            |
|33627|New|Nor|2005-02-18|Bite-sized changes making progress towards compila|
|33685|New|Maj|2005-02-22|Unable to install in the path containing non engli|
|34270|Inf|Nor|2005-04-01|Large POSTs over SSL from Internet Explorer do not|
|34375|New|Enh|2005-04-08|enhancements for mod_include                      |
|34377|New|Enh|2005-04-08|Allow the overriding of 401 Unauthorized returns f|
|34405|New|Enh|2005-04-11|adds DOCUMENT_NAME_WITHOUT_SUFFIX to mod_include  |
|34508|New|Nor|2005-04-19|Randomly slow graceful restart, not accepting new |
|34519|New|Enh|2005-04-19|Directory index should emit valid XHTML           |
|35049|New|Nor|2005-05-24|let AddDefaultCharset apply to text/css and applic|
|35077|New|Nor|2005-05-26|mod_dav passes incorrect paths with LocationMatch |
|35083|Inf|Enh|2005-05-26|Certificate validation problems trapping          |
|35098|Ver|Maj|2005-05-27|Install fails using --prefix                      |
|35154|New|Nor|2005-06-01|Support for NID_serialNumber, etc. in SSLUserName |
|35245|New|Nor|2005-06-06|cache ignores max-age cache-directive in requests |
|35250|New|Enh|2005-06-07|[PatchAvailable] add logging to mod_proxy_connect |
|35280|New|Nor|2005-06-09|FTP proxy breaks RFC 2428 when trying to fall back|
|35556|Inf|Nor|2005-06-30|CRL files not re-read by HUP                      |
|35652|Opn|Min|2005-07-07|Improve error message: "pcfg_openfile: unable to c|
|35702|New|Nor|2005-07-12|Using with https URL, ab freezes or gets SIGSEGV o|
|35781|New|Nor|2005-07-18|ap_sub_req_method_uri() bypasses Limit security co|
|35981|Inf|Maj|2005-08-02|mod_dav overrides dav_fs response on PUT failure  |
|36286|New|Enh|2005-08-20|configtest doesn't check SSL certificates         |
|36492|New|Nor|2005-09-04|split-logfile script dies when splitting log of ma|
|36495|Inf|Nor|2005-09-05|mod_proxy_ajp: ajp_check_msg_header() got bad sign|
|36564|New|Enh|2005-09-08|make mod_ldap really universal                    |
|36636|New|Maj|2005-09-13|database write lock taken for PROPFIND operations |
|36676|New|Nor|2005-09-15|time() bug in httpd/os/win32/util_win32.c:wait_for|
|36710|Opn|Blk|2005-09-19|CGI output not captured                           |
|36724|New|Nor|2005-09-20|Don't install Apache Monitor by default           |
|37110|New|Nor|2005-10-17|Build fails when source tree is read-only         |
|37196|Inf|Min|2005-10-21|Wrong "Parent directory" link                     |
|37201|New|Enh|2005-10-21|Add <IfInterface IP> syntax to apache configuratio|
|37290|Opn|Min|2005-10-28|DirectoryIndex don't work in scriptaliased directo|
|37307|New|Enh|2005-10-31|Can't suppress error messages                     |
|37355|New|Enh|2005-11-04|Allow to specify Proxy-Authorization in ProxyRemot|
|37360|New|Maj|2005-11-04|Install fails on Windows XP x64 when program files|
|37402|New|Nor|2005-11-08|mod_proxy has stopped allowing POST sub-requests  |
|37514|Inf|Nor|2005-11-15|mod_proxy buffers chunked data.                   |
|37564|New|Enh|2005-11-19|Suggestion: mod_suexec SuexecUserGroup directive i|
|37587|Inf|Min|2005-11-22|mod_status Total Traffic value goes up then down? |
|37823|Inf|Nor|2005-12-07|The openssl library linked is different between ht|
|37920|New|Maj|2005-12-15|mod_proxy does not flush data on POST requests fro|
|38116|New|Enh|2006-01-04|Chroot-Patch for SuExec                           |
|38164|New|Nor|2006-01-06|wrong status code for failed COPY/MOVE            |
|38182|New|Nor|2006-01-08|COPY ignores authority in Destination header      |
|38218|New|Enh|2006-01-10|Multiline Comments for *.conf files               |
|38240|Inf|Nor|2006-01-12|apache restart segfault with mutliple Include dire|
|38325|Opn|Nor|2006-01-20|impossible to determine AUTH_TYPE of interpreted r|
|38355|Unc|Enh|2006-01-23|DSO support for mod_rewrite                       |
|38369|New|Enh|2006-01-24|mod_proxy keeps alive connections that should be b|
|38408|New|Nor|2006-01-27|SSI environment vars not set in spawned processes |
|38419|New|Nor|2006-01-27|Problems with large WebDAV properties             |
|38478|New|Maj|2006-02-01|A client starting a SSL renegotiation can crash th|
|38515|New|Enh|2006-02-05|Dynamic LDAP Group Support                        |
|38550|New|Enh|2006-02-07|Setting headers based on proxied data             |
|38571|New|Enh|2006-02-08|CustomLog directive checked by apachectl configtes|
|38756|Inf|Nor|2006-02-22|errors with running make                          |
|38786|New|Nor|2006-02-26|"IndexOption VersionSort" has problems with traili|
|38827|New|Reg|2006-03-02|mod_disk_cache trying to rename locked tempfile on|
|38864|Inf|Enh|2006-03-06|ProxyPassReverse fails in <Location>              |
|38903|New|Maj|2006-03-09|r->allowed does not affect Allow response header  |
|38923|New|Min|2006-03-10|mod_speling incorrectly escapes linked URLs       |
|38928|New|Min|2006-03-11|propose removing "VARIANTS" feature               |
|38995|New|Nor|2006-03-16|httpd tries to communicate with the CGI daemon eve|
|39111|New|Nor|2006-03-27|Potential bug brought by mmapfile (mod_file_cache)|
|39128|Inf|Maj|2006-03-28|Apache 2.2 will not compile mod_ssl library's corr|
|39185|Inf|Nor|2006-04-03|Approximately in 1-2 weeks of work the server hang|
|39216|New|Maj|2006-04-05|mod_disk_cache trying to rename locked file, decre|
|39238|New|Nor|2006-04-07|mod_auth_dbm requires mod_auth or "no groups file?|
|39275|Opn|Nor|2006-04-11|slow child_init causes MaxClients warning         |
|39287|New|Nor|2006-04-12|Incorrect If-Modified-Since validation (due to syn|
|39299|New|Nor|2006-04-13|Internal Server Error (500) on COPY               |
|39329|Inf|Nor|2006-04-17|mod_dbd reconnection and prepared statements      |
|39370|New|Nor|2006-04-20|SSL session will be removed if the client is sendi|
|39380|Inf|Nor|2006-04-21|mod_disk_cache eats memory, has no LFS support, et|
|39418|New|Nor|2006-04-26|CacheMaxExpire directive not enforced             |
|39448|New|Min|2006-04-29|old-style <directory proxy:*> doesn't give any war|
|39498|New|Nor|2006-05-06|accept_filter in apr assumes if found in sys/socke|
|39517|New|Nor|2006-05-08|Corrupt chunked transfer-encoding with Content Neg|
|39658|Opn|Nor|2006-05-25|mod_proxy_ajp SSL Key Size Bug                    |
|39673|New|Nor|2006-05-29|mod_proxy opens connections that disturb NTLM     |
|39692|New|Nor|2006-05-31|mod_proxy_balancer doesn't retry a failed request |
|39723|Inf|Enh|2006-06-05|Forward proxy does not work in tranparent mode    |
|39727|Ass|Nor|2006-06-05|Incorrect ETag on gzip:ed content                 |
|39730|New|Nor|2006-06-06|LanguagePriority and DefaultLanguage are Case Sens|
|39737|New|Nor|2006-06-06|LogFormat "%{tid}P" reports wrong thread id on Win|
|39748|New|Enh|2006-06-07|Header and POST support for mod_include           |
|39753|New|Nor|2006-06-07|incorrect source for LOCALE Decimal Symbol in Win2|
|39785|Inf|Nor|2006-06-12|Status code 408 (Request Timeout) is not logged   |
|39807|Opn|Enh|2006-06-13|large files / filesystem corruption can cause apac|
|39902|New|Nor|2006-06-27|HeaderName directive breaks mod_filter somehow    |
|39904|New|Nor|2006-06-27|graceful restart error and cpu load               |
|39913|Ass|Blk|2006-06-27|detection of static OpenSSL libraries requiring li|
|39916|New|Nor|2006-06-28|Core Filters & non-blocking Sendfile              |
|39923|New|Nor|2006-06-28|AddDescription doesn't work in server config with |
|39928|New|Nor|2006-06-28|port no detected when file name not in URL        |
|39935|New|Nor|2006-06-29|AddDescription does not do literal comparisons on |
|39973|Ass|Enh|2006-07-06|apache software folder should be movable          |
|40035|New|Cri|2006-07-13|Windows Server 2003 "("R2")" 64-Bit Edition no cgi|
|40060|New|Nor|2006-07-17|AuthGroupFile should accept /etc/group syntax     |
|40075|New|Enh|2006-07-19|unable to use ldap groups that contain DNs and use|
|40102|Opn|Nor|2006-07-24|SCRIPT_NAME set incorrectly with mod_rewrite      |
|40146|New|Nor|2006-07-31|mod_ssl info in server_info is blank              |
|40174|New|Min|2006-08-03|Unable to get IndexOptionis ScanHTMLTitles to work|
|40180|Inf|Maj|2006-08-03|Mod_dav and remove folder doesn't work with Micros|
|40190|New|Nor|2006-08-05|translate file                                    |
|40196|New|Nor|2006-08-06|EILSEQ handling, NoImplicitAdd should work, and so|
|40217|Opn|Nor|2006-08-08|mod_dav PROPFIND ignores access restrictions on it|
|40266|Inf|Blk|2006-08-16|berkeley db support in httpd is screwed           |
|40312|New|Nor|2006-08-24|ssl_engine_init.c, ssl_init_ctx_verify contains a |
|40373|New|Nor|2006-08-31|mod_dir adds trailing slash after internal redirec|
|40408|New|Blk|2006-09-04|Apache 2.2.3 is not starting                      |
|40416|New|Maj|2006-09-05|mod_proxy_ftp cannot connect under http load in fo|
|40441|New|Enh|2006-09-08|intelligently handling dynamic subdomains         |
|40453|New|Nor|2006-09-09|lexicographic compare in RewriteCond isn't lexicog|
|40463|New|Nor|2006-09-11|piped logging causes some weird kill()ing         |
|40513|Opn|Maj|2006-09-14|Seeding PRNG with 0 bytes of entropy              |
|40514|New|Nor|2006-09-14|would like GracefulShutdownTimeout to work for gra|
|40540|Inf|Nor|2006-09-19|Bad interaction between MultiViews and SetOutputFi|
|40541|New|Nor|2006-09-19|Action rewrites URI used by Location?             |
|40571|New|Nor|2006-09-21|mod_proxy_ajp don't works with mod_usertrack      |
|40586|New|Enh|2006-09-22|Add option to supress default '-' output          |
|40746|New|Enh|2006-10-12|Feature request: ProxyAllow directive             |
|40749|New|Min|2006-10-12|magic file with string and "%n" causes Apache chil|
|40781|New|Nor|2006-10-17|PATH_TRANSLATED: 'redirect:/~jablko/gallery2/main.|
|40808|New|Enh|2006-10-23|ProxyRemote with optional proxy authentication    |
|40859|New|Enh|2006-11-01|[PATCH] Support -F force option to 'ab' support to|
|40917|New|Nor|2006-11-07|configure does not detect OpenSSL shared lib on HP|
|40953|New|Min|2006-11-12|Should not send any data in 1xx/204/304 reply from|
|40984|Inf|Enh|2006-11-16|AddIcon, AddIconByType for OpenDocument format    |
|40987|Opn|Enh|2006-11-16|ProxyVia Block doesn't remove Via: header for reve|
|41000|New|Nor|2006-11-19|mod_authn_dbd have an error, in function 'authn_db|
|41025|New|Nor|2006-11-23|ROBOTS META-Tag directive needed in mod_autoindex |
|41088|New|Nor|2006-11-30|installation backcolor is wrong (white)           |
|41111|New|Enh|2006-12-05|New option for filters: run only if there are spar|
|41114|New|Blk|2006-12-06|ACL HTTP method is rejected by mod_proxy_ajp      |
|41130|New|Nor|2006-12-07|mod_mime and mod_negotiation type-map both clobber|
|41143|Opn|Nor|2006-12-10|Incorrect ap_getline assumption in mod_proxy_http |
|41195|New|Nor|2006-12-17|properly set the parent pid on shutdown           |
|41196|New|Nor|2006-12-17|worker mpm usage of apr's memory pools is not thre|
|41200|Inf|Maj|2006-12-18|SSI include, prevent client from receiving full ou|
|41240|Inf|Enh|2006-12-25|BRF files support                                 |
|41262|Inf|Nor|2006-12-29|Embedded pcre causes runtime segfault             |
|41362|Inf|Maj|2007-01-14|mod_disk_cache and mod_include conflict generating|
|41375|Inf|Min|2007-01-15|Using same SSL Certificate with different ServerNa|
|41391|New|Min|2007-01-17|too long period setting makes max-age overflow    |
|41412|New|Enh|2007-01-19|RewriteRule Skip should take negative arguments   |
|41435|New|Nor|2007-01-22|Authentication fails with 500 Server Error        |
|41450|Inf|Cri|2007-01-24|Empty page (200 OK) while max-age is empty        |
|41485|New|Nor|2007-01-28|LDAP client certificates not usable in 2.2.x/trunk|
|41529|New|Enh|2007-02-02|Accept BOM in .htaccess                           |
|41556|New|Enh|2007-02-07|Feature Request: format string for masking ip addr|
|41621|New|Maj|2007-02-15|Apache 2.2.4 backend problem with Apache 2.0.59 Re|
|41646|New|Nor|2007-02-16|wrong headers are sent for HEAD requests when Prox|
|41676|Opn|Enh|2007-02-22|Refactor mod_proxy_ftp                            |
|41685|New|Enh|2007-02-22|Implement optional HTTP Authentication in a standa|
|41712|Inf|Nor|2007-02-26|threads locked at logging state                   |
|41729|New|Maj|2007-02-28|error message: ap_get_scoreboard_lb(130) failed in|
|41744|Inf|Maj|2007-03-01|SSI resolves includes but removes original HTML   |
|41763|Opn|Nor|2007-03-05|mod_disk_cache ignores CacheDirLevels and CacheDir|
|41764|New|Nor|2007-03-05|error state and conf                              |
|41771|Inf|Nor|2007-03-06|Erro with mod_proxy_ajp or mod_prox_balancer      |
|41867|New|Nor|2007-03-16|<DirectoryMatch> Matches Files                    |
|41925|New|Nor|2007-03-21|trivial patch to add automatic crypting to 'dbmman|
|41929|New|Nor|2007-03-22|ISAPI ssl variables                               |
|41953|New|Nor|2007-03-26|pidfile remains when 2nd pass of post-config retur|
|41962|New|Min|2007-03-27|Need mod_auth_ldap to authenticate with Active Dir|
|42001|New|Cri|2007-03-30|LINUX : Could not set LDAP_OPT_X_TLS to LDAP_OPT_X|
|42027|Inf|Nor|2007-04-02|FileETag directive appears to be ignored          |
|42054|New|Nor|2007-04-04|service name and parameter issues                 |
|42079|New|Nor|2007-04-10|SSLRequire: Additional access in sub-directoies   |
|42082|New|Nor|2007-04-10|filter_init is called multiple times after an INCL|
|42182|Inf|Nor|2007-04-22|Mime types for cached proxied content             |
|42216|New|Enh|2007-04-24|RFE -- external overload procedure                |
|42262|Inf|Nor|2007-04-26|mod_dav /  worker fails to allocate memory and seg|
|42287|Inf|Nor|2007-04-28|chunked encoded response to POST request to cgi sc|
|42368|Inf|Nor|2007-05-09|httpd is crashing if conf/extra/httpd-manual.conf |
|42373|Inf|Maj|2007-05-09|REPORT request fails over mod_proxy               |
|42404|New|Enh|2007-05-13|Filename/info for disk-cached proxied remote URLs |
|42425|Inf|Nor|2007-05-15|Additional freshness checks in mod_cache.c cause m|
|42471|Inf|Nor|2007-05-21|clients with IE7 take 3megs per page load. httpd.e|
|42492|Inf|Nor|2007-05-22|mod_proxy_ajp with SSL front end: data corruption |
|42499|Inf|Nor|2007-05-23|Backslash produces a 404 error instead of going to|
|42548|New|Nor|2007-05-30|INCLUDE negotiating language aborts with APR_POOL_|
|42561|New|Enh|2007-05-31|[PATCH] AuthLDAPRemoteUserAttribute only applies i|
|42633|New|Min|2007-06-11|mod_info gives wrong information about actual conf|
|42665|New|Nor|2007-06-14|spurious attempt to open ".../file.html/.htaccess"|
|42666|New|Nor|2007-06-14|code & docs corrections for FollowSymLinks and Sym|
|42667|New|Nor|2007-06-14|mod_proxy_balancer not reporting when workers are |
|42668|Inf|Nor|2007-06-14|balancer_manager shows Ok status for the workers t|
|42687|New|Nor|2007-06-18|Fully delegate certificate & key semantics to the |
|42688|New|Enh|2007-06-18|engine managed keys: per process openssl context  |
|42690|New|Nor|2007-06-18|realm is not set for each configured directory whe|
|42695|Opn|Cri|2007-06-18|mod_proxy balancer problem                        |
|42699|New|Enh|2007-06-20|share mod_logio data with other modules           |
|42711|New|Enh|2007-06-20|format string for whole log entries not just id   |
|42732|Opn|Maj|2007-06-25|Authentication against database issue.            |
|42763|New|Nor|2007-06-28|graceful-stop/restart loops go loop too far       |
|42923|Inf|Maj|2007-07-17|vhost certificate NOT overriding cert from the _de|
|42972|Inf|Nor|2007-07-25|Certificate list in mod_ssl module context are not|
|42977|New|Nor|2007-07-25|DAV locking is busted when apr-util is built with |
|42987|New|Nor|2007-07-27|Weak Etags in Apache are useless and violate RFC 2|
|43012|New|Nor|2007-08-02|AIX instdso.sh libphp5.so                         |
|43027|New|Enh|2007-08-03|Header in default language                        |
|43033|New|Nor|2007-08-04|apxs does not correctly detect module name (w/o -n|
|43177|New|Nor|2007-08-21|child pid xxxxx exit signal Segmentation fault    |
|43218|New|Nor|2007-08-27|Wrong cert used for vhost if ServerName is same   |
|43220|Opn|Cri|2007-08-27|mod_proxy truncating ajp output                   |
|43249|Inf|Maj|2007-08-30|ldap_simple_bind_s failed when using SUN LDAP Libs|
|43275|New|Enh|2007-08-31|Remove avoidable network transactions in mod_proxy|
|43289|New|Nor|2007-09-02|XBitHack full g+x returns zero sized response on I|
|43308|New|Nor|2007-09-04|Persistent backend connections not supported for R|
|43352|New|Nor|2007-09-11|Apache2: out of memory during heavy webdav files c|
|43441|New|Nor|2007-09-20|Incorrect HTTP status for pre-commit-blocked autov|
|43471|New|Min|2007-09-25|no need to create a global pool on open_scoreboard|
|43481|New|Cri|2007-09-26|AuthLDAPURL must contain a final path of branch?(l|
|43494|New|Nor|2007-09-26|mod_cgid does not kill never ending scripts       |
|43502|New|Enh|2007-09-28|httpd fails to start if log directory does not exi|
|43513|New|Nor|2007-09-29|Persistent backend connections for ProxyPassMatch |
|43532|Inf|Cri|2007-10-02|Error while compiling Apache 2.2.3 on HPUX        |
|43533|Opn|Nor|2007-10-02|Frequent crashes in mod_include's bndm()          |
|43561|New|Nor|2007-10-05|apxs -q anomaly                                   |
|43577|Inf|Blk|2007-10-09|mod_authnz_ldap not working under WLDAP32 (novell/|
|43607|New|Nor|2007-10-11|mod_proxy sends data on closed connections without|
|43649|Opn|Trv|2007-10-18|mod_autoindex is generating invalid XHTML markup  |
|43652|New|Enh|2007-10-18|Suggest small change for big fix with SuExec & Vir|
|43666|New|Nor|2007-10-20|CGI works, but client denied error messages in err|
|43679|New|Enh|2007-10-23|Contributed tests for checking that subrequests ta|
|43723|Inf|Cri|2007-10-29|Apache 2.2.6 segfault when using mod_dbd          |
|43724|New|Cri|2007-10-29|Apache 2.2.6 segfault on url wich not in cache    |
|43755|New|Enh|2007-10-31|Add a SSLOptions to don't fill SSL_CLIENT_VERIFY  |
|43762|New|Enh|2007-10-31|Misleading tips in an error message about internal|
|43777|New|Nor|2007-11-01|Wrong encoding of <href> element in response      |
|43778|New|Nor|2007-11-01|Wrong responses if httpd has not access to some el|
|43785|New|Enh|2007-11-02|Tracking the per-hit impact of mod_include        |
|43792|New|Enh|2007-11-04|Feature proposal - bind phase                     |
|43818|New|Nor|2007-11-08|PROPFIND on -w- collections returns 207 MULTI-STAT|
|43838|New|Enh|2007-11-11|If-Modified-Since request and htcacheclean conflic|
|43895|New|Nor|2007-11-18|mod_mbox improvements                             |
|43897|Inf|Cri|2007-11-18|Huge memory consumption httpd 2.2.6, mod_proxy - m|
|43931|New|Enh|2007-11-21|OpenSSL autoconfig support for mod_ssl            |
|43943|New|Nor|2007-11-22|SHMCB crash due to misalignment and GCC 4 optimiza|
|43958|Inf|Maj|2007-11-26|mod_proxy_balancer not balancing correct in combin|
|43997|Opn|Min|2007-11-29|Only issue "Init: SSL server IP/Port conflict" if |
|44025|Inf|Nor|2007-12-05|Apache 2.2.6 fails to configure on OpenBSD 4.1    |
|44027|Ass|Enh|2007-12-05|Internationalized Domain Name (IDN) support       |
|44031|Opn|Maj|2007-12-06|RemoveHandler inside subdir location              |
|44034|Ass|Enh|2007-12-06|mpm_winnt doesn't call monitor hook               |
|44105|New|Nor|2007-12-19|Core dumps when using Proxy Keepalive             |
|44155|New|Enh|2007-12-31|smarter retry for LDAP_UNAVAILABLE, LDAP_BUSY, etc|
|44181|Opn|Enh|2008-01-07|add UnAlias                                       |
|44188|Inf|Cri|2008-01-08|Empty response for certain requests (mod_proxy as |
|44218|New|Min|2008-01-13|mod_autoindex shows the default icon for files wit|
|44221|Opn|Cri|2008-01-14|CheckCaseOnly On does not stop Multiple Choices ba|
|44250|New|Nor|2008-01-16|OSX 10.5: __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_|
|44279|New|Enh|2008-01-22|Add "iterate" flag to apply rule in a loop while p|
|44302|New|Nor|2008-01-27|AuthLDAPURL does not accept ldapi:// urls         |
|44305|New|Nor|2008-01-28|Inconsistent configuration for suexec path        |
|44316|New|Nor|2008-01-28|httpd 2.0 does not follow ScriptAliases when invok|
|44322|New|Enh|2008-01-29|mod_proxy ProxyPassReverseCookieDomain with no dom|
|44351|New|Nor|2008-02-04|File descriptor leak when using prg RewriteMap    |
|44363|Inf|Maj|2008-02-05|Slow file transfers                               |
|44384|Ass|Nor|2008-02-09|mod_ssl on MacOS X 10.5.1 does not work because of|
|44453|New|Nor|2008-02-19|list_hooks.pl doesn't parse declarations that span|
|44476|New|Maj|2008-02-23|Apache service fails to start due to missing depen|
|44503|Inf|Blk|2008-02-27|Errors during SSL handshake                       |
|44518|New|Enh|2008-03-02|Don't set expires header on HTTP redirect.        |
|44578|New|Enh|2008-03-11|mod_authn_dbd option to let database validate pass|
|44601|New|Trv|2008-03-13|Add a lowercase value to Vary header for consisten|
|44602|New|Enh|2008-03-13|Options for modfying Content-Location (relative OR|
|44622|Inf|Nor|2008-03-17|POST fails to SSL vhost with proxy to HTTP backend|
|44631|New|Nor|2008-03-18|with-included-apr fails to work when using a separ|
|44638|New|Nor|2008-03-19|sed error in httpd.spec.in                        |
|44656|New|Nor|2008-03-22|Tries to retrive error document 404 instead of 406|
|44657|New|Enh|2008-03-22|prefer-type, -encoding, and -charset cookie? (as p|
|44670|New|Min|2008-03-25|Apache httpd 2.2.8 : Cannot ./configure when curre|
|44696|Inf|Nor|2008-03-27|mod_cache sometimes serves old content despite hav|
|44730|New|Nor|2008-04-01|duplicate query string in remote server url when u|
|44752|New|Nor|2008-04-03|Suexec does not correctly check that scripts are i|
|44757|New|Enh|2008-04-04|adding stderr buckets to mod_cgi                  |
|44758|New|Enh|2008-04-04|LimitRequestBody undocumented behaviour with proxi|
|44779|New|Enh|2008-04-08|Using commas and semicolons for content negotiatio|
|44855|New|Nor|2008-04-22|irregular balancing with sticky-session after re-e|
|44865|Ass|Nor|2008-04-23|mod_dav's lock database becomes consistently corru|
|44870|Inf|Nor|2008-04-24|process spinning on 100% cpu                      |
|44923|Inf|Min|2008-05-02|consequences of multiple LDAPTrustedGlobalCert    |
|44924|New|Enh|2008-05-02|allow 'CACERTDIR' in mod_ldap                     |
|44940|New|Maj|2008-05-06|Httpd randomly breaks when verifying client certif|
|44981|New|Enh|2008-05-12|Digital Certificates (CN Based) for Authorization |
|45022|New|Nor|2008-05-16|Processing of escaped glob patterns in "Include" d|
|45023|Opn|Reg|2008-05-16|DEFLATE preventing 304 NOT MODIFIED response      |
|45049|New|Nor|2008-05-20|mod_mem_cache caches partial content when client c|
|45054|New|Nor|2008-05-21|SSLVerifyClient optional_no_ca is broken          |
|45058|New|Nor|2008-05-21|Mod_SSL does not set AUTH_TYPE with client certifi|
|45078|New|Nor|2008-05-27|mod_proxy stalls when uploading files             |
|45103|Ass|Min|2008-05-30|apachectl should do config test before reload/rest|
|45111|New|Enh|2008-06-01|make mod_usertrack use mod_unique_id if available |
|45116|New|Nor|2008-06-02|fail to check return value of apr_file_dup2() in /|
|45148|New|Enh|2008-06-06|The actual host of the request will be more helpfu|
|45184|New|Enh|2008-06-11|Regular Expression in directive ServerAlias       |
|45187|New|Maj|2008-06-11|Long File name requests gives FORBIDDEN response  |
|45225|New|Nor|2008-06-17|XBitHack breaks DirectoryIndex + MultiViews conten|
|45253|New|Nor|2008-06-23|Unable to build httpd 2.2.9 on Solaris/SPARC      |
|45257|New|Enh|2008-06-23|add (en)force option for UseCanonicalName         |
|45259|New|Enh|2008-06-23|Add /home/[a-z]/* scheme to UserDir conf          |
|45275|New|Maj|2008-06-25|Locked files during expired page renew in disk cac|
|45281|New|Enh|2008-06-25|SITE CHMOD/SEARCH                                 |
|45287|Inf|Min|2008-06-26|build failure because of difference between BSD an|
|45297|New|Min|2008-06-27|mod_dir does not manage correctly the user (r->use|
|45302|New|Enh|2008-06-28|ServerRoot directive                              |
|45355|New|Nor|2008-07-07|ab text and html output jumbo unification         |
|45356|New|Nor|2008-07-07|ab: optionally reduce resource usage (qsort and me|
|45371|New|Nor|2008-07-10|MSI installer requires uninstall of previous versi|
|45374|New|Blk|2008-07-10|Shared memory error on starting httpd with mod_lda|
|45379|Inf|Nor|2008-07-11|[Bug] svn merge, apache and trailing slashes      |
|45385|Inf|Nor|2008-07-11|unable to compile/make 2.2.9 with --enable-ldap   |
|45393|New|Nor|2008-07-14|Apache returns 500 Error when no LDAP credentials |
|45402|New|Nor|2008-07-15|mod_autoindex incorrectly fails to list files     |
|45405|New|Enh|2008-07-16|Allow binding port to be set for individual worker|
|45449|New|Nor|2008-07-21|[PATCH] Add support to WebDav to MOVE/COPY to remo|
|45456|New|Enh|2008-07-22|mod_dbd don't allow more then one database pool   |
|45487|New|Trv|2008-07-27|broken log messages on startup in win32 version   |
|45497|New|Nor|2008-07-29|Scoreboard slot leaked using MaxRequestsPerChild a|
|45512|Ass|Maj|2008-07-31|Bad Performance of mod_proxy with SSL on Solaris 1|
|45524|New|Enh|2008-08-01|Specifying multiple vhost aliases                 |
|45525|New|Enh|2008-08-01|Switch mod_autoindex to Tango icons               |
|45579|New|Nor|2008-08-06|unknown URI scheme in request-URI ignored         |
|45674|New|Enh|2008-08-22|Allow to change error code returned by "Require ld|
|45726|New|Enh|2008-09-02|Build in a maintenance functionallity             |
|45736|New|Nor|2008-09-03|mod_dav needs a directory for its locks and one sh|
|45754|New|Enh|2008-09-06|autoconf macros                                   |
|45763|New|Nor|2008-09-08|No openssl.cnf defined by default causes OpenSSL c|
|45773|New|Nor|2008-09-09|pcre build generates sources to srcdir rather than|
|45788|New|Nor|2008-09-11|mod_log_forensic output shouldn't be buffered when|
|45801|Opn|Nor|2008-09-13|SSLRequireSSL with strictrequire and satisfy any d|
|45838|New|Nor|2008-09-18|mod_authz_owner & directories                     |
|45868|New|Nor|2008-09-23|mod_mem_cache update of headers in cache object is|
|45900|New|Nor|2008-09-26|"make install" fails from read-only filesystem    |
|45905|New|Enh|2008-09-26|ErrorDocument and default URL                     |
|45922|New|Enh|2008-09-30|Expand the conditions under which "SSLVerifyClient|
|45923|New|Nor|2008-09-30|htpasswd tries to open(file, O_RDONLY | O_APPEND) |
|45926|Inf|Nor|2008-10-01|Unable to start apache 2.2.9                      |
|45986|New|Nor|2008-10-10|[info]...Invalid argument: core_output_filter: wri|
|46024|Opn|Nor|2008-10-16|--enable-static is not available in apache's confi|
|46037|Inf|Nor|2008-10-18|Configuration of trusted OCSP responder certificat|
|46040|New|Enh|2008-10-20|Check for existing version of Apache while install|
|46054|New|Nor|2008-10-21|Running httpd returns the error "bad user name nob|
|46070|New|Nor|2008-10-22|MSI installer does not validate custom installatio|
|46071|New|Enh|2008-10-22|Allowing space in between comma and last option in|
|46074|New|Enh|2008-10-23|Need of friendly and easy to use configuration gra|
|46139|New|Nor|2008-11-02|Apache Restart option is not working              |
|46140|New|Enh|2008-11-03|Change error state in balancer manager            |
|46188|Inf|Nor|2008-11-11|Core dumps in apache 2.0.59                       |
|46195|Opn|Nor|2008-11-12|ProxyPass fails with literal IPv6 address         |
|46215|New|Nor|2008-11-14|Race condition in bybusyness algorithm            |
|46231|New|Maj|2008-11-18|Connection Pooling with ajp depends on syntax ?   |
|46241|New|Enh|2008-11-19|mod_expires - ExpiresByPattern or ExpiresIf       |
|46267|New|Nor|2008-11-22|No shared modules build if use --with-apr and --wi|
|46270|New|Enh|2008-11-23|Add FIPS 140-2 mode for mod_ssl for FIPS 1.2 modul|
|46282|New|Nor|2008-11-24|apache2.2 reverse proxy causing full memory and sw|
|46316|New|Maj|2008-12-01|Proxied SSI ProxyTimeout render failure           |
|46317|Inf|Nor|2008-12-01|mod_authnz_ldap.c(373)  seg fault                 |
|46412|New|Nor|2008-12-17|make_child return value not checked               |
|46417|New|Cri|2008-12-19|[notice] Parent: child process exited with status |
|46428|Opn|Nor|2008-12-21|Spaces in URI doesn't encode in proxy-requests    |
|46442|New|Nor|2008-12-29|Semicolon in allow/deny all rules cause reverse lo|
|46449|New|Maj|2008-12-30|Output out of order from SSI include virtual      |
|46454|New|Min|2008-12-30|escaping wildcards in AddIcon filename matching   |
|46475|New|Nor|2009-01-04|build warnings.                                   |
|46499|New|Maj|2009-01-09|httpd accept() return EAGAIN error                |
|46521|New|Nor|2009-01-13|mod_dav doesn't show symlinks                     |
|46529|Ass|Nor|2009-01-14|Child httpd processes crash with Segmentation faul|
|46534|New|Nor|2009-01-14|mod_proxy_ajp scheme and port do not follow UseCan|
|46578|New|Nor|2009-01-21|Flawed header                                     |
|46582|Ver|Min|2009-01-22|RewriteMap internal functions are not well documen|
|46604|New|Nor|2009-01-26|Error thrown when trying to rpmbuild -tb httpd sou|
|46629|New|Maj|2009-01-29|Apache hanging on system calls for php and perl   |
|46634|Ass|Nor|2009-01-30|Requests sometimes take too long, wrong time taken|
|46644|New|Enh|2009-01-31|Clean way to pass custom environment variables to |
|46646|Ass|Nor|2009-02-01|check group membership is sometimes case sensitive|
|46650|Opn|Nor|2009-02-02|CustomLog enviroment condition SCRIPT_FILENAME    |
|46656|New|Enh|2009-02-03|ProxyErrorOverride inside location                |
|46669|New|Enh|2009-02-06|rotatelogs doesn't autocreate directories         |
|46671|Opn|Cri|2009-02-07|Apache periodicaly crashes .                      |
|46678|New|Nor|2009-02-09|Fixed Content-Length using mod_ext_filter with mod|
|46682|New|Nor|2009-02-09|mod_proxy EAI_AGAIN DNS failure                   |
|46685|Opn|Nor|2009-02-09|401 sent without WWW-Authenticate header when requ|
|46709|Opn|Reg|2009-02-12|Expect: 100-continue to an HTTP/1.0 server change |
|46724|Inf|Cri|2009-02-17|WinXP SP3 - Apache crashes on startup in libapr-1.|
|46743|New|Nor|2009-02-19|Inconsistent behavior of "RewriteOptions inherit" |
|46745|New|Maj|2009-02-20|ab.c error :  undefined reference to `BIO_set_call|
|46751|New|Nor|2009-02-21|Can passenv variables who's name contain '(' or ')|
|46762|New|Nor|2009-02-24|Error, SSL/TLS libraries were missing or unusable |
|46765|Opn|Nor|2009-02-25|doubled HTTP header leads to error (Redmine)      |
|46785|Inf|Nor|2009-03-02|Child process increases to 100% (CPU)             |
|46788|New|Nor|2009-03-02|Set resource limits to avoid denial of service att|
|46810|New|Nor|2009-03-05|apxs / apu-1-config outputting erroneous include p|
|46824|New|Nor|2009-03-09|RemoveOutputFilter will not work for Filters added|
|46845|Inf|Cri|2009-03-12|Apache crashes in Windows when using subversion(pr|
|46847|New|Nor|2009-03-13|WebDAV methods with encoding other than "identity"|
|46873|New|Nor|2009-03-18|feature request: connection count on balancer-mana|
|46884|New|Min|2009-03-20|Call to apu_dso_load Fails In apr_ldap_stub.c On O|
|46946|Inf|Nor|2009-03-31|mod_mbox shows email addresses in plain text      |
|46963|New|Nor|2009-04-03|KeepAliveTimout prevents child process from exitin|
|46969|New|Nor|2009-04-05|CustomLog format %m always GET on errors with loca|
|46970|New|Nor|2009-04-05|CustomLog %X does not record aborted connections w|
|47011|New|Reg|2009-04-09|mod_proxy/mod_proxy_balancer hot-standby BalancerM|
|47055|New|Blk|2009-04-20|SSLVerifyClient + Directory doesn't use cache sess|
|47063|New|Nor|2009-04-21|mod_proxy doesn't call post_request handler when t|
|47134|New|Nor|2009-05-01|Last resolve handling when sending client certific|
|47138|New|Nor|2009-05-01|Reverse Proxy & Balancer generate error fault when|
|47152|New|Maj|2009-05-04|Apache is only serving the first character in the |
|47159|New|Nor|2009-05-06|2.2.x logresolve doesn't support ipv6             |
|47167|New|Nor|2009-05-07|Authenticated sessions being switched by reverse p|
|47170|New|Enh|2009-05-08|rotatelogs ring buffer option                     |
|47180|New|Nor|2009-05-11|DBM ssl_scache setting can cause extreme performan|
|47220|Opn|Enh|2009-05-19|Access to environment variables                   |
|47241|New|Min|2009-05-22|Error in rewriting with character ':'             |
|47256|New|Enh|2009-05-23|Enable SSL on a per-port basis                    |
|47289|New|Nor|2009-05-30|Can't build with dynamic libraries on Mac OS 10.4 |
|47295|New|Nor|2009-06-01|AuthDBDUserPWQueryFmt/AuthDBDUserRealmQueryFmt in |
|47329|New|Nor|2009-06-07|SSLCADNRequest* & SSLCACertificate* silently do no|
|47340|New|Nor|2009-06-09|uldap_cache_comparedn() called without a lock     |
|47344|New|Enh|2009-06-10|[FEATURE REQUEST] RedirectCanonicalName           |
|47345|New|Enh|2009-06-10|rotatelogs timeout patch                          |
|47346|New|Maj|2009-06-10|mod_cache doesn't re-cache expired content when La|
|47387|Inf|Nor|2009-06-18|SSL_CLIENT_I_DN and SSL_CLIENT_S_DN use Email inst|
|47392|Opn|Nor|2009-06-18|<FilesMatch> is using the wrong directory         |
|47435|New|Nor|2009-06-26|mod_authz_host does reading of /etc/hosts on each |
|47438|Inf|Enh|2009-06-27|how to create a non-html "listing generated by the|
|47447|New|Enh|2009-06-29|Add possibility to use client IP as a value in Req|
|47484|New|Nor|2009-07-06|Spurious RewriteLock warning when using external m|
|47485|New|Enh|2009-07-06|HTML5 Websocket implementation                    |
|47514|New|Enh|2009-07-12|Personal data and restrictions based on subject di|
|47528|New|Maj|2009-07-14|Worker process won't restart more than once using |
|47542|New|Nor|2009-07-16|Piped logging processes killed before other proces|
|47562|Inf|Nor|2009-07-23|Apache/2.2.3 (Win32) mod_perl/2.0.3-rc1           |
|47578|New|Nor|2009-07-24|compile ERROR with ssl                            |
|47580|Opn|Nor|2009-07-25|mod_cache sends 200 response instead of 304       |
|47586|New|Nor|2009-07-27|httpd -k start doesn't start service when rotatelo|
|47591|New|Min|2009-07-27|show current HTTP_HOST in mod_status scoreboard   |
|47601|New|Enh|2009-07-29|Support X-Forwarded-For in forward proxy requests |
|47625|New|Nor|2009-08-02|2.2.12 win32 msi installer missing                |
|47634|New|Maj|2009-08-04|mod_ldap connection pool session keepalive not imp|
|47643|New|Enh|2009-08-04|added meta tags to xhtml output for ease of search|
|47657|New|Nor|2009-08-06|Make WebDAV MOVE atomic when replacing files on sa|
|47659|New|Nor|2009-08-07|makefile.win needs check for DBM_LIST, dies on bui|
|47664|New|Nor|2009-08-07|ap_proxy_canonenc: does not recode all high-byte c|
|47665|Inf|Blk|2009-08-09|Apache service well launched but blank Screen     |
|47691|New|Enh|2009-08-12|libtool invocations should use --tag              |
|47693|Opn|Nor|2009-08-13|GET request has race condition w.r.t. replacement |
|47706|Inf|Nor|2009-08-19|(20014)Internal error: proxy: error reading status|
|47716|New|Min|2009-08-20|LimitRequestFieldSize and friends not merged well |
|47719|Opn|Enh|2009-08-20|Broken symbolic link (symlink) causes wrong ErrorD|
|47723|New|Nor|2009-08-22|suEXEC and low RLimitMem gives "crit: invalid uid"|
|47743|Inf|Nor|2009-08-26|mod_so segfaults at server startup in ap_find_load|
|47753|New|Nor|2009-08-27|output and error channels not explicitly passed fo|
|47778|Opn|Enh|2009-09-03|wrong exit value on graceful restart              |
|47780|New|Nor|2009-09-03|Critical errors should be marked by time and level|
|47807|Inf|Nor|2009-09-09|Proxy dialog error with Apache 2.2.13             |
|47808|New|Maj|2009-09-09|Child process core dumps when enabling CRL        |
|47814|Inf|Maj|2009-09-10|openssl_pkcs7_sign error                          |
|47838|New|Enh|2009-09-14|Ability to Dynamically Inject Current Time Into a |
|47874|New|Nor|2009-09-18|mod_fcgid crashes if added during restart         |
|47895|New|Maj|2009-09-24|Incorrect 413 error handling                      |
|47908|New|Min|2009-09-27|'invalid result code' in error_log                |
|47981|New|Nor|2009-10-12|allow language specific html-versions (index.html.|
|47982|New|Nor|2009-10-12|correctly interprete non-standard HTTP_ACCEPT_LANG|
|47988|New|Nor|2009-10-12|Segmentation fault                                |
|47989|New|Nor|2009-10-13|Junk string appended to compressed dynamic content|
|47994|New|Enh|2009-10-14|ScriptInterpreterSource apparently broken in Windo|
|48020|New|Nor|2009-10-17|KCP+ Opera support for mod_auth_digest            |
|48037|Inf|Nor|2009-10-21|mod_proxy_http does not handle asynchronous keepal|
|48045|New|Nor|2009-10-23|Apache 2 initgroups alert, Max OS X, abnormal exit|
|48057|New|Nor|2009-10-26|mod_fcgid creates 1 more process then allowed     |
|48094|New|Nor|2009-11-01|Avoid a race condition in close_worker_sockets()  |
|48107|New|Maj|2009-11-02|Mutual Authentication: Order in ca-bundle influenc|
|48115|New|Enh|2009-11-03|Duration to receive the request, generate response|
|48130|New|Maj|2009-11-04|DAV operations on large filesets consume all the O|
|48154|New|Nor|2009-11-06|Requests through mod_isapi are not parsed by HTTP_|
|48164|New|Enh|2009-11-09|add new parameters to rotatelogs                  |
|48219|New|Nor|2009-11-17|Retrying the worker for seems to omit POST variabl|
|48228|New|Nor|2009-11-18|Renegocation requires multiple client authenticati|
|48246|New|Enh|2009-11-19|Check permissions on file/directory specified for |
|48254|New|Trv|2009-11-20|Bogus "DocumentRoot does not exist" warning when s|
|48283|New|Nor|2009-11-25|Proxy errors since httpd 2.2.12 with Tomcat 6.0.20|
|48291|New|Maj|2009-11-26|mod_substitute loops                              |
|48295|Opn|Nor|2009-11-27|ProxyPassReverseCookiePath: Not changing path corr|
|48301|New|Enh|2009-11-30|Feature request: improved connection status report|
|48309|New|Maj|2009-11-30|libapreq2-2.12: "make test" fails at request.t and|
|48312|Opn|Nor|2009-11-30|ProxyPassReverseCookiePath: Not changing path corr|
|48316|Inf|Nor|2009-12-01|ap_run_insert_filter doesn't work in cache_url_han|
|48354|New|Enh|2009-12-08|void ap_custom_response is not supporting the bina|
|48360|New|Enh|2009-12-09|provide sample configuration file for inclusion in|
|48361|New|Enh|2009-12-09|Add global server option for specifying desired DS|
|48364|Opn|Nor|2009-12-10|PHP-generated pages are not cached in spite of per|
|48369|New|Enh|2009-12-10|add option to automatically restart if a script is|
|48431|New|Nor|2009-12-22|Error logging doesn't work when configured to use |
|48440|Inf|Cri|2009-12-23|Segmentation Fault                                |
|48449|Inf|Nor|2009-12-28|make distclean removes core.c and core_filters.c  |
|48465|Opn|Enh|2009-12-30|Support TCP to connect to backends                |
|48499|New|Nor|2010-01-06|mod_rewrite can't redirect to files with ? in them|
|48500|New|Nor|2010-01-06|mod_mbox mishandles right-click to open msg in new|
|48508|New|Nor|2010-01-07|BalancerMember doesn't accept nocanon directive   |
|48549|New|Enh|2010-01-14|Add Cache-Control s-maxage support                |
|48576|New|Nor|2010-01-19|MOVE or COPY in WebDAV fails with 404 when file ex|
|48585|New|Enh|2010-01-20|mod_cache no longer caches expired content        |
|48602|New|Enh|2010-01-23|use asynch ldap_compare so LDAPTimeout applies    |
|48623|New|Maj|2010-01-26|AuthLDAPURL syntax is not RFC-compliant, prevents |
|48639|New|Enh|2010-01-29|Add htcacheclean as a core monitored process      |
|48652|New|Maj|2010-02-01|"AuthType form" fails if a password contains  '&' |
|48659|New|Maj|2010-02-02|Problem with accents in filename and byte serving |
|48687|New|Nor|2010-02-05|mod_rewrite ignores trailing dot in request URI on|
|48705|New|Enh|2010-02-08|flag to allow newlines in the error log as opposed|
|48712|New|Enh|2010-02-09|Add UID and GID to status page                    |
|48719|New|Nor|2010-02-09|[BUG] mod_proxy_ajp return wrong error message whe|
|48721|New|Nor|2010-02-10|[Patch] Add ProxyAllow to mod_proxy               |
|48731|New|Maj|2010-02-11|Prefork not creating processes after 10 servers ar|
|48732|New|Nor|2010-02-12|[BUG] environment variable SCRIPT_NAME output erro|
|48769|New|Nor|2010-02-18|[PATCH] Processes in the busy list should not be k|
|48777|New|Maj|2010-02-19|proxy balancer not detecting correctly when host (|
|48780|New|Enh|2010-02-19|Enable mod_authnz_ldap to accept valid client cert|
|48792|New|Enh|2010-02-22|httpd util apachectl returns wrong status informat|
|48805|New|Nor|2010-02-23|Corrupted response for HTTPS + KEEPALIVE=ON       |
|48808|New|Enh|2010-02-24|mod_authz_owner support for POSIX access control l|
|48819|Inf|Nor|2010-02-25|After users login on the web page, the page does n|
|48842|Inf|Nor|2010-03-02|mod_log_config logs the full size of the file inst|
|48880|Opn|Nor|2010-03-09|error on make                                     |
|48888|New|Nor|2010-03-10|DOCTYPE definitions nearly 11 years out-of-date   |
|48920|New|Enh|2010-03-15|Breadcrumbs on mod_autoindex path                 |
|48921|Inf|Nor|2010-03-16|mod_mem_cache crash, version 2.2.15.0             |
|48937|New|Enh|2010-03-18|Feature proposal - support sasl_bind              |
|48949|Inf|Cri|2010-03-20|fcgid processes never get killed after graceful re|
|48958|New|Nor|2010-03-22|mod_ldap, ldap credential cache & graceful restart|
|48987|New|Trv|2010-03-25|typo in polish translation of HTTP_UNAUTHORIZED.ht|
|49037|New|Enh|2010-04-02|SSLVerifyClient require_no_ca                     |
|49043|New|Maj|2010-04-04|Using ssi include directive overwrites QUERY_STRIN|
|49058|New|Nor|2010-04-06|Prefork MPM tries to accept on closed listener soc|
|49067|New|Nor|2010-04-08|FTPOptions ShowUnAuthorizedFiles does not work    |
|49068|New|Nor|2010-04-08|UTF-8 URL Encode error                            |
|49087|New|Maj|2010-04-11|MSI installation reports "interrupted installation|
|49114|New|Maj|2010-04-13|NTFS junction directories missing from directory l|
|49123|New|Nor|2010-04-14|mod_proxy_ajp does not send the client's SSL chain|
|49131|New|Nor|2010-04-15|Very long URLs cause 404 or 403 errors with SetAct|
|49133|New|Maj|2010-04-16|Windows service recovery options do not work for A|
|49157|New|Nor|2010-04-20|Issues with xml interface for balancer manager    |
|49187|New|Nor|2010-04-26|Crash mod_mem_cache and mod_svn                   |
|49199|New|Enh|2010-04-27|Implement LDAP scope-aware caching in mod_ldap    |
|49220|New|Nor|2010-04-29|feature request for being able to disable FcgidWra|
|49239|New|Blk|2010-05-01|Apache mod_ssl gives coredump with openssl 0.9.8  |
|49277|New|Nor|2010-05-12|Expose a variable to identify SSL Session renegoti|
|49283|New|Nor|2010-05-12|Language of dates on SSI                          |
|49285|New|Enh|2010-05-13|Relative (local to current directory) URLs do not |
|49348|New|Enh|2010-05-27|[mod_log_config] Output log file name format capab|
|49385|New|Maj|2010-06-03|mod_disk_cache server side included files are inte|
|49387|Inf|Cri|2010-06-03|Unable to modify default charset setting to UTF-8 |
|49391|New|Nor|2010-06-05|mod_disk_cache needs to register a cleanup to kill|
|49396|New|Enh|2010-06-06|PATH_INFO normalization, especially relating to vo|
|49427|New|Nor|2010-06-11|mod_cgid and mod_cgi do not return proper value wh|
|49433|New|Enh|2010-06-13|improving info in server status                   |
|49439|New|Nor|2010-06-14|Bug in mod_userdir which prevents suexec from runn|
|49504|New|Nor|2010-06-25|Solaris 10/x64 worker graceful restart problem    |
|49532|New|Nor|2010-06-30|mod_cache: Set-Cookie headers are appended to cach|
|49553|New|Min|2010-07-05|Set QoS bits via APR2 API instead                 |
|49568|New|Maj|2010-07-07|Apache mod_authnz_ldap built with the MS LDAPSDK d|
|49632|Inf|Nor|2010-07-21|mod_authnz_ldap denies users when search is perfor|
|49633|New|Enh|2010-07-21|Handle AD primary groups in mod_authnz_ldap       |
|49642|New|Nor|2010-07-23|mod_rewrite mistakes encoded question mark as path|
|49643|New|Nor|2010-07-23|WebDav plus mod Negotiation causes directory creat|
|49676|New|Nor|2010-07-30|directory with german umlauts are indented by one |
|49680|New|Maj|2010-07-30|Perl script are not running on Win32, Apache 2.2.1|
|49684|New|Enh|2010-08-01|enhancement for ipv6 implementation               |
|49699|New|Nor|2010-08-03|Inconsistent Keep-alive from proxy to the origin s|
|49715|New|Maj|2010-08-06|ProxyPassMatch Url Encoder Problem                |
|49717|New|Enh|2010-08-06|PATCH: Enable SSL Timeout                         |
|49737|Inf|Nor|2010-08-10|order allow,deny does not work on IPv6            |
|49743|New|Maj|2010-08-12|SSI 'echo encoding="(url/none)"' bug              |
|49746|Opn|Enh|2010-08-12|mod_rewrite urlencode option                      |
|49766|New|Maj|2010-08-17|POST request on CGI script generating empty body c|
|49771|New|Nor|2010-08-17|After graceful restart using mod_proxy_ajp, couldn|
|49772|New|Nor|2010-08-18|mod_deflate kicks itself out on Content-Range resp|
|49798|Opn|Nor|2010-08-22|[mod_log_config] Piped Log scripts process cause w|
|49807|New|Enh|2010-08-23|hard to force Content-Type header for non static f|
|49810|New|Nor|2010-08-23|Mod_autoindex output of header/body/footer scrambl|
|49815|New|Enh|2010-08-24|Enable caching for HTTP Range requests / 206 respo|
|49829|New|Trv|2010-08-26|CGI index command line arguments excessively escap|
|49832|New|Enh|2010-08-26|void ap_custom_response is not supporting the bina|
|49859|Opn|Nor|2010-09-01|url with additional filepath generates bad environ|
|49921|New|Nor|2010-09-13|Trailers in chunked http requests are not handled |
|49926|New|Enh|2010-09-14|New option for mod_log_forensics or mod_log_config|
|49980|New|Nor|2010-09-22|can't use a FIFO for SSL key file; mod_ssl checks |
|49981|New|Enh|2010-09-22|Requesting SSLCertificateKeyFile Dialog functional|
|49990|New|Nor|2010-09-23|Feature request: implement ExpiresActive reset    |
|49996|New|Nor|2010-09-24|Proxied ErrorDocument returns 200 OK response code|
|49997|New|Nor|2010-09-24|wrowe promised me...                              |
|50004|New|Nor|2010-09-26|per-dir rewrite without DocumentRoot or RewriteBas|
|50011|New|Cri|2010-09-27|error running apache, and installing apache as a s|
|50024|New|Min|2010-09-29|Mod_cache/mod_mem_cache and mod_security combinati|
|50038|New|Enh|2010-10-01|What Directives apply to a file/directory? Resulta|
|50041|New|Min|2010-10-04|(9)Bad file descriptor: apr_socket_accept: (client|
|50051|New|Nor|2010-10-07|Log PID in first entry logged for each request    |
|50061|New|Nor|2010-10-08|Semicolon character '%3B' seems to be decoded to '|
|50082|New|Nor|2010-10-12|apachectl status returns incorrect exit code      |
|50112|New|Nor|2010-10-18|buildconf broken in two places                    |
|50116|New|Nor|2010-10-19|Apache fragments packets unnecessarily            |
|50151|New|Nor|2010-10-25|Software caused connection abort and apache proces|
|50155|Inf|Nor|2010-10-25|httpd -s attempts to read SSL certificates        |
|50172|Inf|Nor|2010-10-28|Digest allows access bypassing secuity            |
|50227|New|Enh|2010-11-07|Option to fail SSL handshake for diverted SNI conn|
|50237|Inf|Nor|2010-11-08|webdav LOCK access with multiple threads to same f|
|50261|New|Nor|2010-11-12|graceful restart with multiple listeners using pre|
|50262|New|Nor|2010-11-12|mod_rewrite log ip address vs hostname            |
|50274|New|Nor|2010-11-15|always pass CONTENT_LENGTH to the application     |
|50278|New|Nor|2010-11-16|-DFOREGROUND and ap_unixd_killpg()/ap_os_killpg() |
|50290|Inf|Nor|2010-11-18|vanilla apache 2.2.17 installation crashes (lib-ap|
|50296|New|Nor|2010-11-18|LDAPVerifyServerCert and possibly LDAPTrustedMode |
|50317|New|Nor|2010-11-22|Possible error in mod_cache's "Avoiding the Thunde|
|50336|New|Min|2010-11-25|PUT failures do not emit Allow:                   |
|50344|New|Nor|2010-11-26|ProxyPass does not handle different protocols when|
|50357|New|Enh|2010-11-28|improve matching mechanisms for mime type and enco|
|50372|New|Enh|2010-11-29|any reason for allowing ModMimeUsePathInfo only in|
|50390|New|Nor|2010-11-30|WARNING: Unrecognized options : --disable-ipv6    |
|50402|New|Nor|2010-12-02|SetEnv proxy-sendchunks is ignored for small amoun|
|50412|New|Nor|2010-12-04|if IndexOptions +XHTML, the correct MIME type shou|
|50423|Inf|Nor|2010-12-06|Apache is terminated with signal 11, Segmentation |
|50427|New|Nor|2010-12-07|Windows>=Vista+mod_auth_digest+command line=proble|
|50432|New|Enh|2010-12-08|add PCRE-mode for file based matches              |
|50436|New|Enh|2010-12-08|VirtualHost could behave like people expect it to |
|50444|New|Enh|2010-12-09|Pre-close logging handles in cgid agent           |
|50456|Inf|Nor|2010-12-10|Invalid Error 413 crash Apache                    |
|50464|New|Blk|2010-12-13|undefined reference to `BIO_set_callback' `BIO_set|
|50466|Inf|Maj|2010-12-13|httpd process doesn't recycle                     |
|50473|New|Maj|2010-12-14|zlib.dll Problem                                  |
|50521|New|Nor|2010-12-25|Comment at top of sample main config file is wrong|
|50525|New|Nor|2010-12-28|Header directive won't edit Location header from P|
|50530|New|Enh|2010-12-29|Provide rate limiting for failed authentication at|
|50532|New|Enh|2010-12-30|Mail protection                                   |
|50551|New|Nor|2011-01-06|Some proxied connections ignore ttl setting       |
|50562|Opn|Cri|2011-01-09|wrong PATH_INFO CGI environment with non-ASCII UTF|
|50584|New|Enh|2011-01-14|Add error message when RequestReadTimeout triggere|
|50592|New|Maj|2011-01-15|httpd dumps core on an IPv6 only system           |
|50602|New|Nor|2011-01-17|non thread safe functions used in apache httpd pro|
|50619|New|Min|2011-01-19|After changing resolv.conf signaling httpd doesn't|
|50628|New|Blk|2011-01-21|Core dump happens with Apache 2.2.15 using openssl|
|50630|New|Nor|2011-01-21|Apache return 500 error with authentication by LDA|
|50644|New|Enh|2011-01-24|Add support for maximum number of requests per Kee|
|50654|New|Nor|2011-01-25|FileETag ContentMD5 & Filename, optimisation to Co|
|50693|New|Nor|2011-01-31|AllowOverride Options=(not Foo) should permit no-o|
|50704|Inf|Nor|2011-02-01|mod_cache doesn't cache MultiViews                |
|50712|New|Maj|2011-02-02|Restart button only stops the server ...and do not|
|50727|New|Nor|2011-02-07|ISAPI EXTENSION_CONTROL_BLOCK Missing PostData wit|
|50765|New|Enh|2011-02-11|Runtime Backend Pinning via balancer-manager      |
|50770|New|Nor|2011-02-14|a rotatelogs issue, if time changed               |
|50773|Inf|Nor|2011-02-14|Dav lock database corruption                      |
|50774|New|Enh|2011-02-14|Have a way to invalidate cache without other reque|
|50777|New|Nor|2011-02-14|Back port buildconf specifies AC_PREREQ(2.13) fix |
|50796|New|Enh|2011-02-16|record time between keepalives in access log      |
|50807|New|Maj|2011-02-18|mod_proxy fails to send FIN response when a FIN is|
|50814|New|Nor|2011-02-21|SSI exec not working on Windows (Apache 2.x)      |
|50848|New|Enh|2011-03-01|Content Negotiation type map file precedence could|
|50869|New|Enh|2011-03-04|Need directive to control use and timeout of sessi|
|50873|New|Nor|2011-03-04|httpd does not start properly when built from sour|
|50878|New|Nor|2011-03-05|redundant operation when calling apr_stat         |
|50891|New|Nor|2011-03-08|Apache rewrites WWW-Authenticate headers from CGI |
|50902|Inf|Maj|2011-03-09|on major load on the server, poll() hangs         |
|50916|New|Nor|2011-03-11|RewriteMap program: mod_rewrite sends request but |
|50926|New|Nor|2011-03-14|unexpected <Directory> file-matching behavior     |
|50942|New|Maj|2011-03-17|Apache 2.2.16 forward proxy is 5x times slower tha|
|50945|Opn|Nor|2011-03-18|AJP: Missing support for ErrorOverride            |
|50948|Opn|Nor|2011-03-19|Connection not closed when CGI dies waiting for PO|
|50954|New|Nor|2011-03-21|ProxyRemote doesnt use CONNECT method with https s|
|50959|New|Enh|2011-03-23|Add cache-manifest to the mime type list          |
|50976|New|Nor|2011-03-26|Apache losts client's ip (%a or %h) sometimes.    |
|50999|Opn|Nor|2011-03-30|it seems the configure wrong detect my apr-util ve|
|51001|New|Nor|2011-03-31|patch for hook ap_lua_run_lua_open                |
|51005|New|Enh|2011-04-01|Allow to use username in LDAP filter              |
|51006|New|Blk|2011-04-01|Apache consume all memory and swap when setup as r|
|51019|New|Enh|2011-04-04|[PATCH] Implementation of Asynchronous processing |
|51020|Opn|Nor|2011-04-04|[PATCH] Apache/mod_fcgid.so does not start in comp|
|51022|New|Nor|2011-04-05|Segmentation fault on PUT request                 |
|51030|New|Enh|2011-04-06|Way to terminate CGI immediatly after closing conn|
|51078|Inf|Nor|2011-04-18|[PATCH] mod_fcgid spawned CGI Processes gets orpha|
|51079|New|Enh|2011-04-18|[PATCH] mod_fcgid spawned CGI Process cannot imper|
|51080|New|Nor|2011-04-18|[PATCH] mod_isapi does not support Except:100-Cont|
|51103|Opn|Nor|2011-04-21|mod_reqtimeout does not drop connection and return|
|51107|New|Min|2011-04-22|SetOutputFilter and SetInputFilter should allow "n|
|51118|New|Nor|2011-04-26|LDAP cache is cleared after graceful/restart and o|
|51127|New|Nor|2011-04-27|Make ProxyPassReverseCookiePath work as expected  |
|51168|New|Nor|2011-05-08|mod_status Total Traffic won't take account of int|
|51170|New|Nor|2011-05-09|I/O errors when using keep-alive + mod_ssl        |
|51174|New|Min|2011-05-09|SSLRequire predicates using OIDs unknown to openss|
|51186|New|Blk|2011-05-11|NEw Openssl 1.0.1 with new FIPS                   |
|51190|New|Min|2011-05-12|::/0 does not work with allow from and deny from  |
|51194|New|Nor|2011-05-13|FcgidWrapper does not support paths containing a s|
|51201|Inf|Nor|2011-05-15|Strange behavior REQUEST_METHOD & GET in mod_rewri|
|51223|New|Nor|2011-05-18|304 HTTP Not Modified strips out CORS headers     |
|51224|New|Nor|2011-05-18|mod_dav_fs should respect FileETag                |
|51239|New|Nor|2011-05-21|ap_get_client_block may block continuously sometim|
|51257|New|Nor|2011-05-24|Build failed when cross-compiling: ./gen_test_char|
|51258|New|Enh|2011-05-24|new features for mod_substitute                   |
|51296|New|Enh|2011-05-31|Dynamic engine support using SSLCryptoDevice suppo|
|51297|New|Nor|2011-05-31|Improve error handling during "UNLOCK"            |
|51303|New|Nor|2011-05-31|TraceEnable 500 error                             |
|51312|New|Nor|2011-06-01|mod_filter should support adding to the Vary heade|
|51322|New|Enh|2011-06-04|Prepend and append string to LDAP search parameter|
|51359|Inf|Enh|2011-06-11|Added shebang check for //! so that .js scripts wo|
|51365|New|Nor|2011-06-13|Mod_proxy mangles query string with mod_security  |
|51402|New|Nor|2011-06-21|"ForceLanguagePriority Fallback" not working as im|
|51406|New|Maj|2011-06-21|When listing files in subdirectories, the path is |
|51409|New|Nor|2011-06-21|Sorting options accepted by ls, but ignored       |
|51471|New|Nor|2011-07-04|<DirectoryMatch>ed IndexIgnore doesn't            |
|51479|New|Enh|2011-07-05|[PATCH] AB feature to optionally read in a reusabl|
|51491|New|Nor|2011-07-08|mod_dir breaks POSTs to URLs not ending in /      |
|51495|New|Nor|2011-07-11|mod_substitute cpu and memory limit               |
|51517|New|Maj|2011-07-16|mod_proxy_fcgi is not RFC 3875 compliant (SCRIPT_F|
|51522|Ver|Trv|2011-07-18|Wrong French translation in mpm.html ("Certains Mo|
|51542|New|Nor|2011-07-22|Apache HTTP Server vs PVS-Studio                  |
|51543|New|Nor|2011-07-22|Space in username not properly escaped in log file|
|51552|Inf|Cri|2011-07-25|Apache is not starting (2.2.15)                   |
|51573|New|Enh|2011-07-28|Easy way to erase log files                       |
|51576|Inf|Nor|2011-07-28|mod_rewrite rule stopped working                  |
|51600|New|Enh|2011-08-02|Loading the same certificate in multiple virtual h|
|51603|Inf|Maj|2011-08-02|Apache accepts completely bogus HTTP requests (pos|
|51607|Inf|Nor|2011-08-03|DBDPrepareSQL ( ap_dbd_prepare ) does not work cor|
|51629|New|Nor|2011-08-05|DocumentRoot check incorrect when running under ch|
|51674|New|Blk|2011-08-18|AJP Module Bad Request                            |
|51679|New|Min|2011-08-18|Code signature key expired                        |
|51689|New|Trv|2011-08-19|Cross compiling causes multiple Listen directives |
|51695|New|Trv|2011-08-20|Code clean up (ap_rputs merge)                    |
|51707|New|Nor|2011-08-22|ProxyPassReverse issues within <Location> (differe|
|51709|New|Nor|2011-08-23|ServerName/ServerAlias don't work if Host: header |
|51711|New|Nor|2011-08-23|mod_auth_digest have broken shared mem (nonce) cod|
|51718|New|Enh|2011-08-24|Feature Request: Add shorthand to redirect any Ser|
|51725|New|Nor|2011-08-26|Multiple Range: request accepted as "Range: n-m"  |
|51732|New|Nor|2011-08-29|Inconsistencies in log messages' verbosity levels |
|51747|New|Nor|2011-08-31|mod_fcgid loads entire request into memory while p|
|51757|Inf|Enh|2011-09-02|Add support for SASL auth in LDAP                 |
|51778|Inf|Cri|2011-09-07|while buliding(make) a unix source "httpd-2.2.20.t|
|51797|Inf|Maj|2011-09-10|Crash HTTPD(Windows)                              |
|51814|New|Enh|2011-09-14|mod_proxy in Apache HTTP 2.2 FIN_WAIT2 in server s|
|51842|New|Enh|2011-09-18|Suggesting a new action for the Header directive: |
|51858|Inf|Nor|2011-09-21|weird error for mod_rewrite with more then 3 param|
|51864|New|Nor|2011-09-22|mod_cache returns entire entity from origin server|
|51904|New|Nor|2011-09-28|output to stderr from cgi script causes script to |
|51951|New|Nor|2011-10-04|mod_mbox hang on some e-mails on press@a.o - was I|
|51964|Ver|Nor|2011-10-05|Documentation of RewriteRule flag skip unclear    |
|51965|New|Nor|2011-10-05|--with-z=DIR not being honored                    |
|51982|Opn|Nor|2011-10-06|ProxyPassReverse / balancer://cluster/ adds slash |
|51987|Inf|Nor|2011-10-07|RewriteRule doesn't work correctly with apache 2.3|
|51994|New|Enh|2011-10-07|Mod_authn_socache should have some way to flush th|
|52004|Ver|Trv|2011-10-10|Typo "indexe" in French translation of mpm.html   |
|52007|New|Nor|2011-10-10|Content-Length: 0 not set on proxy response       |
|52038|New|Nor|2011-10-16|NameWidth works incorrectly together with Charset=|
|52039|Inf|Nor|2011-10-16|Browser mode does not always work                 |
|52043|New|Nor|2011-10-17|Directories ".", "..", and "/" do not work correct|
|52081|New|Nor|2011-10-24|segfault if mbox files have unexpected names      |
|52090|New|Maj|2011-10-26|Apache thread hangs with error 500 when sending a |
|52120|Opn|Nor|2011-11-01|mod_cache edge case: uncacheable 304 sends cached |
|52123|New|Maj|2011-11-02|DoS: High memory usage in propfind                |
|52132|New|Nor|2011-11-03|[PATCH] process activity score calculated incorrec|
|52139|New|Nor|2011-11-05|Never Syntax Error on non-existent DocumentRoot   |
|52171|Ver|Nor|2011-11-13|confusing documentation of request phases         |
|52174|New|Enh|2011-11-13|Allow hard lower-limits on the number of fcgi serv|
|52178|New|Nor|2011-11-14|IPv6 IPs as ServerName not allowed                |
|52181|Ver|Nor|2011-11-14|mod_rewrite Technical Details Ruleset Processing d|
|52195|Inf|Nor|2011-11-16|Japanese texts are garbled on mailing list archive|
|52196|Inf|Nor|2011-11-16|winnt mpm, others mpm also have this bug. pool sha|
|52207|Inf|Maj|2011-11-18|Upgrade apache version from 2.0.59 to 2.2.12 or ab|
|52222|New|Nor|2011-11-21|IndexIgnore ignores parent directories in argument|
|52247|New|Nor|2011-11-26|mod_mbox gives up on unexpected message format    |
|52248|New|Nor|2011-11-26|Bugzilla version drop-down list does not offer "un|
|52252|New|Nor|2011-11-27|luajit support broken for (at least) luajit 2.0   |
|52253|Inf|Nor|2011-11-28|Timeout doesn't work. mod_proxy_balancer strongly |
|52264|New|Enh|2011-11-30|Update and complete balancer-manager XML output   |
|52269|Inf|Nor|2011-12-01|[mod_proxy] Apache reverse proxy status code trans|
|52275|New|Nor|2011-12-02|memory leak in proxy_ajp_handler                  |
|52298|Inf|Nor|2011-12-07|Can't enter website with client certificate on an |
|52301|New|Enh|2011-12-07|Error message "RSA server certificate ... CN ... d|
|52302|New|Enh|2011-12-07|Better documentation of how server name is determi|
|52304|New|Nor|2011-12-08|<Limit> Does Not Apply When URI Is Folder         |
|52313|New|Enh|2011-12-09|htdbm enhancement: options for colon-in-username, |
|52322|Inf|Enh|2011-12-13|Providing BBC developed httpd modules for inclusio|
|52342|New|Nor|2011-12-15|ap_internal_redirect dropping filters means incons|
|52370|New|Nor|2011-12-19|apreq_decode/url_decode length miscalculation     |
|52377|New|Enh|2011-12-20|Add Directives to assert user, group, and permissi|
|52383|New|Trv|2011-12-24|Instllation log typo                              |
|52391|New|Cri|2011-12-27|100% CPU usage while using Forward Proxy          |
|52395|New|Nor|2011-12-29|reload results in different end environment to res|
|52403|New|Nor|2011-12-31|FallbackResource doesn't work for non-existent PHP|
|52408|New|Nor|2012-01-01|Directoryindex matching automatically redirects   |
|52415|New|Nor|2012-01-03|LockFile placed inappropriately                   |
|52417|New|Nor|2012-01-03|HEADERS information in the file                   |
|52435|New|Nor|2012-01-06|Apache shutdown automatically                     |
|52439|New|Enh|2012-01-09|It should be possible to treat errors in .htaccess|
|52453|New|Enh|2012-01-11|Ability to configure --logfiledir                 |
|52465|New|Nor|2012-01-13|mod_dir is allowed to redirect proxy requests     |
|52481|New|Nor|2012-01-18|Rotatelog.exe crashes Apache after setting 256MB r|
|52485|New|Nor|2012-01-19|CPU load 100%                                     |
|52494|New|Enh|2012-01-22|allow the Action directive to point in the filesys|
|52495|New|Enh|2012-01-22|CACertificate, CADNCertificate, CARevocation, Cert|
|52501|New|Cri|2012-01-23|child pid 10824 exit signal Segmentation fault (11|
|52505|New|Nor|2012-01-23|Include with directory wildcards gives errors for |
|52509|New|Nor|2012-01-23|Resources protected by .htaccess file may not be a|
|52510|New|Cri|2012-01-23|Segmentation Fault 11                             |
|52520|New|Nor|2012-01-24|ProxyRemote & NoProxy directive can not take IPv6 |
|52532|New|Trv|2012-01-26|VirtualHost added TWICE to name-virtual-host list |
|52539|New|Nor|2012-01-26|Apache mod_dav 400 Bad Request for non-existent co|
|52546|New|Nor|2012-01-27|overwrite SERVER_PROTOCOL environment             |
|52573|New|Nor|2012-02-01|mod_speling case correction fails when URI has dou|
|52578|Opn|Enh|2012-02-02|Wrong "bytes sent" logged when connection is close|
|52594|New|Nor|2012-02-03|rpmbuild -ba errors out with "File not found by gl|
|52595|New|Nor|2012-02-03|requests with gzip+chunked encoded body don't prox|
|52605|Inf|Min|2012-02-05|Please allow request lines longer than 8k         |
|52612|New|Nor|2012-02-06|Default Service Account                           |
|52616|Opn|Enh|2012-02-07|SSLUserName uses SSL_CLIENT_S_DN insted of SSL_CLI|
|52617|New|Maj|2012-02-07|Visit the rewrite page from ServerAlias domain vho|
|52623|New|Nor|2012-02-08|does not build with pcre-8.30                     |
|52644|New|Nor|2012-02-12|document how SSL FakeBasicAuth works with strange |
|52668|New|Trv|2012-02-14|More future safe patch for old MSIE ssl-unclean-sh|
|52670|New|Trv|2012-02-15|please clarify the effect of SSLStrictSNIVHostChec|
|52683|New|Enh|2012-02-16|add a symlink option that rechecks the access perm|
|52700|Inf|Blk|2012-02-17|Not rendering html content instead displaying clie|
|52703|Inf|Maj|2012-02-18|SSL+SNI+client-auth "lost" after some time        |
|52710|New|Nor|2012-02-19|mod_fcgid should set PATH_INFO when configured in |
|52756|Inf|Trv|2012-02-24|proxy_html_module LoadModule line not created in h|
|52759|New|Cri|2012-02-24|Apache httpd child process consuming high CPU Util|
|52790|New|Nor|2012-02-28|ldap caching not sufficient                       |
|52795|Opn|Nor|2012-02-29|mod_fcgid fails to spawn process in C:\Program Fil|
|52806|New|Nor|2012-03-01|configure: --with-included-apr is not supported in|
|52807|New|Nor|2012-03-01|some random strings are accepted by "configure" as|
|52816|New|Nor|2012-03-03|Potential segfault in socache_shmcb_create        |
|52817|New|Nor|2012-03-03|Long directory path sucks (but it's really a valid|
|52822|New|Nor|2012-03-04|Quiet installation not fully quiet                |
|52824|Inf|Nor|2012-03-04|Conflicts between AllowOverride and AllowOverrideL|
|52828|New|Maj|2012-03-05|Child process is not replaced in Windows, after a |
|52832|New|Nor|2012-03-05|numerical configuration entry can be mistakenly in|
|52841|Opn|Nor|2012-03-06|[proxy_balancer:emerg] [pid 25593] AH01177: Failed|
|52851|New|Nor|2012-03-07|Core TimeOut directive doesn't work               |
|52855|Opn|Maj|2012-03-08|mod_ftp does not build against 2.4.x              |
|52860|New|Enh|2012-03-08|Support Transfer-Encoding: gzip                   |
|52865|New|Nor|2012-03-09|Crash by segmentation fault in mod_authn_core in A|
|52870|New|Cri|2012-03-09|100% CPU usage while using Forward Proxy          |
|52874|New|Enh|2012-03-09|Support Use TrustedFirst checking when verifying c|
|52884|New|Nor|2012-03-12|"localhost" leads to start failure                |
|52890|Inf|Nor|2012-03-12|--with-included-apr doesn't work when srclib/apr a|
|52891|New|Nor|2012-03-12|2.2 doesn't perform as well as 1.3                |
|52894|Inf|Nor|2012-03-13|Apache aborts abnormally when ChrootDir is set    |
|52927|Inf|Nor|2012-03-16|[Bug in httpd 2.2.4] [error] (70014)End of file fo|
|52933|New|Nor|2012-03-17|Child survives '-k stop', consuming lots of CPU   |
|52950|New|Nor|2012-03-20|Error when set AuthType to None with valid-user   |
|52963|New|Nor|2012-03-21|Typo in AuthLDAPURL RFC 2255 error message        |
|52975|New|Nor|2012-03-23|Receiving files is suboptimal                     |
|52976|New|Min|2012-03-23|Gratuitous string-duplication in module-configurat|
|52978|New|Enh|2012-03-23|Binding to an interface instead of an address     |
|52995|New|Nor|2012-03-28|httpd -V does not print the default Mutex         |
|53002|New|Nor|2012-03-29|<Location> and auth_form (trailing slash problem?)|
|53015|New|Nor|2012-03-31|missing apr_socket_close                          |
|53016|New|Nor|2012-03-31|missing apr_brigade_destroy                       |
|53023|New|Nor|2012-04-02|mod_rewrite RewriteCond parser error and documenta|
|53037|New|Enh|2012-04-05|clarify mod_ssl documentation on the UID/GID conte|
|53059|New|Nor|2012-04-10|Make httpd easier relocatable by using a variable |
|53098|New|Nor|2012-04-18|mod_proxy_ajp: patch to set worker secret passed t|
|53099|New|Enh|2012-04-18|feature request for mod_remoteip                  |
|53108|New|Enh|2012-04-19|clarification on url-path vs full filesystem path |
|53111|New|Nor|2012-04-20|1% of CMS sites expose database passwords         |
|53121|New|Nor|2012-04-22|Confusing documentation, gzip and deflate         |
|53149|New|Enh|2012-04-25|mod_ldap should/could use mod_socache             |
|53152|Opn|Nor|2012-04-26|RewriteRule documentation: Error about per-directo|
|53156|New|Enh|2012-04-27|CRL validation fails if CRL is missing            |
|53160|New|Cri|2012-04-29|Reverse Proxy mod_deflate doesn't zip back content|
|53183|New|Min|2012-05-03|mod_apreq2 entry point is apreq_module and not apr|
|53193|New|Nor|2012-05-04|SLVerifyClient optional_no_ca + SSLSessionCache = |
|53218|New|Blk|2012-05-11|ProxyPass worker name　(http://localhost:3128/...|
|53233|New|Maj|2012-05-15|Internal error: proxy: error reading status line f|
|53239|New|Maj|2012-05-16|Httpd has problems delivering data on rate-limited|
|53253|New|Maj|2012-05-17|TCP_NOPUSH used with sendfile(2), cause transfers |
|53284|New|Nor|2012-05-24|crash                                             |
|53290|New|Maj|2012-05-24|memory usage                                      |
|53292|New|Min|2012-05-25|add support for HTTP status code 308              |
|53305|New|Nor|2012-05-28|404 errors when adding query string in a balancer |
|53313|New|Nor|2012-05-28|SSI #echo VAR fails (#include OK) if URI/URL has f|
|53319|New|Nor|2012-05-29|Multiple DirectoryIndex statements in the same con|
|53332|New|Nor|2012-05-30|Requests with chunked encoding have no body availa|
|53350|New|Nor|2012-06-01|mod_cache caching 403 responses Apahce 2.2.22     |
|53351|New|Nor|2012-06-02|make fails if layout begins on first line of confi|
|53388|Opn|Nor|2012-06-08|mod_proxy_balanser generates 503 when proxying to |
|53402|New|Trv|2012-06-12|Incorrect error message for mod_ldap params       |
|53461|Inf|Cri|2012-06-23|Compilation problems                              |
|53462|New|Nor|2012-06-25|mod_rewrite does not remove trailing slash when as|
|53479|New|Nor|2012-06-27|mod_rewrite [B] flag should percent-encode the spa|
|53483|New|Enh|2012-06-29|dangerous PCRE patterns in *Match directives      |
|53539|New|Maj|2012-07-12|content type and character set are changing when t|
|53554|New|Nor|2012-07-16|Wrong case for hexadecimal percent encoding [patch|
|53555|New|Maj|2012-07-17|Scoreboard full error with event/ssl              |
|53579|New|Cri|2012-07-20|httpd looping writing on a pipe and unresponsive (|
|53581|New|Blk|2012-07-21|FollowSymlinks doesn't work with DirectoryMatch an|
|53594|New|Enh|2012-07-24|ipad as webserver                                 |
|53595|New|Nor|2012-07-24|Media type qs parameters for MultiViews sent in Co|
|53612|Inf|Nor|2012-07-27|Reverse Proxy causing 500 error SSL proxy 1.0.1c O|
|53618|New|Nor|2012-07-29|proxy_worker_shared fields not maintained in threa|
|53634|New|Nor|2012-08-01|mod_cache returning HTTP 200 for nonexistent resou|
|53638|New|Nor|2012-08-02|Problem with shortcuts to bugzilla in http://httpd|
|53640|Inf|Maj|2012-08-02|make: Fatal error: Command failed for target `htpa|
|53643|New|Cri|2012-08-02|apache segfaults with mod_authn_dbd when dbd_min i|
|53646|New|Nor|2012-08-02|Invalid uniformly distributed balancing of request|
|53651|New|Nor|2012-08-03|Worker failure doesn't have same behaviour as work|
|53667|New|Enh|2012-08-07|Add an equivalent option to "JkOptions ForwardLoca|
|53669|New|Nor|2012-08-07|IndexOptions Incremental IndexOptions documentatio|
|53686|New|Enh|2012-08-09|Status "501 Not Implemented" sent very late       |
|53690|New|Nor|2012-08-09|Calls to semctl() trigger "uninitialized memory" w|
|53692|New|Nor|2012-08-10|mod_auth_form loses request body before login page|
|53693|Opn|Nor|2012-08-10|mod_fcgid performance suffers under increase in re|
|53704|New|Enh|2012-08-13|True online configuration is needed - via LDAP?   |
|53705|New|Nor|2012-08-13|Align server-status balancer display to balancer-m|
|53706|New|Enh|2012-08-13|Include a status display for mod_ldap when present|
|53722|New|Nor|2012-08-15|when -D NO_DETACH is used, no PID file should be c|
|53736|New|Nor|2012-08-17|/balancer-manager doesn't save runtime adjusted se|
|53757|New|Enh|2012-08-21|RewriteMap of type txt should allow specifying col|
|53767|New|Nor|2012-08-23|htcacheclean deletes stale "vary" header files eve|
|53772|New|Nor|2012-08-24|REDIRECT_URL not accessible in mod_proxy          |
|53787|New|Reg|2012-08-28|In forward proxy, doesn't cache disk anymore      |
|53823|New|Nor|2012-09-03|[patch] pure IPv6 only host fix (server/config.c) |
|53835|New|Cri|2012-09-06|mod_proxy_ajp truncate output when using deflate i|
|53870|New|Maj|2012-09-13|Deadlock in CRYPTO_add_lock with Apache 2.2.22 wor|
|53886|New|Nor|2012-09-18|can't start apache control in Redhat Linux 3 X64  |
|53899|New|Nor|2012-09-19|SSL_OP_ALL disables the mitigation code for CVE-20|
|53915|New|Nor|2012-09-21|Colon lost when :port is used in CacheKeyBaseURL  |
|53919|Inf|Enh|2012-09-21|DEFAULT_LOG_FORMAT is not RFC6302 compliant       |
|53923|New|Min|2012-09-23|Overriding CustomLog directive seems impossible   |
|53932|New|Nor|2012-09-25|PROPFIND doesn't support If, If-Match ETag predica|
|53947|New|Enh|2012-09-29|Feature Request, RewriteRule - ProxyPreserveHost f|
|53961|New|Nor|2012-10-04|Null sessions to the default vhost                |
|53970|New|Nor|2012-10-05|Network control directives affects internal subreq|
|53981|New|Nor|2012-10-08|move def of log_request_state from mod_log_config.|
|53988|New|Enh|2012-10-10|Missing FCGIWrapper script should not be a critica|
|53999|Opn|Nor|2012-10-13|Deadlock between procmgr_send_spawn_cmd()/proctabl|
|54030|New|Enh|2012-10-19|Support subjectAltName when (reverse-)proxying    |
|54033|New|Enh|2012-10-21|Parent languages are not ordered according to Acce|
|54072|New|Reg|2012-10-30|Syntax error front-end virtual-path too long      |
|54102|New|Enh|2012-11-05|new feature: automatic route detection            |
|54118|New|Nor|2012-11-08|Handle leak on parent httpd process when rotatelog|
|54126|New|Maj|2012-11-09|Mod_rewrite failing because of url in query string|
|54134|New|Enh|2012-11-11|new feature: ability to use multiple routes in sti|
|54136|New|Min|2012-11-11|balancer-handler shows xml not, when only xml para|
|54158|New|Nor|2012-11-16|Suggestion regarding 2.0 to 2.2 Upgrade Documentat|
|54183|Inf|Nor|2012-11-21|PROPFIND doesn't report getcontenttype property   |
|54215|New|Maj|2012-11-27|configure fails for httpd 2.2.3 with openssl 1.0.1|
|54221|Opn|Nor|2012-11-28|no ErrorLog prefix on CGI errors                  |
|54222|New|Min|2012-11-28|ServerTokens checking is not complete             |
|54223|New|Nor|2012-11-29|AH00554 error when runtime configuration Includes |
|54252|New|Nor|2012-12-05|acinclude.m4 requires -lz when linking with ssl st|
|54253|New|Nor|2012-12-05|mod_proxy_ftp doesn't handle/log partial or cancel|
|54255|New|Nor|2012-12-06|mod_deflate adjusts the headers "too late", should|
|54269|New|Maj|2012-12-09|mod_proxy_html documentation misses several things|
|54276|New|Nor|2012-12-10|rotatelogs not getting killed on graceful restart |
|54280|New|Nor|2012-12-11|mod_auth_form inline login not working with traili|
|54281|New|Nor|2012-12-11|Stick use Partial parameters from query string    |
|54289|New|Nor|2012-12-13|"ap_get_brigade" api is failing in "AP_MODE_SPECUL|
|54306|New|Enh|2012-12-15|add regexp versions of ProxyPassReverse, ProxyPass|
|54309|New|Trv|2012-12-15|clarification on the <Location> directive when use|
|54310|Opn|Nor|2012-12-15|mod_proxy_html drops meta elements with http-equiv|
|54319|New|Reg|2012-12-17|ProxyPass has no effect in <Location> if rewrite o|
|54339|New|Nor|2012-12-21|piped log entries > PIPE_BUF can be interleaved   |
|54342|New|Nor|2012-12-22|AuthnCacheSOCache can't pass args to socache provi|
|54343|New|Maj|2012-12-22|Add sanity checks for malloc() in mpm_winnt.c and |
|54358|New|Nor|2012-12-29|Status 500 when using ldap on Solaris because apr_|
|54363|New|Nor|2012-12-31|make time conversion caching functions thread-safe|
|54364|New|Nor|2012-12-31|Add ref to mod_fcgid docs                         |
|54365|New|Nor|2013-01-02|Connection closed by server during file transfer  |
|54366|New|Nor|2013-01-02|$sysconfdir/extra/httpd-dav.conf is not built base|
|54367|Opn|Maj|2013-01-02|Location header in response to PUT is not %-escape|
|54385|New|Enh|2013-01-08|SSL configuration independent from virtual hosts, |
|54401|New|Nor|2013-01-10|Suggest to make ProxyPassReverseCookieDomain accep|
|54415|New|Enh|2013-01-14|Please tell the root cause of mutex and scoreboard|
|54431|Inf|Blk|2013-01-16|Unable to start the Apache 2.4.3 windows service. |
|54498|New|Nor|2013-01-28|apache crash on any cgi request with certain http |
|54502|New|Nor|2013-01-29|Apache deadlock on epoll_ctl error (1000 process l|
|54512|Inf|Cri|2013-01-31|Apache hung                                       |
|54517|New|Nor|2013-02-01|proxy balancer: timeout or partial failure of back|
|54518|New|Nor|2013-02-01|mod_rewrite not adding Vary header                |
|54519|New|Nor|2013-02-02|httpd already running                             |
|54526|New|Nor|2013-02-05|mod_proxy_http ignores request abortion           |
|54543|New|Enh|2013-02-10|Compile regex only when need                      |
|54546|New|Nor|2013-02-11|httpd crashes on first HUP after change Listen dir|
|54549|New|Nor|2013-02-11|mod_mime AddEncoding and mod_negotiation fix_encod|
|54556|New|Enh|2013-02-13|New flag to add default rule in rule chain        |
|54560|New|Nor|2013-02-13|Potential segfault on return from ap_server_root_r|
|54563|New|Maj|2013-02-15|mod_webdav ignores quota                          |
|54578|New|Nor|2013-02-18|Bad docs or unchecked code for "LimitRequestFields|
|54587|Opn|Nor|2013-02-19|LDAPConnectionPoolTimeout does not work in all cas|
|54605|New|Enh|2013-02-24|mod_negotiation should cache the info it generates|
|54608|New|Enh|2013-02-25|Support an option to allow page caching when using|
|54622|New|Nor|2013-02-28|shared memory cleanup                             |
|54626|New|Nor|2013-03-01|mod_authnz_ldap through util_ldap.c does not suppo|
|54633|New|Nor|2013-03-04|Invalid % encoding not rejected                   |
|54637|New|Nor|2013-03-05|Digest: secret not used                           |
|54640|New|Nor|2013-03-05|Slow transaction on a balance member is holding su|
|54649|New|Nor|2013-03-06|Incorrect PIDFILE prevent httpd restart           |
|54653|New|Min|2013-03-08|Suggestion to add https example for forward proxy |
|54656|New|Maj|2013-03-09|SNI and SSLProxyCheckPeerCN based on "connection" |
|54657|New|Nor|2013-03-09|DNS lookup failure for load balancer member does n|
|54683|New|Min|2013-03-13|Ignor directive ErrorDocument with null byte      |
|54699|Opn|Enh|2013-03-15|[feature request] cli webaccess tester            |
|54701|New|Cri|2013-03-15|Apache 2.4.3 Migration Issue Not loading the pages|
|54704|New|Nor|2013-03-15|Web Services stalling on it's own                 |
|54719|New|Nor|2013-03-18|httpd should check for and eventually create pid f|
|54752|New|Nor|2013-03-25|mod_ssl should not use uninitialized memory as ran|
|54782|New|Nor|2013-04-02|Memory Corruption errors - mpm_worker mod_perl    |
|54785|New|Nor|2013-04-02|Random crash when httpd server is stopped         |
|54793|New|Nor|2013-04-03|Socket timeout handler can delete uploaded files P|
|54794|New|Reg|2013-04-03|mod_wsgi|fcgid and subversion >= 1.7 issues       |
|54795|New|Nor|2013-04-03|'apxs -g -n' should be self-referring             |
|54796|Inf|Enh|2013-04-03|CustomLog should be able to use syslog as ErrorLog|
|54804|New|Nor|2013-04-05|mod_fcgid sends a Continue 100 response automatica|
|54813|New|Nor|2013-04-08|documnt the Require args used by authz_dbm includi|
|54816|Inf|Nor|2013-04-08|AH00566: request failed: invalid characters in URI|
|54817|New|Nor|2013-04-09|if prefix and sysconfdir are the same then http.co|
|54820|Inf|Cri|2013-04-09|REwriterule stops working                         |
|54824|New|Nor|2013-04-10|Spec file is missing libuuid-devel requirement    |
|54830|New|Enh|2013-04-11|Make SSLPProxyMachineCertificateFile configurable |
|54848|New|Nor|2013-04-15|Client field too short for IPv6 addresses         |
|54856|Inf|Enh|2013-04-17|NSCreateObjectFileImageFromFile                   |
|54858|New|Nor|2013-04-17|ld duplicate                                      |
|54861|New|Blk|2013-04-18|The number of connections with mysql is more      |
|54869|Inf|Nor|2013-04-19|Non-breaking space characters cause httpd to choke|
|54875|New|Nor|2013-04-23|Conditional request predicated on another URL's ET|
|54878|New|Nor|2013-04-23|Multiple Listen directives prevent server to start|
|54905|Inf|Cri|2013-04-29|Apache2 loops in child Segfaults                  |
|54910|New|Enh|2013-04-30|Format %{Foobar}o cannot be used to log Date and S|
|54911|New|Enh|2013-04-30|Allow logging of fields set by a backend server in|
|54914|New|Nor|2013-04-30|mod_dir DirectoryIndex breaks WebDAV PROPFIND / DE|
|54915|New|Nor|2013-04-30|GET on a WebDAV-enabled collection, with Directory|
|54918|New|Enh|2013-05-02|Implement RFC 6797 HTTP Strict Transport Security |
|54919|Inf|Nor|2013-05-02|*** glibc detected *** /usr/sbin/httpd: double fre|
|54930|New|Nor|2013-05-06|Allow empty message in ErrorDocument directive    |
|54934|Inf|Cri|2013-05-07|Apache is crashing intermittently with a message "|
|54936|New|Nor|2013-05-08|Some potential bugs reported by static analysis to|
|54949|New|Nor|2013-05-10|[PATCH] mod_cache: fix uninitialized tmppath varia|
|54952|Inf|Cri|2013-05-10|[Fri May 10 17:39:01 2013] [error] proxy: CLUSTER:|
|54953|New|Nor|2013-05-11|<VirtualHost 0.0.0.0:80> matches IPv6             |
|54958|New|Nor|2013-05-13|mod_deflate + mod_mime with SSI gives mixed compre|
|54962|New|Maj|2013-05-14|Apache will set incorrect Content-Length header an|
|54965|New|Enh|2013-05-14|Allow ProxyPassMatch in Directory context         |
|54976|New|Nor|2013-05-15|ProxyPass parameter "acquire" and "ttl" ignored in|
|54986|New|Maj|2013-05-16|httpd hanging on large form submit in ap_run_handl|
|54989|New|Nor|2013-05-17|Apache Segfaults on OS X at random - how can I dia|
|54993|New|Nor|2013-05-20|Critical error: File descriptor in bad state: apr_|
|54998|Ver|Nor|2013-05-21|Apache 2.4 terminates all SSL connections using an|
|55000|New|Nor|2013-05-21|Memory usage per process doubles when Apache is co|
|55021|New|Enh|2013-05-28|Support arbitrary sql to authentication username/p|
|55022|Inf|Cri|2013-05-28|child pid 3123 exit signal Bus error (10) - Apache|
|55034|Inf|Maj|2013-05-31|Apache 2.4.4 won't open more that 32k VH file hand|
|55039|New|Enh|2013-05-31|"RequestHeader edit" can't access environment vari|
|55045|New|Nor|2013-06-01|calls to gets() in test_find.c and test_parser.c  |
|55068|New|Enh|2013-06-06|root permissions when writing to per vhosts errorl|
|55069|New|Min|2013-06-06|notice message in error_log even when LogLevel err|
|55070|Opn|Enh|2013-06-06|mod_fcgid stderr always goes to main error log    |
|55072|New|Nor|2013-06-07|ErrorLog doesn't work well when apache shutdown   |
|55093|New|Nor|2013-06-12|[PATCH] mod_fcgid 2.3.7 truncates large posts on R|
|55096|New|Nor|2013-06-12|Make not running on httpd configure Solaris       |
|55098|New|Nor|2013-06-13|does not listen to IP4 when both IP4 address and I|
|55106|New|Enh|2013-06-17|ProxyErrorOverride considers response codes >= 400|
|55117|New|Nor|2013-06-18|GracefullTimeout for worker threads               |
|55147|New|Nor|2013-06-26|"Header always" w/ cache different in 2.4         |
|55148|Inf|Nor|2013-06-26|Error during SSL Handshake with remote server     |
|55152|New|Nor|2013-06-28|graceful restart adjusts to new balancer members, |
|55156|New|Nor|2013-06-28|mod_cache not respecting s-maxage cache-control he|
|55178|New|Nor|2013-07-01|[PATCH] mod_authnz_ldap SASL authentication suppor|
|55192|New|Trv|2013-07-03|htaccess error messages missing request context   |
|55193|New|Min|2013-07-03|ErrorLogFormat is ignored by some modules         |
|55226|New|Enh|2013-07-09|Request for "domain cluster" feature for mod_proxy|
|55234|New|Maj|2013-07-10|Working of attribute "protocol" attribute "protoco|
|55276|Inf|Enh|2013-07-17|Add REST API for load balancer for dynamic registr|
|55278|New|Nor|2013-07-18|mod_session's cookie may be empty, is repeated twi|
|55284|New|Nor|2013-07-20|repeatable segv                                   |
|55286|New|Nor|2013-07-21|Floating point exception (8) in mod_auth_digest   |
|55293|New|Nor|2013-07-22|Incorrect default MIME type for .woff fonts       |
|55306|New|Nor|2013-07-25|Error when copying svn repository, which contains |
|55323|New|Nor|2013-07-29|Double unescaped uri in sub request handler       |
|55327|New|Nor|2013-07-30|Segmentation fault when stopping Apache 2.4.6 norm|
|55340|New|Maj|2013-08-01|Listen for valid, unconfigured IP address passes c|
|55344|New|Nor|2013-08-02|missing ap_hook_monitor on windows                |
|55346|New|Nor|2013-08-02|When on filled quota filesystem, mod_fcgid init in|
|55348|New|Nor|2013-08-02|%h is not changed in logging, only %a             |
|55351|New|Enh|2013-08-04|allow ProxyPassReverseCookieDomain to automaticall|
|55362|New|Nor|2013-08-05|Apache httpd sends "400 Bad Request" to client due|
|55379|New|Min|2013-08-07|htdigest -c doesn't behave as described anymore   |
|55394|New|Nor|2013-08-09|apache 2.4 randomy crashes with signal 6          |
|55401|New|Enh|2013-08-11|document that force-proxy-request-1.0 implies prox|
|55415|New|Maj|2013-08-14|Proxy loop caused by ProxyErrorOverride and ErrorD|
|55431|New|Nor|2013-08-16|mod_negotation does not force the mime type listed|
|55433|New|Nor|2013-08-16|mod_proxy ignores final status code for aborted re|
|55443|Inf|Maj|2013-08-17|never gives 300 multiple choices                  |
|55445|New|Maj|2013-08-18|mod_socache_memcache ignores expiry, creating eter|
|55447|New|Enh|2013-08-18|make type-maps usable again, by making them access|
|55448|New|Nor|2013-08-19|segfault in set_max_workers at event.c:3194 on SIG|
|55449|New|Maj|2013-08-19|AH01185: worker slotmem_create failed --> slotmem |
|55452|New|Maj|2013-08-19|Redirect                                          |
|55458|New|Enh|2013-08-20|allow to configure what mod_ssl responds when one |
|55460|New|Enh|2013-08-21|allow service names to be used in the Listen direc|
|55467|New|Nor|2013-08-21|Support for OpenSSL custom TLS extensions and supp|
|55523|New|Trv|2013-09-04|auth_groupfile error log on access even though suc|
|55535|Inf|Nor|2013-09-08|incorrect check state parametr                    |
|55540|New|Cri|2013-09-09|mod_proxy gzip chunked issue (sample site provided|
|55549|New|Min|2013-09-11|AuthLDAPSubGroupAttribute doesn't do anything     |
|55550|New|Nor|2013-09-11|AuthLDAPSubGroupClass checking is very inefficient|
|55556|New|Nor|2013-09-13|apachebench (ab) doesn't use so_reuseaddr         |
|55557|New|Nor|2013-09-14|Some cppcheck reports                             |
|55573|New|Enh|2013-09-19|FileETag needs MTimeSeconds, MTime with granularit|
|55581|New|Enh|2013-09-22|Support concurrent connections to same FastCGI pro|
|55590|Inf|Maj|2013-09-24|second commit is failing if space is in file name |
|55596|New|Enh|2013-09-25|Add date format used by Expires header            |
|55607|New|Enh|2013-09-28|Re-set HOME environment variable to directory from|
|55615|New|Nor|2013-09-30|Connections are starved and not balanced when conc|
|55619|New|Nor|2013-10-02|Apache httpd reported 500 internal error when uplo|
|55627|New|Min|2013-10-04|Remove unnecessary APLOGNO() for trace logging per|
|55636|Inf|Cri|2013-10-07|long lost child came home - Apache is not respondi|
|55646|Inf|Nor|2013-10-10|non-2xx responses are not considered errors       |
|55654|New|Nor|2013-10-15|Extract variables from configuration without start|
|55670|New|Min|2013-10-18|Startup may fail silently at post_config          |
|55673|New|Nor|2013-10-18|httpd fails to start with SSLProxyMachineCertifica|
|55680|New|Enh|2013-10-20|online manual directory option doesn't exist      |
|55698|New|Maj|2013-10-24|Apache 2.2 + mod_fcgid 2.3.7 (CentOS 6.4) graceful|
|55700|New|Enh|2013-10-24|add something like RewriteOptions InheritDown     |
|55707|New|Nor|2013-10-25|SSLProtocol directive seem to be ignored over diff|
|55708|New|Nor|2013-10-25|Access violation in msvcrt.dll when calling getenv|
|55711|New|Min|2013-10-28|--enable-foo doesn't enable foo                   |
|55712|New|Nor|2013-10-28|Relative <!--#include virtual="../file.shtml"--> g|
|55720|New|Enh|2013-10-29|separate LDAP Bind timeout from LDAPTimeout       |
|55738|New|Nor|2013-11-03|PVS-Studio: few issues                            |
|55763|New|Nor|2013-11-09|raise roots soft RLIMIT_NPROC on linux for high ma|
|55774|New|Nor|2013-11-13|ab: optionally accept tls client certificate      |
|55781|New|Nor|2013-11-15|ajp_read_header: ajp_ilink_receive failed; 120006)|
|55786|New|Maj|2013-11-16|SSLVerifyClient and OptRenegotiate result in a 403|
|55787|New|Maj|2013-11-16|Chroot fails with "Cannot chroot when not started |
|55790|New|Maj|2013-11-17|mod_fcgid lockfile hardcoded to be in /tmp        |
|55793|New|Enh|2013-11-18|DTrace/SystemTap support                          |
|55808|New|Nor|2013-11-21|File integrity verification using MD5 and SHA1    |
|55819|Inf|Nor|2013-11-27|Closing connection behaviour                      |
|55828|New|Cri|2013-11-28|Httpd not start if use ProxyPass balancer://      |
|55834|New|Maj|2013-12-02|Apache does not honor the openssl library path giv|
|55838|New|Nor|2013-12-03|PHP files are being executed instead of downloaded|
|55841|New|Nor|2013-12-04|Misleading news items on bugfix releases ("This ve|
|55856|New|Nor|2013-12-08|YYEMPTY (-2) used as index into yytname (const arr|
|55866|New|Nor|2013-12-11|When ProxyPreserveHost is on, SSL expects the wron|
|55878|New|Nor|2013-12-12|mod_fcgid kills spawned processes too early       |
|55881|New|Nor|2013-12-13|segmentation fault at proxy_util.c:1546           |
|55883|New|Enh|2013-12-14|string callers of ap_expr should be able to transf|
|55887|New|Maj|2013-12-16|In Windows apache, when user access to /con, apach|
|55897|New|Nor|2013-12-17|[PATCH]patch with SO_REUSEPORT support            |
|55898|New|Enh|2013-12-17|[RFE] listen on unix socket?                      |
|55914|New|Reg|2013-12-20|child exit segmentation fault after apache gracefu|
|55919|New|Nor|2013-12-22|EPREFIX and dynamic modules                       |
|55942|New|Nor|2014-01-01|400 - Bad Request on POST (Windows Server 2012 Hyp|
|55952|New|Nor|2014-01-05|ab: SSL keep-alive fails with apr_pollset_poll: Th|
|55962|New|Enh|2014-01-06|mod_remoteip should not allow an external proxy to|
|55963|New|Nor|2014-01-07|Add application/ld+json to mime.types             |
|55981|Opn|Nor|2014-01-09|mod_mbox hang on some e-mails on user@openoffice.a|
|55985|Opn|Nor|2014-01-10|apache does not reopen logs when multiple graceful|
|55989|Opn|Enh|2014-01-11|write to error log upon RewriteRule [F]orbidden   |
|55991|New|Nor|2014-01-12|mod_charset_lite doesn't bail out on non-identity |
|56009|Inf|Cri|2014-01-14|Memory leak in httpd 2.4.3 over time with persista|
|56014|New|Nor|2014-01-15|MOd rewrite CO Cookie method the lifetime flag not|
|56028|New|Enh|2014-01-17|Add http/1.0, http/1.1 NPN advertisement to enable|
|56034|New|Nor|2014-01-20|CPU consumption due to circular linked list in ap_|
|56040|New|Enh|2014-01-21|should be able to remove Max-Age cookie parameter |
|56041|New|Enh|2014-01-21|should be able to disable session expiry increment|
|56052|New|Nor|2014-01-22|ap_session_load called multiple times for expired |
|56055|New|Nor|2014-01-23|Route is not extracted properly when a session coo|
|56064|New|Enh|2014-01-25|Optimize PNGs                                     |
|56067|New|Nor|2014-01-27|FallbackResource doesn't work if directory exists |
|56081|New|Maj|2014-01-28|Apache 2.2.26 SIGSEGVs when POST'ing data         |
|56091|Inf|Nor|2014-01-30|SSL handshake error when httpd compiled on Oracle |
|56098|New|Nor|2014-02-01|duplicate cookie                                  |
|56101|New|Cri|2014-02-03|Apache 2.4.6 ceases processing requests (scoreboar|
|56102|New|Nor|2014-02-03|SSL_CLIENT_S_DN_x509_0 is undefined in the environ|
|56109|New|Nor|2014-02-05|Cannot increase the read limit                    |
|56113|New|Nor|2014-02-06|dist commit messages missing from mail-archives di|
|56131|New|Nor|2014-02-12|ProxyPassReverse / zealously replaces Location hea|
|56135|New|Nor|2014-02-13|Add DC to list of x509 components                 |
|56152|New|Nor|2014-02-18|ProxyBlock does not accept network addresses      |
|56176|New|Nor|2014-02-21|mod_substitute truncates the response body if the |
|56188|New|Nor|2014-02-25|mod_proxy_fcgi does not send FCGI_ABORT_REQUEST on|
|56209|New|Nor|2014-03-03|Uninitialised variables in os/win32/ap_regkey.c   |
|56226|Ver|Nor|2014-03-06|per VirtualHost KeepAliveTimeout is not recognized|
|56229|New|Enh|2014-03-06|ocsp ProxyHost and ProxyPort support              |
|56230|New|Nor|2014-03-07|mod_access_compat can log a bogus client denied me|
|56235|New|Nor|2014-03-07|quotes should be optional around expr             |
|56247|New|Cri|2014-03-12|semaphore creation for proxypass                  |
|56250|New|Nor|2014-03-12|sbindir in config.layout for Apache has bin instea|
|56251|New|Nor|2014-03-12|Increase maximum length of FcgidInitialEnv string |
|56252|New|Enh|2014-03-12|make install as privileged user creates files not |
|56262|New|Nor|2014-03-14|ab does not work with extremely long cookies      |
|56264|New|Trv|2014-03-14|Confusing error with .htaccess rewrite to proxy wh|
|56270|New|Enh|2014-03-15|--with-ssl=/foo w/o pkgconfig needs help on AIX 64|
|56288|New|Enh|2014-03-19|rewrite URLs in style attributes                  |
|56289|New|Nor|2014-03-19|Buffer overflow in mod_proxy_html's string replace|
|56308|New|Nor|2014-03-24|1 second delay in handle request kills performance|
|56312|New|Nor|2014-03-25|Can't configure different balancing workers that c|
|56314|New|Nor|2014-03-25|exiting from MPM-worker child caused assert in apr|
|56326|New|Nor|2014-03-27|cache_quick_handler does not serve responses with |
|56331|New|Nor|2014-03-29|windows 'access denied' during revalidaton of reso|
|56333|New|Enh|2014-03-31|API to resume a SUSPENDED connection              |
|56362|New|Maj|2014-04-08|ldaps only works with port 636. Non-standard port |
|56379|New|Nor|2014-04-09|Number of columns in the results returned from pgs|
|56395|New|Enh|2014-04-11|Allow SERVER_ADDR environment variable to be optio|
|56404|New|Nor|2014-04-12|endless loop  when connect to a website(https)  wh|
|56413|New|Blk|2014-04-15|can not restart httpd on centos 5.10 64bit        |
|56422|New|Nor|2014-04-17|authnz_ldap with other forms of authn can fail req|
|56457|New|Nor|2014-04-25|mod_proxy_html.c: 2 * cut'n'paste errors          |
|56473|New|Nor|2014-04-30|ETags don't change when headers do                |
|56475|New|Enh|2014-04-30|Allow TLS record size to be configured            |
|56483|New|Enh|2014-05-02|add disableKeepAlivePercentage similar to tomcat h|
|56493|New|Min|2014-05-06|mod_expires should not set expires in future for s|
|56495|New|Nor|2014-05-06|Application behind mod_proxy does not get SessionH|
|56500|Opn|Enh|2014-05-07|vhosts priority order with wildcard               |
|56504|New|Nor|2014-05-08|cannot build static support binaries              |
|56508|New|Nor|2014-05-09|Requiring SNI - SSLStrictSNIVHostCheck semantics  |
|56517|New|Enh|2014-05-12|Virtualhosts cannot inherit parent CustomLog      |
|56528|New|Enh|2014-05-15|"bad flags delimiter" - improve helpfulness       |
|56541|New|Nor|2014-05-18|Proxy 502's on large file post requests           |
|56559|New|Nor|2014-05-25|multiple unix sockets in one virtualhost fails    |
|56569|New|Nor|2014-05-27|Null CRC in gzip footer with mod_cgid and ErrorDoc|
|56587|New|Nor|2014-06-03|Many VirtualHost's with SSLEngine On              |
|56590|New|Enh|2014-06-04|(REST-) API for configuring balancer manager remot|
|56594|Inf|Nor|2014-06-05|mod_authn_dbd, mod_dbd and mod_ssl                |
|56598|New|Nor|2014-06-06|Content-Length header should be always interpreted|
|56621|New|Nor|2014-06-13|Rotatelogs.exe first start                        |
|56622|New|Nor|2014-06-13|mod_reqtimeout incorrectly applies timeouts to CON|
|56626|New|Nor|2014-06-15|Add info about rotatelogs to log rotation document|
|56633|New|Nor|2014-06-16|mod_auth_basic breaks mod_autoindex               |
|56645|New|Maj|2014-06-19|socket callback with timeout callback causes infin|
|56664|New|Nor|2014-06-24|Proxy retry timeout does not cope with system time|
|56687|New|Nor|2014-07-01|ProxySourceAddress failed to bind socket to local |
|56697|New|Maj|2014-07-04|status page still shown while blocked             |
|56718|New|Nor|2014-07-14|Cleanup request Host headers when absolute URI are|
|56719|New|Nor|2014-07-14|parallel requests get served with delays          |
|56738|New|Enh|2014-07-17|Ability to extract route from cookie with regexp  |
|56740|New|Nor|2014-07-18|suspended_count not maintained properly with wstun|
|56750|New|Enh|2014-07-20|SuexecUserGroup replacement                       |
|56751|New|Maj|2014-07-20|Fails to properly mitigate Slow Post DoS attack   |
|56753|New|Nor|2014-07-21|mod_lua.so: symbol luaL_openlib: referenced symbol|
|56778|New|Nor|2014-07-28|while running make command i got this error       |
|56794|New|Nor|2014-07-31|Added AuthDBDFullAuthQuery option                 |
|56795|Inf|Nor|2014-07-31|Apache 2.4.10 Program received signal SIGPIPE, Bro|
|56818|Inf|Nor|2014-08-05|SetEnvIf may set invalid string length on empty st|
|56843|New|Enh|2014-08-12|Support different OCSP stapling max ages          |
|56868|New|Nor|2014-08-18|relative LuaRoot broken                           |
|56879|New|Nor|2014-08-22|Information disclosure                            |
|56889|New|Nor|2014-08-26|Close state never dies                            |
|56898|New|Nor|2014-08-28|Headers in err_headers_out are not returned when a|
|56918|Opn|Blk|2014-09-06|error: 'ap_copy_scoreboard_worker' undeclared here|
|56926|New|Nor|2014-09-08|Filename causes AH02599 slotmem issue             |
|56933|New|Min|2014-09-09|not sure it's an appache bug : some browser want t|
|56942|New|Reg|2014-09-10|Unable to implement TRANSFER-CHUNKED:ENCODING with|
|56943|New|Nor|2014-09-10|mod_proxy_connect - AH02447: err/hup on backconn  |
|56977|New|Maj|2014-09-12|segfaults when using mod_mem_cache + mod_disk_cach|
|56986|New|Blk|2014-09-17|chunked Transfer-Encoding forbidden: /test/test.dl|
|57014|New|Cri|2014-09-24|Incorrect test for CC_FOR_BUILD prevents build (on|
|57023|New|Nor|2014-09-26|Socache shmcb don't cache file bigger than 11k    |
|57028|New|Enh|2014-09-27|mod_spdy - support Apache 2.4                     |
|57044|New|Nor|2014-09-29|[PatchAvailable] Use base64url in mod_unique_id ('|
|57045|New|Nor|2014-09-30|dumpio output strings are missing                 |
|57046|New|Enh|2014-09-30|Add additional parameter to enable check URL befor|
|57056|New|Maj|2014-10-03|Rewrite port is taken into hostname               |
|57067|New|Nor|2014-10-08|A proxy worker both standalone and balancer member|
|57069|New|Nor|2014-10-08|apache ssl timeout during chunked request in rever|
|57073|New|Cri|2014-10-09|Intermittent Connection Issues using default httpd|
|57085|New|Enh|2014-10-14|Implement Proxy Protocol in httpd                 |
|57087|New|Nor|2014-10-14|mod_proxy_fcgi doesn't send cgi CONTENT_LENGTH var|
|57100|Ver|Nor|2014-10-16|"SSLProtocol ALL" is ignored for virtual hosts    |
|57101|New|Enh|2014-10-16|[PATCH] Better error reporting when child spawn fa|
|57109|New|Nor|2014-10-17|GPG verification examples are wrong               |
|57119|Opn|Enh|2014-10-20|Suppress address reuse / DNS cache in mod_proxy   |
|57120|New|Nor|2014-10-21|Disable SSLv3 by default (POODLE)                 |
|57121|New|Nor|2014-10-21|ocsp stapling should not pass temporary server out|
|57131|New|Nor|2014-10-22|OCSP Stapling scalability concern                 |
|57159|New|Min|2014-10-28|mod_ssl OCSP Stapling directives don't support per|
|57160|New|Nor|2014-10-29|httxt2dbm doesn't generate files on NAS           |
|57174|New|Nor|2014-10-31|Update windows visual studio build                |
|57210|New|Nor|2014-11-14|LuaHookMapToStorage not firing in per-directory co|
|57211|New|Enh|2014-11-14|Config-time options                               |
|57212|Opn|Nor|2014-11-14|Headers returned by scripts are limited to 8190 by|
|57218|New|Nor|2014-11-15|[Feature Request] Apache Bench (AB) to output a cs|
|57219|New|Nor|2014-11-15|ApacheBench quits unexpectedly with high concurren|
|57220|New|Nor|2014-11-15|[Feature Request] Add option to ApacheBench to giv|
|57228|New|Nor|2014-11-17|glibc detected *** httpd: double free or corruptio|
|57229|New|Maj|2014-11-17|mod_sed dies on long lines                        |
|57286|New|Nor|2014-11-29|Symbolic links are not honoured                   |
|57298|New|Min|2014-12-02|RewriteBase inside FilesMatch behaves oddly       |
|57299|New|Enh|2014-12-02|mod_session_dbd should not make a database call pe|
|57300|New|Enh|2014-12-02|mod_session_dbd should not save the session at eac|
|57301|New|Enh|2014-12-02|Add SessionMaxAgeAbsolute Directive               |
|57304|Inf|Nor|2014-12-03|MySQL DBD Authentication Incompatible with SSL    |
|57311|New|Nor|2014-12-04|BalancerMember enclosed by <If> gives syntax error|
|57313|New|Nor|2014-12-05|The DefaultType directive has been removed        |
|57327|New|Nor|2014-12-08|mod_ssl seg fault on exit                         |
|57334|Ver|Maj|2014-12-09|Segmentation fault in SSL_renegotiate at ssl_lib.c|
|57337|New|Nor|2014-12-10|Content negotiation fails with conditional Redirec|
|57339|New|Enh|2014-12-10|ErrorLogFormat doesn't allow logging in Internet d|
|57360|New|Nor|2014-12-17|Fail gracefully on certificate/key mismatch       |
|57372|New|Nor|2014-12-19|httpd will lookup every home directory while start|
|57374|Ver|Nor|2014-12-19|Event MPM: Wrong KeepAliveTimeout when system cloc|
|57375|New|Enh|2014-12-19|Support LibreSSL as an alternative toolkit for mod|
|57379|New|Nor|2014-12-20|[patch] Makefile.in  with mpm-shared, cgi and cgid|
|57383|New|Cri|2014-12-21|Error retrieving Report: An Existing connection wa|
|57386|New|Blk|2014-12-22|html5 lost some comments                          |
|57398|New|Maj|2014-12-26|AH01075: Error dispatching request to : (passing b|
|57399|New|Nor|2014-12-28|Many unnecessary CPU wakeups per second           |
|57406|New|Nor|2014-12-31|cgi-bin script is not executing                   |
|57412|New|Maj|2015-01-04|rewrite rules causes duplicate requests           |
|57416|New|Nor|2015-01-06|htcacheclean thinks the cache is smaller than it a|
|57424|Opn|Nor|2015-01-07|mod_rewrite not using ap_context_document_root    |
|57436|New|Enh|2015-01-12|Option to strip extra data after websocket request|
|57439|New|Enh|2015-01-13|Allow to change body timeout per location         |
|57448|New|Nor|2015-01-16|SSI <!--#set --> cannot capture backreferences fro|
|57453|New|Maj|2015-01-17|403 error when virtualhost configured with non-exi|
|57471|New|Nor|2015-01-20|Apache 2.4.10 Compilation fails when compiling aga|
|57477|New|Nor|2015-01-21|mod_auth_digest AH00052: child pid $pid exit signa|
|57483|New|Nor|2015-01-22|Omit "Keep-Alive" header on 1.1 connections       |
|57492|New|Nor|2015-01-24|incomplete chunked-transfered request body is not |
|57506|New|Nor|2015-01-27|<If> directive doesn't work within a <Location> se|
|57510|New|Enh|2015-01-28|Engine keyform support for private keys           |
|57511|New|Maj|2015-01-28|Opening plain TCP Socket on SSL port causes denial|
|57515|New|Nor|2015-01-30|Define/Undefine don't work reasonably outside of g|
|57519|New|Nor|2015-02-01|change SSLv2 to SSLv3 or remove SSLv2 support allt|
|57526|Opn|Maj|2015-02-03|Apache 2.2.29_openssl-1.0.1k_x86_64 Error creating|
|57529|Opn|Nor|2015-02-03|htcacheclean doesn't show the cached URL with '-a'|
|57585|New|Nor|2015-02-13|httpd fails to start if there is an IncludeOptiona|
|57590|New|Nor|2015-02-18|loading mod_proxy_http makes rewriteRule's [proxy]|
|57591|New|Nor|2015-02-18|DirectoryIndex directive cannot be overwritten    |
|57616|New|Maj|2015-02-23|AB - DNS roundrobin support                       |
|57624|New|Enh|2015-02-23|Provide support for http/2.0                      |
|57631|New|Nor|2015-02-24|Useless test in acinclude.m4                      |
|57632|New|Nor|2015-02-24|mod_systemd passes invalid default to APACHE_MODUL|
|57635|New|Nor|2015-02-25|meta-refresh is not rewritten by mod_proxy_html   |
|57636|New|Nor|2015-02-25|URLs without protocol are not rewriten by mod_prox|
|57641|New|Maj|2015-02-27|mod_substitute: Invalid merge order               |
|57646|New|Enh|2015-02-27|SSLEngine inside If directive                     |
|57660|New|Trv|2015-03-04|AB - free memory allocated by xmalloc and xcalloc |
|57680|New|Nor|2015-03-09|SSLSessionCacheTimeout has no effect              |
|57685|New|Nor|2015-03-10|Requests are denied while the mod_cgid daemon star|
|57691|New|Nor|2015-03-12|mod_proxy/proxy_util confuses UDS scheme with HTTP|
|57695|New|Nor|2015-03-12|[core:warn] [pid 1120] (101)Network is unreachable|
|57710|New|Nor|2015-03-15|Wildcard matching for logging headers             |
|57725|New|Enh|2015-03-18|ApacheBench: include http status code in gnuplot o|
|57742|New|Nor|2015-03-23|"reliable piped logging" doesn't work for ErrorLog|
|57745|New|Nor|2015-03-23|httpd exits 1 with no stderr when proxy_balancer_m|
|57746|New|Nor|2015-03-23|Apache hangs on startup using MPM event           |
|57751|Inf|Maj|2015-03-24|Problems with proxy reverse to websockets         |
|57756|New|Enh|2015-03-25|Config options for handling of pipelined request  |
|57757|New|Cri|2015-03-25|extern apr_xlate_t *ap_locale_to_ascii variable gi|
|57771|New|Nor|2015-03-27|cleanup_script uses incorrect connection ID       |
|57774|Inf|Nor|2015-03-28|httpd.conf <IfModule proxy_html_module> content er|
|57777|New|Nor|2015-03-30|Security concerns with documentation of AddHandler|
|57781|New|Nor|2015-03-31|disable reconnection after connection error       |
|57784|New|Enh|2015-03-31|[RFE] Multiple ErrorLog directives                |
|57785|New|Nor|2015-04-01|REDIRECT_URL is not suitable for use in server-gen|
|57795|Opn|Maj|2015-04-07|mod_proxy_wstunnel sometimes does not connect and |
|57800|New|Nor|2015-04-09|High CPU usage in ap_core_output_filter           |
|57807|New|Enh|2015-04-13|Build-configurable environment variable length    |
|57810|New|Nor|2015-04-13|Should apache ignore difference in trailing dot be|
|57813|New|Nor|2015-04-14|Rewrite 'pre-compressed content' recipe using 2.4 |
|57814|New|Nor|2015-04-14|Teach mod_deflate how to serve pre-comressed conte|
|57819|New|Nor|2015-04-15|Need a conventions document                       |
|57832|New|Enh|2015-04-19|Reduction of response splitting attacks consequenc|
|57853|Inf|Nor|2015-04-24|mod_proxy_http sends request with header 'Expect: |
|57868|New|Nor|2015-04-28|SIGSEV when lacking correct DB access permissions |
|57876|New|Reg|2015-04-30|logresolve.exe on any Windows immediately crashes |
|57878|New|Nor|2015-04-30|Using UTF-8 for all languages, and avoiding html-e|
|57895|New|Min|2015-05-05|missing m4a mimeType in mime.types                |
|57911|New|Min|2015-05-09|Rewrite documentation unclear or wrong about what |
|57927|New|Maj|2015-05-13|Segmentation Fault at proxy_util.c:994            |
|57933|New|Min|2015-05-18|apr_port_t returns constant                       |
|57941|New|Nor|2015-05-21|config.status: line 331: syntax error near unexpec|
|57949|New|Enh|2015-05-25|new mod_ssl environment variable SSL_{CLIENT|SERVE|
|57950|New|Nor|2015-05-26|[patch] buildconf change hint in build to newer ap|
|57960|New|Nor|2015-05-27|PUT truncates response body; status_line appears t|
|57976|New|Cri|2015-05-30|Server threads stale when sending 500 status with |
|57978|New|Nor|2015-06-01|unix:/ works with any number of / slashes  except |
|57979|New|Nor|2015-06-01|can not turn change log level for mod_filter      |
|57996|New|Nor|2015-06-03|Symlinks erroneously not followed when target inod|
|57997|New|Nor|2015-06-03|Threads started during child_init don't block sign|
|57999|New|Nor|2015-06-04|ap_getparents() may remove start slash of uri     |
|58001|New|Enh|2015-06-04|Implement Forwarded header (RFC 7239) to mod_proxy|
|58007|New|Nor|2015-06-06|400 Bad Request with fully qualified domain name o|
|58020|New|Nor|2015-06-11|When user authenticates with certificate which has|
|58024|New|Nor|2015-06-11|(Graceful) Restart does not work after adding a Ba|
|58025|New|Enh|2015-06-11|mod_authz_dbd : new dbd-query and AuthzDBDQuery op|
|58026|New|Nor|2015-06-11|return 421 status code when SNI and Host: header d|
|58044|New|Cri|2015-06-16|Error sintax 'lua_dump'                           |
|58050|New|Nor|2015-06-17|ErrorDocument does not always work                |
|58073|New|Nor|2015-06-24|Extremely long time for graceful restart          |
|58089|New|Nor|2015-07-01|mod_authz_host uses proxy IP even when mod_remotei|
|58091|New|Nor|2015-07-02|mod_socache_memcache does not reuse memcache conne|
|58097|New|Enh|2015-07-03|[feat] Preserve original connecting IP            |
|58101|New|Nor|2015-07-05|DeflateCompressionLevel inside vhost resets logfor|
|58107|New|Blk|2015-07-06|Httpd crashes on startup every time, dump file att|
|58109|New|Nor|2015-07-06|Apache on windows cannot handle the hash symbol (#|
|58118|Inf|Min|2015-07-09|mod_proxy_fcgi logs 503 when user aborts connectio|
|58120|New|Nor|2015-07-10|ProxyPassInherit does not work as expect          |
|58121|New|Nor|2015-07-10|ProxyHTMLMeta seems to ignore all <meta http-equiv|
|58126|New|Nor|2015-07-11|[patch] acinclude.m4 fix "warning: underquoted def|
|58129|New|Nor|2015-07-12|man pages are not generated correctly             |
|58132|New|Nor|2015-07-12|non-standard, non-traditional man page layout make|
|58135|New|Nor|2015-07-14|mod_cache sends client "if-Modified-Since" to back|
|58141|New|Nor|2015-07-15|Apache Service doesn't start when rotatlogs.exe pa|
|58142|New|Nor|2015-07-15|authz_core ignores loglevel                       |
|58158|New|Nor|2015-07-21|Not honoring HTTP spec with regard to Accept-Encod|
|58168|New|Enh|2015-07-21|Would like full request evaluation support in Rewr|
|58171|New|Nor|2015-07-22|ap_session_save saves the wrong session after a de|
|58177|New|Enh|2015-07-24|Mod Proxy forward trailers in http chunked request|
|58180|New|Enh|2015-07-24|ErrorDocument original URL in subsequent <Location|
|58181|New|Enh|2015-07-25|mod_expire should allow "minus" keyword same like |
|58188|New|Nor|2015-07-28|http2 mod_lua: support build with lua 5.2+        |
|58197|New|Nor|2015-07-31|apr-util-1.5.4 build against openldap - "could not|
|58202|New|Enh|2015-07-31|apxs -q += HTTPD_MAJOR , HTTPD_MMN variables      |
|58213|New|Nor|2015-08-05|Can't use SUITEB128 etc. OpenSSL cipher strings wi|
|58225|New|Reg|2015-08-08|intermitant segfault 11 in session_identity_encode|
|58226|New|Nor|2015-08-08|XSS in Error Page                                 |
|58231|New|Nor|2015-08-11|RewriteCond can add "Host" to the Vary-Header     |
|58235|New|Enh|2015-08-12|Ability to allow from domain but with using forwar|
|58243|New|Nor|2015-08-14|rotatelogs goes infinite at startup               |
|58248|New|Nor|2015-08-17|Error 404 in use some characters of utf8 in url   |
|58257|New|Nor|2015-08-18|require ldap-group does not work if account-fullna|
|58267|New|Min|2015-08-21|" Error ap_proxy_set_scoreboard_lb(xxx) failed in |
|58270|Unc|Cri|2015-08-22|web hosting                                       |
+-----+---+---+----------+--------------------------------------------------+
| Total 1532 bugs                                                           |
+---------------------------------------------------------------------------+

From dev-return-83510-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 03:53:41 2015
Return-Path: <dev-return-83510-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A153018FD6
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 03:53:41 +0000 (UTC)
Received: (qmail 94880 invoked by uid 500); 24 Aug 2015 03:53:40 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 94719 invoked by uid 500); 24 Aug 2015 03:53:40 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 94709 invoked by uid 99); 24 Aug 2015 03:53:40 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 03:53:40 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 5D660182348
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 03:53:40 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0
X-Spam-Level:
X-Spam-Status: No, score=0 tagged_above=-999 required=6.31 tests=[none]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id RInZCaxcTJ1C for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 03:53:36 +0000 (UTC)
Received: from node176.itex.at (mail.123x.at [194.242.35.176])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id A093621115
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 03:53:35 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
	by node176.itex.at (Postfix) with ESMTP id 2E7C022AC6
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 05:53:27 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at node176.itex.at
Received: from node176.itex.at ([127.0.0.1])
	by localhost (node176.itex.at [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id yEbw1mwloWgQ for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 05:53:26 +0200 (CEST)
Received: from [10.202.65.180] (CPE-121-217-117-67.lnse2.cht.bigpond.net.au [121.217.117.67])
	(Authenticated sender: normw@gknw.net)
	by node176.itex.at (Postfix) with ESMTPSA id F26FD22AC3
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 05:53:25 +0200 (CEST)
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
From: NormW <normw@gknw.net>
Subject: modules\http2 - H2Engine directive?
Message-ID: <55DA9528.7070709@gknw.net>
Date: Mon, 24 Aug 2015 13:53:12 +1000
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

Hi,
The 'H2Engine on' directive is identified in the Readme.h2 as the most 
important, but except for a number of 'Directive' lists and a h2.conf 
template file. this appears to be unknown within the http2 C source or 
the 'manual'(en) reference for mod_h2. Is this directive something of 
the past or future perhaps?
Regards,
Norm

From dev-return-83511-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 06:18:05 2015
Return-Path: <dev-return-83511-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8DC691836F
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 06:18:05 +0000 (UTC)
Received: (qmail 48600 invoked by uid 500); 24 Aug 2015 06:18:05 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 48514 invoked by uid 500); 24 Aug 2015 06:18:05 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 48504 invoked by uid 99); 24 Aug 2015 06:18:05 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 06:18:05 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 849AAED409
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 06:18:04 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -1.212
X-Spam-Level:
X-Spam-Status: No, score=-1.212 tagged_above=-999 required=6.31
	tests=[HEADER_FROM_DIFFERENT_DOMAINS=0.017, RP_MATCHES_RCVD=-1.227,
	SPF_HELO_PASS=-0.001, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id wZ3a84umd0rd for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 06:18:03 +0000 (UTC)
Received: from plane.gmane.org (plane.gmane.org [80.91.229.3])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 8D18A42B59
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 06:18:03 +0000 (UTC)
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <apache-dev@m.gmane.org>)
	id 1ZTl4t-00027B-PJ
	for dev@httpd.apache.org; Mon, 24 Aug 2015 08:17:55 +0200
Received: from aorleans-552-1-124-174.w92-140.abo.wanadoo.fr ([92.140.251.174])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Mon, 24 Aug 2015 08:17:55 +0200
Received: from christophe.jaillet by aorleans-552-1-124-174.w92-140.abo.wanadoo.fr with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Mon, 24 Aug 2015 08:17:55 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: dev@httpd.apache.org
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Subject: Re: svn commit: r1696105 - in /httpd/httpd/trunk: CHANGES
 docs/manual/mod/mod_socache_memcache.xml modules/cache/mod_socache_memcache.c
Date: Mon, 24 Aug 2015 08:17:49 +0200
Lines: 63
Message-ID: <mrecue$bou$1@ger.gmane.org>
References: <20150815220509.75D1BAC0456@hades.apache.org>
 <CAKQ1sVO_jvv1NaE8jJ2boadFa8RBre3P6bdz+V3M9MOV=b2Rrw@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: aorleans-552-1-124-174.w92-140.abo.wanadoo.fr
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
In-Reply-To: <CAKQ1sVO_jvv1NaE8jJ2boadFa8RBre3P6bdz+V3M9MOV=b2Rrw@mail.gmail.com>
X-Antivirus: avast! (VPS 150823-1, 23/08/2015), Outbound message
X-Antivirus-Status: Clean

Hi, Yann and thanks for the review.

Le 21/08/2015 15:47, Yann Ylavic a écrit :
> On Sun, Aug 16, 2015 at 12:05 AM,  <jailletc36@apache.org> wrote:
>> Author: jailletc36
>> Date: Sat Aug 15 22:05:08 2015
>> New Revision: 1696105
>>
>> URL: http://svn.apache.org/r1696105
> []
>> Modified: httpd/httpd/trunk/modules/cache/mod_socache_memcache.c
>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/cache/mod_socache_memcache.c?rev=1696105&r1=1696104&r2=1696105&view=diff
>> ==============================================================================
>> --- httpd/httpd/trunk/modules/cache/mod_socache_memcache.c (original)
>> +++ httpd/httpd/trunk/modules/cache/mod_socache_memcache.c Sat Aug 15 22:05:08 2015
> []
>> @@ -310,6 +319,35 @@ static const ap_socache_provider_t socac
> []
>> +static const char *socache_mc_set_ttl(cmd_parms *cmd, void *dummy,
>> +                                      const char *arg)
>> +{
>> +    socache_mc_svr_cfg *sconf = ap_get_module_config(cmd->server->module_config,
>> +                                                     &socache_memcache_module);
>> +    int i;
>> +
>> +    i = atoi(arg);
>> +
>> +    if ((i < 1) || (i > 1800)) {
> Why a limit of 1800? Maybe the implicit INT_MAX is good enough.
> Also the memcached may never close its connections by itself, or
> always do, so -1 and 0 could also be interesting...
Obviously 0 should be allowed, but I don't see any reason for -1. What 
difference would you make between the 2?

INT_MAX on a 32 bits system is 2147483647. I considered that giving the 
TTL in sec was enough and "more standard". This has to be converted to sec.
So, the maximum allowed value would be 2147. 1800 (half an hour) looked 
a more "logical" value for an end user. That's why I have chosen this limit.

Maybe up to 3600 (an hour) should also be allowed as it is accepted by 
apr_memcache_server_create.

>
>> +        return apr_pstrcat(cmd->pool, cmd->cmd->name,
>> +                           " must be a number between 1 and 1800.", NULL);
>> +    }
>> +
>> +    /* apr_memcache_server_create needs a ttl in usec. */
>> +    sconf->ttl = i * 1000 * 1000;
> sconf->ttl = apr_time_from_sec(i) ?
Didn't do that because of the the different type (apr_time_t (i.e. 
apr_int64_t) vs apr_uint32_t)
But using apr_time_from_sec looks good and self-document the code (i.e. 
ttl in usec)

>
>> +
>> +    return NULL;
>> +}
> Regards,
> Yann.
>



From dev-return-83512-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 08:06:31 2015
Return-Path: <dev-return-83512-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 521B718677
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 08:06:31 +0000 (UTC)
Received: (qmail 26342 invoked by uid 500); 24 Aug 2015 08:06:21 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 26255 invoked by uid 500); 24 Aug 2015 08:06:21 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 26245 invoked by uid 99); 24 Aug 2015 08:06:20 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 08:06:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 8E24DC0861
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 08:06:20 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Itymegqd9j0G for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 08:06:12 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 8A68C42B59
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 08:06:12 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 6534E15A0098
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 10:06:05 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: modules\http2 - H2Engine directive?
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <55DA9528.7070709@gknw.net>
Date: Mon, 24 Aug 2015 10:06:06 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <A08F81D7-E35C-4E60-B649-9043BC42047F@greenbytes.de>
References: <55DA9528.7070709@gknw.net>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

Ni Norm,

yes, I removed it last week and though I removed it from the doc xml as =
well. Seems I forgot the Readme. Will fix soon. Sorry for any confusion.

//Stefan

> Am 24.08.2015 um 05:53 schrieb NormW <normw@gknw.net>:
>=20
> Hi,
> The 'H2Engine on' directive is identified in the Readme.h2 as the most =
important, but except for a number of 'Directive' lists and a h2.conf =
template file. this appears to be unknown within the http2 C source or =
the 'manual'(en) reference for mod_h2. Is this directive something of =
the past or future perhaps?
> Regards,
> Norm

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83513-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 09:18:52 2015
Return-Path: <dev-return-83513-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1516C1891B
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 09:18:52 +0000 (UTC)
Received: (qmail 86384 invoked by uid 500); 24 Aug 2015 09:18:51 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 86327 invoked by uid 500); 24 Aug 2015 09:18:51 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 86317 invoked by uid 99); 24 Aug 2015 09:18:51 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 09:18:51 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 1995AC0861
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 09:18:51 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id eHBKWY2rs6wD for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 09:18:50 +0000 (UTC)
Received: from mail-ig0-f182.google.com (mail-ig0-f182.google.com [209.85.213.182])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 3B67220752
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 09:18:50 +0000 (UTC)
Received: by igfj19 with SMTP id j19so51800883igf.1
        for <dev@httpd.apache.org>; Mon, 24 Aug 2015 02:18:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=sC1hA8ZV9+p/iw+/2NWqqo+FSpmARpWNQMquLTMThPo=;
        b=tQI8CKqaBNrnJRlqcssqNqKKS95o0MkRnImX9nAEI4NCVROm6q5dItY61KNtxdgmJS
         n7EGgm+sMjDCoURAJ4TRye8nSngUCHU7PuLZb8JLJ8WC7KCai10C/h3mKYhgoL/twjZ4
         cqOLeQ/b4NVQRTKrUOG7QZ2cWWlJv/1mJRxae5jTOZt/vcL35llvGIhV2phrXm24ZULh
         ML33rAU+kjUT/1Kw2N9LRhpNAHZRgLNJUHTj6gAGSucteNuMSw9Ry7FTwCCbmvL0WVzb
         UTHkC6dtZOQv/9kenFGrgTZc93WwHzONfJ5N57Y62/OWS8PCBjBL6NpH2Lco2IuGWaI+
         xNXQ==
MIME-Version: 1.0
X-Received: by 10.50.50.205 with SMTP id e13mr10445175igo.70.1440407923516;
 Mon, 24 Aug 2015 02:18:43 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Mon, 24 Aug 2015 02:18:43 -0700 (PDT)
In-Reply-To: <mrecue$bou$1@ger.gmane.org>
References: <20150815220509.75D1BAC0456@hades.apache.org>
	<CAKQ1sVO_jvv1NaE8jJ2boadFa8RBre3P6bdz+V3M9MOV=b2Rrw@mail.gmail.com>
	<mrecue$bou$1@ger.gmane.org>
Date: Mon, 24 Aug 2015 11:18:43 +0200
Message-ID: <CAKQ1sVNWi2qtE=VYTyRjAe9gwzeFvfLH++UQZX6Ly-FfoPCY5A@mail.gmail.com>
Subject: Re: svn commit: r1696105 - in /httpd/httpd/trunk: CHANGES
 docs/manual/mod/mod_socache_memcache.xml modules/cache/mod_socache_memcache.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Mon, Aug 24, 2015 at 8:17 AM, Christophe JAILLET
<christophe.jaillet@wanadoo.fr> wrote:
>
> Le 21/08/2015 15:47, Yann Ylavic a =C3=A9crit :
>>
>> On Sun, Aug 16, 2015 at 12:05 AM,  <jailletc36@apache.org> wrote:
>>>
>>> +    if ((i < 1) || (i > 1800)) {
>>
>> Why a limit of 1800? Maybe the implicit INT_MAX is good enough.
>> Also the memcached may never close its connections by itself, or
>> always do, so -1 and 0 could also be interesting...
>
> Obviously 0 should be allowed, but I don't see any reason for -1. What
> difference would you make between the 2?

Hm, I thought that for apr_memcache_server_create (hence
apr_reslist_create), ttl=3D0 was "always close" (immediately) and -1 was
"never close" (infinite), but that's not the case (ttl=3D0 means "never
close", and -1 is invalid).

I don't know if memcached can be configured to always close the
connections when done (I guess so), but since the minimal TTL is 1
second, we could end up reusing connections closed remotely (without
recovering on error) in this case.

So maybe our best option is to use ap_timeout_parameter_parse() to set
sconf->ttl, which would allow a TTL of 1 microsecond (min), and almost
no max (native 64bit apr_time_t)...

Regards,
Yann.

From dev-return-83514-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 09:59:33 2015
Return-Path: <dev-return-83514-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B63B618A6D
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 09:59:33 +0000 (UTC)
Received: (qmail 81552 invoked by uid 500); 24 Aug 2015 09:59:33 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 81476 invoked by uid 500); 24 Aug 2015 09:59:33 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 81465 invoked by uid 99); 24 Aug 2015 09:59:33 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 09:59:33 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id A22F1C0332
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 09:59:32 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.001
X-Spam-Level: *
X-Spam-Status: No, score=1.001 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id qslLfkycSY72 for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 09:59:25 +0000 (UTC)
Received: from node176.itex.at (mail.123x.at [194.242.35.176])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id ECE4420CCD
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 09:59:24 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
	by node176.itex.at (Postfix) with ESMTP id E521222AA4
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 11:59:17 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at node176.itex.at
Received: from node176.itex.at ([127.0.0.1])
	by localhost (node176.itex.at [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Gt12Dpr5ERJf for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 11:59:17 +0200 (CEST)
Received: from [10.202.65.180] (CPE-124-183-177-228.lns17.ken.bigpond.net.au [124.183.177.228])
	(Authenticated sender: normw@gknw.net)
	by node176.itex.at (Postfix) with ESMTPSA id 8DF872051C
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 11:59:16 +0200 (CEST)
Subject: Re: modules\http2 - H2Engine directive?
To: dev@httpd.apache.org
References: <55DA9528.7070709@gknw.net>
 <A08F81D7-E35C-4E60-B649-9043BC42047F@greenbytes.de>
From: NormW <normw@gknw.net>
Message-ID: <55DAEAE5.3040505@gknw.net>
Date: Mon, 24 Aug 2015 19:59:01 +1000
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
In-Reply-To: <A08F81D7-E35C-4E60-B649-9043BC42047F@greenbytes.de>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit

Hi Stefan,
Thanks for the clarification!
A text search for 'H2Engine' shows it in a number of other languages 
under '.\manual\mod\directives', 'manual\mod\quickreference' and in 
'\docs\conf\extra\httpd-h2.conf.in'.
HTH,
Thanks,
Norm
On 24/08/2015 6:06 PM, Stefan Eissing wrote:
> Ni Norm,
>
> yes, I removed it last week and though I removed it from the doc xml as well. Seems I forgot the Readme. Will fix soon. Sorry for any confusion.
>
> //Stefan
>
>> Am 24.08.2015 um 05:53 schrieb NormW <normw@gknw.net>:
>>
>> Hi,
>> The 'H2Engine on' directive is identified in the Readme.h2 as the most important, but except for a number of 'Directive' lists and a h2.conf template file. this appears to be unknown within the http2 C source or the 'manual'(en) reference for mod_h2. Is this directive something of the past or future perhaps?
>> Regards,
>> Norm
>
> <green/>bytes GmbH
> Hafenweg 16, 48155 Münster, Germany
> Phone: +49 251 2807760. Amtsgericht Münster: HRB5782
>
>
>


From dev-return-83515-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 10:45:44 2015
Return-Path: <dev-return-83515-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0FA2318BBD
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 10:45:44 +0000 (UTC)
Received: (qmail 45305 invoked by uid 500); 24 Aug 2015 10:45:37 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 45224 invoked by uid 500); 24 Aug 2015 10:45:37 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 45214 invoked by uid 99); 24 Aug 2015 10:45:37 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 10:45:37 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 4D89B1AABB8
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 10:45:37 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 6ZihQKe7Fn4Z for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 10:45:36 +0000 (UTC)
Received: from mail-ig0-f174.google.com (mail-ig0-f174.google.com [209.85.213.174])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 3338920FA9
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 10:45:36 +0000 (UTC)
Received: by igcse8 with SMTP id se8so43581697igc.1
        for <dev@httpd.apache.org>; Mon, 24 Aug 2015 03:45:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=klx9qePPxuvSaOjP9Jnss247C1Otr4PFt12orp/UxTo=;
        b=QdSEwY+ZEC49tkF3pD8D2aQ/jXh0l2ATOgOP9diNwoaH1HU4EEhmS8uYyHqoi1U3SU
         VqullIdGoNpSjpzN4HNPrmJKUV6eXkd8/EUjimuLXmK+E3u4TjnpwR1UJ3I4UqcY9eFy
         To52F3/CP/+bkq+z8BhSwlviCxh/gAlbJvtbiZ8cMHRtkuNbOEVzlcnv/w1pFyNuefJ4
         zYu8zNxzaPJqot/7m0MO3Q/jBXdvNQTv96SfyZDEwaBDZ+3jehL62fFrUrN9IbiLL7hK
         7iBqV8Mxw/fSbmBVbuvMUEwgyIMSb0tkl+4f15kJVex4cZN3rn8eEtVQBKZNh6lE681v
         Y+SA==
MIME-Version: 1.0
X-Received: by 10.50.43.134 with SMTP id w6mr14070200igl.74.1440413135195;
 Mon, 24 Aug 2015 03:45:35 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Mon, 24 Aug 2015 03:45:35 -0700 (PDT)
In-Reply-To: <55D768E0.3000605@apache.org>
References: <20150821123403.6E568AC04B1@hades.apache.org>
	<55D7327A.9000708@apache.org>
	<CAKQ1sVOyALRO1Fi6tXK2TJ3qt9SY=avEoRuiXjrjOuttKqezSA@mail.gmail.com>
	<55D768E0.3000605@apache.org>
Date: Mon, 24 Aug 2015 12:45:35 +0200
Message-ID: <CAKQ1sVPqpDObH6yTBtpoqYti4cu=1akj_ig0q4SAji05=-hfaQ@mail.gmail.com>
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES
 docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

On Fri, Aug 21, 2015 at 8:07 PM, Ruediger Pluem <rpluem@apache.org> wrote:
>
>
> On 08/21/2015 07:02 PM, Yann Ylavic wrote:
>> On Fri, Aug 21, 2015 at 4:15 PM, Ruediger Pluem <rpluem@apache.org> wrote:
>>>
>>> Hm. Doesn't that mean that if I keep on adding stuff and do graceful restarts that at one point in time I will have used
>>> up all my growth and need to do a hard restart?
>>
>> Yes, the last restart would fail.
>>
>>> If yes, it should be probably documented to avoid some unexpected surprises.
>>
>> I agree it should be documented (will do), currently we already have
>> this issue from the first restart though.
>
> So it is an improvement over what we have :-)

Yes, including the doc :)
Added in r1697352, and to the backport proposal.

Thanks,
Yann.

From dev-return-83516-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 11:20:34 2015
Return-Path: <dev-return-83516-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1E07518C67
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 11:20:34 +0000 (UTC)
Received: (qmail 92750 invoked by uid 500); 24 Aug 2015 11:20:33 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 92668 invoked by uid 500); 24 Aug 2015 11:20:33 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 92659 invoked by uid 99); 24 Aug 2015 11:20:33 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 11:20:33 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 4A94BED574
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 11:20:33 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.363
X-Spam-Level: *
X-Spam-Status: No, score=1.363 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RDNS_DYNAMIC=0.363]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id esMxrOGUaS1a for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 11:20:32 +0000 (UTC)
Received: from gungnir.webthing.com (209-20-83-52.slicehost.net [209.20.83.52])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTP id 9519920646
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 11:20:32 +0000 (UTC)
Received: from baldur (cpc14-newt30-2-0-cust22.newt.cable.virginm.net [92.232.45.23])
	by gungnir.webthing.com (Postfix) with ESMTPSA id 8CF147C1A3
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 11:20:25 +0000 (UTC)
Date: Mon, 24 Aug 2015 12:20:21 +0100
From: Nick Kew <niq@apache.org>
To: dev@httpd.apache.org
Subject: Re: svn commit: r1697322 - /httpd/httpd/branches/2.4.x/STATUS
Message-ID: <20150824122021.45d52e63@baldur>
In-Reply-To: <20150824074033.E58A7AC058C@hades.apache.org>
References: <20150824074033.E58A7AC058C@hades.apache.org>
X-Mailer: Claws Mail 3.7.4 (GTK+ 2.20.1; i486-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

On Mon, 24 Aug 2015 07:40:33 -0000
rpluem@apache.org wrote:

> --- httpd/httpd/branches/2.4.x/STATUS (original)
> +++ httpd/httpd/branches/2.4.x/STATUS Mon Aug 24 07:40:33 2015
> @@ -238,8 +238,15 @@ PATCHES PROPOSED TO BACKPORT FROM TRUNK:
>        +1: rpluem, ylavic
>        niq: 1. the if(worker->s->retries) {} and comment at line 2917
>                don't seem to make any sense.
> +      rpluem: This is just taken over from existing code. It is just indented
> +              differently hence part of the path I think it should be marked
> +              as TODO section. But this should be subject to another
> +              patch.

Agreed it comes from existing code, but I wonder if its meaning and purpose
haven't got lost since it was originally written?

I'm +1 if that's either removed or if the comment clarifies what
actual case the TODO would be dealing with.

-- 
Nick Kew

From dev-return-83517-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 11:40:56 2015
Return-Path: <dev-return-83517-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0795F18CEC
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 11:40:56 +0000 (UTC)
Received: (qmail 30762 invoked by uid 500); 24 Aug 2015 11:40:55 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 30675 invoked by uid 500); 24 Aug 2015 11:40:55 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 30665 invoked by uid 99); 24 Aug 2015 11:40:55 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 11:40:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id F0111ED28E
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 11:40:54 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id rAM_Uge7xT2c for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 11:40:44 +0000 (UTC)
Received: from mail-wi0-f179.google.com (mail-wi0-f179.google.com [209.85.212.179])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 7D01820FA9
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 11:40:43 +0000 (UTC)
Received: by widdq5 with SMTP id dq5so47341192wid.1
        for <dev@httpd.apache.org>; Mon, 24 Aug 2015 04:40:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=subject:references:reply-to:to:from:message-id:date:user-agent
         :mime-version:in-reply-to:content-type:content-transfer-encoding;
        bh=5BhRnewTRGBtcjTsFrEODs7NpamYWZLIkdwRhxRbGL8=;
        b=gf/U9e6tkG5b5Q0QZSya7+Ew2WLITKM1BVGMHAbGBLZCjivAdWSHWIgBwLLLPW3jbY
         pyOCuCjYrcRhfD83Fds3aMEyPabBAvFgvHcMsnUAh3LLcxBiH7KQu6cY/9AB8sHoFJwx
         QkAjGs7+cUhT7/9F5r2RXTrJY5D79R7vLInexFT/BNv7AqKpp+dOaZh9KrTqsBDMdECH
         9J08I1Q/WEWOub2gESCSBLmHCrFUiMLvBHCai8MsPYo3ng1Fa1KYpTI8/sjx3+Wx4+Zg
         KlKBm0WXn3YENKveCjL9mQwu+d/x/QgV6E7Em9pqpE1/ObAQIAbS7wdKcR4Cn5SdewUP
         CQvA==
X-Received: by 10.180.85.163 with SMTP id i3mr11152916wiz.1.1440416443214;
        Mon, 24 Aug 2015 04:40:43 -0700 (PDT)
Received: from [10.129.15.238] (caron.approach.be. [188.118.19.81])
        by smtp.gmail.com with ESMTPSA id d17sm22786788wjs.32.2015.08.24.04.40.42
        for <dev@httpd.apache.org>
        (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Mon, 24 Aug 2015 04:40:42 -0700 (PDT)
Subject: Fwd: Unexpected Warnings from Macro Use in 2.4
References: <CAFMGiz-=qK31nuHhqZGU+ZthqU6BUeMdAW_X36Vyu2dGboSwqQ@mail.gmail.com>
Reply-To: nickgearls@gmail.com
To: Development Apache <dev@httpd.apache.org>
From: Nick Gearls <nickgearls@gmail.com>
X-Forwarded-Message-Id: <CAFMGiz-=qK31nuHhqZGU+ZthqU6BUeMdAW_X36Vyu2dGboSwqQ@mail.gmail.com>
Message-ID: <55DB0296.5060905@gmail.com>
Date: Mon, 24 Aug 2015 13:40:06 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
In-Reply-To: <CAFMGiz-=qK31nuHhqZGU+ZthqU6BUeMdAW_X36Vyu2dGboSwqQ@mail.gmail.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

This is definitely a bug as we have a major incompatibility between two 
features.
Remark: although mod_macro can use $ and % for unescaped characters, 
${x} is used by Define and %{x} by mod_rewrite :-(

I suppose the preferred solution to not be incompatible with the current 
situation would be an optional directive to overwrite the $ character 
(DefineChar?)

-------- Forwarded Message --------
Subject: 	Re: Unexpected Warnings from Macro Use in 2.4
Date: 	Sat, 22 Aug 2015 11:16:44 -0500
From: 	Tom Browder <tom.browder@gmail.com>
To: 	nickgearls@gmail.com, dev@httpd.apache.org <dev@httpd.apache.org>


On Tue, Feb 24, 2015 at 7:15 AM, Tom Browder <tom.browder@gmail.com> wrote:
>
> On Feb 24, 2015 6:52 AM, "Nick Gearls" <nickgearls@gmail.com> wrote:
>>
>> Define mysite   www.mycompany.com
>>
>> <Macro NewSite $mysite>
>>  Servername${mysite}
>>  ErrorLog /var/log/httpd/${mysite}_error.log
>> </Macro>
>>
>> Use NewSite www.company1.com
>> Use NewSite www.company2.com
>
> That's similar to the way I use it for multiple virtual hosts and have no
> problems except the warnings I reported.

The problem still exists in 2.4.16.  Shall I file a bug?

-Tom




From dev-return-83518-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 11:45:55 2015
Return-Path: <dev-return-83518-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B974F18D43
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 11:45:55 +0000 (UTC)
Received: (qmail 41172 invoked by uid 500); 24 Aug 2015 11:45:55 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 41108 invoked by uid 500); 24 Aug 2015 11:45:55 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 41098 invoked by uid 99); 24 Aug 2015 11:45:55 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 11:45:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id C7BEB181BC3
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 11:45:54 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id LD2Y98prAtJA for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 11:45:54 +0000 (UTC)
Received: from mail-yk0-f174.google.com (mail-yk0-f174.google.com [209.85.160.174])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 1189442BA2
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 11:45:54 +0000 (UTC)
Received: by ykbi184 with SMTP id i184so131288591ykb.2
        for <dev@httpd.apache.org>; Mon, 24 Aug 2015 04:45:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=WXKvrFZKAI+5pI33H+tKJXoO+qTf9t5kKBmtCNSOpHw=;
        b=VCIX/JuZiX2oxIwojAYBT523lpl982iHO6Vrl/p6rdSFML3Ge9vMtMSSiYe1jryWXj
         fBwtJqsZEPEMtj/PGUGaZlzX7Aku0j8rIDGaueDSsNrEfadH8HqmN7C2PBdH7Hoj/7Rj
         6RBaC0iOPkZ1sdY85oE7ZbeBrSsKr6nDaqAy7EdBlsSM4ySsFjFJnfCzZJ7txA6aZSBx
         OqOK8o+WsPHZlNMxTSOF3BzgvtQYD4xboCbMAweDvqFPF+jeG6FHiA+6zscbk6fMxNHs
         3zgvLUAXjmNk4Z9JLbMiyNLXYUrA8Ceqh1coFcec1mSpuemqsIUb4MNxJyhLjYJMrZUE
         warw==
MIME-Version: 1.0
X-Received: by 10.129.34.138 with SMTP id i132mr5272448ywi.104.1440416753811;
 Mon, 24 Aug 2015 04:45:53 -0700 (PDT)
Received: by 10.37.207.66 with HTTP; Mon, 24 Aug 2015 04:45:53 -0700 (PDT)
In-Reply-To: <55DB0296.5060905@gmail.com>
References: <CAFMGiz-=qK31nuHhqZGU+ZthqU6BUeMdAW_X36Vyu2dGboSwqQ@mail.gmail.com>
	<55DB0296.5060905@gmail.com>
Date: Mon, 24 Aug 2015 07:45:53 -0400
Message-ID: <CALK=YjOmQbvJdMmPQVi-bytaWj77JfEBWfLBuV04HcedQFtQAA@mail.gmail.com>
Subject: Re: Unexpected Warnings from Macro Use in 2.4
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>, nickgearls@gmail.com
Content-Type: text/plain; charset=UTF-8

On Mon, Aug 24, 2015 at 7:40 AM, Nick Gearls <nickgearls@gmail.com> wrote:
> Remark: although mod_macro can use $ and % for unescaped characters, ${x} is
> used by Define and %{x} by mod_rewrite :-(

Just to make sure it's clear, ${x} is even older then Define and is
used to resolve real native environment variables.

From dev-return-83519-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 13:23:15 2015
Return-Path: <dev-return-83519-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D167B181A5
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 13:23:15 +0000 (UTC)
Received: (qmail 71124 invoked by uid 500); 24 Aug 2015 13:23:15 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 71058 invoked by uid 500); 24 Aug 2015 13:23:14 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 71048 invoked by uid 99); 24 Aug 2015 13:23:14 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 13:23:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 856951826D6
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 13:23:14 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id iiOnytslRu_b for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 13:23:10 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id EF32142B9B
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 13:23:09 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 57A4B15A0467
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 15:23:08 +0200 (CEST)
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Subject: maintainer mode and test framework
Message-Id: <42280079-9E1F-457A-9D8C-BEFD87AB6E45@greenbytes.de>
Date: Mon, 24 Aug 2015 15:23:07 +0200
To: dev@httpd.apache.org
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
X-Mailer: Apple Mail (2.2104)

Just a tiny question how the senior guys here do to:

If I build httpd in maintainer-mode (which I want), the test framework =
will no longer build since it inherits the compiler flags from apxs, I =
assume.

Is there an easy way around this?

//Stefan

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83520-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 13:25:07 2015
Return-Path: <dev-return-83520-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 83330181CA
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 13:25:07 +0000 (UTC)
Received: (qmail 85277 invoked by uid 500); 24 Aug 2015 13:25:06 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 85201 invoked by uid 500); 24 Aug 2015 13:25:06 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 85191 invoked by uid 99); 24 Aug 2015 13:25:06 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 13:25:06 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 5AB331AAADF
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 13:25:06 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.099
X-Spam-Level:
X-Spam-Status: No, score=-0.099 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id CssYKZQaznnF for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 13:24:56 +0000 (UTC)
Received: from mail-yk0-f170.google.com (mail-yk0-f170.google.com [209.85.160.170])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id E588642BE5
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 13:24:55 +0000 (UTC)
Received: by ykll84 with SMTP id l84so134156834ykl.0
        for <dev@httpd.apache.org>; Mon, 24 Aug 2015 06:24:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=KaQu/JxwosbWbUWdFK8GiqqnNsKWmPwL3O9HU+nVUVg=;
        b=Q6K5jcAZcdhHgDDzcXJ1X0hD1jsjhIYMeh0WQeNR0CMyhQB7kDqcllM17pAAhIIxXX
         ZkYW1zaWk9zpe9pRPZFcsP9BaqDp9vmLcDyd+CdiAyaH9MRfWn0iHQvS34eAU4MDq6D+
         UwBcL35gwf0i5gKbzq4R71Sd9syz8crk1paJxjYkI7PxLHhBbYn+a8+1TqtUaa3YhTho
         bWoixPnCoEWEDGraVH5xmd6nqEsXIGErd/ZCKkIyQTCucaY/wTl8xB42VhVJfCLEyj3X
         R1fESQPBEyfwC3ODgg21GUFh8UjDQBJXhdiY+6zFUR7Onkki3QL2xkeUFz/mMF60ql+v
         gpVw==
MIME-Version: 1.0
X-Received: by 10.170.134.214 with SMTP id a205mr29651948ykc.89.1440422688865;
 Mon, 24 Aug 2015 06:24:48 -0700 (PDT)
Received: by 10.37.207.66 with HTTP; Mon, 24 Aug 2015 06:24:48 -0700 (PDT)
In-Reply-To: <42280079-9E1F-457A-9D8C-BEFD87AB6E45@greenbytes.de>
References: <42280079-9E1F-457A-9D8C-BEFD87AB6E45@greenbytes.de>
Date: Mon, 24 Aug 2015 09:24:48 -0400
Message-ID: <CALK=YjMFvFRv-_erwY+RmaxYfS44h81EVQNh2CVXwxuSY1mZZQ@mail.gmail.com>
Subject: Re: maintainer mode and test framework
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Mon, Aug 24, 2015 at 9:23 AM, Stefan Eissing
<stefan.eissing@greenbytes.de> wrote:
> Just a tiny question how the senior guys here do to:
>
> If I build httpd in maintainer-mode (which I want), the test framework will no longer build since it inherits the compiler flags from apxs, I assume.
>
> Is there an easy way around this?
>

You could edit build/config_vars.mk in a pinch.  I don't think I've
ever had that harm the test framework. What fails in the framework?

From dev-return-83521-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 13:41:51 2015
Return-Path: <dev-return-83521-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5E30618242
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 13:41:51 +0000 (UTC)
Received: (qmail 24886 invoked by uid 500); 24 Aug 2015 13:41:50 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 24813 invoked by uid 500); 24 Aug 2015 13:41:50 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 24803 invoked by uid 99); 24 Aug 2015 13:41:50 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 13:41:50 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 737FAED62B
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 13:41:50 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -1.427
X-Spam-Level:
X-Spam-Status: No, score=-1.427 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-1.427, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 25x7tS74MH6A for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 13:41:40 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 44BB320F6D
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 13:41:40 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id C2F0515A0683
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 15:41:30 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: maintainer mode and test framework
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CALK=YjMFvFRv-_erwY+RmaxYfS44h81EVQNh2CVXwxuSY1mZZQ@mail.gmail.com>
Date: Mon, 24 Aug 2015 15:41:29 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <3B5E3C1A-62C7-441B-8DEA-755F9C9CF9C5@greenbytes.de>
References: <42280079-9E1F-457A-9D8C-BEFD87AB6E45@greenbytes.de> <CALK=YjMFvFRv-_erwY+RmaxYfS44h81EVQNh2CVXwxuSY1mZZQ@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

OK, now you made me fix it. ;-)

mod_test_session.c did some non C90 variable declarations intermixed =
with code. I'll check in the fix shortly. Btw. what is holding us back =
from more recent C? Old platforms, obviously... Do we have an idea =
which?

> Am 24.08.2015 um 15:24 schrieb Eric Covener <covener@gmail.com>:
>=20
> On Mon, Aug 24, 2015 at 9:23 AM, Stefan Eissing
> <stefan.eissing@greenbytes.de> wrote:
>> Just a tiny question how the senior guys here do to:
>>=20
>> If I build httpd in maintainer-mode (which I want), the test =
framework will no longer build since it inherits the compiler flags from =
apxs, I assume.
>>=20
>> Is there an easy way around this?
>>=20
>=20
> You could edit build/config_vars.mk in a pinch.  I don't think I've
> ever had that harm the test framework. What fails in the framework?

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83522-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 13:42:22 2015
Return-Path: <dev-return-83522-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C368E1825A
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 13:42:22 +0000 (UTC)
Received: (qmail 27233 invoked by uid 500); 24 Aug 2015 13:42:21 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 27173 invoked by uid 500); 24 Aug 2015 13:42:21 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 27163 invoked by uid 99); 24 Aug 2015 13:42:21 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 13:42:21 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 49CD5C082C
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 13:42:21 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.007
X-Spam-Level:
X-Spam-Status: No, score=-0.007 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 4kPSrvMYiWeP for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 13:42:20 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 99EA642BE5
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 13:42:19 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 61D5815A00AF
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 15:42:18 +0200 (CEST)
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Subject: regression tests
Message-Id: <491BD25A-D475-4364-873F-90EA4CBB9B65@greenbytes.de>
Date: Mon, 24 Aug 2015 15:42:18 +0200
To: dev@httpd.apache.org
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
X-Mailer: Apple Mail (2.2104)

I seem to get

Test Summary Report
-------------------
t/filter/case.t                   (Wstat: 0 Tests: 4 Failed: 1)
  Failed test:  2

in regression tests since my vacation. Anything rings a bell?

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83523-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 13:45:19 2015
Return-Path: <dev-return-83523-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 83F6C18282
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 13:45:19 +0000 (UTC)
Received: (qmail 38459 invoked by uid 500); 24 Aug 2015 13:45:19 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 38388 invoked by uid 500); 24 Aug 2015 13:45:19 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 38378 invoked by uid 99); 24 Aug 2015 13:45:18 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 13:45:18 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 8D8471826D6
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 13:45:18 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id dCla10iD--wm for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 13:45:10 +0000 (UTC)
Received: from mail-yk0-f176.google.com (mail-yk0-f176.google.com [209.85.160.176])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 3A5C242BA2
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 13:45:10 +0000 (UTC)
Received: by ykbi184 with SMTP id i184so134844660ykb.2
        for <dev@httpd.apache.org>; Mon, 24 Aug 2015 06:45:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=c3I/rp0Z2gqdTb/Td4fxLRMvQzPzbXyRo0mDQ6jHjHs=;
        b=iLivX0sNxlbdDkrasPPv4iaR7InAKX6nVucphHC4EbHCQMeQk+9mPPHNOcuWPklixo
         5iPQoYoC2nKT93oEsZ4LwwWUY98u5XWjdYEqRbvgDsUaQI6sUdpTGQYdsGg7hIipO6HV
         yP4W8G8rS43Oza88+/W6YaoZOSs6jwymX73nVSr6msSBI9KPXaNTUlmkLhAgDJGkZ7Fn
         DYBpre9hG3Itpd416E8FLUwcTk2z6HtY/6zXX95mUTf+T0JakIiq60PkqsAMVbZ0YyJ2
         vpHrRIAEBvn1VCvUvFejvOJyYv0rj+lupIXbkuLWVG32+P/oo25b5FaKKwygqpEHabtf
         puTg==
MIME-Version: 1.0
X-Received: by 10.170.36.66 with SMTP id 63mr29896841yke.31.1440423909810;
 Mon, 24 Aug 2015 06:45:09 -0700 (PDT)
Received: by 10.37.207.66 with HTTP; Mon, 24 Aug 2015 06:45:09 -0700 (PDT)
In-Reply-To: <3B5E3C1A-62C7-441B-8DEA-755F9C9CF9C5@greenbytes.de>
References: <42280079-9E1F-457A-9D8C-BEFD87AB6E45@greenbytes.de>
	<CALK=YjMFvFRv-_erwY+RmaxYfS44h81EVQNh2CVXwxuSY1mZZQ@mail.gmail.com>
	<3B5E3C1A-62C7-441B-8DEA-755F9C9CF9C5@greenbytes.de>
Date: Mon, 24 Aug 2015 09:45:09 -0400
Message-ID: <CALK=YjPfFTpODwmwNKUcSe7mN8mpddwStDQfTSGZgQv0GXUtTA@mail.gmail.com>
Subject: Re: maintainer mode and test framework
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Mon, Aug 24, 2015 at 9:41 AM, Stefan Eissing
<stefan.eissing@greenbytes.de> wrote:
> mod_test_session.c did some non C90 variable declarations intermixed with code. I'll check in the fix shortly. Btw. what is holding us back from more recent C? Old platforms, obviously... Do we have an idea which?

Ah, that is a brand new test module committed this month.

I am not sure exactly where we really have the constraint.  Visual
Studio 6 on Windows in the old releases?  I think my own pet/corporate
overlord platforms (z/OS, AIX) are not an issue.

From dev-return-83524-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 14:48:07 2015
Return-Path: <dev-return-83524-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8AD8E186C3
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 14:48:07 +0000 (UTC)
Received: (qmail 12784 invoked by uid 500); 24 Aug 2015 14:48:07 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 12718 invoked by uid 500); 24 Aug 2015 14:48:07 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 12701 invoked by uid 99); 24 Aug 2015 14:48:07 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 14:48:07 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id B3068C0332
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 14:48:06 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.008
X-Spam-Level:
X-Spam-Status: No, score=-0.008 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_HELO_PASS=-0.001, SPF_PASS=-0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Q30ogBTwvad7 for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 14:47:57 +0000 (UTC)
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 163615069C
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 14:47:57 +0000 (UTC)
Received: from int-mx13.intmail.prod.int.phx2.redhat.com (int-mx13.intmail.prod.int.phx2.redhat.com [10.5.11.26])
	by mx1.redhat.com (Postfix) with ESMTPS id 336E18EA5B
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 14:47:56 +0000 (UTC)
Received: from dhcp-24-191.brq.redhat.com (vpn1-7-150.ams2.redhat.com [10.36.7.150])
	by int-mx13.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP id t7OEltKa010628
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 10:47:55 -0400
Message-ID: <55DB2E9A.10307@redhat.com>
Date: Mon, 24 Aug 2015 16:47:54 +0200
From: =?UTF-8?B?SmFuIEthbHXFvmE=?= <jkaluza@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:31.0) Gecko/20100101 Thunderbird/31.7.0
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: PR 58267: Regression in 2.2.31 caused by r1680920
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.26

Hi,

unfortunately, the r1680920 brought undesired behavior described in PR 
58267 to 2.2.x. The bug is well described in the PR, so I won't describe 
it in this email.

I have tried to debug it and I think the problem is that we use also 
server->server_hostname to compute the hash in the 
ap_proxy_set_scoreboard_lb. This hash is used to find out proper 
ap_scoreboard field.

It all happens in mod_proxy.c:child_init's scope.

If the "<Proxy Balancer://foobar>" has been defined, all the 
BalancerMembers are initialized with the hash computed with usage of 
global server->server_hostname.

Later, if the "ProxyPass /foobar/ Balancer://foobar/" has been used in 
the VirtualHost, ap_proxy_initialize_worker_share is called again with 
server->server_hostname set to the VirtualHost's one.

Now, the root of the error is that the scoreboard size is static (set to 
proxy_lb_workers + PROXY_DYNAMIC_BALANCER_LIMIT), but it is not 
incremented when ProxyPass with balancer is used in the virtualhost. 
This leads to lack of space in scoreboard when Balancers are used in 
multiple virtualhosts.

I think there are two possible fixes:

1) Do not use server->server_hostname when computing hash which is used 
to determine right scoreboard field. I think this would fix this bug, 
but I'm not sure what would happen in situations when you define 2 
balancers with the same name in different virtualhosts...

On the other-side, when there is global Proxy balancer, it make sense to 
use the same worker->s for all the ProxyPass in virtualhosts.

2) Increment proxy_lb_workers according to number of workers in balancer 
when using "ProxyPass /foobar/ Balancer://foobar/" in the VirtualHost. 
The scoreboard would have right size and ap_proxy_set_scoreboard_lb 
would not fail then.


Since it's 2.2.x which should be probably stable without big changes, 
I'm asking the list for more opinions... I will try to implement patch 
for option 2) tomorrow and see if this really fixes the issue.

Regards,
Jan Kaluza

From dev-return-83525-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 14:58:37 2015
Return-Path: <dev-return-83525-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A568C18718
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 14:58:37 +0000 (UTC)
Received: (qmail 33469 invoked by uid 500); 24 Aug 2015 14:58:37 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 33399 invoked by uid 500); 24 Aug 2015 14:58:37 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 33389 invoked by uid 99); 24 Aug 2015 14:58:37 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 14:58:37 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 9DF3518034C
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 14:58:36 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.008
X-Spam-Level:
X-Spam-Status: No, score=-0.008 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_HELO_PASS=-0.001, SPF_PASS=-0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id o1se1He678xr for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 14:58:35 +0000 (UTC)
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 74F4A42921
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 14:58:35 +0000 (UTC)
Received: from int-mx14.intmail.prod.int.phx2.redhat.com (int-mx14.intmail.prod.int.phx2.redhat.com [10.5.11.27])
	by mx1.redhat.com (Postfix) with ESMTPS id C3BF1A2C22
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 14:58:34 +0000 (UTC)
Received: from dhcp-24-191.brq.redhat.com (vpn1-7-150.ams2.redhat.com [10.36.7.150])
	by int-mx14.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP id t7OEwXgQ021615
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 10:58:34 -0400
Message-ID: <55DB3119.4060208@redhat.com>
Date: Mon, 24 Aug 2015 16:58:33 +0200
From: =?UTF-8?B?SmFuIEthbHXFvmE=?= <jkaluza@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:31.0) Gecko/20100101 Thunderbird/31.7.0
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
References: <55DB2E9A.10307@redhat.com>
In-Reply-To: <55DB2E9A.10307@redhat.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.27

On 08/24/2015 04:47 PM, Jan Kaluža wrote:
> Hi,
>
> unfortunately, the r1680920 brought undesired behavior described in PR
> 58267 to 2.2.x. The bug is well described in the PR, so I won't describe
> it in this email.
>
> I have tried to debug it and I think the problem is that we use also
> server->server_hostname to compute the hash in the
> ap_proxy_set_scoreboard_lb. This hash is used to find out proper
> ap_scoreboard field.
>
> It all happens in mod_proxy.c:child_init's scope.
>
> If the "<Proxy Balancer://foobar>" has been defined, all the
> BalancerMembers are initialized with the hash computed with usage of
> global server->server_hostname.
>
> Later, if the "ProxyPass /foobar/ Balancer://foobar/" has been used in
> the VirtualHost, ap_proxy_initialize_worker_share is called again with
> server->server_hostname set to the VirtualHost's one.
>
> Now, the root of the error is that the scoreboard size is static (set to
> proxy_lb_workers + PROXY_DYNAMIC_BALANCER_LIMIT), but it is not
> incremented when ProxyPass with balancer is used in the virtualhost.
> This leads to lack of space in scoreboard when Balancers are used in
> multiple virtualhosts.
>
> I think there are two possible fixes:
>
> 1) Do not use server->server_hostname when computing hash which is used
> to determine right scoreboard field. I think this would fix this bug,
> but I'm not sure what would happen in situations when you define 2
> balancers with the same name in different virtualhosts...
>
> On the other-side, when there is global Proxy balancer, it make sense to
> use the same worker->s for all the ProxyPass in virtualhosts.

It seems that 2.4.x uses just the name of the worker to determine slot 
for shared memory, so maybe it wouldn't be a problem for 2.2.x too...

Jan Kaluza

> 2) Increment proxy_lb_workers according to number of workers in balancer
> when using "ProxyPass /foobar/ Balancer://foobar/" in the VirtualHost.
> The scoreboard would have right size and ap_proxy_set_scoreboard_lb
> would not fail then.
>
>
> Since it's 2.2.x which should be probably stable without big changes,
> I'm asking the list for more opinions... I will try to implement patch
> for option 2) tomorrow and see if this really fixes the issue.
>
> Regards,
> Jan Kaluza


From dev-return-83526-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 15:22:00 2015
Return-Path: <dev-return-83526-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1EB0818802
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 15:22:00 +0000 (UTC)
Received: (qmail 5571 invoked by uid 500); 24 Aug 2015 15:21:46 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 5323 invoked by uid 500); 24 Aug 2015 15:21:45 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 5306 invoked by uid 99); 24 Aug 2015 15:21:45 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 15:21:45 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 8A0A21943AC
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 15:21:45 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.005
X-Spam-Level:
X-Spam-Status: No, score=-0.005 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id qDX0YZYTT0YB for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 15:21:34 +0000 (UTC)
Received: from mailserver.kippdata.de (capsella.kippdata.de [195.227.30.149])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTP id 47A3B20752
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 15:21:33 +0000 (UTC)
Received: from [195.227.30.209] (notebook-rj [195.227.30.209])
	by mailserver.kippdata.de (8.13.5/8.13.5) with ESMTP id t7OFLQpY020028
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 17:21:26 +0200 (CEST)
Subject: Re: Fwd: Unexpected Warnings from Macro Use in 2.4
To: dev@httpd.apache.org
References: <CAFMGiz-=qK31nuHhqZGU+ZthqU6BUeMdAW_X36Vyu2dGboSwqQ@mail.gmail.com>
 <55DB0296.5060905@gmail.com>
From: Rainer Jung <rainer.jung@kippdata.de>
Message-ID: <55DB366E.5070607@kippdata.de>
Date: Mon, 24 Aug 2015 17:21:18 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
In-Reply-To: <55DB0296.5060905@gmail.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

Am 24.08.2015 um 13:40 schrieb Nick Gearls:
> This is definitely a bug as we have a major incompatibility between two
> features.
> Remark: although mod_macro can use $ and % for unescaped characters,
> ${x} is used by Define and %{x} by mod_rewrite :-(

Shooting from the hip:

     &{x}

Haven't checked for implications, but adding "&" to mod_macro with the 
same meaning as "$" and "%" looks trivial to do.

> I suppose the preferred solution to not be incompatible with the current
> situation would be an optional directive to overwrite the $ character
> (DefineChar?)

I think it would be better if httpd core (${x}) and mod_rewrite (%{x}) 
could stay as-is and mod_macro would support yet another prefix like 
"&". Note that there is already support for @{x}, but that has slightly 
different semantics (which doesn't matter in many cases).

Another thing: apart from us providing better and unambiguous syntax, it 
would always be a good idea not to use the same names for macro 
variables and system environment resp. Define variables in your 
configuration. Otherwise chances are good someone (admin) or something 
(software) will misinterpret what actually happens or should happen.

Regards,

Rainer


> -------- Forwarded Message --------
> Subject:     Re: Unexpected Warnings from Macro Use in 2.4
> Date:     Sat, 22 Aug 2015 11:16:44 -0500
> From:     Tom Browder <tom.browder@gmail.com>
> To:     nickgearls@gmail.com, dev@httpd.apache.org <dev@httpd.apache.org>
>
>
> On Tue, Feb 24, 2015 at 7:15 AM, Tom Browder <tom.browder@gmail.com> wrote:
>>
>> On Feb 24, 2015 6:52 AM, "Nick Gearls" <nickgearls@gmail.com> wrote:
>>>
>>> Define mysite   www.mycompany.com
>>>
>>> <Macro NewSite $mysite>
>>>  Servername${mysite}
>>>  ErrorLog /var/log/httpd/${mysite}_error.log
>>> </Macro>
>>>
>>> Use NewSite www.company1.com
>>> Use NewSite www.company2.com
>>
>> That's similar to the way I use it for multiple virtual hosts and have no
>> problems except the warnings I reported.
>
> The problem still exists in 2.4.16.  Shall I file a bug?
>
> -Tom

From dev-return-83527-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 15:23:08 2015
Return-Path: <dev-return-83527-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BB03E1880F
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 15:23:08 +0000 (UTC)
Received: (qmail 15681 invoked by uid 500); 24 Aug 2015 15:22:58 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 15602 invoked by uid 500); 24 Aug 2015 15:22:58 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 15588 invoked by uid 99); 24 Aug 2015 15:22:58 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 15:22:58 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 73C38ED68F
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 15:22:58 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.099
X-Spam-Level:
X-Spam-Status: No, score=-0.099 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id nHmqBnNPOnPm for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 15:22:52 +0000 (UTC)
Received: from mail-qk0-f178.google.com (mail-qk0-f178.google.com [209.85.220.178])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 896AC20D30
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 15:22:51 +0000 (UTC)
Received: by qkbm65 with SMTP id m65so71205085qkb.2
        for <dev@httpd.apache.org>; Mon, 24 Aug 2015 08:22:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=IYv8efPgSCJlObhR+ZdVpa5DMfGU6OdH3CnqFbPXwus=;
        b=vmUvIqnEmTP1ASPC0YxRXKEcBBhh8PDK9GKEEVVURneTvOjs5OtWxnjTtQJRIQARTA
         klQRtsLAZyoy71LPq/+90owldDCuQ8t2FKogygnYnLKfQqaP8s9BOW0VuVrAzntyfQWg
         ecJvqhuPPIF8sZT01uDNr05ZqCklpdq2AqX1VL7mv36Nlf47TczrxPRViAW3Dh/+D0Go
         zXOixC7IPMjHK9aK/5wSErL8fSUdHA6x8EUi2Pd7awahgExWdYUi3LGSqoKNktrvNQOJ
         ez+KwtePhttEJkwQuOYTyWSyl0mORbWoA1FPtQt3UpED15bBdBdwruJ0CD9Tjp2FYmTU
         TKVA==
MIME-Version: 1.0
X-Received: by 10.170.165.193 with SMTP id h184mr30642046ykd.1.1440429770496;
 Mon, 24 Aug 2015 08:22:50 -0700 (PDT)
Received: by 10.37.207.66 with HTTP; Mon, 24 Aug 2015 08:22:50 -0700 (PDT)
In-Reply-To: <55DB366E.5070607@kippdata.de>
References: <CAFMGiz-=qK31nuHhqZGU+ZthqU6BUeMdAW_X36Vyu2dGboSwqQ@mail.gmail.com>
	<55DB0296.5060905@gmail.com>
	<55DB366E.5070607@kippdata.de>
Date: Mon, 24 Aug 2015 11:22:50 -0400
Message-ID: <CALK=YjPWXsb2Pa86vurwU+U98yq+FHZ0En+Pq-MdacVEFEjPFg@mail.gmail.com>
Subject: Re: Fwd: Unexpected Warnings from Macro Use in 2.4
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Mon, Aug 24, 2015 at 11:21 AM, Rainer Jung <rainer.jung@kippdata.de> wrote:
> think it would be better if httpd core (${x}) and mod_rewrite (%{x}) could
> stay as-is and mod_macro would support yet another prefix like "&".

+1


-- 
Eric Covener
covener@gmail.com

From dev-return-83528-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 15:32:17 2015
Return-Path: <dev-return-83528-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5F32C18930
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 15:32:17 +0000 (UTC)
Received: (qmail 50109 invoked by uid 500); 24 Aug 2015 15:32:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 50031 invoked by uid 500); 24 Aug 2015 15:32:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 50021 invoked by uid 99); 24 Aug 2015 15:32:16 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 15:32:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 56299ED694
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 15:32:16 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id Q8152YcLRQfR for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 15:32:07 +0000 (UTC)
Received: from mail-ig0-f181.google.com (mail-ig0-f181.google.com [209.85.213.181])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id D6C442142E
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 15:32:06 +0000 (UTC)
Received: by igcse8 with SMTP id se8so50078293igc.1
        for <dev@httpd.apache.org>; Mon, 24 Aug 2015 08:32:06 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=m2q7gaMxyilubpJ7aivOFM4uhgMPcfDcq6T2g+57Qe8=;
        b=C2YpxQ8sjUW7kp2O6o2eY+3Sf2ZN7sA0SSiXtKGFXZWSDCkSP7B+mzcdYaEtpuFDRS
         5W95uy5XrKchc/U2DjOwUz2EAimGqLuO2+K6lzlKjd93NgkJVsNVmjUKzY057T2wW0s1
         seuy0tNhWaSvv5mDIcTshZgsZEl0pobbqRa1XPeeW7goQ4gShBETFfriB27DXqkk50c9
         ye8PdSJccuYK1GAmjPYnsGAW51PcarqLnyLUQBGjC+WumSCk3+WoDfCD4jy0muDcIZe2
         Fn+uU9vMDl7LjRHFwr61SAGyx9j7ZQePgkbCvcTfrAh23NqDrLhsNCVYXXGONzvddFex
         Ajqg==
X-Gm-Message-State: ALoCoQktssYaYSYScu0/rUU1KVuMIpCdh6nugaisJdQ+9ery9PGDxCIcsv+qItRaP+aXkW7TPmLp
MIME-Version: 1.0
X-Received: by 10.50.78.161 with SMTP id c1mr16278520igx.35.1440430326280;
 Mon, 24 Aug 2015 08:32:06 -0700 (PDT)
Received: by 10.107.41.9 with HTTP; Mon, 24 Aug 2015 08:32:06 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
Received: by 10.107.41.9 with HTTP; Mon, 24 Aug 2015 08:32:06 -0700 (PDT)
In-Reply-To: <CALK=YjPfFTpODwmwNKUcSe7mN8mpddwStDQfTSGZgQv0GXUtTA@mail.gmail.com>
References: <42280079-9E1F-457A-9D8C-BEFD87AB6E45@greenbytes.de>
	<CALK=YjMFvFRv-_erwY+RmaxYfS44h81EVQNh2CVXwxuSY1mZZQ@mail.gmail.com>
	<3B5E3C1A-62C7-441B-8DEA-755F9C9CF9C5@greenbytes.de>
	<CALK=YjPfFTpODwmwNKUcSe7mN8mpddwStDQfTSGZgQv0GXUtTA@mail.gmail.com>
Date: Mon, 24 Aug 2015 10:32:06 -0500
Message-ID: <CACsi251x2WmMLYhUH5o2tDxY5V8VcBKCn89LN+qngm19-Z_-4A@mail.gmail.com>
Subject: Re: maintainer mode and test framework
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=089e0111e07aec10bd051e105127

--089e0111e07aec10bd051e105127
Content-Type: text/plain; charset=UTF-8

On Aug 24, 2015 08:45, "Eric Covener" <covener@gmail.com> wrote:
>
> On Mon, Aug 24, 2015 at 9:41 AM, Stefan Eissing
> <stefan.eissing@greenbytes.de> wrote:
> > mod_test_session.c did some non C90 variable declarations intermixed
with code. I'll check in the fix shortly. Btw. what is holding us back from
more recent C? Old platforms, obviously... Do we have an idea which?
>
> Ah, that is a brand new test module committed this month.
>
> I am not sure exactly where we really have the constraint.  Visual
> Studio 6 on Windows in the old releases?  I think my own pet/corporate
> overlord platforms (z/OS, AIX) are not an issue.

No issue on MS, plenty of more modern compilers, but MS C has been MS C++
with all sort of other oddities forever.

I am thinking oddballs like hpux and old Solaris compilers, but in trunk do
we really need to keep accommodating for httpd 2.6/3.0?

In the test suite, since it is used to validate legacy httpd, it seems
prudent to keep compatibility for a while longer still.

--089e0111e07aec10bd051e105127
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<p dir=3D"ltr">On Aug 24, 2015 08:45, &quot;Eric Covener&quot; &lt;<a href=
=3D"mailto:covener@gmail.com">covener@gmail.com</a>&gt; wrote:<br>
&gt;<br>
&gt; On Mon, Aug 24, 2015 at 9:41 AM, Stefan Eissing<br>
&gt; &lt;<a href=3D"mailto:stefan.eissing@greenbytes.de">stefan.eissing@gre=
enbytes.de</a>&gt; wrote:<br>
&gt; &gt; mod_test_session.c did some non C90 variable declarations intermi=
xed with code. I&#39;ll check in the fix shortly. Btw. what is holding us b=
ack from more recent C? Old platforms, obviously... Do we have an idea whic=
h?<br>
&gt;<br>
&gt; Ah, that is a brand new test module committed this month.<br>
&gt;<br>
&gt; I am not sure exactly where we really have the constraint.=C2=A0 Visua=
l<br>
&gt; Studio 6 on Windows in the old releases?=C2=A0 I think my own pet/corp=
orate<br>
&gt; overlord platforms (z/OS, AIX) are not an issue.</p>
<p dir=3D"ltr">No issue on MS, plenty of more modern compilers, but MS C ha=
s been MS C++ with all sort of other oddities forever.</p>
<p dir=3D"ltr">I am thinking oddballs like hpux and old Solaris compilers, =
but in trunk do we really need to keep accommodating for httpd 2.6/3.0?</p>
<p dir=3D"ltr">In the test suite, since it is used to validate legacy httpd=
, it seems prudent to keep compatibility for a while longer still.</p>

--089e0111e07aec10bd051e105127--

From dev-return-83529-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 15:51:29 2015
Return-Path: <dev-return-83529-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E14E118AF0
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 15:51:29 +0000 (UTC)
Received: (qmail 13442 invoked by uid 500); 24 Aug 2015 15:51:29 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 13364 invoked by uid 500); 24 Aug 2015 15:51:29 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 13353 invoked by uid 99); 24 Aug 2015 15:51:29 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 15:51:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id A0FD21AAC4C
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 15:51:28 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id Nk459rbf8s15 for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 15:51:27 +0000 (UTC)
Received: from mail-ig0-f174.google.com (mail-ig0-f174.google.com [209.85.213.174])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 1F193212C5
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 15:51:27 +0000 (UTC)
Received: by igcse8 with SMTP id se8so50577309igc.1
        for <dev@httpd.apache.org>; Mon, 24 Aug 2015 08:51:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=dUOILRL6pZ21SrVhI+sU9x4eKz2PZRzJDENUOocVo90=;
        b=J0YERTnNR7umkvV5qJJccJQZwurriMG9449PX9mDKquL0O6fZmI/R7BY7uTpvUe/FT
         eGP+4mo+nQZYaExQPvb9Gg/0I8xhINWdXYhEMIDjdcUAsipkIx06ODpmn6zTsaqCsWhK
         jNIJL+9nXK9U2lEXDBCgdDQ1Jqqp/RsqLhqY9gzD7+UauKsnyJ6MQA+ujO67A8XuVK9s
         fnOYMaCSBd7CollYAOOt1PxUZu2qQtvHGXJCrfdsMGC82HWf/cn6KQTugpfEP+WdWUV3
         27CeONRqccBcgnOPzShkvfuEx+wWmauHQBa38HG9qi4TlfG5/z3nukKaJ/oLVZ97re3L
         fUcQ==
MIME-Version: 1.0
X-Received: by 10.50.50.205 with SMTP id e13mr12142197igo.70.1440431486185;
 Mon, 24 Aug 2015 08:51:26 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Mon, 24 Aug 2015 08:51:25 -0700 (PDT)
In-Reply-To: <55DB2E9A.10307@redhat.com>
References: <55DB2E9A.10307@redhat.com>
Date: Mon, 24 Aug 2015 17:51:25 +0200
Message-ID: <CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com>
Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi Jan,

I was working on the same issue... and was going to implement 2) :)

On Mon, Aug 24, 2015 at 4:47 PM, Jan Kalu=C5=BEa <jkaluza@redhat.com> wrote=
:
>
> Now, the root of the error is that the scoreboard size is static (set to
> proxy_lb_workers + PROXY_DYNAMIC_BALANCER_LIMIT), but it is not increment=
ed
> when ProxyPass with balancer is used in the virtualhost. This leads to la=
ck
> of space in scoreboard when Balancers are used in multiple virtualhosts.

I came to the same conclusion.

>
> I think there are two possible fixes:
>
> 1) Do not use server->server_hostname when computing hash which is used t=
o
> determine right scoreboard field. I think this would fix this bug, but I'=
m
> not sure what would happen in situations when you define 2 balancers with
> the same name in different virtualhosts...

They should be different balancers...

>
> On the other-side, when there is global Proxy balancer, it make sense to =
use
> the same worker->s for all the ProxyPass in virtualhosts.

This would break compatibility.

>
> 2) Increment proxy_lb_workers according to number of workers in balancer
> when using "ProxyPass /foobar/ Balancer://foobar/" in the VirtualHost. Th=
e
> scoreboard would have right size and ap_proxy_set_scoreboard_lb would not
> fail then.

I think we can do this quite easily in merge_proxy_config(), by
incrementing proxy_lb_workers for each base->balancers->workers. I did
not test it yet though.

Regards,
Yann.

From dev-return-83530-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 16:30:14 2015
Return-Path: <dev-return-83530-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CD2DA18DE1
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 16:30:14 +0000 (UTC)
Received: (qmail 72611 invoked by uid 500); 24 Aug 2015 16:30:14 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 72530 invoked by uid 500); 24 Aug 2015 16:30:14 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 72520 invoked by uid 99); 24 Aug 2015 16:30:14 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 16:30:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id F0D35181BC3
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 16:30:13 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id amI3PHqnGQZW for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 16:30:09 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 6ED1820FA9
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 16:30:09 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 7B0AD15A0683
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 18:29:48 +0200 (CEST)
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Subject: protocols and mod_h2 consolidation
Message-Id: <15D90C4A-6D6C-48B7-8A56-DF46E4B07370@greenbytes.de>
Date: Mon, 24 Aug 2015 18:29:47 +0200
To: dev@httpd.apache.org
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
X-Mailer: Apple Mail (2.2104)

As you might have noticed, I am doing some cleanup work on mod_h2 and =
want to create THE PATCH for backporting soon. The new core directives =
"Protocols" and "ProtocolsHonorOrder" are implemented, such as on a =
server or virtual host one may write

   Protocols  h2c http/1.1      # enable h2c and http/1.1 here, =
preference decided by client ordering

   Protocols  http/1.1          # only allow http/1.1 here

   Protocols  h2 http/1.1       # enable h2c and http/1.1 here, with =
preference to h2
   ProtocolsHonorOrder on

   Protocols  YOLO h2 http/1.1  # enable YOLO protocol among others, =
which has no effect unless a module claims to implement it.=20

With no "Protocols" specified, all protocols offered by the client and =
implemented by a module may be negotiated with the preference being in =
the client's ordering. This allows "drop in" of protocol modules without =
further configuration.

Inheritance of "Protocols" between servers and virtual hosts is =
copyOrReplace, meaning vhosts without Protocols inherit from base =
server. vhosts with a "Protocols" ignore base server lists. This allows =
restrictions in the vhosts at the cost of some redundancy. But Protocols =
differences between base servers and vhosts seem to be rather esotheric =
right now. So, I tried to keep it simple.

The "ProtocolsHonorOrder" name I tried to name in the spirit of the =
SSLHonorCipherOrder directive. No strong feelings about it.

I hope this works for everyone. The next weeks might be a good time to =
think about it and propose any changes and correct my mistakes.

Thanks.

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83531-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 16:39:20 2015
Return-Path: <dev-return-83531-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8559E18E85
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 16:39:20 +0000 (UTC)
Received: (qmail 99852 invoked by uid 500); 24 Aug 2015 16:39:20 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 99780 invoked by uid 500); 24 Aug 2015 16:39:20 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 99770 invoked by uid 99); 24 Aug 2015 16:39:20 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 16:39:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 9D974ED6C8
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 16:39:19 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.119
X-Spam-Level:
X-Spam-Status: No, score=-0.119 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 9OMLj4tQyUWp for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 16:39:10 +0000 (UTC)
Received: from mail-qk0-f177.google.com (mail-qk0-f177.google.com [209.85.220.177])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id A75BF20FA9
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 16:39:09 +0000 (UTC)
Received: by qkbm65 with SMTP id m65so75164624qkb.2
        for <dev@httpd.apache.org>; Mon, 24 Aug 2015 09:39:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=BVqDhpfYJs3Hr1MVjZlhyasbON6+BaEnXS9nxw9peG0=;
        b=fpCqH0CZZxQ9IqkWegn1us43/2WrhS1XcLjPhP7NG8sUpeyHo4ZQj7iv4ZeCCNN5A2
         nJcqwv+GGWDG5tZAf1MdFZFzsHFJ7iXcGE1h3ILvyCdCg8QsJjkkjJ+3WczkPIkhEyUe
         EsoJTw7o1sJzlx5oaKgSant2uaNVrCez8KhBz6x0M5AKFYBcabzRjOu7ImOfOedAVtVT
         3/G7AT0+IHWADN7EDXo8jDYiUTpP6IiZqNGlFUHqBVDh+vGI5ZzI+ULgjZfgkmcHIP10
         NoMui49tQ6T5ZSpECv4D+c/UnmZ8zz/GLdSI6cfcrT9a1PycXC/tnmrAlyRGicYy7rM3
         TDZQ==
MIME-Version: 1.0
X-Received: by 10.13.225.2 with SMTP id k2mr29745339ywe.122.1440434343127;
 Mon, 24 Aug 2015 09:39:03 -0700 (PDT)
Received: by 10.37.207.66 with HTTP; Mon, 24 Aug 2015 09:39:03 -0700 (PDT)
In-Reply-To: <15D90C4A-6D6C-48B7-8A56-DF46E4B07370@greenbytes.de>
References: <15D90C4A-6D6C-48B7-8A56-DF46E4B07370@greenbytes.de>
Date: Mon, 24 Aug 2015 12:39:03 -0400
Message-ID: <CALK=YjMow2OqSAcxH9pdymSG5uoVeoijYz6svg7DfM+9A1iFWg@mail.gmail.com>
Subject: Re: protocols and mod_h2 consolidation
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Mon, Aug 24, 2015 at 12:29 PM, Stefan Eissing
<stefan.eissing@greenbytes.de> wrote:
> I hope this works for everyone. The next weeks might be a good time to think about it and propose any changes and correct my mistakes.

Look good in concept to me

From dev-return-83532-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 21:19:04 2015
Return-Path: <dev-return-83532-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B7FED18180
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 21:19:04 +0000 (UTC)
Received: (qmail 71810 invoked by uid 500); 24 Aug 2015 21:19:04 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 71737 invoked by uid 500); 24 Aug 2015 21:19:04 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 71727 invoked by uid 99); 24 Aug 2015 21:19:03 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 21:19:03 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 6A7BFED796
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 21:19:03 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 1LhgJeHldHAi for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 21:19:02 +0000 (UTC)
Received: from mail-io0-f195.google.com (mail-io0-f195.google.com [209.85.223.195])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 91C1E42B59
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 21:19:02 +0000 (UTC)
Received: by iods203 with SMTP id s203so13281272iod.2
        for <dev@httpd.apache.org>; Mon, 24 Aug 2015 14:19:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=8O3Hcm5GFwaOsCrD21Noa4KIJh6pA2D22spU7O9YXBs=;
        b=VQOfn+K37Pvg2AFndTUoxq9Vqvv2dDcloOF0CCRXJyuGEAQE2WjfnoJd64j3DIdlQv
         6Eh63XBGrMUM2FgdWLHmos51s+yk5pkbaUO1DDNeJJgI794VduecaOtERuP6nQk1BlNp
         TXzAvbD/FS1u5J1RWtTfJ9BX4z9kzrByQeW/z3ifO79s49xcIWuhk1FXacEl7lxnRcwr
         XFmvFAJSYafPWKZnIH9XHwQXy4gCjBoPNMo03cJnuJrLBg/9z1/RKkHD9/ETud3qAH4O
         9JT0S/kCvh4OTWr04Fsi1n+lnhbI4inGXNNXtO6sN8SGaiZPNpSbL1NQ61gt+WhLjHGl
         yQzA==
MIME-Version: 1.0
X-Received: by 10.107.3.19 with SMTP id 19mr20995978iod.132.1440450775776;
 Mon, 24 Aug 2015 14:12:55 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Mon, 24 Aug 2015 14:12:55 -0700 (PDT)
In-Reply-To: <CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com>
References: <55DB2E9A.10307@redhat.com>
	<CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com>
Date: Mon, 24 Aug 2015 23:12:55 +0200
Message-ID: <CAKQ1sVMFBhih-rq61WZkf+jbZ_dQd6+Y5Ekar--9v10+yuNO=Q@mail.gmail.com>
Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Mon, Aug 24, 2015 at 5:51 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>
> On Mon, Aug 24, 2015 at 4:47 PM, Jan Kalu=C5=BEa <jkaluza@redhat.com> wro=
te:
>>
>> 2) Increment proxy_lb_workers according to number of workers in balancer
>> when using "ProxyPass /foobar/ Balancer://foobar/" in the VirtualHost. T=
he
>> scoreboard would have right size and ap_proxy_set_scoreboard_lb would no=
t
>> fail then.
>
> I think we can do this quite easily in merge_proxy_config(), by
> incrementing proxy_lb_workers for each base->balancers->workers. I did
> not test it yet though.

I tested the below which seems to work.

Index: modules/proxy/mod_proxy.c
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
--- modules/proxy/mod_proxy.c    (revision 1697358)
+++ modules/proxy/mod_proxy.c    (working copy)
@@ -1135,6 +1135,7 @@ static void * create_proxy_config(apr_pool_t *p, s

 static void * merge_proxy_config(apr_pool_t *p, void *basev, void *overrid=
esv)
 {
+    int i;
     proxy_server_conf *ps =3D apr_pcalloc(p, sizeof(proxy_server_conf));
     proxy_server_conf *base =3D (proxy_server_conf *) basev;
     proxy_server_conf *overrides =3D (proxy_server_conf *) overridesv;
@@ -1147,6 +1148,13 @@ static void * merge_proxy_config(apr_pool_t *p, vo
     ps->allowed_connect_ports =3D apr_array_append(p,
base->allowed_connect_ports, overrides->allowed_connect_ports);
     ps->workers =3D apr_array_append(p, base->workers, overrides->workers)=
;
     ps->balancers =3D apr_array_append(p, base->balancers, overrides->bala=
ncers);
+    /* The balancers inherited from base don't have their members reserved=
 on
+     * the scorebord_lb for this server, account for them now.
+     */
+    for (i =3D 0; i < base->balancers->nelts; ++i) {
+        proxy_balancer *balancer =3D (proxy_balancer *)base->balancers->el=
ts + i;
+        proxy_lb_workers +=3D balancer->workers->nelts;
+    }
     ps->forward =3D overrides->forward ? overrides->forward : base->forwar=
d;
     ps->reverse =3D overrides->reverse ? overrides->reverse : base->revers=
e;

--

Please note that since all the workers would really be accounted in
the scoreboard, configurations like the one of PR 58267 (with
inherited balancers) would also need bigger SHMs (but no more) than
currently...

WDYT?

From dev-return-83533-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 24 21:39:50 2015
Return-Path: <dev-return-83533-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 63E8418280
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 24 Aug 2015 21:39:50 +0000 (UTC)
Received: (qmail 43487 invoked by uid 500); 24 Aug 2015 21:39:50 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 43413 invoked by uid 500); 24 Aug 2015 21:39:49 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 43403 invoked by uid 99); 24 Aug 2015 21:39:49 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Aug 2015 21:39:49 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 5B36EC0471
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 21:39:49 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.007
X-Spam-Level:
X-Spam-Status: No, score=-0.007 tagged_above=-999 required=6.31
	tests=[HEADER_FROM_DIFFERENT_DOMAINS=0.001, RP_MATCHES_RCVD=-0.006,
	SPF_HELO_PASS=-0.001, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id ECnOgeRrPQ1Z for <dev@httpd.apache.org>;
	Mon, 24 Aug 2015 21:39:46 +0000 (UTC)
Received: from plane.gmane.org (plane.gmane.org [80.91.229.3])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id E6B5C2557B
	for <dev@httpd.apache.org>; Mon, 24 Aug 2015 21:39:45 +0000 (UTC)
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <apache-dev@m.gmane.org>)
	id 1ZTzSx-0005JP-6R
	for dev@httpd.apache.org; Mon, 24 Aug 2015 23:39:43 +0200
Received: from aorleans-552-1-124-174.w92-140.abo.wanadoo.fr ([92.140.251.174])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Mon, 24 Aug 2015 23:39:43 +0200
Received: from christophe.jaillet by aorleans-552-1-124-174.w92-140.abo.wanadoo.fr with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Mon, 24 Aug 2015 23:39:43 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: dev@httpd.apache.org
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Subject: Re: svn commit: r1696105 - in /httpd/httpd/trunk: CHANGES
 docs/manual/mod/mod_socache_memcache.xml modules/cache/mod_socache_memcache.c
Date: Mon, 24 Aug 2015 23:39:37 +0200
Lines: 54
Message-ID: <mrg2up$6og$1@ger.gmane.org>
References: <20150815220509.75D1BAC0456@hades.apache.org>
 <CAKQ1sVO_jvv1NaE8jJ2boadFa8RBre3P6bdz+V3M9MOV=b2Rrw@mail.gmail.com>
 <mrecue$bou$1@ger.gmane.org>
 <CAKQ1sVNWi2qtE=VYTyRjAe9gwzeFvfLH++UQZX6Ly-FfoPCY5A@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: aorleans-552-1-124-174.w92-140.abo.wanadoo.fr
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
In-Reply-To: <CAKQ1sVNWi2qtE=VYTyRjAe9gwzeFvfLH++UQZX6Ly-FfoPCY5A@mail.gmail.com>
X-Antivirus: avast! (VPS 150824-4, 24/08/2015), Outbound message
X-Antivirus-Status: Clean

Le 24/08/2015 11:18, Yann Ylavic a écrit :
> On Mon, Aug 24, 2015 at 8:17 AM, Christophe JAILLET
> <christophe.jaillet@wanadoo.fr> wrote:
>> Le 21/08/2015 15:47, Yann Ylavic a écrit :
>>> On Sun, Aug 16, 2015 at 12:05 AM,  <jailletc36@apache.org> wrote:
>>>> +    if ((i < 1) || (i > 1800)) {
>>> Why a limit of 1800? Maybe the implicit INT_MAX is good enough.
>>> Also the memcached may never close its connections by itself, or
>>> always do, so -1 and 0 could also be interesting...
>> Obviously 0 should be allowed, but I don't see any reason for -1. What
>> difference would you make between the 2?
> Hm, I thought that for apr_memcache_server_create (hence
> apr_reslist_create), ttl=0 was "always close" (immediately) and -1 was
> "never close" (infinite), but that's not the case (ttl=0 means "never
> close", and -1 is invalid).
Correct.

> I don't know if memcached can be configured to always close the
> connections when done (I guess so), but since the minimal TTL is 1
> second, we could end up reusing connections closed remotely (without
> recovering on error) in this case.
AFAIK, memcached can not be configured to close connections by itself.

Apparently all mpm are configured to ignore SIGPIPE, so 
apr_socket_send() should just return the error and the logic in 
apr_memcache should handle it.
I.e.:
      ms_bad_conn(ms, conn);
      apr_memcache_disable_server(mc, ms);


So why wouldn't we recover? If the connection is closed for whatever 
reason, wouldn't the server be marked as DEAD?
Following calls to apr_memcache_find_server_hash_default would try it 
again after 5 s.

> So maybe our best option is to use ap_timeout_parameter_parse() to set
> sconf->ttl, which would allow a TTL of 1 microsecond (min), and almost
> no max (native 64bit apr_time_t)...
>
> Regards,
> Yann.
>
TTL value passed to apr_memcache_server_create is a apr_uint32_t.
It is then passed as-is to apr_reslist_create as a apr_interval_time_t 
(i.e. apr_int64_t)

So, there *IS* a max value of 2^32 usec  =  4294 s  ~ 3600 s  =  1h

Indeed, ap_timeout_parameter_parse() would be nice. This would allow TTL in millisecond (ms). min is for minutes.
However having an upper limit of 4294 s (or 3600 in order to have a round value) still makes sense to me.


CJ


From dev-return-83534-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 04:43:14 2015
Return-Path: <dev-return-83534-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BF240180A2
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 04:43:14 +0000 (UTC)
Received: (qmail 1159 invoked by uid 500); 25 Aug 2015 04:43:14 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 1093 invoked by uid 500); 25 Aug 2015 04:43:14 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 1083 invoked by uid 99); 25 Aug 2015 04:43:14 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 04:43:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 8E6BF182108
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 04:43:13 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0
X-Spam-Level:
X-Spam-Status: No, score=0 tagged_above=-999 required=6.31 tests=[none]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 60t3BvB_KErd for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 04:43:06 +0000 (UTC)
Received: from fed1rmfepi107.cox.net (fed1rmfepi107.cox.net [68.230.241.138])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTP id C1B5A255AF
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 04:43:06 +0000 (UTC)
Received: from fed1rmimpo306 ([68.230.241.174]) by fed1rmfepo203.cox.net
          (InterMail vM.8.01.05.15 201-2260-151-145-20131218) with ESMTP
          id <20150825041353.FZEA2359.fed1rmfepo203.cox.net@fed1rmimpo306>
          for <dev@httpd.apache.org>; Tue, 25 Aug 2015 00:13:53 -0400
Received: from [192.168.1.33] ([98.176.34.113])
	by fed1rmimpo306 with cox
	id 8sDt1r0072STVfm01sDtXu; Tue, 25 Aug 2015 00:13:53 -0400
X-CT-Class: Clean
X-CT-Score: 0.00
X-CT-RefID: str=0001.0A020206.55DBEB81.00CB,ss=1,re=0.000,fgs=0
X-CT-Spam: 0
X-Authority-Analysis: v=2.0 cv=LKq4tuq9 c=1 sm=1
 a=8xCO7h6kmYZdHn5tUOQhsw==:17 a=LrjODJgKAAAA:8 a=1zd1egijY_QA:10
 a=1TQMhOV718FTQ4HlUf4A:9 a=QEXdDO2ut3YA:10 a=8xCO7h6kmYZdHn5tUOQhsw==:117
X-CM-Score: 0.00
Authentication-Results: cox.net; auth=pass (PLAIN) smtp.auth=glewis63@cox.net
Message-ID: <55DBEB00.9080106@gknw.net>
Date: Mon, 24 Aug 2015 21:11:44 -0700
From: Gregg Smith <gls@gknw.net>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2.28) Gecko/20120306 Thunderbird/3.1.20
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: protocols and mod_h2 consolidation
References: <15D90C4A-6D6C-48B7-8A56-DF46E4B07370@greenbytes.de>
In-Reply-To: <15D90C4A-6D6C-48B7-8A56-DF46E4B07370@greenbytes.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

On 8/24/2015 9:29 AM, Stefan Eissing wrote:

> I hope this works for everyone. The next weeks might be a good time to think about it and propose any changes and correct my mistakes.

There are two things that go bump on my lowest non-eol version of MSVC.
h2_worker.c
.\h2_worker.c(113) : error C2440: 'function' : cannot convert from 'void 
*(__cdecl *)(apr_thread_t *,void *)' to 'apr_thread_start_t'
.\h2_worker.c(113) : warning C4022: 'apr_thread_create' : pointer 
mismatch for actual parameter 3

Casting execute to apr_thread_start_t (what apr_thread_create expects) 
seems to quiet the compiler and FireFox seems to work with it.

h2_session.c
.\h2_session.c(1079) : error C2440: 'type cast' : cannot convert from 
'int' to 'nghttp2_data_source'
.\h2_session.c(1081) : warning C4047: 'initializing' : 'int' differs in 
levels of indirection from 'nghttp2_data_source_read_callback'

This cast to a union type, this MSVC version's docs on Unions has a note 
in the comments mentioning;
>
> We recommend that you do not use a union to cast data from one data 
> type to another because union members occupy the same address in memory.
>
> There is no data-conversion support for unions. The results of 
> interchanging writes and reads between union members of different 
> types are unpredictable and depend on a variety of reasons.
>

They are evidently enforcing this. I just removed the cast and it builds 
and Firefox seems to work.

Other nits of interest or not;
h2_stream_set.c
.\h2_stream_set.c(139) : warning C4028: formal parameter 2 different 
from declaration

The function is prototyped as: h2_stream_set_match_fn *match
but in h2_stream_set.c it is: h2_stream_set_match_fn match

I get 2 different results for the $ENV{'SERVER_PROTOCOL'} in my perl 
script depending on the machine. My server gives me "HTTP/1.1" and 
running locally on my build machine I get "INCLUDED." Firefox says it is 
HTTP/2.0 200 OK so both results in this $ENV seem incorrect. I'm not 
sure why the difference as mod_h2 is configured same on both.

Regards,
Gregg






From dev-return-83535-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 07:31:18 2015
Return-Path: <dev-return-83535-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 310E8186AE
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 07:31:18 +0000 (UTC)
Received: (qmail 24272 invoked by uid 500); 25 Aug 2015 07:31:17 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 24200 invoked by uid 500); 25 Aug 2015 07:31:17 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 24190 invoked by uid 99); 25 Aug 2015 07:31:17 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 07:31:17 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 0BE331AAB89
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 07:31:17 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id VG-_5djO8doN for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 07:31:16 +0000 (UTC)
Received: from mail-ig0-f171.google.com (mail-ig0-f171.google.com [209.85.213.171])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id EB91B2557B
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 07:31:15 +0000 (UTC)
Received: by igcse8 with SMTP id se8so5705453igc.1
        for <dev@httpd.apache.org>; Tue, 25 Aug 2015 00:31:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=S8kQtgACnUltkP3A0nPzoVkc5zmwpDxPZiwcPWrtjq0=;
        b=YQgp2dIvlZtoRO4zmH5dockeYEOKhbYsFOAGjbg6pQ4ZOIpGSQcusR2kCBFy32Z+Z1
         bA1DGgDuiUT6n8qoFcCXPVfa1u9u4RRlFm0LRbnWFZTRk3YWSif4j3un+JS7BcQgbqpH
         4C9wNNERNWkb7bBeA715a+dCahIpfqiX6qkSAjW5JJTR377fkN3EwNfyX5x0mUuUYWvB
         mHYAQ1zTl+s2kPjwslmIhWUAJ0RdZy/tUVzx2M0F5AlH1Fpx/yh9XmDrENzX8/uVy+6h
         r4p2BXxl2A47d5nRnBM4PA3LrEtK1ZTTAIpjhPvxDICczIysXuboziUxc/BlagixYR1f
         HU8w==
MIME-Version: 1.0
X-Received: by 10.50.64.147 with SMTP id o19mr991970igs.15.1440487875278; Tue,
 25 Aug 2015 00:31:15 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Tue, 25 Aug 2015 00:31:15 -0700 (PDT)
In-Reply-To: <mrg2up$6og$1@ger.gmane.org>
References: <20150815220509.75D1BAC0456@hades.apache.org>
	<CAKQ1sVO_jvv1NaE8jJ2boadFa8RBre3P6bdz+V3M9MOV=b2Rrw@mail.gmail.com>
	<mrecue$bou$1@ger.gmane.org>
	<CAKQ1sVNWi2qtE=VYTyRjAe9gwzeFvfLH++UQZX6Ly-FfoPCY5A@mail.gmail.com>
	<mrg2up$6og$1@ger.gmane.org>
Date: Tue, 25 Aug 2015 09:31:15 +0200
Message-ID: <CAKQ1sVMZDf9JaeJziPkyveDwCe-UPYc=FttYZBhXpeCsJshmkw@mail.gmail.com>
Subject: Re: svn commit: r1696105 - in /httpd/httpd/trunk: CHANGES
 docs/manual/mod/mod_socache_memcache.xml modules/cache/mod_socache_memcache.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Mon, Aug 24, 2015 at 11:39 PM, Christophe JAILLET
<christophe.jaillet@wanadoo.fr> wrote:
> Le 24/08/2015 11:18, Yann Ylavic a =C3=A9crit :
>>
>> I don't know if memcached can be configured to always close the
>> connections when done (I guess so), but since the minimal TTL is 1
>> second, we could end up reusing connections closed remotely (without
>> recovering on error) in this case.
>
> AFAIK, memcached can not be configured to close connections by itself.

No keepalive/idle timeout?

>
> Apparently all mpm are configured to ignore SIGPIPE, so apr_socket_send()
> should just return the error and the logic in apr_memcache should handle =
it.
> I.e.:
>      ms_bad_conn(ms, conn);
>      apr_memcache_disable_server(mc, ms);
>
>
> So why wouldn't we recover?

We would, but AFAICS not for the current connection (and that's suitable).

> If the connection is closed for whatever reason,
> wouldn't the server be marked as DEAD?

Yes, but so will the current request which has been sent to a sink,
should the remote have closed the idle connection (under us), with an
error returned to the socache.

The TTL aims to be synchronized with the remote idle timeout, so that
on the client side (with TTL < remote-idle-timeout) we never send
anything to a connection already (half-)closed remotely, and are sure
that any send() error comes from an interrupted connection (for
whatever reason, e.g. memcached restart).

I mean either memcached (or a fork) handles an idle timeout, or the
TTL won't help here.
For forcible closures detection, we'd need something like
ap_proxy_is_socket_connected() before reusing it (but that's also racy
and BTW should be done in apr_memcache).

>
>> So maybe our best option is to use ap_timeout_parameter_parse() to set
>> sconf->ttl, which would allow a TTL of 1 microsecond (min), and almost
>> no max (native 64bit apr_time_t)...
>>
> TTL value passed to apr_memcache_server_create is a apr_uint32_t.
> It is then passed as-is to apr_reslist_create as a apr_interval_time_t (i=
.e.
> apr_int64_t)
>
> So, there *IS* a max value of 2^32 usec  =3D  4294 s  ~ 3600 s  =3D  1h
>
> Indeed, ap_timeout_parameter_parse() would be nice. This would allow TTL =
in
> millisecond (ms). min is for minutes.
> However having an upper limit of 4294 s (or 3600 in order to have a round
> value) still makes sense to me.

I'm fine with the upper limit too (though INT64_MAX hours would be
kind of an infinity :p ).
I was just worried about the lower one with agressive (< 1s) idle
timeouts (if that ever exists), and the compatibility with the
ineffective but legacy/working hard TTL < 1ms (600us)...

Anyway, thanks for the commit Christophe, you are probably right we
shouldn't overengineer this if not necessary.

From dev-return-83536-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 08:22:39 2015
Return-Path: <dev-return-83536-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C7F341882E
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 08:22:39 +0000 (UTC)
Received: (qmail 39368 invoked by uid 500); 25 Aug 2015 08:22:39 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 39294 invoked by uid 500); 25 Aug 2015 08:22:39 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 39284 invoked by uid 99); 25 Aug 2015 08:22:39 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 08:22:39 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 7A076EDA78
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 08:22:38 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -1.339
X-Spam-Level:
X-Spam-Status: No, score=-1.339 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-1.338, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 3K9T7AU9cfbm for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 08:22:33 +0000 (UTC)
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id B7EDE25573
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 08:22:33 +0000 (UTC)
Received: from int-mx11.intmail.prod.int.phx2.redhat.com (int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by mx1.redhat.com (Postfix) with ESMTPS id 1C58EFC0EC
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 08:22:33 +0000 (UTC)
Received: from dhcp-24-191.brq.redhat.com (vpn1-5-154.ams2.redhat.com [10.36.5.154])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP id t7P8MV96030474
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 04:22:32 -0400
Message-ID: <55DC25C7.9000607@redhat.com>
Date: Tue, 25 Aug 2015 10:22:31 +0200
From: =?UTF-8?B?SmFuIEthbHXFvmE=?= <jkaluza@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:31.0) Gecko/20100101 Thunderbird/31.7.0
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
References: <55DB2E9A.10307@redhat.com>	<CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com> <CAKQ1sVMFBhih-rq61WZkf+jbZ_dQd6+Y5Ekar--9v10+yuNO=Q@mail.gmail.com>
In-Reply-To: <CAKQ1sVMFBhih-rq61WZkf+jbZ_dQd6+Y5Ekar--9v10+yuNO=Q@mail.gmail.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24

On 08/24/2015 11:12 PM, Yann Ylavic wrote:
> On Mon, Aug 24, 2015 at 5:51 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>
>> On Mon, Aug 24, 2015 at 4:47 PM, Jan Kaluža <jkaluza@redhat.com> wrote:
>>>
>>> 2) Increment proxy_lb_workers according to number of workers in balancer
>>> when using "ProxyPass /foobar/ Balancer://foobar/" in the VirtualHost. The
>>> scoreboard would have right size and ap_proxy_set_scoreboard_lb would not
>>> fail then.
>>
>> I think we can do this quite easily in merge_proxy_config(), by
>> incrementing proxy_lb_workers for each base->balancers->workers. I did
>> not test it yet though.
>
> I tested the below which seems to work.

Hm, this reserves the slots in scoreboard even when the balancers are 
not used in the virtualhost, or am I wrong?

I originally thought about increasing proxy_lb_workers only when they 
are used in the ProxyPass* in the vhost.

> Index: modules/proxy/mod_proxy.c
> ===================================================================
> --- modules/proxy/mod_proxy.c    (revision 1697358)
> +++ modules/proxy/mod_proxy.c    (working copy)
> @@ -1135,6 +1135,7 @@ static void * create_proxy_config(apr_pool_t *p, s
>
>   static void * merge_proxy_config(apr_pool_t *p, void *basev, void *overridesv)
>   {
> +    int i;
>       proxy_server_conf *ps = apr_pcalloc(p, sizeof(proxy_server_conf));
>       proxy_server_conf *base = (proxy_server_conf *) basev;
>       proxy_server_conf *overrides = (proxy_server_conf *) overridesv;
> @@ -1147,6 +1148,13 @@ static void * merge_proxy_config(apr_pool_t *p, vo
>       ps->allowed_connect_ports = apr_array_append(p,
> base->allowed_connect_ports, overrides->allowed_connect_ports);
>       ps->workers = apr_array_append(p, base->workers, overrides->workers);
>       ps->balancers = apr_array_append(p, base->balancers, overrides->balancers);
> +    /* The balancers inherited from base don't have their members reserved on
> +     * the scorebord_lb for this server, account for them now.
> +     */
> +    for (i = 0; i < base->balancers->nelts; ++i) {
> +        proxy_balancer *balancer = (proxy_balancer *)base->balancers->elts + i;
> +        proxy_lb_workers += balancer->workers->nelts;
> +    }
>       ps->forward = overrides->forward ? overrides->forward : base->forward;
>       ps->reverse = overrides->reverse ? overrides->reverse : base->reverse;
>
> --
>
> Please note that since all the workers would really be accounted in
> the scoreboard, configurations like the one of PR 58267 (with
> inherited balancers) would also need bigger SHMs (but no more) than
> currently...
>
> WDYT?
>

Regards,
Jan Kaluza



From dev-return-83537-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 08:48:39 2015
Return-Path: <dev-return-83537-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B777918931
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 08:48:39 +0000 (UTC)
Received: (qmail 4233 invoked by uid 500); 25 Aug 2015 08:48:39 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 4149 invoked by uid 500); 25 Aug 2015 08:48:39 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 4139 invoked by uid 99); 25 Aug 2015 08:48:39 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 08:48:39 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id C280B182359
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 08:48:38 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.998
X-Spam-Level:
X-Spam-Status: No, score=0.998 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H2=-0.001,
	SPF_HELO_PASS=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id d5AdJnORtGX7 for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 08:48:28 +0000 (UTC)
Received: from mail1.bemta14.messagelabs.com (mail1.bemta14.messagelabs.com [193.109.254.111])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 2F85620383
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 08:48:27 +0000 (UTC)
Received: from [193.109.254.3] by server-7.bemta-14.messagelabs.com id 83/A8-28221-4DB2CD55; Tue, 25 Aug 2015 08:48:20 +0000
X-Env-Sender: ruediger.pluem@vodafone.com
X-Msg-Ref: server-9.tower-184.messagelabs.com!1440492499!25673534!1
X-Originating-IP: [195.232.244.135]
X-StarScan-Received:
X-StarScan-Version: 6.13.16; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 6202 invoked from network); 25 Aug 2015 08:48:20 -0000
Received: from mailout03.vodafone.com (HELO mailout03.vodafone.com) (195.232.244.135)
  by server-9.tower-184.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 25 Aug 2015 08:48:20 -0000
Received: from mailint04.vodafone.com (mailint04.vodafone.com [195.232.244.201])
	by mailout03.vodafone.com (Postfix) with ESMTP id 3n0kVq4swLz17HLs
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 10:48:19 +0200 (CEST)
Received: from mailint04.vodafone.com (localhost [127.0.0.1])
	by mailint04.vodafone.com (Postfix) with ESMTP id 3n0kVq3pQZzfZGp
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 10:48:19 +0200 (CEST)
Received: from VOEXC02W.internal.vodafone.com (voexc02w.dc-ratingen.de [145.230.101.22])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mailint04.vodafone.com (Postfix) with ESMTPS id 3n0kVq3Q0szfZSQ
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 10:48:19 +0200 (CEST)
Received: from VOEXM10W.internal.vodafone.com ([169.254.2.132]) by
 VOEXC02W.internal.vodafone.com ([145.230.101.22]) with mapi id
 14.03.0224.002; Tue, 25 Aug 2015 10:48:19 +0200
From: =?utf-8?B?UGzDvG0sIFLDvGRpZ2VyLCBWb2RhZm9uZSBHcm91cA==?=
	<ruediger.pluem@vodafone.com>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
Subject: RE: PR 58267: Regression in 2.2.31 caused by r1680920
Thread-Topic: PR 58267: Regression in 2.2.31 caused by r1680920
Thread-Index: AQHQ3nvoe/hfZCbrK0Kj2QfLbhsYGZ4bKveAgABZ04CAALsWgIAAJd6A
Date: Tue, 25 Aug 2015 08:48:18 +0000
Message-ID: <AB1691BE05AE7F4992697F2A0835627AC62F2C7D@VOEXM10W.internal.vodafone.com>
References: <55DB2E9A.10307@redhat.com>
	<CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com>
 <CAKQ1sVMFBhih-rq61WZkf+jbZ_dQd6+Y5Ekar--9v10+yuNO=Q@mail.gmail.com>
 <55DC25C7.9000607@redhat.com>
In-Reply-To: <55DC25C7.9000607@redhat.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

SSB0aGluayB0aGUgY3VycmVudCBzdGF0ZSBvZiAyLjIuMzEgYnJlYWtzIGV4aXN0aW5nIDIuMi54
IGNvbmZpZ3VyYXRpb24gcHJpb3IgdG8gMi4yLjMxLg0KUHJpb3IgdG8gMi4yLjMxIHlvdSBjb3Vs
ZCBkbyB0aGUgZm9sbG93aW5nOg0KDQo8UHJveHkgQmFsYW5jZXI6Ly9wcm94eTE+DQpCYWxhbmNl
ck1lbWJlciBhanA6Ly8xMjcuMC4wLjE6NzAwMQ0KQmFsYW5jZXJNZW1iZXIgYWpwOi8vMTI3LjAu
MC4yOjcwMDINCjwvUHJveHk+DQoNCjx2aXJ0dWFsaG9zdCAqOjgwPg0KUHJveHlQYXNzIC8gYmFs
YW5jZXI6Ly9wcm94eTEvDQo8L3ZpcnR1YWxob3N0Pg0KDQo8dmlydHVhbGhvc3QgMTI3LjAuMC4x
OjgwODA+DQoNCjxMb2NhdGlvbiAvYm1hbmFnZXI+DQogICBzZXRoYW5kbGVyIGJhbGFuY2VyLW1h
bmFnZXINCjwvTG9jYXRpb24+DQoNCjwvdmlydHVhbGhvc3Q+DQoNCldpdGggdGhpcyBjb25maWd1
cmF0aW9uIHlvdSBjb3VsZCBwcm92aWRlIHlvdXIgcmV2ZXJzZSBwcm94eSB0byB0aGUgb3V0c2lk
ZSB3b3JsZCB3aGlsZSBoYXZpbmcgdGhlDQpiYWxhbmNlcm1hbmFnZXIgbWFuYWdpbmcgdGhlIGJh
bGFuY2VyIG9ubHkgbGlzdGVuaW5nIHRvIGxvY2FsaG9zdC4gVGhpcyBpcyBub3QgcG9zc2libGUg
YW55IGxvbmdlciB3aXRoIDIuMi4zMQ0KYXMgdGhlIHdvcmtlci0+cyBpcyBub3cgZGlmZmVyZW50
IGluIGVhY2ggdmlydHVhbGhvc3Qgd2hlcmVhcyBiZWZvcmUgaXQgd2FzIHRoZSBzYW1lIGFzIHRo
ZSB3b3JrZXItPmlkIHdhcyB1c2VkDQp0byBpZGVudGlmeSB0aGUgc2NvcmVib2FyZCBzbG90Lg0K
VGhlIHBhdGNoZXMgcHJvcG9zZWQgc28gZmFyIHdvdWxkIG5vdCBjaGFuZ2UgdGhpcy4gSSB0aGlu
ayBpbiBvcmRlciB0byByZXZlcnQgdG8gdGhlIG9sZCBiZWhhdmlvdXIgd2UgbmVlZCB0bw0Kc3Rv
cmUgd2l0aCBlYWNoIHdvcmtlciBpbiB3aGljaCBzZXJ2ZXJfcmVjIGNvbnRleHQgaXQgd2FzIGNy
ZWF0ZWQuIGUuZy4gYWRkaW5nIGEgY29uc3QgY2hhciAqIGZpZWxkIHRvIHRoZSB3b3JrZXIgdGhh
dCB3b3VsZCBiZSBmaWxsZWQgd2l0aA0Kc2VydmVyLT5zZXJ2ZXJfaG9zdG5hbWUuIFRoZW4gd2Ug
Y291bGQgdXNlIHRoaXMgdmFsdWUgZm9yIGNyZWF0aW5nIHRoZSBtZDUuDQoNClJlZ2FyZHMNCg0K
UsO8ZGlnZXINCg0KPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBKYW4gS2Fs
dcW+YSBbbWFpbHRvOmprYWx1emFAcmVkaGF0LmNvbV0NCj4gU2VudDogRGllbnN0YWcsIDI1LiBB
dWd1c3QgMjAxNSAxMDoyMw0KPiBUbzogZGV2QGh0dHBkLmFwYWNoZS5vcmcNCj4gU3ViamVjdDog
UmU6IFBSIDU4MjY3OiBSZWdyZXNzaW9uIGluIDIuMi4zMSBjYXVzZWQgYnkgcjE2ODA5MjANCj4g
DQo+IE9uIDA4LzI0LzIwMTUgMTE6MTIgUE0sIFlhbm4gWWxhdmljIHdyb3RlOg0KPiA+IE9uIE1v
biwgQXVnIDI0LCAyMDE1IGF0IDU6NTEgUE0sIFlhbm4gWWxhdmljIDx5bGF2aWMuZGV2QGdtYWls
LmNvbT4NCj4gd3JvdGU6DQo+ID4+DQo+ID4+IE9uIE1vbiwgQXVnIDI0LCAyMDE1IGF0IDQ6NDcg
UE0sIEphbiBLYWx1xb5hIDxqa2FsdXphQHJlZGhhdC5jb20+IHdyb3RlOg0KPiA+Pj4NCj4gPj4+
IDIpIEluY3JlbWVudCBwcm94eV9sYl93b3JrZXJzIGFjY29yZGluZyB0byBudW1iZXIgb2Ygd29y
a2VycyBpbg0KPiBiYWxhbmNlcg0KPiA+Pj4gd2hlbiB1c2luZyAiUHJveHlQYXNzIC9mb29iYXIv
IEJhbGFuY2VyOi8vZm9vYmFyLyIgaW4gdGhlIFZpcnR1YWxIb3N0Lg0KPiBUaGUNCj4gPj4+IHNj
b3JlYm9hcmQgd291bGQgaGF2ZSByaWdodCBzaXplIGFuZCBhcF9wcm94eV9zZXRfc2NvcmVib2Fy
ZF9sYiB3b3VsZA0KPiBub3QNCj4gPj4+IGZhaWwgdGhlbi4NCj4gPj4NCj4gPj4gSSB0aGluayB3
ZSBjYW4gZG8gdGhpcyBxdWl0ZSBlYXNpbHkgaW4gbWVyZ2VfcHJveHlfY29uZmlnKCksIGJ5DQo+
ID4+IGluY3JlbWVudGluZyBwcm94eV9sYl93b3JrZXJzIGZvciBlYWNoIGJhc2UtPmJhbGFuY2Vy
cy0+d29ya2Vycy4gSSBkaWQNCj4gPj4gbm90IHRlc3QgaXQgeWV0IHRob3VnaC4NCj4gPg0KPiA+
IEkgdGVzdGVkIHRoZSBiZWxvdyB3aGljaCBzZWVtcyB0byB3b3JrLg0KPiANCj4gSG0sIHRoaXMg
cmVzZXJ2ZXMgdGhlIHNsb3RzIGluIHNjb3JlYm9hcmQgZXZlbiB3aGVuIHRoZSBiYWxhbmNlcnMg
YXJlDQo+IG5vdCB1c2VkIGluIHRoZSB2aXJ0dWFsaG9zdCwgb3IgYW0gSSB3cm9uZz8NCj4gDQo+
IEkgb3JpZ2luYWxseSB0aG91Z2h0IGFib3V0IGluY3JlYXNpbmcgcHJveHlfbGJfd29ya2VycyBv
bmx5IHdoZW4gdGhleQ0KPiBhcmUgdXNlZCBpbiB0aGUgUHJveHlQYXNzKiBpbiB0aGUgdmhvc3Qu
DQo+IA0KPiA+IEluZGV4OiBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5jDQo+ID4gPT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PQ0KPiA+IC0tLSBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5jICAgIChyZXZpc2lvbiAxNjk3MzU4
KQ0KPiA+ICsrKyBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5jICAgICh3b3JraW5nIGNvcHkpDQo+
ID4gQEAgLTExMzUsNiArMTEzNSw3IEBAIHN0YXRpYyB2b2lkICogY3JlYXRlX3Byb3h5X2NvbmZp
ZyhhcHJfcG9vbF90ICpwLCBzDQo+ID4NCj4gPiAgIHN0YXRpYyB2b2lkICogbWVyZ2VfcHJveHlf
Y29uZmlnKGFwcl9wb29sX3QgKnAsIHZvaWQgKmJhc2V2LCB2b2lkDQo+ICpvdmVycmlkZXN2KQ0K
PiA+ICAgew0KPiA+ICsgICAgaW50IGk7DQo+ID4gICAgICAgcHJveHlfc2VydmVyX2NvbmYgKnBz
ID0gYXByX3BjYWxsb2MocCwgc2l6ZW9mKHByb3h5X3NlcnZlcl9jb25mKSk7DQo+ID4gICAgICAg
cHJveHlfc2VydmVyX2NvbmYgKmJhc2UgPSAocHJveHlfc2VydmVyX2NvbmYgKikgYmFzZXY7DQo+
ID4gICAgICAgcHJveHlfc2VydmVyX2NvbmYgKm92ZXJyaWRlcyA9IChwcm94eV9zZXJ2ZXJfY29u
ZiAqKSBvdmVycmlkZXN2Ow0KPiA+IEBAIC0xMTQ3LDYgKzExNDgsMTMgQEAgc3RhdGljIHZvaWQg
KiBtZXJnZV9wcm94eV9jb25maWcoYXByX3Bvb2xfdCAqcCwNCj4gdm8NCj4gPiAgICAgICBwcy0+
YWxsb3dlZF9jb25uZWN0X3BvcnRzID0gYXByX2FycmF5X2FwcGVuZChwLA0KPiA+IGJhc2UtPmFs
bG93ZWRfY29ubmVjdF9wb3J0cywgb3ZlcnJpZGVzLT5hbGxvd2VkX2Nvbm5lY3RfcG9ydHMpOw0K
PiA+ICAgICAgIHBzLT53b3JrZXJzID0gYXByX2FycmF5X2FwcGVuZChwLCBiYXNlLT53b3JrZXJz
LCBvdmVycmlkZXMtDQo+ID53b3JrZXJzKTsNCj4gPiAgICAgICBwcy0+YmFsYW5jZXJzID0gYXBy
X2FycmF5X2FwcGVuZChwLCBiYXNlLT5iYWxhbmNlcnMsIG92ZXJyaWRlcy0NCj4gPmJhbGFuY2Vy
cyk7DQo+ID4gKyAgICAvKiBUaGUgYmFsYW5jZXJzIGluaGVyaXRlZCBmcm9tIGJhc2UgZG9uJ3Qg
aGF2ZSB0aGVpciBtZW1iZXJzDQo+IHJlc2VydmVkIG9uDQo+ID4gKyAgICAgKiB0aGUgc2NvcmVi
b3JkX2xiIGZvciB0aGlzIHNlcnZlciwgYWNjb3VudCBmb3IgdGhlbSBub3cuDQo+ID4gKyAgICAg
Ki8NCj4gPiArICAgIGZvciAoaSA9IDA7IGkgPCBiYXNlLT5iYWxhbmNlcnMtPm5lbHRzOyArK2kp
IHsNCj4gPiArICAgICAgICBwcm94eV9iYWxhbmNlciAqYmFsYW5jZXIgPSAocHJveHlfYmFsYW5j
ZXIgKiliYXNlLT5iYWxhbmNlcnMtDQo+ID5lbHRzICsgaTsNCj4gPiArICAgICAgICBwcm94eV9s
Yl93b3JrZXJzICs9IGJhbGFuY2VyLT53b3JrZXJzLT5uZWx0czsNCj4gPiArICAgIH0NCj4gPiAg
ICAgICBwcy0+Zm9yd2FyZCA9IG92ZXJyaWRlcy0+Zm9yd2FyZCA/IG92ZXJyaWRlcy0+Zm9yd2Fy
ZCA6IGJhc2UtDQo+ID5mb3J3YXJkOw0KPiA+ICAgICAgIHBzLT5yZXZlcnNlID0gb3ZlcnJpZGVz
LT5yZXZlcnNlID8gb3ZlcnJpZGVzLT5yZXZlcnNlIDogYmFzZS0NCj4gPnJldmVyc2U7DQo+ID4N
Cj4gPiAtLQ0KPiA+DQo+ID4gUGxlYXNlIG5vdGUgdGhhdCBzaW5jZSBhbGwgdGhlIHdvcmtlcnMg
d291bGQgcmVhbGx5IGJlIGFjY291bnRlZCBpbg0KPiA+IHRoZSBzY29yZWJvYXJkLCBjb25maWd1
cmF0aW9ucyBsaWtlIHRoZSBvbmUgb2YgUFIgNTgyNjcgKHdpdGgNCj4gPiBpbmhlcml0ZWQgYmFs
YW5jZXJzKSB3b3VsZCBhbHNvIG5lZWQgYmlnZ2VyIFNITXMgKGJ1dCBubyBtb3JlKSB0aGFuDQo+
ID4gY3VycmVudGx5Li4uDQo+ID4NCj4gPiBXRFlUPw0KPiA+DQo+IA0KPiBSZWdhcmRzLA0KPiBK
YW4gS2FsdXphDQo+IA0KDQo=

From dev-return-83538-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 09:09:11 2015
Return-Path: <dev-return-83538-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D3DBD18A79
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 09:09:11 +0000 (UTC)
Received: (qmail 56294 invoked by uid 500); 25 Aug 2015 09:09:08 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 56207 invoked by uid 500); 25 Aug 2015 09:09:08 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 56197 invoked by uid 99); 25 Aug 2015 09:09:08 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 09:09:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id F1FF7182359
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 09:09:07 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id ta7p1qt9KRBV for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 09:09:07 +0000 (UTC)
Received: from mail-io0-f182.google.com (mail-io0-f182.google.com [209.85.223.182])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 37E1E42B16
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 09:09:07 +0000 (UTC)
Received: by iodv127 with SMTP id v127so178780546iod.3
        for <dev@httpd.apache.org>; Tue, 25 Aug 2015 02:09:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=+hehBKbzdCKK9p8XGkPoHm+WemqnctO1xuDxr8sgPbU=;
        b=bPrdm+qRXLT2NQkM6ZbYIz1i/hhAeijfjnVjVJkgw+YoheGZV8zxo2eoKXWrOIl7ng
         7u2QWTmmx8mZH63glm1qQgtFYQEPQvoBp697kZ/Sue0mqmGp0S6MBA8OKSe/CHW0xsvC
         HQNkB/6QoLhzqPAKIlF1rIXnoyMO351MXaAa+nL7rCj4uNjLxKohAFAw0+gKm2Zy/0hL
         qxx8VHtj1oaGW6AU61c6joE7FiGUEEXJdEANUA+3edX/AGIZja6TaJDrLi1ho1+mYXrQ
         0IPAsN586kHRkjL/QIK0WgpMFzv19taPmk3whm5krGmDr1rOIIQb8B6r1NJzpLe8J4id
         rg8g==
MIME-Version: 1.0
X-Received: by 10.107.150.145 with SMTP id y139mr21225374iod.128.1440493746823;
 Tue, 25 Aug 2015 02:09:06 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Tue, 25 Aug 2015 02:09:06 -0700 (PDT)
In-Reply-To: <55DC25C7.9000607@redhat.com>
References: <55DB2E9A.10307@redhat.com>
	<CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com>
	<CAKQ1sVMFBhih-rq61WZkf+jbZ_dQd6+Y5Ekar--9v10+yuNO=Q@mail.gmail.com>
	<55DC25C7.9000607@redhat.com>
Date: Tue, 25 Aug 2015 11:09:06 +0200
Message-ID: <CAKQ1sVMpfe=nkifj1p5a5MNnRzgjULzDQNGrAxYN4o86EtgjEw@mail.gmail.com>
Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Tue, Aug 25, 2015 at 10:22 AM, Jan Kalu=C5=BEa <jkaluza@redhat.com> wrot=
e:
>
> On 08/24/2015 11:12 PM, Yann Ylavic wrote:
>>
>> I tested the below which seems to work.
>
>
> Hm, this reserves the slots in scoreboard even when the balancers are not
> used in the virtualhost, or am I wrong?

Correct, but there may still be RewriteRule(s) (with [P] flag) that
use the balancer.

>
> I originally thought about increasing proxy_lb_workers only when they are
> used in the ProxyPass* in the vhost.

I think this would be a regression, RewriteRules using <Proxy>
declared balancers/workers do also reuse their parameters/connections
(not the "proxy:reverse" worker), some third-party modules may too.

From dev-return-83539-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 09:22:36 2015
Return-Path: <dev-return-83539-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8E1FB18AE4
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 09:22:36 +0000 (UTC)
Received: (qmail 86892 invoked by uid 500); 25 Aug 2015 09:22:35 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 86834 invoked by uid 500); 25 Aug 2015 09:22:35 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 86824 invoked by uid 99); 25 Aug 2015 09:22:35 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 09:22:35 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 167E5C009B
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 09:22:35 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id k7GRBWlEB6IX for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 09:22:27 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id D119A506EB
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 09:22:26 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 5626515A0571
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 11:22:19 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: protocols and mod_h2 consolidation
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <55DBEB00.9080106@gknw.net>
Date: Tue, 25 Aug 2015 11:22:18 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <B406BA2C-69A1-4C44-AE3B-B69C86FAB6CC@greenbytes.de>
References: <15D90C4A-6D6C-48B7-8A56-DF46E4B07370@greenbytes.de> <55DBEB00.9080106@gknw.net>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

Ok, I see that warning flags vary on platforms. That's natural. However =
if our most common (I assume) dev platform does not enable the superset =
of all, then we get errors/warnings continuously as people will check in =
code that fails elsewhere. And I do not think that adding things like

#ifndef _MSC_VER
#pragma GCC diagnostic ignored "-Wmissing-braces"
#endif

are helping anyone.=20

What can we do that this becomes unnecessary? I am not a MSVC user, but =
either we need to disable "missing-braces" in that project file or we =
need to add it to the gcc CFLAGS in maintainer-mode. Or?

//Stefan


> Am 25.08.2015 um 06:11 schrieb Gregg Smith <gls@gknw.net>:
>=20
> Hi,
>=20
> On 8/24/2015 9:29 AM, Stefan Eissing wrote:
>=20
>> I hope this works for everyone. The next weeks might be a good time =
to think about it and propose any changes and correct my mistakes.
>=20
> There are two things that go bump on my lowest non-eol version of =
MSVC.
> h2_worker.c
> .\h2_worker.c(113) : error C2440: 'function' : cannot convert from =
'void *(__cdecl *)(apr_thread_t *,void *)' to 'apr_thread_start_t'
> .\h2_worker.c(113) : warning C4022: 'apr_thread_create' : pointer =
mismatch for actual parameter 3
>=20
> Casting execute to apr_thread_start_t (what apr_thread_create expects) =
seems to quiet the compiler and FireFox seems to work with it.
>=20
> h2_session.c
> .\h2_session.c(1079) : error C2440: 'type cast' : cannot convert from =
'int' to 'nghttp2_data_source'
> .\h2_session.c(1081) : warning C4047: 'initializing' : 'int' differs =
in levels of indirection from 'nghttp2_data_source_read_callback'
>=20
> This cast to a union type, this MSVC version's docs on Unions has a =
note in the comments mentioning;
>>=20
>> We recommend that you do not use a union to cast data from one data =
type to another because union members occupy the same address in memory.
>>=20
>> There is no data-conversion support for unions. The results of =
interchanging writes and reads between union members of different types =
are unpredictable and depend on a variety of reasons.
>>=20
>=20
> They are evidently enforcing this. I just removed the cast and it =
builds and Firefox seems to work.
>=20
> Other nits of interest or not;
> h2_stream_set.c
> .\h2_stream_set.c(139) : warning C4028: formal parameter 2 different =
from declaration
>=20
> The function is prototyped as: h2_stream_set_match_fn *match
> but in h2_stream_set.c it is: h2_stream_set_match_fn match
>=20
> I get 2 different results for the $ENV{'SERVER_PROTOCOL'} in my perl =
script depending on the machine. My server gives me "HTTP/1.1" and =
running locally on my build machine I get "INCLUDED." Firefox says it is =
HTTP/2.0 200 OK so both results in this $ENV seem incorrect. I'm not =
sure why the difference as mod_h2 is configured same on both.
>=20
> Regards,
> Gregg
>=20
>=20
>=20
>=20
>=20

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83540-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 09:47:14 2015
Return-Path: <dev-return-83540-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0D76C18BCD
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 09:47:14 +0000 (UTC)
Received: (qmail 45030 invoked by uid 500); 25 Aug 2015 09:47:08 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 44970 invoked by uid 500); 25 Aug 2015 09:47:08 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 44959 invoked by uid 99); 25 Aug 2015 09:47:08 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 09:47:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 173561AACF7
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 09:47:08 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.799
X-Spam-Level: *
X-Spam-Status: No, score=1.799 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, KAM_LAZY_DOMAIN_SECURITY=1,
	SPF_HELO_PASS=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id ddScz2GkquVc for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 09:46:56 +0000 (UTC)
Received: from mail1.bemta14.messagelabs.com (mail1.bemta14.messagelabs.com [193.109.254.105])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 446A52142D
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 09:46:55 +0000 (UTC)
Received: from [193.109.254.3] by server-1.bemta-14.messagelabs.com id 95/CB-28791-FD73CD55; Tue, 25 Aug 2015 09:39:43 +0000
X-Env-Sender: ruediger.pluem@vodafone.com
X-Msg-Ref: server-12.tower-184.messagelabs.com!1440495583!15775932!1
X-Originating-IP: [195.232.244.136]
X-StarScan-Received:
X-StarScan-Version: 6.13.16; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 7607 invoked from network); 25 Aug 2015 09:39:43 -0000
Received: from mailout04.vodafone.com (HELO mailout04.vodafone.com) (195.232.244.136)
  by server-12.tower-184.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 25 Aug 2015 09:39:43 -0000
Received: from mailint03.vodafone.com (mailint03.vodafone.com [195.232.244.200])
	by mailout04.vodafone.com (Postfix) with ESMTP id 3n0lf70JWDznTX2
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 11:39:43 +0200 (CEST)
Received: from mailint03.vodafone.com (localhost [127.0.0.1])
	by mailint03.vodafone.com (Postfix) with ESMTP id 3n0lf65wk8z16KFM
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 11:39:42 +0200 (CEST)
Received: from VOEXC01W.internal.vodafone.com (voexc01w.dc-ratingen.de [145.230.101.21])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mailint03.vodafone.com (Postfix) with ESMTPS id 3n0lf65GCtz16K99
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 11:39:42 +0200 (CEST)
Received: from VOEXC30W.internal.vodafone.com (145.230.103.202) by
 VOEXC01W.internal.vodafone.com (145.230.101.21) with Microsoft SMTP Server
 (TLS) id 14.3.224.2; Tue, 25 Aug 2015 11:39:37 +0200
Received: from VOEXM10W.internal.vodafone.com ([169.254.2.132]) by voexc30w
 ([145.230.103.202]) with mapi id 14.03.0224.002; Tue, 25 Aug 2015 11:39:29
 +0200
From: =?utf-8?B?UGzDvG0sIFLDvGRpZ2VyLCBWb2RhZm9uZSBHcm91cA==?=
	<ruediger.pluem@vodafone.com>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
Subject: RE: PR 58267: Regression in 2.2.31 caused by r1680920
Thread-Topic: PR 58267: Regression in 2.2.31 caused by r1680920
Thread-Index: AQHQ3nvoe/hfZCbrK0Kj2QfLbhsYGZ4bKveAgABZ04CAALsWgIAAJd6AgAAQP9A=
Date: Tue, 25 Aug 2015 09:39:28 +0000
Message-ID: <AB1691BE05AE7F4992697F2A0835627AC62F2E5F@VOEXM10W.internal.vodafone.com>
References: <55DB2E9A.10307@redhat.com>
	<CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com>
 <CAKQ1sVMFBhih-rq61WZkf+jbZ_dQd6+Y5Ekar--9v10+yuNO=Q@mail.gmail.com>
 <55DC25C7.9000607@redhat.com>
 <AB1691BE05AE7F4992697F2A0835627AC62F2C7D@VOEXM10W.internal.vodafone.com>
In-Reply-To: <AB1691BE05AE7F4992697F2A0835627AC62F2C7D@VOEXM10W.internal.vodafone.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

SG93IGFib3V0IHRoZSBmb2xsb3dpbmcgcGF0Y2g/IEl0IHVzZXMgdGhlIHNlcnZlcl9yZWMgb2Yg
dGhlIHNlcnZlciB0aGF0IG9yaWdpbmFsbHkgY3JlYXRlZCB0aGUgY29uZmlndXJhdGlvbiBpdGVt
Lg0KDQpJbmRleDogbW9kdWxlcy9wcm94eS9wcm94eV91dGlsLmMNCj09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCi0tLSBt
b2R1bGVzL3Byb3h5L3Byb3h5X3V0aWwuYwkocmV2aXNpb24gMTY5NzU3OCkNCisrKyBtb2R1bGVz
L3Byb3h5L3Byb3h5X3V0aWwuYwkod29ya2luZyBjb3B5KQ0KQEAgLTE0NjAsNiArMTQ2MCw3IEBA
DQogICAgICgqd29ya2VyKS0+Zmx1c2hfcGFja2V0cyA9IGZsdXNoX29mZjsNCiAgICAgKCp3b3Jr
ZXIpLT5mbHVzaF93YWl0ID0gUFJPWFlfRkxVU0hfV0FJVDsNCiAgICAgKCp3b3JrZXIpLT5zbWF4
ID0gLTE7DQorICAgICgqd29ya2VyKS0+c2VydmVyID0gY29uZi0+czsNCiAgICAgLyogSW5jcmVh
c2UgdGhlIHRvdGFsIHdvcmtlciBjb3VudCAqLw0KICAgICBwcm94eV9sYl93b3JrZXJzKys7DQog
ICAgIGluaXRfY29ubl9wb29sKHAsICp3b3JrZXIpOw0KQEAgLTE4MjQsMTQgKzE4MjksMjAgQEAN
CiAgICAgICAgICAgICBhcHJfbWQ1X3VwZGF0ZSgmY3R4LCAodW5zaWduZWQgY2hhciAqKWJhbGFu
Y2VyLT5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmxlbihiYWxhbmNlci0+
bmFtZSkpOw0KICAgICAgICAgfQ0KLSAgICAgICAgaWYgKHNlcnZlcikgew0KKyAgICAgICAgaWYg
KHdvcmtlci0+c2VydmVyKSB7DQorICAgICAgICAgICAgaWRfc2VydmVyID0gd29ya2VyLT5zZXJ2
ZXI7DQorICAgICAgICB9DQorICAgICAgICBlbHNlIHsNCisgICAgICAgICAgICBpZF9zZXJ2ZXIg
PSBzZXJ2ZXI7DQorICAgICAgICB9DQorICAgICAgICBpZiAoaWRfc2VydmVyKSB7DQogICAgICAg
ICAgICAgc2VydmVyX2FkZHJfcmVjICphZGRyOw0KICAgICAgICAgICAgIC8qIEFzc3VtZXMgdGhl
IHVuaXF1ZSBpZGVudGlmaWVyIG9mIGEgdmhvc3QgaXMgaXRzIGFkZHJlc3MoZXMpDQogICAgICAg
ICAgICAgICogcGx1cyB0aGUgU2VydmVyTmFtZTpQb3J0LiBTaG91bGQgdHdvIG9yIG1vcmUgdmhv
c3RzIGhhdmUgdGhpcw0KICAgICAgICAgICAgICAqIHNhbWUgaWRlbnRpZmllciwgdGhlIGZpcnN0
IG9uZSB3b3VsZCBhbHdheXMgYmUgZWxlY3RlZCB0bw0KICAgICAgICAgICAgICAqIGhhbmRsZSB0
aGUgcmVxdWVzdHMsIHNvIHRoaXMgc2hvdWxkbid0IGJlIGFuIGlzc3VlLi4uDQogICAgICAgICAg
ICAgICovDQotICAgICAgICAgICAgZm9yIChhZGRyID0gc2VydmVyLT5hZGRyczsgYWRkcjsgYWRk
ciA9IGFkZHItPm5leHQpIHsNCisgICAgICAgICAgICBmb3IgKGFkZHIgPSBpZF9zZXJ2ZXItPmFk
ZHJzOyBhZGRyOyBhZGRyID0gYWRkci0+bmV4dCkgew0KICAgICAgICAgICAgICAgICBjaGFyIGhv
c3RfaXBbNjRdOyAvKiBmb3IgYW55IElQdls0Nl0gc3RyaW5nICovDQogICAgICAgICAgICAgICAg
IGFwcl9zb2NrYWRkcl9pcF9nZXRidWYoaG9zdF9pcCwgc2l6ZW9mIGhvc3RfaXAsDQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkci0+aG9zdF9hZGRyKTsNCkBAIC0x
ODQwLDEwICsxODUxLDEwIEBADQogICAgICAgICAgICAgICAgIGFwcl9tZDVfdXBkYXRlKCZjdHgs
ICh1bnNpZ25lZCBjaGFyICopJmFkZHItPmhvc3RfcG9ydCwNCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc2l6ZW9mKGFkZHItPmhvc3RfcG9ydCkpOw0KICAgICAgICAgICAgIH0NCi0g
ICAgICAgICAgICBhcHJfbWQ1X3VwZGF0ZSgmY3R4LCAodW5zaWduZWQgY2hhciAqKXNlcnZlci0+
c2VydmVyX2hvc3RuYW1lLA0KLSAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmxlbihzZXJ2
ZXItPnNlcnZlcl9ob3N0bmFtZSkpOw0KLSAgICAgICAgICAgIGFwcl9tZDVfdXBkYXRlKCZjdHgs
ICh1bnNpZ25lZCBjaGFyICopJnNlcnZlci0+cG9ydCwNCi0gICAgICAgICAgICAgICAgICAgICAg
ICAgICBzaXplb2Yoc2VydmVyLT5wb3J0KSk7DQorICAgICAgICAgICAgYXByX21kNV91cGRhdGUo
JmN0eCwgKHVuc2lnbmVkIGNoYXIgKilpZF9zZXJ2ZXItPnNlcnZlcl9ob3N0bmFtZSwNCisgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzdHJsZW4oaWRfc2VydmVyLT5zZXJ2ZXJfaG9zdG5hbWUp
KTsNCisgICAgICAgICAgICBhcHJfbWQ1X3VwZGF0ZSgmY3R4LCAodW5zaWduZWQgY2hhciAqKSZp
ZF9zZXJ2ZXItPnBvcnQsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZW9mKGlkX3Nl
cnZlci0+cG9ydCkpOw0KICAgICAgICAgfQ0KICAgICAgICAgYXByX21kNV9maW5hbChkaWdlc3Qs
ICZjdHgpOw0KIA0KSW5kZXg6IG1vZHVsZXMvcHJveHkvbW9kX3Byb3h5LmMNCj09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0N
Ci0tLSBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5jCShyZXZpc2lvbiAxNjk3NTc4KQ0KKysrIG1v
ZHVsZXMvcHJveHkvbW9kX3Byb3h5LmMJKHdvcmtpbmcgY29weSkNCkBAIC0xMTI5LDYgKzExMjks
NyBAQA0KICAgICBwcy0+YmFkb3B0ID0gYmFkX2Vycm9yOw0KICAgICBwcy0+YmFkb3B0X3NldCA9
IDA7DQogICAgIHBzLT5wb29sID0gcDsNCisgICAgcHMtPnMgPSBzOw0KIA0KICAgICByZXR1cm4g
cHM7DQogfQ0KQEAgLTExNzIsNiArMTE3Myw3IEBADQogICAgIHBzLT5wcm94eV9zdGF0dXMgPSAo
b3ZlcnJpZGVzLT5wcm94eV9zdGF0dXNfc2V0ID09IDApID8gYmFzZS0+cHJveHlfc3RhdHVzIDog
b3ZlcnJpZGVzLT5wcm94eV9zdGF0dXM7DQogICAgIHBzLT5wcm94eV9zdGF0dXNfc2V0ID0gb3Zl
cnJpZGVzLT5wcm94eV9zdGF0dXNfc2V0IHx8IGJhc2UtPnByb3h5X3N0YXR1c19zZXQ7DQogICAg
IHBzLT5wb29sID0gcDsNCisgICAgcHMtPnMgPSBvdmVycmlkZXMtPnM7DQogICAgIHJldHVybiBw
czsNCiB9DQogDQpJbmRleDogbW9kdWxlcy9wcm94eS9tb2RfcHJveHkuaA0KPT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0K
LS0tIG1vZHVsZXMvcHJveHkvbW9kX3Byb3h5LmgJKHJldmlzaW9uIDE2OTc1NzgpDQorKysgbW9k
dWxlcy9wcm94eS9tb2RfcHJveHkuaAkod29ya2luZyBjb3B5KQ0KQEAgLTE5Myw2ICsxOTMsNyBA
QA0KICAgICB9IHByb3h5X3N0YXR1czsgICAgICAgICAgICAgLyogU3RhdHVzIGRpc3BsYXkgb3B0
aW9ucyAqLw0KICAgICBjaGFyIHByb3h5X3N0YXR1c19zZXQ7DQogICAgIGFwcl9wb29sX3QgKnBv
b2w7ICAgICAgICAgICAvKiBQb29sIHVzZWQgZm9yIGFsbG9jYXRpbmcgdGhpcyBzdHJ1Y3QgKi8N
CisgICAgc2VydmVyX3JlYyAqczsgICAgICAgICAgICAgIC8qIFRoZSBzZXJ2ZXJfcmVjIHdoZXJl
IHRoaXMgY29uZmlndXJhdGlvbiB3YXMgY3JlYXRlZCBpbiAqLw0KIH0gcHJveHlfc2VydmVyX2Nv
bmY7DQogDQogDQpAQCAtMzY5LDYgKzM3MCw3IEBADQogICAgIGNoYXIgICAgICAgICAgICBkaXNh
YmxlcmV1c2Vfc2V0Ow0KICAgICBhcHJfaW50ZXJ2YWxfdGltZV90IGNvbm5fdGltZW91dDsNCiAg
ICAgY2hhciAgICAgICAgICAgIGNvbm5fdGltZW91dF9zZXQ7DQorICAgIHNlcnZlcl9yZWMgICAg
ICAqc2VydmVyOyAgICAvKiBUaGUgc2VydmVyX3JlYyB3aGVyZSB0aGlzIGNvbmZpZ3VyYXRpb24g
d2FzIGNyZWF0ZWQgaW4gKi8NCiB9Ow0KIA0KIC8qDQoNCg0KUmVnYXJkcw0KDQpSw7xkaWdlcg0K
DQo+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+IEZyb206IFBsw7xtLCBSw7xkaWdlciwg
Vm9kYWZvbmUgR3JvdXANCj4gU2VudDogRGllbnN0YWcsIDI1LiBBdWd1c3QgMjAxNSAxMDo0OA0K
PiBUbzogZGV2QGh0dHBkLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogUkU6IFBSIDU4MjY3OiBSZWdy
ZXNzaW9uIGluIDIuMi4zMSBjYXVzZWQgYnkgcjE2ODA5MjANCj4gDQo+IEkgdGhpbmsgdGhlIGN1
cnJlbnQgc3RhdGUgb2YgMi4yLjMxIGJyZWFrcyBleGlzdGluZyAyLjIueCBjb25maWd1cmF0aW9u
DQo+IHByaW9yIHRvIDIuMi4zMS4NCj4gUHJpb3IgdG8gMi4yLjMxIHlvdSBjb3VsZCBkbyB0aGUg
Zm9sbG93aW5nOg0KPiANCj4gPFByb3h5IEJhbGFuY2VyOi8vcHJveHkxPg0KPiBCYWxhbmNlck1l
bWJlciBhanA6Ly8xMjcuMC4wLjE6NzAwMQ0KPiBCYWxhbmNlck1lbWJlciBhanA6Ly8xMjcuMC4w
LjI6NzAwMg0KPiA8L1Byb3h5Pg0KPiANCj4gPHZpcnR1YWxob3N0ICo6ODA+DQo+IFByb3h5UGFz
cyAvIGJhbGFuY2VyOi8vcHJveHkxLw0KPiA8L3ZpcnR1YWxob3N0Pg0KPiANCj4gPHZpcnR1YWxo
b3N0IDEyNy4wLjAuMTo4MDgwPg0KPiANCj4gPExvY2F0aW9uIC9ibWFuYWdlcj4NCj4gICAgc2V0
aGFuZGxlciBiYWxhbmNlci1tYW5hZ2VyDQo+IDwvTG9jYXRpb24+DQo+IA0KPiA8L3ZpcnR1YWxo
b3N0Pg0KPiANCj4gV2l0aCB0aGlzIGNvbmZpZ3VyYXRpb24geW91IGNvdWxkIHByb3ZpZGUgeW91
ciByZXZlcnNlIHByb3h5IHRvIHRoZQ0KPiBvdXRzaWRlIHdvcmxkIHdoaWxlIGhhdmluZyB0aGUN
Cj4gYmFsYW5jZXJtYW5hZ2VyIG1hbmFnaW5nIHRoZSBiYWxhbmNlciBvbmx5IGxpc3RlbmluZyB0
byBsb2NhbGhvc3QuIFRoaXMgaXMNCj4gbm90IHBvc3NpYmxlIGFueSBsb25nZXIgd2l0aCAyLjIu
MzENCj4gYXMgdGhlIHdvcmtlci0+cyBpcyBub3cgZGlmZmVyZW50IGluIGVhY2ggdmlydHVhbGhv
c3Qgd2hlcmVhcyBiZWZvcmUgaXQNCj4gd2FzIHRoZSBzYW1lIGFzIHRoZSB3b3JrZXItPmlkIHdh
cyB1c2VkDQo+IHRvIGlkZW50aWZ5IHRoZSBzY29yZWJvYXJkIHNsb3QuDQo+IFRoZSBwYXRjaGVz
IHByb3Bvc2VkIHNvIGZhciB3b3VsZCBub3QgY2hhbmdlIHRoaXMuIEkgdGhpbmsgaW4gb3JkZXIg
dG8NCj4gcmV2ZXJ0IHRvIHRoZSBvbGQgYmVoYXZpb3VyIHdlIG5lZWQgdG8NCj4gc3RvcmUgd2l0
aCBlYWNoIHdvcmtlciBpbiB3aGljaCBzZXJ2ZXJfcmVjIGNvbnRleHQgaXQgd2FzIGNyZWF0ZWQu
IGUuZy4NCj4gYWRkaW5nIGEgY29uc3QgY2hhciAqIGZpZWxkIHRvIHRoZSB3b3JrZXIgdGhhdCB3
b3VsZCBiZSBmaWxsZWQgd2l0aA0KPiBzZXJ2ZXItPnNlcnZlcl9ob3N0bmFtZS4gVGhlbiB3ZSBj
b3VsZCB1c2UgdGhpcyB2YWx1ZSBmb3IgY3JlYXRpbmcgdGhlDQo+IG1kNS4NCj4gDQo+IFJlZ2Fy
ZHMNCj4gDQo+IFLDvGRpZ2VyDQo+IA0KPiA+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+
ID4gRnJvbTogSmFuIEthbHXFvmEgW21haWx0bzpqa2FsdXphQHJlZGhhdC5jb21dDQo+ID4gU2Vu
dDogRGllbnN0YWcsIDI1LiBBdWd1c3QgMjAxNSAxMDoyMw0KPiA+IFRvOiBkZXZAaHR0cGQuYXBh
Y2hlLm9yZw0KPiA+IFN1YmplY3Q6IFJlOiBQUiA1ODI2NzogUmVncmVzc2lvbiBpbiAyLjIuMzEg
Y2F1c2VkIGJ5IHIxNjgwOTIwDQo+ID4NCj4gPiBPbiAwOC8yNC8yMDE1IDExOjEyIFBNLCBZYW5u
IFlsYXZpYyB3cm90ZToNCj4gPiA+IE9uIE1vbiwgQXVnIDI0LCAyMDE1IGF0IDU6NTEgUE0sIFlh
bm4gWWxhdmljIDx5bGF2aWMuZGV2QGdtYWlsLmNvbT4NCj4gPiB3cm90ZToNCj4gPiA+Pg0KPiA+
ID4+IE9uIE1vbiwgQXVnIDI0LCAyMDE1IGF0IDQ6NDcgUE0sIEphbiBLYWx1xb5hIDxqa2FsdXph
QHJlZGhhdC5jb20+DQo+IHdyb3RlOg0KPiA+ID4+Pg0KPiA+ID4+PiAyKSBJbmNyZW1lbnQgcHJv
eHlfbGJfd29ya2VycyBhY2NvcmRpbmcgdG8gbnVtYmVyIG9mIHdvcmtlcnMgaW4NCj4gPiBiYWxh
bmNlcg0KPiA+ID4+PiB3aGVuIHVzaW5nICJQcm94eVBhc3MgL2Zvb2Jhci8gQmFsYW5jZXI6Ly9m
b29iYXIvIiBpbiB0aGUNCj4gVmlydHVhbEhvc3QuDQo+ID4gVGhlDQo+ID4gPj4+IHNjb3JlYm9h
cmQgd291bGQgaGF2ZSByaWdodCBzaXplIGFuZCBhcF9wcm94eV9zZXRfc2NvcmVib2FyZF9sYg0K
PiB3b3VsZA0KPiA+IG5vdA0KPiA+ID4+PiBmYWlsIHRoZW4uDQo+ID4gPj4NCj4gPiA+PiBJIHRo
aW5rIHdlIGNhbiBkbyB0aGlzIHF1aXRlIGVhc2lseSBpbiBtZXJnZV9wcm94eV9jb25maWcoKSwg
YnkNCj4gPiA+PiBpbmNyZW1lbnRpbmcgcHJveHlfbGJfd29ya2VycyBmb3IgZWFjaCBiYXNlLT5i
YWxhbmNlcnMtPndvcmtlcnMuIEkNCj4gZGlkDQo+ID4gPj4gbm90IHRlc3QgaXQgeWV0IHRob3Vn
aC4NCj4gPiA+DQo+ID4gPiBJIHRlc3RlZCB0aGUgYmVsb3cgd2hpY2ggc2VlbXMgdG8gd29yay4N
Cj4gPg0KPiA+IEhtLCB0aGlzIHJlc2VydmVzIHRoZSBzbG90cyBpbiBzY29yZWJvYXJkIGV2ZW4g
d2hlbiB0aGUgYmFsYW5jZXJzIGFyZQ0KPiA+IG5vdCB1c2VkIGluIHRoZSB2aXJ0dWFsaG9zdCwg
b3IgYW0gSSB3cm9uZz8NCj4gPg0KPiA+IEkgb3JpZ2luYWxseSB0aG91Z2h0IGFib3V0IGluY3Jl
YXNpbmcgcHJveHlfbGJfd29ya2VycyBvbmx5IHdoZW4gdGhleQ0KPiA+IGFyZSB1c2VkIGluIHRo
ZSBQcm94eVBhc3MqIGluIHRoZSB2aG9zdC4NCj4gPg0KPiA+ID4gSW5kZXg6IG1vZHVsZXMvcHJv
eHkvbW9kX3Byb3h5LmMNCj4gPiA+ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCj4gPiA+IC0tLSBtb2R1bGVzL3Byb3h5
L21vZF9wcm94eS5jICAgIChyZXZpc2lvbiAxNjk3MzU4KQ0KPiA+ID4gKysrIG1vZHVsZXMvcHJv
eHkvbW9kX3Byb3h5LmMgICAgKHdvcmtpbmcgY29weSkNCj4gPiA+IEBAIC0xMTM1LDYgKzExMzUs
NyBAQCBzdGF0aWMgdm9pZCAqIGNyZWF0ZV9wcm94eV9jb25maWcoYXByX3Bvb2xfdCAqcCwNCj4g
cw0KPiA+ID4NCj4gPiA+ICAgc3RhdGljIHZvaWQgKiBtZXJnZV9wcm94eV9jb25maWcoYXByX3Bv
b2xfdCAqcCwgdm9pZCAqYmFzZXYsIHZvaWQNCj4gPiAqb3ZlcnJpZGVzdikNCj4gPiA+ICAgew0K
PiA+ID4gKyAgICBpbnQgaTsNCj4gPiA+ICAgICAgIHByb3h5X3NlcnZlcl9jb25mICpwcyA9IGFw
cl9wY2FsbG9jKHAsDQo+IHNpemVvZihwcm94eV9zZXJ2ZXJfY29uZikpOw0KPiA+ID4gICAgICAg
cHJveHlfc2VydmVyX2NvbmYgKmJhc2UgPSAocHJveHlfc2VydmVyX2NvbmYgKikgYmFzZXY7DQo+
ID4gPiAgICAgICBwcm94eV9zZXJ2ZXJfY29uZiAqb3ZlcnJpZGVzID0gKHByb3h5X3NlcnZlcl9j
b25mICopIG92ZXJyaWRlc3Y7DQo+ID4gPiBAQCAtMTE0Nyw2ICsxMTQ4LDEzIEBAIHN0YXRpYyB2
b2lkICogbWVyZ2VfcHJveHlfY29uZmlnKGFwcl9wb29sX3QgKnAsDQo+ID4gdm8NCj4gPiA+ICAg
ICAgIHBzLT5hbGxvd2VkX2Nvbm5lY3RfcG9ydHMgPSBhcHJfYXJyYXlfYXBwZW5kKHAsDQo+ID4g
PiBiYXNlLT5hbGxvd2VkX2Nvbm5lY3RfcG9ydHMsIG92ZXJyaWRlcy0+YWxsb3dlZF9jb25uZWN0
X3BvcnRzKTsNCj4gPiA+ICAgICAgIHBzLT53b3JrZXJzID0gYXByX2FycmF5X2FwcGVuZChwLCBi
YXNlLT53b3JrZXJzLCBvdmVycmlkZXMtDQo+ID4gPndvcmtlcnMpOw0KPiA+ID4gICAgICAgcHMt
PmJhbGFuY2VycyA9IGFwcl9hcnJheV9hcHBlbmQocCwgYmFzZS0+YmFsYW5jZXJzLCBvdmVycmlk
ZXMtDQo+ID4gPmJhbGFuY2Vycyk7DQo+ID4gPiArICAgIC8qIFRoZSBiYWxhbmNlcnMgaW5oZXJp
dGVkIGZyb20gYmFzZSBkb24ndCBoYXZlIHRoZWlyIG1lbWJlcnMNCj4gPiByZXNlcnZlZCBvbg0K
PiA+ID4gKyAgICAgKiB0aGUgc2NvcmVib3JkX2xiIGZvciB0aGlzIHNlcnZlciwgYWNjb3VudCBm
b3IgdGhlbSBub3cuDQo+ID4gPiArICAgICAqLw0KPiA+ID4gKyAgICBmb3IgKGkgPSAwOyBpIDwg
YmFzZS0+YmFsYW5jZXJzLT5uZWx0czsgKytpKSB7DQo+ID4gPiArICAgICAgICBwcm94eV9iYWxh
bmNlciAqYmFsYW5jZXIgPSAocHJveHlfYmFsYW5jZXIgKiliYXNlLT5iYWxhbmNlcnMtDQo+ID4g
PmVsdHMgKyBpOw0KPiA+ID4gKyAgICAgICAgcHJveHlfbGJfd29ya2VycyArPSBiYWxhbmNlci0+
d29ya2Vycy0+bmVsdHM7DQo+ID4gPiArICAgIH0NCj4gPiA+ICAgICAgIHBzLT5mb3J3YXJkID0g
b3ZlcnJpZGVzLT5mb3J3YXJkID8gb3ZlcnJpZGVzLT5mb3J3YXJkIDogYmFzZS0NCj4gPiA+Zm9y
d2FyZDsNCj4gPiA+ICAgICAgIHBzLT5yZXZlcnNlID0gb3ZlcnJpZGVzLT5yZXZlcnNlID8gb3Zl
cnJpZGVzLT5yZXZlcnNlIDogYmFzZS0NCj4gPiA+cmV2ZXJzZTsNCj4gPiA+DQo+ID4gPiAtLQ0K
PiA+ID4NCj4gPiA+IFBsZWFzZSBub3RlIHRoYXQgc2luY2UgYWxsIHRoZSB3b3JrZXJzIHdvdWxk
IHJlYWxseSBiZSBhY2NvdW50ZWQgaW4NCj4gPiA+IHRoZSBzY29yZWJvYXJkLCBjb25maWd1cmF0
aW9ucyBsaWtlIHRoZSBvbmUgb2YgUFIgNTgyNjcgKHdpdGgNCj4gPiA+IGluaGVyaXRlZCBiYWxh
bmNlcnMpIHdvdWxkIGFsc28gbmVlZCBiaWdnZXIgU0hNcyAoYnV0IG5vIG1vcmUpIHRoYW4NCj4g
PiA+IGN1cnJlbnRseS4uLg0KPiA+ID4NCj4gPiA+IFdEWVQ/DQo+ID4gPg0KPiA+DQo+ID4gUmVn
YXJkcywNCj4gPiBKYW4gS2FsdXphDQo+ID4NCg0K

From dev-return-83541-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 09:52:06 2015
Return-Path: <dev-return-83541-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8CA4618BF9
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 09:52:06 +0000 (UTC)
Received: (qmail 58829 invoked by uid 500); 25 Aug 2015 09:52:06 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 58766 invoked by uid 500); 25 Aug 2015 09:52:06 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 58756 invoked by uid 99); 25 Aug 2015 09:52:05 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 09:52:05 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 88752EDAC1
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 09:52:05 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.779
X-Spam-Level:
X-Spam-Status: No, score=0.779 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, RCVD_IN_MSPIKE_H3=-0.01,
	RCVD_IN_MSPIKE_WL=-0.01, SPF_HELO_PASS=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id mQb4p_Ww-2qU for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 09:51:52 +0000 (UTC)
Received: from mail1.bemta3.messagelabs.com (mail1.bemta3.messagelabs.com [195.245.230.169])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 8E75720383
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 09:51:51 +0000 (UTC)
Received: from [85.158.138.179] by server-9.bemta-3.messagelabs.com id 43/30-10678-5093CD55; Tue, 25 Aug 2015 09:44:37 +0000
X-Env-Sender: ruediger.pluem@vodafone.com
X-Msg-Ref: server-4.tower-169.messagelabs.com!1440495876!23056393!1
X-Originating-IP: [195.232.244.135]
X-StarScan-Received:
X-StarScan-Version: 6.13.16; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 31988 invoked from network); 25 Aug 2015 09:44:36 -0000
Received: from mailout03.vodafone.com (HELO mailout03.vodafone.com) (195.232.244.135)
  by server-4.tower-169.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 25 Aug 2015 09:44:36 -0000
Received: from mailint02.vodafone.com (mailint02.vodafone.com [195.232.244.199])
	by mailout03.vodafone.com (Postfix) with ESMTP id 3n0llm32Ccz17HNW
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 11:44:36 +0200 (CEST)
Received: from mailint02.vodafone.com (localhost [127.0.0.1])
	by mailint02.vodafone.com (Postfix) with ESMTP id 3n0llm20ywzQl6g
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 11:44:36 +0200 (CEST)
Received: from VOEXC06W.internal.vodafone.com (voexc06w.dc-ratingen.de [145.230.101.26])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mailint02.vodafone.com (Postfix) with ESMTPS id 3n0llm1gz2zQmvP
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 11:44:36 +0200 (CEST)
Received: from VOEXC17W.internal.vodafone.com (145.230.101.19) by
 VOEXC06W.internal.vodafone.com (145.230.101.26) with Microsoft SMTP Server
 (TLS) id 14.3.224.2; Tue, 25 Aug 2015 11:44:35 +0200
Received: from VOEXM10W.internal.vodafone.com ([169.254.2.132]) by
 voexc17w.internal.vodafone.com ([145.230.101.19]) with mapi id
 14.03.0224.002; Tue, 25 Aug 2015 11:44:34 +0200
From: =?utf-8?B?UGzDvG0sIFLDvGRpZ2VyLCBWb2RhZm9uZSBHcm91cA==?=
	<ruediger.pluem@vodafone.com>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
Subject: RE: PR 58267: Regression in 2.2.31 caused by r1680920
Thread-Topic: PR 58267: Regression in 2.2.31 caused by r1680920
Thread-Index: AQHQ3nvoe/hfZCbrK0Kj2QfLbhsYGZ4bKveAgABZ04CAALsWgIAAJd6AgAAQP9CAAAI2IA==
Date: Tue, 25 Aug 2015 09:44:34 +0000
Message-ID: <AB1691BE05AE7F4992697F2A0835627AC62F2EF9@VOEXM10W.internal.vodafone.com>
References: <55DB2E9A.10307@redhat.com>
	<CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com>
 <CAKQ1sVMFBhih-rq61WZkf+jbZ_dQd6+Y5Ekar--9v10+yuNO=Q@mail.gmail.com>
 <55DC25C7.9000607@redhat.com>
 <AB1691BE05AE7F4992697F2A0835627AC62F2C7D@VOEXM10W.internal.vodafone.com> 
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

T2YgY291cnNlIGl0IHJlcXVpcmVzIGEgbWlub3IgYnVtcC4NCg0KUmVnYXJkcw0KDQpSw7xkaWdl
cg0KDQo+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+IEZyb206IFBsw7xtLCBSw7xkaWdl
ciwgVm9kYWZvbmUgR3JvdXANCj4gU2VudDogRGllbnN0YWcsIDI1LiBBdWd1c3QgMjAxNSAxMToz
OQ0KPiBUbzogZGV2QGh0dHBkLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogUkU6IFBSIDU4MjY3OiBS
ZWdyZXNzaW9uIGluIDIuMi4zMSBjYXVzZWQgYnkgcjE2ODA5MjANCj4gDQo+IEhvdyBhYm91dCB0
aGUgZm9sbG93aW5nIHBhdGNoPyBJdCB1c2VzIHRoZSBzZXJ2ZXJfcmVjIG9mIHRoZSBzZXJ2ZXIg
dGhhdA0KPiBvcmlnaW5hbGx5IGNyZWF0ZWQgdGhlIGNvbmZpZ3VyYXRpb24gaXRlbS4NCj4gDQo+
IEluZGV4OiBtb2R1bGVzL3Byb3h5L3Byb3h5X3V0aWwuYw0KPiA9PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQo+IC0tLSBt
b2R1bGVzL3Byb3h5L3Byb3h5X3V0aWwuYwkocmV2aXNpb24gMTY5NzU3OCkNCj4gKysrIG1vZHVs
ZXMvcHJveHkvcHJveHlfdXRpbC5jCSh3b3JraW5nIGNvcHkpDQo+IEBAIC0xNDYwLDYgKzE0NjAs
NyBAQA0KPiAgICAgICgqd29ya2VyKS0+Zmx1c2hfcGFja2V0cyA9IGZsdXNoX29mZjsNCj4gICAg
ICAoKndvcmtlciktPmZsdXNoX3dhaXQgPSBQUk9YWV9GTFVTSF9XQUlUOw0KPiAgICAgICgqd29y
a2VyKS0+c21heCA9IC0xOw0KPiArICAgICgqd29ya2VyKS0+c2VydmVyID0gY29uZi0+czsNCj4g
ICAgICAvKiBJbmNyZWFzZSB0aGUgdG90YWwgd29ya2VyIGNvdW50ICovDQo+ICAgICAgcHJveHlf
bGJfd29ya2VycysrOw0KPiAgICAgIGluaXRfY29ubl9wb29sKHAsICp3b3JrZXIpOw0KPiBAQCAt
MTgyNCwxNCArMTgyOSwyMCBAQA0KPiAgICAgICAgICAgICAgYXByX21kNV91cGRhdGUoJmN0eCwg
KHVuc2lnbmVkIGNoYXIgKiliYWxhbmNlci0+bmFtZSwNCj4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0cmxlbihiYWxhbmNlci0+bmFtZSkpOw0KPiAgICAgICAgICB9DQo+IC0gICAgICAg
IGlmIChzZXJ2ZXIpIHsNCj4gKyAgICAgICAgaWYgKHdvcmtlci0+c2VydmVyKSB7DQo+ICsgICAg
ICAgICAgICBpZF9zZXJ2ZXIgPSB3b3JrZXItPnNlcnZlcjsNCj4gKyAgICAgICAgfQ0KPiArICAg
ICAgICBlbHNlIHsNCj4gKyAgICAgICAgICAgIGlkX3NlcnZlciA9IHNlcnZlcjsNCj4gKyAgICAg
ICAgfQ0KPiArICAgICAgICBpZiAoaWRfc2VydmVyKSB7DQo+ICAgICAgICAgICAgICBzZXJ2ZXJf
YWRkcl9yZWMgKmFkZHI7DQo+ICAgICAgICAgICAgICAvKiBBc3N1bWVzIHRoZSB1bmlxdWUgaWRl
bnRpZmllciBvZiBhIHZob3N0IGlzIGl0cw0KPiBhZGRyZXNzKGVzKQ0KPiAgICAgICAgICAgICAg
ICogcGx1cyB0aGUgU2VydmVyTmFtZTpQb3J0LiBTaG91bGQgdHdvIG9yIG1vcmUgdmhvc3RzIGhh
dmUNCj4gdGhpcw0KPiAgICAgICAgICAgICAgICogc2FtZSBpZGVudGlmaWVyLCB0aGUgZmlyc3Qg
b25lIHdvdWxkIGFsd2F5cyBiZSBlbGVjdGVkIHRvDQo+ICAgICAgICAgICAgICAgKiBoYW5kbGUg
dGhlIHJlcXVlc3RzLCBzbyB0aGlzIHNob3VsZG4ndCBiZSBhbiBpc3N1ZS4uLg0KPiAgICAgICAg
ICAgICAgICovDQo+IC0gICAgICAgICAgICBmb3IgKGFkZHIgPSBzZXJ2ZXItPmFkZHJzOyBhZGRy
OyBhZGRyID0gYWRkci0+bmV4dCkgew0KPiArICAgICAgICAgICAgZm9yIChhZGRyID0gaWRfc2Vy
dmVyLT5hZGRyczsgYWRkcjsgYWRkciA9IGFkZHItPm5leHQpIHsNCj4gICAgICAgICAgICAgICAg
ICBjaGFyIGhvc3RfaXBbNjRdOyAvKiBmb3IgYW55IElQdls0Nl0gc3RyaW5nICovDQo+ICAgICAg
ICAgICAgICAgICAgYXByX3NvY2thZGRyX2lwX2dldGJ1Zihob3N0X2lwLCBzaXplb2YgaG9zdF9p
cCwNCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHItPmhvc3Rf
YWRkcik7DQo+IEBAIC0xODQwLDEwICsxODUxLDEwIEBADQo+ICAgICAgICAgICAgICAgICAgYXBy
X21kNV91cGRhdGUoJmN0eCwgKHVuc2lnbmVkIGNoYXIgKikmYWRkci0+aG9zdF9wb3J0LA0KPiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemVvZihhZGRyLT5ob3N0X3BvcnQpKTsN
Cj4gICAgICAgICAgICAgIH0NCj4gLSAgICAgICAgICAgIGFwcl9tZDVfdXBkYXRlKCZjdHgsICh1
bnNpZ25lZCBjaGFyICopc2VydmVyLQ0KPiA+c2VydmVyX2hvc3RuYW1lLA0KPiAtICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc3RybGVuKHNlcnZlci0+c2VydmVyX2hvc3RuYW1lKSk7DQo+IC0g
ICAgICAgICAgICBhcHJfbWQ1X3VwZGF0ZSgmY3R4LCAodW5zaWduZWQgY2hhciAqKSZzZXJ2ZXIt
PnBvcnQsDQo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplb2Yoc2VydmVyLT5wb3J0
KSk7DQo+ICsgICAgICAgICAgICBhcHJfbWQ1X3VwZGF0ZSgmY3R4LCAodW5zaWduZWQgY2hhciAq
KWlkX3NlcnZlci0NCj4gPnNlcnZlcl9ob3N0bmFtZSwNCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0cmxlbihpZF9zZXJ2ZXItPnNlcnZlcl9ob3N0bmFtZSkpOw0KPiArICAgICAgICAg
ICAgYXByX21kNV91cGRhdGUoJmN0eCwgKHVuc2lnbmVkIGNoYXIgKikmaWRfc2VydmVyLT5wb3J0
LA0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZW9mKGlkX3NlcnZlci0+cG9ydCkp
Ow0KPiAgICAgICAgICB9DQo+ICAgICAgICAgIGFwcl9tZDVfZmluYWwoZGlnZXN0LCAmY3R4KTsN
Cj4gDQo+IEluZGV4OiBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5jDQo+ID09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCj4g
LS0tIG1vZHVsZXMvcHJveHkvbW9kX3Byb3h5LmMJKHJldmlzaW9uIDE2OTc1NzgpDQo+ICsrKyBt
b2R1bGVzL3Byb3h5L21vZF9wcm94eS5jCSh3b3JraW5nIGNvcHkpDQo+IEBAIC0xMTI5LDYgKzEx
MjksNyBAQA0KPiAgICAgIHBzLT5iYWRvcHQgPSBiYWRfZXJyb3I7DQo+ICAgICAgcHMtPmJhZG9w
dF9zZXQgPSAwOw0KPiAgICAgIHBzLT5wb29sID0gcDsNCj4gKyAgICBwcy0+cyA9IHM7DQo+IA0K
PiAgICAgIHJldHVybiBwczsNCj4gIH0NCj4gQEAgLTExNzIsNiArMTE3Myw3IEBADQo+ICAgICAg
cHMtPnByb3h5X3N0YXR1cyA9IChvdmVycmlkZXMtPnByb3h5X3N0YXR1c19zZXQgPT0gMCkgPyBi
YXNlLQ0KPiA+cHJveHlfc3RhdHVzIDogb3ZlcnJpZGVzLT5wcm94eV9zdGF0dXM7DQo+ICAgICAg
cHMtPnByb3h5X3N0YXR1c19zZXQgPSBvdmVycmlkZXMtPnByb3h5X3N0YXR1c19zZXQgfHwgYmFz
ZS0NCj4gPnByb3h5X3N0YXR1c19zZXQ7DQo+ICAgICAgcHMtPnBvb2wgPSBwOw0KPiArICAgIHBz
LT5zID0gb3ZlcnJpZGVzLT5zOw0KPiAgICAgIHJldHVybiBwczsNCj4gIH0NCj4gDQo+IEluZGV4
OiBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5oDQo+ID09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCj4gLS0tIG1vZHVsZXMv
cHJveHkvbW9kX3Byb3h5LmgJKHJldmlzaW9uIDE2OTc1NzgpDQo+ICsrKyBtb2R1bGVzL3Byb3h5
L21vZF9wcm94eS5oCSh3b3JraW5nIGNvcHkpDQo+IEBAIC0xOTMsNiArMTkzLDcgQEANCj4gICAg
ICB9IHByb3h5X3N0YXR1czsgICAgICAgICAgICAgLyogU3RhdHVzIGRpc3BsYXkgb3B0aW9ucyAq
Lw0KPiAgICAgIGNoYXIgcHJveHlfc3RhdHVzX3NldDsNCj4gICAgICBhcHJfcG9vbF90ICpwb29s
OyAgICAgICAgICAgLyogUG9vbCB1c2VkIGZvciBhbGxvY2F0aW5nIHRoaXMgc3RydWN0DQo+ICov
DQo+ICsgICAgc2VydmVyX3JlYyAqczsgICAgICAgICAgICAgIC8qIFRoZSBzZXJ2ZXJfcmVjIHdo
ZXJlIHRoaXMNCj4gY29uZmlndXJhdGlvbiB3YXMgY3JlYXRlZCBpbiAqLw0KPiAgfSBwcm94eV9z
ZXJ2ZXJfY29uZjsNCj4gDQo+IA0KPiBAQCAtMzY5LDYgKzM3MCw3IEBADQo+ICAgICAgY2hhciAg
ICAgICAgICAgIGRpc2FibGVyZXVzZV9zZXQ7DQo+ICAgICAgYXByX2ludGVydmFsX3RpbWVfdCBj
b25uX3RpbWVvdXQ7DQo+ICAgICAgY2hhciAgICAgICAgICAgIGNvbm5fdGltZW91dF9zZXQ7DQo+
ICsgICAgc2VydmVyX3JlYyAgICAgICpzZXJ2ZXI7ICAgIC8qIFRoZSBzZXJ2ZXJfcmVjIHdoZXJl
IHRoaXMNCj4gY29uZmlndXJhdGlvbiB3YXMgY3JlYXRlZCBpbiAqLw0KPiAgfTsNCj4gDQo+ICAv
Kg0KPiANCj4gDQo+IFJlZ2FyZHMNCj4gDQo+IFLDvGRpZ2VyDQo+IA0KPiA+IC0tLS0tT3JpZ2lu
YWwgTWVzc2FnZS0tLS0tDQo+ID4gRnJvbTogUGzDvG0sIFLDvGRpZ2VyLCBWb2RhZm9uZSBHcm91
cA0KPiA+IFNlbnQ6IERpZW5zdGFnLCAyNS4gQXVndXN0IDIwMTUgMTA6NDgNCj4gPiBUbzogZGV2
QGh0dHBkLmFwYWNoZS5vcmcNCj4gPiBTdWJqZWN0OiBSRTogUFIgNTgyNjc6IFJlZ3Jlc3Npb24g
aW4gMi4yLjMxIGNhdXNlZCBieSByMTY4MDkyMA0KPiA+DQo+ID4gSSB0aGluayB0aGUgY3VycmVu
dCBzdGF0ZSBvZiAyLjIuMzEgYnJlYWtzIGV4aXN0aW5nIDIuMi54IGNvbmZpZ3VyYXRpb24NCj4g
PiBwcmlvciB0byAyLjIuMzEuDQo+ID4gUHJpb3IgdG8gMi4yLjMxIHlvdSBjb3VsZCBkbyB0aGUg
Zm9sbG93aW5nOg0KPiA+DQo+ID4gPFByb3h5IEJhbGFuY2VyOi8vcHJveHkxPg0KPiA+IEJhbGFu
Y2VyTWVtYmVyIGFqcDovLzEyNy4wLjAuMTo3MDAxDQo+ID4gQmFsYW5jZXJNZW1iZXIgYWpwOi8v
MTI3LjAuMC4yOjcwMDINCj4gPiA8L1Byb3h5Pg0KPiA+DQo+ID4gPHZpcnR1YWxob3N0ICo6ODA+
DQo+ID4gUHJveHlQYXNzIC8gYmFsYW5jZXI6Ly9wcm94eTEvDQo+ID4gPC92aXJ0dWFsaG9zdD4N
Cj4gPg0KPiA+IDx2aXJ0dWFsaG9zdCAxMjcuMC4wLjE6ODA4MD4NCj4gPg0KPiA+IDxMb2NhdGlv
biAvYm1hbmFnZXI+DQo+ID4gICAgc2V0aGFuZGxlciBiYWxhbmNlci1tYW5hZ2VyDQo+ID4gPC9M
b2NhdGlvbj4NCj4gPg0KPiA+IDwvdmlydHVhbGhvc3Q+DQo+ID4NCj4gPiBXaXRoIHRoaXMgY29u
ZmlndXJhdGlvbiB5b3UgY291bGQgcHJvdmlkZSB5b3VyIHJldmVyc2UgcHJveHkgdG8gdGhlDQo+
ID4gb3V0c2lkZSB3b3JsZCB3aGlsZSBoYXZpbmcgdGhlDQo+ID4gYmFsYW5jZXJtYW5hZ2VyIG1h
bmFnaW5nIHRoZSBiYWxhbmNlciBvbmx5IGxpc3RlbmluZyB0byBsb2NhbGhvc3QuIFRoaXMNCj4g
aXMNCj4gPiBub3QgcG9zc2libGUgYW55IGxvbmdlciB3aXRoIDIuMi4zMQ0KPiA+IGFzIHRoZSB3
b3JrZXItPnMgaXMgbm93IGRpZmZlcmVudCBpbiBlYWNoIHZpcnR1YWxob3N0IHdoZXJlYXMgYmVm
b3JlIGl0DQo+ID4gd2FzIHRoZSBzYW1lIGFzIHRoZSB3b3JrZXItPmlkIHdhcyB1c2VkDQo+ID4g
dG8gaWRlbnRpZnkgdGhlIHNjb3JlYm9hcmQgc2xvdC4NCj4gPiBUaGUgcGF0Y2hlcyBwcm9wb3Nl
ZCBzbyBmYXIgd291bGQgbm90IGNoYW5nZSB0aGlzLiBJIHRoaW5rIGluIG9yZGVyIHRvDQo+ID4g
cmV2ZXJ0IHRvIHRoZSBvbGQgYmVoYXZpb3VyIHdlIG5lZWQgdG8NCj4gPiBzdG9yZSB3aXRoIGVh
Y2ggd29ya2VyIGluIHdoaWNoIHNlcnZlcl9yZWMgY29udGV4dCBpdCB3YXMgY3JlYXRlZC4gZS5n
Lg0KPiA+IGFkZGluZyBhIGNvbnN0IGNoYXIgKiBmaWVsZCB0byB0aGUgd29ya2VyIHRoYXQgd291
bGQgYmUgZmlsbGVkIHdpdGgNCj4gPiBzZXJ2ZXItPnNlcnZlcl9ob3N0bmFtZS4gVGhlbiB3ZSBj
b3VsZCB1c2UgdGhpcyB2YWx1ZSBmb3IgY3JlYXRpbmcgdGhlDQo+ID4gbWQ1Lg0KPiA+DQo+ID4g
UmVnYXJkcw0KPiA+DQo+ID4gUsO8ZGlnZXINCj4gPg0KPiA+ID4gLS0tLS1PcmlnaW5hbCBNZXNz
YWdlLS0tLS0NCj4gPiA+IEZyb206IEphbiBLYWx1xb5hIFttYWlsdG86amthbHV6YUByZWRoYXQu
Y29tXQ0KPiA+ID4gU2VudDogRGllbnN0YWcsIDI1LiBBdWd1c3QgMjAxNSAxMDoyMw0KPiA+ID4g
VG86IGRldkBodHRwZC5hcGFjaGUub3JnDQo+ID4gPiBTdWJqZWN0OiBSZTogUFIgNTgyNjc6IFJl
Z3Jlc3Npb24gaW4gMi4yLjMxIGNhdXNlZCBieSByMTY4MDkyMA0KPiA+ID4NCj4gPiA+IE9uIDA4
LzI0LzIwMTUgMTE6MTIgUE0sIFlhbm4gWWxhdmljIHdyb3RlOg0KPiA+ID4gPiBPbiBNb24sIEF1
ZyAyNCwgMjAxNSBhdCA1OjUxIFBNLCBZYW5uIFlsYXZpYyA8eWxhdmljLmRldkBnbWFpbC5jb20+
DQo+ID4gPiB3cm90ZToNCj4gPiA+ID4+DQo+ID4gPiA+PiBPbiBNb24sIEF1ZyAyNCwgMjAxNSBh
dCA0OjQ3IFBNLCBKYW4gS2FsdcW+YSA8amthbHV6YUByZWRoYXQuY29tPg0KPiA+IHdyb3RlOg0K
PiA+ID4gPj4+DQo+ID4gPiA+Pj4gMikgSW5jcmVtZW50IHByb3h5X2xiX3dvcmtlcnMgYWNjb3Jk
aW5nIHRvIG51bWJlciBvZiB3b3JrZXJzIGluDQo+ID4gPiBiYWxhbmNlcg0KPiA+ID4gPj4+IHdo
ZW4gdXNpbmcgIlByb3h5UGFzcyAvZm9vYmFyLyBCYWxhbmNlcjovL2Zvb2Jhci8iIGluIHRoZQ0K
PiA+IFZpcnR1YWxIb3N0Lg0KPiA+ID4gVGhlDQo+ID4gPiA+Pj4gc2NvcmVib2FyZCB3b3VsZCBo
YXZlIHJpZ2h0IHNpemUgYW5kIGFwX3Byb3h5X3NldF9zY29yZWJvYXJkX2xiDQo+ID4gd291bGQN
Cj4gPiA+IG5vdA0KPiA+ID4gPj4+IGZhaWwgdGhlbi4NCj4gPiA+ID4+DQo+ID4gPiA+PiBJIHRo
aW5rIHdlIGNhbiBkbyB0aGlzIHF1aXRlIGVhc2lseSBpbiBtZXJnZV9wcm94eV9jb25maWcoKSwg
YnkNCj4gPiA+ID4+IGluY3JlbWVudGluZyBwcm94eV9sYl93b3JrZXJzIGZvciBlYWNoIGJhc2Ut
PmJhbGFuY2Vycy0+d29ya2Vycy4gSQ0KPiA+IGRpZA0KPiA+ID4gPj4gbm90IHRlc3QgaXQgeWV0
IHRob3VnaC4NCj4gPiA+ID4NCj4gPiA+ID4gSSB0ZXN0ZWQgdGhlIGJlbG93IHdoaWNoIHNlZW1z
IHRvIHdvcmsuDQo+ID4gPg0KPiA+ID4gSG0sIHRoaXMgcmVzZXJ2ZXMgdGhlIHNsb3RzIGluIHNj
b3JlYm9hcmQgZXZlbiB3aGVuIHRoZSBiYWxhbmNlcnMgYXJlDQo+ID4gPiBub3QgdXNlZCBpbiB0
aGUgdmlydHVhbGhvc3QsIG9yIGFtIEkgd3Jvbmc/DQo+ID4gPg0KPiA+ID4gSSBvcmlnaW5hbGx5
IHRob3VnaHQgYWJvdXQgaW5jcmVhc2luZyBwcm94eV9sYl93b3JrZXJzIG9ubHkgd2hlbiB0aGV5
DQo+ID4gPiBhcmUgdXNlZCBpbiB0aGUgUHJveHlQYXNzKiBpbiB0aGUgdmhvc3QuDQo+ID4gPg0K
PiA+ID4gPiBJbmRleDogbW9kdWxlcy9wcm94eS9tb2RfcHJveHkuYw0KPiA+ID4gPiA9PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09DQo+ID4gPiA+IC0tLSBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5jICAgIChyZXZpc2lvbiAx
Njk3MzU4KQ0KPiA+ID4gPiArKysgbW9kdWxlcy9wcm94eS9tb2RfcHJveHkuYyAgICAod29ya2lu
ZyBjb3B5KQ0KPiA+ID4gPiBAQCAtMTEzNSw2ICsxMTM1LDcgQEAgc3RhdGljIHZvaWQgKiBjcmVh
dGVfcHJveHlfY29uZmlnKGFwcl9wb29sX3QNCj4gKnAsDQo+ID4gcw0KPiA+ID4gPg0KPiA+ID4g
PiAgIHN0YXRpYyB2b2lkICogbWVyZ2VfcHJveHlfY29uZmlnKGFwcl9wb29sX3QgKnAsIHZvaWQg
KmJhc2V2LCB2b2lkDQo+ID4gPiAqb3ZlcnJpZGVzdikNCj4gPiA+ID4gICB7DQo+ID4gPiA+ICsg
ICAgaW50IGk7DQo+ID4gPiA+ICAgICAgIHByb3h5X3NlcnZlcl9jb25mICpwcyA9IGFwcl9wY2Fs
bG9jKHAsDQo+ID4gc2l6ZW9mKHByb3h5X3NlcnZlcl9jb25mKSk7DQo+ID4gPiA+ICAgICAgIHBy
b3h5X3NlcnZlcl9jb25mICpiYXNlID0gKHByb3h5X3NlcnZlcl9jb25mICopIGJhc2V2Ow0KPiA+
ID4gPiAgICAgICBwcm94eV9zZXJ2ZXJfY29uZiAqb3ZlcnJpZGVzID0gKHByb3h5X3NlcnZlcl9j
b25mICopDQo+IG92ZXJyaWRlc3Y7DQo+ID4gPiA+IEBAIC0xMTQ3LDYgKzExNDgsMTMgQEAgc3Rh
dGljIHZvaWQgKiBtZXJnZV9wcm94eV9jb25maWcoYXByX3Bvb2xfdA0KPiAqcCwNCj4gPiA+IHZv
DQo+ID4gPiA+ICAgICAgIHBzLT5hbGxvd2VkX2Nvbm5lY3RfcG9ydHMgPSBhcHJfYXJyYXlfYXBw
ZW5kKHAsDQo+ID4gPiA+IGJhc2UtPmFsbG93ZWRfY29ubmVjdF9wb3J0cywgb3ZlcnJpZGVzLT5h
bGxvd2VkX2Nvbm5lY3RfcG9ydHMpOw0KPiA+ID4gPiAgICAgICBwcy0+d29ya2VycyA9IGFwcl9h
cnJheV9hcHBlbmQocCwgYmFzZS0+d29ya2Vycywgb3ZlcnJpZGVzLQ0KPiA+ID4gPndvcmtlcnMp
Ow0KPiA+ID4gPiAgICAgICBwcy0+YmFsYW5jZXJzID0gYXByX2FycmF5X2FwcGVuZChwLCBiYXNl
LT5iYWxhbmNlcnMsDQo+IG92ZXJyaWRlcy0NCj4gPiA+ID5iYWxhbmNlcnMpOw0KPiA+ID4gPiAr
ICAgIC8qIFRoZSBiYWxhbmNlcnMgaW5oZXJpdGVkIGZyb20gYmFzZSBkb24ndCBoYXZlIHRoZWly
IG1lbWJlcnMNCj4gPiA+IHJlc2VydmVkIG9uDQo+ID4gPiA+ICsgICAgICogdGhlIHNjb3JlYm9y
ZF9sYiBmb3IgdGhpcyBzZXJ2ZXIsIGFjY291bnQgZm9yIHRoZW0gbm93Lg0KPiA+ID4gPiArICAg
ICAqLw0KPiA+ID4gPiArICAgIGZvciAoaSA9IDA7IGkgPCBiYXNlLT5iYWxhbmNlcnMtPm5lbHRz
OyArK2kpIHsNCj4gPiA+ID4gKyAgICAgICAgcHJveHlfYmFsYW5jZXIgKmJhbGFuY2VyID0gKHBy
b3h5X2JhbGFuY2VyICopYmFzZS0NCj4gPmJhbGFuY2Vycy0NCj4gPiA+ID5lbHRzICsgaTsNCj4g
PiA+ID4gKyAgICAgICAgcHJveHlfbGJfd29ya2VycyArPSBiYWxhbmNlci0+d29ya2Vycy0+bmVs
dHM7DQo+ID4gPiA+ICsgICAgfQ0KPiA+ID4gPiAgICAgICBwcy0+Zm9yd2FyZCA9IG92ZXJyaWRl
cy0+Zm9yd2FyZCA/IG92ZXJyaWRlcy0+Zm9yd2FyZCA6IGJhc2UtDQo+ID4gPiA+Zm9yd2FyZDsN
Cj4gPiA+ID4gICAgICAgcHMtPnJldmVyc2UgPSBvdmVycmlkZXMtPnJldmVyc2UgPyBvdmVycmlk
ZXMtPnJldmVyc2UgOiBiYXNlLQ0KPiA+ID4gPnJldmVyc2U7DQo+ID4gPiA+DQo+ID4gPiA+IC0t
DQo+ID4gPiA+DQo+ID4gPiA+IFBsZWFzZSBub3RlIHRoYXQgc2luY2UgYWxsIHRoZSB3b3JrZXJz
IHdvdWxkIHJlYWxseSBiZSBhY2NvdW50ZWQgaW4NCj4gPiA+ID4gdGhlIHNjb3JlYm9hcmQsIGNv
bmZpZ3VyYXRpb25zIGxpa2UgdGhlIG9uZSBvZiBQUiA1ODI2NyAod2l0aA0KPiA+ID4gPiBpbmhl
cml0ZWQgYmFsYW5jZXJzKSB3b3VsZCBhbHNvIG5lZWQgYmlnZ2VyIFNITXMgKGJ1dCBubyBtb3Jl
KSB0aGFuDQo+ID4gPiA+IGN1cnJlbnRseS4uLg0KPiA+ID4gPg0KPiA+ID4gPiBXRFlUPw0KPiA+
ID4gPg0KPiA+ID4NCj4gPiA+IFJlZ2FyZHMsDQo+ID4gPiBKYW4gS2FsdXphDQo+ID4gPg0KDQo=

From dev-return-83542-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 10:43:53 2015
Return-Path: <dev-return-83542-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5489918D58
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 10:43:53 +0000 (UTC)
Received: (qmail 61282 invoked by uid 500); 25 Aug 2015 10:43:53 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 61204 invoked by uid 500); 25 Aug 2015 10:43:52 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 61194 invoked by uid 99); 25 Aug 2015 10:43:52 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 10:43:52 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 5A932182348
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 10:43:52 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.005
X-Spam-Level:
X-Spam-Status: No, score=-0.005 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 4XT4698U7nRl for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 10:43:44 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 32CBF20865
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 10:43:44 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 89BD015A06A6
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:43:41 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: protocols and mod_h2 consolidation
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <55DBEB00.9080106@gknw.net>
Date: Tue, 25 Aug 2015 12:43:40 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <8473DADF-04ED-4B48-A4F0-3FE34713674C@greenbytes.de>
References: <15D90C4A-6D6C-48B7-8A56-DF46E4B07370@greenbytes.de> <55DBEB00.9080106@gknw.net>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

Gregg,

I just checked in changes that should fix the warnings you mentioned. =
Thanks for reviewing this. As to the SERVER_PROTOCOL, I have no idea yet =
what may cause this.

//Stefan

> Am 25.08.2015 um 06:11 schrieb Gregg Smith <gls@gknw.net>:
>=20
> Hi,
>=20
> On 8/24/2015 9:29 AM, Stefan Eissing wrote:
>=20
>> I hope this works for everyone. The next weeks might be a good time =
to think about it and propose any changes and correct my mistakes.
>=20
> There are two things that go bump on my lowest non-eol version of =
MSVC.
> h2_worker.c
> .\h2_worker.c(113) : error C2440: 'function' : cannot convert from =
'void *(__cdecl *)(apr_thread_t *,void *)' to 'apr_thread_start_t'
> .\h2_worker.c(113) : warning C4022: 'apr_thread_create' : pointer =
mismatch for actual parameter 3
>=20
> Casting execute to apr_thread_start_t (what apr_thread_create expects) =
seems to quiet the compiler and FireFox seems to work with it.
>=20
> h2_session.c
> .\h2_session.c(1079) : error C2440: 'type cast' : cannot convert from =
'int' to 'nghttp2_data_source'
> .\h2_session.c(1081) : warning C4047: 'initializing' : 'int' differs =
in levels of indirection from 'nghttp2_data_source_read_callback'
>=20
> This cast to a union type, this MSVC version's docs on Unions has a =
note in the comments mentioning;
>>=20
>> We recommend that you do not use a union to cast data from one data =
type to another because union members occupy the same address in memory.
>>=20
>> There is no data-conversion support for unions. The results of =
interchanging writes and reads between union members of different types =
are unpredictable and depend on a variety of reasons.
>>=20
>=20
> They are evidently enforcing this. I just removed the cast and it =
builds and Firefox seems to work.
>=20
> Other nits of interest or not;
> h2_stream_set.c
> .\h2_stream_set.c(139) : warning C4028: formal parameter 2 different =
from declaration
>=20
> The function is prototyped as: h2_stream_set_match_fn *match
> but in h2_stream_set.c it is: h2_stream_set_match_fn match
>=20
> I get 2 different results for the $ENV{'SERVER_PROTOCOL'} in my perl =
script depending on the machine. My server gives me "HTTP/1.1" and =
running locally on my build machine I get "INCLUDED." Firefox says it is =
HTTP/2.0 200 OK so both results in this $ENV seem incorrect. I'm not =
sure why the difference as mod_h2 is configured same on both.
>=20
> Regards,
> Gregg
>=20
>=20
>=20
>=20
>=20

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83543-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 12:05:30 2015
Return-Path: <dev-return-83543-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0AA0D18F8B
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 12:05:30 +0000 (UTC)
Received: (qmail 63597 invoked by uid 500); 25 Aug 2015 12:05:29 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 63528 invoked by uid 500); 25 Aug 2015 12:05:29 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 63518 invoked by uid 99); 25 Aug 2015 12:05:29 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 12:05:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 0B5A1C20D4
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:05:29 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.452
X-Spam-Level: *
X-Spam-Status: No, score=1.452 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, KAM_ASCII_DIVIDERS=0.8,
	SPF_NEUTRAL=0.652] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id iQq6fW7AIuTb for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 12:05:22 +0000 (UTC)
Received: from resqmta-ch2-07v.sys.comcast.net (resqmta-ch2-07v.sys.comcast.net [69.252.207.39])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 43BBA42921
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:05:22 +0000 (UTC)
Received: from resomta-ch2-12v.sys.comcast.net ([69.252.207.108])
	by resqmta-ch2-07v.sys.comcast.net with comcast
	id 903k1r0052LrikM0105MNx; Tue, 25 Aug 2015 12:05:21 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-12v.sys.comcast.net with comcast
	id 905M1r00E2U0RYt0105Mui; Tue, 25 Aug 2015 12:05:21 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <20150821123403.6E568AC04B1@hades.apache.org>
Date: Tue, 25 Aug 2015 08:05:21 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <5D584650-581F-4E67-9B7F-FC1B2EDE07F6@jaguNET.com>
References: <20150821123403.6E568AC04B1@hades.apache.org>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440504321;
	bh=GnBcDBFcWVIUR8H3vm/man+xt0iYAanR7qx70s3Bomo=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=msoFX3tlb7USkC+HQm6LNEUmcxdsEokHh3sl883XyRBQFJN3X28vh9SJBIj0mS/xc
	 j2sCW2669Ikp7Xi1hKqQ7SGnYz1s6J6+C893F67TlMsPgNC3tOW5EgrFru9COIpowV
	 GixkYC6YXEoF+kw0RlLR+nZh6Ei68TOy1gsAEqbYS+DmBRqZmH8+UVQT+GUyBAS5d0
	 mitW5MLqvbVON/HkuJF5h1fCFiGYiRVe6GhzN/Zssx/etzxUm/S9z4UxwABP8Nk5bd
	 6E7xeIS/3h0wDWNeCX5z6V/9+c1xv83ebCivr+3TolRlyeTVlqnpAhYO27jN+bGBUH
	 f1vIyEwMsJjUQ==

I don't understand this at all... I add new balancers and members
all the time and do restarts and power cycles and never lose anything.
What do you mean by some sort of size check failing?? The size of
the slot should *never* change.

> On Aug 21, 2015, at 8:34 AM, ylavic@apache.org wrote:
>=20
> Author: ylavic
> Date: Fri Aug 21 12:34:02 2015
> New Revision: 1696960
>=20
> URL: http://svn.apache.org/r1696960
> Log:
> mod_proxy_balancer: Fix balancers and balancer members reuse on
> restart when new ones are added.  PR 58024.
>=20
> Since slotmem_create() issues a strict check on the size of an =
existing
> slot before reusing it, it won't reuse existing balancers and members =
when
> new ones are added during restart (whereas growth margins would allow =
it).
> Fix this by using slotmem_attach() first and if it succeeds do the =
checks
> based on the returned previous number of existing entries.
>=20
> Modified:
>    httpd/httpd/trunk/CHANGES
>    httpd/httpd/trunk/docs/log-message-tags/next-number
>    httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>=20
> Modified: httpd/httpd/trunk/CHANGES
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=3D1696960&r1=3D=
1696959&r2=3D1696960&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Aug 21 12:34:02 2015
> @@ -1,6 +1,9 @@
>                                                          -*- coding: =
utf-8 -*-
> Changes with Apache 2.5.0
>=20
> +  *) mod_proxy_balancer: Fix balancers and balancer members reuse on
> +     restart when new ones are added.  PR 58024.  [Yann Ylavic]
> +
>   *) mod_socache_memcache: Add the 'MemcacheConnTTL' directive to =
control how=20
>      long to keep idle connections with the memcache server(s).
>      Change default value from 600 usec (!) to 15 sec. PR 58091
>=20
> Modified: httpd/httpd/trunk/docs/log-message-tags/next-number
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/log-message-tags/next-=
number?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/docs/log-message-tags/next-number (original)
> +++ httpd/httpd/trunk/docs/log-message-tags/next-number Fri Aug 21 =
12:34:02 2015
> @@ -1 +1 @@
> -2964
> +2966
>=20
> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_bal=
ancer.c?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c (original)
> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Fri Aug 21 =
12:34:02 2015
> @@ -761,8 +761,11 @@ static int balancer_post_config(apr_pool
>         char *id;
>         proxy_balancer *balancer;
>         ap_slotmem_type_t type;
> +        apr_size_t attached_size;
> +        unsigned int attached_num;
>         void *sconf =3D s->module_config;
>         conf =3D (proxy_server_conf *)ap_get_module_config(sconf, =
&proxy_module);
> +
>         /*
>          * During create_proxy_config() we created a dummy id. Now =
that
>          * we have identifying info, we can create the real id
> @@ -794,11 +797,39 @@ static int balancer_post_config(apr_pool
>                          (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>                          (int)conf->balancers->nelts, =
conf->max_balancers);
>=20
> -            rv =3D storage->create(&new, conf->id,
> -                                 ALIGNED_PROXY_BALANCER_SHARED_SIZE,
> -                                 conf->max_balancers, type, pconf);
> +            /* First try to attach() since the number of configured =
balancers
> +             * may have changed during restart, and we don't want =
create() to
> +             * fail because the overall size * number of entries is =
not stricly
> +             * identical to the previous run.  There may still be =
enough room
> +             * for this new run thanks to bgrowth margin, so if =
attach()
> +             * succeeds we can only check for the number of available =
entries
> +             * to be *greater or* equal to what we need now.  If =
attach() fails
> +             * we simply fall back to create().
> +             */
> +            rv =3D storage->attach(&new, conf->id,
> +                                 &attached_size, &attached_num,
> +                                 pconf);
> +            if (rv !=3D APR_SUCCESS) {
> +                rv =3D storage->create(&new, conf->id,
> +                                     =
ALIGNED_PROXY_BALANCER_SHARED_SIZE,
> +                                     conf->max_balancers, type, =
pconf);
> +            }
> +            else {
> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, =
APLOGNO(02964)
> +                             "Balancers attached: %d, %d (%d)",
> +                             (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
> +                             (int)attached_num, conf->max_balancers);
> +                if (attached_size =3D=3D =
ALIGNED_PROXY_BALANCER_SHARED_SIZE
> +                        && attached_num >=3D conf->balancers->nelts) =
{
> +                    conf->max_balancers =3D attached_num;
> +                }
> +                else {
> +                    rv =3D APR_ENOSPC;
> +                }
> +            }
>             if (rv !=3D APR_SUCCESS) {
> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01179) "balancer slotmem_create failed");
> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01179)
> +                             "balancer slotmem create or attach =
failed");
>                 return !OK;
>             }
>             conf->bslot =3D new;
> @@ -864,11 +895,32 @@ static int balancer_post_config(apr_pool
>                          (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>                          (int)balancer->max_workers, i);
>=20
> -            rv =3D storage->create(&new, balancer->s->sname,
> -                                 ALIGNED_PROXY_WORKER_SHARED_SIZE,
> -                                 balancer->max_workers, type, pconf);
> +            /* try to attach first (see rationale from balancers =
above) */
> +            rv =3D storage->attach(&new, balancer->s->sname,
> +                                 &attached_size, &attached_num,
> +                                 pconf);
> +            if (rv !=3D APR_SUCCESS) {
> +                rv =3D storage->create(&new, balancer->s->sname,
> +                                     =
ALIGNED_PROXY_WORKER_SHARED_SIZE,
> +                                     balancer->max_workers, type, =
pconf);
> +            }
> +            else {
> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, =
APLOGNO(02965)
> +                             "Workers attached: %s (%s), %d, %d (%d) =
[%u]",
> +                             balancer->s->name, balancer->s->sname,
> +                             (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
> +                             (int)attached_num, =
balancer->max_workers, i);
> +                if (attached_size =3D=3D =
ALIGNED_PROXY_WORKER_SHARED_SIZE
> +                        && attached_num >=3D =
balancer->workers->nelts) {
> +                    balancer->max_workers =3D attached_num;
> +                }
> +                else {
> +                    rv =3D APR_ENOSPC;
> +                }
> +            }
>             if (rv !=3D APR_SUCCESS) {
> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01185) "worker slotmem_create failed");
> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01185)
> +                             "worker slotmem create or attach =
failed");
>                 return !OK;
>             }
>             balancer->wslot =3D new;
>=20
>=20


From dev-return-83544-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 12:12:17 2015
Return-Path: <dev-return-83544-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2C7E618FCB
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 12:12:17 +0000 (UTC)
Received: (qmail 81705 invoked by uid 500); 25 Aug 2015 12:12:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 81626 invoked by uid 500); 25 Aug 2015 12:12:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 81616 invoked by uid 99); 25 Aug 2015 12:12:16 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 12:12:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 13518C0332
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:12:16 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.452
X-Spam-Level: *
X-Spam-Status: No, score=1.452 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, KAM_ASCII_DIVIDERS=0.8,
	SPF_NEUTRAL=0.652] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id U_t9g3dAqIBb for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 12:12:11 +0000 (UTC)
Received: from resqmta-ch2-10v.sys.comcast.net (resqmta-ch2-10v.sys.comcast.net [69.252.207.42])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 4FF3C42B16
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:12:11 +0000 (UTC)
Received: from resomta-ch2-10v.sys.comcast.net ([69.252.207.106])
	by resqmta-ch2-10v.sys.comcast.net with comcast
	id 90BT1r0022JGN3p010CAEm; Tue, 25 Aug 2015 12:12:10 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-10v.sys.comcast.net with comcast
	id 90CA1r0072U0RYt010CAhU; Tue, 25 Aug 2015 12:12:10 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <20150821123403.6E568AC04B1@hades.apache.org>
Date: Tue, 25 Aug 2015 08:12:10 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com>
References: <20150821123403.6E568AC04B1@hades.apache.org>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440504730;
	bh=k0mylhBTn5aJAPHiksQ11HQXsVGj8UOHmdGrepTI424=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=lwhWP8tILdP3b2NY+5qkVK5CbV/ZKmcrUIzc7WIcoqgRRip1Tq8vmAx5ZcGO+B4xc
	 LNQ2wMRiKne8avtLQyy27t2wQSOjTzi5jZZgyXZBmlqYSIpOrpZV06pHItu0b+RorP
	 exAH5L6M+nyx1v0r2Jb6txYWPRJcOGaLhni69/l3NGFRKUNIFHJLs83DiJ00L38UK1
	 yLxwvVOHxoQ0FgkS1/2Q96YpVVExG1TmVfFav5y70/3xhtFJynHPmAfGyS9dOhTqDY
	 qzURbfs1YGEPJFZ7RmDawJBgrACoYgAB45THeXeOpeXGYdXE55cFq1JS1QlOZtsnLG
	 VBDPtu1M6BHjA==

How and when do ALIGNED_PROXY_BALANCER_SHARED_SIZE and =
conf->max_balancers
change???

> On Aug 21, 2015, at 8:34 AM, ylavic@apache.org wrote:
>=20
> Author: ylavic
> Date: Fri Aug 21 12:34:02 2015
> New Revision: 1696960
>=20
> URL: http://svn.apache.org/r1696960
> Log:
> mod_proxy_balancer: Fix balancers and balancer members reuse on
> restart when new ones are added.  PR 58024.
>=20
> Since slotmem_create() issues a strict check on the size of an =
existing
> slot before reusing it, it won't reuse existing balancers and members =
when
> new ones are added during restart (whereas growth margins would allow =
it).
> Fix this by using slotmem_attach() first and if it succeeds do the =
checks
> based on the returned previous number of existing entries.
>=20
> Modified:
>    httpd/httpd/trunk/CHANGES
>    httpd/httpd/trunk/docs/log-message-tags/next-number
>    httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>=20
> Modified: httpd/httpd/trunk/CHANGES
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=3D1696960&r1=3D=
1696959&r2=3D1696960&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Aug 21 12:34:02 2015
> @@ -1,6 +1,9 @@
>                                                          -*- coding: =
utf-8 -*-
> Changes with Apache 2.5.0
>=20
> +  *) mod_proxy_balancer: Fix balancers and balancer members reuse on
> +     restart when new ones are added.  PR 58024.  [Yann Ylavic]
> +
>   *) mod_socache_memcache: Add the 'MemcacheConnTTL' directive to =
control how=20
>      long to keep idle connections with the memcache server(s).
>      Change default value from 600 usec (!) to 15 sec. PR 58091
>=20
> Modified: httpd/httpd/trunk/docs/log-message-tags/next-number
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/log-message-tags/next-=
number?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/docs/log-message-tags/next-number (original)
> +++ httpd/httpd/trunk/docs/log-message-tags/next-number Fri Aug 21 =
12:34:02 2015
> @@ -1 +1 @@
> -2964
> +2966
>=20
> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_bal=
ancer.c?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c (original)
> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Fri Aug 21 =
12:34:02 2015
> @@ -761,8 +761,11 @@ static int balancer_post_config(apr_pool
>         char *id;
>         proxy_balancer *balancer;
>         ap_slotmem_type_t type;
> +        apr_size_t attached_size;
> +        unsigned int attached_num;
>         void *sconf =3D s->module_config;
>         conf =3D (proxy_server_conf *)ap_get_module_config(sconf, =
&proxy_module);
> +
>         /*
>          * During create_proxy_config() we created a dummy id. Now =
that
>          * we have identifying info, we can create the real id
> @@ -794,11 +797,39 @@ static int balancer_post_config(apr_pool
>                          (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>                          (int)conf->balancers->nelts, =
conf->max_balancers);
>=20
> -            rv =3D storage->create(&new, conf->id,
> -                                 ALIGNED_PROXY_BALANCER_SHARED_SIZE,
> -                                 conf->max_balancers, type, pconf);
> +            /* First try to attach() since the number of configured =
balancers
> +             * may have changed during restart, and we don't want =
create() to
> +             * fail because the overall size * number of entries is =
not stricly
> +             * identical to the previous run.  There may still be =
enough room
> +             * for this new run thanks to bgrowth margin, so if =
attach()
> +             * succeeds we can only check for the number of available =
entries
> +             * to be *greater or* equal to what we need now.  If =
attach() fails
> +             * we simply fall back to create().
> +             */
> +            rv =3D storage->attach(&new, conf->id,
> +                                 &attached_size, &attached_num,
> +                                 pconf);
> +            if (rv !=3D APR_SUCCESS) {
> +                rv =3D storage->create(&new, conf->id,
> +                                     =
ALIGNED_PROXY_BALANCER_SHARED_SIZE,
> +                                     conf->max_balancers, type, =
pconf);
> +            }
> +            else {
> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, =
APLOGNO(02964)
> +                             "Balancers attached: %d, %d (%d)",
> +                             (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
> +                             (int)attached_num, conf->max_balancers);
> +                if (attached_size =3D=3D =
ALIGNED_PROXY_BALANCER_SHARED_SIZE
> +                        && attached_num >=3D conf->balancers->nelts) =
{
> +                    conf->max_balancers =3D attached_num;
> +                }
> +                else {
> +                    rv =3D APR_ENOSPC;
> +                }
> +            }
>             if (rv !=3D APR_SUCCESS) {
> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01179) "balancer slotmem_create failed");
> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01179)
> +                             "balancer slotmem create or attach =
failed");
>                 return !OK;
>             }
>             conf->bslot =3D new;
> @@ -864,11 +895,32 @@ static int balancer_post_config(apr_pool
>                          (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>                          (int)balancer->max_workers, i);
>=20
> -            rv =3D storage->create(&new, balancer->s->sname,
> -                                 ALIGNED_PROXY_WORKER_SHARED_SIZE,
> -                                 balancer->max_workers, type, pconf);
> +            /* try to attach first (see rationale from balancers =
above) */
> +            rv =3D storage->attach(&new, balancer->s->sname,
> +                                 &attached_size, &attached_num,
> +                                 pconf);
> +            if (rv !=3D APR_SUCCESS) {
> +                rv =3D storage->create(&new, balancer->s->sname,
> +                                     =
ALIGNED_PROXY_WORKER_SHARED_SIZE,
> +                                     balancer->max_workers, type, =
pconf);
> +            }
> +            else {
> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, =
APLOGNO(02965)
> +                             "Workers attached: %s (%s), %d, %d (%d) =
[%u]",
> +                             balancer->s->name, balancer->s->sname,
> +                             (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
> +                             (int)attached_num, =
balancer->max_workers, i);
> +                if (attached_size =3D=3D =
ALIGNED_PROXY_WORKER_SHARED_SIZE
> +                        && attached_num >=3D =
balancer->workers->nelts) {
> +                    balancer->max_workers =3D attached_num;
> +                }
> +                else {
> +                    rv =3D APR_ENOSPC;
> +                }
> +            }
>             if (rv !=3D APR_SUCCESS) {
> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01185) "worker slotmem_create failed");
> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01185)
> +                             "worker slotmem create or attach =
failed");
>                 return !OK;
>             }
>             balancer->wslot =3D new;
>=20
>=20


From dev-return-83545-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 12:15:09 2015
Return-Path: <dev-return-83545-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 569C518FE8
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 12:15:09 +0000 (UTC)
Received: (qmail 91158 invoked by uid 500); 25 Aug 2015 12:15:08 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 91091 invoked by uid 500); 25 Aug 2015 12:15:08 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 91081 invoked by uid 99); 25 Aug 2015 12:15:08 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 12:15:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 66EB7182348
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:15:08 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.792
X-Spam-Level:
X-Spam-Status: No, score=0.792 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, RP_MATCHES_RCVD=-0.006,
	SPF_HELO_PASS=-0.001, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id eGyYu_YBbk52 for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 12:15:06 +0000 (UTC)
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 4A1A742B9B
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:15:06 +0000 (UTC)
Received: from int-mx14.intmail.prod.int.phx2.redhat.com (int-mx14.intmail.prod.int.phx2.redhat.com [10.5.11.27])
	by mx1.redhat.com (Postfix) with ESMTPS id 50A6E8EA4F
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:15:03 +0000 (UTC)
Received: from dhcp-24-191.brq.redhat.com (vpn1-5-154.ams2.redhat.com [10.36.5.154])
	by int-mx14.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP id t7PCF1Xu028978
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 08:15:02 -0400
Message-ID: <55DC5C44.6010900@redhat.com>
Date: Tue, 25 Aug 2015 14:15:00 +0200
From: =?UTF-8?B?SmFuIEthbHXFvmE=?= <jkaluza@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:31.0) Gecko/20100101 Thunderbird/31.7.0
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
References: <55DB2E9A.10307@redhat.com>	<CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com> <CAKQ1sVMFBhih-rq61WZkf+jbZ_dQd6+Y5Ekar--9v10+yuNO=Q@mail.gmail.com> <55DC25C7.9000607@redhat.com> <AB1691BE05AE7F4992697F2A0835627AC62F2C7D@VOEXM10W.internal.vodafone.com> <AB1691BE05AE7F4992697F2A0835627AC62F2E5F@VOEXM10W.internal.vodafone.com>
In-Reply-To: <AB1691BE05AE7F4992697F2A0835627AC62F2E5F@VOEXM10W.internal.vodafone.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.27

On 08/25/2015 11:39 AM, Plüm, Rüdiger, Vodafone Group wrote:
> How about the following patch? It uses the server_rec of the server that originally created the configuration item.

This looks like good strategy. I've verified that the patch fixes this 
issue and does not break anything when testing briefly.

What do you think, Yann?

Note that "id_server" declaration is missing in the patch. Otherwise 
it's OK.

Regards,
Jan Kaluza

> Index: modules/proxy/proxy_util.c
> ===================================================================
> --- modules/proxy/proxy_util.c	(revision 1697578)
> +++ modules/proxy/proxy_util.c	(working copy)
> @@ -1460,6 +1460,7 @@
>       (*worker)->flush_packets = flush_off;
>       (*worker)->flush_wait = PROXY_FLUSH_WAIT;
>       (*worker)->smax = -1;
> +    (*worker)->server = conf->s;
>       /* Increase the total worker count */
>       proxy_lb_workers++;
>       init_conn_pool(p, *worker);
> @@ -1824,14 +1829,20 @@
>               apr_md5_update(&ctx, (unsigned char *)balancer->name,
>                              strlen(balancer->name));
>           }
> -        if (server) {
> +        if (worker->server) {
> +            id_server = worker->server;
> +        }
> +        else {
> +            id_server = server;
> +        }
> +        if (id_server) {
>               server_addr_rec *addr;
>               /* Assumes the unique identifier of a vhost is its address(es)
>                * plus the ServerName:Port. Should two or more vhosts have this
>                * same identifier, the first one would always be elected to
>                * handle the requests, so this shouldn't be an issue...
>                */
> -            for (addr = server->addrs; addr; addr = addr->next) {
> +            for (addr = id_server->addrs; addr; addr = addr->next) {
>                   char host_ip[64]; /* for any IPv[46] string */
>                   apr_sockaddr_ip_getbuf(host_ip, sizeof host_ip,
>                                          addr->host_addr);
> @@ -1840,10 +1851,10 @@
>                   apr_md5_update(&ctx, (unsigned char *)&addr->host_port,
>                                  sizeof(addr->host_port));
>               }
> -            apr_md5_update(&ctx, (unsigned char *)server->server_hostname,
> -                           strlen(server->server_hostname));
> -            apr_md5_update(&ctx, (unsigned char *)&server->port,
> -                           sizeof(server->port));
> +            apr_md5_update(&ctx, (unsigned char *)id_server->server_hostname,
> +                           strlen(id_server->server_hostname));
> +            apr_md5_update(&ctx, (unsigned char *)&id_server->port,
> +                           sizeof(id_server->port));
>           }
>           apr_md5_final(digest, &ctx);
>
> Index: modules/proxy/mod_proxy.c
> ===================================================================
> --- modules/proxy/mod_proxy.c	(revision 1697578)
> +++ modules/proxy/mod_proxy.c	(working copy)
> @@ -1129,6 +1129,7 @@
>       ps->badopt = bad_error;
>       ps->badopt_set = 0;
>       ps->pool = p;
> +    ps->s = s;
>
>       return ps;
>   }
> @@ -1172,6 +1173,7 @@
>       ps->proxy_status = (overrides->proxy_status_set == 0) ? base->proxy_status : overrides->proxy_status;
>       ps->proxy_status_set = overrides->proxy_status_set || base->proxy_status_set;
>       ps->pool = p;
> +    ps->s = overrides->s;
>       return ps;
>   }
>
> Index: modules/proxy/mod_proxy.h
> ===================================================================
> --- modules/proxy/mod_proxy.h	(revision 1697578)
> +++ modules/proxy/mod_proxy.h	(working copy)
> @@ -193,6 +193,7 @@
>       } proxy_status;             /* Status display options */
>       char proxy_status_set;
>       apr_pool_t *pool;           /* Pool used for allocating this struct */
> +    server_rec *s;              /* The server_rec where this configuration was created in */
>   } proxy_server_conf;
>
>
> @@ -369,6 +370,7 @@
>       char            disablereuse_set;
>       apr_interval_time_t conn_timeout;
>       char            conn_timeout_set;
> +    server_rec      *server;    /* The server_rec where this configuration was created in */
>   };
>
>   /*
>
>
> Regards
>
> Rüdiger
>
>> -----Original Message-----
>> From: Plüm, Rüdiger, Vodafone Group
>> Sent: Dienstag, 25. August 2015 10:48
>> To: dev@httpd.apache.org
>> Subject: RE: PR 58267: Regression in 2.2.31 caused by r1680920
>>
>> I think the current state of 2.2.31 breaks existing 2.2.x configuration
>> prior to 2.2.31.
>> Prior to 2.2.31 you could do the following:
>>
>> <Proxy Balancer://proxy1>
>> BalancerMember ajp://127.0.0.1:7001
>> BalancerMember ajp://127.0.0.2:7002
>> </Proxy>
>>
>> <virtualhost *:80>
>> ProxyPass / balancer://proxy1/
>> </virtualhost>
>>
>> <virtualhost 127.0.0.1:8080>
>>
>> <Location /bmanager>
>>     sethandler balancer-manager
>> </Location>
>>
>> </virtualhost>
>>
>> With this configuration you could provide your reverse proxy to the
>> outside world while having the
>> balancermanager managing the balancer only listening to localhost. This is
>> not possible any longer with 2.2.31
>> as the worker->s is now different in each virtualhost whereas before it
>> was the same as the worker->id was used
>> to identify the scoreboard slot.
>> The patches proposed so far would not change this. I think in order to
>> revert to the old behaviour we need to
>> store with each worker in which server_rec context it was created. e.g.
>> adding a const char * field to the worker that would be filled with
>> server->server_hostname. Then we could use this value for creating the
>> md5.
>>
>> Regards
>>
>> Rüdiger
>>
>>> -----Original Message-----
>>> From: Jan Kaluža [mailto:jkaluza@redhat.com]
>>> Sent: Dienstag, 25. August 2015 10:23
>>> To: dev@httpd.apache.org
>>> Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
>>>
>>> On 08/24/2015 11:12 PM, Yann Ylavic wrote:
>>>> On Mon, Aug 24, 2015 at 5:51 PM, Yann Ylavic <ylavic.dev@gmail.com>
>>> wrote:
>>>>>
>>>>> On Mon, Aug 24, 2015 at 4:47 PM, Jan Kaluža <jkaluza@redhat.com>
>> wrote:
>>>>>>
>>>>>> 2) Increment proxy_lb_workers according to number of workers in
>>> balancer
>>>>>> when using "ProxyPass /foobar/ Balancer://foobar/" in the
>> VirtualHost.
>>> The
>>>>>> scoreboard would have right size and ap_proxy_set_scoreboard_lb
>> would
>>> not
>>>>>> fail then.
>>>>>
>>>>> I think we can do this quite easily in merge_proxy_config(), by
>>>>> incrementing proxy_lb_workers for each base->balancers->workers. I
>> did
>>>>> not test it yet though.
>>>>
>>>> I tested the below which seems to work.
>>>
>>> Hm, this reserves the slots in scoreboard even when the balancers are
>>> not used in the virtualhost, or am I wrong?
>>>
>>> I originally thought about increasing proxy_lb_workers only when they
>>> are used in the ProxyPass* in the vhost.
>>>
>>>> Index: modules/proxy/mod_proxy.c
>>>> ===================================================================
>>>> --- modules/proxy/mod_proxy.c    (revision 1697358)
>>>> +++ modules/proxy/mod_proxy.c    (working copy)
>>>> @@ -1135,6 +1135,7 @@ static void * create_proxy_config(apr_pool_t *p,
>> s
>>>>
>>>>    static void * merge_proxy_config(apr_pool_t *p, void *basev, void
>>> *overridesv)
>>>>    {
>>>> +    int i;
>>>>        proxy_server_conf *ps = apr_pcalloc(p,
>> sizeof(proxy_server_conf));
>>>>        proxy_server_conf *base = (proxy_server_conf *) basev;
>>>>        proxy_server_conf *overrides = (proxy_server_conf *) overridesv;
>>>> @@ -1147,6 +1148,13 @@ static void * merge_proxy_config(apr_pool_t *p,
>>> vo
>>>>        ps->allowed_connect_ports = apr_array_append(p,
>>>> base->allowed_connect_ports, overrides->allowed_connect_ports);
>>>>        ps->workers = apr_array_append(p, base->workers, overrides-
>>>> workers);
>>>>        ps->balancers = apr_array_append(p, base->balancers, overrides-
>>>> balancers);
>>>> +    /* The balancers inherited from base don't have their members
>>> reserved on
>>>> +     * the scorebord_lb for this server, account for them now.
>>>> +     */
>>>> +    for (i = 0; i < base->balancers->nelts; ++i) {
>>>> +        proxy_balancer *balancer = (proxy_balancer *)base->balancers-
>>>> elts + i;
>>>> +        proxy_lb_workers += balancer->workers->nelts;
>>>> +    }
>>>>        ps->forward = overrides->forward ? overrides->forward : base-
>>>> forward;
>>>>        ps->reverse = overrides->reverse ? overrides->reverse : base-
>>>> reverse;
>>>>
>>>> --
>>>>
>>>> Please note that since all the workers would really be accounted in
>>>> the scoreboard, configurations like the one of PR 58267 (with
>>>> inherited balancers) would also need bigger SHMs (but no more) than
>>>> currently...
>>>>
>>>> WDYT?
>>>>
>>>
>>> Regards,
>>> Jan Kaluza
>>>
>


From dev-return-83546-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 12:29:25 2015
Return-Path: <dev-return-83546-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3B77A180AE
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 12:29:25 +0000 (UTC)
Received: (qmail 40740 invoked by uid 500); 25 Aug 2015 12:29:24 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 40672 invoked by uid 500); 25 Aug 2015 12:29:24 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 40662 invoked by uid 99); 25 Aug 2015 12:29:23 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 12:29:23 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 905E7EDB81
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:29:23 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 0yVzvcvUbPJY for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 12:29:23 +0000 (UTC)
Received: from mail-io0-f178.google.com (mail-io0-f178.google.com [209.85.223.178])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id DE4C620752
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:29:22 +0000 (UTC)
Received: by iodv127 with SMTP id v127so183734770iod.3
        for <dev@httpd.apache.org>; Tue, 25 Aug 2015 05:29:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=9S+6LVDIGOOFQ2fETn6EqzDVqvA1T0+T/CJN4XJhtNo=;
        b=kugTl+3PIxgcNOfDhiDrF3ihxhVer7seB/JDez5JXMe4W2aDyruOAgCL15j+rmFhOV
         4q8mwG8d++UK5yd72ZLS/p5cEJOts809XKTCrL1uSF7Ad83Ud1GrxtdB18BvyOYYHfXl
         0ucr8Ix94WgQlOQLiqDssad5lEd+0oEuh1B6G8lwUPvICqxZ5DtsLOwvj2hAlRrAPlcB
         GT+fV1JF4QzDx18yF88P3UySwG5LtlSauS3gX4jf/vHo17Ho1MwKCd6uCICHXc+KJGZV
         nW0+gJDL41LymV8JQODrqATTKkVHbqCkx7Bl823IqSoeUKiijlVwWHqpeXcQGBtA9iV+
         WCLQ==
MIME-Version: 1.0
X-Received: by 10.107.150.145 with SMTP id y139mr21974570iod.128.1440505762295;
 Tue, 25 Aug 2015 05:29:22 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Tue, 25 Aug 2015 05:29:22 -0700 (PDT)
In-Reply-To: <55DC5C44.6010900@redhat.com>
References: <55DB2E9A.10307@redhat.com>
	<CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com>
	<CAKQ1sVMFBhih-rq61WZkf+jbZ_dQd6+Y5Ekar--9v10+yuNO=Q@mail.gmail.com>
	<55DC25C7.9000607@redhat.com>
	<AB1691BE05AE7F4992697F2A0835627AC62F2C7D@VOEXM10W.internal.vodafone.com>
	<AB1691BE05AE7F4992697F2A0835627AC62F2E5F@VOEXM10W.internal.vodafone.com>
	<55DC5C44.6010900@redhat.com>
Date: Tue, 25 Aug 2015 14:29:22 +0200
Message-ID: <CAKQ1sVMqWsCckPUn+1kq5_KExuGK1cXRaBP6QXX8JmaiqtFkNA@mail.gmail.com>
Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Tue, Aug 25, 2015 at 2:15 PM, Jan Kalu=C5=BEa <jkaluza@redhat.com> wrote=
:
> On 08/25/2015 11:39 AM, Pl=C3=BCm, R=C3=BCdiger, Vodafone Group wrote:
>>
>> How about the following patch? It uses the server_rec of the server that
>> originally created the configuration item.
>
>
> This looks like good strategy. I've verified that the patch fixes this is=
sue
> and does not break anything when testing briefly.
>
> What do you think, Yann?

OK for me too.

From dev-return-83547-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 12:39:08 2015
Return-Path: <dev-return-83547-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C5FDE18124
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 12:39:08 +0000 (UTC)
Received: (qmail 86232 invoked by uid 500); 25 Aug 2015 12:39:07 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 86136 invoked by uid 500); 25 Aug 2015 12:39:07 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 86125 invoked by uid 99); 25 Aug 2015 12:39:07 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 12:39:07 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 60EFC1AAC5D
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:39:07 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.799
X-Spam-Level:
X-Spam-Status: No, score=0.799 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, SPF_HELO_PASS=-0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id r4JDusxpA5j9 for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 12:38:56 +0000 (UTC)
Received: from mail1.bemta5.messagelabs.com (mail1.bemta5.messagelabs.com [195.245.231.143])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 99AB420383
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:38:55 +0000 (UTC)
Received: from [85.158.136.83] by server-7.bemta-5.messagelabs.com id 6E/B8-13905-8D16CD55; Tue, 25 Aug 2015 12:38:48 +0000
X-Env-Sender: ruediger.pluem@vodafone.com
X-Msg-Ref: server-14.tower-36.messagelabs.com!1440506327!20432123!1
X-Originating-IP: [195.232.244.136]
X-StarScan-Received:
X-StarScan-Version: 6.13.16; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 13383 invoked from network); 25 Aug 2015 12:38:48 -0000
Received: from mailout04.vodafone.com (HELO mailout04.vodafone.com) (195.232.244.136)
  by server-14.tower-36.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 25 Aug 2015 12:38:48 -0000
Received: from mailint01.vodafone.com (mailint01.vodafone.com [195.232.244.198])
	by mailout04.vodafone.com (Postfix) with ESMTP id 3n0qcl6CH7znTX2
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:38:47 +0200 (CEST)
Received: from mailint01.vodafone.com (localhost [127.0.0.1])
	by mailint01.vodafone.com (Postfix) with ESMTP id 3n0qcl599HzxPl3
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:38:47 +0200 (CEST)
Received: from VOEXC03W.internal.vodafone.com (voexc03w.dc-ratingen.de [145.230.101.23])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mailint01.vodafone.com (Postfix) with ESMTPS id 3n0qcl4pmgzxPM7
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:38:47 +0200 (CEST)
Received: from VOEXC16W.internal.vodafone.com (145.230.101.18) by
 VOEXC03W.internal.vodafone.com (145.230.101.23) with Microsoft SMTP Server
 (TLS) id 14.3.224.2; Tue, 25 Aug 2015 14:38:47 +0200
Received: from VOEXM10W.internal.vodafone.com ([169.254.2.132]) by
 voexc16w.internal.vodafone.com ([145.230.101.18]) with mapi id
 14.03.0224.002; Tue, 25 Aug 2015 14:38:46 +0200
From: =?iso-8859-1?Q?Pl=FCm=2C_R=FCdiger=2C_Vodafone_Group?=
	<ruediger.pluem@vodafone.com>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
Subject: RE: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES
 docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
Thread-Topic: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES
 docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
Thread-Index: AQHQ3y9E7FvkSLbK2keBj4g9EkOF854cp1+Q
Date: Tue, 25 Aug 2015 12:38:46 +0000
Message-ID: <AB1691BE05AE7F4992697F2A0835627AC62F319B@VOEXM10W.internal.vodafone.com>
References: <20150821123403.6E568AC04B1@hades.apache.org>
 <CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com>
In-Reply-To: <CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Is it possible that Jim is talking about adding new stuff via the balancer =
manager and Yann about adding new stuff to the config file and doing a grac=
eful restart?

Regards

R=FCdiger

> -----Original Message-----
> From: Jim Jagielski [mailto:jim@jaguNET.com]
> Sent: Dienstag, 25. August 2015 14:12
> To: dev@httpd.apache.org
> Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES
> docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
>=20
> How and when do ALIGNED_PROXY_BALANCER_SHARED_SIZE and conf->max_balancer=
s
> change???
>=20
> > On Aug 21, 2015, at 8:34 AM, ylavic@apache.org wrote:
> >
> > Author: ylavic
> > Date: Fri Aug 21 12:34:02 2015
> > New Revision: 1696960
> >
> > URL: http://svn.apache.org/r1696960
> > Log:
> > mod_proxy_balancer: Fix balancers and balancer members reuse on
> > restart when new ones are added.  PR 58024.
> >
> > Since slotmem_create() issues a strict check on the size of an existing
> > slot before reusing it, it won't reuse existing balancers and members
> when
> > new ones are added during restart (whereas growth margins would allow
> it).
> > Fix this by using slotmem_attach() first and if it succeeds do the
> checks
> > based on the returned previous number of existing entries.
> >
> > Modified:
> >    httpd/httpd/trunk/CHANGES
> >    httpd/httpd/trunk/docs/log-message-tags/next-number
> >    httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
> >
> > Modified: httpd/httpd/trunk/CHANGES
> > URL:
> http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=3D1696960&r1=
=3D1696
> 959&r2=3D1696960&view=3Ddiff
> >
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> =3D=3D=3D=3D
> > --- httpd/httpd/trunk/CHANGES [utf-8] (original)
> > +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Aug 21 12:34:02 2015
> > @@ -1,6 +1,9 @@
> >                                                          -*- coding:
> utf-8 -*-
> > Changes with Apache 2.5.0
> >
> > +  *) mod_proxy_balancer: Fix balancers and balancer members reuse on
> > +     restart when new ones are added.  PR 58024.  [Yann Ylavic]
> > +
> >   *) mod_socache_memcache: Add the 'MemcacheConnTTL' directive to
> control how
> >      long to keep idle connections with the memcache server(s).
> >      Change default value from 600 usec (!) to 15 sec. PR 58091
> >
> > Modified: httpd/httpd/trunk/docs/log-message-tags/next-number
> > URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/log-message-
> tags/next-number?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
> >
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> =3D=3D=3D=3D
> > --- httpd/httpd/trunk/docs/log-message-tags/next-number (original)
> > +++ httpd/httpd/trunk/docs/log-message-tags/next-number Fri Aug 21
> 12:34:02 2015
> > @@ -1 +1 @@
> > -2964
> > +2966
> >
> > Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
> > URL:
> http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_ba=
l
> ancer.c?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
> >
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> =3D=3D=3D=3D
> > --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c (original)
> > +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Fri Aug 21
> 12:34:02 2015
> > @@ -761,8 +761,11 @@ static int balancer_post_config(apr_pool
> >         char *id;
> >         proxy_balancer *balancer;
> >         ap_slotmem_type_t type;
> > +        apr_size_t attached_size;
> > +        unsigned int attached_num;
> >         void *sconf =3D s->module_config;
> >         conf =3D (proxy_server_conf *)ap_get_module_config(sconf,
> &proxy_module);
> > +
> >         /*
> >          * During create_proxy_config() we created a dummy id. Now that
> >          * we have identifying info, we can create the real id
> > @@ -794,11 +797,39 @@ static int balancer_post_config(apr_pool
> >                          (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
> >                          (int)conf->balancers->nelts, conf-
> >max_balancers);
> >
> > -            rv =3D storage->create(&new, conf->id,
> > -                                 ALIGNED_PROXY_BALANCER_SHARED_SIZE,
> > -                                 conf->max_balancers, type, pconf);
> > +            /* First try to attach() since the number of configured
> balancers
> > +             * may have changed during restart, and we don't want
> create() to
> > +             * fail because the overall size * number of entries is no=
t
> stricly
> > +             * identical to the previous run.  There may still be
> enough room
> > +             * for this new run thanks to bgrowth margin, so if
> attach()
> > +             * succeeds we can only check for the number of available
> entries
> > +             * to be *greater or* equal to what we need now.  If
> attach() fails
> > +             * we simply fall back to create().
> > +             */
> > +            rv =3D storage->attach(&new, conf->id,
> > +                                 &attached_size, &attached_num,
> > +                                 pconf);
> > +            if (rv !=3D APR_SUCCESS) {
> > +                rv =3D storage->create(&new, conf->id,
> > +
> ALIGNED_PROXY_BALANCER_SHARED_SIZE,
> > +                                     conf->max_balancers, type, pconf)=
;
> > +            }
> > +            else {
> > +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s,
> APLOGNO(02964)
> > +                             "Balancers attached: %d, %d (%d)",
> > +                             (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
> > +                             (int)attached_num, conf->max_balancers);
> > +                if (attached_size =3D=3D ALIGNED_PROXY_BALANCER_SHARED=
_SIZE
> > +                        && attached_num >=3D conf->balancers->nelts) {
> > +                    conf->max_balancers =3D attached_num;
> > +                }
> > +                else {
> > +                    rv =3D APR_ENOSPC;
> > +                }
> > +            }
> >             if (rv !=3D APR_SUCCESS) {
> > -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s,
> APLOGNO(01179) "balancer slotmem_create failed");
> > +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s,
> APLOGNO(01179)
> > +                             "balancer slotmem create or attach
> failed");
> >                 return !OK;
> >             }
> >             conf->bslot =3D new;
> > @@ -864,11 +895,32 @@ static int balancer_post_config(apr_pool
> >                          (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
> >                          (int)balancer->max_workers, i);
> >
> > -            rv =3D storage->create(&new, balancer->s->sname,
> > -                                 ALIGNED_PROXY_WORKER_SHARED_SIZE,
> > -                                 balancer->max_workers, type, pconf);
> > +            /* try to attach first (see rationale from balancers above=
)
> */
> > +            rv =3D storage->attach(&new, balancer->s->sname,
> > +                                 &attached_size, &attached_num,
> > +                                 pconf);
> > +            if (rv !=3D APR_SUCCESS) {
> > +                rv =3D storage->create(&new, balancer->s->sname,
> > +                                     ALIGNED_PROXY_WORKER_SHARED_SIZE,
> > +                                     balancer->max_workers, type,
> pconf);
> > +            }
> > +            else {
> > +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s,
> APLOGNO(02965)
> > +                             "Workers attached: %s (%s), %d, %d (%d)
> [%u]",
> > +                             balancer->s->name, balancer->s->sname,
> > +                             (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
> > +                             (int)attached_num, balancer->max_workers,
> i);
> > +                if (attached_size =3D=3D ALIGNED_PROXY_WORKER_SHARED_S=
IZE
> > +                        && attached_num >=3D balancer->workers->nelts)=
 {
> > +                    balancer->max_workers =3D attached_num;
> > +                }
> > +                else {
> > +                    rv =3D APR_ENOSPC;
> > +                }
> > +            }
> >             if (rv !=3D APR_SUCCESS) {
> > -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s,
> APLOGNO(01185) "worker slotmem_create failed");
> > +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s,
> APLOGNO(01185)
> > +                             "worker slotmem create or attach failed")=
;
> >                 return !OK;
> >             }
> >             balancer->wslot =3D new;
> >
> >


From dev-return-83548-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 12:39:28 2015
Return-Path: <dev-return-83548-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C027618125
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 12:39:28 +0000 (UTC)
Received: (qmail 87528 invoked by uid 500); 25 Aug 2015 12:39:28 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 87440 invoked by uid 500); 25 Aug 2015 12:39:28 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 87429 invoked by uid 99); 25 Aug 2015 12:39:28 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 12:39:28 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id BCE52183980
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:39:27 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.701
X-Spam-Level:
X-Spam-Status: No, score=0.701 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	KAM_ASCII_DIVIDERS=0.8, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id qaIw0JDy3HXB for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 12:39:14 +0000 (UTC)
Received: from mail-ig0-f180.google.com (mail-ig0-f180.google.com [209.85.213.180])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 0828F2155E
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:39:14 +0000 (UTC)
Received: by igui7 with SMTP id i7so10076775igu.1
        for <dev@httpd.apache.org>; Tue, 25 Aug 2015 05:39:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=eCIC6sqbjXs4VLWFq2D+glasgGvq/Sr+S50Acvik4Rs=;
        b=aGbUrO5kZHbKCwlW5E2MYuYEIWtgXrg6bQsPLzWllHyWZz3DPAjK5eQNryADgNn+CS
         yWHIZnYOxKaLyfMrLeFds5yKpvWRnx+XDZ37P6kHrKDpMpMzLLdccvP39ZNdYEh2KpxO
         e4lvcqGhBXULrsf9ZAvUtsRE/7SzGLHpiDU7r9cf9tKTVMaabice9gja9JuI1cy6iwiQ
         gvR+km9kO7r56KphTncgkTu1lgKVNE6kVTXUyVIT/iXnMtH1U/007whQST/Hypqpk0mW
         PAr1NbEQ7xsd60PmTkuY1rEUXmU0mI8M+tK9vsGZTKksJQxAzcQ0ifmMbSzsAik2L7Vy
         P7uQ==
MIME-Version: 1.0
X-Received: by 10.50.111.164 with SMTP id ij4mr1946194igb.70.1440506353462;
 Tue, 25 Aug 2015 05:39:13 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Tue, 25 Aug 2015 05:39:13 -0700 (PDT)
In-Reply-To: <CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com>
References: <20150821123403.6E568AC04B1@hades.apache.org>
	<CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com>
Date: Tue, 25 Aug 2015 14:39:13 +0200
Message-ID: <CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com>
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES
 docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

At every startup, in balancer_post_config:
    conf->max_balancers = conf->balancers->nelts + conf->bgrowth;

which means that if you add a balancer and restart, storage->create()
(eg. slotmem_create) will try to find an existing slot with this ID
and the exact ALIGNED_PROXY_BALANCER_SHARED_SIZE * conf->max_balancers
size, and fail:
    if (apr_shm_size_get(shm) != size) {
        apr_shm_detach(shm);
        ap_log_error(APLOG_MARK, APLOG_ERR, 0, ap_server_conf, APLOGNO(02599)
                     "existing shared memory for %s could not be used
(failed size check)",
                     fname);
        return APR_EINVAL;
    }

By using storage->attach() first (which is based on the ID only and
returns the existing item_size and item_num), we can do the check
ourselves and fail only if conf->max_balancers > item_num, allowing
for balancers to be added thanks to growth margin used at startup.

On Tue, Aug 25, 2015 at 2:12 PM, Jim Jagielski <jim@jagunet.com> wrote:
> How and when do ALIGNED_PROXY_BALANCER_SHARED_SIZE and conf->max_balancers
> change???
>
>> On Aug 21, 2015, at 8:34 AM, ylavic@apache.org wrote:
>>
>> Author: ylavic
>> Date: Fri Aug 21 12:34:02 2015
>> New Revision: 1696960
>>
>> URL: http://svn.apache.org/r1696960
>> Log:
>> mod_proxy_balancer: Fix balancers and balancer members reuse on
>> restart when new ones are added.  PR 58024.
>>
>> Since slotmem_create() issues a strict check on the size of an existing
>> slot before reusing it, it won't reuse existing balancers and members when
>> new ones are added during restart (whereas growth margins would allow it).
>> Fix this by using slotmem_attach() first and if it succeeds do the checks
>> based on the returned previous number of existing entries.
>>
>> Modified:
>>    httpd/httpd/trunk/CHANGES
>>    httpd/httpd/trunk/docs/log-message-tags/next-number
>>    httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>
>> Modified: httpd/httpd/trunk/CHANGES
>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=1696960&r1=1696959&r2=1696960&view=diff
>> ==============================================================================
>> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
>> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Aug 21 12:34:02 2015
>> @@ -1,6 +1,9 @@
>>                                                          -*- coding: utf-8 -*-
>> Changes with Apache 2.5.0
>>
>> +  *) mod_proxy_balancer: Fix balancers and balancer members reuse on
>> +     restart when new ones are added.  PR 58024.  [Yann Ylavic]
>> +
>>   *) mod_socache_memcache: Add the 'MemcacheConnTTL' directive to control how
>>      long to keep idle connections with the memcache server(s).
>>      Change default value from 600 usec (!) to 15 sec. PR 58091
>>
>> Modified: httpd/httpd/trunk/docs/log-message-tags/next-number
>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/log-message-tags/next-number?rev=1696960&r1=1696959&r2=1696960&view=diff
>> ==============================================================================
>> --- httpd/httpd/trunk/docs/log-message-tags/next-number (original)
>> +++ httpd/httpd/trunk/docs/log-message-tags/next-number Fri Aug 21 12:34:02 2015
>> @@ -1 +1 @@
>> -2964
>> +2966
>>
>> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c?rev=1696960&r1=1696959&r2=1696960&view=diff
>> ==============================================================================
>> --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c (original)
>> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Fri Aug 21 12:34:02 2015
>> @@ -761,8 +761,11 @@ static int balancer_post_config(apr_pool
>>         char *id;
>>         proxy_balancer *balancer;
>>         ap_slotmem_type_t type;
>> +        apr_size_t attached_size;
>> +        unsigned int attached_num;
>>         void *sconf = s->module_config;
>>         conf = (proxy_server_conf *)ap_get_module_config(sconf, &proxy_module);
>> +
>>         /*
>>          * During create_proxy_config() we created a dummy id. Now that
>>          * we have identifying info, we can create the real id
>> @@ -794,11 +797,39 @@ static int balancer_post_config(apr_pool
>>                          (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>                          (int)conf->balancers->nelts, conf->max_balancers);
>>
>> -            rv = storage->create(&new, conf->id,
>> -                                 ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>> -                                 conf->max_balancers, type, pconf);
>> +            /* First try to attach() since the number of configured balancers
>> +             * may have changed during restart, and we don't want create() to
>> +             * fail because the overall size * number of entries is not stricly
>> +             * identical to the previous run.  There may still be enough room
>> +             * for this new run thanks to bgrowth margin, so if attach()
>> +             * succeeds we can only check for the number of available entries
>> +             * to be *greater or* equal to what we need now.  If attach() fails
>> +             * we simply fall back to create().
>> +             */
>> +            rv = storage->attach(&new, conf->id,
>> +                                 &attached_size, &attached_num,
>> +                                 pconf);
>> +            if (rv != APR_SUCCESS) {
>> +                rv = storage->create(&new, conf->id,
>> +                                     ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>> +                                     conf->max_balancers, type, pconf);
>> +            }
>> +            else {
>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, APLOGNO(02964)
>> +                             "Balancers attached: %d, %d (%d)",
>> +                             (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>> +                             (int)attached_num, conf->max_balancers);
>> +                if (attached_size == ALIGNED_PROXY_BALANCER_SHARED_SIZE
>> +                        && attached_num >= conf->balancers->nelts) {
>> +                    conf->max_balancers = attached_num;
>> +                }
>> +                else {
>> +                    rv = APR_ENOSPC;
>> +                }
>> +            }
>>             if (rv != APR_SUCCESS) {
>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01179) "balancer slotmem_create failed");
>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01179)
>> +                             "balancer slotmem create or attach failed");
>>                 return !OK;
>>             }
>>             conf->bslot = new;
>> @@ -864,11 +895,32 @@ static int balancer_post_config(apr_pool
>>                          (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>                          (int)balancer->max_workers, i);
>>
>> -            rv = storage->create(&new, balancer->s->sname,
>> -                                 ALIGNED_PROXY_WORKER_SHARED_SIZE,
>> -                                 balancer->max_workers, type, pconf);
>> +            /* try to attach first (see rationale from balancers above) */
>> +            rv = storage->attach(&new, balancer->s->sname,
>> +                                 &attached_size, &attached_num,
>> +                                 pconf);
>> +            if (rv != APR_SUCCESS) {
>> +                rv = storage->create(&new, balancer->s->sname,
>> +                                     ALIGNED_PROXY_WORKER_SHARED_SIZE,
>> +                                     balancer->max_workers, type, pconf);
>> +            }
>> +            else {
>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, APLOGNO(02965)
>> +                             "Workers attached: %s (%s), %d, %d (%d) [%u]",
>> +                             balancer->s->name, balancer->s->sname,
>> +                             (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>> +                             (int)attached_num, balancer->max_workers, i);
>> +                if (attached_size == ALIGNED_PROXY_WORKER_SHARED_SIZE
>> +                        && attached_num >= balancer->workers->nelts) {
>> +                    balancer->max_workers = attached_num;
>> +                }
>> +                else {
>> +                    rv = APR_ENOSPC;
>> +                }
>> +            }
>>             if (rv != APR_SUCCESS) {
>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01185) "worker slotmem_create failed");
>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01185)
>> +                             "worker slotmem create or attach failed");
>>                 return !OK;
>>             }
>>             balancer->wslot = new;
>>
>>
>

From dev-return-83549-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 12:46:46 2015
Return-Path: <dev-return-83549-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DD36C1817C
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 12:46:46 +0000 (UTC)
Received: (qmail 11004 invoked by uid 500); 25 Aug 2015 12:46:46 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 10915 invoked by uid 500); 25 Aug 2015 12:46:46 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 10905 invoked by uid 99); 25 Aug 2015 12:46:46 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 12:46:46 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id E448EEDB7D
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:46:45 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.453
X-Spam-Level: *
X-Spam-Status: No, score=1.453 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, KAM_ASCII_DIVIDERS=0.8,
	SPF_NEUTRAL=0.652, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id otf_vZocc_k7 for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 12:46:37 +0000 (UTC)
Received: from resqmta-ch2-05v.sys.comcast.net (resqmta-ch2-05v.sys.comcast.net [69.252.207.37])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 2229D42921
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:46:37 +0000 (UTC)
Received: from resomta-ch2-13v.sys.comcast.net ([69.252.207.109])
	by resqmta-ch2-05v.sys.comcast.net with comcast
	id 90ls1r0032N9P4d010mWG7; Tue, 25 Aug 2015 12:46:30 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-13v.sys.comcast.net with comcast
	id 90mV1r00E2U0RYt010mVri; Tue, 25 Aug 2015 12:46:30 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com>
Date: Tue, 25 Aug 2015 08:46:29 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <6A1F4945-5B3E-4C1D-88E9-4B0A71D59F6C@jaguNET.com>
References: <20150821123403.6E568AC04B1@hades.apache.org> <CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com> <CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440506790;
	bh=rsZCjRW/HvjOISSTGtCMP4DaE9VeWuz5TjmSoKblkF8=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=ZKI6plia4hKA0iSgYVgwSsJxZxD+dYlHhl3sJfQv4iuJDEwHLCgGcklBvBGlDeg2A
	 7nAATDNdH/7c/ILJd8dP/qK5mgH8j5F0NGMMonsrzuh8hZa6sNMgWtFhkCYksnnCYS
	 EUb825L4aUkVJWe6LTyA0xLOCqew4X8joFasrZnVVTrSMyDGj3JmD0oQw+Y8AhIApg
	 qjYJMtkgrgUsZDJgT+JXYklIg61A/pdwCZTrKbnL9KrSEj2d3I7cNM0uIpTEjOpmH7
	 HX7htSuEoGhP9vTEFoACuzWW9vLRE6nUyh5AAzo/mIklh3mgOHChPN+VtN/HpsS63S
	 Srhyq7Cx8qk2Q==

But the number of balancers does not change yet... And when it
is implemented the overall size of the storage slot should *never*
change. It must be constant, ala the scoreboard.

> On Aug 25, 2015, at 8:39 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>=20
> At every startup, in balancer_post_config:
>    conf->max_balancers =3D conf->balancers->nelts + conf->bgrowth;
>=20
> which means that if you add a balancer and restart, storage->create()
> (eg. slotmem_create) will try to find an existing slot with this ID
> and the exact ALIGNED_PROXY_BALANCER_SHARED_SIZE * conf->max_balancers
> size, and fail:
>    if (apr_shm_size_get(shm) !=3D size) {
>        apr_shm_detach(shm);
>        ap_log_error(APLOG_MARK, APLOG_ERR, 0, ap_server_conf, =
APLOGNO(02599)
>                     "existing shared memory for %s could not be used
> (failed size check)",
>                     fname);
>        return APR_EINVAL;
>    }
>=20
> By using storage->attach() first (which is based on the ID only and
> returns the existing item_size and item_num), we can do the check
> ourselves and fail only if conf->max_balancers > item_num, allowing
> for balancers to be added thanks to growth margin used at startup.
>=20
> On Tue, Aug 25, 2015 at 2:12 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>> How and when do ALIGNED_PROXY_BALANCER_SHARED_SIZE and =
conf->max_balancers
>> change???
>>=20
>>> On Aug 21, 2015, at 8:34 AM, ylavic@apache.org wrote:
>>>=20
>>> Author: ylavic
>>> Date: Fri Aug 21 12:34:02 2015
>>> New Revision: 1696960
>>>=20
>>> URL: http://svn.apache.org/r1696960
>>> Log:
>>> mod_proxy_balancer: Fix balancers and balancer members reuse on
>>> restart when new ones are added.  PR 58024.
>>>=20
>>> Since slotmem_create() issues a strict check on the size of an =
existing
>>> slot before reusing it, it won't reuse existing balancers and =
members when
>>> new ones are added during restart (whereas growth margins would =
allow it).
>>> Fix this by using slotmem_attach() first and if it succeeds do the =
checks
>>> based on the returned previous number of existing entries.
>>>=20
>>> Modified:
>>>   httpd/httpd/trunk/CHANGES
>>>   httpd/httpd/trunk/docs/log-message-tags/next-number
>>>   httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>=20
>>> Modified: httpd/httpd/trunk/CHANGES
>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=3D1696960&r1=3D=
1696959&r2=3D1696960&view=3Ddiff
>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
>>> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Aug 21 12:34:02 2015
>>> @@ -1,6 +1,9 @@
>>>                                                         -*- coding: =
utf-8 -*-
>>> Changes with Apache 2.5.0
>>>=20
>>> +  *) mod_proxy_balancer: Fix balancers and balancer members reuse =
on
>>> +     restart when new ones are added.  PR 58024.  [Yann Ylavic]
>>> +
>>>  *) mod_socache_memcache: Add the 'MemcacheConnTTL' directive to =
control how
>>>     long to keep idle connections with the memcache server(s).
>>>     Change default value from 600 usec (!) to 15 sec. PR 58091
>>>=20
>>> Modified: httpd/httpd/trunk/docs/log-message-tags/next-number
>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/log-message-tags/next-=
number?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>> --- httpd/httpd/trunk/docs/log-message-tags/next-number (original)
>>> +++ httpd/httpd/trunk/docs/log-message-tags/next-number Fri Aug 21 =
12:34:02 2015
>>> @@ -1 +1 @@
>>> -2964
>>> +2966
>>>=20
>>> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_bal=
ancer.c?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>> --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c (original)
>>> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Fri Aug 21 =
12:34:02 2015
>>> @@ -761,8 +761,11 @@ static int balancer_post_config(apr_pool
>>>        char *id;
>>>        proxy_balancer *balancer;
>>>        ap_slotmem_type_t type;
>>> +        apr_size_t attached_size;
>>> +        unsigned int attached_num;
>>>        void *sconf =3D s->module_config;
>>>        conf =3D (proxy_server_conf *)ap_get_module_config(sconf, =
&proxy_module);
>>> +
>>>        /*
>>>         * During create_proxy_config() we created a dummy id. Now =
that
>>>         * we have identifying info, we can create the real id
>>> @@ -794,11 +797,39 @@ static int balancer_post_config(apr_pool
>>>                         (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>                         (int)conf->balancers->nelts, =
conf->max_balancers);
>>>=20
>>> -            rv =3D storage->create(&new, conf->id,
>>> -                                 =
ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>> -                                 conf->max_balancers, type, pconf);
>>> +            /* First try to attach() since the number of configured =
balancers
>>> +             * may have changed during restart, and we don't want =
create() to
>>> +             * fail because the overall size * number of entries is =
not stricly
>>> +             * identical to the previous run.  There may still be =
enough room
>>> +             * for this new run thanks to bgrowth margin, so if =
attach()
>>> +             * succeeds we can only check for the number of =
available entries
>>> +             * to be *greater or* equal to what we need now.  If =
attach() fails
>>> +             * we simply fall back to create().
>>> +             */
>>> +            rv =3D storage->attach(&new, conf->id,
>>> +                                 &attached_size, &attached_num,
>>> +                                 pconf);
>>> +            if (rv !=3D APR_SUCCESS) {
>>> +                rv =3D storage->create(&new, conf->id,
>>> +                                     =
ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>> +                                     conf->max_balancers, type, =
pconf);
>>> +            }
>>> +            else {
>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, =
APLOGNO(02964)
>>> +                             "Balancers attached: %d, %d (%d)",
>>> +                             =
(int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>> +                             (int)attached_num, =
conf->max_balancers);
>>> +                if (attached_size =3D=3D =
ALIGNED_PROXY_BALANCER_SHARED_SIZE
>>> +                        && attached_num >=3D =
conf->balancers->nelts) {
>>> +                    conf->max_balancers =3D attached_num;
>>> +                }
>>> +                else {
>>> +                    rv =3D APR_ENOSPC;
>>> +                }
>>> +            }
>>>            if (rv !=3D APR_SUCCESS) {
>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01179) "balancer slotmem_create failed");
>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01179)
>>> +                             "balancer slotmem create or attach =
failed");
>>>                return !OK;
>>>            }
>>>            conf->bslot =3D new;
>>> @@ -864,11 +895,32 @@ static int balancer_post_config(apr_pool
>>>                         (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>                         (int)balancer->max_workers, i);
>>>=20
>>> -            rv =3D storage->create(&new, balancer->s->sname,
>>> -                                 ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>> -                                 balancer->max_workers, type, =
pconf);
>>> +            /* try to attach first (see rationale from balancers =
above) */
>>> +            rv =3D storage->attach(&new, balancer->s->sname,
>>> +                                 &attached_size, &attached_num,
>>> +                                 pconf);
>>> +            if (rv !=3D APR_SUCCESS) {
>>> +                rv =3D storage->create(&new, balancer->s->sname,
>>> +                                     =
ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>> +                                     balancer->max_workers, type, =
pconf);
>>> +            }
>>> +            else {
>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, =
APLOGNO(02965)
>>> +                             "Workers attached: %s (%s), %d, %d =
(%d) [%u]",
>>> +                             balancer->s->name, balancer->s->sname,
>>> +                             (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>> +                             (int)attached_num, =
balancer->max_workers, i);
>>> +                if (attached_size =3D=3D =
ALIGNED_PROXY_WORKER_SHARED_SIZE
>>> +                        && attached_num >=3D =
balancer->workers->nelts) {
>>> +                    balancer->max_workers =3D attached_num;
>>> +                }
>>> +                else {
>>> +                    rv =3D APR_ENOSPC;
>>> +                }
>>> +            }
>>>            if (rv !=3D APR_SUCCESS) {
>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01185) "worker slotmem_create failed");
>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01185)
>>> +                             "worker slotmem create or attach =
failed");
>>>                return !OK;
>>>            }
>>>            balancer->wslot =3D new;
>>>=20
>>>=20
>>=20


From dev-return-83550-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 12:48:16 2015
Return-Path: <dev-return-83550-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8209D18187
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 12:48:16 +0000 (UTC)
Received: (qmail 14861 invoked by uid 500); 25 Aug 2015 12:48:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 14769 invoked by uid 500); 25 Aug 2015 12:48:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 14759 invoked by uid 99); 25 Aug 2015 12:48:15 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 12:48:15 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 803F31AAC89
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:48:15 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.799
X-Spam-Level: *
X-Spam-Status: No, score=1.799 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, KAM_LAZY_DOMAIN_SECURITY=1,
	SPF_HELO_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id JWVoNZ5U1NVx for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 12:48:04 +0000 (UTC)
Received: from mail1.bemta3.messagelabs.com (mail1.bemta3.messagelabs.com [195.245.230.166])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id B6E3042C69
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:48:03 +0000 (UTC)
Received: from [85.158.138.179] by server-6.bemta-3.messagelabs.com id A7/7A-29649-F626CD55; Tue, 25 Aug 2015 12:41:19 +0000
X-Env-Sender: ruediger.pluem@vodafone.com
X-Msg-Ref: server-2.tower-169.messagelabs.com!1440506478!17424613!1
X-Originating-IP: [195.232.244.133]
X-StarScan-Received:
X-StarScan-Version: 6.13.16; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 26070 invoked from network); 25 Aug 2015 12:41:18 -0000
Received: from mailout01.vodafone.com (HELO mailout01.vodafone.com) (195.232.244.133)
  by server-2.tower-169.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 25 Aug 2015 12:41:18 -0000
Received: from mailint01.vodafone.com (mailint01.vodafone.com [195.232.244.198])
	by mailout01.vodafone.com (Postfix) with ESMTP id 3n0qgf3ghjz1yHj
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:41:18 +0200 (CEST)
Received: from mailint01.vodafone.com (localhost [127.0.0.1])
	by mailint01.vodafone.com (Postfix) with ESMTP id 3n0qgf2bn1zxPmX
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:41:18 +0200 (CEST)
Received: from VOEXC03W.internal.vodafone.com (voexc03w.dc-ratingen.de [145.230.101.23])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mailint01.vodafone.com (Postfix) with ESMTPS id 3n0qgf2WpXzxPM7
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:41:18 +0200 (CEST)
Received: from VOEXC30W.internal.vodafone.com (145.230.103.202) by
 VOEXC03W.internal.vodafone.com (145.230.101.23) with Microsoft SMTP Server
 (TLS) id 14.3.224.2; Tue, 25 Aug 2015 14:41:17 +0200
Received: from VOEXM10W.internal.vodafone.com ([169.254.2.132]) by voexc30w
 ([145.230.103.202]) with mapi id 14.03.0224.002; Tue, 25 Aug 2015 14:41:17
 +0200
From: =?utf-8?B?UGzDvG0sIFLDvGRpZ2VyLCBWb2RhZm9uZSBHcm91cA==?=
	<ruediger.pluem@vodafone.com>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
Subject: RE: PR 58267: Regression in 2.2.31 caused by r1680920
Thread-Topic: PR 58267: Regression in 2.2.31 caused by r1680920
Thread-Index: AQHQ3nvoe/hfZCbrK0Kj2QfLbhsYGZ4bKveAgABZ04CAALsWgIAAJd6AgAAQP9CAAArXAIAAKDYQ
Date: Tue, 25 Aug 2015 12:41:17 +0000
Message-ID: <AB1691BE05AE7F4992697F2A0835627AC62F31AE@VOEXM10W.internal.vodafone.com>
References: <55DB2E9A.10307@redhat.com>
	<CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com>
 <CAKQ1sVMFBhih-rq61WZkf+jbZ_dQd6+Y5Ekar--9v10+yuNO=Q@mail.gmail.com>
 <55DC25C7.9000607@redhat.com>
 <AB1691BE05AE7F4992697F2A0835627AC62F2C7D@VOEXM10W.internal.vodafone.com>
 <AB1691BE05AE7F4992697F2A0835627AC62F2E5F@VOEXM10W.internal.vodafone.com>
 <55DC5C44.6010900@redhat.com>
In-Reply-To: <55DC5C44.6010900@redhat.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

VGhhbmtzIGZvciB0aGUgcG9pbnRlci4gSXQgaXMgbWlzc2luZyBiZWNhdXNlIEkgcmVtb3ZlZCBp
dCBieSBhY2NpZGVudCB3aGVuIGV4Y2x1ZGluZyBzb21lIGRlYnVnIGNvZGUgSSBzZXR1cCBsb2Nh
bGx5IGZvciBhbmFseXNpbmcgdGhlIGlzc3VlIGZyb20gdGhlIHBhdGNoIEkgcG9zdGVkLiBJIHdp
bGwgcG9zdCBhIHByb3BlciB2ZXJzaW9uIGFuZCBpZiB5b3UgYWdyZWUgcHV0IGl0IGluIFNUQVRV
UyBmb3IgMi4yLnguIEFzIGZhciBhcyBJIGNhbiB0ZWxsIHRoaXMgY2hhbmdlIG9ubHkgYXBwbGll
cyB0byAyLjIueC4gU28gaXQgd291bGQgYmUgZmluZSB0byBwcm9wb3NlIGl0IGRpcmVjdGx5IGlu
IFNUQVRVUyB3aXRob3V0IGFueSB0cnVuayBjb21taXQuDQoNClJlZ2FyZHMNCg0KUsO8ZGlnZXIN
Cg0KPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBKYW4gS2FsdcW+YSBbbWFp
bHRvOmprYWx1emFAcmVkaGF0LmNvbV0NCj4gU2VudDogRGllbnN0YWcsIDI1LiBBdWd1c3QgMjAx
NSAxNDoxNQ0KPiBUbzogZGV2QGh0dHBkLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogUmU6IFBSIDU4
MjY3OiBSZWdyZXNzaW9uIGluIDIuMi4zMSBjYXVzZWQgYnkgcjE2ODA5MjANCj4gDQo+IE9uIDA4
LzI1LzIwMTUgMTE6MzkgQU0sIFBsw7xtLCBSw7xkaWdlciwgVm9kYWZvbmUgR3JvdXAgd3JvdGU6
DQo+ID4gSG93IGFib3V0IHRoZSBmb2xsb3dpbmcgcGF0Y2g/IEl0IHVzZXMgdGhlIHNlcnZlcl9y
ZWMgb2YgdGhlIHNlcnZlciB0aGF0DQo+IG9yaWdpbmFsbHkgY3JlYXRlZCB0aGUgY29uZmlndXJh
dGlvbiBpdGVtLg0KPiANCj4gVGhpcyBsb29rcyBsaWtlIGdvb2Qgc3RyYXRlZ3kuIEkndmUgdmVy
aWZpZWQgdGhhdCB0aGUgcGF0Y2ggZml4ZXMgdGhpcw0KPiBpc3N1ZSBhbmQgZG9lcyBub3QgYnJl
YWsgYW55dGhpbmcgd2hlbiB0ZXN0aW5nIGJyaWVmbHkuDQo+IA0KPiBXaGF0IGRvIHlvdSB0aGlu
aywgWWFubj8NCj4gDQo+IE5vdGUgdGhhdCAiaWRfc2VydmVyIiBkZWNsYXJhdGlvbiBpcyBtaXNz
aW5nIGluIHRoZSBwYXRjaC4gT3RoZXJ3aXNlDQo+IGl0J3MgT0suDQo+IA0KPiBSZWdhcmRzLA0K
PiBKYW4gS2FsdXphDQo+IA0KPiA+IEluZGV4OiBtb2R1bGVzL3Byb3h5L3Byb3h5X3V0aWwuYw0K
PiA+ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT0NCj4gPiAtLS0gbW9kdWxlcy9wcm94eS9wcm94eV91dGlsLmMJKHJldmlz
aW9uIDE2OTc1NzgpDQo+ID4gKysrIG1vZHVsZXMvcHJveHkvcHJveHlfdXRpbC5jCSh3b3JraW5n
IGNvcHkpDQo+ID4gQEAgLTE0NjAsNiArMTQ2MCw3IEBADQo+ID4gICAgICAgKCp3b3JrZXIpLT5m
bHVzaF9wYWNrZXRzID0gZmx1c2hfb2ZmOw0KPiA+ICAgICAgICgqd29ya2VyKS0+Zmx1c2hfd2Fp
dCA9IFBST1hZX0ZMVVNIX1dBSVQ7DQo+ID4gICAgICAgKCp3b3JrZXIpLT5zbWF4ID0gLTE7DQo+
ID4gKyAgICAoKndvcmtlciktPnNlcnZlciA9IGNvbmYtPnM7DQo+ID4gICAgICAgLyogSW5jcmVh
c2UgdGhlIHRvdGFsIHdvcmtlciBjb3VudCAqLw0KPiA+ICAgICAgIHByb3h5X2xiX3dvcmtlcnMr
KzsNCj4gPiAgICAgICBpbml0X2Nvbm5fcG9vbChwLCAqd29ya2VyKTsNCj4gPiBAQCAtMTgyNCwx
NCArMTgyOSwyMCBAQA0KPiA+ICAgICAgICAgICAgICAgYXByX21kNV91cGRhdGUoJmN0eCwgKHVu
c2lnbmVkIGNoYXIgKiliYWxhbmNlci0+bmFtZSwNCj4gPiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0cmxlbihiYWxhbmNlci0+bmFtZSkpOw0KPiA+ICAgICAgICAgICB9DQo+ID4gLSAg
ICAgICAgaWYgKHNlcnZlcikgew0KPiA+ICsgICAgICAgIGlmICh3b3JrZXItPnNlcnZlcikgew0K
PiA+ICsgICAgICAgICAgICBpZF9zZXJ2ZXIgPSB3b3JrZXItPnNlcnZlcjsNCj4gPiArICAgICAg
ICB9DQo+ID4gKyAgICAgICAgZWxzZSB7DQo+ID4gKyAgICAgICAgICAgIGlkX3NlcnZlciA9IHNl
cnZlcjsNCj4gPiArICAgICAgICB9DQo+ID4gKyAgICAgICAgaWYgKGlkX3NlcnZlcikgew0KPiA+
ICAgICAgICAgICAgICAgc2VydmVyX2FkZHJfcmVjICphZGRyOw0KPiA+ICAgICAgICAgICAgICAg
LyogQXNzdW1lcyB0aGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgYSB2aG9zdCBpcyBpdHMNCj4gYWRk
cmVzcyhlcykNCj4gPiAgICAgICAgICAgICAgICAqIHBsdXMgdGhlIFNlcnZlck5hbWU6UG9ydC4g
U2hvdWxkIHR3byBvciBtb3JlIHZob3N0cw0KPiBoYXZlIHRoaXMNCj4gPiAgICAgICAgICAgICAg
ICAqIHNhbWUgaWRlbnRpZmllciwgdGhlIGZpcnN0IG9uZSB3b3VsZCBhbHdheXMgYmUgZWxlY3Rl
ZA0KPiB0bw0KPiA+ICAgICAgICAgICAgICAgICogaGFuZGxlIHRoZSByZXF1ZXN0cywgc28gdGhp
cyBzaG91bGRuJ3QgYmUgYW4gaXNzdWUuLi4NCj4gPiAgICAgICAgICAgICAgICAqLw0KPiA+IC0g
ICAgICAgICAgICBmb3IgKGFkZHIgPSBzZXJ2ZXItPmFkZHJzOyBhZGRyOyBhZGRyID0gYWRkci0+
bmV4dCkgew0KPiA+ICsgICAgICAgICAgICBmb3IgKGFkZHIgPSBpZF9zZXJ2ZXItPmFkZHJzOyBh
ZGRyOyBhZGRyID0gYWRkci0+bmV4dCkgew0KPiA+ICAgICAgICAgICAgICAgICAgIGNoYXIgaG9z
dF9pcFs2NF07IC8qIGZvciBhbnkgSVB2WzQ2XSBzdHJpbmcgKi8NCj4gPiAgICAgICAgICAgICAg
ICAgICBhcHJfc29ja2FkZHJfaXBfZ2V0YnVmKGhvc3RfaXAsIHNpemVvZiBob3N0X2lwLA0KPiA+
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkci0+aG9zdF9hZGRy
KTsNCj4gPiBAQCAtMTg0MCwxMCArMTg1MSwxMCBAQA0KPiA+ICAgICAgICAgICAgICAgICAgIGFw
cl9tZDVfdXBkYXRlKCZjdHgsICh1bnNpZ25lZCBjaGFyICopJmFkZHItDQo+ID5ob3N0X3BvcnQs
DQo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZW9mKGFkZHItPmhvc3Rf
cG9ydCkpOw0KPiA+ICAgICAgICAgICAgICAgfQ0KPiA+IC0gICAgICAgICAgICBhcHJfbWQ1X3Vw
ZGF0ZSgmY3R4LCAodW5zaWduZWQgY2hhciAqKXNlcnZlci0NCj4gPnNlcnZlcl9ob3N0bmFtZSwN
Cj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RybGVuKHNlcnZlci0+c2VydmVyX2hv
c3RuYW1lKSk7DQo+ID4gLSAgICAgICAgICAgIGFwcl9tZDVfdXBkYXRlKCZjdHgsICh1bnNpZ25l
ZCBjaGFyICopJnNlcnZlci0+cG9ydCwNCj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAg
c2l6ZW9mKHNlcnZlci0+cG9ydCkpOw0KPiA+ICsgICAgICAgICAgICBhcHJfbWQ1X3VwZGF0ZSgm
Y3R4LCAodW5zaWduZWQgY2hhciAqKWlkX3NlcnZlci0NCj4gPnNlcnZlcl9ob3N0bmFtZSwNCj4g
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RybGVuKGlkX3NlcnZlci0+c2VydmVyX2hv
c3RuYW1lKSk7DQo+ID4gKyAgICAgICAgICAgIGFwcl9tZDVfdXBkYXRlKCZjdHgsICh1bnNpZ25l
ZCBjaGFyICopJmlkX3NlcnZlci0+cG9ydCwNCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc2l6ZW9mKGlkX3NlcnZlci0+cG9ydCkpOw0KPiA+ICAgICAgICAgICB9DQo+ID4gICAgICAg
ICAgIGFwcl9tZDVfZmluYWwoZGlnZXN0LCAmY3R4KTsNCj4gPg0KPiA+IEluZGV4OiBtb2R1bGVz
L3Byb3h5L21vZF9wcm94eS5jDQo+ID4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KPiA+IC0tLSBtb2R1bGVzL3Byb3h5
L21vZF9wcm94eS5jCShyZXZpc2lvbiAxNjk3NTc4KQ0KPiA+ICsrKyBtb2R1bGVzL3Byb3h5L21v
ZF9wcm94eS5jCSh3b3JraW5nIGNvcHkpDQo+ID4gQEAgLTExMjksNiArMTEyOSw3IEBADQo+ID4g
ICAgICAgcHMtPmJhZG9wdCA9IGJhZF9lcnJvcjsNCj4gPiAgICAgICBwcy0+YmFkb3B0X3NldCA9
IDA7DQo+ID4gICAgICAgcHMtPnBvb2wgPSBwOw0KPiA+ICsgICAgcHMtPnMgPSBzOw0KPiA+DQo+
ID4gICAgICAgcmV0dXJuIHBzOw0KPiA+ICAgfQ0KPiA+IEBAIC0xMTcyLDYgKzExNzMsNyBAQA0K
PiA+ICAgICAgIHBzLT5wcm94eV9zdGF0dXMgPSAob3ZlcnJpZGVzLT5wcm94eV9zdGF0dXNfc2V0
ID09IDApID8gYmFzZS0NCj4gPnByb3h5X3N0YXR1cyA6IG92ZXJyaWRlcy0+cHJveHlfc3RhdHVz
Ow0KPiA+ICAgICAgIHBzLT5wcm94eV9zdGF0dXNfc2V0ID0gb3ZlcnJpZGVzLT5wcm94eV9zdGF0
dXNfc2V0IHx8IGJhc2UtDQo+ID5wcm94eV9zdGF0dXNfc2V0Ow0KPiA+ICAgICAgIHBzLT5wb29s
ID0gcDsNCj4gPiArICAgIHBzLT5zID0gb3ZlcnJpZGVzLT5zOw0KPiA+ICAgICAgIHJldHVybiBw
czsNCj4gPiAgIH0NCj4gPg0KPiA+IEluZGV4OiBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5oDQo+
ID4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PQ0KPiA+IC0tLSBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5oCShyZXZpc2lv
biAxNjk3NTc4KQ0KPiA+ICsrKyBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5oCSh3b3JraW5nIGNv
cHkpDQo+ID4gQEAgLTE5Myw2ICsxOTMsNyBAQA0KPiA+ICAgICAgIH0gcHJveHlfc3RhdHVzOyAg
ICAgICAgICAgICAvKiBTdGF0dXMgZGlzcGxheSBvcHRpb25zICovDQo+ID4gICAgICAgY2hhciBw
cm94eV9zdGF0dXNfc2V0Ow0KPiA+ICAgICAgIGFwcl9wb29sX3QgKnBvb2w7ICAgICAgICAgICAv
KiBQb29sIHVzZWQgZm9yIGFsbG9jYXRpbmcgdGhpcw0KPiBzdHJ1Y3QgKi8NCj4gPiArICAgIHNl
cnZlcl9yZWMgKnM7ICAgICAgICAgICAgICAvKiBUaGUgc2VydmVyX3JlYyB3aGVyZSB0aGlzDQo+
IGNvbmZpZ3VyYXRpb24gd2FzIGNyZWF0ZWQgaW4gKi8NCj4gPiAgIH0gcHJveHlfc2VydmVyX2Nv
bmY7DQo+ID4NCj4gPg0KPiA+IEBAIC0zNjksNiArMzcwLDcgQEANCj4gPiAgICAgICBjaGFyICAg
ICAgICAgICAgZGlzYWJsZXJldXNlX3NldDsNCj4gPiAgICAgICBhcHJfaW50ZXJ2YWxfdGltZV90
IGNvbm5fdGltZW91dDsNCj4gPiAgICAgICBjaGFyICAgICAgICAgICAgY29ubl90aW1lb3V0X3Nl
dDsNCj4gPiArICAgIHNlcnZlcl9yZWMgICAgICAqc2VydmVyOyAgICAvKiBUaGUgc2VydmVyX3Jl
YyB3aGVyZSB0aGlzDQo+IGNvbmZpZ3VyYXRpb24gd2FzIGNyZWF0ZWQgaW4gKi8NCj4gPiAgIH07
DQo+ID4NCj4gPiAgIC8qDQo+ID4NCj4gPg0KPiA+IFJlZ2FyZHMNCj4gPg0KPiA+IFLDvGRpZ2Vy
DQo+ID4NCj4gPj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gPj4gRnJvbTogUGzDvG0s
IFLDvGRpZ2VyLCBWb2RhZm9uZSBHcm91cA0KPiA+PiBTZW50OiBEaWVuc3RhZywgMjUuIEF1Z3Vz
dCAyMDE1IDEwOjQ4DQo+ID4+IFRvOiBkZXZAaHR0cGQuYXBhY2hlLm9yZw0KPiA+PiBTdWJqZWN0
OiBSRTogUFIgNTgyNjc6IFJlZ3Jlc3Npb24gaW4gMi4yLjMxIGNhdXNlZCBieSByMTY4MDkyMA0K
PiA+Pg0KPiA+PiBJIHRoaW5rIHRoZSBjdXJyZW50IHN0YXRlIG9mIDIuMi4zMSBicmVha3MgZXhp
c3RpbmcgMi4yLnggY29uZmlndXJhdGlvbg0KPiA+PiBwcmlvciB0byAyLjIuMzEuDQo+ID4+IFBy
aW9yIHRvIDIuMi4zMSB5b3UgY291bGQgZG8gdGhlIGZvbGxvd2luZzoNCj4gPj4NCj4gPj4gPFBy
b3h5IEJhbGFuY2VyOi8vcHJveHkxPg0KPiA+PiBCYWxhbmNlck1lbWJlciBhanA6Ly8xMjcuMC4w
LjE6NzAwMQ0KPiA+PiBCYWxhbmNlck1lbWJlciBhanA6Ly8xMjcuMC4wLjI6NzAwMg0KPiA+PiA8
L1Byb3h5Pg0KPiA+Pg0KPiA+PiA8dmlydHVhbGhvc3QgKjo4MD4NCj4gPj4gUHJveHlQYXNzIC8g
YmFsYW5jZXI6Ly9wcm94eTEvDQo+ID4+IDwvdmlydHVhbGhvc3Q+DQo+ID4+DQo+ID4+IDx2aXJ0
dWFsaG9zdCAxMjcuMC4wLjE6ODA4MD4NCj4gPj4NCj4gPj4gPExvY2F0aW9uIC9ibWFuYWdlcj4N
Cj4gPj4gICAgIHNldGhhbmRsZXIgYmFsYW5jZXItbWFuYWdlcg0KPiA+PiA8L0xvY2F0aW9uPg0K
PiA+Pg0KPiA+PiA8L3ZpcnR1YWxob3N0Pg0KPiA+Pg0KPiA+PiBXaXRoIHRoaXMgY29uZmlndXJh
dGlvbiB5b3UgY291bGQgcHJvdmlkZSB5b3VyIHJldmVyc2UgcHJveHkgdG8gdGhlDQo+ID4+IG91
dHNpZGUgd29ybGQgd2hpbGUgaGF2aW5nIHRoZQ0KPiA+PiBiYWxhbmNlcm1hbmFnZXIgbWFuYWdp
bmcgdGhlIGJhbGFuY2VyIG9ubHkgbGlzdGVuaW5nIHRvIGxvY2FsaG9zdC4gVGhpcw0KPiBpcw0K
PiA+PiBub3QgcG9zc2libGUgYW55IGxvbmdlciB3aXRoIDIuMi4zMQ0KPiA+PiBhcyB0aGUgd29y
a2VyLT5zIGlzIG5vdyBkaWZmZXJlbnQgaW4gZWFjaCB2aXJ0dWFsaG9zdCB3aGVyZWFzIGJlZm9y
ZSBpdA0KPiA+PiB3YXMgdGhlIHNhbWUgYXMgdGhlIHdvcmtlci0+aWQgd2FzIHVzZWQNCj4gPj4g
dG8gaWRlbnRpZnkgdGhlIHNjb3JlYm9hcmQgc2xvdC4NCj4gPj4gVGhlIHBhdGNoZXMgcHJvcG9z
ZWQgc28gZmFyIHdvdWxkIG5vdCBjaGFuZ2UgdGhpcy4gSSB0aGluayBpbiBvcmRlciB0bw0KPiA+
PiByZXZlcnQgdG8gdGhlIG9sZCBiZWhhdmlvdXIgd2UgbmVlZCB0bw0KPiA+PiBzdG9yZSB3aXRo
IGVhY2ggd29ya2VyIGluIHdoaWNoIHNlcnZlcl9yZWMgY29udGV4dCBpdCB3YXMgY3JlYXRlZC4g
ZS5nLg0KPiA+PiBhZGRpbmcgYSBjb25zdCBjaGFyICogZmllbGQgdG8gdGhlIHdvcmtlciB0aGF0
IHdvdWxkIGJlIGZpbGxlZCB3aXRoDQo+ID4+IHNlcnZlci0+c2VydmVyX2hvc3RuYW1lLiBUaGVu
IHdlIGNvdWxkIHVzZSB0aGlzIHZhbHVlIGZvciBjcmVhdGluZyB0aGUNCj4gPj4gbWQ1Lg0KPiA+
Pg0KPiA+PiBSZWdhcmRzDQo+ID4+DQo+ID4+IFLDvGRpZ2VyDQo+ID4+DQo+ID4+PiAtLS0tLU9y
aWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiA+Pj4gRnJvbTogSmFuIEthbHXFvmEgW21haWx0bzpqa2Fs
dXphQHJlZGhhdC5jb21dDQo+ID4+PiBTZW50OiBEaWVuc3RhZywgMjUuIEF1Z3VzdCAyMDE1IDEw
OjIzDQo+ID4+PiBUbzogZGV2QGh0dHBkLmFwYWNoZS5vcmcNCj4gPj4+IFN1YmplY3Q6IFJlOiBQ
UiA1ODI2NzogUmVncmVzc2lvbiBpbiAyLjIuMzEgY2F1c2VkIGJ5IHIxNjgwOTIwDQo+ID4+Pg0K
PiA+Pj4gT24gMDgvMjQvMjAxNSAxMToxMiBQTSwgWWFubiBZbGF2aWMgd3JvdGU6DQo+ID4+Pj4g
T24gTW9uLCBBdWcgMjQsIDIwMTUgYXQgNTo1MSBQTSwgWWFubiBZbGF2aWMgPHlsYXZpYy5kZXZA
Z21haWwuY29tPg0KPiA+Pj4gd3JvdGU6DQo+ID4+Pj4+DQo+ID4+Pj4+IE9uIE1vbiwgQXVnIDI0
LCAyMDE1IGF0IDQ6NDcgUE0sIEphbiBLYWx1xb5hIDxqa2FsdXphQHJlZGhhdC5jb20+DQo+ID4+
IHdyb3RlOg0KPiA+Pj4+Pj4NCj4gPj4+Pj4+IDIpIEluY3JlbWVudCBwcm94eV9sYl93b3JrZXJz
IGFjY29yZGluZyB0byBudW1iZXIgb2Ygd29ya2VycyBpbg0KPiA+Pj4gYmFsYW5jZXINCj4gPj4+
Pj4+IHdoZW4gdXNpbmcgIlByb3h5UGFzcyAvZm9vYmFyLyBCYWxhbmNlcjovL2Zvb2Jhci8iIGlu
IHRoZQ0KPiA+PiBWaXJ0dWFsSG9zdC4NCj4gPj4+IFRoZQ0KPiA+Pj4+Pj4gc2NvcmVib2FyZCB3
b3VsZCBoYXZlIHJpZ2h0IHNpemUgYW5kIGFwX3Byb3h5X3NldF9zY29yZWJvYXJkX2xiDQo+ID4+
IHdvdWxkDQo+ID4+PiBub3QNCj4gPj4+Pj4+IGZhaWwgdGhlbi4NCj4gPj4+Pj4NCj4gPj4+Pj4g
SSB0aGluayB3ZSBjYW4gZG8gdGhpcyBxdWl0ZSBlYXNpbHkgaW4gbWVyZ2VfcHJveHlfY29uZmln
KCksIGJ5DQo+ID4+Pj4+IGluY3JlbWVudGluZyBwcm94eV9sYl93b3JrZXJzIGZvciBlYWNoIGJh
c2UtPmJhbGFuY2Vycy0+d29ya2Vycy4gSQ0KPiA+PiBkaWQNCj4gPj4+Pj4gbm90IHRlc3QgaXQg
eWV0IHRob3VnaC4NCj4gPj4+Pg0KPiA+Pj4+IEkgdGVzdGVkIHRoZSBiZWxvdyB3aGljaCBzZWVt
cyB0byB3b3JrLg0KPiA+Pj4NCj4gPj4+IEhtLCB0aGlzIHJlc2VydmVzIHRoZSBzbG90cyBpbiBz
Y29yZWJvYXJkIGV2ZW4gd2hlbiB0aGUgYmFsYW5jZXJzIGFyZQ0KPiA+Pj4gbm90IHVzZWQgaW4g
dGhlIHZpcnR1YWxob3N0LCBvciBhbSBJIHdyb25nPw0KPiA+Pj4NCj4gPj4+IEkgb3JpZ2luYWxs
eSB0aG91Z2h0IGFib3V0IGluY3JlYXNpbmcgcHJveHlfbGJfd29ya2VycyBvbmx5IHdoZW4gdGhl
eQ0KPiA+Pj4gYXJlIHVzZWQgaW4gdGhlIFByb3h5UGFzcyogaW4gdGhlIHZob3N0Lg0KPiA+Pj4N
Cj4gPj4+PiBJbmRleDogbW9kdWxlcy9wcm94eS9tb2RfcHJveHkuYw0KPiA+Pj4+ID09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT0NCj4gPj4+PiAtLS0gbW9kdWxlcy9wcm94eS9tb2RfcHJveHkuYyAgICAocmV2aXNpb24gMTY5
NzM1OCkNCj4gPj4+PiArKysgbW9kdWxlcy9wcm94eS9tb2RfcHJveHkuYyAgICAod29ya2luZyBj
b3B5KQ0KPiA+Pj4+IEBAIC0xMTM1LDYgKzExMzUsNyBAQCBzdGF0aWMgdm9pZCAqIGNyZWF0ZV9w
cm94eV9jb25maWcoYXByX3Bvb2xfdA0KPiAqcCwNCj4gPj4gcw0KPiA+Pj4+DQo+ID4+Pj4gICAg
c3RhdGljIHZvaWQgKiBtZXJnZV9wcm94eV9jb25maWcoYXByX3Bvb2xfdCAqcCwgdm9pZCAqYmFz
ZXYsIHZvaWQNCj4gPj4+ICpvdmVycmlkZXN2KQ0KPiA+Pj4+ICAgIHsNCj4gPj4+PiArICAgIGlu
dCBpOw0KPiA+Pj4+ICAgICAgICBwcm94eV9zZXJ2ZXJfY29uZiAqcHMgPSBhcHJfcGNhbGxvYyhw
LA0KPiA+PiBzaXplb2YocHJveHlfc2VydmVyX2NvbmYpKTsNCj4gPj4+PiAgICAgICAgcHJveHlf
c2VydmVyX2NvbmYgKmJhc2UgPSAocHJveHlfc2VydmVyX2NvbmYgKikgYmFzZXY7DQo+ID4+Pj4g
ICAgICAgIHByb3h5X3NlcnZlcl9jb25mICpvdmVycmlkZXMgPSAocHJveHlfc2VydmVyX2NvbmYg
KikNCj4gb3ZlcnJpZGVzdjsNCj4gPj4+PiBAQCAtMTE0Nyw2ICsxMTQ4LDEzIEBAIHN0YXRpYyB2
b2lkICogbWVyZ2VfcHJveHlfY29uZmlnKGFwcl9wb29sX3QNCj4gKnAsDQo+ID4+PiB2bw0KPiA+
Pj4+ICAgICAgICBwcy0+YWxsb3dlZF9jb25uZWN0X3BvcnRzID0gYXByX2FycmF5X2FwcGVuZChw
LA0KPiA+Pj4+IGJhc2UtPmFsbG93ZWRfY29ubmVjdF9wb3J0cywgb3ZlcnJpZGVzLT5hbGxvd2Vk
X2Nvbm5lY3RfcG9ydHMpOw0KPiA+Pj4+ICAgICAgICBwcy0+d29ya2VycyA9IGFwcl9hcnJheV9h
cHBlbmQocCwgYmFzZS0+d29ya2Vycywgb3ZlcnJpZGVzLQ0KPiA+Pj4+IHdvcmtlcnMpOw0KPiA+
Pj4+ICAgICAgICBwcy0+YmFsYW5jZXJzID0gYXByX2FycmF5X2FwcGVuZChwLCBiYXNlLT5iYWxh
bmNlcnMsDQo+IG92ZXJyaWRlcy0NCj4gPj4+PiBiYWxhbmNlcnMpOw0KPiA+Pj4+ICsgICAgLyog
VGhlIGJhbGFuY2VycyBpbmhlcml0ZWQgZnJvbSBiYXNlIGRvbid0IGhhdmUgdGhlaXIgbWVtYmVy
cw0KPiA+Pj4gcmVzZXJ2ZWQgb24NCj4gPj4+PiArICAgICAqIHRoZSBzY29yZWJvcmRfbGIgZm9y
IHRoaXMgc2VydmVyLCBhY2NvdW50IGZvciB0aGVtIG5vdy4NCj4gPj4+PiArICAgICAqLw0KPiA+
Pj4+ICsgICAgZm9yIChpID0gMDsgaSA8IGJhc2UtPmJhbGFuY2Vycy0+bmVsdHM7ICsraSkgew0K
PiA+Pj4+ICsgICAgICAgIHByb3h5X2JhbGFuY2VyICpiYWxhbmNlciA9IChwcm94eV9iYWxhbmNl
ciAqKWJhc2UtDQo+ID5iYWxhbmNlcnMtDQo+ID4+Pj4gZWx0cyArIGk7DQo+ID4+Pj4gKyAgICAg
ICAgcHJveHlfbGJfd29ya2VycyArPSBiYWxhbmNlci0+d29ya2Vycy0+bmVsdHM7DQo+ID4+Pj4g
KyAgICB9DQo+ID4+Pj4gICAgICAgIHBzLT5mb3J3YXJkID0gb3ZlcnJpZGVzLT5mb3J3YXJkID8g
b3ZlcnJpZGVzLT5mb3J3YXJkIDogYmFzZS0NCj4gPj4+PiBmb3J3YXJkOw0KPiA+Pj4+ICAgICAg
ICBwcy0+cmV2ZXJzZSA9IG92ZXJyaWRlcy0+cmV2ZXJzZSA/IG92ZXJyaWRlcy0+cmV2ZXJzZSA6
IGJhc2UtDQo+ID4+Pj4gcmV2ZXJzZTsNCj4gPj4+Pg0KPiA+Pj4+IC0tDQo+ID4+Pj4NCj4gPj4+
PiBQbGVhc2Ugbm90ZSB0aGF0IHNpbmNlIGFsbCB0aGUgd29ya2VycyB3b3VsZCByZWFsbHkgYmUg
YWNjb3VudGVkIGluDQo+ID4+Pj4gdGhlIHNjb3JlYm9hcmQsIGNvbmZpZ3VyYXRpb25zIGxpa2Ug
dGhlIG9uZSBvZiBQUiA1ODI2NyAod2l0aA0KPiA+Pj4+IGluaGVyaXRlZCBiYWxhbmNlcnMpIHdv
dWxkIGFsc28gbmVlZCBiaWdnZXIgU0hNcyAoYnV0IG5vIG1vcmUpIHRoYW4NCj4gPj4+PiBjdXJy
ZW50bHkuLi4NCj4gPj4+Pg0KPiA+Pj4+IFdEWVQ/DQo+ID4+Pj4NCj4gPj4+DQo+ID4+PiBSZWdh
cmRzLA0KPiA+Pj4gSmFuIEthbHV6YQ0KPiA+Pj4NCj4gPg0KDQo=

From dev-return-83551-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 12:50:49 2015
Return-Path: <dev-return-83551-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DC6C9181A1
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 12:50:49 +0000 (UTC)
Received: (qmail 23365 invoked by uid 500); 25 Aug 2015 12:50:49 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 23289 invoked by uid 500); 25 Aug 2015 12:50:49 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 23279 invoked by uid 99); 25 Aug 2015 12:50:49 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 12:50:49 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id D3865182359
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:50:43 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.792
X-Spam-Level:
X-Spam-Status: No, score=0.792 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, RP_MATCHES_RCVD=-0.006,
	SPF_HELO_PASS=-0.001, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id q9fHhaAYbmDr for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 12:50:41 +0000 (UTC)
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 44405506EB
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:50:41 +0000 (UTC)
Received: from int-mx11.intmail.prod.int.phx2.redhat.com (int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by mx1.redhat.com (Postfix) with ESMTPS id 63A60CE0
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:50:40 +0000 (UTC)
Received: from dhcp-24-191.brq.redhat.com (vpn1-5-154.ams2.redhat.com [10.36.5.154])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP id t7PCoceb002143
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 08:50:39 -0400
Message-ID: <55DC649E.6090607@redhat.com>
Date: Tue, 25 Aug 2015 14:50:38 +0200
From: =?UTF-8?B?SmFuIEthbHXFvmE=?= <jkaluza@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:31.0) Gecko/20100101 Thunderbird/31.7.0
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
References: <55DB2E9A.10307@redhat.com>	<CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com> <CAKQ1sVMFBhih-rq61WZkf+jbZ_dQd6+Y5Ekar--9v10+yuNO=Q@mail.gmail.com> <55DC25C7.9000607@redhat.com> <AB1691BE05AE7F4992697F2A0835627AC62F2C7D@VOEXM10W.internal.vodafone.com> <AB1691BE05AE7F4992697F2A0835627AC62F2E5F@VOEXM10W.internal.vodafone.com> <55DC5C44.6010900@redhat.com> <AB1691BE05AE7F4992697F2A0835627AC62F31AE@VOEXM10W.internal.vodafone.com>
In-Reply-To: <AB1691BE05AE7F4992697F2A0835627AC62F31AE@VOEXM10W.internal.vodafone.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24

On 08/25/2015 02:41 PM, Plüm, Rüdiger, Vodafone Group wrote:
> Thanks for the pointer. It is missing because I removed it by accident when excluding some debug code I setup locally for analysing the issue from the patch I posted. I will post a proper version and if you agree put it in STATUS for 2.2.x. As far as I can tell this change only applies to 2.2.x. So it would be fine to propose it directly in STATUS without any trunk commit.

I agree.

Jan Kaluza

> Regards
>
> Rüdiger
>
>> -----Original Message-----
>> From: Jan Kaluža [mailto:jkaluza@redhat.com]
>> Sent: Dienstag, 25. August 2015 14:15
>> To: dev@httpd.apache.org
>> Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
>>
>> On 08/25/2015 11:39 AM, Plüm, Rüdiger, Vodafone Group wrote:
>>> How about the following patch? It uses the server_rec of the server that
>> originally created the configuration item.
>>
>> This looks like good strategy. I've verified that the patch fixes this
>> issue and does not break anything when testing briefly.
>>
>> What do you think, Yann?
>>
>> Note that "id_server" declaration is missing in the patch. Otherwise
>> it's OK.
>>
>> Regards,
>> Jan Kaluza
>>
>>> Index: modules/proxy/proxy_util.c
>>> ===================================================================
>>> --- modules/proxy/proxy_util.c	(revision 1697578)
>>> +++ modules/proxy/proxy_util.c	(working copy)
>>> @@ -1460,6 +1460,7 @@
>>>        (*worker)->flush_packets = flush_off;
>>>        (*worker)->flush_wait = PROXY_FLUSH_WAIT;
>>>        (*worker)->smax = -1;
>>> +    (*worker)->server = conf->s;
>>>        /* Increase the total worker count */
>>>        proxy_lb_workers++;
>>>        init_conn_pool(p, *worker);
>>> @@ -1824,14 +1829,20 @@
>>>                apr_md5_update(&ctx, (unsigned char *)balancer->name,
>>>                               strlen(balancer->name));
>>>            }
>>> -        if (server) {
>>> +        if (worker->server) {
>>> +            id_server = worker->server;
>>> +        }
>>> +        else {
>>> +            id_server = server;
>>> +        }
>>> +        if (id_server) {
>>>                server_addr_rec *addr;
>>>                /* Assumes the unique identifier of a vhost is its
>> address(es)
>>>                 * plus the ServerName:Port. Should two or more vhosts
>> have this
>>>                 * same identifier, the first one would always be elected
>> to
>>>                 * handle the requests, so this shouldn't be an issue...
>>>                 */
>>> -            for (addr = server->addrs; addr; addr = addr->next) {
>>> +            for (addr = id_server->addrs; addr; addr = addr->next) {
>>>                    char host_ip[64]; /* for any IPv[46] string */
>>>                    apr_sockaddr_ip_getbuf(host_ip, sizeof host_ip,
>>>                                           addr->host_addr);
>>> @@ -1840,10 +1851,10 @@
>>>                    apr_md5_update(&ctx, (unsigned char *)&addr-
>>> host_port,
>>>                                   sizeof(addr->host_port));
>>>                }
>>> -            apr_md5_update(&ctx, (unsigned char *)server-
>>> server_hostname,
>>> -                           strlen(server->server_hostname));
>>> -            apr_md5_update(&ctx, (unsigned char *)&server->port,
>>> -                           sizeof(server->port));
>>> +            apr_md5_update(&ctx, (unsigned char *)id_server-
>>> server_hostname,
>>> +                           strlen(id_server->server_hostname));
>>> +            apr_md5_update(&ctx, (unsigned char *)&id_server->port,
>>> +                           sizeof(id_server->port));
>>>            }
>>>            apr_md5_final(digest, &ctx);
>>>
>>> Index: modules/proxy/mod_proxy.c
>>> ===================================================================
>>> --- modules/proxy/mod_proxy.c	(revision 1697578)
>>> +++ modules/proxy/mod_proxy.c	(working copy)
>>> @@ -1129,6 +1129,7 @@
>>>        ps->badopt = bad_error;
>>>        ps->badopt_set = 0;
>>>        ps->pool = p;
>>> +    ps->s = s;
>>>
>>>        return ps;
>>>    }
>>> @@ -1172,6 +1173,7 @@
>>>        ps->proxy_status = (overrides->proxy_status_set == 0) ? base-
>>> proxy_status : overrides->proxy_status;
>>>        ps->proxy_status_set = overrides->proxy_status_set || base-
>>> proxy_status_set;
>>>        ps->pool = p;
>>> +    ps->s = overrides->s;
>>>        return ps;
>>>    }
>>>
>>> Index: modules/proxy/mod_proxy.h
>>> ===================================================================
>>> --- modules/proxy/mod_proxy.h	(revision 1697578)
>>> +++ modules/proxy/mod_proxy.h	(working copy)
>>> @@ -193,6 +193,7 @@
>>>        } proxy_status;             /* Status display options */
>>>        char proxy_status_set;
>>>        apr_pool_t *pool;           /* Pool used for allocating this
>> struct */
>>> +    server_rec *s;              /* The server_rec where this
>> configuration was created in */
>>>    } proxy_server_conf;
>>>
>>>
>>> @@ -369,6 +370,7 @@
>>>        char            disablereuse_set;
>>>        apr_interval_time_t conn_timeout;
>>>        char            conn_timeout_set;
>>> +    server_rec      *server;    /* The server_rec where this
>> configuration was created in */
>>>    };
>>>
>>>    /*
>>>
>>>
>>> Regards
>>>
>>> Rüdiger
>>>
>>>> -----Original Message-----
>>>> From: Plüm, Rüdiger, Vodafone Group
>>>> Sent: Dienstag, 25. August 2015 10:48
>>>> To: dev@httpd.apache.org
>>>> Subject: RE: PR 58267: Regression in 2.2.31 caused by r1680920
>>>>
>>>> I think the current state of 2.2.31 breaks existing 2.2.x configuration
>>>> prior to 2.2.31.
>>>> Prior to 2.2.31 you could do the following:
>>>>
>>>> <Proxy Balancer://proxy1>
>>>> BalancerMember ajp://127.0.0.1:7001
>>>> BalancerMember ajp://127.0.0.2:7002
>>>> </Proxy>
>>>>
>>>> <virtualhost *:80>
>>>> ProxyPass / balancer://proxy1/
>>>> </virtualhost>
>>>>
>>>> <virtualhost 127.0.0.1:8080>
>>>>
>>>> <Location /bmanager>
>>>>      sethandler balancer-manager
>>>> </Location>
>>>>
>>>> </virtualhost>
>>>>
>>>> With this configuration you could provide your reverse proxy to the
>>>> outside world while having the
>>>> balancermanager managing the balancer only listening to localhost. This
>> is
>>>> not possible any longer with 2.2.31
>>>> as the worker->s is now different in each virtualhost whereas before it
>>>> was the same as the worker->id was used
>>>> to identify the scoreboard slot.
>>>> The patches proposed so far would not change this. I think in order to
>>>> revert to the old behaviour we need to
>>>> store with each worker in which server_rec context it was created. e.g.
>>>> adding a const char * field to the worker that would be filled with
>>>> server->server_hostname. Then we could use this value for creating the
>>>> md5.
>>>>
>>>> Regards
>>>>
>>>> Rüdiger
>>>>
>>>>> -----Original Message-----
>>>>> From: Jan Kaluža [mailto:jkaluza@redhat.com]
>>>>> Sent: Dienstag, 25. August 2015 10:23
>>>>> To: dev@httpd.apache.org
>>>>> Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
>>>>>
>>>>> On 08/24/2015 11:12 PM, Yann Ylavic wrote:
>>>>>> On Mon, Aug 24, 2015 at 5:51 PM, Yann Ylavic <ylavic.dev@gmail.com>
>>>>> wrote:
>>>>>>>
>>>>>>> On Mon, Aug 24, 2015 at 4:47 PM, Jan Kaluža <jkaluza@redhat.com>
>>>> wrote:
>>>>>>>>
>>>>>>>> 2) Increment proxy_lb_workers according to number of workers in
>>>>> balancer
>>>>>>>> when using "ProxyPass /foobar/ Balancer://foobar/" in the
>>>> VirtualHost.
>>>>> The
>>>>>>>> scoreboard would have right size and ap_proxy_set_scoreboard_lb
>>>> would
>>>>> not
>>>>>>>> fail then.
>>>>>>>
>>>>>>> I think we can do this quite easily in merge_proxy_config(), by
>>>>>>> incrementing proxy_lb_workers for each base->balancers->workers. I
>>>> did
>>>>>>> not test it yet though.
>>>>>>
>>>>>> I tested the below which seems to work.
>>>>>
>>>>> Hm, this reserves the slots in scoreboard even when the balancers are
>>>>> not used in the virtualhost, or am I wrong?
>>>>>
>>>>> I originally thought about increasing proxy_lb_workers only when they
>>>>> are used in the ProxyPass* in the vhost.
>>>>>
>>>>>> Index: modules/proxy/mod_proxy.c
>>>>>> ===================================================================
>>>>>> --- modules/proxy/mod_proxy.c    (revision 1697358)
>>>>>> +++ modules/proxy/mod_proxy.c    (working copy)
>>>>>> @@ -1135,6 +1135,7 @@ static void * create_proxy_config(apr_pool_t
>> *p,
>>>> s
>>>>>>
>>>>>>     static void * merge_proxy_config(apr_pool_t *p, void *basev, void
>>>>> *overridesv)
>>>>>>     {
>>>>>> +    int i;
>>>>>>         proxy_server_conf *ps = apr_pcalloc(p,
>>>> sizeof(proxy_server_conf));
>>>>>>         proxy_server_conf *base = (proxy_server_conf *) basev;
>>>>>>         proxy_server_conf *overrides = (proxy_server_conf *)
>> overridesv;
>>>>>> @@ -1147,6 +1148,13 @@ static void * merge_proxy_config(apr_pool_t
>> *p,
>>>>> vo
>>>>>>         ps->allowed_connect_ports = apr_array_append(p,
>>>>>> base->allowed_connect_ports, overrides->allowed_connect_ports);
>>>>>>         ps->workers = apr_array_append(p, base->workers, overrides-
>>>>>> workers);
>>>>>>         ps->balancers = apr_array_append(p, base->balancers,
>> overrides-
>>>>>> balancers);
>>>>>> +    /* The balancers inherited from base don't have their members
>>>>> reserved on
>>>>>> +     * the scorebord_lb for this server, account for them now.
>>>>>> +     */
>>>>>> +    for (i = 0; i < base->balancers->nelts; ++i) {
>>>>>> +        proxy_balancer *balancer = (proxy_balancer *)base-
>>> balancers-
>>>>>> elts + i;
>>>>>> +        proxy_lb_workers += balancer->workers->nelts;
>>>>>> +    }
>>>>>>         ps->forward = overrides->forward ? overrides->forward : base-
>>>>>> forward;
>>>>>>         ps->reverse = overrides->reverse ? overrides->reverse : base-
>>>>>> reverse;
>>>>>>
>>>>>> --
>>>>>>
>>>>>> Please note that since all the workers would really be accounted in
>>>>>> the scoreboard, configurations like the one of PR 58267 (with
>>>>>> inherited balancers) would also need bigger SHMs (but no more) than
>>>>>> currently...
>>>>>>
>>>>>> WDYT?
>>>>>>
>>>>>
>>>>> Regards,
>>>>> Jan Kaluza
>>>>>
>>>
>


From dev-return-83552-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 12:52:22 2015
Return-Path: <dev-return-83552-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 59FAA181AB
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 12:52:22 +0000 (UTC)
Received: (qmail 27308 invoked by uid 500); 25 Aug 2015 12:52:21 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 27223 invoked by uid 500); 25 Aug 2015 12:52:21 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 27213 invoked by uid 99); 25 Aug 2015 12:52:21 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 12:52:21 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id E71511AABF8
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:52:15 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.453
X-Spam-Level: *
X-Spam-Status: No, score=1.453 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, KAM_ASCII_DIVIDERS=0.8,
	SPF_NEUTRAL=0.652, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id W0Kse0yTDq8Z for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 12:52:07 +0000 (UTC)
Received: from resqmta-ch2-01v.sys.comcast.net (resqmta-ch2-01v.sys.comcast.net [69.252.207.33])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 4702620383
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:52:07 +0000 (UTC)
Received: from resomta-ch2-20v.sys.comcast.net ([69.252.207.116])
	by resqmta-ch2-01v.sys.comcast.net with comcast
	id 90rh1r0062XD5SV010rtV7; Tue, 25 Aug 2015 12:51:53 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-20v.sys.comcast.net with comcast
	id 90rs1r0082U0RYt010rsex; Tue, 25 Aug 2015 12:51:53 +0000
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <AB1691BE05AE7F4992697F2A0835627AC62F2EF9@VOEXM10W.internal.vodafone.com>
Date: Tue, 25 Aug 2015 08:51:52 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <97F4487A-E0DE-411B-A563-FE3A7756FFD6@jaguNET.com>
References: <55DB2E9A.10307@redhat.com> <CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com> <CAKQ1sVMFBhih-rq61WZkf+jbZ_dQd6+Y5Ekar--9v10+yuNO=Q@mail.gmail.com> <55DC25C7.9000607@redhat.com> <AB1691BE05AE7F4992697F2A0835627AC62F2C7D@VOEXM10W.internal.vodafone.com> <AB1691BE05AE7F4992697F2A0835627AC62F2EF9@VOEXM10W.internal.vodafone.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440507113;
	bh=gacDLB90sQCh/g/RznbkftNFnqqXHMAEoYv+WZMmi38=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=NYTAwydljziLMtU3z08Gq3AK3b/MwTH4vT5E/6SlTRWT07WMUhGIb2T/b0Hk9Cw67
	 KSX5AZU2oCMCBgGicNLJVwUIDqW084o0UQYy1E09P6YOeN4tJO6MLFzxrJvlr4Vo3h
	 +mQyf35wUojV06FHyq7S1jAJgPYbGN2kObWX8lyDhymxrXLkJ13wGC8NDWKbtDwI7q
	 JfcfyJ3Y8HsDBxZi/A94dRBFLi8NFmIIOnvoB/LrQnjgIAK0e+lNVBsDd0+7yxd/oo
	 uWqfFqCoeejVv9Wj+tWLw46FBnzgYtxy1o7RAg7Gkr4gcd50f1eeIIwiZT8ZJMmxEk
	 ePgNsWXdFwnOg==

Looks good to me... Even though this is 2.2.x I did some quick
and dirty testing :)

> On Aug 25, 2015, at 5:44 AM, Pl=C3=BCm, R=C3=BCdiger, Vodafone Group =
<ruediger.pluem@vodafone.com> wrote:
>=20
> Of course it requires a minor bump.
>=20
> Regards
>=20
> R=C3=BCdiger
>=20
>> -----Original Message-----
>> From: Pl=C3=BCm, R=C3=BCdiger, Vodafone Group
>> Sent: Dienstag, 25. August 2015 11:39
>> To: dev@httpd.apache.org
>> Subject: RE: PR 58267: Regression in 2.2.31 caused by r1680920
>>=20
>> How about the following patch? It uses the server_rec of the server =
that
>> originally created the configuration item.
>>=20
>> Index: modules/proxy/proxy_util.c
>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>> --- modules/proxy/proxy_util.c	(revision 1697578)
>> +++ modules/proxy/proxy_util.c	(working copy)
>> @@ -1460,6 +1460,7 @@
>>     (*worker)->flush_packets =3D flush_off;
>>     (*worker)->flush_wait =3D PROXY_FLUSH_WAIT;
>>     (*worker)->smax =3D -1;
>> +    (*worker)->server =3D conf->s;
>>     /* Increase the total worker count */
>>     proxy_lb_workers++;
>>     init_conn_pool(p, *worker);
>> @@ -1824,14 +1829,20 @@
>>             apr_md5_update(&ctx, (unsigned char *)balancer->name,
>>                            strlen(balancer->name));
>>         }
>> -        if (server) {
>> +        if (worker->server) {
>> +            id_server =3D worker->server;
>> +        }
>> +        else {
>> +            id_server =3D server;
>> +        }
>> +        if (id_server) {
>>             server_addr_rec *addr;
>>             /* Assumes the unique identifier of a vhost is its
>> address(es)
>>              * plus the ServerName:Port. Should two or more vhosts =
have
>> this
>>              * same identifier, the first one would always be elected =
to
>>              * handle the requests, so this shouldn't be an issue...
>>              */
>> -            for (addr =3D server->addrs; addr; addr =3D addr->next) =
{
>> +            for (addr =3D id_server->addrs; addr; addr =3D =
addr->next) {
>>                 char host_ip[64]; /* for any IPv[46] string */
>>                 apr_sockaddr_ip_getbuf(host_ip, sizeof host_ip,
>>                                        addr->host_addr);
>> @@ -1840,10 +1851,10 @@
>>                 apr_md5_update(&ctx, (unsigned char =
*)&addr->host_port,
>>                                sizeof(addr->host_port));
>>             }
>> -            apr_md5_update(&ctx, (unsigned char *)server-
>>> server_hostname,
>> -                           strlen(server->server_hostname));
>> -            apr_md5_update(&ctx, (unsigned char *)&server->port,
>> -                           sizeof(server->port));
>> +            apr_md5_update(&ctx, (unsigned char *)id_server-
>>> server_hostname,
>> +                           strlen(id_server->server_hostname));
>> +            apr_md5_update(&ctx, (unsigned char *)&id_server->port,
>> +                           sizeof(id_server->port));
>>         }
>>         apr_md5_final(digest, &ctx);
>>=20
>> Index: modules/proxy/mod_proxy.c
>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>> --- modules/proxy/mod_proxy.c	(revision 1697578)
>> +++ modules/proxy/mod_proxy.c	(working copy)
>> @@ -1129,6 +1129,7 @@
>>     ps->badopt =3D bad_error;
>>     ps->badopt_set =3D 0;
>>     ps->pool =3D p;
>> +    ps->s =3D s;
>>=20
>>     return ps;
>> }
>> @@ -1172,6 +1173,7 @@
>>     ps->proxy_status =3D (overrides->proxy_status_set =3D=3D 0) ? =
base-
>>> proxy_status : overrides->proxy_status;
>>     ps->proxy_status_set =3D overrides->proxy_status_set || base-
>>> proxy_status_set;
>>     ps->pool =3D p;
>> +    ps->s =3D overrides->s;
>>     return ps;
>> }
>>=20
>> Index: modules/proxy/mod_proxy.h
>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>> --- modules/proxy/mod_proxy.h	(revision 1697578)
>> +++ modules/proxy/mod_proxy.h	(working copy)
>> @@ -193,6 +193,7 @@
>>     } proxy_status;             /* Status display options */
>>     char proxy_status_set;
>>     apr_pool_t *pool;           /* Pool used for allocating this =
struct
>> */
>> +    server_rec *s;              /* The server_rec where this
>> configuration was created in */
>> } proxy_server_conf;
>>=20
>>=20
>> @@ -369,6 +370,7 @@
>>     char            disablereuse_set;
>>     apr_interval_time_t conn_timeout;
>>     char            conn_timeout_set;
>> +    server_rec      *server;    /* The server_rec where this
>> configuration was created in */
>> };
>>=20
>> /*
>>=20
>>=20
>> Regards
>>=20
>> R=C3=BCdiger
>>=20
>>> -----Original Message-----
>>> From: Pl=C3=BCm, R=C3=BCdiger, Vodafone Group
>>> Sent: Dienstag, 25. August 2015 10:48
>>> To: dev@httpd.apache.org
>>> Subject: RE: PR 58267: Regression in 2.2.31 caused by r1680920
>>>=20
>>> I think the current state of 2.2.31 breaks existing 2.2.x =
configuration
>>> prior to 2.2.31.
>>> Prior to 2.2.31 you could do the following:
>>>=20
>>> <Proxy Balancer://proxy1>
>>> BalancerMember ajp://127.0.0.1:7001
>>> BalancerMember ajp://127.0.0.2:7002
>>> </Proxy>
>>>=20
>>> <virtualhost *:80>
>>> ProxyPass / balancer://proxy1/
>>> </virtualhost>
>>>=20
>>> <virtualhost 127.0.0.1:8080>
>>>=20
>>> <Location /bmanager>
>>>   sethandler balancer-manager
>>> </Location>
>>>=20
>>> </virtualhost>
>>>=20
>>> With this configuration you could provide your reverse proxy to the
>>> outside world while having the
>>> balancermanager managing the balancer only listening to localhost. =
This
>> is
>>> not possible any longer with 2.2.31
>>> as the worker->s is now different in each virtualhost whereas before =
it
>>> was the same as the worker->id was used
>>> to identify the scoreboard slot.
>>> The patches proposed so far would not change this. I think in order =
to
>>> revert to the old behaviour we need to
>>> store with each worker in which server_rec context it was created. =
e.g.
>>> adding a const char * field to the worker that would be filled with
>>> server->server_hostname. Then we could use this value for creating =
the
>>> md5.
>>>=20
>>> Regards
>>>=20
>>> R=C3=BCdiger
>>>=20
>>>> -----Original Message-----
>>>> From: Jan Kalu=C5=BEa [mailto:jkaluza@redhat.com]
>>>> Sent: Dienstag, 25. August 2015 10:23
>>>> To: dev@httpd.apache.org
>>>> Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
>>>>=20
>>>> On 08/24/2015 11:12 PM, Yann Ylavic wrote:
>>>>> On Mon, Aug 24, 2015 at 5:51 PM, Yann Ylavic =
<ylavic.dev@gmail.com>
>>>> wrote:
>>>>>>=20
>>>>>> On Mon, Aug 24, 2015 at 4:47 PM, Jan Kalu=C5=BEa =
<jkaluza@redhat.com>
>>> wrote:
>>>>>>>=20
>>>>>>> 2) Increment proxy_lb_workers according to number of workers in
>>>> balancer
>>>>>>> when using "ProxyPass /foobar/ Balancer://foobar/" in the
>>> VirtualHost.
>>>> The
>>>>>>> scoreboard would have right size and ap_proxy_set_scoreboard_lb
>>> would
>>>> not
>>>>>>> fail then.
>>>>>>=20
>>>>>> I think we can do this quite easily in merge_proxy_config(), by
>>>>>> incrementing proxy_lb_workers for each base->balancers->workers. =
I
>>> did
>>>>>> not test it yet though.
>>>>>=20
>>>>> I tested the below which seems to work.
>>>>=20
>>>> Hm, this reserves the slots in scoreboard even when the balancers =
are
>>>> not used in the virtualhost, or am I wrong?
>>>>=20
>>>> I originally thought about increasing proxy_lb_workers only when =
they
>>>> are used in the ProxyPass* in the vhost.
>>>>=20
>>>>> Index: modules/proxy/mod_proxy.c
>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>>>>> --- modules/proxy/mod_proxy.c    (revision 1697358)
>>>>> +++ modules/proxy/mod_proxy.c    (working copy)
>>>>> @@ -1135,6 +1135,7 @@ static void * create_proxy_config(apr_pool_t
>> *p,
>>> s
>>>>>=20
>>>>>  static void * merge_proxy_config(apr_pool_t *p, void *basev, void
>>>> *overridesv)
>>>>>  {
>>>>> +    int i;
>>>>>      proxy_server_conf *ps =3D apr_pcalloc(p,
>>> sizeof(proxy_server_conf));
>>>>>      proxy_server_conf *base =3D (proxy_server_conf *) basev;
>>>>>      proxy_server_conf *overrides =3D (proxy_server_conf *)
>> overridesv;
>>>>> @@ -1147,6 +1148,13 @@ static void * merge_proxy_config(apr_pool_t
>> *p,
>>>> vo
>>>>>      ps->allowed_connect_ports =3D apr_array_append(p,
>>>>> base->allowed_connect_ports, overrides->allowed_connect_ports);
>>>>>      ps->workers =3D apr_array_append(p, base->workers, overrides-
>>>>> workers);
>>>>>      ps->balancers =3D apr_array_append(p, base->balancers,
>> overrides-
>>>>> balancers);
>>>>> +    /* The balancers inherited from base don't have their members
>>>> reserved on
>>>>> +     * the scorebord_lb for this server, account for them now.
>>>>> +     */
>>>>> +    for (i =3D 0; i < base->balancers->nelts; ++i) {
>>>>> +        proxy_balancer *balancer =3D (proxy_balancer *)base-
>>> balancers-
>>>>> elts + i;
>>>>> +        proxy_lb_workers +=3D balancer->workers->nelts;
>>>>> +    }
>>>>>      ps->forward =3D overrides->forward ? overrides->forward : =
base-
>>>>> forward;
>>>>>      ps->reverse =3D overrides->reverse ? overrides->reverse : =
base-
>>>>> reverse;
>>>>>=20
>>>>> --
>>>>>=20
>>>>> Please note that since all the workers would really be accounted =
in
>>>>> the scoreboard, configurations like the one of PR 58267 (with
>>>>> inherited balancers) would also need bigger SHMs (but no more) =
than
>>>>> currently...
>>>>>=20
>>>>> WDYT?
>>>>>=20
>>>>=20
>>>> Regards,
>>>> Jan Kaluza
>>>>=20
>=20


From dev-return-83553-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 12:57:54 2015
Return-Path: <dev-return-83553-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A7DCB181D9
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 12:57:54 +0000 (UTC)
Received: (qmail 38267 invoked by uid 500); 25 Aug 2015 12:57:54 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 38183 invoked by uid 500); 25 Aug 2015 12:57:54 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 38170 invoked by uid 99); 25 Aug 2015 12:57:53 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 12:57:53 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 7E8E91AACE0
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:57:53 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.799
X-Spam-Level: *
X-Spam-Status: No, score=1.799 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, KAM_LAZY_DOMAIN_SECURITY=1,
	SPF_HELO_PASS=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id SCi4H2WVLCCj for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 12:57:42 +0000 (UTC)
Received: from mail1.bemta14.messagelabs.com (mail1.bemta14.messagelabs.com [193.109.254.106])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id B6AA220865
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 12:57:41 +0000 (UTC)
Received: from [193.109.255.99] by server-2.bemta-14.messagelabs.com id ED/8F-12889-E366CD55; Tue, 25 Aug 2015 12:57:34 +0000
X-Env-Sender: ruediger.pluem@vodafone.com
X-Msg-Ref: server-15.tower-48.messagelabs.com!1440507452!26643247!1
X-Originating-IP: [195.232.244.134]
X-StarScan-Received:
X-StarScan-Version: 6.13.16; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 8848 invoked from network); 25 Aug 2015 12:57:33 -0000
Received: from mailout02.vodafone.com (HELO mailout02.vodafone.com) (195.232.244.134)
  by server-15.tower-48.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 25 Aug 2015 12:57:33 -0000
Received: from mailint01.vodafone.com (mailint01.vodafone.com [195.232.244.198])
	by mailout02.vodafone.com (Postfix) with ESMTP id 3n0r2N6hgHzbdMZ
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:57:32 +0200 (CEST)
Received: from mailint01.vodafone.com (localhost [127.0.0.1])
	by mailint01.vodafone.com (Postfix) with ESMTP id 3n0r2N5VtRzxP5s
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:57:32 +0200 (CEST)
Received: from VOEXC02W.internal.vodafone.com (voexc02w.dc-ratingen.de [145.230.101.22])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mailint01.vodafone.com (Postfix) with ESMTPS id 3n0r2N55mYzxQF1
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:57:32 +0200 (CEST)
Received: from VOEXC27W.internal.vodafone.com (145.230.103.199) by
 VOEXC02W.internal.vodafone.com (145.230.101.22) with Microsoft SMTP Server
 (TLS) id 14.3.224.2; Tue, 25 Aug 2015 14:57:32 +0200
Received: from VOEXM10W.internal.vodafone.com ([169.254.2.132]) by voexc27w
 ([145.230.103.199]) with mapi id 14.03.0224.002; Tue, 25 Aug 2015 14:57:31
 +0200
From: =?utf-8?B?UGzDvG0sIFLDvGRpZ2VyLCBWb2RhZm9uZSBHcm91cA==?=
	<ruediger.pluem@vodafone.com>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
Subject: RE: PR 58267: Regression in 2.2.31 caused by r1680920
Thread-Topic: PR 58267: Regression in 2.2.31 caused by r1680920
Thread-Index: AQHQ3nvoe/hfZCbrK0Kj2QfLbhsYGZ4bKveAgABZ04CAALsWgIAAJd6AgAAQP9CAAArXAIAAKDYQgAAC3AA=
Date: Tue, 25 Aug 2015 12:57:30 +0000
Message-ID: <AB1691BE05AE7F4992697F2A0835627AC62F31E3@VOEXM10W.internal.vodafone.com>
References: <55DB2E9A.10307@redhat.com>
	<CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com>
 <CAKQ1sVMFBhih-rq61WZkf+jbZ_dQd6+Y5Ekar--9v10+yuNO=Q@mail.gmail.com>
 <55DC25C7.9000607@redhat.com>
 <AB1691BE05AE7F4992697F2A0835627AC62F2C7D@VOEXM10W.internal.vodafone.com>
 <AB1691BE05AE7F4992697F2A0835627AC62F2E5F@VOEXM10W.internal.vodafone.com>
 <55DC5C44.6010900@redhat.com>
 <AB1691BE05AE7F4992697F2A0835627AC62F31AE@VOEXM10W.internal.vodafone.com>
In-Reply-To: <AB1691BE05AE7F4992697F2A0835627AC62F31AE@VOEXM10W.internal.vodafone.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator:
Content-Type: multipart/mixed;
	boundary="_002_AB1691BE05AE7F4992697F2A0835627AC62F31E3VOEXM10Winterna_"
MIME-Version: 1.0

--_002_AB1691BE05AE7F4992697F2A0835627AC62F31E3VOEXM10Winterna_
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

Tm93IHRoZSBtb3JlIGNvbXBsZXRlIHBhdGNoIChpbmNsdWRpbmcgYnVtcCk6DQoNCkluZGV4OiBt
b2R1bGVzL3Byb3h5L3Byb3h5X3V0aWwuYw0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KLS0tIG1vZHVsZXMvcHJveHkv
cHJveHlfdXRpbC5jCShyZXZpc2lvbiAxNjk3NTc4KQ0KKysrIG1vZHVsZXMvcHJveHkvcHJveHlf
dXRpbC5jCSh3b3JraW5nIGNvcHkpDQpAQCAtMTQ2MCw2ICsxNDYwLDcgQEANCiAgICAgKCp3b3Jr
ZXIpLT5mbHVzaF9wYWNrZXRzID0gZmx1c2hfb2ZmOw0KICAgICAoKndvcmtlciktPmZsdXNoX3dh
aXQgPSBQUk9YWV9GTFVTSF9XQUlUOw0KICAgICAoKndvcmtlciktPnNtYXggPSAtMTsNCisgICAg
KCp3b3JrZXIpLT5zZXJ2ZXIgPSBjb25mLT5zOw0KICAgICAvKiBJbmNyZWFzZSB0aGUgdG90YWwg
d29ya2VyIGNvdW50ICovDQogICAgIHByb3h5X2xiX3dvcmtlcnMrKzsNCiAgICAgaW5pdF9jb25u
X3Bvb2wocCwgKndvcmtlcik7DQpAQCAtMTgwNyw2ICsxODA4LDcgQEANCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJfcmVjICpzZXJ2ZXIpDQog
ew0KICAgICBpZiAoYXBfc2NvcmVib2FyZF9pbWFnZSAmJiAhd29ya2VyLT5zKSB7DQorICAgICAg
ICBzZXJ2ZXJfcmVjICppZF9zZXJ2ZXI7DQogICAgICAgICBpbnQgaSA9IDA7DQogICAgICAgICBw
cm94eV93b3JrZXJfc3RhdCAqZnJlZV9zbG90ID0gTlVMTDsNCiAgICAgICAgIHByb3h5X3dvcmtl
cl9zdGF0ICpzOw0KQEAgLTE4MjQsMTQgKzE4MjYsMjAgQEANCiAgICAgICAgICAgICBhcHJfbWQ1
X3VwZGF0ZSgmY3R4LCAodW5zaWduZWQgY2hhciAqKWJhbGFuY2VyLT5uYW1lLA0KICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHN0cmxlbihiYWxhbmNlci0+bmFtZSkpOw0KICAgICAgICAgfQ0K
LSAgICAgICAgaWYgKHNlcnZlcikgew0KKyAgICAgICAgaWYgKHdvcmtlci0+c2VydmVyKSB7DQor
ICAgICAgICAgICAgaWRfc2VydmVyID0gd29ya2VyLT5zZXJ2ZXI7DQorICAgICAgICB9DQorICAg
ICAgICBlbHNlIHsNCisgICAgICAgICAgICBpZF9zZXJ2ZXIgPSBzZXJ2ZXI7DQorICAgICAgICB9
DQorICAgICAgICBpZiAoaWRfc2VydmVyKSB7DQogICAgICAgICAgICAgc2VydmVyX2FkZHJfcmVj
ICphZGRyOw0KICAgICAgICAgICAgIC8qIEFzc3VtZXMgdGhlIHVuaXF1ZSBpZGVudGlmaWVyIG9m
IGEgdmhvc3QgaXMgaXRzIGFkZHJlc3MoZXMpDQogICAgICAgICAgICAgICogcGx1cyB0aGUgU2Vy
dmVyTmFtZTpQb3J0LiBTaG91bGQgdHdvIG9yIG1vcmUgdmhvc3RzIGhhdmUgdGhpcw0KICAgICAg
ICAgICAgICAqIHNhbWUgaWRlbnRpZmllciwgdGhlIGZpcnN0IG9uZSB3b3VsZCBhbHdheXMgYmUg
ZWxlY3RlZCB0bw0KICAgICAgICAgICAgICAqIGhhbmRsZSB0aGUgcmVxdWVzdHMsIHNvIHRoaXMg
c2hvdWxkbid0IGJlIGFuIGlzc3VlLi4uDQogICAgICAgICAgICAgICovDQotICAgICAgICAgICAg
Zm9yIChhZGRyID0gc2VydmVyLT5hZGRyczsgYWRkcjsgYWRkciA9IGFkZHItPm5leHQpIHsNCisg
ICAgICAgICAgICBmb3IgKGFkZHIgPSBpZF9zZXJ2ZXItPmFkZHJzOyBhZGRyOyBhZGRyID0gYWRk
ci0+bmV4dCkgew0KICAgICAgICAgICAgICAgICBjaGFyIGhvc3RfaXBbNjRdOyAvKiBmb3IgYW55
IElQdls0Nl0gc3RyaW5nICovDQogICAgICAgICAgICAgICAgIGFwcl9zb2NrYWRkcl9pcF9nZXRi
dWYoaG9zdF9pcCwgc2l6ZW9mIGhvc3RfaXAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgYWRkci0+aG9zdF9hZGRyKTsNCkBAIC0xODQwLDEwICsxODQ4LDEwIEBADQog
ICAgICAgICAgICAgICAgIGFwcl9tZDVfdXBkYXRlKCZjdHgsICh1bnNpZ25lZCBjaGFyICopJmFk
ZHItPmhvc3RfcG9ydCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZW9mKGFk
ZHItPmhvc3RfcG9ydCkpOw0KICAgICAgICAgICAgIH0NCi0gICAgICAgICAgICBhcHJfbWQ1X3Vw
ZGF0ZSgmY3R4LCAodW5zaWduZWQgY2hhciAqKXNlcnZlci0+c2VydmVyX2hvc3RuYW1lLA0KLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmxlbihzZXJ2ZXItPnNlcnZlcl9ob3N0bmFtZSkp
Ow0KLSAgICAgICAgICAgIGFwcl9tZDVfdXBkYXRlKCZjdHgsICh1bnNpZ25lZCBjaGFyICopJnNl
cnZlci0+cG9ydCwNCi0gICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplb2Yoc2VydmVyLT5w
b3J0KSk7DQorICAgICAgICAgICAgYXByX21kNV91cGRhdGUoJmN0eCwgKHVuc2lnbmVkIGNoYXIg
KilpZF9zZXJ2ZXItPnNlcnZlcl9ob3N0bmFtZSwNCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICBzdHJsZW4oaWRfc2VydmVyLT5zZXJ2ZXJfaG9zdG5hbWUpKTsNCisgICAgICAgICAgICBhcHJf
bWQ1X3VwZGF0ZSgmY3R4LCAodW5zaWduZWQgY2hhciAqKSZpZF9zZXJ2ZXItPnBvcnQsDQorICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZW9mKGlkX3NlcnZlci0+cG9ydCkpOw0KICAgICAg
ICAgfQ0KICAgICAgICAgYXByX21kNV9maW5hbChkaWdlc3QsICZjdHgpOw0KIA0KSW5kZXg6IG1v
ZHVsZXMvcHJveHkvbW9kX3Byb3h5LmMNCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCi0tLSBtb2R1bGVzL3Byb3h5L21v
ZF9wcm94eS5jCShyZXZpc2lvbiAxNjk3NTc4KQ0KKysrIG1vZHVsZXMvcHJveHkvbW9kX3Byb3h5
LmMJKHdvcmtpbmcgY29weSkNCkBAIC0xMTI5LDYgKzExMjksNyBAQA0KICAgICBwcy0+YmFkb3B0
ID0gYmFkX2Vycm9yOw0KICAgICBwcy0+YmFkb3B0X3NldCA9IDA7DQogICAgIHBzLT5wb29sID0g
cDsNCisgICAgcHMtPnMgPSBzOw0KIA0KICAgICByZXR1cm4gcHM7DQogfQ0KQEAgLTExNzIsNiAr
MTE3Myw3IEBADQogICAgIHBzLT5wcm94eV9zdGF0dXMgPSAob3ZlcnJpZGVzLT5wcm94eV9zdGF0
dXNfc2V0ID09IDApID8gYmFzZS0+cHJveHlfc3RhdHVzIDogb3ZlcnJpZGVzLT5wcm94eV9zdGF0
dXM7DQogICAgIHBzLT5wcm94eV9zdGF0dXNfc2V0ID0gb3ZlcnJpZGVzLT5wcm94eV9zdGF0dXNf
c2V0IHx8IGJhc2UtPnByb3h5X3N0YXR1c19zZXQ7DQogICAgIHBzLT5wb29sID0gcDsNCisgICAg
cHMtPnMgPSBvdmVycmlkZXMtPnM7DQogICAgIHJldHVybiBwczsNCiB9DQogDQpJbmRleDogbW9k
dWxlcy9wcm94eS9tb2RfcHJveHkuaA0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KLS0tIG1vZHVsZXMvcHJveHkvbW9k
X3Byb3h5LmgJKHJldmlzaW9uIDE2OTc1NzgpDQorKysgbW9kdWxlcy9wcm94eS9tb2RfcHJveHku
aAkod29ya2luZyBjb3B5KQ0KQEAgLTE5Myw2ICsxOTMsNyBAQA0KICAgICB9IHByb3h5X3N0YXR1
czsgICAgICAgICAgICAgLyogU3RhdHVzIGRpc3BsYXkgb3B0aW9ucyAqLw0KICAgICBjaGFyIHBy
b3h5X3N0YXR1c19zZXQ7DQogICAgIGFwcl9wb29sX3QgKnBvb2w7ICAgICAgICAgICAvKiBQb29s
IHVzZWQgZm9yIGFsbG9jYXRpbmcgdGhpcyBzdHJ1Y3QgKi8NCisgICAgc2VydmVyX3JlYyAqczsg
ICAgICAgICAgICAgIC8qIFRoZSBzZXJ2ZXJfcmVjIHdoZXJlIHRoaXMgY29uZmlndXJhdGlvbiB3
YXMgY3JlYXRlZCBpbiAqLw0KIH0gcHJveHlfc2VydmVyX2NvbmY7DQogDQogDQpAQCAtMzY5LDYg
KzM3MCw3IEBADQogICAgIGNoYXIgICAgICAgICAgICBkaXNhYmxlcmV1c2Vfc2V0Ow0KICAgICBh
cHJfaW50ZXJ2YWxfdGltZV90IGNvbm5fdGltZW91dDsNCiAgICAgY2hhciAgICAgICAgICAgIGNv
bm5fdGltZW91dF9zZXQ7DQorICAgIHNlcnZlcl9yZWMgICAgICAqc2VydmVyOyAgICAvKiBUaGUg
c2VydmVyX3JlYyB3aGVyZSB0aGlzIGNvbmZpZ3VyYXRpb24gd2FzIGNyZWF0ZWQgaW4gKi8NCiB9
Ow0KIA0KIC8qDQpJbmRleDogaW5jbHVkZS9hcF9tbW4uaA0KPT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KLS0tIGluY2x1
ZGUvYXBfbW1uLmgJKHJldmlzaW9uIDE2OTc1NzgpDQorKysgaW5jbHVkZS9hcF9tbW4uaAkod29y
a2luZyBjb3B5KQ0KQEAgLTE1OCw2ICsxNTgsOCBAQA0KICAqIDIwMDUxMTE1LjM4ICgyLjIuMzAp
IEFkZCBhcF9wcm94eV9zZXRfc2NvcmVib2FyZF9sYigpIGluIG1vZF9wcm94eS5oDQogICogMjAw
NTExMTUuMzkgKDIuMi4zMCkgQWRkIGFwX3Byb3h5X2Nvbm5lY3Rpb25fcmV1c2FibGUoKQ0KICAq
IDIwMDUxMTE1LjQwICgyLjIuMzApIEFkZCBhcF9tYXBfaHR0cF9yZXF1ZXN0X2Vycm9yKCkNCisg
KiAyMDA1MTExNS40MSAoMi4yLjMyKSBBZGQgcyBtZW1iZXIgdG8gcHJveHlfc2VydmVyX2NvbmYg
c3RydWN0IGFuZCBzZXJ2ZXINCisgKiAgICAgICAgICAgICAgICAgICAgICBtZW1iZXIgdG8gcHJv
eHlfd29ya2VyIHN0cnVjdC4NCiAgKi8NCiANCiAjZGVmaW5lIE1PRFVMRV9NQUdJQ19DT09LSUUg
MHg0MTUwMzIzMlVMIC8qICJBUDIyIiAqLw0KQEAgLTE2NSw3ICsxNjcsNyBAQA0KICNpZm5kZWYg
TU9EVUxFX01BR0lDX05VTUJFUl9NQUpPUg0KICNkZWZpbmUgTU9EVUxFX01BR0lDX05VTUJFUl9N
QUpPUiAyMDA1MTExNQ0KICNlbmRpZg0KLSNkZWZpbmUgTU9EVUxFX01BR0lDX05VTUJFUl9NSU5P
UiA0MCAgICAgICAgICAgICAgICAgICAgLyogMC4uLm4gKi8NCisjZGVmaW5lIE1PRFVMRV9NQUdJ
Q19OVU1CRVJfTUlOT1IgNDEgICAgICAgICAgICAgICAgICAgIC8qIDAuLi5uICovDQogDQogLyoq
DQogICogRGV0ZXJtaW5lIGlmIHRoZSBzZXJ2ZXIncyBjdXJyZW50IE1PRFVMRV9NQUdJQ19OVU1C
RVIgaXMgYXQgbGVhc3QgYQ0KDQoNClJlZ2FyZHMNCg0KUsO8ZGlnZXINCg0KPiAtLS0tLU9yaWdp
bmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBQbMO8bSwgUsO8ZGlnZXIsIFZvZGFmb25lIEdyb3Vw
DQo+IFNlbnQ6IERpZW5zdGFnLCAyNS4gQXVndXN0IDIwMTUgMTQ6NDENCj4gVG86IGRldkBodHRw
ZC5hcGFjaGUub3JnDQo+IFN1YmplY3Q6IFJFOiBQUiA1ODI2NzogUmVncmVzc2lvbiBpbiAyLjIu
MzEgY2F1c2VkIGJ5IHIxNjgwOTIwDQo+IA0KPiBUaGFua3MgZm9yIHRoZSBwb2ludGVyLiBJdCBp
cyBtaXNzaW5nIGJlY2F1c2UgSSByZW1vdmVkIGl0IGJ5IGFjY2lkZW50DQo+IHdoZW4gZXhjbHVk
aW5nIHNvbWUgZGVidWcgY29kZSBJIHNldHVwIGxvY2FsbHkgZm9yIGFuYWx5c2luZyB0aGUgaXNz
dWUNCj4gZnJvbSB0aGUgcGF0Y2ggSSBwb3N0ZWQuIEkgd2lsbCBwb3N0IGEgcHJvcGVyIHZlcnNp
b24gYW5kIGlmIHlvdSBhZ3JlZSBwdXQNCj4gaXQgaW4gU1RBVFVTIGZvciAyLjIueC4gQXMgZmFy
IGFzIEkgY2FuIHRlbGwgdGhpcyBjaGFuZ2Ugb25seSBhcHBsaWVzIHRvDQo+IDIuMi54LiBTbyBp
dCB3b3VsZCBiZSBmaW5lIHRvIHByb3Bvc2UgaXQgZGlyZWN0bHkgaW4gU1RBVFVTIHdpdGhvdXQg
YW55DQo+IHRydW5rIGNvbW1pdC4NCj4gDQo+IFJlZ2FyZHMNCj4gDQo+IFLDvGRpZ2VyDQo+IA0K
PiA+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+ID4gRnJvbTogSmFuIEthbHXFvmEgW21h
aWx0bzpqa2FsdXphQHJlZGhhdC5jb21dDQo+ID4gU2VudDogRGllbnN0YWcsIDI1LiBBdWd1c3Qg
MjAxNSAxNDoxNQ0KPiA+IFRvOiBkZXZAaHR0cGQuYXBhY2hlLm9yZw0KPiA+IFN1YmplY3Q6IFJl
OiBQUiA1ODI2NzogUmVncmVzc2lvbiBpbiAyLjIuMzEgY2F1c2VkIGJ5IHIxNjgwOTIwDQo+ID4N
Cj4gPiBPbiAwOC8yNS8yMDE1IDExOjM5IEFNLCBQbMO8bSwgUsO8ZGlnZXIsIFZvZGFmb25lIEdy
b3VwIHdyb3RlOg0KPiA+ID4gSG93IGFib3V0IHRoZSBmb2xsb3dpbmcgcGF0Y2g/IEl0IHVzZXMg
dGhlIHNlcnZlcl9yZWMgb2YgdGhlIHNlcnZlcg0KPiB0aGF0DQo+ID4gb3JpZ2luYWxseSBjcmVh
dGVkIHRoZSBjb25maWd1cmF0aW9uIGl0ZW0uDQo+ID4NCj4gPiBUaGlzIGxvb2tzIGxpa2UgZ29v
ZCBzdHJhdGVneS4gSSd2ZSB2ZXJpZmllZCB0aGF0IHRoZSBwYXRjaCBmaXhlcyB0aGlzDQo+ID4g
aXNzdWUgYW5kIGRvZXMgbm90IGJyZWFrIGFueXRoaW5nIHdoZW4gdGVzdGluZyBicmllZmx5Lg0K
PiA+DQo+ID4gV2hhdCBkbyB5b3UgdGhpbmssIFlhbm4/DQo+ID4NCj4gPiBOb3RlIHRoYXQgImlk
X3NlcnZlciIgZGVjbGFyYXRpb24gaXMgbWlzc2luZyBpbiB0aGUgcGF0Y2guIE90aGVyd2lzZQ0K
PiA+IGl0J3MgT0suDQo+ID4NCj4gPiBSZWdhcmRzLA0KPiA+IEphbiBLYWx1emENCj4gPg0KPiA+
ID4gSW5kZXg6IG1vZHVsZXMvcHJveHkvcHJveHlfdXRpbC5jDQo+ID4gPiA9PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQo+
ID4gPiAtLS0gbW9kdWxlcy9wcm94eS9wcm94eV91dGlsLmMJKHJldmlzaW9uIDE2OTc1NzgpDQo+
ID4gPiArKysgbW9kdWxlcy9wcm94eS9wcm94eV91dGlsLmMJKHdvcmtpbmcgY29weSkNCj4gPiA+
IEBAIC0xNDYwLDYgKzE0NjAsNyBAQA0KPiA+ID4gICAgICAgKCp3b3JrZXIpLT5mbHVzaF9wYWNr
ZXRzID0gZmx1c2hfb2ZmOw0KPiA+ID4gICAgICAgKCp3b3JrZXIpLT5mbHVzaF93YWl0ID0gUFJP
WFlfRkxVU0hfV0FJVDsNCj4gPiA+ICAgICAgICgqd29ya2VyKS0+c21heCA9IC0xOw0KPiA+ID4g
KyAgICAoKndvcmtlciktPnNlcnZlciA9IGNvbmYtPnM7DQo+ID4gPiAgICAgICAvKiBJbmNyZWFz
ZSB0aGUgdG90YWwgd29ya2VyIGNvdW50ICovDQo+ID4gPiAgICAgICBwcm94eV9sYl93b3JrZXJz
Kys7DQo+ID4gPiAgICAgICBpbml0X2Nvbm5fcG9vbChwLCAqd29ya2VyKTsNCj4gPiA+IEBAIC0x
ODI0LDE0ICsxODI5LDIwIEBADQo+ID4gPiAgICAgICAgICAgICAgIGFwcl9tZDVfdXBkYXRlKCZj
dHgsICh1bnNpZ25lZCBjaGFyICopYmFsYW5jZXItPm5hbWUsDQo+ID4gPiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHN0cmxlbihiYWxhbmNlci0+bmFtZSkpOw0KPiA+ID4gICAgICAgICAg
IH0NCj4gPiA+IC0gICAgICAgIGlmIChzZXJ2ZXIpIHsNCj4gPiA+ICsgICAgICAgIGlmICh3b3Jr
ZXItPnNlcnZlcikgew0KPiA+ID4gKyAgICAgICAgICAgIGlkX3NlcnZlciA9IHdvcmtlci0+c2Vy
dmVyOw0KPiA+ID4gKyAgICAgICAgfQ0KPiA+ID4gKyAgICAgICAgZWxzZSB7DQo+ID4gPiArICAg
ICAgICAgICAgaWRfc2VydmVyID0gc2VydmVyOw0KPiA+ID4gKyAgICAgICAgfQ0KPiA+ID4gKyAg
ICAgICAgaWYgKGlkX3NlcnZlcikgew0KPiA+ID4gICAgICAgICAgICAgICBzZXJ2ZXJfYWRkcl9y
ZWMgKmFkZHI7DQo+ID4gPiAgICAgICAgICAgICAgIC8qIEFzc3VtZXMgdGhlIHVuaXF1ZSBpZGVu
dGlmaWVyIG9mIGEgdmhvc3QgaXMgaXRzDQo+ID4gYWRkcmVzcyhlcykNCj4gPiA+ICAgICAgICAg
ICAgICAgICogcGx1cyB0aGUgU2VydmVyTmFtZTpQb3J0LiBTaG91bGQgdHdvIG9yIG1vcmUgdmhv
c3RzDQo+ID4gaGF2ZSB0aGlzDQo+ID4gPiAgICAgICAgICAgICAgICAqIHNhbWUgaWRlbnRpZmll
ciwgdGhlIGZpcnN0IG9uZSB3b3VsZCBhbHdheXMgYmUNCj4gZWxlY3RlZA0KPiA+IHRvDQo+ID4g
PiAgICAgICAgICAgICAgICAqIGhhbmRsZSB0aGUgcmVxdWVzdHMsIHNvIHRoaXMgc2hvdWxkbid0
IGJlIGFuIGlzc3VlLi4uDQo+ID4gPiAgICAgICAgICAgICAgICAqLw0KPiA+ID4gLSAgICAgICAg
ICAgIGZvciAoYWRkciA9IHNlcnZlci0+YWRkcnM7IGFkZHI7IGFkZHIgPSBhZGRyLT5uZXh0KSB7
DQo+ID4gPiArICAgICAgICAgICAgZm9yIChhZGRyID0gaWRfc2VydmVyLT5hZGRyczsgYWRkcjsg
YWRkciA9IGFkZHItPm5leHQpIHsNCj4gPiA+ICAgICAgICAgICAgICAgICAgIGNoYXIgaG9zdF9p
cFs2NF07IC8qIGZvciBhbnkgSVB2WzQ2XSBzdHJpbmcgKi8NCj4gPiA+ICAgICAgICAgICAgICAg
ICAgIGFwcl9zb2NrYWRkcl9pcF9nZXRidWYoaG9zdF9pcCwgc2l6ZW9mIGhvc3RfaXAsDQo+ID4g
PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHItPmhvc3RfYWRk
cik7DQo+ID4gPiBAQCAtMTg0MCwxMCArMTg1MSwxMCBAQA0KPiA+ID4gICAgICAgICAgICAgICAg
ICAgYXByX21kNV91cGRhdGUoJmN0eCwgKHVuc2lnbmVkIGNoYXIgKikmYWRkci0NCj4gPiA+aG9z
dF9wb3J0LA0KPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZW9mKGFk
ZHItPmhvc3RfcG9ydCkpOw0KPiA+ID4gICAgICAgICAgICAgICB9DQo+ID4gPiAtICAgICAgICAg
ICAgYXByX21kNV91cGRhdGUoJmN0eCwgKHVuc2lnbmVkIGNoYXIgKilzZXJ2ZXItDQo+ID4gPnNl
cnZlcl9ob3N0bmFtZSwNCj4gPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJsZW4o
c2VydmVyLT5zZXJ2ZXJfaG9zdG5hbWUpKTsNCj4gPiA+IC0gICAgICAgICAgICBhcHJfbWQ1X3Vw
ZGF0ZSgmY3R4LCAodW5zaWduZWQgY2hhciAqKSZzZXJ2ZXItPnBvcnQsDQo+ID4gPiAtICAgICAg
ICAgICAgICAgICAgICAgICAgICAgc2l6ZW9mKHNlcnZlci0+cG9ydCkpOw0KPiA+ID4gKyAgICAg
ICAgICAgIGFwcl9tZDVfdXBkYXRlKCZjdHgsICh1bnNpZ25lZCBjaGFyICopaWRfc2VydmVyLQ0K
PiA+ID5zZXJ2ZXJfaG9zdG5hbWUsDQo+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
c3RybGVuKGlkX3NlcnZlci0+c2VydmVyX2hvc3RuYW1lKSk7DQo+ID4gPiArICAgICAgICAgICAg
YXByX21kNV91cGRhdGUoJmN0eCwgKHVuc2lnbmVkIGNoYXIgKikmaWRfc2VydmVyLT5wb3J0LA0K
PiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemVvZihpZF9zZXJ2ZXItPnBvcnQp
KTsNCj4gPiA+ICAgICAgICAgICB9DQo+ID4gPiAgICAgICAgICAgYXByX21kNV9maW5hbChkaWdl
c3QsICZjdHgpOw0KPiA+ID4NCj4gPiA+IEluZGV4OiBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5j
DQo+ID4gPiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09DQo+ID4gPiAtLS0gbW9kdWxlcy9wcm94eS9tb2RfcHJveHkuYwko
cmV2aXNpb24gMTY5NzU3OCkNCj4gPiA+ICsrKyBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5jCSh3
b3JraW5nIGNvcHkpDQo+ID4gPiBAQCAtMTEyOSw2ICsxMTI5LDcgQEANCj4gPiA+ICAgICAgIHBz
LT5iYWRvcHQgPSBiYWRfZXJyb3I7DQo+ID4gPiAgICAgICBwcy0+YmFkb3B0X3NldCA9IDA7DQo+
ID4gPiAgICAgICBwcy0+cG9vbCA9IHA7DQo+ID4gPiArICAgIHBzLT5zID0gczsNCj4gPiA+DQo+
ID4gPiAgICAgICByZXR1cm4gcHM7DQo+ID4gPiAgIH0NCj4gPiA+IEBAIC0xMTcyLDYgKzExNzMs
NyBAQA0KPiA+ID4gICAgICAgcHMtPnByb3h5X3N0YXR1cyA9IChvdmVycmlkZXMtPnByb3h5X3N0
YXR1c19zZXQgPT0gMCkgPyBiYXNlLQ0KPiA+ID5wcm94eV9zdGF0dXMgOiBvdmVycmlkZXMtPnBy
b3h5X3N0YXR1czsNCj4gPiA+ICAgICAgIHBzLT5wcm94eV9zdGF0dXNfc2V0ID0gb3ZlcnJpZGVz
LT5wcm94eV9zdGF0dXNfc2V0IHx8IGJhc2UtDQo+ID4gPnByb3h5X3N0YXR1c19zZXQ7DQo+ID4g
PiAgICAgICBwcy0+cG9vbCA9IHA7DQo+ID4gPiArICAgIHBzLT5zID0gb3ZlcnJpZGVzLT5zOw0K
PiA+ID4gICAgICAgcmV0dXJuIHBzOw0KPiA+ID4gICB9DQo+ID4gPg0KPiA+ID4gSW5kZXg6IG1v
ZHVsZXMvcHJveHkvbW9kX3Byb3h5LmgNCj4gPiA+ID09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCj4gPiA+IC0tLSBtb2R1
bGVzL3Byb3h5L21vZF9wcm94eS5oCShyZXZpc2lvbiAxNjk3NTc4KQ0KPiA+ID4gKysrIG1vZHVs
ZXMvcHJveHkvbW9kX3Byb3h5LmgJKHdvcmtpbmcgY29weSkNCj4gPiA+IEBAIC0xOTMsNiArMTkz
LDcgQEANCj4gPiA+ICAgICAgIH0gcHJveHlfc3RhdHVzOyAgICAgICAgICAgICAvKiBTdGF0dXMg
ZGlzcGxheSBvcHRpb25zICovDQo+ID4gPiAgICAgICBjaGFyIHByb3h5X3N0YXR1c19zZXQ7DQo+
ID4gPiAgICAgICBhcHJfcG9vbF90ICpwb29sOyAgICAgICAgICAgLyogUG9vbCB1c2VkIGZvciBh
bGxvY2F0aW5nIHRoaXMNCj4gPiBzdHJ1Y3QgKi8NCj4gPiA+ICsgICAgc2VydmVyX3JlYyAqczsg
ICAgICAgICAgICAgIC8qIFRoZSBzZXJ2ZXJfcmVjIHdoZXJlIHRoaXMNCj4gPiBjb25maWd1cmF0
aW9uIHdhcyBjcmVhdGVkIGluICovDQo+ID4gPiAgIH0gcHJveHlfc2VydmVyX2NvbmY7DQo+ID4g
Pg0KPiA+ID4NCj4gPiA+IEBAIC0zNjksNiArMzcwLDcgQEANCj4gPiA+ICAgICAgIGNoYXIgICAg
ICAgICAgICBkaXNhYmxlcmV1c2Vfc2V0Ow0KPiA+ID4gICAgICAgYXByX2ludGVydmFsX3RpbWVf
dCBjb25uX3RpbWVvdXQ7DQo+ID4gPiAgICAgICBjaGFyICAgICAgICAgICAgY29ubl90aW1lb3V0
X3NldDsNCj4gPiA+ICsgICAgc2VydmVyX3JlYyAgICAgICpzZXJ2ZXI7ICAgIC8qIFRoZSBzZXJ2
ZXJfcmVjIHdoZXJlIHRoaXMNCj4gPiBjb25maWd1cmF0aW9uIHdhcyBjcmVhdGVkIGluICovDQo+
ID4gPiAgIH07DQo+ID4gPg0KPiA+ID4gICAvKg0KPiA+ID4NCj4gPiA+DQo+ID4gPiBSZWdhcmRz
DQo+ID4gPg0KPiA+ID4gUsO8ZGlnZXINCj4gPiA+DQo+ID4gPj4gLS0tLS1PcmlnaW5hbCBNZXNz
YWdlLS0tLS0NCj4gPiA+PiBGcm9tOiBQbMO8bSwgUsO8ZGlnZXIsIFZvZGFmb25lIEdyb3VwDQo+
ID4gPj4gU2VudDogRGllbnN0YWcsIDI1LiBBdWd1c3QgMjAxNSAxMDo0OA0KPiA+ID4+IFRvOiBk
ZXZAaHR0cGQuYXBhY2hlLm9yZw0KPiA+ID4+IFN1YmplY3Q6IFJFOiBQUiA1ODI2NzogUmVncmVz
c2lvbiBpbiAyLjIuMzEgY2F1c2VkIGJ5IHIxNjgwOTIwDQo+ID4gPj4NCj4gPiA+PiBJIHRoaW5r
IHRoZSBjdXJyZW50IHN0YXRlIG9mIDIuMi4zMSBicmVha3MgZXhpc3RpbmcgMi4yLngNCj4gY29u
ZmlndXJhdGlvbg0KPiA+ID4+IHByaW9yIHRvIDIuMi4zMS4NCj4gPiA+PiBQcmlvciB0byAyLjIu
MzEgeW91IGNvdWxkIGRvIHRoZSBmb2xsb3dpbmc6DQo+ID4gPj4NCj4gPiA+PiA8UHJveHkgQmFs
YW5jZXI6Ly9wcm94eTE+DQo+ID4gPj4gQmFsYW5jZXJNZW1iZXIgYWpwOi8vMTI3LjAuMC4xOjcw
MDENCj4gPiA+PiBCYWxhbmNlck1lbWJlciBhanA6Ly8xMjcuMC4wLjI6NzAwMg0KPiA+ID4+IDwv
UHJveHk+DQo+ID4gPj4NCj4gPiA+PiA8dmlydHVhbGhvc3QgKjo4MD4NCj4gPiA+PiBQcm94eVBh
c3MgLyBiYWxhbmNlcjovL3Byb3h5MS8NCj4gPiA+PiA8L3ZpcnR1YWxob3N0Pg0KPiA+ID4+DQo+
ID4gPj4gPHZpcnR1YWxob3N0IDEyNy4wLjAuMTo4MDgwPg0KPiA+ID4+DQo+ID4gPj4gPExvY2F0
aW9uIC9ibWFuYWdlcj4NCj4gPiA+PiAgICAgc2V0aGFuZGxlciBiYWxhbmNlci1tYW5hZ2VyDQo+
ID4gPj4gPC9Mb2NhdGlvbj4NCj4gPiA+Pg0KPiA+ID4+IDwvdmlydHVhbGhvc3Q+DQo+ID4gPj4N
Cj4gPiA+PiBXaXRoIHRoaXMgY29uZmlndXJhdGlvbiB5b3UgY291bGQgcHJvdmlkZSB5b3VyIHJl
dmVyc2UgcHJveHkgdG8gdGhlDQo+ID4gPj4gb3V0c2lkZSB3b3JsZCB3aGlsZSBoYXZpbmcgdGhl
DQo+ID4gPj4gYmFsYW5jZXJtYW5hZ2VyIG1hbmFnaW5nIHRoZSBiYWxhbmNlciBvbmx5IGxpc3Rl
bmluZyB0byBsb2NhbGhvc3QuDQo+IFRoaXMNCj4gPiBpcw0KPiA+ID4+IG5vdCBwb3NzaWJsZSBh
bnkgbG9uZ2VyIHdpdGggMi4yLjMxDQo+ID4gPj4gYXMgdGhlIHdvcmtlci0+cyBpcyBub3cgZGlm
ZmVyZW50IGluIGVhY2ggdmlydHVhbGhvc3Qgd2hlcmVhcyBiZWZvcmUNCj4gaXQNCj4gPiA+PiB3
YXMgdGhlIHNhbWUgYXMgdGhlIHdvcmtlci0+aWQgd2FzIHVzZWQNCj4gPiA+PiB0byBpZGVudGlm
eSB0aGUgc2NvcmVib2FyZCBzbG90Lg0KPiA+ID4+IFRoZSBwYXRjaGVzIHByb3Bvc2VkIHNvIGZh
ciB3b3VsZCBub3QgY2hhbmdlIHRoaXMuIEkgdGhpbmsgaW4gb3JkZXINCj4gdG8NCj4gPiA+PiBy
ZXZlcnQgdG8gdGhlIG9sZCBiZWhhdmlvdXIgd2UgbmVlZCB0bw0KPiA+ID4+IHN0b3JlIHdpdGgg
ZWFjaCB3b3JrZXIgaW4gd2hpY2ggc2VydmVyX3JlYyBjb250ZXh0IGl0IHdhcyBjcmVhdGVkLg0K
PiBlLmcuDQo+ID4gPj4gYWRkaW5nIGEgY29uc3QgY2hhciAqIGZpZWxkIHRvIHRoZSB3b3JrZXIg
dGhhdCB3b3VsZCBiZSBmaWxsZWQgd2l0aA0KPiA+ID4+IHNlcnZlci0+c2VydmVyX2hvc3RuYW1l
LiBUaGVuIHdlIGNvdWxkIHVzZSB0aGlzIHZhbHVlIGZvciBjcmVhdGluZw0KPiB0aGUNCj4gPiA+
PiBtZDUuDQo+ID4gPj4NCj4gPiA+PiBSZWdhcmRzDQo+ID4gPj4NCj4gPiA+PiBSw7xkaWdlcg0K
PiA+ID4+DQo+ID4gPj4+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+ID4gPj4+IEZyb206
IEphbiBLYWx1xb5hIFttYWlsdG86amthbHV6YUByZWRoYXQuY29tXQ0KPiA+ID4+PiBTZW50OiBE
aWVuc3RhZywgMjUuIEF1Z3VzdCAyMDE1IDEwOjIzDQo+ID4gPj4+IFRvOiBkZXZAaHR0cGQuYXBh
Y2hlLm9yZw0KPiA+ID4+PiBTdWJqZWN0OiBSZTogUFIgNTgyNjc6IFJlZ3Jlc3Npb24gaW4gMi4y
LjMxIGNhdXNlZCBieSByMTY4MDkyMA0KPiA+ID4+Pg0KPiA+ID4+PiBPbiAwOC8yNC8yMDE1IDEx
OjEyIFBNLCBZYW5uIFlsYXZpYyB3cm90ZToNCj4gPiA+Pj4+IE9uIE1vbiwgQXVnIDI0LCAyMDE1
IGF0IDU6NTEgUE0sIFlhbm4gWWxhdmljIDx5bGF2aWMuZGV2QGdtYWlsLmNvbT4NCj4gPiA+Pj4g
d3JvdGU6DQo+ID4gPj4+Pj4NCj4gPiA+Pj4+PiBPbiBNb24sIEF1ZyAyNCwgMjAxNSBhdCA0OjQ3
IFBNLCBKYW4gS2FsdcW+YSA8amthbHV6YUByZWRoYXQuY29tPg0KPiA+ID4+IHdyb3RlOg0KPiA+
ID4+Pj4+Pg0KPiA+ID4+Pj4+PiAyKSBJbmNyZW1lbnQgcHJveHlfbGJfd29ya2VycyBhY2NvcmRp
bmcgdG8gbnVtYmVyIG9mIHdvcmtlcnMgaW4NCj4gPiA+Pj4gYmFsYW5jZXINCj4gPiA+Pj4+Pj4g
d2hlbiB1c2luZyAiUHJveHlQYXNzIC9mb29iYXIvIEJhbGFuY2VyOi8vZm9vYmFyLyIgaW4gdGhl
DQo+ID4gPj4gVmlydHVhbEhvc3QuDQo+ID4gPj4+IFRoZQ0KPiA+ID4+Pj4+PiBzY29yZWJvYXJk
IHdvdWxkIGhhdmUgcmlnaHQgc2l6ZSBhbmQgYXBfcHJveHlfc2V0X3Njb3JlYm9hcmRfbGINCj4g
PiA+PiB3b3VsZA0KPiA+ID4+PiBub3QNCj4gPiA+Pj4+Pj4gZmFpbCB0aGVuLg0KPiA+ID4+Pj4+
DQo+ID4gPj4+Pj4gSSB0aGluayB3ZSBjYW4gZG8gdGhpcyBxdWl0ZSBlYXNpbHkgaW4gbWVyZ2Vf
cHJveHlfY29uZmlnKCksIGJ5DQo+ID4gPj4+Pj4gaW5jcmVtZW50aW5nIHByb3h5X2xiX3dvcmtl
cnMgZm9yIGVhY2ggYmFzZS0+YmFsYW5jZXJzLT53b3JrZXJzLiBJDQo+ID4gPj4gZGlkDQo+ID4g
Pj4+Pj4gbm90IHRlc3QgaXQgeWV0IHRob3VnaC4NCj4gPiA+Pj4+DQo+ID4gPj4+PiBJIHRlc3Rl
ZCB0aGUgYmVsb3cgd2hpY2ggc2VlbXMgdG8gd29yay4NCj4gPiA+Pj4NCj4gPiA+Pj4gSG0sIHRo
aXMgcmVzZXJ2ZXMgdGhlIHNsb3RzIGluIHNjb3JlYm9hcmQgZXZlbiB3aGVuIHRoZSBiYWxhbmNl
cnMNCj4gYXJlDQo+ID4gPj4+IG5vdCB1c2VkIGluIHRoZSB2aXJ0dWFsaG9zdCwgb3IgYW0gSSB3
cm9uZz8NCj4gPiA+Pj4NCj4gPiA+Pj4gSSBvcmlnaW5hbGx5IHRob3VnaHQgYWJvdXQgaW5jcmVh
c2luZyBwcm94eV9sYl93b3JrZXJzIG9ubHkgd2hlbg0KPiB0aGV5DQo+ID4gPj4+IGFyZSB1c2Vk
IGluIHRoZSBQcm94eVBhc3MqIGluIHRoZSB2aG9zdC4NCj4gPiA+Pj4NCj4gPiA+Pj4+IEluZGV4
OiBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5jDQo+ID4gPj4+PiA9PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQo+ID4gPj4+
PiAtLS0gbW9kdWxlcy9wcm94eS9tb2RfcHJveHkuYyAgICAocmV2aXNpb24gMTY5NzM1OCkNCj4g
PiA+Pj4+ICsrKyBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5jICAgICh3b3JraW5nIGNvcHkpDQo+
ID4gPj4+PiBAQCAtMTEzNSw2ICsxMTM1LDcgQEAgc3RhdGljIHZvaWQgKiBjcmVhdGVfcHJveHlf
Y29uZmlnKGFwcl9wb29sX3QNCj4gPiAqcCwNCj4gPiA+PiBzDQo+ID4gPj4+Pg0KPiA+ID4+Pj4g
ICAgc3RhdGljIHZvaWQgKiBtZXJnZV9wcm94eV9jb25maWcoYXByX3Bvb2xfdCAqcCwgdm9pZCAq
YmFzZXYsDQo+IHZvaWQNCj4gPiA+Pj4gKm92ZXJyaWRlc3YpDQo+ID4gPj4+PiAgICB7DQo+ID4g
Pj4+PiArICAgIGludCBpOw0KPiA+ID4+Pj4gICAgICAgIHByb3h5X3NlcnZlcl9jb25mICpwcyA9
IGFwcl9wY2FsbG9jKHAsDQo+ID4gPj4gc2l6ZW9mKHByb3h5X3NlcnZlcl9jb25mKSk7DQo+ID4g
Pj4+PiAgICAgICAgcHJveHlfc2VydmVyX2NvbmYgKmJhc2UgPSAocHJveHlfc2VydmVyX2NvbmYg
KikgYmFzZXY7DQo+ID4gPj4+PiAgICAgICAgcHJveHlfc2VydmVyX2NvbmYgKm92ZXJyaWRlcyA9
IChwcm94eV9zZXJ2ZXJfY29uZiAqKQ0KPiA+IG92ZXJyaWRlc3Y7DQo+ID4gPj4+PiBAQCAtMTE0
Nyw2ICsxMTQ4LDEzIEBAIHN0YXRpYyB2b2lkICogbWVyZ2VfcHJveHlfY29uZmlnKGFwcl9wb29s
X3QNCj4gPiAqcCwNCj4gPiA+Pj4gdm8NCj4gPiA+Pj4+ICAgICAgICBwcy0+YWxsb3dlZF9jb25u
ZWN0X3BvcnRzID0gYXByX2FycmF5X2FwcGVuZChwLA0KPiA+ID4+Pj4gYmFzZS0+YWxsb3dlZF9j
b25uZWN0X3BvcnRzLCBvdmVycmlkZXMtPmFsbG93ZWRfY29ubmVjdF9wb3J0cyk7DQo+ID4gPj4+
PiAgICAgICAgcHMtPndvcmtlcnMgPSBhcHJfYXJyYXlfYXBwZW5kKHAsIGJhc2UtPndvcmtlcnMs
IG92ZXJyaWRlcy0NCj4gPiA+Pj4+IHdvcmtlcnMpOw0KPiA+ID4+Pj4gICAgICAgIHBzLT5iYWxh
bmNlcnMgPSBhcHJfYXJyYXlfYXBwZW5kKHAsIGJhc2UtPmJhbGFuY2VycywNCj4gPiBvdmVycmlk
ZXMtDQo+ID4gPj4+PiBiYWxhbmNlcnMpOw0KPiA+ID4+Pj4gKyAgICAvKiBUaGUgYmFsYW5jZXJz
IGluaGVyaXRlZCBmcm9tIGJhc2UgZG9uJ3QgaGF2ZSB0aGVpciBtZW1iZXJzDQo+ID4gPj4+IHJl
c2VydmVkIG9uDQo+ID4gPj4+PiArICAgICAqIHRoZSBzY29yZWJvcmRfbGIgZm9yIHRoaXMgc2Vy
dmVyLCBhY2NvdW50IGZvciB0aGVtIG5vdy4NCj4gPiA+Pj4+ICsgICAgICovDQo+ID4gPj4+PiAr
ICAgIGZvciAoaSA9IDA7IGkgPCBiYXNlLT5iYWxhbmNlcnMtPm5lbHRzOyArK2kpIHsNCj4gPiA+
Pj4+ICsgICAgICAgIHByb3h5X2JhbGFuY2VyICpiYWxhbmNlciA9IChwcm94eV9iYWxhbmNlciAq
KWJhc2UtDQo+ID4gPmJhbGFuY2Vycy0NCj4gPiA+Pj4+IGVsdHMgKyBpOw0KPiA+ID4+Pj4gKyAg
ICAgICAgcHJveHlfbGJfd29ya2VycyArPSBiYWxhbmNlci0+d29ya2Vycy0+bmVsdHM7DQo+ID4g
Pj4+PiArICAgIH0NCj4gPiA+Pj4+ICAgICAgICBwcy0+Zm9yd2FyZCA9IG92ZXJyaWRlcy0+Zm9y
d2FyZCA/IG92ZXJyaWRlcy0+Zm9yd2FyZCA6DQo+IGJhc2UtDQo+ID4gPj4+PiBmb3J3YXJkOw0K
PiA+ID4+Pj4gICAgICAgIHBzLT5yZXZlcnNlID0gb3ZlcnJpZGVzLT5yZXZlcnNlID8gb3ZlcnJp
ZGVzLT5yZXZlcnNlIDoNCj4gYmFzZS0NCj4gPiA+Pj4+IHJldmVyc2U7DQo+ID4gPj4+Pg0KPiA+
ID4+Pj4gLS0NCj4gPiA+Pj4+DQo+ID4gPj4+PiBQbGVhc2Ugbm90ZSB0aGF0IHNpbmNlIGFsbCB0
aGUgd29ya2VycyB3b3VsZCByZWFsbHkgYmUgYWNjb3VudGVkIGluDQo+ID4gPj4+PiB0aGUgc2Nv
cmVib2FyZCwgY29uZmlndXJhdGlvbnMgbGlrZSB0aGUgb25lIG9mIFBSIDU4MjY3ICh3aXRoDQo+
ID4gPj4+PiBpbmhlcml0ZWQgYmFsYW5jZXJzKSB3b3VsZCBhbHNvIG5lZWQgYmlnZ2VyIFNITXMg
KGJ1dCBubyBtb3JlKSB0aGFuDQo+ID4gPj4+PiBjdXJyZW50bHkuLi4NCj4gPiA+Pj4+DQo+ID4g
Pj4+PiBXRFlUPw0KPiA+ID4+Pj4NCj4gPiA+Pj4NCj4gPiA+Pj4gUmVnYXJkcywNCj4gPiA+Pj4g
SmFuIEthbHV6YQ0KPiA+ID4+Pg0KPiA+ID4NCg0K

--_002_AB1691BE05AE7F4992697F2A0835627AC62F31E3VOEXM10Winterna_
Content-Type: application/octet-stream; name="pr58267.diff"
Content-Description: pr58267.diff
Content-Disposition: attachment; filename="pr58267.diff"; size=4751;
	creation-date="Tue, 25 Aug 2015 12:47:08 GMT";
	modification-date="Tue, 25 Aug 2015 12:47:08 GMT"
Content-Transfer-Encoding: base64

SW5kZXg6IG1vZHVsZXMvcHJveHkvcHJveHlfdXRpbC5jCj09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0tIG1vZHVsZXMv
cHJveHkvcHJveHlfdXRpbC5jCShyZXZpc2lvbiAxNjk3NTc4KQorKysgbW9kdWxlcy9wcm94eS9w
cm94eV91dGlsLmMJKHdvcmtpbmcgY29weSkKQEAgLTE0NjAsNiArMTQ2MCw3IEBACiAgICAgKCp3
b3JrZXIpLT5mbHVzaF9wYWNrZXRzID0gZmx1c2hfb2ZmOwogICAgICgqd29ya2VyKS0+Zmx1c2hf
d2FpdCA9IFBST1hZX0ZMVVNIX1dBSVQ7CiAgICAgKCp3b3JrZXIpLT5zbWF4ID0gLTE7CisgICAg
KCp3b3JrZXIpLT5zZXJ2ZXIgPSBjb25mLT5zOwogICAgIC8qIEluY3JlYXNlIHRoZSB0b3RhbCB3
b3JrZXIgY291bnQgKi8KICAgICBwcm94eV9sYl93b3JrZXJzKys7CiAgICAgaW5pdF9jb25uX3Bv
b2wocCwgKndvcmtlcik7CkBAIC0xODA3LDYgKzE4MDgsNyBAQAogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyX3JlYyAqc2VydmVyKQogewogICAg
IGlmIChhcF9zY29yZWJvYXJkX2ltYWdlICYmICF3b3JrZXItPnMpIHsKKyAgICAgICAgc2VydmVy
X3JlYyAqaWRfc2VydmVyOwogICAgICAgICBpbnQgaSA9IDA7CiAgICAgICAgIHByb3h5X3dvcmtl
cl9zdGF0ICpmcmVlX3Nsb3QgPSBOVUxMOwogICAgICAgICBwcm94eV93b3JrZXJfc3RhdCAqczsK
QEAgLTE4MjQsMTQgKzE4MjYsMjAgQEAKICAgICAgICAgICAgIGFwcl9tZDVfdXBkYXRlKCZjdHgs
ICh1bnNpZ25lZCBjaGFyICopYmFsYW5jZXItPm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzdHJsZW4oYmFsYW5jZXItPm5hbWUpKTsKICAgICAgICAgfQotICAgICAgICBpZiAoc2Vy
dmVyKSB7CisgICAgICAgIGlmICh3b3JrZXItPnNlcnZlcikgeworICAgICAgICAgICAgaWRfc2Vy
dmVyID0gd29ya2VyLT5zZXJ2ZXI7CisgICAgICAgIH0KKyAgICAgICAgZWxzZSB7CisgICAgICAg
ICAgICBpZF9zZXJ2ZXIgPSBzZXJ2ZXI7CisgICAgICAgIH0KKyAgICAgICAgaWYgKGlkX3NlcnZl
cikgewogICAgICAgICAgICAgc2VydmVyX2FkZHJfcmVjICphZGRyOwogICAgICAgICAgICAgLyog
QXNzdW1lcyB0aGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgYSB2aG9zdCBpcyBpdHMgYWRkcmVzcyhl
cykKICAgICAgICAgICAgICAqIHBsdXMgdGhlIFNlcnZlck5hbWU6UG9ydC4gU2hvdWxkIHR3byBv
ciBtb3JlIHZob3N0cyBoYXZlIHRoaXMKICAgICAgICAgICAgICAqIHNhbWUgaWRlbnRpZmllciwg
dGhlIGZpcnN0IG9uZSB3b3VsZCBhbHdheXMgYmUgZWxlY3RlZCB0bwogICAgICAgICAgICAgICog
aGFuZGxlIHRoZSByZXF1ZXN0cywgc28gdGhpcyBzaG91bGRuJ3QgYmUgYW4gaXNzdWUuLi4KICAg
ICAgICAgICAgICAqLwotICAgICAgICAgICAgZm9yIChhZGRyID0gc2VydmVyLT5hZGRyczsgYWRk
cjsgYWRkciA9IGFkZHItPm5leHQpIHsKKyAgICAgICAgICAgIGZvciAoYWRkciA9IGlkX3NlcnZl
ci0+YWRkcnM7IGFkZHI7IGFkZHIgPSBhZGRyLT5uZXh0KSB7CiAgICAgICAgICAgICAgICAgY2hh
ciBob3N0X2lwWzY0XTsgLyogZm9yIGFueSBJUHZbNDZdIHN0cmluZyAqLwogICAgICAgICAgICAg
ICAgIGFwcl9zb2NrYWRkcl9pcF9nZXRidWYoaG9zdF9pcCwgc2l6ZW9mIGhvc3RfaXAsCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyLT5ob3N0X2FkZHIpOwpAQCAt
MTg0MCwxMCArMTg0OCwxMCBAQAogICAgICAgICAgICAgICAgIGFwcl9tZDVfdXBkYXRlKCZjdHgs
ICh1bnNpZ25lZCBjaGFyICopJmFkZHItPmhvc3RfcG9ydCwKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBzaXplb2YoYWRkci0+aG9zdF9wb3J0KSk7CiAgICAgICAgICAgICB9Ci0gICAg
ICAgICAgICBhcHJfbWQ1X3VwZGF0ZSgmY3R4LCAodW5zaWduZWQgY2hhciAqKXNlcnZlci0+c2Vy
dmVyX2hvc3RuYW1lLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RybGVuKHNlcnZlci0+
c2VydmVyX2hvc3RuYW1lKSk7Ci0gICAgICAgICAgICBhcHJfbWQ1X3VwZGF0ZSgmY3R4LCAodW5z
aWduZWQgY2hhciAqKSZzZXJ2ZXItPnBvcnQsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICBz
aXplb2Yoc2VydmVyLT5wb3J0KSk7CisgICAgICAgICAgICBhcHJfbWQ1X3VwZGF0ZSgmY3R4LCAo
dW5zaWduZWQgY2hhciAqKWlkX3NlcnZlci0+c2VydmVyX2hvc3RuYW1lLAorICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc3RybGVuKGlkX3NlcnZlci0+c2VydmVyX2hvc3RuYW1lKSk7CisgICAg
ICAgICAgICBhcHJfbWQ1X3VwZGF0ZSgmY3R4LCAodW5zaWduZWQgY2hhciAqKSZpZF9zZXJ2ZXIt
PnBvcnQsCisgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplb2YoaWRfc2VydmVyLT5wb3J0
KSk7CiAgICAgICAgIH0KICAgICAgICAgYXByX21kNV9maW5hbChkaWdlc3QsICZjdHgpOwogCklu
ZGV4OiBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5jCj09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0tIG1vZHVsZXMvcHJv
eHkvbW9kX3Byb3h5LmMJKHJldmlzaW9uIDE2OTc1NzgpCisrKyBtb2R1bGVzL3Byb3h5L21vZF9w
cm94eS5jCSh3b3JraW5nIGNvcHkpCkBAIC0xMTI5LDYgKzExMjksNyBAQAogICAgIHBzLT5iYWRv
cHQgPSBiYWRfZXJyb3I7CiAgICAgcHMtPmJhZG9wdF9zZXQgPSAwOwogICAgIHBzLT5wb29sID0g
cDsKKyAgICBwcy0+cyA9IHM7CiAKICAgICByZXR1cm4gcHM7CiB9CkBAIC0xMTcyLDYgKzExNzMs
NyBAQAogICAgIHBzLT5wcm94eV9zdGF0dXMgPSAob3ZlcnJpZGVzLT5wcm94eV9zdGF0dXNfc2V0
ID09IDApID8gYmFzZS0+cHJveHlfc3RhdHVzIDogb3ZlcnJpZGVzLT5wcm94eV9zdGF0dXM7CiAg
ICAgcHMtPnByb3h5X3N0YXR1c19zZXQgPSBvdmVycmlkZXMtPnByb3h5X3N0YXR1c19zZXQgfHwg
YmFzZS0+cHJveHlfc3RhdHVzX3NldDsKICAgICBwcy0+cG9vbCA9IHA7CisgICAgcHMtPnMgPSBv
dmVycmlkZXMtPnM7CiAgICAgcmV0dXJuIHBzOwogfQogCkluZGV4OiBtb2R1bGVzL3Byb3h5L21v
ZF9wcm94eS5oCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT0KLS0tIG1vZHVsZXMvcHJveHkvbW9kX3Byb3h5LmgJKHJldmlz
aW9uIDE2OTc1NzgpCisrKyBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5oCSh3b3JraW5nIGNvcHkp
CkBAIC0xOTMsNiArMTkzLDcgQEAKICAgICB9IHByb3h5X3N0YXR1czsgICAgICAgICAgICAgLyog
U3RhdHVzIGRpc3BsYXkgb3B0aW9ucyAqLwogICAgIGNoYXIgcHJveHlfc3RhdHVzX3NldDsKICAg
ICBhcHJfcG9vbF90ICpwb29sOyAgICAgICAgICAgLyogUG9vbCB1c2VkIGZvciBhbGxvY2F0aW5n
IHRoaXMgc3RydWN0ICovCisgICAgc2VydmVyX3JlYyAqczsgICAgICAgICAgICAgIC8qIFRoZSBz
ZXJ2ZXJfcmVjIHdoZXJlIHRoaXMgY29uZmlndXJhdGlvbiB3YXMgY3JlYXRlZCBpbiAqLwogfSBw
cm94eV9zZXJ2ZXJfY29uZjsKIAogCkBAIC0zNjksNiArMzcwLDcgQEAKICAgICBjaGFyICAgICAg
ICAgICAgZGlzYWJsZXJldXNlX3NldDsKICAgICBhcHJfaW50ZXJ2YWxfdGltZV90IGNvbm5fdGlt
ZW91dDsKICAgICBjaGFyICAgICAgICAgICAgY29ubl90aW1lb3V0X3NldDsKKyAgICBzZXJ2ZXJf
cmVjICAgICAgKnNlcnZlcjsgICAgLyogVGhlIHNlcnZlcl9yZWMgd2hlcmUgdGhpcyBjb25maWd1
cmF0aW9uIHdhcyBjcmVhdGVkIGluICovCiB9OwogCiAvKgpJbmRleDogaW5jbHVkZS9hcF9tbW4u
aAo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09Ci0tLSBpbmNsdWRlL2FwX21tbi5oCShyZXZpc2lvbiAxNjk3NTc4KQorKysg
aW5jbHVkZS9hcF9tbW4uaAkod29ya2luZyBjb3B5KQpAQCAtMTU4LDYgKzE1OCw4IEBACiAgKiAy
MDA1MTExNS4zOCAoMi4yLjMwKSBBZGQgYXBfcHJveHlfc2V0X3Njb3JlYm9hcmRfbGIoKSBpbiBt
b2RfcHJveHkuaAogICogMjAwNTExMTUuMzkgKDIuMi4zMCkgQWRkIGFwX3Byb3h5X2Nvbm5lY3Rp
b25fcmV1c2FibGUoKQogICogMjAwNTExMTUuNDAgKDIuMi4zMCkgQWRkIGFwX21hcF9odHRwX3Jl
cXVlc3RfZXJyb3IoKQorICogMjAwNTExMTUuNDEgKDIuMi4zMikgQWRkIHMgbWVtYmVyIHRvIHBy
b3h5X3NlcnZlcl9jb25mIHN0cnVjdCBhbmQgc2VydmVyCisgKiAgICAgICAgICAgICAgICAgICAg
ICBtZW1iZXIgdG8gcHJveHlfd29ya2VyIHN0cnVjdC4KICAqLwogCiAjZGVmaW5lIE1PRFVMRV9N
QUdJQ19DT09LSUUgMHg0MTUwMzIzMlVMIC8qICJBUDIyIiAqLwpAQCAtMTY1LDcgKzE2Nyw3IEBA
CiAjaWZuZGVmIE1PRFVMRV9NQUdJQ19OVU1CRVJfTUFKT1IKICNkZWZpbmUgTU9EVUxFX01BR0lD
X05VTUJFUl9NQUpPUiAyMDA1MTExNQogI2VuZGlmCi0jZGVmaW5lIE1PRFVMRV9NQUdJQ19OVU1C
RVJfTUlOT1IgNDAgICAgICAgICAgICAgICAgICAgIC8qIDAuLi5uICovCisjZGVmaW5lIE1PRFVM
RV9NQUdJQ19OVU1CRVJfTUlOT1IgNDEgICAgICAgICAgICAgICAgICAgIC8qIDAuLi5uICovCiAK
IC8qKgogICogRGV0ZXJtaW5lIGlmIHRoZSBzZXJ2ZXIncyBjdXJyZW50IE1PRFVMRV9NQUdJQ19O
VU1CRVIgaXMgYXQgbGVhc3QgYQo=

--_002_AB1691BE05AE7F4992697F2A0835627AC62F31E3VOEXM10Winterna_--

From dev-return-83554-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 13:14:07 2015
Return-Path: <dev-return-83554-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A42FB18275
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 13:14:07 +0000 (UTC)
Received: (qmail 69265 invoked by uid 500); 25 Aug 2015 13:14:07 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 69209 invoked by uid 500); 25 Aug 2015 13:14:07 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 69199 invoked by uid 99); 25 Aug 2015 13:14:07 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 13:14:07 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id B1FFC182348
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 13:14:06 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.779
X-Spam-Level: *
X-Spam-Status: No, score=1.779 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01,
	SPF_HELO_PASS=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id qEGiwSfKDEvu for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 13:13:54 +0000 (UTC)
Received: from mail1.bemta3.messagelabs.com (mail1.bemta3.messagelabs.com [195.245.230.164])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 577ED21115
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 13:13:54 +0000 (UTC)
Received: from [195.245.230.51] by server-4.bemta-3.messagelabs.com id CE/00-09570-20A6CD55; Tue, 25 Aug 2015 13:13:38 +0000
X-Env-Sender: ruediger.pluem@vodafone.com
X-Msg-Ref: server-11.tower-33.messagelabs.com!1440508418!24730541!1
X-Originating-IP: [195.232.244.135]
X-StarScan-Received:
X-StarScan-Version: 6.13.16; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 603 invoked from network); 25 Aug 2015 13:13:38 -0000
Received: from mailout03.vodafone.com (HELO mailout03.vodafone.com) (195.232.244.135)
  by server-11.tower-33.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 25 Aug 2015 13:13:38 -0000
Received: from mailint01.vodafone.com (mailint01.vodafone.com [195.232.244.198])
	by mailout03.vodafone.com (Postfix) with ESMTP id 3n0rNy0PKKz17HNQ
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 15:13:38 +0200 (CEST)
Received: from mailint01.vodafone.com (localhost [127.0.0.1])
	by mailint01.vodafone.com (Postfix) with ESMTP id 3n0rNx6VqCzxPd2
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 15:13:37 +0200 (CEST)
Received: from VOEXC06W.internal.vodafone.com (voexc06w.dc-ratingen.de [145.230.101.26])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mailint01.vodafone.com (Postfix) with ESMTPS id 3n0rNx6803zxP8H
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 15:13:37 +0200 (CEST)
Received: from VOEXC12W.internal.vodafone.com (145.230.101.14) by
 VOEXC06W.internal.vodafone.com (145.230.101.26) with Microsoft SMTP Server
 (TLS) id 14.3.224.2; Tue, 25 Aug 2015 15:13:37 +0200
Received: from VOEXM10W.internal.vodafone.com ([169.254.2.132]) by
 voexc12w.internal.vodafone.com ([145.230.101.14]) with mapi id
 14.03.0224.002; Tue, 25 Aug 2015 15:13:36 +0200
From: =?utf-8?B?UGzDvG0sIFLDvGRpZ2VyLCBWb2RhZm9uZSBHcm91cA==?=
	<ruediger.pluem@vodafone.com>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
Subject: RE: PR 58267: Regression in 2.2.31 caused by r1680920
Thread-Topic: PR 58267: Regression in 2.2.31 caused by r1680920
Thread-Index: AQHQ3nvoe/hfZCbrK0Kj2QfLbhsYGZ4bKveAgABZ04CAALsWgIAAJd6AgAAQP9CAAArXAIAAKDYQgAAC3ACAAAa2oA==
Date: Tue, 25 Aug 2015 13:13:35 +0000
Message-ID: <AB1691BE05AE7F4992697F2A0835627AC62F31FC@VOEXM10W.internal.vodafone.com>
References: <55DB2E9A.10307@redhat.com>
	<CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com>
 <CAKQ1sVMFBhih-rq61WZkf+jbZ_dQd6+Y5Ekar--9v10+yuNO=Q@mail.gmail.com>
 <55DC25C7.9000607@redhat.com>
 <AB1691BE05AE7F4992697F2A0835627AC62F2C7D@VOEXM10W.internal.vodafone.com>
 <AB1691BE05AE7F4992697F2A0835627AC62F2E5F@VOEXM10W.internal.vodafone.com>
 <55DC5C44.6010900@redhat.com>
 <AB1691BE05AE7F4992697F2A0835627AC62F31AE@VOEXM10W.internal.vodafone.com>
 <AB1691BE05AE7F4992697F2A0835627AC62F31E3@VOEXM10W.internal.vodafone.com>
In-Reply-To: <AB1691BE05AE7F4992697F2A0835627AC62F31E3@VOEXM10W.internal.vodafone.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

UGx1cyBDSEFOR0VTOg0KDQpJbmRleDogQ0hBTkdFUw0KPT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KLS0tIENIQU5HRVMg
ICAgIChyZXZpc2lvbiAxNjk3NTc4KQ0KKysrIENIQU5HRVMgICAgICh3b3JraW5nIGNvcHkpDQpA
QCAtMSw4ICsxLDEwIEBADQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgLSotIGNvZGluZzogdXRmLTggLSotDQogQ2hhbmdlcyB3aXRoIEFw
YWNoZSAyLjIuMzINCg0KKyAgKikgbW9kX3Byb3h5OiBGaXggYSByZWdyZXNzaW9uIHdpdGggMi4y
LjMxIHRoYXQgY2F1c2VkIGluaGVyaXRlZCB3b3JrZXJzIHRvDQorICAgICB1c2UgYSBkaWZmZXJl
bnQgc2NvcmVib2FyZCBzbG90IHRoZW4gdGhlIG9yaWdpbmFsIG9uZS4gIFBSIDU4MjY3Lg0KKyAg
ICBbUnVlZGlnZXIgUGx1ZW1dDQoNCi0NCiBDaGFuZ2VzIHdpdGggQXBhY2hlIDIuMi4zMQ0KDQog
ICAqKSBDb3JyZWN0IHdpbjMyIGJ1aWxkIGlzc3VlcyBmb3IgbW9kX3Byb3h5IGV4cG9ydHMsIE9w
ZW5TU0wgMS4wLnggaGVhZGVycy4NCg0KUmVnYXJkcw0KDQpSw7xkaWdlcg0KDQo+IC0tLS0tT3Jp
Z2luYWwgTWVzc2FnZS0tLS0tDQo+IEZyb206IFBsw7xtLCBSw7xkaWdlciwgVm9kYWZvbmUgR3Jv
dXANCj4gU2VudDogRGllbnN0YWcsIDI1LiBBdWd1c3QgMjAxNSAxNDo1OA0KPiBUbzogZGV2QGh0
dHBkLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogUkU6IFBSIDU4MjY3OiBSZWdyZXNzaW9uIGluIDIu
Mi4zMSBjYXVzZWQgYnkgcjE2ODA5MjANCj4gDQo+IE5vdyB0aGUgbW9yZSBjb21wbGV0ZSBwYXRj
aCAoaW5jbHVkaW5nIGJ1bXApOg0KPiANCj4gSW5kZXg6IG1vZHVsZXMvcHJveHkvcHJveHlfdXRp
bC5jDQo+ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT0NCj4gLS0tIG1vZHVsZXMvcHJveHkvcHJveHlfdXRpbC5jCShyZXZp
c2lvbiAxNjk3NTc4KQ0KPiArKysgbW9kdWxlcy9wcm94eS9wcm94eV91dGlsLmMJKHdvcmtpbmcg
Y29weSkNCj4gQEAgLTE0NjAsNiArMTQ2MCw3IEBADQo+ICAgICAgKCp3b3JrZXIpLT5mbHVzaF9w
YWNrZXRzID0gZmx1c2hfb2ZmOw0KPiAgICAgICgqd29ya2VyKS0+Zmx1c2hfd2FpdCA9IFBST1hZ
X0ZMVVNIX1dBSVQ7DQo+ICAgICAgKCp3b3JrZXIpLT5zbWF4ID0gLTE7DQo+ICsgICAgKCp3b3Jr
ZXIpLT5zZXJ2ZXIgPSBjb25mLT5zOw0KPiAgICAgIC8qIEluY3JlYXNlIHRoZSB0b3RhbCB3b3Jr
ZXIgY291bnQgKi8NCj4gICAgICBwcm94eV9sYl93b3JrZXJzKys7DQo+ICAgICAgaW5pdF9jb25u
X3Bvb2wocCwgKndvcmtlcik7DQo+IEBAIC0xODA3LDYgKzE4MDgsNyBAQA0KPiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyX3JlYyAqc2VydmVy
KQ0KPiAgew0KPiAgICAgIGlmIChhcF9zY29yZWJvYXJkX2ltYWdlICYmICF3b3JrZXItPnMpIHsN
Cj4gKyAgICAgICAgc2VydmVyX3JlYyAqaWRfc2VydmVyOw0KPiAgICAgICAgICBpbnQgaSA9IDA7
DQo+ICAgICAgICAgIHByb3h5X3dvcmtlcl9zdGF0ICpmcmVlX3Nsb3QgPSBOVUxMOw0KPiAgICAg
ICAgICBwcm94eV93b3JrZXJfc3RhdCAqczsNCj4gQEAgLTE4MjQsMTQgKzE4MjYsMjAgQEANCj4g
ICAgICAgICAgICAgIGFwcl9tZDVfdXBkYXRlKCZjdHgsICh1bnNpZ25lZCBjaGFyICopYmFsYW5j
ZXItPm5hbWUsDQo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJsZW4oYmFsYW5jZXIt
Pm5hbWUpKTsNCj4gICAgICAgICAgfQ0KPiAtICAgICAgICBpZiAoc2VydmVyKSB7DQo+ICsgICAg
ICAgIGlmICh3b3JrZXItPnNlcnZlcikgew0KPiArICAgICAgICAgICAgaWRfc2VydmVyID0gd29y
a2VyLT5zZXJ2ZXI7DQo+ICsgICAgICAgIH0NCj4gKyAgICAgICAgZWxzZSB7DQo+ICsgICAgICAg
ICAgICBpZF9zZXJ2ZXIgPSBzZXJ2ZXI7DQo+ICsgICAgICAgIH0NCj4gKyAgICAgICAgaWYgKGlk
X3NlcnZlcikgew0KPiAgICAgICAgICAgICAgc2VydmVyX2FkZHJfcmVjICphZGRyOw0KPiAgICAg
ICAgICAgICAgLyogQXNzdW1lcyB0aGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgYSB2aG9zdCBpcyBp
dHMNCj4gYWRkcmVzcyhlcykNCj4gICAgICAgICAgICAgICAqIHBsdXMgdGhlIFNlcnZlck5hbWU6
UG9ydC4gU2hvdWxkIHR3byBvciBtb3JlIHZob3N0cyBoYXZlDQo+IHRoaXMNCj4gICAgICAgICAg
ICAgICAqIHNhbWUgaWRlbnRpZmllciwgdGhlIGZpcnN0IG9uZSB3b3VsZCBhbHdheXMgYmUgZWxl
Y3RlZCB0bw0KPiAgICAgICAgICAgICAgICogaGFuZGxlIHRoZSByZXF1ZXN0cywgc28gdGhpcyBz
aG91bGRuJ3QgYmUgYW4gaXNzdWUuLi4NCj4gICAgICAgICAgICAgICAqLw0KPiAtICAgICAgICAg
ICAgZm9yIChhZGRyID0gc2VydmVyLT5hZGRyczsgYWRkcjsgYWRkciA9IGFkZHItPm5leHQpIHsN
Cj4gKyAgICAgICAgICAgIGZvciAoYWRkciA9IGlkX3NlcnZlci0+YWRkcnM7IGFkZHI7IGFkZHIg
PSBhZGRyLT5uZXh0KSB7DQo+ICAgICAgICAgICAgICAgICAgY2hhciBob3N0X2lwWzY0XTsgLyog
Zm9yIGFueSBJUHZbNDZdIHN0cmluZyAqLw0KPiAgICAgICAgICAgICAgICAgIGFwcl9zb2NrYWRk
cl9pcF9nZXRidWYoaG9zdF9pcCwgc2l6ZW9mIGhvc3RfaXAsDQo+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBhZGRyLT5ob3N0X2FkZHIpOw0KPiBAQCAtMTg0MCwxMCAr
MTg0OCwxMCBAQA0KPiAgICAgICAgICAgICAgICAgIGFwcl9tZDVfdXBkYXRlKCZjdHgsICh1bnNp
Z25lZCBjaGFyICopJmFkZHItPmhvc3RfcG9ydCwNCj4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzaXplb2YoYWRkci0+aG9zdF9wb3J0KSk7DQo+ICAgICAgICAgICAgICB9DQo+IC0g
ICAgICAgICAgICBhcHJfbWQ1X3VwZGF0ZSgmY3R4LCAodW5zaWduZWQgY2hhciAqKXNlcnZlci0N
Cj4gPnNlcnZlcl9ob3N0bmFtZSwNCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmxl
bihzZXJ2ZXItPnNlcnZlcl9ob3N0bmFtZSkpOw0KPiAtICAgICAgICAgICAgYXByX21kNV91cGRh
dGUoJmN0eCwgKHVuc2lnbmVkIGNoYXIgKikmc2VydmVyLT5wb3J0LA0KPiAtICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc2l6ZW9mKHNlcnZlci0+cG9ydCkpOw0KPiArICAgICAgICAgICAgYXBy
X21kNV91cGRhdGUoJmN0eCwgKHVuc2lnbmVkIGNoYXIgKilpZF9zZXJ2ZXItDQo+ID5zZXJ2ZXJf
aG9zdG5hbWUsDQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJsZW4oaWRfc2VydmVy
LT5zZXJ2ZXJfaG9zdG5hbWUpKTsNCj4gKyAgICAgICAgICAgIGFwcl9tZDVfdXBkYXRlKCZjdHgs
ICh1bnNpZ25lZCBjaGFyICopJmlkX3NlcnZlci0+cG9ydCwNCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHNpemVvZihpZF9zZXJ2ZXItPnBvcnQpKTsNCj4gICAgICAgICAgfQ0KPiAgICAg
ICAgICBhcHJfbWQ1X2ZpbmFsKGRpZ2VzdCwgJmN0eCk7DQo+IA0KPiBJbmRleDogbW9kdWxlcy9w
cm94eS9tb2RfcHJveHkuYw0KPiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQo+IC0tLSBtb2R1bGVzL3Byb3h5L21vZF9w
cm94eS5jCShyZXZpc2lvbiAxNjk3NTc4KQ0KPiArKysgbW9kdWxlcy9wcm94eS9tb2RfcHJveHku
Ywkod29ya2luZyBjb3B5KQ0KPiBAQCAtMTEyOSw2ICsxMTI5LDcgQEANCj4gICAgICBwcy0+YmFk
b3B0ID0gYmFkX2Vycm9yOw0KPiAgICAgIHBzLT5iYWRvcHRfc2V0ID0gMDsNCj4gICAgICBwcy0+
cG9vbCA9IHA7DQo+ICsgICAgcHMtPnMgPSBzOw0KPiANCj4gICAgICByZXR1cm4gcHM7DQo+ICB9
DQo+IEBAIC0xMTcyLDYgKzExNzMsNyBAQA0KPiAgICAgIHBzLT5wcm94eV9zdGF0dXMgPSAob3Zl
cnJpZGVzLT5wcm94eV9zdGF0dXNfc2V0ID09IDApID8gYmFzZS0NCj4gPnByb3h5X3N0YXR1cyA6
IG92ZXJyaWRlcy0+cHJveHlfc3RhdHVzOw0KPiAgICAgIHBzLT5wcm94eV9zdGF0dXNfc2V0ID0g
b3ZlcnJpZGVzLT5wcm94eV9zdGF0dXNfc2V0IHx8IGJhc2UtDQo+ID5wcm94eV9zdGF0dXNfc2V0
Ow0KPiAgICAgIHBzLT5wb29sID0gcDsNCj4gKyAgICBwcy0+cyA9IG92ZXJyaWRlcy0+czsNCj4g
ICAgICByZXR1cm4gcHM7DQo+ICB9DQo+IA0KPiBJbmRleDogbW9kdWxlcy9wcm94eS9tb2RfcHJv
eHkuaA0KPiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09DQo+IC0tLSBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5oCShyZXZp
c2lvbiAxNjk3NTc4KQ0KPiArKysgbW9kdWxlcy9wcm94eS9tb2RfcHJveHkuaAkod29ya2luZyBj
b3B5KQ0KPiBAQCAtMTkzLDYgKzE5Myw3IEBADQo+ICAgICAgfSBwcm94eV9zdGF0dXM7ICAgICAg
ICAgICAgIC8qIFN0YXR1cyBkaXNwbGF5IG9wdGlvbnMgKi8NCj4gICAgICBjaGFyIHByb3h5X3N0
YXR1c19zZXQ7DQo+ICAgICAgYXByX3Bvb2xfdCAqcG9vbDsgICAgICAgICAgIC8qIFBvb2wgdXNl
ZCBmb3IgYWxsb2NhdGluZyB0aGlzIHN0cnVjdA0KPiAqLw0KPiArICAgIHNlcnZlcl9yZWMgKnM7
ICAgICAgICAgICAgICAvKiBUaGUgc2VydmVyX3JlYyB3aGVyZSB0aGlzDQo+IGNvbmZpZ3VyYXRp
b24gd2FzIGNyZWF0ZWQgaW4gKi8NCj4gIH0gcHJveHlfc2VydmVyX2NvbmY7DQo+IA0KPiANCj4g
QEAgLTM2OSw2ICszNzAsNyBAQA0KPiAgICAgIGNoYXIgICAgICAgICAgICBkaXNhYmxlcmV1c2Vf
c2V0Ow0KPiAgICAgIGFwcl9pbnRlcnZhbF90aW1lX3QgY29ubl90aW1lb3V0Ow0KPiAgICAgIGNo
YXIgICAgICAgICAgICBjb25uX3RpbWVvdXRfc2V0Ow0KPiArICAgIHNlcnZlcl9yZWMgICAgICAq
c2VydmVyOyAgICAvKiBUaGUgc2VydmVyX3JlYyB3aGVyZSB0aGlzDQo+IGNvbmZpZ3VyYXRpb24g
d2FzIGNyZWF0ZWQgaW4gKi8NCj4gIH07DQo+IA0KPiAgLyoNCj4gSW5kZXg6IGluY2x1ZGUvYXBf
bW1uLmgNCj4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PQ0KPiAtLS0gaW5jbHVkZS9hcF9tbW4uaAkocmV2aXNpb24gMTY5
NzU3OCkNCj4gKysrIGluY2x1ZGUvYXBfbW1uLmgJKHdvcmtpbmcgY29weSkNCj4gQEAgLTE1OCw2
ICsxNTgsOCBAQA0KPiAgICogMjAwNTExMTUuMzggKDIuMi4zMCkgQWRkIGFwX3Byb3h5X3NldF9z
Y29yZWJvYXJkX2xiKCkgaW4gbW9kX3Byb3h5LmgNCj4gICAqIDIwMDUxMTE1LjM5ICgyLjIuMzAp
IEFkZCBhcF9wcm94eV9jb25uZWN0aW9uX3JldXNhYmxlKCkNCj4gICAqIDIwMDUxMTE1LjQwICgy
LjIuMzApIEFkZCBhcF9tYXBfaHR0cF9yZXF1ZXN0X2Vycm9yKCkNCj4gKyAqIDIwMDUxMTE1LjQx
ICgyLjIuMzIpIEFkZCBzIG1lbWJlciB0byBwcm94eV9zZXJ2ZXJfY29uZiBzdHJ1Y3QgYW5kDQo+
IHNlcnZlcg0KPiArICogICAgICAgICAgICAgICAgICAgICAgbWVtYmVyIHRvIHByb3h5X3dvcmtl
ciBzdHJ1Y3QuDQo+ICAgKi8NCj4gDQo+ICAjZGVmaW5lIE1PRFVMRV9NQUdJQ19DT09LSUUgMHg0
MTUwMzIzMlVMIC8qICJBUDIyIiAqLw0KPiBAQCAtMTY1LDcgKzE2Nyw3IEBADQo+ICAjaWZuZGVm
IE1PRFVMRV9NQUdJQ19OVU1CRVJfTUFKT1INCj4gICNkZWZpbmUgTU9EVUxFX01BR0lDX05VTUJF
Ul9NQUpPUiAyMDA1MTExNQ0KPiAgI2VuZGlmDQo+IC0jZGVmaW5lIE1PRFVMRV9NQUdJQ19OVU1C
RVJfTUlOT1IgNDAgICAgICAgICAgICAgICAgICAgIC8qIDAuLi5uICovDQo+ICsjZGVmaW5lIE1P
RFVMRV9NQUdJQ19OVU1CRVJfTUlOT1IgNDEgICAgICAgICAgICAgICAgICAgIC8qIDAuLi5uICov
DQo+IA0KPiAgLyoqDQo+ICAgKiBEZXRlcm1pbmUgaWYgdGhlIHNlcnZlcidzIGN1cnJlbnQgTU9E
VUxFX01BR0lDX05VTUJFUiBpcyBhdCBsZWFzdCBhDQo+IA0KPiANCj4gUmVnYXJkcw0KPiANCj4g
UsO8ZGlnZXINCj4gDQo+ID4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gPiBGcm9tOiBQ
bMO8bSwgUsO8ZGlnZXIsIFZvZGFmb25lIEdyb3VwDQo+ID4gU2VudDogRGllbnN0YWcsIDI1LiBB
dWd1c3QgMjAxNSAxNDo0MQ0KPiA+IFRvOiBkZXZAaHR0cGQuYXBhY2hlLm9yZw0KPiA+IFN1Ympl
Y3Q6IFJFOiBQUiA1ODI2NzogUmVncmVzc2lvbiBpbiAyLjIuMzEgY2F1c2VkIGJ5IHIxNjgwOTIw
DQo+ID4NCj4gPiBUaGFua3MgZm9yIHRoZSBwb2ludGVyLiBJdCBpcyBtaXNzaW5nIGJlY2F1c2Ug
SSByZW1vdmVkIGl0IGJ5IGFjY2lkZW50DQo+ID4gd2hlbiBleGNsdWRpbmcgc29tZSBkZWJ1ZyBj
b2RlIEkgc2V0dXAgbG9jYWxseSBmb3IgYW5hbHlzaW5nIHRoZSBpc3N1ZQ0KPiA+IGZyb20gdGhl
IHBhdGNoIEkgcG9zdGVkLiBJIHdpbGwgcG9zdCBhIHByb3BlciB2ZXJzaW9uIGFuZCBpZiB5b3Ug
YWdyZWUNCj4gcHV0DQo+ID4gaXQgaW4gU1RBVFVTIGZvciAyLjIueC4gQXMgZmFyIGFzIEkgY2Fu
IHRlbGwgdGhpcyBjaGFuZ2Ugb25seSBhcHBsaWVzIHRvDQo+ID4gMi4yLnguIFNvIGl0IHdvdWxk
IGJlIGZpbmUgdG8gcHJvcG9zZSBpdCBkaXJlY3RseSBpbiBTVEFUVVMgd2l0aG91dCBhbnkNCj4g
PiB0cnVuayBjb21taXQuDQo+ID4NCj4gPiBSZWdhcmRzDQo+ID4NCj4gPiBSw7xkaWdlcg0KPiA+
DQo+ID4gPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiA+ID4gRnJvbTogSmFuIEthbHXF
vmEgW21haWx0bzpqa2FsdXphQHJlZGhhdC5jb21dDQo+ID4gPiBTZW50OiBEaWVuc3RhZywgMjUu
IEF1Z3VzdCAyMDE1IDE0OjE1DQo+ID4gPiBUbzogZGV2QGh0dHBkLmFwYWNoZS5vcmcNCj4gPiA+
IFN1YmplY3Q6IFJlOiBQUiA1ODI2NzogUmVncmVzc2lvbiBpbiAyLjIuMzEgY2F1c2VkIGJ5IHIx
NjgwOTIwDQo+ID4gPg0KPiA+ID4gT24gMDgvMjUvMjAxNSAxMTozOSBBTSwgUGzDvG0sIFLDvGRp
Z2VyLCBWb2RhZm9uZSBHcm91cCB3cm90ZToNCj4gPiA+ID4gSG93IGFib3V0IHRoZSBmb2xsb3dp
bmcgcGF0Y2g/IEl0IHVzZXMgdGhlIHNlcnZlcl9yZWMgb2YgdGhlIHNlcnZlcg0KPiA+IHRoYXQN
Cj4gPiA+IG9yaWdpbmFsbHkgY3JlYXRlZCB0aGUgY29uZmlndXJhdGlvbiBpdGVtLg0KPiA+ID4N
Cj4gPiA+IFRoaXMgbG9va3MgbGlrZSBnb29kIHN0cmF0ZWd5LiBJJ3ZlIHZlcmlmaWVkIHRoYXQg
dGhlIHBhdGNoIGZpeGVzIHRoaXMNCj4gPiA+IGlzc3VlIGFuZCBkb2VzIG5vdCBicmVhayBhbnl0
aGluZyB3aGVuIHRlc3RpbmcgYnJpZWZseS4NCj4gPiA+DQo+ID4gPiBXaGF0IGRvIHlvdSB0aGlu
aywgWWFubj8NCj4gPiA+DQo+ID4gPiBOb3RlIHRoYXQgImlkX3NlcnZlciIgZGVjbGFyYXRpb24g
aXMgbWlzc2luZyBpbiB0aGUgcGF0Y2guIE90aGVyd2lzZQ0KPiA+ID4gaXQncyBPSy4NCj4gPiA+
DQo+ID4gPiBSZWdhcmRzLA0KPiA+ID4gSmFuIEthbHV6YQ0KPiA+ID4NCj4gPiA+ID4gSW5kZXg6
IG1vZHVsZXMvcHJveHkvcHJveHlfdXRpbC5jDQo+ID4gPiA+ID09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCj4gPiA+ID4g
LS0tIG1vZHVsZXMvcHJveHkvcHJveHlfdXRpbC5jCShyZXZpc2lvbiAxNjk3NTc4KQ0KPiA+ID4g
PiArKysgbW9kdWxlcy9wcm94eS9wcm94eV91dGlsLmMJKHdvcmtpbmcgY29weSkNCj4gPiA+ID4g
QEAgLTE0NjAsNiArMTQ2MCw3IEBADQo+ID4gPiA+ICAgICAgICgqd29ya2VyKS0+Zmx1c2hfcGFj
a2V0cyA9IGZsdXNoX29mZjsNCj4gPiA+ID4gICAgICAgKCp3b3JrZXIpLT5mbHVzaF93YWl0ID0g
UFJPWFlfRkxVU0hfV0FJVDsNCj4gPiA+ID4gICAgICAgKCp3b3JrZXIpLT5zbWF4ID0gLTE7DQo+
ID4gPiA+ICsgICAgKCp3b3JrZXIpLT5zZXJ2ZXIgPSBjb25mLT5zOw0KPiA+ID4gPiAgICAgICAv
KiBJbmNyZWFzZSB0aGUgdG90YWwgd29ya2VyIGNvdW50ICovDQo+ID4gPiA+ICAgICAgIHByb3h5
X2xiX3dvcmtlcnMrKzsNCj4gPiA+ID4gICAgICAgaW5pdF9jb25uX3Bvb2wocCwgKndvcmtlcik7
DQo+ID4gPiA+IEBAIC0xODI0LDE0ICsxODI5LDIwIEBADQo+ID4gPiA+ICAgICAgICAgICAgICAg
YXByX21kNV91cGRhdGUoJmN0eCwgKHVuc2lnbmVkIGNoYXIgKiliYWxhbmNlci0+bmFtZSwNCj4g
PiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJsZW4oYmFsYW5jZXItPm5hbWUp
KTsNCj4gPiA+ID4gICAgICAgICAgIH0NCj4gPiA+ID4gLSAgICAgICAgaWYgKHNlcnZlcikgew0K
PiA+ID4gPiArICAgICAgICBpZiAod29ya2VyLT5zZXJ2ZXIpIHsNCj4gPiA+ID4gKyAgICAgICAg
ICAgIGlkX3NlcnZlciA9IHdvcmtlci0+c2VydmVyOw0KPiA+ID4gPiArICAgICAgICB9DQo+ID4g
PiA+ICsgICAgICAgIGVsc2Ugew0KPiA+ID4gPiArICAgICAgICAgICAgaWRfc2VydmVyID0gc2Vy
dmVyOw0KPiA+ID4gPiArICAgICAgICB9DQo+ID4gPiA+ICsgICAgICAgIGlmIChpZF9zZXJ2ZXIp
IHsNCj4gPiA+ID4gICAgICAgICAgICAgICBzZXJ2ZXJfYWRkcl9yZWMgKmFkZHI7DQo+ID4gPiA+
ICAgICAgICAgICAgICAgLyogQXNzdW1lcyB0aGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgYSB2aG9z
dCBpcyBpdHMNCj4gPiA+IGFkZHJlc3MoZXMpDQo+ID4gPiA+ICAgICAgICAgICAgICAgICogcGx1
cyB0aGUgU2VydmVyTmFtZTpQb3J0LiBTaG91bGQgdHdvIG9yIG1vcmUgdmhvc3RzDQo+ID4gPiBo
YXZlIHRoaXMNCj4gPiA+ID4gICAgICAgICAgICAgICAgKiBzYW1lIGlkZW50aWZpZXIsIHRoZSBm
aXJzdCBvbmUgd291bGQgYWx3YXlzIGJlDQo+ID4gZWxlY3RlZA0KPiA+ID4gdG8NCj4gPiA+ID4g
ICAgICAgICAgICAgICAgKiBoYW5kbGUgdGhlIHJlcXVlc3RzLCBzbyB0aGlzIHNob3VsZG4ndCBi
ZSBhbg0KPiBpc3N1ZS4uLg0KPiA+ID4gPiAgICAgICAgICAgICAgICAqLw0KPiA+ID4gPiAtICAg
ICAgICAgICAgZm9yIChhZGRyID0gc2VydmVyLT5hZGRyczsgYWRkcjsgYWRkciA9IGFkZHItPm5l
eHQpIHsNCj4gPiA+ID4gKyAgICAgICAgICAgIGZvciAoYWRkciA9IGlkX3NlcnZlci0+YWRkcnM7
IGFkZHI7IGFkZHIgPSBhZGRyLT5uZXh0KQ0KPiB7DQo+ID4gPiA+ICAgICAgICAgICAgICAgICAg
IGNoYXIgaG9zdF9pcFs2NF07IC8qIGZvciBhbnkgSVB2WzQ2XSBzdHJpbmcgKi8NCj4gPiA+ID4g
ICAgICAgICAgICAgICAgICAgYXByX3NvY2thZGRyX2lwX2dldGJ1Zihob3N0X2lwLCBzaXplb2Yg
aG9zdF9pcCwNCj4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBhZGRyLT5ob3N0X2FkZHIpOw0KPiA+ID4gPiBAQCAtMTg0MCwxMCArMTg1MSwxMCBAQA0KPiA+
ID4gPiAgICAgICAgICAgICAgICAgICBhcHJfbWQ1X3VwZGF0ZSgmY3R4LCAodW5zaWduZWQgY2hh
ciAqKSZhZGRyLQ0KPiA+ID4gPmhvc3RfcG9ydCwNCj4gPiA+ID4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc2l6ZW9mKGFkZHItPmhvc3RfcG9ydCkpOw0KPiA+ID4gPiAgICAgICAg
ICAgICAgIH0NCj4gPiA+ID4gLSAgICAgICAgICAgIGFwcl9tZDVfdXBkYXRlKCZjdHgsICh1bnNp
Z25lZCBjaGFyICopc2VydmVyLQ0KPiA+ID4gPnNlcnZlcl9ob3N0bmFtZSwNCj4gPiA+ID4gLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmxlbihzZXJ2ZXItPnNlcnZlcl9ob3N0bmFtZSkp
Ow0KPiA+ID4gPiAtICAgICAgICAgICAgYXByX21kNV91cGRhdGUoJmN0eCwgKHVuc2lnbmVkIGNo
YXIgKikmc2VydmVyLT5wb3J0LA0KPiA+ID4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAg
c2l6ZW9mKHNlcnZlci0+cG9ydCkpOw0KPiA+ID4gPiArICAgICAgICAgICAgYXByX21kNV91cGRh
dGUoJmN0eCwgKHVuc2lnbmVkIGNoYXIgKilpZF9zZXJ2ZXItDQo+ID4gPiA+c2VydmVyX2hvc3Ru
YW1lLA0KPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RybGVuKGlkX3NlcnZl
ci0+c2VydmVyX2hvc3RuYW1lKSk7DQo+ID4gPiA+ICsgICAgICAgICAgICBhcHJfbWQ1X3VwZGF0
ZSgmY3R4LCAodW5zaWduZWQgY2hhciAqKSZpZF9zZXJ2ZXItPnBvcnQsDQo+ID4gPiA+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzaXplb2YoaWRfc2VydmVyLT5wb3J0KSk7DQo+ID4gPiA+
ICAgICAgICAgICB9DQo+ID4gPiA+ICAgICAgICAgICBhcHJfbWQ1X2ZpbmFsKGRpZ2VzdCwgJmN0
eCk7DQo+ID4gPiA+DQo+ID4gPiA+IEluZGV4OiBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5jDQo+
ID4gPiA+ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT0NCj4gPiA+ID4gLS0tIG1vZHVsZXMvcHJveHkvbW9kX3Byb3h5LmMJ
KHJldmlzaW9uIDE2OTc1NzgpDQo+ID4gPiA+ICsrKyBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5j
CSh3b3JraW5nIGNvcHkpDQo+ID4gPiA+IEBAIC0xMTI5LDYgKzExMjksNyBAQA0KPiA+ID4gPiAg
ICAgICBwcy0+YmFkb3B0ID0gYmFkX2Vycm9yOw0KPiA+ID4gPiAgICAgICBwcy0+YmFkb3B0X3Nl
dCA9IDA7DQo+ID4gPiA+ICAgICAgIHBzLT5wb29sID0gcDsNCj4gPiA+ID4gKyAgICBwcy0+cyA9
IHM7DQo+ID4gPiA+DQo+ID4gPiA+ICAgICAgIHJldHVybiBwczsNCj4gPiA+ID4gICB9DQo+ID4g
PiA+IEBAIC0xMTcyLDYgKzExNzMsNyBAQA0KPiA+ID4gPiAgICAgICBwcy0+cHJveHlfc3RhdHVz
ID0gKG92ZXJyaWRlcy0+cHJveHlfc3RhdHVzX3NldCA9PSAwKSA/IGJhc2UtDQo+ID4gPiA+cHJv
eHlfc3RhdHVzIDogb3ZlcnJpZGVzLT5wcm94eV9zdGF0dXM7DQo+ID4gPiA+ICAgICAgIHBzLT5w
cm94eV9zdGF0dXNfc2V0ID0gb3ZlcnJpZGVzLT5wcm94eV9zdGF0dXNfc2V0IHx8IGJhc2UtDQo+
ID4gPiA+cHJveHlfc3RhdHVzX3NldDsNCj4gPiA+ID4gICAgICAgcHMtPnBvb2wgPSBwOw0KPiA+
ID4gPiArICAgIHBzLT5zID0gb3ZlcnJpZGVzLT5zOw0KPiA+ID4gPiAgICAgICByZXR1cm4gcHM7
DQo+ID4gPiA+ICAgfQ0KPiA+ID4gPg0KPiA+ID4gPiBJbmRleDogbW9kdWxlcy9wcm94eS9tb2Rf
cHJveHkuaA0KPiA+ID4gPiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09DQo+ID4gPiA+IC0tLSBtb2R1bGVzL3Byb3h5L21v
ZF9wcm94eS5oCShyZXZpc2lvbiAxNjk3NTc4KQ0KPiA+ID4gPiArKysgbW9kdWxlcy9wcm94eS9t
b2RfcHJveHkuaAkod29ya2luZyBjb3B5KQ0KPiA+ID4gPiBAQCAtMTkzLDYgKzE5Myw3IEBADQo+
ID4gPiA+ICAgICAgIH0gcHJveHlfc3RhdHVzOyAgICAgICAgICAgICAvKiBTdGF0dXMgZGlzcGxh
eSBvcHRpb25zICovDQo+ID4gPiA+ICAgICAgIGNoYXIgcHJveHlfc3RhdHVzX3NldDsNCj4gPiA+
ID4gICAgICAgYXByX3Bvb2xfdCAqcG9vbDsgICAgICAgICAgIC8qIFBvb2wgdXNlZCBmb3IgYWxs
b2NhdGluZyB0aGlzDQo+ID4gPiBzdHJ1Y3QgKi8NCj4gPiA+ID4gKyAgICBzZXJ2ZXJfcmVjICpz
OyAgICAgICAgICAgICAgLyogVGhlIHNlcnZlcl9yZWMgd2hlcmUgdGhpcw0KPiA+ID4gY29uZmln
dXJhdGlvbiB3YXMgY3JlYXRlZCBpbiAqLw0KPiA+ID4gPiAgIH0gcHJveHlfc2VydmVyX2NvbmY7
DQo+ID4gPiA+DQo+ID4gPiA+DQo+ID4gPiA+IEBAIC0zNjksNiArMzcwLDcgQEANCj4gPiA+ID4g
ICAgICAgY2hhciAgICAgICAgICAgIGRpc2FibGVyZXVzZV9zZXQ7DQo+ID4gPiA+ICAgICAgIGFw
cl9pbnRlcnZhbF90aW1lX3QgY29ubl90aW1lb3V0Ow0KPiA+ID4gPiAgICAgICBjaGFyICAgICAg
ICAgICAgY29ubl90aW1lb3V0X3NldDsNCj4gPiA+ID4gKyAgICBzZXJ2ZXJfcmVjICAgICAgKnNl
cnZlcjsgICAgLyogVGhlIHNlcnZlcl9yZWMgd2hlcmUgdGhpcw0KPiA+ID4gY29uZmlndXJhdGlv
biB3YXMgY3JlYXRlZCBpbiAqLw0KPiA+ID4gPiAgIH07DQo+ID4gPiA+DQo+ID4gPiA+ICAgLyoN
Cj4gPiA+ID4NCj4gPiA+ID4NCj4gPiA+ID4gUmVnYXJkcw0KPiA+ID4gPg0KPiA+ID4gPiBSw7xk
aWdlcg0KPiA+ID4gPg0KPiA+ID4gPj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gPiA+
ID4+IEZyb206IFBsw7xtLCBSw7xkaWdlciwgVm9kYWZvbmUgR3JvdXANCj4gPiA+ID4+IFNlbnQ6
IERpZW5zdGFnLCAyNS4gQXVndXN0IDIwMTUgMTA6NDgNCj4gPiA+ID4+IFRvOiBkZXZAaHR0cGQu
YXBhY2hlLm9yZw0KPiA+ID4gPj4gU3ViamVjdDogUkU6IFBSIDU4MjY3OiBSZWdyZXNzaW9uIGlu
IDIuMi4zMSBjYXVzZWQgYnkgcjE2ODA5MjANCj4gPiA+ID4+DQo+ID4gPiA+PiBJIHRoaW5rIHRo
ZSBjdXJyZW50IHN0YXRlIG9mIDIuMi4zMSBicmVha3MgZXhpc3RpbmcgMi4yLngNCj4gPiBjb25m
aWd1cmF0aW9uDQo+ID4gPiA+PiBwcmlvciB0byAyLjIuMzEuDQo+ID4gPiA+PiBQcmlvciB0byAy
LjIuMzEgeW91IGNvdWxkIGRvIHRoZSBmb2xsb3dpbmc6DQo+ID4gPiA+Pg0KPiA+ID4gPj4gPFBy
b3h5IEJhbGFuY2VyOi8vcHJveHkxPg0KPiA+ID4gPj4gQmFsYW5jZXJNZW1iZXIgYWpwOi8vMTI3
LjAuMC4xOjcwMDENCj4gPiA+ID4+IEJhbGFuY2VyTWVtYmVyIGFqcDovLzEyNy4wLjAuMjo3MDAy
DQo+ID4gPiA+PiA8L1Byb3h5Pg0KPiA+ID4gPj4NCj4gPiA+ID4+IDx2aXJ0dWFsaG9zdCAqOjgw
Pg0KPiA+ID4gPj4gUHJveHlQYXNzIC8gYmFsYW5jZXI6Ly9wcm94eTEvDQo+ID4gPiA+PiA8L3Zp
cnR1YWxob3N0Pg0KPiA+ID4gPj4NCj4gPiA+ID4+IDx2aXJ0dWFsaG9zdCAxMjcuMC4wLjE6ODA4
MD4NCj4gPiA+ID4+DQo+ID4gPiA+PiA8TG9jYXRpb24gL2JtYW5hZ2VyPg0KPiA+ID4gPj4gICAg
IHNldGhhbmRsZXIgYmFsYW5jZXItbWFuYWdlcg0KPiA+ID4gPj4gPC9Mb2NhdGlvbj4NCj4gPiA+
ID4+DQo+ID4gPiA+PiA8L3ZpcnR1YWxob3N0Pg0KPiA+ID4gPj4NCj4gPiA+ID4+IFdpdGggdGhp
cyBjb25maWd1cmF0aW9uIHlvdSBjb3VsZCBwcm92aWRlIHlvdXIgcmV2ZXJzZSBwcm94eSB0byB0
aGUNCj4gPiA+ID4+IG91dHNpZGUgd29ybGQgd2hpbGUgaGF2aW5nIHRoZQ0KPiA+ID4gPj4gYmFs
YW5jZXJtYW5hZ2VyIG1hbmFnaW5nIHRoZSBiYWxhbmNlciBvbmx5IGxpc3RlbmluZyB0byBsb2Nh
bGhvc3QuDQo+ID4gVGhpcw0KPiA+ID4gaXMNCj4gPiA+ID4+IG5vdCBwb3NzaWJsZSBhbnkgbG9u
Z2VyIHdpdGggMi4yLjMxDQo+ID4gPiA+PiBhcyB0aGUgd29ya2VyLT5zIGlzIG5vdyBkaWZmZXJl
bnQgaW4gZWFjaCB2aXJ0dWFsaG9zdCB3aGVyZWFzDQo+IGJlZm9yZQ0KPiA+IGl0DQo+ID4gPiA+
PiB3YXMgdGhlIHNhbWUgYXMgdGhlIHdvcmtlci0+aWQgd2FzIHVzZWQNCj4gPiA+ID4+IHRvIGlk
ZW50aWZ5IHRoZSBzY29yZWJvYXJkIHNsb3QuDQo+ID4gPiA+PiBUaGUgcGF0Y2hlcyBwcm9wb3Nl
ZCBzbyBmYXIgd291bGQgbm90IGNoYW5nZSB0aGlzLiBJIHRoaW5rIGluIG9yZGVyDQo+ID4gdG8N
Cj4gPiA+ID4+IHJldmVydCB0byB0aGUgb2xkIGJlaGF2aW91ciB3ZSBuZWVkIHRvDQo+ID4gPiA+
PiBzdG9yZSB3aXRoIGVhY2ggd29ya2VyIGluIHdoaWNoIHNlcnZlcl9yZWMgY29udGV4dCBpdCB3
YXMgY3JlYXRlZC4NCj4gPiBlLmcuDQo+ID4gPiA+PiBhZGRpbmcgYSBjb25zdCBjaGFyICogZmll
bGQgdG8gdGhlIHdvcmtlciB0aGF0IHdvdWxkIGJlIGZpbGxlZCB3aXRoDQo+ID4gPiA+PiBzZXJ2
ZXItPnNlcnZlcl9ob3N0bmFtZS4gVGhlbiB3ZSBjb3VsZCB1c2UgdGhpcyB2YWx1ZSBmb3IgY3Jl
YXRpbmcNCj4gPiB0aGUNCj4gPiA+ID4+IG1kNS4NCj4gPiA+ID4+DQo+ID4gPiA+PiBSZWdhcmRz
DQo+ID4gPiA+Pg0KPiA+ID4gPj4gUsO8ZGlnZXINCj4gPiA+ID4+DQo+ID4gPiA+Pj4gLS0tLS1P
cmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gPiA+ID4+PiBGcm9tOiBKYW4gS2FsdcW+YSBbbWFpbHRv
OmprYWx1emFAcmVkaGF0LmNvbV0NCj4gPiA+ID4+PiBTZW50OiBEaWVuc3RhZywgMjUuIEF1Z3Vz
dCAyMDE1IDEwOjIzDQo+ID4gPiA+Pj4gVG86IGRldkBodHRwZC5hcGFjaGUub3JnDQo+ID4gPiA+
Pj4gU3ViamVjdDogUmU6IFBSIDU4MjY3OiBSZWdyZXNzaW9uIGluIDIuMi4zMSBjYXVzZWQgYnkg
cjE2ODA5MjANCj4gPiA+ID4+Pg0KPiA+ID4gPj4+IE9uIDA4LzI0LzIwMTUgMTE6MTIgUE0sIFlh
bm4gWWxhdmljIHdyb3RlOg0KPiA+ID4gPj4+PiBPbiBNb24sIEF1ZyAyNCwgMjAxNSBhdCA1OjUx
IFBNLCBZYW5uIFlsYXZpYw0KPiA8eWxhdmljLmRldkBnbWFpbC5jb20+DQo+ID4gPiA+Pj4gd3Jv
dGU6DQo+ID4gPiA+Pj4+Pg0KPiA+ID4gPj4+Pj4gT24gTW9uLCBBdWcgMjQsIDIwMTUgYXQgNDo0
NyBQTSwgSmFuIEthbHXFvmEgPGprYWx1emFAcmVkaGF0LmNvbT4NCj4gPiA+ID4+IHdyb3RlOg0K
PiA+ID4gPj4+Pj4+DQo+ID4gPiA+Pj4+Pj4gMikgSW5jcmVtZW50IHByb3h5X2xiX3dvcmtlcnMg
YWNjb3JkaW5nIHRvIG51bWJlciBvZiB3b3JrZXJzIGluDQo+ID4gPiA+Pj4gYmFsYW5jZXINCj4g
PiA+ID4+Pj4+PiB3aGVuIHVzaW5nICJQcm94eVBhc3MgL2Zvb2Jhci8gQmFsYW5jZXI6Ly9mb29i
YXIvIiBpbiB0aGUNCj4gPiA+ID4+IFZpcnR1YWxIb3N0Lg0KPiA+ID4gPj4+IFRoZQ0KPiA+ID4g
Pj4+Pj4+IHNjb3JlYm9hcmQgd291bGQgaGF2ZSByaWdodCBzaXplIGFuZCBhcF9wcm94eV9zZXRf
c2NvcmVib2FyZF9sYg0KPiA+ID4gPj4gd291bGQNCj4gPiA+ID4+PiBub3QNCj4gPiA+ID4+Pj4+
PiBmYWlsIHRoZW4uDQo+ID4gPiA+Pj4+Pg0KPiA+ID4gPj4+Pj4gSSB0aGluayB3ZSBjYW4gZG8g
dGhpcyBxdWl0ZSBlYXNpbHkgaW4gbWVyZ2VfcHJveHlfY29uZmlnKCksIGJ5DQo+ID4gPiA+Pj4+
PiBpbmNyZW1lbnRpbmcgcHJveHlfbGJfd29ya2VycyBmb3IgZWFjaCBiYXNlLT5iYWxhbmNlcnMt
PndvcmtlcnMuDQo+IEkNCj4gPiA+ID4+IGRpZA0KPiA+ID4gPj4+Pj4gbm90IHRlc3QgaXQgeWV0
IHRob3VnaC4NCj4gPiA+ID4+Pj4NCj4gPiA+ID4+Pj4gSSB0ZXN0ZWQgdGhlIGJlbG93IHdoaWNo
IHNlZW1zIHRvIHdvcmsuDQo+ID4gPiA+Pj4NCj4gPiA+ID4+PiBIbSwgdGhpcyByZXNlcnZlcyB0
aGUgc2xvdHMgaW4gc2NvcmVib2FyZCBldmVuIHdoZW4gdGhlIGJhbGFuY2Vycw0KPiA+IGFyZQ0K
PiA+ID4gPj4+IG5vdCB1c2VkIGluIHRoZSB2aXJ0dWFsaG9zdCwgb3IgYW0gSSB3cm9uZz8NCj4g
PiA+ID4+Pg0KPiA+ID4gPj4+IEkgb3JpZ2luYWxseSB0aG91Z2h0IGFib3V0IGluY3JlYXNpbmcg
cHJveHlfbGJfd29ya2VycyBvbmx5IHdoZW4NCj4gPiB0aGV5DQo+ID4gPiA+Pj4gYXJlIHVzZWQg
aW4gdGhlIFByb3h5UGFzcyogaW4gdGhlIHZob3N0Lg0KPiA+ID4gPj4+DQo+ID4gPiA+Pj4+IElu
ZGV4OiBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5jDQo+ID4gPiA+Pj4+DQo+ID09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0N
Cj4gPiA+ID4+Pj4gLS0tIG1vZHVsZXMvcHJveHkvbW9kX3Byb3h5LmMgICAgKHJldmlzaW9uIDE2
OTczNTgpDQo+ID4gPiA+Pj4+ICsrKyBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5jICAgICh3b3Jr
aW5nIGNvcHkpDQo+ID4gPiA+Pj4+IEBAIC0xMTM1LDYgKzExMzUsNyBAQCBzdGF0aWMgdm9pZCAq
DQo+IGNyZWF0ZV9wcm94eV9jb25maWcoYXByX3Bvb2xfdA0KPiA+ID4gKnAsDQo+ID4gPiA+PiBz
DQo+ID4gPiA+Pj4+DQo+ID4gPiA+Pj4+ICAgIHN0YXRpYyB2b2lkICogbWVyZ2VfcHJveHlfY29u
ZmlnKGFwcl9wb29sX3QgKnAsIHZvaWQgKmJhc2V2LA0KPiA+IHZvaWQNCj4gPiA+ID4+PiAqb3Zl
cnJpZGVzdikNCj4gPiA+ID4+Pj4gICAgew0KPiA+ID4gPj4+PiArICAgIGludCBpOw0KPiA+ID4g
Pj4+PiAgICAgICAgcHJveHlfc2VydmVyX2NvbmYgKnBzID0gYXByX3BjYWxsb2MocCwNCj4gPiA+
ID4+IHNpemVvZihwcm94eV9zZXJ2ZXJfY29uZikpOw0KPiA+ID4gPj4+PiAgICAgICAgcHJveHlf
c2VydmVyX2NvbmYgKmJhc2UgPSAocHJveHlfc2VydmVyX2NvbmYgKikgYmFzZXY7DQo+ID4gPiA+
Pj4+ICAgICAgICBwcm94eV9zZXJ2ZXJfY29uZiAqb3ZlcnJpZGVzID0gKHByb3h5X3NlcnZlcl9j
b25mICopDQo+ID4gPiBvdmVycmlkZXN2Ow0KPiA+ID4gPj4+PiBAQCAtMTE0Nyw2ICsxMTQ4LDEz
IEBAIHN0YXRpYyB2b2lkICoNCj4gbWVyZ2VfcHJveHlfY29uZmlnKGFwcl9wb29sX3QNCj4gPiA+
ICpwLA0KPiA+ID4gPj4+IHZvDQo+ID4gPiA+Pj4+ICAgICAgICBwcy0+YWxsb3dlZF9jb25uZWN0
X3BvcnRzID0gYXByX2FycmF5X2FwcGVuZChwLA0KPiA+ID4gPj4+PiBiYXNlLT5hbGxvd2VkX2Nv
bm5lY3RfcG9ydHMsIG92ZXJyaWRlcy0+YWxsb3dlZF9jb25uZWN0X3BvcnRzKTsNCj4gPiA+ID4+
Pj4gICAgICAgIHBzLT53b3JrZXJzID0gYXByX2FycmF5X2FwcGVuZChwLCBiYXNlLT53b3JrZXJz
LA0KPiBvdmVycmlkZXMtDQo+ID4gPiA+Pj4+IHdvcmtlcnMpOw0KPiA+ID4gPj4+PiAgICAgICAg
cHMtPmJhbGFuY2VycyA9IGFwcl9hcnJheV9hcHBlbmQocCwgYmFzZS0+YmFsYW5jZXJzLA0KPiA+
ID4gb3ZlcnJpZGVzLQ0KPiA+ID4gPj4+PiBiYWxhbmNlcnMpOw0KPiA+ID4gPj4+PiArICAgIC8q
IFRoZSBiYWxhbmNlcnMgaW5oZXJpdGVkIGZyb20gYmFzZSBkb24ndCBoYXZlIHRoZWlyDQo+IG1l
bWJlcnMNCj4gPiA+ID4+PiByZXNlcnZlZCBvbg0KPiA+ID4gPj4+PiArICAgICAqIHRoZSBzY29y
ZWJvcmRfbGIgZm9yIHRoaXMgc2VydmVyLCBhY2NvdW50IGZvciB0aGVtIG5vdy4NCj4gPiA+ID4+
Pj4gKyAgICAgKi8NCj4gPiA+ID4+Pj4gKyAgICBmb3IgKGkgPSAwOyBpIDwgYmFzZS0+YmFsYW5j
ZXJzLT5uZWx0czsgKytpKSB7DQo+ID4gPiA+Pj4+ICsgICAgICAgIHByb3h5X2JhbGFuY2VyICpi
YWxhbmNlciA9IChwcm94eV9iYWxhbmNlciAqKWJhc2UtDQo+ID4gPiA+YmFsYW5jZXJzLQ0KPiA+
ID4gPj4+PiBlbHRzICsgaTsNCj4gPiA+ID4+Pj4gKyAgICAgICAgcHJveHlfbGJfd29ya2VycyAr
PSBiYWxhbmNlci0+d29ya2Vycy0+bmVsdHM7DQo+ID4gPiA+Pj4+ICsgICAgfQ0KPiA+ID4gPj4+
PiAgICAgICAgcHMtPmZvcndhcmQgPSBvdmVycmlkZXMtPmZvcndhcmQgPyBvdmVycmlkZXMtPmZv
cndhcmQgOg0KPiA+IGJhc2UtDQo+ID4gPiA+Pj4+IGZvcndhcmQ7DQo+ID4gPiA+Pj4+ICAgICAg
ICBwcy0+cmV2ZXJzZSA9IG92ZXJyaWRlcy0+cmV2ZXJzZSA/IG92ZXJyaWRlcy0+cmV2ZXJzZSA6
DQo+ID4gYmFzZS0NCj4gPiA+ID4+Pj4gcmV2ZXJzZTsNCj4gPiA+ID4+Pj4NCj4gPiA+ID4+Pj4g
LS0NCj4gPiA+ID4+Pj4NCj4gPiA+ID4+Pj4gUGxlYXNlIG5vdGUgdGhhdCBzaW5jZSBhbGwgdGhl
IHdvcmtlcnMgd291bGQgcmVhbGx5IGJlIGFjY291bnRlZA0KPiBpbg0KPiA+ID4gPj4+PiB0aGUg
c2NvcmVib2FyZCwgY29uZmlndXJhdGlvbnMgbGlrZSB0aGUgb25lIG9mIFBSIDU4MjY3ICh3aXRo
DQo+ID4gPiA+Pj4+IGluaGVyaXRlZCBiYWxhbmNlcnMpIHdvdWxkIGFsc28gbmVlZCBiaWdnZXIg
U0hNcyAoYnV0IG5vIG1vcmUpDQo+IHRoYW4NCj4gPiA+ID4+Pj4gY3VycmVudGx5Li4uDQo+ID4g
PiA+Pj4+DQo+ID4gPiA+Pj4+IFdEWVQ/DQo+ID4gPiA+Pj4+DQo+ID4gPiA+Pj4NCj4gPiA+ID4+
PiBSZWdhcmRzLA0KPiA+ID4gPj4+IEphbiBLYWx1emENCj4gPiA+ID4+Pg0KPiA+ID4gPg0KDQo=

From dev-return-83555-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 13:15:30 2015
Return-Path: <dev-return-83555-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 602AC18284
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 13:15:30 +0000 (UTC)
Received: (qmail 75047 invoked by uid 500); 25 Aug 2015 13:15:29 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 74961 invoked by uid 500); 25 Aug 2015 13:15:29 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 74951 invoked by uid 99); 25 Aug 2015 13:15:29 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 13:15:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 6D316C009B
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 13:15:29 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.681
X-Spam-Level:
X-Spam-Status: No, score=0.681 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	KAM_ASCII_DIVIDERS=0.8, RCVD_IN_MSPIKE_H3=-0.01,
	RCVD_IN_MSPIKE_WL=-0.01, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 43ML4vDc7rHS for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 13:15:22 +0000 (UTC)
Received: from mail-ig0-f180.google.com (mail-ig0-f180.google.com [209.85.213.180])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id BEBBF42C69
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 13:15:21 +0000 (UTC)
Received: by igui7 with SMTP id i7so10549667igu.0
        for <dev@httpd.apache.org>; Tue, 25 Aug 2015 06:15:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=l8ZYFyxOYUlkYZvYCjFDwnJ3o12wo/drA9qRyxEwo3k=;
        b=Sm70BomfnghixopFJ5hrSz3W1W0g+qA02021+nFrpyFnEbrpwPy92oXNpAoQcFFlkW
         LtUQ/phKhvlkn5NHSMH4LxmHfHr27h27qajo8VpvYO8Hl1eM2X2EFBmRkO+8quA/lRlT
         mqK5HgfIbtQT/+h2McV4NfKAdUOBGu/5M5lK09HVD1cNpIi7IV6BrC0aWCOg5Ltb0PJA
         l0C7JYK2SVxpuu899y11SQx9mWcqDZGiSvelwdSfa38FhQxD1OAXpzcjX7COwCAEd3m5
         dOn6LlCQ7CHXfoDRdErE8XxRksABEwO3eFt6eDIMDS4evKzcRNTau/FhGlveos+2TMLy
         c4dg==
MIME-Version: 1.0
X-Received: by 10.50.50.205 with SMTP id e13mr2207009igo.70.1440508521272;
 Tue, 25 Aug 2015 06:15:21 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Tue, 25 Aug 2015 06:15:21 -0700 (PDT)
In-Reply-To: <6A1F4945-5B3E-4C1D-88E9-4B0A71D59F6C@jaguNET.com>
References: <20150821123403.6E568AC04B1@hades.apache.org>
	<CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com>
	<CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com>
	<6A1F4945-5B3E-4C1D-88E9-4B0A71D59F6C@jaguNET.com>
Date: Tue, 25 Aug 2015 15:15:21 +0200
Message-ID: <CAKQ1sVNZkfYEbktR1t8C6pt+gVxTZGn-SdmD9UWf8upw2kW0vg@mail.gmail.com>
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES
 docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

Well, if one adds a new balancer before restarting, at post_config
time conf->balancers->nelts is +1 wrt the previous load...

On Tue, Aug 25, 2015 at 2:46 PM, Jim Jagielski <jim@jagunet.com> wrote:
> But the number of balancers does not change yet... And when it
> is implemented the overall size of the storage slot should *never*
> change. It must be constant, ala the scoreboard.
>
>> On Aug 25, 2015, at 8:39 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>
>> At every startup, in balancer_post_config:
>>    conf->max_balancers = conf->balancers->nelts + conf->bgrowth;
>>
>> which means that if you add a balancer and restart, storage->create()
>> (eg. slotmem_create) will try to find an existing slot with this ID
>> and the exact ALIGNED_PROXY_BALANCER_SHARED_SIZE * conf->max_balancers
>> size, and fail:
>>    if (apr_shm_size_get(shm) != size) {
>>        apr_shm_detach(shm);
>>        ap_log_error(APLOG_MARK, APLOG_ERR, 0, ap_server_conf, APLOGNO(02599)
>>                     "existing shared memory for %s could not be used
>> (failed size check)",
>>                     fname);
>>        return APR_EINVAL;
>>    }
>>
>> By using storage->attach() first (which is based on the ID only and
>> returns the existing item_size and item_num), we can do the check
>> ourselves and fail only if conf->max_balancers > item_num, allowing
>> for balancers to be added thanks to growth margin used at startup.
>>
>> On Tue, Aug 25, 2015 at 2:12 PM, Jim Jagielski <jim@jagunet.com> wrote:
>>> How and when do ALIGNED_PROXY_BALANCER_SHARED_SIZE and conf->max_balancers
>>> change???
>>>
>>>> On Aug 21, 2015, at 8:34 AM, ylavic@apache.org wrote:
>>>>
>>>> Author: ylavic
>>>> Date: Fri Aug 21 12:34:02 2015
>>>> New Revision: 1696960
>>>>
>>>> URL: http://svn.apache.org/r1696960
>>>> Log:
>>>> mod_proxy_balancer: Fix balancers and balancer members reuse on
>>>> restart when new ones are added.  PR 58024.
>>>>
>>>> Since slotmem_create() issues a strict check on the size of an existing
>>>> slot before reusing it, it won't reuse existing balancers and members when
>>>> new ones are added during restart (whereas growth margins would allow it).
>>>> Fix this by using slotmem_attach() first and if it succeeds do the checks
>>>> based on the returned previous number of existing entries.
>>>>
>>>> Modified:
>>>>   httpd/httpd/trunk/CHANGES
>>>>   httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>   httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>
>>>> Modified: httpd/httpd/trunk/CHANGES
>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=1696960&r1=1696959&r2=1696960&view=diff
>>>> ==============================================================================
>>>> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
>>>> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Aug 21 12:34:02 2015
>>>> @@ -1,6 +1,9 @@
>>>>                                                         -*- coding: utf-8 -*-
>>>> Changes with Apache 2.5.0
>>>>
>>>> +  *) mod_proxy_balancer: Fix balancers and balancer members reuse on
>>>> +     restart when new ones are added.  PR 58024.  [Yann Ylavic]
>>>> +
>>>>  *) mod_socache_memcache: Add the 'MemcacheConnTTL' directive to control how
>>>>     long to keep idle connections with the memcache server(s).
>>>>     Change default value from 600 usec (!) to 15 sec. PR 58091
>>>>
>>>> Modified: httpd/httpd/trunk/docs/log-message-tags/next-number
>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/log-message-tags/next-number?rev=1696960&r1=1696959&r2=1696960&view=diff
>>>> ==============================================================================
>>>> --- httpd/httpd/trunk/docs/log-message-tags/next-number (original)
>>>> +++ httpd/httpd/trunk/docs/log-message-tags/next-number Fri Aug 21 12:34:02 2015
>>>> @@ -1 +1 @@
>>>> -2964
>>>> +2966
>>>>
>>>> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c?rev=1696960&r1=1696959&r2=1696960&view=diff
>>>> ==============================================================================
>>>> --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c (original)
>>>> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Fri Aug 21 12:34:02 2015
>>>> @@ -761,8 +761,11 @@ static int balancer_post_config(apr_pool
>>>>        char *id;
>>>>        proxy_balancer *balancer;
>>>>        ap_slotmem_type_t type;
>>>> +        apr_size_t attached_size;
>>>> +        unsigned int attached_num;
>>>>        void *sconf = s->module_config;
>>>>        conf = (proxy_server_conf *)ap_get_module_config(sconf, &proxy_module);
>>>> +
>>>>        /*
>>>>         * During create_proxy_config() we created a dummy id. Now that
>>>>         * we have identifying info, we can create the real id
>>>> @@ -794,11 +797,39 @@ static int balancer_post_config(apr_pool
>>>>                         (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>                         (int)conf->balancers->nelts, conf->max_balancers);
>>>>
>>>> -            rv = storage->create(&new, conf->id,
>>>> -                                 ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>> -                                 conf->max_balancers, type, pconf);
>>>> +            /* First try to attach() since the number of configured balancers
>>>> +             * may have changed during restart, and we don't want create() to
>>>> +             * fail because the overall size * number of entries is not stricly
>>>> +             * identical to the previous run.  There may still be enough room
>>>> +             * for this new run thanks to bgrowth margin, so if attach()
>>>> +             * succeeds we can only check for the number of available entries
>>>> +             * to be *greater or* equal to what we need now.  If attach() fails
>>>> +             * we simply fall back to create().
>>>> +             */
>>>> +            rv = storage->attach(&new, conf->id,
>>>> +                                 &attached_size, &attached_num,
>>>> +                                 pconf);
>>>> +            if (rv != APR_SUCCESS) {
>>>> +                rv = storage->create(&new, conf->id,
>>>> +                                     ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>> +                                     conf->max_balancers, type, pconf);
>>>> +            }
>>>> +            else {
>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, APLOGNO(02964)
>>>> +                             "Balancers attached: %d, %d (%d)",
>>>> +                             (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>> +                             (int)attached_num, conf->max_balancers);
>>>> +                if (attached_size == ALIGNED_PROXY_BALANCER_SHARED_SIZE
>>>> +                        && attached_num >= conf->balancers->nelts) {
>>>> +                    conf->max_balancers = attached_num;
>>>> +                }
>>>> +                else {
>>>> +                    rv = APR_ENOSPC;
>>>> +                }
>>>> +            }
>>>>            if (rv != APR_SUCCESS) {
>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01179) "balancer slotmem_create failed");
>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01179)
>>>> +                             "balancer slotmem create or attach failed");
>>>>                return !OK;
>>>>            }
>>>>            conf->bslot = new;
>>>> @@ -864,11 +895,32 @@ static int balancer_post_config(apr_pool
>>>>                         (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>                         (int)balancer->max_workers, i);
>>>>
>>>> -            rv = storage->create(&new, balancer->s->sname,
>>>> -                                 ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>> -                                 balancer->max_workers, type, pconf);
>>>> +            /* try to attach first (see rationale from balancers above) */
>>>> +            rv = storage->attach(&new, balancer->s->sname,
>>>> +                                 &attached_size, &attached_num,
>>>> +                                 pconf);
>>>> +            if (rv != APR_SUCCESS) {
>>>> +                rv = storage->create(&new, balancer->s->sname,
>>>> +                                     ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>> +                                     balancer->max_workers, type, pconf);
>>>> +            }
>>>> +            else {
>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, APLOGNO(02965)
>>>> +                             "Workers attached: %s (%s), %d, %d (%d) [%u]",
>>>> +                             balancer->s->name, balancer->s->sname,
>>>> +                             (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>> +                             (int)attached_num, balancer->max_workers, i);
>>>> +                if (attached_size == ALIGNED_PROXY_WORKER_SHARED_SIZE
>>>> +                        && attached_num >= balancer->workers->nelts) {
>>>> +                    balancer->max_workers = attached_num;
>>>> +                }
>>>> +                else {
>>>> +                    rv = APR_ENOSPC;
>>>> +                }
>>>> +            }
>>>>            if (rv != APR_SUCCESS) {
>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01185) "worker slotmem_create failed");
>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01185)
>>>> +                             "worker slotmem create or attach failed");
>>>>                return !OK;
>>>>            }
>>>>            balancer->wslot = new;
>>>>
>>>>
>>>
>

From dev-return-83556-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 13:43:34 2015
Return-Path: <dev-return-83556-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D7DFD18346
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 13:43:34 +0000 (UTC)
Received: (qmail 49675 invoked by uid 500); 25 Aug 2015 13:43:31 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 49598 invoked by uid 500); 25 Aug 2015 13:43:31 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 49588 invoked by uid 99); 25 Aug 2015 13:43:31 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 13:43:31 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id DA16BC009B
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 13:43:30 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id DfV6L7Cs2int for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 13:43:21 +0000 (UTC)
Received: from mail-ig0-f194.google.com (mail-ig0-f194.google.com [209.85.213.194])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id D419342921
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 13:43:20 +0000 (UTC)
Received: by igcse8 with SMTP id se8so1429359igc.2
        for <dev@httpd.apache.org>; Tue, 25 Aug 2015 06:43:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=9ev66nNhJuiAlVu1ElfeUoCWDNG/++i2y4oHDAceDcE=;
        b=eaw6wb5on/6ldMjnO51dw96xfdr2SKTZ2CkhoMhM8JA4zoU6StHQPLjFPE5KDY3GLn
         vT4CZEuxW+ydo8TVO+yqq/lhpO0VUcFwwGjI19lZTmCnVG427m8/izLKK+MKBunhLbI+
         kHNp3WZVBircZKnUGqp+98do2cq1f0YMXXvogmK0c8VMY7o/jyrJ06SBRR68/JQsPXTw
         anf/uYBuvW01NZRIL6IzxVi/79gZESi2DGP9FQfJh3zqJPT+3uQ4nKrqiCZXe22KSUNE
         DpXzY8FrGNfxxm1TjjU3UFtCYIKfPkNSlRKgkw/BTQ/vzejIlkVbmTFF82dZmpdBTYc6
         pY9A==
MIME-Version: 1.0
X-Received: by 10.50.43.134 with SMTP id w6mr1702453igl.74.1440503224546; Tue,
 25 Aug 2015 04:47:04 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Tue, 25 Aug 2015 04:47:04 -0700 (PDT)
In-Reply-To: <AB1691BE05AE7F4992697F2A0835627AC62F2E5F@VOEXM10W.internal.vodafone.com>
References: <55DB2E9A.10307@redhat.com>
	<CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com>
	<CAKQ1sVMFBhih-rq61WZkf+jbZ_dQd6+Y5Ekar--9v10+yuNO=Q@mail.gmail.com>
	<55DC25C7.9000607@redhat.com>
	<AB1691BE05AE7F4992697F2A0835627AC62F2C7D@VOEXM10W.internal.vodafone.com>
	<AB1691BE05AE7F4992697F2A0835627AC62F2E5F@VOEXM10W.internal.vodafone.com>
Date: Tue, 25 Aug 2015 13:47:04 +0200
Message-ID: <CAKQ1sVMepJwk9nL3Avc0JrHcH3Vm54BpAYkO5BeWAko5irHCkA@mail.gmail.com>
Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Tue, Aug 25, 2015 at 10:48 AM, Pl=C3=BCm, R=C3=BCdiger, Vodafone Group
<ruediger.pluem@vodafone.com> wrote:
> I think the current state of 2.2.31 breaks existing 2.2.x configuration p=
rior to 2.2.31.
> Prior to 2.2.31 you could do the following:
>
> <Proxy Balancer://proxy1>
> BalancerMember ajp://127.0.0.1:7001
> BalancerMember ajp://127.0.0.2:7002
> </Proxy>
>
> <virtualhost *:80>
> ProxyPass / balancer://proxy1/
> </virtualhost>
>
> <virtualhost 127.0.0.1:8080>
>
> <Location /bmanager>
>    sethandler balancer-manager
> </Location>
>
> </virtualhost>
>
> With this configuration you could provide your reverse proxy to the outsi=
de world while having the
> balancermanager managing the balancer only listening to localhost. This i=
s not possible any longer with 2.2.31
> as the worker->s is now different in each virtualhost whereas before it w=
as the same as the worker->id was used
> to identify the scoreboard slot.

You are right, the old behaviour was to share the score of the main
server for all the vhosts that use it.

I thought that since the worker's parameters are per vhost, each
vhost's worker had its own score so that e.g. an error on one of them
would not affect the error state of the others.
I can (and indeed always unconsciously did) live with the fact that
the scored parameters are ignored in the vhost if they are also
defined in the main server (i.e. it is useless to define the same
<Proxy> with different parameters both in the main server and a vhost
:)

> The patches proposed so far would not change this.

Yes, it implements a score per vhost...

On Tue, Aug 25, 2015 at 11:39 AM, Pl=C3=BCm, R=C3=BCdiger, Vodafone Group
<ruediger.pluem@vodafone.com> wrote:
> How about the following patch? It uses the server_rec of the server that =
originally created the configuration item.

LGTM, thanks R=C3=BCdiger for helping on this.

From dev-return-83557-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 13:43:38 2015
Return-Path: <dev-return-83557-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B7FC818347
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 13:43:38 +0000 (UTC)
Received: (qmail 50756 invoked by uid 500); 25 Aug 2015 13:43:38 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 50689 invoked by uid 500); 25 Aug 2015 13:43:38 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 50673 invoked by uid 99); 25 Aug 2015 13:43:38 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 13:43:38 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id AE42D182348
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 13:43:37 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.453
X-Spam-Level: *
X-Spam-Status: No, score=1.453 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, KAM_ASCII_DIVIDERS=0.8,
	SPF_NEUTRAL=0.652, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 56TGPWKmVU10 for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 13:43:29 +0000 (UTC)
Received: from resqmta-ch2-02v.sys.comcast.net (resqmta-ch2-02v.sys.comcast.net [69.252.207.34])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id D2EE1506F4
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 13:43:28 +0000 (UTC)
Received: from resomta-ch2-02v.sys.comcast.net ([69.252.207.98])
	by resqmta-ch2-02v.sys.comcast.net with comcast
	id 91iw1r00227uzMh011jNrd; Tue, 25 Aug 2015 13:43:22 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-02v.sys.comcast.net with comcast
	id 91jM1r00W2U0RYt011jNKi; Tue, 25 Aug 2015 13:43:22 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CAKQ1sVNZkfYEbktR1t8C6pt+gVxTZGn-SdmD9UWf8upw2kW0vg@mail.gmail.com>
Date: Tue, 25 Aug 2015 09:43:21 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <EEA9C20F-2F7F-41BD-8465-5E42D13999F5@jaguNET.com>
References: <20150821123403.6E568AC04B1@hades.apache.org> <CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com> <CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com> <6A1F4945-5B3E-4C1D-88E9-4B0A71D59F6C@jaguNET.com> <CAKQ1sVNZkfYEbktR1t8C6pt+gVxTZGn-SdmD9UWf8upw2kW0vg@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440510202;
	bh=arPuTicdURzX0PzzBhJK0d14wpwJXK9eg5QP7D2sRPY=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=GyXq8dMv973Xxeo5zbVVL2E/S4MNZwKQyHVZgup0q+4Bijgv11B/K/ju25OmAbJPQ
	 ArwXUyCSY7QGUYnpD3NCp6GaAv+/ox6cVVHLdAjN0ExtctYTfk1NhPPgHmWiqYZOKu
	 WWi7qPKoRTEw0824yAvV8JzPWf3/11I7gj85D89oFW2lqmx/pqvfbbjUmWwTvF6kZq
	 x400qQC5ubnHfWrwUDiG8hcTUKGeGNDFyJf3arnMi/OIx9YIZN84fG9oKqrYUNvS0L
	 KpKJ2Gxp/b7+V7FgkWRA8nyfgWx/urtAIAYNJTheh7MBtktMxM+iYAV1BkuaToEnPu
	 jolUJViymRbcw==

You mean via changing the config file? If so, then all bets
are off. You change the config file and restart then Apache
should start off w/ a clean slate. Even so, you need to handle
freeing the old shared mem segment and creating a brand new one
with the "correct" size... Trying to "use" the old one is
just fraught with issues.


> On Aug 25, 2015, at 9:15 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>=20
> Well, if one adds a new balancer before restarting, at post_config
> time conf->balancers->nelts is +1 wrt the previous load...
>=20
> On Tue, Aug 25, 2015 at 2:46 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>> But the number of balancers does not change yet... And when it
>> is implemented the overall size of the storage slot should *never*
>> change. It must be constant, ala the scoreboard.
>>=20
>>> On Aug 25, 2015, at 8:39 AM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>>>=20
>>> At every startup, in balancer_post_config:
>>>   conf->max_balancers =3D conf->balancers->nelts + conf->bgrowth;
>>>=20
>>> which means that if you add a balancer and restart, =
storage->create()
>>> (eg. slotmem_create) will try to find an existing slot with this ID
>>> and the exact ALIGNED_PROXY_BALANCER_SHARED_SIZE * =
conf->max_balancers
>>> size, and fail:
>>>   if (apr_shm_size_get(shm) !=3D size) {
>>>       apr_shm_detach(shm);
>>>       ap_log_error(APLOG_MARK, APLOG_ERR, 0, ap_server_conf, =
APLOGNO(02599)
>>>                    "existing shared memory for %s could not be used
>>> (failed size check)",
>>>                    fname);
>>>       return APR_EINVAL;
>>>   }
>>>=20
>>> By using storage->attach() first (which is based on the ID only and
>>> returns the existing item_size and item_num), we can do the check
>>> ourselves and fail only if conf->max_balancers > item_num, allowing
>>> for balancers to be added thanks to growth margin used at startup.
>>>=20
>>> On Tue, Aug 25, 2015 at 2:12 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>>>> How and when do ALIGNED_PROXY_BALANCER_SHARED_SIZE and =
conf->max_balancers
>>>> change???
>>>>=20
>>>>> On Aug 21, 2015, at 8:34 AM, ylavic@apache.org wrote:
>>>>>=20
>>>>> Author: ylavic
>>>>> Date: Fri Aug 21 12:34:02 2015
>>>>> New Revision: 1696960
>>>>>=20
>>>>> URL: http://svn.apache.org/r1696960
>>>>> Log:
>>>>> mod_proxy_balancer: Fix balancers and balancer members reuse on
>>>>> restart when new ones are added.  PR 58024.
>>>>>=20
>>>>> Since slotmem_create() issues a strict check on the size of an =
existing
>>>>> slot before reusing it, it won't reuse existing balancers and =
members when
>>>>> new ones are added during restart (whereas growth margins would =
allow it).
>>>>> Fix this by using slotmem_attach() first and if it succeeds do the =
checks
>>>>> based on the returned previous number of existing entries.
>>>>>=20
>>>>> Modified:
>>>>>  httpd/httpd/trunk/CHANGES
>>>>>  httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>>  httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>>=20
>>>>> Modified: httpd/httpd/trunk/CHANGES
>>>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=3D1696960&r1=3D=
1696959&r2=3D1696960&view=3Ddiff
>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>>>> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
>>>>> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Aug 21 12:34:02 2015
>>>>> @@ -1,6 +1,9 @@
>>>>>                                                        -*- coding: =
utf-8 -*-
>>>>> Changes with Apache 2.5.0
>>>>>=20
>>>>> +  *) mod_proxy_balancer: Fix balancers and balancer members reuse =
on
>>>>> +     restart when new ones are added.  PR 58024.  [Yann Ylavic]
>>>>> +
>>>>> *) mod_socache_memcache: Add the 'MemcacheConnTTL' directive to =
control how
>>>>>    long to keep idle connections with the memcache server(s).
>>>>>    Change default value from 600 usec (!) to 15 sec. PR 58091
>>>>>=20
>>>>> Modified: httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/log-message-tags/next-=
number?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>>>> --- httpd/httpd/trunk/docs/log-message-tags/next-number (original)
>>>>> +++ httpd/httpd/trunk/docs/log-message-tags/next-number Fri Aug 21 =
12:34:02 2015
>>>>> @@ -1 +1 @@
>>>>> -2964
>>>>> +2966
>>>>>=20
>>>>> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_bal=
ancer.c?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>>>> --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c =
(original)
>>>>> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Fri Aug =
21 12:34:02 2015
>>>>> @@ -761,8 +761,11 @@ static int balancer_post_config(apr_pool
>>>>>       char *id;
>>>>>       proxy_balancer *balancer;
>>>>>       ap_slotmem_type_t type;
>>>>> +        apr_size_t attached_size;
>>>>> +        unsigned int attached_num;
>>>>>       void *sconf =3D s->module_config;
>>>>>       conf =3D (proxy_server_conf *)ap_get_module_config(sconf, =
&proxy_module);
>>>>> +
>>>>>       /*
>>>>>        * During create_proxy_config() we created a dummy id. Now =
that
>>>>>        * we have identifying info, we can create the real id
>>>>> @@ -794,11 +797,39 @@ static int balancer_post_config(apr_pool
>>>>>                        (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>                        (int)conf->balancers->nelts, =
conf->max_balancers);
>>>>>=20
>>>>> -            rv =3D storage->create(&new, conf->id,
>>>>> -                                 =
ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>> -                                 conf->max_balancers, type, =
pconf);
>>>>> +            /* First try to attach() since the number of =
configured balancers
>>>>> +             * may have changed during restart, and we don't want =
create() to
>>>>> +             * fail because the overall size * number of entries =
is not stricly
>>>>> +             * identical to the previous run.  There may still be =
enough room
>>>>> +             * for this new run thanks to bgrowth margin, so if =
attach()
>>>>> +             * succeeds we can only check for the number of =
available entries
>>>>> +             * to be *greater or* equal to what we need now.  If =
attach() fails
>>>>> +             * we simply fall back to create().
>>>>> +             */
>>>>> +            rv =3D storage->attach(&new, conf->id,
>>>>> +                                 &attached_size, &attached_num,
>>>>> +                                 pconf);
>>>>> +            if (rv !=3D APR_SUCCESS) {
>>>>> +                rv =3D storage->create(&new, conf->id,
>>>>> +                                     =
ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>> +                                     conf->max_balancers, type, =
pconf);
>>>>> +            }
>>>>> +            else {
>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, =
APLOGNO(02964)
>>>>> +                             "Balancers attached: %d, %d (%d)",
>>>>> +                             =
(int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>> +                             (int)attached_num, =
conf->max_balancers);
>>>>> +                if (attached_size =3D=3D =
ALIGNED_PROXY_BALANCER_SHARED_SIZE
>>>>> +                        && attached_num >=3D =
conf->balancers->nelts) {
>>>>> +                    conf->max_balancers =3D attached_num;
>>>>> +                }
>>>>> +                else {
>>>>> +                    rv =3D APR_ENOSPC;
>>>>> +                }
>>>>> +            }
>>>>>           if (rv !=3D APR_SUCCESS) {
>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01179) "balancer slotmem_create failed");
>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01179)
>>>>> +                             "balancer slotmem create or attach =
failed");
>>>>>               return !OK;
>>>>>           }
>>>>>           conf->bslot =3D new;
>>>>> @@ -864,11 +895,32 @@ static int balancer_post_config(apr_pool
>>>>>                        (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>                        (int)balancer->max_workers, i);
>>>>>=20
>>>>> -            rv =3D storage->create(&new, balancer->s->sname,
>>>>> -                                 =
ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>> -                                 balancer->max_workers, type, =
pconf);
>>>>> +            /* try to attach first (see rationale from balancers =
above) */
>>>>> +            rv =3D storage->attach(&new, balancer->s->sname,
>>>>> +                                 &attached_size, &attached_num,
>>>>> +                                 pconf);
>>>>> +            if (rv !=3D APR_SUCCESS) {
>>>>> +                rv =3D storage->create(&new, balancer->s->sname,
>>>>> +                                     =
ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>> +                                     balancer->max_workers, type, =
pconf);
>>>>> +            }
>>>>> +            else {
>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, =
APLOGNO(02965)
>>>>> +                             "Workers attached: %s (%s), %d, %d =
(%d) [%u]",
>>>>> +                             balancer->s->name, =
balancer->s->sname,
>>>>> +                             =
(int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>> +                             (int)attached_num, =
balancer->max_workers, i);
>>>>> +                if (attached_size =3D=3D =
ALIGNED_PROXY_WORKER_SHARED_SIZE
>>>>> +                        && attached_num >=3D =
balancer->workers->nelts) {
>>>>> +                    balancer->max_workers =3D attached_num;
>>>>> +                }
>>>>> +                else {
>>>>> +                    rv =3D APR_ENOSPC;
>>>>> +                }
>>>>> +            }
>>>>>           if (rv !=3D APR_SUCCESS) {
>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01185) "worker slotmem_create failed");
>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01185)
>>>>> +                             "worker slotmem create or attach =
failed");
>>>>>               return !OK;
>>>>>           }
>>>>>           balancer->wslot =3D new;
>>>>>=20
>>>>>=20
>>>>=20
>>=20


From dev-return-83558-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 13:48:28 2015
Return-Path: <dev-return-83558-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BF5CD18380
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 13:48:28 +0000 (UTC)
Received: (qmail 65111 invoked by uid 500); 25 Aug 2015 13:48:23 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 65035 invoked by uid 500); 25 Aug 2015 13:48:23 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 65025 invoked by uid 99); 25 Aug 2015 13:48:23 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 13:48:23 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id B32C5C082C
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 13:48:22 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.7
X-Spam-Level:
X-Spam-Status: No, score=0.7 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	KAM_ASCII_DIVIDERS=0.8, RCVD_IN_MSPIKE_H2=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 8haqn34usg_i for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 13:48:14 +0000 (UTC)
Received: from mail-io0-f173.google.com (mail-io0-f173.google.com [209.85.223.173])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 23B90261AB
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 13:48:14 +0000 (UTC)
Received: by iods203 with SMTP id s203so186796327iod.0
        for <dev@httpd.apache.org>; Tue, 25 Aug 2015 06:48:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=sc1gjoasSb55ulbpuC9E4+notZUdNJWaT2NGaxB0s0o=;
        b=Dsyo9nL6A3KyDqaRoOeAF1Rx3mmhPuhp8babrG+5LkDfYNdS9I6k5WozWi5VZWfify
         gaUkiVvSYTdb+ByAgY3G5JlFnRPxhyjVbuLQkO/emo9P3XNQ35FLEn4g+E8P51AEX+Gy
         riEvnfwV6Lg00XLlR+LWQhMP1bkk3P4h7+HVE9cdv0jrQqZsPgPlDhJMNGNJO4xJuO3Q
         Kmw3G005CuhYVpdnoWqCq1yhrt6lOiL6KG/NLRbaxJeVwMFFhm8HshxoQf8NJlu7SEzb
         ILDUHsI0LIawwn9Z9/6mOPfvStygAQvn+uRepAqBF+Z1E2vCeqxysVj2oqu5tIpNdXGq
         mfdw==
MIME-Version: 1.0
X-Received: by 10.107.150.145 with SMTP id y139mr22542343iod.128.1440510493502;
 Tue, 25 Aug 2015 06:48:13 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Tue, 25 Aug 2015 06:48:13 -0700 (PDT)
In-Reply-To: <EEA9C20F-2F7F-41BD-8465-5E42D13999F5@jaguNET.com>
References: <20150821123403.6E568AC04B1@hades.apache.org>
	<CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com>
	<CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com>
	<6A1F4945-5B3E-4C1D-88E9-4B0A71D59F6C@jaguNET.com>
	<CAKQ1sVNZkfYEbktR1t8C6pt+gVxTZGn-SdmD9UWf8upw2kW0vg@mail.gmail.com>
	<EEA9C20F-2F7F-41BD-8465-5E42D13999F5@jaguNET.com>
Date: Tue, 25 Aug 2015 15:48:13 +0200
Message-ID: <CAKQ1sVPTDVw30xZM=Utr0Oc+-A23DfaDLCQ4eD0VXJqg5eOB6Q@mail.gmail.com>
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES
 docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

Hm, what's the point of the balancers and balancer->workers growth margin then?
The first time the configration is loaded we create enough room for
adding new balancers/workers, and on (graceful) restart we wouldn't
use this space?
That's also how the balancer-manager works when adding a new worker to
a balancer, AFAICT.


On Tue, Aug 25, 2015 at 3:43 PM, Jim Jagielski <jim@jagunet.com> wrote:
> You mean via changing the config file? If so, then all bets
> are off. You change the config file and restart then Apache
> should start off w/ a clean slate. Even so, you need to handle
> freeing the old shared mem segment and creating a brand new one
> with the "correct" size... Trying to "use" the old one is
> just fraught with issues.
>
>
>> On Aug 25, 2015, at 9:15 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>
>> Well, if one adds a new balancer before restarting, at post_config
>> time conf->balancers->nelts is +1 wrt the previous load...
>>
>> On Tue, Aug 25, 2015 at 2:46 PM, Jim Jagielski <jim@jagunet.com> wrote:
>>> But the number of balancers does not change yet... And when it
>>> is implemented the overall size of the storage slot should *never*
>>> change. It must be constant, ala the scoreboard.
>>>
>>>> On Aug 25, 2015, at 8:39 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>>>
>>>> At every startup, in balancer_post_config:
>>>>   conf->max_balancers = conf->balancers->nelts + conf->bgrowth;
>>>>
>>>> which means that if you add a balancer and restart, storage->create()
>>>> (eg. slotmem_create) will try to find an existing slot with this ID
>>>> and the exact ALIGNED_PROXY_BALANCER_SHARED_SIZE * conf->max_balancers
>>>> size, and fail:
>>>>   if (apr_shm_size_get(shm) != size) {
>>>>       apr_shm_detach(shm);
>>>>       ap_log_error(APLOG_MARK, APLOG_ERR, 0, ap_server_conf, APLOGNO(02599)
>>>>                    "existing shared memory for %s could not be used
>>>> (failed size check)",
>>>>                    fname);
>>>>       return APR_EINVAL;
>>>>   }
>>>>
>>>> By using storage->attach() first (which is based on the ID only and
>>>> returns the existing item_size and item_num), we can do the check
>>>> ourselves and fail only if conf->max_balancers > item_num, allowing
>>>> for balancers to be added thanks to growth margin used at startup.
>>>>
>>>> On Tue, Aug 25, 2015 at 2:12 PM, Jim Jagielski <jim@jagunet.com> wrote:
>>>>> How and when do ALIGNED_PROXY_BALANCER_SHARED_SIZE and conf->max_balancers
>>>>> change???
>>>>>
>>>>>> On Aug 21, 2015, at 8:34 AM, ylavic@apache.org wrote:
>>>>>>
>>>>>> Author: ylavic
>>>>>> Date: Fri Aug 21 12:34:02 2015
>>>>>> New Revision: 1696960
>>>>>>
>>>>>> URL: http://svn.apache.org/r1696960
>>>>>> Log:
>>>>>> mod_proxy_balancer: Fix balancers and balancer members reuse on
>>>>>> restart when new ones are added.  PR 58024.
>>>>>>
>>>>>> Since slotmem_create() issues a strict check on the size of an existing
>>>>>> slot before reusing it, it won't reuse existing balancers and members when
>>>>>> new ones are added during restart (whereas growth margins would allow it).
>>>>>> Fix this by using slotmem_attach() first and if it succeeds do the checks
>>>>>> based on the returned previous number of existing entries.
>>>>>>
>>>>>> Modified:
>>>>>>  httpd/httpd/trunk/CHANGES
>>>>>>  httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>>>  httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>>>
>>>>>> Modified: httpd/httpd/trunk/CHANGES
>>>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=1696960&r1=1696959&r2=1696960&view=diff
>>>>>> ==============================================================================
>>>>>> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
>>>>>> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Aug 21 12:34:02 2015
>>>>>> @@ -1,6 +1,9 @@
>>>>>>                                                        -*- coding: utf-8 -*-
>>>>>> Changes with Apache 2.5.0
>>>>>>
>>>>>> +  *) mod_proxy_balancer: Fix balancers and balancer members reuse on
>>>>>> +     restart when new ones are added.  PR 58024.  [Yann Ylavic]
>>>>>> +
>>>>>> *) mod_socache_memcache: Add the 'MemcacheConnTTL' directive to control how
>>>>>>    long to keep idle connections with the memcache server(s).
>>>>>>    Change default value from 600 usec (!) to 15 sec. PR 58091
>>>>>>
>>>>>> Modified: httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/log-message-tags/next-number?rev=1696960&r1=1696959&r2=1696960&view=diff
>>>>>> ==============================================================================
>>>>>> --- httpd/httpd/trunk/docs/log-message-tags/next-number (original)
>>>>>> +++ httpd/httpd/trunk/docs/log-message-tags/next-number Fri Aug 21 12:34:02 2015
>>>>>> @@ -1 +1 @@
>>>>>> -2964
>>>>>> +2966
>>>>>>
>>>>>> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c?rev=1696960&r1=1696959&r2=1696960&view=diff
>>>>>> ==============================================================================
>>>>>> --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c (original)
>>>>>> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Fri Aug 21 12:34:02 2015
>>>>>> @@ -761,8 +761,11 @@ static int balancer_post_config(apr_pool
>>>>>>       char *id;
>>>>>>       proxy_balancer *balancer;
>>>>>>       ap_slotmem_type_t type;
>>>>>> +        apr_size_t attached_size;
>>>>>> +        unsigned int attached_num;
>>>>>>       void *sconf = s->module_config;
>>>>>>       conf = (proxy_server_conf *)ap_get_module_config(sconf, &proxy_module);
>>>>>> +
>>>>>>       /*
>>>>>>        * During create_proxy_config() we created a dummy id. Now that
>>>>>>        * we have identifying info, we can create the real id
>>>>>> @@ -794,11 +797,39 @@ static int balancer_post_config(apr_pool
>>>>>>                        (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>                        (int)conf->balancers->nelts, conf->max_balancers);
>>>>>>
>>>>>> -            rv = storage->create(&new, conf->id,
>>>>>> -                                 ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>> -                                 conf->max_balancers, type, pconf);
>>>>>> +            /* First try to attach() since the number of configured balancers
>>>>>> +             * may have changed during restart, and we don't want create() to
>>>>>> +             * fail because the overall size * number of entries is not stricly
>>>>>> +             * identical to the previous run.  There may still be enough room
>>>>>> +             * for this new run thanks to bgrowth margin, so if attach()
>>>>>> +             * succeeds we can only check for the number of available entries
>>>>>> +             * to be *greater or* equal to what we need now.  If attach() fails
>>>>>> +             * we simply fall back to create().
>>>>>> +             */
>>>>>> +            rv = storage->attach(&new, conf->id,
>>>>>> +                                 &attached_size, &attached_num,
>>>>>> +                                 pconf);
>>>>>> +            if (rv != APR_SUCCESS) {
>>>>>> +                rv = storage->create(&new, conf->id,
>>>>>> +                                     ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>> +                                     conf->max_balancers, type, pconf);
>>>>>> +            }
>>>>>> +            else {
>>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, APLOGNO(02964)
>>>>>> +                             "Balancers attached: %d, %d (%d)",
>>>>>> +                             (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>> +                             (int)attached_num, conf->max_balancers);
>>>>>> +                if (attached_size == ALIGNED_PROXY_BALANCER_SHARED_SIZE
>>>>>> +                        && attached_num >= conf->balancers->nelts) {
>>>>>> +                    conf->max_balancers = attached_num;
>>>>>> +                }
>>>>>> +                else {
>>>>>> +                    rv = APR_ENOSPC;
>>>>>> +                }
>>>>>> +            }
>>>>>>           if (rv != APR_SUCCESS) {
>>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01179) "balancer slotmem_create failed");
>>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01179)
>>>>>> +                             "balancer slotmem create or attach failed");
>>>>>>               return !OK;
>>>>>>           }
>>>>>>           conf->bslot = new;
>>>>>> @@ -864,11 +895,32 @@ static int balancer_post_config(apr_pool
>>>>>>                        (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>                        (int)balancer->max_workers, i);
>>>>>>
>>>>>> -            rv = storage->create(&new, balancer->s->sname,
>>>>>> -                                 ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>> -                                 balancer->max_workers, type, pconf);
>>>>>> +            /* try to attach first (see rationale from balancers above) */
>>>>>> +            rv = storage->attach(&new, balancer->s->sname,
>>>>>> +                                 &attached_size, &attached_num,
>>>>>> +                                 pconf);
>>>>>> +            if (rv != APR_SUCCESS) {
>>>>>> +                rv = storage->create(&new, balancer->s->sname,
>>>>>> +                                     ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>> +                                     balancer->max_workers, type, pconf);
>>>>>> +            }
>>>>>> +            else {
>>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, APLOGNO(02965)
>>>>>> +                             "Workers attached: %s (%s), %d, %d (%d) [%u]",
>>>>>> +                             balancer->s->name, balancer->s->sname,
>>>>>> +                             (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>> +                             (int)attached_num, balancer->max_workers, i);
>>>>>> +                if (attached_size == ALIGNED_PROXY_WORKER_SHARED_SIZE
>>>>>> +                        && attached_num >= balancer->workers->nelts) {
>>>>>> +                    balancer->max_workers = attached_num;
>>>>>> +                }
>>>>>> +                else {
>>>>>> +                    rv = APR_ENOSPC;
>>>>>> +                }
>>>>>> +            }
>>>>>>           if (rv != APR_SUCCESS) {
>>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01185) "worker slotmem_create failed");
>>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01185)
>>>>>> +                             "worker slotmem create or attach failed");
>>>>>>               return !OK;
>>>>>>           }
>>>>>>           balancer->wslot = new;
>>>>>>
>>>>>>
>>>>>
>>>
>

From dev-return-83559-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 13:59:21 2015
Return-Path: <dev-return-83559-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6FDC8183DF
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 13:59:21 +0000 (UTC)
Received: (qmail 90348 invoked by uid 500); 25 Aug 2015 13:59:20 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 90277 invoked by uid 500); 25 Aug 2015 13:59:20 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 90267 invoked by uid 99); 25 Aug 2015 13:59:20 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 13:59:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 503991AAD47
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 13:59:20 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.453
X-Spam-Level: *
X-Spam-Status: No, score=1.453 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, KAM_ASCII_DIVIDERS=0.8,
	SPF_NEUTRAL=0.652, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id rMnCeF10S0ji for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 13:59:12 +0000 (UTC)
Received: from resqmta-ch2-10v.sys.comcast.net (resqmta-ch2-10v.sys.comcast.net [69.252.207.42])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id D95E5506FA
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 13:59:11 +0000 (UTC)
Received: from resomta-ch2-16v.sys.comcast.net ([69.252.207.112])
	by resqmta-ch2-10v.sys.comcast.net with comcast
	id 91yb1r0022S2Q5R011zAQ2; Tue, 25 Aug 2015 13:59:10 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-16v.sys.comcast.net with comcast
	id 91z91r00M2U0RYt011z9z6; Tue, 25 Aug 2015 13:59:10 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CAKQ1sVPTDVw30xZM=Utr0Oc+-A23DfaDLCQ4eD0VXJqg5eOB6Q@mail.gmail.com>
Date: Tue, 25 Aug 2015 09:59:09 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <C029DF93-9430-4A63-98A8-BFFA002186F4@jaguNET.com>
References: <20150821123403.6E568AC04B1@hades.apache.org> <CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com> <CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com> <6A1F4945-5B3E-4C1D-88E9-4B0A71D59F6C@jaguNET.com> <CAKQ1sVNZkfYEbktR1t8C6pt+gVxTZGn-SdmD9UWf8upw2kW0vg@mail.gmail.com> <EEA9C20F-2F7F-41BD-8465-5E42D13999F5@jaguNET.com> <CAKQ1sVPTDVw30xZM=Utr0Oc+-A23DfaDLCQ4eD0VXJqg5eOB6Q@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440511150;
	bh=cpePnyMynp0FnT44t4tXE60h4LzaZWORYWNQPBhqjCo=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=sYrOCs+LczWiZ4hjsTwwiylyPfMZml7Ds70iJ2Z+sUbux5oCYtTzOQW6E1cYO8sQx
	 IZ7Pkw/u1dGKhDbYJRF9eWS9bvjM2h6gOZDT2R30KdvLRnYTbVTVByNVBN4QNHT9NF
	 ZWpGRfoIlBO2XY1Nax/KiytdebNY8H13ptEN4038buEg4EaEnVMrzx6QyPBS9h5lDk
	 nBIKVpFfvEWPfwZzOb44uJ1lSiUtaqyRWtoSEQpDl3ljJ6Y26XxpDC6s3jRew8v3yL
	 M8r+/09yT28N8J11x4rOlchNC2O2S43+ecrADa8ekHmh0EsSgVu338foiyvRCRx3X9
	 t4DaeoDKYo0jA==

When 1st configured, Apache sees how many balancers there are
set in the config file. It then pads that amount by growth to
allow for the to-be-added dynamic addition of new balancers via
the balancer manager (ala adding members).

The assumption is that if the actual config file is changed,
then the runtime configuration of balancers and members
is no longer valid; after all, if someone is changing the
config file, they could have done the same to add/change
bal/mem settings. So a config file change means something
more "serious" at which point the dynamic config should be
considered void and Apache starts with a clean (dynamic) slate
and just uses what's in the config only.

> On Aug 25, 2015, at 9:48 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>=20
> Hm, what's the point of the balancers and balancer->workers growth =
margin then?
> The first time the configration is loaded we create enough room for
> adding new balancers/workers, and on (graceful) restart we wouldn't
> use this space?
> That's also how the balancer-manager works when adding a new worker to
> a balancer, AFAICT.
>=20
>=20
> On Tue, Aug 25, 2015 at 3:43 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>> You mean via changing the config file? If so, then all bets
>> are off. You change the config file and restart then Apache
>> should start off w/ a clean slate. Even so, you need to handle
>> freeing the old shared mem segment and creating a brand new one
>> with the "correct" size... Trying to "use" the old one is
>> just fraught with issues.
>>=20
>>=20
>>> On Aug 25, 2015, at 9:15 AM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>>>=20
>>> Well, if one adds a new balancer before restarting, at post_config
>>> time conf->balancers->nelts is +1 wrt the previous load...
>>>=20
>>> On Tue, Aug 25, 2015 at 2:46 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>>>> But the number of balancers does not change yet... And when it
>>>> is implemented the overall size of the storage slot should *never*
>>>> change. It must be constant, ala the scoreboard.
>>>>=20
>>>>> On Aug 25, 2015, at 8:39 AM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>>>>>=20
>>>>> At every startup, in balancer_post_config:
>>>>>  conf->max_balancers =3D conf->balancers->nelts + conf->bgrowth;
>>>>>=20
>>>>> which means that if you add a balancer and restart, =
storage->create()
>>>>> (eg. slotmem_create) will try to find an existing slot with this =
ID
>>>>> and the exact ALIGNED_PROXY_BALANCER_SHARED_SIZE * =
conf->max_balancers
>>>>> size, and fail:
>>>>>  if (apr_shm_size_get(shm) !=3D size) {
>>>>>      apr_shm_detach(shm);
>>>>>      ap_log_error(APLOG_MARK, APLOG_ERR, 0, ap_server_conf, =
APLOGNO(02599)
>>>>>                   "existing shared memory for %s could not be used
>>>>> (failed size check)",
>>>>>                   fname);
>>>>>      return APR_EINVAL;
>>>>>  }
>>>>>=20
>>>>> By using storage->attach() first (which is based on the ID only =
and
>>>>> returns the existing item_size and item_num), we can do the check
>>>>> ourselves and fail only if conf->max_balancers > item_num, =
allowing
>>>>> for balancers to be added thanks to growth margin used at startup.
>>>>>=20
>>>>> On Tue, Aug 25, 2015 at 2:12 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>>>>>> How and when do ALIGNED_PROXY_BALANCER_SHARED_SIZE and =
conf->max_balancers
>>>>>> change???
>>>>>>=20
>>>>>>> On Aug 21, 2015, at 8:34 AM, ylavic@apache.org wrote:
>>>>>>>=20
>>>>>>> Author: ylavic
>>>>>>> Date: Fri Aug 21 12:34:02 2015
>>>>>>> New Revision: 1696960
>>>>>>>=20
>>>>>>> URL: http://svn.apache.org/r1696960
>>>>>>> Log:
>>>>>>> mod_proxy_balancer: Fix balancers and balancer members reuse on
>>>>>>> restart when new ones are added.  PR 58024.
>>>>>>>=20
>>>>>>> Since slotmem_create() issues a strict check on the size of an =
existing
>>>>>>> slot before reusing it, it won't reuse existing balancers and =
members when
>>>>>>> new ones are added during restart (whereas growth margins would =
allow it).
>>>>>>> Fix this by using slotmem_attach() first and if it succeeds do =
the checks
>>>>>>> based on the returned previous number of existing entries.
>>>>>>>=20
>>>>>>> Modified:
>>>>>>> httpd/httpd/trunk/CHANGES
>>>>>>> httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>>>> httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>>>>=20
>>>>>>> Modified: httpd/httpd/trunk/CHANGES
>>>>>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=3D1696960&r1=3D=
1696959&r2=3D1696960&view=3Ddiff
>>>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>>>>>> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
>>>>>>> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Aug 21 12:34:02 2015
>>>>>>> @@ -1,6 +1,9 @@
>>>>>>>                                                       -*- =
coding: utf-8 -*-
>>>>>>> Changes with Apache 2.5.0
>>>>>>>=20
>>>>>>> +  *) mod_proxy_balancer: Fix balancers and balancer members =
reuse on
>>>>>>> +     restart when new ones are added.  PR 58024.  [Yann Ylavic]
>>>>>>> +
>>>>>>> *) mod_socache_memcache: Add the 'MemcacheConnTTL' directive to =
control how
>>>>>>>   long to keep idle connections with the memcache server(s).
>>>>>>>   Change default value from 600 usec (!) to 15 sec. PR 58091
>>>>>>>=20
>>>>>>> Modified: httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/log-message-tags/next-=
number?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
>>>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>>>>>> --- httpd/httpd/trunk/docs/log-message-tags/next-number =
(original)
>>>>>>> +++ httpd/httpd/trunk/docs/log-message-tags/next-number Fri Aug =
21 12:34:02 2015
>>>>>>> @@ -1 +1 @@
>>>>>>> -2964
>>>>>>> +2966
>>>>>>>=20
>>>>>>> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_bal=
ancer.c?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
>>>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>>>>>> --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c =
(original)
>>>>>>> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Fri Aug =
21 12:34:02 2015
>>>>>>> @@ -761,8 +761,11 @@ static int balancer_post_config(apr_pool
>>>>>>>      char *id;
>>>>>>>      proxy_balancer *balancer;
>>>>>>>      ap_slotmem_type_t type;
>>>>>>> +        apr_size_t attached_size;
>>>>>>> +        unsigned int attached_num;
>>>>>>>      void *sconf =3D s->module_config;
>>>>>>>      conf =3D (proxy_server_conf *)ap_get_module_config(sconf, =
&proxy_module);
>>>>>>> +
>>>>>>>      /*
>>>>>>>       * During create_proxy_config() we created a dummy id. Now =
that
>>>>>>>       * we have identifying info, we can create the real id
>>>>>>> @@ -794,11 +797,39 @@ static int balancer_post_config(apr_pool
>>>>>>>                       (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>                       (int)conf->balancers->nelts, =
conf->max_balancers);
>>>>>>>=20
>>>>>>> -            rv =3D storage->create(&new, conf->id,
>>>>>>> -                                 =
ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>> -                                 conf->max_balancers, type, =
pconf);
>>>>>>> +            /* First try to attach() since the number of =
configured balancers
>>>>>>> +             * may have changed during restart, and we don't =
want create() to
>>>>>>> +             * fail because the overall size * number of =
entries is not stricly
>>>>>>> +             * identical to the previous run.  There may still =
be enough room
>>>>>>> +             * for this new run thanks to bgrowth margin, so if =
attach()
>>>>>>> +             * succeeds we can only check for the number of =
available entries
>>>>>>> +             * to be *greater or* equal to what we need now.  =
If attach() fails
>>>>>>> +             * we simply fall back to create().
>>>>>>> +             */
>>>>>>> +            rv =3D storage->attach(&new, conf->id,
>>>>>>> +                                 &attached_size, &attached_num,
>>>>>>> +                                 pconf);
>>>>>>> +            if (rv !=3D APR_SUCCESS) {
>>>>>>> +                rv =3D storage->create(&new, conf->id,
>>>>>>> +                                     =
ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>> +                                     conf->max_balancers, type, =
pconf);
>>>>>>> +            }
>>>>>>> +            else {
>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, =
APLOGNO(02964)
>>>>>>> +                             "Balancers attached: %d, %d (%d)",
>>>>>>> +                             =
(int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>> +                             (int)attached_num, =
conf->max_balancers);
>>>>>>> +                if (attached_size =3D=3D =
ALIGNED_PROXY_BALANCER_SHARED_SIZE
>>>>>>> +                        && attached_num >=3D =
conf->balancers->nelts) {
>>>>>>> +                    conf->max_balancers =3D attached_num;
>>>>>>> +                }
>>>>>>> +                else {
>>>>>>> +                    rv =3D APR_ENOSPC;
>>>>>>> +                }
>>>>>>> +            }
>>>>>>>          if (rv !=3D APR_SUCCESS) {
>>>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01179) "balancer slotmem_create failed");
>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01179)
>>>>>>> +                             "balancer slotmem create or attach =
failed");
>>>>>>>              return !OK;
>>>>>>>          }
>>>>>>>          conf->bslot =3D new;
>>>>>>> @@ -864,11 +895,32 @@ static int balancer_post_config(apr_pool
>>>>>>>                       (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>                       (int)balancer->max_workers, i);
>>>>>>>=20
>>>>>>> -            rv =3D storage->create(&new, balancer->s->sname,
>>>>>>> -                                 =
ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>> -                                 balancer->max_workers, type, =
pconf);
>>>>>>> +            /* try to attach first (see rationale from =
balancers above) */
>>>>>>> +            rv =3D storage->attach(&new, balancer->s->sname,
>>>>>>> +                                 &attached_size, &attached_num,
>>>>>>> +                                 pconf);
>>>>>>> +            if (rv !=3D APR_SUCCESS) {
>>>>>>> +                rv =3D storage->create(&new, =
balancer->s->sname,
>>>>>>> +                                     =
ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>> +                                     balancer->max_workers, =
type, pconf);
>>>>>>> +            }
>>>>>>> +            else {
>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, =
APLOGNO(02965)
>>>>>>> +                             "Workers attached: %s (%s), %d, %d =
(%d) [%u]",
>>>>>>> +                             balancer->s->name, =
balancer->s->sname,
>>>>>>> +                             =
(int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>> +                             (int)attached_num, =
balancer->max_workers, i);
>>>>>>> +                if (attached_size =3D=3D =
ALIGNED_PROXY_WORKER_SHARED_SIZE
>>>>>>> +                        && attached_num >=3D =
balancer->workers->nelts) {
>>>>>>> +                    balancer->max_workers =3D attached_num;
>>>>>>> +                }
>>>>>>> +                else {
>>>>>>> +                    rv =3D APR_ENOSPC;
>>>>>>> +                }
>>>>>>> +            }
>>>>>>>          if (rv !=3D APR_SUCCESS) {
>>>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01185) "worker slotmem_create failed");
>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01185)
>>>>>>> +                             "worker slotmem create or attach =
failed");
>>>>>>>              return !OK;
>>>>>>>          }
>>>>>>>          balancer->wslot =3D new;
>>>>>>>=20
>>>>>>>=20
>>>>>>=20
>>>>=20
>>=20


From dev-return-83560-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 14:34:54 2015
Return-Path: <dev-return-83560-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CBBF11857A
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 14:34:54 +0000 (UTC)
Received: (qmail 88161 invoked by uid 500); 25 Aug 2015 14:34:54 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 88086 invoked by uid 500); 25 Aug 2015 14:34:54 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 88076 invoked by uid 99); 25 Aug 2015 14:34:54 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 14:34:54 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id DD609EDC22
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:34:53 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.453
X-Spam-Level: *
X-Spam-Status: No, score=1.453 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, KAM_ASCII_DIVIDERS=0.8,
	SPF_NEUTRAL=0.652, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id rakRKlnwxP40 for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 14:34:45 +0000 (UTC)
Received: from resqmta-ch2-10v.sys.comcast.net (resqmta-ch2-10v.sys.comcast.net [69.252.207.42])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id EF9A6506A7
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:34:44 +0000 (UTC)
Received: from resomta-ch2-08v.sys.comcast.net ([69.252.207.104])
	by resqmta-ch2-10v.sys.comcast.net with comcast
	id 92aL1r0032Fh1PH012akfd; Tue, 25 Aug 2015 14:34:44 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-08v.sys.comcast.net with comcast
	id 92aj1r00W2U0RYt012akB5; Tue, 25 Aug 2015 14:34:44 +0000
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <AB1691BE05AE7F4992697F2A0835627AC62F31E3@VOEXM10W.internal.vodafone.com>
Date: Tue, 25 Aug 2015 10:34:43 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <E7934D6C-AB1C-4F29-B2FA-FD823B2C372E@jaguNET.com>
References: <55DB2E9A.10307@redhat.com> <CAKQ1sVNbqUn88KFzuwWZe3kOcWoQi=ctbJHPAmisMfUhkySkgg@mail.gmail.com> <CAKQ1sVMFBhih-rq61WZkf+jbZ_dQd6+Y5Ekar--9v10+yuNO=Q@mail.gmail.com> <55DC25C7.9000607@redhat.com> <AB1691BE05AE7F4992697F2A0835627AC62F2C7D@VOEXM10W.internal.vodafone.com> <AB1691BE05AE7F4992697F2A0835627AC62F2E5F@VOEXM10W.internal.vodafone.com> <55DC5C44.6010900@redhat.com> <AB1691BE05AE7F4992697F2A0835627AC62F31AE@VOEXM10W.internal.vodafone.com> <AB1691BE05AE7F4992697F2A0835627AC62F31E3@VOEXM10W.internal.vodafone.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440513284;
	bh=MQbVNZOw9QgXSY+qnuv9yqUCoui3oYEzPC+YADFf3Jg=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=vSwell5ACx8cOF29iATfPtht39yKnt+NbjxY4zLqG8XBTR1jx56rmjdXKA3EMq+iU
	 bwE4F+c6SiJqYHq+hl5rTXeiEXNeNNeBOFxpxuYmBrOduXejFU2s7gBXTrVt0n1q5f
	 9UcVfUONwHys/Bw5LArQBXmIIHuRPQYullv0rWhtqdb9gyAkSSxFA5gTNkqdzUQkuV
	 5/YA5rtius5hhMTksxRql4I2z86wNNVSC7D77qC0CjrNR1EQOyWd7DlimmHOqrRhqH
	 4x5M6Cuvxf3XxUG2/qosSEc729hTx/sk0p96hCzI8ljUncCVxBvJKg8C2UL8bU4TtZ
	 8MWqoGfcQibEA==

+1
> On Aug 25, 2015, at 8:57 AM, Pl=C3=BCm, R=C3=BCdiger, Vodafone Group =
<ruediger.pluem@vodafone.com> wrote:
>=20
> Now the more complete patch (including bump):
>=20
> Index: modules/proxy/proxy_util.c
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> --- modules/proxy/proxy_util.c	(revision 1697578)
> +++ modules/proxy/proxy_util.c	(working copy)
> @@ -1460,6 +1460,7 @@
>     (*worker)->flush_packets =3D flush_off;
>     (*worker)->flush_wait =3D PROXY_FLUSH_WAIT;
>     (*worker)->smax =3D -1;
> +    (*worker)->server =3D conf->s;
>     /* Increase the total worker count */
>     proxy_lb_workers++;
>     init_conn_pool(p, *worker);
> @@ -1807,6 +1808,7 @@
>                                                 server_rec *server)
> {
>     if (ap_scoreboard_image && !worker->s) {
> +        server_rec *id_server;
>         int i =3D 0;
>         proxy_worker_stat *free_slot =3D NULL;
>         proxy_worker_stat *s;
> @@ -1824,14 +1826,20 @@
>             apr_md5_update(&ctx, (unsigned char *)balancer->name,
>                            strlen(balancer->name));
>         }
> -        if (server) {
> +        if (worker->server) {
> +            id_server =3D worker->server;
> +        }
> +        else {
> +            id_server =3D server;
> +        }
> +        if (id_server) {
>             server_addr_rec *addr;
>             /* Assumes the unique identifier of a vhost is its =
address(es)
>              * plus the ServerName:Port. Should two or more vhosts =
have this
>              * same identifier, the first one would always be elected =
to
>              * handle the requests, so this shouldn't be an issue...
>              */
> -            for (addr =3D server->addrs; addr; addr =3D addr->next) {
> +            for (addr =3D id_server->addrs; addr; addr =3D =
addr->next) {
>                 char host_ip[64]; /* for any IPv[46] string */
>                 apr_sockaddr_ip_getbuf(host_ip, sizeof host_ip,
>                                        addr->host_addr);
> @@ -1840,10 +1848,10 @@
>                 apr_md5_update(&ctx, (unsigned char =
*)&addr->host_port,
>                                sizeof(addr->host_port));
>             }
> -            apr_md5_update(&ctx, (unsigned char =
*)server->server_hostname,
> -                           strlen(server->server_hostname));
> -            apr_md5_update(&ctx, (unsigned char *)&server->port,
> -                           sizeof(server->port));
> +            apr_md5_update(&ctx, (unsigned char =
*)id_server->server_hostname,
> +                           strlen(id_server->server_hostname));
> +            apr_md5_update(&ctx, (unsigned char *)&id_server->port,
> +                           sizeof(id_server->port));
>         }
>         apr_md5_final(digest, &ctx);
>=20
> Index: modules/proxy/mod_proxy.c
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> --- modules/proxy/mod_proxy.c	(revision 1697578)
> +++ modules/proxy/mod_proxy.c	(working copy)
> @@ -1129,6 +1129,7 @@
>     ps->badopt =3D bad_error;
>     ps->badopt_set =3D 0;
>     ps->pool =3D p;
> +    ps->s =3D s;
>=20
>     return ps;
> }
> @@ -1172,6 +1173,7 @@
>     ps->proxy_status =3D (overrides->proxy_status_set =3D=3D 0) ? =
base->proxy_status : overrides->proxy_status;
>     ps->proxy_status_set =3D overrides->proxy_status_set || =
base->proxy_status_set;
>     ps->pool =3D p;
> +    ps->s =3D overrides->s;
>     return ps;
> }
>=20
> Index: modules/proxy/mod_proxy.h
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> --- modules/proxy/mod_proxy.h	(revision 1697578)
> +++ modules/proxy/mod_proxy.h	(working copy)
> @@ -193,6 +193,7 @@
>     } proxy_status;             /* Status display options */
>     char proxy_status_set;
>     apr_pool_t *pool;           /* Pool used for allocating this =
struct */
> +    server_rec *s;              /* The server_rec where this =
configuration was created in */
> } proxy_server_conf;
>=20
>=20
> @@ -369,6 +370,7 @@
>     char            disablereuse_set;
>     apr_interval_time_t conn_timeout;
>     char            conn_timeout_set;
> +    server_rec      *server;    /* The server_rec where this =
configuration was created in */
> };
>=20
> /*
> Index: include/ap_mmn.h
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> --- include/ap_mmn.h	(revision 1697578)
> +++ include/ap_mmn.h	(working copy)
> @@ -158,6 +158,8 @@
>  * 20051115.38 (2.2.30) Add ap_proxy_set_scoreboard_lb() in =
mod_proxy.h
>  * 20051115.39 (2.2.30) Add ap_proxy_connection_reusable()
>  * 20051115.40 (2.2.30) Add ap_map_http_request_error()
> + * 20051115.41 (2.2.32) Add s member to proxy_server_conf struct and =
server
> + *                      member to proxy_worker struct.
>  */
>=20
> #define MODULE_MAGIC_COOKIE 0x41503232UL /* "AP22" */
> @@ -165,7 +167,7 @@
> #ifndef MODULE_MAGIC_NUMBER_MAJOR
> #define MODULE_MAGIC_NUMBER_MAJOR 20051115
> #endif
> -#define MODULE_MAGIC_NUMBER_MINOR 40                    /* 0...n */
> +#define MODULE_MAGIC_NUMBER_MINOR 41                    /* 0...n */
>=20
> /**
>  * Determine if the server's current MODULE_MAGIC_NUMBER is at least a
>=20
>=20
> Regards
>=20
> R=C3=BCdiger
>=20
>> -----Original Message-----
>> From: Pl=C3=BCm, R=C3=BCdiger, Vodafone Group
>> Sent: Dienstag, 25. August 2015 14:41
>> To: dev@httpd.apache.org
>> Subject: RE: PR 58267: Regression in 2.2.31 caused by r1680920
>>=20
>> Thanks for the pointer. It is missing because I removed it by =
accident
>> when excluding some debug code I setup locally for analysing the =
issue
>> from the patch I posted. I will post a proper version and if you =
agree put
>> it in STATUS for 2.2.x. As far as I can tell this change only applies =
to
>> 2.2.x. So it would be fine to propose it directly in STATUS without =
any
>> trunk commit.
>>=20
>> Regards
>>=20
>> R=C3=BCdiger
>>=20
>>> -----Original Message-----
>>> From: Jan Kalu=C5=BEa [mailto:jkaluza@redhat.com]
>>> Sent: Dienstag, 25. August 2015 14:15
>>> To: dev@httpd.apache.org
>>> Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
>>>=20
>>> On 08/25/2015 11:39 AM, Pl=C3=BCm, R=C3=BCdiger, Vodafone Group =
wrote:
>>>> How about the following patch? It uses the server_rec of the server
>> that
>>> originally created the configuration item.
>>>=20
>>> This looks like good strategy. I've verified that the patch fixes =
this
>>> issue and does not break anything when testing briefly.
>>>=20
>>> What do you think, Yann?
>>>=20
>>> Note that "id_server" declaration is missing in the patch. Otherwise
>>> it's OK.
>>>=20
>>> Regards,
>>> Jan Kaluza
>>>=20
>>>> Index: modules/proxy/proxy_util.c
>>>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>>>> --- modules/proxy/proxy_util.c	(revision 1697578)
>>>> +++ modules/proxy/proxy_util.c	(working copy)
>>>> @@ -1460,6 +1460,7 @@
>>>>      (*worker)->flush_packets =3D flush_off;
>>>>      (*worker)->flush_wait =3D PROXY_FLUSH_WAIT;
>>>>      (*worker)->smax =3D -1;
>>>> +    (*worker)->server =3D conf->s;
>>>>      /* Increase the total worker count */
>>>>      proxy_lb_workers++;
>>>>      init_conn_pool(p, *worker);
>>>> @@ -1824,14 +1829,20 @@
>>>>              apr_md5_update(&ctx, (unsigned char *)balancer->name,
>>>>                             strlen(balancer->name));
>>>>          }
>>>> -        if (server) {
>>>> +        if (worker->server) {
>>>> +            id_server =3D worker->server;
>>>> +        }
>>>> +        else {
>>>> +            id_server =3D server;
>>>> +        }
>>>> +        if (id_server) {
>>>>              server_addr_rec *addr;
>>>>              /* Assumes the unique identifier of a vhost is its
>>> address(es)
>>>>               * plus the ServerName:Port. Should two or more vhosts
>>> have this
>>>>               * same identifier, the first one would always be
>> elected
>>> to
>>>>               * handle the requests, so this shouldn't be an =
issue...
>>>>               */
>>>> -            for (addr =3D server->addrs; addr; addr =3D =
addr->next) {
>>>> +            for (addr =3D id_server->addrs; addr; addr =3D =
addr->next) {
>>>>                  char host_ip[64]; /* for any IPv[46] string */
>>>>                  apr_sockaddr_ip_getbuf(host_ip, sizeof host_ip,
>>>>                                         addr->host_addr);
>>>> @@ -1840,10 +1851,10 @@
>>>>                  apr_md5_update(&ctx, (unsigned char *)&addr-
>>>> host_port,
>>>>                                 sizeof(addr->host_port));
>>>>              }
>>>> -            apr_md5_update(&ctx, (unsigned char *)server-
>>>> server_hostname,
>>>> -                           strlen(server->server_hostname));
>>>> -            apr_md5_update(&ctx, (unsigned char *)&server->port,
>>>> -                           sizeof(server->port));
>>>> +            apr_md5_update(&ctx, (unsigned char *)id_server-
>>>> server_hostname,
>>>> +                           strlen(id_server->server_hostname));
>>>> +            apr_md5_update(&ctx, (unsigned char =
*)&id_server->port,
>>>> +                           sizeof(id_server->port));
>>>>          }
>>>>          apr_md5_final(digest, &ctx);
>>>>=20
>>>> Index: modules/proxy/mod_proxy.c
>>>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>>>> --- modules/proxy/mod_proxy.c	(revision 1697578)
>>>> +++ modules/proxy/mod_proxy.c	(working copy)
>>>> @@ -1129,6 +1129,7 @@
>>>>      ps->badopt =3D bad_error;
>>>>      ps->badopt_set =3D 0;
>>>>      ps->pool =3D p;
>>>> +    ps->s =3D s;
>>>>=20
>>>>      return ps;
>>>>  }
>>>> @@ -1172,6 +1173,7 @@
>>>>      ps->proxy_status =3D (overrides->proxy_status_set =3D=3D 0) ? =
base-
>>>> proxy_status : overrides->proxy_status;
>>>>      ps->proxy_status_set =3D overrides->proxy_status_set || base-
>>>> proxy_status_set;
>>>>      ps->pool =3D p;
>>>> +    ps->s =3D overrides->s;
>>>>      return ps;
>>>>  }
>>>>=20
>>>> Index: modules/proxy/mod_proxy.h
>>>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>>>> --- modules/proxy/mod_proxy.h	(revision 1697578)
>>>> +++ modules/proxy/mod_proxy.h	(working copy)
>>>> @@ -193,6 +193,7 @@
>>>>      } proxy_status;             /* Status display options */
>>>>      char proxy_status_set;
>>>>      apr_pool_t *pool;           /* Pool used for allocating this
>>> struct */
>>>> +    server_rec *s;              /* The server_rec where this
>>> configuration was created in */
>>>>  } proxy_server_conf;
>>>>=20
>>>>=20
>>>> @@ -369,6 +370,7 @@
>>>>      char            disablereuse_set;
>>>>      apr_interval_time_t conn_timeout;
>>>>      char            conn_timeout_set;
>>>> +    server_rec      *server;    /* The server_rec where this
>>> configuration was created in */
>>>>  };
>>>>=20
>>>>  /*
>>>>=20
>>>>=20
>>>> Regards
>>>>=20
>>>> R=C3=BCdiger
>>>>=20
>>>>> -----Original Message-----
>>>>> From: Pl=C3=BCm, R=C3=BCdiger, Vodafone Group
>>>>> Sent: Dienstag, 25. August 2015 10:48
>>>>> To: dev@httpd.apache.org
>>>>> Subject: RE: PR 58267: Regression in 2.2.31 caused by r1680920
>>>>>=20
>>>>> I think the current state of 2.2.31 breaks existing 2.2.x
>> configuration
>>>>> prior to 2.2.31.
>>>>> Prior to 2.2.31 you could do the following:
>>>>>=20
>>>>> <Proxy Balancer://proxy1>
>>>>> BalancerMember ajp://127.0.0.1:7001
>>>>> BalancerMember ajp://127.0.0.2:7002
>>>>> </Proxy>
>>>>>=20
>>>>> <virtualhost *:80>
>>>>> ProxyPass / balancer://proxy1/
>>>>> </virtualhost>
>>>>>=20
>>>>> <virtualhost 127.0.0.1:8080>
>>>>>=20
>>>>> <Location /bmanager>
>>>>>    sethandler balancer-manager
>>>>> </Location>
>>>>>=20
>>>>> </virtualhost>
>>>>>=20
>>>>> With this configuration you could provide your reverse proxy to =
the
>>>>> outside world while having the
>>>>> balancermanager managing the balancer only listening to localhost.
>> This
>>> is
>>>>> not possible any longer with 2.2.31
>>>>> as the worker->s is now different in each virtualhost whereas =
before
>> it
>>>>> was the same as the worker->id was used
>>>>> to identify the scoreboard slot.
>>>>> The patches proposed so far would not change this. I think in =
order
>> to
>>>>> revert to the old behaviour we need to
>>>>> store with each worker in which server_rec context it was created.
>> e.g.
>>>>> adding a const char * field to the worker that would be filled =
with
>>>>> server->server_hostname. Then we could use this value for creating
>> the
>>>>> md5.
>>>>>=20
>>>>> Regards
>>>>>=20
>>>>> R=C3=BCdiger
>>>>>=20
>>>>>> -----Original Message-----
>>>>>> From: Jan Kalu=C5=BEa [mailto:jkaluza@redhat.com]
>>>>>> Sent: Dienstag, 25. August 2015 10:23
>>>>>> To: dev@httpd.apache.org
>>>>>> Subject: Re: PR 58267: Regression in 2.2.31 caused by r1680920
>>>>>>=20
>>>>>> On 08/24/2015 11:12 PM, Yann Ylavic wrote:
>>>>>>> On Mon, Aug 24, 2015 at 5:51 PM, Yann Ylavic =
<ylavic.dev@gmail.com>
>>>>>> wrote:
>>>>>>>>=20
>>>>>>>> On Mon, Aug 24, 2015 at 4:47 PM, Jan Kalu=C5=BEa =
<jkaluza@redhat.com>
>>>>> wrote:
>>>>>>>>>=20
>>>>>>>>> 2) Increment proxy_lb_workers according to number of workers =
in
>>>>>> balancer
>>>>>>>>> when using "ProxyPass /foobar/ Balancer://foobar/" in the
>>>>> VirtualHost.
>>>>>> The
>>>>>>>>> scoreboard would have right size and =
ap_proxy_set_scoreboard_lb
>>>>> would
>>>>>> not
>>>>>>>>> fail then.
>>>>>>>>=20
>>>>>>>> I think we can do this quite easily in merge_proxy_config(), by
>>>>>>>> incrementing proxy_lb_workers for each =
base->balancers->workers. I
>>>>> did
>>>>>>>> not test it yet though.
>>>>>>>=20
>>>>>>> I tested the below which seems to work.
>>>>>>=20
>>>>>> Hm, this reserves the slots in scoreboard even when the balancers
>> are
>>>>>> not used in the virtualhost, or am I wrong?
>>>>>>=20
>>>>>> I originally thought about increasing proxy_lb_workers only when
>> they
>>>>>> are used in the ProxyPass* in the vhost.
>>>>>>=20
>>>>>>> Index: modules/proxy/mod_proxy.c
>>>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>>>>>>> --- modules/proxy/mod_proxy.c    (revision 1697358)
>>>>>>> +++ modules/proxy/mod_proxy.c    (working copy)
>>>>>>> @@ -1135,6 +1135,7 @@ static void * =
create_proxy_config(apr_pool_t
>>> *p,
>>>>> s
>>>>>>>=20
>>>>>>>   static void * merge_proxy_config(apr_pool_t *p, void *basev,
>> void
>>>>>> *overridesv)
>>>>>>>   {
>>>>>>> +    int i;
>>>>>>>       proxy_server_conf *ps =3D apr_pcalloc(p,
>>>>> sizeof(proxy_server_conf));
>>>>>>>       proxy_server_conf *base =3D (proxy_server_conf *) basev;
>>>>>>>       proxy_server_conf *overrides =3D (proxy_server_conf *)
>>> overridesv;
>>>>>>> @@ -1147,6 +1148,13 @@ static void * =
merge_proxy_config(apr_pool_t
>>> *p,
>>>>>> vo
>>>>>>>       ps->allowed_connect_ports =3D apr_array_append(p,
>>>>>>> base->allowed_connect_ports, overrides->allowed_connect_ports);
>>>>>>>       ps->workers =3D apr_array_append(p, base->workers, =
overrides-
>>>>>>> workers);
>>>>>>>       ps->balancers =3D apr_array_append(p, base->balancers,
>>> overrides-
>>>>>>> balancers);
>>>>>>> +    /* The balancers inherited from base don't have their =
members
>>>>>> reserved on
>>>>>>> +     * the scorebord_lb for this server, account for them now.
>>>>>>> +     */
>>>>>>> +    for (i =3D 0; i < base->balancers->nelts; ++i) {
>>>>>>> +        proxy_balancer *balancer =3D (proxy_balancer *)base-
>>>> balancers-
>>>>>>> elts + i;
>>>>>>> +        proxy_lb_workers +=3D balancer->workers->nelts;
>>>>>>> +    }
>>>>>>>       ps->forward =3D overrides->forward ? overrides->forward :
>> base-
>>>>>>> forward;
>>>>>>>       ps->reverse =3D overrides->reverse ? overrides->reverse :
>> base-
>>>>>>> reverse;
>>>>>>>=20
>>>>>>> --
>>>>>>>=20
>>>>>>> Please note that since all the workers would really be accounted =
in
>>>>>>> the scoreboard, configurations like the one of PR 58267 (with
>>>>>>> inherited balancers) would also need bigger SHMs (but no more) =
than
>>>>>>> currently...
>>>>>>>=20
>>>>>>> WDYT?
>>>>>>>=20
>>>>>>=20
>>>>>> Regards,
>>>>>> Jan Kaluza
>>>>>>=20
>>>>=20
>=20
> <pr58267.diff>


From dev-return-83561-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 14:43:48 2015
Return-Path: <dev-return-83561-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EB9DA185D5
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 14:43:48 +0000 (UTC)
Received: (qmail 22801 invoked by uid 500); 25 Aug 2015 14:43:48 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 22743 invoked by uid 500); 25 Aug 2015 14:43:48 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 22733 invoked by uid 99); 25 Aug 2015 14:43:48 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 14:43:48 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 0432D1AA838
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:43:48 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.701
X-Spam-Level:
X-Spam-Status: No, score=0.701 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	KAM_ASCII_DIVIDERS=0.8, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id OUOsFj6xfRn2 for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 14:43:40 +0000 (UTC)
Received: from mail-ig0-f179.google.com (mail-ig0-f179.google.com [209.85.213.179])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id D53F5506FC
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:43:39 +0000 (UTC)
Received: by igbjg10 with SMTP id jg10so14197893igb.0
        for <dev@httpd.apache.org>; Tue, 25 Aug 2015 07:43:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=rdAgBLzWMYFJKImYB3rcLIYmalEagmPshYHLd5HT76A=;
        b=EuR+q68CMm1aDziFB7HQFVyEsAWr7SET11BRKuog8ZEPxwahYMmEUUrXD6YDX9jnLD
         qFHkic9Di53TTT1GpDLYBocK8PBaMEveLF2CX0TzKPAAJifC3QpDbtoZO5mizncOwUAH
         mj8eAUhXu6oO8iG33qpnCtbjYfOnRFidp6V8QgOUvWZg9pceAHPI/5bTtAsx0QBvcmib
         AGsXIynJNjAeV/XtlKAEF1kLIEWh6Tk66bV/q+gVDUq9xz6jvYSkEQwgMfa3nh8v9R4A
         QIZXQk4wqan/n+7SqVohqRjMeyrIpz3+SM61q/0V+ms186MuiTFx7CE18jxxvHKVNg6J
         3ekQ==
MIME-Version: 1.0
X-Received: by 10.50.111.164 with SMTP id ij4mr2879814igb.70.1440513819316;
 Tue, 25 Aug 2015 07:43:39 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Tue, 25 Aug 2015 07:43:39 -0700 (PDT)
In-Reply-To: <CAKQ1sVPiqwKe1-GTvd52iYS-KL2fLpNtFzxfXDPEkKAXGeFRjw@mail.gmail.com>
References: <20150821123403.6E568AC04B1@hades.apache.org>
	<CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com>
	<CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com>
	<6A1F4945-5B3E-4C1D-88E9-4B0A71D59F6C@jaguNET.com>
	<CAKQ1sVNZkfYEbktR1t8C6pt+gVxTZGn-SdmD9UWf8upw2kW0vg@mail.gmail.com>
	<EEA9C20F-2F7F-41BD-8465-5E42D13999F5@jaguNET.com>
	<CAKQ1sVPTDVw30xZM=Utr0Oc+-A23DfaDLCQ4eD0VXJqg5eOB6Q@mail.gmail.com>
	<C029DF93-9430-4A63-98A8-BFFA002186F4@jaguNET.com>
	<CAKQ1sVPiqwKe1-GTvd52iYS-KL2fLpNtFzxfXDPEkKAXGeFRjw@mail.gmail.com>
Date: Tue, 25 Aug 2015 16:43:39 +0200
Message-ID: <CAKQ1sVPVJueSRWUYZ6W0Y_VSS_cbVzhEMDHOW=6CKMJCEtyoFw@mail.gmail.com>
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES
 docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

The advantage of using the balancer-manager to add a member is that
failures won't kill httpd, whereas failing to add member or balancer
via the configuration file (no space left) stops httpd (now
documented).

To avoid that, maybe could we use non-shared (per child) memory in
this case, like in 2.2.x, so that httpd can continue to ~work~?


On Tue, Aug 25, 2015 at 4:41 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
> I don't see the difference between the configuration via
> balancer-manager or file+graceful-restart, both can change the number
> of balancers/members AND the settings while children are running.
> I'd kind of agree if we were talking about non-graceful restarts or
> first startup, we could add a new storage->destroy() method to do the
> job depending on the slotmem provider (though what about remote
> storage shared between multiple httpds?).
> Currently any restart (graceful or not) reuses the existing slots,
> even if the settings changed (but the size of the slot prior to this
> commit), so your proposed changes may break compatibility too...
>
>
> On Tue, Aug 25, 2015 at 3:59 PM, Jim Jagielski <jim@jagunet.com> wrote:
>> When 1st configured, Apache sees how many balancers there are
>> set in the config file. It then pads that amount by growth to
>> allow for the to-be-added dynamic addition of new balancers via
>> the balancer manager (ala adding members).
>>
>> The assumption is that if the actual config file is changed,
>> then the runtime configuration of balancers and members
>> is no longer valid; after all, if someone is changing the
>> config file, they could have done the same to add/change
>> bal/mem settings. So a config file change means something
>> more "serious" at which point the dynamic config should be
>> considered void and Apache starts with a clean (dynamic) slate
>> and just uses what's in the config only.
>>
>>> On Aug 25, 2015, at 9:48 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>>
>>> Hm, what's the point of the balancers and balancer->workers growth margin then?
>>> The first time the configration is loaded we create enough room for
>>> adding new balancers/workers, and on (graceful) restart we wouldn't
>>> use this space?
>>> That's also how the balancer-manager works when adding a new worker to
>>> a balancer, AFAICT.
>>>
>>>
>>> On Tue, Aug 25, 2015 at 3:43 PM, Jim Jagielski <jim@jagunet.com> wrote:
>>>> You mean via changing the config file? If so, then all bets
>>>> are off. You change the config file and restart then Apache
>>>> should start off w/ a clean slate. Even so, you need to handle
>>>> freeing the old shared mem segment and creating a brand new one
>>>> with the "correct" size... Trying to "use" the old one is
>>>> just fraught with issues.
>>>>
>>>>
>>>>> On Aug 25, 2015, at 9:15 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>>>>
>>>>> Well, if one adds a new balancer before restarting, at post_config
>>>>> time conf->balancers->nelts is +1 wrt the previous load...
>>>>>
>>>>> On Tue, Aug 25, 2015 at 2:46 PM, Jim Jagielski <jim@jagunet.com> wrote:
>>>>>> But the number of balancers does not change yet... And when it
>>>>>> is implemented the overall size of the storage slot should *never*
>>>>>> change. It must be constant, ala the scoreboard.
>>>>>>
>>>>>>> On Aug 25, 2015, at 8:39 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>>>>>>
>>>>>>> At every startup, in balancer_post_config:
>>>>>>>  conf->max_balancers = conf->balancers->nelts + conf->bgrowth;
>>>>>>>
>>>>>>> which means that if you add a balancer and restart, storage->create()
>>>>>>> (eg. slotmem_create) will try to find an existing slot with this ID
>>>>>>> and the exact ALIGNED_PROXY_BALANCER_SHARED_SIZE * conf->max_balancers
>>>>>>> size, and fail:
>>>>>>>  if (apr_shm_size_get(shm) != size) {
>>>>>>>      apr_shm_detach(shm);
>>>>>>>      ap_log_error(APLOG_MARK, APLOG_ERR, 0, ap_server_conf, APLOGNO(02599)
>>>>>>>                   "existing shared memory for %s could not be used
>>>>>>> (failed size check)",
>>>>>>>                   fname);
>>>>>>>      return APR_EINVAL;
>>>>>>>  }
>>>>>>>
>>>>>>> By using storage->attach() first (which is based on the ID only and
>>>>>>> returns the existing item_size and item_num), we can do the check
>>>>>>> ourselves and fail only if conf->max_balancers > item_num, allowing
>>>>>>> for balancers to be added thanks to growth margin used at startup.
>>>>>>>
>>>>>>> On Tue, Aug 25, 2015 at 2:12 PM, Jim Jagielski <jim@jagunet.com> wrote:
>>>>>>>> How and when do ALIGNED_PROXY_BALANCER_SHARED_SIZE and conf->max_balancers
>>>>>>>> change???
>>>>>>>>
>>>>>>>>> On Aug 21, 2015, at 8:34 AM, ylavic@apache.org wrote:
>>>>>>>>>
>>>>>>>>> Author: ylavic
>>>>>>>>> Date: Fri Aug 21 12:34:02 2015
>>>>>>>>> New Revision: 1696960
>>>>>>>>>
>>>>>>>>> URL: http://svn.apache.org/r1696960
>>>>>>>>> Log:
>>>>>>>>> mod_proxy_balancer: Fix balancers and balancer members reuse on
>>>>>>>>> restart when new ones are added.  PR 58024.
>>>>>>>>>
>>>>>>>>> Since slotmem_create() issues a strict check on the size of an existing
>>>>>>>>> slot before reusing it, it won't reuse existing balancers and members when
>>>>>>>>> new ones are added during restart (whereas growth margins would allow it).
>>>>>>>>> Fix this by using slotmem_attach() first and if it succeeds do the checks
>>>>>>>>> based on the returned previous number of existing entries.
>>>>>>>>>
>>>>>>>>> Modified:
>>>>>>>>> httpd/httpd/trunk/CHANGES
>>>>>>>>> httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>>>>>> httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>>>>>>
>>>>>>>>> Modified: httpd/httpd/trunk/CHANGES
>>>>>>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=1696960&r1=1696959&r2=1696960&view=diff
>>>>>>>>> ==============================================================================
>>>>>>>>> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
>>>>>>>>> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Aug 21 12:34:02 2015
>>>>>>>>> @@ -1,6 +1,9 @@
>>>>>>>>>                                                       -*- coding: utf-8 -*-
>>>>>>>>> Changes with Apache 2.5.0
>>>>>>>>>
>>>>>>>>> +  *) mod_proxy_balancer: Fix balancers and balancer members reuse on
>>>>>>>>> +     restart when new ones are added.  PR 58024.  [Yann Ylavic]
>>>>>>>>> +
>>>>>>>>> *) mod_socache_memcache: Add the 'MemcacheConnTTL' directive to control how
>>>>>>>>>   long to keep idle connections with the memcache server(s).
>>>>>>>>>   Change default value from 600 usec (!) to 15 sec. PR 58091
>>>>>>>>>
>>>>>>>>> Modified: httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>>>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/log-message-tags/next-number?rev=1696960&r1=1696959&r2=1696960&view=diff
>>>>>>>>> ==============================================================================
>>>>>>>>> --- httpd/httpd/trunk/docs/log-message-tags/next-number (original)
>>>>>>>>> +++ httpd/httpd/trunk/docs/log-message-tags/next-number Fri Aug 21 12:34:02 2015
>>>>>>>>> @@ -1 +1 @@
>>>>>>>>> -2964
>>>>>>>>> +2966
>>>>>>>>>
>>>>>>>>> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>>>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c?rev=1696960&r1=1696959&r2=1696960&view=diff
>>>>>>>>> ==============================================================================
>>>>>>>>> --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c (original)
>>>>>>>>> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Fri Aug 21 12:34:02 2015
>>>>>>>>> @@ -761,8 +761,11 @@ static int balancer_post_config(apr_pool
>>>>>>>>>      char *id;
>>>>>>>>>      proxy_balancer *balancer;
>>>>>>>>>      ap_slotmem_type_t type;
>>>>>>>>> +        apr_size_t attached_size;
>>>>>>>>> +        unsigned int attached_num;
>>>>>>>>>      void *sconf = s->module_config;
>>>>>>>>>      conf = (proxy_server_conf *)ap_get_module_config(sconf, &proxy_module);
>>>>>>>>> +
>>>>>>>>>      /*
>>>>>>>>>       * During create_proxy_config() we created a dummy id. Now that
>>>>>>>>>       * we have identifying info, we can create the real id
>>>>>>>>> @@ -794,11 +797,39 @@ static int balancer_post_config(apr_pool
>>>>>>>>>                       (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>>>                       (int)conf->balancers->nelts, conf->max_balancers);
>>>>>>>>>
>>>>>>>>> -            rv = storage->create(&new, conf->id,
>>>>>>>>> -                                 ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>>> -                                 conf->max_balancers, type, pconf);
>>>>>>>>> +            /* First try to attach() since the number of configured balancers
>>>>>>>>> +             * may have changed during restart, and we don't want create() to
>>>>>>>>> +             * fail because the overall size * number of entries is not stricly
>>>>>>>>> +             * identical to the previous run.  There may still be enough room
>>>>>>>>> +             * for this new run thanks to bgrowth margin, so if attach()
>>>>>>>>> +             * succeeds we can only check for the number of available entries
>>>>>>>>> +             * to be *greater or* equal to what we need now.  If attach() fails
>>>>>>>>> +             * we simply fall back to create().
>>>>>>>>> +             */
>>>>>>>>> +            rv = storage->attach(&new, conf->id,
>>>>>>>>> +                                 &attached_size, &attached_num,
>>>>>>>>> +                                 pconf);
>>>>>>>>> +            if (rv != APR_SUCCESS) {
>>>>>>>>> +                rv = storage->create(&new, conf->id,
>>>>>>>>> +                                     ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>>> +                                     conf->max_balancers, type, pconf);
>>>>>>>>> +            }
>>>>>>>>> +            else {
>>>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, APLOGNO(02964)
>>>>>>>>> +                             "Balancers attached: %d, %d (%d)",
>>>>>>>>> +                             (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>>> +                             (int)attached_num, conf->max_balancers);
>>>>>>>>> +                if (attached_size == ALIGNED_PROXY_BALANCER_SHARED_SIZE
>>>>>>>>> +                        && attached_num >= conf->balancers->nelts) {
>>>>>>>>> +                    conf->max_balancers = attached_num;
>>>>>>>>> +                }
>>>>>>>>> +                else {
>>>>>>>>> +                    rv = APR_ENOSPC;
>>>>>>>>> +                }
>>>>>>>>> +            }
>>>>>>>>>          if (rv != APR_SUCCESS) {
>>>>>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01179) "balancer slotmem_create failed");
>>>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01179)
>>>>>>>>> +                             "balancer slotmem create or attach failed");
>>>>>>>>>              return !OK;
>>>>>>>>>          }
>>>>>>>>>          conf->bslot = new;
>>>>>>>>> @@ -864,11 +895,32 @@ static int balancer_post_config(apr_pool
>>>>>>>>>                       (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>>>                       (int)balancer->max_workers, i);
>>>>>>>>>
>>>>>>>>> -            rv = storage->create(&new, balancer->s->sname,
>>>>>>>>> -                                 ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>>> -                                 balancer->max_workers, type, pconf);
>>>>>>>>> +            /* try to attach first (see rationale from balancers above) */
>>>>>>>>> +            rv = storage->attach(&new, balancer->s->sname,
>>>>>>>>> +                                 &attached_size, &attached_num,
>>>>>>>>> +                                 pconf);
>>>>>>>>> +            if (rv != APR_SUCCESS) {
>>>>>>>>> +                rv = storage->create(&new, balancer->s->sname,
>>>>>>>>> +                                     ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>>> +                                     balancer->max_workers, type, pconf);
>>>>>>>>> +            }
>>>>>>>>> +            else {
>>>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, APLOGNO(02965)
>>>>>>>>> +                             "Workers attached: %s (%s), %d, %d (%d) [%u]",
>>>>>>>>> +                             balancer->s->name, balancer->s->sname,
>>>>>>>>> +                             (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>>> +                             (int)attached_num, balancer->max_workers, i);
>>>>>>>>> +                if (attached_size == ALIGNED_PROXY_WORKER_SHARED_SIZE
>>>>>>>>> +                        && attached_num >= balancer->workers->nelts) {
>>>>>>>>> +                    balancer->max_workers = attached_num;
>>>>>>>>> +                }
>>>>>>>>> +                else {
>>>>>>>>> +                    rv = APR_ENOSPC;
>>>>>>>>> +                }
>>>>>>>>> +            }
>>>>>>>>>          if (rv != APR_SUCCESS) {
>>>>>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01185) "worker slotmem_create failed");
>>>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01185)
>>>>>>>>> +                             "worker slotmem create or attach failed");
>>>>>>>>>              return !OK;
>>>>>>>>>          }
>>>>>>>>>          balancer->wslot = new;
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>
>>>>
>>

From dev-return-83562-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 14:47:27 2015
Return-Path: <dev-return-83562-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9C90D18627
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 14:47:27 +0000 (UTC)
Received: (qmail 32992 invoked by uid 500); 25 Aug 2015 14:47:27 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 32930 invoked by uid 500); 25 Aug 2015 14:47:27 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 32920 invoked by uid 99); 25 Aug 2015 14:47:26 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 14:47:26 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 867B6181939
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:47:26 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.699
X-Spam-Level:
X-Spam-Status: No, score=0.699 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	KAM_ASCII_DIVIDERS=0.8, RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id KinBtA5rqYWK for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 14:47:20 +0000 (UTC)
Received: from mail-io0-f171.google.com (mail-io0-f171.google.com [209.85.223.171])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id F239A2557B
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:47:19 +0000 (UTC)
Received: by iodv127 with SMTP id v127so188837873iod.3
        for <dev@httpd.apache.org>; Tue, 25 Aug 2015 07:47:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=9vlxi+L4QbvP2oGBlJi1XgCukJc+tIzkJLNkGTAznRQ=;
        b=kT3jUTPG6Mf0QyBs7akthsRJgSbUe7cTnO/Gs5Fjg51ehfVtH2O6Ljy/RCUExuU4Lo
         9wDpDP75RwBSa6yHkQVnL19u9YqP7RcsCNAtGcNrf/dVXbxXO0yAktsYrUoLVZARcoky
         mrNhlrprQ9bARLxJjOCuW7DRy4BHtbTz14fG/bW5zdjFKnW+i8VNrVTH966nIDK+DwTh
         vr1K/3O9pBKAPcmDou+1riU9icXuE8U5UcH/e0NKNwHsvGpPznuqxsrN7Pkobgs3t7a8
         JWWNNy1550tQVc/fZ5kPuA78dbtx4nC9kJlkfaG+zoCILtj/ufduMlQ8O6R2tliSqDYL
         U4nQ==
MIME-Version: 1.0
X-Received: by 10.107.150.145 with SMTP id y139mr22940787iod.128.1440513687143;
 Tue, 25 Aug 2015 07:41:27 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Tue, 25 Aug 2015 07:41:27 -0700 (PDT)
In-Reply-To: <C029DF93-9430-4A63-98A8-BFFA002186F4@jaguNET.com>
References: <20150821123403.6E568AC04B1@hades.apache.org>
	<CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com>
	<CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com>
	<6A1F4945-5B3E-4C1D-88E9-4B0A71D59F6C@jaguNET.com>
	<CAKQ1sVNZkfYEbktR1t8C6pt+gVxTZGn-SdmD9UWf8upw2kW0vg@mail.gmail.com>
	<EEA9C20F-2F7F-41BD-8465-5E42D13999F5@jaguNET.com>
	<CAKQ1sVPTDVw30xZM=Utr0Oc+-A23DfaDLCQ4eD0VXJqg5eOB6Q@mail.gmail.com>
	<C029DF93-9430-4A63-98A8-BFFA002186F4@jaguNET.com>
Date: Tue, 25 Aug 2015 16:41:27 +0200
Message-ID: <CAKQ1sVPiqwKe1-GTvd52iYS-KL2fLpNtFzxfXDPEkKAXGeFRjw@mail.gmail.com>
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES
 docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

I don't see the difference between the configuration via
balancer-manager or file+graceful-restart, both can change the number
of balancers/members AND the settings while children are running.
I'd kind of agree if we were talking about non-graceful restarts or
first startup, we could add a new storage->destroy() method to do the
job depending on the slotmem provider (though what about remote
storage shared between multiple httpds?).
Currently any restart (graceful or not) reuses the existing slots,
even if the settings changed (but the size of the slot prior to this
commit), so your proposed changes may break compatibility too...


On Tue, Aug 25, 2015 at 3:59 PM, Jim Jagielski <jim@jagunet.com> wrote:
> When 1st configured, Apache sees how many balancers there are
> set in the config file. It then pads that amount by growth to
> allow for the to-be-added dynamic addition of new balancers via
> the balancer manager (ala adding members).
>
> The assumption is that if the actual config file is changed,
> then the runtime configuration of balancers and members
> is no longer valid; after all, if someone is changing the
> config file, they could have done the same to add/change
> bal/mem settings. So a config file change means something
> more "serious" at which point the dynamic config should be
> considered void and Apache starts with a clean (dynamic) slate
> and just uses what's in the config only.
>
>> On Aug 25, 2015, at 9:48 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>
>> Hm, what's the point of the balancers and balancer->workers growth margin then?
>> The first time the configration is loaded we create enough room for
>> adding new balancers/workers, and on (graceful) restart we wouldn't
>> use this space?
>> That's also how the balancer-manager works when adding a new worker to
>> a balancer, AFAICT.
>>
>>
>> On Tue, Aug 25, 2015 at 3:43 PM, Jim Jagielski <jim@jagunet.com> wrote:
>>> You mean via changing the config file? If so, then all bets
>>> are off. You change the config file and restart then Apache
>>> should start off w/ a clean slate. Even so, you need to handle
>>> freeing the old shared mem segment and creating a brand new one
>>> with the "correct" size... Trying to "use" the old one is
>>> just fraught with issues.
>>>
>>>
>>>> On Aug 25, 2015, at 9:15 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>>>
>>>> Well, if one adds a new balancer before restarting, at post_config
>>>> time conf->balancers->nelts is +1 wrt the previous load...
>>>>
>>>> On Tue, Aug 25, 2015 at 2:46 PM, Jim Jagielski <jim@jagunet.com> wrote:
>>>>> But the number of balancers does not change yet... And when it
>>>>> is implemented the overall size of the storage slot should *never*
>>>>> change. It must be constant, ala the scoreboard.
>>>>>
>>>>>> On Aug 25, 2015, at 8:39 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>>>>>
>>>>>> At every startup, in balancer_post_config:
>>>>>>  conf->max_balancers = conf->balancers->nelts + conf->bgrowth;
>>>>>>
>>>>>> which means that if you add a balancer and restart, storage->create()
>>>>>> (eg. slotmem_create) will try to find an existing slot with this ID
>>>>>> and the exact ALIGNED_PROXY_BALANCER_SHARED_SIZE * conf->max_balancers
>>>>>> size, and fail:
>>>>>>  if (apr_shm_size_get(shm) != size) {
>>>>>>      apr_shm_detach(shm);
>>>>>>      ap_log_error(APLOG_MARK, APLOG_ERR, 0, ap_server_conf, APLOGNO(02599)
>>>>>>                   "existing shared memory for %s could not be used
>>>>>> (failed size check)",
>>>>>>                   fname);
>>>>>>      return APR_EINVAL;
>>>>>>  }
>>>>>>
>>>>>> By using storage->attach() first (which is based on the ID only and
>>>>>> returns the existing item_size and item_num), we can do the check
>>>>>> ourselves and fail only if conf->max_balancers > item_num, allowing
>>>>>> for balancers to be added thanks to growth margin used at startup.
>>>>>>
>>>>>> On Tue, Aug 25, 2015 at 2:12 PM, Jim Jagielski <jim@jagunet.com> wrote:
>>>>>>> How and when do ALIGNED_PROXY_BALANCER_SHARED_SIZE and conf->max_balancers
>>>>>>> change???
>>>>>>>
>>>>>>>> On Aug 21, 2015, at 8:34 AM, ylavic@apache.org wrote:
>>>>>>>>
>>>>>>>> Author: ylavic
>>>>>>>> Date: Fri Aug 21 12:34:02 2015
>>>>>>>> New Revision: 1696960
>>>>>>>>
>>>>>>>> URL: http://svn.apache.org/r1696960
>>>>>>>> Log:
>>>>>>>> mod_proxy_balancer: Fix balancers and balancer members reuse on
>>>>>>>> restart when new ones are added.  PR 58024.
>>>>>>>>
>>>>>>>> Since slotmem_create() issues a strict check on the size of an existing
>>>>>>>> slot before reusing it, it won't reuse existing balancers and members when
>>>>>>>> new ones are added during restart (whereas growth margins would allow it).
>>>>>>>> Fix this by using slotmem_attach() first and if it succeeds do the checks
>>>>>>>> based on the returned previous number of existing entries.
>>>>>>>>
>>>>>>>> Modified:
>>>>>>>> httpd/httpd/trunk/CHANGES
>>>>>>>> httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>>>>> httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>>>>>
>>>>>>>> Modified: httpd/httpd/trunk/CHANGES
>>>>>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=1696960&r1=1696959&r2=1696960&view=diff
>>>>>>>> ==============================================================================
>>>>>>>> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
>>>>>>>> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Aug 21 12:34:02 2015
>>>>>>>> @@ -1,6 +1,9 @@
>>>>>>>>                                                       -*- coding: utf-8 -*-
>>>>>>>> Changes with Apache 2.5.0
>>>>>>>>
>>>>>>>> +  *) mod_proxy_balancer: Fix balancers and balancer members reuse on
>>>>>>>> +     restart when new ones are added.  PR 58024.  [Yann Ylavic]
>>>>>>>> +
>>>>>>>> *) mod_socache_memcache: Add the 'MemcacheConnTTL' directive to control how
>>>>>>>>   long to keep idle connections with the memcache server(s).
>>>>>>>>   Change default value from 600 usec (!) to 15 sec. PR 58091
>>>>>>>>
>>>>>>>> Modified: httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/log-message-tags/next-number?rev=1696960&r1=1696959&r2=1696960&view=diff
>>>>>>>> ==============================================================================
>>>>>>>> --- httpd/httpd/trunk/docs/log-message-tags/next-number (original)
>>>>>>>> +++ httpd/httpd/trunk/docs/log-message-tags/next-number Fri Aug 21 12:34:02 2015
>>>>>>>> @@ -1 +1 @@
>>>>>>>> -2964
>>>>>>>> +2966
>>>>>>>>
>>>>>>>> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c?rev=1696960&r1=1696959&r2=1696960&view=diff
>>>>>>>> ==============================================================================
>>>>>>>> --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c (original)
>>>>>>>> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Fri Aug 21 12:34:02 2015
>>>>>>>> @@ -761,8 +761,11 @@ static int balancer_post_config(apr_pool
>>>>>>>>      char *id;
>>>>>>>>      proxy_balancer *balancer;
>>>>>>>>      ap_slotmem_type_t type;
>>>>>>>> +        apr_size_t attached_size;
>>>>>>>> +        unsigned int attached_num;
>>>>>>>>      void *sconf = s->module_config;
>>>>>>>>      conf = (proxy_server_conf *)ap_get_module_config(sconf, &proxy_module);
>>>>>>>> +
>>>>>>>>      /*
>>>>>>>>       * During create_proxy_config() we created a dummy id. Now that
>>>>>>>>       * we have identifying info, we can create the real id
>>>>>>>> @@ -794,11 +797,39 @@ static int balancer_post_config(apr_pool
>>>>>>>>                       (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>>                       (int)conf->balancers->nelts, conf->max_balancers);
>>>>>>>>
>>>>>>>> -            rv = storage->create(&new, conf->id,
>>>>>>>> -                                 ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>> -                                 conf->max_balancers, type, pconf);
>>>>>>>> +            /* First try to attach() since the number of configured balancers
>>>>>>>> +             * may have changed during restart, and we don't want create() to
>>>>>>>> +             * fail because the overall size * number of entries is not stricly
>>>>>>>> +             * identical to the previous run.  There may still be enough room
>>>>>>>> +             * for this new run thanks to bgrowth margin, so if attach()
>>>>>>>> +             * succeeds we can only check for the number of available entries
>>>>>>>> +             * to be *greater or* equal to what we need now.  If attach() fails
>>>>>>>> +             * we simply fall back to create().
>>>>>>>> +             */
>>>>>>>> +            rv = storage->attach(&new, conf->id,
>>>>>>>> +                                 &attached_size, &attached_num,
>>>>>>>> +                                 pconf);
>>>>>>>> +            if (rv != APR_SUCCESS) {
>>>>>>>> +                rv = storage->create(&new, conf->id,
>>>>>>>> +                                     ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>> +                                     conf->max_balancers, type, pconf);
>>>>>>>> +            }
>>>>>>>> +            else {
>>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, APLOGNO(02964)
>>>>>>>> +                             "Balancers attached: %d, %d (%d)",
>>>>>>>> +                             (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>> +                             (int)attached_num, conf->max_balancers);
>>>>>>>> +                if (attached_size == ALIGNED_PROXY_BALANCER_SHARED_SIZE
>>>>>>>> +                        && attached_num >= conf->balancers->nelts) {
>>>>>>>> +                    conf->max_balancers = attached_num;
>>>>>>>> +                }
>>>>>>>> +                else {
>>>>>>>> +                    rv = APR_ENOSPC;
>>>>>>>> +                }
>>>>>>>> +            }
>>>>>>>>          if (rv != APR_SUCCESS) {
>>>>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01179) "balancer slotmem_create failed");
>>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01179)
>>>>>>>> +                             "balancer slotmem create or attach failed");
>>>>>>>>              return !OK;
>>>>>>>>          }
>>>>>>>>          conf->bslot = new;
>>>>>>>> @@ -864,11 +895,32 @@ static int balancer_post_config(apr_pool
>>>>>>>>                       (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>>                       (int)balancer->max_workers, i);
>>>>>>>>
>>>>>>>> -            rv = storage->create(&new, balancer->s->sname,
>>>>>>>> -                                 ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>> -                                 balancer->max_workers, type, pconf);
>>>>>>>> +            /* try to attach first (see rationale from balancers above) */
>>>>>>>> +            rv = storage->attach(&new, balancer->s->sname,
>>>>>>>> +                                 &attached_size, &attached_num,
>>>>>>>> +                                 pconf);
>>>>>>>> +            if (rv != APR_SUCCESS) {
>>>>>>>> +                rv = storage->create(&new, balancer->s->sname,
>>>>>>>> +                                     ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>> +                                     balancer->max_workers, type, pconf);
>>>>>>>> +            }
>>>>>>>> +            else {
>>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, APLOGNO(02965)
>>>>>>>> +                             "Workers attached: %s (%s), %d, %d (%d) [%u]",
>>>>>>>> +                             balancer->s->name, balancer->s->sname,
>>>>>>>> +                             (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>> +                             (int)attached_num, balancer->max_workers, i);
>>>>>>>> +                if (attached_size == ALIGNED_PROXY_WORKER_SHARED_SIZE
>>>>>>>> +                        && attached_num >= balancer->workers->nelts) {
>>>>>>>> +                    balancer->max_workers = attached_num;
>>>>>>>> +                }
>>>>>>>> +                else {
>>>>>>>> +                    rv = APR_ENOSPC;
>>>>>>>> +                }
>>>>>>>> +            }
>>>>>>>>          if (rv != APR_SUCCESS) {
>>>>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01185) "worker slotmem_create failed");
>>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01185)
>>>>>>>> +                             "worker slotmem create or attach failed");
>>>>>>>>              return !OK;
>>>>>>>>          }
>>>>>>>>          balancer->wslot = new;
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>
>>>
>

From dev-return-83563-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 14:58:46 2015
Return-Path: <dev-return-83563-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2B9241869D
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 14:58:46 +0000 (UTC)
Received: (qmail 69355 invoked by uid 500); 25 Aug 2015 14:58:42 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 69274 invoked by uid 500); 25 Aug 2015 14:58:42 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 69264 invoked by uid 99); 25 Aug 2015 14:58:42 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 14:58:42 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 46A0C1AAC9B
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:58:42 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.453
X-Spam-Level: *
X-Spam-Status: No, score=1.453 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, KAM_ASCII_DIVIDERS=0.8,
	SPF_NEUTRAL=0.652, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id kxZlqSAnREjx for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 14:58:33 +0000 (UTC)
Received: from resqmta-ch2-07v.sys.comcast.net (resqmta-ch2-07v.sys.comcast.net [69.252.207.39])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id ECC8020382
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 14:58:32 +0000 (UTC)
Received: from resomta-ch2-16v.sys.comcast.net ([69.252.207.112])
	by resqmta-ch2-07v.sys.comcast.net with comcast
	id 92x31r00B2S2Q5R012yRwq; Tue, 25 Aug 2015 14:58:25 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-16v.sys.comcast.net with comcast
	id 92yR1r00J2U0RYt012yRCW; Tue, 25 Aug 2015 14:58:25 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CAKQ1sVPVJueSRWUYZ6W0Y_VSS_cbVzhEMDHOW=6CKMJCEtyoFw@mail.gmail.com>
Date: Tue, 25 Aug 2015 10:58:25 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <D3F741C4-82A6-4642-925F-663687F86A79@jaguNET.com>
References: <20150821123403.6E568AC04B1@hades.apache.org> <CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com> <CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com> <6A1F4945-5B3E-4C1D-88E9-4B0A71D59F6C@jaguNET.com> <CAKQ1sVNZkfYEbktR1t8C6pt+gVxTZGn-SdmD9UWf8upw2kW0vg@mail.gmail.com> <EEA9C20F-2F7F-41BD-8465-5E42D13999F5@jaguNET.com> <CAKQ1sVPTDVw30xZM=Utr0Oc+-A23DfaDLCQ4eD0VXJqg5eOB6Q@mail.gmail.com> <C029DF93-9430-4A63-98A8-BFFA002186F4@jaguNET.com> <CAKQ1sVPiqwKe1-GTvd52iYS-KL2fLpNtFzxfXDPEkKAXGeFRjw@mail.gmail.com> <CAKQ1sVPVJueSRWUYZ6W0Y_VSS_cbVzhEMDHOW=6CKMJCEtyoFw@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440514705;
	bh=wKkFy2mCOrl9I7Wshehb1jskmNKh5l/Ntd9bYQHKX3c=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=ad0bAHVrlKAOGl/MyRWo0DlRW8xxqPjS03AY+cMsOLAHFRz1SgQb8Glj1BE+eFLl4
	 l+94XMzIY+qEL4Duh5eg9LR3CvbWr+20861mQMKlgIwwqmzNw9D1zEcfFetbxZ6S2Q
	 U3KBZIaFLjjFoyXt1s9R/zR83tLuBZIHD5HAwRLYONMfOG1Dr1R9ZdDR+c2XkF6lby
	 oE1ktpW87CnUubF5+noMoPJhQflTPGLi4f8iSBUJ5yVu8B45HUUhZGPt1zX8UVklRE
	 8zx8r6CDAEUJ9Vs5yHZBPbFIqsOumKFjXvkaW/yKptnMRF4MfW6iIzhfGt7V5ikMI2
	 1oCmeRPYVkZgw==

The whole intent of the dynamic capability of balancer manage,
plus the persistence of it, is to allow changes to be done
to the reverse proxy setup w/o requiring any changes to
the config at all. It allows it to be reconfigured dynamically,
either via the manager or some other mechanism. It's to
*avoid* changing the file config. It's been a long-requested
change and something which *completely* distinguishes httpd
from others. I am very -1 on any changes that reduce that
capability or any that somehow "encourages" going back to
a preference for changes to the config file.

> On Aug 25, 2015, at 10:43 AM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>=20
> The advantage of using the balancer-manager to add a member is that
> failures won't kill httpd, whereas failing to add member or balancer
> via the configuration file (no space left) stops httpd (now
> documented).
>=20
> To avoid that, maybe could we use non-shared (per child) memory in
> this case, like in 2.2.x, so that httpd can continue to ~work~?
>=20
>=20
> On Tue, Aug 25, 2015 at 4:41 PM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>> I don't see the difference between the configuration via
>> balancer-manager or file+graceful-restart, both can change the number
>> of balancers/members AND the settings while children are running.
>> I'd kind of agree if we were talking about non-graceful restarts or
>> first startup, we could add a new storage->destroy() method to do the
>> job depending on the slotmem provider (though what about remote
>> storage shared between multiple httpds?).
>> Currently any restart (graceful or not) reuses the existing slots,
>> even if the settings changed (but the size of the slot prior to this
>> commit), so your proposed changes may break compatibility too...
>>=20
>>=20
>> On Tue, Aug 25, 2015 at 3:59 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>>> When 1st configured, Apache sees how many balancers there are
>>> set in the config file. It then pads that amount by growth to
>>> allow for the to-be-added dynamic addition of new balancers via
>>> the balancer manager (ala adding members).
>>>=20
>>> The assumption is that if the actual config file is changed,
>>> then the runtime configuration of balancers and members
>>> is no longer valid; after all, if someone is changing the
>>> config file, they could have done the same to add/change
>>> bal/mem settings. So a config file change means something
>>> more "serious" at which point the dynamic config should be
>>> considered void and Apache starts with a clean (dynamic) slate
>>> and just uses what's in the config only.
>>>=20
>>>> On Aug 25, 2015, at 9:48 AM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>>>>=20
>>>> Hm, what's the point of the balancers and balancer->workers growth =
margin then?
>>>> The first time the configration is loaded we create enough room for
>>>> adding new balancers/workers, and on (graceful) restart we wouldn't
>>>> use this space?
>>>> That's also how the balancer-manager works when adding a new worker =
to
>>>> a balancer, AFAICT.
>>>>=20
>>>>=20
>>>> On Tue, Aug 25, 2015 at 3:43 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>>>>> You mean via changing the config file? If so, then all bets
>>>>> are off. You change the config file and restart then Apache
>>>>> should start off w/ a clean slate. Even so, you need to handle
>>>>> freeing the old shared mem segment and creating a brand new one
>>>>> with the "correct" size... Trying to "use" the old one is
>>>>> just fraught with issues.
>>>>>=20
>>>>>=20
>>>>>> On Aug 25, 2015, at 9:15 AM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>>>>>>=20
>>>>>> Well, if one adds a new balancer before restarting, at =
post_config
>>>>>> time conf->balancers->nelts is +1 wrt the previous load...
>>>>>>=20
>>>>>> On Tue, Aug 25, 2015 at 2:46 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>>>>>>> But the number of balancers does not change yet... And when it
>>>>>>> is implemented the overall size of the storage slot should =
*never*
>>>>>>> change. It must be constant, ala the scoreboard.
>>>>>>>=20
>>>>>>>> On Aug 25, 2015, at 8:39 AM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>>>>>>>>=20
>>>>>>>> At every startup, in balancer_post_config:
>>>>>>>> conf->max_balancers =3D conf->balancers->nelts + conf->bgrowth;
>>>>>>>>=20
>>>>>>>> which means that if you add a balancer and restart, =
storage->create()
>>>>>>>> (eg. slotmem_create) will try to find an existing slot with =
this ID
>>>>>>>> and the exact ALIGNED_PROXY_BALANCER_SHARED_SIZE * =
conf->max_balancers
>>>>>>>> size, and fail:
>>>>>>>> if (apr_shm_size_get(shm) !=3D size) {
>>>>>>>>     apr_shm_detach(shm);
>>>>>>>>     ap_log_error(APLOG_MARK, APLOG_ERR, 0, ap_server_conf, =
APLOGNO(02599)
>>>>>>>>                  "existing shared memory for %s could not be =
used
>>>>>>>> (failed size check)",
>>>>>>>>                  fname);
>>>>>>>>     return APR_EINVAL;
>>>>>>>> }
>>>>>>>>=20
>>>>>>>> By using storage->attach() first (which is based on the ID only =
and
>>>>>>>> returns the existing item_size and item_num), we can do the =
check
>>>>>>>> ourselves and fail only if conf->max_balancers > item_num, =
allowing
>>>>>>>> for balancers to be added thanks to growth margin used at =
startup.
>>>>>>>>=20
>>>>>>>> On Tue, Aug 25, 2015 at 2:12 PM, Jim Jagielski =
<jim@jagunet.com> wrote:
>>>>>>>>> How and when do ALIGNED_PROXY_BALANCER_SHARED_SIZE and =
conf->max_balancers
>>>>>>>>> change???
>>>>>>>>>=20
>>>>>>>>>> On Aug 21, 2015, at 8:34 AM, ylavic@apache.org wrote:
>>>>>>>>>>=20
>>>>>>>>>> Author: ylavic
>>>>>>>>>> Date: Fri Aug 21 12:34:02 2015
>>>>>>>>>> New Revision: 1696960
>>>>>>>>>>=20
>>>>>>>>>> URL: http://svn.apache.org/r1696960
>>>>>>>>>> Log:
>>>>>>>>>> mod_proxy_balancer: Fix balancers and balancer members reuse =
on
>>>>>>>>>> restart when new ones are added.  PR 58024.
>>>>>>>>>>=20
>>>>>>>>>> Since slotmem_create() issues a strict check on the size of =
an existing
>>>>>>>>>> slot before reusing it, it won't reuse existing balancers and =
members when
>>>>>>>>>> new ones are added during restart (whereas growth margins =
would allow it).
>>>>>>>>>> Fix this by using slotmem_attach() first and if it succeeds =
do the checks
>>>>>>>>>> based on the returned previous number of existing entries.
>>>>>>>>>>=20
>>>>>>>>>> Modified:
>>>>>>>>>> httpd/httpd/trunk/CHANGES
>>>>>>>>>> httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>>>>>>> httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>>>>>>>=20
>>>>>>>>>> Modified: httpd/httpd/trunk/CHANGES
>>>>>>>>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=3D1696960&r1=3D=
1696959&r2=3D1696960&view=3Ddiff
>>>>>>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>>>>>>>>> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
>>>>>>>>>> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Aug 21 12:34:02 =
2015
>>>>>>>>>> @@ -1,6 +1,9 @@
>>>>>>>>>>                                                      -*- =
coding: utf-8 -*-
>>>>>>>>>> Changes with Apache 2.5.0
>>>>>>>>>>=20
>>>>>>>>>> +  *) mod_proxy_balancer: Fix balancers and balancer members =
reuse on
>>>>>>>>>> +     restart when new ones are added.  PR 58024.  [Yann =
Ylavic]
>>>>>>>>>> +
>>>>>>>>>> *) mod_socache_memcache: Add the 'MemcacheConnTTL' directive =
to control how
>>>>>>>>>>  long to keep idle connections with the memcache server(s).
>>>>>>>>>>  Change default value from 600 usec (!) to 15 sec. PR 58091
>>>>>>>>>>=20
>>>>>>>>>> Modified: httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>>>>>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/log-message-tags/next-=
number?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
>>>>>>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>>>>>>>>> --- httpd/httpd/trunk/docs/log-message-tags/next-number =
(original)
>>>>>>>>>> +++ httpd/httpd/trunk/docs/log-message-tags/next-number Fri =
Aug 21 12:34:02 2015
>>>>>>>>>> @@ -1 +1 @@
>>>>>>>>>> -2964
>>>>>>>>>> +2966
>>>>>>>>>>=20
>>>>>>>>>> Modified: =
httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>>>>>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_bal=
ancer.c?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
>>>>>>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>>>>>>>>> --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c =
(original)
>>>>>>>>>> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Fri =
Aug 21 12:34:02 2015
>>>>>>>>>> @@ -761,8 +761,11 @@ static int balancer_post_config(apr_pool
>>>>>>>>>>     char *id;
>>>>>>>>>>     proxy_balancer *balancer;
>>>>>>>>>>     ap_slotmem_type_t type;
>>>>>>>>>> +        apr_size_t attached_size;
>>>>>>>>>> +        unsigned int attached_num;
>>>>>>>>>>     void *sconf =3D s->module_config;
>>>>>>>>>>     conf =3D (proxy_server_conf *)ap_get_module_config(sconf, =
&proxy_module);
>>>>>>>>>> +
>>>>>>>>>>     /*
>>>>>>>>>>      * During create_proxy_config() we created a dummy id. =
Now that
>>>>>>>>>>      * we have identifying info, we can create the real id
>>>>>>>>>> @@ -794,11 +797,39 @@ static int =
balancer_post_config(apr_pool
>>>>>>>>>>                      (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>>>>                      (int)conf->balancers->nelts, =
conf->max_balancers);
>>>>>>>>>>=20
>>>>>>>>>> -            rv =3D storage->create(&new, conf->id,
>>>>>>>>>> -                                 =
ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>>>> -                                 conf->max_balancers, type, =
pconf);
>>>>>>>>>> +            /* First try to attach() since the number of =
configured balancers
>>>>>>>>>> +             * may have changed during restart, and we don't =
want create() to
>>>>>>>>>> +             * fail because the overall size * number of =
entries is not stricly
>>>>>>>>>> +             * identical to the previous run.  There may =
still be enough room
>>>>>>>>>> +             * for this new run thanks to bgrowth margin, so =
if attach()
>>>>>>>>>> +             * succeeds we can only check for the number of =
available entries
>>>>>>>>>> +             * to be *greater or* equal to what we need now. =
 If attach() fails
>>>>>>>>>> +             * we simply fall back to create().
>>>>>>>>>> +             */
>>>>>>>>>> +            rv =3D storage->attach(&new, conf->id,
>>>>>>>>>> +                                 &attached_size, =
&attached_num,
>>>>>>>>>> +                                 pconf);
>>>>>>>>>> +            if (rv !=3D APR_SUCCESS) {
>>>>>>>>>> +                rv =3D storage->create(&new, conf->id,
>>>>>>>>>> +                                     =
ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>>>> +                                     conf->max_balancers, =
type, pconf);
>>>>>>>>>> +            }
>>>>>>>>>> +            else {
>>>>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, =
APLOGNO(02964)
>>>>>>>>>> +                             "Balancers attached: %d, %d =
(%d)",
>>>>>>>>>> +                             =
(int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>>>> +                             (int)attached_num, =
conf->max_balancers);
>>>>>>>>>> +                if (attached_size =3D=3D =
ALIGNED_PROXY_BALANCER_SHARED_SIZE
>>>>>>>>>> +                        && attached_num >=3D =
conf->balancers->nelts) {
>>>>>>>>>> +                    conf->max_balancers =3D attached_num;
>>>>>>>>>> +                }
>>>>>>>>>> +                else {
>>>>>>>>>> +                    rv =3D APR_ENOSPC;
>>>>>>>>>> +                }
>>>>>>>>>> +            }
>>>>>>>>>>         if (rv !=3D APR_SUCCESS) {
>>>>>>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01179) "balancer slotmem_create failed");
>>>>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01179)
>>>>>>>>>> +                             "balancer slotmem create or =
attach failed");
>>>>>>>>>>             return !OK;
>>>>>>>>>>         }
>>>>>>>>>>         conf->bslot =3D new;
>>>>>>>>>> @@ -864,11 +895,32 @@ static int =
balancer_post_config(apr_pool
>>>>>>>>>>                      (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>>>>                      (int)balancer->max_workers, i);
>>>>>>>>>>=20
>>>>>>>>>> -            rv =3D storage->create(&new, balancer->s->sname,
>>>>>>>>>> -                                 =
ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>>>> -                                 balancer->max_workers, =
type, pconf);
>>>>>>>>>> +            /* try to attach first (see rationale from =
balancers above) */
>>>>>>>>>> +            rv =3D storage->attach(&new, balancer->s->sname,
>>>>>>>>>> +                                 &attached_size, =
&attached_num,
>>>>>>>>>> +                                 pconf);
>>>>>>>>>> +            if (rv !=3D APR_SUCCESS) {
>>>>>>>>>> +                rv =3D storage->create(&new, =
balancer->s->sname,
>>>>>>>>>> +                                     =
ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>>>> +                                     balancer->max_workers, =
type, pconf);
>>>>>>>>>> +            }
>>>>>>>>>> +            else {
>>>>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, =
APLOGNO(02965)
>>>>>>>>>> +                             "Workers attached: %s (%s), %d, =
%d (%d) [%u]",
>>>>>>>>>> +                             balancer->s->name, =
balancer->s->sname,
>>>>>>>>>> +                             =
(int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>>>> +                             (int)attached_num, =
balancer->max_workers, i);
>>>>>>>>>> +                if (attached_size =3D=3D =
ALIGNED_PROXY_WORKER_SHARED_SIZE
>>>>>>>>>> +                        && attached_num >=3D =
balancer->workers->nelts) {
>>>>>>>>>> +                    balancer->max_workers =3D attached_num;
>>>>>>>>>> +                }
>>>>>>>>>> +                else {
>>>>>>>>>> +                    rv =3D APR_ENOSPC;
>>>>>>>>>> +                }
>>>>>>>>>> +            }
>>>>>>>>>>         if (rv !=3D APR_SUCCESS) {
>>>>>>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01185) "worker slotmem_create failed");
>>>>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01185)
>>>>>>>>>> +                             "worker slotmem create or =
attach failed");
>>>>>>>>>>             return !OK;
>>>>>>>>>>         }
>>>>>>>>>>         balancer->wslot =3D new;
>>>>>>>>>>=20
>>>>>>>>>>=20
>>>>>>>>>=20
>>>>>>>=20
>>>>>=20
>>>=20


From dev-return-83564-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 15:11:45 2015
Return-Path: <dev-return-83564-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3C9601876D
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 15:11:45 +0000 (UTC)
Received: (qmail 18485 invoked by uid 500); 25 Aug 2015 15:11:44 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 18426 invoked by uid 500); 25 Aug 2015 15:11:44 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 18410 invoked by uid 99); 25 Aug 2015 15:11:44 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 15:11:44 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 2620C1AAD10
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 15:11:44 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.801
X-Spam-Level:
X-Spam-Status: No, score=0.801 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, KAM_ASCII_DIVIDERS=0.8,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 8l_6ql1qL3L6 for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 15:11:37 +0000 (UTC)
Received: from resqmta-ch2-01v.sys.comcast.net (resqmta-ch2-01v.sys.comcast.net [69.252.207.33])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 52D1B42BA2
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 15:11:37 +0000 (UTC)
Received: from resomta-ch2-05v.sys.comcast.net ([69.252.207.101])
	by resqmta-ch2-01v.sys.comcast.net with comcast
	id 93As1r0012Bo0NV013BXhi; Tue, 25 Aug 2015 15:11:31 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-05v.sys.comcast.net with comcast
	id 93BW1r00E2U0RYt013BWkv; Tue, 25 Aug 2015 15:11:31 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CAKQ1sVPiqwKe1-GTvd52iYS-KL2fLpNtFzxfXDPEkKAXGeFRjw@mail.gmail.com>
Date: Tue, 25 Aug 2015 11:11:30 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <76E1A3C0-4659-4ECE-AA3E-E9B438E7B9A9@jaguNET.com>
References: <20150821123403.6E568AC04B1@hades.apache.org> <CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com> <CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com> <6A1F4945-5B3E-4C1D-88E9-4B0A71D59F6C@jaguNET.com> <CAKQ1sVNZkfYEbktR1t8C6pt+gVxTZGn-SdmD9UWf8upw2kW0vg@mail.gmail.com> <EEA9C20F-2F7F-41BD-8465-5E42D13999F5@jaguNET.com> <CAKQ1sVPTDVw30xZM=Utr0Oc+-A23DfaDLCQ4eD0VXJqg5eOB6Q@mail.gmail.com> <C029DF93-9430-4A63-98A8-BFFA002186F4@jaguNET.com> <CAKQ1sVPiqwKe1-GTvd52iYS-KL2fLpNtFzxfXDPEkKAXGeFRjw@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440515491;
	bh=A5C77o7QvoKSLGbIrKgJEp9VmkNyFmjnxuyzYo7X2zM=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=Iy3HEZl4/Zcax2cxC+UQ6khGhfhGziHuxOqPxRcruR3IadlFaKWLMhXugcDYMZUAn
	 SkxprLHqQwUvNOg9pH6KGoRgZ4i6H9n+9/pleqpn6pzm6YNWelwUQpZxhacI2Hofts
	 qW8jww5V6XaDAispg6eSJz0ZzF2C+IYD74NKqsYSqdi0XycCmdHUnHgA/onlWdeYYu
	 gOAybFw3Ks/+//0HGvHnuFGXtd/wrprYZISvwoOo2yoDHFS2CqULTT87cOOl9v2o1o
	 B9HODCm27REjF23U2qSvSB2tZEMMj8qUQJ8ZGqoAYZyBkkUEYKkCrUE15ykwun/qiA
	 ktY/HVjjXBgkw==


> On Aug 25, 2015, at 10:41 AM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>=20
> I don't see the difference between the configuration via
> balancer-manager or file+graceful-restart, both can change the number
> of balancers/members AND the settings while children are running.
> I'd kind of agree if we were talking about non-graceful restarts or
> first startup, we could add a new storage->destroy() method to do the
> job depending on the slotmem provider (though what about remote
> storage shared between multiple httpds?).
> Currently any restart (graceful or not) reuses the existing slots,

As it should, and as I designed it, yeah. The whole assumption
is that restarts DO NOT CHANGE THE REVERSE PROXY CONFIG.

> even if the settings changed (but the size of the slot prior to this
> commit), so your proposed changes may break compatibility too...
>=20

Please note how the runtime state from a persisted slotmem
is re-used and how/when/if it is over-written or over-writes.
Please don't change the behavior of what it is currently doing
based on the feedback and insights and discussions of years
to what you think it should be doing, or what you want it to
do. If it's broke, fix it. But don't just change it. :)

Again, if the slotmem exists and is persisted, the assumption
is that THAT is what the admin wants, and when Apache restarts,
THAT is the running config they desire. If there are changes
to the reverse proxy setup, the assumption must be we are
starting from scratch; There are, iirc, a number of places where
these kinds of checks are done. Trying to somehow "merge" a just-changed
file config and a running config (based on an older file config
with dynamic changes) is nasty and tough to do correctly.

>=20
> On Tue, Aug 25, 2015 at 3:59 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>> When 1st configured, Apache sees how many balancers there are
>> set in the config file. It then pads that amount by growth to
>> allow for the to-be-added dynamic addition of new balancers via
>> the balancer manager (ala adding members).
>>=20
>> The assumption is that if the actual config file is changed,
>> then the runtime configuration of balancers and members
>> is no longer valid; after all, if someone is changing the
>> config file, they could have done the same to add/change
>> bal/mem settings. So a config file change means something
>> more "serious" at which point the dynamic config should be
>> considered void and Apache starts with a clean (dynamic) slate
>> and just uses what's in the config only.
>>=20
>>> On Aug 25, 2015, at 9:48 AM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>>>=20
>>> Hm, what's the point of the balancers and balancer->workers growth =
margin then?
>>> The first time the configration is loaded we create enough room for
>>> adding new balancers/workers, and on (graceful) restart we wouldn't
>>> use this space?
>>> That's also how the balancer-manager works when adding a new worker =
to
>>> a balancer, AFAICT.
>>>=20
>>>=20
>>> On Tue, Aug 25, 2015 at 3:43 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>>>> You mean via changing the config file? If so, then all bets
>>>> are off. You change the config file and restart then Apache
>>>> should start off w/ a clean slate. Even so, you need to handle
>>>> freeing the old shared mem segment and creating a brand new one
>>>> with the "correct" size... Trying to "use" the old one is
>>>> just fraught with issues.
>>>>=20
>>>>=20
>>>>> On Aug 25, 2015, at 9:15 AM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>>>>>=20
>>>>> Well, if one adds a new balancer before restarting, at post_config
>>>>> time conf->balancers->nelts is +1 wrt the previous load...
>>>>>=20
>>>>> On Tue, Aug 25, 2015 at 2:46 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>>>>>> But the number of balancers does not change yet... And when it
>>>>>> is implemented the overall size of the storage slot should =
*never*
>>>>>> change. It must be constant, ala the scoreboard.
>>>>>>=20
>>>>>>> On Aug 25, 2015, at 8:39 AM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>>>>>>>=20
>>>>>>> At every startup, in balancer_post_config:
>>>>>>> conf->max_balancers =3D conf->balancers->nelts + conf->bgrowth;
>>>>>>>=20
>>>>>>> which means that if you add a balancer and restart, =
storage->create()
>>>>>>> (eg. slotmem_create) will try to find an existing slot with this =
ID
>>>>>>> and the exact ALIGNED_PROXY_BALANCER_SHARED_SIZE * =
conf->max_balancers
>>>>>>> size, and fail:
>>>>>>> if (apr_shm_size_get(shm) !=3D size) {
>>>>>>>     apr_shm_detach(shm);
>>>>>>>     ap_log_error(APLOG_MARK, APLOG_ERR, 0, ap_server_conf, =
APLOGNO(02599)
>>>>>>>                  "existing shared memory for %s could not be =
used
>>>>>>> (failed size check)",
>>>>>>>                  fname);
>>>>>>>     return APR_EINVAL;
>>>>>>> }
>>>>>>>=20
>>>>>>> By using storage->attach() first (which is based on the ID only =
and
>>>>>>> returns the existing item_size and item_num), we can do the =
check
>>>>>>> ourselves and fail only if conf->max_balancers > item_num, =
allowing
>>>>>>> for balancers to be added thanks to growth margin used at =
startup.
>>>>>>>=20
>>>>>>> On Tue, Aug 25, 2015 at 2:12 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>>>>>>>> How and when do ALIGNED_PROXY_BALANCER_SHARED_SIZE and =
conf->max_balancers
>>>>>>>> change???
>>>>>>>>=20
>>>>>>>>> On Aug 21, 2015, at 8:34 AM, ylavic@apache.org wrote:
>>>>>>>>>=20
>>>>>>>>> Author: ylavic
>>>>>>>>> Date: Fri Aug 21 12:34:02 2015
>>>>>>>>> New Revision: 1696960
>>>>>>>>>=20
>>>>>>>>> URL: http://svn.apache.org/r1696960
>>>>>>>>> Log:
>>>>>>>>> mod_proxy_balancer: Fix balancers and balancer members reuse =
on
>>>>>>>>> restart when new ones are added.  PR 58024.
>>>>>>>>>=20
>>>>>>>>> Since slotmem_create() issues a strict check on the size of an =
existing
>>>>>>>>> slot before reusing it, it won't reuse existing balancers and =
members when
>>>>>>>>> new ones are added during restart (whereas growth margins =
would allow it).
>>>>>>>>> Fix this by using slotmem_attach() first and if it succeeds do =
the checks
>>>>>>>>> based on the returned previous number of existing entries.
>>>>>>>>>=20
>>>>>>>>> Modified:
>>>>>>>>> httpd/httpd/trunk/CHANGES
>>>>>>>>> httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>>>>>> httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>>>>>>=20
>>>>>>>>> Modified: httpd/httpd/trunk/CHANGES
>>>>>>>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=3D1696960&r1=3D=
1696959&r2=3D1696960&view=3Ddiff
>>>>>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>>>>>>>> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
>>>>>>>>> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Aug 21 12:34:02 2015
>>>>>>>>> @@ -1,6 +1,9 @@
>>>>>>>>>                                                      -*- =
coding: utf-8 -*-
>>>>>>>>> Changes with Apache 2.5.0
>>>>>>>>>=20
>>>>>>>>> +  *) mod_proxy_balancer: Fix balancers and balancer members =
reuse on
>>>>>>>>> +     restart when new ones are added.  PR 58024.  [Yann =
Ylavic]
>>>>>>>>> +
>>>>>>>>> *) mod_socache_memcache: Add the 'MemcacheConnTTL' directive =
to control how
>>>>>>>>>  long to keep idle connections with the memcache server(s).
>>>>>>>>>  Change default value from 600 usec (!) to 15 sec. PR 58091
>>>>>>>>>=20
>>>>>>>>> Modified: httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>>>>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/log-message-tags/next-=
number?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
>>>>>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>>>>>>>> --- httpd/httpd/trunk/docs/log-message-tags/next-number =
(original)
>>>>>>>>> +++ httpd/httpd/trunk/docs/log-message-tags/next-number Fri =
Aug 21 12:34:02 2015
>>>>>>>>> @@ -1 +1 @@
>>>>>>>>> -2964
>>>>>>>>> +2966
>>>>>>>>>=20
>>>>>>>>> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>>>>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_bal=
ancer.c?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
>>>>>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>>>>>>>> --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c =
(original)
>>>>>>>>> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Fri =
Aug 21 12:34:02 2015
>>>>>>>>> @@ -761,8 +761,11 @@ static int balancer_post_config(apr_pool
>>>>>>>>>     char *id;
>>>>>>>>>     proxy_balancer *balancer;
>>>>>>>>>     ap_slotmem_type_t type;
>>>>>>>>> +        apr_size_t attached_size;
>>>>>>>>> +        unsigned int attached_num;
>>>>>>>>>     void *sconf =3D s->module_config;
>>>>>>>>>     conf =3D (proxy_server_conf *)ap_get_module_config(sconf, =
&proxy_module);
>>>>>>>>> +
>>>>>>>>>     /*
>>>>>>>>>      * During create_proxy_config() we created a dummy id. Now =
that
>>>>>>>>>      * we have identifying info, we can create the real id
>>>>>>>>> @@ -794,11 +797,39 @@ static int balancer_post_config(apr_pool
>>>>>>>>>                      (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>>>                      (int)conf->balancers->nelts, =
conf->max_balancers);
>>>>>>>>>=20
>>>>>>>>> -            rv =3D storage->create(&new, conf->id,
>>>>>>>>> -                                 =
ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>>> -                                 conf->max_balancers, type, =
pconf);
>>>>>>>>> +            /* First try to attach() since the number of =
configured balancers
>>>>>>>>> +             * may have changed during restart, and we don't =
want create() to
>>>>>>>>> +             * fail because the overall size * number of =
entries is not stricly
>>>>>>>>> +             * identical to the previous run.  There may =
still be enough room
>>>>>>>>> +             * for this new run thanks to bgrowth margin, so =
if attach()
>>>>>>>>> +             * succeeds we can only check for the number of =
available entries
>>>>>>>>> +             * to be *greater or* equal to what we need now.  =
If attach() fails
>>>>>>>>> +             * we simply fall back to create().
>>>>>>>>> +             */
>>>>>>>>> +            rv =3D storage->attach(&new, conf->id,
>>>>>>>>> +                                 &attached_size, =
&attached_num,
>>>>>>>>> +                                 pconf);
>>>>>>>>> +            if (rv !=3D APR_SUCCESS) {
>>>>>>>>> +                rv =3D storage->create(&new, conf->id,
>>>>>>>>> +                                     =
ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>>> +                                     conf->max_balancers, =
type, pconf);
>>>>>>>>> +            }
>>>>>>>>> +            else {
>>>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, =
APLOGNO(02964)
>>>>>>>>> +                             "Balancers attached: %d, %d =
(%d)",
>>>>>>>>> +                             =
(int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>>>> +                             (int)attached_num, =
conf->max_balancers);
>>>>>>>>> +                if (attached_size =3D=3D =
ALIGNED_PROXY_BALANCER_SHARED_SIZE
>>>>>>>>> +                        && attached_num >=3D =
conf->balancers->nelts) {
>>>>>>>>> +                    conf->max_balancers =3D attached_num;
>>>>>>>>> +                }
>>>>>>>>> +                else {
>>>>>>>>> +                    rv =3D APR_ENOSPC;
>>>>>>>>> +                }
>>>>>>>>> +            }
>>>>>>>>>         if (rv !=3D APR_SUCCESS) {
>>>>>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01179) "balancer slotmem_create failed");
>>>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01179)
>>>>>>>>> +                             "balancer slotmem create or =
attach failed");
>>>>>>>>>             return !OK;
>>>>>>>>>         }
>>>>>>>>>         conf->bslot =3D new;
>>>>>>>>> @@ -864,11 +895,32 @@ static int balancer_post_config(apr_pool
>>>>>>>>>                      (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>>>                      (int)balancer->max_workers, i);
>>>>>>>>>=20
>>>>>>>>> -            rv =3D storage->create(&new, balancer->s->sname,
>>>>>>>>> -                                 =
ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>>> -                                 balancer->max_workers, type, =
pconf);
>>>>>>>>> +            /* try to attach first (see rationale from =
balancers above) */
>>>>>>>>> +            rv =3D storage->attach(&new, balancer->s->sname,
>>>>>>>>> +                                 &attached_size, =
&attached_num,
>>>>>>>>> +                                 pconf);
>>>>>>>>> +            if (rv !=3D APR_SUCCESS) {
>>>>>>>>> +                rv =3D storage->create(&new, =
balancer->s->sname,
>>>>>>>>> +                                     =
ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>>> +                                     balancer->max_workers, =
type, pconf);
>>>>>>>>> +            }
>>>>>>>>> +            else {
>>>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, =
APLOGNO(02965)
>>>>>>>>> +                             "Workers attached: %s (%s), %d, =
%d (%d) [%u]",
>>>>>>>>> +                             balancer->s->name, =
balancer->s->sname,
>>>>>>>>> +                             =
(int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>>>> +                             (int)attached_num, =
balancer->max_workers, i);
>>>>>>>>> +                if (attached_size =3D=3D =
ALIGNED_PROXY_WORKER_SHARED_SIZE
>>>>>>>>> +                        && attached_num >=3D =
balancer->workers->nelts) {
>>>>>>>>> +                    balancer->max_workers =3D attached_num;
>>>>>>>>> +                }
>>>>>>>>> +                else {
>>>>>>>>> +                    rv =3D APR_ENOSPC;
>>>>>>>>> +                }
>>>>>>>>> +            }
>>>>>>>>>         if (rv !=3D APR_SUCCESS) {
>>>>>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01185) "worker slotmem_create failed");
>>>>>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01185)
>>>>>>>>> +                             "worker slotmem create or attach =
failed");
>>>>>>>>>             return !OK;
>>>>>>>>>         }
>>>>>>>>>         balancer->wslot =3D new;
>>>>>>>>>=20
>>>>>>>>>=20
>>>>>>>>=20
>>>>>>=20
>>>>=20
>>=20


From dev-return-83565-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 15:14:10 2015
Return-Path: <dev-return-83565-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D10C4187A7
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 15:14:10 +0000 (UTC)
Received: (qmail 56458 invoked by uid 500); 25 Aug 2015 15:14:05 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 56390 invoked by uid 500); 25 Aug 2015 15:14:05 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 56354 invoked by uid 99); 25 Aug 2015 15:14:05 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 15:14:05 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id B5B0F1AAB21
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 15:14:04 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level:
X-Spam-Status: No, score=0.001 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id OUMDuPmCjEsA for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 15:13:53 +0000 (UTC)
Received: from resqmta-ch2-03v.sys.comcast.net (resqmta-ch2-03v.sys.comcast.net [69.252.207.35])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 74F6B506A7
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 15:13:53 +0000 (UTC)
Received: from resomta-ch2-17v.sys.comcast.net ([69.252.207.113])
	by resqmta-ch2-03v.sys.comcast.net with comcast
	id 93Cf1r0022TL4Rh013DtKR; Tue, 25 Aug 2015 15:13:53 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-17v.sys.comcast.net with comcast
	id 93Ds1r00G2U0RYt013Ds5M; Tue, 25 Aug 2015 15:13:53 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: maintainer mode and test framework
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <42280079-9E1F-457A-9D8C-BEFD87AB6E45@greenbytes.de>
Date: Tue, 25 Aug 2015 11:13:52 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <7D7ECCEB-F042-4206-980C-22FD2BB07F4E@jaguNET.com>
References: <42280079-9E1F-457A-9D8C-BEFD87AB6E45@greenbytes.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440515633;
	bh=Re27sSAk6a99yAIIvVVBwLMDKPm6+rCuKeBfGksy8VQ=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=QpxiU/hCEa3zqWvetYhKUMwQNQjjpg8VW+TP/IMk2nwd/w+eftFGJLxsj1zhSAi5y
	 0MPMDhJeoeIB3bGkD0WxO7TGbkVVppua5RyOQPuC9rKPDCfr4EFRYedO63hW5YH/Mi
	 Rt4F6eFfOuqtYglGZrIhy8J2tSLbAVcFdQAJujT9wICMrE6t2tY108nRgg1wpVhQns
	 DgWcaTOTe2IJutW6C0/sGve7KlgiUnOFsBjJozaXBQc1MNWNqR+usdpAX1XSb/ISL/
	 8jD10/ehG6fINGIPhByQM3LsJGBSgkazop3RRZtvS8YlffLg6RyReUMrdhAC/PjWC/
	 Ilc1vaov+Hh7Q==


> On Aug 24, 2015, at 9:23 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>=20
> Just a tiny question how the senior guys here do to:
>=20
> If I build httpd in maintainer-mode (which I want), the test framework =
will no longer build since it inherits the compiler flags from apxs, I =
assume.
>=20
> Is there an easy way around this?
>=20

I *always* build in maintainer-mode and never have had the test
framework not build... What issues are you having?



From dev-return-83566-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 15:37:12 2015
Return-Path: <dev-return-83566-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5313A188D1
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 15:37:12 +0000 (UTC)
Received: (qmail 34111 invoked by uid 500); 25 Aug 2015 15:37:11 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 34049 invoked by uid 500); 25 Aug 2015 15:37:11 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 34039 invoked by uid 99); 25 Aug 2015 15:37:11 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 15:37:11 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 2945BEDC70
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 15:37:11 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.68
X-Spam-Level:
X-Spam-Status: No, score=0.68 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	KAM_ASCII_DIVIDERS=0.8, RCVD_IN_MSPIKE_H3=-0.01,
	RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id JI6jLEpThIDe for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 15:37:04 +0000 (UTC)
Received: from mail-ig0-f194.google.com (mail-ig0-f194.google.com [209.85.213.194])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id E2CEF261CF
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 15:37:03 +0000 (UTC)
Received: by igcse8 with SMTP id se8so1746627igc.2
        for <dev@httpd.apache.org>; Tue, 25 Aug 2015 08:37:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=1DJG1pzicj9ZjIjNfYJmwkFQhyRpKqtMj11bIx20YBA=;
        b=R8qY6n+fjF9a2+FnD5kqnDdxxfm361VIASDpkH1SJVJOohoRENY1jT4h9Mx8O2i1oT
         1SWsx2ixHwrhBIt7nOboX89DZAzHn+mEiTK5u/1BdB51YCuldU1cOxFFCvcmjGnW9HWT
         Ld3HUb/61yVKJ7GJb4M5jopEzH7MDNSGgdshqvDfWN1kHdu/Nf7sNHXjWJBqlqSZk0Wl
         JJqDthssqs0OCfGIjySipQDkB9YqiZfjHZ+YNm/dCkl52OoG0i86K+kaHgMrRaXXpFCN
         Gwk84mje7PmSuLlxsRD5CxUlxrnRaFPTxYQjvRdTJmzglCbcCCa4tl7LnYEA2D/ZirBC
         nq7Q==
MIME-Version: 1.0
X-Received: by 10.50.43.134 with SMTP id w6mr2434115igl.74.1440509188103; Tue,
 25 Aug 2015 06:26:28 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Tue, 25 Aug 2015 06:26:28 -0700 (PDT)
In-Reply-To: <CAKQ1sVNZkfYEbktR1t8C6pt+gVxTZGn-SdmD9UWf8upw2kW0vg@mail.gmail.com>
References: <20150821123403.6E568AC04B1@hades.apache.org>
	<CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com>
	<CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com>
	<6A1F4945-5B3E-4C1D-88E9-4B0A71D59F6C@jaguNET.com>
	<CAKQ1sVNZkfYEbktR1t8C6pt+gVxTZGn-SdmD9UWf8upw2kW0vg@mail.gmail.com>
Date: Tue, 25 Aug 2015 15:26:28 +0200
Message-ID: <CAKQ1sVMHUpo031N9rVUpvWX0otYC-ZfpXQVgxtoh94jyxOB8pw@mail.gmail.com>
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES
 docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

With this commit the overall size of the storage slot does not change,
the slot is attached and if it has enough room (growth margin) for the
new configuration, it is used (like with the balancer-manager),
otherwise the restart fails.

On Tue, Aug 25, 2015 at 3:15 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
> Well, if one adds a new balancer before restarting, at post_config
> time conf->balancers->nelts is +1 wrt the previous load...
>
> On Tue, Aug 25, 2015 at 2:46 PM, Jim Jagielski <jim@jagunet.com> wrote:
>> But the number of balancers does not change yet... And when it
>> is implemented the overall size of the storage slot should *never*
>> change. It must be constant, ala the scoreboard.
>>
>>> On Aug 25, 2015, at 8:39 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>>
>>> At every startup, in balancer_post_config:
>>>    conf->max_balancers = conf->balancers->nelts + conf->bgrowth;
>>>
>>> which means that if you add a balancer and restart, storage->create()
>>> (eg. slotmem_create) will try to find an existing slot with this ID
>>> and the exact ALIGNED_PROXY_BALANCER_SHARED_SIZE * conf->max_balancers
>>> size, and fail:
>>>    if (apr_shm_size_get(shm) != size) {
>>>        apr_shm_detach(shm);
>>>        ap_log_error(APLOG_MARK, APLOG_ERR, 0, ap_server_conf, APLOGNO(02599)
>>>                     "existing shared memory for %s could not be used
>>> (failed size check)",
>>>                     fname);
>>>        return APR_EINVAL;
>>>    }
>>>
>>> By using storage->attach() first (which is based on the ID only and
>>> returns the existing item_size and item_num), we can do the check
>>> ourselves and fail only if conf->max_balancers > item_num, allowing
>>> for balancers to be added thanks to growth margin used at startup.
>>>
>>> On Tue, Aug 25, 2015 at 2:12 PM, Jim Jagielski <jim@jagunet.com> wrote:
>>>> How and when do ALIGNED_PROXY_BALANCER_SHARED_SIZE and conf->max_balancers
>>>> change???
>>>>
>>>>> On Aug 21, 2015, at 8:34 AM, ylavic@apache.org wrote:
>>>>>
>>>>> Author: ylavic
>>>>> Date: Fri Aug 21 12:34:02 2015
>>>>> New Revision: 1696960
>>>>>
>>>>> URL: http://svn.apache.org/r1696960
>>>>> Log:
>>>>> mod_proxy_balancer: Fix balancers and balancer members reuse on
>>>>> restart when new ones are added.  PR 58024.
>>>>>
>>>>> Since slotmem_create() issues a strict check on the size of an existing
>>>>> slot before reusing it, it won't reuse existing balancers and members when
>>>>> new ones are added during restart (whereas growth margins would allow it).
>>>>> Fix this by using slotmem_attach() first and if it succeeds do the checks
>>>>> based on the returned previous number of existing entries.
>>>>>
>>>>> Modified:
>>>>>   httpd/httpd/trunk/CHANGES
>>>>>   httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>>   httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>>
>>>>> Modified: httpd/httpd/trunk/CHANGES
>>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=1696960&r1=1696959&r2=1696960&view=diff
>>>>> ==============================================================================
>>>>> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
>>>>> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Aug 21 12:34:02 2015
>>>>> @@ -1,6 +1,9 @@
>>>>>                                                         -*- coding: utf-8 -*-
>>>>> Changes with Apache 2.5.0
>>>>>
>>>>> +  *) mod_proxy_balancer: Fix balancers and balancer members reuse on
>>>>> +     restart when new ones are added.  PR 58024.  [Yann Ylavic]
>>>>> +
>>>>>  *) mod_socache_memcache: Add the 'MemcacheConnTTL' directive to control how
>>>>>     long to keep idle connections with the memcache server(s).
>>>>>     Change default value from 600 usec (!) to 15 sec. PR 58091
>>>>>
>>>>> Modified: httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/log-message-tags/next-number?rev=1696960&r1=1696959&r2=1696960&view=diff
>>>>> ==============================================================================
>>>>> --- httpd/httpd/trunk/docs/log-message-tags/next-number (original)
>>>>> +++ httpd/httpd/trunk/docs/log-message-tags/next-number Fri Aug 21 12:34:02 2015
>>>>> @@ -1 +1 @@
>>>>> -2964
>>>>> +2966
>>>>>
>>>>> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c?rev=1696960&r1=1696959&r2=1696960&view=diff
>>>>> ==============================================================================
>>>>> --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c (original)
>>>>> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Fri Aug 21 12:34:02 2015
>>>>> @@ -761,8 +761,11 @@ static int balancer_post_config(apr_pool
>>>>>        char *id;
>>>>>        proxy_balancer *balancer;
>>>>>        ap_slotmem_type_t type;
>>>>> +        apr_size_t attached_size;
>>>>> +        unsigned int attached_num;
>>>>>        void *sconf = s->module_config;
>>>>>        conf = (proxy_server_conf *)ap_get_module_config(sconf, &proxy_module);
>>>>> +
>>>>>        /*
>>>>>         * During create_proxy_config() we created a dummy id. Now that
>>>>>         * we have identifying info, we can create the real id
>>>>> @@ -794,11 +797,39 @@ static int balancer_post_config(apr_pool
>>>>>                         (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>                         (int)conf->balancers->nelts, conf->max_balancers);
>>>>>
>>>>> -            rv = storage->create(&new, conf->id,
>>>>> -                                 ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>> -                                 conf->max_balancers, type, pconf);
>>>>> +            /* First try to attach() since the number of configured balancers
>>>>> +             * may have changed during restart, and we don't want create() to
>>>>> +             * fail because the overall size * number of entries is not stricly
>>>>> +             * identical to the previous run.  There may still be enough room
>>>>> +             * for this new run thanks to bgrowth margin, so if attach()
>>>>> +             * succeeds we can only check for the number of available entries
>>>>> +             * to be *greater or* equal to what we need now.  If attach() fails
>>>>> +             * we simply fall back to create().
>>>>> +             */
>>>>> +            rv = storage->attach(&new, conf->id,
>>>>> +                                 &attached_size, &attached_num,
>>>>> +                                 pconf);
>>>>> +            if (rv != APR_SUCCESS) {
>>>>> +                rv = storage->create(&new, conf->id,
>>>>> +                                     ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>> +                                     conf->max_balancers, type, pconf);
>>>>> +            }
>>>>> +            else {
>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, APLOGNO(02964)
>>>>> +                             "Balancers attached: %d, %d (%d)",
>>>>> +                             (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>> +                             (int)attached_num, conf->max_balancers);
>>>>> +                if (attached_size == ALIGNED_PROXY_BALANCER_SHARED_SIZE
>>>>> +                        && attached_num >= conf->balancers->nelts) {
>>>>> +                    conf->max_balancers = attached_num;
>>>>> +                }
>>>>> +                else {
>>>>> +                    rv = APR_ENOSPC;
>>>>> +                }
>>>>> +            }
>>>>>            if (rv != APR_SUCCESS) {
>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01179) "balancer slotmem_create failed");
>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01179)
>>>>> +                             "balancer slotmem create or attach failed");
>>>>>                return !OK;
>>>>>            }
>>>>>            conf->bslot = new;
>>>>> @@ -864,11 +895,32 @@ static int balancer_post_config(apr_pool
>>>>>                         (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>                         (int)balancer->max_workers, i);
>>>>>
>>>>> -            rv = storage->create(&new, balancer->s->sname,
>>>>> -                                 ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>> -                                 balancer->max_workers, type, pconf);
>>>>> +            /* try to attach first (see rationale from balancers above) */
>>>>> +            rv = storage->attach(&new, balancer->s->sname,
>>>>> +                                 &attached_size, &attached_num,
>>>>> +                                 pconf);
>>>>> +            if (rv != APR_SUCCESS) {
>>>>> +                rv = storage->create(&new, balancer->s->sname,
>>>>> +                                     ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>> +                                     balancer->max_workers, type, pconf);
>>>>> +            }
>>>>> +            else {
>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, APLOGNO(02965)
>>>>> +                             "Workers attached: %s (%s), %d, %d (%d) [%u]",
>>>>> +                             balancer->s->name, balancer->s->sname,
>>>>> +                             (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>> +                             (int)attached_num, balancer->max_workers, i);
>>>>> +                if (attached_size == ALIGNED_PROXY_WORKER_SHARED_SIZE
>>>>> +                        && attached_num >= balancer->workers->nelts) {
>>>>> +                    balancer->max_workers = attached_num;
>>>>> +                }
>>>>> +                else {
>>>>> +                    rv = APR_ENOSPC;
>>>>> +                }
>>>>> +            }
>>>>>            if (rv != APR_SUCCESS) {
>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01185) "worker slotmem_create failed");
>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, APLOGNO(01185)
>>>>> +                             "worker slotmem create or attach failed");
>>>>>                return !OK;
>>>>>            }
>>>>>            balancer->wslot = new;
>>>>>
>>>>>
>>>>
>>

From dev-return-83567-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 15:39:21 2015
Return-Path: <dev-return-83567-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8638F188FE
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 15:39:21 +0000 (UTC)
Received: (qmail 47182 invoked by uid 500); 25 Aug 2015 15:39:21 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 47103 invoked by uid 500); 25 Aug 2015 15:39:21 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 47093 invoked by uid 99); 25 Aug 2015 15:39:21 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 15:39:21 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 786E6EDC4A
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 15:39:20 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.001
X-Spam-Level: ***
X-Spam-Status: No, score=3.001 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id lDScCi5bGwTF for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 15:39:07 +0000 (UTC)
Received: from mail-ig0-f175.google.com (mail-ig0-f175.google.com [209.85.213.175])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 665192619B
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 15:39:07 +0000 (UTC)
Received: by igfj19 with SMTP id j19so14178902igf.1
        for <dev@httpd.apache.org>; Tue, 25 Aug 2015 08:39:06 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=oMYC1FutOGixR3J2jkeINkyfgoMvf2n092oy5VJKcdk=;
        b=j/SdsDahmztdb7UjlAFgY+nwe/5iO0W7dDAGEKbuGk2ahrNP+cmaDmFI+GzZ9Sp2O8
         KMcpc9L0N2XkXVKFgqiq9pQK6drkQADYS64BaGkr+IzGi5ImwYxFCHei+alzAsAldFTB
         vtqUVdMOD4oSc7M09gR73S9BGcUZu9Tbj0NbaXs/2iAuGSDlvjT9LBb8vQO5Wz3bWVS0
         rc2XPkvAwiHwm54o/IT+skWeDBj2wzYmzTliBJeIRvnWRTGaQJewEtJBGIUYB0bSSmxX
         +gAIMltgUZASjGIbxKxi/A2gtUKW6qV+OTqBFtZ1fE731u+AWOpOxAczlFkdeNjKFkGS
         X1xg==
X-Gm-Message-State: ALoCoQngdB+vIXzqEHEgJmDKXicmTXrUNH9+UsBK7oukXXdhSSAK7VPFjZ+0ZyoU/I2FoM8pOpa+
MIME-Version: 1.0
X-Received: by 10.50.59.148 with SMTP id z20mr3639087igq.77.1440517146628;
 Tue, 25 Aug 2015 08:39:06 -0700 (PDT)
Received: by 10.107.41.9 with HTTP; Tue, 25 Aug 2015 08:39:06 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
In-Reply-To: <7D7ECCEB-F042-4206-980C-22FD2BB07F4E@jaguNET.com>
References: <42280079-9E1F-457A-9D8C-BEFD87AB6E45@greenbytes.de>
	<7D7ECCEB-F042-4206-980C-22FD2BB07F4E@jaguNET.com>
Date: Tue, 25 Aug 2015 10:39:06 -0500
Message-ID: <CACsi253eW4bK7w=B=d=WQ_-fK2C-orqiSz1kgjCK3eVhczEyWg@mail.gmail.com>
Subject: Re: maintainer mode and test framework
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=047d7bea2f9ad170e2051e2488c5

--047d7bea2f9ad170e2051e2488c5
Content-Type: text/plain; charset=UTF-8

Late declarations, all fixed now in r1697392

On Tue, Aug 25, 2015 at 10:13 AM, Jim Jagielski <jim@jagunet.com> wrote:

>
> > On Aug 24, 2015, at 9:23 AM, Stefan Eissing <
> stefan.eissing@greenbytes.de> wrote:
> >
> > Just a tiny question how the senior guys here do to:
> >
> > If I build httpd in maintainer-mode (which I want), the test framework
> will no longer build since it inherits the compiler flags from apxs, I
> assume.
> >
> > Is there an easy way around this?
> >
>
> I *always* build in maintainer-mode and never have had the test
> framework not build... What issues are you having?
>
>
>

--047d7bea2f9ad170e2051e2488c5
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Late declarations, all fixed now in=C2=A0r1697392</div><di=
v class=3D"gmail_extra"><br><div class=3D"gmail_quote">On Tue, Aug 25, 2015=
 at 10:13 AM, Jim Jagielski <span dir=3D"ltr">&lt;<a href=3D"mailto:jim@jag=
unet.com" target=3D"_blank">jim@jagunet.com</a>&gt;</span> wrote:<br><block=
quote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc=
 solid;padding-left:1ex"><span class=3D""><br>
&gt; On Aug 24, 2015, at 9:23 AM, Stefan Eissing &lt;<a href=3D"mailto:stef=
an.eissing@greenbytes.de">stefan.eissing@greenbytes.de</a>&gt; wrote:<br>
&gt;<br>
&gt; Just a tiny question how the senior guys here do to:<br>
&gt;<br>
&gt; If I build httpd in maintainer-mode (which I want), the test framework=
 will no longer build since it inherits the compiler flags from apxs, I ass=
ume.<br>
&gt;<br>
&gt; Is there an easy way around this?<br>
&gt;<br>
<br>
</span>I *always* build in maintainer-mode and never have had the test<br>
framework not build... What issues are you having?<br>
<br>
<br>
</blockquote></div><br></div>

--047d7bea2f9ad170e2051e2488c5--

From dev-return-83568-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 16:16:36 2015
Return-Path: <dev-return-83568-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7C2AD18B0F
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 16:16:36 +0000 (UTC)
Received: (qmail 73908 invoked by uid 500); 25 Aug 2015 16:16:35 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 73841 invoked by uid 500); 25 Aug 2015 16:16:35 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 73831 invoked by uid 99); 25 Aug 2015 16:16:35 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 16:16:35 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 4B02E1AACC7
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 16:16:35 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.801
X-Spam-Level:
X-Spam-Status: No, score=0.801 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, KAM_ASCII_DIVIDERS=0.8,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id QTxyEdEOvqu2 for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 16:16:23 +0000 (UTC)
Received: from resqmta-ch2-11v.sys.comcast.net (resqmta-ch2-11v.sys.comcast.net [69.252.207.43])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 667F1261A5
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 16:16:23 +0000 (UTC)
Received: from resomta-ch2-02v.sys.comcast.net ([69.252.207.98])
	by resqmta-ch2-11v.sys.comcast.net with comcast
	id 94FP1r00627uzMh014GNwx; Tue, 25 Aug 2015 16:16:22 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-02v.sys.comcast.net with comcast
	id 94GN1r00H2U0RYt014GN7g; Tue, 25 Aug 2015 16:16:22 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CAKQ1sVMHUpo031N9rVUpvWX0otYC-ZfpXQVgxtoh94jyxOB8pw@mail.gmail.com>
Date: Tue, 25 Aug 2015 12:16:21 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <6D8E174F-3202-4FE6-9806-851FF4CA8830@jaguNET.com>
References: <20150821123403.6E568AC04B1@hades.apache.org> <CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com> <CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com> <6A1F4945-5B3E-4C1D-88E9-4B0A71D59F6C@jaguNET.com> <CAKQ1sVNZkfYEbktR1t8C6pt+gVxTZGn-SdmD9UWf8upw2kW0vg@mail.gmail.com> <CAKQ1sVMHUpo031N9rVUpvWX0otYC-ZfpXQVgxtoh94jyxOB8pw@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440519382;
	bh=n21xNAZKcTGOv/QSdhnJRq9QRlGRcHAwtfiQi1R1I2k=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=lQv50FzgalHc53IE6jL8FqMcmxXBhbTTUP+uyeNGoFDaO115PuW6JOTimYTmF4FIt
	 BkCqTmbzmYl5qbVZnq+5ZWQKeLQnfNTLrFqy+ShUo5PSn/Ja7omi6F1a3yKXqQQyHe
	 aAJ6UDY/M46kc0XORkcKey4PgdG9l5PZe9gVsF6G7OtHMugu5n57DrKgXzqMdkJL55
	 Dmv+kTay6h+AfApOuYK6Cc3K2KNQzGFGE0IDgJl+cKVB+xwxaiTMnvHIqm4pqm1Oyz
	 AXKitRfh80QjkdeP2mJQXrYLRmgDLRiMqanxzzWF6ZRIFhDFH7fPHOId/yW+Kh8IvR
	 L9h+iItG2jThA==

I see that, but the assumption is that the reason why the size
would have changed is that someone edited the httpd.conf file and
added another balancer. At that point, the more logical thing
would be to wipe the slate clean (as we do in other places
where certain values in the slotmem !=3D what we expect)...
Also, as mentioned, we DO want to fail if the size isn't
the same, and the only way the size can be different is if
someone changed the file config. So the underlying assumption
behind the patch is invalid, imo.

Also, slotmem->create already does an attach when it should; the
below "breaks" the protections provided when using create as the
primary method to "obtain" the slotmem. "Exposing" the attach here
leads to confusion ("why isn't this done elsewhere").

> On Aug 25, 2015, at 9:26 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>=20
> With this commit the overall size of the storage slot does not change,
> the slot is attached and if it has enough room (growth margin) for the
> new configuration, it is used (like with the balancer-manager),
> otherwise the restart fails.
>=20
> On Tue, Aug 25, 2015 at 3:15 PM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>> Well, if one adds a new balancer before restarting, at post_config
>> time conf->balancers->nelts is +1 wrt the previous load...
>>=20
>> On Tue, Aug 25, 2015 at 2:46 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>>> But the number of balancers does not change yet... And when it
>>> is implemented the overall size of the storage slot should *never*
>>> change. It must be constant, ala the scoreboard.
>>>=20
>>>> On Aug 25, 2015, at 8:39 AM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>>>>=20
>>>> At every startup, in balancer_post_config:
>>>>   conf->max_balancers =3D conf->balancers->nelts + conf->bgrowth;
>>>>=20
>>>> which means that if you add a balancer and restart, =
storage->create()
>>>> (eg. slotmem_create) will try to find an existing slot with this ID
>>>> and the exact ALIGNED_PROXY_BALANCER_SHARED_SIZE * =
conf->max_balancers
>>>> size, and fail:
>>>>   if (apr_shm_size_get(shm) !=3D size) {
>>>>       apr_shm_detach(shm);
>>>>       ap_log_error(APLOG_MARK, APLOG_ERR, 0, ap_server_conf, =
APLOGNO(02599)
>>>>                    "existing shared memory for %s could not be used
>>>> (failed size check)",
>>>>                    fname);
>>>>       return APR_EINVAL;
>>>>   }
>>>>=20
>>>> By using storage->attach() first (which is based on the ID only and
>>>> returns the existing item_size and item_num), we can do the check
>>>> ourselves and fail only if conf->max_balancers > item_num, allowing
>>>> for balancers to be added thanks to growth margin used at startup.
>>>>=20
>>>> On Tue, Aug 25, 2015 at 2:12 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>>>>> How and when do ALIGNED_PROXY_BALANCER_SHARED_SIZE and =
conf->max_balancers
>>>>> change???
>>>>>=20
>>>>>> On Aug 21, 2015, at 8:34 AM, ylavic@apache.org wrote:
>>>>>>=20
>>>>>> Author: ylavic
>>>>>> Date: Fri Aug 21 12:34:02 2015
>>>>>> New Revision: 1696960
>>>>>>=20
>>>>>> URL: http://svn.apache.org/r1696960
>>>>>> Log:
>>>>>> mod_proxy_balancer: Fix balancers and balancer members reuse on
>>>>>> restart when new ones are added.  PR 58024.
>>>>>>=20
>>>>>> Since slotmem_create() issues a strict check on the size of an =
existing
>>>>>> slot before reusing it, it won't reuse existing balancers and =
members when
>>>>>> new ones are added during restart (whereas growth margins would =
allow it).
>>>>>> Fix this by using slotmem_attach() first and if it succeeds do =
the checks
>>>>>> based on the returned previous number of existing entries.
>>>>>>=20
>>>>>> Modified:
>>>>>>  httpd/httpd/trunk/CHANGES
>>>>>>  httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>>>  httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>>>=20
>>>>>> Modified: httpd/httpd/trunk/CHANGES
>>>>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=3D1696960&r1=3D=
1696959&r2=3D1696960&view=3Ddiff
>>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>>>>> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
>>>>>> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Aug 21 12:34:02 2015
>>>>>> @@ -1,6 +1,9 @@
>>>>>>                                                        -*- =
coding: utf-8 -*-
>>>>>> Changes with Apache 2.5.0
>>>>>>=20
>>>>>> +  *) mod_proxy_balancer: Fix balancers and balancer members =
reuse on
>>>>>> +     restart when new ones are added.  PR 58024.  [Yann Ylavic]
>>>>>> +
>>>>>> *) mod_socache_memcache: Add the 'MemcacheConnTTL' directive to =
control how
>>>>>>    long to keep idle connections with the memcache server(s).
>>>>>>    Change default value from 600 usec (!) to 15 sec. PR 58091
>>>>>>=20
>>>>>> Modified: httpd/httpd/trunk/docs/log-message-tags/next-number
>>>>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/log-message-tags/next-=
number?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
>>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>>>>> --- httpd/httpd/trunk/docs/log-message-tags/next-number =
(original)
>>>>>> +++ httpd/httpd/trunk/docs/log-message-tags/next-number Fri Aug =
21 12:34:02 2015
>>>>>> @@ -1 +1 @@
>>>>>> -2964
>>>>>> +2966
>>>>>>=20
>>>>>> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>>>>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_bal=
ancer.c?rev=3D1696960&r1=3D1696959&r2=3D1696960&view=3Ddiff
>>>>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>>>>> --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c =
(original)
>>>>>> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Fri Aug =
21 12:34:02 2015
>>>>>> @@ -761,8 +761,11 @@ static int balancer_post_config(apr_pool
>>>>>>       char *id;
>>>>>>       proxy_balancer *balancer;
>>>>>>       ap_slotmem_type_t type;
>>>>>> +        apr_size_t attached_size;
>>>>>> +        unsigned int attached_num;
>>>>>>       void *sconf =3D s->module_config;
>>>>>>       conf =3D (proxy_server_conf *)ap_get_module_config(sconf, =
&proxy_module);
>>>>>> +
>>>>>>       /*
>>>>>>        * During create_proxy_config() we created a dummy id. Now =
that
>>>>>>        * we have identifying info, we can create the real id
>>>>>> @@ -794,11 +797,39 @@ static int balancer_post_config(apr_pool
>>>>>>                        (int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>>                        (int)conf->balancers->nelts, =
conf->max_balancers);
>>>>>>=20
>>>>>> -            rv =3D storage->create(&new, conf->id,
>>>>>> -                                 =
ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>> -                                 conf->max_balancers, type, =
pconf);
>>>>>> +            /* First try to attach() since the number of =
configured balancers
>>>>>> +             * may have changed during restart, and we don't =
want create() to
>>>>>> +             * fail because the overall size * number of entries =
is not stricly
>>>>>> +             * identical to the previous run.  There may still =
be enough room
>>>>>> +             * for this new run thanks to bgrowth margin, so if =
attach()
>>>>>> +             * succeeds we can only check for the number of =
available entries
>>>>>> +             * to be *greater or* equal to what we need now.  If =
attach() fails
>>>>>> +             * we simply fall back to create().
>>>>>> +             */
>>>>>> +            rv =3D storage->attach(&new, conf->id,
>>>>>> +                                 &attached_size, &attached_num,
>>>>>> +                                 pconf);
>>>>>> +            if (rv !=3D APR_SUCCESS) {
>>>>>> +                rv =3D storage->create(&new, conf->id,
>>>>>> +                                     =
ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>> +                                     conf->max_balancers, type, =
pconf);
>>>>>> +            }
>>>>>> +            else {
>>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, =
APLOGNO(02964)
>>>>>> +                             "Balancers attached: %d, %d (%d)",
>>>>>> +                             =
(int)ALIGNED_PROXY_BALANCER_SHARED_SIZE,
>>>>>> +                             (int)attached_num, =
conf->max_balancers);
>>>>>> +                if (attached_size =3D=3D =
ALIGNED_PROXY_BALANCER_SHARED_SIZE
>>>>>> +                        && attached_num >=3D =
conf->balancers->nelts) {
>>>>>> +                    conf->max_balancers =3D attached_num;
>>>>>> +                }
>>>>>> +                else {
>>>>>> +                    rv =3D APR_ENOSPC;
>>>>>> +                }
>>>>>> +            }
>>>>>>           if (rv !=3D APR_SUCCESS) {
>>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01179) "balancer slotmem_create failed");
>>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01179)
>>>>>> +                             "balancer slotmem create or attach =
failed");
>>>>>>               return !OK;
>>>>>>           }
>>>>>>           conf->bslot =3D new;
>>>>>> @@ -864,11 +895,32 @@ static int balancer_post_config(apr_pool
>>>>>>                        (int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>>                        (int)balancer->max_workers, i);
>>>>>>=20
>>>>>> -            rv =3D storage->create(&new, balancer->s->sname,
>>>>>> -                                 =
ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>> -                                 balancer->max_workers, type, =
pconf);
>>>>>> +            /* try to attach first (see rationale from balancers =
above) */
>>>>>> +            rv =3D storage->attach(&new, balancer->s->sname,
>>>>>> +                                 &attached_size, &attached_num,
>>>>>> +                                 pconf);
>>>>>> +            if (rv !=3D APR_SUCCESS) {
>>>>>> +                rv =3D storage->create(&new, balancer->s->sname,
>>>>>> +                                     =
ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>> +                                     balancer->max_workers, =
type, pconf);
>>>>>> +            }
>>>>>> +            else {
>>>>>> +                ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, =
APLOGNO(02965)
>>>>>> +                             "Workers attached: %s (%s), %d, %d =
(%d) [%u]",
>>>>>> +                             balancer->s->name, =
balancer->s->sname,
>>>>>> +                             =
(int)ALIGNED_PROXY_WORKER_SHARED_SIZE,
>>>>>> +                             (int)attached_num, =
balancer->max_workers, i);
>>>>>> +                if (attached_size =3D=3D =
ALIGNED_PROXY_WORKER_SHARED_SIZE
>>>>>> +                        && attached_num >=3D =
balancer->workers->nelts) {
>>>>>> +                    balancer->max_workers =3D attached_num;
>>>>>> +                }
>>>>>> +                else {
>>>>>> +                    rv =3D APR_ENOSPC;
>>>>>> +                }
>>>>>> +            }
>>>>>>           if (rv !=3D APR_SUCCESS) {
>>>>>> -                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01185) "worker slotmem_create failed");
>>>>>> +                ap_log_error(APLOG_MARK, APLOG_EMERG, rv, s, =
APLOGNO(01185)
>>>>>> +                             "worker slotmem create or attach =
failed");
>>>>>>               return !OK;
>>>>>>           }
>>>>>>           balancer->wslot =3D new;
>>>>>>=20
>>>>>>=20
>>>>>=20
>>>=20


From dev-return-83569-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 17:01:52 2015
Return-Path: <dev-return-83569-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7B6AB18DA1
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 17:01:52 +0000 (UTC)
Received: (qmail 31129 invoked by uid 500); 25 Aug 2015 17:01:51 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 31053 invoked by uid 500); 25 Aug 2015 17:01:51 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 31043 invoked by uid 99); 25 Aug 2015 17:01:51 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 17:01:51 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 40872EDBE9
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 17:01:51 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.999
X-Spam-Level:
X-Spam-Status: No, score=0.999 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H2=-0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id Y7Kqka2EZpOy for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 17:01:50 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp02.smtpout.orange.fr [80.12.242.124])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 291E1506F5
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 17:01:50 +0000 (UTC)
Received: from [127.0.0.1] ([92.140.251.174])
	by mwinf5d55 with ME
	id 951h1r00M3mXJ4C0351i2G; Tue, 25 Aug 2015 19:01:43 +0200
X-ME-Helo: [127.0.0.1]
X-ME-Date: Tue, 25 Aug 2015 19:01:43 +0200
X-ME-IP: 92.140.251.174
Subject: Re: svn commit: r1697735 -
 /httpd/httpd/trunk/modules/mappers/mod_rewrite.c
To: dev@httpd.apache.org
References: <20150825165714.6402BAC0479@hades.apache.org>
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Message-ID: <55DC9F75.8000305@wanadoo.fr>
Date: Tue, 25 Aug 2015 19:01:41 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
In-Reply-To: <20150825165714.6402BAC0479@hades.apache.org>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 150825-0, 25/08/2015), Outbound message
X-Antivirus-Status: Clean

Hi,


A better solution could be to add some () around all the x<<1 in the 
CONDFLAG_,  RULEFLAG_, ...
This would be more invasive but would prevent potential similar future 
issues.

I proposed the more simple solution below.

CJ


Le 25/08/2015 18:57, jailletc36@apache.org a écrit :
> Author: jailletc36
> Date: Tue Aug 25 16:57:13 2015
> New Revision: 1697735
>
> URL: http://svn.apache.org/r1697735
> Log:
> Fix an error spotted by sparse.
> Without the parens, the 2 first bits are reseted, instead of just the one for CONDFLAG_NOCASE.
>
> This "bug" looks harmless as the first bit (CONDFLAG_NONE) is never tested.
>
> Modified:
>      httpd/httpd/trunk/modules/mappers/mod_rewrite.c
>
> Modified: httpd/httpd/trunk/modules/mappers/mod_rewrite.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/mappers/mod_rewrite.c?rev=1697735&r1=1697734&r2=1697735&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/modules/mappers/mod_rewrite.c (original)
> +++ httpd/httpd/trunk/modules/mappers/mod_rewrite.c Tue Aug 25 16:57:13 2015
> @@ -3439,7 +3439,7 @@ static const char *cmd_rewritecond(cmd_p
>                        "RewriteCond: NoCase option for non-regex pattern '%s' "
>                        "is not supported and will be ignored. (%s:%d)", a2,
>                        cmd->directive->filename, cmd->directive->line_num);
> -        newcond->flags &= ~CONDFLAG_NOCASE;
> +        newcond->flags &= ~(CONDFLAG_NOCASE);
>       }
>   
>       newcond->pskip = a2 - newcond->pattern;
>
>
>


From dev-return-83570-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 18:16:07 2015
Return-Path: <dev-return-83570-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A6FA718221
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 18:16:07 +0000 (UTC)
Received: (qmail 60774 invoked by uid 500); 25 Aug 2015 18:16:07 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 60702 invoked by uid 500); 25 Aug 2015 18:16:07 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 60689 invoked by uid 99); 25 Aug 2015 18:16:06 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 18:16:06 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 7144B1AAD5D
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 18:16:06 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id wP4kpUEBXLgf for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 18:16:00 +0000 (UTC)
Received: from mail-io0-f174.google.com (mail-io0-f174.google.com [209.85.223.174])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id ED3232122D
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 18:15:59 +0000 (UTC)
Received: by iodv127 with SMTP id v127so196770593iod.3
        for <dev@httpd.apache.org>; Tue, 25 Aug 2015 11:15:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Du4/W+qYptUYcg7nPeF6qLCB+WFctYqyjISIdgHBUl8=;
        b=M+aCZCEDITOaDTj21lKMAnMWhP1KInfqrXsCVUAAzvJI4+cOnT9XPQH7KjXLYapcb1
         OWqTfbX3BANkTMyqo7VR+0BUFVxNjHapGim5rWR7fJ1nmumUIbpdy7HwquhUjp7xTVq1
         pfNeJAPhzPqmVCAzaBUGsyncsUs2+pn3PXq5P45xd2uokkjCOVxoksbdM3ENBwk+6Evj
         cGcZ7kvJOR9wStdW7dT9loy0XGrb50fEYeVj6TDKfFsNFQbSQwL6rdv/Twwu5QDPmZ1s
         YdRF2/+r1Y3V70qI/upagdLefla676aebGv/5G2IpxANJB931LIxepRqNROwUC0Cyboc
         YhTg==
MIME-Version: 1.0
X-Received: by 10.107.14.145 with SMTP id 139mr24292099ioo.37.1440526558953;
 Tue, 25 Aug 2015 11:15:58 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Tue, 25 Aug 2015 11:15:58 -0700 (PDT)
In-Reply-To: <6D8E174F-3202-4FE6-9806-851FF4CA8830@jaguNET.com>
References: <20150821123403.6E568AC04B1@hades.apache.org>
	<CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com>
	<CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com>
	<6A1F4945-5B3E-4C1D-88E9-4B0A71D59F6C@jaguNET.com>
	<CAKQ1sVNZkfYEbktR1t8C6pt+gVxTZGn-SdmD9UWf8upw2kW0vg@mail.gmail.com>
	<CAKQ1sVMHUpo031N9rVUpvWX0otYC-ZfpXQVgxtoh94jyxOB8pw@mail.gmail.com>
	<6D8E174F-3202-4FE6-9806-851FF4CA8830@jaguNET.com>
Date: Tue, 25 Aug 2015 20:15:58 +0200
Message-ID: <CAKQ1sVPw66GyqdNrqzrRSo-0c9DyiuW8QCagPrR7gyCMkrDG_A@mail.gmail.com>
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES
 docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

On Tue, Aug 25, 2015 at 6:16 PM, Jim Jagielski <jim@jagunet.com> wrote:
> I see that, but the assumption is that the reason why the size
> would have changed is that someone edited the httpd.conf file and
> added another balancer.

That's the only way to add a balancer AFAICT, the manager allows to
add members to existing balancers only.

If so, how is an admin supposed to add a new balancer?
Stop than start (removing by hand the persistant file, in between, if
the slot persisted)?
Should we do this automatically on startup and restart when the size changes?
How starting from a clean fresh slate (with new size?) would help
remote configuration (via the manager)?

> At that point, the more logical thing
> would be to wipe the slate clean (as we do in other places
> where certain values in the slotmem != what we expect)...
> Also, as mentioned, we DO want to fail if the size isn't
> the same, and the only way the size can be different is if
> someone changed the file config. So the underlying assumption
> behind the patch is invalid, imo.

If the current code is already able to ignore other-than-size changes
for the slots' management, this commit won't change that.
It solely allows the free space in slots (growth margin) to be used by
both the restart and the manager for balancer members, and by the
restart only for balancers (the limit on adding balancers is postponed
to the growth margin exhaustion, currently it fails from the very
first add in the configuration file whereas no one will ever use the
reserved space).
Sharing the balancer members' slots' bgrowth space between the
configuration file and the manager does not look bad to me either,
this has to be taken into account (in bgrowth) by the admin from
startup (and even from the very first startup with persisted slots),
but the admin is supposed to know how much members are likely to be
added in the configuration file and/or via the manager.
If no one adds any balancer or member in the file (it fails today
btw), httpd will still work as before.
If httpd is started with persisted slots created by a previous
version, with or without new balancers/members, it will also work (up
to the growth margin with new additions).
The only visible change from the manager will be less space available
for new additions.

But I don't want to insist on preserving this change, so I'll revert
it if the above did not convince you ;)

From dev-return-83571-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 19:39:26 2015
Return-Path: <dev-return-83571-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2A25818636
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 19:39:26 +0000 (UTC)
Received: (qmail 4539 invoked by uid 500); 25 Aug 2015 19:39:25 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 4485 invoked by uid 500); 25 Aug 2015 19:39:25 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 4475 invoked by uid 99); 25 Aug 2015 19:39:25 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 19:39:25 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id CD696C0332
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 19:39:24 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level:
X-Spam-Status: No, score=0.001 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id WMrWyacuOO17 for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 19:39:11 +0000 (UTC)
Received: from resqmta-ch2-02v.sys.comcast.net (resqmta-ch2-02v.sys.comcast.net [69.252.207.34])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 6F41142BA2
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 19:39:11 +0000 (UTC)
Received: from resomta-ch2-07v.sys.comcast.net ([69.252.207.103])
	by resqmta-ch2-02v.sys.comcast.net with comcast
	id 97dT1r0072EPM31017fArY; Tue, 25 Aug 2015 19:39:10 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-07v.sys.comcast.net with comcast
	id 97fA1r0052U0RYt017fAKZ; Tue, 25 Aug 2015 19:39:10 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CAKQ1sVPw66GyqdNrqzrRSo-0c9DyiuW8QCagPrR7gyCMkrDG_A@mail.gmail.com>
Date: Tue, 25 Aug 2015 15:39:10 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <49522EEC-2ECD-4BBA-B69C-54396F3AD176@jaguNET.com>
References: <20150821123403.6E568AC04B1@hades.apache.org> <CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com> <CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com> <6A1F4945-5B3E-4C1D-88E9-4B0A71D59F6C@jaguNET.com> <CAKQ1sVNZkfYEbktR1t8C6pt+gVxTZGn-SdmD9UWf8upw2kW0vg@mail.gmail.com> <CAKQ1sVMHUpo031N9rVUpvWX0otYC-ZfpXQVgxtoh94jyxOB8pw@mail.gmail.com> <6D8E174F-3202-4FE6-9806-851FF4CA8830@jaguNET.com> <CAKQ1sVPw66GyqdNrqzrRSo-0c9DyiuW8QCagPrR7gyCMkrDG_A@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440531550;
	bh=ZdIrDHa7U4nUkpdTfhqqSbANnMVqmWyPdNSWHcy5Vcs=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=H0b1N+1xrXf0eKnlYn0msraPOFKjHrIm/WrthEiILNHGbN4N+PW7WgqQNXrvmrhWw
	 qpZWwunQRF8reeQcrNmrB3j5xVUH8TYmuGRZW2qh1/WkkNCg+8CXuNUEksqgTGbV3a
	 +yf7hEBMqJ40z14NYfYc2x6geTtR1ZSIIhLjxCnX219YKwCVa+GeiCNcSP9KmCIHYl
	 /1QqFEoSkJQt1YPIQobfx3ikDetxSngplWC9rW/qagq1RVJiDxSOIGqy9LqtjE0D+9
	 9HyHqCzsDfVvFL74w16/9JOsPcNuhr+t6ry/+4k3RcRitu8SJO5Zbc/55BwESs+c0Q
	 cjIaPeZFBy0xQ==


> On Aug 25, 2015, at 2:15 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>=20
> On Tue, Aug 25, 2015 at 6:16 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>> I see that, but the assumption is that the reason why the size
>> would have changed is that someone edited the httpd.conf file and
>> added another balancer.
>=20
> That's the only way to add a balancer AFAICT, the manager allows to
> add members to existing balancers only.
>=20

That's right. Adding balancers via the manager is to-be-done.

> If so, how is an admin supposed to add a new balancer?
> Stop than start (removing by hand the persistant file, in between, if
> the slot persisted)?
> Should we do this automatically on startup and restart when the size =
changes?
> How starting from a clean fresh slate (with new size?) would help
> remote configuration (via the manager)?
>=20
>> At that point, the more logical thing
>> would be to wipe the slate clean (as we do in other places
>> where certain values in the slotmem !=3D what we expect)...
>> Also, as mentioned, we DO want to fail if the size isn't
>> the same, and the only way the size can be different is if
>> someone changed the file config. So the underlying assumption
>> behind the patch is invalid, imo.
>=20
> If the current code is already able to ignore other-than-size changes
> for the slots' management, this commit won't change that.

The current code tries to ensure that the read-in slotmem info
is "correct" and consistent. If there is any mismatch then the
slotmem is ignored, cleaned or removed.

> It solely allows the free space in slots (growth margin) to be used by
> both the restart and the manager for balancer members, and by the
> restart only for balancers (the limit on adding balancers is postponed
> to the growth margin exhaustion, currently it fails from the very
> first add in the configuration file whereas no one will ever use the
> reserved space).

I have a feeling that using the growth space for config-file
changes is ill-advised.

> Sharing the balancer members' slots' bgrowth space between the
> configuration file and the manager does not look bad to me either,
> this has to be taken into account (in bgrowth) by the admin from
> startup (and even from the very first startup with persisted slots),
> but the admin is supposed to know how much members are likely to be
> added in the configuration file and/or via the manager.
> If no one adds any balancer or member in the file (it fails today
> btw), httpd will still work as before.
> If httpd is started with persisted slots created by a previous
> version, with or without new balancers/members, it will also work (up
> to the growth margin with new additions).
> The only visible change from the manager will be less space available
> for new additions.
>=20
> But I don't want to insist on preserving this change, so I'll revert
> it if the above did not convince you ;)

I think that keeping it the way it was is likely easier and better
for when we close the loop in making balancer addition part of the
manager. This change will either be dropped or modded, in which case
it's likely best to revert to avoid unneeded deltas and potential weird
code paths.=

From dev-return-83572-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Aug 25 22:54:08 2015
Return-Path: <dev-return-83572-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CA44318ED7
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 25 Aug 2015 22:54:08 +0000 (UTC)
Received: (qmail 64216 invoked by uid 500); 25 Aug 2015 22:54:08 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 64132 invoked by uid 500); 25 Aug 2015 22:54:08 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 64122 invoked by uid 99); 25 Aug 2015 22:54:08 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Aug 2015 22:54:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id C8CC7EDDEC
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 22:54:07 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.8
X-Spam-Level: *
X-Spam-Status: No, score=1.8 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, KAM_LAZY_DOMAIN_SECURITY=1]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id m4Epp58x2qR1 for <dev@httpd.apache.org>;
	Tue, 25 Aug 2015 22:54:06 +0000 (UTC)
Received: from node176.itex.at (mail.123x.at [194.242.35.176])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 9D6A220752
	for <dev@httpd.apache.org>; Tue, 25 Aug 2015 22:54:05 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
	by node176.itex.at (Postfix) with ESMTP id 7CB2222A90
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 00:53:56 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at node176.itex.at
Received: from node176.itex.at ([127.0.0.1])
	by localhost (node176.itex.at [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Q1Xm4HLiT6wq for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 00:53:56 +0200 (CEST)
Received: from [10.202.65.180] (CPE-121-216-59-89.lnse1.ken.bigpond.net.au [121.216.59.89])
	(Authenticated sender: normw@gknw.net)
	by node176.itex.at (Postfix) with ESMTPSA id 3CFD4204F3
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 00:53:54 +0200 (CEST)
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
From: NormW <normw@gknw.net>
Subject: modules\http2 - structure initializing.
Message-ID: <55DCF1F8.4010203@gknw.net>
Date: Wed, 26 Aug 2015 08:53:44 +1000
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
Content-Type: multipart/mixed;
 boundary="------------070408030702080507030103"

This is a multi-part message in MIME format.
--------------070408030702080507030103
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

G/Morning,
Herewith an svn diff that implements line-by-line initialization of 
three structures (no idea if there's a technical term for it) in place 
of the list method now used, e.g struct x = { , , , }.

I acknowledge upfront that 'my' somewhat dated compiler cannot handle 
the list method, whereas the method portrayed in the diff is totally 
acceptable to it.

However, I find the 'list' method less easier to 'read' as the struct 
elements are not 'visible', and one has to locate the struct definition 
itself to see what is being set to what. The method as illustrated by 
the patch is clearer (to my mind) and not affected by the order of the 
elements within the primary structure.

Lastly I noticed at least one case recently where my diff 'simplified' 
because a struct was changed to the _suggested_ method, with the primary 
struct being created by a memset(); perhaps that's a similar change 
needed in these cases also?

Regards,
Norm




--------------070408030702080507030103
Content-Type: text/x-patch;
 name="cw_reqd_chgs.diff"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename="cw_reqd_chgs.diff"

Index: h2_mplx.c
===================================================================
--- h2_mplx.c	(revision 1697659)
+++ h2_mplx.c	(working copy)
@@ -436,7 +436,12 @@
     }
     status = apr_thread_mutex_lock(m->lock);
     if (APR_SUCCESS == status) {
-        update_ctx ctx = { cb, cb_ctx, 0 };
+
+        update_ctx ctx;
+        ctx.cb              = cb;
+        ctx.cb_ctx          = cb_ctx;
+        ctx.streams_updated = 0;
+
         status = APR_EAGAIN;
         h2_io_set_iter(m->stream_ios, update_window, &ctx);
         
Index: h2_session.c
===================================================================
--- h2_session.c	(revision 1697659)
+++ h2_session.c	(working copy)
@@ -852,7 +852,11 @@
     AP_DEBUG_ASSERT(session);
     if (!h2_stream_set_is_empty(session->streams)
         && session->mplx && !session->aborted) {
-        resume_ctx ctx = { session, 0 };
+
+        resume_ctx ctx;
+        ctx.session      = session;
+        ctx.resume_count = 0;
+
         /* Resume all streams where we have data in the out queue and
          * which had been suspended before. */
         h2_stream_set_iter(session->streams, resume_on_data, &ctx);
Index: h2_response.c
===================================================================
--- h2_response.c	(revision 1697659)
+++ h2_response.c	(working copy)
@@ -202,7 +202,14 @@
 {
     size_t n;
     h2_ngheader *h;
-    nvctx_t ctx = { NULL, 1, strlen(status) + 1, 0, NULL, pool };
+
+    nvctx_t ctx;
+    ctx.nv       = NULL;
+    ctx.nvlen    = 1;
+    ctx.nvstrlen = strlen(status) + 1;
+    ctx.offset   = 0;
+    ctx.strbuf   = NULL;
+    ctx.pool     = pool;
     
     apr_table_do(count_header, &ctx, header, NULL);
     

--------------070408030702080507030103--

From dev-return-83573-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 00:35:36 2015
Return-Path: <dev-return-83573-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AC7C810323
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 00:35:36 +0000 (UTC)
Received: (qmail 74533 invoked by uid 500); 26 Aug 2015 00:35:36 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 74456 invoked by uid 500); 26 Aug 2015 00:35:36 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 74444 invoked by uid 99); 26 Aug 2015 00:35:36 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 00:35:36 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id A62CCC028F
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 00:35:35 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.981
X-Spam-Level:
X-Spam-Status: No, score=0.981 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H3=-0.01,
	RCVD_IN_MSPIKE_WL=-0.01, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id JGit3Kh4lyIs for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 00:35:27 +0000 (UTC)
Received: from fed1rmfepo202.cox.net (fed1rmfepo202.cox.net [68.230.241.147])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTP id B633820752
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 00:35:26 +0000 (UTC)
Received: from fed1rmimpo110 ([68.230.241.159]) by fed1rmfepo202.cox.net
          (InterMail vM.8.01.05.15 201-2260-151-145-20131218) with ESMTP
          id <20150826003519.ZZLS15901.fed1rmfepo202.cox.net@fed1rmimpo110>
          for <dev@httpd.apache.org>; Tue, 25 Aug 2015 20:35:19 -0400
Received: from [192.168.1.33] ([98.176.34.113])
	by fed1rmimpo110 with cox
	id 9CbJ1r00a2STVfm01CbKSP; Tue, 25 Aug 2015 20:35:19 -0400
X-CT-Class: Clean
X-CT-Score: 0.00
X-CT-RefID: str=0001.0A020201.55DD09C7.0124,ss=1,re=0.000,fgs=0
X-CT-Spam: 0
X-Authority-Analysis: v=2.0 cv=B55nJpRM c=1 sm=1
 a=8xCO7h6kmYZdHn5tUOQhsw==:17 a=LrjODJgKAAAA:8 a=1zd1egijY_QA:10
 a=LJbwx2UyfW0NeINwYOYA:9 a=QEXdDO2ut3YA:10 a=WFvpJu7QS7joeXzo:21
 a=XCgGjH-CtrpuR9jg:21 a=8xCO7h6kmYZdHn5tUOQhsw==:117
X-CM-Score: 0.00
Authentication-Results: cox.net; auth=pass (PLAIN) smtp.auth=glewis63@cox.net
Message-ID: <55DD0945.3060209@gknw.net>
Date: Tue, 25 Aug 2015 17:33:09 -0700
From: Gregg Smith <gls@gknw.net>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2.28) Gecko/20120306 Thunderbird/3.1.20
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: protocols and mod_h2 consolidation
References: <15D90C4A-6D6C-48B7-8A56-DF46E4B07370@greenbytes.de> <55DBEB00.9080106@gknw.net> <8473DADF-04ED-4B48-A4F0-3FE34713674C@greenbytes.de>
In-Reply-To: <8473DADF-04ED-4B48-A4F0-3FE34713674C@greenbytes.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit

Stefan,

Changes worked great. Thanks.

Gregg

On 8/25/2015 3:43 AM, Stefan Eissing wrote:
> Gregg,
>
> I just checked in changes that should fix the warnings you mentioned. Thanks for reviewing this. As to the SERVER_PROTOCOL, I have no idea yet what may cause this.
>
> //Stefan
>
>> Am 25.08.2015 um 06:11 schrieb Gregg Smith<gls@gknw.net>:
>>
>> Hi,
>>
>> On 8/24/2015 9:29 AM, Stefan Eissing wrote:
>>
>>> I hope this works for everyone. The next weeks might be a good time to think about it and propose any changes and correct my mistakes.
>> There are two things that go bump on my lowest non-eol version of MSVC.
>> h2_worker.c
>> .\h2_worker.c(113) : error C2440: 'function' : cannot convert from 'void *(__cdecl *)(apr_thread_t *,void *)' to 'apr_thread_start_t'
>> .\h2_worker.c(113) : warning C4022: 'apr_thread_create' : pointer mismatch for actual parameter 3
>>
>> Casting execute to apr_thread_start_t (what apr_thread_create expects) seems to quiet the compiler and FireFox seems to work with it.
>>
>> h2_session.c
>> .\h2_session.c(1079) : error C2440: 'type cast' : cannot convert from 'int' to 'nghttp2_data_source'
>> .\h2_session.c(1081) : warning C4047: 'initializing' : 'int' differs in levels of indirection from 'nghttp2_data_source_read_callback'
>>
>> This cast to a union type, this MSVC version's docs on Unions has a note in the comments mentioning;
>>> We recommend that you do not use a union to cast data from one data type to another because union members occupy the same address in memory.
>>>
>>> There is no data-conversion support for unions. The results of interchanging writes and reads between union members of different types are unpredictable and depend on a variety of reasons.
>>>
>> They are evidently enforcing this. I just removed the cast and it builds and Firefox seems to work.
>>
>> Other nits of interest or not;
>> h2_stream_set.c
>> .\h2_stream_set.c(139) : warning C4028: formal parameter 2 different from declaration
>>
>> The function is prototyped as: h2_stream_set_match_fn *match
>> but in h2_stream_set.c it is: h2_stream_set_match_fn match
>>
>> I get 2 different results for the $ENV{'SERVER_PROTOCOL'} in my perl script depending on the machine. My server gives me "HTTP/1.1" and running locally on my build machine I get "INCLUDED." Firefox says it is HTTP/2.0 200 OK so both results in this $ENV seem incorrect. I'm not sure why the difference as mod_h2 is configured same on both.
>>
>> Regards,
>> Gregg
>>
>>
>>
>>
>>
> <green/>bytes GmbH
> Hafenweg 16, 48155 Münster, Germany
> Phone: +49 251 2807760. Amtsgericht Münster: HRB5782
>
>
>


From dev-return-83574-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 00:57:41 2015
Return-Path: <dev-return-83574-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 14A2210473
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 00:57:41 +0000 (UTC)
Received: (qmail 11540 invoked by uid 500); 26 Aug 2015 00:57:40 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 11475 invoked by uid 500); 26 Aug 2015 00:57:40 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 11464 invoked by uid 99); 26 Aug 2015 00:57:40 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 00:57:40 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id EEF92182348
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 00:57:39 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id aIm1bpRIOER5 for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 00:57:31 +0000 (UTC)
Received: from mail-io0-f177.google.com (mail-io0-f177.google.com [209.85.223.177])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 1C7E324E12
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 00:57:31 +0000 (UTC)
Received: by iodb91 with SMTP id b91so1113980iod.1
        for <dev@httpd.apache.org>; Tue, 25 Aug 2015 17:57:30 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=jaHp+xLTEp1PyPpQ6KHvlN4YkSfB/4yXSg0VU7Uqhk0=;
        b=RoCORBnHkkzgzyqutexhAncrEj3b7LvDd9kIKKgXElqCtn3aLpV8nSwTLbDtA3uS3N
         NK/9Zb0gQfDwSA2LSIlGLaKunoOFnKTFgR8JS0df87E7KO0DBXkzjbxIo7uOh3fdVq5e
         b7ZLlsjKFt3A6PXS6n0wQCyIDKh7X4jBySx8rZFD5+rMjnV30CvlICw9l9U3Ax/mozsn
         XaJjfjrYPaAHZV7bdVxX+i8Cd1H/27XV75OIn9NgqoR1WpJzJvA+XAu61fC64MWJ/tdJ
         LtzjxbVYo2t7WSrKJKudeV2U86/NfIC4iz1LlnvBA1dy9G5NNoVlMFCQ3kbOtw4J3s8l
         qLnw==
X-Gm-Message-State: ALoCoQnx1YYNd1KIUjzrcLXWyzAP2kjHgrKcvALASUgBUDSWV8Wd53mLVMWOVx5xuyNGWt8S/Fy1
MIME-Version: 1.0
X-Received: by 10.107.137.195 with SMTP id t64mr154945ioi.150.1440550650031;
 Tue, 25 Aug 2015 17:57:30 -0700 (PDT)
Received: by 10.107.41.9 with HTTP; Tue, 25 Aug 2015 17:57:29 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
Received: by 10.107.41.9 with HTTP; Tue, 25 Aug 2015 17:57:29 -0700 (PDT)
In-Reply-To: <55DBEB00.9080106@gknw.net>
References: <15D90C4A-6D6C-48B7-8A56-DF46E4B07370@greenbytes.de>
	<55DBEB00.9080106@gknw.net>
Date: Tue, 25 Aug 2015 19:57:29 -0500
Message-ID: <CACsi252cooC9Gd6sk0iLvd4xt0U_QaHaiOiNemYu2D8mW5sANg@mail.gmail.com>
Subject: Re: protocols and mod_h2 consolidation
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a113eceacc6d05e051e2c553b

--001a113eceacc6d05e051e2c553b
Content-Type: text/plain; charset=UTF-8

On Aug 24, 2015 11:43 PM, "Gregg Smith" <gls@gknw.net> wrote:
>
> On 8/24/2015 9:29 AM, Stefan Eissing wrote:
>
>> I hope this works for everyone. The next weeks might be a good time to
think about it and propose any changes and correct my mistakes.
>
> There are two things that go bump on my lowest non-eol version of MSVC.
> h2_worker.c
> .\h2_worker.c(113) : error C2440: 'function' : cannot convert from 'void
*(__cdecl *)(apr_thread_t *,void *)' to 'apr_thread_start_t'
> .\h2_worker.c(113) : warning C4022: 'apr_thread_create' : pointer
mismatch for actual parameter 3
>
> Casting execute to apr_thread_start_t (what apr_thread_create expects)
seems to quiet the compiler and FireFox seems to work with it.

That sounds most unsafe.  Is this a mismatch between DECLARE and
DECLARE_NONSTD?

Working right now on Linux but will take a few min to look at both issues
you flagged.

--001a113eceacc6d05e051e2c553b
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<p dir=3D"ltr"><br>
On Aug 24, 2015 11:43 PM, &quot;Gregg Smith&quot; &lt;<a href=3D"mailto:gls=
@gknw.net">gls@gknw.net</a>&gt; wrote:<br>
&gt;<br>
&gt; On 8/24/2015 9:29 AM, Stefan Eissing wrote:<br>
&gt;<br>
&gt;&gt; I hope this works for everyone. The next weeks might be a good tim=
e to think about it and propose any changes and correct my mistakes.<br>
&gt;<br>
&gt; There are two things that go bump on my lowest non-eol version of MSVC=
.<br>
&gt; h2_worker.c<br>
&gt; .\h2_worker.c(113) : error C2440: &#39;function&#39; : cannot convert =
from &#39;void *(__cdecl *)(apr_thread_t *,void *)&#39; to &#39;apr_thread_=
start_t&#39;<br>
&gt; .\h2_worker.c(113) : warning C4022: &#39;apr_thread_create&#39; : poin=
ter mismatch for actual parameter 3<br>
&gt;<br>
&gt; Casting execute to apr_thread_start_t (what apr_thread_create expects)=
 seems to quiet the compiler and FireFox seems to work with it.</p>
<p dir=3D"ltr">That sounds most unsafe.=C2=A0 Is this a mismatch between DE=
CLARE and DECLARE_NONSTD?</p>
<p dir=3D"ltr">Working right now on Linux but will take a few min to look a=
t both issues you flagged.</p>

--001a113eceacc6d05e051e2c553b--

From dev-return-83575-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 01:32:46 2015
Return-Path: <dev-return-83575-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0F113105EF
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 01:32:46 +0000 (UTC)
Received: (qmail 72443 invoked by uid 500); 26 Aug 2015 01:32:45 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 72361 invoked by uid 500); 26 Aug 2015 01:32:45 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 72351 invoked by uid 99); 26 Aug 2015 01:32:45 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 01:32:45 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id C27BBC082C
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 01:32:44 +0000 (UTC)
X-Quarantine-ID: <84e8BVhwJ78J>
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Amavis-Alert: BAD HEADER SECTION, Improper folded header field made up
	entirely of whitespace (char 20 hex): X-Spam-Report: ...that system
	for details.\n \n Content previ[...]
X-Spam-Flag: NO
X-Spam-Score: -0.001
X-Spam-Level:
X-Spam-Status: No, score=-0.001 tagged_above=-999 required=6.31
	tests=[SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 84e8BVhwJ78J for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 01:32:44 +0000 (UTC)
Received: from s6.mail.rcig.net (s6.mail.rcig.net [216.87.38.206])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id BDEF142B16
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 01:32:43 +0000 (UTC)
Received: from 23-117-14-203.lightspeed.stlsmo.sbcglobal.net ([23.117.14.203]:61766 helo=[192.168.0.2])
	by s6.mail.rcig.net with esmtpa (Exim 4.72)
	(envelope-from <DRuggeri@primary.net>)
	id 1ZUPZq-0003uS-RS
	for dev@httpd.apache.org; Tue, 25 Aug 2015 20:32:36 -0500
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES
 docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
To: dev@httpd.apache.org
References: <20150821123403.6E568AC04B1@hades.apache.org>
 <CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com>
 <CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com>
 <6A1F4945-5B3E-4C1D-88E9-4B0A71D59F6C@jaguNET.com>
 <CAKQ1sVNZkfYEbktR1t8C6pt+gVxTZGn-SdmD9UWf8upw2kW0vg@mail.gmail.com>
 <EEA9C20F-2F7F-41BD-8465-5E42D13999F5@jaguNET.com>
 <CAKQ1sVPTDVw30xZM=Utr0Oc+-A23DfaDLCQ4eD0VXJqg5eOB6Q@mail.gmail.com>
 <C029DF93-9430-4A63-98A8-BFFA002186F4@jaguNET.com>
 <CAKQ1sVPiqwKe1-GTvd52iYS-KL2fLpNtFzxfXDPEkKAXGeFRjw@mail.gmail.com>
 <76E1A3C0-4659-4ECE-AA3E-E9B438E7B9A9@jaguNET.com>
From: Daniel Ruggeri <DRuggeri@primary.net>
X-Enigmail-Draft-Status: N1110
Message-ID: <55DD172E.7030604@primary.net>
Date: Tue, 25 Aug 2015 20:32:30 -0500
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
In-Reply-To: <76E1A3C0-4659-4ECE-AA3E-E9B438E7B9A9@jaguNET.com>
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: 7bit
X-ACL-Warn: X-The email account used to send this email was: druggeri@primary.net

On 8/25/2015 10:11 AM, Jim Jagielski wrote:
> Again, if the slotmem exists and is persisted, the assumption
> is that THAT is what the admin wants, and when Apache restarts,
> THAT is the running config they desire. If there are changes
> to the reverse proxy setup, the assumption must be we are
> starting from scratch; There are, iirc, a number of places where
> these kinds of checks are done. Trying to somehow "merge" a just-changed
> file config and a running config (based on an older file config
> with dynamic changes) is nasty and tough to do correctly.

This is a common problem with serialization. The persisted config is
serialized data of what is in memory. It can only represent the
"version" of the conf file that created it. If you change the conf,
deserialization should fail because there could be other material
changes that might get in the way.

I'm +1 on the idea that using bgrowth space to add stuff via
conf+graceful restart should be avoided.

-- 
Daniel Ruggeri

From dev-return-83576-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 01:37:22 2015
Return-Path: <dev-return-83576-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 224AE10624
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 01:37:22 +0000 (UTC)
Received: (qmail 78514 invoked by uid 500); 26 Aug 2015 01:37:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 78441 invoked by uid 500); 26 Aug 2015 01:37:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 78431 invoked by uid 99); 26 Aug 2015 01:37:16 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 01:37:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 0F290C082C
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 01:37:16 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.981
X-Spam-Level:
X-Spam-Status: No, score=0.981 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H3=-0.01,
	RCVD_IN_MSPIKE_WL=-0.01, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Nvcew4DZHhjd for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 01:37:07 +0000 (UTC)
Received: from fed1rmfepo201.cox.net (fed1rmfepo201.cox.net [68.230.241.146])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTP id F0A7242B16
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 01:37:06 +0000 (UTC)
Received: from fed1rmimpo109 ([68.230.241.158]) by fed1rmfepo201.cox.net
          (InterMail vM.8.01.05.15 201-2260-151-145-20131218) with ESMTP
          id <20150826013659.PERX8128.fed1rmfepo201.cox.net@fed1rmimpo109>
          for <dev@httpd.apache.org>; Tue, 25 Aug 2015 21:36:59 -0400
Received: from [192.168.1.33] ([98.176.34.113])
	by fed1rmimpo109 with cox
	id 9Dcz1r0072STVfm01DczNA; Tue, 25 Aug 2015 21:36:59 -0400
X-CT-Class: Clean
X-CT-Score: 0.00
X-CT-RefID: str=0001.0A020202.55DD183B.00D0,ss=1,re=0.000,fgs=0
X-CT-Spam: 0
X-Authority-Analysis: v=2.0 cv=MbGyTeDf c=1 sm=1
 a=8xCO7h6kmYZdHn5tUOQhsw==:17 a=LrjODJgKAAAA:8 a=1zd1egijY_QA:10
 a=2d8ZDl2mFFb6B7fT_QQA:9 a=QEXdDO2ut3YA:10 a=8xCO7h6kmYZdHn5tUOQhsw==:117
X-CM-Score: 0.00
Authentication-Results: cox.net; auth=pass (PLAIN) smtp.auth=glewis63@cox.net
Message-ID: <55DD17B9.90701@gknw.net>
Date: Tue, 25 Aug 2015 18:34:49 -0700
From: Gregg Smith <gls@gknw.net>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2.28) Gecko/20120306 Thunderbird/3.1.20
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: protocols and mod_h2 consolidation
References: <15D90C4A-6D6C-48B7-8A56-DF46E4B07370@greenbytes.de>	<55DBEB00.9080106@gknw.net> <CACsi252cooC9Gd6sk0iLvd4xt0U_QaHaiOiNemYu2D8mW5sANg@mail.gmail.com>
In-Reply-To: <CACsi252cooC9Gd6sk0iLvd4xt0U_QaHaiOiNemYu2D8mW5sANg@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

On 8/25/2015 5:57 PM, William A Rowe Jr wrote:
> On Aug 24, 2015 11:43 PM, "Gregg Smith"<gls@gknw.net>  wrote:
>> On 8/24/2015 9:29 AM, Stefan Eissing wrote:
>>
>>> I hope this works for everyone. The next weeks might be a good time to
> think about it and propose any changes and correct my mistakes.
>> There are two things that go bump on my lowest non-eol version of MSVC.
>> h2_worker.c
>> .\h2_worker.c(113) : error C2440: 'function' : cannot convert from 'void
> *(__cdecl *)(apr_thread_t *,void *)' to 'apr_thread_start_t'
>> .\h2_worker.c(113) : warning C4022: 'apr_thread_create' : pointer
> mismatch for actual parameter 3
>> Casting execute to apr_thread_start_t (what apr_thread_create expects)
> seems to quiet the compiler and FireFox seems to work with it.
>
> That sounds most unsafe.  Is this a mismatch between DECLARE and
> DECLARE_NONSTD?
>
> Working right now on Linux but will take a few min to look at both issues
> you flagged.
I'm sure it was, but I wanted it to build. I did not commit that.
Stefen has dealt with these issues properly I'd imagine in r1697634


From dev-return-83577-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 13:44:48 2015
Return-Path: <dev-return-83577-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6B3E1101AC
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 13:44:48 +0000 (UTC)
Received: (qmail 63843 invoked by uid 500); 26 Aug 2015 13:44:46 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 63272 invoked by uid 500); 26 Aug 2015 13:44:46 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 63081 invoked by uid 99); 26 Aug 2015 13:44:46 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 13:44:46 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id BEDE4C0250
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 13:44:45 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.007
X-Spam-Level:
X-Spam-Status: No, score=-0.007 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 96zo288Ub4TF for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 13:44:44 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 7CEDA42BAB
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 13:44:44 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id C1D6E15A02EE
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:44:36 +0200 (CEST)
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Subject: proposed backport, mod_h2 github release
Message-Id: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de>
Date: Wed, 26 Aug 2015 15:44:36 +0200
To: dev@httpd.apache.org
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
X-Mailer: Apple Mail (2.2104)

I just submitted my first backport STATUS update. Hope I did everything =
ok, otherwise please let me know.

For backporting mod_h2 to 2.4.x, I decided to make it in two parts: one =
is the patch to core/mod_ssl that introduces Protocols. That is now in =
STATUS.=20

Next would be a patch for modules/http2 which is basically all source =
files, changes in build and docs. Since there are many new files, does =
it sense to make a patch for that or do we handle that differently?

Also: since there were some people testing the github releases in their =
own setups, I thought it helpful to let them test the core patch and =
mod_h2 as it currently is. I made a new release of mod_h2 on github =
which basically downloads httpd 2.4.16, applies the core patch and =
builds the mod_h2 copy against it. Hopefully some people take it out for =
a spin and report back.

Cheers,

  Stefan

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83578-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 14:33:19 2015
Return-Path: <dev-return-83578-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 57105104C3
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 14:33:19 +0000 (UTC)
Received: (qmail 18311 invoked by uid 500); 26 Aug 2015 14:33:18 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 18198 invoked by uid 500); 26 Aug 2015 14:33:18 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 18006 invoked by uid 99); 26 Aug 2015 14:33:18 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 14:33:18 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 075461AADEC
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 14:33:18 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level:
X-Spam-Status: No, score=0.001 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id TTq1mkYJsT78 for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 14:33:06 +0000 (UTC)
Received: from resqmta-ch2-11v.sys.comcast.net (resqmta-ch2-11v.sys.comcast.net [69.252.207.43])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id BB23C42F2E
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 14:33:05 +0000 (UTC)
Received: from resomta-ch2-12v.sys.comcast.net ([69.252.207.108])
	by resqmta-ch2-11v.sys.comcast.net with comcast
	id 9SVD1r0092LrikM01SYzvp; Wed, 26 Aug 2015 14:32:59 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-12v.sys.comcast.net with comcast
	id 9SYy1r00E2U0RYt01SYyPA; Wed, 26 Aug 2015 14:32:59 +0000
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: proposed backport, mod_h2 github release
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de>
Date: Wed, 26 Aug 2015 10:32:58 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <DE954BF4-0340-4EE3-85A9-153D949856FC@jaguNET.com>
References: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440599579;
	bh=Br5zprr85Aj9thtThtiymQ7LW4qbIgM44tjTisk5rVA=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=SZKbS+L3Ag4Nffl4qouD6gDEVkGJfhnHijgP2eCKjU9fBmCvdSCuPYfMSaa3LYvOD
	 rssKj3Eq1CLdiAur6It7ua+TaiXQAz7hvYtH+o4t/fS9Ocdx1/PvKj66MzBm1FSk0s
	 rZBBnD2YxKMsAjuWKEifn6e9FbDmINxWslcJSDQk3olzCCgd3S8qkKrZLM92exkZcQ
	 xh4G7hE+AD8sfvjl25Kq9z4ICpUi35LSoxCXewtGvCLGVmVNosioi+6Hk6vGHratC6
	 F031mUcUVTq1vOcO+Go1uduEJe5ty8cbeM+jaWPoG1ZYcxDHBCLj2EAUze+ReKN6h0
	 uemhHdJF3uKkg==

woooooot!!

> On Aug 26, 2015, at 9:44 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>=20
> I just submitted my first backport STATUS update. Hope I did =
everything ok, otherwise please let me know.
>=20
> For backporting mod_h2 to 2.4.x, I decided to make it in two parts: =
one is the patch to core/mod_ssl that introduces Protocols. That is now =
in STATUS.=20
>=20
> Next would be a patch for modules/http2 which is basically all source =
files, changes in build and docs. Since there are many new files, does =
it sense to make a patch for that or do we handle that differently?

The patch could basically be set of SVN merges. Or a giant diff -r -u -N =
;)

>=20
> Also: since there were some people testing the github releases in =
their own setups, I thought it helpful to let them test the core patch =
and mod_h2 as it currently is. I made a new release of mod_h2 on github =
which basically downloads httpd 2.4.16, applies the core patch and =
builds the mod_h2 copy against it. Hopefully some people take it out for =
a spin and report back.
>=20
> Cheers,
>=20
>  Stefan
>=20
> <green/>bytes GmbH
> Hafenweg 16, 48155 M=C3=BCnster, Germany
> Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782
>=20
>=20
>=20


From dev-return-83579-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 15:03:02 2015
Return-Path: <dev-return-83579-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CF308106C1
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 15:03:02 +0000 (UTC)
Received: (qmail 39516 invoked by uid 500); 26 Aug 2015 15:03:01 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 39450 invoked by uid 500); 26 Aug 2015 15:03:01 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 39439 invoked by uid 99); 26 Aug 2015 15:03:01 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 15:03:01 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 4ABB41AAD8C
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:03:01 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.129
X-Spam-Level: ***
X-Spam-Status: No, score=3.129 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	FREEMAIL_ENVFROM_END_DIGIT=0.25, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id vDyLWuLdYExm for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 15:03:00 +0000 (UTC)
Received: from mail-oi0-f52.google.com (mail-oi0-f52.google.com [209.85.218.52])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 2CFC142B92
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:03:00 +0000 (UTC)
Received: by oiew67 with SMTP id w67so123418458oie.2
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 08:02:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=IDijZKev25wezCzlh7ihSMXSlo0YR6aGK1jUJtDa4Q0=;
        b=ho1n4EC9ETbW4iHnua85G2biR9VyFP9HBSTC1HcLji8ALVktgQm1fRkdOFB+r/ucaC
         CEzBQvlp2BnVap+VD8cHGjzAwbJ5E13Z3+BexrDbpjMMUZBRaJ/4reJtR5ToYDaxNHrT
         gdFUui9QU47puNxqo0+8RHCWMIePlVo5dKY7enScuJ191qOMcCEilMRVQJJiHNniCB+6
         hslFu6bXkzHncF5bn2vucIGoyRZUePzDEWuZOw8Mjy0+AtRYUWSn8BqfXMPCz0muSRKj
         1QkM85nRgbuBkGt2c6QFyqnwNbUuVNZFnOL5DiyFbiLt3Jq0Rb3BLV9SOexIGqLJ3Llh
         qm5g==
MIME-Version: 1.0
X-Received: by 10.202.219.67 with SMTP id s64mr29192392oig.25.1440601379589;
 Wed, 26 Aug 2015 08:02:59 -0700 (PDT)
Received: by 10.182.37.40 with HTTP; Wed, 26 Aug 2015 08:02:58 -0700 (PDT)
Date: Wed, 26 Aug 2015 11:02:58 -0400
Message-ID: <CAL7zx_dXoEWWWZdqNva8JVALZo=_szfj8xGGgjoC+rBNOcRqOg@mail.gmail.com>
Subject: Getting all supported protocols
From: Edward Lu <chaosed0@gmail.com>
To: dev@httpd.apache.org
Content-Type: multipart/mixed; boundary=001a113d41487eb615051e3825ce

--001a113d41487eb615051e3825ce
Content-Type: multipart/alternative; boundary=001a113d41487eb610051e3825cc

--001a113d41487eb610051e3825cc
Content-Type: text/plain; charset=UTF-8

I was experimenting with the new support for declaring protocols for e.g.
ALPN, but with an SSL toolkit other than openssl. This one wants us to pass
the entire list of all the protocols the server supports in advance; later,
we can request the one protocol that the toolkit negotiated.

It looks like the protocol_propose hook allows us to only grab a subset of
the protocols - i.e. it expects us to have the protocol list that the
client sends us. I've attached a patch which modifies the protocol_propose
hook's interface (documentation), allowing us to get all of the protocols
supported by the server. I also modified h2's implementation of the hook to
reflect the interface change.

Let me know if anyone sees a problem.

--001a113d41487eb610051e3825cc
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div><div>I was experimenting with the new support for dec=
laring protocols for e.g. ALPN, but with an SSL toolkit other than openssl.=
 This one  wants us to pass the entire list of all the protocols the server=
 supports in advance; later, we can request the one protocol that the toolk=
it negotiated.<br><br></div>It looks like the protocol_propose hook allows =
us to only grab a subset of the protocols - i.e. it expects us to have the =
protocol list that the client sends us. I&#39;ve attached a patch which mod=
ifies the protocol_propose hook&#39;s interface (documentation), allowing u=
s to get all of the protocols supported by the server. I also modified h2&#=
39;s implementation of the hook to reflect the interface change.<br><br></d=
iv><div>Let me know if anyone sees a problem.<br></div><br></div>

--001a113d41487eb610051e3825cc--
--001a113d41487eb615051e3825ce
Content-Type: text/plain; charset=US-ASCII; name="all_protos.diff"
Content-Disposition: attachment; filename="all_protos.diff"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_idswtlhh0

ZGlmZiAtLWdpdCBhL2luY2x1ZGUvaHR0cF9wcm90b2NvbC5oIGIvaW5jbHVkZS9odHRwX3Byb3Rv
Y29sLmgKaW5kZXggODQ2ZGYyZi4uYjllMGZkNCAxMDA2NDQKLS0tIGEvaW5jbHVkZS9odHRwX3By
b3RvY29sLmgKKysrIGIvaW5jbHVkZS9odHRwX3Byb3RvY29sLmgKQEAgLTcxOSwxMSArNzE5LDE1
IEBAIEFQX0RFQ0xBUkVfSE9PSyhhcHJfcG9ydF90LGRlZmF1bHRfcG9ydCwoY29uc3QgcmVxdWVz
dF9yZWMgKnIpKQogICoKICAqIEFsbCBob29rcyBhcmUgcnVuLCB1bmxlc3Mgb25lIHJldHVybnMg
YW4gZXJyb3IuIFByb3Bvc2FscyBtYXkgY29udGFpbgogICogZHVwbGljYXRlcy4gVGhlIG9yZGVy
IGluIHdoaWNoIHByb3Bvc2FscyBhcmUgYWRkZWQgaXMgdXN1YWxseSBpZ25vcmVkLgorICoKKyAq
IElmIG9mZmVycyBpcyBOVUxMLCB0aGVuIGFsbCBwcm90b2NvbHMgc3VwcG9ydGVkIGJ5IHRoZSBz
ZXJ2ZXIgd2lsbCBiZQorICogYWRkZWQgdG8gdGhlIHByb3Bvc2FscyBhcnJheS4KICAqIAogICog
QHBhcmFtIGMgVGhlIGN1cnJlbnQgY29ubmVjdGlvbgogICogQHBhcmFtIHIgVGhlIGN1cnJlbnQg
cmVxdWVzdCBvciBOVUxMCiAgKiBAcGFyYW0gcyBUaGUgc2VydmVyL3ZpcnR1YWwgaG9zdCBzZWxl
Y3RlZAotICogQHBhcmFtIG9mZmVycyBBIGxpc3Qgb2YgcHJvdG9jb2wgaWRlbnRpZmllcnMgb2Zm
ZXJlZCBieSB0aGUgY2xpZW50CisgKiBAcGFyYW0gb2ZmZXJzIEEgbGlzdCBvZiBwcm90b2NvbCBp
ZGVudGlmaWVycyBvZmZlcmVkIGJ5IHRoZSBjbGllbnQsIG9yCisgKiAgICAgICAgICAgICAgIE5V
TEwgaWYgdGhlIGNsaWVudCBkb2Vzbid0IGtub3cgaW4gYWR2YW5jZQogICogQHBhcmFtIHByb3Bv
c2FscyBUaGUgbGlzdCBvZiBwcm90b2NvbCBpZGVudGlmaWVycyBwcm9wb3NlZCBieSB0aGUgaG9v
a3MKICAqIEByZXR1cm4gT0sgb3IgREVDTElORUQKICAqLwpkaWZmIC0tZ2l0IGEvbW9kdWxlcy9o
dHRwMi9oMl9zd2l0Y2guYyBiL21vZHVsZXMvaHR0cDIvaDJfc3dpdGNoLmMKaW5kZXggZmQ3Njk4
My4uYTRjYjkwOSAxMDA2NDQKLS0tIGEvbW9kdWxlcy9odHRwMi9oMl9zd2l0Y2guYworKysgYi9t
b2R1bGVzL2h0dHAyL2gyX3N3aXRjaC5jCkBAIC0xMDUsOSArMTA1LDEwIEBAIHN0YXRpYyBpbnQg
aDJfcHJvdG9jb2xfcHJvcG9zZShjb25uX3JlYyAqYywgcmVxdWVzdF9yZWMgKnIsCiAgICAgCiAg
ICAgd2hpbGUgKCpwcm90b3MpIHsKICAgICAgICAgLyogQWRkIGFsbCBwcm90b2NvbHMgd2Uga25v
dyAodGxzIG9yIGNsZWFyKSBhbmQgdGhhdAotICAgICAgICAgKiB3ZXJlIG9mZmVyZWQgYXMgb3B0
aW9ucyBmb3IgdGhlIHN3aXRjaC4gCisgICAgICAgICAqIHdlcmUgb2ZmZXJlZCBhcyBvcHRpb25z
IGZvciB0aGUgc3dpdGNoLiBJZiBubworICAgICAgICAgKiBvcHRpb25zIHdlcmUgb2ZmZXJlZCwg
YWRkIGV2ZXJ5dGhpbmcuCiAgICAgICAgICAqLwotICAgICAgICBpZiAoYXBfYXJyYXlfaW5kZXgo
b2ZmZXJzLCAqcHJvdG9zKSA+PSAwKSB7CisgICAgICAgIGlmIChvZmZlcnMgPT0gTlVMTCB8fCBh
cF9hcnJheV9pbmRleChvZmZlcnMsICpwcm90b3MpID49IDApIHsKICAgICAgICAgICAgIGFwX2xv
Z19jZXJyb3IoQVBMT0dfTUFSSywgQVBMT0dfVFJBQ0UxLCAwLCBjLAogICAgICAgICAgICAgICAg
ICAgICAgICAgICAicHJvcG9zaW5nIHByb3RvY29sICclcyciLCAqcHJvdG9zKTsKICAgICAgICAg
ICAgIEFQUl9BUlJBWV9QVVNIKHByb3Bvc2FscywgY29uc3QgY2hhciopID0gKnByb3RvczsK
--001a113d41487eb615051e3825ce--

From dev-return-83580-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 15:20:16 2015
Return-Path: <dev-return-83580-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C095A107BF
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 15:20:16 +0000 (UTC)
Received: (qmail 83737 invoked by uid 500); 26 Aug 2015 15:20:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 83677 invoked by uid 500); 26 Aug 2015 15:20:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 83667 invoked by uid 99); 26 Aug 2015 15:20:16 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 15:20:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id B653DC0BE3
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:20:15 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 48Y39WrtH3nj for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 15:20:07 +0000 (UTC)
Received: from mail-io0-f177.google.com (mail-io0-f177.google.com [209.85.223.177])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 16A3A25CD9
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:20:07 +0000 (UTC)
Received: by iodt126 with SMTP id t126so22628300iod.2
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 08:20:06 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=pf5psFEFiZDDcwWxEJBkc51n9F9254kpMyJjKtE+ecU=;
        b=Q+9cJhn4Q/84A8+IngBZnqV40H07hxXi5ZdnzwSGw4+yqxBtgoakJadpBQPXo7sRn/
         B6XryL1G5R4Jv0D/K7WSLOzultzau6lYFQuCcs8kpbb7MWf2n1vV1ZEbtoYinzCMI0Vg
         KU05nYjyaVaAeTtCrXQ+1VKdnUGikSegcE73PQrvwwHPl2025wO7jkR9rQWajb553juy
         YMtsjdL9HDvbmj1RJ++QNZ2DEOv7BAPjCJ2ebCtxDL1vJ3OodEaDuoDBEAvqBDqNZydJ
         bL4WUy2ofzMefTN4ER/YxrGYqIDCLB24GoOwFU557jQ4EjQuwUaCKEElRW6QnIygm61B
         k/Sg==
X-Gm-Message-State: ALoCoQmkhEJ3wAc8sspPcybpy/qnbnFPoLL9F5ENdSahM0PO1gs9oFeA6G6B/3/mUzpgEoIs/Jc8
MIME-Version: 1.0
X-Received: by 10.107.166.136 with SMTP id p130mr4478543ioe.163.1440602405942;
 Wed, 26 Aug 2015 08:20:05 -0700 (PDT)
Received: by 10.107.16.8 with HTTP; Wed, 26 Aug 2015 08:20:05 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
In-Reply-To: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de>
References: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de>
Date: Wed, 26 Aug 2015 10:20:05 -0500
Message-ID: <CACsi2527pNB0Lx1zzd=oFSyS7iSowUHX-mEnCx3LdxModd+dMg@mail.gmail.com>
Subject: Re: proposed backport, mod_h2 github release
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1141f392ab8572051e3862ed

--001a1141f392ab8572051e3862ed
Content-Type: text/plain; charset=UTF-8

On Wed, Aug 26, 2015 at 8:44 AM, Stefan Eissing <
stefan.eissing@greenbytes.de> wrote:

> I just submitted my first backport STATUS update. Hope I did everything
> ok, otherwise please let me know.
>
> For backporting mod_h2 to 2.4.x, I decided to make it in two parts: one is
> the patch to core/mod_ssl that introduces Protocols. That is now in STATUS.
>
> Next would be a patch for modules/http2 which is basically all source
> files, changes in build and docs. Since there are many new files, does it
> sense to make a patch for that or do we handle that differently?
>
> Also: since there were some people testing the github releases in their
> own setups, I thought it helpful to let them test the core patch and mod_h2
> as it currently is. I made a new release of mod_h2 on github which
> basically downloads httpd 2.4.16, applies the core patch and builds the
> mod_h2 copy against it. Hopefully some people take it out for a spin and
> report back


Looking forward to reviewing the code this week!

At the moment, I'm dubious that we are going to be able to meet the
criteria that modules built for httpd 2.4.x will continue to function
correctly without recompilation under 2.4+refactoring, but that's an
absolute requirement of our versioning promises.  In such a case, 2.6.x (or
3.0.0) would become a top priority.  So there's that to consider.

I'd like to RM a 2.5.0-alpha release on Friday 11 Sept, that would put the
mod_h2 + refactoring into the hands of bleeding edge adopters, ahead of the
ApacheCon Core in Budapest.  We make no promises about the API between
2.5.0 and 2.5.x and users are expected to recompile their modules while
working on that bleed branch.

--001a1141f392ab8572051e3862ed
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On W=
ed, Aug 26, 2015 at 8:44 AM, Stefan Eissing <span dir=3D"ltr">&lt;<a href=
=3D"mailto:stefan.eissing@greenbytes.de" target=3D"_blank">stefan.eissing@g=
reenbytes.de</a>&gt;</span> wrote:<br><blockquote class=3D"gmail_quote" sty=
le=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">I just=
 submitted my first backport STATUS update. Hope I did everything ok, other=
wise please let me know.<br>
<br>
For backporting mod_h2 to 2.4.x, I decided to make it in two parts: one is =
the patch to core/mod_ssl that introduces Protocols. That is now in STATUS.=
<br>
<br>
Next would be a patch for modules/http2 which is basically all source files=
, changes in build and docs. Since there are many new files, does it sense =
to make a patch for that or do we handle that differently?<br>
<br>
Also: since there were some people testing the github releases in their own=
 setups, I thought it helpful to let them test the core patch and mod_h2 as=
 it currently is. I made a new release of mod_h2 on github which basically =
downloads httpd 2.4.16, applies the core patch and builds the mod_h2 copy a=
gainst it. Hopefully some people take it out for a spin and report back</bl=
ockquote><div><br></div><div>Looking forward to reviewing the code this wee=
k!</div><div><br></div><div>At the moment, I&#39;m dubious that we are goin=
g to be able to meet the criteria that modules built for httpd 2.4.x will c=
ontinue to function correctly without recompilation under 2.4+refactoring, =
but that&#39;s an absolute requirement of our versioning promises.=C2=A0 In=
 such a case, 2.6.x (or 3.0.0) would become a top priority.=C2=A0 So there&=
#39;s that to consider.</div><div><br></div><div>I&#39;d like to RM a 2.5.0=
-alpha release on Friday 11 Sept, that would put the mod_h2 + refactoring i=
nto the hands of bleeding edge adopters, ahead of the ApacheCon Core in Bud=
apest.=C2=A0 We make no promises about the API between 2.5.0 and 2.5.x and =
users are expected to recompile their modules while working on that bleed b=
ranch.</div><div><br></div><div><br></div></div><br></div></div>

--001a1141f392ab8572051e3862ed--

From dev-return-83581-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 15:20:31 2015
Return-Path: <dev-return-83581-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1A8A4107C1
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 15:20:31 +0000 (UTC)
Received: (qmail 84811 invoked by uid 500); 26 Aug 2015 15:20:30 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 84738 invoked by uid 500); 26 Aug 2015 15:20:30 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 84728 invoked by uid 99); 26 Aug 2015 15:20:30 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 15:20:30 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id E8423EE331
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:20:29 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -1.427
X-Spam-Level:
X-Spam-Status: No, score=-1.427 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-1.426, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id lG5x-30oBmbM for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 15:20:25 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 9DDF32122D
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:20:24 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id F00EB15A06E3
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 17:20:17 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: Getting all supported protocols
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CAL7zx_dXoEWWWZdqNva8JVALZo=_szfj8xGGgjoC+rBNOcRqOg@mail.gmail.com>
Date: Wed, 26 Aug 2015 17:20:17 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <B7CDEFF9-8666-4EBA-893F-35F4522601D3@greenbytes.de>
References: <CAL7zx_dXoEWWWZdqNva8JVALZo=_szfj8xGGgjoC+rBNOcRqOg@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

Hmm, this was the kind of behaviour of NPN, maybe that influenced the =
API of that toolkit?

I imagine that the toolkit will decide itself then what protocol is =
negotiated. That would mean that the directive ProtocolsHonorOrder has =
no longer an effect. Am I right?

I do not think that is what we want.=20

//Stefan

> Am 26.08.2015 um 17:02 schrieb Edward Lu <chaosed0@gmail.com>:
>=20
> I was experimenting with the new support for declaring protocols for =
e.g. ALPN, but with an SSL toolkit other than openssl. This one wants us =
to pass the entire list of all the protocols the server supports in =
advance; later, we can request the one protocol that the toolkit =
negotiated.
>=20
> It looks like the protocol_propose hook allows us to only grab a =
subset of the protocols - i.e. it expects us to have the protocol list =
that the client sends us. I've attached a patch which modifies the =
protocol_propose hook's interface (documentation), allowing us to get =
all of the protocols supported by the server. I also modified h2's =
implementation of the hook to reflect the interface change.
>=20
> Let me know if anyone sees a problem.
>=20
> <all_protos.diff>

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83582-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 15:21:35 2015
Return-Path: <dev-return-83582-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BAAD9107D6
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 15:21:35 +0000 (UTC)
Received: (qmail 87211 invoked by uid 500); 26 Aug 2015 15:21:35 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 87135 invoked by uid 500); 26 Aug 2015 15:21:35 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 87125 invoked by uid 99); 26 Aug 2015 15:21:35 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 15:21:35 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id B8006EE184
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:21:34 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.979
X-Spam-Level: **
X-Spam-Status: No, score=2.979 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01,
	RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id bf7zW1VaUfCx for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 15:21:34 +0000 (UTC)
Received: from mail-ig0-f180.google.com (mail-ig0-f180.google.com [209.85.213.180])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 1808D42B5D
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:21:34 +0000 (UTC)
Received: by igui7 with SMTP id i7so39511947igu.1
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 08:21:33 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=vgGsPXVr1AhYMMXPrWpMrCWpbgfS8uAgj3iMfCD7Cwo=;
        b=mWoe41SiakX/Oixgq4TccHxhI7YgwbEufXaVAPbaF39A6L4FSHGzQVq5ll8xzYUGuR
         wlyRCHR5wxRytD51gsznt8Y9NlAQCwGhJXJLZEKoZcvMn6udAQSZZC+US3xiBNQAOwnK
         unM9HxAu81dw2jWxUjtAGD5dfAH+rR2tngzj0KeVD/gnRnX66uLfqQ/R5HNqoaH/YZ3w
         0LEefWCmSy6rCnDWr8kQm50NhGkANOuSRawPJwf0ryuXQY4OWL6CRkrxW9UrDFMxdgCK
         toVHECOklwn2GeaDf2i8xSJZxONFDXPGCyc7f92mTeYpXXUMoLl17CpxYKVrMo6gHVc0
         28fw==
X-Gm-Message-State: ALoCoQl5+fooVfoJ7VujZSoq0RLmHbCOfsnoHGMj9Xpu4dpW7RIYQHDFp0UN/8pEDkXGOkmiN9uk
MIME-Version: 1.0
X-Received: by 10.50.138.2 with SMTP id qm2mr12153747igb.32.1440602493478;
 Wed, 26 Aug 2015 08:21:33 -0700 (PDT)
Received: by 10.107.16.8 with HTTP; Wed, 26 Aug 2015 08:21:33 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
Date: Wed, 26 Aug 2015 10:21:33 -0500
Message-ID: <CACsi250VVwp12Axho5VAr_edGJ4fgefdB6npZvTK-NohMCpn=w@mail.gmail.com>
Subject: Intent to Tag 2.5.0 for -alpha consideration
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1135ffb0e31376051e3867db

--001a1135ffb0e31376051e3867db
Content-Type: text/plain; charset=UTF-8

I'm planning to tag trunk on 11 Sept to get 2.5.0 and mod_h2 into users
hands ASAP and collect feedback on that module ahead of any merges back
into the stable 2.4.x branch.

Concerns/Questions/Roadblocks/Showstoppers?

--001a1135ffb0e31376051e3867db
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">I&#39;m planning to tag trunk on 11 Sept to get 2.5.0 and =
mod_h2 into users hands ASAP and collect feedback on that module ahead of a=
ny merges back into the stable 2.4.x branch.<div><br></div><div>Concerns/Qu=
estions/Roadblocks/Showstoppers?</div></div>

--001a1135ffb0e31376051e3867db--

From dev-return-83583-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 15:26:54 2015
Return-Path: <dev-return-83583-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 906FF1081F
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 15:26:54 +0000 (UTC)
Received: (qmail 22008 invoked by uid 500); 26 Aug 2015 15:26:54 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 21938 invoked by uid 500); 26 Aug 2015 15:26:54 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 21927 invoked by uid 99); 26 Aug 2015 15:26:54 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 15:26:54 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id AF5141AADAE
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:26:53 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.005
X-Spam-Level:
X-Spam-Status: No, score=-0.005 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 0ehnhg-DJ8Qz for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 15:26:39 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id EF36E20D7B
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:26:38 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 8D10915A0535
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 17:26:38 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: modules\http2 - structure initializing.
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <55DCF1F8.4010203@gknw.net>
Date: Wed, 26 Aug 2015 17:26:37 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <D8F4A20E-5BCA-4CC6-BBD3-AC7DE1A3BCBF@greenbytes.de>
References: <55DCF1F8.4010203@gknw.net>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

Hi Norm,

I think these type of assignments are part of the C90 standard. I am not =
sure we want to support a compiler that cannot cope with that, but I may =
be to green to know that. What platform is this on exactly?

//Stefan

> Am 26.08.2015 um 00:53 schrieb NormW <normw@gknw.net>:
>=20
> G/Morning,
> Herewith an svn diff that implements line-by-line initialization of =
three structures (no idea if there's a technical term for it) in place =
of the list method now used, e.g struct x =3D { , , , }.
>=20
> I acknowledge upfront that 'my' somewhat dated compiler cannot handle =
the list method, whereas the method portrayed in the diff is totally =
acceptable to it.
>=20
> However, I find the 'list' method less easier to 'read' as the struct =
elements are not 'visible', and one has to locate the struct definition =
itself to see what is being set to what. The method as illustrated by =
the patch is clearer (to my mind) and not affected by the order of the =
elements within the primary structure.
>=20
> Lastly I noticed at least one case recently where my diff 'simplified' =
because a struct was changed to the _suggested_ method, with the primary =
struct being created by a memset(); perhaps that's a similar change =
needed in these cases also?
>=20
> Regards,
> Norm
>=20
>=20
>=20
> <cw_reqd_chgs.diff>

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83584-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 15:43:43 2015
Return-Path: <dev-return-83584-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BD09E1085F
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 15:43:43 +0000 (UTC)
Received: (qmail 34713 invoked by uid 500); 26 Aug 2015 15:41:03 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 32505 invoked by uid 500); 26 Aug 2015 15:41:00 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 31264 invoked by uid 99); 26 Aug 2015 15:32:36 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 15:32:36 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 193801AAE78
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:32:36 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 8nyhoQOLFU4Z for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 15:32:29 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 06896212C5
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:32:29 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 9818415A0722
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 17:32:28 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: Intent to Tag 2.5.0 for -alpha consideration
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CACsi250VVwp12Axho5VAr_edGJ4fgefdB6npZvTK-NohMCpn=w@mail.gmail.com>
Date: Wed, 26 Aug 2015 17:32:27 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <48131733-BAF4-4002-8F97-7884448415AD@greenbytes.de>
References: <CACsi250VVwp12Axho5VAr_edGJ4fgefdB6npZvTK-NohMCpn=w@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

=46rom my side it's a "go ahead". We will obviously find bugs in such a =
new module impacting potentially all requests, but the tests we have are =
stable. So, I think, getting it into more peoples hands is the way =
forward.

Btw. if you review the core_protocols.patch and find anything preventing =
a backport, please let me know asap. I personally would like to avoid a =
repeat of the ALPN back porting stop due to lack of time to find a =
proper solution.

Cheers,

  Stefan

> Am 26.08.2015 um 17:21 schrieb William A Rowe Jr =
<wrowe@rowe-clan.net>:
>=20
> I'm planning to tag trunk on 11 Sept to get 2.5.0 and mod_h2 into =
users hands ASAP and collect feedback on that module ahead of any merges =
back into the stable 2.4.x branch.
>=20
> Concerns/Questions/Roadblocks/Showstoppers?

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83585-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 15:43:55 2015
Return-Path: <dev-return-83585-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 296EF1087A
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 15:43:55 +0000 (UTC)
Received: (qmail 36181 invoked by uid 500); 26 Aug 2015 15:41:04 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 34399 invoked by uid 500); 26 Aug 2015 15:41:03 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 31379 invoked by uid 99); 26 Aug 2015 15:33:38 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 15:33:38 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id F2477EE3D6
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:33:37 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id APo-959qFIBo for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 15:33:27 +0000 (UTC)
Received: from mail-ig0-f175.google.com (mail-ig0-f175.google.com [209.85.213.175])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id B6D1520865
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:33:27 +0000 (UTC)
Received: by igui7 with SMTP id i7so14644578igu.0
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 08:33:27 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=W44BAfEstq1aThqV0L8U7+c5C5B8bTkLKvT83rfvs/4=;
        b=ces9Wn7VU8uWqBdw3M5RoLWMaK7ymf5DU2PA6fIDdnkxougViQxccBYPm46VpqRAQL
         JYmfU9My2sRwJUoY6etBH+/0HM9lOwQWAPIRSLPfRRgmerBZMkdUskXfw2f9YPtiwE+u
         zyHQ/lc+bjztocXeLvza84lpgTEBxwWxIVHHKPI0GaArof7KdLEh1z23XMO+nRmKsXrm
         kP0nEd0EJGUNkyaOUWxrVaIy2Pod8Qp6hdk1Vq0+crHzoodkCtlaV/vlf/xZQErwrKDk
         jzqCi8FOWTOa/Q+YGRDVOH3ZnjWBRNZgOWVOiWLHTQaoUhORfPAJJy3OisfIH3nUGYky
         my0A==
X-Gm-Message-State: ALoCoQleTK+lOFjI/cLhc0R6P9oZPCIyoEBtI8AY5y3Yn7eb0akx6S++hwpFmqDs003ccqyPpZ23
MIME-Version: 1.0
X-Received: by 10.50.17.66 with SMTP id m2mr12134459igd.77.1440603207090; Wed,
 26 Aug 2015 08:33:27 -0700 (PDT)
Received: by 10.107.16.8 with HTTP; Wed, 26 Aug 2015 08:33:27 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
In-Reply-To: <D8F4A20E-5BCA-4CC6-BBD3-AC7DE1A3BCBF@greenbytes.de>
References: <55DCF1F8.4010203@gknw.net>
	<D8F4A20E-5BCA-4CC6-BBD3-AC7DE1A3BCBF@greenbytes.de>
Date: Wed, 26 Aug 2015 10:33:27 -0500
Message-ID: <CACsi252h2rv5BtFCFVCcEWMjHKPoOB9=0T4g6VJZUKjccCoH8Q@mail.gmail.com>
Subject: Re: modules\http2 - structure initializing.
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=089e0122e6ee6be13f051e38921c

--089e0122e6ee6be13f051e38921c
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Netware, I'd presume.

Going forwards on trunk (not breaking 2.4.x) I agree with Norm that the
explicit list is easier for developers to first approach than the list
schema.

The feature I'd really like to see us adopt on trunk is incomplete
structures, which would allow us to break code that believes it knows the
length of an httpd exported structure (it doesn't).

The showstopper I see to 2.6/3.0 GA would be an explicit _create
initializer for all of httpd's exposed types.  This would prevent the sort
of breakage caused by our introduction of HttpTrailers late in the 2.4.x
game.

Bill

On Wed, Aug 26, 2015 at 10:26 AM, Stefan Eissing <
stefan.eissing@greenbytes.de> wrote:

> Hi Norm,
>
> I think these type of assignments are part of the C90 standard. I am not
> sure we want to support a compiler that cannot cope with that, but I may =
be
> to green to know that. What platform is this on exactly?
>
> //Stefan
>
> > Am 26.08.2015 um 00:53 schrieb NormW <normw@gknw.net>:
> >
> > G/Morning,
> > Herewith an svn diff that implements line-by-line initialization of
> three structures (no idea if there's a technical term for it) in place of
> the list method now used, e.g struct x =3D { , , , }.
> >
> > I acknowledge upfront that 'my' somewhat dated compiler cannot handle
> the list method, whereas the method portrayed in the diff is totally
> acceptable to it.
> >
> > However, I find the 'list' method less easier to 'read' as the struct
> elements are not 'visible', and one has to locate the struct definition
> itself to see what is being set to what. The method as illustrated by the
> patch is clearer (to my mind) and not affected by the order of the elemen=
ts
> within the primary structure.
> >
> > Lastly I noticed at least one case recently where my diff 'simplified'
> because a struct was changed to the _suggested_ method, with the primary
> struct being created by a memset(); perhaps that's a similar change neede=
d
> in these cases also?
> >
> > Regards,
> > Norm
> >
> >
> >
> > <cw_reqd_chgs.diff>
>
> <green/>bytes GmbH
> Hafenweg 16, 48155 M=C3=BCnster, Germany
> Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782
>
>
>
>

--089e0122e6ee6be13f051e38921c
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">Netw=
are, I&#39;d presume.</div><div class=3D"gmail_quote"><br></div><div class=
=3D"gmail_quote">Going forwards on trunk (not breaking 2.4.x) I agree with =
Norm that the explicit list is easier for developers to first approach than=
 the list schema.</div><div class=3D"gmail_quote"><br></div><div class=3D"g=
mail_quote">The feature I&#39;d really like to see us adopt on trunk is inc=
omplete structures, which would allow us to break code that believes it kno=
ws the length of an httpd exported structure (it doesn&#39;t).</div><div cl=
ass=3D"gmail_quote"><br></div><div class=3D"gmail_quote">The showstopper I =
see to 2.6/3.0 GA would be an explicit _create initializer for all of httpd=
&#39;s exposed types.=C2=A0 This would prevent the sort of breakage caused =
by our introduction of HttpTrailers late in the 2.4.x game.</div><div class=
=3D"gmail_quote"><br></div><div class=3D"gmail_quote">Bill</div><div class=
=3D"gmail_quote"><br></div><div class=3D"gmail_quote">On Wed, Aug 26, 2015 =
at 10:26 AM, Stefan Eissing <span dir=3D"ltr">&lt;<a href=3D"mailto:stefan.=
eissing@greenbytes.de" target=3D"_blank">stefan.eissing@greenbytes.de</a>&g=
t;</span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0=
 .8ex;border-left:1px #ccc solid;padding-left:1ex">Hi Norm,<br>
<br>
I think these type of assignments are part of the C90 standard. I am not su=
re we want to support a compiler that cannot cope with that, but I may be t=
o green to know that. What platform is this on exactly?<br>
<br>
//Stefan<br>
<div><div class=3D"h5"><br>
&gt; Am 26.08.2015 um 00:53 schrieb NormW &lt;<a href=3D"mailto:normw@gknw.=
net">normw@gknw.net</a>&gt;:<br>
&gt;<br>
&gt; G/Morning,<br>
&gt; Herewith an svn diff that implements line-by-line initialization of th=
ree structures (no idea if there&#39;s a technical term for it) in place of=
 the list method now used, e.g struct x =3D { , , , }.<br>
&gt;<br>
&gt; I acknowledge upfront that &#39;my&#39; somewhat dated compiler cannot=
 handle the list method, whereas the method portrayed in the diff is totall=
y acceptable to it.<br>
&gt;<br>
&gt; However, I find the &#39;list&#39; method less easier to &#39;read&#39=
; as the struct elements are not &#39;visible&#39;, and one has to locate t=
he struct definition itself to see what is being set to what. The method as=
 illustrated by the patch is clearer (to my mind) and not affected by the o=
rder of the elements within the primary structure.<br>
&gt;<br>
&gt; Lastly I noticed at least one case recently where my diff &#39;simplif=
ied&#39; because a struct was changed to the _suggested_ method, with the p=
rimary struct being created by a memset(); perhaps that&#39;s a similar cha=
nge needed in these cases also?<br>
&gt;<br>
&gt; Regards,<br>
&gt; Norm<br>
&gt;<br>
&gt;<br>
&gt;<br>
</div></div>&gt; &lt;cw_reqd_chgs.diff&gt;<br>
<br>
&lt;green/&gt;bytes GmbH<br>
Hafenweg 16, 48155 M=C3=BCnster, Germany<br>
Phone: <a href=3D"tel:%2B49%20251%202807760" value=3D"+492512807760">+49 25=
1 2807760</a>. Amtsgericht M=C3=BCnster: HRB5782<br>
<br>
<br>
<br>
</blockquote></div><br></div></div>

--089e0122e6ee6be13f051e38921c--

From dev-return-83586-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 15:44:00 2015
Return-Path: <dev-return-83586-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6722B10898
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 15:44:00 +0000 (UTC)
Received: (qmail 38577 invoked by uid 500); 26 Aug 2015 15:41:07 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 36395 invoked by uid 500); 26 Aug 2015 15:41:04 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 31624 invoked by uid 99); 26 Aug 2015 15:36:08 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 15:36:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id C8398EE3B9
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:29:43 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.998
X-Spam-Level: **
X-Spam-Status: No, score=2.998 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id QYUqMbD6X0md for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 15:29:42 +0000 (UTC)
Received: from mail-io0-f179.google.com (mail-io0-f179.google.com [209.85.223.179])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 3EACD42BF6
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:29:42 +0000 (UTC)
Received: by iodb91 with SMTP id b91so22891960iod.1
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 08:29:41 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=kM+Nvugk0mypJ2OYOCDNik5yOqWZrmAH4NuBiwjzg2o=;
        b=XDChRfki2nrDFKQ5IzbcmYDEyW4zyPgAOhbVegePuo06QmLoNu9Oz2C6xoKsj3Az5A
         jaA8mitBTiQ8nM4vl0o5gBCoRXdqCwjhS8l5yxBPmETnfv1C6tEGrSaeOwiw/E28nAzL
         Pd7J63udL4cucEmXYdXqSxiMXozrdkcGiF9G9O+sSPAToNmhYT0IS5tiHlQ94Dg4xzlu
         I4EWBdlstc2PVK2ql1vFxxDHnAYMuvOQyIo9ZzXYAc/OTyNkMmy9wJydvnIzwAlQDPmu
         oLBRm942TRSdXO1SS/v65q4zj19rb5gQAgun3iXf4l1x26NxPLrc6DOfWTC/+Gzy9nuI
         AW/Q==
X-Gm-Message-State: ALoCoQmIGiYdsySiGBQxToUR8EjYdJE0cNPhfYrFjqk2Q3DHVI+SHAyP6duIwD4elyBA+VqCISOP
MIME-Version: 1.0
X-Received: by 10.107.137.195 with SMTP id t64mr4662704ioi.150.1440602981780;
 Wed, 26 Aug 2015 08:29:41 -0700 (PDT)
Received: by 10.107.16.8 with HTTP; Wed, 26 Aug 2015 08:29:41 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
Date: Wed, 26 Aug 2015 10:29:41 -0500
Message-ID: <CACsi253isUCKNTPF=mo3mqvQ-e0H6gBQyeSmCATYNQyg3Drt0w@mail.gmail.com>
Subject: HTTP Server Project hackathon/BoF in Budapest?
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a113eceacfde9e2051e388491

--001a113eceacfde9e2051e388491
Content-Type: text/plain; charset=UTF-8

First question, will many of us be present and available during the day
Wednesday ahead of the ApacheCon Core content for a hackathon and BoF, or
would it be better for these things to happen on Thursday during/in the
evening of Core?

Bill

--001a113eceacfde9e2051e388491
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">First question, will many of us be present and available d=
uring the day Wednesday ahead of the ApacheCon Core content for a hackathon=
 and BoF, or would it be better for these things to happen on Thursday duri=
ng/in the evening of Core?<div><br></div><div>Bill</div></div>

--001a113eceacfde9e2051e388491--

From dev-return-83587-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 15:47:20 2015
Return-Path: <dev-return-83587-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D28791099D
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 15:47:20 +0000 (UTC)
Received: (qmail 84155 invoked by uid 500); 26 Aug 2015 15:47:20 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 84079 invoked by uid 500); 26 Aug 2015 15:47:20 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 84069 invoked by uid 99); 26 Aug 2015 15:47:20 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 15:47:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id D3E181AAE49
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:47:19 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.88
X-Spam-Level: **
X-Spam-Status: No, score=2.88 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id wUJWVNrUb2Mn for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 15:47:15 +0000 (UTC)
Received: from mail-wi0-f173.google.com (mail-wi0-f173.google.com [209.85.212.173])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 666282557B
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:47:15 +0000 (UTC)
Received: by wicja10 with SMTP id ja10so19317712wic.1
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 08:47:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:references:in-reply-to:from:date:message-id:subject:to
         :content-type;
        bh=iQsNyI3psiumREfCIclnbCydPQZrxfZpHEU/daD9SKQ=;
        b=jUH4kzQEoVJTw9FaCamo9FHkmR89hOUtWSpXgF9fd7CDfYJIHhNyaXhONzuaQpO5WD
         LtM+O5yOcQvDoPOH1d9GPNXhfSMwcV5QpDSusZ56SUA4FdVLD94RUbL/Vrgeo6yDoU5B
         +NoET06CHX6i3vSZ/UGZuXAbe6YpPQWF6ksVS539I3wKsv+XG0MASwZ3L2JofO9tN4s3
         yeKvPtv4P/t2EcyZIfzlb5sFyPVgqbjbXHHqiEpbm6KanGxV+GQjxmF6lU/Dr+mzeIcT
         AqF7t94AfGX3yTQoVPLhIyVQdCxk1w4VAAzv9ZL216rCcgRdPsMzyc64pdO/uk5tB28V
         j/qQ==
X-Received: by 10.194.187.36 with SMTP id fp4mr63469017wjc.88.1440604034176;
 Wed, 26 Aug 2015 08:47:14 -0700 (PDT)
MIME-Version: 1.0
References: <CACsi253isUCKNTPF=mo3mqvQ-e0H6gBQyeSmCATYNQyg3Drt0w@mail.gmail.com>
In-Reply-To: <CACsi253isUCKNTPF=mo3mqvQ-e0H6gBQyeSmCATYNQyg3Drt0w@mail.gmail.com>
From: Eric Covener <covener@gmail.com>
Date: Wed, 26 Aug 2015 15:47:04 +0000
Message-ID: <CALK=YjMoA6iTJzekXWMXGZpSW=hS10Ldb6WHx1AWywS6Y9Tnag@mail.gmail.com>
Subject: Re: HTTP Server Project hackathon/BoF in Budapest?
To: dev@httpd.apache.org
Content-Type: multipart/alternative; boundary=047d7bea2eb6b81db3051e38c399

--047d7bea2eb6b81db3051e38c399
Content-Type: text/plain; charset=UTF-8

On Wed, Aug 26, 2015, 11:43 AM William A Rowe Jr <wrowe@rowe-clan.net>
wrote:

First question, will many of us be present and available during the day
Wednesday ahead of the ApacheCon Core content for a hackathon and BoF, or
would it be better for these things to happen on Thursday during/in the
evening of Core?




Unfortunately I will not be there

--047d7bea2eb6b81db3051e38c399
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<p dir=3D"ltr"><br>
</p>
<p dir=3D"ltr"></p>
<p dir=3D"ltr">On Wed, Aug 26, 2015, 11:43 AM=C2=A0William A Rowe Jr &lt;<a=
 href=3D"mailto:wrowe@rowe-clan.net">wrowe@rowe-clan.net</a>&gt; wrote:</p>
<blockquote><p dir=3D"ltr">First question, will many of us be present and a=
vailable during the day Wednesday ahead of the ApacheCon Core content for a=
 hackathon and BoF, or would it be better for these things to happen on Thu=
rsday during/in the evening of Core?<br>
</p>
</blockquote>
<p dir=3D"ltr"><br>
</p>
<blockquote><p dir=3D"ltr"><br>
</p>
</blockquote>
<p dir=3D"ltr"><br>
</p>
<p dir=3D"ltr">Unfortunately I will not be there</p>

--047d7bea2eb6b81db3051e38c399--

From dev-return-83588-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 15:55:19 2015
Return-Path: <dev-return-83588-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CC1B410A16
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 15:55:19 +0000 (UTC)
Received: (qmail 7676 invoked by uid 500); 26 Aug 2015 15:55:19 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 7605 invoked by uid 500); 26 Aug 2015 15:55:19 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 7590 invoked by uid 99); 26 Aug 2015 15:55:19 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 15:55:19 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id AD8BEC0250
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:55:18 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 6v4g2SLoyNxT for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 15:55:10 +0000 (UTC)
Received: from mail-io0-f174.google.com (mail-io0-f174.google.com [209.85.223.174])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 05C8542F2E
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:55:10 +0000 (UTC)
Received: by iodv127 with SMTP id v127so23925753iod.3
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 08:55:09 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=DNiFv2+YyN+WXL/8eM8tw3qIqOgqcKfmcRU9oOXJPn0=;
        b=dYN9abYTlyiiPVWMgl8lTQe/ZWCxT7+CPj/N4cCCbQ5zzHdIQp0MBUb3ujlhddkDqj
         WhbWSP2RY9y44/usx7cC0k0t1yNWew90RxFPd+zkw0QqhGEPwLYK7KA60k5/FO/XtlYw
         lGnM5DjAbJf9GP4xQLzfT6z835hmJ5OkBykjWs68pTgydFtqFVX+HWNgdKrdAKSUO/8d
         776ulUjwSpzAU7ZxA5rvN1BRlVIJ6Mvj/FUeBJ1RDQ1trPvrgwEC8D3JJT3miE9Vol0H
         Krlpu1FTYM5p29n7mpYYqUqWEo8RO2llL1qlr/qEiEC9I2Fs2UYXteC4zgIOQCb76c4B
         aFig==
X-Gm-Message-State: ALoCoQnnRIPGOrYOO5HIARmvP8unFqtq2ILCxHkWRlrbtBrjOu+uS3RqrFvEIho9JJhGzHFjTvYt
MIME-Version: 1.0
X-Received: by 10.107.32.72 with SMTP id g69mr4500985iog.86.1440604509431;
 Wed, 26 Aug 2015 08:55:09 -0700 (PDT)
Received: by 10.107.16.8 with HTTP; Wed, 26 Aug 2015 08:55:09 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
In-Reply-To: <CACsi2527pNB0Lx1zzd=oFSyS7iSowUHX-mEnCx3LdxModd+dMg@mail.gmail.com>
References: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de>
	<CACsi2527pNB0Lx1zzd=oFSyS7iSowUHX-mEnCx3LdxModd+dMg@mail.gmail.com>
Date: Wed, 26 Aug 2015 10:55:09 -0500
Message-ID: <CACsi253uGu_ebgoH=08FTYyEQDKthEfL7nrM=rTSwpRMi-q9tw@mail.gmail.com>
Subject: Re: proposed backport, mod_h2 github release
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1140aebe0c2948051e38e0e4

--001a1140aebe0c2948051e38e0e4
Content-Type: text/plain; charset=UTF-8

On Wed, Aug 26, 2015 at 10:20 AM, William A Rowe Jr <wrowe@rowe-clan.net>
wrote:

> On Wed, Aug 26, 2015 at 8:44 AM, Stefan Eissing <
> stefan.eissing@greenbytes.de> wrote:
>
>> I just submitted my first backport STATUS update. Hope I did everything
>> ok, otherwise please let me know.
>>
>> For backporting mod_h2 to 2.4.x, I decided to make it in two parts: one
>> is the patch to core/mod_ssl that introduces Protocols. That is now in
>> STATUS.
>>
>> Next would be a patch for modules/http2 which is basically all source
>> files, changes in build and docs. Since there are many new files, does it
>> sense to make a patch for that or do we handle that differently?
>>
>> Also: since there were some people testing the github releases in their
>> own setups, I thought it helpful to let them test the core patch and mod_h2
>> as it currently is. I made a new release of mod_h2 on github which
>> basically downloads httpd 2.4.16, applies the core patch and builds the
>> mod_h2 copy against it. Hopefully some people take it out for a spin and
>> report back
>
>
> Looking forward to reviewing the code this week!
>
> At the moment, I'm dubious that we are going to be able to meet the
> criteria that modules built for httpd 2.4.x will continue to function
> correctly without recompilation under 2.4+refactoring, but that's an
> absolute requirement of our versioning promises.  In such a case, 2.6.x (or
> 3.0.0) would become a top priority.  So there's that to consider.
>
> I'd like to RM a 2.5.0-alpha release on Friday 11 Sept, that would put the
> mod_h2 + refactoring into the hands of bleeding edge adopters, ahead of the
> ApacheCon Core in Budapest.  We make no promises about the API between
> 2.5.0 and 2.5.x and users are expected to recompile their modules while
> working on that bleed branch.
>

Moving feedback back to the backport considerations thread...

> > Btw. if you review the core_protocols.patch and find anything
preventing a backport, please let me know asap. I personally would like to
avoid a repeat of the ALPN back porting stop due to lack of time to find a
proper solution.

Of course!  The underlying guideline is that all modules built for
2.4.16, blissfully unaware of the 'future' Protocols schema, still "just
work" without recompilation or reconfiguration.  If this proves impossible,
the backport solution is probably to keep H2Protocols in place on any
legacy module, and reserve the generic Protocols for trunk and future
releases.

ASF mod_ftp is an example of an alternate protocol provider that (as of
trunk flavor) should still just work.  It happens to be the most convenient
for me to compare, but is by no means the only example.  I have a couple
patches to integrate before proposing a mod_ftp 1.0.1 tag for a release
vote, but expect to immediately afterwards start to integrate the proposed
Protocols behavior in httpd trunk, and be ahead of the game this round
rather than behind in the case of 2.4.x :)

--001a1140aebe0c2948051e38e0e4
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On W=
ed, Aug 26, 2015 at 10:20 AM, William A Rowe Jr <span dir=3D"ltr">&lt;<a hr=
ef=3D"mailto:wrowe@rowe-clan.net" target=3D"_blank">wrowe@rowe-clan.net</a>=
&gt;</span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px=
 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);bor=
der-left-style:solid;padding-left:1ex"><div dir=3D"ltr"><div class=3D"gmail=
_extra"><div class=3D"gmail_quote"><span class=3D"">On Wed, Aug 26, 2015 at=
 8:44 AM, Stefan Eissing <span dir=3D"ltr">&lt;<a href=3D"mailto:stefan.eis=
sing@greenbytes.de" target=3D"_blank">stefan.eissing@greenbytes.de</a>&gt;<=
/span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px =
0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-l=
eft-style:solid;padding-left:1ex">I just submitted my first backport STATUS=
 update. Hope I did everything ok, otherwise please let me know.<br>
<br>
For backporting mod_h2 to 2.4.x, I decided to make it in two parts: one is =
the patch to core/mod_ssl that introduces Protocols. That is now in STATUS.=
<br>
<br>
Next would be a patch for modules/http2 which is basically all source files=
, changes in build and docs. Since there are many new files, does it sense =
to make a patch for that or do we handle that differently?<br>
<br>
Also: since there were some people testing the github releases in their own=
 setups, I thought it helpful to let them test the core patch and mod_h2 as=
 it currently is. I made a new release of mod_h2 on github which basically =
downloads httpd 2.4.16, applies the core patch and builds the mod_h2 copy a=
gainst it. Hopefully some people take it out for a spin and report back</bl=
ockquote><div><br></div></span><div>Looking forward to reviewing the code t=
his week!</div><div><br></div><div>At the moment, I&#39;m dubious that we a=
re going to be able to meet the criteria that modules built for httpd 2.4.x=
 will continue to function correctly without recompilation under 2.4+refact=
oring, but that&#39;s an absolute requirement of our versioning promises.=
=C2=A0 In such a case, 2.6.x (or 3.0.0) would become a top priority.=C2=A0 =
So there&#39;s that to consider.</div><div><br></div><div>I&#39;d like to R=
M a 2.5.0-alpha release on Friday 11 Sept, that would put the mod_h2 + refa=
ctoring into the hands of bleeding edge adopters, ahead of the ApacheCon Co=
re in Budapest.=C2=A0 We make no promises about the API between 2.5.0 and 2=
.5.x and users are expected to recompile their modules while working on tha=
t bleed branch.</div></div></div></div></blockquote></div><div class=3D"gma=
il_extra"><br></div><div class=3D"gmail_extra">Moving feedback back to the =
backport considerations thread...</div><div class=3D"gmail_extra"><br></div=
><span style=3D"font-size:12.8000001907349px">&gt; &gt; Btw. if you review =
the core_protocols.patch and find anything preventing a backport, please le=
t me know asap. I personally would like to avoid a repeat of the ALPN back =
porting stop due to lack of time to find a proper solution.</span><br style=
=3D"font-size:12.8000001907349px"></div><div class=3D"gmail_extra"><span st=
yle=3D"font-size:12.8000001907349px"><br></span></div><div class=3D"gmail_e=
xtra"><span style=3D"font-size:12.8000001907349px">Of course!=C2=A0 The und=
erlying guideline is that all modules built for 2.4.16,=C2=A0blissfully=C2=
=A0unaware of the &#39;future&#39; Protocols schema, still &quot;just work&=
quot; without recompilation or reconfiguration.=C2=A0 If this proves imposs=
ible, the backport solution is probably to keep H2Protocols in place on any=
 legacy module, and reserve the generic Protocols for trunk and future rele=
ases.</span></div><div class=3D"gmail_extra"><span style=3D"font-size:12.80=
00001907349px"><br></span></div><div class=3D"gmail_extra"><span style=3D"f=
ont-size:12.8000001907349px">ASF mod_ftp is an example of an alternate prot=
ocol provider that (as of trunk flavor) should still just work.=C2=A0 It ha=
ppens to be the most convenient for me to compare, but is by no means the o=
nly example.=C2=A0 I have a couple patches to integrate before proposing a =
mod_ftp 1.0.1 tag for a release vote, but expect to immediately afterwards =
start to integrate the proposed Protocols behavior in httpd trunk, and be a=
head of the game this round rather than behind in the case of 2.4.x :)</spa=
n></div><div class=3D"gmail_extra"><span style=3D"font-size:12.800000190734=
9px"><br></span></div><div class=3D"gmail_extra"><span style=3D"font-size:1=
2.8000001907349px"><br></span></div><div class=3D"gmail_extra"><span style=
=3D"font-size:12.8000001907349px"><br></span></div><div class=3D"gmail_extr=
a"><span style=3D"font-size:12.8000001907349px"><br></span></div><div class=
=3D"gmail_extra"><span style=3D"font-size:12.8000001907349px"><br></span></=
div><div class=3D"gmail_extra"><span style=3D"font-size:12.8000001907349px"=
><br></span></div><div class=3D"gmail_extra"><span style=3D"font-size:12.80=
00001907349px"><br></span></div><div class=3D"gmail_extra"><span style=3D"f=
ont-size:12.8000001907349px"><br></span></div><div class=3D"gmail_extra"><s=
pan style=3D"font-size:12.8000001907349px"><br></span></div><div class=3D"g=
mail_extra"><span style=3D"font-size:12.8000001907349px"><br></span></div><=
div class=3D"gmail_extra"><span style=3D"font-size:12.8000001907349px"><br>=
</span></div><div class=3D"gmail_extra"><span style=3D"font-size:12.8000001=
907349px"><br></span></div></div>

--001a1140aebe0c2948051e38e0e4--

From dev-return-83589-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 16:39:18 2015
Return-Path: <dev-return-83589-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E5C9310CE6
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 16:39:18 +0000 (UTC)
Received: (qmail 64748 invoked by uid 500); 26 Aug 2015 16:39:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 64657 invoked by uid 500); 26 Aug 2015 16:39:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 64615 invoked by uid 99); 26 Aug 2015 16:39:16 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 16:39:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id C5BDFEE2CF
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 16:39:15 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.15
X-Spam-Level: ***
X-Spam-Status: No, score=3.15 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	FREEMAIL_ENVFROM_END_DIGIT=0.25, HTML_MESSAGE=3, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id J70_rnOjVAte for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 16:39:10 +0000 (UTC)
Received: from mail-ob0-f174.google.com (mail-ob0-f174.google.com [209.85.214.174])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 2427A20865
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 16:39:10 +0000 (UTC)
Received: by obkg7 with SMTP id g7so176177505obk.3
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 09:39:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=kzB9I3jGGDZhFX8/SRdC/h3/m6IuPpBC1H5eKBBm6Bo=;
        b=CIfJG872e2sim2ruQVaIbYZpVzHWOuihuHynWo3hqAU837A4tars6K53U+HsKajKDv
         iXaZFXoWqmvk0tGl+dimQp23JG4/Y/BSIy6Sts/Uq0U3oEUFGROHZWFjjBuI2yaxaFCF
         P3NIf0mZ4f2DYdd4EAwrcxTvjKxZpIyIZez1tO56XJ+xS1f28lIBRBMq8v6oa5X42Xbe
         PtwUfO0YuKpJSVWYUkWLBZGFVoALKSCMcZxtFRyeTWHNc0T7xBeDEohrRyF+er7zG7Cj
         aj6iiX83gMEddmeZPuT6Fc++yboTWfqSNClBLpp4REikfbNPZBbti4SaDv3IamuXnetD
         6VtA==
MIME-Version: 1.0
X-Received: by 10.182.20.141 with SMTP id n13mr34776692obe.26.1440607143311;
 Wed, 26 Aug 2015 09:39:03 -0700 (PDT)
Received: by 10.182.37.40 with HTTP; Wed, 26 Aug 2015 09:39:03 -0700 (PDT)
In-Reply-To: <B7CDEFF9-8666-4EBA-893F-35F4522601D3@greenbytes.de>
References: <CAL7zx_dXoEWWWZdqNva8JVALZo=_szfj8xGGgjoC+rBNOcRqOg@mail.gmail.com>
	<B7CDEFF9-8666-4EBA-893F-35F4522601D3@greenbytes.de>
Date: Wed, 26 Aug 2015 12:39:03 -0400
Message-ID: <CAL7zx_fS5fsaTrvLSFhkDhn8qCgVkaiweVHWka0shXD1+a-74g@mail.gmail.com>
Subject: Re: Getting all supported protocols
From: Edward Lu <chaosed0@gmail.com>
To: dev@httpd.apache.org
Content-Type: multipart/alternative; boundary=e89a8f923bea09d230051e397d88

--e89a8f923bea09d230051e397d88
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Yes, that's right - the toolkit does itself decide which protocol is used.
However, it decides based on the order of the protocols we pass to it; that
is, it will find the first protocol in the list supported by the client and
negotiate it. We will order the list ourselves according to Protocols and
ProtocolsHonorOrder.

The general structure of this toolkit's API is quite different OpenSSL's -
it's not callback-based, all we do is pass it a bunch of parameters and
then tell it to go ahead with the handshake. I think that may have
influenced this API more than NPN.


On Wed, Aug 26, 2015 at 11:20 AM, Stefan Eissing <
stefan.eissing@greenbytes.de> wrote:

> Hmm, this was the kind of behaviour of NPN, maybe that influenced the API
> of that toolkit?
>
> I imagine that the toolkit will decide itself then what protocol is
> negotiated. That would mean that the directive ProtocolsHonorOrder has no
> longer an effect. Am I right?
>
> I do not think that is what we want.
>
> //Stefan
>
> > Am 26.08.2015 um 17:02 schrieb Edward Lu <chaosed0@gmail.com>:
> >
> > I was experimenting with the new support for declaring protocols for
> e.g. ALPN, but with an SSL toolkit other than openssl. This one wants us =
to
> pass the entire list of all the protocols the server supports in advance;
> later, we can request the one protocol that the toolkit negotiated.
> >
> > It looks like the protocol_propose hook allows us to only grab a subset
> of the protocols - i.e. it expects us to have the protocol list that the
> client sends us. I've attached a patch which modifies the protocol_propos=
e
> hook's interface (documentation), allowing us to get all of the protocols
> supported by the server. I also modified h2's implementation of the hook =
to
> reflect the interface change.
> >
> > Let me know if anyone sees a problem.
> >
> > <all_protos.diff>
>
> <green/>bytes GmbH
> Hafenweg 16, 48155 M=C3=BCnster, Germany
> Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782
>
>
>
>

--e89a8f923bea09d230051e397d88
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Yes, that&#39;s right - the toolkit does itself decide whi=
ch protocol is used. However, it decides based on the order of the protocol=
s we pass to it; that is, it will find the first protocol in the list suppo=
rted by the client and negotiate it. We will order the list ourselves accor=
ding to Protocols  and ProtocolsHonorOrder.<br><br>The general structure of=
 this toolkit&#39;s API is quite different OpenSSL&#39;s  - it&#39;s not ca=
llback-based, all we do is pass it a bunch of parameters and then tell it t=
o go ahead with the handshake. I think that may have influenced this API mo=
re than NPN.<br><br></div><div class=3D"gmail_extra"><br><div class=3D"gmai=
l_quote">On Wed, Aug 26, 2015 at 11:20 AM, Stefan Eissing <span dir=3D"ltr"=
>&lt;<a href=3D"mailto:stefan.eissing@greenbytes.de" target=3D"_blank">stef=
an.eissing@greenbytes.de</a>&gt;</span> wrote:<br><blockquote class=3D"gmai=
l_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left=
:1ex">Hmm, this was the kind of behaviour of NPN, maybe that influenced the=
 API of that toolkit?<br>
<br>
I imagine that the toolkit will decide itself then what protocol is negotia=
ted. That would mean that the directive ProtocolsHonorOrder has no longer a=
n effect. Am I right?<br>
<br>
I do not think that is what we want.<br>
<br>
//Stefan<br>
<div><div class=3D"h5"><br>
&gt; Am 26.08.2015 um 17:02 schrieb Edward Lu &lt;<a href=3D"mailto:chaosed=
0@gmail.com">chaosed0@gmail.com</a>&gt;:<br>
&gt;<br>
&gt; I was experimenting with the new support for declaring protocols for e=
.g. ALPN, but with an SSL toolkit other than openssl. This one wants us to =
pass the entire list of all the protocols the server supports in advance; l=
ater, we can request the one protocol that the toolkit negotiated.<br>
&gt;<br>
&gt; It looks like the protocol_propose hook allows us to only grab a subse=
t of the protocols - i.e. it expects us to have the protocol list that the =
client sends us. I&#39;ve attached a patch which modifies the protocol_prop=
ose hook&#39;s interface (documentation), allowing us to get all of the pro=
tocols supported by the server. I also modified h2&#39;s implementation of =
the hook to reflect the interface change.<br>
&gt;<br>
&gt; Let me know if anyone sees a problem.<br>
&gt;<br>
</div></div>&gt; &lt;all_protos.diff&gt;<br>
<br>
&lt;green/&gt;bytes GmbH<br>
Hafenweg 16, 48155 M=C3=BCnster, Germany<br>
Phone: <a href=3D"tel:%2B49%20251%202807760" value=3D"+492512807760">+49 25=
1 2807760</a>. Amtsgericht M=C3=BCnster: HRB5782<br>
<br>
<br>
<br>
</blockquote></div><br></div>

--e89a8f923bea09d230051e397d88--

From dev-return-83590-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 16:55:53 2015
Return-Path: <dev-return-83590-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 91FF410E2A
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 16:55:53 +0000 (UTC)
Received: (qmail 10757 invoked by uid 500); 26 Aug 2015 16:55:53 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 10680 invoked by uid 500); 26 Aug 2015 16:55:53 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 10670 invoked by uid 99); 26 Aug 2015 16:55:53 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 16:55:53 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 9608C1AAD3B
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 16:55:52 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id cHuCxj5j_TZh for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 16:55:47 +0000 (UTC)
Received: from mail-ig0-f179.google.com (mail-ig0-f179.google.com [209.85.213.179])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 7533342921
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 16:55:47 +0000 (UTC)
Received: by igui7 with SMTP id i7so41866124igu.1
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 09:55:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=1uQc1xeI+gVady+WASu0OMvHgB1yChtW5XmcnxVQLzk=;
        b=YhqsvHOMZI8Z5qgKga+HkFRNcDX7E72HpRZ1BiwFKq3pYJ1kW8v3e0jjPh1CQCE4CM
         2GuA3tHd7/LGS6h1WGlXDHuURCKbQntiX7u+8eNg9AWb+o5w7m2ta0H0m8zNb7UFPnaQ
         8EjrmQtF84WgED2FOTDNS1qFwCESeJ2GyzHFWgvooQOmWv/jxEfRI6I5WdvsCug88WR+
         XKPDMNdzu7o2kQNSDGj6PNYAYBsOr5Uj2HXMn1c6A7SbFkPD+KvINeOCUNknu3FVNDku
         3BdCujsWOy1Efk4bZLZDIEAayUqBbU0BjuvRYhrSy7UvD2kBPEKPLkyHkMyRZA0bv1DH
         iOoA==
MIME-Version: 1.0
X-Received: by 10.50.64.147 with SMTP id o19mr5378513igs.15.1440608147051;
 Wed, 26 Aug 2015 09:55:47 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Wed, 26 Aug 2015 09:55:46 -0700 (PDT)
In-Reply-To: <55DD172E.7030604@primary.net>
References: <20150821123403.6E568AC04B1@hades.apache.org>
	<CE797968-EF73-4640-BC34-9928D9C07550@jaguNET.com>
	<CAKQ1sVOeB81bpFSFOHPe-oNR+pE0O7YvJ-oFUR0XB1Z6D4ZemQ@mail.gmail.com>
	<6A1F4945-5B3E-4C1D-88E9-4B0A71D59F6C@jaguNET.com>
	<CAKQ1sVNZkfYEbktR1t8C6pt+gVxTZGn-SdmD9UWf8upw2kW0vg@mail.gmail.com>
	<EEA9C20F-2F7F-41BD-8465-5E42D13999F5@jaguNET.com>
	<CAKQ1sVPTDVw30xZM=Utr0Oc+-A23DfaDLCQ4eD0VXJqg5eOB6Q@mail.gmail.com>
	<C029DF93-9430-4A63-98A8-BFFA002186F4@jaguNET.com>
	<CAKQ1sVPiqwKe1-GTvd52iYS-KL2fLpNtFzxfXDPEkKAXGeFRjw@mail.gmail.com>
	<76E1A3C0-4659-4ECE-AA3E-E9B438E7B9A9@jaguNET.com>
	<55DD172E.7030604@primary.net>
Date: Wed, 26 Aug 2015 18:55:46 +0200
Message-ID: <CAKQ1sVPgjgeRt+HFN8Y4nd-yjByQ51FQM1XbDbF1PN0kqeQ7Bw@mail.gmail.com>
Subject: Re: svn commit: r1696960 - in /httpd/httpd/trunk: CHANGES
 docs/log-message-tags/next-number modules/proxy/mod_proxy_balancer.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

On Wed, Aug 26, 2015 at 3:32 AM, Daniel Ruggeri <DRuggeri@primary.net> wrote:
> On 8/25/2015 10:11 AM, Jim Jagielski wrote:
>> Again, if the slotmem exists and is persisted, the assumption
>> is that THAT is what the admin wants, and when Apache restarts,
>> THAT is the running config they desire. If there are changes
>> to the reverse proxy setup, the assumption must be we are
>> starting from scratch; There are, iirc, a number of places where
>> these kinds of checks are done. Trying to somehow "merge" a just-changed
>> file config and a running config (based on an older file config
>> with dynamic changes) is nasty and tough to do correctly.
>
> This is a common problem with serialization. The persisted config is
> serialized data of what is in memory. It can only represent the
> "version" of the conf file that created it. If you change the conf,
> deserialization should fail because there could be other material
> changes that might get in the way.
>
> I'm +1 on the idea that using bgrowth space to add stuff via
> conf+graceful restart should be avoided.

Just to be precise ( and maybe give this change a very last chance :p
), this commit does not use arbitrary bgrowth (or growth) space for
conf+graceful restarts.
The reused slots are still strictly checked against the item_size
(unchanged), such that they are garanteed to contain balancers (or
members) of the vhost, not any other slot-able object.
That's only the check on item_num which is relaxed to verify that it
is *greater or equal* to the number of newly loaded balancers (or
members), whereas the original check was *strictly equal* here too.

My point is that this commit doesn't introduce any issue wrt
arbitrary/unrelated/corrupted slots' reuse on restart, we are really
talking about free space available strictly for balancers (or members)
via the balancer-manager (and the config-file, hopefully).

This means that an admin using the balancer-manager (UI) sees the
changes, is able to manage all the original or reloaded balancers (or
members), and can still add new ones if the slots are not full.

IOW, this commit looks compatible (and useful), to me...
OTOH, forbidding "compatible" changes via the config-file looks quite
unusual (most people configure httpd via the config-file only, I
guess).
But hey, I'm not the community :)

From dev-return-83591-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 17:03:32 2015
Return-Path: <dev-return-83591-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 42A1310E9D
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 17:03:32 +0000 (UTC)
Received: (qmail 32384 invoked by uid 500); 26 Aug 2015 17:03:31 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 32321 invoked by uid 500); 26 Aug 2015 17:03:31 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 32311 invoked by uid 99); 26 Aug 2015 17:03:31 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 17:03:31 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 43B80181BC3
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 17:03:31 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id Stc9ZP3F5USY for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 17:03:26 +0000 (UTC)
Received: from mail-ig0-f178.google.com (mail-ig0-f178.google.com [209.85.213.178])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 3F21A20865
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 17:03:26 +0000 (UTC)
Received: by igui7 with SMTP id i7so42050633igu.1
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 10:03:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=0UTyPOFrSrwy2CIDfFBn2lwnkWH/AAI9ga5n397A5NI=;
        b=i2jpi9HOJYSYFB88+uhV+FjfO9OAsHpNeebY1YelhMcnBHdeMEA2HSb73XRt8Q62cA
         jOeKczoHF62KKbHDFpDimcz1m02Z6zYhApjPS8uj63zlGQh54c1JlVgA7F+xNvmAFBzl
         zd6UFdamyHbKaYt+RoyI73Qz5b6gZw+viH25f7zzz7uqu1MjaQUzY+rl5Uanj6dlwEQV
         YxyGXeqlhSF9zGhnJTjtJp1LjUTf+NkcQu9+30gQCVZXwJQKZRmqaVv1Vq3jbdd4qxNh
         6YTg03sX3Mx8qmEptwRr8Sh19BukYuDMPkCfms0ndZu09jQUo9aXyLWt9I+3CKSuvk5A
         hz5w==
MIME-Version: 1.0
X-Received: by 10.50.50.205 with SMTP id e13mr11900619igo.70.1440608599588;
 Wed, 26 Aug 2015 10:03:19 -0700 (PDT)
Received: by 10.79.26.197 with HTTP; Wed, 26 Aug 2015 10:03:19 -0700 (PDT)
In-Reply-To: <CACsi253isUCKNTPF=mo3mqvQ-e0H6gBQyeSmCATYNQyg3Drt0w@mail.gmail.com>
References: <CACsi253isUCKNTPF=mo3mqvQ-e0H6gBQyeSmCATYNQyg3Drt0w@mail.gmail.com>
Date: Wed, 26 Aug 2015 19:03:19 +0200
Message-ID: <CAKQ1sVPaQLs19XcXALffsX-h3mpnwQc+AzmWkBr_cWq6e9PEhQ@mail.gmail.com>
Subject: Re: HTTP Server Project hackathon/BoF in Budapest?
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

On Wed, Aug 26, 2015 at 5:29 PM, William A Rowe Jr <wrowe@rowe-clan.net> wrote:
> First question, will many of us be present and available during the day
> Wednesday ahead of the ApacheCon Core content for a hackathon and BoF, or
> would it be better for these things to happen on Thursday during/in the
> evening of Core?

I'll be there on Wednesday, and Thurday too but not the evening.

Regards,
Yann.

From dev-return-83592-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 17:08:35 2015
Return-Path: <dev-return-83592-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B793B10EEF
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 17:08:35 +0000 (UTC)
Received: (qmail 48256 invoked by uid 500); 26 Aug 2015 17:08:35 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 48194 invoked by uid 500); 26 Aug 2015 17:08:35 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 48184 invoked by uid 99); 26 Aug 2015 17:08:35 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 17:08:35 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id B8C9F1AAE68
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 17:08:34 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level:
X-Spam-Status: No, score=0.001 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id b9BsDMijHCCf for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 17:08:24 +0000 (UTC)
Received: from resqmta-ch2-03v.sys.comcast.net (resqmta-ch2-03v.sys.comcast.net [69.252.207.35])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id C847525CFC
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 17:08:23 +0000 (UTC)
Received: from resomta-ch2-10v.sys.comcast.net ([69.252.207.106])
	by resqmta-ch2-03v.sys.comcast.net with comcast
	id 9V891r0072JGN3p01V8F8h; Wed, 26 Aug 2015 17:08:15 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-10v.sys.comcast.net with comcast
	id 9V8E1r00U2U0RYt01V8Fuf; Wed, 26 Aug 2015 17:08:15 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: proposed backport, mod_h2 github release
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CACsi2527pNB0Lx1zzd=oFSyS7iSowUHX-mEnCx3LdxModd+dMg@mail.gmail.com>
Date: Wed, 26 Aug 2015 13:08:14 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <14371978-B615-40FF-BF9D-B4C237E3A7B6@jaguNET.com>
References: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de> <CACsi2527pNB0Lx1zzd=oFSyS7iSowUHX-mEnCx3LdxModd+dMg@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440608895;
	bh=45d6jkdXwDXNApV4/3fLg3jgpJ5jn9qf1JC7zeOYAHI=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=kfUawMgDj+lKaApnsl2ZeJTXVjgET+gObw/maZ6Rb0uHbGCwsO0KdMonS1GrexNSd
	 67BKO5eXMoeZPfgTN1FqI7cU9AN3p6M4xBTxFlKZ2Ybel0aQLKILb2zBxaWT9GFA8Q
	 sPgb/snp4OIObCnFx5rwCycC5ZlUm50As0Qcg6WpX0kiX4jHC8SuG9emdr5lI26nju
	 utudIcCbCtXqvyYX925bJbcrGsVWPMqMYVBaDiGsUGyyIyZiryGmmEiS7DfTTiWTiA
	 a6dU6tfEeS5jWypV/avSSRifw1vN5NwdbN6lGaB7VyHBcc7MacqTitTBNUCZmHOjo9
	 A4JxidRzE0BFA==

?? I can't quite grok what you mean:
	I'm dubious that we are going to be able to meet the
	criteria that modules built for httpd 2.4.x will continue to
	function correctly without recompilation under 2.4+refactoring

could you explain??

It seems to me that considering that the h2 module on Github was
specific to Apache 2.4, I don't see why we need to add delays or
processes to officially add http/2 support, via the h2 module, to
2.4.

The whole intent was always that h2 would provide a feedback loop =
between
itself and 2.6/3.0 regarding re-architecturing some aspects, but that
doesn't mean we "withhold" http/2 from 2.4. Of course the h2 module
under 2.4 will be different from what is eventually in 2.6/3.0. But
so what?

> On Aug 26, 2015, at 11:20 AM, William A Rowe Jr <wrowe@rowe-clan.net> =
wrote:
>=20
> On Wed, Aug 26, 2015 at 8:44 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
> I just submitted my first backport STATUS update. Hope I did =
everything ok, otherwise please let me know.
>=20
> For backporting mod_h2 to 2.4.x, I decided to make it in two parts: =
one is the patch to core/mod_ssl that introduces Protocols. That is now =
in STATUS.
>=20
> Next would be a patch for modules/http2 which is basically all source =
files, changes in build and docs. Since there are many new files, does =
it sense to make a patch for that or do we handle that differently?
>=20
> Also: since there were some people testing the github releases in =
their own setups, I thought it helpful to let them test the core patch =
and mod_h2 as it currently is. I made a new release of mod_h2 on github =
which basically downloads httpd 2.4.16, applies the core patch and =
builds the mod_h2 copy against it. Hopefully some people take it out for =
a spin and report back
>=20
> Looking forward to reviewing the code this week!
>=20
> At the moment, I'm dubious that we are going to be able to meet the =
criteria that modules built for httpd 2.4.x will continue to function =
correctly without recompilation under 2.4+refactoring, but that's an =
absolute requirement of our versioning promises.  In such a case, 2.6.x =
(or 3.0.0) would become a top priority.  So there's that to consider.
>=20
> I'd like to RM a 2.5.0-alpha release on Friday 11 Sept, that would put =
the mod_h2 + refactoring into the hands of bleeding edge adopters, ahead =
of the ApacheCon Core in Budapest.  We make no promises about the API =
between 2.5.0 and 2.5.x and users are expected to recompile their =
modules while working on that bleed branch.
>=20
>=20
>=20


From dev-return-83593-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 17:10:24 2015
Return-Path: <dev-return-83593-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9D5FE10F25
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 17:10:24 +0000 (UTC)
Received: (qmail 54940 invoked by uid 500); 26 Aug 2015 17:10:24 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 54863 invoked by uid 500); 26 Aug 2015 17:10:24 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 54849 invoked by uid 99); 26 Aug 2015 17:10:24 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 17:10:24 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 7D2E5181BC3
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 17:10:23 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id DUWuiNxzpPS7 for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 17:10:14 +0000 (UTC)
Received: from resqmta-ch2-06v.sys.comcast.net (resqmta-ch2-06v.sys.comcast.net [69.252.207.38])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id B1BEE42921
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 17:10:13 +0000 (UTC)
Received: from resomta-ch2-05v.sys.comcast.net ([69.252.207.101])
	by resqmta-ch2-06v.sys.comcast.net with comcast
	id 9V9L1r0072Bo0NV01VADfK; Wed, 26 Aug 2015 17:10:13 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-05v.sys.comcast.net with comcast
	id 9VAC1r00J2U0RYt01VACll; Wed, 26 Aug 2015 17:10:13 +0000
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: modules\http2 - structure initializing.
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <D8F4A20E-5BCA-4CC6-BBD3-AC7DE1A3BCBF@greenbytes.de>
Date: Wed, 26 Aug 2015 13:10:12 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <084E1136-EC05-411E-A8B2-599F8C8CF951@jaguNET.com>
References: <55DCF1F8.4010203@gknw.net> <D8F4A20E-5BCA-4CC6-BBD3-AC7DE1A3BCBF@greenbytes.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440609013;
	bh=tUf0hZHCpzcjaIsGKUscEyoh8568X+PljNOpwZB1e1g=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=ZQmg9w92OOaCvHEr8bgmFWZrfk7h96rzFuNYJWjpyc5YsbGPtOOb9sLTcdC23iN+k
	 bMBtw/FwfGNQEFtz5q4SLiYX4ipnSZC260pY2yEPJNus5fu78hWiFjb7I/7AbMTf+N
	 e0lYDcSBsLbYzzT2t6uhrK9nwF+0NLf2GXFjT4xER0JiegI0w72+uqhTHWgigldjKe
	 830tddUreyAnQ/RcQ98Jg1+b8fU/ru4jmlievm32izjhK3/MGdwYk6sRxNyEfCQsAC
	 GXz6guhSrl3FOQ66wQdQIyswZph5W/v7P9/ltK3T2swJu+Apet0WUugI9MUjV2LCPW
	 kDdjVm94sP3kA==

We don't want C90 specifics, certainly not in 2.4... Strict ANSI.

> On Aug 26, 2015, at 11:26 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>=20
> Hi Norm,
>=20
> I think these type of assignments are part of the C90 standard. I am =
not sure we want to support a compiler that cannot cope with that, but I =
may be to green to know that. What platform is this on exactly?
>=20
> //Stefan
>=20
>> Am 26.08.2015 um 00:53 schrieb NormW <normw@gknw.net>:
>>=20
>> G/Morning,
>> Herewith an svn diff that implements line-by-line initialization of =
three structures (no idea if there's a technical term for it) in place =
of the list method now used, e.g struct x =3D { , , , }.
>>=20
>> I acknowledge upfront that 'my' somewhat dated compiler cannot handle =
the list method, whereas the method portrayed in the diff is totally =
acceptable to it.
>>=20
>> However, I find the 'list' method less easier to 'read' as the struct =
elements are not 'visible', and one has to locate the struct definition =
itself to see what is being set to what. The method as illustrated by =
the patch is clearer (to my mind) and not affected by the order of the =
elements within the primary structure.
>>=20
>> Lastly I noticed at least one case recently where my diff =
'simplified' because a struct was changed to the _suggested_ method, =
with the primary struct being created by a memset(); perhaps that's a =
similar change needed in these cases also?
>>=20
>> Regards,
>> Norm
>>=20
>>=20
>>=20
>> <cw_reqd_chgs.diff>
>=20
> <green/>bytes GmbH
> Hafenweg 16, 48155 M=C3=BCnster, Germany
> Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782
>=20
>=20
>=20


From dev-return-83594-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 17:13:33 2015
Return-Path: <dev-return-83594-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 12EFB10F6D
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 17:13:33 +0000 (UTC)
Received: (qmail 62263 invoked by uid 500); 26 Aug 2015 17:13:32 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 62184 invoked by uid 500); 26 Aug 2015 17:13:32 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 62173 invoked by uid 99); 26 Aug 2015 17:13:32 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 17:13:32 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 22C44181BC3
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 17:13:32 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 1xISdFUz0ReI for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 17:13:23 +0000 (UTC)
Received: from resqmta-ch2-10v.sys.comcast.net (resqmta-ch2-10v.sys.comcast.net [69.252.207.42])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 53B1342921
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 17:13:23 +0000 (UTC)
Received: from resomta-ch2-18v.sys.comcast.net ([69.252.207.114])
	by resqmta-ch2-10v.sys.comcast.net with comcast
	id 9VCq1r0042Udklx01VDNqU; Wed, 26 Aug 2015 17:13:23 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-18v.sys.comcast.net with comcast
	id 9VDN1r00J2U0RYt01VDN7v; Wed, 26 Aug 2015 17:13:22 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: Intent to Tag 2.5.0 for -alpha consideration
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CACsi250VVwp12Axho5VAr_edGJ4fgefdB6npZvTK-NohMCpn=w@mail.gmail.com>
Date: Wed, 26 Aug 2015 13:13:22 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <C0AFE6F6-3F2E-4C34-ADA5-FA87E69C75A2@jaguNET.com>
References: <CACsi250VVwp12Axho5VAr_edGJ4fgefdB6npZvTK-NohMCpn=w@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440609203;
	bh=o9ZrQCRV1Dk13HGvms4kn8HraflAsxvABXFFfJIxXiw=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=M9Ro91E2ZYKH0MmCyh8gXOz0Duk3ADgj+ncv3y3+a0jt3gmxFqN6k96O7mShytTAk
	 4/HCXn2sZsi0+LLObQOapwIEONd1Gs5xIUZbWwbttq4MCoxVlzpoXb9n3kMVom33ZJ
	 BB+U2E+jeMLBOqyRmG6sgh9fMOwaBBQnluW8o8vYSYuNp2QCFBpuPX4n9XxB75SSJH
	 ez6VVDRHFY1BkqIpk8gKs3cOOfhV4zyIyxXKd87QUXMM6BtF9S5mDJmlv/LbAWLSh1
	 OyoBuBQiFK9NNhnQ84eANFrZ6qCJQxEskZ2FIVJHku5tQqDIFh/MxEbcIzRrN+wOgp
	 SVfFXLmXT6Omg==

Ideally, getting mod_h2 into users hands will be MUCH easier by focusing
on finishing up the 2.4 backporting... This "out of the blue" notice
to alpha 2.5 seems to me some method to "stall" or circumvent action in =
that
direction by changing the goalposts...

-0.9

> On Aug 26, 2015, at 11:21 AM, William A Rowe Jr <wrowe@rowe-clan.net> =
wrote:
>=20
> I'm planning to tag trunk on 11 Sept to get 2.5.0 and mod_h2 into =
users hands ASAP and collect feedback on that module ahead of any merges =
back into the stable 2.4.x branch.
>=20
> Concerns/Questions/Roadblocks/Showstoppers?


From dev-return-83595-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 17:24:18 2015
Return-Path: <dev-return-83595-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0B71C10FEA
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 17:24:18 +0000 (UTC)
Received: (qmail 92925 invoked by uid 500); 26 Aug 2015 17:24:14 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 92859 invoked by uid 500); 26 Aug 2015 17:24:14 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 92849 invoked by uid 99); 26 Aug 2015 17:24:14 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 17:24:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 01FF8181BC3
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 17:24:14 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id yo1SH_8Gcqtf for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 17:24:05 +0000 (UTC)
Received: from mail-io0-f175.google.com (mail-io0-f175.google.com [209.85.223.175])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 7F44B212C5
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 17:24:04 +0000 (UTC)
Received: by iods203 with SMTP id s203so27384110iod.0
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 10:24:03 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=xF8irXdzJzKlC6JwRUvaS9U1r+LFoBEIPFxBxQEtHsc=;
        b=ZC5hplnuLrsMamFNCaUJQyp0GGH5YvtqHg4LVKrAhJnGH873sYjvp7XCw+Cqsiz6Lm
         oEU1jVZi9Ds/cLCWih1tbqroKOCaLd1dWzDqZyDSmGuVpOPIgkvb11apn1cprkcaXZE8
         o0zrGf+Lw8TKqHZ5UX7XONV/7GCAzf1cxr5Y74yYoUky5HQLZCXyRO+Uyn4bQZxQ7Nmo
         OLWZoIVDkLuLebXBdSSUCCnTdbwm15jo3ZNSH8+HSwRxa90qDZKlkzVXz7CQq9IWnM+P
         ze++u9RbjXdqakDibWcIqFtEVOVVXFxQaWZLqkNzhOSsm1fJyXSf+rwetyMjlhOvKIe1
         NSXA==
X-Gm-Message-State: ALoCoQnJAjF7lyEXIvxvf74OqEAWfqg18rsndbpLNcu5+Zjr/cZKbdn9zXKMgkwNLDO+sdWGoaWB
MIME-Version: 1.0
X-Received: by 10.107.32.72 with SMTP id g69mr5108254iog.86.1440609843279;
 Wed, 26 Aug 2015 10:24:03 -0700 (PDT)
Received: by 10.107.16.8 with HTTP; Wed, 26 Aug 2015 10:24:03 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
In-Reply-To: <C0AFE6F6-3F2E-4C34-ADA5-FA87E69C75A2@jaguNET.com>
References: <CACsi250VVwp12Axho5VAr_edGJ4fgefdB6npZvTK-NohMCpn=w@mail.gmail.com>
	<C0AFE6F6-3F2E-4C34-ADA5-FA87E69C75A2@jaguNET.com>
Date: Wed, 26 Aug 2015 12:24:03 -0500
Message-ID: <CACsi250iB7idokPF0CUTOBqQgqZuEQ_PXUv+=aE6vR7M7MN9Bg@mail.gmail.com>
Subject: Re: Intent to Tag 2.5.0 for -alpha consideration
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1140aebef83a9a051e3a1d5a

--001a1140aebef83a9a051e3a1d5a
Content-Type: text/plain; charset=UTF-8

On Wed, Aug 26, 2015 at 12:13 PM, Jim Jagielski <jim@jagunet.com> wrote:

> Ideally, getting mod_h2 into users hands will be MUCH easier by focusing
> on finishing up the 2.4 backporting... This "out of the blue" notice
> to alpha 2.5 seems to me some method to "stall" or circumvent action in
> that
> direction by changing the goalposts...
>

If everyone is on the same page about our versioning contract with module
authors, the backport thumbs up-or-down decision is going to be clear cut
to all of us, right?

-0.9


Thank you for your notice of intent to vote against a release, I appreciate
the heads-up.  Releases cannot be vetoed, of course.

The faster early adopters can get us bug feedback, the faster the stable
and tested module can be backported to 2.4 without "experimental" warnings,
IMO.

--001a1140aebef83a9a051e3a1d5a
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On W=
ed, Aug 26, 2015 at 12:13 PM, Jim Jagielski <span dir=3D"ltr">&lt;<a href=
=3D"mailto:jim@jagunet.com" target=3D"_blank">jim@jagunet.com</a>&gt;</span=
> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;bo=
rder-left:1px #ccc solid;padding-left:1ex">Ideally, getting mod_h2 into use=
rs hands will be MUCH easier by focusing<br>
on finishing up the 2.4 backporting... This &quot;out of the blue&quot; not=
ice<br>
to alpha 2.5 seems to me some method to &quot;stall&quot; or circumvent act=
ion in that<br>
direction by changing the goalposts...<br></blockquote><div>=C2=A0</div><di=
v>If everyone is on the same page about our versioning contract with module=
 authors, the backport thumbs up-or-down decision is going to be clear cut =
to all of us, right?</div><div><br></div><blockquote class=3D"gmail_quote" =
style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
-0.9</blockquote><div><br></div><div>Thank you for your notice of intent to=
 vote against a release, I appreciate the heads-up.=C2=A0 Releases cannot b=
e vetoed, of course.</div><div><br></div><div>The faster early adopters can=
 get us bug feedback, the faster the stable and tested module can be backpo=
rted to 2.4 without &quot;experimental&quot; warnings, IMO.</div><div><br><=
/div><div><br></div></div></div></div>

--001a1140aebef83a9a051e3a1d5a--

From dev-return-83596-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 17:39:46 2015
Return-Path: <dev-return-83596-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A88F31806E
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 17:39:46 +0000 (UTC)
Received: (qmail 20503 invoked by uid 500); 26 Aug 2015 17:39:46 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 20432 invoked by uid 500); 26 Aug 2015 17:39:46 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 20422 invoked by uid 99); 26 Aug 2015 17:39:46 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 17:39:46 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id AE66A1AAE7A
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 17:39:45 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 8i4DdmAbQqqY for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 17:39:37 +0000 (UTC)
Received: from mail-io0-f179.google.com (mail-io0-f179.google.com [209.85.223.179])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id E8A4E506DD
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 17:39:36 +0000 (UTC)
Received: by iods203 with SMTP id s203so27932768iod.0
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 10:39:36 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=QXeXAPYdOpgjTJSWfJ0sy3oYezjz+/GFeOt6w15oqGM=;
        b=NnKkSFauELvi2RclivDMbYn3x8Cz73I1dELCBSJDnDbIMkO7zfiuNENoJPDtruHavz
         nTiI9aIy50w5T2zAXyjRGEzannCgwDEYhgDWIwWq4+mxyTGj+WoPCBoD6a0X5jIvh4yr
         LE15kfoRdWz0dbh0FP353p2LuUTG3qKP2EkXhtlnXCyqcmPDlXosObY2Of3ouvwcK9nO
         AOLeSDqVJ0845MlcyvbaLP7OtNIiI6hWVwhrrQnNMbEdRjw6qZMvxQzr6ZeDowjn/U0r
         DpujqEB+trmO3YXdxXInNFBEbnWoBdI41A7cqBR7Kjt+3tQflazSdq3S3dbjXz7PfV/O
         Eo+w==
X-Gm-Message-State: ALoCoQkGz6fyVBF8nHyh2oF3DQlJuV9AcgXxLpQdJBPkOSIxez67qyiB4u8AIrePYlALh/dlKd8t
MIME-Version: 1.0
X-Received: by 10.107.32.72 with SMTP id g69mr5214270iog.86.1440610776494;
 Wed, 26 Aug 2015 10:39:36 -0700 (PDT)
Received: by 10.107.16.8 with HTTP; Wed, 26 Aug 2015 10:39:36 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
In-Reply-To: <14371978-B615-40FF-BF9D-B4C237E3A7B6@jaguNET.com>
References: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de>
	<CACsi2527pNB0Lx1zzd=oFSyS7iSowUHX-mEnCx3LdxModd+dMg@mail.gmail.com>
	<14371978-B615-40FF-BF9D-B4C237E3A7B6@jaguNET.com>
Date: Wed, 26 Aug 2015 12:39:36 -0500
Message-ID: <CACsi253JAR1rm3r2=iQ8VvGHyZgNS9i=zftyGNJfZf0Wn7OqEw@mail.gmail.com>
Subject: Re: proposed backport, mod_h2 github release
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1140aebe97cb09051e3a55a8

--001a1140aebe97cb09051e3a55a8
Content-Type: text/plain; charset=UTF-8

On Wed, Aug 26, 2015 at 12:08 PM, Jim Jagielski <jim@jagunet.com> wrote:

> ?? I can't quite grok what you mean:
>         I'm dubious that we are going to be able to meet the
>         criteria that modules built for httpd 2.4.x will continue to
>         function correctly without recompilation under 2.4+refactoring
>
> could you explain??
>

I'm happy to.  I'm not talking about mod_h2 itself, but the API refactoring
in core.


> It seems to me that considering that the h2 module on Github was
> specific to Apache 2.4, I don't see why we need to add delays or
> processes to officially add http/2 support, via the h2 module, to
> 2.4.
>
> The whole intent was always that h2 would provide a feedback loop between
> itself and 2.6/3.0 regarding re-architecturing some aspects, but that
> doesn't mean we "withhold" http/2 from 2.4. Of course the h2 module
> under 2.4 will be different from what is eventually in 2.6/3.0. But

so what?


I think we are on the same page - hopefully mod_h2 can 'fit' within the
current API, or we succeed in working out those API backports such that
that modules do not -need- to be aware of the change to the API that
happened after they were compiled.

The change we made for http trailers was draconian, and forced us to break
our agreement in the name of security, and I hope we can avoid repeating
the issue.  (And we avert that sort of issue in the future with _create
accessors for httpd structures.)

If the committers decide that twisting the API or mod_h2 itself to shoehorn
it into 2.4 is too much, then 2.6 (or 3.0) is still a possibility, and
tagging the state of our 2.5.x development as an -alpha should help us
start cleaning up the state of trunk/.

--001a1140aebe97cb09051e3a55a8
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On W=
ed, Aug 26, 2015 at 12:08 PM, Jim Jagielski <span dir=3D"ltr">&lt;<a href=
=3D"mailto:jim@jagunet.com" target=3D"_blank">jim@jagunet.com</a>&gt;</span=
> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;bo=
rder-left:1px #ccc solid;padding-left:1ex">?? I can&#39;t quite grok what y=
ou mean:<br>
<span class=3D"">=C2=A0 =C2=A0 =C2=A0 =C2=A0 I&#39;m dubious that we are go=
ing to be able to meet the<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 criteria that modules built for httpd 2.4.x wil=
l continue to<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 function correctly without recompilation under =
2.4+refactoring<br>
<br>
</span>could you explain??<br></blockquote><div><br></div><div>I&#39;m happ=
y to.=C2=A0 I&#39;m not talking about mod_h2 itself, but the API refactorin=
g in core.</div><div>=C2=A0</div><blockquote class=3D"gmail_quote" style=3D=
"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
It seems to me that considering that the h2 module on Github was<br>
specific to Apache 2.4, I don&#39;t see why we need to add delays or<br>
processes to officially add http/2 support, via the h2 module, to<br>
2.4.<br>
<br>
The whole intent was always that h2 would provide a feedback loop between<b=
r>
itself and 2.6/3.0 regarding re-architecturing some aspects, but that<br>
doesn&#39;t mean we &quot;withhold&quot; http/2 from 2.4. Of course the h2 =
module<br>
under 2.4 will be different from what is eventually in 2.6/3.0. But=C2=A0</=
blockquote><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;bor=
der-left:1px #ccc solid;padding-left:1ex">so what?</blockquote><div>=C2=A0<=
/div><div>I think we are on the same page - hopefully mod_h2 can &#39;fit&#=
39; within the current API, or we succeed in working out those API backport=
s such that that modules do not -need- to be aware of the change to the API=
 that happened after they were compiled.</div><div><br></div><div>The chang=
e we made for http trailers was draconian, and forced us to break our agree=
ment in the name of security, and I hope we can avoid repeating the issue. =
=C2=A0(And we avert that sort of issue in the future with _create accessors=
 for httpd structures.)</div><div><br></div><div>If the committers decide t=
hat twisting the API or mod_h2 itself to shoehorn it into 2.4 is too much, =
then 2.6 (or 3.0) is still a possibility, and tagging the state of our 2.5.=
x development as an -alpha should help us start cleaning up the state of tr=
unk/.</div></div></div></div>

--001a1140aebe97cb09051e3a55a8--

From dev-return-83597-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 18:00:21 2015
Return-Path: <dev-return-83597-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BE0E01814B
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 18:00:21 +0000 (UTC)
Received: (qmail 63623 invoked by uid 500); 26 Aug 2015 18:00:21 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 63549 invoked by uid 500); 26 Aug 2015 18:00:21 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 63539 invoked by uid 99); 26 Aug 2015 18:00:21 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 18:00:21 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id CE448EE49D
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 18:00:20 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id sUJyQr_MgaSb for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 18:00:11 +0000 (UTC)
Received: from resqmta-ch2-11v.sys.comcast.net (resqmta-ch2-11v.sys.comcast.net [69.252.207.43])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id ED52521277
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 18:00:10 +0000 (UTC)
Received: from resomta-ch2-17v.sys.comcast.net ([69.252.207.113])
	by resqmta-ch2-11v.sys.comcast.net with comcast
	id 9Vzw1r0022TL4Rh01W04qw; Wed, 26 Aug 2015 18:00:04 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-17v.sys.comcast.net with comcast
	id 9W031r00M2U0RYt01W03v9; Wed, 26 Aug 2015 18:00:04 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: Intent to Tag 2.5.0 for -alpha consideration
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CACsi250iB7idokPF0CUTOBqQgqZuEQ_PXUv+=aE6vR7M7MN9Bg@mail.gmail.com>
Date: Wed, 26 Aug 2015 14:00:03 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <FBD62D49-281B-4B49-8D65-A1FF0D561230@jaguNET.com>
References: <CACsi250VVwp12Axho5VAr_edGJ4fgefdB6npZvTK-NohMCpn=w@mail.gmail.com> <C0AFE6F6-3F2E-4C34-ADA5-FA87E69C75A2@jaguNET.com> <CACsi250iB7idokPF0CUTOBqQgqZuEQ_PXUv+=aE6vR7M7MN9Bg@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440612004;
	bh=16mEGEuFTpHzw1roAhxTAF2YebrXCa2XkWIZGunYWq4=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=V+FYlvCw7HZGkjrEqenh6osP4y8LsYqUvLGJCc8B3BmoGS6bo5/mIVguteMG5b0Vh
	 W8KST9XIHikyarVbQJEF5h8A+/ZxgvBPkdwyQmaLdnZrv7k2dV4sLZvadOFnTcXPT+
	 NuVKI2B+0hnQo71gFvYj/r5znQH+zLdJeZ852izkxrDmEDODWIqeJ56y3i0yqi41M0
	 A2KK+kiZBV1Be3ohalKuZJJlTgiX5Lj17NfxUXl9xFLYOLjDN/S/etm4EbWt9aoGQJ
	 kM1IwwC6+hcP/PeZDNTXIodkOpCA+osi4RSSVwb5DFtAROKdQ7yR8A0Hkj3WurFqT8
	 gE5+T00AfBbRA==


> On Aug 26, 2015, at 1:24 PM, William A Rowe Jr <wrowe@rowe-clan.net> =
wrote:
>=20
> On Wed, Aug 26, 2015 at 12:13 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
> Ideally, getting mod_h2 into users hands will be MUCH easier by =
focusing
> on finishing up the 2.4 backporting... This "out of the blue" notice
> to alpha 2.5 seems to me some method to "stall" or circumvent action =
in that
> direction by changing the goalposts...
> =20
> If everyone is on the same page about our versioning contract with =
module authors, the backport thumbs up-or-down decision is going to be =
clear cut to all of us, right?
>=20
> -0.9
>=20
> Thank you for your notice of intent to vote against a release, I =
appreciate the heads-up.  Releases cannot be vetoed, of course.
>=20
> The faster early adopters can get us bug feedback, the faster the =
stable and tested module can be backported to 2.4 without "experimental" =
warnings, IMO.

You do know, of course, that the module WAS designed WITH 2.4 IN MIND...
That is, the module was created to add http/2 to 2.4.=

From dev-return-83598-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 18:21:28 2015
Return-Path: <dev-return-83598-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6359918263
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 18:21:28 +0000 (UTC)
Received: (qmail 35969 invoked by uid 500); 26 Aug 2015 18:21:27 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 35904 invoked by uid 500); 26 Aug 2015 18:21:27 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 35894 invoked by uid 99); 26 Aug 2015 18:21:27 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 18:21:27 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 750D4C028F
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 18:21:27 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0
X-Spam-Level:
X-Spam-Status: No, score=0 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Hnyi9O-ErXYn for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 18:21:23 +0000 (UTC)
Received: from resqmta-ch2-01v.sys.comcast.net (resqmta-ch2-01v.sys.comcast.net [69.252.207.33])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 3689B381A9
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 18:15:07 +0000 (UTC)
Received: from resomta-ch2-07v.sys.comcast.net ([69.252.207.103])
	by resqmta-ch2-01v.sys.comcast.net with comcast
	id 9WCZ1r0052EPM3101WF02q; Wed, 26 Aug 2015 18:15:00 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-07v.sys.comcast.net with comcast
	id 9WEz1r00D2U0RYt01WEzjG; Wed, 26 Aug 2015 18:15:00 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: Intent to Tag 2.5.0 for -alpha consideration
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CACsi250iB7idokPF0CUTOBqQgqZuEQ_PXUv+=aE6vR7M7MN9Bg@mail.gmail.com>
Date: Wed, 26 Aug 2015 14:14:59 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <A56AA9D0-2C03-4349-AEC8-F2DCE665AC21@jaguNET.com>
References: <CACsi250VVwp12Axho5VAr_edGJ4fgefdB6npZvTK-NohMCpn=w@mail.gmail.com> <C0AFE6F6-3F2E-4C34-ADA5-FA87E69C75A2@jaguNET.com> <CACsi250iB7idokPF0CUTOBqQgqZuEQ_PXUv+=aE6vR7M7MN9Bg@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440612900;
	bh=HoWSIcGP1GGqeGEGjBzmk6xj6U4g12+gLpJQNW1kE8g=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=Suqh3gtDs9IwDR04iINtZjTrwzYVnSlMrZxwklfLRGLWhM5wpmxl3wZEysykD+lHz
	 ytWqIBIHaI2eZdISBFNpOiJLaUhyb214+G3HvBChPn39McxIrQanB6pFjEg7g9A8ob
	 wL/LGkD1NPZVGI8CJEeD+WjFTBUke5Z9lQgz4IJL7wd9EGviBRvA1axcD2U3Z8nrp+
	 TNJaUc32t0gP1TO1d7uotrf0gk7sE/N1pBcnpyu/ExCF+qrP9dDkxHPnk3BS2j8FHa
	 +Od6jHEZN8BV0PoRO1qPryGx0ydUGXB92Hqfk0Ngj8tcWuaS89NzVhki8AyB0xiIx8
	 1b3WQhHNrSJ3Q==

>=20
> The faster early adopters can get us bug feedback, the faster the =
stable and tested module can be backported to 2.4 without "experimental" =
warnings, IMO.
>=20

Nobody is going to do that. No one is going to run 2.5 alpha to
test h2 and http/2 when people were ALREADY using and testing
h2|http/2 under 2.4 via the module being available under Github.

Doing this kinda of aborts the whole concept of bringing in mod_h2
as we did: to allow for http/2 NOW and provide insights on how
to best rearchitect 2.6/3.0 for 'even better' http/2 support.=

From dev-return-83599-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 18:34:47 2015
Return-Path: <dev-return-83599-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4C0B618304
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 18:34:47 +0000 (UTC)
Received: (qmail 88129 invoked by uid 500); 26 Aug 2015 18:34:38 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 88045 invoked by uid 500); 26 Aug 2015 18:34:38 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 88035 invoked by uid 99); 26 Aug 2015 18:34:38 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 18:34:38 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 6D5C11AAE89
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 18:34:38 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.106
X-Spam-Level:
X-Spam-Status: No, score=-0.106 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RP_MATCHES_RCVD=-0.006] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=ptc.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id Y19cDiLRrgCQ for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 18:34:23 +0000 (UTC)
Received: from mx1.ptc.com (mx1.ptc.com [12.11.148.188])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id C897124B15
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 18:34:22 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
  d=ptc.com; s=ptc; t=1440614062; x=1472150062;
  h=to:from:subject:message-id:date:mime-version:
   content-transfer-encoding;
  bh=vNyavRYv5ke+HkP2cdBCBN90jW/Fx9bRdJ4A78mT/qs=;
  b=lXBCKmEOzTVorD4q0TvF5Qz3t70r737tX47TPV1bRVshdburxGXSLIXq
   TAYONb2EOemIBWt9poxlOzMGNMOCh+sIkVTZF8bxYfEZD57xgo1rNkGV/
   Lum8cfJJJg/0afYrkyJLCSWnTO4WfwdoZl4SzwbHU8eclXLNsiznNKZ9O
   A=;
X-IronPort-AV: E=Sophos;i="5.17,417,1437451200"; 
   d="scan'208";a="103971967"
Received: from hq-x10prdhub1.ptcnet.ptc.com ([132.253.198.27])
  by mx1-int.ptc.com with ESMTP/TLS/AES128-SHA; 26 Aug 2015 14:34:14 -0400
Received: from awang.ptcnet.ptc.com (132.253.8.73) by
 int-mail-hub1.ptcnet.ptc.com (132.253.201.252) with Microsoft SMTP Server id
 14.3.123.3; Wed, 26 Aug 2015 14:34:14 -0400
To: <dev@httpd.apache.org>
From: Andy Wang <awang@ptc.com>
Subject: PR 54626 - ldaps not working with microsoft ldapsdk
Message-ID: <55DE06A4.9000202@ptc.com>
Date: Wed, 26 Aug 2015 13:34:12 -0500
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.1.0
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"; format=flowed
Content-Transfer-Encoding: 7bit
X-Originating-IP: [132.253.8.73]

https://bz.apache.org/bugzilla/show_bug.cgi?id=54626

It looks like this was fixed in trunk a couple of years ago.

Is there a reason why it wasn't proposed for a backport to 2.4 or to 2.2?

I don't mind managing the patch myself - I'm trying to get someone to 
stage a system for me to test it, and if no one can, I'm planning on 
trying to get to it in a couple of weeks - but seems like this would be 
handy to have fixed in released version.

Thanks,
Andy

From dev-return-83600-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 18:36:13 2015
Return-Path: <dev-return-83600-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 904071832E
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 18:36:13 +0000 (UTC)
Received: (qmail 439 invoked by uid 500); 26 Aug 2015 18:36:08 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 352 invoked by uid 500); 26 Aug 2015 18:36:08 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 298 invoked by uid 99); 26 Aug 2015 18:36:08 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 18:36:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id F0B8BC0979
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 18:36:07 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.995
X-Spam-Level: **
X-Spam-Status: No, score=2.995 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, MIME_QP_LONG_LINE=0.001,
	RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Uq2qi1bb4481 for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 18:35:54 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id ED1E0369E3
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 18:25:43 +0000 (UTC)
Received: from [192.168.178.55] (unknown [84.189.86.234])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 47CF815A34EC
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 20:25:43 +0200 (CEST)
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: multipart/alternative;
	boundary=Apple-Mail-B74EA6BD-0991-499C-A50B-FFDB5498F606
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (1.0)
Subject: Re: proposed backport, mod_h2 github release
Message-Id: <F4ECC87B-262E-4044-8D1B-DC20126B494A@greenbytes.de>
Date: Wed, 26 Aug 2015 20:25:42 +0200
References: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de> <CACsi2527pNB0Lx1zzd=oFSyS7iSowUHX-mEnCx3LdxModd+dMg@mail.gmail.com> <14371978-B615-40FF-BF9D-B4C237E3A7B6@jaguNET.com> <CACsi253JAR1rm3r2=iQ8VvGHyZgNS9i=zftyGNJfZf0Wn7OqEw@mail.gmail.com>
In-Reply-To: <CACsi253JAR1rm3r2=iQ8VvGHyZgNS9i=zftyGNJfZf0Wn7OqEw@mail.gmail.com>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
X-Mailer: iPhone Mail (12H321)


--Apple-Mail-B74EA6BD-0991-499C-A50B-FFDB5498F606
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Well, let's have a look at the core changes and discuss specifics.=20

There are only additions. Hooks and functions. And fields added to core_conf=
ig. Unless some module is messing directly with that, I can see no need for r=
ecompilations.

But I might be wrong. Let's review that patch and see.=20

//Stefan

> Am 26.08.2015 um 19:39 schrieb William A Rowe Jr <wrowe@rowe-clan.net>:
>=20
>> On Wed, Aug 26, 2015 at 12:08 PM, Jim Jagielski <jim@jagunet.com> wrote:
>> ?? I can't quite grok what you mean:
>>         I'm dubious that we are going to be able to meet the
>>         criteria that modules built for httpd 2.4.x will continue to
>>         function correctly without recompilation under 2.4+refactoring
>>=20
>> could you explain??
>=20
> I'm happy to.  I'm not talking about mod_h2 itself, but the API refactorin=
g in core.
> =20
>> It seems to me that considering that the h2 module on Github was
>> specific to Apache 2.4, I don't see why we need to add delays or
>> processes to officially add http/2 support, via the h2 module, to
>> 2.4.
>>=20
>> The whole intent was always that h2 would provide a feedback loop between=

>> itself and 2.6/3.0 regarding re-architecturing some aspects, but that
>> doesn't mean we "withhold" http/2 from 2.4. Of course the h2 module
>> under 2.4 will be different from what is eventually in 2.6/3.0. But=20
>> so what?
> =20
> I think we are on the same page - hopefully mod_h2 can 'fit' within the cu=
rrent API, or we succeed in working out those API backports such that that m=
odules do not -need- to be aware of the change to the API that happened afte=
r they were compiled.
>=20
> The change we made for http trailers was draconian, and forced us to break=
 our agreement in the name of security, and I hope we can avoid repeating th=
e issue.  (And we avert that sort of issue in the future with _create access=
ors for httpd structures.)
>=20
> If the committers decide that twisting the API or mod_h2 itself to shoehor=
n it into 2.4 is too much, then 2.6 (or 3.0) is still a possibility, and tag=
ging the state of our 2.5.x development as an -alpha should help us start cl=
eaning up the state of trunk/.

--Apple-Mail-B74EA6BD-0991-499C-A50B-FFDB5498F606
Content-Type: text/html;
	charset=utf-8
Content-Transfer-Encoding: quoted-printable

<html><head><meta http-equiv=3D"content-type" content=3D"text/html; charset=3D=
utf-8"></head><body dir=3D"auto"><div>Well, let's have a look at the core ch=
anges and discuss specifics.&nbsp;<br><br>There are only additions. Hooks an=
d functions. And fields added to core_config. Unless some module is messing d=
irectly with that, I can see no need for recompilations.</div><div><br></div=
><div>But I might be wrong. Let's review that patch and see.&nbsp;</div><div=
><br></div><div>//Stefan</div><div><br>Am 26.08.2015 um 19:39 schrieb Willia=
m A Rowe Jr &lt;<a href=3D"mailto:wrowe@rowe-clan.net">wrowe@rowe-clan.net</=
a>&gt;:<br><br></div><blockquote type=3D"cite"><div><div dir=3D"ltr"><div cl=
ass=3D"gmail_extra"><div class=3D"gmail_quote">On Wed, Aug 26, 2015 at 12:08=
 PM, Jim Jagielski <span dir=3D"ltr">&lt;<a href=3D"mailto:jim@jagunet.com" t=
arget=3D"_blank">jim@jagunet.com</a>&gt;</span> wrote:<br><blockquote class=3D=
"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-=
left:1ex">?? I can't quite grok what you mean:<br>
<span class=3D"">&nbsp; &nbsp; &nbsp; &nbsp; I'm dubious that we are going t=
o be able to meet the<br>
&nbsp; &nbsp; &nbsp; &nbsp; criteria that modules built for httpd 2.4.x will=
 continue to<br>
&nbsp; &nbsp; &nbsp; &nbsp; function correctly without recompilation under 2=
.4+refactoring<br>
<br>
</span>could you explain??<br></blockquote><div><br></div><div>I'm happy to.=
&nbsp; I'm not talking about mod_h2 itself, but the API refactoring in core.=
</div><div>&nbsp;</div><blockquote class=3D"gmail_quote" style=3D"margin:0 0=
 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
It seems to me that considering that the h2 module on Github was<br>
specific to Apache 2.4, I don't see why we need to add delays or<br>
processes to officially add http/2 support, via the h2 module, to<br>
2.4.<br>
<br>
The whole intent was always that h2 would provide a feedback loop between<br=
>
itself and 2.6/3.0 regarding re-architecturing some aspects, but that<br>
doesn't mean we "withhold" http/2 from 2.4. Of course the h2 module<br>
under 2.4 will be different from what is eventually in 2.6/3.0. But&nbsp;</b=
lockquote><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;borde=
r-left:1px #ccc solid;padding-left:1ex">so what?</blockquote><div>&nbsp;</di=
v><div>I think we are on the same page - hopefully mod_h2 can 'fit' within t=
he current API, or we succeed in working out those API backports such that t=
hat modules do not -need- to be aware of the change to the API that happened=
 after they were compiled.</div><div><br></div><div>The change we made for h=
ttp trailers was draconian, and forced us to break our agreement in the name=
 of security, and I hope we can avoid repeating the issue. &nbsp;(And we ave=
rt that sort of issue in the future with _create accessors for httpd structu=
res.)</div><div><br></div><div>If the committers decide that twisting the AP=
I or mod_h2 itself to shoehorn it into 2.4 is too much, then 2.6 (or 3.0) is=
 still a possibility, and tagging the state of our 2.5.x development as an -=
alpha should help us start cleaning up the state of trunk/.</div></div></div=
></div>
</div></blockquote></body></html>=

--Apple-Mail-B74EA6BD-0991-499C-A50B-FFDB5498F606--

From dev-return-83601-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 18:52:17 2015
Return-Path: <dev-return-83601-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1DC88183DC
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 18:52:17 +0000 (UTC)
Received: (qmail 53163 invoked by uid 500); 26 Aug 2015 18:52:15 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 53087 invoked by uid 500); 26 Aug 2015 18:52:15 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 53049 invoked by uid 99); 26 Aug 2015 18:52:15 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 18:52:15 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 4A99C181BC3
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 18:52:15 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id A27EDX7rmc74 for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 18:52:06 +0000 (UTC)
Received: from resqmta-ch2-11v.sys.comcast.net (resqmta-ch2-11v.sys.comcast.net [69.252.207.43])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 6367920382
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 18:52:06 +0000 (UTC)
Received: from resomta-ch2-10v.sys.comcast.net ([69.252.207.106])
	by resqmta-ch2-11v.sys.comcast.net with comcast
	id 9Ws11r0012JGN3p01Ws5tp; Wed, 26 Aug 2015 18:52:05 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-10v.sys.comcast.net with comcast
	id 9Ws51r00E2U0RYt01Ws5pU; Wed, 26 Aug 2015 18:52:05 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: proposed backport, mod_h2 github release
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <F4ECC87B-262E-4044-8D1B-DC20126B494A@greenbytes.de>
Date: Wed, 26 Aug 2015 14:52:05 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <4058F6A3-DAE1-415D-A2A9-523C7D303F5D@jaguNET.com>
References: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de> <CACsi2527pNB0Lx1zzd=oFSyS7iSowUHX-mEnCx3LdxModd+dMg@mail.gmail.com> <14371978-B615-40FF-BF9D-B4C237E3A7B6@jaguNET.com> <CACsi253JAR1rm3r2=iQ8VvGHyZgNS9i=zftyGNJfZf0Wn7OqEw@mail.gmail.com> <F4ECC87B-262E-4044-8D1B-DC20126B494A@greenbytes.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440615125;
	bh=zpyQHGhWhuffT4OCpjNsgGWfmdQ+HgOB6j0d/ZXdL2M=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=PsqbWzuHqDVJULkRM31vWuYABGR2Ku8tkClOBunjWNvoxu3+KsV8Jar02OAxclZML
	 8FI/KfbvviwZE+SSKhYH9CNkabLszCTIBMQzaIRCu3aS6QlxxCdx1bsmm5wcnmDYPV
	 iikNqGsYqROvN/9QZCVQYVge8l9Omh4PDaBFpbM+iY4TLqtYWjqch6142KkIHueiI6
	 cNPkFS/e1Zp4ifPAh1nfocLL+oKMuP8dsjbs5jtT+ifzsQBHsw/J6imkFYFH5wjR9u
	 IJJ2K77Y1WXJ80FDHmN+ieg9iWbolcohGWJqei3X6SyBAJSNNf+vAZSKKWyryQrI6+
	 vcadfQS4VtdXQ==


> On Aug 26, 2015, at 2:25 PM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>=20
> Well, let's have a look at the core changes and discuss specifics.=20
>=20
> There are only additions. Hooks and functions. And fields added to =
core_config. Unless some module is messing directly with that, I can see =
no need for recompilations.
>=20
> But I might be wrong. Let's review that patch and see.=20
>=20

Even so, mod_h2 is hardly the 1st such module that adds fields to the
end of core structs...

Why are people proposing throwing stop-sticks in our path??


From dev-return-83602-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 18:53:34 2015
Return-Path: <dev-return-83602-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 34252183F3
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 18:53:34 +0000 (UTC)
Received: (qmail 57690 invoked by uid 500); 26 Aug 2015 18:53:33 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 57627 invoked by uid 500); 26 Aug 2015 18:53:33 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 57617 invoked by uid 99); 26 Aug 2015 18:53:33 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 18:53:33 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 3F6641AAE8E
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 18:53:33 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id aPcM-ut95z70 for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 18:53:23 +0000 (UTC)
Received: from mail-ig0-f179.google.com (mail-ig0-f179.google.com [209.85.213.179])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id EF05620F3F
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 18:53:22 +0000 (UTC)
Received: by igui7 with SMTP id i7so44557659igu.1
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 11:53:22 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=3fmZopVGFix0wyN1PGssN/mjPZt4CdHR/90O9DP/grU=;
        b=JBq30sgT7YU2aGfuNksUzGLaGaIe+/IFBLHUL9FeFMlCHg9AQBqEaW6gV/9SF1BpcJ
         +rqqBi6mmslYT7/UZzFAMWaPJ4M1BQ9qXOl7VO0ueJGcEBo0+NiYbUQ1toYyO7e6MD4r
         UbGnLE8Va6bQND01lnDtM/ZF+dDm5ZY1Em6t5bZbnlkAS0i2FHFf0T/tIyWoGbtP6cw8
         i4t1SDbVQp5Iftj1IZN95YddhFbIdkYjB49WH4lFZB7MYXlUeiqwEkj2DFZbZdgdGmqQ
         iyBtyycYKo+FkJkvi05rzCZBzuGdnD8Gf9bcv6P2MduUS9HY7LG5NDY01ilFWfaKqqdH
         ixow==
X-Gm-Message-State: ALoCoQmqIgEb1scsQmOx9sx7XYMNmGdn8Hv180EqMgJsI9XIUXBRMum51nRECKL7gfn2ayQa+lIq
MIME-Version: 1.0
X-Received: by 10.50.17.66 with SMTP id m2mr13582369igd.77.1440615202249; Wed,
 26 Aug 2015 11:53:22 -0700 (PDT)
Received: by 10.107.16.8 with HTTP; Wed, 26 Aug 2015 11:53:22 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
In-Reply-To: <20150826133718.90F03AC0479@hades.apache.org>
References: <20150826133718.90F03AC0479@hades.apache.org>
Date: Wed, 26 Aug 2015 13:53:22 -0500
Message-ID: <CACsi2534uJnw5ovgMyLXXo52dkf2SZc7iXdGjcbFiTpzV5Zu5A@mail.gmail.com>
Subject: Re: svn commit: r1697931 - /httpd/httpd/branches/2.4.x/STATUS
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=089e0122e6ee639f13051e3b5d7b

--089e0122e6ee639f13051e3b5d7b
Content-Type: text/plain; charset=UTF-8

On Wed, Aug 26, 2015 at 8:37 AM, <icing@apache.org> wrote:

> Author: icing
> Date: Wed Aug 26 13:37:18 2015
> New Revision: 1697931
>
> URL: http://svn.apache.org/r1697931
>
> +  *) core/mod_ssl: add Protocols/ProtocolsHonorOrder directives and new
> +     protocols hooks to control Upgrade: and ALPN protocol switching.
> +     HTTP_MISDIRECTED_REQUEST addition and handling in mod_ssl
> +     trunk patch: http://svn.apache.org/r1697855
> +                  http://svn.apache.org/r1697339
> +                  http://svn.apache.org/r1696428
> +                  http://svn.apache.org/r1696266
> +                  http://svn.apache.org/r1696264
> +                  http://svn.apache.org/r1695874
> +                  http://svn.apache.org/r1695727
> +                  http://svn.apache.org/r1692516
> +                  http://svn.apache.org/r1692486
> +                  http://svn.apache.org/r1610674 (partial)
> +                  http://svn.apache.org/r1685069
> +    2.4.x patch:
> https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patches/core-protocols.patch



I can't see anything that introduces API breakage in this patch set.  Well
done!  With the new API's, a minor MMN bump is necessary.

One minor cleanup, a few excess blank lines in include/http_core.h.

Looking at

+/**
+ * Get the index of the string in the array or -1 if not found.
+ * @param array the array the check
+ * @param s the string to find
+ * @return index of string in array or -1
+ */
+AP_DECLARE(int) ap_array_index(const apr_array_header_t *array, const char *s);

with an eye toward apr_array_index, would it be better to start off
with a third 'int start' argument (suggested value 0) so that the
array is searched from the indicated elt, as arrays are unordered and
not defined to contain unique values?

--089e0122e6ee639f13051e3b5d7b
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On W=
ed, Aug 26, 2015 at 8:37 AM,  <span dir=3D"ltr">&lt;<a href=3D"mailto:icing=
@apache.org" target=3D"_blank">icing@apache.org</a>&gt;</span> wrote:<br><b=
lockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8ex;border-le=
ft-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;pad=
ding-left:1ex">Author: icing<br>
Date: Wed Aug 26 13:37:18 2015<br>
New Revision: 1697931<br>
<br>
URL: <a href=3D"http://svn.apache.org/r1697931" rel=3D"noreferrer" target=
=3D"_blank">http://svn.apache.org/r1697931</a><br><br>+=C2=A0 *) core/mod_s=
sl: add Protocols/ProtocolsHonorOrder directives and new<br>
+=C2=A0 =C2=A0 =C2=A0protocols hooks to control Upgrade: and ALPN protocol =
switching.<br>
+=C2=A0 =C2=A0 =C2=A0HTTP_MISDIRECTED_REQUEST addition and handling in mod_=
ssl<br>
+=C2=A0 =C2=A0 =C2=A0trunk patch: <a href=3D"http://svn.apache.org/r1697855=
" rel=3D"noreferrer" target=3D"_blank">http://svn.apache.org/r1697855</a><b=
r>
+=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <a href=3D"=
http://svn.apache.org/r1697339" rel=3D"noreferrer" target=3D"_blank">http:/=
/svn.apache.org/r1697339</a><br>
+=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <a href=3D"=
http://svn.apache.org/r1696428" rel=3D"noreferrer" target=3D"_blank">http:/=
/svn.apache.org/r1696428</a><br>
+=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <a href=3D"=
http://svn.apache.org/r1696266" rel=3D"noreferrer" target=3D"_blank">http:/=
/svn.apache.org/r1696266</a><br>
+=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <a href=3D"=
http://svn.apache.org/r1696264" rel=3D"noreferrer" target=3D"_blank">http:/=
/svn.apache.org/r1696264</a><br>
+=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <a href=3D"=
http://svn.apache.org/r1695874" rel=3D"noreferrer" target=3D"_blank">http:/=
/svn.apache.org/r1695874</a><br>
+=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <a href=3D"=
http://svn.apache.org/r1695727" rel=3D"noreferrer" target=3D"_blank">http:/=
/svn.apache.org/r1695727</a><br>
+=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <a href=3D"=
http://svn.apache.org/r1692516" rel=3D"noreferrer" target=3D"_blank">http:/=
/svn.apache.org/r1692516</a><br>
+=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <a href=3D"=
http://svn.apache.org/r1692486" rel=3D"noreferrer" target=3D"_blank">http:/=
/svn.apache.org/r1692486</a><br>
+=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <a href=3D"=
http://svn.apache.org/r1610674" rel=3D"noreferrer" target=3D"_blank">http:/=
/svn.apache.org/r1610674</a> (partial)<br>
+=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <a href=3D"=
http://svn.apache.org/r1685069" rel=3D"noreferrer" target=3D"_blank">http:/=
/svn.apache.org/r1685069</a><br>
+=C2=A0 =C2=A0 2.4.x patch: <a href=3D"https://raw.githubusercontent.com/ic=
ing/mod_h2/master/sandbox/httpd/patches/core-protocols.patch" rel=3D"norefe=
rrer" target=3D"_blank">https://raw.githubusercontent.com/icing/mod_h2/mast=
er/sandbox/httpd/patches/core-protocols.patch</a></blockquote><div><br></di=
v><div><br></div><div>I can&#39;t see anything that introduces API breakage=
 in this patch set.=C2=A0 Well done!=C2=A0 With the new API&#39;s, a minor =
MMN bump is necessary.</div><div><br></div><div>One minor cleanup, a few ex=
cess blank lines in=C2=A0<span style=3D"color:rgb(0,0,0)">include/http_core=
.h.</span><br></div><div><span style=3D"color:rgb(0,0,0)"><br></span></div>=
<div><font color=3D"#000000">Looking at=C2=A0</font></div><div><pre style=
=3D"color:rgb(0,0,0)">+/**
+ * Get the index of the string in the array or -1 if not found.
+ * @param array the array the check
+ * @param s the string to find
+ * @return index of string in array or -1
+ */
+AP_DECLARE(int) ap_array_index(const apr_array_header_t *array, const char=
 *s);</pre><pre style=3D"color:rgb(0,0,0)"><div style=3D"color:rgb(34,34,34=
);font-family:arial,sans-serif;white-space:normal"><font color=3D"#000000">=
with an eye toward apr_array_index, would it be better to start off with a =
third &#39;int start&#39; argument (suggested value 0) so that the array is=
 searched from the indicated elt, as arrays are unordered and not defined t=
o contain unique values?</font></div><div style=3D"color:rgb(34,34,34);font=
-family:arial,sans-serif;white-space:normal"><font color=3D"#000000"><br></=
font></div><div style=3D"color:rgb(34,34,34);font-family:arial,sans-serif;w=
hite-space:normal"><font color=3D"#000000"><br></font></div><div><font colo=
r=3D"#000000"><br></font></div></pre></div></div></div></div>

--089e0122e6ee639f13051e3b5d7b--

From dev-return-83603-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 18:55:37 2015
Return-Path: <dev-return-83603-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5251B18414
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 18:55:37 +0000 (UTC)
Received: (qmail 62643 invoked by uid 500); 26 Aug 2015 18:55:36 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 62578 invoked by uid 500); 26 Aug 2015 18:55:36 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 62568 invoked by uid 99); 26 Aug 2015 18:55:36 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 18:55:36 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 48D6DEE4DE
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 18:55:36 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id eHKrWCCesW-F for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 18:55:31 +0000 (UTC)
Received: from mail-io0-f177.google.com (mail-io0-f177.google.com [209.85.223.177])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 3D4EE20D7B
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 18:55:30 +0000 (UTC)
Received: by iods203 with SMTP id s203so30566387iod.0
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 11:55:29 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=fd9tQFgU88/LZG12PmATcFyFudT1/3HxDxRNU0rL9PM=;
        b=Pur77yqxsSRWNnsOyUHoDdFqocySYQGVJlPVtiZV11p7U+fqgSW5v5m+1xKRieC1GL
         k3rz3R33EIVAzidPMGnjWtcBwUY1aJOclko0Q5P9280swnbZnwWHOr6y8I99m7l/UN9N
         d6HS+fHCxnnerAGsicOAd+JejYXqCVk50R/rgeZPvwFcH9KqzxmdkthD+Q7z5x/6Rl8g
         Onr0LCNzfLmCXJXCUkkp/mWcOKF8xve/HHm54ljbL6hs9HGgUUAwBXruFm/Jj6IzLK+m
         v/eXpQ7GftBYBAbotT1MY8q7tw4ktnVEfFGw2tifYYCPfS+0bWdKYjTqJ2uyjcbRcqzY
         QgTw==
X-Gm-Message-State: ALoCoQmy+U8IAe9MfOHsp+D3W53m27lv5bbQQqy4ThZImE7gFzHmGog963bTc5YQ2PDCyt7POmi8
MIME-Version: 1.0
X-Received: by 10.107.166.136 with SMTP id p130mr5951939ioe.163.1440615329027;
 Wed, 26 Aug 2015 11:55:29 -0700 (PDT)
Received: by 10.107.16.8 with HTTP; Wed, 26 Aug 2015 11:55:28 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
In-Reply-To: <4058F6A3-DAE1-415D-A2A9-523C7D303F5D@jaguNET.com>
References: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de>
	<CACsi2527pNB0Lx1zzd=oFSyS7iSowUHX-mEnCx3LdxModd+dMg@mail.gmail.com>
	<14371978-B615-40FF-BF9D-B4C237E3A7B6@jaguNET.com>
	<CACsi253JAR1rm3r2=iQ8VvGHyZgNS9i=zftyGNJfZf0Wn7OqEw@mail.gmail.com>
	<F4ECC87B-262E-4044-8D1B-DC20126B494A@greenbytes.de>
	<4058F6A3-DAE1-415D-A2A9-523C7D303F5D@jaguNET.com>
Date: Wed, 26 Aug 2015 13:55:28 -0500
Message-ID: <CACsi253PbYCcqb_Sif_avfh7GVLa1rJFVZEBQT70LiUG_ST5dw@mail.gmail.com>
Subject: Re: proposed backport, mod_h2 github release
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1141f392f22556051e3b64b0

--001a1141f392f22556051e3b64b0
Content-Type: text/plain; charset=UTF-8

On Wed, Aug 26, 2015 at 1:52 PM, Jim Jagielski <jim@jagunet.com> wrote:

>
> > On Aug 26, 2015, at 2:25 PM, Stefan Eissing <
> stefan.eissing@greenbytes.de> wrote:
> >
> > Well, let's have a look at the core changes and discuss specifics.
> >
> > There are only additions. Hooks and functions. And fields added to
> core_config. Unless some module is messing directly with that, I can see no
> need for recompilations.
>

I agree with you, looking forward to other reviewers, too.


> > But I might be wrong. Let's review that patch and see.
> >
>
> Even so, mod_h2 is hardly the 1st such module that adds fields to the
> end of core structs...
>
> Why are people proposing throwing stop-sticks in our path??
>

Jim, why are you taking code review as a personal affront?  Could we cool
it, please?

--001a1141f392f22556051e3b64b0
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On W=
ed, Aug 26, 2015 at 1:52 PM, Jim Jagielski <span dir=3D"ltr">&lt;<a href=3D=
"mailto:jim@jagunet.com" target=3D"_blank">jim@jagunet.com</a>&gt;</span> w=
rote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;borde=
r-left:1px #ccc solid;padding-left:1ex"><span class=3D""><br>
&gt; On Aug 26, 2015, at 2:25 PM, Stefan Eissing &lt;<a href=3D"mailto:stef=
an.eissing@greenbytes.de">stefan.eissing@greenbytes.de</a>&gt; wrote:<br>
&gt;<br>
&gt; Well, let&#39;s have a look at the core changes and discuss specifics.=
<br>
&gt;<br>
&gt; There are only additions. Hooks and functions. And fields added to cor=
e_config. Unless some module is messing directly with that, I can see no ne=
ed for recompilations.<br></span></blockquote><div><br></div><div>I agree w=
ith you, looking forward to other reviewers, too.</div><div>=C2=A0</div><bl=
ockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #=
ccc solid;padding-left:1ex"><span class=3D"">&gt; But I might be wrong. Let=
&#39;s review that patch and see.<br>
&gt;<br>
<br>
</span>Even so, mod_h2 is hardly the 1st such module that adds fields to th=
e<br>
end of core structs...<br>
<br>
Why are people proposing throwing stop-sticks in our path??<br>
</blockquote></div><br></div><div class=3D"gmail_extra">Jim, why are you ta=
king code review as a personal affront?=C2=A0 Could we cool it, please?</di=
v></div>

--001a1141f392f22556051e3b64b0--

From dev-return-83604-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 21:19:55 2015
Return-Path: <dev-return-83604-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A9D0218B3D
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 21:19:55 +0000 (UTC)
Received: (qmail 64639 invoked by uid 500); 26 Aug 2015 21:19:55 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 64568 invoked by uid 500); 26 Aug 2015 21:19:55 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 64558 invoked by uid 99); 26 Aug 2015 21:19:55 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 21:19:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id AC641C0BD8
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 21:19:54 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.001
X-Spam-Level: *
X-Spam-Status: No, score=1.001 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Tkgr3pneEgke for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 21:19:47 +0000 (UTC)
Received: from node176.itex.at (mail.123x.at [194.242.35.176])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 02E5142BF6
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 21:19:46 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
	by node176.itex.at (Postfix) with ESMTP id 2E0A122AE7
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 23:19:39 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at node176.itex.at
Received: from node176.itex.at ([127.0.0.1])
	by localhost (node176.itex.at [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id N0MuAYdKsDSL for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 23:19:38 +0200 (CEST)
Received: from [10.202.65.180] (unknown [101.161.20.218])
	(Authenticated sender: normw@gknw.net)
	by node176.itex.at (Postfix) with ESMTPSA id C6EA22106A
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 23:19:37 +0200 (CEST)
Subject: Re: modules\http2 - structure initializing.
To: dev@httpd.apache.org
References: <55DCF1F8.4010203@gknw.net>
 <D8F4A20E-5BCA-4CC6-BBD3-AC7DE1A3BCBF@greenbytes.de>
From: NormW <normw@gknw.net>
Message-ID: <55DE2D3B.9020904@gknw.net>
Date: Thu, 27 Aug 2015 07:18:51 +1000
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
In-Reply-To: <D8F4A20E-5BCA-4CC6-BBD3-AC7DE1A3BCBF@greenbytes.de>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit

G/Morning I think,
As Bill correctly guesses in a following mail, 'my' OS is NetWare and 
it's the standard compiler GK has been using for years to build Apache 
releases.

And that (Metrowerks CW) (AFAIK) is a C89 legend.

As I noted in my mail, I would hardly expect to hold back tomorrows 
http/2 protocol for so dated a horse as NetWare, and if you introduced 
coding or functions that NetWare's compiler doesn't support then it's 
'game-over' for the old war horse as far as http2 is concerned. For the 
moment however I merely suggest an opinion that initializing structures 
via a list of individual assignments is a better form to read the code 
than what is used at present, and a small, almost irrelevant side effect 
of which is that, for now at least, my compiler can keep building http2 
for NetWare, with no functional change to the code.
Regards,
Norm

On 27/08/2015 1:26 AM, Stefan Eissing wrote:
> Hi Norm,
>
> I think these type of assignments are part of the C90 standard. I am not sure we want to support a compiler that cannot cope with that, but I may be to green to know that. What platform is this on exactly?
>
> //Stefan
>
>> Am 26.08.2015 um 00:53 schrieb NormW <normw@gknw.net>:
>>
>> G/Morning,
>> Herewith an svn diff that implements line-by-line initialization of three structures (no idea if there's a technical term for it) in place of the list method now used, e.g struct x = { , , , }.
>>
>> I acknowledge upfront that 'my' somewhat dated compiler cannot handle the list method, whereas the method portrayed in the diff is totally acceptable to it.
>>
>> However, I find the 'list' method less easier to 'read' as the struct elements are not 'visible', and one has to locate the struct definition itself to see what is being set to what. The method as illustrated by the patch is clearer (to my mind) and not affected by the order of the elements within the primary structure.
>>
>> Lastly I noticed at least one case recently where my diff 'simplified' because a struct was changed to the _suggested_ method, with the primary struct being created by a memset(); perhaps that's a similar change needed in these cases also?
>>
>> Regards,
>> Norm
>>
>>
>>
>> <cw_reqd_chgs.diff>
>
> <green/>bytes GmbH
> Hafenweg 16, 48155 Münster, Germany
> Phone: +49 251 2807760. Amtsgericht Münster: HRB5782
>
>
>


From dev-return-83605-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 21:24:18 2015
Return-Path: <dev-return-83605-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BB4F018B77
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 21:24:18 +0000 (UTC)
Received: (qmail 83318 invoked by uid 500); 26 Aug 2015 21:24:18 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 83240 invoked by uid 500); 26 Aug 2015 21:24:18 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 83230 invoked by uid 99); 26 Aug 2015 21:24:18 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 21:24:18 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id AFFA0181BC3
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 21:24:17 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.999
X-Spam-Level:
X-Spam-Status: No, score=0.999 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H2=-0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 0trcqmGElpvb for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 21:24:12 +0000 (UTC)
Received: from fed1rmfepo101.cox.net (fed1rmfepo101.cox.net [68.230.241.143])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTP id DA82820382
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 21:24:11 +0000 (UTC)
Received: from fed1rmimpo210 ([68.230.241.161]) by fed1rmfepo101.cox.net
          (InterMail vM.8.01.05.15 201-2260-151-145-20131218) with ESMTP
          id <20150826212405.RUGG11887.fed1rmfepo101.cox.net@fed1rmimpo210>
          for <dev@httpd.apache.org>; Wed, 26 Aug 2015 17:24:05 -0400
Received: from [192.168.1.33] ([98.176.34.113])
	by fed1rmimpo210 with cox
	id 9ZQ41r0082STVfm01ZQ4xv; Wed, 26 Aug 2015 17:24:04 -0400
X-CT-Class: Clean
X-CT-Score: 0.00
X-CT-RefID: str=0001.0A020206.55DE2E75.001F,ss=1,re=0.000,fgs=0
X-CT-Spam: 0
X-Authority-Analysis: v=2.0 cv=LIa4tuq9 c=1 sm=1
 a=8xCO7h6kmYZdHn5tUOQhsw==:17 a=LrjODJgKAAAA:8 a=1zd1egijY_QA:10
 a=35J3-Xi7UkYwrHMc5FoA:9 a=QEXdDO2ut3YA:10 a=pPAQm6SlBnIA:10
 a=8xCO7h6kmYZdHn5tUOQhsw==:117
X-CM-Score: 0.00
Authentication-Results: cox.net; auth=pass (PLAIN) smtp.auth=glewis63@cox.net
Message-ID: <55DE2DF4.3080602@gknw.net>
Date: Wed, 26 Aug 2015 14:21:56 -0700
From: Gregg Smith <gls@gknw.net>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2.28) Gecko/20120306 Thunderbird/3.1.20
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: proposed backport, mod_h2 github release
References: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de>
In-Reply-To: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

On 8/26/2015 6:44 AM, Stefan Eissing wrote:
> I just submitted my first backport STATUS update. Hope I did everything ok, otherwise please let me know.
>
> For backporting mod_h2 to 2.4.x, I decided to make it in two parts: one is the patch to core/mod_ssl that introduces Protocols. That is now in STATUS.

Needs r1693918, other than that all seems ok so far :)



From dev-return-83606-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 21:32:13 2015
Return-Path: <dev-return-83606-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0C2B118BBF
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 21:32:13 +0000 (UTC)
Received: (qmail 99201 invoked by uid 500); 26 Aug 2015 21:32:12 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 99121 invoked by uid 500); 26 Aug 2015 21:32:12 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 99111 invoked by uid 99); 26 Aug 2015 21:32:12 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 21:32:12 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 8A8B8EE495
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 21:32:11 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -1.426
X-Spam-Level:
X-Spam-Status: No, score=-1.426 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-1.426, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id HnDts1N168p1 for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 21:32:03 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 2482820865
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 21:32:02 +0000 (UTC)
Received: from [192.168.178.55] (unknown [84.189.86.234])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id C959315A02EE
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 23:31:54 +0200 (CEST)
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain;
	charset=utf-8
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (1.0)
Subject: Re: modules\http2 - structure initializing.
Message-Id: <D5F68F35-963A-4B5B-A8DE-FBBF58F9F07B@greenbytes.de>
Date: Wed, 26 Aug 2015 23:31:54 +0200
References: <55DCF1F8.4010203@gknw.net> <D8F4A20E-5BCA-4CC6-BBD3-AC7DE1A3BCBF@greenbytes.de> <55DE2D3B.9020904@gknw.net>
In-Reply-To: <55DE2D3B.9020904@gknw.net>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
X-Mailer: iPhone Mail (12H321)

I will apply the proposed change tomorrow. keep the old horse happy.=20

//stefan

> Am 26.08.2015 um 23:18 schrieb NormW <normw@gknw.net>:
>=20
> G/Morning I think,
> As Bill correctly guesses in a following mail, 'my' OS is NetWare and it's=
 the standard compiler GK has been using for years to build Apache releases.=

>=20
> And that (Metrowerks CW) (AFAIK) is a C89 legend.
>=20
> As I noted in my mail, I would hardly expect to hold back tomorrows http/2=
 protocol for so dated a horse as NetWare, and if you introduced coding or f=
unctions that NetWare's compiler doesn't support then it's 'game-over' for t=
he old war horse as far as http2 is concerned. For the moment however I mere=
ly suggest an opinion that initializing structures via a list of individual a=
ssignments is a better form to read the code than what is used at present, a=
nd a small, almost irrelevant side effect of which is that, for now at least=
, my compiler can keep building http2 for NetWare, with no functional change=
 to the code.
> Regards,
> Norm
>=20
>> On 27/08/2015 1:26 AM, Stefan Eissing wrote:
>> Hi Norm,
>>=20
>> I think these type of assignments are part of the C90 standard. I am not s=
ure we want to support a compiler that cannot cope with that, but I may be t=
o green to know that. What platform is this on exactly?
>>=20
>> //Stefan
>>=20
>>> Am 26.08.2015 um 00:53 schrieb NormW <normw@gknw.net>:
>>>=20
>>> G/Morning,
>>> Herewith an svn diff that implements line-by-line initialization of thre=
e structures (no idea if there's a technical term for it) in place of the li=
st method now used, e.g struct x =3D { , , , }.
>>>=20
>>> I acknowledge upfront that 'my' somewhat dated compiler cannot handle th=
e list method, whereas the method portrayed in the diff is totally acceptabl=
e to it.
>>>=20
>>> However, I find the 'list' method less easier to 'read' as the struct el=
ements are not 'visible', and one has to locate the struct definition itself=
 to see what is being set to what. The method as illustrated by the patch is=
 clearer (to my mind) and not affected by the order of the elements within t=
he primary structure.
>>>=20
>>> Lastly I noticed at least one case recently where my diff 'simplified' b=
ecause a struct was changed to the _suggested_ method, with the primary stru=
ct being created by a memset(); perhaps that's a similar change needed in th=
ese cases also?
>>>=20
>>> Regards,
>>> Norm
>>>=20
>>>=20
>>>=20
>>> <cw_reqd_chgs.diff>
>>=20
>> <green/>bytes GmbH
>> Hafenweg 16, 48155 M=C3=BCnster, Germany
>> Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782
>=20

From dev-return-83607-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 21:41:11 2015
Return-Path: <dev-return-83607-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E5DAB18C24
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 21:41:11 +0000 (UTC)
Received: (qmail 27716 invoked by uid 500); 26 Aug 2015 21:41:11 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 27629 invoked by uid 500); 26 Aug 2015 21:41:11 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 27619 invoked by uid 99); 26 Aug 2015 21:41:11 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 21:41:11 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id D337AC0979
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 21:41:10 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.001
X-Spam-Level: *
X-Spam-Status: No, score=1.001 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id KjZOU_r_fz-c for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 21:41:03 +0000 (UTC)
Received: from node176.itex.at (mail.123x.at [194.242.35.176])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 1AF4E42921
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 21:41:03 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
	by node176.itex.at (Postfix) with ESMTP id 31BF622AB6
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 23:41:02 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at node176.itex.at
Received: from node176.itex.at ([127.0.0.1])
	by localhost (node176.itex.at [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id QrUzrlvL4pSi for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 23:41:01 +0200 (CEST)
Received: from [10.202.65.180] (unknown [101.161.20.218])
	(Authenticated sender: normw@gknw.net)
	by node176.itex.at (Postfix) with ESMTPSA id BFD252106A
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 23:41:00 +0200 (CEST)
Subject: Re: modules\http2 - structure initializing.
To: dev@httpd.apache.org
References: <55DCF1F8.4010203@gknw.net>
 <D8F4A20E-5BCA-4CC6-BBD3-AC7DE1A3BCBF@greenbytes.de>
 <55DE2D3B.9020904@gknw.net>
 <D5F68F35-963A-4B5B-A8DE-FBBF58F9F07B@greenbytes.de>
From: NormW <normw@gknw.net>
Message-ID: <55DE326D.8010401@gknw.net>
Date: Thu, 27 Aug 2015 07:41:01 +1000
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
In-Reply-To: <D5F68F35-963A-4B5B-A8DE-FBBF58F9F07B@greenbytes.de>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit

Whinnnie!
(eq Equine 'Thanks')
On 27/08/2015 7:31 AM, Stefan Eissing wrote:
> I will apply the proposed change tomorrow. keep the old horse happy.
>
> //stefan
>
>> Am 26.08.2015 um 23:18 schrieb NormW <normw@gknw.net>:
>>
>> G/Morning I think,
>> As Bill correctly guesses in a following mail, 'my' OS is NetWare and it's the standard compiler GK has been using for years to build Apache releases.
>>
>> And that (Metrowerks CW) (AFAIK) is a C89 legend.
>>
>> As I noted in my mail, I would hardly expect to hold back tomorrows http/2 protocol for so dated a horse as NetWare, and if you introduced coding or functions that NetWare's compiler doesn't support then it's 'game-over' for the old war horse as far as http2 is concerned. For the moment however I merely suggest an opinion that initializing structures via a list of individual assignments is a better form to read the code than what is used at present, and a small, almost irrelevant side effect of which is that, for now at least, my compiler can keep building http2 for NetWare, with no functional change to the code.
>> Regards,
>> Norm
>>
>>> On 27/08/2015 1:26 AM, Stefan Eissing wrote:
>>> Hi Norm,
>>>
>>> I think these type of assignments are part of the C90 standard. I am not sure we want to support a compiler that cannot cope with that, but I may be to green to know that. What platform is this on exactly?
>>>
>>> //Stefan
>>>
>>>> Am 26.08.2015 um 00:53 schrieb NormW <normw@gknw.net>:
>>>>
>>>> G/Morning,
>>>> Herewith an svn diff that implements line-by-line initialization of three structures (no idea if there's a technical term for it) in place of the list method now used, e.g struct x = { , , , }.
>>>>
>>>> I acknowledge upfront that 'my' somewhat dated compiler cannot handle the list method, whereas the method portrayed in the diff is totally acceptable to it.
>>>>
>>>> However, I find the 'list' method less easier to 'read' as the struct elements are not 'visible', and one has to locate the struct definition itself to see what is being set to what. The method as illustrated by the patch is clearer (to my mind) and not affected by the order of the elements within the primary structure.
>>>>
>>>> Lastly I noticed at least one case recently where my diff 'simplified' because a struct was changed to the _suggested_ method, with the primary struct being created by a memset(); perhaps that's a similar change needed in these cases also?
>>>>
>>>> Regards,
>>>> Norm
>>>>
>>>>
>>>>
>>>> <cw_reqd_chgs.diff>
>>>
>>> <green/>bytes GmbH
>>> Hafenweg 16, 48155 Münster, Germany
>>> Phone: +49 251 2807760. Amtsgericht Münster: HRB5782
>>


From dev-return-83608-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 22:06:52 2015
Return-Path: <dev-return-83608-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 35AC918D2E
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 22:06:52 +0000 (UTC)
Received: (qmail 81964 invoked by uid 500); 26 Aug 2015 22:06:51 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 81891 invoked by uid 500); 26 Aug 2015 22:06:51 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 81881 invoked by uid 99); 26 Aug 2015 22:06:51 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 22:06:51 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 270F9181BC3
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 22:06:51 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.998
X-Spam-Level: **
X-Spam-Status: No, score=2.998 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id kh-hzRJ7S5Cp for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 22:06:50 +0000 (UTC)
Received: from mail-io0-f179.google.com (mail-io0-f179.google.com [209.85.223.179])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 09A2942B5D
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 22:06:50 +0000 (UTC)
Received: by iodt126 with SMTP id t126so36533226iod.2
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:06:49 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=7xab1XvryCdkSfIr2Ss+CM8JyxVQG4nYbC3dHzQby8w=;
        b=g/bRIuv5Uq/mlKrsaSPJ0u1eGAqEbrQo3Uyu/TnQ4U8UwLrLAcPL7DgMWvibfxd4/z
         J9wgPesiMOPWTLtIwleLRytkBhbW3WdUrS6OzhWThau9qRTGDufgeQWbiaFEKgzviicJ
         nHehh0FVKoMvToXxf4/YqlHkIVdGp8bmPe/P4qS7aEMuaZNgwm/JEanTBStTCLkVlW/f
         1nd5FUiMd3hAcQ6EBgRa4wfX6/rde+3wqH58HTWuFQ3ji9VKZmygCD33ku+o9I5IL5Ze
         9D9n1pCbWU/jvGZxKfLLcOMbxyhgpE9u6Q8yAIXDC+p+CgFsdJNsYvQ5DL63p05enB5e
         r6hA==
X-Gm-Message-State: ALoCoQmYo17jrjRkIRNR5wAyQAhgo9zbDIZfSgQ4XP1wMHaEYdcBYtPUneIc72p2MfXUt8LrNOMt
MIME-Version: 1.0
X-Received: by 10.107.166.136 with SMTP id p130mr7002889ioe.163.1440626809474;
 Wed, 26 Aug 2015 15:06:49 -0700 (PDT)
Received: by 10.107.16.8 with HTTP; Wed, 26 Aug 2015 15:06:49 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
Date: Wed, 26 Aug 2015 17:06:49 -0500
Message-ID: <CACsi253fieQfNBX__OKGQVPfFk7beZ9bG9oKB79ufOPdQTFPZw@mail.gmail.com>
Subject: APACHE_CHECK_NGHTTP2
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1141f3923babc6051e3e11f8

--001a1141f3923babc6051e3e11f8
Content-Type: text/plain; charset=UTF-8

Just a quick observation before backport of mod_h2 is proposed...

Moving the macro APACHE_CHECK_NGHTTP2 out of acinclude.m4 into
modules/http2/config.m4 lets me build (after a ./buildconf) after simply
checking out modules/http2/ from trunk.

In terms of ease-of-integration, do we see other modules we expect to
utilize libnghttp2, e.g. mod_proxy_http?  If so, this probably isn't the
right solution, but it makes an interesting and quick stop-gap.

--001a1141f3923babc6051e3e11f8
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Just a quick observation before backport of mod_h2 is prop=
osed...<div><br></div><div>Moving the macro APACHE_CHECK_NGHTTP2 out of aci=
nclude.m4 into modules/http2/config.m4 lets me build (after a ./buildconf) =
after simply checking out modules/http2/ from trunk.</div><div><br></div><d=
iv>In terms of ease-of-integration, do we see other modules we expect to ut=
ilize libnghttp2, e.g. mod_proxy_http?=C2=A0 If so, this probably isn&#39;t=
 the right solution, but it makes an interesting and quick stop-gap.</div><=
div><br></div><div><br></div></div>

--001a1141f3923babc6051e3e11f8--

From dev-return-83609-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 22:15:25 2015
Return-Path: <dev-return-83609-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 87DF718D85
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 22:15:25 +0000 (UTC)
Received: (qmail 3010 invoked by uid 500); 26 Aug 2015 22:15:25 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 2934 invoked by uid 500); 26 Aug 2015 22:15:25 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 2923 invoked by uid 99); 26 Aug 2015 22:15:25 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 22:15:25 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id A4B53181BC3
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 22:15:24 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H2=-0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 5ssD3llzrk38 for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 22:15:20 +0000 (UTC)
Received: from mail-io0-f174.google.com (mail-io0-f174.google.com [209.85.223.174])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 27D4F25CD9
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 22:15:20 +0000 (UTC)
Received: by iods203 with SMTP id s203so36684836iod.0
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:15:19 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=OAIqIhhiwnZcRju6yHb0V/VN8uGMFh16flTJtELOpv0=;
        b=OkOn+anORfEvGmbsdQ5FibbKXfCVyGO3JR5QYgqUBhbAocy3vl/n5AjN7L/YHy3wif
         dCxj+LyCnDHIN7wuH4BeKU8wxYSwYkbGSPFCf9ENCbT5j4wMu8Awjwl9VjDNtBKeVR4V
         aZFYfBO6XbIAoxXp0/uyofpaQHP/1klC4Ay1Uxue+2qCdDQs8pHd0gQP8b/WrbXg/0l4
         X7tMdAfiHrTrxzhvALki4IGMMyTTPcyhkQdKN8754MSYC9YHVlis56ZIqtWzOHC0ohxQ
         aKjR7G+5l44GxlbeKzD+2b/6FaxNNwBiK6SbaQ84fpzSNKiP89AQkYGqVZlBSYbnU3us
         vW1Q==
X-Gm-Message-State: ALoCoQn6kKmM9Izykze2G9UDunrmb0Nk7JSh0UWA2wkXxIbpJENRVu6/3iShdLE7ZhmflCTqhIlF
MIME-Version: 1.0
X-Received: by 10.107.166.136 with SMTP id p130mr7032748ioe.163.1440627319116;
 Wed, 26 Aug 2015 15:15:19 -0700 (PDT)
Received: by 10.107.16.8 with HTTP; Wed, 26 Aug 2015 15:15:19 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
Date: Wed, 26 Aug 2015 17:15:19 -0500
Message-ID: <CACsi253pEfeboS=eiQj=J=GGPXzSJnyhcDXRR8Ue-39FSv+ncw@mail.gmail.com>
Subject: HTTP_MISDIRECTED_REQUEST
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1141f3929c23b3051e3e2ff6

--001a1141f3929c23b3051e3e2ff6
Content-Type: text/plain; charset=UTF-8

Should this exception have a protocol version guard for HTTP/2.0 requests,
and leave the response as HTTP_BAD_REQUEST for HTTP/1.1 and earlier?

@@ -203,6 +204,9 @@
                 ap_log_error(APLOG_MARK, APLOG_ERR, 0, r->server,
APLOGNO(02032)
                             "Hostname %s provided via SNI and
hostname %s provided"
                             " via HTTP are different", servername, host);
+                if (r->connection->keepalives > 0) {
+                    return HTTP_MISDIRECTED_REQUEST;
+                }
                 return HTTP_BAD_REQUEST;
             }
         }

--001a1141f3929c23b3051e3e2ff6
Content-Type: text/html; charset=UTF-8

<div dir="ltr">Should this exception have a protocol version guard for HTTP/2.0 requests, and leave the response as HTTP_BAD_REQUEST for HTTP/1.1 and earlier?<div><br></div><div><pre style="color:rgb(0,0,0)">@@ -203,6 +204,9 @@
                 ap_log_error(APLOG_MARK, APLOG_ERR, 0, r-&gt;server, APLOGNO(02032)
                             &quot;Hostname %s provided via SNI and hostname %s provided&quot;
                             &quot; via HTTP are different&quot;, servername, host);
+                if (r-&gt;connection-&gt;keepalives &gt; 0) {
+                    return HTTP_MISDIRECTED_REQUEST;
+                }
                 return HTTP_BAD_REQUEST;
             }
         }</pre></div></div>

--001a1141f3929c23b3051e3e2ff6--

From dev-return-83610-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 22:20:07 2015
Return-Path: <dev-return-83610-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9745718DAD
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 22:20:07 +0000 (UTC)
Received: (qmail 13379 invoked by uid 500); 26 Aug 2015 22:20:07 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 13303 invoked by uid 500); 26 Aug 2015 22:20:07 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 13293 invoked by uid 99); 26 Aug 2015 22:20:07 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 22:20:07 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id A7FF9EE5E0
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 22:20:06 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id Mt-B5AeQG635 for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 22:20:00 +0000 (UTC)
Received: from mail-yk0-f176.google.com (mail-yk0-f176.google.com [209.85.160.176])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 1B4BF21277
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 22:20:00 +0000 (UTC)
Received: by ykll84 with SMTP id l84so1621935ykl.0
        for <dev@httpd.apache.org>; Wed, 26 Aug 2015 15:19:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=DdDTpSGnJl92t4l3uW74Gjk+S+HihUHVrErKT60/1T0=;
        b=WzeAIQMtEGENdJOc2tpsVfF965x8LCLrkbJr0ZOFWk2+665UzlTfLtHBx2mBnKSBEo
         v35lyd11RLvPd9sg5JaCMHeVLb/O5u9wHrvHSjftDOMZLTLCQmL8lnpdO5+kFTDFpBnz
         0pujXunkVocfgqdsuZS+vrFgyWiBQpIceTUyHIRvGtvquqxVhPdNy8Rcj6o1yrpRUU0X
         5csiTcQu5nW5ZIceSiNeCeC4z5LcdJGr5xjiyOjXcynS5A4Py276bGWtTUJkJLnp+mlg
         q5rBff6PStyjnGSEoa16ajZpJr+tWfdzzt1MGzrfrd8ouZYoWSGQTntFHY6n6g9t7T3t
         zfUw==
MIME-Version: 1.0
X-Received: by 10.129.34.138 with SMTP id i132mr847443ywi.104.1440627592761;
 Wed, 26 Aug 2015 15:19:52 -0700 (PDT)
Received: by 10.37.207.66 with HTTP; Wed, 26 Aug 2015 15:19:52 -0700 (PDT)
In-Reply-To: <CACsi253fieQfNBX__OKGQVPfFk7beZ9bG9oKB79ufOPdQTFPZw@mail.gmail.com>
References: <CACsi253fieQfNBX__OKGQVPfFk7beZ9bG9oKB79ufOPdQTFPZw@mail.gmail.com>
Date: Wed, 26 Aug 2015 18:19:52 -0400
Message-ID: <CALK=YjM8Os4ZunonFcYoMz4h=tMMsHEKDUWdLXAOWFLZdJZmvQ@mail.gmail.com>
Subject: Re: APACHE_CHECK_NGHTTP2
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Wed, Aug 26, 2015 at 6:06 PM, William A Rowe Jr <wrowe@rowe-clan.net> wrote:
> In terms of ease-of-integration, do we see other modules we expect to
> utilize libnghttp2, e.g. mod_proxy_http?  If so, this probably isn't the
> right solution, but it makes an interesting and quick stop-gap.

I would prefer the mod_h2-only arrangement. I think mod_proxy_http is
extremely far away.

From dev-return-83611-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 23:12:23 2015
Return-Path: <dev-return-83611-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 73DE818F6D
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 23:12:23 +0000 (UTC)
Received: (qmail 21057 invoked by uid 500); 26 Aug 2015 23:12:23 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 20976 invoked by uid 500); 26 Aug 2015 23:12:23 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 20966 invoked by uid 99); 26 Aug 2015 23:12:23 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 23:12:23 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 6CE7C181BC3
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 23:12:22 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id S4EKgiFdyHuB for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 23:12:10 +0000 (UTC)
Received: from resqmta-ch2-10v.sys.comcast.net (resqmta-ch2-10v.sys.comcast.net [69.252.207.42])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 7EED642BF6
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 23:12:10 +0000 (UTC)
Received: from resomta-ch2-05v.sys.comcast.net ([69.252.207.101])
	by resqmta-ch2-10v.sys.comcast.net with comcast
	id 9bBY1r0032Bo0NV01bCAxE; Wed, 26 Aug 2015 23:12:10 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-05v.sys.comcast.net with comcast
	id 9bC91r00N2U0RYt01bC9kj; Wed, 26 Aug 2015 23:12:10 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: proposed backport, mod_h2 github release
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CACsi253PbYCcqb_Sif_avfh7GVLa1rJFVZEBQT70LiUG_ST5dw@mail.gmail.com>
Date: Wed, 26 Aug 2015 19:12:09 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <4AAC9409-283C-4B1D-9476-4D22F04A0D72@jaguNET.com>
References: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de> <CACsi2527pNB0Lx1zzd=oFSyS7iSowUHX-mEnCx3LdxModd+dMg@mail.gmail.com> <14371978-B615-40FF-BF9D-B4C237E3A7B6@jaguNET.com> <CACsi253JAR1rm3r2=iQ8VvGHyZgNS9i=zftyGNJfZf0Wn7OqEw@mail.gmail.com> <F4ECC87B-262E-4044-8D1B-DC20126B494A@greenbytes.de> <4058F6A3-DAE1-415D-A2A9-523C7D303F5D@jaguNET.com> <CACsi253PbYCcqb_Sif_avfh7GVLa1rJFVZEBQT70LiUG_ST5dw@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440630730;
	bh=1uAjS0TMJdpz19B89j6HXaNcpna21pCyIrgcMcqo2Cc=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=f/S9RIffZLtaHaImRqk8jvcc/ZUNswxtBZiLSEPKcidY0g9avPYf2Rof+mIVYadiQ
	 8+2V/Da6z1so5mnkmviYPGJCXvZxoYvNRWrwp0u6hTKvgRLpkndAJnxO5dEMt+H8/C
	 yk8VK8p6/qmD6oLgHilc6y7G10ZAArctVVrUBjFncpa1ZNT0O3tIvK5dAE3/FZQR2C
	 P92Mfjs9OBBVntLtliZt/AUKh7MBTijvcbD7RzTkhYKTU9OUXy2a0Sljx2esCF3Ysy
	 AqzU0UEelClUAhkedhAut8NPc1iO8LiSYCK7LbAfu9LsjuuLFO9RAQHqkdLuG59pOk
	 joc2d9iq9YNpg==


> On Aug 26, 2015, at 2:55 PM, William A Rowe Jr <wrowe@rowe-clan.net> =
wrote:
>=20
> On Wed, Aug 26, 2015 at 1:52 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>=20
> > On Aug 26, 2015, at 2:25 PM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
> >
> > Well, let's have a look at the core changes and discuss specifics.
> >
> > There are only additions. Hooks and functions. And fields added to =
core_config. Unless some module is messing directly with that, I can see =
no need for recompilations.
>=20
> I agree with you, looking forward to other reviewers, too.
> =20
> > But I might be wrong. Let's review that patch and see.
> >
>=20
> Even so, mod_h2 is hardly the 1st such module that adds fields to the
> end of core structs...
>=20
> Why are people proposing throwing stop-sticks in our path??
>=20
> Jim, why are you taking code review as a personal affront?  Could we =
cool it, please?

"code review"??? None of what you have proposed could be lumped under
the heading of "code review". Hardly.=

From dev-return-83612-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Aug 26 23:13:17 2015
Return-Path: <dev-return-83612-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8CA8418F79
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 26 Aug 2015 23:13:17 +0000 (UTC)
Received: (qmail 24840 invoked by uid 500); 26 Aug 2015 23:13:17 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 24751 invoked by uid 500); 26 Aug 2015 23:13:17 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 24741 invoked by uid 99); 26 Aug 2015 23:13:17 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Aug 2015 23:13:17 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id AE9DCEE5A0
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 23:13:16 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id mSqH-swUF_iM for <dev@httpd.apache.org>;
	Wed, 26 Aug 2015 23:13:12 +0000 (UTC)
Received: from resqmta-ch2-02v.sys.comcast.net (resqmta-ch2-02v.sys.comcast.net [69.252.207.34])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 0645342B5D
	for <dev@httpd.apache.org>; Wed, 26 Aug 2015 23:13:11 +0000 (UTC)
Received: from resomta-ch2-05v.sys.comcast.net ([69.252.207.101])
	by resqmta-ch2-02v.sys.comcast.net with comcast
	id 9bD51r0022Bo0NV01bD5tr; Wed, 26 Aug 2015 23:13:05 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-05v.sys.comcast.net with comcast
	id 9bC91r00N2U0RYt01bD4ri; Wed, 26 Aug 2015 23:13:05 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: APACHE_CHECK_NGHTTP2
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CALK=YjM8Os4ZunonFcYoMz4h=tMMsHEKDUWdLXAOWFLZdJZmvQ@mail.gmail.com>
Date: Wed, 26 Aug 2015 19:13:04 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <B42321F3-52B3-4476-A3E6-3DAF2E183130@jaguNET.com>
References: <CACsi253fieQfNBX__OKGQVPfFk7beZ9bG9oKB79ufOPdQTFPZw@mail.gmail.com> <CALK=YjM8Os4ZunonFcYoMz4h=tMMsHEKDUWdLXAOWFLZdJZmvQ@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1440630785;
	bh=Us0m2JX7RMOS5zRucdHrus8bIvAPu+OcWgRPw8s2k7Q=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=H5jC0NPaQFbRKs2J1fcG46FxnmUYqIfAhoOAUQnn6HOH07yzILKqyBgnUPS7LX4el
	 IVEy3DC3pei12Ny1N7Qd3bPcCXVNFBdOMFr0PLX6ilg7SzhniBTwG54tAmk9Se5g2d
	 PeqeiU/mtO7YuOTknFOueMMdbcY9762uVRZ9zpwgJ4I7nDOnWiuHleE/FP5uuJ2qcG
	 G/PPWI3MWjF0qT1WIUgar3V2rPnnqHPH8jtWerIo1pJajSbjNu8Th5No8BMGezwqOr
	 WxkRZp6WWIN6USpiG/O53aqT7/AUhHMmIuOm/g69ZcSFmJv28fBVwKmgiBy2vgTuyp
	 LQnjZ7ivUQbhQ==


> On Aug 26, 2015, at 6:19 PM, Eric Covener <covener@gmail.com> wrote:
>=20
> On Wed, Aug 26, 2015 at 6:06 PM, William A Rowe Jr =
<wrowe@rowe-clan.net> wrote:
>> In terms of ease-of-integration, do we see other modules we expect to
>> utilize libnghttp2, e.g. mod_proxy_http?  If so, this probably isn't =
the
>> right solution, but it makes an interesting and quick stop-gap.
>=20
> I would prefer the mod_h2-only arrangement. I think mod_proxy_http is
> extremely far away.

Agreed.=

From dev-return-83613-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 04:26:01 2015
Return-Path: <dev-return-83613-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 236E318898
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 04:26:01 +0000 (UTC)
Received: (qmail 2842 invoked by uid 500); 27 Aug 2015 04:26:00 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 2765 invoked by uid 500); 27 Aug 2015 04:26:00 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 2755 invoked by uid 99); 27 Aug 2015 04:26:00 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 04:26:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id A0B08181AFF
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 04:25:59 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.002
X-Spam-Level:
X-Spam-Status: No, score=-0.002 tagged_above=-999 required=6.31
	tests=[RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id HR6UVShgdVNn for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 04:25:59 +0000 (UTC)
Received: from mout.gmx.net (mout.gmx.net [212.227.15.18])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 932E4506EF
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 04:25:58 +0000 (UTC)
Received: from [192.168.0.100] ([87.139.233.65]) by mail.gmx.com (mrgmx001)
 with ESMTPSA (Nemesis) id 0MEGIi-1ZX2l43l6W-00FPic for
 <dev@httpd.apache.org>; Thu, 27 Aug 2015 06:25:51 +0200
Subject: Re: Intent to Tag 2.5.0 for -alpha consideration
To: dev@httpd.apache.org
References: <CACsi250VVwp12Axho5VAr_edGJ4fgefdB6npZvTK-NohMCpn=w@mail.gmail.com>
From: olli hauer <ohauer@gmx.de>
X-Enigmail-Draft-Status: N1110
Message-ID: <55DE915A.5010401@gmx.de>
Date: Thu, 27 Aug 2015 06:26:02 +0200
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
In-Reply-To: <CACsi250VVwp12Axho5VAr_edGJ4fgefdB6npZvTK-NohMCpn=w@mail.gmail.com>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit
X-Provags-ID:  V03:K0:0O2YjYljFkq8JgUd0lnLk8+uGeFVkwueTHPGRgRaqATzZZeuYMd
 BTn5v0YDQlzqFbJQ55a8sD9zibexShKnLuKPw2pqV1qyGy0zBe+D+ZMZjCS3KjoxfywrKaK
 FARkMbGmiEhH6f5PmNZzgyAtHKMphtI85ySdfm0ebWVSOgr6Otsdb5ERZqMZu0qASwj6phN
 tgKKmlOoxxb1vh5IJpm9w==
X-UI-Out-Filterresults: notjunk:1;V01:K0:PI+xk+Gliu4=:JMPouOaZnDZDkzI7xc6cBV
 UXZA3iKF4RKjNUPogGXBKmwNoYiKUY0L+zQFUi1bTSjRHYikGcW2UA5XIoX+m1WP6XfoQpTqv
 73ZydgSlogg62ANBOmfZgnY2dtf35K9VCylc8hYzVAOho8xS6xQgt5/3/CFlVYNq5xxPtA1jk
 OWLsyOoSyGs0MmaQ79U13eQkqZp1AHwQ6PjFluF3cz6ypbazLpPHGizLDLd5CFxC10jMMOiB4
 0Pxwfgk1V0685j026r/NklPdJEauwzXVesr7UyQdi8fpQ1MXT2h73rJ6VYK+YxeKmnbbV3N8C
 4eJt7FxIe6dS+mJDrOmCZQGaWv7UjU8FNSqL5U0CQH1EB+yTP4qGiU5cvmspk5dWl451KVUaF
 qcoKrvdDMUNLDFwkids+McfOE7Y3rRQJq99Gf7gpWzZA14gKAXkiiCElkRc2EyFvjciCxeB+m
 sNRB4v33otAdB3bomvSti7/L3QOwed59sPvl9bAlYfx8h0pOEUNtjVNeYVsExT0GcbM2/4xGv
 8KXbJRZNnDccMa4o1kyGUAWThyYAZUvZqrE+MGZDq5l1gMQ66vx1Xt4YCKrscWwIy32XPnY6E
 SNI/BLF2pEX5qiGVodiyme6V7GCGS7FP5KPABH3oZCbcCZ6Nz6z2ed3JGL5z0ZdNEeY5hz2QS
 zykC/EgdltKP9VOkfqm1cLIWAzmwCXo/3EBe0aul/2gXnQ4XrK+Agj+Z/SD+y1td+2xqtKAbf
 MoZD9BDUlAJZd3H9G2T+/oEbHpuHor2gCx0i0w==

On 2015-08-26 17:21, William A Rowe Jr wrote:
> I'm planning to tag trunk on 11 Sept to get 2.5.0 and mod_h2 into users
> hands ASAP and collect feedback on that module ahead of any merges back
> into the stable 2.4.x branch.
> 
> Concerns/Questions/Roadblocks/Showstoppers?
> 

In case there will be a src tar file I'm happy to create a FreeBSD port for 2.5.0.

It would be nice to have some small fixes for acinclude.m4 (PR 58126) applied before tagging 2.5.0 to silence warnings about deprecated notations.


-- 
olli

From dev-return-83614-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 07:13:45 2015
Return-Path: <dev-return-83614-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BB4B818C14
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 07:13:45 +0000 (UTC)
Received: (qmail 94219 invoked by uid 500); 27 Aug 2015 07:13:45 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 94159 invoked by uid 500); 27 Aug 2015 07:13:45 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 94149 invoked by uid 99); 27 Aug 2015 07:13:44 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 07:13:44 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 68EA0181A56
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 07:13:44 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0
X-Spam-Level:
X-Spam-Status: No, score=0 tagged_above=-999 required=6.31
	tests=[SPF_HELO_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id cyIyfhp0L_3S for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 07:13:32 +0000 (UTC)
Received: from mail1.bemta5.messagelabs.com (mail1.bemta5.messagelabs.com [195.245.231.147])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 5D77A21597
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 07:13:32 +0000 (UTC)
Received: from [85.158.139.163] by server-11.bemta-5.messagelabs.com id A8/65-24494-698BED55; Thu, 27 Aug 2015 07:13:26 +0000
X-Env-Sender: ruediger.pluem@vodafone.com
X-Msg-Ref: server-9.tower-188.messagelabs.com!1440659606!20629178!1
X-Originating-IP: [195.232.244.135]
X-StarScan-Received:
X-StarScan-Version: 6.13.16; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 10132 invoked from network); 27 Aug 2015 07:13:26 -0000
Received: from mailout03.vodafone.com (HELO mailout03.vodafone.com) (195.232.244.135)
  by server-9.tower-188.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 27 Aug 2015 07:13:26 -0000
Received: from mailint01.vodafone.com (mailint01.vodafone.com [195.232.244.198])
	by mailout03.vodafone.com (Postfix) with ESMTP id 3n1wJQ1wfRz17HNQ
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 09:13:26 +0200 (CEST)
Received: from mailint01.vodafone.com (localhost [127.0.0.1])
	by mailint01.vodafone.com (Postfix) with ESMTP id 3n1wJQ0vgRzxPph
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 09:13:26 +0200 (CEST)
Received: from VOEXC01W.internal.vodafone.com (voexc01w.dc-ratingen.de [145.230.101.21])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mailint01.vodafone.com (Postfix) with ESMTPS id 3n1wJQ0YHNzxPp7
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 09:13:26 +0200 (CEST)
Received: from VOEXC22W.internal.vodafone.com (145.230.103.127) by
 VOEXC01W.internal.vodafone.com (145.230.101.21) with Microsoft SMTP Server
 (TLS) id 14.3.224.2; Thu, 27 Aug 2015 09:13:24 +0200
Received: from VOEXM10W.internal.vodafone.com ([169.254.2.132]) by
 VOEXC22W.internal.vodafone.com ([145.230.103.127]) with mapi id
 14.03.0224.002; Thu, 27 Aug 2015 09:13:20 +0200
From: =?iso-8859-1?Q?Pl=FCm=2C_R=FCdiger=2C_Vodafone_Group?=
	<ruediger.pluem@vodafone.com>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
Subject: RE: APACHE_CHECK_NGHTTP2
Thread-Topic: APACHE_CHECK_NGHTTP2
Thread-Index: AQHQ4EuEAOSD+dynoUe8RYH0R+3faJ4euIkAgAAO3gCAAKenYA==
Date: Thu, 27 Aug 2015 07:13:19 +0000
Message-ID: <AB1691BE05AE7F4992697F2A0835627AC630310A@VOEXM10W.internal.vodafone.com>
References: <CACsi253fieQfNBX__OKGQVPfFk7beZ9bG9oKB79ufOPdQTFPZw@mail.gmail.com>
 <CALK=YjM8Os4ZunonFcYoMz4h=tMMsHEKDUWdLXAOWFLZdJZmvQ@mail.gmail.com>
 <B42321F3-52B3-4476-A3E6-3DAF2E183130@jaguNET.com>
In-Reply-To: <B42321F3-52B3-4476-A3E6-3DAF2E183130@jaguNET.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0



> -----Original Message-----
> From: Jim Jagielski [mailto:jim@jaguNET.com]
> Sent: Donnerstag, 27. August 2015 01:13
> To: dev@httpd.apache.org
> Subject: Re: APACHE_CHECK_NGHTTP2
>=20
>=20
> > On Aug 26, 2015, at 6:19 PM, Eric Covener <covener@gmail.com> wrote:
> >
> > On Wed, Aug 26, 2015 at 6:06 PM, William A Rowe Jr <wrowe@rowe-clan.net=
>
> wrote:
> >> In terms of ease-of-integration, do we see other modules we expect to
> >> utilize libnghttp2, e.g. mod_proxy_http?  If so, this probably isn't
> the
> >> right solution, but it makes an interesting and quick stop-gap.
> >
> > I would prefer the mod_h2-only arrangement. I think mod_proxy_http is
> > extremely far away.
>=20
> Agreed.

+1

Regards

R=FCdiger

From dev-return-83615-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 08:22:35 2015
Return-Path: <dev-return-83615-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3E14118E10
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 08:22:34 +0000 (UTC)
Received: (qmail 33597 invoked by uid 500); 27 Aug 2015 08:22:33 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 33525 invoked by uid 500); 27 Aug 2015 08:22:33 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 33515 invoked by uid 99); 27 Aug 2015 08:22:33 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 08:22:33 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id EF05AEE882
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 08:22:32 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id sVvyKJ3_kypY for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 08:22:32 +0000 (UTC)
Received: from mail-wi0-f175.google.com (mail-wi0-f175.google.com [209.85.212.175])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 2D0F542B2E
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 08:22:32 +0000 (UTC)
Received: by wicgk12 with SMTP id gk12so617852wic.1
        for <dev@httpd.apache.org>; Thu, 27 Aug 2015 01:22:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=subject:to:references:from:message-id:date:user-agent:mime-version
         :in-reply-to:content-type:content-transfer-encoding;
        bh=pqPCP2hGuOUopLZf/CHavFW5VQny1xmzzx7LLTzxuvw=;
        b=oHTR0Y3seKdzyk8sLQSZip+DQUYnIkyxGCxRhYPmP2Ji4V3ZrKyP1Mtyc6H2LhqNTd
         ixJAXwwiTjSZyCaVQqIYAEbvc0sLCdFdXWzffxSnd+a198sfr3OgDDcA3STp/Y0W9NfM
         xmoSJ3I//XIBrQWqdJq1c7aXblgHaZj62SwGEN1AjKWMD5cL+rlvxzHWvRQm9LTVQwo8
         DxQ2P+0q1BdxJU4KIGtz6TOn7Y+FbYMaof1Xd056eLXNHi8nmcsd4JiwUoAGmFUmcppj
         KmSfWuSIIQTF1kayiDpDpekiZBFqJe7GSRHNrG/0n2SXyLOtiLfBE7YHVi57GyCa1N0K
         Lybg==
X-Received: by 10.180.96.230 with SMTP id dv6mr9252511wib.23.1440663744852;
        Thu, 27 Aug 2015 01:22:24 -0700 (PDT)
Received: from [10.33.144.3] (nat-pool-gva-t.redhat.com. [209.132.186.32])
        by smtp.gmail.com with ESMTPSA id jr5sm1888043wjc.14.2015.08.27.01.22.23
        for <dev@httpd.apache.org>
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Thu, 27 Aug 2015 01:22:23 -0700 (PDT)
Subject: Re: modules\http2 - H2Engine directive?
To: dev@httpd.apache.org
References: <55DA9528.7070709@gknw.net>
 <A08F81D7-E35C-4E60-B649-9043BC42047F@greenbytes.de>
From: jean-frederic clere <jfclere@gmail.com>
Message-ID: <55DEC8BF.3010601@gmail.com>
Date: Thu, 27 Aug 2015 10:22:23 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.0.1
MIME-Version: 1.0
In-Reply-To: <A08F81D7-E35C-4E60-B649-9043BC42047F@greenbytes.de>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

On 08/24/2015 10:06 AM, Stefan Eissing wrote:
> Ni Norm,
>
> yes, I removed it last week

If I want on VirtualHost with h2 support and another one without how 
should I do that? (that is for demo purpose)

Cheers

Jean-Frederic

From dev-return-83616-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 08:30:40 2015
Return-Path: <dev-return-83616-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DE82F18E50
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 08:30:39 +0000 (UTC)
Received: (qmail 50123 invoked by uid 500); 27 Aug 2015 08:30:34 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 50047 invoked by uid 500); 27 Aug 2015 08:30:34 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 50037 invoked by uid 99); 27 Aug 2015 08:30:34 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 08:30:34 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 13E38C028F
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 08:30:34 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.793
X-Spam-Level:
X-Spam-Status: No, score=0.793 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, RP_MATCHES_RCVD=-0.006,
	SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id zjH9WwWX-pXW for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 08:30:32 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 5632521597
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 08:30:32 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 8BCC715A058D
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 10:30:31 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: modules\http2 - H2Engine directive?
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <55DEC8BF.3010601@gmail.com>
Date: Thu, 27 Aug 2015 10:30:30 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <8FD5E8FE-8AB7-4D90-A467-B8102AA1AF9D@greenbytes.de>
References: <55DA9528.7070709@gknw.net> <A08F81D7-E35C-4E60-B649-9043BC42047F@greenbytes.de> <55DEC8BF.3010601@gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)


> Am 27.08.2015 um 10:22 schrieb jean-frederic clere =
<jfclere@gmail.com>:
>=20
> On 08/24/2015 10:06 AM, Stefan Eissing wrote:
>> Ni Norm,
>>=20
>> yes, I removed it last week
>=20
> If I want on VirtualHost with h2 support and another one without how =
should I do that? (that is for demo purpose)
>=20
> Cheers
>=20
> Jean-Frederic

The default for "Protocols" is: everything. My thinking: when a Server =
loads mod_h2, it wants it enabled.=20

1st way (just do it):=20
------------------------------------------
<vhost *:443>
  ServerName with.example.org
</vhost>

<vhost *:443>
  ServerName without.example.org
  Protocols http/1.1
</vhost>

1st way (explicit h2, excluding any other in future enabled protocol):=20=

------------------------------------------
Protocols h2 http/1.1
<vhost *:443>
  ServerName with.example.org
</vhost>

<vhost *:443>
  ServerName without.example.org
  Protocols http/1.1
</vhost>

2nd way (the careful way):=20
------------------------------------------
Protocols http/1.1
<vhost *:443>
  ServerName with.example.org
  Protocols h2 http/1.1
</vhost>

<vhost *:443>
  ServerName without.example.org
</vhost>


<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83617-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 08:31:04 2015
Return-Path: <dev-return-83617-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D47B218E53
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 08:31:04 +0000 (UTC)
Received: (qmail 51560 invoked by uid 500); 27 Aug 2015 08:31:04 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 51501 invoked by uid 500); 27 Aug 2015 08:31:04 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 51491 invoked by uid 99); 27 Aug 2015 08:31:04 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 08:31:04 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id E3C6AC028F
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 08:31:03 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1
X-Spam-Level: *
X-Spam-Status: No, score=1 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id wVUwh8ua5qIW for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 08:31:02 +0000 (UTC)
Received: from node176.itex.at (mail.123x.at [194.242.35.176])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id CB97720D7B
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 08:31:01 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
	by node176.itex.at (Postfix) with ESMTP id 053F021226
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 10:30:55 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at node176.itex.at
Received: from node176.itex.at ([127.0.0.1])
	by localhost (node176.itex.at [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4W8ZgKo0svDm for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 10:30:54 +0200 (CEST)
Received: from [10.202.65.180] (CPE-110-146-131-133.knmu.knt.bigpond.net.au [110.146.131.133])
	(Authenticated sender: normw@gknw.net)
	by node176.itex.at (Postfix) with ESMTPSA id C5DF2202DB
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 10:30:53 +0200 (CEST)
Subject: Re: modules\http2 - H2Engine directive?
To: dev@httpd.apache.org
References: <55DA9528.7070709@gknw.net>
 <A08F81D7-E35C-4E60-B649-9043BC42047F@greenbytes.de>
 <55DEC8BF.3010601@gmail.com>
From: NormW <normw@gknw.net>
Message-ID: <55DECAB0.3060706@gknw.net>
Date: Thu, 27 Aug 2015 18:30:40 +1000
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
In-Reply-To: <55DEC8BF.3010601@gmail.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

Good evening,
Just a 'guess'.... Use a Protocols directive in one vhost that doesn't 
have h2 and dirivitives
Norm

On 27/08/2015 6:22 PM, jean-frederic clere wrote:
> On 08/24/2015 10:06 AM, Stefan Eissing wrote:
>> Ni Norm,
>>
>> yes, I removed it last week
>
> If I want on VirtualHost with h2 support and another one without how
> should I do that? (that is for demo purpose)
>
> Cheers
>
> Jean-Frederic


From dev-return-83618-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 08:35:06 2015
Return-Path: <dev-return-83618-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 46C7518E67
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 08:35:06 +0000 (UTC)
Received: (qmail 57522 invoked by uid 500); 27 Aug 2015 08:35:05 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 57459 invoked by uid 500); 27 Aug 2015 08:35:05 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 57446 invoked by uid 99); 27 Aug 2015 08:35:05 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 08:35:05 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 5387D1AADF6
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 08:35:05 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.007
X-Spam-Level:
X-Spam-Status: No, score=-0.007 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id Bhu0ZecT4qOq for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 08:35:04 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id B3BA842B92
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 08:35:03 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 4125415A05D4
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 10:35:02 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: modules\http2 - H2Engine directive?
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <55DEC8BF.3010601@gmail.com>
Date: Thu, 27 Aug 2015 10:35:01 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <551656A7-C97F-42C0-A63A-56F77ECEE4AD@greenbytes.de>
References: <55DA9528.7070709@gknw.net> <A08F81D7-E35C-4E60-B649-9043BC42047F@greenbytes.de> <55DEC8BF.3010601@gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

One more thing.

If you want to demo with chrome, you need to enforce server order of =
protocols, since chrome currently specifies ALPN protocols in the wrong =
order. Chrome Bug is open and assigned.

So, for now you might want to do:

    Protocols h2 http/1.1
    ProtocolsHonorOrder on

Firefox, curl, python works right out of the box.

//Stefan

> Am 27.08.2015 um 10:22 schrieb jean-frederic clere =
<jfclere@gmail.com>:
>=20
> On 08/24/2015 10:06 AM, Stefan Eissing wrote:
>> Ni Norm,
>>=20
>> yes, I removed it last week
>=20
> If I want on VirtualHost with h2 support and another one without how =
should I do that? (that is for demo purpose)
>=20
> Cheers
>=20
> Jean-Frederic

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83619-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 08:46:26 2015
Return-Path: <dev-return-83619-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9E15418EB1
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 08:46:26 +0000 (UTC)
Received: (qmail 83150 invoked by uid 500); 27 Aug 2015 08:46:26 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 83080 invoked by uid 500); 27 Aug 2015 08:46:26 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 83061 invoked by uid 99); 27 Aug 2015 08:46:26 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 08:46:26 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id B62E71AAF28
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 08:46:25 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id W_K5lU9qmw5k for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 08:46:25 +0000 (UTC)
Received: from mail-wi0-f182.google.com (mail-wi0-f182.google.com [209.85.212.182])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 9C87325768
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 08:46:24 +0000 (UTC)
Received: by wicne3 with SMTP id ne3so67493737wic.0
        for <dev@httpd.apache.org>; Thu, 27 Aug 2015 01:46:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=subject:to:references:from:message-id:date:user-agent:mime-version
         :in-reply-to:content-type:content-transfer-encoding;
        bh=wtLOQ/fcTvQcdQ3ey8ih63JQbaX5tAE8QEYDDDNM6Lk=;
        b=zTuSNsIQtqer9KUab6L/1gm/9yd0Y0Kt8sL3Z0245FaLrfoMClnmg2lhNZaJbu+8I8
         C2IkgjyBgs79q9Tag9h9w/zIrnbgRu74fUoENLuzSHEf4f6mFU4SICUzdTWvMBgMzcyZ
         1vCPZ53KTuwUeGq1de1jAXxA37hOVpASqtGzBaoKzAXfubofyCtFhSUdKhmxGRvGQw0R
         VZImfxmk5j/aTSXxiWxWgdgC9Z4X51VjRmioww5jxwE4HZFu0PTS7byVFy2eosdLbWGE
         hDpofPFVk7noBA7Y5hOi3yW8/Gf/WVV9BiD+PSbS015mfUFfE4u5bAYBlKBDEE/Pmei9
         5gpA==
X-Received: by 10.194.116.67 with SMTP id ju3mr3158602wjb.143.1440665178396;
        Thu, 27 Aug 2015 01:46:18 -0700 (PDT)
Received: from [10.33.144.3] (nat-pool-gva-t.redhat.com. [209.132.186.32])
        by smtp.gmail.com with ESMTPSA id lk16sm2490646wic.6.2015.08.27.01.46.17
        for <dev@httpd.apache.org>
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Thu, 27 Aug 2015 01:46:17 -0700 (PDT)
Subject: Re: HTTP Server Project hackathon/BoF in Budapest?
To: dev@httpd.apache.org
References: <CACsi253isUCKNTPF=mo3mqvQ-e0H6gBQyeSmCATYNQyg3Drt0w@mail.gmail.com>
From: jean-frederic clere <jfclere@gmail.com>
Message-ID: <55DECE59.5070003@gmail.com>
Date: Thu, 27 Aug 2015 10:46:17 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.0.1
MIME-Version: 1.0
In-Reply-To: <CACsi253isUCKNTPF=mo3mqvQ-e0H6gBQyeSmCATYNQyg3Drt0w@mail.gmail.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

On 08/26/2015 05:29 PM, William A Rowe Jr wrote:
> First question, will many of us be present and available during the day
> Wednesday ahead of the ApacheCon Core content for a hackathon and BoF,
> or would it be better for these things to happen on Thursday during/in
> the evening of Core?

I will be there and might have cycles :D

Cheers

Jean-Frederic

From dev-return-83620-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 08:49:16 2015
Return-Path: <dev-return-83620-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7647918ECD
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 08:49:16 +0000 (UTC)
Received: (qmail 88819 invoked by uid 500); 27 Aug 2015 08:49:15 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 88754 invoked by uid 500); 27 Aug 2015 08:49:14 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 88744 invoked by uid 99); 27 Aug 2015 08:49:14 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 08:49:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 7FFCEEE8D4
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 08:49:09 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id FgSNze8-Kkpx for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 08:49:09 +0000 (UTC)
Received: from mail-wi0-f179.google.com (mail-wi0-f179.google.com [209.85.212.179])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id B724E2645C
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 08:48:57 +0000 (UTC)
Received: by wicne3 with SMTP id ne3so67559030wic.0
        for <dev@httpd.apache.org>; Thu, 27 Aug 2015 01:48:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=subject:to:references:from:message-id:date:user-agent:mime-version
         :in-reply-to:content-type:content-transfer-encoding;
        bh=RtIq9pcAgZ0Ov/NlVD2zAHfnixIa/cx75jlpOSGiEDQ=;
        b=mRvHd3fgCWOoEiVwjuWKqkG5TL6rKpMvXhK0mgYzBUW/skGSRL8+V/fcPjDzMZtcyY
         PZNktLZLlxzFloO6/VEdKvneympo/AuzqmSCZoFrvF4BUdCH7E1Hp6rCFMqTYOx6ttLj
         BgvgCkXRDvwSVHbp2PlTGtqjKWnySRzW5+tycCWCFb8kELe4ow6CrIB7nxJI23leEFqj
         QzvFjglgEG/u7t0q8KF1wEkzQJXjOnJZ5k1ns/4Ms9zsJutojIvHmMIzO4o0pXglJaKX
         fim2vZB7sU8OYnpa2chuaW4ZjwlJXHDzkkoOeqIz+B1l1SsmW7X7UO/qYjN9QX1HFL3s
         Z7ag==
X-Received: by 10.194.10.165 with SMTP id j5mr3483186wjb.147.1440665329989;
        Thu, 27 Aug 2015 01:48:49 -0700 (PDT)
Received: from [10.33.144.3] (nat-pool-gva-t.redhat.com. [209.132.186.32])
        by smtp.gmail.com with ESMTPSA id im10sm1961279wjb.40.2015.08.27.01.48.49
        for <dev@httpd.apache.org>
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Thu, 27 Aug 2015 01:48:49 -0700 (PDT)
Subject: Re: proposed backport, mod_h2 github release
To: dev@httpd.apache.org
References: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de>
From: jean-frederic clere <jfclere@gmail.com>
Message-ID: <55DECEF0.30209@gmail.com>
Date: Thu, 27 Aug 2015 10:48:48 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.0.1
MIME-Version: 1.0
In-Reply-To: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

Hi.

Just to clarify the openssl minimal version to use to have h2 working is 
1.0.2c correct? Or did I miss something?

Cheers

Jean-Frederic

From dev-return-83621-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 08:58:51 2015
Return-Path: <dev-return-83621-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0E2C418F2B
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 08:58:51 +0000 (UTC)
Received: (qmail 13763 invoked by uid 500); 27 Aug 2015 08:58:50 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 13687 invoked by uid 500); 27 Aug 2015 08:58:50 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 13677 invoked by uid 99); 27 Aug 2015 08:58:50 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 08:58:50 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 2B4AAC0046
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 08:58:50 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id k0G96UHfDw7r for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 08:58:36 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 3335520F6D
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 08:58:27 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 47E0C15A05D4
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 10:58:25 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: proposed backport, mod_h2 github release
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <55DE2DF4.3080602@gknw.net>
Date: Thu, 27 Aug 2015 10:58:24 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <7DD41398-1345-4843-9869-11A78ADF211C@greenbytes.de>
References: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de> <55DE2DF4.3080602@gknw.net>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)


> Am 26.08.2015 um 23:21 schrieb Gregg Smith <gls@gknw.net>:
>=20
> On 8/26/2015 6:44 AM, Stefan Eissing wrote:
>> I just submitted my first backport STATUS update. Hope I did =
everything ok, otherwise please let me know.
>>=20
>> For backporting mod_h2 to 2.4.x, I decided to make it in two parts: =
one is the patch to core/mod_ssl that introduces Protocols. That is now =
in STATUS.
>=20
> Needs r1693918, other than that all seems ok so far :)

Thanks, nice catch. This C89 thing is killing me...

Updated STATUS and patch file on github.

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83622-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 09:08:36 2015
Return-Path: <dev-return-83622-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 18D1E18F7D
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 09:08:36 +0000 (UTC)
Received: (qmail 31768 invoked by uid 500); 27 Aug 2015 09:08:30 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 31691 invoked by uid 500); 27 Aug 2015 09:08:30 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 31681 invoked by uid 99); 27 Aug 2015 09:08:30 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 09:08:30 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 3FCECEE6EF
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 09:08:30 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -1.425
X-Spam-Level:
X-Spam-Status: No, score=-1.425 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-1.424, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id L_w0naK2raF7 for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 09:08:29 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id E81562576F
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 09:08:21 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 3031115A0535
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 11:08:21 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: proposed backport, mod_h2 github release
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <55DECEF0.30209@gmail.com>
Date: Thu, 27 Aug 2015 11:08:20 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <35E44042-FC06-4373-B0D5-D20D46E64BB3@greenbytes.de>
References: <FF6F2075-5448-44CD-99A1-079482E68312@greenbytes.de> <55DECEF0.30209@gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

Latest is 1.0.2d, but the c will also do. 1.0.1 does not seem to have =
it.

> Am 27.08.2015 um 10:48 schrieb jean-frederic clere =
<jfclere@gmail.com>:
>=20
> Hi.
>=20
> Just to clarify the openssl minimal version to use to have h2 working =
is 1.0.2c correct? Or did I miss something?
>=20
> Cheers
>=20
> Jean-Frederic

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83623-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 09:10:58 2015
Return-Path: <dev-return-83623-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F083B18F8A
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 09:10:57 +0000 (UTC)
Received: (qmail 38090 invoked by uid 500); 27 Aug 2015 09:10:57 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 38026 invoked by uid 500); 27 Aug 2015 09:10:57 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 38014 invoked by uid 99); 27 Aug 2015 09:10:57 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 09:10:57 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 117EDC0046
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 09:10:52 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.007
X-Spam-Level:
X-Spam-Status: No, score=-0.007 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id cbFpwGdqj5Mh for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 09:10:51 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id D8A1D20D7B
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 09:10:50 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 761AD15A058D
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 11:10:50 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: HTTP Server Project hackathon/BoF in Budapest?
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <55DECE59.5070003@gmail.com>
Date: Thu, 27 Aug 2015 11:10:49 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <E5A37D9B-A030-4532-A237-4CEF30773FC9@greenbytes.de>
References: <CACsi253isUCKNTPF=mo3mqvQ-e0H6gBQyeSmCATYNQyg3Drt0w@mail.gmail.com> <55DECE59.5070003@gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

I will arrive on Wednesday evening.

> Am 27.08.2015 um 10:46 schrieb jean-frederic clere =
<jfclere@gmail.com>:
>=20
> On 08/26/2015 05:29 PM, William A Rowe Jr wrote:
>> First question, will many of us be present and available during the =
day
>> Wednesday ahead of the ApacheCon Core content for a hackathon and =
BoF,
>> or would it be better for these things to happen on Thursday =
during/in
>> the evening of Core?
>=20
> I will be there and might have cycles :D
>=20
> Cheers
>=20
> Jean-Frederic

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83624-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 09:31:40 2015
Return-Path: <dev-return-83624-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AABAC100A9
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 09:31:40 +0000 (UTC)
Received: (qmail 88012 invoked by uid 500); 27 Aug 2015 09:31:40 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 87941 invoked by uid 500); 27 Aug 2015 09:31:40 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 87931 invoked by uid 99); 27 Aug 2015 09:31:40 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 09:31:40 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id C40331822B4
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 09:31:39 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id jexhBbce6J7j for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 09:31:26 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 2016E2666C
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 09:31:26 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 88FC615A06E3
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 11:31:24 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: APACHE_CHECK_NGHTTP2
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CACsi253fieQfNBX__OKGQVPfFk7beZ9bG9oKB79ufOPdQTFPZw@mail.gmail.com>
Date: Thu, 27 Aug 2015 11:31:23 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <AE897EF0-34A5-4422-9037-DE93B4AF1063@greenbytes.de>
References: <CACsi253fieQfNBX__OKGQVPfFk7beZ9bG9oKB79ufOPdQTFPZw@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

Just tried it, cannot get it to work. Some volunteer for this?

> Am 27.08.2015 um 00:06 schrieb William A Rowe Jr =
<wrowe@rowe-clan.net>:
>=20
> Just a quick observation before backport of mod_h2 is proposed...
>=20
> Moving the macro APACHE_CHECK_NGHTTP2 out of acinclude.m4 into =
modules/http2/config.m4 lets me build (after a ./buildconf) after simply =
checking out modules/http2/ from trunk.
>=20
> In terms of ease-of-integration, do we see other modules we expect to =
utilize libnghttp2, e.g. mod_proxy_http?  If so, this probably isn't the =
right solution, but it makes an interesting and quick stop-gap.
>=20
>=20

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83625-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 09:34:31 2015
Return-Path: <dev-return-83625-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E25AC100C9
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 09:34:30 +0000 (UTC)
Received: (qmail 98806 invoked by uid 500); 27 Aug 2015 09:34:30 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 98744 invoked by uid 500); 27 Aug 2015 09:34:30 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 98734 invoked by uid 99); 27 Aug 2015 09:34:30 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 09:34:30 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 09ED8C0250
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 09:34:30 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id X1YBGyMpjkrR for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 09:34:21 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id DF4B242B5D
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 09:34:20 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id A622715A05C8
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 11:34:19 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: APACHE_CHECK_NGHTTP2
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <AE897EF0-34A5-4422-9037-DE93B4AF1063@greenbytes.de>
Date: Thu, 27 Aug 2015 11:34:18 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <D9E296ED-E94B-4793-AC86-22EC6237A1F3@greenbytes.de>
References: <CACsi253fieQfNBX__OKGQVPfFk7beZ9bG9oKB79ufOPdQTFPZw@mail.gmail.com> <AE897EF0-34A5-4422-9037-DE93B4AF1063@greenbytes.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

Ah, got it now. Patch incoming.

> Am 27.08.2015 um 11:31 schrieb Stefan Eissing =
<stefan.eissing@greenbytes.de>:
>=20
> Just tried it, cannot get it to work. Some volunteer for this?
>=20
>> Am 27.08.2015 um 00:06 schrieb William A Rowe Jr =
<wrowe@rowe-clan.net>:
>>=20
>> Just a quick observation before backport of mod_h2 is proposed...
>>=20
>> Moving the macro APACHE_CHECK_NGHTTP2 out of acinclude.m4 into =
modules/http2/config.m4 lets me build (after a ./buildconf) after simply =
checking out modules/http2/ from trunk.
>>=20
>> In terms of ease-of-integration, do we see other modules we expect to =
utilize libnghttp2, e.g. mod_proxy_http?  If so, this probably isn't the =
right solution, but it makes an interesting and quick stop-gap.
>>=20
>>=20
>=20
> <green/>bytes GmbH
> Hafenweg 16, 48155 M=C3=BCnster, Germany
> Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782
>=20
>=20
>=20

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83626-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 10:14:52 2015
Return-Path: <dev-return-83626-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 090B710279
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 10:14:52 +0000 (UTC)
Received: (qmail 73518 invoked by uid 500); 27 Aug 2015 10:14:51 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 73440 invoked by uid 500); 27 Aug 2015 10:14:51 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 73430 invoked by uid 99); 27 Aug 2015 10:14:51 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 10:14:51 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id D28A81AAF33
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 10:14:50 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id t1FYotIOSd5E for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 10:14:44 +0000 (UTC)
Received: from mail-ig0-f179.google.com (mail-ig0-f179.google.com [209.85.213.179])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id B5BDB21474
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 10:14:43 +0000 (UTC)
Received: by igcse8 with SMTP id se8so63368757igc.1
        for <dev@httpd.apache.org>; Thu, 27 Aug 2015 03:14:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=BiZNCx+IkM81IX2PJT9dRXfpf8Qfte/F12hv1Fbkikw=;
        b=beh3RQtf+W++7kHqtGY0s1pCS0P11VSG4M2juK+zg9/HmwUTfFdQ9UBIUNCA22+N9Q
         /ET5TU/7x6ZGuRu4Zzhnth2+yV9puuTf8kKvTCT2pRtMvLTlMxaSRLHkXqqj7ckmmkJD
         QSmHwU4XXdXRJzyDx14QnL6I1HUYtrPYsDs7dro+wYNYeqKHH79wn7ZZM8WO5NAJYAzV
         ff6gpJ2Gg+zjkgYArDCZmkulZ7YBmiKTcBgyPVCE4ltQY3BLTdac/rmXUKI0gTAkAf+Y
         c1kWhOl6v+YXycjSsuDfYo/Y84YXS2gE6JLg5Rzhu1rx5mfDpbz1gMXa6wcAwie9NbpG
         eIFg==
MIME-Version: 1.0
X-Received: by 10.50.6.16 with SMTP id w16mr9090646igw.74.1440670482561; Thu,
 27 Aug 2015 03:14:42 -0700 (PDT)
Received: by 10.79.38.74 with HTTP; Thu, 27 Aug 2015 03:14:42 -0700 (PDT)
In-Reply-To: <CAKQ1sVPaQLs19XcXALffsX-h3mpnwQc+AzmWkBr_cWq6e9PEhQ@mail.gmail.com>
References: <CACsi253isUCKNTPF=mo3mqvQ-e0H6gBQyeSmCATYNQyg3Drt0w@mail.gmail.com>
	<CAKQ1sVPaQLs19XcXALffsX-h3mpnwQc+AzmWkBr_cWq6e9PEhQ@mail.gmail.com>
Date: Thu, 27 Aug 2015 12:14:42 +0200
Message-ID: <CAKQ1sVN0aKz6nSDXWNFqcQ+jxz=JmOYSxNMSNtaApx1H3QVnhQ@mail.gmail.com>
Subject: Re: HTTP Server Project hackathon/BoF in Budapest?
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

On Wed, Aug 26, 2015 at 7:03 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
> On Wed, Aug 26, 2015 at 5:29 PM, William A Rowe Jr <wrowe@rowe-clan.net> wrote:
>> First question, will many of us be present and available during the day
>> Wednesday ahead of the ApacheCon Core content for a hackathon and BoF, or
>> would it be better for these things to happen on Thursday during/in the
>> evening of Core?
>
> I'll be there on Wednesday, and Thurday too but not the evening.

Wrong dates! I'll be there on Thursday until Friday (evening).
So I'm available both days for the hackathon/BoF.

>
> Regards,
> Yann.

From dev-return-83627-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 10:20:12 2015
Return-Path: <dev-return-83627-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 95E0E102B6
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 10:20:12 +0000 (UTC)
Received: (qmail 86703 invoked by uid 500); 27 Aug 2015 10:20:11 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 86642 invoked by uid 500); 27 Aug 2015 10:20:11 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 86630 invoked by uid 99); 27 Aug 2015 10:20:11 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 10:20:11 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 47FAB1AAED8
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 10:20:11 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id ijB9XX0Z3b1m for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 10:20:03 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 1508C20752
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 10:20:03 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 47D8D15A0386
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 12:20:01 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: modules\http2 - structure initializing.
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <55DE326D.8010401@gknw.net>
Date: Thu, 27 Aug 2015 12:20:00 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <C61C5FDC-3550-4664-8CE9-159F8CC2DA7E@greenbytes.de>
References: <55DCF1F8.4010203@gknw.net> <D8F4A20E-5BCA-4CC6-BBD3-AC7DE1A3BCBF@greenbytes.de> <55DE2D3B.9020904@gknw.net> <D5F68F35-963A-4B5B-A8DE-FBBF58F9F07B@greenbytes.de> <55DE326D.8010401@gknw.net>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

Submitted in r1698107.

> Am 26.08.2015 um 23:41 schrieb NormW <normw@gknw.net>:
>=20
> Whinnnie!
> (eq Equine 'Thanks')
> On 27/08/2015 7:31 AM, Stefan Eissing wrote:
>> I will apply the proposed change tomorrow. keep the old horse happy.
>>=20
>> //stefan
>>=20
>>> Am 26.08.2015 um 23:18 schrieb NormW <normw@gknw.net>:
>>>=20
>>> G/Morning I think,
>>> As Bill correctly guesses in a following mail, 'my' OS is NetWare =
and it's the standard compiler GK has been using for years to build =
Apache releases.
>>>=20
>>> And that (Metrowerks CW) (AFAIK) is a C89 legend.
>>>=20
>>> As I noted in my mail, I would hardly expect to hold back tomorrows =
http/2 protocol for so dated a horse as NetWare, and if you introduced =
coding or functions that NetWare's compiler doesn't support then it's =
'game-over' for the old war horse as far as http2 is concerned. For the =
moment however I merely suggest an opinion that initializing structures =
via a list of individual assignments is a better form to read the code =
than what is used at present, and a small, almost irrelevant side effect =
of which is that, for now at least, my compiler can keep building http2 =
for NetWare, with no functional change to the code.
>>> Regards,
>>> Norm
>>>=20
>>>> On 27/08/2015 1:26 AM, Stefan Eissing wrote:
>>>> Hi Norm,
>>>>=20
>>>> I think these type of assignments are part of the C90 standard. I =
am not sure we want to support a compiler that cannot cope with that, =
but I may be to green to know that. What platform is this on exactly?
>>>>=20
>>>> //Stefan
>>>>=20
>>>>> Am 26.08.2015 um 00:53 schrieb NormW <normw@gknw.net>:
>>>>>=20
>>>>> G/Morning,
>>>>> Herewith an svn diff that implements line-by-line initialization =
of three structures (no idea if there's a technical term for it) in =
place of the list method now used, e.g struct x =3D { , , , }.
>>>>>=20
>>>>> I acknowledge upfront that 'my' somewhat dated compiler cannot =
handle the list method, whereas the method portrayed in the diff is =
totally acceptable to it.
>>>>>=20
>>>>> However, I find the 'list' method less easier to 'read' as the =
struct elements are not 'visible', and one has to locate the struct =
definition itself to see what is being set to what. The method as =
illustrated by the patch is clearer (to my mind) and not affected by the =
order of the elements within the primary structure.
>>>>>=20
>>>>> Lastly I noticed at least one case recently where my diff =
'simplified' because a struct was changed to the _suggested_ method, =
with the primary struct being created by a memset(); perhaps that's a =
similar change needed in these cases also?
>>>>>=20
>>>>> Regards,
>>>>> Norm
>>>>>=20
>>>>>=20
>>>>>=20
>>>>> <cw_reqd_chgs.diff>
>>>>=20
>>>> <green/>bytes GmbH
>>>> Hafenweg 16, 48155 M=C3=BCnster, Germany
>>>> Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782
>>>=20
>=20

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83628-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 10:30:01 2015
Return-Path: <dev-return-83628-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D5CC910321
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 10:30:01 +0000 (UTC)
Received: (qmail 15008 invoked by uid 500); 27 Aug 2015 10:30:01 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 14943 invoked by uid 500); 27 Aug 2015 10:30:01 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 14933 invoked by uid 99); 27 Aug 2015 10:30:01 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 10:30:01 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id EB34D18259E
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 10:30:00 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id EDtXVqRaQWRr for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 10:29:54 +0000 (UTC)
Received: from mail-io0-f177.google.com (mail-io0-f177.google.com [209.85.223.177])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 570E642B92
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 10:29:54 +0000 (UTC)
Received: by iods203 with SMTP id s203so51711813iod.0
        for <dev@httpd.apache.org>; Thu, 27 Aug 2015 03:29:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=zIOOXUh6ynkOipoBXAiyf52Kn6GWJW3vdwRAK5U55M4=;
        b=zahtnc6rLungh0w9MoMpkKeAGwmglkBciuB6XbrwbLOCizXs1Nq/xTQ6x2lWIJMTsR
         kGuYq+/XdnKj9SDB6VSl44YqCvYsGv+dCRE+5fQE6KLfoLdiPFr4Z8iLMjkOEGLaSBBD
         7sCDfo77zKuT6ZegeDMkXyDxYEJxKAU9d0jZhoPmiTPZI/EZiRLMmtmbfnmcQdlipxZX
         IiiRmkNeaJQUki6uEwfpsdUuvr4cwS6uJ3wN7Sl/CzeFFRA8foVckDkNf3ZMBIOpLSv6
         0VdFlV4BG3HjD3vrcqjhi3PCz6k/sfnNgyIa16V0OBbM/SX12VfTywfRTqPzwXatslNm
         RMXQ==
MIME-Version: 1.0
X-Received: by 10.107.14.145 with SMTP id 139mr8379221ioo.37.1440671393965;
 Thu, 27 Aug 2015 03:29:53 -0700 (PDT)
Received: by 10.79.38.74 with HTTP; Thu, 27 Aug 2015 03:29:53 -0700 (PDT)
In-Reply-To: <55DCF1F8.4010203@gknw.net>
References: <55DCF1F8.4010203@gknw.net>
Date: Thu, 27 Aug 2015 12:29:53 +0200
Message-ID: <CAKQ1sVMonQsEtrzQAfebLgwjxeif18OF7zU0gWt3yR=q5A6qaQ@mail.gmail.com>
Subject: Re: modules\http2 - structure initializing.
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org, normw@gknw.net
Content-Type: text/plain; charset=UTF-8

Hi,

On Wed, Aug 26, 2015 at 12:53 AM, NormW <normw@gknw.net> wrote:
> Herewith an svn diff that implements line-by-line initialization of three
> structures (no idea if there's a technical term for it) in place of the list
> method now used, e.g struct x = { , , , }.
>
> I acknowledge upfront that 'my' somewhat dated compiler cannot handle the
> list method, whereas the method portrayed in the diff is totally acceptable
> to it.

Does it accept x = {0} still?

Regards,
Yann.

From dev-return-83629-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 11:19:56 2015
Return-Path: <dev-return-83629-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C1EA310567
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 11:19:56 +0000 (UTC)
Received: (qmail 41344 invoked by uid 500); 27 Aug 2015 11:19:56 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 41287 invoked by uid 500); 27 Aug 2015 11:19:56 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 41274 invoked by uid 99); 27 Aug 2015 11:19:56 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 11:19:56 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id B75F8180290
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 11:19:55 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id dULjJxgCeHFA for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 11:19:47 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id D9CA120D7B
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 11:19:46 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 0A44B15A0386
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 13:19:46 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: Getting all supported protocols
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CAL7zx_fS5fsaTrvLSFhkDhn8qCgVkaiweVHWka0shXD1+a-74g@mail.gmail.com>
Date: Thu, 27 Aug 2015 13:19:45 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <E33C64C0-ECA0-47E7-B28E-A68A9BCF61A4@greenbytes.de>
References: <CAL7zx_dXoEWWWZdqNva8JVALZo=_szfj8xGGgjoC+rBNOcRqOg@mail.gmail.com> <B7CDEFF9-8666-4EBA-893F-35F4522601D3@greenbytes.de> <CAL7zx_fS5fsaTrvLSFhkDhn8qCgVkaiweVHWka0shXD1+a-74g@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

Implemented in r1698116. Will add to core-protocols patch now.

Reviewers: This is a clarification of the protocols hook API without any =
code changes in core.

> Am 26.08.2015 um 18:39 schrieb Edward Lu <chaosed0@gmail.com>:
>=20
> Yes, that's right - the toolkit does itself decide which protocol is =
used. However, it decides based on the order of the protocols we pass to =
it; that is, it will find the first protocol in the list supported by =
the client and negotiate it. We will order the list ourselves according =
to Protocols and ProtocolsHonorOrder.
>=20
> The general structure of this toolkit's API is quite different =
OpenSSL's - it's not callback-based, all we do is pass it a bunch of =
parameters and then tell it to go ahead with the handshake. I think that =
may have influenced this API more than NPN.
>=20
>=20
> On Wed, Aug 26, 2015 at 11:20 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
> Hmm, this was the kind of behaviour of NPN, maybe that influenced the =
API of that toolkit?
>=20
> I imagine that the toolkit will decide itself then what protocol is =
negotiated. That would mean that the directive ProtocolsHonorOrder has =
no longer an effect. Am I right?
>=20
> I do not think that is what we want.
>=20
> //Stefan
>=20
> > Am 26.08.2015 um 17:02 schrieb Edward Lu <chaosed0@gmail.com>:
> >
> > I was experimenting with the new support for declaring protocols for =
e.g. ALPN, but with an SSL toolkit other than openssl. This one wants us =
to pass the entire list of all the protocols the server supports in =
advance; later, we can request the one protocol that the toolkit =
negotiated.
> >
> > It looks like the protocol_propose hook allows us to only grab a =
subset of the protocols - i.e. it expects us to have the protocol list =
that the client sends us. I've attached a patch which modifies the =
protocol_propose hook's interface (documentation), allowing us to get =
all of the protocols supported by the server. I also modified h2's =
implementation of the hook to reflect the interface change.
> >
> > Let me know if anyone sees a problem.
> >
> > <all_protos.diff>
>=20
> <green/>bytes GmbH
> Hafenweg 16, 48155 M=C3=BCnster, Germany
> Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782
>=20
>=20
>=20
>=20

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83630-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 11:34:28 2015
Return-Path: <dev-return-83630-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4AFD110634
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 11:34:28 +0000 (UTC)
Received: (qmail 70545 invoked by uid 500); 27 Aug 2015 11:34:27 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 70461 invoked by uid 500); 27 Aug 2015 11:34:27 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 70451 invoked by uid 99); 27 Aug 2015 11:34:27 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 11:34:27 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 68C08C028F
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 11:34:27 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Nbj-JA-NWlyP for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 11:34:26 +0000 (UTC)
Received: from mail-ig0-f169.google.com (mail-ig0-f169.google.com [209.85.213.169])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id A27AA42B2E
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 11:34:25 +0000 (UTC)
Received: by igcse8 with SMTP id se8so64694601igc.1
        for <dev@httpd.apache.org>; Thu, 27 Aug 2015 04:34:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=YlW6s7zO4MnKmSplcrNyZwV+JEj6xeGvBYVNVMFHJPc=;
        b=vMRSndyDY8jmhhFaiYxdoOMsPsmDB/VYC2JNEbAi01zo4W73hpqSRpMZIZkMTwYbX+
         P3q3DoUa0YrHdWg2ypb4P6N74DPj1kOlPoDQDjWBZ1Lh+QSBWcd9Sbi2U/GRGCxBUgk3
         Xc6Mf3dAe/Y4+vOkRr3R+8tirddMvH02Fi/ICpn/6+3u/Ziu9TYyCdJw+fB0u0t9WbKC
         9lMRDF1jvj+m4wJ4g8jhB+2CgMXYz0MWEBjjCzxA5WrbVeeLaU7/JssEtlkm9Kp7kOD2
         ATWRsuPTNchV4nI5kwC2eV59uvnJwSq6gjO64qfH3gGlRxf5SawiH0u98IlOpU6UzFuK
         Kg2w==
MIME-Version: 1.0
X-Received: by 10.50.6.16 with SMTP id w16mr9363617igw.74.1440675265053; Thu,
 27 Aug 2015 04:34:25 -0700 (PDT)
Received: by 10.79.38.74 with HTTP; Thu, 27 Aug 2015 04:34:24 -0700 (PDT)
In-Reply-To: <20150827112510.26DE6AC0113@hades.apache.org>
References: <20150827112510.26DE6AC0113@hades.apache.org>
Date: Thu, 27 Aug 2015 13:34:24 +0200
Message-ID: <CAKQ1sVNcXCQRaWUCjrUHvDg34XPPvAUwFtPV0QxNWgLSPZWo6w@mail.gmail.com>
Subject: Re: svn commit: r1698117 - /httpd/httpd/branches/2.4.x/STATUS
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

On Thu, Aug 27, 2015 at 1:25 PM,  <icing@apache.org> wrote:
> Author: icing
> Date: Thu Aug 27 11:25:09 2015
> New Revision: 1698117
>
> URL: http://svn.apache.org/r1698117
> Log:
> adding r1698116 to core-protocols.patch to clarify new api
>
> Modified:
>     httpd/httpd/branches/2.4.x/STATUS
>
> Modified: httpd/httpd/branches/2.4.x/STATUS
> URL: http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/STATUS?rev=1698117&r1=1698116&r2=1698117&view=diff
> ==============================================================================
> --- httpd/httpd/branches/2.4.x/STATUS (original)
> +++ httpd/httpd/branches/2.4.x/STATUS Thu Aug 27 11:25:09 2015
> @@ -312,6 +312,7 @@ PATCHES PROPOSED TO BACKPORT FROM TRUNK:
>                    http://svn.apache.org/r1610674 (partial)
>                    http://svn.apache.org/r1685069
>                    http://svn.apache.org/r1693918
> +                  http://svn.apache.org/r1698116

Looks like it does not belong to this patchset (and the patch below).

>      2.4.x patch: https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patches/core-protocols.patch
>      +1: icing,
>
>
>

From dev-return-83631-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 11:39:32 2015
Return-Path: <dev-return-83631-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 614511066E
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 11:39:32 +0000 (UTC)
Received: (qmail 82515 invoked by uid 500); 27 Aug 2015 11:39:31 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 82433 invoked by uid 500); 27 Aug 2015 11:39:31 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 82423 invoked by uid 99); 27 Aug 2015 11:39:31 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 11:39:31 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 76009181799
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 11:39:31 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level:
X-Spam-Status: No, score=0.001 tagged_above=-999 required=6.31
	tests=[URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id K8DuwThp3hGy for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 11:39:24 +0000 (UTC)
Received: from node176.itex.at (mail.123x.at [194.242.35.176])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id C471E42F39
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 11:39:23 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
	by node176.itex.at (Postfix) with ESMTP id 5FE3F22AC5;
	Thu, 27 Aug 2015 13:39:20 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at node176.itex.at
Received: from node176.itex.at ([127.0.0.1])
	by localhost (node176.itex.at [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id cBpKpmwJC4TR; Thu, 27 Aug 2015 13:39:19 +0200 (CEST)
Received: from [10.202.65.180] (CPE-110-146-131-133.knmu.knt.bigpond.net.au [110.146.131.133])
	(Authenticated sender: normw@gknw.net)
	by node176.itex.at (Postfix) with ESMTPSA id 53517204F3;
	Thu, 27 Aug 2015 13:39:17 +0200 (CEST)
Subject: Re: modules\http2 - structure initializing.
To: Yann Ylavic <ylavic.dev@gmail.com>,
 "dev@httpd.apache.org" <dev@httpd.apache.org>
References: <55DCF1F8.4010203@gknw.net>
 <CAKQ1sVMonQsEtrzQAfebLgwjxeif18OF7zU0gWt3yR=q5A6qaQ@mail.gmail.com>
From: NormW <normw@gknw.net>
Message-ID: <55DEF6E5.3050307@gknw.net>
Date: Thu, 27 Aug 2015 21:39:17 +1000
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
In-Reply-To: <CAKQ1sVMonQsEtrzQAfebLgwjxeif18OF7zU0gWt3yR=q5A6qaQ@mail.gmail.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

Yann, Sorry for the delay,
In simple terms, no; it is obvious the compiler (other people use other 
names) just sees that as a single item list, and complains about the 
syntax, regardless of how many items are in the list.

To be honest up to this point the compiler has been able to build 
everything (including all of httpd-trunk), and I proposed the small 
variations suggested in the diff on the grounds I (and evidently a few 
others) thought the suggested format was clearer.

However, it is not MY intention to limit in any way the functionality of 
tomorrows software solely so NetWare can make some show of trying to 
keep up. I've no idea how much more coding is needed for your project, 
and it may be that the next change or the 100th from now will be beyond 
the capabilities of what tools I have to use, and the race will be over 
for both the horse and the rider. Code as you see fit and if it 
eventuates that NetWare can't keep up, there's a lot of others who will.
Regards,
Norm

On 27/08/2015 8:29 PM, Yann Ylavic wrote:
> Hi,
>
> On Wed, Aug 26, 2015 at 12:53 AM, NormW <normw@gknw.net> wrote:
>> Herewith an svn diff that implements line-by-line initialization of three
>> structures (no idea if there's a technical term for it) in place of the list
>> method now used, e.g struct x = { , , , }.
>>
>> I acknowledge upfront that 'my' somewhat dated compiler cannot handle the
>> list method, whereas the method portrayed in the diff is totally acceptable
>> to it.
>
> Does it accept x = {0} still?
>
> Regards,
> Yann.
>


From dev-return-83632-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 12:21:56 2015
Return-Path: <dev-return-83632-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 143C310880
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 12:21:56 +0000 (UTC)
Received: (qmail 77259 invoked by uid 500); 27 Aug 2015 12:21:55 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 77182 invoked by uid 500); 27 Aug 2015 12:21:55 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 77171 invoked by uid 99); 27 Aug 2015 12:21:55 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 12:21:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id A35C91AAF26
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 12:21:54 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.007
X-Spam-Level:
X-Spam-Status: No, score=-0.007 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id GzVvMFo3HxHX for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 12:21:53 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 4A0FB20752
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 12:21:53 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 8632D15A0053
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 14:21:51 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1698117 - /httpd/httpd/branches/2.4.x/STATUS
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CAKQ1sVNcXCQRaWUCjrUHvDg34XPPvAUwFtPV0QxNWgLSPZWo6w@mail.gmail.com>
Date: Thu, 27 Aug 2015 14:21:50 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <616AF307-F7C8-4F31-AAC1-C783FA7DEB59@greenbytes.de>
References: <20150827112510.26DE6AC0113@hades.apache.org> <CAKQ1sVNcXCQRaWUCjrUHvDg34XPPvAUwFtPV0QxNWgLSPZWo6w@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)


> Am 27.08.2015 um 13:34 schrieb Yann Ylavic <ylavic.dev@gmail.com>:
>=20
> On Thu, Aug 27, 2015 at 1:25 PM,  <icing@apache.org> wrote:
>> Author: icing
>> Date: Thu Aug 27 11:25:09 2015
>> New Revision: 1698117
>>=20
>> URL: http://svn.apache.org/r1698117
>> Log:
>> adding r1698116 to core-protocols.patch to clarify new api
>>=20
>> Modified:
>>    httpd/httpd/branches/2.4.x/STATUS
>>=20
>> Modified: httpd/httpd/branches/2.4.x/STATUS
>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/STATUS?rev=3D16981=
17&r1=3D1698116&r2=3D1698117&view=3Ddiff
>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>> --- httpd/httpd/branches/2.4.x/STATUS (original)
>> +++ httpd/httpd/branches/2.4.x/STATUS Thu Aug 27 11:25:09 2015
>> @@ -312,6 +312,7 @@ PATCHES PROPOSED TO BACKPORT FROM TRUNK:
>>                   http://svn.apache.org/r1610674 (partial)
>>                   http://svn.apache.org/r1685069
>>                   http://svn.apache.org/r1693918
>> +                  http://svn.apache.org/r1698116
>=20
> Looks like it does not belong to this patchset (and the patch below)

The first half about http_protocol.h does. =46rom this and all other =
changes, the directory modules/http2 needs to be ignored. Is that a =
problem?

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83633-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 13:13:21 2015
Return-Path: <dev-return-83633-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AE29310AA0
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 13:13:21 +0000 (UTC)
Received: (qmail 90871 invoked by uid 500); 27 Aug 2015 13:13:21 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 90815 invoked by uid 500); 27 Aug 2015 13:13:21 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 90805 invoked by uid 99); 27 Aug 2015 13:13:21 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 13:13:21 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id B53A0C0861
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 13:13:20 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.149
X-Spam-Level: ***
X-Spam-Status: No, score=3.149 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	FREEMAIL_ENVFROM_END_DIGIT=0.25, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id vjTPUjKzXCts for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 13:13:14 +0000 (UTC)
Received: from mail-ob0-f176.google.com (mail-ob0-f176.google.com [209.85.214.176])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 0089521597
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 13:13:14 +0000 (UTC)
Received: by obbwr7 with SMTP id wr7so15463353obb.2
        for <dev@httpd.apache.org>; Thu, 27 Aug 2015 06:13:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=5jwTMS5zmOxLYyGiYmM4c11Qqy3Kcm1ZRk6rfrnwg2g=;
        b=cNB8dUHzteU1cMjgIoJEdjrIGKBhY8Y44bMyUt4xzTs9LzHBFS8+jpggCOivs2A2nb
         c+kqUbiCl34Q/f7MQN9m0PKgMVQxXmfNSWYoXUDC4e89OYv0hUZuKWJaFMBl60t2MS37
         03SKV/2YAf32auDDyZDV+RkH8YqrNx9i7ry57dO1dg6uZZ8q3/8DoUycKKflIN9AE8+A
         anG1BQ5YVrCb76HjjooSVzOgb+rR2tAT1D1OjiIPPSeQ6cqAGhe3TDbmse9jfg3U6Qaw
         FNkapgh+yWqK54wPyjUbFNH1GyspFz89drhIQxqp5o0vxb5+t5tuL1ftYzi/RsxiZ2Mj
         zy4A==
MIME-Version: 1.0
X-Received: by 10.182.236.200 with SMTP id uw8mr2427793obc.19.1440681191837;
 Thu, 27 Aug 2015 06:13:11 -0700 (PDT)
Received: by 10.182.37.40 with HTTP; Thu, 27 Aug 2015 06:13:11 -0700 (PDT)
In-Reply-To: <E33C64C0-ECA0-47E7-B28E-A68A9BCF61A4@greenbytes.de>
References: <CAL7zx_dXoEWWWZdqNva8JVALZo=_szfj8xGGgjoC+rBNOcRqOg@mail.gmail.com>
	<B7CDEFF9-8666-4EBA-893F-35F4522601D3@greenbytes.de>
	<CAL7zx_fS5fsaTrvLSFhkDhn8qCgVkaiweVHWka0shXD1+a-74g@mail.gmail.com>
	<E33C64C0-ECA0-47E7-B28E-A68A9BCF61A4@greenbytes.de>
Date: Thu, 27 Aug 2015 09:13:11 -0400
Message-ID: <CAL7zx_fnUXpyBmqPE1NcrgR9a4=vFfAv3JnVh-_u5i33cEXfVA@mail.gmail.com>
Subject: Re: Getting all supported protocols
From: Edward Lu <chaosed0@gmail.com>
To: dev@httpd.apache.org
Content-Type: multipart/alternative; boundary=001a11c36216acb986051e4aba25

--001a11c36216acb986051e4aba25
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Thanks Stefan.

On Thu, Aug 27, 2015 at 7:19 AM, Stefan Eissing <
stefan.eissing@greenbytes.de> wrote:

> Implemented in r1698116. Will add to core-protocols patch now.
>
> Reviewers: This is a clarification of the protocols hook API without any
> code changes in core.
>
> > Am 26.08.2015 um 18:39 schrieb Edward Lu <chaosed0@gmail.com>:
> >
> > Yes, that's right - the toolkit does itself decide which protocol is
> used. However, it decides based on the order of the protocols we pass to
> it; that is, it will find the first protocol in the list supported by the
> client and negotiate it. We will order the list ourselves according to
> Protocols and ProtocolsHonorOrder.
> >
> > The general structure of this toolkit's API is quite different OpenSSL'=
s
> - it's not callback-based, all we do is pass it a bunch of parameters and
> then tell it to go ahead with the handshake. I think that may have
> influenced this API more than NPN.
> >
> >
> > On Wed, Aug 26, 2015 at 11:20 AM, Stefan Eissing <
> stefan.eissing@greenbytes.de> wrote:
> > Hmm, this was the kind of behaviour of NPN, maybe that influenced the
> API of that toolkit?
> >
> > I imagine that the toolkit will decide itself then what protocol is
> negotiated. That would mean that the directive ProtocolsHonorOrder has no
> longer an effect. Am I right?
> >
> > I do not think that is what we want.
> >
> > //Stefan
> >
> > > Am 26.08.2015 um 17:02 schrieb Edward Lu <chaosed0@gmail.com>:
> > >
> > > I was experimenting with the new support for declaring protocols for
> e.g. ALPN, but with an SSL toolkit other than openssl. This one wants us =
to
> pass the entire list of all the protocols the server supports in advance;
> later, we can request the one protocol that the toolkit negotiated.
> > >
> > > It looks like the protocol_propose hook allows us to only grab a
> subset of the protocols - i.e. it expects us to have the protocol list th=
at
> the client sends us. I've attached a patch which modifies the
> protocol_propose hook's interface (documentation), allowing us to get all
> of the protocols supported by the server. I also modified h2's
> implementation of the hook to reflect the interface change.
> > >
> > > Let me know if anyone sees a problem.
> > >
> > > <all_protos.diff>
> >
> > <green/>bytes GmbH
> > Hafenweg 16, 48155 M=C3=BCnster, Germany
> > Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782
> >
> >
> >
> >
>
> <green/>bytes GmbH
> Hafenweg 16, 48155 M=C3=BCnster, Germany
> Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782
>
>
>
>

--001a11c36216acb986051e4aba25
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Thanks Stefan.<br></div><div class=3D"gmail_extra"><br><di=
v class=3D"gmail_quote">On Thu, Aug 27, 2015 at 7:19 AM, Stefan Eissing <sp=
an dir=3D"ltr">&lt;<a href=3D"mailto:stefan.eissing@greenbytes.de" target=
=3D"_blank">stefan.eissing@greenbytes.de</a>&gt;</span> wrote:<br><blockquo=
te class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc so=
lid;padding-left:1ex">Implemented in r1698116. Will add to core-protocols p=
atch now.<br>
<br>
Reviewers: This is a clarification of the protocols hook API without any co=
de changes in core.<br>
<div class=3D"HOEnZb"><div class=3D"h5"><br>
&gt; Am 26.08.2015 um 18:39 schrieb Edward Lu &lt;<a href=3D"mailto:chaosed=
0@gmail.com">chaosed0@gmail.com</a>&gt;:<br>
&gt;<br>
&gt; Yes, that&#39;s right - the toolkit does itself decide which protocol =
is used. However, it decides based on the order of the protocols we pass to=
 it; that is, it will find the first protocol in the list supported by the =
client and negotiate it. We will order the list ourselves according to Prot=
ocols and ProtocolsHonorOrder.<br>
&gt;<br>
&gt; The general structure of this toolkit&#39;s API is quite different Ope=
nSSL&#39;s - it&#39;s not callback-based, all we do is pass it a bunch of p=
arameters and then tell it to go ahead with the handshake. I think that may=
 have influenced this API more than NPN.<br>
&gt;<br>
&gt;<br>
&gt; On Wed, Aug 26, 2015 at 11:20 AM, Stefan Eissing &lt;<a href=3D"mailto=
:stefan.eissing@greenbytes.de">stefan.eissing@greenbytes.de</a>&gt; wrote:<=
br>
&gt; Hmm, this was the kind of behaviour of NPN, maybe that influenced the =
API of that toolkit?<br>
&gt;<br>
&gt; I imagine that the toolkit will decide itself then what protocol is ne=
gotiated. That would mean that the directive ProtocolsHonorOrder has no lon=
ger an effect. Am I right?<br>
&gt;<br>
&gt; I do not think that is what we want.<br>
&gt;<br>
&gt; //Stefan<br>
&gt;<br>
&gt; &gt; Am 26.08.2015 um 17:02 schrieb Edward Lu &lt;<a href=3D"mailto:ch=
aosed0@gmail.com">chaosed0@gmail.com</a>&gt;:<br>
&gt; &gt;<br>
&gt; &gt; I was experimenting with the new support for declaring protocols =
for e.g. ALPN, but with an SSL toolkit other than openssl. This one wants u=
s to pass the entire list of all the protocols the server supports in advan=
ce; later, we can request the one protocol that the toolkit negotiated.<br>
&gt; &gt;<br>
&gt; &gt; It looks like the protocol_propose hook allows us to only grab a =
subset of the protocols - i.e. it expects us to have the protocol list that=
 the client sends us. I&#39;ve attached a patch which modifies the protocol=
_propose hook&#39;s interface (documentation), allowing us to get all of th=
e protocols supported by the server. I also modified h2&#39;s implementatio=
n of the hook to reflect the interface change.<br>
&gt; &gt;<br>
&gt; &gt; Let me know if anyone sees a problem.<br>
&gt; &gt;<br>
&gt; &gt; &lt;all_protos.diff&gt;<br>
&gt;<br>
&gt; &lt;green/&gt;bytes GmbH<br>
&gt; Hafenweg 16, 48155 M=C3=BCnster, Germany<br>
&gt; Phone: <a href=3D"tel:%2B49%20251%202807760" value=3D"+492512807760">+=
49 251 2807760</a>. Amtsgericht M=C3=BCnster: HRB5782<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt;<br>
<br>
&lt;green/&gt;bytes GmbH<br>
Hafenweg 16, 48155 M=C3=BCnster, Germany<br>
Phone: <a href=3D"tel:%2B49%20251%202807760" value=3D"+492512807760">+49 25=
1 2807760</a>. Amtsgericht M=C3=BCnster: HRB5782<br>
<br>
<br>
<br>
</div></div></blockquote></div><br></div>

--001a11c36216acb986051e4aba25--

From dev-return-83634-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 14:04:07 2015
Return-Path: <dev-return-83634-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C363410C6C
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 14:04:07 +0000 (UTC)
Received: (qmail 761 invoked by uid 500); 27 Aug 2015 14:04:06 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 685 invoked by uid 500); 27 Aug 2015 14:04:06 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 675 invoked by uid 99); 27 Aug 2015 14:04:06 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 14:04:06 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id CC53AEEA81
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 14:04:05 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id FtY8kK_RRI35 for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 14:03:57 +0000 (UTC)
Received: from mail-ig0-f177.google.com (mail-ig0-f177.google.com [209.85.213.177])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 1E39F2055B
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 14:03:57 +0000 (UTC)
Received: by igcse8 with SMTP id se8so68036341igc.1
        for <dev@httpd.apache.org>; Thu, 27 Aug 2015 07:03:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=lizqMVi/hg2GPaMeV9W9J64BihBIMSPyxOVeeFkeZeA=;
        b=pbbxvxPWgo8Fi/BBHV3s2QQOzwtP5q83dvecNDzJOPYyWWRWgZkGMgnyqj6XlBI9k8
         yVkRYVSyjCph8ApKTanH+/TALEMLDMb6cZPfOQbsgjMvktvI50Ul99eo/5qivdTcpaYI
         XDdZRpzzElzErRFAD0BZW8sFnK682Mj0x8aEA9U1otgSDyyyCtDrvL4ZnFQU3lkF5XmF
         t8qrqhud/kXqYMCCKpsN+JUb0+XOytWPSsxC6xsauMbHRZ6CAGMPwpVZtslQzQUGGzT9
         AoLATS3GB0kJeL2k/aVrTa51OP9B66+OzfPlephP1F98F1UX+p1bgmdDlFHwJci1tMJr
         zckg==
MIME-Version: 1.0
X-Received: by 10.50.50.205 with SMTP id e13mr16311373igo.70.1440684236553;
 Thu, 27 Aug 2015 07:03:56 -0700 (PDT)
Received: by 10.79.38.74 with HTTP; Thu, 27 Aug 2015 07:03:56 -0700 (PDT)
In-Reply-To: <616AF307-F7C8-4F31-AAC1-C783FA7DEB59@greenbytes.de>
References: <20150827112510.26DE6AC0113@hades.apache.org>
	<CAKQ1sVNcXCQRaWUCjrUHvDg34XPPvAUwFtPV0QxNWgLSPZWo6w@mail.gmail.com>
	<616AF307-F7C8-4F31-AAC1-C783FA7DEB59@greenbytes.de>
Date: Thu, 27 Aug 2015 16:03:56 +0200
Message-ID: <CAKQ1sVNZ-byyUYyY2-6NVq8+ghv2fa8XpOUbwGWQ_WhRUFZRtg@mail.gmail.com>
Subject: Re: svn commit: r1698117 - /httpd/httpd/branches/2.4.x/STATUS
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

On Thu, Aug 27, 2015 at 2:21 PM, Stefan Eissing
<stefan.eissing@greenbytes.de> wrote:
>
> The first half about http_protocol.h does. From this and all other changes, the directory modules/http2 needs to be ignored. Is that a problem?

No problem, partial merges are fine.
My bad, I thought r1698116's changes on http_protocol.h were not in
core-protocols.patch, but that's the case (maybe increasing some
number in the patch name would help when it is updated).

From dev-return-83635-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Aug 27 15:06:36 2015
Return-Path: <dev-return-83635-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5B1CB10F6F
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 27 Aug 2015 15:06:36 +0000 (UTC)
Received: (qmail 10736 invoked by uid 500); 27 Aug 2015 15:06:35 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 10668 invoked by uid 500); 27 Aug 2015 15:06:35 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 10658 invoked by uid 99); 27 Aug 2015 15:06:35 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Aug 2015 15:06:35 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id DF1A918034C
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 15:06:34 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.998
X-Spam-Level: **
X-Spam-Status: No, score=2.998 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001]
	autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id tK-Y3VxMUj_9 for <dev@httpd.apache.org>;
	Thu, 27 Aug 2015 15:06:33 +0000 (UTC)
Received: from mail-io0-f177.google.com (mail-io0-f177.google.com [209.85.223.177])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 587E525780
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 15:06:33 +0000 (UTC)
Received: by iods203 with SMTP id s203so60386946iod.0
        for <dev@httpd.apache.org>; Thu, 27 Aug 2015 08:06:32 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=JwNgzu5Fg82XC92tMfEVuzUSTT6NCGgJOPSo2GHPwYU=;
        b=JB3Mo55nvod6aw1LsnLZXrVlpKQumj3esA9p8jNlQRwnbYf7IZHxlVW+4D7ZNaJlAj
         zZ+NV4lKJp6ly7cJETaWS4a8Cg7/XyLoBpojpHhMEIC2Wi31Zg9oZUpfZSc5WkMK4MqS
         79EODENLrI8CRZF2ecTxJejVBPjaI2HlAf96jjfnrkBwy97P3jH5C5acLEIGQlbh9Or2
         7CHhQK7IE+fgDlsfRJLdRjWhLck2cLjWKz0SckbLkIEhAVkdGYiI0mEAJKKdOq3YW4Zt
         m8cR+lEt44Yh+0b5eOhyHb3u34cOJIXp7r6fHHj/fYCgqcrp5dEiYqedRajTJSoiyMCh
         2enA==
X-Gm-Message-State: ALoCoQkU0rQVCk3xsPrNXaAvTf0CtpUh4Tzm694g522x2ejfrwfIJLVAjl1BYHe/DI5+/pROSsQb
MIME-Version: 1.0
X-Received: by 10.107.32.72 with SMTP id g69mr9435882iog.86.1440687992237;
 Thu, 27 Aug 2015 08:06:32 -0700 (PDT)
Received: by 10.107.16.8 with HTTP; Thu, 27 Aug 2015 08:06:32 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
Received: by 10.107.16.8 with HTTP; Thu, 27 Aug 2015 08:06:32 -0700 (PDT)
In-Reply-To: <20150827121400.0E35EAC0113@hades.apache.org>
References: <20150827121400.0E35EAC0113@hades.apache.org>
Date: Thu, 27 Aug 2015 10:06:32 -0500
Message-ID: <CACsi252Rmd2qLM-i1ro5qQeUT-P+3k+CNZtECqhb5Kv+9w1Ckg@mail.gmail.com>
Subject: Re: svn commit: r1698133 - in /httpd/httpd/trunk: include/httpd.h
 modules/http2/h2_switch.c server/protocol.c server/util.c
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1140aebe02a1aa051e4c50b3

--001a1140aebe02a1aa051e4c50b3
Content-Type: text/plain; charset=UTF-8

On Aug 27, 2015 7:14 AM, <icing@apache.org> wrote:
>
> Author: icing
> Date: Thu Aug 27 12:13:59 2015
> New Revision: 1698133
>
> URL: http://svn.apache.org/r1698133
> Log:
> giving ap_array_index a start parameter, adding ap_array_contains
>

>   */
> -AP_DECLARE(int) ap_array_index(const apr_array_header_t *array, const
char *s);
> +AP_DECLARE(int) ap_array_index(const apr_array_header_t *array,
> +                               const char *s,
> +                               apr_size_t start);

You want the type of rv of _index to correspond to the start input to rv,
no?  E.g.

int n = -1, count = 0;
while ((n = ap_array_index(arr, findtag, n + 1)) >= 0)
    ++count;

sizeof(int) does not have to equal sizeof(apr_size_t).  But for indexes I
believe it's fine.  The alternative is apr_ssize_t for both start arg and
rv.

--001a1140aebe02a1aa051e4c50b3
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<p dir=3D"ltr"><br>
On Aug 27, 2015 7:14 AM, &lt;<a href=3D"mailto:icing@apache.org">icing@apac=
he.org</a>&gt; wrote:<br>
&gt;<br>
&gt; Author: icing<br>
&gt; Date: Thu Aug 27 12:13:59 2015<br>
&gt; New Revision: 1698133<br>
&gt;<br>
&gt; URL: <a href=3D"http://svn.apache.org/r1698133">http://svn.apache.org/=
r1698133</a><br>
&gt; Log:<br>
&gt; giving ap_array_index a start parameter, adding ap_array_contains<br>
&gt;</p>
<p dir=3D"ltr">&gt; =C2=A0 */<br>
&gt; -AP_DECLARE(int) ap_array_index(const apr_array_header_t *array, const=
 char *s);<br>
&gt; +AP_DECLARE(int) ap_array_index(const apr_array_header_t *array,<br>
&gt; +=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0const char *s,<br>
&gt; +=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0apr_size_t start);</p>
<p dir=3D"ltr">You want the type of rv of _index to correspond to the start=
 input to rv, no?=C2=A0 E.g.</p>
<p dir=3D"ltr">int n =3D -1, count =3D 0;<br>
while ((n =3D ap_array_index(arr, findtag, n + 1)) &gt;=3D 0)<br>
=C2=A0=C2=A0=C2=A0 ++count;</p>
<p dir=3D"ltr">sizeof(int) does not have to equal sizeof(apr_size_t).=C2=A0=
 But for indexes I believe it&#39;s fine.=C2=A0 The alternative is apr_ssiz=
e_t for both start arg and rv.</p>

--001a1140aebe02a1aa051e4c50b3--

From dev-return-83636-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 28 01:38:03 2015
Return-Path: <dev-return-83636-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 78ED4100C8
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 28 Aug 2015 01:38:03 +0000 (UTC)
Received: (qmail 28009 invoked by uid 500); 28 Aug 2015 01:38:03 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 27945 invoked by uid 500); 28 Aug 2015 01:38:03 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 27935 invoked by uid 99); 28 Aug 2015 01:38:03 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Aug 2015 01:38:03 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 933BF181799
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 01:38:02 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.9
X-Spam-Level: **
X-Spam-Status: No, score=2.9 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, RCVD_IN_MSPIKE_H2=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=gbiv.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id JdddKGWIATt9 for <dev@httpd.apache.org>;
	Fri, 28 Aug 2015 01:37:54 +0000 (UTC)
Received: from homiemail-a104.g.dreamhost.com (sub4.mail.dreamhost.com [69.163.253.135])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTP id 70A8025775
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 01:37:53 +0000 (UTC)
Received: from homiemail-a104.g.dreamhost.com (localhost [127.0.0.1])
	by homiemail-a104.g.dreamhost.com (Postfix) with ESMTP id 449602004F31A
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 18:37:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed; d=gbiv.com; h=from
	:content-type:message-id:mime-version:subject:date:references:to
	:in-reply-to; s=gbiv.com; bh=rQ/tBgVglq//47HpLe+cbKwtkQQ=; b=GQu
	LpDpZH6V/N1vD9PVSPd8DtTmCf7/g7eOqF6OFVd51X2/qi2QrBxnMYPGLHfKF14p
	PUBgDquA+DiEIa2L5vu6L1C1kHdJUkPJxOEVBoz1KS3GOrhsxcsxamkXvvWQLmG5
	/UFivhxh5yvkPIl55Lr7zfs0G+JzRk6xXq916RsM=
Received: from [192.168.1.2] (ip68-228-83-124.oc.oc.cox.net [68.228.83.124])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	(Authenticated sender: fielding@gbiv.com)
	by homiemail-a104.g.dreamhost.com (Postfix) with ESMTPSA id 2B3582004F308
	for <dev@httpd.apache.org>; Thu, 27 Aug 2015 18:37:45 -0700 (PDT)
From: "Roy T. Fielding" <fielding@gbiv.com>
Content-Type: multipart/alternative; boundary="Apple-Mail=_B9CF1517-627B-470C-B3E2-FE6266F0D366"
Message-Id: <F615D150-BF52-44A5-9EDF-806C9B65B369@gbiv.com>
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: HTTP_MISDIRECTED_REQUEST
Date: Thu, 27 Aug 2015 18:37:45 -0700
References: <CACsi253pEfeboS=eiQj=J=GGPXzSJnyhcDXRR8Ue-39FSv+ncw@mail.gmail.com>
To: dev@httpd.apache.org
In-Reply-To: <CACsi253pEfeboS=eiQj=J=GGPXzSJnyhcDXRR8Ue-39FSv+ncw@mail.gmail.com>
X-Mailer: Apple Mail (2.2104)


--Apple-Mail=_B9CF1517-627B-470C-B3E2-FE6266F0D366
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

> On Aug 26, 2015, at 3:15 PM, William A Rowe Jr <wrowe@rowe-clan.net =
<mailto:wrowe@rowe-clan.net>> wrote:
>=20
> Should this exception have a protocol version guard for HTTP/2.0 =
requests, and leave the response as HTTP_BAD_REQUEST for HTTP/1.1 and =
earlier?
>=20
> @@ -203,6 +204,9 @@
>                  ap_log_error(APLOG_MARK, APLOG_ERR, 0, r->server, =
APLOGNO(02032)
>                              "Hostname %s provided via SNI and =
hostname %s provided"
>                              " via HTTP are different", servername, =
host);
> +                if (r->connection->keepalives > 0) {
> +                    return HTTP_MISDIRECTED_REQUEST;
> +                }
>                  return HTTP_BAD_REQUEST;
>              }
>          }

IIRC, it is applicable to HTTP/1.1 as well. Think misdirected requests =
containing
an absolute request URI that points to some other server.  I don't think =
the conditional
is needed at all -- just return HTTP_MISDIRECTED_REQUEST.

Hmm, I wonder how this impacts Google's desire to allow multiple hosts =
to reuse
the same SPDY connection ... was that dropped for h2?

....Roy

--Apple-Mail=_B9CF1517-627B-470C-B3E2-FE6266F0D366
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=us-ascii

<html><body style=3D"word-wrap: break-word; -webkit-nbsp-mode: space; =
-webkit-line-break: after-white-space;" class=3D""><div class=3D"" =
style=3D"font-family: Palatino-Roman;"><div class=3D""><blockquote =
type=3D"cite" class=3D""><div class=3D"">On Aug 26, 2015, at 3:15 PM, =
William A Rowe Jr &lt;<a href=3D"mailto:wrowe@rowe-clan.net" =
class=3D"">wrowe@rowe-clan.net</a>&gt; wrote:</div><br =
class=3D"Apple-interchange-newline"><div class=3D""><div dir=3D"ltr" =
class=3D"">Should this exception have a protocol version guard for =
HTTP/2.0 requests, and leave the response as HTTP_BAD_REQUEST for =
HTTP/1.1 and earlier?<div class=3D""><br class=3D""></div><div =
class=3D""><pre class=3D"">@@ -203,6 +204,9 @@
                 ap_log_error(APLOG_MARK, APLOG_ERR, 0, r-&gt;server, =
APLOGNO(02032)
                             "Hostname %s provided via SNI and hostname =
%s provided"
                             " via HTTP are different", servername, =
host);
+                if (r-&gt;connection-&gt;keepalives &gt; 0) {
+                    return HTTP_MISDIRECTED_REQUEST;
+                }
                 return HTTP_BAD_REQUEST;
             }
         }</pre></div></div></div></blockquote></div></div><div =
class=3D""><span style=3D"font-family: Palatino-Roman;" class=3D"">IIRC, =
it is applicable to HTTP/1.1 as well. Think misdirected requests =
containing</span><div class=3D"" style=3D"font-family: =
Palatino-Roman;">an absolute request URI that points to some other =
server. &nbsp;I don't think the conditional</div><div class=3D"" =
style=3D"font-family: Palatino-Roman;">is needed at all -- just return =
HTTP_MISDIRECTED_REQUEST.</div><div class=3D"" style=3D"font-family: =
Palatino-Roman;"><br class=3D""></div><div class=3D"" =
style=3D"font-family: Palatino-Roman;">Hmm, I wonder how this impacts =
Google's desire to allow multiple hosts to reuse</div><div class=3D"" =
style=3D"font-family: Palatino-Roman;">the same SPDY connection ... was =
that dropped for h2?</div><div class=3D"" style=3D"font-family: =
Palatino-Roman;"><br class=3D""></div><div class=3D"" =
style=3D"font-family: Palatino-Roman;">....Roy</div><div class=3D"" =
style=3D"font-family: Palatino-Roman;"><div class=3D""><blockquote =
type=3D"cite" class=3D""></blockquote></div></div></div></body></html>=

--Apple-Mail=_B9CF1517-627B-470C-B3E2-FE6266F0D366--

From dev-return-83637-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 28 07:32:23 2015
Return-Path: <dev-return-83637-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6C77A10AC4
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 28 Aug 2015 07:32:23 +0000 (UTC)
Received: (qmail 98260 invoked by uid 500); 28 Aug 2015 07:32:22 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 98176 invoked by uid 500); 28 Aug 2015 07:32:22 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 98166 invoked by uid 99); 28 Aug 2015 07:32:22 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Aug 2015 07:32:22 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 0F8D11AB001
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 07:32:22 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id sqvpjf86Yzda for <dev@httpd.apache.org>;
	Fri, 28 Aug 2015 07:32:14 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 2245D20647
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 07:32:13 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 3AC3215A0535
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 09:32:06 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: HTTP_MISDIRECTED_REQUEST
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <F615D150-BF52-44A5-9EDF-806C9B65B369@gbiv.com>
Date: Fri, 28 Aug 2015 09:32:05 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <5D0F0E94-1FCF-4E8A-9399-5A9D626E3432@greenbytes.de>
References: <CACsi253pEfeboS=eiQj=J=GGPXzSJnyhcDXRR8Ue-39FSv+ncw@mail.gmail.com> <F615D150-BF52-44A5-9EDF-806C9B65B369@gbiv.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)


> Am 28.08.2015 um 03:37 schrieb Roy T. Fielding <fielding@gbiv.com>:
>> +                if (r->connection->keepalives > 0) {
>> +                    return HTTP_MISDIRECTED_REQUEST;
>> +                }
>>                  return HTTP_BAD_REQUEST;
>>              }
>>          }
>>=20
> IIRC, it is applicable to HTTP/1.1 as well. Think misdirected requests =
containing
> an absolute request URI that points to some other server.  I don't =
think the conditional
> is needed at all -- just return HTTP_MISDIRECTED_REQUEST.

Thanks for clarifying this.

> Hmm, I wonder how this impacts Google's desire to allow multiple hosts =
to reuse
> the same SPDY connection ... was that dropped for h2?

It wasn't. Our implementation currently just goes the easy way. It needs =
to check that server/vhost from request and SNI indeed use the same =
certificate and if not, maybe even if altnames/wildcards match. But I am =
not sure that is a good idea.

Maybe I get time today to look into this...

//Stefan

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83638-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 28 08:32:16 2015
Return-Path: <dev-return-83638-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C64BF10CDC
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 28 Aug 2015 08:32:16 +0000 (UTC)
Received: (qmail 99118 invoked by uid 500); 28 Aug 2015 08:32:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 99051 invoked by uid 500); 28 Aug 2015 08:32:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 99041 invoked by uid 99); 28 Aug 2015 08:32:16 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Aug 2015 08:32:16 +0000
Received: from gauss.localdomain (v4-861345e7.pool.vitroconnect.de [134.19.69.231])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPSA id 041041A0175
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 08:32:15 +0000 (UTC)
Received: from [IPv6:::1] (localhost [IPv6:::1])
	by gauss.localdomain (Postfix) with ESMTP id 68C1C1B8
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 10:32:14 +0200 (CEST)
Message-ID: <55E01C8E.9020605@apache.org>
Date: Fri, 28 Aug 2015 10:32:14 +0200
From: Ruediger Pluem <rpluem@apache.org>
User-Agent: Mozilla/5.0 (X11; Linux i686 on x86_64; rv:36.0) Gecko/20100101 Firefox/36.0 SeaMonkey/2.33.1
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: HTTP_MISDIRECTED_REQUEST
References: <CACsi253pEfeboS=eiQj=J=GGPXzSJnyhcDXRR8Ue-39FSv+ncw@mail.gmail.com> <F615D150-BF52-44A5-9EDF-806C9B65B369@gbiv.com> <5D0F0E94-1FCF-4E8A-9399-5A9D626E3432@greenbytes.de>
In-Reply-To: <5D0F0E94-1FCF-4E8A-9399-5A9D626E3432@greenbytes.de>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit



On 08/28/2015 09:32 AM, Stefan Eissing wrote:
> 
>> Am 28.08.2015 um 03:37 schrieb Roy T. Fielding <fielding@gbiv.com>:
>>> +                if (r->connection->keepalives > 0) {
>>> +                    return HTTP_MISDIRECTED_REQUEST;
>>> +                }
>>>                  return HTTP_BAD_REQUEST;
>>>              }
>>>          }
>>>
>> IIRC, it is applicable to HTTP/1.1 as well. Think misdirected requests containing
>> an absolute request URI that points to some other server.  I don't think the conditional
>> is needed at all -- just return HTTP_MISDIRECTED_REQUEST.
> 
> Thanks for clarifying this.
> 
>> Hmm, I wonder how this impacts Google's desire to allow multiple hosts to reuse
>> the same SPDY connection ... was that dropped for h2?
> 
> It wasn't. Our implementation currently just goes the easy way. It needs to check that server/vhost from request and SNI indeed use the same certificate and if not, maybe even if altnames/wildcards match. But I am not sure that is a good idea.

The issue is a little bit more complex. You need to ensure that the server/vhost from the request is using the same SSL
parameters as the SNI host like protocols, ciphers, etc. Otherwise you would need to renegotiate. And as far as I
remember some parameters are not renegotiable. See comments above this code.

Regards

Rüdiger

From dev-return-83639-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 28 08:35:07 2015
Return-Path: <dev-return-83639-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8130710CF0
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 28 Aug 2015 08:35:07 +0000 (UTC)
Received: (qmail 3667 invoked by uid 500); 28 Aug 2015 08:35:07 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 3594 invoked by uid 500); 28 Aug 2015 08:35:07 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 3584 invoked by uid 99); 28 Aug 2015 08:35:06 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Aug 2015 08:35:06 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 973A9C028F
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 08:35:06 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id ZD13lPJ72GhV for <dev@httpd.apache.org>;
	Fri, 28 Aug 2015 08:35:05 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 0CEEF20F6D
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 08:35:05 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 2C6EF15A0722
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 10:35:02 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: HTTP_MISDIRECTED_REQUEST
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <55E01C8E.9020605@apache.org>
Date: Fri, 28 Aug 2015 10:35:02 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <5D662E1F-34DB-4FBB-84AE-D62F9E92E236@greenbytes.de>
References: <CACsi253pEfeboS=eiQj=J=GGPXzSJnyhcDXRR8Ue-39FSv+ncw@mail.gmail.com> <F615D150-BF52-44A5-9EDF-806C9B65B369@gbiv.com> <5D0F0E94-1FCF-4E8A-9399-5A9D626E3432@greenbytes.de> <55E01C8E.9020605@apache.org>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)


> Am 28.08.2015 um 10:32 schrieb Ruediger Pluem <rpluem@apache.org>:
> On 08/28/2015 09:32 AM, Stefan Eissing wrote:
>>=20
>>> Am 28.08.2015 um 03:37 schrieb Roy T. Fielding <fielding@gbiv.com>:
>>>> +                if (r->connection->keepalives > 0) {
>>>> +                    return HTTP_MISDIRECTED_REQUEST;
>>>> +                }
>>>>                 return HTTP_BAD_REQUEST;
>>>>             }
>>>>         }
>>>>=20
>>> IIRC, it is applicable to HTTP/1.1 as well. Think misdirected =
requests containing
>>> an absolute request URI that points to some other server.  I don't =
think the conditional
>>> is needed at all -- just return HTTP_MISDIRECTED_REQUEST.
>>=20
>> Thanks for clarifying this.
>>=20
>>> Hmm, I wonder how this impacts Google's desire to allow multiple =
hosts to reuse
>>> the same SPDY connection ... was that dropped for h2?
>>=20
>> It wasn't. Our implementation currently just goes the easy way. It =
needs to check that server/vhost from request and SNI indeed use the =
same certificate and if not, maybe even if altnames/wildcards match. But =
I am not sure that is a good idea.
>=20
> The issue is a little bit more complex. You need to ensure that the =
server/vhost from the request is using the same SSL
> parameters as the SNI host like protocols, ciphers, etc. Otherwise you =
would need to renegotiate. And as far as I
> remember some parameters are not renegotiable. See comments above this =
code.

Hmm, I see. Since you know this more intimate than me: is checking the =
mod_ssl config of both for equality of certain members the way to solve =
this? It should either have the individual settings or the merged ones =
from the base server, right?

//Stefan

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83640-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 28 08:55:00 2015
Return-Path: <dev-return-83640-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9CBBB10D80
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 28 Aug 2015 08:55:00 +0000 (UTC)
Received: (qmail 34750 invoked by uid 500); 28 Aug 2015 08:55:00 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 34678 invoked by uid 500); 28 Aug 2015 08:55:00 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 34669 invoked by uid 99); 28 Aug 2015 08:55:00 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Aug 2015 08:55:00 +0000
Received: from gauss.localdomain (v4-861345e7.pool.vitroconnect.de [134.19.69.231])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPSA id 8EABC1A01DA
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 08:54:59 +0000 (UTC)
Received: from [IPv6:::1] (localhost [IPv6:::1])
	by gauss.localdomain (Postfix) with ESMTP id AD1FA1B8
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 10:54:59 +0200 (CEST)
Message-ID: <55E021E3.5050109@apache.org>
Date: Fri, 28 Aug 2015 10:54:59 +0200
From: Ruediger Pluem <rpluem@apache.org>
User-Agent: Mozilla/5.0 (X11; Linux i686 on x86_64; rv:36.0) Gecko/20100101 Firefox/36.0 SeaMonkey/2.33.1
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: HTTP_MISDIRECTED_REQUEST
References: <CACsi253pEfeboS=eiQj=J=GGPXzSJnyhcDXRR8Ue-39FSv+ncw@mail.gmail.com> <F615D150-BF52-44A5-9EDF-806C9B65B369@gbiv.com> <5D0F0E94-1FCF-4E8A-9399-5A9D626E3432@greenbytes.de> <55E01C8E.9020605@apache.org> <5D662E1F-34DB-4FBB-84AE-D62F9E92E236@greenbytes.de>
In-Reply-To: <5D662E1F-34DB-4FBB-84AE-D62F9E92E236@greenbytes.de>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit



On 08/28/2015 10:35 AM, Stefan Eissing wrote:
> 
>> Am 28.08.2015 um 10:32 schrieb Ruediger Pluem <rpluem@apache.org>:
>> On 08/28/2015 09:32 AM, Stefan Eissing wrote:
>>>
>>>> Am 28.08.2015 um 03:37 schrieb Roy T. Fielding <fielding@gbiv.com>:
>>>>> +                if (r->connection->keepalives > 0) {
>>>>> +                    return HTTP_MISDIRECTED_REQUEST;
>>>>> +                }
>>>>>                 return HTTP_BAD_REQUEST;
>>>>>             }
>>>>>         }
>>>>>
>>>> IIRC, it is applicable to HTTP/1.1 as well. Think misdirected requests containing
>>>> an absolute request URI that points to some other server.  I don't think the conditional
>>>> is needed at all -- just return HTTP_MISDIRECTED_REQUEST.
>>>
>>> Thanks for clarifying this.
>>>
>>>> Hmm, I wonder how this impacts Google's desire to allow multiple hosts to reuse
>>>> the same SPDY connection ... was that dropped for h2?
>>>
>>> It wasn't. Our implementation currently just goes the easy way. It needs to check that server/vhost from request and SNI indeed use the same certificate and if not, maybe even if altnames/wildcards match. But I am not sure that is a good idea.
>>
>> The issue is a little bit more complex. You need to ensure that the server/vhost from the request is using the same SSL
>> parameters as the SNI host like protocols, ciphers, etc. Otherwise you would need to renegotiate. And as far as I
>> remember some parameters are not renegotiable. See comments above this code.
> 
> Hmm, I see. Since you know this more intimate than me: is checking the mod_ssl config of both for equality of certain members the way to solve this? It should either have the individual settings or the merged ones from the base server, right?

Interesting approach. I hope our SSL experts will chime in :-).
And yes the configs should have the individual settings or the merged ones from the base server which could be the
default values.

Regards

Rüdiger


> 
> 
> 

From dev-return-83641-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 28 12:54:27 2015
Return-Path: <dev-return-83641-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9055418585
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 28 Aug 2015 12:54:27 +0000 (UTC)
Received: (qmail 802 invoked by uid 500); 28 Aug 2015 12:54:27 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 730 invoked by uid 500); 28 Aug 2015 12:54:27 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 712 invoked by uid 99); 28 Aug 2015 12:54:27 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Aug 2015 12:54:27 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id A14FCC06B6
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 12:54:26 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.007
X-Spam-Level:
X-Spam-Status: No, score=-0.007 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id GnCsutZI7l9g for <dev@httpd.apache.org>;
	Fri, 28 Aug 2015 12:54:25 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id CB7E221597
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 12:54:24 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 6ABE815A05C8
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 14:54:17 +0200 (CEST)
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Subject: regression in r1698239
Message-Id: <ED1FA0B4-4CB8-44F0-A232-80A21A4AA857@greenbytes.de>
Date: Fri, 28 Aug 2015 14:54:16 +0200
To: dev@httpd.apache.org
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
X-Mailer: Apple Mail (2.2104)

Change 1698239 brings t/apache/pr17629.t into an endless loop now. I =
built on r1698322 in trunk (OSX + Ubuntu).

I revert the change now. A certain "covener" might want to look into =
this. ;-)

Cheers,

  Stefan

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83642-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 28 12:55:42 2015
Return-Path: <dev-return-83642-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1637C18594
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 28 Aug 2015 12:55:42 +0000 (UTC)
Received: (qmail 4502 invoked by uid 500); 28 Aug 2015 12:55:41 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 4436 invoked by uid 500); 28 Aug 2015 12:55:41 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 4426 invoked by uid 99); 28 Aug 2015 12:55:41 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Aug 2015 12:55:41 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 2D057C06B6
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 12:55:41 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 1Ao-NCz8PSLA for <dev@httpd.apache.org>;
	Fri, 28 Aug 2015 12:55:35 +0000 (UTC)
Received: from mail-yk0-f181.google.com (mail-yk0-f181.google.com [209.85.160.181])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 5DE302578D
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 12:55:34 +0000 (UTC)
Received: by ykek5 with SMTP id k5so17149yke.3
        for <dev@httpd.apache.org>; Fri, 28 Aug 2015 05:55:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=duqKshi7Y49PIQNNZnmf19VQSbN7TRG9QINXLC7aXZE=;
        b=KnOE2FOroASUFvDacasfXHmUm93UI1IFC1ZN+i1f+FNR57OWIQ2SFktvGHDIC67UQZ
         yy+mhXOXW/+YJuDsSEUsSTGtHnoWFtwOOuKEjyQUjwTUM/6XoImHxTgZ3vUVJUhlMizw
         mJLQNswc24Ipw9SUzQMJerg+Aozv0GW3LHQP01m+GEoTrOWlLIsp1eopQ8wHDwWg3AnX
         1sJSNvFjxWkyoqUObGxppU1bM/zDzEzTai1cbteXHXovcNikN0jAltELYndSIi/9xK/w
         VK5RgYRiWWPwaMhHXb89AtBlyLw3bVtg4KzuSCrhb45AcdfVAUlLbywqEYSHcmAR1me9
         VTBg==
MIME-Version: 1.0
X-Received: by 10.170.165.193 with SMTP id h184mr8625811ykd.1.1440766533284;
 Fri, 28 Aug 2015 05:55:33 -0700 (PDT)
Received: by 10.37.207.66 with HTTP; Fri, 28 Aug 2015 05:55:33 -0700 (PDT)
In-Reply-To: <ED1FA0B4-4CB8-44F0-A232-80A21A4AA857@greenbytes.de>
References: <ED1FA0B4-4CB8-44F0-A232-80A21A4AA857@greenbytes.de>
Date: Fri, 28 Aug 2015 08:55:33 -0400
Message-ID: <CALK=YjPUBr0f9ub1GHZb_abJ=wgLk0MrJbA+2yrjBnpqM9Wu4g@mail.gmail.com>
Subject: Re: regression in r1698239
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Fri, Aug 28, 2015 at 8:54 AM, Stefan Eissing
<stefan.eissing@greenbytes.de> wrote:
> Change 1698239 brings t/apache/pr17629.t into an endless loop now. I built on r1698322 in trunk (OSX + Ubuntu).
>
> I revert the change now. A certain "covener" might want to look into this. ;-)
>
> Cheers,


Thanks, go ahead and revert.

From dev-return-83643-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 28 13:14:25 2015
Return-Path: <dev-return-83643-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E8AC118658
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 28 Aug 2015 13:14:24 +0000 (UTC)
Received: (qmail 52639 invoked by uid 500); 28 Aug 2015 13:14:24 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 52565 invoked by uid 500); 28 Aug 2015 13:14:24 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 52555 invoked by uid 99); 28 Aug 2015 13:14:24 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Aug 2015 13:14:24 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 06523EF1BB
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 13:14:24 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id iz-_5UsYZLTA for <dev@httpd.apache.org>;
	Fri, 28 Aug 2015 13:14:18 +0000 (UTC)
Received: from mail-yk0-f169.google.com (mail-yk0-f169.google.com [209.85.160.169])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id B07E942B42
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 13:14:17 +0000 (UTC)
Received: by ykek5 with SMTP id k5so591796yke.3
        for <dev@httpd.apache.org>; Fri, 28 Aug 2015 06:14:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=PWUF7CXO6q2MuZUTmqQ8cNtpNMxI7pJdfu2TOEQew2g=;
        b=ModYQACCC2gApCdmZW/aXNKjRCzGjWKGcQaDv+ef4Z6kWW3RKopeDAIQcKmRflWICc
         GZZtWRREH9u0/q1nyFwrJheK0fwBYXCtu2rnZqgFZ5pSww0xkL+iXz1f811+qz8mQWPy
         bdL4TcsapNMkYiODhtpcTDa6oEHQAAyYDBSZ3P+U9HEtJ8Q7bdrpws9venihAIwkhCB3
         m5gqWZkiiN9ILg5zK50wPEgAOvzo5suTOHBZ73l8HGTT2zTpFSUhpJv2TW0OIpta/S3z
         R3RGuxPdgxxPgW+N75AZACkXWrUdbZ0Mql7bnOCNj3EjitY9nfkeuPw9jCeJ6I7ixmfp
         yoxg==
MIME-Version: 1.0
X-Received: by 10.170.53.20 with SMTP id 20mr7459363ykv.99.1440767657443; Fri,
 28 Aug 2015 06:14:17 -0700 (PDT)
Received: by 10.37.207.66 with HTTP; Fri, 28 Aug 2015 06:14:17 -0700 (PDT)
In-Reply-To: <CALK=YjPUBr0f9ub1GHZb_abJ=wgLk0MrJbA+2yrjBnpqM9Wu4g@mail.gmail.com>
References: <ED1FA0B4-4CB8-44F0-A232-80A21A4AA857@greenbytes.de>
	<CALK=YjPUBr0f9ub1GHZb_abJ=wgLk0MrJbA+2yrjBnpqM9Wu4g@mail.gmail.com>
Date: Fri, 28 Aug 2015 09:14:17 -0400
Message-ID: <CALK=YjNAZ3HbyzWeeWePdkXVpeK8Sq_Y71o9tfO6ymCf+sHj9g@mail.gmail.com>
Subject: Re: regression in r1698239
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

Thanks -- back in 1698334 with loops that actually move.

On Fri, Aug 28, 2015 at 8:55 AM, Eric Covener <covener@gmail.com> wrote:
> On Fri, Aug 28, 2015 at 8:54 AM, Stefan Eissing
> <stefan.eissing@greenbytes.de> wrote:
>> Change 1698239 brings t/apache/pr17629.t into an endless loop now. I built on r1698322 in trunk (OSX + Ubuntu).
>>
>> I revert the change now. A certain "covener" might want to look into this. ;-)
>>
>> Cheers,
>
>
> Thanks, go ahead and revert.



-- 
Eric Covener
covener@gmail.com

From dev-return-83644-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 28 13:27:13 2015
Return-Path: <dev-return-83644-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B9CF4186EC
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 28 Aug 2015 13:27:13 +0000 (UTC)
Received: (qmail 89496 invoked by uid 500); 28 Aug 2015 13:27:13 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 89432 invoked by uid 500); 28 Aug 2015 13:27:13 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 89422 invoked by uid 99); 28 Aug 2015 13:27:13 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Aug 2015 13:27:13 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id CCAA8181939
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 13:27:12 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id nso0LDGShu8J for <dev@httpd.apache.org>;
	Fri, 28 Aug 2015 13:27:05 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id AB31F42B42
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 13:27:04 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 0BFD015A06E3
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 15:26:56 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: HTTP_MISDIRECTED_REQUEST
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <55E021E3.5050109@apache.org>
Date: Fri, 28 Aug 2015 15:26:56 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <14A7155C-44D2-4BCA-BC2F-17254693A134@greenbytes.de>
References: <CACsi253pEfeboS=eiQj=J=GGPXzSJnyhcDXRR8Ue-39FSv+ncw@mail.gmail.com> <F615D150-BF52-44A5-9EDF-806C9B65B369@gbiv.com> <5D0F0E94-1FCF-4E8A-9399-5A9D626E3432@greenbytes.de> <55E01C8E.9020605@apache.org> <5D662E1F-34DB-4FBB-84AE-D62F9E92E236@greenbytes.de> <55E021E3.5050109@apache.org>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

As long as we are waiting for the *real* experts to chime in, I took a =
first stab
refactoring the code a tiny bit and adding an additional check against =
the selected
server_rec.

If the r->hostname does not match the SNI servername, the r->hostname is =
used to
check if it matches the sslconn->server. That catches the case where a =
vhost has
ServerAlias or even wildcard and the client somehow got the notion to =
use the TLS
connection for such hosts as well. I think this is risk free as the same =
server_rec=20
should be selected on a new connection with r->hostname in SNI.

(It could be that the match is not the only one and that a vhost in the =
list *before* the
current one would be selected. Hmmm...)

Where I want to go with this the following test:

  if (r->hostname does not match SNI) {
     server_rec *rs =3D ssl_find_vhost_for(r->hostname);
     if (sslconn->server !=3D rs) {
        SSLSrvConfigRec *conncfg =3D mySrvFromConn(c);
        SSLSrvConfigRec *reqcfg =3D mySrvConfig(r->server);
	if (!compatibleSslParams(conncfg, reqcfg)) {
            return HTTP_MISDIRECTED_REQUEST;
        }
     }
  }
  /* all fine, process request */

Where "compatibleSslParams" needs to be defined. I think it needs to =
match at least

SSLSrvConfigRec
 - enabled
 - cipher_server_pref
 - insecure_reneg
 - server
   - pks (complete match of everything)
   - protocol
   - cert_chain
   - stapling_*
   - srp???
   - ocsp_*
   - ssl_ctx_*???
 - strict_sni_vhost_check
 - fips
 - compression
 - session_tickets???

If this works, one could think about introducing some kind of =
"equivalence number" to speed up the checking, since in certain HTTP/2 =
setups there might be a good percentage of requests requiting this =
verification.

Cheers,

  Stefan

> Am 28.08.2015 um 10:54 schrieb Ruediger Pluem <rpluem@apache.org>:
>=20
>=20
>=20
> On 08/28/2015 10:35 AM, Stefan Eissing wrote:
>>=20
>>> Am 28.08.2015 um 10:32 schrieb Ruediger Pluem <rpluem@apache.org>:
>>> On 08/28/2015 09:32 AM, Stefan Eissing wrote:
>>>>=20
>>>>> Am 28.08.2015 um 03:37 schrieb Roy T. Fielding =
<fielding@gbiv.com>:
>>>>>> +                if (r->connection->keepalives > 0) {
>>>>>> +                    return HTTP_MISDIRECTED_REQUEST;
>>>>>> +                }
>>>>>>                return HTTP_BAD_REQUEST;
>>>>>>            }
>>>>>>        }
>>>>>>=20
>>>>> IIRC, it is applicable to HTTP/1.1 as well. Think misdirected =
requests containing
>>>>> an absolute request URI that points to some other server.  I don't =
think the conditional
>>>>> is needed at all -- just return HTTP_MISDIRECTED_REQUEST.
>>>>=20
>>>> Thanks for clarifying this.
>>>>=20
>>>>> Hmm, I wonder how this impacts Google's desire to allow multiple =
hosts to reuse
>>>>> the same SPDY connection ... was that dropped for h2?
>>>>=20
>>>> It wasn't. Our implementation currently just goes the easy way. It =
needs to check that server/vhost from request and SNI indeed use the =
same certificate and if not, maybe even if altnames/wildcards match. But =
I am not sure that is a good idea.
>>>=20
>>> The issue is a little bit more complex. You need to ensure that the =
server/vhost from the request is using the same SSL
>>> parameters as the SNI host like protocols, ciphers, etc. Otherwise =
you would need to renegotiate. And as far as I
>>> remember some parameters are not renegotiable. See comments above =
this code.
>>=20
>> Hmm, I see. Since you know this more intimate than me: is checking =
the mod_ssl config of both for equality of certain members the way to =
solve this? It should either have the individual settings or the merged =
ones from the base server, right?
>=20
> Interesting approach. I hope our SSL experts will chime in :-).
> And yes the configs should have the individual settings or the merged =
ones from the base server which could be the
> default values.
>=20
> Regards
>=20
> R=C3=BCdiger

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83645-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 28 13:32:53 2015
Return-Path: <dev-return-83645-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 04D641872D
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 28 Aug 2015 13:32:53 +0000 (UTC)
Received: (qmail 4633 invoked by uid 500); 28 Aug 2015 13:32:52 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 4561 invoked by uid 500); 28 Aug 2015 13:32:52 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 4551 invoked by uid 99); 28 Aug 2015 13:32:52 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Aug 2015 13:32:52 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 0C29FC06B6
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 13:32:52 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Z2iMyltCwYOy for <dev@httpd.apache.org>;
	Fri, 28 Aug 2015 13:32:44 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 6119E20752
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 13:32:44 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id E718315A05E0
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 15:32:42 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: regression in r1698239
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CALK=YjNAZ3HbyzWeeWePdkXVpeK8Sq_Y71o9tfO6ymCf+sHj9g@mail.gmail.com>
Date: Fri, 28 Aug 2015 15:32:42 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <1CD97435-5A6C-4FA5-9ECB-0A5F117A2276@greenbytes.de>
References: <ED1FA0B4-4CB8-44F0-A232-80A21A4AA857@greenbytes.de> <CALK=YjPUBr0f9ub1GHZb_abJ=wgLk0MrJbA+2yrjBnpqM9Wu4g@mail.gmail.com> <CALK=YjNAZ3HbyzWeeWePdkXVpeK8Sq_Y71o9tfO6ymCf+sHj9g@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

Works fine here. Thanks!

> Am 28.08.2015 um 15:14 schrieb Eric Covener <covener@gmail.com>:
>=20
> Thanks -- back in 1698334 with loops that actually move.
>=20
> On Fri, Aug 28, 2015 at 8:55 AM, Eric Covener <covener@gmail.com> =
wrote:
>> On Fri, Aug 28, 2015 at 8:54 AM, Stefan Eissing
>> <stefan.eissing@greenbytes.de> wrote:
>>> Change 1698239 brings t/apache/pr17629.t into an endless loop now. I =
built on r1698322 in trunk (OSX + Ubuntu).
>>>=20
>>> I revert the change now. A certain "covener" might want to look into =
this. ;-)
>>>=20
>>> Cheers,
>>=20
>>=20
>> Thanks, go ahead and revert.
>=20
>=20
>=20
> --=20
> Eric Covener
> covener@gmail.com

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83646-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 28 13:49:58 2015
Return-Path: <dev-return-83646-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E3CE2187C4
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 28 Aug 2015 13:49:57 +0000 (UTC)
Received: (qmail 39925 invoked by uid 500); 28 Aug 2015 13:49:57 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 39857 invoked by uid 500); 28 Aug 2015 13:49:57 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 39847 invoked by uid 99); 28 Aug 2015 13:49:56 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Aug 2015 13:49:56 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 932BA1AAF53
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 13:49:56 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id I3K6JhrBZjlX for <dev@httpd.apache.org>;
	Fri, 28 Aug 2015 13:49:50 +0000 (UTC)
Received: from mail-yk0-f169.google.com (mail-yk0-f169.google.com [209.85.160.169])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 41B5F20647
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 13:49:50 +0000 (UTC)
Received: by ykba134 with SMTP id a134so2525341ykb.1
        for <dev@httpd.apache.org>; Fri, 28 Aug 2015 06:49:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=dbn3azIDnvIb5z2CaPuJkQBCfHt4rffQKj0Fc7bqrOM=;
        b=I9hUcbItD7gRUqPy16g+6bDjJt6iS33nbzGe+U2/Gb0lfuRLNn6UF6ScHAr9T4DseK
         QtahGENeK7/goRrVWN8tvIGB7oi1oW2KlTiSTWD8fC4b2JIXb/NrJhhbnI7gYIKroj7D
         mV8ZujyFifcatACXb+LUDCo9zSQ1f6MGA8HIYPQbYXbHZdzQjh9MZaWrbPqwI3sQtsgW
         CYMivkuQE7R1a7NLWEKDbxo/zRotmO/pAXpdj1n3fpo1NjMZm2GiguN+rFJdKn8V7d09
         bYOQiOgWa8spH/vJ73osAMus+wi0ab+PqVNlTjiskgy8jhg0xlEDm1Y5Xt/2zqPGtLSR
         cc8w==
MIME-Version: 1.0
X-Received: by 10.170.134.214 with SMTP id a205mr8231880ykc.89.1440769789415;
 Fri, 28 Aug 2015 06:49:49 -0700 (PDT)
Received: by 10.37.207.66 with HTTP; Fri, 28 Aug 2015 06:49:49 -0700 (PDT)
In-Reply-To: <14A7155C-44D2-4BCA-BC2F-17254693A134@greenbytes.de>
References: <CACsi253pEfeboS=eiQj=J=GGPXzSJnyhcDXRR8Ue-39FSv+ncw@mail.gmail.com>
	<F615D150-BF52-44A5-9EDF-806C9B65B369@gbiv.com>
	<5D0F0E94-1FCF-4E8A-9399-5A9D626E3432@greenbytes.de>
	<55E01C8E.9020605@apache.org>
	<5D662E1F-34DB-4FBB-84AE-D62F9E92E236@greenbytes.de>
	<55E021E3.5050109@apache.org>
	<14A7155C-44D2-4BCA-BC2F-17254693A134@greenbytes.de>
Date: Fri, 28 Aug 2015 09:49:49 -0400
Message-ID: <CALK=YjMWtEenWe-nfiuOtj_KXQVP+s_1VmFh0qq8XgRbuU=_LQ@mail.gmail.com>
Subject: Re: HTTP_MISDIRECTED_REQUEST
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Fri, Aug 28, 2015 at 9:26 AM, Stefan Eissing
<stefan.eissing@greenbytes.de> wrote:
> If this works, one could think about introducing some kind of "equivalence number" to speed up the checking, since in certain HTTP/2 setups there might be a good percentage of requests requiting this verification.

Long term we need to block these name-based renegotiations because
we'll be at TLS1.3.  I don't know how to ween people off, but making
up an H2 requirement might be one way to ease people into it.

From dev-return-83647-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 28 17:27:55 2015
Return-Path: <dev-return-83647-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B1D70183E8
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 28 Aug 2015 17:27:55 +0000 (UTC)
Received: (qmail 15482 invoked by uid 500); 28 Aug 2015 17:27:55 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 15410 invoked by uid 500); 28 Aug 2015 17:27:55 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 15400 invoked by uid 99); 28 Aug 2015 17:27:55 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Aug 2015 17:27:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id C59E81AB0E5
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 17:27:54 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.9
X-Spam-Level: **
X-Spam-Status: No, score=2.9 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id ujKDZSZh7ng4 for <dev@httpd.apache.org>;
	Fri, 28 Aug 2015 17:27:50 +0000 (UTC)
Received: from mail-io0-f181.google.com (mail-io0-f181.google.com [209.85.223.181])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 4C3742575A
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 17:27:49 +0000 (UTC)
Received: by iofe124 with SMTP id e124so35087554iof.1
        for <dev@httpd.apache.org>; Fri, 28 Aug 2015 10:27:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=hK8gYN3BRI8YhYM1BQRMORU0ELeKLFm03Z97eYZIoHs=;
        b=WSn4+GXC4pzZQDQ9dKNjG2vUW3u7Rcs5HnctExWUD2MT0FnaU6fHROjVK7PyvTvxT5
         moY5mtUiHjLoII+sTMi+xwo7SOHq42xg9964yZaaKuzjtXAKSeflJce1yCESlr//J2f8
         HGM0ETrdNNRp5gjbkTra5Hu1br47l18ag0wilaRlA5lg6xMMQdZuCiR7juTUaiKlhHFS
         Di2UCSlVYOAGRpz5B8QJqO+Wu38gM385a1XS5wP6IxWiBdBy6osq14E9ue99v49n6slv
         QQuKx/qR2plFHB1cZxK+OH5WNCauTm75m3RQ0huPiu+aBvGSbDx+7sgvhXo1+hNnjuP1
         iYLw==
MIME-Version: 1.0
X-Received: by 10.107.26.213 with SMTP id a204mr17556318ioa.147.1440782862462;
 Fri, 28 Aug 2015 10:27:42 -0700 (PDT)
Received: by 10.36.37.18 with HTTP; Fri, 28 Aug 2015 10:27:42 -0700 (PDT)
In-Reply-To: <55A363EC.6030801@apache.org>
References: <CAKUrXK6k01WGqF8z6F3YBNbanbTaOSHbbzwSi2O3H3u03_mvUw@mail.gmail.com>
	<5454A244.6070006@velox.ch>
	<CAG5KPzypCfJ7rZVBSC6t2hqxV5=zJcBDRcQxrGVUmnuYAsU_mw@mail.gmail.com>
	<55A12E9C.6060805@velox.ch>
	<CACsi251vkwFs3Neqqf-cdF7W=WDZFGqY-L+1baWQdTfJ+OaZ6Q@mail.gmail.com>
	<55A363EC.6030801@apache.org>
Date: Fri, 28 Aug 2015 13:27:42 -0400
Message-ID: <CAKUrXK6m6BGhhP3fg_Gx9wFyWD8YV4PgmyRqMa7iv6bRLXMspw@mail.gmail.com>
Subject: Re: [RFC] Enable OCSP Stapling by default in httpd trunk
From: Jeff Trawick <trawick@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a113fe8c2b7345e051e626681

--001a113fe8c2b7345e051e626681
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Mon, Jul 13, 2015 at 3:08 AM, Ruediger Pluem <rpluem@apache.org> wrote:

>
>
> On 07/11/2015 08:55 PM, William A Rowe Jr wrote:
>
> > If you are suggesting we shouldn't change the compiled-in default, I ca=
n
> > agree, POLS (Principal Of Least Surprise).  If you are suggesting the
> default
> > config shouldn't reflect the ability to efficiently handle OCSP by
> stapling, here
> > I think we would disagree.
>
> This something I can agree with: Leave the default compiled in to off and
> in the configuration distributed by us have it
> set to on.
>
> Regards
>
> R=C3=BCdiger
>
>
As of now there's still a veto on my suggestion of enabling stapling by
default in the httpd trunk config.  Of Kaspar's justifications, I think
this is the text that remains of his clarifying post on July 11, ignoring
the license reference:

"a) by default, an HTTP server is supposed to process *incoming* requests,
not make accidental outgoing connections in addition (at least not unless
it's explicitly instructed to do so);"

(I sincerely hope I haven't misconstrued the situation or missed anything
Kaspar intended.)

Those of us in favor of enabling stapling by default for those using the
default configs wouldn't have any trouble finding opposite justifications.
For one, it is appropriate for the default config is there to enable
practices which are reasonable in most situations, and OCSP Stapling is
widely accepted as an appropriate feature for HTTP servers to enable.
Also, strictly speaking, the default config does not have SSL enabled
anyway, and after manually enabling it OCSP responses won't be fetched
unless a certificate is configured which references an OCSP responder.

While I find the "not make accidental outgoing connections" argument
compelling (though perhaps with a different word than "accidental") the
server already takes actions that cause outgoing connections to services
not explicitly configured (DNS), and these occasionally cause problems.
Looking up the values of the User and Group directives can possibly invoke
one of multiple different network services depending on the system
configuration.  But I admit that's just fishing for a counter argument.

Any suggestions for breaking the apparent impasse?

Is there a principle at stake which could be followed consistently across
disparate features in how the server behaves a) with compiled in defaults
and minimal config, or b) with default/recommended config?

If enabling stapling were more closely tied in the configuration language
to configuring a certificate, which with "SSLUseStapling On" is the user
action that makes mod_ssl talk to a responder, would that help the end
user?  (Controlling stapling parameters on a per-certificate basis is
valuable anyway since you can have multiple certificates per vhost,
possibly with different responders.)

Thanks,

Jeff
--=20
Born in Roswell... married an alien...
http://emptyhammock.com/

--001a113fe8c2b7345e051e626681
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On M=
on, Jul 13, 2015 at 3:08 AM, Ruediger Pluem <span dir=3D"ltr">&lt;<a href=
=3D"mailto:rpluem@apache.org" target=3D"_blank">rpluem@apache.org</a>&gt;</=
span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0=
px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-le=
ft-style:solid;padding-left:1ex"><span class=3D""><br>
<br>
On 07/11/2015 08:55 PM, William A Rowe Jr wrote:<br>
<br>
&gt; If you are suggesting we shouldn&#39;t change the compiled-in default,=
 I can<br>
&gt; agree, POLS (Principal Of Least Surprise).=C2=A0 If you are suggesting=
 the default<br>
&gt; config shouldn&#39;t reflect the ability to efficiently handle OCSP by=
 stapling, here<br>
&gt; I think we would disagree.<br>
<br>
</span>This something I can agree with: Leave the default compiled in to of=
f and in the configuration distributed by us have it<br>
set to on.<br>
<br>
Regards<br>
<br>
R=C3=BCdiger<br>
<br>
</blockquote></div><br>As of now there&#39;s still a veto on my suggestion =
of enabling stapling by default in the httpd trunk config.=C2=A0 Of Kaspar&=
#39;s justifications, I think this is the text that remains of his clarifyi=
ng post on July 11, ignoring the license reference:</div><div class=3D"gmai=
l_extra"><br></div><div class=3D"gmail_extra">&quot;<span style=3D"font-siz=
e:12.8000001907349px">a) by default, an HTTP=C2=A0</span><span style=3D"fon=
t-size:12.8000001907349px">server is supposed to process *incoming* request=
s, not make accidental=C2=A0</span><span style=3D"font-size:12.800000190734=
9px">outgoing connections in addition (at least not unless it&#39;s explici=
tly=C2=A0</span><span style=3D"font-size:12.8000001907349px">instructed to =
do so);&quot;</span></div><div class=3D"gmail_extra"><span style=3D"font-si=
ze:12.8000001907349px"><br></span></div><div class=3D"gmail_extra"><span st=
yle=3D"font-size:12.8000001907349px">(I sincerely hope I haven&#39;t miscon=
strued the situation or missed anything Kaspar intended.)</span></div><div =
class=3D"gmail_extra"><br></div><div class=3D"gmail_extra">Those of us in f=
avor of enabling stapling by default for those using the default configs wo=
uldn&#39;t have any trouble finding opposite justifications.=C2=A0 For one,=
 it is appropriate for the default config is there to enable practices whic=
h are reasonable in most situations, and OCSP Stapling is widely accepted a=
s an appropriate feature for HTTP servers to enable.=C2=A0 Also, strictly s=
peaking, the default config does not have SSL enabled anyway, and after man=
ually enabling it OCSP responses won&#39;t be fetched unless a certificate =
is configured which references an OCSP responder.</div><div class=3D"gmail_=
extra"><br></div><div class=3D"gmail_extra">While I find the &quot;not make=
 accidental outgoing connections&quot; argument compelling (though perhaps =
with a different word than &quot;accidental&quot;) the server already takes=
 actions that cause outgoing connections to services not explicitly configu=
red (DNS), and these occasionally cause problems.=C2=A0 Looking up the valu=
es of the User and Group directives can possibly invoke one of multiple dif=
ferent network services depending on the system configuration.=C2=A0 But I =
admit that&#39;s just fishing for a counter argument.</div><div class=3D"gm=
ail_extra"><br></div><div class=3D"gmail_extra">Any suggestions for breakin=
g the apparent impasse?</div><div class=3D"gmail_extra"><br></div><div clas=
s=3D"gmail_extra">Is there a principle at stake which could be followed con=
sistently across disparate features in how the server behaves a) with compi=
led in defaults and minimal config, or b) with default/recommended config?<=
/div><div class=3D"gmail_extra"><br></div>If enabling stapling were more cl=
osely tied in the configuration language to configuring a certificate, whic=
h with &quot;SSLUseStapling On&quot; is the user action that makes mod_ssl =
talk to a responder, would that help the end user? =C2=A0(Controlling stapl=
ing parameters on a per-certificate basis is valuable anyway since you can =
have multiple certificates per vhost, possibly with different responders.)<=
br><br><div>Thanks,<br><br>Jeff<div class=3D"gmail_extra">-- <br><div class=
=3D"gmail_signature"><div dir=3D"ltr">Born in Roswell... married an alien..=
.<br><a href=3D"http://emptyhammock.com/" target=3D"_blank">http://emptyham=
mock.com/</a><div><br></div></div></div>
</div></div></div>

--001a113fe8c2b7345e051e626681--

From dev-return-83648-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Aug 28 20:17:30 2015
Return-Path: <dev-return-83648-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EFCEB18A45
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 28 Aug 2015 20:17:29 +0000 (UTC)
Received: (qmail 58930 invoked by uid 500); 28 Aug 2015 20:17:29 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 58837 invoked by uid 500); 28 Aug 2015 20:17:29 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 58827 invoked by uid 99); 28 Aug 2015 20:17:29 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Aug 2015 20:17:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id D39C4C028F
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 20:17:28 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.357
X-Spam-Level: *
X-Spam-Status: No, score=1.357 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RDNS_DYNAMIC=0.363,
	RP_MATCHES_RCVD=-0.006, SPF_HELO_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Nbxo6YXp_UJc for <dev@httpd.apache.org>;
	Fri, 28 Aug 2015 20:17:21 +0000 (UTC)
Received: from nebula.c8h10n4o2.org.uk (nebula.c8h10n4o2.org.uk [80.68.88.207])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 3197350702
	for <dev@httpd.apache.org>; Fri, 28 Aug 2015 20:17:21 +0000 (UTC)
Received: from [81.2.91.97] (helo=[192.168.115.224])
	by nebula.c8h10n4o2.org.uk with esmtpsa (TLS1.2:ECDHE_RSA_AES_256_CBC_SHA1:256)
	(Exim 4.84)
	(envelope-from <isoma@c8h10n4o2.org.uk>)
	id 1ZVQ5I-00029v-1O
	for dev@httpd.apache.org; Fri, 28 Aug 2015 21:17:12 +0100
User-Agent: K-9 Mail for Android
In-Reply-To: <CAKUrXK6m6BGhhP3fg_Gx9wFyWD8YV4PgmyRqMa7iv6bRLXMspw@mail.gmail.com>
References: <CAKUrXK6k01WGqF8z6F3YBNbanbTaOSHbbzwSi2O3H3u03_mvUw@mail.gmail.com> <5454A244.6070006@velox.ch> <CAG5KPzypCfJ7rZVBSC6t2hqxV5=zJcBDRcQxrGVUmnuYAsU_mw@mail.gmail.com> <55A12E9C.6060805@velox.ch> <CACsi251vkwFs3Neqqf-cdF7W=WDZFGqY-L+1baWQdTfJ+OaZ6Q@mail.gmail.com> <55A363EC.6030801@apache.org> <CAKUrXK6m6BGhhP3fg_Gx9wFyWD8YV4PgmyRqMa7iv6bRLXMspw@mail.gmail.com>
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
Content-Type: text/plain;
 charset=UTF-8
Subject: Re: [RFC] Enable OCSP Stapling by default in httpd trunk
From: Tim Bannister <isoma@c8h10n4o2.org.uk>
Date: Fri, 28 Aug 2015 20:17:10 +0000
To: dev@httpd.apache.org
Message-ID: <E2033AE7-5EFB-4262-AFE4-17FBB82B2DF3@c8h10n4o2.org.uk>

Jeff Trawick <trawick@gmail.com> wrote:
>
>
>As of now there's still a veto on my suggestion of enabling stapling by
>default in the httpd trunk config.

Would that default need to be backported to 2.4.x?
If it can be on by default for trunk/2.5.x, and off by default in earlier releases, this should surprise very few users.

People upgrading from an older release could get a mild surprise, but at the same time if you upgrade from 2.4.x to 2.5.x then surprises aren't all that surprising.

Overall I think the big question mark is around backport to 2.4.x rather than the change to httpd trunk.

Tim
-- 
Tim Bannister – isoma@c8h10n4o2.org.uk

From dev-return-83649-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Aug 29 05:52:05 2015
Return-Path: <dev-return-83649-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B51C918953
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 29 Aug 2015 05:52:05 +0000 (UTC)
Received: (qmail 54067 invoked by uid 500); 29 Aug 2015 05:52:04 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 53993 invoked by uid 500); 29 Aug 2015 05:52:04 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 53980 invoked by uid 99); 29 Aug 2015 05:52:04 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Aug 2015 05:52:04 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 3F84EC06B6
	for <dev@httpd.apache.org>; Sat, 29 Aug 2015 05:52:04 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1
X-Spam-Level: *
X-Spam-Status: No, score=1 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H2=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id zdO86kbF5GBB for <dev@httpd.apache.org>;
	Sat, 29 Aug 2015 05:51:56 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp02.smtpout.orange.fr [80.12.242.124])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 202782055B
	for <dev@httpd.apache.org>; Sat, 29 Aug 2015 05:51:55 +0000 (UTC)
Received: from [127.0.0.1] ([92.140.255.87])
	by mwinf5d56 with ME
	id AVrn1r0091tv1W403Vrnzb; Sat, 29 Aug 2015 07:51:47 +0200
X-ME-Helo: [127.0.0.1]
X-ME-Date: Sat, 29 Aug 2015 07:51:47 +0200
X-ME-IP: 92.140.255.87
Subject: Re: svn commit: r1610674 - in /httpd/httpd/trunk: include/ap_mmn.h
 include/httpd.h modules/proxy/mod_proxy_http.c modules/proxy/proxy_util.c
 server/util.c
To: dev@httpd.apache.org
References: <20140715122701.0365D23888D7@eris.apache.org>
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Message-ID: <55E14871.3000209@wanadoo.fr>
Date: Sat, 29 Aug 2015 07:51:45 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
In-Reply-To: <20140715122701.0365D23888D7@eris.apache.org>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 150828-1, 28/08/2015), Outbound message
X-Antivirus-Status: Clean

Hi,

spotted while looking at 
https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patches/core-protocols.patch
which include it.

CJ

Le 15/07/2014 14:27, jorton@apache.org a écrit :
> Author: jorton
> Date: Tue Jul 15 12:27:00 2014
> New Revision: 1610674
>
> URL: http://svn.apache.org/r1610674
> Log:
> SECURITY (CVE-2014-0117): Fix a crash in mod_proxy.  In a reverse
> proxy configuration, a remote attacker could send a carefully crafted
> request which could crash a server process, resulting in denial of
> service.
>
> Thanks to Marek Kroemeke working with HP's Zero Day Initiative for
> reporting this issue.
>
> * server/util.c (ap_parse_token_list_strict): New function.
>
> * modules/proxy/proxy_util.c (find_conn_headers): Use it here.
>
> * modules/proxy/mod_proxy_http.c (ap_proxy_http_process_response):
>    Send a 400 for a malformed Connection header.
>
> Submitted by: Edward Lu, breser, covener
>
> Modified:
>      httpd/httpd/trunk/include/ap_mmn.h
>      httpd/httpd/trunk/include/httpd.h
>      httpd/httpd/trunk/modules/proxy/mod_proxy_http.c
>      httpd/httpd/trunk/modules/proxy/proxy_util.c
>      httpd/httpd/trunk/server/util.c
>
> Modified: httpd/httpd/trunk/server/util.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/server/util.c?rev=1610674&r1=1610673&r2=1610674&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/server/util.c (original)
> +++ httpd/httpd/trunk/server/util.c Tue Jul 15 12:27:00 2014
> @@ -1452,6 +1452,95 @@ AP_DECLARE(int) ap_find_etag_weak(apr_po
>       return find_list_item(p, line, tok, AP_ETAG_WEAK);
>   }
>   
> +/* Grab a list of tokens of the format 1#token (from RFC7230) */
> +AP_DECLARE(const char *) ap_parse_token_list_strict(apr_pool_t *p,
> +                                                const char *str_in,
> +                                                apr_array_header_t **tokens,
> +                                                int skip_invalid)
> +{
> +    int in_leading_space = 1;
> +    int in_trailing_space = 0;
> +    int string_end = 0;
> +    const char *tok_begin;
> +    const char *cur;
> +
> +    if (!str_in) {
> +        return NULL;
> +    }
> +
> +    tok_begin = cur = str_in;
> +
> +    while (!string_end) {
> +        const unsigned char c = (unsigned char)*cur;
> +
> +        if (!TEST_CHAR(c, T_HTTP_TOKEN_STOP) && c != '\0') {
> +            /* Non-separator character; we are finished with leading
> +             * whitespace. We must never have encountered any trailing
> +             * whitespace before the delimiter (comma) */
> +            in_leading_space = 0;
> +            if (in_trailing_space) {
> +                return "Encountered illegal whitespace in token";
> +            }
> +        }
> +        else if (c == ' ' || c == '\t') {
> +            /* "Linear whitespace" only includes ASCII CRLF, space, and tab;
> +             * we can't get a CRLF since headers are split on them already,
> +             * so only look for a space or a tab */
> +            if (in_leading_space) {
> +                /* We're still in leading whitespace */
> +                ++tok_begin;
> +            }
> +            else {
> +                /* We must be in trailing whitespace */
> +                ++in_trailing_space;
> +            }
> +        }
> +        else if (c == ',' || c == '\0') {
> +            if (!in_leading_space) {
> +                /* If we're out of the leading space, we know we've read some
> +                 * characters of a token */
> +                if (*tokens == NULL) {
> +                    *tokens = apr_array_make(p, 4, sizeof(char *));
> +                }
> +                APR_ARRAY_PUSH(*tokens, char *) =
> +                    apr_pstrmemdup((*tokens)->pool, tok_begin,
> +                                   (cur - tok_begin) - in_trailing_space);
> +            }
> +            /* We're allowed to have null elements, just don't add them to the
> +             * array */
> +
> +            tok_begin = cur + 1;
> +            in_leading_space = 1;
> +            in_trailing_space = 0;
> +            string_end = (c == '\0');
> +        }
> +        else {
> +            /* Encountered illegal separator char */
> +            if (skip_invalid) {
> +                /* Skip to the next separator */
> +                const char *temp;
> +                temp = ap_strchr_c(cur, ',');
> +                if(!temp) {
> +                    temp = ap_strchr_c(cur, '\0');
> +                }
> +
> +                /* Act like we haven't seen a token so we reset */
> +                cur = temp - 1;
If i understand correctly, if we find an invalid char and 
'skip_invalid', we first look for the next comma and start searching for 
new token from there.
If no comma is found before the trailing NULL, then nothing more can be 
found and we end the processing.

So shouldn't this be:
     cur = temp + 1;
(i.e. go to the character *following* the comma)

Not tested, but I think that if the invalid character is the one just 
before the comma, then we loop forever.


Also if the:
    temp = ap_strchr_c(cur, '\0');
above is supposed to reach the end of the string and stop processing, we 
have the same problem and can loop forever if the last non-NULL char is 
the invalid char.

In this case, adding:
    string_end = (c == '\0');
as in the normal case, would be fine.


> +                in_leading_space = 1;
> +                in_trailing_space = 0;
> +            }
> +            else {
> +                return apr_psprintf(p, "Encountered illegal separator "
> +                                    "'\\x%.2x'", (unsigned int)c);
> +            }
> +        }
> +
> +        ++cur;
> +    }
> +
> +    return NULL;
> +}
> +
>   /* Retrieve a token, spacing over it and returning a pointer to
>    * the first non-white byte afterwards.  Note that these tokens
>    * are delimited by semis and commas; and can also be delimited
>


From dev-return-83650-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Aug 29 14:01:44 2015
Return-Path: <dev-return-83650-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3D5FE1005F
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 29 Aug 2015 14:01:44 +0000 (UTC)
Received: (qmail 18134 invoked by uid 500); 29 Aug 2015 14:01:43 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 18074 invoked by uid 500); 29 Aug 2015 14:01:43 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 18064 invoked by uid 99); 29 Aug 2015 14:01:43 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Aug 2015 14:01:43 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 485E61AB16B
	for <dev@httpd.apache.org>; Sat, 29 Aug 2015 14:01:43 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id BiZVjJnOezxB for <dev@httpd.apache.org>;
	Sat, 29 Aug 2015 14:01:42 +0000 (UTC)
Received: from mail-yk0-f174.google.com (mail-yk0-f174.google.com [209.85.160.174])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id D9B3520D7B
	for <dev@httpd.apache.org>; Sat, 29 Aug 2015 14:01:41 +0000 (UTC)
Received: by ykba134 with SMTP id a134so27816074ykb.1
        for <dev@httpd.apache.org>; Sat, 29 Aug 2015 07:01:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=5GUONX8+/CvQSb4WePCX8Ua+JHoe/K07lAg7mHT7dxQ=;
        b=X0MHi5H/7SgvUnu2N9Njnoi0SFBNEs5izUimdaFBuZO+km7qg59k/0mHtN2FJuyqib
         vHVLeF3kzvNdWMpTliz6+A3eSgGoaEJfNWAXQPZY8FuV6GTVC989uvISL28LU5AXE8uQ
         ZgZrvRhNx37k2enPhRUkfSgo0k/NllhP5xOiHUn4GlgTFChiBQVF+PuLA68NaQneuE6p
         ZDsDhT1MvaQpjN/I3fF/f23URgLP4Ts+tsYDhgxAMb1I52n4CzW5zCINDBd8Cd4HMdgc
         +C/r2Jw0dIDfcekyPRvTmAczb5r73FeALanskdgLofdDnXlsgjLL5QD43ZZaWcsYylXj
         X+jA==
MIME-Version: 1.0
X-Received: by 10.170.53.20 with SMTP id 20mr11892147ykv.99.1440856900955;
 Sat, 29 Aug 2015 07:01:40 -0700 (PDT)
Received: by 10.37.215.12 with HTTP; Sat, 29 Aug 2015 07:01:40 -0700 (PDT)
In-Reply-To: <55E14871.3000209@wanadoo.fr>
References: <20140715122701.0365D23888D7@eris.apache.org>
	<55E14871.3000209@wanadoo.fr>
Date: Sat, 29 Aug 2015 10:01:40 -0400
Message-ID: <CALK=YjN6XAPnrRAFHWXnayO=vkE0=2SGue5KOpKs44kUtcc6zA@mail.gmail.com>
Subject: Re: svn commit: r1610674 - in /httpd/httpd/trunk: include/ap_mmn.h
 include/httpd.h modules/proxy/mod_proxy_http.c modules/proxy/proxy_util.c server/util.c
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Sat, Aug 29, 2015 at 1:51 AM, Christophe JAILLET
<christophe.jaillet@wanadoo.fr> wrote:
> If i understand correctly, if we find an invalid char and 'skip_invalid', we
> first look for the next comma and start searching for new token from there.
> If no comma is found before the trailing NULL, then nothing more can be
> found and we end the processing.
>
> So shouldn't this be:
>     cur = temp + 1;
> (i.e. go to the character *following* the comma)
>
> Not tested, but I think that if the invalid character is the one just before
> the comma, then we loop forever.

I think the bottom of the loop has cur++ and there is no break in this
path, so the next iteration will start on the separator and treat it
as an empty token?

> Also if the:
>    temp = ap_strchr_c(cur, '\0');
> above is supposed to reach the end of the string and stop processing, we
> have the same problem and can loop forever if the last non-NULL char is the
> invalid char.

Same as above I think?

>
> In this case, adding:
>    string_end = (c == '\0');
> as in the normal case, would be fine.

All of the above might be more clear if confirmed.

From dev-return-83651-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Aug 29 15:56:56 2015
Return-Path: <dev-return-83651-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 34B811029A
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 29 Aug 2015 15:56:56 +0000 (UTC)
Received: (qmail 30328 invoked by uid 500); 29 Aug 2015 15:56:55 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 30249 invoked by uid 500); 29 Aug 2015 15:56:55 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 30239 invoked by uid 99); 29 Aug 2015 15:56:55 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Aug 2015 15:56:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 48AD01828C7
	for <dev@httpd.apache.org>; Sat, 29 Aug 2015 15:56:55 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.001
X-Spam-Level:
X-Spam-Status: No, score=-0.001 tagged_above=-999 required=6.31
	tests=[RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 9YVDIiHMqM52 for <dev@httpd.apache.org>;
	Sat, 29 Aug 2015 15:56:47 +0000 (UTC)
Received: from mout.gmx.net (mout.gmx.net [212.227.15.19])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id EFAA42054D
	for <dev@httpd.apache.org>; Sat, 29 Aug 2015 15:56:46 +0000 (UTC)
Received: from [192.168.0.100] ([87.139.233.65]) by mail.gmx.com (mrgmx002)
 with ESMTPSA (Nemesis) id 0LjqLx-1YyJgV1HcP-00bvn6 for
 <dev@httpd.apache.org>; Sat, 29 Aug 2015 17:56:46 +0200
Subject: Re: AW: [RFC] Enable OCSP Stapling by default in httpd trunk
To: dev@httpd.apache.org
References: <CAKUrXK6k01WGqF8z6F3YBNbanbTaOSHbbzwSi2O3H3u03_mvUw@mail.gmail.com>
 <5454A244.6070006@velox.ch>
 <CAG5KPzypCfJ7rZVBSC6t2hqxV5=zJcBDRcQxrGVUmnuYAsU_mw@mail.gmail.com>
 <AB1691BE05AE7F4992697F2A0835627AC62BA27A@VOEXM10W.internal.vodafone.com>
 <CACsi253AWvm1OU9BYfpQ-6EJuW=gcvv4piiQqAw=MR7VYye=tg@mail.gmail.com>
 <55957CF1.2050302@apache.org> <55965D5A.3040706@comodo.com>
 <AB1691BE05AE7F4992697F2A0835627AC62BD101@VOEXM10W.internal.vodafone.com>
From: olli hauer <ohauer@gmx.de>
X-Enigmail-Draft-Status: N1110
Message-ID: <55E1D63F.2040808@gmx.de>
Date: Sat, 29 Aug 2015 17:56:47 +0200
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
In-Reply-To: <AB1691BE05AE7F4992697F2A0835627AC62BD101@VOEXM10W.internal.vodafone.com>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit
X-Provags-ID:  V03:K0:KLRLLd2BK+oajPWKEO0zqX3G/R8dszbjwWJtJnVaDzi1TfG8NZF
 kCfnGItaWyNkGWdpV/v7GEBjrgaK57PTBub31U1gv1UjU3v4wGUquMZskuIl6t24Wg8zFX5
 lLwLlwEcH8qvdRdTPIYUA/IiY37fmZALaOJnaZAhFCn8ewLPEjQ/1aoXyiYujGglxa+qbTr
 XMCZMnTpwbCsGq01nigbQ==
X-UI-Out-Filterresults: notjunk:1;V01:K0:8Bvt5/T3TLQ=:DoBt7uVVJhLW5hB2hzCmvZ
 7qXB3Wd92+eXSn1V6Yss+5HnliVJPeAgvyA0qJbnmjnsh0CCp8JhThFn6KJohcL5rLlE+bBSI
 sbiYqACT4XRU5mp5ggRJoj7BeoLYv7pBqyHk589aICN4K8RLqMJCAwlHM8dizDK+ZqOizqc90
 k87/jSFUU7aXVB2rpZXlcMinvX1uRC378zFvzbPdprNyAh37CHXKTwwXNgsxzmzXGfa7CNwQi
 /B13Wj4YQdYrnQxEhDBOsCPiwsWHi4p7mHPoTHiTyPFEJZW+irwyf4UYQOiXUhagI3zWQtbG4
 vwIODftZvKp3jpBu2fjLxQeSxpcJY7LZr1TbdyhtLD8HN6ValRoLUjz34sV8Mu4ihhR4fS2N4
 pSPrq1G0RhFtSBGYVJ28h46kuq88RVm2+/TGZtVFAUP7WWNlSfnFBysgXPU5fkAq1oz24Z7Fw
 loApPTuZ/k5DmhByObknC+/Zf6nvTAgmHeoXRjaOdDJr/SexufnEbr+MnN3TWAbGVHl/Y4aYP
 Qu0lE0zrbBR5ZJBByZBxdjC0f6Qre5qY/WTGOGiUrEsHnqEYly7/W5YUtxViemyV7e95pp+j2
 AtDh0TJ9kk/KTRYUl0mfVHprJ2TjkgZ4NqLggrEHhuUzvwit6zu97DSQixc97JOSJNytVpf2l
 m/nT1QF5ZsY5PHPNJRKgzuy675R5wRPNmUgVO9uT0x5SvjLj9K+g33yurS9O4cHwj/MQ86XT4
 KoLbKzpC50yZbwosICOoMk7GZd1JKJGOLaSuxA==

On 2015-07-03 12:13, Plüm, Rüdiger, Vodafone Group wrote:
> 
> 
>> -----Ursprüngliche Nachricht-----
>> Von: Rob Stradling [mailto:rob.stradling@comodo.com]
>> Gesendet: Freitag, 3. Juli 2015 12:01
>> An: dev@httpd.apache.org
>> Betreff: Re: [RFC] Enable OCSP Stapling by default in httpd trunk
>>
>> On 02/07/15 19:03, Ruediger Pluem wrote:
>> <snip>
>>> Just to be sure I don't miss anything. This is not about disabling
>> OCSP, its about disabling OCSP stapling by default.
>>> Maybe I have a wrong understanding of OCSP stapling, but to me
>> stapling only provides performance improvements, not
>>> security improvements for the client as the client still could connect
>> to the OCSP URL given in the cert directly and
>>> get the answer from there. If the response is stabled it does not need
>> to (with the same level of security) and saves
>>> itself a roundtrip to the OCSP server of the CA and the OCSP server of
>> the CA a request to process.
>>
>> Yes, the client _could_ connect to the OCSP URL given in the cert
>> directly and get the answer from there.  However, at least one major
>> browser (Chrome) no longer does this, but it does process stapled OCSP
>> responses.
>>
>> Even if we could ignore Chrome...
>> There will always be some clients that cannot reach the CA's OCSP
>> responder directly (due to connectivity issues at the client side),
>> whereas the TLS servers that those clients connect to may well have
>> better connectivity (and thus be able to staple OCSP responses that the
>> client cannot obtain by any other means).
>>
>> Also, this isn't just about performance.  If a client contacts an OCSP
>> responder directly, it reveals to the CA that it is interested in a
>> particular certificate.  That's a far worse privacy leak than a TLS
>> server contacting a CA's OCSP responder and revealing that it's
>> interested in the status of its own certificate!!
> 
> Thanks for the detailed explanation. So yes OCSP stapling is really beneficial
> if it is possible for the server admin to set it up. But it likely requires additional
> configuration steps outside of httpd to make the OCSP responder reachable (like firewall clearances)
> and leads to otherwise strange "slow" responses if this is not prepared.
> Another obstacle with the current stapling code is that the connection to the OCSP responder of the
> CA needs to happen directly and cannot be done via a proxy.
> Hence I agree with Kaspar that it should be off by default.
> 

Not tested, but looking at the mod_ssl doc it seems SSLStaplingForceURL can be used to proxy requests to the OCSP responder(s)

http://httpd.apache.org/docs/2.4/mod/mod_ssl.html#sslstaplingforceurl

In case SSLStaplingForceURL can be used to force OCSP requests via proxy it would be nice to add something like the following patch before enabling OCSP stapling as default.

Index: trunk/docs/conf/extra/httpd-ssl.conf.in
===================================================================
--- trunk/docs/conf/extra/httpd-ssl.conf.in     (revision 1700039)
+++ trunk/docs/conf/extra/httpd-ssl.conf.in     (working copy)
@@ -114,6 +114,11 @@
 #   Seconds before invalid OCSP responses are expired from the cache
 #SSLStaplingErrorCacheTimeout 600

+#   This directive overrides the URI of an OCSP responder as obtained
+#   from the authorityInfoAccess (AIA) extension of the certificate.
+#   One potential use is when a proxy is used for retrieving OCSP queries.
+#SSLStaplingForceURL http://internal.proxy.local
+
 ##
 ## SSL Virtual Host Context
 ##

From dev-return-83652-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Aug 29 18:49:43 2015
Return-Path: <dev-return-83652-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 544A11078F
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 29 Aug 2015 18:49:43 +0000 (UTC)
Received: (qmail 63033 invoked by uid 500); 29 Aug 2015 18:49:42 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 62957 invoked by uid 500); 29 Aug 2015 18:49:42 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 62947 invoked by uid 99); 29 Aug 2015 18:49:42 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Aug 2015 18:49:42 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 5315EEF776
	for <dev@httpd.apache.org>; Sat, 29 Aug 2015 18:49:42 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id N-w7hdEn_MC9 for <dev@httpd.apache.org>;
	Sat, 29 Aug 2015 18:49:41 +0000 (UTC)
Received: from mail-yk0-f181.google.com (mail-yk0-f181.google.com [209.85.160.181])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 9A0B925573
	for <dev@httpd.apache.org>; Sat, 29 Aug 2015 18:49:41 +0000 (UTC)
Received: by yky130 with SMTP id 130so229128yky.1
        for <dev@httpd.apache.org>; Sat, 29 Aug 2015 11:49:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        bh=c29aWK2clrwAXfv2ArIWDRHyxzmeeXU4mbn03HWhODs=;
        b=OiYoW8/CLcltN7JT8OT7U/l52yDP7uttUjN97UP1foX8NTNXpEljPR97m1qSnfamzt
         EFSJ16yhPddm4kfp5pKVj+CCWeWgkxHpdSdFx4RNBKHJVNo+jocC56NRb1j7c777+EwD
         SAq3kArmVS2F5BPFm/nBcD7eSaaLwP+3hY2Km21t5TSuKVh4MUExBu8POeMhKBMCI5T+
         USckd02i3PN5OfdY27e6lwzkrbO32J3jn6C2ZaO1XNAyo10HPYkKTNHGvNMvKD5CKJet
         JnOxsuTqPWBmN0+axESC5K86Gw/ilQVdQanh/HV/G9tgm8HuWMIybOaUZ+fJLC3/n+hv
         S9WQ==
X-Received: by 10.13.217.5 with SMTP id b5mr14214475ywe.125.1440874180909;
        Sat, 29 Aug 2015 11:49:40 -0700 (PDT)
Received: from ?IPv6:2606:a000:b541:6700:55ab:c57d:3dd2:2c83? ([2606:a000:b541:6700:55ab:c57d:3dd2:2c83])
        by smtp.googlemail.com with ESMTPSA id w68sm9055054ywe.55.2015.08.29.11.49.40
        for <dev@httpd.apache.org>
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Sat, 29 Aug 2015 11:49:40 -0700 (PDT)
Message-ID: <55E1FEC3.9090406@gmail.com>
Date: Sat, 29 Aug 2015 14:49:39 -0400
From: Jeff Trawick <trawick@gmail.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:31.0) Gecko/20100101 Thunderbird/31.8.0
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: [RFC] Enable OCSP Stapling by default in httpd trunk
References: <CAKUrXK6k01WGqF8z6F3YBNbanbTaOSHbbzwSi2O3H3u03_mvUw@mail.gmail.com> <5454A244.6070006@velox.ch> <CAG5KPzypCfJ7rZVBSC6t2hqxV5=zJcBDRcQxrGVUmnuYAsU_mw@mail.gmail.com> <55A12E9C.6060805@velox.ch> <CACsi251vkwFs3Neqqf-cdF7W=WDZFGqY-L+1baWQdTfJ+OaZ6Q@mail.gmail.com> <55A363EC.6030801@apache.org> <CAKUrXK6m6BGhhP3fg_Gx9wFyWD8YV4PgmyRqMa7iv6bRLXMspw@mail.gmail.com> <E2033AE7-5EFB-4262-AFE4-17FBB82B2DF3@c8h10n4o2.org.uk>
In-Reply-To: <E2033AE7-5EFB-4262-AFE4-17FBB82B2DF3@c8h10n4o2.org.uk>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

On 08/28/2015 04:17 PM, Tim Bannister wrote:
> Jeff Trawick <trawick@gmail.com> wrote:
>>
>> As of now there's still a veto on my suggestion of enabling stapling by
>> default in the httpd trunk config.
> Would that default need to be backported to 2.4.x?

"need"?  No; 2.4.x is a separate consideration.

> If it can be on by default for trunk/2.5.x, and off by default in earlier releases, this should surprise very few users.
>
> People upgrading from an older release could get a mild surprise, but at the same time if you upgrade from 2.4.x to 2.5.x then surprises aren't all that surprising.
>
> Overall I think the big question mark is around backport to 2.4.x rather than the change to httpd trunk.
>
> Tim


From dev-return-83653-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Aug 30 00:10:16 2015
Return-Path: <dev-return-83653-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DB0F110DC7
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 30 Aug 2015 00:10:15 +0000 (UTC)
Received: (qmail 7928 invoked by uid 500); 30 Aug 2015 00:10:14 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 7850 invoked by uid 500); 30 Aug 2015 00:10:14 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 7840 invoked by uid 99); 30 Aug 2015 00:10:14 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Aug 2015 00:10:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 4E9E7C6B0A
	for <dev@httpd.apache.org>; Sun, 30 Aug 2015 00:10:14 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.979
X-Spam-Level: **
X-Spam-Status: No, score=2.979 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01,
	RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id khLtECzwd2Gi for <dev@httpd.apache.org>;
	Sun, 30 Aug 2015 00:10:13 +0000 (UTC)
Received: from mail-ig0-f177.google.com (mail-ig0-f177.google.com [209.85.213.177])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id DFBC450704
	for <dev@httpd.apache.org>; Sun, 30 Aug 2015 00:10:12 +0000 (UTC)
Received: by igcrd18 with SMTP id rd18so6903560igc.0
        for <dev@httpd.apache.org>; Sat, 29 Aug 2015 17:10:06 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=Jn1FcPA5dMr+URKpoNMl4Lw15ZQOrjiJGHWBPjBBWLo=;
        b=TWhKWfMtez3SVLIvbWxiSoR3KK+1yZi9K/RWPmdG9hVATNNNuBYD67ik943n0GnV39
         mKLtlreGKNrNMRgGQQYY4wWIvYMB9Dle8q3BqFNwOkcpQYWVb74YZ2mWXGa/79TR+WOl
         4c+5uVW4JITsyIl2wBlGE1ak5w6x4d3XbCydAb2Y81w7pg+/ik/l/H7+/APGj78t6XBp
         OLYpwQJLl1p54GY8GynNd+yn8tiuwUs4ZmnRJaORF4WKBHievL8OLldmMv8d6u1GC5uZ
         X+NfjWZIjJPjAfI9y1t1bBbdFlgUqUNazctA20iNIk8n/YqB6gPE5I9raqNKQg5TYfme
         NKvw==
X-Gm-Message-State: ALoCoQkKwiRG7boZ5QbJYxdXesQAJ0D6DH2rfE73ixBiCu8TZfB3BDmAclqMkD/8mkmHXPliG/1C
MIME-Version: 1.0
X-Received: by 10.50.4.67 with SMTP id i3mr9536912igi.32.1440893406193; Sat,
 29 Aug 2015 17:10:06 -0700 (PDT)
Received: by 10.107.16.8 with HTTP; Sat, 29 Aug 2015 17:10:06 -0700 (PDT)
X-Originating-IP: [2600:1008:b15d:b120:f18d:15a9:ea5f:648d]
Received: by 10.107.16.8 with HTTP; Sat, 29 Aug 2015 17:10:06 -0700 (PDT)
In-Reply-To: <55E1FEC3.9090406@gmail.com>
References: <CAKUrXK6k01WGqF8z6F3YBNbanbTaOSHbbzwSi2O3H3u03_mvUw@mail.gmail.com>
	<5454A244.6070006@velox.ch>
	<CAG5KPzypCfJ7rZVBSC6t2hqxV5=zJcBDRcQxrGVUmnuYAsU_mw@mail.gmail.com>
	<55A12E9C.6060805@velox.ch>
	<CACsi251vkwFs3Neqqf-cdF7W=WDZFGqY-L+1baWQdTfJ+OaZ6Q@mail.gmail.com>
	<55A363EC.6030801@apache.org>
	<CAKUrXK6m6BGhhP3fg_Gx9wFyWD8YV4PgmyRqMa7iv6bRLXMspw@mail.gmail.com>
	<E2033AE7-5EFB-4262-AFE4-17FBB82B2DF3@c8h10n4o2.org.uk>
	<55E1FEC3.9090406@gmail.com>
Date: Sat, 29 Aug 2015 19:10:06 -0500
Message-ID: <CACsi251HqSsS4mZFuiM2OPPqnm7sxLis2Ss9nvR-qu=wGRUXfQ@mail.gmail.com>
Subject: Re: [RFC] Enable OCSP Stapling by default in httpd trunk
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a11c2a13ea2ceb4051e7c23e1

--001a11c2a13ea2ceb4051e7c23e1
Content-Type: text/plain; charset=UTF-8

On Aug 29, 2015 1:49 PM, "Jeff Trawick" <trawick@gmail.com> wrote:
>
> On 08/28/2015 04:17 PM, Tim Bannister wrote:
>>
>> Jeff Trawick <trawick@gmail.com> wrote:
>>>
>>>
>>> As of now there's still a veto on my suggestion of enabling stapling by
>>> default in the httpd trunk config.
>>
>> Would that default need to be backported to 2.4.x?
>
>
> "need"?  No; 2.4.x is a separate consideration.
>
>
>> If it can be on by default for trunk/2.5.x, and off by default in
earlier releases, this should surprise very few users.
>>
>> People upgrading from an older release could get a mild surprise, but at
the same time if you upgrade from 2.4.x to 2.5.x then surprises aren't all
that surprising.
>>
>> Overall I think the big question mark is around backport to 2.4.x rather
than the change to httpd trunk.

I thought this question was largely resolved, that we wouldn't want
subversion updates to break a users config unexpectedly.  POLS.

--001a11c2a13ea2ceb4051e7c23e1
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<p dir=3D"ltr">On Aug 29, 2015 1:49 PM, &quot;Jeff Trawick&quot; &lt;<a hre=
f=3D"mailto:trawick@gmail.com">trawick@gmail.com</a>&gt; wrote:<br>
&gt;<br>
&gt; On 08/28/2015 04:17 PM, Tim Bannister wrote:<br>
&gt;&gt;<br>
&gt;&gt; Jeff Trawick &lt;<a href=3D"mailto:trawick@gmail.com">trawick@gmai=
l.com</a>&gt; wrote:<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; As of now there&#39;s still a veto on my suggestion of enablin=
g stapling by<br>
&gt;&gt;&gt; default in the httpd trunk config.<br>
&gt;&gt;<br>
&gt;&gt; Would that default need to be backported to 2.4.x?<br>
&gt;<br>
&gt;<br>
&gt; &quot;need&quot;?=C2=A0 No; 2.4.x is a separate consideration.<br>
&gt;<br>
&gt;<br>
&gt;&gt; If it can be on by default for trunk/2.5.x, and off by default in =
earlier releases, this should surprise very few users.<br>
&gt;&gt;<br>
&gt;&gt; People upgrading from an older release could get a mild surprise, =
but at the same time if you upgrade from 2.4.x to 2.5.x then surprises aren=
&#39;t all that surprising.<br>
&gt;&gt;<br>
&gt;&gt; Overall I think the big question mark is around backport to 2.4.x =
rather than the change to httpd trunk.</p>
<p dir=3D"ltr">I thought this question was largely resolved, that we wouldn=
&#39;t want subversion updates to break a users config unexpectedly.=C2=A0 =
POLS.</p>

--001a11c2a13ea2ceb4051e7c23e1--

From dev-return-83654-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Aug 30 06:31:13 2015
Return-Path: <dev-return-83654-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1D67D1825B
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 30 Aug 2015 06:31:13 +0000 (UTC)
Received: (qmail 46456 invoked by uid 500); 30 Aug 2015 06:31:11 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 46383 invoked by uid 500); 30 Aug 2015 06:31:11 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 46370 invoked by uid 99); 30 Aug 2015 06:31:11 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Aug 2015 06:31:11 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 2E35EC0BD7
	for <dev@httpd.apache.org>; Sun, 30 Aug 2015 06:31:11 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.106
X-Spam-Level:
X-Spam-Status: No, score=-0.106 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RP_MATCHES_RCVD=-0.006] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=velox.ch header.b=qOrTYI/R;
	dkim=pass (2048-bit key) header.d=velox.ch header.b=cGc6nMPa
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id eLFPLgCnFL0e for <dev@httpd.apache.org>;
	Sun, 30 Aug 2015 06:31:06 +0000 (UTC)
Received: from fornix.velox.ch (fornix.velox.ch [85.25.46.13])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id B8F0E20F6D
	for <dev@httpd.apache.org>; Sun, 30 Aug 2015 06:31:05 +0000 (UTC)
Received: from cortex.velox.ch (77-57-164-164.dclient.hispeed.ch [77.57.164.164])
	(authenticated bits=0)
	by fornix.velox.ch (8.14.9/8.14.9/2.2) with ESMTP id t7U6Uus8013006
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-GCM-SHA384 bits=256 verify=OK)
	for <dev@httpd.apache.org>; Sun, 30 Aug 2015 08:30:57 +0200
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=velox.ch;
	s=fornix-727e; t=1440916257;
	bh=QYXTyXS89acCT1rHroZfqIbKWsESX2uKnZfhlfgfMpc=;
	h=From:Subject:To:References:Date:In-Reply-To;
	b=qOrTYI/RM1btF/R3FFjFi4ODJcu5GEPVtnlWxRR7y2uuL02tWhpQsINZyyOTWPIry
	 680fc5HeysTAuV49OZrvu9UIUnzIpFl8YTx9G80lVBokkxq2Oli5sagVnXObiGLg23
	 WSo/byPEuZ9CEFnHUIaTUHCt/Eu/r7dLPFJm4SC2MbEuTuKZDgyTXfXFEUxGomAtk1
	 W/D3V9iwVjm+xIpctdh6UwjwcpNE0IlSQeMMAU2HyNkBKE+NmfBfuOlT+EgA5U4e1v
	 KFHHfAwTYX0IFWKLVheRtUc+XR//E8IyCn97OLOCImMPMeP27rBUW2Nj6SPPxAaV6Q
	 CI+UnM3kB1P/g==
From: Kaspar Brand <httpd-dev.2014@velox.ch>
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=velox.ch;
	s=cortex-8a58; t=1440916254;
	bh=QYXTyXS89acCT1rHroZfqIbKWsESX2uKnZfhlfgfMpc=;
	h=From:Subject:To:References:Date:In-Reply-To;
	b=cGc6nMPa2lIFBdHeHN0zpVX6CH3vYj0hKi9HBy2FJQvjwKccc8fg+SdzJVAlqTIgr
	 kxLnyF9yx6gEV8b+VWf5sOta/oG82DCJEx6XM6hsSM2AqOb+VgRfnbuLAsluW9Nj7r
	 mZqpyJIYp517YF1GJShmVkaDyXpZog8GIhvVIe+ughwjFtYx4VPBt8DJNDXR9NaqR0
	 Wo9g/PRqXc48PF+7Ko22V8Vi3G0JXqV362/62UB0SZC784A5KWujjjQdTdLP7bVTtR
	 4PyemTX05VneAz2B4idGjYuEpYCMvi0KEvCMsa3b05ZzEnIKP6xIVPxEQIZ6K3dmEG
	 l1RyV8H7s7tQg==
Subject: Re: [RFC] Enable OCSP Stapling by default in httpd trunk
To: dev@httpd.apache.org
References: <CAKUrXK6k01WGqF8z6F3YBNbanbTaOSHbbzwSi2O3H3u03_mvUw@mail.gmail.com>
 <5454A244.6070006@velox.ch>
 <CAG5KPzypCfJ7rZVBSC6t2hqxV5=zJcBDRcQxrGVUmnuYAsU_mw@mail.gmail.com>
 <55A12E9C.6060805@velox.ch>
 <CACsi251vkwFs3Neqqf-cdF7W=WDZFGqY-L+1baWQdTfJ+OaZ6Q@mail.gmail.com>
 <55A363EC.6030801@apache.org>
 <CAKUrXK6m6BGhhP3fg_Gx9wFyWD8YV4PgmyRqMa7iv6bRLXMspw@mail.gmail.com>
Message-ID: <55E2A31E.5000204@velox.ch>
Date: Sun, 30 Aug 2015 08:30:54 +0200
MIME-Version: 1.0
In-Reply-To: <CAKUrXK6m6BGhhP3fg_Gx9wFyWD8YV4PgmyRqMa7iv6bRLXMspw@mail.gmail.com>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit

On 28.08.2015 19:27, Jeff Trawick wrote:
> For one, it is appropriate for the default config is there to enable
> practices which are reasonable in most situations, and OCSP Stapling is
> widely accepted as an appropriate feature for HTTP servers to enable.

I have some doubts whether "widely accepted" is an accurate summary of
today's situation, because this assessment misses the fact that with the
current RFC-6066-based implementation, stapling can't fully achieve the
goal of obviating OCSP queries for the clients - all publicly trusted
CAs use hierarchies with at least two tiers these days, so effectively
RFC 6961 support would be needed. And given that the most popular
browser only enforces revocation checking for EV certificates (certainly
less than 10% of all SSL certs out there), the benefit of turning on
stapling for DV/OV certs by default is not so apparent either.

What wasn't mentioned in the original RFC [1], and what I'm still
wondering about, is the primary motivation for enabling it on trunk? As
I wrote in my reply at that time, changing the default in trunk will
hardly help in getting broader real-world testing results. If the
plan is to propose a backport to 2.4.x soon afterwards, however, then I
would certainly oppose unless systematic coverage for OCSP stapling is
added to the test framework (enabling a feature by default in a GA
release for which there is not a single test is a no go, IMO).

> Also, strictly speaking, the default config does not have SSL enabled
> anyway, and after manually enabling it OCSP responses won't be fetched
> unless a certificate is configured which references an OCSP responder.

It should be worth mentioning that the OCSP URI in a server cert is to
be considered untrusted, as mod_ssl does not validate its own cert at
startup. It's also for this reason that I'm not in favor of a global
"SSLUseStapling On", it should really be configured on a per-vhost basis.

> While I find the "not make accidental outgoing connections" argument
> compelling (though perhaps with a different word than "accidental") the
> server already takes actions that cause outgoing connections to services
> not explicitly configured (DNS), and these occasionally cause problems.

Are you referring to queries when doing PTR lookups for connecting
clients? I think that's one of the very reasons why "HostnameLookups
Off" was chosen for extra/httpd-default.conf.

> Is there a principle at stake which could be followed consistently across
> disparate features in how the server behaves a) with compiled in defaults
> and minimal config, or b) with default/recommended config?

The default configuration should not trigger unsolicited outgoing
queries to untrusted systems, for both a) and b), that's how I would
put it. Additionally, features enabled by default need to have sufficient
coverage in the test framework.

> If enabling stapling were more closely tied in the configuration language
> to configuring a certificate, which with "SSLUseStapling On" is the user
> action that makes mod_ssl talk to a responder, would that help the end
> user?  (Controlling stapling parameters on a per-certificate basis is
> valuable anyway since you can have multiple certificates per vhost,
> possibly with different responders.)

It's not very common to configure multiple certs for a single vhost, I
guess - mainly due to the single-chain-only limitation in OpenSSL up to
1.0.1. I wouldn't put too much effort into making it a per-certificate
setting (seems relatively complex to implement, at least at first glance).

Kaspar

[1] https://mail-archives.apache.org/mod_mbox/httpd-dev/201410.mbox/%3CCAKUrXK6k01WGqF8z6F3YBNbanbTaOSHbbzwSi2O3H3u03_mvUw%40mail.gmail.com%3E

From dev-return-83655-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Aug 30 06:37:09 2015
Return-Path: <dev-return-83655-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 207D318283
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 30 Aug 2015 06:37:09 +0000 (UTC)
Received: (qmail 50922 invoked by uid 500); 30 Aug 2015 06:37:08 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 50849 invoked by uid 500); 30 Aug 2015 06:37:08 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 50839 invoked by uid 99); 30 Aug 2015 06:37:08 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Aug 2015 06:37:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 12987183C20
	for <dev@httpd.apache.org>; Sun, 30 Aug 2015 06:37:08 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.106
X-Spam-Level:
X-Spam-Status: No, score=-0.106 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RP_MATCHES_RCVD=-0.006] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=velox.ch header.b=rBrc+cyy;
	dkim=pass (2048-bit key) header.d=velox.ch header.b=npdMqmU3
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 29A9hRF0XN9b for <dev@httpd.apache.org>;
	Sun, 30 Aug 2015 06:37:07 +0000 (UTC)
Received: from fornix.velox.ch (fornix.velox.ch [85.25.46.13])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id A591742B13
	for <dev@httpd.apache.org>; Sun, 30 Aug 2015 06:37:06 +0000 (UTC)
Received: from cortex.velox.ch (77-57-164-164.dclient.hispeed.ch [77.57.164.164])
	(authenticated bits=0)
	by fornix.velox.ch (8.14.9/8.14.9/2.2) with ESMTP id t7U6awMn013067
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-GCM-SHA384 bits=256 verify=OK)
	for <dev@httpd.apache.org>; Sun, 30 Aug 2015 08:36:59 +0200
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=velox.ch;
	s=fornix-727e; t=1440916619;
	bh=HeneplI7975WtUIsM7J17jLkebUiQ9L3OFoPoFFc/Rs=;
	h=From:Subject:To:References:Date:In-Reply-To;
	b=rBrc+cyy78KUrMwYjArTmUp+x709NbU9P68dsD3HU5pfgseoXx1AcHdwCZjgf7E9S
	 zDPiz7oZpSKH3casMhMDFTjqgMEmP8y8/NOmeGayOAjDMxfu5qpywgl0/5Hr3aFTEe
	 foQeD4JtU8m/JSjdQrBbNljubsc6Erg3ZHXf2F55bTQlT0Mn0rwauVmy+2096G9QwS
	 5KXCLTYlXi1OybTGSRvHbm2Cb1sTlLMPeWE32tNi96I7JTbThVUrWTNMjH0wORZ/ro
	 iA8jnU1EQGZqVOa2iKx90xLGSrGb1vd1CdM4uHVEikjLawNbrlVr6fObC+KCiQKLQG
	 8UnUhkn/kOfHw==
From: Kaspar Brand <httpd-dev.2014@velox.ch>
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=velox.ch;
	s=cortex-8a58; t=1440916617;
	bh=HeneplI7975WtUIsM7J17jLkebUiQ9L3OFoPoFFc/Rs=;
	h=From:Subject:To:References:Date:In-Reply-To;
	b=npdMqmU3Mw7sXZ9b0hQROKsvkDulaveh1L9bmn5iXbgszFK3mXpRW1BkVc9JxNlAG
	 wIOj+W9uGUv+XEwIFa2vhKivQ3EMjFK6x7PsfKv0cfb/ZT4q9N+ZBkV0AMkB+6Zsjp
	 FHQi+aeBbQbmqvIu7v4VN1YtsU4eQOPHMXNp1WBg0FVr6bE0maaYTx5UtMRU2wpVJp
	 0P8zxDWYfzTzOk1CNQdGnW2Yx7xWYUTOVo3lO9zL1cpTNk/lajUCFl9CUzZqvOmACz
	 cKrXoBpsRS+MNS5eM+JltQ2JyMI2xV3SCJsIk0mQZhBaeQU3CEqDfJFDezO2NcXtpT
	 jwP/8rLSsapfQ==
Subject: Re: AW: [RFC] Enable OCSP Stapling by default in httpd trunk
To: dev@httpd.apache.org
References: <CAKUrXK6k01WGqF8z6F3YBNbanbTaOSHbbzwSi2O3H3u03_mvUw@mail.gmail.com>
 <5454A244.6070006@velox.ch>
 <CAG5KPzypCfJ7rZVBSC6t2hqxV5=zJcBDRcQxrGVUmnuYAsU_mw@mail.gmail.com>
 <AB1691BE05AE7F4992697F2A0835627AC62BA27A@VOEXM10W.internal.vodafone.com>
 <CACsi253AWvm1OU9BYfpQ-6EJuW=gcvv4piiQqAw=MR7VYye=tg@mail.gmail.com>
 <55957CF1.2050302@apache.org> <55965D5A.3040706@comodo.com>
 <AB1691BE05AE7F4992697F2A0835627AC62BD101@VOEXM10W.internal.vodafone.com>
 <55E1D63F.2040808@gmx.de>
Message-ID: <55E2A489.6000403@velox.ch>
Date: Sun, 30 Aug 2015 08:36:57 +0200
MIME-Version: 1.0
In-Reply-To: <55E1D63F.2040808@gmx.de>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit

On 29.08.2015 17:56, olli hauer wrote:
> On 2015-07-03 12:13, Plüm, Rüdiger, Vodafone Group wrote:
>> Thanks for the detailed explanation. So yes OCSP stapling is really
>> beneficial if it is possible for the server admin to set it up. But
>> it likely requires additional configuration steps outside of httpd
>> to make the OCSP responder reachable (like firewall clearances) and
>> leads to otherwise strange "slow" responses if this is not
>> prepared. Another obstacle with the current stapling code is that
>> the connection to the OCSP responder of the CA needs to happen
>> directly and cannot be done via a proxy. Hence I agree with Kaspar
>> that it should be off by default.
>> 
> 
> Not tested, but looking at the mod_ssl doc it seems
> SSLStaplingForceURL can be used to proxy requests to the OCSP
> responder(s)
> 
> http://httpd.apache.org/docs/2.4/mod/mod_ssl.html#sslstaplingforceurl
>
> In case SSLStaplingForceURL can be used to force OCSP requests via
> proxy it would be nice to add something like the following patch
> before enabling OCSP stapling as default.

It can't be used like this, as pointed out in [1]. Its main use is for
certs which do not include an OCSP URI at all, so configuring
SSLStaplingForceURL at the global level doesn't make much sense - you
would have to run a "transparent OCSP proxy" at that URL (mod_ssl will
just send plain OCSP requests to this address).

Kaspar

[1] https://mail-archives.apache.org/mod_mbox/httpd-dev/201411.mbox/%3C5454A1FE.6060204%40velox.ch%3E

From dev-return-83656-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Aug 30 07:15:07 2015
Return-Path: <dev-return-83656-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 91FF1182F9
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 30 Aug 2015 07:15:07 +0000 (UTC)
Received: (qmail 68246 invoked by uid 500); 30 Aug 2015 07:15:06 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 68179 invoked by uid 500); 30 Aug 2015 07:15:06 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 68169 invoked by uid 99); 30 Aug 2015 07:15:06 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Aug 2015 07:15:06 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 519D6C13A7
	for <dev@httpd.apache.org>; Sun, 30 Aug 2015 07:15:06 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id b_VXCOnLZytG for <dev@httpd.apache.org>;
	Sun, 30 Aug 2015 07:14:56 +0000 (UTC)
Received: from mail-io0-f170.google.com (mail-io0-f170.google.com [209.85.223.170])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 44D0020647
	for <dev@httpd.apache.org>; Sun, 30 Aug 2015 07:14:56 +0000 (UTC)
Received: by iod35 with SMTP id 35so700398iod.3
        for <dev@httpd.apache.org>; Sun, 30 Aug 2015 00:14:49 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=xH+ycMOJG0+kxCvp0yGIroIt3BIjFM3Cp/+CeuPR+s0=;
        b=a6kMJzpcp1pdu0404LmHWOosjuyYEotfC3rx4Sd/Ebt1cp6JcxRhW3O1sKHDDzlaqW
         vZzk/6iqUC69di7SXjoUaudQBDV+QlX4R5sFCIvdKww/pz47WMc2KQsSDyBrSWj7Barh
         FGY5coW1/nMvmsU3RnnId/SRQXocC3Blaz/1rNN1oL+lGFXoHx4yrncIzQ7GPZryfVtm
         C/xeVF/iFoWY1Y9pZzc88B4/T7202pSy9fNJJsM3NGWo7Wh0VrtCWL1NkxOrROBozdxA
         GvvkGzQmMnm1kI0oW2eIsqsi8BZJ8NYIGDXWH7zMTTyl7tMn6CxMS92e+BTfbAdG8//7
         QJFQ==
X-Gm-Message-State: ALoCoQlnmEGSCkNefv9Btxb1UEQvUrZ7+1ANO9bSAj3mgcHnm7abUMtT70Fjz79vM6OHPNWml84O
MIME-Version: 1.0
X-Received: by 10.107.136.157 with SMTP id s29mr5568095ioi.34.1440918889089;
 Sun, 30 Aug 2015 00:14:49 -0700 (PDT)
Received: by 10.79.107.204 with HTTP; Sun, 30 Aug 2015 00:14:49 -0700 (PDT)
In-Reply-To: <55E2A31E.5000204@velox.ch>
References: <CAKUrXK6k01WGqF8z6F3YBNbanbTaOSHbbzwSi2O3H3u03_mvUw@mail.gmail.com>
	<5454A244.6070006@velox.ch>
	<CAG5KPzypCfJ7rZVBSC6t2hqxV5=zJcBDRcQxrGVUmnuYAsU_mw@mail.gmail.com>
	<55A12E9C.6060805@velox.ch>
	<CACsi251vkwFs3Neqqf-cdF7W=WDZFGqY-L+1baWQdTfJ+OaZ6Q@mail.gmail.com>
	<55A363EC.6030801@apache.org>
	<CAKUrXK6m6BGhhP3fg_Gx9wFyWD8YV4PgmyRqMa7iv6bRLXMspw@mail.gmail.com>
	<55E2A31E.5000204@velox.ch>
Date: Sun, 30 Aug 2015 00:14:49 -0700
Message-ID: <CAFewVt4v-6hR=O=FxvL_OupEqpGnFFF78S9N=daPSQhb=VjF4w@mail.gmail.com>
Subject: Re: [RFC] Enable OCSP Stapling by default in httpd trunk
From: Brian Smith <brian@briansmith.org>
To: dev@httpd.apache.org
Content-Type: multipart/alternative; boundary=001a113ea7f688e65b051e821245

--001a113ea7f688e65b051e821245
Content-Type: text/plain; charset=UTF-8

Kaspar Brand <httpd-dev.2014@velox.ch> wrote:

> On 28.08.2015 19:27, Jeff Trawick wrote:
> > For one, it is appropriate for the default config is there to enable
> > practices which are reasonable in most situations, and OCSP Stapling is
> > widely accepted as an appropriate feature for HTTP servers to enable.
>
> I have some doubts whether "widely accepted" is an accurate summary of
> today's situation, because this assessment misses the fact that with the
> current RFC-6066-based implementation, stapling can't fully achieve the
> goal of obviating OCSP queries for the clients - all publicly trusted
> CAs use hierarchies with at least two tiers these days, so effectively
> RFC 6961 support would be needed.


This is not true. In the case of Firefox, and I believe Chrome, it was
decided that the website is responsible for delivering the OCSP response
(via stapling) for the end-entity, and the browser is responsible for
getting the revocation info for the intermediates *in some unspecified
way*. In practice, that way is CRLSets. I think MSIE is or has also started
moving to that model.

In particular, browser makers aren't interested in RFC 6961 because of it
is a poor performance trade-off and also never implemented.



> And given that the most popular
> browser only enforces revocation checking for EV certificates (certainly
> less than 10% of all SSL certs out there), the benefit of turning on
> stapling for DV/OV certs by default is not so apparent either.
>

This is a chicken-and-egg problem. The proposed Must-Staple feature makes
OCSP useful. Obviously Must-Staple only works if the server staples the
response. Conversely, without Must-Staple, OCSP is useless in browsers.


> What wasn't mentioned in the original RFC [1], and what I'm still
> wondering about, is the primary motivation for enabling it on trunk?


The main motivation for OCSP stapling is to demonstrate that OCSP stapling
works in a widespread way, so that browsers can start implementing the
Must-Staple feature and gather useful metrics about the effects, including
any possible negative side effects.


> As I wrote in my reply at that time, changing the default in trunk will
> hardly help in getting broader real-world testing results.


It has to be changed on Trunk before it can be changed anywhere else, right?



> If the
> plan is to propose a backport to 2.4.x soon afterwards, however, then I
> would certainly oppose unless systematic coverage for OCSP stapling is
> added to the test framework (enabling a feature by default in a GA
> release for which there is not a single test is a no go, IMO).
>

I agree.

And, to be perfectly honest, there are a lot of things that can go wrong
with OCSP stapling and I've yet to see an implementation without a serious
flaw.


> It should be worth mentioning that the OCSP URI in a server cert is to
> be considered untrusted, as mod_ssl does not validate its own cert at
> startup.
>

Using that argument, it isn't safe to use the server's end-entity
certificate either, because it hasn't been checked for validity. In
particular, it hasn't been checked for revocation! The Heartbleed
vulnerability had such a huge impact partially because there was no
**effective** and easy-to-use way for servers to revoke certificates. We
need to find a solution to revocation and I think that Apache enabling OCSP
stapling by default is the next step towards a solution.


> The default configuration should not trigger unsolicited outgoing
> queries to untrusted systems, for both a) and b), that's how I would
> put it.


Look at IIS, which has been doing OCSP stapling by default, without
significant problems, for many years now. Has anybody really been harmed by
IIS's default? I don't think so. I think this is an instance of the perfect
being the enemy of the good.


> Additionally, features enabled by default need to have sufficient
> coverage in the test framework.
>

Again, I agree.

In case it would be helpful: When I was at Mozilla, my team created a new
certificate verification library for Firefox. That includes a complete
implementation of OCSP verification. It also includes a small test suite
for OCSP verification. We intentionally licensed it under the Apache 2.0
license so that Apache could use the code, if Apache wants to use it. If
nothing else, the OCSP tests [3] might be a useful model for Apache's tests.

After I left Mozilla, I separated out the implementation from Firefox's
repository and made it available on GitHub: [1]. I spent some time making
that code work with OpenSSL in a branch [2].

[1] https://github.com/briansmith/mozillapkix
[2] https://github.com/briansmith/mozillapkix/tree/feature/openssl
[3]
https://github.com/briansmith/mozillapkix/blob/master/test/gtest/pkixocsp_VerifyEncodedOCSPResponse.cpp

Cheers,
Brian
-- 
https://briansmith.org/

--001a113ea7f688e65b051e821245
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">Kasp=
ar Brand <span dir=3D"ltr">&lt;<a href=3D"mailto:httpd-dev.2014@velox.ch" t=
arget=3D"_blank">httpd-dev.2014@velox.ch</a>&gt;</span> wrote:<br><blockquo=
te class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8ex;border-left-widt=
h:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-le=
ft:1ex"><span class=3D"">On 28.08.2015 19:27, Jeff Trawick wrote:<br>
&gt; For one, it is appropriate for the default config is there to enable<b=
r>
&gt; practices which are reasonable in most situations, and OCSP Stapling i=
s<br>
&gt; widely accepted as an appropriate feature for HTTP servers to enable.<=
br>
<br>
</span>I have some doubts whether &quot;widely accepted&quot; is an accurat=
e summary of<br>
today&#39;s situation, because this assessment misses the fact that with th=
e<br>
current RFC-6066-based implementation, stapling can&#39;t fully achieve the=
<br>
goal of obviating OCSP queries for the clients - all publicly trusted<br>
CAs use hierarchies with at least two tiers these days, so effectively<br>
RFC 6961 support would be needed.</blockquote><div><br></div><div>This is n=
ot true. In the case of Firefox, and I believe Chrome, it was decided that =
the website is responsible for delivering the OCSP response (via stapling) =
for the end-entity, and the browser is responsible for getting the revocati=
on info for the intermediates *in some unspecified way*. In practice, that =
way is CRLSets. I think MSIE is or has also started moving to that model.</=
div><div><br></div><div>In particular, browser makers aren&#39;t interested=
 in RFC 6961 because of it is a poor performance trade-off and also never i=
mplemented.</div><div><br></div><div>=C2=A0</div><blockquote class=3D"gmail=
_quote" style=3D"margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left=
-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex">And given=
 that the most popular<br>
browser only enforces revocation checking for EV certificates (certainly<br=
>
less than 10% of all SSL certs out there), the benefit of turning on<br>
stapling for DV/OV certs by default is not so apparent either.<br></blockqu=
ote><div><br></div><div>This is a chicken-and-egg problem. The proposed Mus=
t-Staple feature makes OCSP useful. Obviously Must-Staple only works if the=
 server staples the response. Conversely, without Must-Staple, OCSP is usel=
ess in browsers.=C2=A0</div><div>=C2=A0<br></div><blockquote class=3D"gmail=
_quote" style=3D"margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left=
-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex">What wasn=
&#39;t mentioned in the original RFC [1], and what I&#39;m still<br>
wondering about, is the primary motivation for enabling it on trunk?</block=
quote><div><br></div><div>The main motivation for OCSP stapling is to demon=
strate that OCSP stapling works in a widespread way, so that browsers can s=
tart implementing the Must-Staple feature and gather useful metrics about t=
he effects, including any possible negative side effects.</div><div>=C2=A0<=
/div><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8ex;bo=
rder-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:so=
lid;padding-left:1ex"> As=C2=A0I wrote in my reply at that time, changing t=
he default in trunk will<br>
hardly help in getting broader real-world testing results.</blockquote><div=
><br></div><div>It has to be changed on Trunk before it can be changed anyw=
here else, right?</div><div><br></div><div>=C2=A0</div><blockquote class=3D=
"gmail_quote" style=3D"margin:0px 0px 0px 0.8ex;border-left-width:1px;borde=
r-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex">If =
the<br>
plan is to propose a backport to 2.4.x soon afterwards, however, then I<br>
would certainly oppose unless systematic coverage for OCSP stapling is<br>
added to the test framework (enabling a feature by default in a GA<br>
release for which there is not a single test is a no go, IMO).<br></blockqu=
ote><div><br></div><div>I agree.</div><div><br></div><div>And, to be perfec=
tly honest, there are a lot of things that can go wrong with OCSP stapling =
and I&#39;ve yet to see an implementation without a serious flaw.</div><div=
>=C2=A0</div><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px =
0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-=
style:solid;padding-left:1ex">It should be worth mentioning that the OCSP U=
RI in a server cert is to<br>
be considered untrusted, as mod_ssl does not validate its own cert at<br>
startup.<br></blockquote><div><br></div><div>Using that argument, it isn&#3=
9;t safe to use the server&#39;s end-entity certificate either, because it =
hasn&#39;t been checked for validity. In particular, it hasn&#39;t been che=
cked for revocation! The Heartbleed vulnerability had such a huge impact pa=
rtially because there was no **effective** and easy-to-use way for servers =
to revoke certificates. We need to find a solution to revocation and I thin=
k that Apache enabling OCSP stapling by default is the next step towards a =
solution.</div><div>=C2=A0<br></div><blockquote class=3D"gmail_quote" style=
=3D"margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(20=
4,204,204);border-left-style:solid;padding-left:1ex">The default configurat=
ion should not trigger unsolicited outgoing<br>
queries to untrusted systems, for both a) and b), that&#39;s how I would<br=
>
put it.</blockquote><div><br></div><div>Look at IIS, which has been doing O=
CSP stapling by default, without significant problems, for many years now. =
Has anybody really been harmed by IIS&#39;s default? I don&#39;t think so. =
I think this is an instance of the perfect being the enemy of the good.</di=
v><div>=C2=A0<br></div><blockquote class=3D"gmail_quote" style=3D"margin:0p=
x 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);bo=
rder-left-style:solid;padding-left:1ex">Additionally, features enabled by d=
efault need to have sufficient<br>
coverage in the test framework.<br></blockquote><div><br></div><div>Again, =
I agree.</div><div><br></div><div>In case it would be helpful: When I was a=
t Mozilla, my team created a new certificate verification library for Firef=
ox. That includes a complete implementation of OCSP verification. It also i=
ncludes a small test suite for OCSP verification. We intentionally licensed=
 it under the Apache 2.0 license so that Apache could use the code, if Apac=
he wants to use it. If nothing else, the OCSP tests [3] might be a useful m=
odel for Apache&#39;s tests.</div><div><br></div><div>After I left Mozilla,=
 I separated out the implementation from Firefox&#39;s repository and made =
it available on GitHub: [1]. I spent some time making that code work with O=
penSSL in a branch [2].</div><div><br></div><div>[1] <a href=3D"https://git=
hub.com/briansmith/mozillapkix">https://github.com/briansmith/mozillapkix</=
a></div><div>[2]=C2=A0<a href=3D"https://github.com/briansmith/mozillapkix/=
tree/feature/openssl">https://github.com/briansmith/mozillapkix/tree/featur=
e/openssl</a></div><div>[3]=C2=A0<a href=3D"https://github.com/briansmith/m=
ozillapkix/blob/master/test/gtest/pkixocsp_VerifyEncodedOCSPResponse.cpp">h=
ttps://github.com/briansmith/mozillapkix/blob/master/test/gtest/pkixocsp_Ve=
rifyEncodedOCSPResponse.cpp</a></div><div><br></div><div>Cheers,</div><div>=
Brian</div></div>-- <br><div class=3D"gmail_signature"><div dir=3D"ltr"><di=
v><div dir=3D"ltr"><div><div dir=3D"ltr"><div><a href=3D"https://briansmith=
.org/" target=3D"_blank">https://briansmith.org/</a></div><div><br></div></=
div></div></div></div></div></div>
</div></div>

--001a113ea7f688e65b051e821245--

From dev-return-83657-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Aug 30 07:15:15 2015
Return-Path: <dev-return-83657-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7AE74182FF
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 30 Aug 2015 07:15:15 +0000 (UTC)
Received: (qmail 69661 invoked by uid 500); 30 Aug 2015 07:15:15 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 69593 invoked by uid 500); 30 Aug 2015 07:15:15 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 69584 invoked by uid 99); 30 Aug 2015 07:15:14 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Aug 2015 07:15:14 +0000
Received: from asf-bz1-us-mid.priv.apache.org (nat1-us-mid.apache.org [23.253.172.122])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPS id 97B9B1A0163
	for <dev@httpd.apache.org>; Sun, 30 Aug 2015 07:15:14 +0000 (UTC)
Received: by asf-bz1-us-mid.priv.apache.org (ASF Mail Server at asf-bz1-us-mid.priv.apache.org, from userid 0)
	id 1420E60166; Sun, 30 Aug 2015 07:15:14 +0000 (UTC)
From: bugzilla@apache.org
To: dev@httpd.apache.org
Subject: Bug report for Apache httpd-2 [2015/08/30]
Message-Id: <20150830071514.1420E60166@asf-bz1-us-mid.priv.apache.org>
Date: Sun, 30 Aug 2015 07:15:05 +0000 (UTC)

+---------------------------------------------------------------------------+
| Bugzilla Bug ID                                                           |
|     +---------------------------------------------------------------------+
|     | Status: UNC=Unconfirmed NEW=New         ASS=Assigned                |
|     |         OPN=Reopened    VER=Verified    (Skipped Closed/Resolved)   |
|     |   +-----------------------------------------------------------------+
|     |   | Severity: BLK=Blocker CRI=Critical  REG=Regression  MAJ=Major   |
|     |   |           MIN=Minor   NOR=Normal    ENH=Enhancement TRV=Trivial |
|     |   |   +-------------------------------------------------------------+
|     |   |   | Date Posted                                                 |
|     |   |   |          +--------------------------------------------------+
|     |   |   |          | Description                                      |
|     |   |   |          |                                                  |
| 7483|Ass|Enh|2002-03-26|Add FileAction directive to assign a cgi interpret|
| 8713|Inf|Min|2002-05-01|No Errorlog on PROPFIND/Depth:Infinity            |
| 8867|Opn|Cri|2002-05-07|exports.c generation fails when using a symlink to|
|10747|New|Maj|2002-07-12|ftp SIZE command and 'smart' ftp servers results i|
|11294|New|Enh|2002-07-30|desired vhost_alias option                        |
|11580|Opn|Enh|2002-08-09|generate Content-Location headers                 |
|12033|Opn|Nor|2002-08-26|Graceful restart immediately result in [warn] long|
|12680|New|Enh|2002-09-16|Digest authentication with integrity protection   |
|13599|Inf|Nor|2002-10-14|autoindex formating broken for multibyte sequences|
|13661|Ass|Enh|2002-10-15|Apache cannot not handle dynamic IP reallocation  |
|14104|Opn|Enh|2002-10-30|not documented: must restart server to load new CR|
|14496|New|Enh|2002-11-13|Cannot upgrade any version on Windows. Must uninst|
|14922|Inf|Enh|2002-11-28|<target> is currently hardcoded to 'apache2'      |
|15719|Inf|Nor|2002-12-30|WebDAV MOVE to destination URI which is content-ne|
|16761|Inf|Nor|2003-02-04|CustomLog with pipe spawns process during config  |
|16802|New|Enh|2003-02-05|Additional AllowOverride directive "Restrict"     |
|16811|Ass|Maj|2003-02-05|mod_autoindex always return webpages in UTF-8.    |
|17107|New|Min|2003-02-16|Windows should not install printenv               |
|17114|New|Enh|2003-02-17|Please add strip and install-strip targets to Make|
|17244|Ass|Nor|2003-02-20|./configure --help gives false information regardi|
|17497|Opn|Nor|2003-02-27|mod_mime_magic generates incorrect response header|
|18325|New|Enh|2003-03-25|PAM support for suEXEC                            |
|18334|Inf|Cri|2003-03-25|Server crashes when authenticating users against L|
|18497|New|Min|2003-03-30|configure --help gives wrong default for sysconfdi|
|19043|New|Min|2003-04-15|Interesting interaction between cern_meta module a|
|19670|New|Enh|2003-05-05|content type header supplied upon PUT is thrown aw|
|20036|Ass|Nor|2003-05-19|Trailing Dots stripped from PATH_INFO environment |
|21253|New|Nor|2003-07-01|Mime magic doesn't continue if type is specifed fo|
|21260|New|Nor|2003-07-02|CacheMaxExpire directive not enforced !           |
|21533|Ass|Cri|2003-07-11|Multiple levels of htacces files can cause mod_aut|
|22138|Inf|Cri|2003-08-05|Webdav is not preccessing special chars right.    |
|22237|New|Enh|2003-08-08|option to disable ServerSignature on index pages  |
|22484|Opn|Maj|2003-08-16|semaphore problem takes httpd down                |
|22686|Opn|Nor|2003-08-25|ab: apr_poll: The timeout specified has expired (7|
|22898|Opn|Nor|2003-09-02|nph scripts with two HTTP header                  |
|23167|Inf|Cri|2003-09-14|--enable-layout never goes to apr apr-util        |
|23181|New|Nor|2003-09-15|Status 304 (Not modified) and chunking leads to an|
|23238|New|Cri|2003-09-18|non-async-signal-safe operations from signal handl|
|23330|New|Enh|2003-09-22|Enhance ApacheMonitor to view and control Tomcat s|
|23911|Opn|Cri|2003-10-18|CGI processes left defunct/zombie under 2.0.54    |
|24031|New|Enh|2003-10-23|Passphrase protected private key in SSLProxyMachin|
|24095|Opn|Cri|2003-10-24|ERROR "Parent: child process exited with status 32|
|24437|Opn|Nor|2003-11-05|mod_auth_ldap doubly-escapes backslash (\) charact|
|24890|Opn|Nor|2003-11-21|Apache config parser should not be local aware ( g|
|25014|New|Enh|2003-11-26|A flexible interface for mod_log_config           |
|25201|New|Enh|2003-12-04|Provide Cache Purge operation                     |
|25240|Inf|Enh|2003-12-05|SSL Library Error: 336105671 logged as information|
|25435|New|Enh|2003-12-11|sethandler and directoryindex not playing nice    |
|25469|Opn|Enh|2003-12-12|create AuthRoot for defining paths to auth files  |
|25484|Ass|Nor|2003-12-12|Non-service Apache cannot be stopped in WinXP     |
|25543|Inf|Nor|2003-12-15|mod_proxy_ajp overwrites existing response headers|
|25667|New|Nor|2003-12-19|Memory leak in function ssl_scache_dbm_retrieve().|
|25863|New|Enh|2004-01-02|new per-host initialization hooks                 |
|26005|New|Nor|2004-01-08|SERVER_NAME incorrect when using IPv6 address in U|
|26142|New|Maj|2004-01-14|EnableSendFile Off for Windows XP Home            |
|26153|Opn|Cri|2004-01-15|Apache cygwin directory traversal vulnerability   |
|26368|New|Min|2004-01-23|File extensions in AddDescription treated as part |
|26446|New|Nor|2004-01-26|flush buckets followed by eos bucket emit multiple|
|26478|New|Enh|2004-01-28|mod_dav does not expose a method for setting the D|
|26835|New|Enh|2004-02-10|[PATCH] Mod_status Readability & Browser Side Tabl|
|27257|Ass|Enh|2004-02-26|rotatelogs with getopt and setuid                 |
|27578|New|Enh|2004-03-10|made getlastmodified a writable property          |
|27715|Ass|Enh|2004-03-16|Client sending misformed Range "bytes = 0-100" ins|
|27791|Inf|Nor|2004-03-18|mod_cache doesn't re-cache expired content        |
|27835|New|Enh|2004-03-22|When proxying FTP, all errors turns into 404      |
|27869|New|Enh|2004-03-23|stopping and starting httpd again immediately caus|
|28854|Inf|Nor|2004-05-09|Build fails with missing library call on Solaris i|
|28903|New|Enh|2004-05-11|Hooks to add environment variables to CGI and othe|
|29090|Ass|Enh|2004-05-19|MultiviewsMatch NegotiatedOnly extensions not resp|
|29165|New|Nor|2004-05-24|Parent directory icon not correct                 |
|29446|New|Enh|2004-06-08|want directive for setting content negotiation qua|
|29449|New|Enh|2004-06-09|Limit length of specified fields in LogFormat     |
|29450|New|Enh|2004-06-09|Improved logging for mod_access                   |
|29510|Ass|Enh|2004-06-10|ab does not support multiple cookies              |
|29644|Ver|Nor|2004-06-17|mod_proxy keeps downloading even after the client |
|29755|Opn|Nor|2004-06-23|mod_usertrack should use err_headers_out          |
|29822|New|Enh|2004-06-26|implement FTP 'PUT' support in proxy_ftp.c        |
|29941|Ass|Enh|2004-07-06|log files are not tested for availability on confi|
|30259|Ass|Enh|2004-07-22|When proxy connects to backend, a DNS lookup is do|
|30505|Ass|Enh|2004-08-05|Apache uses 'Error', and not lower level event typ|
|30730|Inf|Nor|2004-08-18|[PatchAvailable] mod_actions and Server-Status    |
|30865|Inf|Maj|2004-08-26|mod_disk_cache leaves many temporary files slowing|
|31302|Opn|Cri|2004-09-19|suexec doesn't execute commands if they're not in |
|31311|New|Enh|2004-09-20|Remote user not logged in reverse proxy scenario  |
|31352|Ass|Enh|2004-09-21|RFE, Bind to LDAP server with browser supplier use|
|31418|Opn|Nor|2004-09-25|SSLUserName is not usable by other modules        |
|31484|New|Maj|2004-09-30|Custom environment variables not passed to content|
|31490|New|Nor|2004-09-30|mod_proxy_ftp renders filenames with spaces badly |
|31565|New|Enh|2004-10-06|Won't start correctly if parent closed stdin, stdo|
|31679|New|Enh|2004-10-12|If the argument of a CGI has two or more consecuti|
|31709|Inf|Nor|2004-10-13|Raises an error on SSL name based virtualhosts (wi|
|31712|New|Enh|2004-10-14|config_file is NULL at ap_walk_config etc         |
|31952|New|Enh|2004-10-29|mod_proxy and RealPlayer: audio content streaming |
|32051|Opn|Nor|2004-11-04|mod_example is not thread safe                    |
|32328|Opn|Enh|2004-11-19|Make mod_rewrite escaping optional / expose intern|
|32346|New|Enh|2004-11-22|mod_include/include virtual checks content-type is|
|32524|New|Enh|2004-12-03|ab: add an option to specify a source address     |
|32703|Inf|Enh|2004-12-14|Cannot determine that Apache is frozen if /var fil|
|32750|Ass|Maj|2004-12-17|mod_proxy + Win32DisableAcceptEx = memory leak    |
|32877|New|Enh|2004-12-29|wrong utf-8 encoding/escaping in a href for umlaut|
|33084|New|Enh|2005-01-13|Optional certificate validity period check on SSLV|
|33089|New|Nor|2005-01-13|mod_include: Options +Includes (or IncludesNoExec)|
|33207|New|Nor|2005-01-23|Results of my suexec.c code audit                 |
|33215|New|Nor|2005-01-24|Cygwin build/install.sh fix (OSTYPE => ext=.exe)  |
|33512|Inf|Maj|2005-02-11|mod_mem_cache and possibly mod_deflate            |
|33627|New|Nor|2005-02-18|Bite-sized changes making progress towards compila|
|33685|New|Maj|2005-02-22|Unable to install in the path containing non engli|
|34270|Inf|Nor|2005-04-01|Large POSTs over SSL from Internet Explorer do not|
|34375|New|Enh|2005-04-08|enhancements for mod_include                      |
|34377|New|Enh|2005-04-08|Allow the overriding of 401 Unauthorized returns f|
|34405|New|Enh|2005-04-11|adds DOCUMENT_NAME_WITHOUT_SUFFIX to mod_include  |
|34508|New|Nor|2005-04-19|Randomly slow graceful restart, not accepting new |
|34519|New|Enh|2005-04-19|Directory index should emit valid XHTML           |
|35049|New|Nor|2005-05-24|let AddDefaultCharset apply to text/css and applic|
|35077|New|Nor|2005-05-26|mod_dav passes incorrect paths with LocationMatch |
|35083|Inf|Enh|2005-05-26|Certificate validation problems trapping          |
|35098|Ver|Maj|2005-05-27|Install fails using --prefix                      |
|35154|New|Nor|2005-06-01|Support for NID_serialNumber, etc. in SSLUserName |
|35245|New|Nor|2005-06-06|cache ignores max-age cache-directive in requests |
|35250|New|Enh|2005-06-07|[PatchAvailable] add logging to mod_proxy_connect |
|35280|New|Nor|2005-06-09|FTP proxy breaks RFC 2428 when trying to fall back|
|35556|Inf|Nor|2005-06-30|CRL files not re-read by HUP                      |
|35652|Opn|Min|2005-07-07|Improve error message: "pcfg_openfile: unable to c|
|35702|New|Nor|2005-07-12|Using with https URL, ab freezes or gets SIGSEGV o|
|35781|New|Nor|2005-07-18|ap_sub_req_method_uri() bypasses Limit security co|
|35981|Inf|Maj|2005-08-02|mod_dav overrides dav_fs response on PUT failure  |
|36286|New|Enh|2005-08-20|configtest doesn't check SSL certificates         |
|36492|New|Nor|2005-09-04|split-logfile script dies when splitting log of ma|
|36495|Inf|Nor|2005-09-05|mod_proxy_ajp: ajp_check_msg_header() got bad sign|
|36564|New|Enh|2005-09-08|make mod_ldap really universal                    |
|36636|New|Maj|2005-09-13|database write lock taken for PROPFIND operations |
|36676|New|Nor|2005-09-15|time() bug in httpd/os/win32/util_win32.c:wait_for|
|36710|Opn|Blk|2005-09-19|CGI output not captured                           |
|36724|New|Nor|2005-09-20|Don't install Apache Monitor by default           |
|37110|New|Nor|2005-10-17|Build fails when source tree is read-only         |
|37196|Inf|Min|2005-10-21|Wrong "Parent directory" link                     |
|37201|New|Enh|2005-10-21|Add <IfInterface IP> syntax to apache configuratio|
|37290|Opn|Min|2005-10-28|DirectoryIndex don't work in scriptaliased directo|
|37307|New|Enh|2005-10-31|Can't suppress error messages                     |
|37355|New|Enh|2005-11-04|Allow to specify Proxy-Authorization in ProxyRemot|
|37360|New|Maj|2005-11-04|Install fails on Windows XP x64 when program files|
|37402|New|Nor|2005-11-08|mod_proxy has stopped allowing POST sub-requests  |
|37514|Inf|Nor|2005-11-15|mod_proxy buffers chunked data.                   |
|37564|New|Enh|2005-11-19|Suggestion: mod_suexec SuexecUserGroup directive i|
|37587|Inf|Min|2005-11-22|mod_status Total Traffic value goes up then down? |
|37823|Inf|Nor|2005-12-07|The openssl library linked is different between ht|
|37920|New|Maj|2005-12-15|mod_proxy does not flush data on POST requests fro|
|38116|New|Enh|2006-01-04|Chroot-Patch for SuExec                           |
|38164|New|Nor|2006-01-06|wrong status code for failed COPY/MOVE            |
|38182|New|Nor|2006-01-08|COPY ignores authority in Destination header      |
|38218|New|Enh|2006-01-10|Multiline Comments for *.conf files               |
|38240|Inf|Nor|2006-01-12|apache restart segfault with mutliple Include dire|
|38325|Opn|Nor|2006-01-20|impossible to determine AUTH_TYPE of interpreted r|
|38355|Unc|Enh|2006-01-23|DSO support for mod_rewrite                       |
|38369|New|Enh|2006-01-24|mod_proxy keeps alive connections that should be b|
|38408|New|Nor|2006-01-27|SSI environment vars not set in spawned processes |
|38419|New|Nor|2006-01-27|Problems with large WebDAV properties             |
|38478|New|Maj|2006-02-01|A client starting a SSL renegotiation can crash th|
|38515|New|Enh|2006-02-05|Dynamic LDAP Group Support                        |
|38550|New|Enh|2006-02-07|Setting headers based on proxied data             |
|38571|New|Enh|2006-02-08|CustomLog directive checked by apachectl configtes|
|38756|Inf|Nor|2006-02-22|errors with running make                          |
|38786|New|Nor|2006-02-26|"IndexOption VersionSort" has problems with traili|
|38827|New|Reg|2006-03-02|mod_disk_cache trying to rename locked tempfile on|
|38864|Inf|Enh|2006-03-06|ProxyPassReverse fails in <Location>              |
|38903|New|Maj|2006-03-09|r->allowed does not affect Allow response header  |
|38923|New|Min|2006-03-10|mod_speling incorrectly escapes linked URLs       |
|38928|New|Min|2006-03-11|propose removing "VARIANTS" feature               |
|38995|New|Nor|2006-03-16|httpd tries to communicate with the CGI daemon eve|
|39111|New|Nor|2006-03-27|Potential bug brought by mmapfile (mod_file_cache)|
|39128|Inf|Maj|2006-03-28|Apache 2.2 will not compile mod_ssl library's corr|
|39185|Inf|Nor|2006-04-03|Approximately in 1-2 weeks of work the server hang|
|39216|New|Maj|2006-04-05|mod_disk_cache trying to rename locked file, decre|
|39238|New|Nor|2006-04-07|mod_auth_dbm requires mod_auth or "no groups file?|
|39275|Opn|Nor|2006-04-11|slow child_init causes MaxClients warning         |
|39287|New|Nor|2006-04-12|Incorrect If-Modified-Since validation (due to syn|
|39299|New|Nor|2006-04-13|Internal Server Error (500) on COPY               |
|39329|Inf|Nor|2006-04-17|mod_dbd reconnection and prepared statements      |
|39370|New|Nor|2006-04-20|SSL session will be removed if the client is sendi|
|39380|Inf|Nor|2006-04-21|mod_disk_cache eats memory, has no LFS support, et|
|39418|New|Nor|2006-04-26|CacheMaxExpire directive not enforced             |
|39448|New|Min|2006-04-29|old-style <directory proxy:*> doesn't give any war|
|39498|New|Nor|2006-05-06|accept_filter in apr assumes if found in sys/socke|
|39517|New|Nor|2006-05-08|Corrupt chunked transfer-encoding with Content Neg|
|39658|Opn|Nor|2006-05-25|mod_proxy_ajp SSL Key Size Bug                    |
|39673|New|Nor|2006-05-29|mod_proxy opens connections that disturb NTLM     |
|39692|New|Nor|2006-05-31|mod_proxy_balancer doesn't retry a failed request |
|39723|Inf|Enh|2006-06-05|Forward proxy does not work in tranparent mode    |
|39727|Ass|Nor|2006-06-05|Incorrect ETag on gzip:ed content                 |
|39730|New|Nor|2006-06-06|LanguagePriority and DefaultLanguage are Case Sens|
|39737|New|Nor|2006-06-06|LogFormat "%{tid}P" reports wrong thread id on Win|
|39748|New|Enh|2006-06-07|Header and POST support for mod_include           |
|39753|New|Nor|2006-06-07|incorrect source for LOCALE Decimal Symbol in Win2|
|39785|Inf|Nor|2006-06-12|Status code 408 (Request Timeout) is not logged   |
|39807|Opn|Enh|2006-06-13|large files / filesystem corruption can cause apac|
|39902|New|Nor|2006-06-27|HeaderName directive breaks mod_filter somehow    |
|39904|New|Nor|2006-06-27|graceful restart error and cpu load               |
|39913|Ass|Blk|2006-06-27|detection of static OpenSSL libraries requiring li|
|39916|New|Nor|2006-06-28|Core Filters & non-blocking Sendfile              |
|39923|New|Nor|2006-06-28|AddDescription doesn't work in server config with |
|39928|New|Nor|2006-06-28|port no detected when file name not in URL        |
|39935|New|Nor|2006-06-29|AddDescription does not do literal comparisons on |
|39973|Ass|Enh|2006-07-06|apache software folder should be movable          |
|40035|New|Cri|2006-07-13|Windows Server 2003 "("R2")" 64-Bit Edition no cgi|
|40060|New|Nor|2006-07-17|AuthGroupFile should accept /etc/group syntax     |
|40075|New|Enh|2006-07-19|unable to use ldap groups that contain DNs and use|
|40102|Opn|Nor|2006-07-24|SCRIPT_NAME set incorrectly with mod_rewrite      |
|40146|New|Nor|2006-07-31|mod_ssl info in server_info is blank              |
|40174|New|Min|2006-08-03|Unable to get IndexOptionis ScanHTMLTitles to work|
|40180|Inf|Maj|2006-08-03|Mod_dav and remove folder doesn't work with Micros|
|40190|New|Nor|2006-08-05|translate file                                    |
|40196|New|Nor|2006-08-06|EILSEQ handling, NoImplicitAdd should work, and so|
|40217|Opn|Nor|2006-08-08|mod_dav PROPFIND ignores access restrictions on it|
|40266|Inf|Blk|2006-08-16|berkeley db support in httpd is screwed           |
|40312|New|Nor|2006-08-24|ssl_engine_init.c, ssl_init_ctx_verify contains a |
|40373|New|Nor|2006-08-31|mod_dir adds trailing slash after internal redirec|
|40408|New|Blk|2006-09-04|Apache 2.2.3 is not starting                      |
|40416|New|Maj|2006-09-05|mod_proxy_ftp cannot connect under http load in fo|
|40441|New|Enh|2006-09-08|intelligently handling dynamic subdomains         |
|40453|New|Nor|2006-09-09|lexicographic compare in RewriteCond isn't lexicog|
|40463|New|Nor|2006-09-11|piped logging causes some weird kill()ing         |
|40513|Opn|Maj|2006-09-14|Seeding PRNG with 0 bytes of entropy              |
|40514|New|Nor|2006-09-14|would like GracefulShutdownTimeout to work for gra|
|40540|Inf|Nor|2006-09-19|Bad interaction between MultiViews and SetOutputFi|
|40541|New|Nor|2006-09-19|Action rewrites URI used by Location?             |
|40571|New|Nor|2006-09-21|mod_proxy_ajp don't works with mod_usertrack      |
|40586|New|Enh|2006-09-22|Add option to supress default '-' output          |
|40746|New|Enh|2006-10-12|Feature request: ProxyAllow directive             |
|40749|New|Min|2006-10-12|magic file with string and "%n" causes Apache chil|
|40781|New|Nor|2006-10-17|PATH_TRANSLATED: 'redirect:/~jablko/gallery2/main.|
|40808|New|Enh|2006-10-23|ProxyRemote with optional proxy authentication    |
|40859|New|Enh|2006-11-01|[PATCH] Support -F force option to 'ab' support to|
|40917|New|Nor|2006-11-07|configure does not detect OpenSSL shared lib on HP|
|40953|New|Min|2006-11-12|Should not send any data in 1xx/204/304 reply from|
|40984|Inf|Enh|2006-11-16|AddIcon, AddIconByType for OpenDocument format    |
|40987|Opn|Enh|2006-11-16|ProxyVia Block doesn't remove Via: header for reve|
|41000|New|Nor|2006-11-19|mod_authn_dbd have an error, in function 'authn_db|
|41025|New|Nor|2006-11-23|ROBOTS META-Tag directive needed in mod_autoindex |
|41088|New|Nor|2006-11-30|installation backcolor is wrong (white)           |
|41111|New|Enh|2006-12-05|New option for filters: run only if there are spar|
|41114|New|Blk|2006-12-06|ACL HTTP method is rejected by mod_proxy_ajp      |
|41130|New|Nor|2006-12-07|mod_mime and mod_negotiation type-map both clobber|
|41143|Opn|Nor|2006-12-10|Incorrect ap_getline assumption in mod_proxy_http |
|41195|New|Nor|2006-12-17|properly set the parent pid on shutdown           |
|41196|New|Nor|2006-12-17|worker mpm usage of apr's memory pools is not thre|
|41200|Inf|Maj|2006-12-18|SSI include, prevent client from receiving full ou|
|41240|Inf|Enh|2006-12-25|BRF files support                                 |
|41262|Inf|Nor|2006-12-29|Embedded pcre causes runtime segfault             |
|41362|Inf|Maj|2007-01-14|mod_disk_cache and mod_include conflict generating|
|41375|Inf|Min|2007-01-15|Using same SSL Certificate with different ServerNa|
|41391|New|Min|2007-01-17|too long period setting makes max-age overflow    |
|41412|New|Enh|2007-01-19|RewriteRule Skip should take negative arguments   |
|41435|New|Nor|2007-01-22|Authentication fails with 500 Server Error        |
|41450|Inf|Cri|2007-01-24|Empty page (200 OK) while max-age is empty        |
|41485|New|Nor|2007-01-28|LDAP client certificates not usable in 2.2.x/trunk|
|41529|New|Enh|2007-02-02|Accept BOM in .htaccess                           |
|41556|New|Enh|2007-02-07|Feature Request: format string for masking ip addr|
|41621|New|Maj|2007-02-15|Apache 2.2.4 backend problem with Apache 2.0.59 Re|
|41646|New|Nor|2007-02-16|wrong headers are sent for HEAD requests when Prox|
|41676|Opn|Enh|2007-02-22|Refactor mod_proxy_ftp                            |
|41685|New|Enh|2007-02-22|Implement optional HTTP Authentication in a standa|
|41712|Inf|Nor|2007-02-26|threads locked at logging state                   |
|41729|New|Maj|2007-02-28|error message: ap_get_scoreboard_lb(130) failed in|
|41744|Inf|Maj|2007-03-01|SSI resolves includes but removes original HTML   |
|41763|Opn|Nor|2007-03-05|mod_disk_cache ignores CacheDirLevels and CacheDir|
|41764|New|Nor|2007-03-05|error state and conf                              |
|41771|Inf|Nor|2007-03-06|Erro with mod_proxy_ajp or mod_prox_balancer      |
|41867|New|Nor|2007-03-16|<DirectoryMatch> Matches Files                    |
|41925|New|Nor|2007-03-21|trivial patch to add automatic crypting to 'dbmman|
|41929|New|Nor|2007-03-22|ISAPI ssl variables                               |
|41953|New|Nor|2007-03-26|pidfile remains when 2nd pass of post-config retur|
|41962|New|Min|2007-03-27|Need mod_auth_ldap to authenticate with Active Dir|
|42001|New|Cri|2007-03-30|LINUX : Could not set LDAP_OPT_X_TLS to LDAP_OPT_X|
|42027|Inf|Nor|2007-04-02|FileETag directive appears to be ignored          |
|42054|New|Nor|2007-04-04|service name and parameter issues                 |
|42079|New|Nor|2007-04-10|SSLRequire: Additional access in sub-directoies   |
|42082|New|Nor|2007-04-10|filter_init is called multiple times after an INCL|
|42182|Inf|Nor|2007-04-22|Mime types for cached proxied content             |
|42216|New|Enh|2007-04-24|RFE -- external overload procedure                |
|42262|Inf|Nor|2007-04-26|mod_dav /  worker fails to allocate memory and seg|
|42287|Inf|Nor|2007-04-28|chunked encoded response to POST request to cgi sc|
|42368|Inf|Nor|2007-05-09|httpd is crashing if conf/extra/httpd-manual.conf |
|42373|Inf|Maj|2007-05-09|REPORT request fails over mod_proxy               |
|42404|New|Enh|2007-05-13|Filename/info for disk-cached proxied remote URLs |
|42425|Inf|Nor|2007-05-15|Additional freshness checks in mod_cache.c cause m|
|42471|Inf|Nor|2007-05-21|clients with IE7 take 3megs per page load. httpd.e|
|42492|Inf|Nor|2007-05-22|mod_proxy_ajp with SSL front end: data corruption |
|42499|Inf|Nor|2007-05-23|Backslash produces a 404 error instead of going to|
|42548|New|Nor|2007-05-30|INCLUDE negotiating language aborts with APR_POOL_|
|42561|New|Enh|2007-05-31|[PATCH] AuthLDAPRemoteUserAttribute only applies i|
|42633|New|Min|2007-06-11|mod_info gives wrong information about actual conf|
|42665|New|Nor|2007-06-14|spurious attempt to open ".../file.html/.htaccess"|
|42666|New|Nor|2007-06-14|code & docs corrections for FollowSymLinks and Sym|
|42667|New|Nor|2007-06-14|mod_proxy_balancer not reporting when workers are |
|42668|Inf|Nor|2007-06-14|balancer_manager shows Ok status for the workers t|
|42687|New|Nor|2007-06-18|Fully delegate certificate & key semantics to the |
|42688|New|Enh|2007-06-18|engine managed keys: per process openssl context  |
|42690|New|Nor|2007-06-18|realm is not set for each configured directory whe|
|42695|Opn|Cri|2007-06-18|mod_proxy balancer problem                        |
|42699|New|Enh|2007-06-20|share mod_logio data with other modules           |
|42711|New|Enh|2007-06-20|format string for whole log entries not just id   |
|42732|Opn|Maj|2007-06-25|Authentication against database issue.            |
|42763|New|Nor|2007-06-28|graceful-stop/restart loops go loop too far       |
|42923|Inf|Maj|2007-07-17|vhost certificate NOT overriding cert from the _de|
|42972|Inf|Nor|2007-07-25|Certificate list in mod_ssl module context are not|
|42977|New|Nor|2007-07-25|DAV locking is busted when apr-util is built with |
|42987|New|Nor|2007-07-27|Weak Etags in Apache are useless and violate RFC 2|
|43012|New|Nor|2007-08-02|AIX instdso.sh libphp5.so                         |
|43027|New|Enh|2007-08-03|Header in default language                        |
|43033|New|Nor|2007-08-04|apxs does not correctly detect module name (w/o -n|
|43177|New|Nor|2007-08-21|child pid xxxxx exit signal Segmentation fault    |
|43218|New|Nor|2007-08-27|Wrong cert used for vhost if ServerName is same   |
|43220|Opn|Cri|2007-08-27|mod_proxy truncating ajp output                   |
|43249|Inf|Maj|2007-08-30|ldap_simple_bind_s failed when using SUN LDAP Libs|
|43275|New|Enh|2007-08-31|Remove avoidable network transactions in mod_proxy|
|43289|New|Nor|2007-09-02|XBitHack full g+x returns zero sized response on I|
|43308|New|Nor|2007-09-04|Persistent backend connections not supported for R|
|43352|New|Nor|2007-09-11|Apache2: out of memory during heavy webdav files c|
|43441|New|Nor|2007-09-20|Incorrect HTTP status for pre-commit-blocked autov|
|43471|New|Min|2007-09-25|no need to create a global pool on open_scoreboard|
|43481|New|Cri|2007-09-26|AuthLDAPURL must contain a final path of branch?(l|
|43494|New|Nor|2007-09-26|mod_cgid does not kill never ending scripts       |
|43502|New|Enh|2007-09-28|httpd fails to start if log directory does not exi|
|43513|New|Nor|2007-09-29|Persistent backend connections for ProxyPassMatch |
|43532|Inf|Cri|2007-10-02|Error while compiling Apache 2.2.3 on HPUX        |
|43533|Opn|Nor|2007-10-02|Frequent crashes in mod_include's bndm()          |
|43561|New|Nor|2007-10-05|apxs -q anomaly                                   |
|43577|Inf|Blk|2007-10-09|mod_authnz_ldap not working under WLDAP32 (novell/|
|43607|New|Nor|2007-10-11|mod_proxy sends data on closed connections without|
|43649|Opn|Trv|2007-10-18|mod_autoindex is generating invalid XHTML markup  |
|43652|New|Enh|2007-10-18|Suggest small change for big fix with SuExec & Vir|
|43666|New|Nor|2007-10-20|CGI works, but client denied error messages in err|
|43679|New|Enh|2007-10-23|Contributed tests for checking that subrequests ta|
|43723|Inf|Cri|2007-10-29|Apache 2.2.6 segfault when using mod_dbd          |
|43724|New|Cri|2007-10-29|Apache 2.2.6 segfault on url wich not in cache    |
|43755|New|Enh|2007-10-31|Add a SSLOptions to don't fill SSL_CLIENT_VERIFY  |
|43762|New|Enh|2007-10-31|Misleading tips in an error message about internal|
|43777|New|Nor|2007-11-01|Wrong encoding of <href> element in response      |
|43778|New|Nor|2007-11-01|Wrong responses if httpd has not access to some el|
|43785|New|Enh|2007-11-02|Tracking the per-hit impact of mod_include        |
|43792|New|Enh|2007-11-04|Feature proposal - bind phase                     |
|43818|New|Nor|2007-11-08|PROPFIND on -w- collections returns 207 MULTI-STAT|
|43838|New|Enh|2007-11-11|If-Modified-Since request and htcacheclean conflic|
|43895|New|Nor|2007-11-18|mod_mbox improvements                             |
|43897|Inf|Cri|2007-11-18|Huge memory consumption httpd 2.2.6, mod_proxy - m|
|43931|New|Enh|2007-11-21|OpenSSL autoconfig support for mod_ssl            |
|43943|New|Nor|2007-11-22|SHMCB crash due to misalignment and GCC 4 optimiza|
|43958|Inf|Maj|2007-11-26|mod_proxy_balancer not balancing correct in combin|
|43997|Opn|Min|2007-11-29|Only issue "Init: SSL server IP/Port conflict" if |
|44025|Inf|Nor|2007-12-05|Apache 2.2.6 fails to configure on OpenBSD 4.1    |
|44027|Ass|Enh|2007-12-05|Internationalized Domain Name (IDN) support       |
|44031|Opn|Maj|2007-12-06|RemoveHandler inside subdir location              |
|44034|Ass|Enh|2007-12-06|mpm_winnt doesn't call monitor hook               |
|44105|New|Nor|2007-12-19|Core dumps when using Proxy Keepalive             |
|44155|New|Enh|2007-12-31|smarter retry for LDAP_UNAVAILABLE, LDAP_BUSY, etc|
|44181|Opn|Enh|2008-01-07|add UnAlias                                       |
|44188|Inf|Cri|2008-01-08|Empty response for certain requests (mod_proxy as |
|44218|New|Min|2008-01-13|mod_autoindex shows the default icon for files wit|
|44221|Opn|Cri|2008-01-14|CheckCaseOnly On does not stop Multiple Choices ba|
|44250|New|Nor|2008-01-16|OSX 10.5: __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_|
|44279|New|Enh|2008-01-22|Add "iterate" flag to apply rule in a loop while p|
|44302|New|Nor|2008-01-27|AuthLDAPURL does not accept ldapi:// urls         |
|44305|New|Nor|2008-01-28|Inconsistent configuration for suexec path        |
|44316|New|Nor|2008-01-28|httpd 2.0 does not follow ScriptAliases when invok|
|44322|New|Enh|2008-01-29|mod_proxy ProxyPassReverseCookieDomain with no dom|
|44351|New|Nor|2008-02-04|File descriptor leak when using prg RewriteMap    |
|44363|Inf|Maj|2008-02-05|Slow file transfers                               |
|44384|Ass|Nor|2008-02-09|mod_ssl on MacOS X 10.5.1 does not work because of|
|44453|New|Nor|2008-02-19|list_hooks.pl doesn't parse declarations that span|
|44476|New|Maj|2008-02-23|Apache service fails to start due to missing depen|
|44503|Inf|Blk|2008-02-27|Errors during SSL handshake                       |
|44518|New|Enh|2008-03-02|Don't set expires header on HTTP redirect.        |
|44578|New|Enh|2008-03-11|mod_authn_dbd option to let database validate pass|
|44601|New|Trv|2008-03-13|Add a lowercase value to Vary header for consisten|
|44602|New|Enh|2008-03-13|Options for modfying Content-Location (relative OR|
|44622|Inf|Nor|2008-03-17|POST fails to SSL vhost with proxy to HTTP backend|
|44631|New|Nor|2008-03-18|with-included-apr fails to work when using a separ|
|44638|New|Nor|2008-03-19|sed error in httpd.spec.in                        |
|44656|New|Nor|2008-03-22|Tries to retrive error document 404 instead of 406|
|44657|New|Enh|2008-03-22|prefer-type, -encoding, and -charset cookie? (as p|
|44670|New|Min|2008-03-25|Apache httpd 2.2.8 : Cannot ./configure when curre|
|44696|Inf|Nor|2008-03-27|mod_cache sometimes serves old content despite hav|
|44730|New|Nor|2008-04-01|duplicate query string in remote server url when u|
|44752|New|Nor|2008-04-03|Suexec does not correctly check that scripts are i|
|44757|New|Enh|2008-04-04|adding stderr buckets to mod_cgi                  |
|44758|New|Enh|2008-04-04|LimitRequestBody undocumented behaviour with proxi|
|44779|New|Enh|2008-04-08|Using commas and semicolons for content negotiatio|
|44855|New|Nor|2008-04-22|irregular balancing with sticky-session after re-e|
|44865|Ass|Nor|2008-04-23|mod_dav's lock database becomes consistently corru|
|44870|Inf|Nor|2008-04-24|process spinning on 100% cpu                      |
|44923|Inf|Min|2008-05-02|consequences of multiple LDAPTrustedGlobalCert    |
|44924|New|Enh|2008-05-02|allow 'CACERTDIR' in mod_ldap                     |
|44940|New|Maj|2008-05-06|Httpd randomly breaks when verifying client certif|
|44981|New|Enh|2008-05-12|Digital Certificates (CN Based) for Authorization |
|45022|New|Nor|2008-05-16|Processing of escaped glob patterns in "Include" d|
|45023|Opn|Reg|2008-05-16|DEFLATE preventing 304 NOT MODIFIED response      |
|45049|New|Nor|2008-05-20|mod_mem_cache caches partial content when client c|
|45054|New|Nor|2008-05-21|SSLVerifyClient optional_no_ca is broken          |
|45058|New|Nor|2008-05-21|Mod_SSL does not set AUTH_TYPE with client certifi|
|45078|New|Nor|2008-05-27|mod_proxy stalls when uploading files             |
|45103|Ass|Min|2008-05-30|apachectl should do config test before reload/rest|
|45111|New|Enh|2008-06-01|make mod_usertrack use mod_unique_id if available |
|45116|New|Nor|2008-06-02|fail to check return value of apr_file_dup2() in /|
|45148|New|Enh|2008-06-06|The actual host of the request will be more helpfu|
|45184|New|Enh|2008-06-11|Regular Expression in directive ServerAlias       |
|45187|New|Maj|2008-06-11|Long File name requests gives FORBIDDEN response  |
|45225|New|Nor|2008-06-17|XBitHack breaks DirectoryIndex + MultiViews conten|
|45253|New|Nor|2008-06-23|Unable to build httpd 2.2.9 on Solaris/SPARC      |
|45257|New|Enh|2008-06-23|add (en)force option for UseCanonicalName         |
|45259|New|Enh|2008-06-23|Add /home/[a-z]/* scheme to UserDir conf          |
|45275|New|Maj|2008-06-25|Locked files during expired page renew in disk cac|
|45281|New|Enh|2008-06-25|SITE CHMOD/SEARCH                                 |
|45287|Inf|Min|2008-06-26|build failure because of difference between BSD an|
|45297|New|Min|2008-06-27|mod_dir does not manage correctly the user (r->use|
|45302|New|Enh|2008-06-28|ServerRoot directive                              |
|45355|New|Nor|2008-07-07|ab text and html output jumbo unification         |
|45356|New|Nor|2008-07-07|ab: optionally reduce resource usage (qsort and me|
|45371|New|Nor|2008-07-10|MSI installer requires uninstall of previous versi|
|45374|New|Blk|2008-07-10|Shared memory error on starting httpd with mod_lda|
|45379|Inf|Nor|2008-07-11|[Bug] svn merge, apache and trailing slashes      |
|45385|Inf|Nor|2008-07-11|unable to compile/make 2.2.9 with --enable-ldap   |
|45393|New|Nor|2008-07-14|Apache returns 500 Error when no LDAP credentials |
|45402|New|Nor|2008-07-15|mod_autoindex incorrectly fails to list files     |
|45405|New|Enh|2008-07-16|Allow binding port to be set for individual worker|
|45449|New|Nor|2008-07-21|[PATCH] Add support to WebDav to MOVE/COPY to remo|
|45456|New|Enh|2008-07-22|mod_dbd don't allow more then one database pool   |
|45487|New|Trv|2008-07-27|broken log messages on startup in win32 version   |
|45497|New|Nor|2008-07-29|Scoreboard slot leaked using MaxRequestsPerChild a|
|45512|Ass|Maj|2008-07-31|Bad Performance of mod_proxy with SSL on Solaris 1|
|45524|New|Enh|2008-08-01|Specifying multiple vhost aliases                 |
|45525|New|Enh|2008-08-01|Switch mod_autoindex to Tango icons               |
|45579|New|Nor|2008-08-06|unknown URI scheme in request-URI ignored         |
|45674|New|Enh|2008-08-22|Allow to change error code returned by "Require ld|
|45726|New|Enh|2008-09-02|Build in a maintenance functionallity             |
|45736|New|Nor|2008-09-03|mod_dav needs a directory for its locks and one sh|
|45754|New|Enh|2008-09-06|autoconf macros                                   |
|45763|New|Nor|2008-09-08|No openssl.cnf defined by default causes OpenSSL c|
|45773|New|Nor|2008-09-09|pcre build generates sources to srcdir rather than|
|45788|New|Nor|2008-09-11|mod_log_forensic output shouldn't be buffered when|
|45801|Opn|Nor|2008-09-13|SSLRequireSSL with strictrequire and satisfy any d|
|45838|New|Nor|2008-09-18|mod_authz_owner & directories                     |
|45868|New|Nor|2008-09-23|mod_mem_cache update of headers in cache object is|
|45900|New|Nor|2008-09-26|"make install" fails from read-only filesystem    |
|45905|New|Enh|2008-09-26|ErrorDocument and default URL                     |
|45922|New|Enh|2008-09-30|Expand the conditions under which "SSLVerifyClient|
|45923|New|Nor|2008-09-30|htpasswd tries to open(file, O_RDONLY | O_APPEND) |
|45926|Inf|Nor|2008-10-01|Unable to start apache 2.2.9                      |
|45986|New|Nor|2008-10-10|[info]...Invalid argument: core_output_filter: wri|
|46024|Opn|Nor|2008-10-16|--enable-static is not available in apache's confi|
|46037|Inf|Nor|2008-10-18|Configuration of trusted OCSP responder certificat|
|46040|New|Enh|2008-10-20|Check for existing version of Apache while install|
|46054|New|Nor|2008-10-21|Running httpd returns the error "bad user name nob|
|46070|New|Nor|2008-10-22|MSI installer does not validate custom installatio|
|46071|New|Enh|2008-10-22|Allowing space in between comma and last option in|
|46074|New|Enh|2008-10-23|Need of friendly and easy to use configuration gra|
|46139|New|Nor|2008-11-02|Apache Restart option is not working              |
|46140|New|Enh|2008-11-03|Change error state in balancer manager            |
|46188|Inf|Nor|2008-11-11|Core dumps in apache 2.0.59                       |
|46195|Opn|Nor|2008-11-12|ProxyPass fails with literal IPv6 address         |
|46215|New|Nor|2008-11-14|Race condition in bybusyness algorithm            |
|46231|New|Maj|2008-11-18|Connection Pooling with ajp depends on syntax ?   |
|46241|New|Enh|2008-11-19|mod_expires - ExpiresByPattern or ExpiresIf       |
|46267|New|Nor|2008-11-22|No shared modules build if use --with-apr and --wi|
|46270|New|Enh|2008-11-23|Add FIPS 140-2 mode for mod_ssl for FIPS 1.2 modul|
|46282|New|Nor|2008-11-24|apache2.2 reverse proxy causing full memory and sw|
|46316|New|Maj|2008-12-01|Proxied SSI ProxyTimeout render failure           |
|46317|Inf|Nor|2008-12-01|mod_authnz_ldap.c(373)  seg fault                 |
|46412|New|Nor|2008-12-17|make_child return value not checked               |
|46417|New|Cri|2008-12-19|[notice] Parent: child process exited with status |
|46428|Opn|Nor|2008-12-21|Spaces in URI doesn't encode in proxy-requests    |
|46442|New|Nor|2008-12-29|Semicolon in allow/deny all rules cause reverse lo|
|46449|New|Maj|2008-12-30|Output out of order from SSI include virtual      |
|46454|New|Min|2008-12-30|escaping wildcards in AddIcon filename matching   |
|46475|New|Nor|2009-01-04|build warnings.                                   |
|46499|New|Maj|2009-01-09|httpd accept() return EAGAIN error                |
|46521|New|Nor|2009-01-13|mod_dav doesn't show symlinks                     |
|46529|Ass|Nor|2009-01-14|Child httpd processes crash with Segmentation faul|
|46534|New|Nor|2009-01-14|mod_proxy_ajp scheme and port do not follow UseCan|
|46578|New|Nor|2009-01-21|Flawed header                                     |
|46582|Ver|Min|2009-01-22|RewriteMap internal functions are not well documen|
|46604|New|Nor|2009-01-26|Error thrown when trying to rpmbuild -tb httpd sou|
|46629|New|Maj|2009-01-29|Apache hanging on system calls for php and perl   |
|46634|Ass|Nor|2009-01-30|Requests sometimes take too long, wrong time taken|
|46644|New|Enh|2009-01-31|Clean way to pass custom environment variables to |
|46646|Ass|Nor|2009-02-01|check group membership is sometimes case sensitive|
|46650|Opn|Nor|2009-02-02|CustomLog enviroment condition SCRIPT_FILENAME    |
|46656|New|Enh|2009-02-03|ProxyErrorOverride inside location                |
|46669|New|Enh|2009-02-06|rotatelogs doesn't autocreate directories         |
|46671|Opn|Cri|2009-02-07|Apache periodicaly crashes .                      |
|46678|New|Nor|2009-02-09|Fixed Content-Length using mod_ext_filter with mod|
|46682|New|Nor|2009-02-09|mod_proxy EAI_AGAIN DNS failure                   |
|46685|Opn|Nor|2009-02-09|401 sent without WWW-Authenticate header when requ|
|46709|Opn|Reg|2009-02-12|Expect: 100-continue to an HTTP/1.0 server change |
|46724|Inf|Cri|2009-02-17|WinXP SP3 - Apache crashes on startup in libapr-1.|
|46743|New|Nor|2009-02-19|Inconsistent behavior of "RewriteOptions inherit" |
|46745|New|Maj|2009-02-20|ab.c error :  undefined reference to `BIO_set_call|
|46751|New|Nor|2009-02-21|Can passenv variables who's name contain '(' or ')|
|46762|New|Nor|2009-02-24|Error, SSL/TLS libraries were missing or unusable |
|46765|Opn|Nor|2009-02-25|doubled HTTP header leads to error (Redmine)      |
|46785|Inf|Nor|2009-03-02|Child process increases to 100% (CPU)             |
|46788|New|Nor|2009-03-02|Set resource limits to avoid denial of service att|
|46810|New|Nor|2009-03-05|apxs / apu-1-config outputting erroneous include p|
|46824|New|Nor|2009-03-09|RemoveOutputFilter will not work for Filters added|
|46845|Inf|Cri|2009-03-12|Apache crashes in Windows when using subversion(pr|
|46847|New|Nor|2009-03-13|WebDAV methods with encoding other than "identity"|
|46873|New|Nor|2009-03-18|feature request: connection count on balancer-mana|
|46884|New|Min|2009-03-20|Call to apu_dso_load Fails In apr_ldap_stub.c On O|
|46946|Inf|Nor|2009-03-31|mod_mbox shows email addresses in plain text      |
|46963|New|Nor|2009-04-03|KeepAliveTimout prevents child process from exitin|
|46969|New|Nor|2009-04-05|CustomLog format %m always GET on errors with loca|
|46970|New|Nor|2009-04-05|CustomLog %X does not record aborted connections w|
|47011|New|Reg|2009-04-09|mod_proxy/mod_proxy_balancer hot-standby BalancerM|
|47055|New|Blk|2009-04-20|SSLVerifyClient + Directory doesn't use cache sess|
|47063|New|Nor|2009-04-21|mod_proxy doesn't call post_request handler when t|
|47134|New|Nor|2009-05-01|Last resolve handling when sending client certific|
|47138|New|Nor|2009-05-01|Reverse Proxy & Balancer generate error fault when|
|47152|New|Maj|2009-05-04|Apache is only serving the first character in the |
|47159|New|Nor|2009-05-06|2.2.x logresolve doesn't support ipv6             |
|47167|New|Nor|2009-05-07|Authenticated sessions being switched by reverse p|
|47170|New|Enh|2009-05-08|rotatelogs ring buffer option                     |
|47180|New|Nor|2009-05-11|DBM ssl_scache setting can cause extreme performan|
|47220|Opn|Enh|2009-05-19|Access to environment variables                   |
|47241|New|Min|2009-05-22|Error in rewriting with character ':'             |
|47256|New|Enh|2009-05-23|Enable SSL on a per-port basis                    |
|47289|New|Nor|2009-05-30|Can't build with dynamic libraries on Mac OS 10.4 |
|47295|New|Nor|2009-06-01|AuthDBDUserPWQueryFmt/AuthDBDUserRealmQueryFmt in |
|47329|New|Nor|2009-06-07|SSLCADNRequest* & SSLCACertificate* silently do no|
|47340|New|Nor|2009-06-09|uldap_cache_comparedn() called without a lock     |
|47344|New|Enh|2009-06-10|[FEATURE REQUEST] RedirectCanonicalName           |
|47345|New|Enh|2009-06-10|rotatelogs timeout patch                          |
|47346|New|Maj|2009-06-10|mod_cache doesn't re-cache expired content when La|
|47387|Inf|Nor|2009-06-18|SSL_CLIENT_I_DN and SSL_CLIENT_S_DN use Email inst|
|47392|Opn|Nor|2009-06-18|<FilesMatch> is using the wrong directory         |
|47435|New|Nor|2009-06-26|mod_authz_host does reading of /etc/hosts on each |
|47438|Inf|Enh|2009-06-27|how to create a non-html "listing generated by the|
|47447|New|Enh|2009-06-29|Add possibility to use client IP as a value in Req|
|47484|New|Nor|2009-07-06|Spurious RewriteLock warning when using external m|
|47485|New|Enh|2009-07-06|HTML5 Websocket implementation                    |
|47514|New|Enh|2009-07-12|Personal data and restrictions based on subject di|
|47528|New|Maj|2009-07-14|Worker process won't restart more than once using |
|47542|New|Nor|2009-07-16|Piped logging processes killed before other proces|
|47562|Inf|Nor|2009-07-23|Apache/2.2.3 (Win32) mod_perl/2.0.3-rc1           |
|47578|New|Nor|2009-07-24|compile ERROR with ssl                            |
|47580|Opn|Nor|2009-07-25|mod_cache sends 200 response instead of 304       |
|47586|New|Nor|2009-07-27|httpd -k start doesn't start service when rotatelo|
|47591|New|Min|2009-07-27|show current HTTP_HOST in mod_status scoreboard   |
|47601|New|Enh|2009-07-29|Support X-Forwarded-For in forward proxy requests |
|47625|New|Nor|2009-08-02|2.2.12 win32 msi installer missing                |
|47634|New|Maj|2009-08-04|mod_ldap connection pool session keepalive not imp|
|47643|New|Enh|2009-08-04|added meta tags to xhtml output for ease of search|
|47657|New|Nor|2009-08-06|Make WebDAV MOVE atomic when replacing files on sa|
|47659|New|Nor|2009-08-07|makefile.win needs check for DBM_LIST, dies on bui|
|47664|New|Nor|2009-08-07|ap_proxy_canonenc: does not recode all high-byte c|
|47665|Inf|Blk|2009-08-09|Apache service well launched but blank Screen     |
|47691|New|Enh|2009-08-12|libtool invocations should use --tag              |
|47693|Opn|Nor|2009-08-13|GET request has race condition w.r.t. replacement |
|47706|Inf|Nor|2009-08-19|(20014)Internal error: proxy: error reading status|
|47716|New|Min|2009-08-20|LimitRequestFieldSize and friends not merged well |
|47719|Opn|Enh|2009-08-20|Broken symbolic link (symlink) causes wrong ErrorD|
|47723|New|Nor|2009-08-22|suEXEC and low RLimitMem gives "crit: invalid uid"|
|47743|Inf|Nor|2009-08-26|mod_so segfaults at server startup in ap_find_load|
|47753|New|Nor|2009-08-27|output and error channels not explicitly passed fo|
|47778|Opn|Enh|2009-09-03|wrong exit value on graceful restart              |
|47780|New|Nor|2009-09-03|Critical errors should be marked by time and level|
|47807|Inf|Nor|2009-09-09|Proxy dialog error with Apache 2.2.13             |
|47808|New|Maj|2009-09-09|Child process core dumps when enabling CRL        |
|47814|Inf|Maj|2009-09-10|openssl_pkcs7_sign error                          |
|47838|New|Enh|2009-09-14|Ability to Dynamically Inject Current Time Into a |
|47874|New|Nor|2009-09-18|mod_fcgid crashes if added during restart         |
|47895|New|Maj|2009-09-24|Incorrect 413 error handling                      |
|47908|New|Min|2009-09-27|'invalid result code' in error_log                |
|47981|New|Nor|2009-10-12|allow language specific html-versions (index.html.|
|47982|New|Nor|2009-10-12|correctly interprete non-standard HTTP_ACCEPT_LANG|
|47988|New|Nor|2009-10-12|Segmentation fault                                |
|47989|New|Nor|2009-10-13|Junk string appended to compressed dynamic content|
|47994|New|Enh|2009-10-14|ScriptInterpreterSource apparently broken in Windo|
|48020|New|Nor|2009-10-17|KCP+ Opera support for mod_auth_digest            |
|48037|Inf|Nor|2009-10-21|mod_proxy_http does not handle asynchronous keepal|
|48045|New|Nor|2009-10-23|Apache 2 initgroups alert, Max OS X, abnormal exit|
|48057|New|Nor|2009-10-26|mod_fcgid creates 1 more process then allowed     |
|48094|New|Nor|2009-11-01|Avoid a race condition in close_worker_sockets()  |
|48107|New|Maj|2009-11-02|Mutual Authentication: Order in ca-bundle influenc|
|48115|New|Enh|2009-11-03|Duration to receive the request, generate response|
|48130|New|Maj|2009-11-04|DAV operations on large filesets consume all the O|
|48154|New|Nor|2009-11-06|Requests through mod_isapi are not parsed by HTTP_|
|48164|New|Enh|2009-11-09|add new parameters to rotatelogs                  |
|48219|New|Nor|2009-11-17|Retrying the worker for seems to omit POST variabl|
|48228|New|Nor|2009-11-18|Renegocation requires multiple client authenticati|
|48246|New|Enh|2009-11-19|Check permissions on file/directory specified for |
|48254|New|Trv|2009-11-20|Bogus "DocumentRoot does not exist" warning when s|
|48283|New|Nor|2009-11-25|Proxy errors since httpd 2.2.12 with Tomcat 6.0.20|
|48291|New|Maj|2009-11-26|mod_substitute loops                              |
|48295|Opn|Nor|2009-11-27|ProxyPassReverseCookiePath: Not changing path corr|
|48301|New|Enh|2009-11-30|Feature request: improved connection status report|
|48309|New|Maj|2009-11-30|libapreq2-2.12: "make test" fails at request.t and|
|48312|Opn|Nor|2009-11-30|ProxyPassReverseCookiePath: Not changing path corr|
|48316|Inf|Nor|2009-12-01|ap_run_insert_filter doesn't work in cache_url_han|
|48354|New|Enh|2009-12-08|void ap_custom_response is not supporting the bina|
|48360|New|Enh|2009-12-09|provide sample configuration file for inclusion in|
|48361|New|Enh|2009-12-09|Add global server option for specifying desired DS|
|48364|Opn|Nor|2009-12-10|PHP-generated pages are not cached in spite of per|
|48369|New|Enh|2009-12-10|add option to automatically restart if a script is|
|48431|New|Nor|2009-12-22|Error logging doesn't work when configured to use |
|48440|Inf|Cri|2009-12-23|Segmentation Fault                                |
|48449|Inf|Nor|2009-12-28|make distclean removes core.c and core_filters.c  |
|48465|Opn|Enh|2009-12-30|Support TCP to connect to backends                |
|48499|New|Nor|2010-01-06|mod_rewrite can't redirect to files with ? in them|
|48500|New|Nor|2010-01-06|mod_mbox mishandles right-click to open msg in new|
|48508|New|Nor|2010-01-07|BalancerMember doesn't accept nocanon directive   |
|48549|New|Enh|2010-01-14|Add Cache-Control s-maxage support                |
|48576|New|Nor|2010-01-19|MOVE or COPY in WebDAV fails with 404 when file ex|
|48585|New|Enh|2010-01-20|mod_cache no longer caches expired content        |
|48602|New|Enh|2010-01-23|use asynch ldap_compare so LDAPTimeout applies    |
|48623|New|Maj|2010-01-26|AuthLDAPURL syntax is not RFC-compliant, prevents |
|48639|New|Enh|2010-01-29|Add htcacheclean as a core monitored process      |
|48652|New|Maj|2010-02-01|"AuthType form" fails if a password contains  '&' |
|48659|New|Maj|2010-02-02|Problem with accents in filename and byte serving |
|48687|New|Nor|2010-02-05|mod_rewrite ignores trailing dot in request URI on|
|48705|New|Enh|2010-02-08|flag to allow newlines in the error log as opposed|
|48712|New|Enh|2010-02-09|Add UID and GID to status page                    |
|48719|New|Nor|2010-02-09|[BUG] mod_proxy_ajp return wrong error message whe|
|48721|New|Nor|2010-02-10|[Patch] Add ProxyAllow to mod_proxy               |
|48731|New|Maj|2010-02-11|Prefork not creating processes after 10 servers ar|
|48732|New|Nor|2010-02-12|[BUG] environment variable SCRIPT_NAME output erro|
|48769|New|Nor|2010-02-18|[PATCH] Processes in the busy list should not be k|
|48777|New|Maj|2010-02-19|proxy balancer not detecting correctly when host (|
|48780|New|Enh|2010-02-19|Enable mod_authnz_ldap to accept valid client cert|
|48792|New|Enh|2010-02-22|httpd util apachectl returns wrong status informat|
|48805|New|Nor|2010-02-23|Corrupted response for HTTPS + KEEPALIVE=ON       |
|48808|New|Enh|2010-02-24|mod_authz_owner support for POSIX access control l|
|48819|Inf|Nor|2010-02-25|After users login on the web page, the page does n|
|48842|Inf|Nor|2010-03-02|mod_log_config logs the full size of the file inst|
|48880|Opn|Nor|2010-03-09|error on make                                     |
|48888|New|Nor|2010-03-10|DOCTYPE definitions nearly 11 years out-of-date   |
|48920|New|Enh|2010-03-15|Breadcrumbs on mod_autoindex path                 |
|48921|Inf|Nor|2010-03-16|mod_mem_cache crash, version 2.2.15.0             |
|48937|New|Enh|2010-03-18|Feature proposal - support sasl_bind              |
|48949|Inf|Cri|2010-03-20|fcgid processes never get killed after graceful re|
|48958|New|Nor|2010-03-22|mod_ldap, ldap credential cache & graceful restart|
|48987|New|Trv|2010-03-25|typo in polish translation of HTTP_UNAUTHORIZED.ht|
|49037|New|Enh|2010-04-02|SSLVerifyClient require_no_ca                     |
|49043|New|Maj|2010-04-04|Using ssi include directive overwrites QUERY_STRIN|
|49058|New|Nor|2010-04-06|Prefork MPM tries to accept on closed listener soc|
|49067|New|Nor|2010-04-08|FTPOptions ShowUnAuthorizedFiles does not work    |
|49068|New|Nor|2010-04-08|UTF-8 URL Encode error                            |
|49087|New|Maj|2010-04-11|MSI installation reports "interrupted installation|
|49114|New|Maj|2010-04-13|NTFS junction directories missing from directory l|
|49123|New|Nor|2010-04-14|mod_proxy_ajp does not send the client's SSL chain|
|49131|New|Nor|2010-04-15|Very long URLs cause 404 or 403 errors with SetAct|
|49133|New|Maj|2010-04-16|Windows service recovery options do not work for A|
|49157|New|Nor|2010-04-20|Issues with xml interface for balancer manager    |
|49187|New|Nor|2010-04-26|Crash mod_mem_cache and mod_svn                   |
|49199|New|Enh|2010-04-27|Implement LDAP scope-aware caching in mod_ldap    |
|49220|New|Nor|2010-04-29|feature request for being able to disable FcgidWra|
|49239|New|Blk|2010-05-01|Apache mod_ssl gives coredump with openssl 0.9.8  |
|49277|New|Nor|2010-05-12|Expose a variable to identify SSL Session renegoti|
|49283|New|Nor|2010-05-12|Language of dates on SSI                          |
|49285|New|Enh|2010-05-13|Relative (local to current directory) URLs do not |
|49348|New|Enh|2010-05-27|[mod_log_config] Output log file name format capab|
|49385|New|Maj|2010-06-03|mod_disk_cache server side included files are inte|
|49387|Inf|Cri|2010-06-03|Unable to modify default charset setting to UTF-8 |
|49391|New|Nor|2010-06-05|mod_disk_cache needs to register a cleanup to kill|
|49396|New|Enh|2010-06-06|PATH_INFO normalization, especially relating to vo|
|49427|New|Nor|2010-06-11|mod_cgid and mod_cgi do not return proper value wh|
|49433|New|Enh|2010-06-13|improving info in server status                   |
|49439|New|Nor|2010-06-14|Bug in mod_userdir which prevents suexec from runn|
|49504|New|Nor|2010-06-25|Solaris 10/x64 worker graceful restart problem    |
|49532|New|Nor|2010-06-30|mod_cache: Set-Cookie headers are appended to cach|
|49553|New|Min|2010-07-05|Set QoS bits via APR2 API instead                 |
|49568|New|Maj|2010-07-07|Apache mod_authnz_ldap built with the MS LDAPSDK d|
|49632|Inf|Nor|2010-07-21|mod_authnz_ldap denies users when search is perfor|
|49633|New|Enh|2010-07-21|Handle AD primary groups in mod_authnz_ldap       |
|49642|New|Nor|2010-07-23|mod_rewrite mistakes encoded question mark as path|
|49643|New|Nor|2010-07-23|WebDav plus mod Negotiation causes directory creat|
|49676|New|Nor|2010-07-30|directory with german umlauts are indented by one |
|49680|New|Maj|2010-07-30|Perl script are not running on Win32, Apache 2.2.1|
|49684|New|Enh|2010-08-01|enhancement for ipv6 implementation               |
|49699|New|Nor|2010-08-03|Inconsistent Keep-alive from proxy to the origin s|
|49715|New|Maj|2010-08-06|ProxyPassMatch Url Encoder Problem                |
|49717|New|Enh|2010-08-06|PATCH: Enable SSL Timeout                         |
|49737|Inf|Nor|2010-08-10|order allow,deny does not work on IPv6            |
|49743|New|Maj|2010-08-12|SSI 'echo encoding="(url/none)"' bug              |
|49746|Opn|Enh|2010-08-12|mod_rewrite urlencode option                      |
|49766|New|Maj|2010-08-17|POST request on CGI script generating empty body c|
|49771|New|Nor|2010-08-17|After graceful restart using mod_proxy_ajp, couldn|
|49772|New|Nor|2010-08-18|mod_deflate kicks itself out on Content-Range resp|
|49798|Opn|Nor|2010-08-22|[mod_log_config] Piped Log scripts process cause w|
|49807|New|Enh|2010-08-23|hard to force Content-Type header for non static f|
|49810|New|Nor|2010-08-23|Mod_autoindex output of header/body/footer scrambl|
|49815|New|Enh|2010-08-24|Enable caching for HTTP Range requests / 206 respo|
|49829|New|Trv|2010-08-26|CGI index command line arguments excessively escap|
|49832|New|Enh|2010-08-26|void ap_custom_response is not supporting the bina|
|49859|Opn|Nor|2010-09-01|url with additional filepath generates bad environ|
|49921|New|Nor|2010-09-13|Trailers in chunked http requests are not handled |
|49926|New|Enh|2010-09-14|New option for mod_log_forensics or mod_log_config|
|49980|New|Nor|2010-09-22|can't use a FIFO for SSL key file; mod_ssl checks |
|49981|New|Enh|2010-09-22|Requesting SSLCertificateKeyFile Dialog functional|
|49990|New|Nor|2010-09-23|Feature request: implement ExpiresActive reset    |
|49996|New|Nor|2010-09-24|Proxied ErrorDocument returns 200 OK response code|
|49997|New|Nor|2010-09-24|wrowe promised me...                              |
|50004|New|Nor|2010-09-26|per-dir rewrite without DocumentRoot or RewriteBas|
|50011|New|Cri|2010-09-27|error running apache, and installing apache as a s|
|50024|New|Min|2010-09-29|Mod_cache/mod_mem_cache and mod_security combinati|
|50038|New|Enh|2010-10-01|What Directives apply to a file/directory? Resulta|
|50041|New|Min|2010-10-04|(9)Bad file descriptor: apr_socket_accept: (client|
|50051|New|Nor|2010-10-07|Log PID in first entry logged for each request    |
|50061|New|Nor|2010-10-08|Semicolon character '%3B' seems to be decoded to '|
|50082|New|Nor|2010-10-12|apachectl status returns incorrect exit code      |
|50112|New|Nor|2010-10-18|buildconf broken in two places                    |
|50116|New|Nor|2010-10-19|Apache fragments packets unnecessarily            |
|50151|New|Nor|2010-10-25|Software caused connection abort and apache proces|
|50155|Inf|Nor|2010-10-25|httpd -s attempts to read SSL certificates        |
|50172|Inf|Nor|2010-10-28|Digest allows access bypassing secuity            |
|50227|New|Enh|2010-11-07|Option to fail SSL handshake for diverted SNI conn|
|50237|Inf|Nor|2010-11-08|webdav LOCK access with multiple threads to same f|
|50261|New|Nor|2010-11-12|graceful restart with multiple listeners using pre|
|50262|New|Nor|2010-11-12|mod_rewrite log ip address vs hostname            |
|50274|New|Nor|2010-11-15|always pass CONTENT_LENGTH to the application     |
|50278|New|Nor|2010-11-16|-DFOREGROUND and ap_unixd_killpg()/ap_os_killpg() |
|50290|Inf|Nor|2010-11-18|vanilla apache 2.2.17 installation crashes (lib-ap|
|50296|New|Nor|2010-11-18|LDAPVerifyServerCert and possibly LDAPTrustedMode |
|50317|New|Nor|2010-11-22|Possible error in mod_cache's "Avoiding the Thunde|
|50336|New|Min|2010-11-25|PUT failures do not emit Allow:                   |
|50344|New|Nor|2010-11-26|ProxyPass does not handle different protocols when|
|50357|New|Enh|2010-11-28|improve matching mechanisms for mime type and enco|
|50372|New|Enh|2010-11-29|any reason for allowing ModMimeUsePathInfo only in|
|50390|New|Nor|2010-11-30|WARNING: Unrecognized options : --disable-ipv6    |
|50402|New|Nor|2010-12-02|SetEnv proxy-sendchunks is ignored for small amoun|
|50412|New|Nor|2010-12-04|if IndexOptions +XHTML, the correct MIME type shou|
|50423|Inf|Nor|2010-12-06|Apache is terminated with signal 11, Segmentation |
|50427|New|Nor|2010-12-07|Windows>=Vista+mod_auth_digest+command line=proble|
|50432|New|Enh|2010-12-08|add PCRE-mode for file based matches              |
|50436|New|Enh|2010-12-08|VirtualHost could behave like people expect it to |
|50444|New|Enh|2010-12-09|Pre-close logging handles in cgid agent           |
|50456|Inf|Nor|2010-12-10|Invalid Error 413 crash Apache                    |
|50464|New|Blk|2010-12-13|undefined reference to `BIO_set_callback' `BIO_set|
|50466|Inf|Maj|2010-12-13|httpd process doesn't recycle                     |
|50473|New|Maj|2010-12-14|zlib.dll Problem                                  |
|50521|New|Nor|2010-12-25|Comment at top of sample main config file is wrong|
|50525|New|Nor|2010-12-28|Header directive won't edit Location header from P|
|50530|New|Enh|2010-12-29|Provide rate limiting for failed authentication at|
|50532|New|Enh|2010-12-30|Mail protection                                   |
|50551|New|Nor|2011-01-06|Some proxied connections ignore ttl setting       |
|50562|Opn|Cri|2011-01-09|wrong PATH_INFO CGI environment with non-ASCII UTF|
|50584|New|Enh|2011-01-14|Add error message when RequestReadTimeout triggere|
|50592|New|Maj|2011-01-15|httpd dumps core on an IPv6 only system           |
|50602|New|Nor|2011-01-17|non thread safe functions used in apache httpd pro|
|50619|New|Min|2011-01-19|After changing resolv.conf signaling httpd doesn't|
|50628|New|Blk|2011-01-21|Core dump happens with Apache 2.2.15 using openssl|
|50630|New|Nor|2011-01-21|Apache return 500 error with authentication by LDA|
|50644|New|Enh|2011-01-24|Add support for maximum number of requests per Kee|
|50654|New|Nor|2011-01-25|FileETag ContentMD5 & Filename, optimisation to Co|
|50693|New|Nor|2011-01-31|AllowOverride Options=(not Foo) should permit no-o|
|50704|Inf|Nor|2011-02-01|mod_cache doesn't cache MultiViews                |
|50712|New|Maj|2011-02-02|Restart button only stops the server ...and do not|
|50727|New|Nor|2011-02-07|ISAPI EXTENSION_CONTROL_BLOCK Missing PostData wit|
|50765|New|Enh|2011-02-11|Runtime Backend Pinning via balancer-manager      |
|50770|New|Nor|2011-02-14|a rotatelogs issue, if time changed               |
|50773|Inf|Nor|2011-02-14|Dav lock database corruption                      |
|50774|New|Enh|2011-02-14|Have a way to invalidate cache without other reque|
|50777|New|Nor|2011-02-14|Back port buildconf specifies AC_PREREQ(2.13) fix |
|50796|New|Enh|2011-02-16|record time between keepalives in access log      |
|50807|New|Maj|2011-02-18|mod_proxy fails to send FIN response when a FIN is|
|50814|New|Nor|2011-02-21|SSI exec not working on Windows (Apache 2.x)      |
|50848|New|Enh|2011-03-01|Content Negotiation type map file precedence could|
|50869|New|Enh|2011-03-04|Need directive to control use and timeout of sessi|
|50873|New|Nor|2011-03-04|httpd does not start properly when built from sour|
|50878|New|Nor|2011-03-05|redundant operation when calling apr_stat         |
|50891|New|Nor|2011-03-08|Apache rewrites WWW-Authenticate headers from CGI |
|50902|Inf|Maj|2011-03-09|on major load on the server, poll() hangs         |
|50916|New|Nor|2011-03-11|RewriteMap program: mod_rewrite sends request but |
|50926|New|Nor|2011-03-14|unexpected <Directory> file-matching behavior     |
|50942|New|Maj|2011-03-17|Apache 2.2.16 forward proxy is 5x times slower tha|
|50945|Opn|Nor|2011-03-18|AJP: Missing support for ErrorOverride            |
|50948|Opn|Nor|2011-03-19|Connection not closed when CGI dies waiting for PO|
|50954|New|Nor|2011-03-21|ProxyRemote doesnt use CONNECT method with https s|
|50959|New|Enh|2011-03-23|Add cache-manifest to the mime type list          |
|50976|New|Nor|2011-03-26|Apache losts client's ip (%a or %h) sometimes.    |
|50999|Opn|Nor|2011-03-30|it seems the configure wrong detect my apr-util ve|
|51001|New|Nor|2011-03-31|patch for hook ap_lua_run_lua_open                |
|51005|New|Enh|2011-04-01|Allow to use username in LDAP filter              |
|51006|New|Blk|2011-04-01|Apache consume all memory and swap when setup as r|
|51019|New|Enh|2011-04-04|[PATCH] Implementation of Asynchronous processing |
|51020|Opn|Nor|2011-04-04|[PATCH] Apache/mod_fcgid.so does not start in comp|
|51022|New|Nor|2011-04-05|Segmentation fault on PUT request                 |
|51030|New|Enh|2011-04-06|Way to terminate CGI immediatly after closing conn|
|51078|Inf|Nor|2011-04-18|[PATCH] mod_fcgid spawned CGI Processes gets orpha|
|51079|New|Enh|2011-04-18|[PATCH] mod_fcgid spawned CGI Process cannot imper|
|51080|New|Nor|2011-04-18|[PATCH] mod_isapi does not support Except:100-Cont|
|51103|Opn|Nor|2011-04-21|mod_reqtimeout does not drop connection and return|
|51107|New|Min|2011-04-22|SetOutputFilter and SetInputFilter should allow "n|
|51118|New|Nor|2011-04-26|LDAP cache is cleared after graceful/restart and o|
|51127|New|Nor|2011-04-27|Make ProxyPassReverseCookiePath work as expected  |
|51168|New|Nor|2011-05-08|mod_status Total Traffic won't take account of int|
|51170|New|Nor|2011-05-09|I/O errors when using keep-alive + mod_ssl        |
|51174|New|Min|2011-05-09|SSLRequire predicates using OIDs unknown to openss|
|51186|New|Blk|2011-05-11|NEw Openssl 1.0.1 with new FIPS                   |
|51190|New|Min|2011-05-12|::/0 does not work with allow from and deny from  |
|51194|New|Nor|2011-05-13|FcgidWrapper does not support paths containing a s|
|51201|Inf|Nor|2011-05-15|Strange behavior REQUEST_METHOD & GET in mod_rewri|
|51223|New|Nor|2011-05-18|304 HTTP Not Modified strips out CORS headers     |
|51224|New|Nor|2011-05-18|mod_dav_fs should respect FileETag                |
|51239|New|Nor|2011-05-21|ap_get_client_block may block continuously sometim|
|51257|New|Nor|2011-05-24|Build failed when cross-compiling: ./gen_test_char|
|51258|New|Enh|2011-05-24|new features for mod_substitute                   |
|51296|New|Enh|2011-05-31|Dynamic engine support using SSLCryptoDevice suppo|
|51297|New|Nor|2011-05-31|Improve error handling during "UNLOCK"            |
|51303|New|Nor|2011-05-31|TraceEnable 500 error                             |
|51312|New|Nor|2011-06-01|mod_filter should support adding to the Vary heade|
|51322|New|Enh|2011-06-04|Prepend and append string to LDAP search parameter|
|51359|Inf|Enh|2011-06-11|Added shebang check for //! so that .js scripts wo|
|51365|New|Nor|2011-06-13|Mod_proxy mangles query string with mod_security  |
|51402|New|Nor|2011-06-21|"ForceLanguagePriority Fallback" not working as im|
|51406|New|Maj|2011-06-21|When listing files in subdirectories, the path is |
|51409|New|Nor|2011-06-21|Sorting options accepted by ls, but ignored       |
|51471|New|Nor|2011-07-04|<DirectoryMatch>ed IndexIgnore doesn't            |
|51479|New|Enh|2011-07-05|[PATCH] AB feature to optionally read in a reusabl|
|51491|New|Nor|2011-07-08|mod_dir breaks POSTs to URLs not ending in /      |
|51495|New|Nor|2011-07-11|mod_substitute cpu and memory limit               |
|51517|New|Maj|2011-07-16|mod_proxy_fcgi is not RFC 3875 compliant (SCRIPT_F|
|51522|Ver|Trv|2011-07-18|Wrong French translation in mpm.html ("Certains Mo|
|51542|New|Nor|2011-07-22|Apache HTTP Server vs PVS-Studio                  |
|51543|New|Nor|2011-07-22|Space in username not properly escaped in log file|
|51552|Inf|Cri|2011-07-25|Apache is not starting (2.2.15)                   |
|51573|New|Enh|2011-07-28|Easy way to erase log files                       |
|51576|Inf|Nor|2011-07-28|mod_rewrite rule stopped working                  |
|51600|New|Enh|2011-08-02|Loading the same certificate in multiple virtual h|
|51603|Inf|Maj|2011-08-02|Apache accepts completely bogus HTTP requests (pos|
|51607|Inf|Nor|2011-08-03|DBDPrepareSQL ( ap_dbd_prepare ) does not work cor|
|51629|New|Nor|2011-08-05|DocumentRoot check incorrect when running under ch|
|51674|New|Blk|2011-08-18|AJP Module Bad Request                            |
|51679|New|Min|2011-08-18|Code signature key expired                        |
|51689|New|Trv|2011-08-19|Cross compiling causes multiple Listen directives |
|51695|New|Trv|2011-08-20|Code clean up (ap_rputs merge)                    |
|51707|New|Nor|2011-08-22|ProxyPassReverse issues within <Location> (differe|
|51709|New|Nor|2011-08-23|ServerName/ServerAlias don't work if Host: header |
|51711|New|Nor|2011-08-23|mod_auth_digest have broken shared mem (nonce) cod|
|51718|New|Enh|2011-08-24|Feature Request: Add shorthand to redirect any Ser|
|51725|New|Nor|2011-08-26|Multiple Range: request accepted as "Range: n-m"  |
|51732|New|Nor|2011-08-29|Inconsistencies in log messages' verbosity levels |
|51747|New|Blk|2011-08-31|mod_fcgid loads entire request into memory while p|
|51757|Inf|Enh|2011-09-02|Add support for SASL auth in LDAP                 |
|51778|Inf|Cri|2011-09-07|while buliding(make) a unix source "httpd-2.2.20.t|
|51797|Inf|Maj|2011-09-10|Crash HTTPD(Windows)                              |
|51814|New|Enh|2011-09-14|mod_proxy in Apache HTTP 2.2 FIN_WAIT2 in server s|
|51842|New|Enh|2011-09-18|Suggesting a new action for the Header directive: |
|51858|Inf|Nor|2011-09-21|weird error for mod_rewrite with more then 3 param|
|51864|New|Nor|2011-09-22|mod_cache returns entire entity from origin server|
|51904|New|Nor|2011-09-28|output to stderr from cgi script causes script to |
|51951|New|Nor|2011-10-04|mod_mbox hang on some e-mails on press@a.o - was I|
|51964|Ver|Nor|2011-10-05|Documentation of RewriteRule flag skip unclear    |
|51965|New|Nor|2011-10-05|--with-z=DIR not being honored                    |
|51982|Opn|Nor|2011-10-06|ProxyPassReverse / balancer://cluster/ adds slash |
|51987|Inf|Nor|2011-10-07|RewriteRule doesn't work correctly with apache 2.3|
|51994|New|Enh|2011-10-07|Mod_authn_socache should have some way to flush th|
|52004|Ver|Trv|2011-10-10|Typo "indexe" in French translation of mpm.html   |
|52007|New|Nor|2011-10-10|Content-Length: 0 not set on proxy response       |
|52038|New|Nor|2011-10-16|NameWidth works incorrectly together with Charset=|
|52039|Inf|Nor|2011-10-16|Browser mode does not always work                 |
|52043|New|Nor|2011-10-17|Directories ".", "..", and "/" do not work correct|
|52081|New|Nor|2011-10-24|segfault if mbox files have unexpected names      |
|52090|New|Maj|2011-10-26|Apache thread hangs with error 500 when sending a |
|52120|Opn|Nor|2011-11-01|mod_cache edge case: uncacheable 304 sends cached |
|52123|New|Maj|2011-11-02|DoS: High memory usage in propfind                |
|52132|New|Nor|2011-11-03|[PATCH] process activity score calculated incorrec|
|52139|New|Nor|2011-11-05|Never Syntax Error on non-existent DocumentRoot   |
|52171|Ver|Nor|2011-11-13|confusing documentation of request phases         |
|52174|New|Enh|2011-11-13|Allow hard lower-limits on the number of fcgi serv|
|52178|New|Nor|2011-11-14|IPv6 IPs as ServerName not allowed                |
|52181|Ver|Nor|2011-11-14|mod_rewrite Technical Details Ruleset Processing d|
|52195|Inf|Nor|2011-11-16|Japanese texts are garbled on mailing list archive|
|52196|Inf|Nor|2011-11-16|winnt mpm, others mpm also have this bug. pool sha|
|52207|Inf|Maj|2011-11-18|Upgrade apache version from 2.0.59 to 2.2.12 or ab|
|52222|New|Nor|2011-11-21|IndexIgnore ignores parent directories in argument|
|52247|New|Nor|2011-11-26|mod_mbox gives up on unexpected message format    |
|52248|New|Nor|2011-11-26|Bugzilla version drop-down list does not offer "un|
|52252|New|Nor|2011-11-27|luajit support broken for (at least) luajit 2.0   |
|52253|Inf|Nor|2011-11-28|Timeout doesn't work. mod_proxy_balancer strongly |
|52264|New|Enh|2011-11-30|Update and complete balancer-manager XML output   |
|52269|Inf|Nor|2011-12-01|[mod_proxy] Apache reverse proxy status code trans|
|52275|New|Nor|2011-12-02|memory leak in proxy_ajp_handler                  |
|52298|Inf|Nor|2011-12-07|Can't enter website with client certificate on an |
|52301|New|Enh|2011-12-07|Error message "RSA server certificate ... CN ... d|
|52302|New|Enh|2011-12-07|Better documentation of how server name is determi|
|52304|New|Nor|2011-12-08|<Limit> Does Not Apply When URI Is Folder         |
|52313|New|Enh|2011-12-09|htdbm enhancement: options for colon-in-username, |
|52322|Inf|Enh|2011-12-13|Providing BBC developed httpd modules for inclusio|
|52342|New|Nor|2011-12-15|ap_internal_redirect dropping filters means incons|
|52370|New|Nor|2011-12-19|apreq_decode/url_decode length miscalculation     |
|52377|New|Enh|2011-12-20|Add Directives to assert user, group, and permissi|
|52383|New|Trv|2011-12-24|Instllation log typo                              |
|52391|New|Cri|2011-12-27|100% CPU usage while using Forward Proxy          |
|52395|New|Nor|2011-12-29|reload results in different end environment to res|
|52403|New|Nor|2011-12-31|FallbackResource doesn't work for non-existent PHP|
|52408|New|Nor|2012-01-01|Directoryindex matching automatically redirects   |
|52415|New|Nor|2012-01-03|LockFile placed inappropriately                   |
|52417|New|Nor|2012-01-03|HEADERS information in the file                   |
|52435|New|Nor|2012-01-06|Apache shutdown automatically                     |
|52439|New|Enh|2012-01-09|It should be possible to treat errors in .htaccess|
|52453|New|Enh|2012-01-11|Ability to configure --logfiledir                 |
|52465|New|Nor|2012-01-13|mod_dir is allowed to redirect proxy requests     |
|52481|New|Nor|2012-01-18|Rotatelog.exe crashes Apache after setting 256MB r|
|52485|New|Nor|2012-01-19|CPU load 100%                                     |
|52494|New|Enh|2012-01-22|allow the Action directive to point in the filesys|
|52495|New|Enh|2012-01-22|CACertificate, CADNCertificate, CARevocation, Cert|
|52501|New|Cri|2012-01-23|child pid 10824 exit signal Segmentation fault (11|
|52505|New|Nor|2012-01-23|Include with directory wildcards gives errors for |
|52509|New|Nor|2012-01-23|Resources protected by .htaccess file may not be a|
|52510|New|Cri|2012-01-23|Segmentation Fault 11                             |
|52520|New|Nor|2012-01-24|ProxyRemote & NoProxy directive can not take IPv6 |
|52532|New|Trv|2012-01-26|VirtualHost added TWICE to name-virtual-host list |
|52539|New|Nor|2012-01-26|Apache mod_dav 400 Bad Request for non-existent co|
|52546|New|Nor|2012-01-27|overwrite SERVER_PROTOCOL environment             |
|52573|New|Nor|2012-02-01|mod_speling case correction fails when URI has dou|
|52578|Opn|Enh|2012-02-02|Wrong "bytes sent" logged when connection is close|
|52594|New|Nor|2012-02-03|rpmbuild -ba errors out with "File not found by gl|
|52595|New|Nor|2012-02-03|requests with gzip+chunked encoded body don't prox|
|52605|Inf|Min|2012-02-05|Please allow request lines longer than 8k         |
|52612|New|Nor|2012-02-06|Default Service Account                           |
|52616|Opn|Enh|2012-02-07|SSLUserName uses SSL_CLIENT_S_DN insted of SSL_CLI|
|52617|New|Maj|2012-02-07|Visit the rewrite page from ServerAlias domain vho|
|52623|New|Nor|2012-02-08|does not build with pcre-8.30                     |
|52644|New|Nor|2012-02-12|document how SSL FakeBasicAuth works with strange |
|52668|New|Trv|2012-02-14|More future safe patch for old MSIE ssl-unclean-sh|
|52670|New|Trv|2012-02-15|please clarify the effect of SSLStrictSNIVHostChec|
|52683|New|Enh|2012-02-16|add a symlink option that rechecks the access perm|
|52700|Inf|Blk|2012-02-17|Not rendering html content instead displaying clie|
|52703|Inf|Maj|2012-02-18|SSL+SNI+client-auth "lost" after some time        |
|52710|New|Nor|2012-02-19|mod_fcgid should set PATH_INFO when configured in |
|52756|Inf|Trv|2012-02-24|proxy_html_module LoadModule line not created in h|
|52759|New|Cri|2012-02-24|Apache httpd child process consuming high CPU Util|
|52790|New|Nor|2012-02-28|ldap caching not sufficient                       |
|52795|Opn|Nor|2012-02-29|mod_fcgid fails to spawn process in C:\Program Fil|
|52806|New|Nor|2012-03-01|configure: --with-included-apr is not supported in|
|52807|New|Nor|2012-03-01|some random strings are accepted by "configure" as|
|52816|New|Nor|2012-03-03|Potential segfault in socache_shmcb_create        |
|52817|New|Nor|2012-03-03|Long directory path sucks (but it's really a valid|
|52822|New|Nor|2012-03-04|Quiet installation not fully quiet                |
|52824|Inf|Nor|2012-03-04|Conflicts between AllowOverride and AllowOverrideL|
|52828|New|Maj|2012-03-05|Child process is not replaced in Windows, after a |
|52832|New|Nor|2012-03-05|numerical configuration entry can be mistakenly in|
|52841|Opn|Nor|2012-03-06|[proxy_balancer:emerg] [pid 25593] AH01177: Failed|
|52851|New|Nor|2012-03-07|Core TimeOut directive doesn't work               |
|52860|New|Enh|2012-03-08|Support Transfer-Encoding: gzip                   |
|52865|New|Nor|2012-03-09|Crash by segmentation fault in mod_authn_core in A|
|52870|New|Cri|2012-03-09|100% CPU usage while using Forward Proxy          |
|52874|New|Enh|2012-03-09|Support Use TrustedFirst checking when verifying c|
|52884|New|Nor|2012-03-12|"localhost" leads to start failure                |
|52890|Inf|Nor|2012-03-12|--with-included-apr doesn't work when srclib/apr a|
|52891|New|Nor|2012-03-12|2.2 doesn't perform as well as 1.3                |
|52894|Inf|Nor|2012-03-13|Apache aborts abnormally when ChrootDir is set    |
|52927|Inf|Nor|2012-03-16|[Bug in httpd 2.2.4] [error] (70014)End of file fo|
|52933|New|Nor|2012-03-17|Child survives '-k stop', consuming lots of CPU   |
|52950|New|Nor|2012-03-20|Error when set AuthType to None with valid-user   |
|52963|New|Nor|2012-03-21|Typo in AuthLDAPURL RFC 2255 error message        |
|52975|New|Nor|2012-03-23|Receiving files is suboptimal                     |
|52976|New|Min|2012-03-23|Gratuitous string-duplication in module-configurat|
|52978|New|Enh|2012-03-23|Binding to an interface instead of an address     |
|52995|New|Nor|2012-03-28|httpd -V does not print the default Mutex         |
|53002|New|Nor|2012-03-29|<Location> and auth_form (trailing slash problem?)|
|53015|New|Nor|2012-03-31|missing apr_socket_close                          |
|53016|New|Nor|2012-03-31|missing apr_brigade_destroy                       |
|53023|New|Nor|2012-04-02|mod_rewrite RewriteCond parser error and documenta|
|53037|New|Enh|2012-04-05|clarify mod_ssl documentation on the UID/GID conte|
|53059|New|Nor|2012-04-10|Make httpd easier relocatable by using a variable |
|53098|New|Nor|2012-04-18|mod_proxy_ajp: patch to set worker secret passed t|
|53099|New|Enh|2012-04-18|feature request for mod_remoteip                  |
|53108|New|Enh|2012-04-19|clarification on url-path vs full filesystem path |
|53111|New|Nor|2012-04-20|1% of CMS sites expose database passwords         |
|53121|New|Nor|2012-04-22|Confusing documentation, gzip and deflate         |
|53149|New|Enh|2012-04-25|mod_ldap should/could use mod_socache             |
|53152|Opn|Nor|2012-04-26|RewriteRule documentation: Error about per-directo|
|53156|New|Enh|2012-04-27|CRL validation fails if CRL is missing            |
|53160|New|Cri|2012-04-29|Reverse Proxy mod_deflate doesn't zip back content|
|53183|New|Min|2012-05-03|mod_apreq2 entry point is apreq_module and not apr|
|53193|New|Nor|2012-05-04|SLVerifyClient optional_no_ca + SSLSessionCache = |
|53218|New|Blk|2012-05-11|ProxyPass worker name　(http://localhost:3128/...|
|53233|New|Maj|2012-05-15|Internal error: proxy: error reading status line f|
|53239|New|Maj|2012-05-16|Httpd has problems delivering data on rate-limited|
|53253|New|Maj|2012-05-17|TCP_NOPUSH used with sendfile(2), cause transfers |
|53284|New|Nor|2012-05-24|crash                                             |
|53290|New|Maj|2012-05-24|memory usage                                      |
|53292|New|Min|2012-05-25|add support for HTTP status code 308              |
|53305|New|Nor|2012-05-28|404 errors when adding query string in a balancer |
|53313|New|Nor|2012-05-28|SSI #echo VAR fails (#include OK) if URI/URL has f|
|53319|New|Nor|2012-05-29|Multiple DirectoryIndex statements in the same con|
|53332|New|Nor|2012-05-30|Requests with chunked encoding have no body availa|
|53350|New|Nor|2012-06-01|mod_cache caching 403 responses Apahce 2.2.22     |
|53351|New|Nor|2012-06-02|make fails if layout begins on first line of confi|
|53388|Opn|Nor|2012-06-08|mod_proxy_balanser generates 503 when proxying to |
|53402|New|Trv|2012-06-12|Incorrect error message for mod_ldap params       |
|53461|Inf|Cri|2012-06-23|Compilation problems                              |
|53462|New|Nor|2012-06-25|mod_rewrite does not remove trailing slash when as|
|53479|New|Nor|2012-06-27|mod_rewrite [B] flag should percent-encode the spa|
|53483|New|Enh|2012-06-29|dangerous PCRE patterns in *Match directives      |
|53539|New|Maj|2012-07-12|content type and character set are changing when t|
|53554|New|Nor|2012-07-16|Wrong case for hexadecimal percent encoding [patch|
|53555|New|Maj|2012-07-17|Scoreboard full error with event/ssl              |
|53579|New|Cri|2012-07-20|httpd looping writing on a pipe and unresponsive (|
|53581|New|Blk|2012-07-21|FollowSymlinks doesn't work with DirectoryMatch an|
|53594|New|Enh|2012-07-24|ipad as webserver                                 |
|53595|New|Nor|2012-07-24|Media type qs parameters for MultiViews sent in Co|
|53612|Inf|Nor|2012-07-27|Reverse Proxy causing 500 error SSL proxy 1.0.1c O|
|53618|New|Nor|2012-07-29|proxy_worker_shared fields not maintained in threa|
|53634|New|Nor|2012-08-01|mod_cache returning HTTP 200 for nonexistent resou|
|53638|New|Nor|2012-08-02|Problem with shortcuts to bugzilla in http://httpd|
|53640|Inf|Maj|2012-08-02|make: Fatal error: Command failed for target `htpa|
|53643|New|Cri|2012-08-02|apache segfaults with mod_authn_dbd when dbd_min i|
|53646|New|Nor|2012-08-02|Invalid uniformly distributed balancing of request|
|53651|New|Nor|2012-08-03|Worker failure doesn't have same behaviour as work|
|53667|New|Enh|2012-08-07|Add an equivalent option to "JkOptions ForwardLoca|
|53669|New|Nor|2012-08-07|IndexOptions Incremental IndexOptions documentatio|
|53686|New|Enh|2012-08-09|Status "501 Not Implemented" sent very late       |
|53690|New|Nor|2012-08-09|Calls to semctl() trigger "uninitialized memory" w|
|53692|New|Nor|2012-08-10|mod_auth_form loses request body before login page|
|53693|Opn|Nor|2012-08-10|mod_fcgid performance suffers under increase in re|
|53704|New|Enh|2012-08-13|True online configuration is needed - via LDAP?   |
|53705|New|Nor|2012-08-13|Align server-status balancer display to balancer-m|
|53706|New|Enh|2012-08-13|Include a status display for mod_ldap when present|
|53722|New|Nor|2012-08-15|when -D NO_DETACH is used, no PID file should be c|
|53736|New|Nor|2012-08-17|/balancer-manager doesn't save runtime adjusted se|
|53757|New|Enh|2012-08-21|RewriteMap of type txt should allow specifying col|
|53767|New|Nor|2012-08-23|htcacheclean deletes stale "vary" header files eve|
|53772|New|Nor|2012-08-24|REDIRECT_URL not accessible in mod_proxy          |
|53787|New|Reg|2012-08-28|In forward proxy, doesn't cache disk anymore      |
|53823|New|Nor|2012-09-03|[patch] pure IPv6 only host fix (server/config.c) |
|53835|New|Cri|2012-09-06|mod_proxy_ajp truncate output when using deflate i|
|53870|New|Maj|2012-09-13|Deadlock in CRYPTO_add_lock with Apache 2.2.22 wor|
|53886|New|Nor|2012-09-18|can't start apache control in Redhat Linux 3 X64  |
|53899|New|Nor|2012-09-19|SSL_OP_ALL disables the mitigation code for CVE-20|
|53915|New|Nor|2012-09-21|Colon lost when :port is used in CacheKeyBaseURL  |
|53919|Inf|Enh|2012-09-21|DEFAULT_LOG_FORMAT is not RFC6302 compliant       |
|53923|New|Min|2012-09-23|Overriding CustomLog directive seems impossible   |
|53932|New|Nor|2012-09-25|PROPFIND doesn't support If, If-Match ETag predica|
|53947|New|Enh|2012-09-29|Feature Request, RewriteRule - ProxyPreserveHost f|
|53961|New|Nor|2012-10-04|Null sessions to the default vhost                |
|53970|New|Nor|2012-10-05|Network control directives affects internal subreq|
|53981|New|Nor|2012-10-08|move def of log_request_state from mod_log_config.|
|53988|New|Enh|2012-10-10|Missing FCGIWrapper script should not be a critica|
|53999|Opn|Nor|2012-10-13|Deadlock between procmgr_send_spawn_cmd()/proctabl|
|54030|New|Enh|2012-10-19|Support subjectAltName when (reverse-)proxying    |
|54033|New|Enh|2012-10-21|Parent languages are not ordered according to Acce|
|54072|New|Reg|2012-10-30|Syntax error front-end virtual-path too long      |
|54102|New|Enh|2012-11-05|new feature: automatic route detection            |
|54118|New|Nor|2012-11-08|Handle leak on parent httpd process when rotatelog|
|54126|New|Maj|2012-11-09|Mod_rewrite failing because of url in query string|
|54134|New|Enh|2012-11-11|new feature: ability to use multiple routes in sti|
|54136|New|Min|2012-11-11|balancer-handler shows xml not, when only xml para|
|54158|New|Nor|2012-11-16|Suggestion regarding 2.0 to 2.2 Upgrade Documentat|
|54183|Inf|Nor|2012-11-21|PROPFIND doesn't report getcontenttype property   |
|54215|New|Maj|2012-11-27|configure fails for httpd 2.2.3 with openssl 1.0.1|
|54221|Opn|Nor|2012-11-28|no ErrorLog prefix on CGI errors                  |
|54222|New|Min|2012-11-28|ServerTokens checking is not complete             |
|54223|New|Nor|2012-11-29|AH00554 error when runtime configuration Includes |
|54252|New|Nor|2012-12-05|acinclude.m4 requires -lz when linking with ssl st|
|54253|New|Nor|2012-12-05|mod_proxy_ftp doesn't handle/log partial or cancel|
|54255|New|Nor|2012-12-06|mod_deflate adjusts the headers "too late", should|
|54269|New|Maj|2012-12-09|mod_proxy_html documentation misses several things|
|54276|New|Nor|2012-12-10|rotatelogs not getting killed on graceful restart |
|54280|New|Nor|2012-12-11|mod_auth_form inline login not working with traili|
|54281|New|Nor|2012-12-11|Stick use Partial parameters from query string    |
|54289|New|Nor|2012-12-13|"ap_get_brigade" api is failing in "AP_MODE_SPECUL|
|54306|New|Enh|2012-12-15|add regexp versions of ProxyPassReverse, ProxyPass|
|54309|New|Trv|2012-12-15|clarification on the <Location> directive when use|
|54310|Opn|Nor|2012-12-15|mod_proxy_html drops meta elements with http-equiv|
|54319|New|Reg|2012-12-17|ProxyPass has no effect in <Location> if rewrite o|
|54339|New|Nor|2012-12-21|piped log entries > PIPE_BUF can be interleaved   |
|54342|New|Nor|2012-12-22|AuthnCacheSOCache can't pass args to socache provi|
|54343|New|Maj|2012-12-22|Add sanity checks for malloc() in mpm_winnt.c and |
|54358|New|Nor|2012-12-29|Status 500 when using ldap on Solaris because apr_|
|54363|New|Nor|2012-12-31|make time conversion caching functions thread-safe|
|54364|New|Nor|2012-12-31|Add ref to mod_fcgid docs                         |
|54365|New|Nor|2013-01-02|Connection closed by server during file transfer  |
|54366|New|Nor|2013-01-02|$sysconfdir/extra/httpd-dav.conf is not built base|
|54367|Opn|Maj|2013-01-02|Location header in response to PUT is not %-escape|
|54385|New|Enh|2013-01-08|SSL configuration independent from virtual hosts, |
|54401|New|Nor|2013-01-10|Suggest to make ProxyPassReverseCookieDomain accep|
|54415|New|Enh|2013-01-14|Please tell the root cause of mutex and scoreboard|
|54431|Inf|Blk|2013-01-16|Unable to start the Apache 2.4.3 windows service. |
|54498|New|Nor|2013-01-28|apache crash on any cgi request with certain http |
|54502|New|Nor|2013-01-29|Apache deadlock on epoll_ctl error (1000 process l|
|54512|Inf|Cri|2013-01-31|Apache hung                                       |
|54517|New|Nor|2013-02-01|proxy balancer: timeout or partial failure of back|
|54518|New|Nor|2013-02-01|mod_rewrite not adding Vary header                |
|54519|New|Nor|2013-02-02|httpd already running                             |
|54526|New|Nor|2013-02-05|mod_proxy_http ignores request abortion           |
|54543|New|Enh|2013-02-10|Compile regex only when need                      |
|54546|New|Nor|2013-02-11|httpd crashes on first HUP after change Listen dir|
|54549|New|Nor|2013-02-11|mod_mime AddEncoding and mod_negotiation fix_encod|
|54556|New|Enh|2013-02-13|New flag to add default rule in rule chain        |
|54560|New|Nor|2013-02-13|Potential segfault on return from ap_server_root_r|
|54563|New|Maj|2013-02-15|mod_webdav ignores quota                          |
|54578|New|Nor|2013-02-18|Bad docs or unchecked code for "LimitRequestFields|
|54587|Opn|Nor|2013-02-19|LDAPConnectionPoolTimeout does not work in all cas|
|54605|New|Enh|2013-02-24|mod_negotiation should cache the info it generates|
|54608|New|Enh|2013-02-25|Support an option to allow page caching when using|
|54622|New|Nor|2013-02-28|shared memory cleanup                             |
|54626|New|Nor|2013-03-01|mod_authnz_ldap through util_ldap.c does not suppo|
|54633|New|Nor|2013-03-04|Invalid % encoding not rejected                   |
|54637|New|Nor|2013-03-05|Digest: secret not used                           |
|54640|New|Nor|2013-03-05|Slow transaction on a balance member is holding su|
|54649|New|Nor|2013-03-06|Incorrect PIDFILE prevent httpd restart           |
|54653|New|Min|2013-03-08|Suggestion to add https example for forward proxy |
|54656|New|Maj|2013-03-09|SNI and SSLProxyCheckPeerCN based on "connection" |
|54657|New|Nor|2013-03-09|DNS lookup failure for load balancer member does n|
|54683|New|Min|2013-03-13|Ignor directive ErrorDocument with null byte      |
|54699|Opn|Enh|2013-03-15|[feature request] cli webaccess tester            |
|54701|New|Cri|2013-03-15|Apache 2.4.3 Migration Issue Not loading the pages|
|54704|New|Nor|2013-03-15|Web Services stalling on it's own                 |
|54719|New|Nor|2013-03-18|httpd should check for and eventually create pid f|
|54752|New|Nor|2013-03-25|mod_ssl should not use uninitialized memory as ran|
|54782|New|Nor|2013-04-02|Memory Corruption errors - mpm_worker mod_perl    |
|54785|New|Nor|2013-04-02|Random crash when httpd server is stopped         |
|54793|New|Nor|2013-04-03|Socket timeout handler can delete uploaded files P|
|54794|New|Reg|2013-04-03|mod_wsgi|fcgid and subversion >= 1.7 issues       |
|54795|New|Nor|2013-04-03|'apxs -g -n' should be self-referring             |
|54796|Inf|Enh|2013-04-03|CustomLog should be able to use syslog as ErrorLog|
|54804|New|Nor|2013-04-05|mod_fcgid sends a Continue 100 response automatica|
|54813|New|Nor|2013-04-08|documnt the Require args used by authz_dbm includi|
|54816|Inf|Nor|2013-04-08|AH00566: request failed: invalid characters in URI|
|54817|New|Nor|2013-04-09|if prefix and sysconfdir are the same then http.co|
|54820|Inf|Cri|2013-04-09|REwriterule stops working                         |
|54824|New|Nor|2013-04-10|Spec file is missing libuuid-devel requirement    |
|54830|New|Enh|2013-04-11|Make SSLPProxyMachineCertificateFile configurable |
|54848|New|Nor|2013-04-15|Client field too short for IPv6 addresses         |
|54856|Inf|Enh|2013-04-17|NSCreateObjectFileImageFromFile                   |
|54858|New|Nor|2013-04-17|ld duplicate                                      |
|54861|New|Blk|2013-04-18|The number of connections with mysql is more      |
|54869|Inf|Nor|2013-04-19|Non-breaking space characters cause httpd to choke|
|54875|New|Nor|2013-04-23|Conditional request predicated on another URL's ET|
|54878|New|Nor|2013-04-23|Multiple Listen directives prevent server to start|
|54905|Inf|Cri|2013-04-29|Apache2 loops in child Segfaults                  |
|54910|New|Enh|2013-04-30|Format %{Foobar}o cannot be used to log Date and S|
|54911|New|Enh|2013-04-30|Allow logging of fields set by a backend server in|
|54914|New|Nor|2013-04-30|mod_dir DirectoryIndex breaks WebDAV PROPFIND / DE|
|54915|New|Nor|2013-04-30|GET on a WebDAV-enabled collection, with Directory|
|54918|New|Enh|2013-05-02|Implement RFC 6797 HTTP Strict Transport Security |
|54919|Inf|Nor|2013-05-02|*** glibc detected *** /usr/sbin/httpd: double fre|
|54930|New|Nor|2013-05-06|Allow empty message in ErrorDocument directive    |
|54934|Inf|Cri|2013-05-07|Apache is crashing intermittently with a message "|
|54936|New|Nor|2013-05-08|Some potential bugs reported by static analysis to|
|54949|New|Nor|2013-05-10|[PATCH] mod_cache: fix uninitialized tmppath varia|
|54952|Inf|Cri|2013-05-10|[Fri May 10 17:39:01 2013] [error] proxy: CLUSTER:|
|54953|New|Nor|2013-05-11|<VirtualHost 0.0.0.0:80> matches IPv6             |
|54958|New|Nor|2013-05-13|mod_deflate + mod_mime with SSI gives mixed compre|
|54962|New|Maj|2013-05-14|Apache will set incorrect Content-Length header an|
|54965|New|Enh|2013-05-14|Allow ProxyPassMatch in Directory context         |
|54976|New|Nor|2013-05-15|ProxyPass parameter "acquire" and "ttl" ignored in|
|54986|New|Maj|2013-05-16|httpd hanging on large form submit in ap_run_handl|
|54989|New|Nor|2013-05-17|Apache Segfaults on OS X at random - how can I dia|
|54993|New|Nor|2013-05-20|Critical error: File descriptor in bad state: apr_|
|54998|Ver|Nor|2013-05-21|Apache 2.4 terminates all SSL connections using an|
|55000|New|Nor|2013-05-21|Memory usage per process doubles when Apache is co|
|55021|New|Enh|2013-05-28|Support arbitrary sql to authentication username/p|
|55022|Inf|Cri|2013-05-28|child pid 3123 exit signal Bus error (10) - Apache|
|55034|Inf|Maj|2013-05-31|Apache 2.4.4 won't open more that 32k VH file hand|
|55039|New|Enh|2013-05-31|"RequestHeader edit" can't access environment vari|
|55045|New|Nor|2013-06-01|calls to gets() in test_find.c and test_parser.c  |
|55068|New|Enh|2013-06-06|root permissions when writing to per vhosts errorl|
|55069|New|Min|2013-06-06|notice message in error_log even when LogLevel err|
|55070|Opn|Enh|2013-06-06|mod_fcgid stderr always goes to main error log    |
|55072|New|Nor|2013-06-07|ErrorLog doesn't work well when apache shutdown   |
|55093|New|Nor|2013-06-12|[PATCH] mod_fcgid 2.3.7 truncates large posts on R|
|55096|New|Nor|2013-06-12|Make not running on httpd configure Solaris       |
|55098|New|Nor|2013-06-13|does not listen to IP4 when both IP4 address and I|
|55106|New|Enh|2013-06-17|ProxyErrorOverride considers response codes >= 400|
|55117|New|Nor|2013-06-18|GracefullTimeout for worker threads               |
|55147|New|Nor|2013-06-26|"Header always" w/ cache different in 2.4         |
|55148|Inf|Nor|2013-06-26|Error during SSL Handshake with remote server     |
|55152|New|Nor|2013-06-28|graceful restart adjusts to new balancer members, |
|55156|New|Nor|2013-06-28|mod_cache not respecting s-maxage cache-control he|
|55178|New|Nor|2013-07-01|[PATCH] mod_authnz_ldap SASL authentication suppor|
|55192|New|Trv|2013-07-03|htaccess error messages missing request context   |
|55193|New|Min|2013-07-03|ErrorLogFormat is ignored by some modules         |
|55226|New|Enh|2013-07-09|Request for "domain cluster" feature for mod_proxy|
|55234|New|Maj|2013-07-10|Working of attribute "protocol" attribute "protoco|
|55276|Inf|Enh|2013-07-17|Add REST API for load balancer for dynamic registr|
|55278|New|Nor|2013-07-18|mod_session's cookie may be empty, is repeated twi|
|55284|New|Nor|2013-07-20|repeatable segv                                   |
|55286|New|Nor|2013-07-21|Floating point exception (8) in mod_auth_digest   |
|55293|New|Nor|2013-07-22|Incorrect default MIME type for .woff fonts       |
|55306|New|Nor|2013-07-25|Error when copying svn repository, which contains |
|55323|New|Nor|2013-07-29|Double unescaped uri in sub request handler       |
|55327|New|Nor|2013-07-30|Segmentation fault when stopping Apache 2.4.6 norm|
|55340|New|Maj|2013-08-01|Listen for valid, unconfigured IP address passes c|
|55344|New|Nor|2013-08-02|missing ap_hook_monitor on windows                |
|55346|New|Nor|2013-08-02|When on filled quota filesystem, mod_fcgid init in|
|55348|New|Nor|2013-08-02|%h is not changed in logging, only %a             |
|55351|New|Enh|2013-08-04|allow ProxyPassReverseCookieDomain to automaticall|
|55362|New|Nor|2013-08-05|Apache httpd sends "400 Bad Request" to client due|
|55379|New|Min|2013-08-07|htdigest -c doesn't behave as described anymore   |
|55394|New|Nor|2013-08-09|apache 2.4 randomy crashes with signal 6          |
|55401|New|Enh|2013-08-11|document that force-proxy-request-1.0 implies prox|
|55415|New|Maj|2013-08-14|Proxy loop caused by ProxyErrorOverride and ErrorD|
|55431|New|Nor|2013-08-16|mod_negotation does not force the mime type listed|
|55433|New|Nor|2013-08-16|mod_proxy ignores final status code for aborted re|
|55443|Inf|Maj|2013-08-17|never gives 300 multiple choices                  |
|55445|New|Maj|2013-08-18|mod_socache_memcache ignores expiry, creating eter|
|55447|New|Enh|2013-08-18|make type-maps usable again, by making them access|
|55448|New|Nor|2013-08-19|segfault in set_max_workers at event.c:3194 on SIG|
|55449|New|Maj|2013-08-19|AH01185: worker slotmem_create failed --> slotmem |
|55452|New|Maj|2013-08-19|Redirect                                          |
|55458|New|Enh|2013-08-20|allow to configure what mod_ssl responds when one |
|55460|New|Enh|2013-08-21|allow service names to be used in the Listen direc|
|55467|New|Nor|2013-08-21|Support for OpenSSL custom TLS extensions and supp|
|55523|New|Trv|2013-09-04|auth_groupfile error log on access even though suc|
|55535|Inf|Nor|2013-09-08|incorrect check state parametr                    |
|55540|New|Cri|2013-09-09|mod_proxy gzip chunked issue (sample site provided|
|55549|New|Min|2013-09-11|AuthLDAPSubGroupAttribute doesn't do anything     |
|55550|New|Nor|2013-09-11|AuthLDAPSubGroupClass checking is very inefficient|
|55556|New|Nor|2013-09-13|apachebench (ab) doesn't use so_reuseaddr         |
|55557|New|Nor|2013-09-14|Some cppcheck reports                             |
|55573|New|Enh|2013-09-19|FileETag needs MTimeSeconds, MTime with granularit|
|55581|New|Enh|2013-09-22|Support concurrent connections to same FastCGI pro|
|55590|Inf|Maj|2013-09-24|second commit is failing if space is in file name |
|55596|New|Enh|2013-09-25|Add date format used by Expires header            |
|55607|New|Enh|2013-09-28|Re-set HOME environment variable to directory from|
|55615|New|Nor|2013-09-30|Connections are starved and not balanced when conc|
|55619|New|Nor|2013-10-02|Apache httpd reported 500 internal error when uplo|
|55627|New|Min|2013-10-04|Remove unnecessary APLOGNO() for trace logging per|
|55636|Inf|Cri|2013-10-07|long lost child came home - Apache is not respondi|
|55646|Inf|Nor|2013-10-10|non-2xx responses are not considered errors       |
|55654|New|Nor|2013-10-15|Extract variables from configuration without start|
|55670|New|Min|2013-10-18|Startup may fail silently at post_config          |
|55673|New|Nor|2013-10-18|httpd fails to start with SSLProxyMachineCertifica|
|55680|New|Enh|2013-10-20|online manual directory option doesn't exist      |
|55698|New|Maj|2013-10-24|Apache 2.2 + mod_fcgid 2.3.7 (CentOS 6.4) graceful|
|55700|New|Enh|2013-10-24|add something like RewriteOptions InheritDown     |
|55707|New|Nor|2013-10-25|SSLProtocol directive seem to be ignored over diff|
|55708|New|Nor|2013-10-25|Access violation in msvcrt.dll when calling getenv|
|55711|New|Min|2013-10-28|--enable-foo doesn't enable foo                   |
|55712|New|Nor|2013-10-28|Relative <!--#include virtual="../file.shtml"--> g|
|55720|New|Enh|2013-10-29|separate LDAP Bind timeout from LDAPTimeout       |
|55738|New|Nor|2013-11-03|PVS-Studio: few issues                            |
|55763|New|Nor|2013-11-09|raise roots soft RLIMIT_NPROC on linux for high ma|
|55774|New|Nor|2013-11-13|ab: optionally accept tls client certificate      |
|55781|New|Nor|2013-11-15|ajp_read_header: ajp_ilink_receive failed; 120006)|
|55786|New|Maj|2013-11-16|SSLVerifyClient and OptRenegotiate result in a 403|
|55787|New|Maj|2013-11-16|Chroot fails with "Cannot chroot when not started |
|55790|New|Maj|2013-11-17|mod_fcgid lockfile hardcoded to be in /tmp        |
|55793|New|Enh|2013-11-18|DTrace/SystemTap support                          |
|55808|New|Nor|2013-11-21|File integrity verification using MD5 and SHA1    |
|55819|Inf|Nor|2013-11-27|Closing connection behaviour                      |
|55828|New|Cri|2013-11-28|Httpd not start if use ProxyPass balancer://      |
|55834|New|Maj|2013-12-02|Apache does not honor the openssl library path giv|
|55838|New|Nor|2013-12-03|PHP files are being executed instead of downloaded|
|55841|New|Nor|2013-12-04|Misleading news items on bugfix releases ("This ve|
|55856|New|Nor|2013-12-08|YYEMPTY (-2) used as index into yytname (const arr|
|55866|New|Nor|2013-12-11|When ProxyPreserveHost is on, SSL expects the wron|
|55878|New|Nor|2013-12-12|mod_fcgid kills spawned processes too early       |
|55881|New|Nor|2013-12-13|segmentation fault at proxy_util.c:1546           |
|55883|New|Enh|2013-12-14|string callers of ap_expr should be able to transf|
|55887|New|Maj|2013-12-16|In Windows apache, when user access to /con, apach|
|55897|New|Nor|2013-12-17|[PATCH]patch with SO_REUSEPORT support            |
|55898|New|Enh|2013-12-17|[RFE] listen on unix socket?                      |
|55914|New|Reg|2013-12-20|child exit segmentation fault after apache gracefu|
|55919|New|Nor|2013-12-22|EPREFIX and dynamic modules                       |
|55942|New|Nor|2014-01-01|400 - Bad Request on POST (Windows Server 2012 Hyp|
|55952|New|Nor|2014-01-05|ab: SSL keep-alive fails with apr_pollset_poll: Th|
|55962|New|Enh|2014-01-06|mod_remoteip should not allow an external proxy to|
|55963|New|Nor|2014-01-07|Add application/ld+json to mime.types             |
|55981|Opn|Nor|2014-01-09|mod_mbox hang on some e-mails on user@openoffice.a|
|55985|Opn|Nor|2014-01-10|apache does not reopen logs when multiple graceful|
|55989|Opn|Enh|2014-01-11|write to error log upon RewriteRule [F]orbidden   |
|55991|New|Nor|2014-01-12|mod_charset_lite doesn't bail out on non-identity |
|56009|Inf|Cri|2014-01-14|Memory leak in httpd 2.4.3 over time with persista|
|56014|New|Nor|2014-01-15|MOd rewrite CO Cookie method the lifetime flag not|
|56028|New|Enh|2014-01-17|Add http/1.0, http/1.1 NPN advertisement to enable|
|56034|New|Nor|2014-01-20|CPU consumption due to circular linked list in ap_|
|56040|New|Enh|2014-01-21|should be able to remove Max-Age cookie parameter |
|56041|New|Enh|2014-01-21|should be able to disable session expiry increment|
|56052|New|Nor|2014-01-22|ap_session_load called multiple times for expired |
|56055|New|Nor|2014-01-23|Route is not extracted properly when a session coo|
|56064|New|Enh|2014-01-25|Optimize PNGs                                     |
|56067|New|Nor|2014-01-27|FallbackResource doesn't work if directory exists |
|56081|New|Maj|2014-01-28|Apache 2.2.26 SIGSEGVs when POST'ing data         |
|56091|Inf|Nor|2014-01-30|SSL handshake error when httpd compiled on Oracle |
|56098|New|Nor|2014-02-01|duplicate cookie                                  |
|56101|New|Cri|2014-02-03|Apache 2.4.6 ceases processing requests (scoreboar|
|56102|New|Nor|2014-02-03|SSL_CLIENT_S_DN_x509_0 is undefined in the environ|
|56109|New|Nor|2014-02-05|Cannot increase the read limit                    |
|56113|New|Nor|2014-02-06|dist commit messages missing from mail-archives di|
|56131|New|Nor|2014-02-12|ProxyPassReverse / zealously replaces Location hea|
|56135|New|Nor|2014-02-13|Add DC to list of x509 components                 |
|56152|New|Nor|2014-02-18|ProxyBlock does not accept network addresses      |
|56176|New|Nor|2014-02-21|mod_substitute truncates the response body if the |
|56188|New|Nor|2014-02-25|mod_proxy_fcgi does not send FCGI_ABORT_REQUEST on|
|56209|New|Nor|2014-03-03|Uninitialised variables in os/win32/ap_regkey.c   |
|56226|Ver|Nor|2014-03-06|per VirtualHost KeepAliveTimeout is not recognized|
|56229|New|Enh|2014-03-06|ocsp ProxyHost and ProxyPort support              |
|56230|New|Nor|2014-03-07|mod_access_compat can log a bogus client denied me|
|56235|New|Nor|2014-03-07|quotes should be optional around expr             |
|56247|New|Cri|2014-03-12|semaphore creation for proxypass                  |
|56250|New|Nor|2014-03-12|sbindir in config.layout for Apache has bin instea|
|56251|New|Nor|2014-03-12|Increase maximum length of FcgidInitialEnv string |
|56252|New|Enh|2014-03-12|make install as privileged user creates files not |
|56262|New|Nor|2014-03-14|ab does not work with extremely long cookies      |
|56264|New|Trv|2014-03-14|Confusing error with .htaccess rewrite to proxy wh|
|56270|New|Enh|2014-03-15|--with-ssl=/foo w/o pkgconfig needs help on AIX 64|
|56288|New|Enh|2014-03-19|rewrite URLs in style attributes                  |
|56289|New|Nor|2014-03-19|Buffer overflow in mod_proxy_html's string replace|
|56308|New|Nor|2014-03-24|1 second delay in handle request kills performance|
|56312|New|Nor|2014-03-25|Can't configure different balancing workers that c|
|56314|New|Nor|2014-03-25|exiting from MPM-worker child caused assert in apr|
|56326|New|Nor|2014-03-27|cache_quick_handler does not serve responses with |
|56331|New|Nor|2014-03-29|windows 'access denied' during revalidaton of reso|
|56333|New|Enh|2014-03-31|API to resume a SUSPENDED connection              |
|56362|New|Maj|2014-04-08|ldaps only works with port 636. Non-standard port |
|56379|New|Nor|2014-04-09|Number of columns in the results returned from pgs|
|56395|New|Enh|2014-04-11|Allow SERVER_ADDR environment variable to be optio|
|56404|New|Nor|2014-04-12|endless loop  when connect to a website(https)  wh|
|56413|New|Blk|2014-04-15|can not restart httpd on centos 5.10 64bit        |
|56422|New|Nor|2014-04-17|authnz_ldap with other forms of authn can fail req|
|56457|New|Nor|2014-04-25|mod_proxy_html.c: 2 * cut'n'paste errors          |
|56473|New|Nor|2014-04-30|ETags don't change when headers do                |
|56475|New|Enh|2014-04-30|Allow TLS record size to be configured            |
|56483|New|Enh|2014-05-02|add disableKeepAlivePercentage similar to tomcat h|
|56493|New|Min|2014-05-06|mod_expires should not set expires in future for s|
|56495|New|Nor|2014-05-06|Application behind mod_proxy does not get SessionH|
|56500|Opn|Enh|2014-05-07|vhosts priority order with wildcard               |
|56504|New|Nor|2014-05-08|cannot build static support binaries              |
|56508|New|Nor|2014-05-09|Requiring SNI - SSLStrictSNIVHostCheck semantics  |
|56517|New|Enh|2014-05-12|Virtualhosts cannot inherit parent CustomLog      |
|56528|New|Enh|2014-05-15|"bad flags delimiter" - improve helpfulness       |
|56541|New|Nor|2014-05-18|Proxy 502's on large file post requests           |
|56559|New|Nor|2014-05-25|multiple unix sockets in one virtualhost fails    |
|56569|New|Nor|2014-05-27|Null CRC in gzip footer with mod_cgid and ErrorDoc|
|56587|New|Nor|2014-06-03|Many VirtualHost's with SSLEngine On              |
|56590|New|Enh|2014-06-04|(REST-) API for configuring balancer manager remot|
|56594|Inf|Nor|2014-06-05|mod_authn_dbd, mod_dbd and mod_ssl                |
|56598|New|Nor|2014-06-06|Content-Length header should be always interpreted|
|56621|New|Nor|2014-06-13|Rotatelogs.exe first start                        |
|56622|New|Nor|2014-06-13|mod_reqtimeout incorrectly applies timeouts to CON|
|56626|New|Nor|2014-06-15|Add info about rotatelogs to log rotation document|
|56633|New|Nor|2014-06-16|mod_auth_basic breaks mod_autoindex               |
|56645|New|Maj|2014-06-19|socket callback with timeout callback causes infin|
|56664|New|Nor|2014-06-24|Proxy retry timeout does not cope with system time|
|56687|New|Nor|2014-07-01|ProxySourceAddress failed to bind socket to local |
|56697|New|Maj|2014-07-04|status page still shown while blocked             |
|56718|New|Nor|2014-07-14|Cleanup request Host headers when absolute URI are|
|56719|New|Nor|2014-07-14|parallel requests get served with delays          |
|56738|New|Enh|2014-07-17|Ability to extract route from cookie with regexp  |
|56740|New|Nor|2014-07-18|suspended_count not maintained properly with wstun|
|56750|New|Enh|2014-07-20|SuexecUserGroup replacement                       |
|56751|New|Maj|2014-07-20|Fails to properly mitigate Slow Post DoS attack   |
|56753|New|Nor|2014-07-21|mod_lua.so: symbol luaL_openlib: referenced symbol|
|56778|New|Nor|2014-07-28|while running make command i got this error       |
|56794|New|Nor|2014-07-31|Added AuthDBDFullAuthQuery option                 |
|56795|Inf|Nor|2014-07-31|Apache 2.4.10 Program received signal SIGPIPE, Bro|
|56818|Inf|Nor|2014-08-05|SetEnvIf may set invalid string length on empty st|
|56843|New|Enh|2014-08-12|Support different OCSP stapling max ages          |
|56868|New|Nor|2014-08-18|relative LuaRoot broken                           |
|56879|New|Nor|2014-08-22|Information disclosure                            |
|56889|New|Nor|2014-08-26|Close state never dies                            |
|56898|New|Nor|2014-08-28|Headers in err_headers_out are not returned when a|
|56918|Opn|Blk|2014-09-06|error: 'ap_copy_scoreboard_worker' undeclared here|
|56926|New|Nor|2014-09-08|Filename causes AH02599 slotmem issue             |
|56933|New|Min|2014-09-09|not sure it's an appache bug : some browser want t|
|56942|New|Reg|2014-09-10|Unable to implement TRANSFER-CHUNKED:ENCODING with|
|56943|New|Nor|2014-09-10|mod_proxy_connect - AH02447: err/hup on backconn  |
|56977|New|Maj|2014-09-12|segfaults when using mod_mem_cache + mod_disk_cach|
|56986|New|Blk|2014-09-17|chunked Transfer-Encoding forbidden: /test/test.dl|
|57014|New|Cri|2014-09-24|Incorrect test for CC_FOR_BUILD prevents build (on|
|57023|New|Nor|2014-09-26|Socache shmcb don't cache file bigger than 11k    |
|57028|New|Enh|2014-09-27|mod_spdy - support Apache 2.4                     |
|57044|New|Nor|2014-09-29|[PatchAvailable] Use base64url in mod_unique_id ('|
|57045|New|Nor|2014-09-30|dumpio output strings are missing                 |
|57046|New|Enh|2014-09-30|Add additional parameter to enable check URL befor|
|57056|New|Maj|2014-10-03|Rewrite port is taken into hostname               |
|57067|New|Nor|2014-10-08|A proxy worker both standalone and balancer member|
|57069|New|Nor|2014-10-08|apache ssl timeout during chunked request in rever|
|57073|New|Cri|2014-10-09|Intermittent Connection Issues using default httpd|
|57085|New|Enh|2014-10-14|Implement Proxy Protocol in httpd                 |
|57087|New|Nor|2014-10-14|mod_proxy_fcgi doesn't send cgi CONTENT_LENGTH var|
|57100|Ver|Nor|2014-10-16|"SSLProtocol ALL" is ignored for virtual hosts    |
|57101|New|Enh|2014-10-16|[PATCH] Better error reporting when child spawn fa|
|57109|New|Nor|2014-10-17|GPG verification examples are wrong               |
|57119|Opn|Enh|2014-10-20|Suppress address reuse / DNS cache in mod_proxy   |
|57120|New|Nor|2014-10-21|Disable SSLv3 by default (POODLE)                 |
|57121|New|Nor|2014-10-21|ocsp stapling should not pass temporary server out|
|57131|New|Nor|2014-10-22|OCSP Stapling scalability concern                 |
|57159|New|Min|2014-10-28|mod_ssl OCSP Stapling directives don't support per|
|57160|New|Nor|2014-10-29|httxt2dbm doesn't generate files on NAS           |
|57174|New|Nor|2014-10-31|Update windows visual studio build                |
|57210|New|Nor|2014-11-14|LuaHookMapToStorage not firing in per-directory co|
|57211|New|Enh|2014-11-14|Config-time options                               |
|57212|Opn|Nor|2014-11-14|Headers returned by scripts are limited to 8190 by|
|57218|New|Nor|2014-11-15|[Feature Request] Apache Bench (AB) to output a cs|
|57219|New|Nor|2014-11-15|ApacheBench quits unexpectedly with high concurren|
|57220|New|Nor|2014-11-15|[Feature Request] Add option to ApacheBench to giv|
|57228|New|Nor|2014-11-17|glibc detected *** httpd: double free or corruptio|
|57229|New|Maj|2014-11-17|mod_sed dies on long lines                        |
|57286|New|Nor|2014-11-29|Symbolic links are not honoured                   |
|57298|New|Min|2014-12-02|RewriteBase inside FilesMatch behaves oddly       |
|57299|New|Enh|2014-12-02|mod_session_dbd should not make a database call pe|
|57300|New|Enh|2014-12-02|mod_session_dbd should not save the session at eac|
|57301|New|Enh|2014-12-02|Add SessionMaxAgeAbsolute Directive               |
|57304|Inf|Nor|2014-12-03|MySQL DBD Authentication Incompatible with SSL    |
|57311|New|Nor|2014-12-04|BalancerMember enclosed by <If> gives syntax error|
|57313|New|Nor|2014-12-05|The DefaultType directive has been removed        |
|57327|New|Nor|2014-12-08|mod_ssl seg fault on exit                         |
|57334|Ver|Maj|2014-12-09|Segmentation fault in SSL_renegotiate at ssl_lib.c|
|57337|New|Nor|2014-12-10|Content negotiation fails with conditional Redirec|
|57339|New|Enh|2014-12-10|ErrorLogFormat doesn't allow logging in Internet d|
|57360|New|Nor|2014-12-17|Fail gracefully on certificate/key mismatch       |
|57372|New|Nor|2014-12-19|httpd will lookup every home directory while start|
|57374|Ver|Nor|2014-12-19|Event MPM: Wrong KeepAliveTimeout when system cloc|
|57375|New|Enh|2014-12-19|Support LibreSSL as an alternative toolkit for mod|
|57379|New|Nor|2014-12-20|[patch] Makefile.in  with mpm-shared, cgi and cgid|
|57383|New|Cri|2014-12-21|Error retrieving Report: An Existing connection wa|
|57386|New|Blk|2014-12-22|html5 lost some comments                          |
|57398|New|Maj|2014-12-26|AH01075: Error dispatching request to : (passing b|
|57399|New|Nor|2014-12-28|Many unnecessary CPU wakeups per second           |
|57406|New|Nor|2014-12-31|cgi-bin script is not executing                   |
|57412|New|Maj|2015-01-04|rewrite rules causes duplicate requests           |
|57416|New|Nor|2015-01-06|htcacheclean thinks the cache is smaller than it a|
|57424|Opn|Nor|2015-01-07|mod_rewrite not using ap_context_document_root    |
|57436|New|Enh|2015-01-12|Option to strip extra data after websocket request|
|57439|New|Enh|2015-01-13|Allow to change body timeout per location         |
|57448|New|Nor|2015-01-16|SSI <!--#set --> cannot capture backreferences fro|
|57453|New|Maj|2015-01-17|403 error when virtualhost configured with non-exi|
|57471|New|Nor|2015-01-20|Apache 2.4.10 Compilation fails when compiling aga|
|57477|New|Nor|2015-01-21|mod_auth_digest AH00052: child pid $pid exit signa|
|57483|New|Nor|2015-01-22|Omit "Keep-Alive" header on 1.1 connections       |
|57492|New|Nor|2015-01-24|incomplete chunked-transfered request body is not |
|57506|New|Nor|2015-01-27|<If> directive doesn't work within a <Location> se|
|57510|New|Enh|2015-01-28|Engine keyform support for private keys           |
|57511|New|Maj|2015-01-28|Opening plain TCP Socket on SSL port causes denial|
|57515|New|Nor|2015-01-30|Define/Undefine don't work reasonably outside of g|
|57519|New|Nor|2015-02-01|change SSLv2 to SSLv3 or remove SSLv2 support allt|
|57526|Opn|Maj|2015-02-03|Apache 2.2.29_openssl-1.0.1k_x86_64 Error creating|
|57529|Opn|Nor|2015-02-03|htcacheclean doesn't show the cached URL with '-a'|
|57585|New|Nor|2015-02-13|httpd fails to start if there is an IncludeOptiona|
|57590|New|Nor|2015-02-18|loading mod_proxy_http makes rewriteRule's [proxy]|
|57591|New|Nor|2015-02-18|DirectoryIndex directive cannot be overwritten    |
|57616|New|Maj|2015-02-23|AB - DNS roundrobin support                       |
|57624|New|Enh|2015-02-23|Provide support for http/2.0                      |
|57631|New|Nor|2015-02-24|Useless test in acinclude.m4                      |
|57632|New|Nor|2015-02-24|mod_systemd passes invalid default to APACHE_MODUL|
|57635|New|Nor|2015-02-25|meta-refresh is not rewritten by mod_proxy_html   |
|57636|New|Nor|2015-02-25|URLs without protocol are not rewriten by mod_prox|
|57641|New|Maj|2015-02-27|mod_substitute: Invalid merge order               |
|57646|New|Enh|2015-02-27|SSLEngine inside If directive                     |
|57660|New|Trv|2015-03-04|AB - free memory allocated by xmalloc and xcalloc |
|57680|New|Nor|2015-03-09|SSLSessionCacheTimeout has no effect              |
|57685|New|Nor|2015-03-10|Requests are denied while the mod_cgid daemon star|
|57691|New|Nor|2015-03-12|mod_proxy/proxy_util confuses UDS scheme with HTTP|
|57695|New|Nor|2015-03-12|[core:warn] [pid 1120] (101)Network is unreachable|
|57710|New|Nor|2015-03-15|Wildcard matching for logging headers             |
|57725|New|Enh|2015-03-18|ApacheBench: include http status code in gnuplot o|
|57742|New|Nor|2015-03-23|"reliable piped logging" doesn't work for ErrorLog|
|57745|New|Nor|2015-03-23|httpd exits 1 with no stderr when proxy_balancer_m|
|57746|New|Nor|2015-03-23|Apache hangs on startup using MPM event           |
|57751|Inf|Maj|2015-03-24|Problems with proxy reverse to websockets         |
|57756|New|Enh|2015-03-25|Config options for handling of pipelined request  |
|57757|New|Cri|2015-03-25|extern apr_xlate_t *ap_locale_to_ascii variable gi|
|57771|New|Nor|2015-03-27|cleanup_script uses incorrect connection ID       |
|57774|Inf|Nor|2015-03-28|httpd.conf <IfModule proxy_html_module> content er|
|57777|New|Nor|2015-03-30|Security concerns with documentation of AddHandler|
|57781|New|Nor|2015-03-31|disable reconnection after connection error       |
|57784|New|Enh|2015-03-31|[RFE] Multiple ErrorLog directives                |
|57785|New|Nor|2015-04-01|REDIRECT_URL is not suitable for use in server-gen|
|57795|Opn|Maj|2015-04-07|mod_proxy_wstunnel sometimes does not connect and |
|57800|New|Nor|2015-04-09|High CPU usage in ap_core_output_filter           |
|57807|New|Enh|2015-04-13|Build-configurable environment variable length    |
|57810|New|Nor|2015-04-13|Should apache ignore difference in trailing dot be|
|57813|New|Nor|2015-04-14|Rewrite 'pre-compressed content' recipe using 2.4 |
|57814|New|Nor|2015-04-14|Teach mod_deflate how to serve pre-comressed conte|
|57819|New|Nor|2015-04-15|Need a conventions document                       |
|57832|New|Enh|2015-04-19|Reduction of response splitting attacks consequenc|
|57853|Inf|Nor|2015-04-24|mod_proxy_http sends request with header 'Expect: |
|57868|New|Nor|2015-04-28|SIGSEV when lacking correct DB access permissions |
|57876|New|Reg|2015-04-30|logresolve.exe on any Windows immediately crashes |
|57878|New|Nor|2015-04-30|Using UTF-8 for all languages, and avoiding html-e|
|57895|New|Min|2015-05-05|missing m4a mimeType in mime.types                |
|57911|New|Min|2015-05-09|Rewrite documentation unclear or wrong about what |
|57927|New|Maj|2015-05-13|Segmentation Fault at proxy_util.c:994            |
|57933|New|Min|2015-05-18|apr_port_t returns constant                       |
|57941|New|Nor|2015-05-21|config.status: line 331: syntax error near unexpec|
|57949|New|Enh|2015-05-25|new mod_ssl environment variable SSL_{CLIENT|SERVE|
|57950|New|Nor|2015-05-26|[patch] buildconf change hint in build to newer ap|
|57960|New|Nor|2015-05-27|PUT truncates response body; status_line appears t|
|57976|New|Cri|2015-05-30|Server threads stale when sending 500 status with |
|57978|New|Nor|2015-06-01|unix:/ works with any number of / slashes  except |
|57979|New|Nor|2015-06-01|can not turn change log level for mod_filter      |
|57996|New|Nor|2015-06-03|Symlinks erroneously not followed when target inod|
|57997|New|Nor|2015-06-03|Threads started during child_init don't block sign|
|57999|New|Nor|2015-06-04|ap_getparents() may remove start slash of uri     |
|58001|New|Enh|2015-06-04|Implement Forwarded header (RFC 7239) to mod_proxy|
|58007|New|Nor|2015-06-06|400 Bad Request with fully qualified domain name o|
|58020|New|Nor|2015-06-11|When user authenticates with certificate which has|
|58024|New|Nor|2015-06-11|(Graceful) Restart does not work after adding a Ba|
|58025|New|Enh|2015-06-11|mod_authz_dbd : new dbd-query and AuthzDBDQuery op|
|58026|New|Nor|2015-06-11|return 421 status code when SNI and Host: header d|
|58044|New|Cri|2015-06-16|Error sintax 'lua_dump'                           |
|58050|New|Nor|2015-06-17|ErrorDocument does not always work                |
|58073|New|Nor|2015-06-24|Extremely long time for graceful restart          |
|58089|New|Nor|2015-07-01|mod_authz_host uses proxy IP even when mod_remotei|
|58091|New|Nor|2015-07-02|mod_socache_memcache does not reuse memcache conne|
|58097|New|Enh|2015-07-03|[feat] Preserve original connecting IP            |
|58101|New|Nor|2015-07-05|DeflateCompressionLevel inside vhost resets logfor|
|58107|New|Blk|2015-07-06|Httpd crashes on startup every time, dump file att|
|58109|New|Nor|2015-07-06|Apache on windows cannot handle the hash symbol (#|
|58118|Inf|Min|2015-07-09|mod_proxy_fcgi logs 503 when user aborts connectio|
|58120|New|Nor|2015-07-10|ProxyPassInherit does not work as expect          |
|58121|New|Nor|2015-07-10|ProxyHTMLMeta seems to ignore all <meta http-equiv|
|58126|New|Nor|2015-07-11|[patch] acinclude.m4 fix "warning: underquoted def|
|58129|New|Nor|2015-07-12|man pages are not generated correctly             |
|58132|New|Nor|2015-07-12|non-standard, non-traditional man page layout make|
|58135|New|Nor|2015-07-14|mod_cache sends client "if-Modified-Since" to back|
|58141|New|Nor|2015-07-15|Apache Service doesn't start when rotatlogs.exe pa|
|58142|New|Nor|2015-07-15|authz_core ignores loglevel                       |
|58158|New|Nor|2015-07-21|Not honoring HTTP spec with regard to Accept-Encod|
|58168|New|Enh|2015-07-21|Would like full request evaluation support in Rewr|
|58171|New|Nor|2015-07-22|ap_session_save saves the wrong session after a de|
|58177|New|Enh|2015-07-24|Mod Proxy forward trailers in http chunked request|
|58180|New|Enh|2015-07-24|ErrorDocument original URL in subsequent <Location|
|58181|New|Enh|2015-07-25|mod_expire should allow "minus" keyword same like |
|58188|New|Nor|2015-07-28|http2 mod_lua: support build with lua 5.2+        |
|58197|New|Nor|2015-07-31|apr-util-1.5.4 build against openldap - "could not|
|58202|New|Enh|2015-07-31|apxs -q += HTTPD_MAJOR , HTTPD_MMN variables      |
|58213|New|Nor|2015-08-05|Can't use SUITEB128 etc. OpenSSL cipher strings wi|
|58225|New|Reg|2015-08-08|intermitant segfault 11 in session_identity_encode|
|58226|New|Nor|2015-08-08|XSS in Error Page                                 |
|58231|New|Nor|2015-08-11|RewriteCond can add "Host" to the Vary-Header     |
|58235|New|Enh|2015-08-12|Ability to allow from domain but with using forwar|
|58243|New|Nor|2015-08-14|rotatelogs goes infinite at startup               |
|58248|New|Nor|2015-08-17|Error 404 in use some characters of utf8 in url   |
|58257|New|Nor|2015-08-18|require ldap-group does not work if account-fullna|
|58267|New|Min|2015-08-21|" Error ap_proxy_set_scoreboard_lb(xxx) failed in |
|58278|New|Nor|2015-08-24|apache - mod_security Issue : apache no releasing |
|58280|New|Nor|2015-08-24|Backend connection not closed until timeout if cli|
|58288|New|Nor|2015-08-27|Semaphore amount increase until crash when enablin|
|58292|New|Nor|2015-08-27|FallbackResource breaks chunked encoding sometimes|
+-----+---+---+----------+--------------------------------------------------+
| Total 1534 bugs                                                           |
+---------------------------------------------------------------------------+

From dev-return-83658-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 31 07:38:31 2015
Return-Path: <dev-return-83658-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 76AAB17634
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 31 Aug 2015 07:38:31 +0000 (UTC)
Received: (qmail 36568 invoked by uid 500); 31 Aug 2015 07:38:31 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 36503 invoked by uid 500); 31 Aug 2015 07:38:30 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 36493 invoked by uid 99); 31 Aug 2015 07:38:30 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Aug 2015 07:38:30 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 7298BC0F52
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 07:38:30 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.998
X-Spam-Level:
X-Spam-Status: No, score=0.998 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H2=-0.001,
	SPF_HELO_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id TskLQI0wQkNO for <dev@httpd.apache.org>;
	Mon, 31 Aug 2015 07:38:19 +0000 (UTC)
Received: from mail1.bemta14.messagelabs.com (mail1.bemta14.messagelabs.com [193.109.254.115])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id BDB4542B5D
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 07:38:18 +0000 (UTC)
Received: from [193.109.255.99] by server-11.bemta-14.messagelabs.com id F2/1D-15765-36404E55; Mon, 31 Aug 2015 07:38:11 +0000
X-Env-Sender: ruediger.pluem@vodafone.com
X-Msg-Ref: server-5.tower-48.messagelabs.com!1441006691!26193394!1
X-Originating-IP: [195.232.244.133]
X-StarScan-Received:
X-StarScan-Version: 6.13.16; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 7704 invoked from network); 31 Aug 2015 07:38:11 -0000
Received: from mailout01.vodafone.com (HELO mailout01.vodafone.com) (195.232.244.133)
  by server-5.tower-48.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 31 Aug 2015 07:38:11 -0000
Received: from mailint02.vodafone.com (mailint02.vodafone.com [195.232.244.199])
	by mailout01.vodafone.com (Postfix) with ESMTP id 3n4Ng7177Rz1yFw
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 09:38:11 +0200 (CEST)
Received: from mailint02.vodafone.com (localhost [127.0.0.1])
	by mailint02.vodafone.com (Postfix) with ESMTP id 3n4Ng700CdzQnQS
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 09:38:10 +0200 (CEST)
Received: from VOEXC03W.internal.vodafone.com (voexc03w.dc-ratingen.de [145.230.101.23])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mailint02.vodafone.com (Postfix) with ESMTPS id 3n4Ng6736pzQnNl
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 09:38:10 +0200 (CEST)
Received: from VOEXC10W.internal.vodafone.com (145.230.101.30) by
 VOEXC03W.internal.vodafone.com (145.230.101.23) with Microsoft SMTP Server
 (TLS) id 14.3.224.2; Mon, 31 Aug 2015 09:38:10 +0200
Received: from VOEXM10W.internal.vodafone.com ([169.254.2.132]) by
 VOEXC10W.internal.vodafone.com ([145.230.101.30]) with mapi id
 14.03.0224.002; Mon, 31 Aug 2015 09:38:09 +0200
From: =?utf-8?B?UGzDvG0sIFLDvGRpZ2VyLCBWb2RhZm9uZSBHcm91cA==?=
	<ruediger.pluem@vodafone.com>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
Subject: RE: svn commit: r1610674 - in /httpd/httpd/trunk: include/ap_mmn.h
 include/httpd.h modules/proxy/mod_proxy_http.c modules/proxy/proxy_util.c
 server/util.c
Thread-Topic: svn commit: r1610674 - in /httpd/httpd/trunk: include/ap_mmn.h
 include/httpd.h modules/proxy/mod_proxy_http.c modules/proxy/proxy_util.c
 server/util.c
Thread-Index: AQHQ4h7X02CPkEBjV0mY8DsLPmdZTJ4i4K8AgALa1/A=
Date: Mon, 31 Aug 2015 07:38:09 +0000
Message-ID: <AB1691BE05AE7F4992697F2A0835627AC630C626@VOEXM10W.internal.vodafone.com>
References: <20140715122701.0365D23888D7@eris.apache.org>
	<55E14871.3000209@wanadoo.fr>
 <CALK=YjN6XAPnrRAFHWXnayO=vkE0=2SGue5KOpKs44kUtcc6zA@mail.gmail.com>
In-Reply-To: <CALK=YjN6XAPnrRAFHWXnayO=vkE0=2SGue5KOpKs44kUtcc6zA@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

DQoNCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogRXJpYyBDb3ZlbmVyIFtt
YWlsdG86Y292ZW5lckBnbWFpbC5jb21dDQo+IFNlbnQ6IFNhbXN0YWcsIDI5LiBBdWd1c3QgMjAx
NSAxNjowMg0KPiBUbzogQXBhY2hlIEhUVFAgU2VydmVyIERldmVsb3BtZW50IExpc3QNCj4gU3Vi
amVjdDogUmU6IHN2biBjb21taXQ6IHIxNjEwNjc0IC0gaW4gL2h0dHBkL2h0dHBkL3RydW5rOg0K
PiBpbmNsdWRlL2FwX21tbi5oIGluY2x1ZGUvaHR0cGQuaCBtb2R1bGVzL3Byb3h5L21vZF9wcm94
eV9odHRwLmMNCj4gbW9kdWxlcy9wcm94eS9wcm94eV91dGlsLmMgc2VydmVyL3V0aWwuYw0KPiAN
Cj4gT24gU2F0LCBBdWcgMjksIDIwMTUgYXQgMTo1MSBBTSwgQ2hyaXN0b3BoZSBKQUlMTEVUDQo+
IDxjaHJpc3RvcGhlLmphaWxsZXRAd2FuYWRvby5mcj4gd3JvdGU6DQo+ID4gSWYgaSB1bmRlcnN0
YW5kIGNvcnJlY3RseSwgaWYgd2UgZmluZCBhbiBpbnZhbGlkIGNoYXIgYW5kDQo+ICdza2lwX2lu
dmFsaWQnLCB3ZQ0KPiA+IGZpcnN0IGxvb2sgZm9yIHRoZSBuZXh0IGNvbW1hIGFuZCBzdGFydCBz
ZWFyY2hpbmcgZm9yIG5ldyB0b2tlbiBmcm9tDQo+IHRoZXJlLg0KPiA+IElmIG5vIGNvbW1hIGlz
IGZvdW5kIGJlZm9yZSB0aGUgdHJhaWxpbmcgTlVMTCwgdGhlbiBub3RoaW5nIG1vcmUgY2FuIGJl
DQo+ID4gZm91bmQgYW5kIHdlIGVuZCB0aGUgcHJvY2Vzc2luZy4NCj4gPg0KPiA+IFNvIHNob3Vs
ZG4ndCB0aGlzIGJlOg0KPiA+ICAgICBjdXIgPSB0ZW1wICsgMTsNCj4gPiAoaS5lLiBnbyB0byB0
aGUgY2hhcmFjdGVyICpmb2xsb3dpbmcqIHRoZSBjb21tYSkNCj4gPg0KPiA+IE5vdCB0ZXN0ZWQs
IGJ1dCBJIHRoaW5rIHRoYXQgaWYgdGhlIGludmFsaWQgY2hhcmFjdGVyIGlzIHRoZSBvbmUganVz
dA0KPiBiZWZvcmUNCj4gPiB0aGUgY29tbWEsIHRoZW4gd2UgbG9vcCBmb3JldmVyLg0KPiANCj4g
SSB0aGluayB0aGUgYm90dG9tIG9mIHRoZSBsb29wIGhhcyBjdXIrKyBhbmQgdGhlcmUgaXMgbm8g
YnJlYWsgaW4gdGhpcw0KPiBwYXRoLCBzbyB0aGUgbmV4dCBpdGVyYXRpb24gd2lsbCBzdGFydCBv
biB0aGUgc2VwYXJhdG9yIGFuZCB0cmVhdCBpdA0KPiBhcyBhbiBlbXB0eSB0b2tlbj8NCg0KRXhh
Y3RseS4NCg0KPiANCj4gPiBBbHNvIGlmIHRoZToNCj4gPiAgICB0ZW1wID0gYXBfc3RyY2hyX2Mo
Y3VyLCAnXDAnKTsNCj4gPiBhYm92ZSBpcyBzdXBwb3NlZCB0byByZWFjaCB0aGUgZW5kIG9mIHRo
ZSBzdHJpbmcgYW5kIHN0b3AgcHJvY2Vzc2luZywgd2UNCj4gPiBoYXZlIHRoZSBzYW1lIHByb2Js
ZW0gYW5kIGNhbiBsb29wIGZvcmV2ZXIgaWYgdGhlIGxhc3Qgbm9uLU5VTEwgY2hhciBpcw0KPiB0
aGUNCj4gPiBpbnZhbGlkIGNoYXIuDQo+IA0KPiBTYW1lIGFzIGFib3ZlIEkgdGhpbms/DQoNCk15
IHRob3VnaHQgYXMgd2VsbC4NCg0KUmVnYXJkcw0KDQpSw7xkaWdlcg0KDQo=

From dev-return-83659-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 31 09:48:07 2015
Return-Path: <dev-return-83659-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9D32E17961
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 31 Aug 2015 09:48:07 +0000 (UTC)
Received: (qmail 55423 invoked by uid 500); 31 Aug 2015 09:48:07 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 55353 invoked by uid 500); 31 Aug 2015 09:48:07 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 55343 invoked by uid 99); 31 Aug 2015 09:48:07 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Aug 2015 09:48:07 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 996161AB281
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 09:48:06 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.005
X-Spam-Level:
X-Spam-Status: No, score=-0.005 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id SHyn6cqqYLZv for <dev@httpd.apache.org>;
	Mon, 31 Aug 2015 09:47:59 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 1350D20647
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 09:47:58 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id E635615A032F
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 11:47:50 +0200 (CEST)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: HTTP_MISDIRECTED_REQUEST
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CALK=YjMWtEenWe-nfiuOtj_KXQVP+s_1VmFh0qq8XgRbuU=_LQ@mail.gmail.com>
Date: Mon, 31 Aug 2015 11:47:50 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <30AD0382-02F0-4921-AB7F-87EFC8C2FB3B@greenbytes.de>
References: <CACsi253pEfeboS=eiQj=J=GGPXzSJnyhcDXRR8Ue-39FSv+ncw@mail.gmail.com> <F615D150-BF52-44A5-9EDF-806C9B65B369@gbiv.com> <5D0F0E94-1FCF-4E8A-9399-5A9D626E3432@greenbytes.de> <55E01C8E.9020605@apache.org> <5D662E1F-34DB-4FBB-84AE-D62F9E92E236@greenbytes.de> <55E021E3.5050109@apache.org> <14A7155C-44D2-4BCA-BC2F-17254693A134@greenbytes.de> <CALK=YjMWtEenWe-nfiuOtj_KXQVP+s_1VmFh0qq8XgRbuU=_LQ@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)


> Am 28.08.2015 um 15:49 schrieb Eric Covener <covener@gmail.com>:
>=20
> On Fri, Aug 28, 2015 at 9:26 AM, Stefan Eissing
> <stefan.eissing@greenbytes.de> wrote:
>> If this works, one could think about introducing some kind of =
"equivalence number" to speed up the checking, since in certain HTTP/2 =
setups there might be a good percentage of requests requiting this =
verification.
>=20
> Long term we need to block these name-based renegotiations because
> we'll be at TLS1.3.  I don't know how to ween people off, but making
> up an H2 requirement might be one way to ease people into it.

I am not the expert on TLS renegotiation, I am just aware that certain =
TLS parameters can be changed on an existing connection if both parties =
agree. And I am aware that this has been used in attacks and the feature =
seems to be frowned upon nowadays.

I see mod_ssl code that checks for renegotiations based on directory =
configurations, so it is request based. And it will fail miserably in =
HTTP/2 connections as there is no longer *the one current* request on a =
connection.

What would be the most common scenarios for TLS renegotiation be that we =
should users warn about when enabling HTTP/2? Is requiting a client cert =
a common use here?

//Stefan

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83660-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 31 09:53:32 2015
Return-Path: <dev-return-83660-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1277817979
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 31 Aug 2015 09:53:32 +0000 (UTC)
Received: (qmail 61514 invoked by uid 500); 31 Aug 2015 09:53:31 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 61435 invoked by uid 500); 31 Aug 2015 09:53:31 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 61425 invoked by uid 99); 31 Aug 2015 09:53:31 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Aug 2015 09:53:31 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 11EFFEFF2E
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 09:53:31 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.999
X-Spam-Level:
X-Spam-Status: No, score=0.999 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H2=-0.001,
	SPF_HELO_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 9E5xsJjYGBRr for <dev@httpd.apache.org>;
	Mon, 31 Aug 2015 09:53:20 +0000 (UTC)
Received: from mail1.bemta14.messagelabs.com (mail1.bemta14.messagelabs.com [193.109.254.116])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 2710F20F19
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 09:53:19 +0000 (UTC)
Received: from [193.109.254.3] by server-12.bemta-14.messagelabs.com id 4D/A6-18744-80424E55; Mon, 31 Aug 2015 09:53:12 +0000
X-Env-Sender: ruediger.pluem@vodafone.com
X-Msg-Ref: server-16.tower-184.messagelabs.com!1441014748!26699706!1
X-Originating-IP: [195.232.244.133]
X-StarScan-Received:
X-StarScan-Version: 6.13.16; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 16455 invoked from network); 31 Aug 2015 09:52:28 -0000
Received: from mailout01.vodafone.com (HELO mailout01.vodafone.com) (195.232.244.133)
  by server-16.tower-184.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 31 Aug 2015 09:52:28 -0000
Received: from mailint02.vodafone.com (mailint02.vodafone.com [195.232.244.199])
	by mailout01.vodafone.com (Postfix) with ESMTP id 3n4Rf26gHWz1yKp
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 11:52:26 +0200 (CEST)
Received: from mailint02.vodafone.com (localhost [127.0.0.1])
	by mailint02.vodafone.com (Postfix) with ESMTP id 3n4Rdy6qHqzQq6C
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 11:52:22 +0200 (CEST)
Received: from VOEXC01W.internal.vodafone.com (voexc01w.dc-ratingen.de [145.230.101.21])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mailint02.vodafone.com (Postfix) with ESMTPS id 3n4Rdy6SJmzQkw4
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 11:52:22 +0200 (CEST)
Received: from VOEXM10W.internal.vodafone.com ([169.254.2.132]) by
 VOEXC01W.internal.vodafone.com ([145.230.101.21]) with mapi id
 14.03.0224.002; Mon, 31 Aug 2015 11:52:22 +0200
From: =?utf-8?B?UGzDvG0sIFLDvGRpZ2VyLCBWb2RhZm9uZSBHcm91cA==?=
	<ruediger.pluem@vodafone.com>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
Subject: RE: HTTP_MISDIRECTED_REQUEST
Thread-Topic: HTTP_MISDIRECTED_REQUEST
Thread-Index: AQHQ4Ey2N7v6ElDGrEaQ0b87Zr23E54ggiaAgABi/4CAABDPAIAAAMgAgAAFk4CAAEv7AIAABmWAgARzYwCAACJ1sA==
Date: Mon, 31 Aug 2015 09:52:21 +0000
Message-ID: <AB1691BE05AE7F4992697F2A0835627AC630C77D@VOEXM10W.internal.vodafone.com>
References: <CACsi253pEfeboS=eiQj=J=GGPXzSJnyhcDXRR8Ue-39FSv+ncw@mail.gmail.com>
 <F615D150-BF52-44A5-9EDF-806C9B65B369@gbiv.com>
 <5D0F0E94-1FCF-4E8A-9399-5A9D626E3432@greenbytes.de>
 <55E01C8E.9020605@apache.org>
 <5D662E1F-34DB-4FBB-84AE-D62F9E92E236@greenbytes.de>
 <55E021E3.5050109@apache.org>
 <14A7155C-44D2-4BCA-BC2F-17254693A134@greenbytes.de>
 <CALK=YjMWtEenWe-nfiuOtj_KXQVP+s_1VmFh0qq8XgRbuU=_LQ@mail.gmail.com>
 <30AD0382-02F0-4921-AB7F-87EFC8C2FB3B@greenbytes.de>
In-Reply-To: <30AD0382-02F0-4921-AB7F-87EFC8C2FB3B@greenbytes.de>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

DQoNCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogU3RlZmFuIEVpc3Npbmcg
DQo+IFNlbnQ6IE1vbnRhZywgMzEuIEF1Z3VzdCAyMDE1IDExOjQ4DQo+IFRvOiBkZXZAaHR0cGQu
YXBhY2hlLm9yZw0KPiBTdWJqZWN0OiBSZTogSFRUUF9NSVNESVJFQ1RFRF9SRVFVRVNUDQo+IA0K
PiANCj4gPiBBbSAyOC4wOC4yMDE1IHVtIDE1OjQ5IHNjaHJpZWIgRXJpYyBDb3ZlbmVyIDxjb3Zl
bmVyQGdtYWlsLmNvbT46DQo+ID4NCj4gPiBPbiBGcmksIEF1ZyAyOCwgMjAxNSBhdCA5OjI2IEFN
LCBTdGVmYW4gRWlzc2luZw0KPiA+IDxzdGVmYW4uZWlzc2luZ0BncmVlbmJ5dGVzLmRlPiB3cm90
ZToNCj4gPj4gSWYgdGhpcyB3b3Jrcywgb25lIGNvdWxkIHRoaW5rIGFib3V0IGludHJvZHVjaW5n
IHNvbWUga2luZCBvZg0KPiAiZXF1aXZhbGVuY2UgbnVtYmVyIiB0byBzcGVlZCB1cCB0aGUgY2hl
Y2tpbmcsIHNpbmNlIGluIGNlcnRhaW4gSFRUUC8yDQo+IHNldHVwcyB0aGVyZSBtaWdodCBiZSBh
IGdvb2QgcGVyY2VudGFnZSBvZiByZXF1ZXN0cyByZXF1aXRpbmcgdGhpcw0KPiB2ZXJpZmljYXRp
b24uDQo+ID4NCj4gPiBMb25nIHRlcm0gd2UgbmVlZCB0byBibG9jayB0aGVzZSBuYW1lLWJhc2Vk
IHJlbmVnb3RpYXRpb25zIGJlY2F1c2UNCj4gPiB3ZSdsbCBiZSBhdCBUTFMxLjMuICBJIGRvbid0
IGtub3cgaG93IHRvIHdlZW4gcGVvcGxlIG9mZiwgYnV0IG1ha2luZw0KPiA+IHVwIGFuIEgyIHJl
cXVpcmVtZW50IG1pZ2h0IGJlIG9uZSB3YXkgdG8gZWFzZSBwZW9wbGUgaW50byBpdC4NCj4gDQo+
IEkgYW0gbm90IHRoZSBleHBlcnQgb24gVExTIHJlbmVnb3RpYXRpb24sIEkgYW0ganVzdCBhd2Fy
ZSB0aGF0IGNlcnRhaW4gVExTDQo+IHBhcmFtZXRlcnMgY2FuIGJlIGNoYW5nZWQgb24gYW4gZXhp
c3RpbmcgY29ubmVjdGlvbiBpZiBib3RoIHBhcnRpZXMgYWdyZWUuDQo+IEFuZCBJIGFtIGF3YXJl
IHRoYXQgdGhpcyBoYXMgYmVlbiB1c2VkIGluIGF0dGFja3MgYW5kIHRoZSBmZWF0dXJlIHNlZW1z
IHRvDQo+IGJlIGZyb3duZWQgdXBvbiBub3dhZGF5cy4NCj4gDQo+IEkgc2VlIG1vZF9zc2wgY29k
ZSB0aGF0IGNoZWNrcyBmb3IgcmVuZWdvdGlhdGlvbnMgYmFzZWQgb24gZGlyZWN0b3J5DQo+IGNv
bmZpZ3VyYXRpb25zLCBzbyBpdCBpcyByZXF1ZXN0IGJhc2VkLiBBbmQgaXQgd2lsbCBmYWlsIG1p
c2VyYWJseSBpbg0KPiBIVFRQLzIgY29ubmVjdGlvbnMgYXMgdGhlcmUgaXMgbm8gbG9uZ2VyICp0
aGUgb25lIGN1cnJlbnQqIHJlcXVlc3Qgb24gYQ0KPiBjb25uZWN0aW9uLg0KPiANCj4gV2hhdCB3
b3VsZCBiZSB0aGUgbW9zdCBjb21tb24gc2NlbmFyaW9zIGZvciBUTFMgcmVuZWdvdGlhdGlvbiBi
ZSB0aGF0IHdlDQo+IHNob3VsZCB1c2VycyB3YXJuIGFib3V0IHdoZW4gZW5hYmxpbmcgSFRUUC8y
PyBJcyByZXF1aXRpbmcgYSBjbGllbnQgY2VydCBhDQo+IGNvbW1vbiB1c2UgaGVyZT8NCg0KRXZl
cnl0aGluZyB0aGF0IHlvdSBjb25maWd1cmUgaW4gZGlyZWN0b3J5IGNvbnRleHQuIEJlIGl0IGNs
aWVudCBjZXJ0cyBvciBTU0wgY2lwaGVycy4NCg0KUmVnYXJkcw0KDQpSw7xkaWdlcg0KDQo=

From dev-return-83661-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 31 16:11:39 2015
Return-Path: <dev-return-83661-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5A9E617A80
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 31 Aug 2015 16:11:39 +0000 (UTC)
Received: (qmail 97504 invoked by uid 500); 31 Aug 2015 16:11:33 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 97434 invoked by uid 500); 31 Aug 2015 16:11:33 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 97424 invoked by uid 99); 31 Aug 2015 16:11:33 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Aug 2015 16:11:33 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 625DD180333
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 16:11:33 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.006
X-Spam-Level:
X-Spam-Status: No, score=-0.006 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.006] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id jHO8nd6dSkJN for <dev@httpd.apache.org>;
	Mon, 31 Aug 2015 16:11:29 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id E3FA820647
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 16:11:28 +0000 (UTC)
Received: from [192.168.1.42] (unknown [5.10.171.186])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 2AB7315A015C
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 18:11:27 +0200 (CEST)
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Subject: scoreboard full
Message-Id: <E9A1EDCB-3C1F-45B9-B716-408FD10D94DD@greenbytes.de>
Date: Mon, 31 Aug 2015 18:11:26 +0200
To: dev@httpd.apache.org
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
X-Mailer: Apple Mail (2.2104)

Hunting a bit on the "scoreboard is full, not at MaxRequestWorkers" =
issue,
I found that setting

    c->cs->state =3D CONN_STATE_LINGER;

explicitly on exiting connection processing (h2_conn.c) seems to help=20
with this. As an experiment, I set

    c->cs->state =3D CONN_STATE_READ_REQUEST_LINE;

and observed ever increasing memory use by the processes. With setting
state to CONN_STATE_LINGER explicilty, I have stable memory use and have
not seen a full scoreboard since.

I have my theory of what goes wrong below, maybe someone with a better
understanding of mpm_event wants to run this through her head...

Maybe connection state on finishing processing needs to be checked
either better, or the code in mpm_event needs to become more robust.


//Stefan

=
--------------------------------------------------------------------------=
----
Although I had not configured MaxRequestsPerChild, someone decided that
the child process should close its listener gracefully. In event.c
listener_may_exit is set and the listener is woken up.
The listener sees this, sets all to close and since it is gracefully,
if checks if any connections are still open.

This is the case if the connection pools are not cleaned up properly!
Without cleanup, the connection counter in event.c is never decremented
and the child process will never exit. In the server-status, this is
visible as all workers of a process in state 'G', which never changes.

And sometime later the "scoreboard is full" log message will come...

<green/>bytes GmbH
Hafenweg 16, 48155 M=C3=BCnster, Germany
Phone: +49 251 2807760. Amtsgericht M=C3=BCnster: HRB5782




From dev-return-83662-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 31 19:34:04 2015
Return-Path: <dev-return-83662-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4DD39177B4
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 31 Aug 2015 19:34:04 +0000 (UTC)
Received: (qmail 75297 invoked by uid 500); 31 Aug 2015 19:34:03 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 75216 invoked by uid 500); 31 Aug 2015 19:34:03 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 75207 invoked by uid 99); 31 Aug 2015 19:34:03 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Aug 2015 19:34:03 +0000
Received: from gauss.localdomain (v4-861345e7.pool.vitroconnect.de [134.19.69.231])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPSA id 92FC41A0144
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 19:34:03 +0000 (UTC)
Received: from [IPv6:::1] (localhost [IPv6:::1])
	by gauss.localdomain (Postfix) with ESMTP id E1ADA1B8
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 21:34:00 +0200 (CEST)
Message-ID: <55E4AC28.9090901@apache.org>
Date: Mon, 31 Aug 2015 21:34:00 +0200
From: Ruediger Pluem <rpluem@apache.org>
User-Agent: Mozilla/5.0 (X11; Linux i686 on x86_64; rv:36.0) Gecko/20100101 Firefox/36.0 SeaMonkey/2.33.1
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: svn commit: r1698084 - /httpd/httpd/branches/2.2.x/STATUS
References: <20150827065709.79038AC0113@hades.apache.org>
In-Reply-To: <20150827065709.79038AC0113@hades.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit



On 08/27/2015 08:57 AM, jkaluza@apache.org wrote:
> Author: jkaluza
> Date: Thu Aug 27 06:57:08 2015
> New Revision: 1698084
> 
> URL: http://svn.apache.org/r1698084
> Log:
> Vote
> 
> Modified:
>     httpd/httpd/branches/2.2.x/STATUS
> 
> Modified: httpd/httpd/branches/2.2.x/STATUS
> URL: http://svn.apache.org/viewvc/httpd/httpd/branches/2.2.x/STATUS?rev=1698084&r1=1698083&r2=1698084&view=diff
> ==============================================================================
> --- httpd/httpd/branches/2.2.x/STATUS (original)
> +++ httpd/httpd/branches/2.2.x/STATUS Thu Aug 27 06:57:08 2015
> @@ -167,7 +167,7 @@ PATCHES PROPOSED TO BACKPORT FROM TRUNK:
>          None, only 2.2.x specific
>       Backport version for 2.2.x of patch:
>          http://people.apache.org/~rpluem/patches/pr58267.diff
> -     +1: rpluem,
> +     +1: rpluem, jkaluza
>  
>  
>  PATCHES/ISSUES THAT ARE STALLED
> 
> 
> 

I know that I saw positive feedback or better +1's on the dev list and that this counts as well, but to ease
documentation and to be sure that we all talked about the same I would like to see these +1's going in STATUS if they
are still valid.
I have Yann and Jim on my mind :-).

Regards

Rüdiger

From dev-return-83663-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 31 19:42:46 2015
Return-Path: <dev-return-83663-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 921241781C
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 31 Aug 2015 19:42:46 +0000 (UTC)
Received: (qmail 6982 invoked by uid 500); 31 Aug 2015 19:42:46 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 6921 invoked by uid 500); 31 Aug 2015 19:42:45 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 6810 invoked by uid 99); 31 Aug 2015 19:42:45 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Aug 2015 19:42:45 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 775B2F020E
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 19:42:45 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.979
X-Spam-Level: **
X-Spam-Status: No, score=2.979 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01,
	RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 05_a9a-bJwai for <dev@httpd.apache.org>;
	Mon, 31 Aug 2015 19:42:44 +0000 (UTC)
Received: from mail-ig0-f169.google.com (mail-ig0-f169.google.com [209.85.213.169])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 787C720D7B
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 19:42:43 +0000 (UTC)
Received: by igbut12 with SMTP id ut12so31234214igb.0
        for <dev@httpd.apache.org>; Mon, 31 Aug 2015 12:42:42 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=QIOJSN/XNRuo7eOWLvxRUINTxQGTeH2/UhdOY5mze8M=;
        b=M3hsUezanyZEvB7YGWxauV9BOimLcuCnxU8ESxEDwu/YTTQ4GaaLp6khTi8h1u77wx
         YrbpnQCMePWrXI7Tn4cXhAy1tfYi7nT3IYXrH+nN7vyT1Gb/NejUq5VOG8L7OElFmDwC
         z7vo6PvwFm2XljPNayI+OSeo/1XSPRhkmdqLiKiqyYY5QpAJvTEN6VZ22eTc1sgH1vYc
         fOm3L3w50Q9meWc1lKEntr1OgXFgGgJP7Nw2Pc854tcFMiANrzWglwjVS9QLruLY5A+1
         McGZlCTJhkTXBQCJbADqL9kG0dadrchEcqob/St+mReH1HmaxffzPoG4PlJPZy8qxN/7
         wRHw==
X-Gm-Message-State: ALoCoQkTlAflL34qrovqPvWbccDVXyQHI/sTfrfkswtmwB169tHXA45D5B345AMgc/n+UR1K+SYI
MIME-Version: 1.0
X-Received: by 10.50.59.148 with SMTP id z20mr234279igq.77.1441050162350; Mon,
 31 Aug 2015 12:42:42 -0700 (PDT)
Received: by 10.107.16.8 with HTTP; Mon, 31 Aug 2015 12:42:42 -0700 (PDT)
X-Originating-IP: [76.252.112.72]
In-Reply-To: <55E4AC28.9090901@apache.org>
References: <20150827065709.79038AC0113@hades.apache.org>
	<55E4AC28.9090901@apache.org>
Date: Mon, 31 Aug 2015 14:42:42 -0500
Message-ID: <CACsi252igtGvQ1jDXUbgi6h2ZFDWj+onm13=2bLo_HMftpFSbQ@mail.gmail.com>
Subject: Re: svn commit: r1698084 - /httpd/httpd/branches/2.2.x/STATUS
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=047d7bea2f9a07e7d8051ea0a3da

--047d7bea2f9a07e7d8051ea0a3da
Content-Type: text/plain; charset=UTF-8

On Mon, Aug 31, 2015 at 2:34 PM, Ruediger Pluem <rpluem@apache.org> wrote:

>
> On 08/27/2015 08:57 AM, jkaluza@apache.org wrote:
> > Author: jkaluza
> > Date: Thu Aug 27 06:57:08 2015
> > New Revision: 1698084
> >
> > URL: http://svn.apache.org/r1698084
> > Log:
> > Vote
> >
> > Modified:
> >     httpd/httpd/branches/2.2.x/STATUS
> >
> > Modified: httpd/httpd/branches/2.2.x/STATUS
> > URL:
> http://svn.apache.org/viewvc/httpd/httpd/branches/2.2.x/STATUS?rev=1698084&r1=1698083&r2=1698084&view=diff
> >
> ==============================================================================
> > --- httpd/httpd/branches/2.2.x/STATUS (original)
> > +++ httpd/httpd/branches/2.2.x/STATUS Thu Aug 27 06:57:08 2015
> > @@ -167,7 +167,7 @@ PATCHES PROPOSED TO BACKPORT FROM TRUNK:
> >          None, only 2.2.x specific
> >       Backport version for 2.2.x of patch:
> >          http://people.apache.org/~rpluem/patches/pr58267.diff
> > -     +1: rpluem,
> > +     +1: rpluem, jkaluza
>
> I know that I saw positive feedback or better +1's on the dev list and
> that this counts as well, but to ease
> documentation and to be sure that we all talked about the same I would
> like to see these +1's going in STATUS if they
> are still valid.
> I have Yann and Jim on my mind :-).
>

No need, provided we acknowledge 'Reviewed by:' in the commit message for
the backport.

--047d7bea2f9a07e7d8051ea0a3da
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On M=
on, Aug 31, 2015 at 2:34 PM, Ruediger Pluem <span dir=3D"ltr">&lt;<a href=
=3D"mailto:rpluem@apache.org" target=3D"_blank">rpluem@apache.org</a>&gt;</=
span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8e=
x;border-left:1px #ccc solid;padding-left:1ex"><div class=3D"HOEnZb"><div c=
lass=3D"h5"><br>
On 08/27/2015 08:57 AM, <a href=3D"mailto:jkaluza@apache.org">jkaluza@apach=
e.org</a> wrote:<br>
&gt; Author: jkaluza<br>
&gt; Date: Thu Aug 27 06:57:08 2015<br>
&gt; New Revision: 1698084<br>
&gt;<br>
&gt; URL: <a href=3D"http://svn.apache.org/r1698084" rel=3D"noreferrer" tar=
get=3D"_blank">http://svn.apache.org/r1698084</a><br>
&gt; Log:<br>
&gt; Vote<br>
&gt;<br>
&gt; Modified:<br>
&gt;=C2=A0 =C2=A0 =C2=A0httpd/httpd/branches/2.2.x/STATUS<br>
&gt;<br>
&gt; Modified: httpd/httpd/branches/2.2.x/STATUS<br>
&gt; URL: <a href=3D"http://svn.apache.org/viewvc/httpd/httpd/branches/2.2.=
x/STATUS?rev=3D1698084&amp;r1=3D1698083&amp;r2=3D1698084&amp;view=3Ddiff" r=
el=3D"noreferrer" target=3D"_blank">http://svn.apache.org/viewvc/httpd/http=
d/branches/2.2.x/STATUS?rev=3D1698084&amp;r1=3D1698083&amp;r2=3D1698084&amp=
;view=3Ddiff</a><br>
&gt; =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D<br>
&gt; --- httpd/httpd/branches/2.2.x/STATUS (original)<br>
&gt; +++ httpd/httpd/branches/2.2.x/STATUS Thu Aug 27 06:57:08 2015<br>
&gt; @@ -167,7 +167,7 @@ PATCHES PROPOSED TO BACKPORT FROM TRUNK:<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 None, only 2.2.x specific<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0Backport version for 2.2.x of patch:<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <a href=3D"http://people.apache.org/=
~rpluem/patches/pr58267.diff" rel=3D"noreferrer" target=3D"_blank">http://p=
eople.apache.org/~rpluem/patches/pr58267.diff</a><br>
&gt; -=C2=A0 =C2=A0 =C2=A0+1: rpluem,<br>
&gt; +=C2=A0 =C2=A0 =C2=A0+1: rpluem, jkaluza<br><br>
</div></div>I know that I saw positive feedback or better +1&#39;s on the d=
ev list and that this counts as well, but to ease<br>
documentation and to be sure that we all talked about the same I would like=
 to see these +1&#39;s going in STATUS if they<br>
are still valid.<br>
I have Yann and Jim on my mind :-).<br></blockquote><div>=C2=A0</div><div>N=
o need, provided we acknowledge &#39;Reviewed by:&#39; in the commit messag=
e for the backport.</div></div><br></div></div>

--047d7bea2f9a07e7d8051ea0a3da--

From dev-return-83664-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 31 20:17:09 2015
Return-Path: <dev-return-83664-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CE68617A0F
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 31 Aug 2015 20:17:09 +0000 (UTC)
Received: (qmail 96689 invoked by uid 500); 31 Aug 2015 20:17:09 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 96622 invoked by uid 500); 31 Aug 2015 20:17:09 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 96612 invoked by uid 99); 31 Aug 2015 20:17:09 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Aug 2015 20:17:09 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 03426C0BE6
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 20:17:09 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id ufzJWhxKTQ6Y for <dev@httpd.apache.org>;
	Mon, 31 Aug 2015 20:17:08 +0000 (UTC)
Received: from mail-ig0-f173.google.com (mail-ig0-f173.google.com [209.85.213.173])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 43A7042B2E
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 20:17:08 +0000 (UTC)
Received: by igui7 with SMTP id i7so62027860igu.0
        for <dev@httpd.apache.org>; Mon, 31 Aug 2015 13:17:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=cDeQu2alqhPZbiBflbnS0dlzH1mYbzBGITUKeL/t52g=;
        b=pUUs9Uuw8UZtqPDzzW5RCFlb+hRNNeIvy1PHUMoSB2Hxm988U21SeMK9WDdrFaR9U5
         VlVKFvpTwdkApgjaVytrozVTYQz0m5J3LknMuEZJ7JyXN8KkD3J/+BUTQNIvHi7O6FEn
         eTn/ZEBCy8d8bhyBZSosZ+lgi6fv59a4a6CmpNylAJMZsEHVXg/+AFBacswC3rZZ3Pku
         eFxcy4VEHd6MH5eWvdOP310VaHOHqxgCLqgHso/2IXivIHnQiUAHV0BqelZrjE29wpii
         1UY9v37F9hGjdiJutf+ypt3RnqeCcRGAk9qIDrWSHJYLdSFeLC/iEQYdq5nxeuf+T5Sm
         V+Sg==
MIME-Version: 1.0
X-Received: by 10.50.79.202 with SMTP id l10mr398177igx.15.1441052227861; Mon,
 31 Aug 2015 13:17:07 -0700 (PDT)
Received: by 10.79.38.74 with HTTP; Mon, 31 Aug 2015 13:17:07 -0700 (PDT)
In-Reply-To: <55E4AC28.9090901@apache.org>
References: <20150827065709.79038AC0113@hades.apache.org>
	<55E4AC28.9090901@apache.org>
Date: Mon, 31 Aug 2015 22:17:07 +0200
Message-ID: <CAKQ1sVO9grjWMyzfDwyP0-yta60+10WmBVjThqPBoaE-0YMn5A@mail.gmail.com>
Subject: Re: svn commit: r1698084 - /httpd/httpd/branches/2.2.x/STATUS
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

On Mon, Aug 31, 2015 at 9:34 PM, Ruediger Pluem <rpluem@apache.org> wrote:
>
>
> I know that I saw positive feedback or better +1's on the dev list and that this counts as well, but to ease
> documentation and to be sure that we all talked about the same I would like to see these +1's going in STATUS if they
> are still valid.
> I have Yann and Jim on my mind :-).

Promoted in r1700327, thanks for fixing this!

From dev-return-83665-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Aug 31 20:19:39 2015
Return-Path: <dev-return-83665-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4C6D117A32
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 31 Aug 2015 20:19:39 +0000 (UTC)
Received: (qmail 5602 invoked by uid 500); 31 Aug 2015 20:19:38 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 5517 invoked by uid 500); 31 Aug 2015 20:19:38 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 5506 invoked by uid 99); 31 Aug 2015 20:19:38 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Aug 2015 20:19:38 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 6C6A31AB2ED
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 20:19:38 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id C2XVVa4Bdafk for <dev@httpd.apache.org>;
	Mon, 31 Aug 2015 20:19:33 +0000 (UTC)
Received: from mail-io0-f169.google.com (mail-io0-f169.google.com [209.85.223.169])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id D582F2110B
	for <dev@httpd.apache.org>; Mon, 31 Aug 2015 20:19:32 +0000 (UTC)
Received: by iog7 with SMTP id 7so48138648iog.2
        for <dev@httpd.apache.org>; Mon, 31 Aug 2015 13:19:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=30TriV9xh90U/cKDc9C6YBu91r5TlwNQFLA1xt+PC3I=;
        b=HSX9o5DM4QI0aA1X2F0NKZ5zq9VRqNWKz0yCCE2tZAMyfS42g/eFLR9bOxC2AFnkRG
         VR5yHxfyTkexOXQ8s9aqlVSq5Pk33dKw43RPw50HFq8uamig/Mnlk+WV6BUnD5u9IXcM
         4YxSdMIW/Oolgjm8xc5fLcfJx2cjPJlhoukJjyI6Is+7Y1xRJ+DagT0zrauwO98RjVA9
         +MiddfCuWl4fZORdm3G83fq2PDQ0/xfNiIqjGCwTHyNmPkwwcuXXMSWm6knwpVS8UvhT
         mwxdcH+RgHNDSjSV/xLlr+ambxntiOfPDtNJEkPFmR641HGVa7F/7x2lV/FRwC0N+6vv
         Vpmg==
MIME-Version: 1.0
X-Received: by 10.107.3.23 with SMTP id 23mr4119385iod.132.1441052366322; Mon,
 31 Aug 2015 13:19:26 -0700 (PDT)
Received: by 10.79.38.74 with HTTP; Mon, 31 Aug 2015 13:19:26 -0700 (PDT)
In-Reply-To: <E9A1EDCB-3C1F-45B9-B716-408FD10D94DD@greenbytes.de>
References: <E9A1EDCB-3C1F-45B9-B716-408FD10D94DD@greenbytes.de>
Date: Mon, 31 Aug 2015 22:19:26 +0200
Message-ID: <CAKQ1sVPAacdbnS-63RsdGWQ9Dunb9bQWCt9zxt-FK3NVMPs1-Q@mail.gmail.com>
Subject: Re: scoreboard full
From: Yann Ylavic <ylavic.dev@gmail.com>
To: dev@httpd.apache.org
Content-Type: text/plain; charset=UTF-8

On Mon, Aug 31, 2015 at 6:11 PM, Stefan Eissing
<stefan.eissing@greenbytes.de> wrote:
> Hunting a bit on the "scoreboard is full, not at MaxRequestWorkers" issue,
> I found that setting
>
>     c->cs->state = CONN_STATE_LINGER;

mod_http2 could possiblly return CONN_STATE_WRITE_COMPLETION (with
c->keepalive = AP_CONN_CLOSE, unless c->aborted), so that blocking
writes (if any) can be scheduled (in event).

>
> explicitly on exiting connection processing (h2_conn.c) seems to help
> with this. As an experiment, I set
>
>     c->cs->state = CONN_STATE_READ_REQUEST_LINE;

This state looks unhandled after ap_run_process_connecton, shouldn't happen :)
The case should probably be handled like CONN_STATE_LINGER (or
DEBUG_ASSERT?) since ptrans leaks...

PR 53555 seems not related though, mpm_event and mod_http call
ap_process_http_async_connection::ap_process_async_request::ap_process_request_after_handler()
which do the right thing wrt cs->state.

Regards,
Yann.

