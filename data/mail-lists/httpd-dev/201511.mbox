From dev-return-84490-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov  1 07:15:17 2015
Return-Path: <dev-return-84490-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6B83118549
	for <apmail-httpd-dev-archive@www.apache.org>; Sun,  1 Nov 2015 07:15:17 +0000 (UTC)
Received: (qmail 33046 invoked by uid 500); 1 Nov 2015 07:15:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 32981 invoked by uid 500); 1 Nov 2015 07:15:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 32972 invoked by uid 99); 1 Nov 2015 07:15:16 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Nov 2015 07:15:16 +0000
Received: from asf-bz1-us-mid.priv.apache.org (nat1-us-mid.apache.org [23.253.172.122])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPS id 347A71A0291
	for <dev@httpd.apache.org>; Sun,  1 Nov 2015 07:15:16 +0000 (UTC)
Received: by asf-bz1-us-mid.priv.apache.org (ASF Mail Server at asf-bz1-us-mid.priv.apache.org, from userid 0)
	id AE0AF6054B; Sun,  1 Nov 2015 07:15:15 +0000 (UTC)
From: bugzilla@apache.org
To: dev@httpd.apache.org
Subject: Bug report for Apache httpd-2 [2015/11/01]
Message-Id: <20151101071515.AE0AF6054B@asf-bz1-us-mid.priv.apache.org>
Date: Sun,  1 Nov 2015 07:15:06 +0000 (UTC)

+---------------------------------------------------------------------------+
| Bugzilla Bug ID                                                           |
|     +---------------------------------------------------------------------+
|     | Status: UNC=Unconfirmed NEW=New         ASS=Assigned                |
|     |         OPN=Reopened    VER=Verified    (Skipped Closed/Resolved)   |
|     |   +-----------------------------------------------------------------+
|     |   | Severity: BLK=Blocker CRI=Critical  REG=Regression  MAJ=Major   |
|     |   |           MIN=Minor   NOR=Normal    ENH=Enhancement TRV=Trivial |
|     |   |   +-------------------------------------------------------------+
|     |   |   | Date Posted                                                 |
|     |   |   |          +--------------------------------------------------+
|     |   |   |          | Description                                      |
|     |   |   |          |                                                  |
| 7483|Ass|Enh|2002-03-26|Add FileAction directive to assign a cgi interpret|
| 8713|Inf|Min|2002-05-01|No Errorlog on PROPFIND/Depth:Infinity            |
| 8867|Opn|Cri|2002-05-07|exports.c generation fails when using a symlink to|
|10747|New|Maj|2002-07-12|ftp SIZE command and 'smart' ftp servers results i|
|11294|New|Enh|2002-07-30|desired vhost_alias option                        |
|11580|Opn|Enh|2002-08-09|generate Content-Location headers                 |
|12033|Opn|Nor|2002-08-26|Graceful restart immediately result in [warn] long|
|12680|New|Enh|2002-09-16|Digest authentication with integrity protection   |
|13599|Inf|Nor|2002-10-14|autoindex formating broken for multibyte sequences|
|13661|Ass|Enh|2002-10-15|Apache cannot not handle dynamic IP reallocation  |
|14104|Opn|Enh|2002-10-30|not documented: must restart server to load new CR|
|14496|New|Enh|2002-11-13|Cannot upgrade any version on Windows. Must uninst|
|14922|Inf|Enh|2002-11-28|<target> is currently hardcoded to 'apache2'      |
|15719|Inf|Nor|2002-12-30|WebDAV MOVE to destination URI which is content-ne|
|16761|Inf|Nor|2003-02-04|CustomLog with pipe spawns process during config  |
|16802|New|Enh|2003-02-05|Additional AllowOverride directive "Restrict"     |
|16811|Ass|Maj|2003-02-05|mod_autoindex always return webpages in UTF-8.    |
|17107|New|Min|2003-02-16|Windows should not install printenv               |
|17114|New|Enh|2003-02-17|Please add strip and install-strip targets to Make|
|17244|Ass|Nor|2003-02-20|./configure --help gives false information regardi|
|17497|Opn|Nor|2003-02-27|mod_mime_magic generates incorrect response header|
|18325|New|Enh|2003-03-25|PAM support for suEXEC                            |
|18334|Inf|Cri|2003-03-25|Server crashes when authenticating users against L|
|18497|New|Min|2003-03-30|configure --help gives wrong default for sysconfdi|
|19043|New|Min|2003-04-15|Interesting interaction between cern_meta module a|
|19670|New|Enh|2003-05-05|content type header supplied upon PUT is thrown aw|
|20036|Ass|Nor|2003-05-19|Trailing Dots stripped from PATH_INFO environment |
|21253|New|Nor|2003-07-01|Mime magic doesn't continue if type is specifed fo|
|21260|New|Nor|2003-07-02|CacheMaxExpire directive not enforced !           |
|21533|Ass|Cri|2003-07-11|Multiple levels of htacces files can cause mod_aut|
|22138|Inf|Cri|2003-08-05|Webdav is not preccessing special chars right.    |
|22237|New|Enh|2003-08-08|option to disable ServerSignature on index pages  |
|22484|Opn|Maj|2003-08-16|semaphore problem takes httpd down                |
|22686|Opn|Nor|2003-08-25|ab: apr_poll: The timeout specified has expired (7|
|22898|Opn|Nor|2003-09-02|nph scripts with two HTTP header                  |
|23167|Inf|Cri|2003-09-14|--enable-layout never goes to apr apr-util        |
|23181|New|Nor|2003-09-15|Status 304 (Not modified) and chunking leads to an|
|23238|New|Cri|2003-09-18|non-async-signal-safe operations from signal handl|
|23330|New|Enh|2003-09-22|Enhance ApacheMonitor to view and control Tomcat s|
|23911|Opn|Cri|2003-10-18|CGI processes left defunct/zombie under 2.0.54    |
|24031|New|Enh|2003-10-23|Passphrase protected private key in SSLProxyMachin|
|24095|Opn|Cri|2003-10-24|ERROR "Parent: child process exited with status 32|
|24437|Opn|Nor|2003-11-05|mod_auth_ldap doubly-escapes backslash (\) charact|
|24890|Opn|Nor|2003-11-21|Apache config parser should not be local aware ( g|
|25014|New|Enh|2003-11-26|A flexible interface for mod_log_config           |
|25201|New|Enh|2003-12-04|Provide Cache Purge operation                     |
|25240|Inf|Enh|2003-12-05|SSL Library Error: 336105671 logged as information|
|25435|New|Enh|2003-12-11|sethandler and directoryindex not playing nice    |
|25469|Opn|Enh|2003-12-12|create AuthRoot for defining paths to auth files  |
|25484|Ass|Nor|2003-12-12|Non-service Apache cannot be stopped in WinXP     |
|25543|Inf|Nor|2003-12-15|mod_proxy_ajp overwrites existing response headers|
|25667|New|Nor|2003-12-19|Memory leak in function ssl_scache_dbm_retrieve().|
|25863|New|Enh|2004-01-02|new per-host initialization hooks                 |
|26005|New|Nor|2004-01-08|SERVER_NAME incorrect when using IPv6 address in U|
|26142|New|Maj|2004-01-14|EnableSendFile Off for Windows XP Home            |
|26153|Opn|Cri|2004-01-15|Apache cygwin directory traversal vulnerability   |
|26368|New|Min|2004-01-23|File extensions in AddDescription treated as part |
|26446|New|Nor|2004-01-26|flush buckets followed by eos bucket emit multiple|
|26478|New|Enh|2004-01-28|mod_dav does not expose a method for setting the D|
|26835|New|Enh|2004-02-10|[PATCH] Mod_status Readability & Browser Side Tabl|
|27257|Ass|Enh|2004-02-26|rotatelogs with getopt and setuid                 |
|27578|New|Enh|2004-03-10|made getlastmodified a writable property          |
|27715|Ass|Enh|2004-03-16|Client sending misformed Range "bytes = 0-100" ins|
|27791|Inf|Nor|2004-03-18|mod_cache doesn't re-cache expired content        |
|27835|New|Enh|2004-03-22|When proxying FTP, all errors turns into 404      |
|27869|New|Enh|2004-03-23|stopping and starting httpd again immediately caus|
|28854|Inf|Nor|2004-05-09|Build fails with missing library call on Solaris i|
|28903|New|Enh|2004-05-11|Hooks to add environment variables to CGI and othe|
|29090|Ass|Enh|2004-05-19|MultiviewsMatch NegotiatedOnly extensions not resp|
|29165|New|Nor|2004-05-24|Parent directory icon not correct                 |
|29446|New|Enh|2004-06-08|want directive for setting content negotiation qua|
|29449|New|Enh|2004-06-09|Limit length of specified fields in LogFormat     |
|29450|New|Enh|2004-06-09|Improved logging for mod_access                   |
|29510|Ass|Enh|2004-06-10|ab does not support multiple cookies              |
|29644|Ver|Nor|2004-06-17|mod_proxy keeps downloading even after the client |
|29755|Opn|Nor|2004-06-23|mod_usertrack should use err_headers_out          |
|29822|New|Enh|2004-06-26|implement FTP 'PUT' support in proxy_ftp.c        |
|29941|Ass|Enh|2004-07-06|log files are not tested for availability on confi|
|30259|Ass|Enh|2004-07-22|When proxy connects to backend, a DNS lookup is do|
|30505|Ass|Enh|2004-08-05|Apache uses 'Error', and not lower level event typ|
|30730|Inf|Nor|2004-08-18|[PatchAvailable] mod_actions and Server-Status    |
|30865|Inf|Maj|2004-08-26|mod_disk_cache leaves many temporary files slowing|
|31302|Opn|Cri|2004-09-19|suexec doesn't execute commands if they're not in |
|31311|New|Enh|2004-09-20|Remote user not logged in reverse proxy scenario  |
|31352|Ass|Enh|2004-09-21|RFE, Bind to LDAP server with browser supplier use|
|31418|Opn|Nor|2004-09-25|SSLUserName is not usable by other modules        |
|31484|New|Maj|2004-09-30|Custom environment variables not passed to content|
|31490|New|Nor|2004-09-30|mod_proxy_ftp renders filenames with spaces badly |
|31565|New|Enh|2004-10-06|Won't start correctly if parent closed stdin, stdo|
|31679|New|Enh|2004-10-12|If the argument of a CGI has two or more consecuti|
|31709|Inf|Nor|2004-10-13|Raises an error on SSL name based virtualhosts (wi|
|31712|New|Enh|2004-10-14|config_file is NULL at ap_walk_config etc         |
|31952|New|Enh|2004-10-29|mod_proxy and RealPlayer: audio content streaming |
|32051|Opn|Nor|2004-11-04|mod_example is not thread safe                    |
|32328|Opn|Enh|2004-11-19|Make mod_rewrite escaping optional / expose intern|
|32346|New|Enh|2004-11-22|mod_include/include virtual checks content-type is|
|32524|New|Enh|2004-12-03|ab: add an option to specify a source address     |
|32703|Inf|Enh|2004-12-14|Cannot determine that Apache is frozen if /var fil|
|32750|Ass|Maj|2004-12-17|mod_proxy + Win32DisableAcceptEx = memory leak    |
|32877|New|Enh|2004-12-29|wrong utf-8 encoding/escaping in a href for umlaut|
|33084|New|Enh|2005-01-13|Optional certificate validity period check on SSLV|
|33089|New|Nor|2005-01-13|mod_include: Options +Includes (or IncludesNoExec)|
|33207|New|Nor|2005-01-23|Results of my suexec.c code audit                 |
|33215|New|Nor|2005-01-24|Cygwin build/install.sh fix (OSTYPE => ext=.exe)  |
|33512|Inf|Maj|2005-02-11|mod_mem_cache and possibly mod_deflate            |
|33627|New|Nor|2005-02-18|Bite-sized changes making progress towards compila|
|33685|New|Maj|2005-02-22|Unable to install in the path containing non engli|
|34270|Inf|Nor|2005-04-01|Large POSTs over SSL from Internet Explorer do not|
|34375|New|Enh|2005-04-08|enhancements for mod_include                      |
|34377|New|Enh|2005-04-08|Allow the overriding of 401 Unauthorized returns f|
|34405|New|Enh|2005-04-11|adds DOCUMENT_NAME_WITHOUT_SUFFIX to mod_include  |
|34508|New|Nor|2005-04-19|Randomly slow graceful restart, not accepting new |
|34519|New|Enh|2005-04-19|Directory index should emit valid XHTML           |
|35049|New|Nor|2005-05-24|let AddDefaultCharset apply to text/css and applic|
|35077|New|Nor|2005-05-26|mod_dav passes incorrect paths with LocationMatch |
|35083|Inf|Enh|2005-05-26|Certificate validation problems trapping          |
|35098|Ver|Maj|2005-05-27|Install fails using --prefix                      |
|35154|New|Nor|2005-06-01|Support for NID_serialNumber, etc. in SSLUserName |
|35245|New|Nor|2005-06-06|cache ignores max-age cache-directive in requests |
|35250|New|Enh|2005-06-07|[PatchAvailable] add logging to mod_proxy_connect |
|35280|New|Nor|2005-06-09|FTP proxy breaks RFC 2428 when trying to fall back|
|35556|Inf|Nor|2005-06-30|CRL files not re-read by HUP                      |
|35652|Opn|Min|2005-07-07|Improve error message: "pcfg_openfile: unable to c|
|35702|New|Nor|2005-07-12|Using with https URL, ab freezes or gets SIGSEGV o|
|35781|New|Nor|2005-07-18|ap_sub_req_method_uri() bypasses Limit security co|
|35981|Inf|Maj|2005-08-02|mod_dav overrides dav_fs response on PUT failure  |
|36286|New|Enh|2005-08-20|configtest doesn't check SSL certificates         |
|36492|New|Nor|2005-09-04|split-logfile script dies when splitting log of ma|
|36495|Inf|Nor|2005-09-05|mod_proxy_ajp: ajp_check_msg_header() got bad sign|
|36564|New|Enh|2005-09-08|make mod_ldap really universal                    |
|36636|New|Maj|2005-09-13|database write lock taken for PROPFIND operations |
|36676|New|Nor|2005-09-15|time() bug in httpd/os/win32/util_win32.c:wait_for|
|36710|Opn|Blk|2005-09-19|CGI output not captured                           |
|36724|New|Nor|2005-09-20|Don't install Apache Monitor by default           |
|37110|New|Nor|2005-10-17|Build fails when source tree is read-only         |
|37196|Inf|Min|2005-10-21|Wrong "Parent directory" link                     |
|37201|New|Enh|2005-10-21|Add <IfInterface IP> syntax to apache configuratio|
|37290|Opn|Min|2005-10-28|DirectoryIndex don't work in scriptaliased directo|
|37307|New|Enh|2005-10-31|Can't suppress error messages                     |
|37355|New|Enh|2005-11-04|Allow to specify Proxy-Authorization in ProxyRemot|
|37360|New|Maj|2005-11-04|Install fails on Windows XP x64 when program files|
|37402|New|Nor|2005-11-08|mod_proxy has stopped allowing POST sub-requests  |
|37514|Inf|Nor|2005-11-15|mod_proxy buffers chunked data.                   |
|37564|New|Enh|2005-11-19|Suggestion: mod_suexec SuexecUserGroup directive i|
|37587|Inf|Min|2005-11-22|mod_status Total Traffic value goes up then down? |
|37770|Opn|Blk|2005-12-03|proxy: error reading status line from remote serve|
|37823|Inf|Nor|2005-12-07|The openssl library linked is different between ht|
|37920|New|Maj|2005-12-15|mod_proxy does not flush data on POST requests fro|
|38116|New|Enh|2006-01-04|Chroot-Patch for SuExec                           |
|38164|New|Nor|2006-01-06|wrong status code for failed COPY/MOVE            |
|38182|New|Nor|2006-01-08|COPY ignores authority in Destination header      |
|38218|New|Enh|2006-01-10|Multiline Comments for *.conf files               |
|38240|Inf|Nor|2006-01-12|apache restart segfault with mutliple Include dire|
|38325|Opn|Nor|2006-01-20|impossible to determine AUTH_TYPE of interpreted r|
|38355|Unc|Enh|2006-01-23|DSO support for mod_rewrite                       |
|38369|New|Enh|2006-01-24|mod_proxy keeps alive connections that should be b|
|38408|New|Nor|2006-01-27|SSI environment vars not set in spawned processes |
|38419|New|Nor|2006-01-27|Problems with large WebDAV properties             |
|38478|New|Maj|2006-02-01|A client starting a SSL renegotiation can crash th|
|38515|New|Enh|2006-02-05|Dynamic LDAP Group Support                        |
|38550|New|Enh|2006-02-07|Setting headers based on proxied data             |
|38571|New|Enh|2006-02-08|CustomLog directive checked by apachectl configtes|
|38756|Inf|Nor|2006-02-22|errors with running make                          |
|38786|New|Nor|2006-02-26|"IndexOption VersionSort" has problems with traili|
|38827|New|Reg|2006-03-02|mod_disk_cache trying to rename locked tempfile on|
|38864|Inf|Enh|2006-03-06|ProxyPassReverse fails in <Location>              |
|38903|New|Maj|2006-03-09|r->allowed does not affect Allow response header  |
|38923|New|Min|2006-03-10|mod_speling incorrectly escapes linked URLs       |
|38928|New|Min|2006-03-11|propose removing "VARIANTS" feature               |
|38995|New|Nor|2006-03-16|httpd tries to communicate with the CGI daemon eve|
|39111|New|Nor|2006-03-27|Potential bug brought by mmapfile (mod_file_cache)|
|39128|Inf|Maj|2006-03-28|Apache 2.2 will not compile mod_ssl library's corr|
|39185|Inf|Nor|2006-04-03|Approximately in 1-2 weeks of work the server hang|
|39216|New|Maj|2006-04-05|mod_disk_cache trying to rename locked file, decre|
|39238|New|Nor|2006-04-07|mod_auth_dbm requires mod_auth or "no groups file?|
|39275|Opn|Nor|2006-04-11|slow child_init causes MaxClients warning         |
|39287|New|Nor|2006-04-12|Incorrect If-Modified-Since validation (due to syn|
|39299|New|Nor|2006-04-13|Internal Server Error (500) on COPY               |
|39329|Inf|Nor|2006-04-17|mod_dbd reconnection and prepared statements      |
|39370|New|Nor|2006-04-20|SSL session will be removed if the client is sendi|
|39380|Inf|Nor|2006-04-21|mod_disk_cache eats memory, has no LFS support, et|
|39418|New|Nor|2006-04-26|CacheMaxExpire directive not enforced             |
|39448|New|Min|2006-04-29|old-style <directory proxy:*> doesn't give any war|
|39498|New|Nor|2006-05-06|accept_filter in apr assumes if found in sys/socke|
|39517|New|Nor|2006-05-08|Corrupt chunked transfer-encoding with Content Neg|
|39658|Opn|Nor|2006-05-25|mod_proxy_ajp SSL Key Size Bug                    |
|39673|New|Nor|2006-05-29|mod_proxy opens connections that disturb NTLM     |
|39692|New|Nor|2006-05-31|mod_proxy_balancer doesn't retry a failed request |
|39723|Inf|Enh|2006-06-05|Forward proxy does not work in tranparent mode    |
|39727|Ass|Nor|2006-06-05|Incorrect ETag on gzip:ed content                 |
|39730|New|Nor|2006-06-06|LanguagePriority and DefaultLanguage are Case Sens|
|39737|New|Nor|2006-06-06|LogFormat "%{tid}P" reports wrong thread id on Win|
|39748|New|Enh|2006-06-07|Header and POST support for mod_include           |
|39753|New|Nor|2006-06-07|incorrect source for LOCALE Decimal Symbol in Win2|
|39785|Inf|Nor|2006-06-12|Status code 408 (Request Timeout) is not logged   |
|39807|Opn|Enh|2006-06-13|large files / filesystem corruption can cause apac|
|39902|New|Nor|2006-06-27|HeaderName directive breaks mod_filter somehow    |
|39904|New|Nor|2006-06-27|graceful restart error and cpu load               |
|39913|Ass|Blk|2006-06-27|detection of static OpenSSL libraries requiring li|
|39916|New|Nor|2006-06-28|Core Filters & non-blocking Sendfile              |
|39923|New|Nor|2006-06-28|AddDescription doesn't work in server config with |
|39928|New|Nor|2006-06-28|port no detected when file name not in URL        |
|39935|New|Nor|2006-06-29|AddDescription does not do literal comparisons on |
|39973|Ass|Enh|2006-07-06|apache software folder should be movable          |
|40035|New|Cri|2006-07-13|Windows Server 2003 "("R2")" 64-Bit Edition no cgi|
|40060|New|Nor|2006-07-17|AuthGroupFile should accept /etc/group syntax     |
|40075|New|Enh|2006-07-19|unable to use ldap groups that contain DNs and use|
|40102|Opn|Nor|2006-07-24|SCRIPT_NAME set incorrectly with mod_rewrite      |
|40146|New|Nor|2006-07-31|mod_ssl info in server_info is blank              |
|40174|New|Min|2006-08-03|Unable to get IndexOptionis ScanHTMLTitles to work|
|40180|Inf|Maj|2006-08-03|Mod_dav and remove folder doesn't work with Micros|
|40190|New|Nor|2006-08-05|translate file                                    |
|40196|New|Nor|2006-08-06|EILSEQ handling, NoImplicitAdd should work, and so|
|40217|Opn|Nor|2006-08-08|mod_dav PROPFIND ignores access restrictions on it|
|40266|Inf|Blk|2006-08-16|berkeley db support in httpd is screwed           |
|40312|New|Nor|2006-08-24|ssl_engine_init.c, ssl_init_ctx_verify contains a |
|40373|New|Nor|2006-08-31|mod_dir adds trailing slash after internal redirec|
|40408|New|Blk|2006-09-04|Apache 2.2.3 is not starting                      |
|40416|New|Maj|2006-09-05|mod_proxy_ftp cannot connect under http load in fo|
|40441|New|Enh|2006-09-08|intelligently handling dynamic subdomains         |
|40453|New|Nor|2006-09-09|lexicographic compare in RewriteCond isn't lexicog|
|40463|New|Nor|2006-09-11|piped logging causes some weird kill()ing         |
|40513|Opn|Maj|2006-09-14|Seeding PRNG with 0 bytes of entropy              |
|40514|New|Nor|2006-09-14|would like GracefulShutdownTimeout to work for gra|
|40540|Inf|Nor|2006-09-19|Bad interaction between MultiViews and SetOutputFi|
|40541|New|Nor|2006-09-19|Action rewrites URI used by Location?             |
|40571|New|Nor|2006-09-21|mod_proxy_ajp don't works with mod_usertrack      |
|40586|New|Enh|2006-09-22|Add option to supress default '-' output          |
|40746|New|Enh|2006-10-12|Feature request: ProxyAllow directive             |
|40749|New|Min|2006-10-12|magic file with string and "%n" causes Apache chil|
|40781|New|Nor|2006-10-17|PATH_TRANSLATED: 'redirect:/~jablko/gallery2/main.|
|40808|New|Enh|2006-10-23|ProxyRemote with optional proxy authentication    |
|40859|New|Enh|2006-11-01|[PATCH] Support -F force option to 'ab' support to|
|40917|New|Nor|2006-11-07|configure does not detect OpenSSL shared lib on HP|
|40953|New|Min|2006-11-12|Should not send any data in 1xx/204/304 reply from|
|40984|Inf|Enh|2006-11-16|AddIcon, AddIconByType for OpenDocument format    |
|40987|Opn|Enh|2006-11-16|ProxyVia Block doesn't remove Via: header for reve|
|41000|New|Nor|2006-11-19|mod_authn_dbd have an error, in function 'authn_db|
|41025|New|Nor|2006-11-23|ROBOTS META-Tag directive needed in mod_autoindex |
|41088|New|Nor|2006-11-30|installation backcolor is wrong (white)           |
|41111|New|Enh|2006-12-05|New option for filters: run only if there are spar|
|41114|New|Blk|2006-12-06|ACL HTTP method is rejected by mod_proxy_ajp      |
|41130|New|Nor|2006-12-07|mod_mime and mod_negotiation type-map both clobber|
|41143|Opn|Nor|2006-12-10|Incorrect ap_getline assumption in mod_proxy_http |
|41195|New|Nor|2006-12-17|properly set the parent pid on shutdown           |
|41196|New|Nor|2006-12-17|worker mpm usage of apr's memory pools is not thre|
|41200|Inf|Maj|2006-12-18|SSI include, prevent client from receiving full ou|
|41240|Inf|Enh|2006-12-25|BRF files support                                 |
|41262|Inf|Nor|2006-12-29|Embedded pcre causes runtime segfault             |
|41362|Inf|Maj|2007-01-14|mod_disk_cache and mod_include conflict generating|
|41375|Inf|Min|2007-01-15|Using same SSL Certificate with different ServerNa|
|41391|New|Min|2007-01-17|too long period setting makes max-age overflow    |
|41412|New|Enh|2007-01-19|RewriteRule Skip should take negative arguments   |
|41435|New|Nor|2007-01-22|Authentication fails with 500 Server Error        |
|41450|Inf|Cri|2007-01-24|Empty page (200 OK) while max-age is empty        |
|41485|New|Nor|2007-01-28|LDAP client certificates not usable in 2.2.x/trunk|
|41529|New|Enh|2007-02-02|Accept BOM in .htaccess                           |
|41556|New|Enh|2007-02-07|Feature Request: format string for masking ip addr|
|41621|New|Maj|2007-02-15|Apache 2.2.4 backend problem with Apache 2.0.59 Re|
|41646|New|Nor|2007-02-16|wrong headers are sent for HEAD requests when Prox|
|41676|Opn|Enh|2007-02-22|Refactor mod_proxy_ftp                            |
|41685|New|Enh|2007-02-22|Implement optional HTTP Authentication in a standa|
|41712|Inf|Nor|2007-02-26|threads locked at logging state                   |
|41729|New|Maj|2007-02-28|error message: ap_get_scoreboard_lb(130) failed in|
|41744|Inf|Maj|2007-03-01|SSI resolves includes but removes original HTML   |
|41763|Opn|Nor|2007-03-05|mod_disk_cache ignores CacheDirLevels and CacheDir|
|41764|New|Nor|2007-03-05|error state and conf                              |
|41771|Inf|Nor|2007-03-06|Erro with mod_proxy_ajp or mod_prox_balancer      |
|41867|New|Nor|2007-03-16|<DirectoryMatch> Matches Files                    |
|41925|New|Nor|2007-03-21|trivial patch to add automatic crypting to 'dbmman|
|41929|New|Nor|2007-03-22|ISAPI ssl variables                               |
|41953|New|Nor|2007-03-26|pidfile remains when 2nd pass of post-config retur|
|41962|New|Min|2007-03-27|Need mod_auth_ldap to authenticate with Active Dir|
|42001|New|Cri|2007-03-30|LINUX : Could not set LDAP_OPT_X_TLS to LDAP_OPT_X|
|42027|Inf|Nor|2007-04-02|FileETag directive appears to be ignored          |
|42054|New|Nor|2007-04-04|service name and parameter issues                 |
|42079|New|Nor|2007-04-10|SSLRequire: Additional access in sub-directoies   |
|42082|New|Nor|2007-04-10|filter_init is called multiple times after an INCL|
|42182|Inf|Nor|2007-04-22|Mime types for cached proxied content             |
|42216|New|Enh|2007-04-24|RFE -- external overload procedure                |
|42262|Inf|Nor|2007-04-26|mod_dav /  worker fails to allocate memory and seg|
|42287|Inf|Nor|2007-04-28|chunked encoded response to POST request to cgi sc|
|42368|Inf|Nor|2007-05-09|httpd is crashing if conf/extra/httpd-manual.conf |
|42373|Inf|Maj|2007-05-09|REPORT request fails over mod_proxy               |
|42404|New|Enh|2007-05-13|Filename/info for disk-cached proxied remote URLs |
|42425|Inf|Nor|2007-05-15|Additional freshness checks in mod_cache.c cause m|
|42471|Inf|Nor|2007-05-21|clients with IE7 take 3megs per page load. httpd.e|
|42492|Inf|Nor|2007-05-22|mod_proxy_ajp with SSL front end: data corruption |
|42499|Inf|Nor|2007-05-23|Backslash produces a 404 error instead of going to|
|42548|New|Nor|2007-05-30|INCLUDE negotiating language aborts with APR_POOL_|
|42561|New|Enh|2007-05-31|[PATCH] AuthLDAPRemoteUserAttribute only applies i|
|42633|New|Min|2007-06-11|mod_info gives wrong information about actual conf|
|42665|New|Nor|2007-06-14|spurious attempt to open ".../file.html/.htaccess"|
|42666|New|Nor|2007-06-14|code & docs corrections for FollowSymLinks and Sym|
|42667|New|Nor|2007-06-14|mod_proxy_balancer not reporting when workers are |
|42668|Inf|Nor|2007-06-14|balancer_manager shows Ok status for the workers t|
|42687|New|Nor|2007-06-18|Fully delegate certificate & key semantics to the |
|42688|New|Enh|2007-06-18|engine managed keys: per process openssl context  |
|42690|New|Nor|2007-06-18|realm is not set for each configured directory whe|
|42695|Opn|Cri|2007-06-18|mod_proxy balancer problem                        |
|42699|New|Enh|2007-06-20|share mod_logio data with other modules           |
|42711|New|Enh|2007-06-20|format string for whole log entries not just id   |
|42732|Opn|Maj|2007-06-25|Authentication against database issue.            |
|42763|New|Nor|2007-06-28|graceful-stop/restart loops go loop too far       |
|42923|Inf|Maj|2007-07-17|vhost certificate NOT overriding cert from the _de|
|42972|Inf|Nor|2007-07-25|Certificate list in mod_ssl module context are not|
|42977|New|Nor|2007-07-25|DAV locking is busted when apr-util is built with |
|42987|New|Nor|2007-07-27|Weak Etags in Apache are useless and violate RFC 2|
|43012|New|Nor|2007-08-02|AIX instdso.sh libphp5.so                         |
|43027|New|Enh|2007-08-03|Header in default language                        |
|43033|New|Nor|2007-08-04|apxs does not correctly detect module name (w/o -n|
|43177|New|Nor|2007-08-21|child pid xxxxx exit signal Segmentation fault    |
|43218|New|Nor|2007-08-27|Wrong cert used for vhost if ServerName is same   |
|43220|Opn|Cri|2007-08-27|mod_proxy truncating ajp output                   |
|43249|Inf|Maj|2007-08-30|ldap_simple_bind_s failed when using SUN LDAP Libs|
|43275|New|Enh|2007-08-31|Remove avoidable network transactions in mod_proxy|
|43289|New|Nor|2007-09-02|XBitHack full g+x returns zero sized response on I|
|43308|New|Nor|2007-09-04|Persistent backend connections not supported for R|
|43352|New|Nor|2007-09-11|Apache2: out of memory during heavy webdav files c|
|43441|New|Nor|2007-09-20|Incorrect HTTP status for pre-commit-blocked autov|
|43471|New|Min|2007-09-25|no need to create a global pool on open_scoreboard|
|43481|New|Cri|2007-09-26|AuthLDAPURL must contain a final path of branch?(l|
|43494|New|Nor|2007-09-26|mod_cgid does not kill never ending scripts       |
|43502|New|Enh|2007-09-28|httpd fails to start if log directory does not exi|
|43513|New|Nor|2007-09-29|Persistent backend connections for ProxyPassMatch |
|43532|Inf|Cri|2007-10-02|Error while compiling Apache 2.2.3 on HPUX        |
|43533|Opn|Nor|2007-10-02|Frequent crashes in mod_include's bndm()          |
|43561|New|Nor|2007-10-05|apxs -q anomaly                                   |
|43577|Inf|Blk|2007-10-09|mod_authnz_ldap not working under WLDAP32 (novell/|
|43607|New|Nor|2007-10-11|mod_proxy sends data on closed connections without|
|43649|Opn|Trv|2007-10-18|mod_autoindex is generating invalid XHTML markup  |
|43652|New|Enh|2007-10-18|Suggest small change for big fix with SuExec & Vir|
|43666|New|Nor|2007-10-20|CGI works, but client denied error messages in err|
|43679|New|Enh|2007-10-23|Contributed tests for checking that subrequests ta|
|43723|Inf|Cri|2007-10-29|Apache 2.2.6 segfault when using mod_dbd          |
|43724|New|Cri|2007-10-29|Apache 2.2.6 segfault on url wich not in cache    |
|43755|New|Enh|2007-10-31|Add a SSLOptions to don't fill SSL_CLIENT_VERIFY  |
|43762|New|Enh|2007-10-31|Misleading tips in an error message about internal|
|43777|New|Nor|2007-11-01|Wrong encoding of <href> element in response      |
|43778|New|Nor|2007-11-01|Wrong responses if httpd has not access to some el|
|43785|New|Enh|2007-11-02|Tracking the per-hit impact of mod_include        |
|43792|New|Enh|2007-11-04|Feature proposal - bind phase                     |
|43818|New|Nor|2007-11-08|PROPFIND on -w- collections returns 207 MULTI-STAT|
|43838|New|Enh|2007-11-11|If-Modified-Since request and htcacheclean conflic|
|43895|New|Nor|2007-11-18|mod_mbox improvements                             |
|43897|Inf|Cri|2007-11-18|Huge memory consumption httpd 2.2.6, mod_proxy - m|
|43931|New|Enh|2007-11-21|OpenSSL autoconfig support for mod_ssl            |
|43943|New|Nor|2007-11-22|SHMCB crash due to misalignment and GCC 4 optimiza|
|43958|Inf|Maj|2007-11-26|mod_proxy_balancer not balancing correct in combin|
|43997|Opn|Min|2007-11-29|Only issue "Init: SSL server IP/Port conflict" if |
|44025|Inf|Nor|2007-12-05|Apache 2.2.6 fails to configure on OpenBSD 4.1    |
|44027|Ass|Enh|2007-12-05|Internationalized Domain Name (IDN) support       |
|44031|Opn|Maj|2007-12-06|RemoveHandler inside subdir location              |
|44034|Ass|Enh|2007-12-06|mpm_winnt doesn't call monitor hook               |
|44105|New|Nor|2007-12-19|Core dumps when using Proxy Keepalive             |
|44155|New|Enh|2007-12-31|smarter retry for LDAP_UNAVAILABLE, LDAP_BUSY, etc|
|44181|Opn|Enh|2008-01-07|add UnAlias                                       |
|44188|Inf|Cri|2008-01-08|Empty response for certain requests (mod_proxy as |
|44218|New|Min|2008-01-13|mod_autoindex shows the default icon for files wit|
|44221|Opn|Cri|2008-01-14|CheckCaseOnly On does not stop Multiple Choices ba|
|44250|New|Nor|2008-01-16|OSX 10.5: __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_|
|44279|New|Enh|2008-01-22|Add "iterate" flag to apply rule in a loop while p|
|44302|New|Nor|2008-01-27|AuthLDAPURL does not accept ldapi:// urls         |
|44305|New|Nor|2008-01-28|Inconsistent configuration for suexec path        |
|44316|New|Nor|2008-01-28|httpd 2.0 does not follow ScriptAliases when invok|
|44322|New|Enh|2008-01-29|mod_proxy ProxyPassReverseCookieDomain with no dom|
|44351|New|Nor|2008-02-04|File descriptor leak when using prg RewriteMap    |
|44363|Inf|Maj|2008-02-05|Slow file transfers                               |
|44384|Ass|Nor|2008-02-09|mod_ssl on MacOS X 10.5.1 does not work because of|
|44453|New|Nor|2008-02-19|list_hooks.pl doesn't parse declarations that span|
|44476|New|Maj|2008-02-23|Apache service fails to start due to missing depen|
|44503|Inf|Blk|2008-02-27|Errors during SSL handshake                       |
|44518|New|Enh|2008-03-02|Don't set expires header on HTTP redirect.        |
|44578|New|Enh|2008-03-11|mod_authn_dbd option to let database validate pass|
|44601|New|Trv|2008-03-13|Add a lowercase value to Vary header for consisten|
|44602|New|Enh|2008-03-13|Options for modfying Content-Location (relative OR|
|44622|Inf|Nor|2008-03-17|POST fails to SSL vhost with proxy to HTTP backend|
|44631|New|Nor|2008-03-18|with-included-apr fails to work when using a separ|
|44638|New|Nor|2008-03-19|sed error in httpd.spec.in                        |
|44656|New|Nor|2008-03-22|Tries to retrive error document 404 instead of 406|
|44657|New|Enh|2008-03-22|prefer-type, -encoding, and -charset cookie? (as p|
|44670|New|Min|2008-03-25|Apache httpd 2.2.8 : Cannot ./configure when curre|
|44696|Inf|Nor|2008-03-27|mod_cache sometimes serves old content despite hav|
|44730|New|Nor|2008-04-01|duplicate query string in remote server url when u|
|44752|New|Nor|2008-04-03|Suexec does not correctly check that scripts are i|
|44757|New|Enh|2008-04-04|adding stderr buckets to mod_cgi                  |
|44758|New|Enh|2008-04-04|LimitRequestBody undocumented behaviour with proxi|
|44779|New|Enh|2008-04-08|Using commas and semicolons for content negotiatio|
|44855|New|Nor|2008-04-22|irregular balancing with sticky-session after re-e|
|44865|Ass|Nor|2008-04-23|mod_dav's lock database becomes consistently corru|
|44870|Inf|Nor|2008-04-24|process spinning on 100% cpu                      |
|44923|Inf|Min|2008-05-02|consequences of multiple LDAPTrustedGlobalCert    |
|44924|New|Enh|2008-05-02|allow 'CACERTDIR' in mod_ldap                     |
|44940|New|Maj|2008-05-06|Httpd randomly breaks when verifying client certif|
|44981|New|Enh|2008-05-12|Digital Certificates (CN Based) for Authorization |
|45022|New|Nor|2008-05-16|Processing of escaped glob patterns in "Include" d|
|45023|Opn|Reg|2008-05-16|DEFLATE preventing 304 NOT MODIFIED response      |
|45049|Opn|Nor|2008-05-20|mod_mem_cache caches partial content when client c|
|45054|New|Nor|2008-05-21|SSLVerifyClient optional_no_ca is broken          |
|45058|New|Nor|2008-05-21|Mod_SSL does not set AUTH_TYPE with client certifi|
|45078|New|Nor|2008-05-27|mod_proxy stalls when uploading files             |
|45103|Ass|Min|2008-05-30|apachectl should do config test before reload/rest|
|45111|New|Enh|2008-06-01|make mod_usertrack use mod_unique_id if available |
|45116|New|Nor|2008-06-02|fail to check return value of apr_file_dup2() in /|
|45148|New|Enh|2008-06-06|The actual host of the request will be more helpfu|
|45184|New|Enh|2008-06-11|Regular Expression in directive ServerAlias       |
|45187|New|Maj|2008-06-11|Long File name requests gives FORBIDDEN response  |
|45225|New|Nor|2008-06-17|XBitHack breaks DirectoryIndex + MultiViews conten|
|45253|New|Nor|2008-06-23|Unable to build httpd 2.2.9 on Solaris/SPARC      |
|45257|New|Enh|2008-06-23|add (en)force option for UseCanonicalName         |
|45259|New|Enh|2008-06-23|Add /home/[a-z]/* scheme to UserDir conf          |
|45275|New|Maj|2008-06-25|Locked files during expired page renew in disk cac|
|45281|New|Enh|2008-06-25|SITE CHMOD/SEARCH                                 |
|45287|Inf|Min|2008-06-26|build failure because of difference between BSD an|
|45297|New|Min|2008-06-27|mod_dir does not manage correctly the user (r->use|
|45302|New|Enh|2008-06-28|ServerRoot directive                              |
|45355|New|Nor|2008-07-07|ab text and html output jumbo unification         |
|45356|New|Nor|2008-07-07|ab: optionally reduce resource usage (qsort and me|
|45371|New|Nor|2008-07-10|MSI installer requires uninstall of previous versi|
|45374|New|Blk|2008-07-10|Shared memory error on starting httpd with mod_lda|
|45379|Inf|Nor|2008-07-11|[Bug] svn merge, apache and trailing slashes      |
|45385|Inf|Nor|2008-07-11|unable to compile/make 2.2.9 with --enable-ldap   |
|45393|New|Nor|2008-07-14|Apache returns 500 Error when no LDAP credentials |
|45402|New|Nor|2008-07-15|mod_autoindex incorrectly fails to list files     |
|45405|New|Enh|2008-07-16|Allow binding port to be set for individual worker|
|45449|New|Nor|2008-07-21|[PATCH] Add support to WebDav to MOVE/COPY to remo|
|45456|New|Enh|2008-07-22|mod_dbd don't allow more then one database pool   |
|45487|New|Trv|2008-07-27|broken log messages on startup in win32 version   |
|45497|New|Nor|2008-07-29|Scoreboard slot leaked using MaxRequestsPerChild a|
|45512|Ass|Maj|2008-07-31|Bad Performance of mod_proxy with SSL on Solaris 1|
|45524|New|Enh|2008-08-01|Specifying multiple vhost aliases                 |
|45525|New|Enh|2008-08-01|Switch mod_autoindex to Tango icons               |
|45579|New|Nor|2008-08-06|unknown URI scheme in request-URI ignored         |
|45674|New|Enh|2008-08-22|Allow to change error code returned by "Require ld|
|45726|New|Enh|2008-09-02|Build in a maintenance functionallity             |
|45736|New|Nor|2008-09-03|mod_dav needs a directory for its locks and one sh|
|45754|New|Enh|2008-09-06|autoconf macros                                   |
|45763|New|Nor|2008-09-08|No openssl.cnf defined by default causes OpenSSL c|
|45773|New|Nor|2008-09-09|pcre build generates sources to srcdir rather than|
|45788|New|Nor|2008-09-11|mod_log_forensic output shouldn't be buffered when|
|45801|Opn|Nor|2008-09-13|SSLRequireSSL with strictrequire and satisfy any d|
|45838|New|Nor|2008-09-18|mod_authz_owner & directories                     |
|45868|New|Nor|2008-09-23|mod_mem_cache update of headers in cache object is|
|45900|New|Nor|2008-09-26|"make install" fails from read-only filesystem    |
|45905|New|Enh|2008-09-26|ErrorDocument and default URL                     |
|45922|New|Enh|2008-09-30|Expand the conditions under which "SSLVerifyClient|
|45923|New|Nor|2008-09-30|htpasswd tries to open(file, O_RDONLY | O_APPEND) |
|45926|Inf|Nor|2008-10-01|Unable to start apache 2.2.9                      |
|45986|New|Nor|2008-10-10|[info]...Invalid argument: core_output_filter: wri|
|46024|Opn|Nor|2008-10-16|--enable-static is not available in apache's confi|
|46037|Inf|Nor|2008-10-18|Configuration of trusted OCSP responder certificat|
|46040|New|Enh|2008-10-20|Check for existing version of Apache while install|
|46054|New|Nor|2008-10-21|Running httpd returns the error "bad user name nob|
|46070|New|Nor|2008-10-22|MSI installer does not validate custom installatio|
|46071|New|Enh|2008-10-22|Allowing space in between comma and last option in|
|46074|New|Enh|2008-10-23|Need of friendly and easy to use configuration gra|
|46139|New|Nor|2008-11-02|Apache Restart option is not working              |
|46140|New|Enh|2008-11-03|Change error state in balancer manager            |
|46188|Inf|Nor|2008-11-11|Core dumps in apache 2.0.59                       |
|46195|Opn|Nor|2008-11-12|ProxyPass fails with literal IPv6 address         |
|46215|New|Nor|2008-11-14|Race condition in bybusyness algorithm            |
|46231|New|Maj|2008-11-18|Connection Pooling with ajp depends on syntax ?   |
|46241|New|Enh|2008-11-19|mod_expires - ExpiresByPattern or ExpiresIf       |
|46267|New|Nor|2008-11-22|No shared modules build if use --with-apr and --wi|
|46270|New|Enh|2008-11-23|Add FIPS 140-2 mode for mod_ssl for FIPS 1.2 modul|
|46282|New|Nor|2008-11-24|apache2.2 reverse proxy causing full memory and sw|
|46316|New|Maj|2008-12-01|Proxied SSI ProxyTimeout render failure           |
|46317|Inf|Nor|2008-12-01|mod_authnz_ldap.c(373)  seg fault                 |
|46412|New|Nor|2008-12-17|make_child return value not checked               |
|46417|New|Cri|2008-12-19|[notice] Parent: child process exited with status |
|46428|Opn|Nor|2008-12-21|Spaces in URI doesn't encode in proxy-requests    |
|46442|New|Nor|2008-12-29|Semicolon in allow/deny all rules cause reverse lo|
|46449|New|Maj|2008-12-30|Output out of order from SSI include virtual      |
|46454|New|Min|2008-12-30|escaping wildcards in AddIcon filename matching   |
|46475|New|Nor|2009-01-04|build warnings.                                   |
|46499|New|Maj|2009-01-09|httpd accept() return EAGAIN error                |
|46521|New|Nor|2009-01-13|mod_dav doesn't show symlinks                     |
|46529|Ass|Nor|2009-01-14|Child httpd processes crash with Segmentation faul|
|46534|New|Nor|2009-01-14|mod_proxy_ajp scheme and port do not follow UseCan|
|46578|New|Nor|2009-01-21|Flawed header                                     |
|46582|Ver|Min|2009-01-22|RewriteMap internal functions are not well documen|
|46604|New|Nor|2009-01-26|Error thrown when trying to rpmbuild -tb httpd sou|
|46629|New|Maj|2009-01-29|Apache hanging on system calls for php and perl   |
|46634|Ass|Nor|2009-01-30|Requests sometimes take too long, wrong time taken|
|46644|New|Enh|2009-01-31|Clean way to pass custom environment variables to |
|46646|Ass|Nor|2009-02-01|check group membership is sometimes case sensitive|
|46650|Opn|Nor|2009-02-02|CustomLog enviroment condition SCRIPT_FILENAME    |
|46656|New|Enh|2009-02-03|ProxyErrorOverride inside location                |
|46669|New|Enh|2009-02-06|rotatelogs doesn't autocreate directories         |
|46671|Opn|Cri|2009-02-07|Apache periodicaly crashes .                      |
|46678|New|Nor|2009-02-09|Fixed Content-Length using mod_ext_filter with mod|
|46682|New|Nor|2009-02-09|mod_proxy EAI_AGAIN DNS failure                   |
|46685|Opn|Nor|2009-02-09|401 sent without WWW-Authenticate header when requ|
|46709|Opn|Reg|2009-02-12|Expect: 100-continue to an HTTP/1.0 server change |
|46724|Inf|Cri|2009-02-17|WinXP SP3 - Apache crashes on startup in libapr-1.|
|46743|New|Nor|2009-02-19|Inconsistent behavior of "RewriteOptions inherit" |
|46745|New|Maj|2009-02-20|ab.c error :  undefined reference to `BIO_set_call|
|46751|New|Nor|2009-02-21|Can passenv variables who's name contain '(' or ')|
|46762|New|Nor|2009-02-24|Error, SSL/TLS libraries were missing or unusable |
|46765|Opn|Nor|2009-02-25|doubled HTTP header leads to error (Redmine)      |
|46785|Inf|Nor|2009-03-02|Child process increases to 100% (CPU)             |
|46788|New|Nor|2009-03-02|Set resource limits to avoid denial of service att|
|46810|New|Nor|2009-03-05|apxs / apu-1-config outputting erroneous include p|
|46824|New|Nor|2009-03-09|RemoveOutputFilter will not work for Filters added|
|46845|Inf|Cri|2009-03-12|Apache crashes in Windows when using subversion(pr|
|46847|New|Nor|2009-03-13|WebDAV methods with encoding other than "identity"|
|46873|New|Nor|2009-03-18|feature request: connection count on balancer-mana|
|46884|New|Min|2009-03-20|Call to apu_dso_load Fails In apr_ldap_stub.c On O|
|46946|Inf|Nor|2009-03-31|mod_mbox shows email addresses in plain text      |
|46963|New|Nor|2009-04-03|KeepAliveTimout prevents child process from exitin|
|46969|New|Nor|2009-04-05|CustomLog format %m always GET on errors with loca|
|46970|New|Nor|2009-04-05|CustomLog %X does not record aborted connections w|
|47011|New|Reg|2009-04-09|mod_proxy/mod_proxy_balancer hot-standby BalancerM|
|47055|New|Blk|2009-04-20|SSLVerifyClient + Directory doesn't use cache sess|
|47063|New|Nor|2009-04-21|mod_proxy doesn't call post_request handler when t|
|47134|New|Nor|2009-05-01|Last resolve handling when sending client certific|
|47138|New|Nor|2009-05-01|Reverse Proxy & Balancer generate error fault when|
|47152|New|Maj|2009-05-04|Apache is only serving the first character in the |
|47159|New|Nor|2009-05-06|2.2.x logresolve doesn't support ipv6             |
|47167|New|Nor|2009-05-07|Authenticated sessions being switched by reverse p|
|47170|New|Enh|2009-05-08|rotatelogs ring buffer option                     |
|47180|New|Nor|2009-05-11|DBM ssl_scache setting can cause extreme performan|
|47220|Opn|Enh|2009-05-19|Access to environment variables                   |
|47256|New|Enh|2009-05-23|Enable SSL on a per-port basis                    |
|47289|New|Nor|2009-05-30|Can't build with dynamic libraries on Mac OS 10.4 |
|47295|New|Nor|2009-06-01|AuthDBDUserPWQueryFmt/AuthDBDUserRealmQueryFmt in |
|47329|New|Nor|2009-06-07|SSLCADNRequest* & SSLCACertificate* silently do no|
|47340|New|Nor|2009-06-09|uldap_cache_comparedn() called without a lock     |
|47344|New|Enh|2009-06-10|[FEATURE REQUEST] RedirectCanonicalName           |
|47345|New|Enh|2009-06-10|rotatelogs timeout patch                          |
|47346|New|Maj|2009-06-10|mod_cache doesn't re-cache expired content when La|
|47387|Inf|Nor|2009-06-18|SSL_CLIENT_I_DN and SSL_CLIENT_S_DN use Email inst|
|47392|Opn|Nor|2009-06-18|<FilesMatch> is using the wrong directory         |
|47435|New|Nor|2009-06-26|mod_authz_host does reading of /etc/hosts on each |
|47438|Inf|Enh|2009-06-27|how to create a non-html "listing generated by the|
|47447|New|Enh|2009-06-29|Add possibility to use client IP as a value in Req|
|47484|New|Nor|2009-07-06|Spurious RewriteLock warning when using external m|
|47485|New|Enh|2009-07-06|HTML5 Websocket implementation                    |
|47514|New|Enh|2009-07-12|Personal data and restrictions based on subject di|
|47528|New|Maj|2009-07-14|Worker process won't restart more than once using |
|47542|New|Nor|2009-07-16|Piped logging processes killed before other proces|
|47562|Inf|Nor|2009-07-23|Apache/2.2.3 (Win32) mod_perl/2.0.3-rc1           |
|47578|New|Nor|2009-07-24|compile ERROR with ssl                            |
|47580|Opn|Nor|2009-07-25|mod_cache sends 200 response instead of 304       |
|47586|New|Nor|2009-07-27|httpd -k start doesn't start service when rotatelo|
|47591|New|Min|2009-07-27|show current HTTP_HOST in mod_status scoreboard   |
|47601|New|Enh|2009-07-29|Support X-Forwarded-For in forward proxy requests |
|47625|New|Nor|2009-08-02|2.2.12 win32 msi installer missing                |
|47634|New|Maj|2009-08-04|mod_ldap connection pool session keepalive not imp|
|47643|New|Enh|2009-08-04|added meta tags to xhtml output for ease of search|
|47650|Opn|Trv|2009-08-05|httxt2dbm calculates value size incorrectly       |
|47657|New|Nor|2009-08-06|Make WebDAV MOVE atomic when replacing files on sa|
|47659|New|Nor|2009-08-07|makefile.win needs check for DBM_LIST, dies on bui|
|47664|New|Nor|2009-08-07|ap_proxy_canonenc: does not recode all high-byte c|
|47665|Inf|Blk|2009-08-09|Apache service well launched but blank Screen     |
|47691|New|Enh|2009-08-12|libtool invocations should use --tag              |
|47693|Opn|Nor|2009-08-13|GET request has race condition w.r.t. replacement |
|47706|Inf|Nor|2009-08-19|(20014)Internal error: proxy: error reading status|
|47716|New|Min|2009-08-20|LimitRequestFieldSize and friends not merged well |
|47719|Opn|Enh|2009-08-20|Broken symbolic link (symlink) causes wrong ErrorD|
|47723|New|Nor|2009-08-22|suEXEC and low RLimitMem gives "crit: invalid uid"|
|47743|Inf|Nor|2009-08-26|mod_so segfaults at server startup in ap_find_load|
|47753|New|Nor|2009-08-27|output and error channels not explicitly passed fo|
|47778|Opn|Enh|2009-09-03|wrong exit value on graceful restart              |
|47780|New|Nor|2009-09-03|Critical errors should be marked by time and level|
|47807|Inf|Nor|2009-09-09|Proxy dialog error with Apache 2.2.13             |
|47808|New|Maj|2009-09-09|Child process core dumps when enabling CRL        |
|47814|Inf|Maj|2009-09-10|openssl_pkcs7_sign error                          |
|47838|New|Enh|2009-09-14|Ability to Dynamically Inject Current Time Into a |
|47874|New|Nor|2009-09-18|mod_fcgid crashes if added during restart         |
|47895|New|Maj|2009-09-24|Incorrect 413 error handling                      |
|47908|New|Min|2009-09-27|'invalid result code' in error_log                |
|47981|New|Nor|2009-10-12|allow language specific html-versions (index.html.|
|47982|New|Nor|2009-10-12|correctly interprete non-standard HTTP_ACCEPT_LANG|
|47988|New|Nor|2009-10-12|Segmentation fault                                |
|47989|New|Nor|2009-10-13|Junk string appended to compressed dynamic content|
|47994|New|Enh|2009-10-14|ScriptInterpreterSource apparently broken in Windo|
|48020|New|Nor|2009-10-17|KCP+ Opera support for mod_auth_digest            |
|48037|Inf|Nor|2009-10-21|mod_proxy_http does not handle asynchronous keepal|
|48045|New|Nor|2009-10-23|Apache 2 initgroups alert, Max OS X, abnormal exit|
|48057|New|Nor|2009-10-26|mod_fcgid creates 1 more process then allowed     |
|48094|New|Nor|2009-11-01|Avoid a race condition in close_worker_sockets()  |
|48107|New|Maj|2009-11-02|Mutual Authentication: Order in ca-bundle influenc|
|48115|New|Enh|2009-11-03|Duration to receive the request, generate response|
|48130|New|Maj|2009-11-04|DAV operations on large filesets consume all the O|
|48154|New|Nor|2009-11-06|Requests through mod_isapi are not parsed by HTTP_|
|48164|New|Enh|2009-11-09|add new parameters to rotatelogs                  |
|48219|New|Nor|2009-11-17|Retrying the worker for seems to omit POST variabl|
|48228|New|Nor|2009-11-18|Renegocation requires multiple client authenticati|
|48246|New|Enh|2009-11-19|Check permissions on file/directory specified for |
|48254|New|Trv|2009-11-20|Bogus "DocumentRoot does not exist" warning when s|
|48283|New|Nor|2009-11-25|Proxy errors since httpd 2.2.12 with Tomcat 6.0.20|
|48291|New|Maj|2009-11-26|mod_substitute loops                              |
|48295|Opn|Nor|2009-11-27|ProxyPassReverseCookiePath: Not changing path corr|
|48301|New|Enh|2009-11-30|Feature request: improved connection status report|
|48309|New|Maj|2009-11-30|libapreq2-2.12: "make test" fails at request.t and|
|48312|Opn|Nor|2009-11-30|ProxyPassReverseCookiePath: Not changing path corr|
|48316|Inf|Nor|2009-12-01|ap_run_insert_filter doesn't work in cache_url_han|
|48354|New|Enh|2009-12-08|void ap_custom_response is not supporting the bina|
|48360|New|Enh|2009-12-09|provide sample configuration file for inclusion in|
|48361|New|Enh|2009-12-09|Add global server option for specifying desired DS|
|48364|Opn|Nor|2009-12-10|PHP-generated pages are not cached in spite of per|
|48369|New|Enh|2009-12-10|add option to automatically restart if a script is|
|48431|New|Nor|2009-12-22|Error logging doesn't work when configured to use |
|48440|Inf|Cri|2009-12-23|Segmentation Fault                                |
|48449|Inf|Nor|2009-12-28|make distclean removes core.c and core_filters.c  |
|48465|Opn|Enh|2009-12-30|Support TCP to connect to backends                |
|48499|New|Nor|2010-01-06|mod_rewrite can't redirect to files with ? in them|
|48500|New|Nor|2010-01-06|mod_mbox mishandles right-click to open msg in new|
|48508|New|Nor|2010-01-07|BalancerMember doesn't accept nocanon directive   |
|48549|New|Enh|2010-01-14|Add Cache-Control s-maxage support                |
|48576|New|Nor|2010-01-19|MOVE or COPY in WebDAV fails with 404 when file ex|
|48585|New|Enh|2010-01-20|mod_cache no longer caches expired content        |
|48602|New|Enh|2010-01-23|use asynch ldap_compare so LDAPTimeout applies    |
|48623|New|Maj|2010-01-26|AuthLDAPURL syntax is not RFC-compliant, prevents |
|48639|New|Enh|2010-01-29|Add htcacheclean as a core monitored process      |
|48652|New|Maj|2010-02-01|"AuthType form" fails if a password contains  '&' |
|48659|New|Maj|2010-02-02|Problem with accents in filename and byte serving |
|48687|New|Nor|2010-02-05|mod_rewrite ignores trailing dot in request URI on|
|48705|New|Enh|2010-02-08|flag to allow newlines in the error log as opposed|
|48712|New|Enh|2010-02-09|Add UID and GID to status page                    |
|48719|New|Nor|2010-02-09|[BUG] mod_proxy_ajp return wrong error message whe|
|48721|New|Nor|2010-02-10|[Patch] Add ProxyAllow to mod_proxy               |
|48731|New|Maj|2010-02-11|Prefork not creating processes after 10 servers ar|
|48732|New|Nor|2010-02-12|[BUG] environment variable SCRIPT_NAME output erro|
|48769|New|Nor|2010-02-18|[PATCH] Processes in the busy list should not be k|
|48777|New|Maj|2010-02-19|proxy balancer not detecting correctly when host (|
|48780|New|Enh|2010-02-19|Enable mod_authnz_ldap to accept valid client cert|
|48792|New|Enh|2010-02-22|httpd util apachectl returns wrong status informat|
|48805|New|Nor|2010-02-23|Corrupted response for HTTPS + KEEPALIVE=ON       |
|48808|New|Enh|2010-02-24|mod_authz_owner support for POSIX access control l|
|48819|Inf|Nor|2010-02-25|After users login on the web page, the page does n|
|48842|Inf|Nor|2010-03-02|mod_log_config logs the full size of the file inst|
|48880|Opn|Nor|2010-03-09|error on make                                     |
|48888|New|Nor|2010-03-10|DOCTYPE definitions nearly 11 years out-of-date   |
|48920|New|Enh|2010-03-15|Breadcrumbs on mod_autoindex path                 |
|48921|Inf|Nor|2010-03-16|mod_mem_cache crash, version 2.2.15.0             |
|48937|New|Enh|2010-03-18|Feature proposal - support sasl_bind              |
|48949|Inf|Cri|2010-03-20|fcgid processes never get killed after graceful re|
|48958|New|Nor|2010-03-22|mod_ldap, ldap credential cache & graceful restart|
|48987|New|Trv|2010-03-25|typo in polish translation of HTTP_UNAUTHORIZED.ht|
|49037|New|Enh|2010-04-02|SSLVerifyClient require_no_ca                     |
|49043|New|Maj|2010-04-04|Using ssi include directive overwrites QUERY_STRIN|
|49058|New|Nor|2010-04-06|Prefork MPM tries to accept on closed listener soc|
|49067|New|Nor|2010-04-08|FTPOptions ShowUnAuthorizedFiles does not work    |
|49068|New|Nor|2010-04-08|UTF-8 URL Encode error                            |
|49087|New|Maj|2010-04-11|MSI installation reports "interrupted installation|
|49114|New|Maj|2010-04-13|NTFS junction directories missing from directory l|
|49123|New|Nor|2010-04-14|mod_proxy_ajp does not send the client's SSL chain|
|49131|New|Nor|2010-04-15|Very long URLs cause 404 or 403 errors with SetAct|
|49133|New|Maj|2010-04-16|Windows service recovery options do not work for A|
|49157|New|Nor|2010-04-20|Issues with xml interface for balancer manager    |
|49187|New|Nor|2010-04-26|Crash mod_mem_cache and mod_svn                   |
|49199|New|Enh|2010-04-27|Implement LDAP scope-aware caching in mod_ldap    |
|49220|New|Nor|2010-04-29|feature request for being able to disable FcgidWra|
|49239|New|Blk|2010-05-01|Apache mod_ssl gives coredump with openssl 0.9.8  |
|49277|New|Nor|2010-05-12|Expose a variable to identify SSL Session renegoti|
|49283|New|Nor|2010-05-12|Language of dates on SSI                          |
|49285|New|Enh|2010-05-13|Relative (local to current directory) URLs do not |
|49348|New|Enh|2010-05-27|[mod_log_config] Output log file name format capab|
|49385|New|Maj|2010-06-03|mod_disk_cache server side included files are inte|
|49387|Inf|Cri|2010-06-03|Unable to modify default charset setting to UTF-8 |
|49391|New|Nor|2010-06-05|mod_disk_cache needs to register a cleanup to kill|
|49396|New|Enh|2010-06-06|PATH_INFO normalization, especially relating to vo|
|49427|New|Nor|2010-06-11|mod_cgid and mod_cgi do not return proper value wh|
|49433|New|Enh|2010-06-13|improving info in server status                   |
|49439|New|Nor|2010-06-14|Bug in mod_userdir which prevents suexec from runn|
|49504|New|Nor|2010-06-25|Solaris 10/x64 worker graceful restart problem    |
|49532|New|Nor|2010-06-30|mod_cache: Set-Cookie headers are appended to cach|
|49553|New|Min|2010-07-05|Set QoS bits via APR2 API instead                 |
|49568|New|Maj|2010-07-07|Apache mod_authnz_ldap built with the MS LDAPSDK d|
|49632|Inf|Nor|2010-07-21|mod_authnz_ldap denies users when search is perfor|
|49633|New|Enh|2010-07-21|Handle AD primary groups in mod_authnz_ldap       |
|49642|New|Nor|2010-07-23|mod_rewrite mistakes encoded question mark as path|
|49643|New|Nor|2010-07-23|WebDav plus mod Negotiation causes directory creat|
|49676|New|Nor|2010-07-30|directory with german umlauts are indented by one |
|49680|New|Maj|2010-07-30|Perl script are not running on Win32, Apache 2.2.1|
|49684|New|Enh|2010-08-01|enhancement for ipv6 implementation               |
|49699|New|Nor|2010-08-03|Inconsistent Keep-alive from proxy to the origin s|
|49715|New|Maj|2010-08-06|ProxyPassMatch Url Encoder Problem                |
|49717|New|Enh|2010-08-06|PATCH: Enable SSL Timeout                         |
|49737|Inf|Nor|2010-08-10|order allow,deny does not work on IPv6            |
|49743|New|Maj|2010-08-12|SSI 'echo encoding="(url/none)"' bug              |
|49746|Opn|Enh|2010-08-12|mod_rewrite urlencode option                      |
|49766|New|Maj|2010-08-17|POST request on CGI script generating empty body c|
|49771|New|Nor|2010-08-17|After graceful restart using mod_proxy_ajp, couldn|
|49772|New|Nor|2010-08-18|mod_deflate kicks itself out on Content-Range resp|
|49798|Opn|Nor|2010-08-22|[mod_log_config] Piped Log scripts process cause w|
|49807|New|Enh|2010-08-23|hard to force Content-Type header for non static f|
|49810|New|Nor|2010-08-23|Mod_autoindex output of header/body/footer scrambl|
|49815|New|Enh|2010-08-24|Enable caching for HTTP Range requests / 206 respo|
|49829|New|Trv|2010-08-26|CGI index command line arguments excessively escap|
|49832|New|Enh|2010-08-26|void ap_custom_response is not supporting the bina|
|49859|Opn|Nor|2010-09-01|url with additional filepath generates bad environ|
|49921|New|Nor|2010-09-13|Trailers in chunked http requests are not handled |
|49926|New|Enh|2010-09-14|New option for mod_log_forensics or mod_log_config|
|49980|New|Nor|2010-09-22|can't use a FIFO for SSL key file; mod_ssl checks |
|49981|New|Enh|2010-09-22|Requesting SSLCertificateKeyFile Dialog functional|
|49990|New|Nor|2010-09-23|Feature request: implement ExpiresActive reset    |
|49996|New|Nor|2010-09-24|Proxied ErrorDocument returns 200 OK response code|
|49997|New|Nor|2010-09-24|wrowe promised me...                              |
|50004|New|Nor|2010-09-26|per-dir rewrite without DocumentRoot or RewriteBas|
|50011|New|Cri|2010-09-27|error running apache, and installing apache as a s|
|50024|New|Min|2010-09-29|Mod_cache/mod_mem_cache and mod_security combinati|
|50038|New|Enh|2010-10-01|What Directives apply to a file/directory? Resulta|
|50041|New|Min|2010-10-04|(9)Bad file descriptor: apr_socket_accept: (client|
|50051|New|Nor|2010-10-07|Log PID in first entry logged for each request    |
|50061|New|Nor|2010-10-08|Semicolon character '%3B' seems to be decoded to '|
|50082|New|Nor|2010-10-12|apachectl status returns incorrect exit code      |
|50112|New|Nor|2010-10-18|buildconf broken in two places                    |
|50116|New|Nor|2010-10-19|Apache fragments packets unnecessarily            |
|50151|New|Nor|2010-10-25|Software caused connection abort and apache proces|
|50155|Inf|Nor|2010-10-25|httpd -s attempts to read SSL certificates        |
|50172|Inf|Nor|2010-10-28|Digest allows access bypassing secuity            |
|50227|New|Enh|2010-11-07|Option to fail SSL handshake for diverted SNI conn|
|50237|Inf|Nor|2010-11-08|webdav LOCK access with multiple threads to same f|
|50261|New|Nor|2010-11-12|graceful restart with multiple listeners using pre|
|50262|New|Nor|2010-11-12|mod_rewrite log ip address vs hostname            |
|50274|New|Nor|2010-11-15|always pass CONTENT_LENGTH to the application     |
|50278|New|Nor|2010-11-16|-DFOREGROUND and ap_unixd_killpg()/ap_os_killpg() |
|50290|Inf|Nor|2010-11-18|vanilla apache 2.2.17 installation crashes (lib-ap|
|50296|New|Nor|2010-11-18|LDAPVerifyServerCert and possibly LDAPTrustedMode |
|50317|New|Nor|2010-11-22|Possible error in mod_cache's "Avoiding the Thunde|
|50336|New|Min|2010-11-25|PUT failures do not emit Allow:                   |
|50344|New|Nor|2010-11-26|ProxyPass does not handle different protocols when|
|50357|New|Enh|2010-11-28|improve matching mechanisms for mime type and enco|
|50372|New|Enh|2010-11-29|any reason for allowing ModMimeUsePathInfo only in|
|50390|New|Nor|2010-11-30|WARNING: Unrecognized options : --disable-ipv6    |
|50402|New|Nor|2010-12-02|SetEnv proxy-sendchunks is ignored for small amoun|
|50412|New|Nor|2010-12-04|if IndexOptions +XHTML, the correct MIME type shou|
|50423|Inf|Nor|2010-12-06|Apache is terminated with signal 11, Segmentation |
|50427|New|Nor|2010-12-07|Windows>=Vista+mod_auth_digest+command line=proble|
|50432|New|Enh|2010-12-08|add PCRE-mode for file based matches              |
|50436|New|Enh|2010-12-08|VirtualHost could behave like people expect it to |
|50444|New|Enh|2010-12-09|Pre-close logging handles in cgid agent           |
|50456|Inf|Nor|2010-12-10|Invalid Error 413 crash Apache                    |
|50464|New|Blk|2010-12-13|undefined reference to `BIO_set_callback' `BIO_set|
|50466|Inf|Maj|2010-12-13|httpd process doesn't recycle                     |
|50473|New|Maj|2010-12-14|zlib.dll Problem                                  |
|50521|New|Nor|2010-12-25|Comment at top of sample main config file is wrong|
|50525|New|Nor|2010-12-28|Header directive won't edit Location header from P|
|50530|New|Enh|2010-12-29|Provide rate limiting for failed authentication at|
|50532|New|Enh|2010-12-30|Mail protection                                   |
|50551|New|Nor|2011-01-06|Some proxied connections ignore ttl setting       |
|50562|Opn|Cri|2011-01-09|wrong PATH_INFO CGI environment with non-ASCII UTF|
|50584|New|Enh|2011-01-14|Add error message when RequestReadTimeout triggere|
|50592|New|Maj|2011-01-15|httpd dumps core on an IPv6 only system           |
|50602|New|Nor|2011-01-17|non thread safe functions used in apache httpd pro|
|50619|New|Min|2011-01-19|After changing resolv.conf signaling httpd doesn't|
|50628|New|Blk|2011-01-21|Core dump happens with Apache 2.2.15 using openssl|
|50630|New|Nor|2011-01-21|Apache return 500 error with authentication by LDA|
|50644|New|Enh|2011-01-24|Add support for maximum number of requests per Kee|
|50654|New|Nor|2011-01-25|FileETag ContentMD5 & Filename, optimisation to Co|
|50693|New|Nor|2011-01-31|AllowOverride Options=(not Foo) should permit no-o|
|50704|Inf|Nor|2011-02-01|mod_cache doesn't cache MultiViews                |
|50712|New|Maj|2011-02-02|Restart button only stops the server ...and do not|
|50727|New|Nor|2011-02-07|ISAPI EXTENSION_CONTROL_BLOCK Missing PostData wit|
|50765|New|Enh|2011-02-11|Runtime Backend Pinning via balancer-manager      |
|50770|New|Nor|2011-02-14|a rotatelogs issue, if time changed               |
|50773|Inf|Nor|2011-02-14|Dav lock database corruption                      |
|50774|New|Enh|2011-02-14|Have a way to invalidate cache without other reque|
|50777|New|Nor|2011-02-14|Back port buildconf specifies AC_PREREQ(2.13) fix |
|50796|New|Enh|2011-02-16|record time between keepalives in access log      |
|50807|New|Maj|2011-02-18|mod_proxy fails to send FIN response when a FIN is|
|50814|New|Nor|2011-02-21|SSI exec not working on Windows (Apache 2.x)      |
|50848|New|Enh|2011-03-01|Content Negotiation type map file precedence could|
|50869|New|Enh|2011-03-04|Need directive to control use and timeout of sessi|
|50873|New|Nor|2011-03-04|httpd does not start properly when built from sour|
|50878|New|Nor|2011-03-05|redundant operation when calling apr_stat         |
|50891|New|Nor|2011-03-08|Apache rewrites WWW-Authenticate headers from CGI |
|50902|Inf|Maj|2011-03-09|on major load on the server, poll() hangs         |
|50916|New|Nor|2011-03-11|RewriteMap program: mod_rewrite sends request but |
|50926|New|Nor|2011-03-14|unexpected <Directory> file-matching behavior     |
|50942|New|Maj|2011-03-17|Apache 2.2.16 forward proxy is 5x times slower tha|
|50945|Opn|Nor|2011-03-18|AJP: Missing support for ErrorOverride            |
|50948|Opn|Nor|2011-03-19|Connection not closed when CGI dies waiting for PO|
|50954|New|Nor|2011-03-21|ProxyRemote doesnt use CONNECT method with https s|
|50959|New|Enh|2011-03-23|Add cache-manifest to the mime type list          |
|50976|New|Nor|2011-03-26|Apache losts client's ip (%a or %h) sometimes.    |
|50999|Opn|Nor|2011-03-30|it seems the configure wrong detect my apr-util ve|
|51001|New|Nor|2011-03-31|patch for hook ap_lua_run_lua_open                |
|51005|New|Enh|2011-04-01|Allow to use username in LDAP filter              |
|51006|New|Blk|2011-04-01|Apache consume all memory and swap when setup as r|
|51019|New|Enh|2011-04-04|[PATCH] Implementation of Asynchronous processing |
|51020|Opn|Nor|2011-04-04|[PATCH] Apache/mod_fcgid.so does not start in comp|
|51022|New|Nor|2011-04-05|Segmentation fault on PUT request                 |
|51030|New|Enh|2011-04-06|Way to terminate CGI immediatly after closing conn|
|51078|Inf|Nor|2011-04-18|[PATCH] mod_fcgid spawned CGI Processes gets orpha|
|51079|New|Enh|2011-04-18|[PATCH] mod_fcgid spawned CGI Process cannot imper|
|51080|New|Nor|2011-04-18|[PATCH] mod_isapi does not support Except:100-Cont|
|51103|Opn|Nor|2011-04-21|mod_reqtimeout does not drop connection and return|
|51104|Opn|Maj|2011-04-21|C++ support about httpd_config.h                  |
|51107|New|Min|2011-04-22|SetOutputFilter and SetInputFilter should allow "n|
|51118|New|Nor|2011-04-26|LDAP cache is cleared after graceful/restart and o|
|51127|New|Nor|2011-04-27|Make ProxyPassReverseCookiePath work as expected  |
|51168|New|Nor|2011-05-08|mod_status Total Traffic won't take account of int|
|51170|New|Nor|2011-05-09|I/O errors when using keep-alive + mod_ssl        |
|51174|New|Min|2011-05-09|SSLRequire predicates using OIDs unknown to openss|
|51186|New|Blk|2011-05-11|NEw Openssl 1.0.1 with new FIPS                   |
|51190|New|Min|2011-05-12|::/0 does not work with allow from and deny from  |
|51194|New|Nor|2011-05-13|FcgidWrapper does not support paths containing a s|
|51201|Inf|Nor|2011-05-15|Strange behavior REQUEST_METHOD & GET in mod_rewri|
|51223|New|Nor|2011-05-18|304 HTTP Not Modified strips out CORS headers     |
|51224|New|Nor|2011-05-18|mod_dav_fs should respect FileETag                |
|51239|New|Nor|2011-05-21|ap_get_client_block may block continuously sometim|
|51257|New|Nor|2011-05-24|Build failed when cross-compiling: ./gen_test_char|
|51258|Opn|Enh|2011-05-24|new features for mod_substitute                   |
|51296|New|Enh|2011-05-31|Dynamic engine support using SSLCryptoDevice suppo|
|51297|New|Nor|2011-05-31|Improve error handling during "UNLOCK"            |
|51303|New|Nor|2011-05-31|TraceEnable 500 error                             |
|51312|New|Nor|2011-06-01|mod_filter should support adding to the Vary heade|
|51322|New|Enh|2011-06-04|Prepend and append string to LDAP search parameter|
|51359|Inf|Enh|2011-06-11|Added shebang check for //! so that .js scripts wo|
|51365|New|Nor|2011-06-13|Mod_proxy mangles query string with mod_security  |
|51402|New|Nor|2011-06-21|"ForceLanguagePriority Fallback" not working as im|
|51406|New|Maj|2011-06-21|When listing files in subdirectories, the path is |
|51409|New|Nor|2011-06-21|Sorting options accepted by ls, but ignored       |
|51471|New|Nor|2011-07-04|<DirectoryMatch>ed IndexIgnore doesn't            |
|51479|New|Enh|2011-07-05|[PATCH] AB feature to optionally read in a reusabl|
|51491|New|Nor|2011-07-08|mod_dir breaks POSTs to URLs not ending in /      |
|51495|New|Nor|2011-07-11|mod_substitute cpu and memory limit               |
|51517|New|Maj|2011-07-16|mod_proxy_fcgi is not RFC 3875 compliant (SCRIPT_F|
|51522|Ver|Trv|2011-07-18|Wrong French translation in mpm.html ("Certains Mo|
|51542|New|Nor|2011-07-22|Apache HTTP Server vs PVS-Studio                  |
|51543|New|Nor|2011-07-22|Space in username not properly escaped in log file|
|51552|Inf|Cri|2011-07-25|Apache is not starting (2.2.15)                   |
|51573|New|Enh|2011-07-28|Easy way to erase log files                       |
|51576|Inf|Nor|2011-07-28|mod_rewrite rule stopped working                  |
|51600|New|Enh|2011-08-02|Loading the same certificate in multiple virtual h|
|51603|Inf|Maj|2011-08-02|Apache accepts completely bogus HTTP requests (pos|
|51607|Inf|Nor|2011-08-03|DBDPrepareSQL ( ap_dbd_prepare ) does not work cor|
|51629|New|Nor|2011-08-05|DocumentRoot check incorrect when running under ch|
|51674|New|Blk|2011-08-18|AJP Module Bad Request                            |
|51679|New|Min|2011-08-18|Code signature key expired                        |
|51689|New|Trv|2011-08-19|Cross compiling causes multiple Listen directives |
|51695|New|Trv|2011-08-20|Code clean up (ap_rputs merge)                    |
|51707|New|Nor|2011-08-22|ProxyPassReverse issues within <Location> (differe|
|51709|New|Nor|2011-08-23|ServerName/ServerAlias don't work if Host: header |
|51711|New|Nor|2011-08-23|mod_auth_digest have broken shared mem (nonce) cod|
|51718|New|Enh|2011-08-24|Feature Request: Add shorthand to redirect any Ser|
|51725|New|Nor|2011-08-26|Multiple Range: request accepted as "Range: n-m"  |
|51732|New|Nor|2011-08-29|Inconsistencies in log messages' verbosity levels |
|51747|New|Blk|2011-08-31|mod_fcgid loads entire request into memory while p|
|51757|Inf|Enh|2011-09-02|Add support for SASL auth in LDAP                 |
|51778|Inf|Cri|2011-09-07|while buliding(make) a unix source "httpd-2.2.20.t|
|51797|Inf|Maj|2011-09-10|Crash HTTPD(Windows)                              |
|51814|New|Enh|2011-09-14|mod_proxy in Apache HTTP 2.2 FIN_WAIT2 in server s|
|51858|Inf|Nor|2011-09-21|weird error for mod_rewrite with more then 3 param|
|51864|New|Nor|2011-09-22|mod_cache returns entire entity from origin server|
|51904|New|Nor|2011-09-28|output to stderr from cgi script causes script to |
|51951|New|Nor|2011-10-04|mod_mbox hang on some e-mails on press@a.o - was I|
|51964|Ver|Nor|2011-10-05|Documentation of RewriteRule flag skip unclear    |
|51965|New|Nor|2011-10-05|--with-z=DIR not being honored                    |
|51982|Opn|Nor|2011-10-06|ProxyPassReverse / balancer://cluster/ adds slash |
|51987|Inf|Nor|2011-10-07|RewriteRule doesn't work correctly with apache 2.3|
|51994|New|Enh|2011-10-07|Mod_authn_socache should have some way to flush th|
|52004|Ver|Trv|2011-10-10|Typo "indexe" in French translation of mpm.html   |
|52007|New|Nor|2011-10-10|Content-Length: 0 not set on proxy response       |
|52038|New|Nor|2011-10-16|NameWidth works incorrectly together with Charset=|
|52039|Inf|Nor|2011-10-16|Browser mode does not always work                 |
|52043|New|Nor|2011-10-17|Directories ".", "..", and "/" do not work correct|
|52081|New|Nor|2011-10-24|segfault if mbox files have unexpected names      |
|52090|New|Maj|2011-10-26|Apache thread hangs with error 500 when sending a |
|52120|Opn|Nor|2011-11-01|mod_cache edge case: uncacheable 304 sends cached |
|52123|New|Maj|2011-11-02|DoS: High memory usage in propfind                |
|52132|New|Nor|2011-11-03|[PATCH] process activity score calculated incorrec|
|52139|New|Nor|2011-11-05|Never Syntax Error on non-existent DocumentRoot   |
|52171|Ver|Nor|2011-11-13|confusing documentation of request phases         |
|52174|New|Enh|2011-11-13|Allow hard lower-limits on the number of fcgi serv|
|52178|New|Nor|2011-11-14|IPv6 IPs as ServerName not allowed                |
|52181|Ver|Nor|2011-11-14|mod_rewrite Technical Details Ruleset Processing d|
|52195|Inf|Nor|2011-11-16|Japanese texts are garbled on mailing list archive|
|52196|Inf|Nor|2011-11-16|winnt mpm, others mpm also have this bug. pool sha|
|52207|Inf|Maj|2011-11-18|Upgrade apache version from 2.0.59 to 2.2.12 or ab|
|52222|New|Nor|2011-11-21|IndexIgnore ignores parent directories in argument|
|52247|New|Nor|2011-11-26|mod_mbox gives up on unexpected message format    |
|52248|New|Nor|2011-11-26|Bugzilla version drop-down list does not offer "un|
|52252|New|Nor|2011-11-27|luajit support broken for (at least) luajit 2.0   |
|52253|Inf|Nor|2011-11-28|Timeout doesn't work. mod_proxy_balancer strongly |
|52264|New|Enh|2011-11-30|Update and complete balancer-manager XML output   |
|52269|Inf|Nor|2011-12-01|[mod_proxy] Apache reverse proxy status code trans|
|52275|New|Nor|2011-12-02|memory leak in proxy_ajp_handler                  |
|52298|Inf|Nor|2011-12-07|Can't enter website with client certificate on an |
|52301|New|Enh|2011-12-07|Error message "RSA server certificate ... CN ... d|
|52302|New|Enh|2011-12-07|Better documentation of how server name is determi|
|52304|New|Nor|2011-12-08|<Limit> Does Not Apply When URI Is Folder         |
|52313|New|Enh|2011-12-09|htdbm enhancement: options for colon-in-username, |
|52322|Inf|Enh|2011-12-13|Providing BBC developed httpd modules for inclusio|
|52342|New|Nor|2011-12-15|ap_internal_redirect dropping filters means incons|
|52370|New|Nor|2011-12-19|apreq_decode/url_decode length miscalculation     |
|52377|New|Enh|2011-12-20|Add Directives to assert user, group, and permissi|
|52383|New|Trv|2011-12-24|Instllation log typo                              |
|52391|New|Cri|2011-12-27|100% CPU usage while using Forward Proxy          |
|52395|New|Nor|2011-12-29|reload results in different end environment to res|
|52403|New|Nor|2011-12-31|FallbackResource doesn't work for non-existent PHP|
|52408|New|Nor|2012-01-01|Directoryindex matching automatically redirects   |
|52415|New|Nor|2012-01-03|LockFile placed inappropriately                   |
|52417|New|Nor|2012-01-03|HEADERS information in the file                   |
|52435|New|Nor|2012-01-06|Apache shutdown automatically                     |
|52439|New|Nor|2012-01-09|It should be possible to treat errors in .htaccess|
|52453|New|Enh|2012-01-11|Ability to configure --logfiledir                 |
|52465|New|Nor|2012-01-13|mod_dir is allowed to redirect proxy requests     |
|52481|New|Nor|2012-01-18|Rotatelog.exe crashes Apache after setting 256MB r|
|52485|New|Nor|2012-01-19|CPU load 100%                                     |
|52494|New|Enh|2012-01-22|allow the Action directive to point in the filesys|
|52495|New|Enh|2012-01-22|CACertificate, CADNCertificate, CARevocation, Cert|
|52501|New|Cri|2012-01-23|child pid 10824 exit signal Segmentation fault (11|
|52505|New|Nor|2012-01-23|Include with directory wildcards gives errors for |
|52509|New|Nor|2012-01-23|Resources protected by .htaccess file may not be a|
|52510|New|Cri|2012-01-23|Segmentation Fault 11                             |
|52520|New|Nor|2012-01-24|ProxyRemote & NoProxy directive can not take IPv6 |
|52532|New|Trv|2012-01-26|VirtualHost added TWICE to name-virtual-host list |
|52539|New|Nor|2012-01-26|Apache mod_dav 400 Bad Request for non-existent co|
|52546|New|Nor|2012-01-27|overwrite SERVER_PROTOCOL environment             |
|52573|New|Nor|2012-02-01|mod_speling case correction fails when URI has dou|
|52578|Opn|Enh|2012-02-02|Wrong "bytes sent" logged when connection is close|
|52594|New|Nor|2012-02-03|rpmbuild -ba errors out with "File not found by gl|
|52595|New|Nor|2012-02-03|requests with gzip+chunked encoded body don't prox|
|52605|Inf|Min|2012-02-05|Please allow request lines longer than 8k         |
|52612|New|Nor|2012-02-06|Default Service Account                           |
|52616|Opn|Enh|2012-02-07|SSLUserName uses SSL_CLIENT_S_DN insted of SSL_CLI|
|52617|New|Maj|2012-02-07|Visit the rewrite page from ServerAlias domain vho|
|52623|New|Nor|2012-02-08|does not build with pcre-8.30                     |
|52644|New|Nor|2012-02-12|document how SSL FakeBasicAuth works with strange |
|52668|New|Trv|2012-02-14|More future safe patch for old MSIE ssl-unclean-sh|
|52670|New|Trv|2012-02-15|please clarify the effect of SSLStrictSNIVHostChec|
|52683|New|Enh|2012-02-16|add a symlink option that rechecks the access perm|
|52700|Inf|Blk|2012-02-17|Not rendering html content instead displaying clie|
|52703|Inf|Maj|2012-02-18|SSL+SNI+client-auth "lost" after some time        |
|52710|New|Nor|2012-02-19|mod_fcgid should set PATH_INFO when configured in |
|52756|Inf|Trv|2012-02-24|proxy_html_module LoadModule line not created in h|
|52759|New|Cri|2012-02-24|Apache httpd child process consuming high CPU Util|
|52790|New|Nor|2012-02-28|ldap caching not sufficient                       |
|52795|Opn|Nor|2012-02-29|mod_fcgid fails to spawn process in C:\Program Fil|
|52806|New|Nor|2012-03-01|configure: --with-included-apr is not supported in|
|52807|New|Nor|2012-03-01|some random strings are accepted by "configure" as|
|52816|New|Nor|2012-03-03|Potential segfault in socache_shmcb_create        |
|52817|New|Nor|2012-03-03|Long directory path sucks (but it's really a valid|
|52822|New|Nor|2012-03-04|Quiet installation not fully quiet                |
|52824|Inf|Nor|2012-03-04|Conflicts between AllowOverride and AllowOverrideL|
|52828|New|Maj|2012-03-05|Child process is not replaced in Windows, after a |
|52832|New|Nor|2012-03-05|numerical configuration entry can be mistakenly in|
|52841|Opn|Nor|2012-03-06|[proxy_balancer:emerg] [pid 25593] AH01177: Failed|
|52851|New|Nor|2012-03-07|Core TimeOut directive doesn't work               |
|52860|New|Enh|2012-03-08|Support Transfer-Encoding: gzip                   |
|52865|New|Nor|2012-03-09|Crash by segmentation fault in mod_authn_core in A|
|52870|New|Cri|2012-03-09|100% CPU usage while using Forward Proxy          |
|52874|New|Enh|2012-03-09|Support Use TrustedFirst checking when verifying c|
|52884|New|Nor|2012-03-12|"localhost" leads to start failure                |
|52890|Inf|Nor|2012-03-12|--with-included-apr doesn't work when srclib/apr a|
|52891|New|Nor|2012-03-12|2.2 doesn't perform as well as 1.3                |
|52894|Inf|Nor|2012-03-13|Apache aborts abnormally when ChrootDir is set    |
|52927|Inf|Nor|2012-03-16|[Bug in httpd 2.2.4] [error] (70014)End of file fo|
|52933|New|Nor|2012-03-17|Child survives '-k stop', consuming lots of CPU   |
|52950|New|Nor|2012-03-20|Error when set AuthType to None with valid-user   |
|52963|New|Nor|2012-03-21|Typo in AuthLDAPURL RFC 2255 error message        |
|52975|New|Nor|2012-03-23|Receiving files is suboptimal                     |
|52976|New|Min|2012-03-23|Gratuitous string-duplication in module-configurat|
|52978|New|Enh|2012-03-23|Binding to an interface instead of an address     |
|52995|New|Nor|2012-03-28|httpd -V does not print the default Mutex         |
|53002|New|Nor|2012-03-29|<Location> and auth_form (trailing slash problem?)|
|53015|New|Nor|2012-03-31|missing apr_socket_close                          |
|53016|New|Nor|2012-03-31|missing apr_brigade_destroy                       |
|53023|New|Nor|2012-04-02|mod_rewrite RewriteCond parser error and documenta|
|53037|New|Enh|2012-04-05|clarify mod_ssl documentation on the UID/GID conte|
|53059|New|Nor|2012-04-10|Make httpd easier relocatable by using a variable |
|53098|New|Nor|2012-04-18|mod_proxy_ajp: patch to set worker secret passed t|
|53099|New|Enh|2012-04-18|feature request for mod_remoteip                  |
|53108|New|Enh|2012-04-19|clarification on url-path vs full filesystem path |
|53111|New|Nor|2012-04-20|1% of CMS sites expose database passwords         |
|53121|New|Nor|2012-04-22|Confusing documentation, gzip and deflate         |
|53149|New|Enh|2012-04-25|mod_ldap should/could use mod_socache             |
|53152|Opn|Nor|2012-04-26|RewriteRule documentation: Error about per-directo|
|53156|New|Enh|2012-04-27|CRL validation fails if CRL is missing            |
|53160|New|Cri|2012-04-29|Reverse Proxy mod_deflate doesn't zip back content|
|53183|New|Min|2012-05-03|mod_apreq2 entry point is apreq_module and not apr|
|53193|New|Nor|2012-05-04|SLVerifyClient optional_no_ca + SSLSessionCache = |
|53218|New|Blk|2012-05-11|ProxyPass worker name(http://localhost:3128/...|
|53233|New|Maj|2012-05-15|Internal error: proxy: error reading status line f|
|53239|New|Maj|2012-05-16|Httpd has problems delivering data on rate-limited|
|53253|New|Maj|2012-05-17|TCP_NOPUSH used with sendfile(2), cause transfers |
|53284|New|Nor|2012-05-24|crash                                             |
|53290|New|Maj|2012-05-24|memory usage                                      |
|53292|New|Min|2012-05-25|add support for HTTP status code 308              |
|53305|New|Nor|2012-05-28|404 errors when adding query string in a balancer |
|53313|New|Nor|2012-05-28|SSI #echo VAR fails (#include OK) if URI/URL has f|
|53319|New|Nor|2012-05-29|Multiple DirectoryIndex statements in the same con|
|53332|New|Nor|2012-05-30|Requests with chunked encoding have no body availa|
|53350|New|Nor|2012-06-01|mod_cache caching 403 responses Apahce 2.2.22     |
|53351|New|Nor|2012-06-02|make fails if layout begins on first line of confi|
|53388|Opn|Nor|2012-06-08|mod_proxy_balanser generates 503 when proxying to |
|53402|New|Trv|2012-06-12|Incorrect error message for mod_ldap params       |
|53461|Inf|Cri|2012-06-23|Compilation problems                              |
|53462|New|Nor|2012-06-25|mod_rewrite does not remove trailing slash when as|
|53479|New|Nor|2012-06-27|mod_rewrite [B] flag should percent-encode the spa|
|53483|New|Enh|2012-06-29|dangerous PCRE patterns in *Match directives      |
|53539|New|Maj|2012-07-12|content type and character set are changing when t|
|53554|New|Nor|2012-07-16|Wrong case for hexadecimal percent encoding [patch|
|53555|New|Maj|2012-07-17|Scoreboard full error with event/ssl              |
|53579|New|Cri|2012-07-20|httpd looping writing on a pipe and unresponsive (|
|53581|New|Blk|2012-07-21|FollowSymlinks doesn't work with DirectoryMatch an|
|53594|New|Enh|2012-07-24|ipad as webserver                                 |
|53595|New|Nor|2012-07-24|Media type qs parameters for MultiViews sent in Co|
|53612|Inf|Nor|2012-07-27|Reverse Proxy causing 500 error SSL proxy 1.0.1c O|
|53618|New|Nor|2012-07-29|proxy_worker_shared fields not maintained in threa|
|53634|New|Nor|2012-08-01|mod_cache returning HTTP 200 for nonexistent resou|
|53638|New|Nor|2012-08-02|Problem with shortcuts to bugzilla in http://httpd|
|53640|Inf|Maj|2012-08-02|make: Fatal error: Command failed for target `htpa|
|53643|New|Cri|2012-08-02|apache segfaults with mod_authn_dbd when dbd_min i|
|53646|New|Nor|2012-08-02|Invalid uniformly distributed balancing of request|
|53651|New|Nor|2012-08-03|Worker failure doesn't have same behaviour as work|
|53667|New|Enh|2012-08-07|Add an equivalent option to "JkOptions ForwardLoca|
|53669|New|Nor|2012-08-07|IndexOptions Incremental IndexOptions documentatio|
|53686|New|Enh|2012-08-09|Status "501 Not Implemented" sent very late       |
|53690|New|Nor|2012-08-09|Calls to semctl() trigger "uninitialized memory" w|
|53692|New|Nor|2012-08-10|mod_auth_form loses request body before login page|
|53693|Opn|Nor|2012-08-10|mod_fcgid performance suffers under increase in re|
|53704|New|Enh|2012-08-13|True online configuration is needed - via LDAP?   |
|53705|New|Nor|2012-08-13|Align server-status balancer display to balancer-m|
|53706|New|Enh|2012-08-13|Include a status display for mod_ldap when present|
|53722|New|Nor|2012-08-15|when -D NO_DETACH is used, no PID file should be c|
|53736|New|Nor|2012-08-17|/balancer-manager doesn't save runtime adjusted se|
|53757|New|Enh|2012-08-21|RewriteMap of type txt should allow specifying col|
|53767|New|Nor|2012-08-23|htcacheclean deletes stale "vary" header files eve|
|53772|New|Nor|2012-08-24|REDIRECT_URL not accessible in mod_proxy          |
|53787|New|Reg|2012-08-28|In forward proxy, doesn't cache disk anymore      |
|53823|New|Nor|2012-09-03|[patch] pure IPv6 only host fix (server/config.c) |
|53835|New|Cri|2012-09-06|mod_proxy_ajp truncate output when using deflate i|
|53870|New|Maj|2012-09-13|Deadlock in CRYPTO_add_lock with Apache 2.2.22 wor|
|53886|New|Nor|2012-09-18|can't start apache control in Redhat Linux 3 X64  |
|53899|New|Nor|2012-09-19|SSL_OP_ALL disables the mitigation code for CVE-20|
|53915|New|Nor|2012-09-21|Colon lost when :port is used in CacheKeyBaseURL  |
|53919|Inf|Enh|2012-09-21|DEFAULT_LOG_FORMAT is not RFC6302 compliant       |
|53923|New|Min|2012-09-23|Overriding CustomLog directive seems impossible   |
|53932|New|Nor|2012-09-25|PROPFIND doesn't support If, If-Match ETag predica|
|53947|New|Enh|2012-09-29|Feature Request, RewriteRule - ProxyPreserveHost f|
|53961|New|Nor|2012-10-04|Null sessions to the default vhost                |
|53970|New|Nor|2012-10-05|Network control directives affects internal subreq|
|53981|New|Nor|2012-10-08|move def of log_request_state from mod_log_config.|
|53988|New|Enh|2012-10-10|Missing FCGIWrapper script should not be a critica|
|53999|Opn|Nor|2012-10-13|Deadlock between procmgr_send_spawn_cmd()/proctabl|
|54030|New|Enh|2012-10-19|Support subjectAltName when (reverse-)proxying    |
|54033|New|Enh|2012-10-21|Parent languages are not ordered according to Acce|
|54072|New|Reg|2012-10-30|Syntax error front-end virtual-path too long      |
|54102|New|Enh|2012-11-05|new feature: automatic route detection            |
|54118|New|Nor|2012-11-08|Handle leak on parent httpd process when rotatelog|
|54126|New|Maj|2012-11-09|Mod_rewrite failing because of url in query string|
|54134|New|Enh|2012-11-11|new feature: ability to use multiple routes in sti|
|54136|New|Min|2012-11-11|balancer-handler shows xml not, when only xml para|
|54158|New|Nor|2012-11-16|Suggestion regarding 2.0 to 2.2 Upgrade Documentat|
|54183|Inf|Nor|2012-11-21|PROPFIND doesn't report getcontenttype property   |
|54215|New|Maj|2012-11-27|configure fails for httpd 2.2.3 with openssl 1.0.1|
|54221|Opn|Nor|2012-11-28|no ErrorLog prefix on CGI errors                  |
|54222|New|Min|2012-11-28|ServerTokens checking is not complete             |
|54223|New|Nor|2012-11-29|AH00554 error when runtime configuration Includes |
|54252|New|Nor|2012-12-05|acinclude.m4 requires -lz when linking with ssl st|
|54253|New|Nor|2012-12-05|mod_proxy_ftp doesn't handle/log partial or cancel|
|54255|New|Nor|2012-12-06|mod_deflate adjusts the headers "too late", should|
|54269|New|Maj|2012-12-09|mod_proxy_html documentation misses several things|
|54276|New|Nor|2012-12-10|rotatelogs not getting killed on graceful restart |
|54280|New|Nor|2012-12-11|mod_auth_form inline login not working with traili|
|54281|New|Nor|2012-12-11|Stick use Partial parameters from query string    |
|54289|New|Nor|2012-12-13|"ap_get_brigade" api is failing in "AP_MODE_SPECUL|
|54306|New|Enh|2012-12-15|add regexp versions of ProxyPassReverse, ProxyPass|
|54309|New|Trv|2012-12-15|clarification on the <Location> directive when use|
|54310|Opn|Nor|2012-12-15|mod_proxy_html drops meta elements with http-equiv|
|54319|New|Reg|2012-12-17|ProxyPass has no effect in <Location> if rewrite o|
|54339|New|Nor|2012-12-21|piped log entries > PIPE_BUF can be interleaved   |
|54342|New|Nor|2012-12-22|AuthnCacheSOCache can't pass args to socache provi|
|54343|New|Maj|2012-12-22|Add sanity checks for malloc() in mpm_winnt.c and |
|54358|New|Nor|2012-12-29|Status 500 when using ldap on Solaris because apr_|
|54363|New|Nor|2012-12-31|make time conversion caching functions thread-safe|
|54364|New|Nor|2012-12-31|Add ref to mod_fcgid docs                         |
|54365|New|Nor|2013-01-02|Connection closed by server during file transfer  |
|54366|New|Nor|2013-01-02|$sysconfdir/extra/httpd-dav.conf is not built base|
|54367|Opn|Maj|2013-01-02|Location header in response to PUT is not %-escape|
|54385|New|Enh|2013-01-08|SSL configuration independent from virtual hosts, |
|54401|New|Nor|2013-01-10|Suggest to make ProxyPassReverseCookieDomain accep|
|54415|New|Enh|2013-01-14|Please tell the root cause of mutex and scoreboard|
|54431|Inf|Blk|2013-01-16|Unable to start the Apache 2.4.3 windows service. |
|54498|New|Nor|2013-01-28|apache crash on any cgi request with certain http |
|54502|New|Nor|2013-01-29|Apache deadlock on epoll_ctl error (1000 process l|
|54512|Inf|Cri|2013-01-31|Apache hung                                       |
|54517|New|Nor|2013-02-01|proxy balancer: timeout or partial failure of back|
|54518|New|Nor|2013-02-01|mod_rewrite not adding Vary header                |
|54519|New|Nor|2013-02-02|httpd already running                             |
|54526|New|Nor|2013-02-05|mod_proxy_http ignores request abortion           |
|54543|New|Enh|2013-02-10|Compile regex only when need                      |
|54546|New|Nor|2013-02-11|httpd crashes on first HUP after change Listen dir|
|54549|New|Nor|2013-02-11|mod_mime AddEncoding and mod_negotiation fix_encod|
|54556|New|Enh|2013-02-13|New flag to add default rule in rule chain        |
|54560|New|Nor|2013-02-13|Potential segfault on return from ap_server_root_r|
|54563|New|Maj|2013-02-15|mod_webdav ignores quota                          |
|54578|New|Nor|2013-02-18|Bad docs or unchecked code for "LimitRequestFields|
|54605|New|Enh|2013-02-24|mod_negotiation should cache the info it generates|
|54608|New|Enh|2013-02-25|Support an option to allow page caching when using|
|54622|New|Nor|2013-02-28|shared memory cleanup                             |
|54626|New|Nor|2013-03-01|mod_authnz_ldap through util_ldap.c does not suppo|
|54633|New|Nor|2013-03-04|Invalid % encoding not rejected                   |
|54637|New|Nor|2013-03-05|Digest: secret not used                           |
|54640|New|Nor|2013-03-05|Slow transaction on a balance member is holding su|
|54649|New|Nor|2013-03-06|Incorrect PIDFILE prevent httpd restart           |
|54653|New|Min|2013-03-08|Suggestion to add https example for forward proxy |
|54656|New|Maj|2013-03-09|SNI and SSLProxyCheckPeerCN based on "connection" |
|54657|New|Nor|2013-03-09|DNS lookup failure for load balancer member does n|
|54683|New|Min|2013-03-13|Ignor directive ErrorDocument with null byte      |
|54699|Opn|Enh|2013-03-15|[feature request] cli webaccess tester            |
|54701|New|Cri|2013-03-15|Apache 2.4.3 Migration Issue Not loading the pages|
|54704|New|Nor|2013-03-15|Web Services stalling on it's own                 |
|54719|New|Nor|2013-03-18|httpd should check for and eventually create pid f|
|54752|New|Nor|2013-03-25|mod_ssl should not use uninitialized memory as ran|
|54782|New|Nor|2013-04-02|Memory Corruption errors - mpm_worker mod_perl    |
|54785|New|Nor|2013-04-02|Random crash when httpd server is stopped         |
|54793|New|Nor|2013-04-03|Socket timeout handler can delete uploaded files P|
|54794|New|Reg|2013-04-03|mod_wsgi|fcgid and subversion >= 1.7 issues       |
|54795|New|Nor|2013-04-03|'apxs -g -n' should be self-referring             |
|54796|Inf|Enh|2013-04-03|CustomLog should be able to use syslog as ErrorLog|
|54804|New|Nor|2013-04-05|mod_fcgid sends a Continue 100 response automatica|
|54813|New|Nor|2013-04-08|documnt the Require args used by authz_dbm includi|
|54816|Inf|Nor|2013-04-08|AH00566: request failed: invalid characters in URI|
|54817|New|Nor|2013-04-09|if prefix and sysconfdir are the same then http.co|
|54820|Inf|Cri|2013-04-09|REwriterule stops working                         |
|54824|New|Nor|2013-04-10|Spec file is missing libuuid-devel requirement    |
|54830|New|Enh|2013-04-11|Make SSLPProxyMachineCertificateFile configurable |
|54848|New|Nor|2013-04-15|Client field too short for IPv6 addresses         |
|54856|Inf|Enh|2013-04-17|NSCreateObjectFileImageFromFile                   |
|54858|New|Nor|2013-04-17|ld duplicate                                      |
|54861|New|Blk|2013-04-18|The number of connections with mysql is more      |
|54869|Inf|Nor|2013-04-19|Non-breaking space characters cause httpd to choke|
|54875|New|Nor|2013-04-23|Conditional request predicated on another URL's ET|
|54878|New|Nor|2013-04-23|Multiple Listen directives prevent server to start|
|54905|Inf|Cri|2013-04-29|Apache2 loops in child Segfaults                  |
|54910|New|Enh|2013-04-30|Format %{Foobar}o cannot be used to log Date and S|
|54911|New|Enh|2013-04-30|Allow logging of fields set by a backend server in|
|54914|New|Nor|2013-04-30|mod_dir DirectoryIndex breaks WebDAV PROPFIND / DE|
|54915|New|Nor|2013-04-30|GET on a WebDAV-enabled collection, with Directory|
|54918|New|Enh|2013-05-02|Implement RFC 6797 HTTP Strict Transport Security |
|54919|Inf|Nor|2013-05-02|*** glibc detected *** /usr/sbin/httpd: double fre|
|54930|New|Nor|2013-05-06|Allow empty message in ErrorDocument directive    |
|54934|Inf|Cri|2013-05-07|Apache is crashing intermittently with a message "|
|54936|New|Nor|2013-05-08|Some potential bugs reported by static analysis to|
|54949|New|Nor|2013-05-10|[PATCH] mod_cache: fix uninitialized tmppath varia|
|54952|Inf|Cri|2013-05-10|[Fri May 10 17:39:01 2013] [error] proxy: CLUSTER:|
|54953|New|Nor|2013-05-11|<VirtualHost 0.0.0.0:80> matches IPv6             |
|54958|New|Nor|2013-05-13|mod_deflate + mod_mime with SSI gives mixed compre|
|54962|New|Maj|2013-05-14|Apache will set incorrect Content-Length header an|
|54965|New|Enh|2013-05-14|Allow ProxyPassMatch in Directory context         |
|54976|New|Nor|2013-05-15|ProxyPass parameter "acquire" and "ttl" ignored in|
|54986|New|Maj|2013-05-16|httpd hanging on large form submit in ap_run_handl|
|54989|New|Nor|2013-05-17|Apache Segfaults on OS X at random - how can I dia|
|54993|New|Nor|2013-05-20|Critical error: File descriptor in bad state: apr_|
|54998|Ver|Nor|2013-05-21|Apache 2.4 terminates all SSL connections using an|
|55000|New|Nor|2013-05-21|Memory usage per process doubles when Apache is co|
|55021|New|Enh|2013-05-28|Support arbitrary sql to authentication username/p|
|55022|Inf|Cri|2013-05-28|child pid 3123 exit signal Bus error (10) - Apache|
|55034|Inf|Maj|2013-05-31|Apache 2.4.4 won't open more that 32k VH file hand|
|55039|New|Enh|2013-05-31|"RequestHeader edit" can't access environment vari|
|55045|New|Nor|2013-06-01|calls to gets() in test_find.c and test_parser.c  |
|55068|New|Enh|2013-06-06|root permissions when writing to per vhosts errorl|
|55069|New|Min|2013-06-06|notice message in error_log even when LogLevel err|
|55070|Opn|Enh|2013-06-06|mod_fcgid stderr always goes to main error log    |
|55072|New|Nor|2013-06-07|ErrorLog doesn't work well when apache shutdown   |
|55093|New|Nor|2013-06-12|[PATCH] mod_fcgid 2.3.7 truncates large posts on R|
|55096|New|Nor|2013-06-12|Make not running on httpd configure Solaris       |
|55098|New|Nor|2013-06-13|does not listen to IP4 when both IP4 address and I|
|55106|New|Enh|2013-06-17|ProxyErrorOverride considers response codes >= 400|
|55117|New|Nor|2013-06-18|GracefullTimeout for worker threads               |
|55148|Inf|Nor|2013-06-26|Error during SSL Handshake with remote server     |
|55152|New|Nor|2013-06-28|graceful restart adjusts to new balancer members, |
|55156|New|Nor|2013-06-28|mod_cache not respecting s-maxage cache-control he|
|55178|New|Nor|2013-07-01|[PATCH] mod_authnz_ldap SASL authentication suppor|
|55192|New|Trv|2013-07-03|htaccess error messages missing request context   |
|55193|New|Min|2013-07-03|ErrorLogFormat is ignored by some modules         |
|55226|New|Enh|2013-07-09|Request for "domain cluster" feature for mod_proxy|
|55234|New|Maj|2013-07-10|Working of attribute "protocol" attribute "protoco|
|55276|Inf|Enh|2013-07-17|Add REST API for load balancer for dynamic registr|
|55278|New|Nor|2013-07-18|mod_session's cookie may be empty, is repeated twi|
|55284|New|Nor|2013-07-20|repeatable segv                                   |
|55286|New|Nor|2013-07-21|Floating point exception (8) in mod_auth_digest   |
|55293|New|Nor|2013-07-22|Incorrect default MIME type for .woff fonts       |
|55306|New|Nor|2013-07-25|Error when copying svn repository, which contains |
|55323|New|Nor|2013-07-29|Double unescaped uri in sub request handler       |
|55327|New|Nor|2013-07-30|Segmentation fault when stopping Apache 2.4.6 norm|
|55340|New|Maj|2013-08-01|Listen for valid, unconfigured IP address passes c|
|55344|New|Nor|2013-08-02|missing ap_hook_monitor on windows                |
|55346|New|Nor|2013-08-02|When on filled quota filesystem, mod_fcgid init in|
|55348|New|Nor|2013-08-02|%h is not changed in logging, only %a             |
|55351|New|Enh|2013-08-04|allow ProxyPassReverseCookieDomain to automaticall|
|55362|New|Nor|2013-08-05|Apache httpd sends "400 Bad Request" to client due|
|55379|New|Min|2013-08-07|htdigest -c doesn't behave as described anymore   |
|55394|New|Nor|2013-08-09|apache 2.4 randomy crashes with signal 6          |
|55401|New|Enh|2013-08-11|document that force-proxy-request-1.0 implies prox|
|55415|New|Maj|2013-08-14|Proxy loop caused by ProxyErrorOverride and ErrorD|
|55431|New|Nor|2013-08-16|mod_negotation does not force the mime type listed|
|55433|New|Nor|2013-08-16|mod_proxy ignores final status code for aborted re|
|55443|Inf|Maj|2013-08-17|never gives 300 multiple choices                  |
|55445|New|Maj|2013-08-18|mod_socache_memcache ignores expiry, creating eter|
|55447|New|Enh|2013-08-18|make type-maps usable again, by making them access|
|55448|New|Nor|2013-08-19|segfault in set_max_workers at event.c:3194 on SIG|
|55449|New|Maj|2013-08-19|AH01185: worker slotmem_create failed --> slotmem |
|55452|New|Maj|2013-08-19|Redirect                                          |
|55458|New|Enh|2013-08-20|allow to configure what mod_ssl responds when one |
|55460|New|Enh|2013-08-21|allow service names to be used in the Listen direc|
|55467|New|Nor|2013-08-21|Support for OpenSSL custom TLS extensions and supp|
|55523|New|Trv|2013-09-04|auth_groupfile error log on access even though suc|
|55535|Inf|Nor|2013-09-08|incorrect check state parametr                    |
|55540|New|Cri|2013-09-09|mod_proxy gzip chunked issue (sample site provided|
|55549|New|Min|2013-09-11|AuthLDAPSubGroupAttribute doesn't do anything     |
|55550|New|Nor|2013-09-11|AuthLDAPSubGroupClass checking is very inefficient|
|55556|New|Nor|2013-09-13|apachebench (ab) doesn't use so_reuseaddr         |
|55557|New|Nor|2013-09-14|Some cppcheck reports                             |
|55573|New|Enh|2013-09-19|FileETag needs MTimeSeconds, MTime with granularit|
|55581|New|Enh|2013-09-22|Support concurrent connections to same FastCGI pro|
|55590|Inf|Maj|2013-09-24|second commit is failing if space is in file name |
|55596|New|Enh|2013-09-25|Add date format used by Expires header            |
|55607|New|Enh|2013-09-28|Re-set HOME environment variable to directory from|
|55615|New|Nor|2013-09-30|Connections are starved and not balanced when conc|
|55619|New|Nor|2013-10-02|Apache httpd reported 500 internal error when uplo|
|55627|New|Min|2013-10-04|Remove unnecessary APLOGNO() for trace logging per|
|55636|Inf|Cri|2013-10-07|long lost child came home - Apache is not respondi|
|55646|Inf|Nor|2013-10-10|non-2xx responses are not considered errors       |
|55654|New|Nor|2013-10-15|Extract variables from configuration without start|
|55670|New|Min|2013-10-18|Startup may fail silently at post_config          |
|55673|New|Nor|2013-10-18|httpd fails to start with SSLProxyMachineCertifica|
|55680|New|Enh|2013-10-20|online manual directory option doesn't exist      |
|55698|New|Maj|2013-10-24|Apache 2.2 + mod_fcgid 2.3.7 (CentOS 6.4) graceful|
|55700|New|Enh|2013-10-24|add something like RewriteOptions InheritDown     |
|55707|New|Nor|2013-10-25|SSLProtocol directive seem to be ignored over diff|
|55708|New|Nor|2013-10-25|Access violation in msvcrt.dll when calling getenv|
|55711|New|Min|2013-10-28|--enable-foo doesn't enable foo                   |
|55712|New|Nor|2013-10-28|Relative <!--#include virtual="../file.shtml"--> g|
|55720|New|Enh|2013-10-29|separate LDAP Bind timeout from LDAPTimeout       |
|55738|New|Nor|2013-11-03|PVS-Studio: few issues                            |
|55763|New|Nor|2013-11-09|raise roots soft RLIMIT_NPROC on linux for high ma|
|55774|New|Nor|2013-11-13|ab: optionally accept tls client certificate      |
|55781|New|Nor|2013-11-15|ajp_read_header: ajp_ilink_receive failed; 120006)|
|55786|New|Maj|2013-11-16|SSLVerifyClient and OptRenegotiate result in a 403|
|55787|New|Maj|2013-11-16|Chroot fails with "Cannot chroot when not started |
|55790|New|Maj|2013-11-17|mod_fcgid lockfile hardcoded to be in /tmp        |
|55793|New|Enh|2013-11-18|DTrace/SystemTap support                          |
|55808|New|Nor|2013-11-21|File integrity verification using MD5 and SHA1    |
|55819|Inf|Nor|2013-11-27|Closing connection behaviour                      |
|55828|New|Cri|2013-11-28|Httpd not start if use ProxyPass balancer://      |
|55834|New|Maj|2013-12-02|Apache does not honor the openssl library path giv|
|55838|New|Nor|2013-12-03|PHP files are being executed instead of downloaded|
|55841|New|Nor|2013-12-04|Misleading news items on bugfix releases ("This ve|
|55856|New|Nor|2013-12-08|YYEMPTY (-2) used as index into yytname (const arr|
|55866|New|Nor|2013-12-11|When ProxyPreserveHost is on, SSL expects the wron|
|55878|New|Nor|2013-12-12|mod_fcgid kills spawned processes too early       |
|55881|New|Nor|2013-12-13|segmentation fault at proxy_util.c:1546           |
|55883|New|Enh|2013-12-14|string callers of ap_expr should be able to transf|
|55887|New|Maj|2013-12-16|In Windows apache, when user access to /con, apach|
|55898|New|Enh|2013-12-17|[RFE] listen on unix socket?                      |
|55914|New|Reg|2013-12-20|child exit segmentation fault after apache gracefu|
|55919|New|Nor|2013-12-22|EPREFIX and dynamic modules                       |
|55942|New|Nor|2014-01-01|400 - Bad Request on POST (Windows Server 2012 Hyp|
|55952|New|Nor|2014-01-05|ab: SSL keep-alive fails with apr_pollset_poll: Th|
|55962|New|Enh|2014-01-06|mod_remoteip should not allow an external proxy to|
|55963|New|Nor|2014-01-07|Add application/ld+json to mime.types             |
|55981|Opn|Nor|2014-01-09|mod_mbox hang on some e-mails on user@openoffice.a|
|55985|Opn|Nor|2014-01-10|apache does not reopen logs when multiple graceful|
|55989|Opn|Enh|2014-01-11|write to error log upon RewriteRule [F]orbidden   |
|55991|New|Nor|2014-01-12|mod_charset_lite doesn't bail out on non-identity |
|56009|Inf|Cri|2014-01-14|Memory leak in httpd 2.4.3 over time with persista|
|56014|New|Nor|2014-01-15|MOd rewrite CO Cookie method the lifetime flag not|
|56028|New|Enh|2014-01-17|Add http/1.0, http/1.1 NPN advertisement to enable|
|56034|New|Nor|2014-01-20|CPU consumption due to circular linked list in ap_|
|56040|New|Enh|2014-01-21|should be able to remove Max-Age cookie parameter |
|56041|New|Enh|2014-01-21|should be able to disable session expiry increment|
|56052|New|Nor|2014-01-22|ap_session_load called multiple times for expired |
|56055|New|Nor|2014-01-23|Route is not extracted properly when a session coo|
|56064|New|Enh|2014-01-25|Optimize PNGs                                     |
|56067|New|Nor|2014-01-27|FallbackResource doesn't work if directory exists |
|56081|New|Maj|2014-01-28|Apache 2.2.26 SIGSEGVs when POST'ing data         |
|56091|Inf|Nor|2014-01-30|SSL handshake error when httpd compiled on Oracle |
|56098|New|Nor|2014-02-01|duplicate cookie                                  |
|56101|New|Cri|2014-02-03|Apache 2.4.6 ceases processing requests (scoreboar|
|56102|New|Nor|2014-02-03|SSL_CLIENT_S_DN_x509_0 is undefined in the environ|
|56109|New|Nor|2014-02-05|Cannot increase the read limit                    |
|56113|New|Nor|2014-02-06|dist commit messages missing from mail-archives di|
|56131|New|Nor|2014-02-12|ProxyPassReverse / zealously replaces Location hea|
|56135|New|Nor|2014-02-13|Add DC to list of x509 components                 |
|56152|New|Nor|2014-02-18|ProxyBlock does not accept network addresses      |
|56176|New|Nor|2014-02-21|mod_substitute truncates the response body if the |
|56188|New|Nor|2014-02-25|mod_proxy_fcgi does not send FCGI_ABORT_REQUEST on|
|56209|New|Nor|2014-03-03|Uninitialised variables in os/win32/ap_regkey.c   |
|56226|Ver|Nor|2014-03-06|per VirtualHost KeepAliveTimeout is not recognized|
|56229|New|Enh|2014-03-06|ocsp ProxyHost and ProxyPort support              |
|56230|New|Nor|2014-03-07|mod_access_compat can log a bogus client denied me|
|56235|New|Nor|2014-03-07|quotes should be optional around expr             |
|56247|New|Cri|2014-03-12|semaphore creation for proxypass                  |
|56250|New|Nor|2014-03-12|sbindir in config.layout for Apache has bin instea|
|56251|New|Nor|2014-03-12|Increase maximum length of FcgidInitialEnv string |
|56252|New|Enh|2014-03-12|make install as privileged user creates files not |
|56262|New|Nor|2014-03-14|ab does not work with extremely long cookies      |
|56264|New|Trv|2014-03-14|Confusing error with .htaccess rewrite to proxy wh|
|56270|New|Enh|2014-03-15|--with-ssl=/foo w/o pkgconfig needs help on AIX 64|
|56288|New|Enh|2014-03-19|rewrite URLs in style attributes                  |
|56289|New|Nor|2014-03-19|Buffer overflow in mod_proxy_html's string replace|
|56308|New|Nor|2014-03-24|1 second delay in handle request kills performance|
|56312|New|Nor|2014-03-25|Can't configure different balancing workers that c|
|56314|New|Nor|2014-03-25|exiting from MPM-worker child caused assert in apr|
|56326|New|Nor|2014-03-27|cache_quick_handler does not serve responses with |
|56331|New|Nor|2014-03-29|windows 'access denied' during revalidaton of reso|
|56333|New|Enh|2014-03-31|API to resume a SUSPENDED connection              |
|56362|New|Maj|2014-04-08|ldaps only works with port 636. Non-standard port |
|56379|New|Nor|2014-04-09|Number of columns in the results returned from pgs|
|56395|New|Enh|2014-04-11|Allow SERVER_ADDR environment variable to be optio|
|56404|New|Nor|2014-04-12|endless loop  when connect to a website(https)  wh|
|56413|New|Blk|2014-04-15|can not restart httpd on centos 5.10 64bit        |
|56422|New|Nor|2014-04-17|authnz_ldap with other forms of authn can fail req|
|56457|New|Nor|2014-04-25|mod_proxy_html.c: 2 * cut'n'paste errors          |
|56473|New|Nor|2014-04-30|ETags don't change when headers do                |
|56475|New|Enh|2014-04-30|Allow TLS record size to be configured            |
|56483|New|Enh|2014-05-02|add disableKeepAlivePercentage similar to tomcat h|
|56493|New|Min|2014-05-06|mod_expires should not set expires in future for s|
|56495|New|Nor|2014-05-06|Application behind mod_proxy does not get SessionH|
|56500|Opn|Enh|2014-05-07|vhosts priority order with wildcard               |
|56504|New|Nor|2014-05-08|cannot build static support binaries              |
|56508|New|Nor|2014-05-09|Requiring SNI - SSLStrictSNIVHostCheck semantics  |
|56517|New|Enh|2014-05-12|Virtualhosts cannot inherit parent CustomLog      |
|56528|New|Enh|2014-05-15|"bad flags delimiter" - improve helpfulness       |
|56541|New|Nor|2014-05-18|Proxy 502's on large file post requests           |
|56559|New|Nor|2014-05-25|multiple unix sockets in one virtualhost fails    |
|56569|New|Nor|2014-05-27|Null CRC in gzip footer with mod_cgid and ErrorDoc|
|56587|New|Nor|2014-06-03|Many VirtualHost's with SSLEngine On              |
|56590|New|Enh|2014-06-04|(REST-) API for configuring balancer manager remot|
|56594|Inf|Nor|2014-06-05|mod_authn_dbd, mod_dbd and mod_ssl                |
|56598|New|Nor|2014-06-06|Content-Length header should be always interpreted|
|56621|New|Nor|2014-06-13|Rotatelogs.exe first start                        |
|56622|New|Nor|2014-06-13|mod_reqtimeout incorrectly applies timeouts to CON|
|56626|New|Nor|2014-06-15|Add info about rotatelogs to log rotation document|
|56633|New|Nor|2014-06-16|mod_auth_basic breaks mod_autoindex               |
|56645|New|Maj|2014-06-19|socket callback with timeout callback causes infin|
|56664|New|Nor|2014-06-24|Proxy retry timeout does not cope with system time|
|56697|New|Maj|2014-07-04|status page still shown while blocked             |
|56718|New|Nor|2014-07-14|Cleanup request Host headers when absolute URI are|
|56719|New|Nor|2014-07-14|parallel requests get served with delays          |
|56738|New|Enh|2014-07-17|Ability to extract route from cookie with regexp  |
|56740|New|Nor|2014-07-18|suspended_count not maintained properly with wstun|
|56750|New|Enh|2014-07-20|SuexecUserGroup replacement                       |
|56751|New|Maj|2014-07-20|Fails to properly mitigate Slow Post DoS attack   |
|56753|New|Nor|2014-07-21|mod_lua.so: symbol luaL_openlib: referenced symbol|
|56778|New|Nor|2014-07-28|while running make command i got this error       |
|56794|New|Nor|2014-07-31|Added AuthDBDFullAuthQuery option                 |
|56795|Inf|Nor|2014-07-31|Apache 2.4.10 Program received signal SIGPIPE, Bro|
|56818|Inf|Nor|2014-08-05|SetEnvIf may set invalid string length on empty st|
|56843|New|Enh|2014-08-12|Support different OCSP stapling max ages          |
|56868|New|Nor|2014-08-18|relative LuaRoot broken                           |
|56879|New|Nor|2014-08-22|Information disclosure                            |
|56889|New|Nor|2014-08-26|Close state never dies                            |
|56918|Opn|Blk|2014-09-06|error: 'ap_copy_scoreboard_worker' undeclared here|
|56926|New|Nor|2014-09-08|Filename causes AH02599 slotmem issue             |
|56933|New|Min|2014-09-09|not sure it's an appache bug : some browser want t|
|56942|New|Reg|2014-09-10|Unable to implement TRANSFER-CHUNKED:ENCODING with|
|56943|New|Nor|2014-09-10|mod_proxy_connect - AH02447: err/hup on backconn  |
|56977|New|Maj|2014-09-12|segfaults when using mod_mem_cache + mod_disk_cach|
|56986|New|Blk|2014-09-17|chunked Transfer-Encoding forbidden: /test/test.dl|
|57014|New|Cri|2014-09-24|Incorrect test for CC_FOR_BUILD prevents build (on|
|57023|New|Nor|2014-09-26|Socache shmcb don't cache file bigger than 11k    |
|57028|New|Enh|2014-09-27|mod_spdy - support Apache 2.4                     |
|57044|New|Nor|2014-09-29|[PatchAvailable] Use base64url in mod_unique_id ('|
|57045|New|Nor|2014-09-30|dumpio output strings are missing                 |
|57046|New|Enh|2014-09-30|Add additional parameter to enable check URL befor|
|57056|New|Maj|2014-10-03|Rewrite port is taken into hostname               |
|57067|New|Nor|2014-10-08|A proxy worker both standalone and balancer member|
|57069|New|Nor|2014-10-08|apache ssl timeout during chunked request in rever|
|57073|New|Cri|2014-10-09|Intermittent Connection Issues using default httpd|
|57085|New|Enh|2014-10-14|Implement Proxy Protocol in httpd                 |
|57087|New|Nor|2014-10-14|mod_proxy_fcgi doesn't send cgi CONTENT_LENGTH var|
|57100|Ver|Nor|2014-10-16|"SSLProtocol ALL" is ignored for virtual hosts    |
|57101|New|Enh|2014-10-16|[PATCH] Better error reporting when child spawn fa|
|57109|New|Nor|2014-10-17|GPG verification examples are wrong               |
|57119|Opn|Enh|2014-10-20|Suppress address reuse / DNS cache in mod_proxy   |
|57121|New|Nor|2014-10-21|ocsp stapling should not pass temporary server out|
|57131|New|Nor|2014-10-22|OCSP Stapling scalability concern                 |
|57159|New|Min|2014-10-28|mod_ssl OCSP Stapling directives don't support per|
|57160|New|Nor|2014-10-29|httxt2dbm doesn't generate files on NAS           |
|57174|New|Nor|2014-10-31|Update windows visual studio build                |
|57210|New|Nor|2014-11-14|LuaHookMapToStorage not firing in per-directory co|
|57211|New|Enh|2014-11-14|Config-time options                               |
|57212|Opn|Nor|2014-11-14|Headers returned by scripts are limited to 8190 by|
|57218|New|Nor|2014-11-15|[Feature Request] Apache Bench (AB) to output a cs|
|57219|New|Nor|2014-11-15|ApacheBench quits unexpectedly with high concurren|
|57220|New|Nor|2014-11-15|[Feature Request] Add option to ApacheBench to giv|
|57228|New|Nor|2014-11-17|glibc detected *** httpd: double free or corruptio|
|57229|New|Maj|2014-11-17|mod_sed dies on long lines                        |
|57286|New|Nor|2014-11-29|Symbolic links are not honoured                   |
|57298|New|Min|2014-12-02|RewriteBase inside FilesMatch behaves oddly       |
|57299|New|Enh|2014-12-02|mod_session_dbd should not make a database call pe|
|57300|New|Enh|2014-12-02|mod_session_dbd should not save the session at eac|
|57301|New|Enh|2014-12-02|Add SessionMaxAgeAbsolute Directive               |
|57304|Inf|Nor|2014-12-03|MySQL DBD Authentication Incompatible with SSL    |
|57311|New|Nor|2014-12-04|BalancerMember enclosed by <If> gives syntax error|
|57313|New|Nor|2014-12-05|The DefaultType directive has been removed        |
|57327|New|Nor|2014-12-08|mod_ssl seg fault on exit                         |
|57334|Ver|Maj|2014-12-09|Segmentation fault in SSL_renegotiate at ssl_lib.c|
|57337|New|Nor|2014-12-10|Content negotiation fails with conditional Redirec|
|57339|New|Enh|2014-12-10|ErrorLogFormat doesn't allow logging in Internet d|
|57360|New|Nor|2014-12-17|Fail gracefully on certificate/key mismatch       |
|57372|New|Nor|2014-12-19|httpd will lookup every home directory while start|
|57374|Ver|Nor|2014-12-19|Event MPM: Wrong KeepAliveTimeout when system cloc|
|57379|New|Nor|2014-12-20|[patch] Makefile.in  with mpm-shared, cgi and cgid|
|57383|New|Cri|2014-12-21|Error retrieving Report: An Existing connection wa|
|57386|New|Blk|2014-12-22|html5 lost some comments                          |
|57398|New|Maj|2014-12-26|AH01075: Error dispatching request to : (passing b|
|57399|New|Nor|2014-12-28|Many unnecessary CPU wakeups per second           |
|57406|New|Nor|2014-12-31|cgi-bin script is not executing                   |
|57412|New|Maj|2015-01-04|rewrite rules causes duplicate requests           |
|57416|New|Nor|2015-01-06|htcacheclean thinks the cache is smaller than it a|
|57424|Opn|Nor|2015-01-07|mod_rewrite not using ap_context_document_root    |
|57436|New|Enh|2015-01-12|Option to strip extra data after websocket request|
|57439|New|Enh|2015-01-13|Allow to change body timeout per location         |
|57448|New|Nor|2015-01-16|SSI <!--#set --> cannot capture backreferences fro|
|57453|New|Maj|2015-01-17|403 error when virtualhost configured with non-exi|
|57471|New|Nor|2015-01-20|Apache 2.4.10 Compilation fails when compiling aga|
|57477|New|Nor|2015-01-21|mod_auth_digest AH00052: child pid $pid exit signa|
|57483|New|Nor|2015-01-22|Omit "Keep-Alive" header on 1.1 connections       |
|57492|New|Nor|2015-01-24|incomplete chunked-transfered request body is not |
|57506|New|Nor|2015-01-27|<If> directive doesn't work within a <Location> se|
|57510|New|Enh|2015-01-28|Engine keyform support for private keys           |
|57511|New|Maj|2015-01-28|Opening plain TCP Socket on SSL port causes denial|
|57515|New|Nor|2015-01-30|Define/Undefine don't work reasonably outside of g|
|57519|New|Nor|2015-02-01|change SSLv2 to SSLv3 or remove SSLv2 support allt|
|57526|Opn|Maj|2015-02-03|Apache 2.2.29_openssl-1.0.1k_x86_64 Error creating|
|57529|Opn|Nor|2015-02-03|htcacheclean doesn't show the cached URL with '-a'|
|57585|New|Nor|2015-02-13|httpd fails to start if there is an IncludeOptiona|
|57590|New|Nor|2015-02-18|loading mod_proxy_http makes rewriteRule's [proxy]|
|57591|New|Nor|2015-02-18|DirectoryIndex directive cannot be overwritten    |
|57616|New|Maj|2015-02-23|AB - DNS roundrobin support                       |
|57624|New|Enh|2015-02-23|Provide support for http/2.0                      |
|57631|New|Nor|2015-02-24|Useless test in acinclude.m4                      |
|57632|New|Nor|2015-02-24|mod_systemd passes invalid default to APACHE_MODUL|
|57635|New|Nor|2015-02-25|meta-refresh is not rewritten by mod_proxy_html   |
|57636|New|Nor|2015-02-25|URLs without protocol are not rewriten by mod_prox|
|57641|New|Maj|2015-02-27|mod_substitute: Invalid merge order               |
|57646|New|Enh|2015-02-27|SSLEngine inside If directive                     |
|57660|New|Trv|2015-03-04|AB - free memory allocated by xmalloc and xcalloc |
|57680|New|Nor|2015-03-09|SSLSessionCacheTimeout has no effect              |
|57685|New|Nor|2015-03-10|Requests are denied while the mod_cgid daemon star|
|57691|New|Nor|2015-03-12|mod_proxy/proxy_util confuses UDS scheme with HTTP|
|57695|New|Nor|2015-03-12|[core:warn] [pid 1120] (101)Network is unreachable|
|57710|New|Nor|2015-03-15|Wildcard matching for logging headers             |
|57725|New|Enh|2015-03-18|ApacheBench: include http status code in gnuplot o|
|57742|New|Nor|2015-03-23|"reliable piped logging" doesn't work for ErrorLog|
|57745|New|Nor|2015-03-23|httpd exits 1 with no stderr when proxy_balancer_m|
|57746|New|Nor|2015-03-23|Apache hangs on startup using MPM event           |
|57751|Inf|Maj|2015-03-24|Problems with proxy reverse to websockets         |
|57756|New|Enh|2015-03-25|Config options for handling of pipelined request  |
|57757|New|Cri|2015-03-25|extern apr_xlate_t *ap_locale_to_ascii variable gi|
|57771|New|Nor|2015-03-27|cleanup_script uses incorrect connection ID       |
|57774|Inf|Nor|2015-03-28|httpd.conf <IfModule proxy_html_module> content er|
|57777|New|Nor|2015-03-30|Security concerns with documentation of AddHandler|
|57781|New|Nor|2015-03-31|disable reconnection after connection error       |
|57784|New|Enh|2015-03-31|[RFE] Multiple ErrorLog directives                |
|57785|Opn|Nor|2015-04-01|REDIRECT_URL is not suitable for use in server-gen|
|57795|Opn|Maj|2015-04-07|mod_proxy_wstunnel sometimes does not connect and |
|57800|New|Nor|2015-04-09|High CPU usage in ap_core_output_filter           |
|57807|New|Enh|2015-04-13|Build-configurable environment variable length    |
|57810|New|Nor|2015-04-13|Should apache ignore difference in trailing dot be|
|57813|New|Nor|2015-04-14|Rewrite 'pre-compressed content' recipe using 2.4 |
|57814|New|Nor|2015-04-14|Teach mod_deflate how to serve pre-comressed conte|
|57819|New|Nor|2015-04-15|Need a conventions document                       |
|57832|New|Enh|2015-04-19|Reduction of response splitting attacks consequenc|
|57853|Inf|Nor|2015-04-24|mod_proxy_http sends request with header 'Expect: |
|57876|New|Reg|2015-04-30|logresolve.exe on any Windows immediately crashes |
|57878|New|Nor|2015-04-30|Using UTF-8 for all languages, and avoiding html-e|
|57895|New|Min|2015-05-05|missing m4a mimeType in mime.types                |
|57911|New|Min|2015-05-09|Rewrite documentation unclear or wrong about what |
|57927|New|Maj|2015-05-13|Segmentation Fault at proxy_util.c:994            |
|57933|New|Min|2015-05-18|apr_port_t returns constant                       |
|57941|New|Nor|2015-05-21|config.status: line 331: syntax error near unexpec|
|57949|New|Enh|2015-05-25|new mod_ssl environment variable SSL_{CLIENT|SERVE|
|57950|New|Nor|2015-05-26|[patch] buildconf change hint in build to newer ap|
|57960|New|Nor|2015-05-27|PUT truncates response body; status_line appears t|
|57976|New|Cri|2015-05-30|Server threads stale when sending 500 status with |
|57978|New|Nor|2015-06-01|unix:/ works with any number of / slashes  except |
|57979|New|Nor|2015-06-01|can not turn change log level for mod_filter      |
|57996|New|Nor|2015-06-03|Symlinks erroneously not followed when target inod|
|57997|New|Nor|2015-06-03|Threads started during child_init don't block sign|
|57999|New|Nor|2015-06-04|ap_getparents() may remove start slash of uri     |
|58001|New|Enh|2015-06-04|Implement Forwarded header (RFC 7239) to mod_proxy|
|58007|New|Nor|2015-06-06|400 Bad Request with fully qualified domain name o|
|58025|New|Enh|2015-06-11|mod_authz_dbd : new dbd-query and AuthzDBDQuery op|
|58026|New|Nor|2015-06-11|return 421 status code when SNI and Host: header d|
|58044|New|Cri|2015-06-16|Error sintax 'lua_dump'                           |
|58050|New|Nor|2015-06-17|ErrorDocument does not always work                |
|58073|New|Nor|2015-06-24|Extremely long time for graceful restart          |
|58089|New|Nor|2015-07-01|mod_authz_host uses proxy IP even when mod_remotei|
|58097|New|Enh|2015-07-03|[feat] Preserve original connecting IP            |
|58101|New|Nor|2015-07-05|DeflateCompressionLevel inside vhost resets logfor|
|58107|New|Blk|2015-07-06|Httpd crashes on startup every time, dump file att|
|58109|New|Nor|2015-07-06|Apache on windows cannot handle the hash symbol (#|
|58118|Inf|Min|2015-07-09|mod_proxy_fcgi logs 503 when user aborts connectio|
|58120|New|Nor|2015-07-10|ProxyPassInherit does not work as expect          |
|58121|New|Nor|2015-07-10|ProxyHTMLMeta seems to ignore all <meta http-equiv|
|58129|New|Nor|2015-07-12|man pages are not generated correctly             |
|58132|New|Nor|2015-07-12|non-standard, non-traditional man page layout make|
|58135|New|Nor|2015-07-14|mod_cache sends client "if-Modified-Since" to back|
|58141|New|Nor|2015-07-15|Apache Service doesn't start when rotatlogs.exe pa|
|58142|New|Nor|2015-07-15|authz_core ignores loglevel                       |
|58158|New|Nor|2015-07-21|Not honoring HTTP spec with regard to Accept-Encod|
|58168|New|Enh|2015-07-21|Would like full request evaluation support in Rewr|
|58171|New|Nor|2015-07-22|ap_session_save saves the wrong session after a de|
|58177|New|Enh|2015-07-24|Mod Proxy forward trailers in http chunked request|
|58180|New|Enh|2015-07-24|ErrorDocument original URL in subsequent <Location|
|58181|New|Enh|2015-07-25|mod_expire should allow "minus" keyword same like |
|58188|New|Nor|2015-07-28|http2 mod_lua: support build with lua 5.2+        |
|58197|New|Nor|2015-07-31|apr-util-1.5.4 build against openldap - "could not|
|58225|New|Reg|2015-08-08|intermitant segfault 11 in session_identity_encode|
|58226|New|Nor|2015-08-08|XSS in Error Page                                 |
|58231|New|Nor|2015-08-11|RewriteCond can add "Host" to the Vary-Header     |
|58235|New|Enh|2015-08-12|Ability to allow from domain but with using forwar|
|58243|New|Nor|2015-08-14|rotatelogs goes infinite at startup               |
|58248|New|Nor|2015-08-17|Error 404 in use some characters of utf8 in url   |
|58257|New|Nor|2015-08-18|require ldap-group does not work if account-fullna|
|58278|Inf|Blk|2015-08-24|apache - mod_security Issue : apache no releasing |
|58280|New|Nor|2015-08-24|Backend connection not closed until timeout if cli|
|58288|New|Blk|2015-08-27|Semaphore amount increase until crash when enablin|
|58292|New|Nor|2015-08-27|FallbackResource breaks chunked encoding sometimes|
|58304|New|Nor|2015-08-30|Unexpected Warnings from Macro Use in 2.4         |
|58305|New|Nor|2015-08-30|mod_cgi documentation not clear about what is pass|
|58306|New|Nor|2015-08-30|documentation needs to make it clear which directi|
|58307|New|Nor|2015-08-31|Segmentation fault in child in "read(__nbytes, __b|
|58317|New|Min|2015-09-02|Error message AH01630 is missing file name on deny|
|58334|New|Min|2015-09-06|WebDAV HTTP access does not include meta tag for c|
|58335|New|Nor|2015-09-07|mod_authnz_ldap mismatch                          |
|58343|New|Nor|2015-09-08|The pdf files come up as a blank page.            |
|58354|New|Maj|2015-09-10|(20014)Internal error (specific information not av|
|58356|New|Blk|2015-09-10|Session jumping due to incorrect route            |
|58364|New|Reg|2015-09-11|Apache Server is restarted time to time (Release 2|
|58417|New|Min|2015-09-16|ApacheBench (ab) won't display Server Software of |
|58419|New|Nor|2015-09-16|ApacheBench (ab) doesn't work with keep-alives aga|
|58423|New|Reg|2015-09-17|Apache >= 2.4.8 PCRE_DUPNAMES causes build failure|
|58467|New|Maj|2015-09-29|Environment Variables in ProxyHTMLURLMap produces |
|58475|New|Nor|2015-10-03|Support append/merge with semicolon-separated head|
|58488|New|Nor|2015-10-08|Stoped PHP-FPM pool in multi-pool system with comu|
|58491|New|Maj|2015-10-09|Core dumps appear when the load increases         |
|58492|Inf|Nor|2015-10-09|I think LDAPConnectionPoolTTL is not being honored|
|58498|New|Nor|2015-10-16|Apache 2.4.17: Regression with mod_autoindex (in c|
|58500|New|Nor|2015-10-16|dav_fs not enabled by default                     |
|58503|New|Cri|2015-10-16|segfault in apr_brigade_cleanup() under high load |
|58509|New|Trv|2015-10-20|2.4.17-dev introduces second core.c handler at sta|
|58513|New|Maj|2015-10-21|httpd code documentation is missing               |
|58524|New|Nor|2015-10-23|mod_http2 segfaults when under heavy load         |
|58528|New|Nor|2015-10-23|AllowOverrideList None gets misparsed and .htacces|
|58529|New|Maj|2015-10-23|Segmentation fault after modifying a proxy Balance|
|58550|New|Enh|2015-10-26|During load, Apache 2.2.x with prefork MPM didn|
+-----+---+---+----------+--------------------------------------------------+
| Total 1548 bugs                                                           |
+---------------------------------------------------------------------------+

From dev-return-84491-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov  1 07:22:31 2015
Return-Path: <dev-return-84491-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 398F3185A7
	for <apmail-httpd-dev-archive@www.apache.org>; Sun,  1 Nov 2015 07:22:31 +0000 (UTC)
Received: (qmail 46548 invoked by uid 500); 1 Nov 2015 07:22:30 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 46473 invoked by uid 500); 1 Nov 2015 07:22:30 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 46463 invoked by uid 99); 1 Nov 2015 07:22:30 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Nov 2015 07:22:30 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 0E4DD1A073F
	for <dev@httpd.apache.org>; Sun,  1 Nov 2015 07:22:30 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.999
X-Spam-Level:
X-Spam-Status: No, score=0.999 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H2=-0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id BRWR-PiJT0-z for <dev@httpd.apache.org>;
	Sun,  1 Nov 2015 07:22:28 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp04.smtpout.orange.fr [80.12.242.126])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 7515643B05
	for <dev@httpd.apache.org>; Sun,  1 Nov 2015 07:22:28 +0000 (UTC)
Received: from [127.0.0.1] ([92.140.232.207])
	by mwinf5d27 with ME
	id c7NL1r0084V8jKw037NLWj; Sun, 01 Nov 2015 08:22:21 +0100
X-ME-Helo: [127.0.0.1]
X-ME-Date: Sun, 01 Nov 2015 08:22:21 +0100
X-ME-IP: 92.140.232.207
Subject: Re: svn commit: r1711503 - in /httpd/httpd/trunk/modules/http2:
 h2_conn_io.c h2_conn_io.h h2_io.c h2_io.h h2_mplx.c h2_mplx.h h2_session.c
 h2_stream.c h2_stream.h h2_task_input.c h2_util.c h2_util.h
To: dev@httpd.apache.org
References: <20151030161540.D25C83A0288@svn01-us-west.apache.org>
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Message-ID: <5635BDAC.7010703@wanadoo.fr>
Date: Sun, 1 Nov 2015 08:22:20 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <20151030161540.D25C83A0288@svn01-us-west.apache.org>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 151031-1, 31/10/2015), Outbound message
X-Antivirus-Status: Clean

Hi,

Le 30/10/2015 17:15, icing@apache.org a crit :
> Author: icing
> Date: Fri Oct 30 16:15:40 2015
> New Revision: 1711503
>
> URL: http://svn.apache.org/viewvc?rev=1711503&view=rev
> Log:
> improved h2c write performance
>
> [...]
> +static char immortal_zeros[256];
> +
>   static int on_send_data_cb(nghttp2_session *ngh2,
>                              nghttp2_frame *frame,
>                              const uint8_t *framehd,
> @@ -563,30 +557,59 @@ static int on_send_data_cb(nghttp2_sessi
>                     "h2_stream(%ld-%d): send_data_cb for %ld bytes",
>                     session->id, (int)stream_id, (long)length);
>                     
> -    status = send_data(session, (const char *)framehd, 9);
> -    if (status == APR_SUCCESS) {
> +    if (h2_conn_io_is_buffered(&session->io)) {
> +        status = h2_conn_io_write(&session->io, (const char *)framehd, 9);
> +        if (status == APR_SUCCESS) {
> +            if (padlen) {
> +                status = h2_conn_io_write(&session->io, (const char *)&padlen, 1);
> +            }
> +
> +            if (status == APR_SUCCESS) {
> +                apr_size_t len = length;
> +                status = h2_stream_readx(stream, pass_data, session,
> +                                         &len, &eos);
> +                if (status == APR_SUCCESS && len != length) {
> +                    status = APR_EINVAL;
> +                }
> +            }
> +
> +            if (status == APR_SUCCESS && padlen) {
> +                if (padlen) {
> +                    char pad[256];
> +                    memset(pad, 0, padlen);

You could save this 'pad' buffer and the 'memset' by also using the data 
from the 'static char immortal_zeros[256];' introduced above.

Maybe, using NGHTTP2_MAX_PADLEN instead of the 256 hard coded value 
would be cleaner?

CJ

From dev-return-84492-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov  1 07:25:53 2015
Return-Path: <dev-return-84492-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8F3F6185B1
	for <apmail-httpd-dev-archive@www.apache.org>; Sun,  1 Nov 2015 07:25:53 +0000 (UTC)
Received: (qmail 55225 invoked by uid 500); 1 Nov 2015 07:25:53 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 55147 invoked by uid 500); 1 Nov 2015 07:25:53 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 55137 invoked by uid 99); 1 Nov 2015 07:25:53 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Nov 2015 07:25:52 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 96E9F180974
	for <dev@httpd.apache.org>; Sun,  1 Nov 2015 07:25:52 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.999
X-Spam-Level:
X-Spam-Status: No, score=0.999 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H2=-0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 2HbOw0E7SZUN for <dev@httpd.apache.org>;
	Sun,  1 Nov 2015 07:25:51 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp04.smtpout.orange.fr [80.12.242.126])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 0FD19216F0
	for <dev@httpd.apache.org>; Sun,  1 Nov 2015 07:25:50 +0000 (UTC)
Received: from [127.0.0.1] ([92.140.232.207])
	by mwinf5d27 with ME
	id c7Ri1r0054V8jKw037RisD; Sun, 01 Nov 2015 08:25:43 +0100
X-ME-Helo: [127.0.0.1]
X-ME-Date: Sun, 01 Nov 2015 08:25:43 +0100
X-ME-IP: 92.140.232.207
Subject: Re: svn commit: r1711503 - in /httpd/httpd/trunk/modules/http2:
 h2_conn_io.c h2_conn_io.h h2_io.c h2_io.h h2_mplx.c h2_mplx.h h2_session.c
 h2_stream.c h2_stream.h h2_task_input.c h2_util.c h2_util.h
To: dev@httpd.apache.org
References: <20151030161540.D25C83A0288@svn01-us-west.apache.org>
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Message-ID: <5635BE76.6000804@wanadoo.fr>
Date: Sun, 1 Nov 2015 08:25:42 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <20151030161540.D25C83A0288@svn01-us-west.apache.org>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 151031-1, 31/10/2015), Outbound message
X-Antivirus-Status: Clean

Hi,

Le 30/10/2015 17:15, icing@apache.org a crit :
> Author: icing
> Date: Fri Oct 30 16:15:40 2015
> New Revision: 1711503
>
> URL: http://svn.apache.org/viewvc?rev=1711503&view=rev
> Log:
> improved h2c write performance
>
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_session.c?rev=1711503&r1=1711502&r2=1711503&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/modules/http2/h2_session.c (original)
> +++ httpd/httpd/trunk/modules/http2/h2_session.c Fri Oct 30 16:15:40 2015
> [...]
> @@ -1180,7 +1203,7 @@ static ssize_t stream_data_cb(nghttp2_se
>       
>       AP_DEBUG_ASSERT(!h2_stream_is_suspended(stream));
>       
> -    if (h2_conn_io_is_buffered(&session->io)) {
> +    if (1 || h2_conn_io_is_buffered(&session->io)) {
>           status = h2_stream_prep_read(stream, &nread, &eos);
>           if (nread) {
>               *data_flags |=  NGHTTP2_DATA_FLAG_NO_COPY;
>
Is it intentional or a left-over?

CJ


From dev-return-84493-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov  1 07:28:02 2015
Return-Path: <dev-return-84493-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 06FFA185BA
	for <apmail-httpd-dev-archive@www.apache.org>; Sun,  1 Nov 2015 07:28:02 +0000 (UTC)
Received: (qmail 57212 invoked by uid 500); 1 Nov 2015 07:28:01 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 57138 invoked by uid 500); 1 Nov 2015 07:28:01 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 57127 invoked by uid 99); 1 Nov 2015 07:28:01 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Nov 2015 07:28:01 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id EC9E9180974
	for <dev@httpd.apache.org>; Sun,  1 Nov 2015 07:28:00 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.799
X-Spam-Level: *
X-Spam-Status: No, score=1.799 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H2=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id hTYravDkoFNe for <dev@httpd.apache.org>;
	Sun,  1 Nov 2015 07:28:00 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp04.smtpout.orange.fr [80.12.242.126])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 748B921150
	for <dev@httpd.apache.org>; Sun,  1 Nov 2015 07:27:59 +0000 (UTC)
Received: from [127.0.0.1] ([92.140.232.207])
	by mwinf5d27 with ME
	id c7Tx1r00C4V8jKw037Tx3X; Sun, 01 Nov 2015 08:27:57 +0100
X-ME-Helo: [127.0.0.1]
X-ME-Date: Sun, 01 Nov 2015 08:27:57 +0100
X-ME-IP: 92.140.232.207
Subject: Re: svn commit: r1711451 - in /httpd/httpd/trunk/modules/http2:
 h2_conn_io.c h2_conn_io.h h2_session.c h2_stream.c h2_stream.h
To: dev@httpd.apache.org
References: <20151030112951.47A403A0042@svn01-us-west.apache.org>
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Message-ID: <5635BEFD.80005@wanadoo.fr>
Date: Sun, 1 Nov 2015 08:27:57 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <20151030112951.47A403A0042@svn01-us-west.apache.org>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 151031-1, 31/10/2015), Outbound message
X-Antivirus-Status: Clean

Hi,

Le 30/10/2015 12:29, icing@apache.org a crit :
> Author: icing
> Date: Fri Oct 30 11:29:50 2015
> New Revision: 1711451
>
> URL: http://svn.apache.org/viewvc?rev=1711451&view=rev
> Log:
> fixing unbuffered output handling for h2c
>
>
> Modified: httpd/httpd/trunk/modules/http2/h2_conn_io.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_conn_io.c?rev=1711451&r1=1711450&r2=1711451&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/modules/http2/h2_conn_io.c (original)
> +++ httpd/httpd/trunk/modules/http2/h2_conn_io.c Fri Oct 30 11:29:50 2015
> [...]
> @@ -297,12 +304,20 @@ apr_status_t h2_conn_io_write(h2_conn_io
>           }
>           
>       }
> +    else if (1) {
> +        apr_bucket *b;
> +
> +        ap_log_cerror(APLOG_MARK, APLOG_TRACE2, status, io->connection,
> +                      "h2_conn_io: passing %ld transient bytes to output filters",
> +                      (long)length);
> +        b = apr_bucket_transient_create(buf,length, io->output->bucket_alloc);
> +        APR_BRIGADE_INSERT_TAIL(io->output, b);
> +        status = pass_out(io->output, io);
> +    }
>       else {
> +        ap_log_cerror(APLOG_MARK, APLOG_TRACE2, status, io->connection,
> +                      "h2_conn_io: writing %ld bytes to brigade", (long)length);
>           status = apr_brigade_write(io->output, pass_out, io, buf, length);
> -        if (status != APR_SUCCESS) {
> -            ap_log_cerror(APLOG_MARK, APLOG_DEBUG, status, io->connection,
> -                          "h2_conn_io: write error");
> -        }
>       }
>       
>       return status;

Is the 'if (1)' intentional or a left-over?


> Modified: httpd/httpd/trunk/modules/http2/h2_session.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_session.c?rev=1711451&r1=1711450&r2=1711451&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/modules/http2/h2_session.c (original)
> +++ httpd/httpd/trunk/modules/http2/h2_session.c Fri Oct 30 11:29:50 2015
> @@ -249,6 +249,8 @@ static int before_frame_send_cb(nghttp2_
>           case NGHTTP2_GOAWAY:
>               session->flush = 1;
>               break;
> +        case NGHTTP2_DATA:
> +
>           default:
>               break;

Is this intentional or a break, some code or a /* Fall through */ is 
missing?

CJ

From dev-return-84494-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov  1 15:20:15 2015
Return-Path: <dev-return-84494-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 05A6618BE4
	for <apmail-httpd-dev-archive@www.apache.org>; Sun,  1 Nov 2015 15:20:15 +0000 (UTC)
Received: (qmail 85131 invoked by uid 500); 1 Nov 2015 15:20:14 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 84953 invoked by uid 500); 1 Nov 2015 15:20:13 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 84943 invoked by uid 99); 1 Nov 2015 15:20:13 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Nov 2015 15:20:13 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 49399C0C6F
	for <dev@httpd.apache.org>; Sun,  1 Nov 2015 15:20:13 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id m-cgM_k0lFoR for <dev@httpd.apache.org>;
	Sun,  1 Nov 2015 15:20:12 +0000 (UTC)
Received: from mail-ig0-f173.google.com (mail-ig0-f173.google.com [209.85.213.173])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id AE14F20751
	for <dev@httpd.apache.org>; Sun,  1 Nov 2015 15:20:11 +0000 (UTC)
Received: by igpw7 with SMTP id w7so35461164igp.1
        for <dev@httpd.apache.org>; Sun, 01 Nov 2015 07:20:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=2z1Hz8FfePh4wFpA4uKSwT6NlvClzVhsMJs9tQKmUBU=;
        b=sjEpBAwEG7yBcCYSmdkeZ/O5CyGQewmKLqGyT1GFxIyUNk2Zb+IQjTGOuw/yeKza4n
         aLTpwUb5YWzsjtssEl1mdaxjvRIzGRNmExPRWzSNPMsCn6fI0THQYHYLIED9ZXY00vIr
         eP8rFw3l3dNVT2kNClhy/9ybaYyRJ5j6PC1mQELDRvB/+L1cMl3HX7onv4IWt5fdeodD
         Q4Nsf9D9d12lWaS5Y9DHleEItS8JpS2IJjFxm9NLuApgZWRxGVLqTUjQQARqpnIoV2uh
         FTOdWCOfZC7voTnkIuEG0xLsEoqnhckuxvnoaM3thEySTEWAknONtBeSF+5QvUJu0z8T
         OpZg==
MIME-Version: 1.0
X-Received: by 10.50.28.83 with SMTP id z19mr6674131igg.36.1446391204960; Sun,
 01 Nov 2015 07:20:04 -0800 (PST)
Received: by 10.64.59.197 with HTTP; Sun, 1 Nov 2015 07:20:04 -0800 (PST)
In-Reply-To: <CAKQ1sVPpaboK5CNRTK4s07jv7sKpScyKti-JmDQ3fs_iANxpSA@mail.gmail.com>
References: <CALK=YjOwDPyAwsBv15AHF3YF3PSFFb_rt8yE8QnbuydNRH8W=w@mail.gmail.com>
	<CAKQ1sVPpaboK5CNRTK4s07jv7sKpScyKti-JmDQ3fs_iANxpSA@mail.gmail.com>
Date: Sun, 1 Nov 2015 10:20:04 -0500
Message-ID: <CALK=YjNA=hpgJB11NzZujoSxhh95JdkFvEwi1Mk9hdG14EiCuw@mail.gmail.com>
Subject: Re: ap_init_rng / apr_random question
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>, "dev@apr.apache.org" <dev@apr.apache.org>, Ben Laurie <ben@links.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Oct 27, 2015 at 8:00 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
> On Tue, Oct 27, 2015 at 6:57 PM, Eric Covener <covener@gmail.com> wrote:
>> IIUC, it takes something like 32k of /dev/random to initialize apr_random.
>>
>> APR_RANDOM_DEFAULT_POOLS*APR_RANDOM_DEFAULT_RESEED_SIZE*APR_RANDOM_DEFAULT_G_FOR_INSECURE
>> (32*32*32)
>>
>> But ap_init_rng() does this with ~4000 8-byte reads of /dev/random.
>>
>> I am working on a platform where access to the crypto facility
>> underneath /dev/random is sometimes audited.  Does anyone have any
>> hints about whether larger reads from /dev/random would be better
>> elsewhere? Or if the startup requirement is really this high for data
>> from /dev/random?
>
> AFAICT, /dev/urandom itself only requires 256 bits (32 bytes) of
> (secret) entropy to be secure (cryptographically strong), so I don't
> think more would be needed for httpd (or APR).
> It seems to me that asking for more than 32 bytes of random bytes by
> something like a minute is not very sound (both for the requester AND
> the "others"), so IMHO we should really take that into consideration.

Adding Ben directly (sorry Ben).    Ben, you might recall the APR PRNG
http://svn.apache.org/viewvc/apr/apr/trunk/random/unix/apr_random.c?view=log

We noticed it is awfully /dev/random hungry at startup because the
bytes fed to it (AFAICT) get  sprayed across 32 pools that need to be
reseeded 32 times each to be able to reach 32 generations to flip over
to being ready to provide insecure bytes.  I'm wondering if any of
those factors is somehow inadvertent or if there's any other light you
can shed on it (defaults optimized for hypothetical daemon mode, etc)

(My original report was exacerbated by httpd feeding in entropy 8
bytes at a time)

From dev-return-84495-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov  1 18:30:39 2015
Return-Path: <dev-return-84495-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A5F0718ED1
	for <apmail-httpd-dev-archive@www.apache.org>; Sun,  1 Nov 2015 18:30:39 +0000 (UTC)
Received: (qmail 72667 invoked by uid 500); 1 Nov 2015 18:30:38 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 72591 invoked by uid 500); 1 Nov 2015 18:30:38 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 72579 invoked by uid 99); 1 Nov 2015 18:30:38 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Nov 2015 18:30:38 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id EEB641801DD
	for <dev@httpd.apache.org>; Sun,  1 Nov 2015 18:30:37 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.11
X-Spam-Level:
X-Spam-Status: No, score=-0.11 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	MIME_QP_LONG_LINE=0.001, SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id w11o-kUpj4aA for <dev@httpd.apache.org>;
	Sun,  1 Nov 2015 18:30:36 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 5682F2165B
	for <dev@httpd.apache.org>; Sun,  1 Nov 2015 18:30:35 +0000 (UTC)
Received: from [192.168.178.56] (unknown [84.150.66.215])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 9CBAB15A03BA
	for <dev@httpd.apache.org>; Sun,  1 Nov 2015 19:30:26 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1446402626; bh=tafcW7QaolA80t9gx9qSg8eql4LQdcRDkkp9NS/fdBc=;
	h=From:Subject:Date:References:In-Reply-To:To:From;
	b=Gaf1Ftmhu8V6AomNqiSrt465RSYbIGzxWvI3xWjcEHjOyUda4By9xUfrhhuUiWeg0
	 bpYvdnpSXyqh3jAXtwDjcQjtS+UPV4kt9MgUE3VVMztztBDXM5qocro1UVTRKnV9o1
	 mXoJ+mFrgSMZFm1KODjKofEehjldrSXP3Zi4kT0Q=
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain;
	charset=utf-8
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (1.0)
Subject: Re: svn commit: r1711503 - in /httpd/httpd/trunk/modules/http2: h2_conn_io.c h2_conn_io.h h2_io.c h2_io.h h2_mplx.c h2_mplx.h h2_session.c h2_stream.c h2_stream.h h2_task_input.c h2_util.c h2_util.h
Message-Id: <675AE71A-9294-427D-A5B4-F9D81E554DF8@greenbytes.de>
Date: Sun, 1 Nov 2015 19:30:26 +0100
References: <20151030161540.D25C83A0288@svn01-us-west.apache.org> <5635BE76.6000804@wanadoo.fr>
In-Reply-To: <5635BE76.6000804@wanadoo.fr>
To: dev@httpd.apache.org
X-Mailer: iPhone Mail (13B143)

Thanks for the catch! Will fix tomorrow.=20

> Am 01.11.2015 um 08:25 schrieb Christophe JAILLET <christophe.jaillet@wana=
doo.fr>:
>=20
> Hi,
>=20
> Le 30/10/2015 17:15, icing@apache.org a =C3=A9crit :
>> Author: icing
>> Date: Fri Oct 30 16:15:40 2015
>> New Revision: 1711503
>>=20
>> URL: http://svn.apache.org/viewvc?rev=3D1711503&view=3Drev
>> Log:
>> improved h2c write performance
>>=20
>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_sess=
ion.c?rev=3D1711503&r1=3D1711502&r2=3D1711503&view=3Ddiff
>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D
>> --- httpd/httpd/trunk/modules/http2/h2_session.c (original)
>> +++ httpd/httpd/trunk/modules/http2/h2_session.c Fri Oct 30 16:15:40 2015=

>> [...]
>> @@ -1180,7 +1203,7 @@ static ssize_t stream_data_cb(nghttp2_se
>>            AP_DEBUG_ASSERT(!h2_stream_is_suspended(stream));
>>      -    if (h2_conn_io_is_buffered(&session->io)) {
>> +    if (1 || h2_conn_io_is_buffered(&session->io)) {
>>          status =3D h2_stream_prep_read(stream, &nread, &eos);
>>          if (nread) {
>>              *data_flags |=3D  NGHTTP2_DATA_FLAG_NO_COPY;
> Is it intentional or a left-over?
>=20
> CJ
>=20

From dev-return-84496-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov  2 09:32:03 2015
Return-Path: <dev-return-84496-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 478BF17990
	for <apmail-httpd-dev-archive@www.apache.org>; Mon,  2 Nov 2015 09:32:03 +0000 (UTC)
Received: (qmail 9097 invoked by uid 500); 2 Nov 2015 09:32:02 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 9030 invoked by uid 500); 2 Nov 2015 09:32:02 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 9020 invoked by uid 99); 2 Nov 2015 09:32:02 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Nov 2015 09:32:02 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 82E4F1A0870
	for <dev@httpd.apache.org>; Mon,  2 Nov 2015 09:32:02 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.111
X-Spam-Level:
X-Spam-Status: No, score=-0.111 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id N1YAL8YQXAwB for <dev@httpd.apache.org>;
	Mon,  2 Nov 2015 09:32:01 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 3609C439D8
	for <dev@httpd.apache.org>; Mon,  2 Nov 2015 09:32:01 +0000 (UTC)
Received: from [192.168.1.42] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 4C0C015A044D
	for <dev@httpd.apache.org>; Mon,  2 Nov 2015 10:31:54 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1446456714; bh=jcpbKDZTHzZvhwWZ5kRXP97d2dLRbPWN2iXqFCc6Bg8=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=lBvGWOoM2y/nuSt0PD03WN/IaytFIVXP/NJBbJ28yPIXtHWpJRXZT4XhLqn1RMqHW
	 +6NjhduWKMA6J4R7RTVQyRJ+a/xo6aR9EaEX7dxN2CoV5v14SYgzhUSrORYQncxZGN
	 SCKd6s/nUTB+41K7p4I9H90nOVxXisB1PTlZ3rA4=
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: svn commit: r1711503 - in /httpd/httpd/trunk/modules/http2: h2_conn_io.c h2_conn_io.h h2_io.c h2_io.h h2_mplx.c h2_mplx.h h2_session.c h2_stream.c h2_stream.h h2_task_input.c h2_util.c h2_util.h
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <5635BDAC.7010703@wanadoo.fr>
Date: Mon, 2 Nov 2015 10:31:54 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <FB7E8AEE-1A4D-4EAC-92DA-7BF947D460AE@greenbytes.de>
References: <20151030161540.D25C83A0288@svn01-us-west.apache.org> <5635BDAC.7010703@wanadoo.fr>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)


> Am 01.11.2015 um 08:22 schrieb Christophe JAILLET =
<christophe.jaillet@wanadoo.fr>:
>=20
> Hi,
>=20
> Le 30/10/2015 17:15, icing@apache.org a =C3=A9crit :
>> [...]+            if (status =3D=3D APR_SUCCESS && padlen) {
>> +                if (padlen) {
>> +                    char pad[256];
>> +                    memset(pad, 0, padlen);
>=20
> You could save this 'pad' buffer and the 'memset' by also using the =
data from the 'static char immortal_zeros[256];' introduced above.

Good idea, will do.

> Maybe, using NGHTTP2_MAX_PADLEN instead of the 256 hard coded value =
would be cleaner?

That is in an internal header file from nghttp2. Will add an own #define =
in mod_http2 headers to make it clear where the limit comes from.

//Stefan=

From dev-return-84497-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov  2 09:41:24 2015
Return-Path: <dev-return-84497-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7DDF017A0F
	for <apmail-httpd-dev-archive@www.apache.org>; Mon,  2 Nov 2015 09:41:24 +0000 (UTC)
Received: (qmail 37051 invoked by uid 500); 2 Nov 2015 09:41:14 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 36975 invoked by uid 500); 2 Nov 2015 09:41:14 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 36965 invoked by uid 99); 2 Nov 2015 09:41:14 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Nov 2015 09:41:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 2EF231A0845
	for <dev@httpd.apache.org>; Mon,  2 Nov 2015 09:41:14 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.111
X-Spam-Level:
X-Spam-Status: No, score=-0.111 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 13xt-Z4ZSLCp for <dev@httpd.apache.org>;
	Mon,  2 Nov 2015 09:41:13 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 11EA32304E
	for <dev@httpd.apache.org>; Mon,  2 Nov 2015 09:41:12 +0000 (UTC)
Received: from [192.168.1.42] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 4A3E015A044D
	for <dev@httpd.apache.org>; Mon,  2 Nov 2015 10:41:11 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1446457271; bh=0XhQIP0wVc51s2Y1V3Icy2acwh1jlBs5vFo4hOhLZSM=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=CL6+s1DC25Yxfqr+22VwcgAPtNeDWaPl6b0IfbWC3RB5TIzT5XSjcnGrlXCgJy+Th
	 87cYctHZVCiUAJ/8bgnReQ49hsvsWSKHCz+sAQ2cvrQcq8bIJkza5DK1i9CrnJ4Y2P
	 jgIMYJVhnmbcjxEsdYrM2/ThOwvcoG+mbN4ONoMo=
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: svn commit: r1711451 - in /httpd/httpd/trunk/modules/http2: h2_conn_io.c h2_conn_io.h h2_session.c h2_stream.c h2_stream.h
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <5635BEFD.80005@wanadoo.fr>
Date: Mon, 2 Nov 2015 10:41:11 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <D611CA2C-0C45-49EE-A614-D1B116FAFD7D@greenbytes.de>
References: <20151030112951.47A403A0042@svn01-us-west.apache.org> <5635BEFD.80005@wanadoo.fr>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)


> Am 01.11.2015 um 08:27 schrieb Christophe JAILLET =
<christophe.jaillet@wanadoo.fr>:
>=20
> Hi,
>=20
> Le 30/10/2015 12:29, icing@apache.org a =C3=A9crit :
>> [...]+    else if (1) {
>> +        apr_bucket *b;
>> +
>> +        ap_log_cerror(APLOG_MARK, APLOG_TRACE2, status, =
io->connection,
>> +                      "h2_conn_io: passing %ld transient bytes to =
output filters",
>> +                      (long)length);
>> +        b =3D apr_bucket_transient_create(buf,length, =
io->output->bucket_alloc);
>> +        APR_BRIGADE_INSERT_TAIL(io->output, b);
>> +        status =3D pass_out(io->output, io);
>> +    }
>>      else {
>> +        ap_log_cerror(APLOG_MARK, APLOG_TRACE2, status, =
io->connection,
>> +                      "h2_conn_io: writing %ld bytes to brigade", =
(long)length);
>>          status =3D apr_brigade_write(io->output, pass_out, io, buf, =
length);
>> -        if (status !=3D APR_SUCCESS) {
>> -            ap_log_cerror(APLOG_MARK, APLOG_DEBUG, status, =
io->connection,
>> -                          "h2_conn_io: write error");
>> -        }
>>      }
>>            return status;
>=20
> Is the 'if (1)' intentional or a left-over?

Left-over about to be removed. Sorry for committing it like this. =
Fridays...

>> Modified: httpd/httpd/trunk/modules/http2/h2_session.c
>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_session.c?=
rev=3D1711451&r1=3D1711450&r2=3D1711451&view=3Ddiff
>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>> --- httpd/httpd/trunk/modules/http2/h2_session.c (original)
>> +++ httpd/httpd/trunk/modules/http2/h2_session.c Fri Oct 30 11:29:50 =
2015
>> @@ -249,6 +249,8 @@ static int before_frame_send_cb(nghttp2_
>>          case NGHTTP2_GOAWAY:
>>              session->flush =3D 1;
>>              break;
>> +        case NGHTTP2_DATA:
>> +
>>          default:
>>              break;
>=20
> Is this intentional or a break, some code or a /* Fall through */ is =
missing?

A fall through that proved no longer necessary. removed.

Thanks for the review!

//Stefan=

From dev-return-84498-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov  2 22:30:12 2015
Return-Path: <dev-return-84498-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F2CDD18543
	for <apmail-httpd-dev-archive@www.apache.org>; Mon,  2 Nov 2015 22:30:11 +0000 (UTC)
Received: (qmail 59678 invoked by uid 500); 2 Nov 2015 22:30:11 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 59586 invoked by uid 500); 2 Nov 2015 22:30:11 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 59576 invoked by uid 99); 2 Nov 2015 22:30:11 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Nov 2015 22:30:11 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id F10D11A282F
	for <dev@httpd.apache.org>; Mon,  2 Nov 2015 22:30:10 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.004
X-Spam-Level:
X-Spam-Status: No, score=-0.004 tagged_above=-999 required=6.31
	tests=[HEADER_FROM_DIFFERENT_DOMAINS=0.008, SPF_HELO_PASS=-0.001,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id Idk5JjcD33PH for <dev@httpd.apache.org>;
	Mon,  2 Nov 2015 22:30:10 +0000 (UTC)
Received: from plane.gmane.org (plane.gmane.org [80.91.229.3])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 81F3221602
	for <dev@httpd.apache.org>; Mon,  2 Nov 2015 22:30:09 +0000 (UTC)
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <apache-dev@m.gmane.org>)
	id 1ZtNc5-0007Dl-Mv
	for dev@httpd.apache.org; Mon, 02 Nov 2015 23:30:05 +0100
Received: from aorleans-552-1-105-207.w92-140.abo.wanadoo.fr ([92.140.232.207])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Mon, 02 Nov 2015 23:30:05 +0100
Received: from christophe.jaillet by aorleans-552-1-105-207.w92-140.abo.wanadoo.fr with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Mon, 02 Nov 2015 23:30:05 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: dev@httpd.apache.org
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Subject: Question about "Trailer" header field
Date: Mon, 2 Nov 2015 23:29:58 +0100
Lines: 28
Message-ID: <n18o57$ugg$1@ger.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: aorleans-552-1-105-207.w92-140.abo.wanadoo.fr
X-Mozilla-News-Host: news://news.gmane.org:119
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
X-Antivirus: avast! (VPS 151102-1, 02/11/2015), Outbound message
X-Antivirus-Status: Clean

Hi,

I have a couple of question/remarks concerning trailer.
This came while looking around 
https://bz.apache.org/bugzilla/show_bug.cgi?id=58177


Severals places in httpd seems to deal with RFC2616 13.5.1 End-to-end 
and Hop-by-hop Headers.
    Line 1211 of cache_util.c [1]
    Line 1311 and 1562 of mod_proxy_http.c [2]
    Line 3567 of proxy_util.c [3]


1) [1] is an exact copy of what is said in RFC2616 13.5.1
However, I wonder if the Trailers here, should not be a Trailer (without s)
Trailers (with a s) does not seem to a header field, just a keyword for TE.
Is this a typo in the RFC?


2) In [2] and [3], do some other headers should be listed and removed? 
(just as in [1])

I have not found anything equivalent and explicit in RFC7230 and co.



CJ


From dev-return-84499-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov  2 23:00:29 2015
Return-Path: <dev-return-84499-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 29597186ED
	for <apmail-httpd-dev-archive@www.apache.org>; Mon,  2 Nov 2015 23:00:29 +0000 (UTC)
Received: (qmail 22716 invoked by uid 500); 2 Nov 2015 23:00:28 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 22646 invoked by uid 500); 2 Nov 2015 23:00:28 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 22636 invoked by uid 99); 2 Nov 2015 23:00:28 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Nov 2015 23:00:28 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 2C49DC094C
	for <dev@httpd.apache.org>; Mon,  2 Nov 2015 23:00:28 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.353
X-Spam-Level: *
X-Spam-Status: No, score=1.353 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RDNS_DYNAMIC=0.363,
	SPF_HELO_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id PfezPM2-Yeng for <dev@httpd.apache.org>;
	Mon,  2 Nov 2015 23:00:18 +0000 (UTC)
Received: from nebula.c8h10n4o2.org.uk (nebula.c8h10n4o2.org.uk [80.68.88.207])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 33649444B1
	for <dev@httpd.apache.org>; Mon,  2 Nov 2015 23:00:18 +0000 (UTC)
Received: from consume.c8h10n4o2.org.uk ([2001:8b0:caee:2::2])
	by nebula.c8h10n4o2.org.uk with esmtpsa (TLS1.0:ECDHE_RSA_AES_256_CBC_SHA384:256)
	(Exim 4.84)
	(envelope-from <isoma@c8h10n4o2.org.uk>)
	id 1ZtO59-0001MT-32
	for dev@httpd.apache.org; Mon, 02 Nov 2015 23:00:07 +0000
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: Question about "Trailer" header field
From: Tim Bannister <isoma@c8h10n4o2.org.uk>
In-Reply-To: <n18o57$ugg$1@ger.gmane.org>
Date: Mon, 2 Nov 2015 23:00:05 +0000
Content-Transfer-Encoding: quoted-printable
Message-Id: <D6D5AF33-6348-4AF7-8AB2-FE5B8232A4DD@c8h10n4o2.org.uk>
References: <n18o57$ugg$1@ger.gmane.org>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

On 2 Nov 2015, at 22:29, Christophe Jaillet wrote:
>=20
> Severals places in httpd seems to deal with RFC2616 13.5.1 End-to-end =
and Hop-by-hop Headers.
>   Line 1211 of cache_util.c [1]
>   Line 1311 and 1562 of mod_proxy_http.c [2]
>   Line 3567 of proxy_util.c [3]
>=20
>=20
> 1) [1] is an exact copy of what is said in RFC2616 13.5.1
> However, I wonder if the Trailers here, should not be a Trailer =
(without s)
> Trailers (with a s) does not seem to a header field, just a keyword =
for TE.
> Is this a typo in the RFC?

With [1], I think you're right that this is a typo in RFC2616 which has =
been copied into httpd.



As for [2] and [3], the Connection: header seems to be handled in =
mod_proxy_http.c (circa line 970). Transfer-Encoding: is likewise given =
special case handling (circa line 795). I can see a case for adding a =
comment to proxy_util.c explaining this.


That leaves Proxy-Authenticate: and Proxy-Authorisation: headers. Are =
these hop-by-hop?

It makes sense for a shared cache to delete Proxy-Authenticate: from a =
response, unconditionally. Similarly Proxy-Authorisation: from a =
request. The shared nature of cacheing brings obvious security issues.


https://tools.ietf.org/html/rfc7235 says =E2=80=9Cwhen multiple proxies =
are used within the same administrative domain, such as office and =
regional caching proxies within a large corporate network, it is common =
for credentials to be generated by the user agent and passed through the =
hierarchy until consumed=E2=80=9D and =E2=80=9CA proxy MAY relay the =
credentials from the client request to the next proxy if that is the =
mechanism by which the proxies cooperatively authenticate a given =
request.=E2=80=9D

So maybe there's an opportunity (enhancement request?) to make the =
forwarding of these headers configurable. I'm not sure what the default =
should be. I think the safe option, at least for trunk, is to remove =
those headers in the proxy code as well.


--=20
Tim Bannister =E2=80=93 isoma@c8h10n4o2.org.uk


From dev-return-84500-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov  2 23:08:20 2015
Return-Path: <dev-return-84500-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8AE661875C
	for <apmail-httpd-dev-archive@www.apache.org>; Mon,  2 Nov 2015 23:08:20 +0000 (UTC)
Received: (qmail 47086 invoked by uid 500); 2 Nov 2015 23:08:08 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 46993 invoked by uid 500); 2 Nov 2015 23:08:08 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 46983 invoked by uid 99); 2 Nov 2015 23:08:08 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Nov 2015 23:08:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 6D268C094C
	for <dev@httpd.apache.org>; Mon,  2 Nov 2015 23:08:08 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id PFJ9nnxPxJwe for <dev@httpd.apache.org>;
	Mon,  2 Nov 2015 23:08:00 +0000 (UTC)
Received: from mail-qg0-f54.google.com (mail-qg0-f54.google.com [209.85.192.54])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 17FE842B60
	for <dev@httpd.apache.org>; Mon,  2 Nov 2015 23:08:00 +0000 (UTC)
Received: by qgem9 with SMTP id m9so129253701qge.1
        for <dev@httpd.apache.org>; Mon, 02 Nov 2015 15:07:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=qAlonwE7LFU6W8sQhCOfAbvjTviyrr0xZJSvMDnCdFc=;
        b=gsJezun3etzkbo5lYN6QmskDpV0eb7a8HE+7/0tJjwUGcja+mhQmRTaE+L7Aom7I4l
         Szj01E3myr25YSSj4kVeJyVk4JN+V/pHrxREtrQKMKLFHAgWFm6eYd/+c0N0DpBabCFO
         pfFes3Geu7EWCyJeHSz+kD6IkEt6JSqbKpgb+si31cyd6+0ZB7XM1/ceHUc+xEDttEyR
         TMTaBmdZFZFM0sAC38/AhXfmC89SFEjgtZbWYC6I7CPhVlATFthsHhnkFZctpOfwg1gf
         ywORwxeKHl5+F6EdD+eTg2PxpWNkm9e1Vq/VLxo7W936Sv0qzba1HkOSLmyHhRcn/GCP
         uSVw==
MIME-Version: 1.0
X-Received: by 10.140.179.147 with SMTP id z141mr35638482qhz.70.1446505679793;
 Mon, 02 Nov 2015 15:07:59 -0800 (PST)
Received: by 10.55.101.196 with HTTP; Mon, 2 Nov 2015 15:07:59 -0800 (PST)
In-Reply-To: <n18o57$ugg$1@ger.gmane.org>
References: <n18o57$ugg$1@ger.gmane.org>
Date: Tue, 3 Nov 2015 00:07:59 +0100
Message-ID: <CAKQ1sVN-BLuOM8PSBxTHC4AgcEbwBNxxG3fi3+pyT3m6kOjQWQ@mail.gmail.com>
Subject: Re: Question about "Trailer" header field
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

Hi Christophe,

On Mon, Nov 2, 2015 at 11:29 PM, Christophe JAILLET
<christophe.jaillet@wanadoo.fr> wrote:
>
> Severals places in httpd seems to deal with RFC2616 13.5.1 End-to-end and
> Hop-by-hop Headers.
>    Line 1211 of cache_util.c [1]
>    Line 1311 and 1562 of mod_proxy_http.c [2]
>    Line 3567 of proxy_util.c [3]
>
>
> 1) [1] is an exact copy of what is said in RFC2616 13.5.1
> However, I wonder if the Trailers here, should not be a Trailer (without s)
> Trailers (with a s) does not seem to a header field, just a keyword for TE.
> Is this a typo in the RFC?

I think it's rather a typo in the code, the relevant field is:
https://tools.ietf.org/html/rfc7230#section-4.4

(Note: the code in cache_util does not seem to handle the hop-by-hop
headers contained in the Connection header, like eg.
ap_proxy_clear_connection() does.)

>
>
> 2) In [2] and [3], do some other headers should be listed and removed? (just
> as in [1])

mod_proxy_http handles the response headers only, hence possibly not
exactly the same list as mod_cache (but with
ap_proxy_clear_connection() though).
Tranfer-Encoding is probably special too, since it may be required by
the output filters to determine how to forward the response.

>
> I have not found anything equivalent and explicit in RFC7230 and co.

RFC7230 Section 4.1.2 (referring to sections 4.3 and 4.4) is the
reference now (obsoleting RFC2616).

Regards,
Yann.

From dev-return-84501-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov  3 14:38:23 2015
Return-Path: <dev-return-84501-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1DD6C1826C
	for <apmail-httpd-dev-archive@www.apache.org>; Tue,  3 Nov 2015 14:38:23 +0000 (UTC)
Received: (qmail 37643 invoked by uid 500); 3 Nov 2015 14:38:13 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 37562 invoked by uid 500); 3 Nov 2015 14:38:13 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 37552 invoked by uid 99); 3 Nov 2015 14:38:13 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Nov 2015 14:38:13 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id B1851C0FC3
	for <dev@httpd.apache.org>; Tue,  3 Nov 2015 14:38:12 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.999
X-Spam-Level: ***
X-Spam-Status: No, score=3.999 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H2=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id HL-ybHUtGV1J for <dev@httpd.apache.org>;
	Tue,  3 Nov 2015 14:38:11 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp04.smtpout.orange.fr [80.12.242.126])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id C33C223032
	for <dev@httpd.apache.org>; Tue,  3 Nov 2015 14:38:10 +0000 (UTC)
Received: from wwinf1d27 ([10.232.29.101])
	by mwinf5d39 with ME
	id d2e21r0022AtyYi032e2Tl; Tue, 03 Nov 2015 15:38:02 +0100
X-ME-Helo: wwinf1d27
X-ME-Auth: Y2hyaXN0b3BoZS5qYWlsbGV0QHdhbmFkb28uZnI=
X-ME-Date: Tue, 03 Nov 2015 15:38:02 +0100
X-ME-IP: 81.56.180.75
Date: Tue, 3 Nov 2015 15:38:01 +0100 (CET)
From: Marion et Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Reply-To: Marion et Christophe JAILLET <christophe.jaillet@wanadoo.fr>
To: dev@httpd.apache.org
Message-ID: <1929926452.10839.1446561482020.JavaMail.www@wwinf1d27>
In-Reply-To: <20151103133128.DBF853A0234@svn01-us-west.apache.org>
References: <20151103133128.DBF853A0234@svn01-us-west.apache.org>
Subject: re: svn commit: r1712294 - in /httpd/httpd/branches/2.4.x: ./
 CHANGES STATUS server/scoreboard.c
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10838_1753290477.1446561482015"
X-Originating-IP: [81.56.180.75]
X-WUM-FROM: |~|
X-WUM-TO: |~|
X-WUM-REPLYTO: |~|

------=_Part_10838_1753290477.1446561482015
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

=C2=A0

=C2=A0

=C2=A0

=C2=A0

=C2=A0

> Message du 03/11/15 14:31
> De : minfrin@apache.org
> A : cvs@httpd.apache.org
> Copie =C3=A0 :=20
> Objet : svn commit: r1712294 - in /httpd/httpd/branches/2.4.x: ./ CHANGES=
 STATUS server/scoreboard.c
>=20
> Author: minfrin
> Date: Tue Nov 3 13:31:28 2015
> New Revision: 1712294
>=20
> URL: http://svn.apache.org/viewvc?rev=3D1712294&view=3Drev
> Log:
> core: Fix scoreboard crash (SIGBUS) on hardware requiring strict 64bit
> alignment (SPARC64, PPC64).
> Submitted by: ylavic
> Reviewed by: jim, minfrin
>=20
[...]
> Modified: httpd/httpd/branches/2.4.x/server/scoreboard.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/server/score=
board.c?rev=3D1712294&r1=3D1712293&r2=3D1712294&view=3Ddiff
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D
> --- httpd/httpd/branches/2.4.x/server/scoreboard.c (original)
> +++ httpd/httpd/branches/2.4.x/server/scoreboard.c Tue Nov 3 13:31:28 201=
5
> @@ -129,14 +129,19 @@ static apr_status_t ap_cleanup_shared_me
> return APR_SUCCESS;
> }
>=20
> +#define SIZE_OF_scoreboard APR_ALIGN_DEFAULT(sizeof(scoreboard))
> +#define SIZE_OF_global_score APR_ALIGN_DEFAULT(sizeof(global_score))
> +#define SIZE_OF_process_score APR_ALIGN_DEFAULT(sizeof(process_score))
> +#define SIZE_OF_worker_score APR_ALIGN_DEFAULT(sizeof(worker_score))
> +
> AP_DECLARE(int) ap_calc_scoreboard_size(void)
> {
> ap_mpm_query(AP_MPMQ_HARD_LIMIT_THREADS, &thread_limit);
> ap_mpm_query(AP_MPMQ_HARD_LIMIT_DAEMONS, &server_limit);
>=20
> - scoreboard_size =3D sizeof(global_score);
> - scoreboard_size +=3D sizeof(process_score) * server_limit;
> - scoreboard_size +=3D sizeof(worker_score) * server_limit * thread_limit=
;
> + scoreboard_size =3D SIZE_OF_global_score;
> + scoreboard_size +=3D SIZE_OF_process_score * server_limit;
> + scoreboard_size +=3D SIZE_OF_worker_score * server_limit * thread_limit=
;
>=20
> return scoreboard_size;
> }
> @@ -153,17 +158,17 @@ AP_DECLARE(void) ap_init_scoreboard(void
>=20
> ap_calc_scoreboard_size();
> ap_scoreboard_image =3D
> - ap_calloc(1, sizeof(scoreboard) + server_limit * sizeof(worker_score *)=
);
> + ap_calloc(1, SIZE_OF_scoreboard + server_limit * sizeof(worker_score *)=
);
Should this also be SIZE_OF_worker_score also here ?

=C2=A0

Best regards,

CJ

------=_Part_10838_1753290477.1446561482015
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<p>=C2=A0</p>
<p>=C2=A0</p>
<p>=C2=A0</p>
<p>=C2=A0</p>
<p>=C2=A0</p>
<blockquote style=3D"padding-left: 5px; margin-left: 5px; border-left: #ff0=
000 2px solid;">&gt; Message du 03/11/15 14:31<br />&gt; De : minfrin@apach=
e.org<br />&gt; A : cvs@httpd.apache.org<br />&gt; Copie =C3=A0 : <br />&gt=
; Objet : svn commit: r1712294 - in /httpd/httpd/branches/2.4.x: ./ CHANGES=
 STATUS server/scoreboard.c<br />&gt; <br />&gt; Author: minfrin<br />&gt; =
Date: Tue Nov 3 13:31:28 2015<br />&gt; New Revision: 1712294<br />&gt; <br=
 />&gt; URL: http://svn.apache.org/viewvc?rev=3D1712294&amp;view=3Drev<br /=
>&gt; Log:<br />&gt; core: Fix scoreboard crash (SIGBUS) on hardware requir=
ing strict 64bit<br />&gt; alignment (SPARC64, PPC64).<br />&gt; Submitted =
by: ylavic<br />&gt; Reviewed by: jim, minfrin<br />&gt; <br />[...]</block=
quote>
<blockquote style=3D"padding-left: 5px; margin-left: 5px; border-left: #ff0=
000 2px solid;">&gt; Modified: httpd/httpd/branches/2.4.x/server/scoreboard=
.c<br />&gt; URL: http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/s=
erver/scoreboard.c?rev=3D1712294&amp;r1=3D1712293&amp;r2=3D1712294&amp;view=
=3Ddiff<br />&gt; =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D<br />&gt; --- httpd/httpd/branches/2.4.x/server=
/scoreboard.c (original)<br />&gt; +++ httpd/httpd/branches/2.4.x/server/sc=
oreboard.c Tue Nov 3 13:31:28 2015<br />&gt; @@ -129,14 +129,19 @@ static a=
pr_status_t ap_cleanup_shared_me<br />&gt; return APR_SUCCESS;<br />&gt; }<=
br />&gt; <br />&gt; +#define SIZE_OF_scoreboard APR_ALIGN_DEFAULT(sizeof(s=
coreboard))<br />&gt; +#define SIZE_OF_global_score APR_ALIGN_DEFAULT(sizeo=
f(global_score))<br />&gt; +#define SIZE_OF_process_score APR_ALIGN_DEFAULT=
(sizeof(process_score))<br />&gt; +#define SIZE_OF_worker_score APR_ALIGN_D=
EFAULT(sizeof(worker_score))<br />&gt; +<br />&gt; AP_DECLARE(int) ap_calc_=
scoreboard_size(void)<br />&gt; {<br />&gt; ap_mpm_query(AP_MPMQ_HARD_LIMIT=
_THREADS, &amp;thread_limit);<br />&gt; ap_mpm_query(AP_MPMQ_HARD_LIMIT_DAE=
MONS, &amp;server_limit);<br />&gt; <br />&gt; - scoreboard_size =3D sizeof=
(global_score);<br />&gt; - scoreboard_size +=3D sizeof(process_score) * se=
rver_limit;<br />&gt; - scoreboard_size +=3D sizeof(worker_score) * server_=
limit * thread_limit;<br />&gt; + scoreboard_size =3D SIZE_OF_global_score;=
<br />&gt; + scoreboard_size +=3D SIZE_OF_process_score * server_limit;<br =
/>&gt; + scoreboard_size +=3D SIZE_OF_worker_score * server_limit * thread_=
limit;<br />&gt; <br />&gt; return scoreboard_size;<br />&gt; }<br />&gt; @=
@ -153,17 +158,17 @@ AP_DECLARE(void) ap_init_scoreboard(void<br />&gt; <br=
 />&gt; ap_calc_scoreboard_size();<br />&gt; ap_scoreboard_image =3D<br />&=
gt; - ap_calloc(1, sizeof(scoreboard) + server_limit * sizeof(worker_score =
*));<br />&gt; + ap_calloc(1, SIZE_OF_scoreboard + server_limit * sizeof(wo=
rker_score *));</blockquote>
<p>Should this also be SIZE_OF_worker_score also here ?</p>
<p>=C2=A0</p>
<p>Best regards,</p>
<p>CJ</p>
------=_Part_10838_1753290477.1446561482015--

From dev-return-84502-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov  3 14:45:38 2015
Return-Path: <dev-return-84502-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B72BF182C2
	for <apmail-httpd-dev-archive@www.apache.org>; Tue,  3 Nov 2015 14:45:38 +0000 (UTC)
Received: (qmail 55379 invoked by uid 500); 3 Nov 2015 14:45:38 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 55317 invoked by uid 500); 3 Nov 2015 14:45:38 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 55303 invoked by uid 99); 3 Nov 2015 14:45:38 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Nov 2015 14:45:38 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id C89EBC8910
	for <dev@httpd.apache.org>; Tue,  3 Nov 2015 14:45:37 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.999
X-Spam-Level: ***
X-Spam-Status: No, score=3.999 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H2=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 17xRgS_KvOnp for <dev@httpd.apache.org>;
	Tue,  3 Nov 2015 14:45:36 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp07.smtpout.orange.fr [80.12.242.129])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id D665120864
	for <dev@httpd.apache.org>; Tue,  3 Nov 2015 14:45:35 +0000 (UTC)
Received: from wwinf1m14 ([10.223.70.58])
	by mwinf5d13 with ME
	id d2lU1r0091FSVlm032lURm; Tue, 03 Nov 2015 15:45:28 +0100
X-ME-Helo: wwinf1m14
X-ME-Auth: Y2hyaXN0b3BoZS5qYWlsbGV0QHdhbmFkb28uZnI=
X-ME-Date: Tue, 03 Nov 2015 15:45:28 +0100
X-ME-IP: 81.56.180.75
Date: Tue, 3 Nov 2015 15:45:27 +0100 (CET)
From: Marion et Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Reply-To: Marion et Christophe JAILLET <christophe.jaillet@wanadoo.fr>
To: dev@httpd.apache.org
Message-ID: <2039916754.15622.1446561928230.JavaMail.www@wwinf1m14>
In-Reply-To: <1929926452.10839.1446561482020.JavaMail.www@wwinf1d27>
References: <20151103133128.DBF853A0234@svn01-us-west.apache.org>
 <1929926452.10839.1446561482020.JavaMail.www@wwinf1d27>
Subject: re: svn commit: r1712294 - in /httpd/httpd/branches/2.4.x: ./
 CHANGES STATUS server/scoreboard.c
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15621_79596284.1446561928230"
X-Originating-IP: [81.56.180.75]
X-WUM-FROM: |~|
X-WUM-TO: |~|
X-WUM-REPLYTO: |~|

------=_Part_15621_79596284.1446561928230
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

> Message du 03/11/15 15:38
> De : "Marion et Christophe JAILLET"=20
> A : dev@httpd.apache.org
> Copie =C3=A0 :=20
> Objet : re: svn commit: r1712294 - in /httpd/httpd/branches/2.4.x: ./ CHA=
NGES STATUS server/scoreboard.c
>=20
>
> =C2=A0

> =C2=A0

> =C2=A0

> =C2=A0

> =C2=A0

> Message du 03/11/15 14:31
> De : minfrin@apache.org
> A : cvs@httpd.apache.org
> Copie =C3=A0 :=20
> Objet : svn commit: r1712294 - in /httpd/httpd/branches/2.4.x: ./ CHANGES=
 STATUS server/scoreboard.c
>=20
> Author: minfrin
> Date: Tue Nov 3 13:31:28 2015
> New Revision: 1712294
>=20
> URL: http://svn.apache.org/viewvc?rev=3D1712294&view=3Drev
> Log:
> core: Fix scoreboard crash (SIGBUS) on hardware requiring strict 64bit
> alignment (SPARC64, PPC64).
> Submitted by: ylavic
> Reviewed by: jim, minfrin
>=20
[...]
> Modified: httpd/httpd/branches/2.4.x/server/scoreboard.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/server/score=
board.c?rev=3D1712294&r1=3D1712293&r2=3D1712294&view=3Ddiff
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D
> --- httpd/httpd/branches/2.4.x/server/scoreboard.c (original)
> +++ httpd/httpd/branches/2.4.x/server/scoreboard.c Tue Nov 3 13:31:28 201=
5
> @@ -129,14 +129,19 @@ static apr_status_t ap_cleanup_shared_me
> return APR_SUCCESS;
> }
>=20
> +#define SIZE_OF_scoreboard APR_ALIGN_DEFAULT(sizeof(scoreboard))
> +#define SIZE_OF_global_score APR_ALIGN_DEFAULT(sizeof(global_score))
> +#define SIZE_OF_process_score APR_ALIGN_DEFAULT(sizeof(process_score))
> +#define SIZE_OF_worker_score APR_ALIGN_DEFAULT(sizeof(worker_score))
> +
> AP_DECLARE(int) ap_calc_scoreboard_size(void)
> {
> ap_mpm_query(AP_MPMQ_HARD_LIMIT_THREADS, &thread_limit);
> ap_mpm_query(AP_MPMQ_HARD_LIMIT_DAEMONS, &server_limit);
>=20
> - scoreboard_size =3D sizeof(global_score);
> - scoreboard_size +=3D sizeof(process_score) * server_limit;
> - scoreboard_size +=3D sizeof(worker_score) * server_limit * thread_limit=
;
> + scoreboard_size =3D SIZE_OF_global_score;
> + scoreboard_size +=3D SIZE_OF_process_score * server_limit;
> + scoreboard_size +=3D SIZE_OF_worker_score * server_limit * thread_limit=
;
>=20
> return scoreboard_size;
> }
> @@ -153,17 +158,17 @@ AP_DECLARE(void) ap_init_scoreboard(void
>=20
> ap_calc_scoreboard_size();
> ap_scoreboard_image =3D
> - ap_calloc(1, sizeof(scoreboard) + server_limit * sizeof(worker_score *)=
);
> + ap_calloc(1, SIZE_OF_scoreboard + server_limit * sizeof(worker_score *)=
);
> Should this also be SIZE_OF_worker_score also here ?

> =C2=A0

> Best regards,

> CJ


=C2=A0

Forget it, "sizeof(worker_score *)" is not "sizeof(worker_score)"

Sorry for the noise.

=C2=A0

CJ

------=_Part_15621_79596284.1446561928230
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<blockquote style=3D"padding-left: 5px; margin-left: 5px; border-left: #ff0=
000 2px solid;">&gt; Message du 03/11/15 15:38<br />&gt; De : "Marion et Ch=
ristophe JAILLET" &lt;christophe.jaillet@wanadoo.fr&gt;<br />&gt; A : dev@h=
ttpd.apache.org<br />&gt; Copie =C3=A0 : <br />&gt; Objet : re: svn commit:=
 r1712294 - in /httpd/httpd/branches/2.4.x: ./ CHANGES STATUS server/scoreb=
oard.c<br />&gt; <br />&gt;
<p>&gt; =C2=A0</p>
<p>&gt; =C2=A0</p>
<p>&gt; =C2=A0</p>
<p>&gt; =C2=A0</p>
<p>&gt; =C2=A0</p>
<blockquote style=3D"padding-left: 5px; margin-left: 5px; border-left: #ff0=
000 2px solid;">&gt; Message du 03/11/15 14:31<br />&gt; De : minfrin@apach=
e.org<br />&gt; A : cvs@httpd.apache.org<br />&gt; Copie =C3=A0 : <br />&gt=
; Objet : svn commit: r1712294 - in /httpd/httpd/branches/2.4.x: ./ CHANGES=
 STATUS server/scoreboard.c<br />&gt; <br />&gt; Author: minfrin<br />&gt; =
Date: Tue Nov 3 13:31:28 2015<br />&gt; New Revision: 1712294<br />&gt; <br=
 />&gt; URL: http://svn.apache.org/viewvc?rev=3D1712294&amp;view=3Drev<br /=
>&gt; Log:<br />&gt; core: Fix scoreboard crash (SIGBUS) on hardware requir=
ing strict 64bit<br />&gt; alignment (SPARC64, PPC64).<br />&gt; Submitted =
by: ylavic<br />&gt; Reviewed by: jim, minfrin<br />&gt; <br />[...]</block=
quote>
<blockquote style=3D"padding-left: 5px; margin-left: 5px; border-left: #ff0=
000 2px solid;">&gt; Modified: httpd/httpd/branches/2.4.x/server/scoreboard=
.c<br />&gt; URL: http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/s=
erver/scoreboard.c?rev=3D1712294&amp;r1=3D1712293&amp;r2=3D1712294&amp;view=
=3Ddiff<br />&gt; =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D<br />&gt; --- httpd/httpd/branches/2.4.x/server=
/scoreboard.c (original)<br />&gt; +++ httpd/httpd/branches/2.4.x/server/sc=
oreboard.c Tue Nov 3 13:31:28 2015<br />&gt; @@ -129,14 +129,19 @@ static a=
pr_status_t ap_cleanup_shared_me<br />&gt; return APR_SUCCESS;<br />&gt; }<=
br />&gt; <br />&gt; +#define SIZE_OF_scoreboard APR_ALIGN_DEFAULT(sizeof(s=
coreboard))<br />&gt; +#define SIZE_OF_global_score APR_ALIGN_DEFAULT(sizeo=
f(global_score))<br />&gt; +#define SIZE_OF_process_score APR_ALIGN_DEFAULT=
(sizeof(process_score))<br />&gt; +#define SIZE_OF_worker_score APR_ALIGN_D=
EFAULT(sizeof(worker_score))<br />&gt; +<br />&gt; AP_DECLARE(int) ap_calc_=
scoreboard_size(void)<br />&gt; {<br />&gt; ap_mpm_query(AP_MPMQ_HARD_LIMIT=
_THREADS, &amp;thread_limit);<br />&gt; ap_mpm_query(AP_MPMQ_HARD_LIMIT_DAE=
MONS, &amp;server_limit);<br />&gt; <br />&gt; - scoreboard_size =3D sizeof=
(global_score);<br />&gt; - scoreboard_size +=3D sizeof(process_score) * se=
rver_limit;<br />&gt; - scoreboard_size +=3D sizeof(worker_score) * server_=
limit * thread_limit;<br />&gt; + scoreboard_size =3D SIZE_OF_global_score;=
<br />&gt; + scoreboard_size +=3D SIZE_OF_process_score * server_limit;<br =
/>&gt; + scoreboard_size +=3D SIZE_OF_worker_score * server_limit * thread_=
limit;<br />&gt; <br />&gt; return scoreboard_size;<br />&gt; }<br />&gt; @=
@ -153,17 +158,17 @@ AP_DECLARE(void) ap_init_scoreboard(void<br />&gt; <br=
 />&gt; ap_calc_scoreboard_size();<br />&gt; ap_scoreboard_image =3D<br />&=
gt; - ap_calloc(1, sizeof(scoreboard) + server_limit * sizeof(worker_score =
*));<br />&gt; + ap_calloc(1, SIZE_OF_scoreboard + server_limit * sizeof(wo=
rker_score *));</blockquote>
<p>&gt; Should this also be SIZE_OF_worker_score also here ?</p>
<p>&gt; =C2=A0</p>
<p>&gt; Best regards,</p>
<p>&gt; CJ</p>
</blockquote>
<p>=C2=A0</p>
<p>Forget it, "sizeof(worker_score *)" is not "sizeof(worker_score)"</p>
<p>Sorry for the noise.</p>
<p>=C2=A0</p>
<p>CJ</p>
------=_Part_15621_79596284.1446561928230--

From dev-return-84503-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov  3 17:15:23 2015
Return-Path: <dev-return-84503-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1661118B86
	for <apmail-httpd-dev-archive@www.apache.org>; Tue,  3 Nov 2015 17:15:23 +0000 (UTC)
Received: (qmail 35221 invoked by uid 500); 3 Nov 2015 17:15:22 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 35159 invoked by uid 500); 3 Nov 2015 17:15:22 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 35149 invoked by uid 99); 3 Nov 2015 17:15:22 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Nov 2015 17:15:22 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id EFB831A2D09
	for <dev@httpd.apache.org>; Tue,  3 Nov 2015 17:15:21 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id shJPBtjJ-KcH for <dev@httpd.apache.org>;
	Tue,  3 Nov 2015 17:15:21 +0000 (UTC)
Received: from mail-io0-f176.google.com (mail-io0-f176.google.com [209.85.223.176])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 1984142B79
	for <dev@httpd.apache.org>; Tue,  3 Nov 2015 17:15:21 +0000 (UTC)
Received: by iodd200 with SMTP id d200so25856589iod.0
        for <dev@httpd.apache.org>; Tue, 03 Nov 2015 09:15:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=subject:to:references:from:message-id:date:user-agent:mime-version
         :in-reply-to:content-type:content-transfer-encoding;
        bh=6p4f9aSM8AXpiW/p1ttBJVDbZumJ7gpP/zxRphRXzXw=;
        b=EQ9OqPjm7qX9ix2K35ZNiz1w7osJocTEZfUgTg59iUpYLHIpoYmJKuqIorME3SQAGW
         +3Sk5Ngtlf+3n0oNOSz/RoXtAv1ep9sSyZ2o3e03rTzFOlbl7WjHz+LL8fj2ht4AMnSO
         IONcsXIezcDyjaO8SIBEkrhQhPO1GPhWiudt+hpI2PKRHF+L6P+M+Hf4BWGWbJb2dEPh
         BnZOfpEz+tOAqhZMACpYB3VQY2uyNsKKuRekr6EBDNcjck1Zf571gu4UPjNpn3RrUa2s
         RTsDUDJPbEEAadb2SjcOFO70VGVvdsHVSYSg33bd1lo6uSK97ZVEfJ3CUpKKyWoNgA+n
         qzRw==
X-Received: by 10.107.12.18 with SMTP id w18mr33746028ioi.131.1446570920678;
        Tue, 03 Nov 2015 09:15:20 -0800 (PST)
Received: from [192.168.2.176] (c-68-54-211-3.hsd1.in.comcast.net. [68.54.211.3])
        by smtp.gmail.com with ESMTPSA id m29sm9599133iod.38.2015.11.03.09.15.18
        for <dev@httpd.apache.org>
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Tue, 03 Nov 2015 09:15:19 -0800 (PST)
Subject: Re: Is Apache getting too patchy?
To: dev@httpd.apache.org
References: <38B6AA15-AB3C-47AC-B96D-7DA8094F99F9@jaguNET.com>
 <562E5A1F.9080201@gmail.com> <20151026222322.232ef884@baldur>
 <40FF7659-3F5A-4010-9A4B-D7E09B9ACF95@c8h10n4o2.org.uk>
 <995B8E3C-91B1-4A36-9940-A91EE86AE9B1@sharp.fm> <562FA608.8020501@gmail.com>
 <n0v1bv$5ng$1@ger.gmane.org>
From: Jacob Champion <champion.p@gmail.com>
Message-ID: <5638EBA5.4050508@gmail.com>
Date: Tue, 3 Nov 2015 09:15:17 -0800
User-Agent: Mozilla/5.0 (X11; Linux i686; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
In-Reply-To: <n0v1bv$5ng$1@ger.gmane.org>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

On 10/29/2015 11:05 PM, Christophe JAILLET wrote:
> To give you some ideas of what can be looked at easily by new comers:

Hi Christophe,

Thanks for the list! Is there any way to get these into the STATUS, or 
into a document that the STATUS points to? (The current "Contributors 
looking for a mission" section tries to give a list of all the things 
that _can_ be done, but as a newbie I'm looking for "here's what the 
devs _want_ you to focus on for this release".)

> EASY
> ====
> ...
>     - Speedup/cleanup code
>          --> See http://svn.apache.org/r1701717

It might be "easy" for me to micro-optimize sections of code, but I 
don't really have the experience yet to know which optimizations are 
actually useful and which are just noise. Do you have a test setup with 
ApacheBench/something else that I can attempt to emulate? Or known 
hotspots that you're wanting additional eyes on, maybe in a certain 
module or MPM?

> Hoping these few lines can help or can be a starting point for new comers.

These are very helpful, at least to me. Knowing what the dev team would 
like more hands on "right now" is much nicer than grepping through TODOs.

--Jacob


From dev-return-84504-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov  3 20:06:22 2015
Return-Path: <dev-return-84504-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EBE171879B
	for <apmail-httpd-dev-archive@www.apache.org>; Tue,  3 Nov 2015 20:06:21 +0000 (UTC)
Received: (qmail 48837 invoked by uid 500); 3 Nov 2015 20:06:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 48758 invoked by uid 500); 3 Nov 2015 20:06:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 48748 invoked by uid 99); 3 Nov 2015 20:06:16 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Nov 2015 20:06:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id ED7771A0ACE
	for <dev@httpd.apache.org>; Tue,  3 Nov 2015 20:06:15 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.889
X-Spam-Level: **
X-Spam-Status: No, score=2.889 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=fmr.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id ElRyCmYybwfZ for <dev@httpd.apache.org>;
	Tue,  3 Nov 2015 20:06:13 +0000 (UTC)
Received: from msgimsm302vapp.fmr.com (MSGIMSM302VAPP.fmr.com [192.223.243.209])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 2132F23038
	for <dev@httpd.apache.org>; Tue,  3 Nov 2015 20:06:12 +0000 (UTC)
Received: from MSGRTP1DAG01E.DMN1.FMR.com (MSGRTP1DAG01E.dmn1.fmr.com [10.95.186.12])
	by msgimsm302vapp.fmr.com (Sentrion-MTA-4.3.2/Sentrion-MTA-4.3.2) with ESMTP id tA3K5u4x014389
	(version=TLSv1.2 cipher=ECDHE-RSA-AES256-SHA384 bits=256 verify=FAIL)
	for <dev@httpd.apache.org>; Tue, 3 Nov 2015 20:06:06 GMT
DKIM-Filter: OpenDKIM Filter v2.7.5 msgimsm302vapp.fmr.com tA3K5u4x014389
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=fmr.com;
	s=2015-02-19-fmr-com; t=1446581166;
	bh=X7VpVSmNCVAK599bxa7GtGwgmzdOYAOrAzTJVD5S1FA=;
	h=From:To:Subject:Date;
	b=IojETcNFIiRtfm5dF6tznjboNGTugt80l0sUNBYVEntl+DCZQEjVQEjewSGAfvk6y
	 amwhb02i1uyqfmM13//Demw6Az8HJ8BGbG+gdgjCYZ/Mw0yf8V7ERXsWmuegWuVpr5
	 8Ry7MGi5sZBElx/wAG43tve1igkLoou9Bz6XC5Cc=
Received: from MSGRTP2DAG01D.DMN1.FMR.com (10.195.186.12) by
 MSGRTP1DAG01E.DMN1.FMR.com (10.95.186.12) with Microsoft SMTP Server (TLS) id
 15.0.1130.7; Tue, 3 Nov 2015 15:05:31 -0500
Received: from MSGRTP2DAG01B.DMN1.FMR.com (10.195.186.11) by
 MSGRTP2DAG01D.DMN1.FMR.com (10.195.186.12) with Microsoft SMTP Server (TLS)
 id 15.0.1130.7; Tue, 3 Nov 2015 15:05:30 -0500
Received: from MSGRTP2DAG01B.DMN1.FMR.com ([fe80::492b:8394:c88:d67c]) by
 MSGRTP2DAG01B.DMN1.FMR.com ([fe80::492b:8394:c88:d67c%18]) with mapi id
 15.00.1130.005; Tue, 3 Nov 2015 15:05:30 -0500
From: "PAN, JIN" <Jin.Pan@fmr.com>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
Subject: Question on multiple <Directory> sections merging
Thread-Topic: Question on multiple <Directory> sections merging
Thread-Index: AdEWcvwSnWkSKt9+RJu8Wt3yEo+MmA==
Date: Tue, 3 Nov 2015 20:05:30 +0000
Message-ID: <cf4d9a5830c1495bb9eee1bfc0da3891@MSGRTP2DAG01B.DMN1.FMR.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-ms-exchange-transport-fromentityheader: Hosted
x-originating-ip: [10.33.64.133]
Content-Type: multipart/alternative;
	boundary="_000_cf4d9a5830c1495bb9eee1bfc0da3891MSGRTP2DAG01BDMN1FMRcom_"
MIME-Version: 1.0

--_000_cf4d9a5830c1495bb9eee1bfc0da3891MSGRTP2DAG01BDMN1FMRcom_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

Is there anyone familiar with the Apache <Directory> section merge that can=
 explain the merging behavior?

Posting this to dev, because this is not a usage issue. We are writing a cu=
stom module that needs to have different context from multiple <Directory> =
sections merged, so that a request made for "foo/bar" will have access to i=
ts top level <Directory> context, ie "foo/" and "/" as well.

We observed the following merge behavior with <Directory>, and don't unders=
tand what's going on...

-          The merge happens from "/" to "/dir1/dir2" if config line exists=
 in "/", but NOT from "/dir1" to "/dir1/dir2" if config line exists in "/di=
r1".

This is problematic if everything only works if we must specify something a=
t the "/" level.

-          Order of the config lines as they appear in httpd.conf does not =
matter.


I'm demonstrating this using foo.html and the version 2.4 mod_dir rather th=
an my mod, in order to exclude any user coding issues. (So in other words, =
mod_dir's merge_dir_configs behaves the same as my mod). Given the file loc=
ation below, and as in Case 1 working config below, the Directory "/" confi=
g defines foo.html,  and a request made for "foo/bar" properly displays the=
 "htdocs/foo/bar/foo.html" page demonstrating the config merge from "/" to =
"foo/bar". However, if we move the same config line to the "/foo" section (=
as in Case2 below), then the merge does not happen, and in this case, the s=
ame request for "foo/bar" displays the standard directory listing, and not =
the foo.html page even though it exists in /foo/bar directory. Why?

I would like to point out that if all sections are changed to use <Location=
> instead, then the foo.html is displayed in both cases. But just having <L=
ocation> working the way we want is insufficient as we cannot tell our user=
s to only use <Location>.

We are going by the Apache 2.4 documentation (link included below) to expec=
t the config lines illustrated in both cases to merge the directory context=
s. Any insights to the merging sequence will be greatly appreciated!

Thank you!
-Jin

Filesystem:
                % ls /usr/local/apache2/htdocs
                foo
                % ls /usr/local/apache2/htdocs/foo
                bar
                % ls /usr/local/apache2/htdocs/foo/bar
                foo.html

Case 1: Working Config:
                <Directory />
                                DirectoryIndex foo.html
                </Directory>
                <Directory /foo>
                </Directory>
                <Directory /foo/bar>
                </Directory>

Case 2: Not Working Config
                <Directory />
                </Directory>
                <Directory /foo>
                                DirectoryIndex foo.html
                </Directory>
                <Directory /foo/bar>
                </Directory>

Different behavior with <Location>, this works below
                <Location />
                </Location>
                <Location /foo>
                                DirectoryIndex foo.html
                </Location>
                <Location /foo/bar>
                </Location>

https://httpd.apache.org/docs/2.4/sections.html says the following on secti=
on merging
" ... <Directory "/var/web/dir"> will be processed before <Directory "/var/=
web/dir/subdir">. If multiple <Directory><https://httpd.apache.org/docs/2.4=
/mod/core.html#directory> sections apply to the same directory they are pro=
cessed in the configuration file order. ..."


--_000_cf4d9a5830c1495bb9eee1bfc0da3891MSGRTP2DAG01BDMN1FMRcom_
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" xmlns:o=3D"urn:schemas-micr=
osoft-com:office:office" xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" xmlns=3D"http:=
//www.w3.org/TR/REC-html40">
<head>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dus-ascii"=
>
<meta name=3D"Generator" content=3D"Microsoft Word 14 (filtered medium)">
<style><!--
/* Font Definitions */
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
code
	{mso-style-priority:99;
	font-family:"Courier New";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{mso-style-priority:34;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
/* List Definitions */
@list l0
	{mso-list-id:1371412961;
	mso-list-type:hybrid;
	mso-list-template-ids:-978823448 414757200 67698691 67698693 67698689 6769=
8691 67698693 67698689 67698691 67698693;}
@list l0:level1
	{mso-level-start-at:0;
	mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;
	font-family:"Calibri","sans-serif";
	mso-fareast-font-family:Calibri;}
@list l0:level2
	{mso-level-number-format:bullet;
	mso-level-text:o;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:1.25in;
	text-indent:-.25in;
	font-family:"Courier New";}
@list l0:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F0A7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:1.75in;
	text-indent:-.25in;
	font-family:Wingdings;}
@list l0:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:2.25in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l0:level5
	{mso-level-number-format:bullet;
	mso-level-text:o;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:2.75in;
	text-indent:-.25in;
	font-family:"Courier New";}
@list l0:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F0A7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:3.25in;
	text-indent:-.25in;
	font-family:Wingdings;}
@list l0:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:3.75in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l0:level8
	{mso-level-number-format:bullet;
	mso-level-text:o;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:4.25in;
	text-indent:-.25in;
	font-family:"Courier New";}
@list l0:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F0A7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:4.75in;
	text-indent:-.25in;
	font-family:Wingdings;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]-->
</head>
<body lang=3D"EN-US" link=3D"blue" vlink=3D"purple">
<div class=3D"WordSection1">
<p class=3D"MsoNormal">Hi,<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">Is there anyone familiar with the Apache &lt;Directo=
ry&gt; section merge that can explain the merging behavior?
<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">Posting this to dev, because this is not a usage iss=
ue. We are writing a custom module that needs to have different context fro=
m multiple &lt;Directory&gt; sections merged, so that a request made for &#=
8220;foo/bar&#8221; will have access to its top level
 &lt;Directory&gt; context, ie &#8220;foo/&#8221; and &#8220;/&#8221; as we=
ll. <o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">We observed the following merge behavior with &lt;Di=
rectory&gt;, and don&#8217;t understand what&#8217;s going on&#8230;<o:p></=
o:p></p>
<p class=3D"MsoListParagraph" style=3D"margin-left:.75in;text-indent:-.25in=
;mso-list:l0 level1 lfo1">
<![if !supportLists]><span style=3D"mso-list:Ignore">-<span style=3D"font:7=
.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;
</span></span><![endif]>The merge happens from &#8220;/&#8221; to &#8220;/d=
ir1/dir2&#8221; if config line exists in &#8220;/&#8221;, but NOT from &#82=
20;/dir1&#8221; to &#8220;/dir1/dir2&#8221; if config line exists in &#8220=
;/dir1&#8221;.<o:p></o:p></p>
<p class=3D"MsoListParagraph" style=3D"margin-left:.75in">This is problemat=
ic if everything only works if we must specify something at the &#8220;/&#8=
221; level.<o:p></o:p></p>
<p class=3D"MsoListParagraph" style=3D"margin-left:.75in;text-indent:-.25in=
;mso-list:l0 level1 lfo1">
<![if !supportLists]><span style=3D"mso-list:Ignore">-<span style=3D"font:7=
.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;
</span></span><![endif]>Order of the config lines as they appear in httpd.c=
onf does not matter.<o:p></o:p></p>
<p class=3D"MsoListParagraph" style=3D"margin-left:.75in"><o:p>&nbsp;</o:p>=
</p>
<p class=3D"MsoNormal">I&#8217;m demonstrating this using foo.html and the =
version 2.4 mod_dir rather than my mod, in order to exclude any user coding=
 issues. (So in other words, mod_dir&#8217;s merge_dir_configs behaves the =
same as my mod). Given the file location below,
 and as in Case 1 working config below, the Directory &#8220;/&#8221; confi=
g defines foo.html, &nbsp;and a request made for &#8220;foo/bar&#8221; prop=
erly displays the &#8220;htdocs/foo/bar/foo.html&#8221; page demonstrating =
the config merge from &#8220;/&#8221; to &#8220;foo/bar&#8221;. However, if=
 we move the same config
 line to the &#8220;/foo&#8221; section (as in Case2 below), then the merge=
 does not happen, and in this case, the same request for &#8220;foo/bar&#82=
21; displays the standard directory listing, and not the foo.html page even=
 though it exists in /foo/bar directory. Why?<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">I would like to point out that if all sections are c=
hanged to use &lt;Location&gt; instead, then the foo.html is displayed in b=
oth cases. But just having &lt;Location&gt; working the way we want is insu=
fficient as we cannot tell our users to only use
 &lt;Location&gt;. <o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">We are going by the Apache 2.4 documentation (link i=
ncluded below) to expect the config lines illustrated in both cases to merg=
e the directory contexts. Any insights to the merging sequence will be grea=
tly appreciated!<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">Thank you!<o:p></o:p></p>
<p class=3D"MsoNormal">-Jin<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">Filesystem:<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; % ls /usr/local/apache2/htdocs<o:p><=
/o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foo<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; % ls /usr/local/apache2/htdocs/foo<o=
:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bar<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; % ls /usr/local/apache2/htdocs/foo/b=
ar<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foo.html<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">Case 1: Working Config:<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Directory /&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DirectoryIndex foo.h=
tml<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Directory&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Directory /foo&gt;<o:p></o:p></p=
>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Directory&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Directory /foo/bar&gt;<o:p></o:p=
></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Directory&gt;<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">Case 2: Not Working Config<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Directory /&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Directory&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Directory /foo&gt;<o:p></o:p></p=
>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DirectoryIndex foo.h=
tml<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Directory&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Directory /foo/bar&gt;<o:p></o:p=
></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Directory&gt;<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">Different behavior with &lt;Location&gt;, this works=
 below<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Location /&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Location&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Location /foo&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DirectoryIndex =
foo.html<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Location&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Location /foo/bar&gt;<o:p></o:p>=
</p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Location&gt;<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal"><a href=3D"https://httpd.apache.org/docs/2.4/section=
s.html">https://httpd.apache.org/docs/2.4/sections.html</a> says the follow=
ing on section merging<o:p></o:p></p>
<p class=3D"MsoNormal"><code><span lang=3D"EN" style=3D"font-size:10.5pt;co=
lor:#003366">&#8220; &#8230; &lt;Directory &quot;/var/web/dir&quot;&gt;</sp=
an></code><span lang=3D"EN" style=3D"font-size:10.5pt;font-family:&quot;Ari=
al&quot;,&quot;sans-serif&quot;;color:#003366"> will be processed before
</span><code><span lang=3D"EN" style=3D"font-size:10.5pt;color:#003366">&lt=
;Directory &quot;/var/web/dir/subdir&quot;&gt;</span></code><span lang=3D"E=
N" style=3D"font-size:10.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif=
&quot;;color:#003366">. If multiple
</span><code><span lang=3D"EN" style=3D"font-size:10.5pt;color:#287F00"><a =
href=3D"https://httpd.apache.org/docs/2.4/mod/core.html#directory"><span st=
yle=3D"color:#287F00">&lt;Directory&gt;</span></a></span></code><span lang=
=3D"EN" style=3D"font-size:10.5pt;font-family:&quot;Arial&quot;,&quot;sans-=
serif&quot;;color:#003366">
 sections apply to the same directory they are processed in the configurati=
on file order. &#8230;&#8221;</span><o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
</div>
</body>
</html>

--_000_cf4d9a5830c1495bb9eee1bfc0da3891MSGRTP2DAG01BDMN1FMRcom_--

From dev-return-84505-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov  3 21:36:27 2015
Return-Path: <dev-return-84505-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DD53F18E55
	for <apmail-httpd-dev-archive@www.apache.org>; Tue,  3 Nov 2015 21:36:27 +0000 (UTC)
Received: (qmail 39304 invoked by uid 500); 3 Nov 2015 21:36:27 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 39241 invoked by uid 500); 3 Nov 2015 21:36:27 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 39231 invoked by uid 99); 3 Nov 2015 21:36:26 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Nov 2015 21:36:26 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 81240C3924
	for <dev@httpd.apache.org>; Tue,  3 Nov 2015 21:36:26 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.889
X-Spam-Level: **
X-Spam-Status: No, score=2.889 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=fmr.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id nVwftBAA4s2E for <dev@httpd.apache.org>;
	Tue,  3 Nov 2015 21:36:25 +0000 (UTC)
Received: from msgimsm103vapp.fmr.com (msgimsm103vapp.fmr.com [192.223.198.36])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id F3BAE42B79
	for <dev@httpd.apache.org>; Tue,  3 Nov 2015 21:36:24 +0000 (UTC)
Received: from MSGRTP2DAG01F.DMN1.FMR.com (MSGRTP2DAG01F.dmn1.fmr.com [10.195.186.13])
	by msgimsm103vapp.fmr.com (Sentrion-MTA-4.3.2/Sentrion-MTA-4.3.2) with ESMTP id tA3LaIbb032501
	(version=TLSv1.2 cipher=ECDHE-RSA-AES256-SHA384 bits=256 verify=FAIL)
	for <dev@httpd.apache.org>; Tue, 3 Nov 2015 21:36:18 GMT
DKIM-Filter: OpenDKIM Filter v2.7.5 msgimsm103vapp.fmr.com tA3LaIbb032501
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=fmr.com;
	s=2015-02-19-fmr-com; t=1446586578;
	bh=4cGvrtN7OnYEaqG3QfVr6JCTMjIf4afYeHdh49i7aiA=;
	h=From:To:Subject:Date:References:In-Reply-To;
	b=N17YusTdi2i/UJdCoJF93iYvKYxjOFqW7/O7weG59X4iFDVsKXtfiTEZ8ZyFe8gvC
	 wxv5386P4MGtUWp92zumAQ+X4+4tgAEWB0VfIOC0jziWfoaziD+9Be1xc08Shw/hs+
	 0cqigVXY0adjDIwTV64nqRKlsVQZNMlfbLxL8AEQ=
Received: from MSGRTP2DAG01B.DMN1.FMR.com (10.195.186.11) by
 MSGRTP2DAG01F.DMN1.FMR.com (10.195.186.13) with Microsoft SMTP Server (TLS)
 id 15.0.1130.7; Tue, 3 Nov 2015 16:36:17 -0500
Received: from MSGRTP2DAG01B.DMN1.FMR.com ([fe80::492b:8394:c88:d67c]) by
 MSGRTP2DAG01B.DMN1.FMR.com ([fe80::492b:8394:c88:d67c%18]) with mapi id
 15.00.1130.005; Tue, 3 Nov 2015 16:36:17 -0500
From: "PAN, JIN" <Jin.Pan@fmr.com>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
Subject: RE: Question on multiple <Directory> sections merging
Thread-Topic: Question on multiple <Directory> sections merging
Thread-Index: AdEWcvwSnWkSKt9+RJu8Wt3yEo+MmAACunTA
Date: Tue, 3 Nov 2015 21:36:17 +0000
Message-ID: <6210d64c4d884fcb80348eb3918cb5cd@MSGRTP2DAG01B.DMN1.FMR.com>
References: <cf4d9a5830c1495bb9eee1bfc0da3891@MSGRTP2DAG01B.DMN1.FMR.com>
In-Reply-To: <cf4d9a5830c1495bb9eee1bfc0da3891@MSGRTP2DAG01B.DMN1.FMR.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-ms-exchange-transport-fromentityheader: Hosted
x-originating-ip: [10.33.64.133]
Content-Type: multipart/alternative;
	boundary="_000_6210d64c4d884fcb80348eb3918cb5cdMSGRTP2DAG01BDMN1FMRcom_"
MIME-Version: 1.0

--_000_6210d64c4d884fcb80348eb3918cb5cdMSGRTP2DAG01BDMN1FMRcom_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi again,

Sorry it's still an user issue, but I'm writing to this list to inform peop=
le that I have been helped. Thanks Jacob!

I did not understand that the <Directory "/path">  requires its path input =
to have the absolute path of DocumentRoot prefixed. The dir merge function =
from mod_dir and my own mod were both correctly provided with pointers that=
 point to nothing, as directory mappings were not successful.

The corrected config should have been like this for the non working Case2 s=
tated in my original email:

                <Directory /usr/local/apache2/htdocs/>
                </Directory>
                <Directory /usr/local/apache2/htdocs/foo>
                                DirectoryIndex foo.html
                </Directory>
                <Directory /usr/local/apache2/htdocs/foo/bar>
                </Directory>

Thanks,
Jin

From: PAN, JIN
Sent: Tuesday, November 03, 2015 3:06 PM
To: dev@httpd.apache.org
Subject: Question on multiple <Directory> sections merging

Hi,

Is there anyone familiar with the Apache <Directory> section merge that can=
 explain the merging behavior?

Posting this to dev, because this is not a usage issue. We are writing a cu=
stom module that needs to have different context from multiple <Directory> =
sections merged, so that a request made for "foo/bar" will have access to i=
ts top level <Directory> context, ie "foo/" and "/" as well.

We observed the following merge behavior with <Directory>, and don't unders=
tand what's going on...

-          The merge happens from "/" to "/dir1/dir2" if config line exists=
 in "/", but NOT from "/dir1" to "/dir1/dir2" if config line exists in "/di=
r1".

This is problematic if everything only works if we must specify something a=
t the "/" level.

-          Order of the config lines as they appear in httpd.conf does not =
matter.


I'm demonstrating this using foo.html and the version 2.4 mod_dir rather th=
an my mod, in order to exclude any user coding issues. (So in other words, =
mod_dir's merge_dir_configs behaves the same as my mod). Given the file loc=
ation below, and as in Case 1 working config below, the Directory "/" confi=
g defines foo.html,  and a request made for "foo/bar" properly displays the=
 "htdocs/foo/bar/foo.html" page demonstrating the config merge from "/" to =
"foo/bar". However, if we move the same config line to the "/foo" section (=
as in Case2 below), then the merge does not happen, and in this case, the s=
ame request for "foo/bar" displays the standard directory listing, and not =
the foo.html page even though it exists in /foo/bar directory. Why?

I would like to point out that if all sections are changed to use <Location=
> instead, then the foo.html is displayed in both cases. But just having <L=
ocation> working the way we want is insufficient as we cannot tell our user=
s to only use <Location>.

We are going by the Apache 2.4 documentation (link included below) to expec=
t the config lines illustrated in both cases to merge the directory context=
s. Any insights to the merging sequence will be greatly appreciated!

Thank you!
-Jin

Filesystem:
                % ls /usr/local/apache2/htdocs
                foo
                % ls /usr/local/apache2/htdocs/foo
                bar
                % ls /usr/local/apache2/htdocs/foo/bar
                foo.html

Case 1: Working Config:
                <Directory />
                                DirectoryIndex foo.html
                </Directory>
                <Directory /foo>
                </Directory>
                <Directory /foo/bar>
                </Directory>

Case 2: Not Working Config
                <Directory />
                </Directory>
                <Directory /foo>
                                DirectoryIndex foo.html
                </Directory>
                <Directory /foo/bar>
                </Directory>

Different behavior with <Location>, this works below
                <Location />
                </Location>
                <Location /foo>
                                DirectoryIndex foo.html
                </Location>
                <Location /foo/bar>
                </Location>

https://httpd.apache.org/docs/2.4/sections.html says the following on secti=
on merging
" ... <Directory "/var/web/dir"> will be processed before <Directory "/var/=
web/dir/subdir">. If multiple <Directory><https://httpd.apache.org/docs/2.4=
/mod/core.html#directory> sections apply to the same directory they are pro=
cessed in the configuration file order. ..."


--_000_6210d64c4d884fcb80348eb3918cb5cdMSGRTP2DAG01BDMN1FMRcom_
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" xmlns:o=3D"urn:schemas-micr=
osoft-com:office:office" xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" xmlns=3D"http:=
//www.w3.org/TR/REC-html40">
<head>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dus-ascii"=
>
<meta name=3D"Generator" content=3D"Microsoft Word 14 (filtered medium)">
<style><!--
/* Font Definitions */
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
code
	{mso-style-priority:99;
	font-family:"Courier New";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{mso-style-priority:34;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
span.EmailStyle19
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
span.EmailStyle20
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-size:10.0pt;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
/* List Definitions */
@list l0
	{mso-list-id:1371412961;
	mso-list-type:hybrid;
	mso-list-template-ids:-978823448 414757200 67698691 67698693 67698689 6769=
8691 67698693 67698689 67698691 67698693;}
@list l0:level1
	{mso-level-start-at:0;
	mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;
	font-family:"Calibri","sans-serif";
	mso-fareast-font-family:Calibri;}
@list l0:level2
	{mso-level-number-format:bullet;
	mso-level-text:o;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:1.25in;
	text-indent:-.25in;
	font-family:"Courier New";}
@list l0:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F0A7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:1.75in;
	text-indent:-.25in;
	font-family:Wingdings;}
@list l0:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:2.25in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l0:level5
	{mso-level-number-format:bullet;
	mso-level-text:o;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:2.75in;
	text-indent:-.25in;
	font-family:"Courier New";}
@list l0:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F0A7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:3.25in;
	text-indent:-.25in;
	font-family:Wingdings;}
@list l0:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:3.75in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l0:level8
	{mso-level-number-format:bullet;
	mso-level-text:o;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:4.25in;
	text-indent:-.25in;
	font-family:"Courier New";}
@list l0:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F0A7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:4.75in;
	text-indent:-.25in;
	font-family:Wingdings;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]-->
</head>
<body lang=3D"EN-US" link=3D"blue" vlink=3D"purple">
<div class=3D"WordSection1">
<p class=3D"MsoNormal"><span style=3D"color:#1F497D">Hi again,<o:p></o:p></=
span></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D"><o:p>&nbsp;</o:p></spa=
n></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D">Sorry it&#8217;s still=
 an user issue, but I&#8217;m writing to this list to inform people that I =
have been helped. Thanks Jacob!<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D"><o:p>&nbsp;</o:p></spa=
n></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D">I did not understand t=
hat the &lt;Directory &#8220;/path&#8221;&gt;&nbsp; requires its path input=
 to have the absolute path of DocumentRoot prefixed. The dir merge function=
 from mod_dir and my own mod were both correctly provided with
 pointers that point to nothing, as directory mappings were not successful.=
<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D"><o:p>&nbsp;</o:p></spa=
n></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D">The corrected config s=
hould have been like this for the non working Case2 stated in my original e=
mail:<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D"><o:p>&nbsp;</o:p></spa=
n></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D">&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Di=
rectory /usr/local/apache2/htdocs/&gt;<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D">&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/D=
irectory&gt;<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D">&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Di=
rectory /usr/local/apache2/htdocs/foo&gt;<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D">&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp; DirectoryIndex foo.html<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D">&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/D=
irectory&gt;<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D">&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Di=
rectory /usr/local/apache2/htdocs/foo/bar&gt;<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D">&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/D=
irectory&gt;<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D"><o:p>&nbsp;</o:p></spa=
n></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D">Thanks,<o:p></o:p></sp=
an></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D">Jin<o:p></o:p></span><=
/p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D"><o:p>&nbsp;</o:p></spa=
n></p>
<div>
<div style=3D"border:none;border-top:solid #B5C4DF 1.0pt;padding:3.0pt 0in =
0in 0in">
<p class=3D"MsoNormal" style=3D"margin-left:.5in"><b><span style=3D"font-si=
ze:10.0pt;font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;">From:</spa=
n></b><span style=3D"font-size:10.0pt;font-family:&quot;Tahoma&quot;,&quot;=
sans-serif&quot;"> PAN, JIN
<br>
<b>Sent:</b> Tuesday, November 03, 2015 3:06 PM<br>
<b>To:</b> dev@httpd.apache.org<br>
<b>Subject:</b> Question on multiple &lt;Directory&gt; sections merging<o:p=
></o:p></span></p>
</div>
</div>
<p class=3D"MsoNormal" style=3D"margin-left:.5in"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">Hi,<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">Is there anyone familiar =
with the Apache &lt;Directory&gt; section merge that can explain the mergin=
g behavior?
<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">Posting this to dev, beca=
use this is not a usage issue. We are writing a custom module that needs to=
 have different context from multiple &lt;Directory&gt; sections merged, so=
 that a request made for &#8220;foo/bar&#8221; will have
 access to its top level &lt;Directory&gt; context, ie &#8220;foo/&#8221; a=
nd &#8220;/&#8221; as well. <o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">We observed the following=
 merge behavior with &lt;Directory&gt;, and don&#8217;t understand what&#82=
17;s going on&#8230;<o:p></o:p></p>
<p class=3D"MsoListParagraph" style=3D"margin-left:1.25in;text-indent:-.25i=
n;mso-list:l0 level1 lfo2">
<![if !supportLists]><span style=3D"mso-list:Ignore">-<span style=3D"font:7=
.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;
</span></span><![endif]>The merge happens from &#8220;/&#8221; to &#8220;/d=
ir1/dir2&#8221; if config line exists in &#8220;/&#8221;, but NOT from &#82=
20;/dir1&#8221; to &#8220;/dir1/dir2&#8221; if config line exists in &#8220=
;/dir1&#8221;.<o:p></o:p></p>
<p class=3D"MsoListParagraph" style=3D"margin-left:1.25in">This is problema=
tic if everything only works if we must specify something at the &#8220;/&#=
8221; level.<o:p></o:p></p>
<p class=3D"MsoListParagraph" style=3D"margin-left:1.25in;text-indent:-.25i=
n;mso-list:l0 level1 lfo2">
<![if !supportLists]><span style=3D"mso-list:Ignore">-<span style=3D"font:7=
.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;
</span></span><![endif]>Order of the config lines as they appear in httpd.c=
onf does not matter.<o:p></o:p></p>
<p class=3D"MsoListParagraph" style=3D"margin-left:1.25in"><o:p>&nbsp;</o:p=
></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">I&#8217;m demonstrating t=
his using foo.html and the version 2.4 mod_dir rather than my mod, in order=
 to exclude any user coding issues. (So in other words, mod_dir&#8217;s mer=
ge_dir_configs behaves the same as my mod). Given
 the file location below, and as in Case 1 working config below, the Direct=
ory &#8220;/&#8221; config defines foo.html, &nbsp;and a request made for &=
#8220;foo/bar&#8221; properly displays the &#8220;htdocs/foo/bar/foo.html&#=
8221; page demonstrating the config merge from &#8220;/&#8221; to &#8220;fo=
o/bar&#8221;. However,
 if we move the same config line to the &#8220;/foo&#8221; section (as in C=
ase2 below), then the merge does not happen, and in this case, the same req=
uest for &#8220;foo/bar&#8221; displays the standard directory listing, and=
 not the foo.html page even though it exists in /foo/bar
 directory. Why?<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">I would like to point out=
 that if all sections are changed to use &lt;Location&gt; instead, then the=
 foo.html is displayed in both cases. But just having &lt;Location&gt; work=
ing the way we want is insufficient as we cannot
 tell our users to only use &lt;Location&gt;. <o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">We are going by the Apach=
e 2.4 documentation (link included below) to expect the config lines illust=
rated in both cases to merge the directory contexts. Any insights to the me=
rging sequence will be greatly appreciated!<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">Thank you!<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">-Jin<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">Filesystem:<o:p></o:p></p=
>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; % ls /usr=
/local/apache2/htdocs<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foo<o:p><=
/o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; % ls /usr=
/local/apache2/htdocs/foo<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bar<o:p><=
/o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; % ls /usr=
/local/apache2/htdocs/foo/bar<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foo.html<=
o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">Case 1: Working Config:<o=
:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Direc=
tory /&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; DirectoryIndex foo.html<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Dire=
ctory&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Direc=
tory /foo&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Dire=
ctory&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Direc=
tory /foo/bar&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Dire=
ctory&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">Case 2: Not Working Confi=
g<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Direc=
tory /&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Dire=
ctory&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Direc=
tory /foo&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; DirectoryIndex foo.html<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Dire=
ctory&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Direc=
tory /foo/bar&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Dire=
ctory&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">Different behavior with &=
lt;Location&gt;, this works below<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Locat=
ion /&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Loca=
tion&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Locat=
ion /foo&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; DirectoryIndex foo.html<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Loca=
tion&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Locat=
ion /foo/bar&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in">&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Loca=
tion&gt;<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in"><a href=3D"https://httpd.=
apache.org/docs/2.4/sections.html">https://httpd.apache.org/docs/2.4/sectio=
ns.html</a> says the following on section merging<o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in"><code><span lang=3D"EN" s=
tyle=3D"font-size:10.5pt;color:#003366">&#8220; &#8230; &lt;Directory &quot=
;/var/web/dir&quot;&gt;</span></code><span lang=3D"EN" style=3D"font-size:1=
0.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#003366"> =
will be processed
 before </span><code><span lang=3D"EN" style=3D"font-size:10.5pt;color:#003=
366">&lt;Directory &quot;/var/web/dir/subdir&quot;&gt;</span></code><span l=
ang=3D"EN" style=3D"font-size:10.5pt;font-family:&quot;Arial&quot;,&quot;sa=
ns-serif&quot;;color:#003366">. If multiple
</span><code><span lang=3D"EN" style=3D"font-size:10.5pt;color:#287F00"><a =
href=3D"https://httpd.apache.org/docs/2.4/mod/core.html#directory"><span st=
yle=3D"color:#287F00">&lt;Directory&gt;</span></a></span></code><span lang=
=3D"EN" style=3D"font-size:10.5pt;font-family:&quot;Arial&quot;,&quot;sans-=
serif&quot;;color:#003366">
 sections apply to the same directory they are processed in the configurati=
on file order. &#8230;&#8221;</span><o:p></o:p></p>
<p class=3D"MsoNormal" style=3D"margin-left:.5in"><o:p>&nbsp;</o:p></p>
</div>
</body>
</html>

--_000_6210d64c4d884fcb80348eb3918cb5cdMSGRTP2DAG01BDMN1FMRcom_--

From dev-return-84506-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov  3 23:41:06 2015
Return-Path: <dev-return-84506-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6C5CF1871F
	for <apmail-httpd-dev-archive@www.apache.org>; Tue,  3 Nov 2015 23:41:06 +0000 (UTC)
Received: (qmail 54252 invoked by uid 500); 3 Nov 2015 23:41:05 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 54186 invoked by uid 500); 3 Nov 2015 23:41:05 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 54176 invoked by uid 99); 3 Nov 2015 23:41:05 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Nov 2015 23:41:05 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 00568C5CBC
	for <dev@httpd.apache.org>; Tue,  3 Nov 2015 23:41:05 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.799
X-Spam-Level: *
X-Spam-Status: No, score=1.799 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H2=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id GPs_57o0Q_Av for <dev@httpd.apache.org>;
	Tue,  3 Nov 2015 23:40:54 +0000 (UTC)
Received: from fed1rmfepo101.cox.net (fed1rmfepo101.cox.net [68.230.241.143])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTP id 4476A2139C
	for <dev@httpd.apache.org>; Tue,  3 Nov 2015 23:40:53 +0000 (UTC)
Received: from fed1rmimpo306 ([68.230.241.174]) by fed1rmfepo101.cox.net
          (InterMail vM.8.01.05.15 201-2260-151-145-20131218) with ESMTP
          id <20151103234046.DAAE13844.fed1rmfepo101.cox.net@fed1rmimpo306>
          for <dev@httpd.apache.org>; Tue, 3 Nov 2015 18:40:46 -0500
Received: from [192.168.1.33] ([98.176.34.113])
	by fed1rmimpo306 with cox
	id dBgk1r00K2STVfm01BglBT; Tue, 03 Nov 2015 18:40:46 -0500
X-CT-Class: Clean
X-CT-Score: 0.00
X-CT-RefID: str=0001.0A020201.563945FE.013E,ss=1,re=0.000,fgs=0
X-CT-Spam: 0
X-Authority-Analysis: v=2.0 cv=LKq4tuq9 c=1 sm=1
 a=8xCO7h6kmYZdHn5tUOQhsw==:17 a=LrjODJgKAAAA:8 a=mV9VRH-2AAAA:8
 a=YgyHYp1aaCyo7TsEYEQA:9 a=QEXdDO2ut3YA:10 a=GpkNJ_2UdgVYiypEScgA:9
 a=8xCO7h6kmYZdHn5tUOQhsw==:117
X-CM-Score: 0.00
Authentication-Results: cox.net; auth=pass (PLAIN) smtp.auth=glewis63@cox.net
Message-ID: <563945F5.3060404@gknw.net>
Date: Tue, 03 Nov 2015 15:40:37 -0800
From: Gregg Smith <gls@gknw.net>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2.28) Gecko/20120306 Thunderbird/3.1.20
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: svn commit: r1712300 [1/2] - /httpd/httpd/trunk/modules/http2/
References: <20151103143312.973BD3A0046@svn01-us-west.apache.org>
In-Reply-To: <20151103143312.973BD3A0046@svn01-us-west.apache.org>
Content-Type: multipart/mixed;
 boundary="------------030902040805020800020903"

This is a multi-part message in MIME format.
--------------030902040805020800020903
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

On 11/3/2015 6:33 AM, icing@apache.org wrote:
> Author: icing
> Date: Tue Nov  3 14:33:11 2015
> New Revision: 1712300
>
> URL: http://svn.apache.org/viewvc?rev=1712300&view=rev
> Log:
> rework of output handling on stream/session close, rework of cleartext (http:) output to pass buckets to core filters, splitting of stream/io memory pools for stability and less sync
>
> Added:
>      httpd/httpd/trunk/modules/http2/h2_bucket_eoc.c
>      httpd/httpd/trunk/modules/http2/h2_bucket_eoc.h
>      httpd/httpd/trunk/modules/http2/h2_bucket_eos.c
>      httpd/httpd/trunk/modules/http2/h2_bucket_eos.h
> Modified:
...
>      httpd/httpd/trunk/modules/http2/h2_util.c
>
> Added: httpd/httpd/trunk/modules/http2/h2_bucket_eoc.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_bucket_eoc.c?rev=1712300&view=auto
> ==============================================================================
...
> +
> +AP_DECLARE(apr_bucket *) h2_bucket_eoc_make(apr_bucket *b,
> +                                            h2_session *session)

No :) we cannot export with AP_DELARE in modules on Windows because we 
need to keep them separate from the AP_DECLARE functions we are going to 
be importing from core.

.\h2_util.c(727) : error C2491: 'h2_transfer_brigade' : definition of 
dllimport function not allowed
.\h2_bucket_eos.c(60) : error C2491: 'h2_bucket_eos_make' : definition 
of dllimport function not allowed
.\h2_bucket_eos.c(74) : error C2491: 'h2_bucket_eos_create' : definition 
of dllimport function not allowed
.\h2_bucket_eos.c(101) : error C2491: 'ap_bucket_type_h2_eos' : 
definition of dllimport data not allowed
.\h2_bucket_eoc.c(60) : error C2491: 'h2_bucket_eoc_make' : definition 
of dllimport function not allowed
.\h2_bucket_eoc.c(74) : error C2491: 'h2_bucket_eoc_create' : definition 
of dllimport function not allowed
.\h2_bucket_eoc.c(101) : error C2491: 'ap_bucket_type_h2_eoc' : 
definition of dllimport data not allowed

If we take a page from other modules (mod_dav/proxy/ssl) we can see the 
need to come up with an private set of declares.
I have the attached patch ready to commit.
...
> +AP_DECLARE_DATA const apr_bucket_type_t ap_bucket_type_h2_eoc = {
> +    "H2EOC", 5, APR_BUCKET_METADATA,
> +    bucket_destroy,
> +    bucket_read,
> +    apr_bucket_setaside_noop,
> +    apr_bucket_split_notimpl,
> +    apr_bucket_shared_copy
> +};
> +

 >>> Nit <<<
Should we really be declaring anything for export with an ap_* in a 
loadable module? I thought the ap_* name was reserved for core only, I 
may be wrong.



--------------030902040805020800020903
Content-Type: text/x-patch;
 name="h2_declare.diff"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename="h2_declare.diff"

Index: modules/http2/h2_bucket_eoc.c
===================================================================
--- modules/http2/h2_bucket_eoc.c	(revision 1712389)
+++ modules/http2/h2_bucket_eoc.c	(working copy)
@@ -54,7 +54,7 @@
     return APR_SUCCESS;
 }
 
-AP_DECLARE(apr_bucket *) h2_bucket_eoc_make(apr_bucket *b, 
+H2_DECLARE(apr_bucket *) h2_bucket_eoc_make(apr_bucket *b, 
                                             h2_session *session)
 {
     h2_bucket_eoc *h;
@@ -68,7 +68,7 @@
     return b;
 }
 
-AP_DECLARE(apr_bucket *) h2_bucket_eoc_create(apr_bucket_alloc_t *list,
+H2_DECLARE(apr_bucket *) h2_bucket_eoc_create(apr_bucket_alloc_t *list,
                                               h2_session *session)
 {
     apr_bucket *b = apr_bucket_alloc(sizeof(*b), list);
@@ -97,7 +97,7 @@
     }
 }
 
-AP_DECLARE_DATA const apr_bucket_type_t ap_bucket_type_h2_eoc = {
+const apr_bucket_type_t H2_DECLARE_DATA ap_bucket_type_h2_eoc = {
     "H2EOC", 5, APR_BUCKET_METADATA,
     bucket_destroy,
     bucket_read,
Index: modules/http2/h2_bucket_eoc.h
===================================================================
--- modules/http2/h2_bucket_eoc.h	(revision 1712389)
+++ modules/http2/h2_bucket_eoc.h	(working copy)
@@ -19,13 +19,13 @@
 struct h2_session;
 
 /** End Of HTTP/2 SESSION (H2EOC) bucket */
-AP_DECLARE_DATA extern const apr_bucket_type_t ap_bucket_type_h2_eoc;
+H2_DECLARE_DATA extern const apr_bucket_type_t ap_bucket_type_h2_eoc;
 
 
-AP_DECLARE(apr_bucket *) h2_bucket_eoc_make(apr_bucket *b, 
+H2_DECLARE(apr_bucket *) h2_bucket_eoc_make(apr_bucket *b, 
                                             struct h2_session *session);
 
-AP_DECLARE(apr_bucket *) h2_bucket_eoc_create(apr_bucket_alloc_t *list,
+H2_DECLARE(apr_bucket *) h2_bucket_eoc_create(apr_bucket_alloc_t *list,
                                               struct h2_session *session);
 
 #endif /* mod_http2_h2_bucket_eoc_h */
Index: modules/http2/h2_bucket_eos.c
===================================================================
--- modules/http2/h2_bucket_eos.c	(revision 1712389)
+++ modules/http2/h2_bucket_eos.c	(working copy)
@@ -54,7 +54,7 @@
     return APR_SUCCESS;
 }
 
-AP_DECLARE(apr_bucket *) h2_bucket_eos_make(apr_bucket *b, 
+H2_DECLARE(apr_bucket *) h2_bucket_eos_make(apr_bucket *b, 
                                                    h2_stream *stream)
 {
     h2_bucket_eos *h;
@@ -68,7 +68,7 @@
     return b;
 }
 
-AP_DECLARE(apr_bucket *) h2_bucket_eos_create(apr_bucket_alloc_t *list,
+H2_DECLARE(apr_bucket *) h2_bucket_eos_create(apr_bucket_alloc_t *list,
                                                      h2_stream *stream)
 {
     apr_bucket *b = apr_bucket_alloc(sizeof(*b), list);
@@ -97,7 +97,7 @@
     }
 }
 
-AP_DECLARE_DATA const apr_bucket_type_t ap_bucket_type_h2_eos = {
+const apr_bucket_type_t H2_DECLARE_DATA ap_bucket_type_h2_eos = {
     "H2EOS", 5, APR_BUCKET_METADATA,
     bucket_destroy,
     bucket_read,
Index: modules/http2/h2_bucket_eos.h
===================================================================
--- modules/http2/h2_bucket_eos.h	(revision 1712389)
+++ modules/http2/h2_bucket_eos.h	(working copy)
@@ -19,13 +19,13 @@
 struct h2_stream;
 
 /** End Of HTTP/2 STREAM (H2EOS) bucket */
-AP_DECLARE_DATA extern const apr_bucket_type_t ap_bucket_type_h2_eos;
+H2_DECLARE_DATA extern const apr_bucket_type_t ap_bucket_type_h2_eos;
 
 
-AP_DECLARE(apr_bucket *) h2_bucket_eos_make(apr_bucket *b, 
+H2_DECLARE(apr_bucket *) h2_bucket_eos_make(apr_bucket *b, 
                                             struct h2_stream *stream);
 
-AP_DECLARE(apr_bucket *) h2_bucket_eos_create(apr_bucket_alloc_t *list,
+H2_DECLARE(apr_bucket *) h2_bucket_eos_create(apr_bucket_alloc_t *list,
                                               struct h2_stream *stream);
 
 #endif /* mod_http2_h2_bucket_stream_eos_h */
Index: modules/http2/h2_private.h
===================================================================
--- modules/http2/h2_private.h	(revision 1712389)
+++ modules/http2/h2_private.h	(working copy)
@@ -33,4 +33,27 @@
 #define H2_HEADER_PATH_LEN   5
 #define H2_CRLF             "\r\n"
 
+
+/* Create a set of H2_DECLARE(type), H2_DECLARE_NONSTD(type) and
+ * H2_DECLARE_DATA with appropriate export and import tags for the platform
+ */
+#if !defined(WIN32)
+#define H2_DECLARE(type)            type
+#define H2_DECLARE_NONSTD(type)     type
+#define H2_DECLARE_DATA
+#elif defined(H2_DECLARE_STATIC)
+#define H2_DECLARE(type)            type __stdcall
+#define H2_DECLARE_NONSTD(type)     type
+#define H2_DECLARE_DATA
+#elif defined(H2_DECLARE_EXPORT)
+#define H2_DECLARE(type)            __declspec(dllexport) type __stdcall
+#define H2_DECLARE_NONSTD(type)     __declspec(dllexport) type
+#define H2_DECLARE_DATA             __declspec(dllexport)
+#else
+#define H2_DECLARE(type)            __declspec(dllimport) type __stdcall
+#define H2_DECLARE_NONSTD(type)     __declspec(dllimport) type
+#define H2_DECLARE_DATA             __declspec(dllimport)
 #endif
+
+
+#endif /* mod_h2_h2_private_h */
Index: modules/http2/h2_util.c
===================================================================
--- modules/http2/h2_util.c	(revision 1712389)
+++ modules/http2/h2_util.c	(working copy)
@@ -719,7 +719,7 @@
 
 }
 
-AP_DECLARE(apr_status_t) h2_transfer_brigade(apr_bucket_brigade *to,
+H2_DECLARE(apr_status_t) h2_transfer_brigade(apr_bucket_brigade *to,
                                              apr_bucket_brigade *from, 
                                              apr_pool_t *p,
                                              apr_size_t *plen,
Index: modules/http2/h2_util.h
===================================================================
--- modules/http2/h2_util.h	(revision 1712389)
+++ modules/http2/h2_util.h	(working copy)
@@ -154,7 +154,7 @@
  * @param plen maximum bytes to transfer, actual bytes transferred
  * @param peos if an EOS bucket was transferred
  */
-AP_DECLARE(apr_status_t) h2_transfer_brigade(apr_bucket_brigade *to,
+H2_DECLARE(apr_status_t) h2_transfer_brigade(apr_bucket_brigade *to,
                                              apr_bucket_brigade *from, 
                                              apr_pool_t *p,
                                              apr_size_t *plen,

--------------030902040805020800020903--

From dev-return-84507-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov  4 01:39:18 2015
Return-Path: <dev-return-84507-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E4B1718E0C
	for <apmail-httpd-dev-archive@www.apache.org>; Wed,  4 Nov 2015 01:39:18 +0000 (UTC)
Received: (qmail 20714 invoked by uid 500); 4 Nov 2015 01:39:18 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 20628 invoked by uid 500); 4 Nov 2015 01:39:18 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 20550 invoked by uid 99); 4 Nov 2015 01:39:18 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Nov 2015 01:39:18 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id D067C1A2D4F
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 01:39:17 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan_net.20150623.gappssmtp.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id KagA4D494wGw for <dev@httpd.apache.org>;
	Wed,  4 Nov 2015 01:39:11 +0000 (UTC)
Received: from mail-io0-f176.google.com (mail-io0-f176.google.com [209.85.223.176])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 5562220FF5
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 01:39:11 +0000 (UTC)
Received: by ioll68 with SMTP id l68so39289816iol.3
        for <dev@httpd.apache.org>; Tue, 03 Nov 2015 17:39:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan_net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=zhbf1zf/DQs/oYEuzUqVsOkJSp8Tc98OiZLGyQSUrrc=;
        b=pCuEEFG1/7wWNC+Z1NQuh0dOaohXckb9ODi7uIGd1S9r1qjuKRiM2GBBw/MKZVkTUh
         6tkouYa3zA3hXXv3vOEkLqALnwv69FY7oWFZ3YfigSRLG3cYUhbNVpyZUJTanzjRh6gP
         +xBhOKhN5y/XfnWmO+lW3zLfpT8N7+loLt+2Vk9HC4uKPHbX9dH4EncW7kntvUEO6wL1
         PD9jmnbCFCP3uKycmIZN3DtCv0msvA7aqqNzOU4A8pBl6odxfgMU3zyYEO5L766YHG8O
         DTohGsxVDh5qJoU06ArpnuVxd54fdEBP7O95IVxjOhPE1yRdlm4/G8FNkC+jn8BlcES5
         P69Q==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=zhbf1zf/DQs/oYEuzUqVsOkJSp8Tc98OiZLGyQSUrrc=;
        b=GbV/7gOd3cJQX+sC/ld+rnSe5gr3uGjyAPTycsEaSAONdDkhp4DeC3XCtvvLoerqOr
         yAg1G52sOYi180m4NmWHgnLLRSDn6Smsafvt+B5agH7zkSmVknDQUDUJypnW/dBIPH31
         PeytwGTttjyWpEbOVu4EI3hm/5thEaI+7f9oJDZcf94IyR15gF/7JQolc/3+hmbo+Arj
         PyM3B2VUNzXkVasZ21wxM9Ik/QA0W2G0L5RHGxenBXCs8iS9eniY7XmeIVeImhbkCnsv
         p8pSjXBBbD0VLXdV9yeaBWGco6Hzt7018WQV2cvP1bZ99qgYcv9KmVZsMo0oyFDbKcRf
         MjFw==
X-Gm-Message-State: ALoCoQkxRlatbm8RNEDFtVt54ktnwaT2ZjBe+zw0useh+/NmYpnhXTrnz8Enb7wpJ+lwmmEWhRb3
MIME-Version: 1.0
X-Received: by 10.107.136.30 with SMTP id k30mr221028iod.163.1446601150740;
 Tue, 03 Nov 2015 17:39:10 -0800 (PST)
Received: by 10.107.3.88 with HTTP; Tue, 3 Nov 2015 17:39:10 -0800 (PST)
In-Reply-To: <563945F5.3060404@gknw.net>
References: <20151103143312.973BD3A0046@svn01-us-west.apache.org>
	<563945F5.3060404@gknw.net>
Date: Tue, 3 Nov 2015 19:39:10 -0600
Message-ID: <CACsi250N10d=KZFBR5Nqk+A6B8x=uY60AO7R=tvxgHa=EMLkqQ@mail.gmail.com>
Subject: Re: svn commit: r1712300 [1/2] - /httpd/httpd/trunk/modules/http2/
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a113ecc50b8d09a0523ad13bd

--001a113ecc50b8d09a0523ad13bd
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 3, 2015 at 5:40 PM, Gregg Smith <gls@gknw.net> wrote:

> On 11/3/2015 6:33 AM, icing@apache.org wrote:
>
>> Author: icing
>> Date: Tue Nov  3 14:33:11 2015
>> New Revision: 1712300
>>
>> URL: http://svn.apache.org/viewvc?rev=1712300&view=rev
>> Log:
>> rework of output handling on stream/session close, rework of cleartext
>> (http:) output to pass buckets to core filters, splitting of stream/io
>> memory pools for stability and less sync
>>
>> Added:
>>      httpd/httpd/trunk/modules/http2/h2_bucket_eoc.c
>>      httpd/httpd/trunk/modules/http2/h2_bucket_eoc.h
>>      httpd/httpd/trunk/modules/http2/h2_bucket_eos.c
>>      httpd/httpd/trunk/modules/http2/h2_bucket_eos.h
>> Modified:
>>
> ...
>
>>      httpd/httpd/trunk/modules/http2/h2_util.c
>>
>> Added: httpd/httpd/trunk/modules/http2/h2_bucket_eoc.c
>> URL:
>> http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_bucket_eoc.c?rev=1712300&view=auto
>>
>> ==============================================================================
>>
> ...
>
>> +
>> +AP_DECLARE(apr_bucket *) h2_bucket_eoc_make(apr_bucket *b,
>> +                                            h2_session *session)
>>
>
> No :) we cannot export with AP_DELARE in modules on Windows because we
> need to keep them separate from the AP_DECLARE functions we are going to be
> importing from core.
>
> .\h2_util.c(727) : error C2491: 'h2_transfer_brigade' : definition of
> dllimport function not allowed
> .\h2_bucket_eos.c(60) : error C2491: 'h2_bucket_eos_make' : definition of
> dllimport function not allowed
> .\h2_bucket_eos.c(74) : error C2491: 'h2_bucket_eos_create' : definition
> of dllimport function not allowed
> .\h2_bucket_eos.c(101) : error C2491: 'ap_bucket_type_h2_eos' : definition
> of dllimport data not allowed
> .\h2_bucket_eoc.c(60) : error C2491: 'h2_bucket_eoc_make' : definition of
> dllimport function not allowed
> .\h2_bucket_eoc.c(74) : error C2491: 'h2_bucket_eoc_create' : definition
> of dllimport function not allowed
> .\h2_bucket_eoc.c(101) : error C2491: 'ap_bucket_type_h2_eoc' : definition
> of dllimport data not allowed
>
> If we take a page from other modules (mod_dav/proxy/ssl) we can see the
> need to come up with an private set of declares.
> I have the attached patch ready to commit.
>
>>
Precisely, but understand that anytime you introduce a module export (al la
mod_dav.so) you create a hard load-order dependency on httpd, something we
attempted to eliminate in httpd 2.0 and forwards.  This is why the use of
optional functions, hook registration and so forth is preferred.


> +AP_DECLARE_DATA const apr_bucket_type_t ap_bucket_type_h2_eoc = {
>> +    "H2EOC", 5, APR_BUCKET_METADATA,
>> +    bucket_destroy,
>> +    bucket_read,
>> +    apr_bucket_setaside_noop,
>> +    apr_bucket_split_notimpl,
>> +    apr_bucket_shared_copy
>> +};
>> +
>>
>
> >>> Nit <<<
> Should we really be declaring anything for export with an ap_* in a
> loadable module? I thought the ap_* name was reserved for core only, I may
> be wrong.
>

No issue, the httpd project defines the ap_* namespace.

Bill

--001a113ecc50b8d09a0523ad13bd
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On T=
ue, Nov 3, 2015 at 5:40 PM, Gregg Smith <span dir=3D"ltr">&lt;<a href=3D"ma=
ilto:gls@gknw.net" target=3D"_blank">gls@gknw.net</a>&gt;</span> wrote:<br>=
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><span class=3D"">On 11/3/2015 6:33 AM, <a hr=
ef=3D"mailto:icing@apache.org" target=3D"_blank">icing@apache.org</a> wrote=
:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">
Author: icing<br>
Date: Tue Nov=C2=A0 3 14:33:11 2015<br>
New Revision: 1712300<br>
<br>
URL: <a href=3D"http://svn.apache.org/viewvc?rev=3D1712300&amp;view=3Drev" =
rel=3D"noreferrer" target=3D"_blank">http://svn.apache.org/viewvc?rev=3D171=
2300&amp;view=3Drev</a><br>
Log:<br>
rework of output handling on stream/session close, rework of cleartext (htt=
p:) output to pass buckets to core filters, splitting of stream/io memory p=
ools for stability and less sync<br>
<br>
Added:<br>
=C2=A0 =C2=A0 =C2=A0httpd/httpd/trunk/modules/http2/h2_bucket_eoc.c<br>
=C2=A0 =C2=A0 =C2=A0httpd/httpd/trunk/modules/http2/h2_bucket_eoc.h<br>
=C2=A0 =C2=A0 =C2=A0httpd/httpd/trunk/modules/http2/h2_bucket_eos.c<br>
=C2=A0 =C2=A0 =C2=A0httpd/httpd/trunk/modules/http2/h2_bucket_eos.h<br>
Modified:<br>
</blockquote></span>
...<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">
=C2=A0 =C2=A0 =C2=A0httpd/httpd/trunk/modules/http2/h2_util.c<span class=3D=
""><br>
<br>
Added: httpd/httpd/trunk/modules/http2/h2_bucket_eoc.c<br>
URL: <a href=3D"http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http=
2/h2_bucket_eoc.c?rev=3D1712300&amp;view=3Dauto" rel=3D"noreferrer" target=
=3D"_blank">http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2=
_bucket_eoc.c?rev=3D1712300&amp;view=3Dauto</a><br>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D<br>
</span></blockquote>
...<span class=3D""><br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">
+<br>
+AP_DECLARE(apr_bucket *) h2_bucket_eoc_make(apr_bucket *b,<br>
+=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 h2_session *session)<br>
</blockquote>
<br></span>
No :) we cannot export with AP_DELARE in modules on Windows because we need=
 to keep them separate from the AP_DECLARE functions we are going to be imp=
orting from core.<br>
<br>
.\h2_util.c(727) : error C2491: &#39;h2_transfer_brigade&#39; : definition =
of dllimport function not allowed<br>
.\h2_bucket_eos.c(60) : error C2491: &#39;h2_bucket_eos_make&#39; : definit=
ion of dllimport function not allowed<br>
.\h2_bucket_eos.c(74) : error C2491: &#39;h2_bucket_eos_create&#39; : defin=
ition of dllimport function not allowed<br>
.\h2_bucket_eos.c(101) : error C2491: &#39;ap_bucket_type_h2_eos&#39; : def=
inition of dllimport data not allowed<br>
.\h2_bucket_eoc.c(60) : error C2491: &#39;h2_bucket_eoc_make&#39; : definit=
ion of dllimport function not allowed<br>
.\h2_bucket_eoc.c(74) : error C2491: &#39;h2_bucket_eoc_create&#39; : defin=
ition of dllimport function not allowed<br>
.\h2_bucket_eoc.c(101) : error C2491: &#39;ap_bucket_type_h2_eoc&#39; : def=
inition of dllimport data not allowed<br>
<br>
If we take a page from other modules (mod_dav/proxy/ssl) we can see the nee=
d to come up with an private set of declares.<br>
I have the attached patch ready to commit.<br>
<span class=3D""><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8=
ex;border-left:1px #ccc solid;padding-left:1ex"></blockquote></span></block=
quote><div><br></div><div>Precisely, but understand that anytime you introd=
uce a module export (al la mod_dav.so) you create a hard load-order depende=
ncy on httpd, something we attempted to eliminate in httpd 2.0 and forwards=
.=C2=A0 This is why the use of optional functions, hook registration and so=
 forth is preferred.</div><div>=C2=A0</div><blockquote class=3D"gmail_quote=
" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><=
span class=3D""><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8e=
x;border-left:1px #ccc solid;padding-left:1ex">
+AP_DECLARE_DATA const apr_bucket_type_t ap_bucket_type_h2_eoc =3D {<br>
+=C2=A0 =C2=A0 &quot;H2EOC&quot;, 5, APR_BUCKET_METADATA,<br>
+=C2=A0 =C2=A0 bucket_destroy,<br>
+=C2=A0 =C2=A0 bucket_read,<br>
+=C2=A0 =C2=A0 apr_bucket_setaside_noop,<br>
+=C2=A0 =C2=A0 apr_bucket_split_notimpl,<br>
+=C2=A0 =C2=A0 apr_bucket_shared_copy<br>
+};<br>
+<br>
</blockquote>
<br></span>
&gt;&gt;&gt; Nit &lt;&lt;&lt;<br>
Should we really be declaring anything for export with an ap_* in a loadabl=
e module? I thought the ap_* name was reserved for core only, I may be wron=
g.<br></blockquote><div><br></div><div>No issue, the httpd project defines =
the ap_* namespace.</div><div><br></div><div>Bill=C2=A0</div></div><br></di=
v></div>

--001a113ecc50b8d09a0523ad13bd--

From dev-return-84508-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov  4 06:51:57 2015
Return-Path: <dev-return-84508-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CCD0418996
	for <apmail-httpd-dev-archive@www.apache.org>; Wed,  4 Nov 2015 06:51:57 +0000 (UTC)
Received: (qmail 68534 invoked by uid 500); 4 Nov 2015 06:51:56 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 68454 invoked by uid 500); 4 Nov 2015 06:51:56 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 68444 invoked by uid 99); 4 Nov 2015 06:51:56 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Nov 2015 06:51:56 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 3B908C3D1E
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 06:51:56 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.109
X-Spam-Level:
X-Spam-Status: No, score=-0.109 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	MIME_QP_LONG_LINE=0.001, SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id UrrS9ibsIzde for <dev@httpd.apache.org>;
	Wed,  4 Nov 2015 06:51:48 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 8D645439F9
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 06:51:47 +0000 (UTC)
Received: from [192.168.178.60] (unknown [93.211.127.222])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 10FD215A0447
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 07:51:40 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1446619900; bh=DKp4KvPRqeXEWxTrMcuX1gKEkiMobH/JzfUtTMOK0TY=;
	h=From:Subject:Date:References:In-Reply-To:To:From;
	b=fu5xBraQdU4BSxmG4WRYUidwBupvogtW2HJv/00xhKDqP+UAOHMHEJsIbdFjcpSaD
	 91pJEBpT9NvK4fBWoGa/4OBmJ7sb7n8SAi4ABucjf72mYgtPNVUuLEaDFTVkLRbn7/
	 C4/QLusSoP2ZiZO6fVnNCzcUoBwEa9y75Nj3nLIw=
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (1.0)
Subject: Re: svn commit: r1712300 [1/2] - /httpd/httpd/trunk/modules/http2/
Message-Id: <5A1EB840-499F-415B-9714-1B9BCA73D78B@greenbytes.de>
Date: Wed, 4 Nov 2015 07:51:39 +0100
References: <20151103143312.973BD3A0046@svn01-us-west.apache.org> <563945F5.3060404@gknw.net>
In-Reply-To: <563945F5.3060404@gknw.net>
To: dev@httpd.apache.org
X-Mailer: iPhone Mail (13B143)

That was not my intention. There should be no ap_* name in mod_http2 (or any=
 other module). Will fix. Thanks for the catch.=20

> Am 04.11.2015 um 00:40 schrieb Gregg Smith <gls@gknw.net>:
>=20
>> On 11/3/2015 6:33 AM, icing@apache.org wrote:
>> Author: icing
>> Date: Tue Nov  3 14:33:11 2015
>> New Revision: 1712300
>>=20
>> URL: http://svn.apache.org/viewvc?rev=3D1712300&view=3Drev
>> Log:
>> rework of output handling on stream/session close, rework of cleartext (h=
ttp:) output to pass buckets to core filters, splitting of stream/io memory p=
ools for stability and less sync
>>=20
>> Added:
>>     httpd/httpd/trunk/modules/http2/h2_bucket_eoc.c
>>     httpd/httpd/trunk/modules/http2/h2_bucket_eoc.h
>>     httpd/httpd/trunk/modules/http2/h2_bucket_eos.c
>>     httpd/httpd/trunk/modules/http2/h2_bucket_eos.h
>> Modified:
> ...
>>     httpd/httpd/trunk/modules/http2/h2_util.c
>>=20
>> Added: httpd/httpd/trunk/modules/http2/h2_bucket_eoc.c
>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_buck=
et_eoc.c?rev=3D1712300&view=3Dauto
>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D
> ...
>> +
>> +AP_DECLARE(apr_bucket *) h2_bucket_eoc_make(apr_bucket *b,
>> +                                            h2_session *session)
>=20
> No :) we cannot export with AP_DELARE in modules on Windows because we nee=
d to keep them separate from the AP_DECLARE functions we are going to be imp=
orting from core.
>=20
> .\h2_util.c(727) : error C2491: 'h2_transfer_brigade' : definition of dlli=
mport function not allowed
> .\h2_bucket_eos.c(60) : error C2491: 'h2_bucket_eos_make' : definition of d=
llimport function not allowed
> .\h2_bucket_eos.c(74) : error C2491: 'h2_bucket_eos_create' : definition o=
f dllimport function not allowed
> .\h2_bucket_eos.c(101) : error C2491: 'ap_bucket_type_h2_eos' : definition=
 of dllimport data not allowed
> .\h2_bucket_eoc.c(60) : error C2491: 'h2_bucket_eoc_make' : definition of d=
llimport function not allowed
> .\h2_bucket_eoc.c(74) : error C2491: 'h2_bucket_eoc_create' : definition o=
f dllimport function not allowed
> .\h2_bucket_eoc.c(101) : error C2491: 'ap_bucket_type_h2_eoc' : definition=
 of dllimport data not allowed
>=20
> If we take a page from other modules (mod_dav/proxy/ssl) we can see the ne=
ed to come up with an private set of declares.
> I have the attached patch ready to commit.
> ...
>> +AP_DECLARE_DATA const apr_bucket_type_t ap_bucket_type_h2_eoc =3D {
>> +    "H2EOC", 5, APR_BUCKET_METADATA,
>> +    bucket_destroy,
>> +    bucket_read,
>> +    apr_bucket_setaside_noop,
>> +    apr_bucket_split_notimpl,
>> +    apr_bucket_shared_copy
>> +};
>> +
>=20
> >>> Nit <<<
> Should we really be declaring anything for export with an ap_* in a loadab=
le module? I thought the ap_* name was reserved for core only, I may be wron=
g.
>=20
>=20
> <h2_declare.diff>

From dev-return-84509-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov  4 09:03:08 2015
Return-Path: <dev-return-84509-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 37CD418E12
	for <apmail-httpd-dev-archive@www.apache.org>; Wed,  4 Nov 2015 09:03:08 +0000 (UTC)
Received: (qmail 51659 invoked by uid 500); 4 Nov 2015 09:03:02 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 51588 invoked by uid 500); 4 Nov 2015 09:03:02 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 51578 invoked by uid 99); 4 Nov 2015 09:03:02 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Nov 2015 09:03:02 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 56091C821A
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 09:03:02 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.11
X-Spam-Level:
X-Spam-Status: No, score=-0.11 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id rwz95zopkA8W for <dev@httpd.apache.org>;
	Wed,  4 Nov 2015 09:02:54 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id C60432326B
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 09:02:53 +0000 (UTC)
Received: from [192.168.1.42] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 3AF2B15A0598
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 10:02:52 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1446627772; bh=ssNJVr2W9c1W2XmNjR26CfNCiGiyW7gbHniFdH6vfOA=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=s9u4LoQnXtvhzdmPvcMwb9mUVsmgqi2LCUkajjCPsZnSzUIUZRNGf5TABP94gXS75
	 xYwcMbWAuUqSuDBYIfwDlI6XmKIZMokaHUg05vuHJDycIdY69jojrmqLudviSMHVkx
	 rl8S3jiOuFiG5oZj+c8vD2A9nu8L8mIbkaeG3bJE=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: svn commit: r1712300 [1/2] - /httpd/httpd/trunk/modules/http2/
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <5A1EB840-499F-415B-9714-1B9BCA73D78B@greenbytes.de>
Date: Wed, 4 Nov 2015 10:02:51 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <BF6C8CE1-70D9-4829-B033-98F4D04070FE@greenbytes.de>
References: <20151103143312.973BD3A0046@svn01-us-west.apache.org> <563945F5.3060404@gknw.net> <5A1EB840-499F-415B-9714-1B9BCA73D78B@greenbytes.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

Fixed in r1712514. Sorry for the attention this needed.

> Am 04.11.2015 um 07:51 schrieb Stefan Eissing =
<stefan.eissing@greenbytes.de>:
>=20
> That was not my intention. There should be no ap_* name in mod_http2 =
(or any other module). Will fix. Thanks for the catch.=20
>=20
>> Am 04.11.2015 um 00:40 schrieb Gregg Smith <gls@gknw.net>:
>>=20
>>> On 11/3/2015 6:33 AM, icing@apache.org wrote:
>>> Author: icing
>>> Date: Tue Nov  3 14:33:11 2015
>>> New Revision: 1712300
>>>=20
>>> URL: http://svn.apache.org/viewvc?rev=3D1712300&view=3Drev
>>> Log:
>>> rework of output handling on stream/session close, rework of =
cleartext (http:) output to pass buckets to core filters, splitting of =
stream/io memory pools for stability and less sync
>>>=20
>>> Added:
>>>    httpd/httpd/trunk/modules/http2/h2_bucket_eoc.c
>>>    httpd/httpd/trunk/modules/http2/h2_bucket_eoc.h
>>>    httpd/httpd/trunk/modules/http2/h2_bucket_eos.c
>>>    httpd/httpd/trunk/modules/http2/h2_bucket_eos.h
>>> Modified:
>> ...
>>>    httpd/httpd/trunk/modules/http2/h2_util.c
>>>=20
>>> Added: httpd/httpd/trunk/modules/http2/h2_bucket_eoc.c
>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_bucket_eoc=
.c?rev=3D1712300&view=3Dauto
>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>> ...
>>> +
>>> +AP_DECLARE(apr_bucket *) h2_bucket_eoc_make(apr_bucket *b,
>>> +                                            h2_session *session)
>>=20
>> No :) we cannot export with AP_DELARE in modules on Windows because =
we need to keep them separate from the AP_DECLARE functions we are going =
to be importing from core.
>>=20
>> .\h2_util.c(727) : error C2491: 'h2_transfer_brigade' : definition of =
dllimport function not allowed
>> .\h2_bucket_eos.c(60) : error C2491: 'h2_bucket_eos_make' : =
definition of dllimport function not allowed
>> .\h2_bucket_eos.c(74) : error C2491: 'h2_bucket_eos_create' : =
definition of dllimport function not allowed
>> .\h2_bucket_eos.c(101) : error C2491: 'ap_bucket_type_h2_eos' : =
definition of dllimport data not allowed
>> .\h2_bucket_eoc.c(60) : error C2491: 'h2_bucket_eoc_make' : =
definition of dllimport function not allowed
>> .\h2_bucket_eoc.c(74) : error C2491: 'h2_bucket_eoc_create' : =
definition of dllimport function not allowed
>> .\h2_bucket_eoc.c(101) : error C2491: 'ap_bucket_type_h2_eoc' : =
definition of dllimport data not allowed
>>=20
>> If we take a page from other modules (mod_dav/proxy/ssl) we can see =
the need to come up with an private set of declares.
>> I have the attached patch ready to commit.
>> ...
>>> +AP_DECLARE_DATA const apr_bucket_type_t ap_bucket_type_h2_eoc =3D {
>>> +    "H2EOC", 5, APR_BUCKET_METADATA,
>>> +    bucket_destroy,
>>> +    bucket_read,
>>> +    apr_bucket_setaside_noop,
>>> +    apr_bucket_split_notimpl,
>>> +    apr_bucket_shared_copy
>>> +};
>>> +
>>=20
>>>>> Nit <<<
>> Should we really be declaring anything for export with an ap_* in a =
loadable module? I thought the ap_* name was reserved for core only, I =
may be wrong.
>>=20
>>=20
>> <h2_declare.diff>


From dev-return-84510-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov  4 11:54:30 2015
Return-Path: <dev-return-84510-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7736A184F4
	for <apmail-httpd-dev-archive@www.apache.org>; Wed,  4 Nov 2015 11:54:30 +0000 (UTC)
Received: (qmail 74804 invoked by uid 500); 4 Nov 2015 11:54:28 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 74591 invoked by uid 500); 4 Nov 2015 11:54:28 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 74492 invoked by uid 99); 4 Nov 2015 11:54:28 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Nov 2015 11:54:28 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 099D3180251
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 11:54:28 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.11
X-Spam-Level:
X-Spam-Status: No, score=-0.11 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id i9wXp-P2LDrL for <dev@httpd.apache.org>;
	Wed,  4 Nov 2015 11:54:14 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 7788E439B5
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 11:54:14 +0000 (UTC)
Received: from [192.168.1.42] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id CE28415A0455
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 12:54:12 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1446638052; bh=Pg61xnLQcDRhTcNjVZUxZkys3M4aWeWGQ2dt66u43Ks=;
	h=From:Subject:Date:To:From;
	b=DpW0wx3rLM+lkCcSYoUZEoNXSZmVbD0f1kjo21+OK8Pej/zPyPJ8bFO1ky/3B8axo
	 AqHLIZHb7QIPc1umDJxpIGWpO8uVUq7gdjfQgf+B84x0WnXy4CwZm2gghoAb+59UkB
	 3uLkhPjSkQT0YFnAWzjtOZGKKBz1ZdAPQMg3I6oI=
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: h1/h2/h2c throughput numbers
Message-Id: <7DF31206-8325-4C02-8FE0-5D2E3F59050C@greenbytes.de>
Date: Wed, 4 Nov 2015 12:54:12 +0100
To: dev@httpd.apache.org
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
X-Mailer: Apple Mail (2.3096.5)

See https://icing.github.io/mod_h2/throughput.html

This discusses the performance improvements regarding raw throughput of =
the current mod_http2 implementation vs. the 2.4.17 one. Some outlook =
onto the next release, hopefully.

tl;dr

h2 (https) raw transfer numbers are on par with HTTP/1.1 now, h2c =
(http:) are at 95% - in my setup.

//Stefan

PS. In case you find any mistakes or nits in there, I will hold back the =
tweet until this evening.=

From dev-return-84511-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov  4 12:15:30 2015
Return-Path: <dev-return-84511-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1F737185E5
	for <apmail-httpd-dev-archive@www.apache.org>; Wed,  4 Nov 2015 12:15:30 +0000 (UTC)
Received: (qmail 25068 invoked by uid 500); 4 Nov 2015 12:15:29 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 25004 invoked by uid 500); 4 Nov 2015 12:15:29 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 24994 invoked by uid 99); 4 Nov 2015 12:15:29 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Nov 2015 12:15:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 28F6D1A2180
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 12:15:29 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.099
X-Spam-Level:
X-Spam-Status: No, score=-0.099 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id ef6RJji-RVoy for <dev@httpd.apache.org>;
	Wed,  4 Nov 2015 12:15:20 +0000 (UTC)
Received: from mail-qg0-f48.google.com (mail-qg0-f48.google.com [209.85.192.48])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 809F720B91
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 12:15:19 +0000 (UTC)
Received: by qgbb65 with SMTP id b65so38050425qgb.2
        for <dev@httpd.apache.org>; Wed, 04 Nov 2015 04:15:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=O0fM9XM+g16ZzGPaAbx/7brr7mmeaElvUB1gYHsaZcA=;
        b=XFrrJWGQAAAKGHVBQjP4VTq+iQxr9EJtT1+EM4JKKUOtVPhy24x198RGGE54LyNGww
         rztOvqJLUrKLXwJK+zAZS41lymCRu6YS5n+rgx6RXcXdk30f3BUkt86m8opfmn0hZp/v
         doY1m00WJp+ecY/dnTa/Yhm3J8lrDbioi5AKJvBOeYNeecZgDfakR7J80rRIxZTSfWrs
         sNDddwq+olLODPpGeM1Gx+IcUaAj/uQVuYnTd60aEqByBqc0qQosDha0Puh2YdBqyFcu
         2DSI3Ce10jHTvqN/9aJB0dWheyPWKQUCJ7oSur5NOcqlkXloIC5IyxgY6xV9cWm9Pxth
         WB2g==
MIME-Version: 1.0
X-Received: by 10.140.96.104 with SMTP id j95mr1046282qge.92.1446639317876;
 Wed, 04 Nov 2015 04:15:17 -0800 (PST)
Received: by 10.55.101.196 with HTTP; Wed, 4 Nov 2015 04:15:17 -0800 (PST)
In-Reply-To: <7DF31206-8325-4C02-8FE0-5D2E3F59050C@greenbytes.de>
References: <7DF31206-8325-4C02-8FE0-5D2E3F59050C@greenbytes.de>
Date: Wed, 4 Nov 2015 13:15:17 +0100
Message-ID: <CAKQ1sVN86eT86+gimvZj8G=EgYMCTw_YYSYNJt+uTww+Us1Npw@mail.gmail.com>
Subject: Re: h1/h2/h2c throughput numbers
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

Nice article Stefan, thanks.
Will also ease review of latest changes ;)

On Wed, Nov 4, 2015 at 12:54 PM, Stefan Eissing
<stefan.eissing@greenbytes.de> wrote:
> See https://icing.github.io/mod_h2/throughput.html
>
> This discusses the performance improvements regarding raw throughput of the current mod_http2 implementation vs. the 2.4.17 one. Some outlook onto the next release, hopefully.
>
> tl;dr
>
> h2 (https) raw transfer numbers are on par with HTTP/1.1 now, h2c (http:) are at 95% - in my setup.
>
> //Stefan
>
> PS. In case you find any mistakes or nits in there, I will hold back the tweet until this evening.

From dev-return-84512-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov  4 13:16:42 2015
Return-Path: <dev-return-84512-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B7A5118813
	for <apmail-httpd-dev-archive@www.apache.org>; Wed,  4 Nov 2015 13:16:42 +0000 (UTC)
Received: (qmail 3088 invoked by uid 500); 4 Nov 2015 13:16:42 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 3018 invoked by uid 500); 4 Nov 2015 13:16:42 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 3008 invoked by uid 99); 4 Nov 2015 13:16:42 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Nov 2015 13:16:42 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 9B4CB180251
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 13:16:41 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.111
X-Spam-Level:
X-Spam-Status: No, score=-0.111 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id IBDHEzNb-VrV for <dev@httpd.apache.org>;
	Wed,  4 Nov 2015 13:16:40 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 883E420A92
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 13:16:40 +0000 (UTC)
Received: from [192.168.1.42] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 62F1F15A0098
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 14:16:33 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1446642993; bh=WCo+fsSM/fdfJI/wgKySjSu+NSMqUh/5INEYZ8upuqI=;
	h=From:Subject:Date:To:From;
	b=V1aKoao+lWZN+NK1Qc2Tdbm2qMtKg7mpMdl6zc9kfMGnypif4jFIfwZRrXi/hxndp
	 gsh3clbAkMJzf+v3DG2Goiz3DkB4N081kgFYdwqFaVyxP6ZliqsMHchyH1LUlCoHsh
	 GTanoYfM0UU0yAoQSFh4ItJUJ3TTriMm3XTR5gTE=
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Subject: conn_rec -> master
Message-Id: <991659BB-455C-4DC4-848C-B7325CD95E0A@greenbytes.de>
Date: Wed, 4 Nov 2015 14:16:33 +0100
To: dev@httpd.apache.org
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
X-Mailer: Apple Mail (2.3096.5)

As discussed before, I want to propose backporting changes that require
the "master" member in conn_rec. Those were introduced in trunk with 1565657:

  http://svn.apache.org/viewvc?view=revision&revision=r1565657

but I would favor ("like") the backporting of just the addition of

+    /** The "real" master connection. NULL if I am the master. */
+    conn_rec *master;

only as the whole array of slave connections is not used by anyone 
yet and I am not certain that the final design will look like it.

Backport proposal of a partial change by referring tot he change
and providing own patch?

//Stefan

From dev-return-84513-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov  4 20:19:20 2015
Return-Path: <dev-return-84513-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 41A5518118
	for <apmail-httpd-dev-archive@www.apache.org>; Wed,  4 Nov 2015 20:19:20 +0000 (UTC)
Received: (qmail 24733 invoked by uid 500); 4 Nov 2015 20:19:19 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 24656 invoked by uid 500); 4 Nov 2015 20:19:19 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 24646 invoked by uid 99); 4 Nov 2015 20:19:19 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Nov 2015 20:19:19 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 57FEF1A2309
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 20:19:19 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.119
X-Spam-Level:
X-Spam-Status: No, score=-0.119 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id tsW0dxYPcSHz for <dev@httpd.apache.org>;
	Wed,  4 Nov 2015 20:19:07 +0000 (UTC)
Received: from mail-wi0-f180.google.com (mail-wi0-f180.google.com [209.85.212.180])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id DD41E429AA
	for <dev@httpd.apache.org>; Wed,  4 Nov 2015 20:19:06 +0000 (UTC)
Received: by wikq8 with SMTP id q8so99547070wik.1
        for <dev@httpd.apache.org>; Wed, 04 Nov 2015 12:19:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:thread-index
         :content-language;
        bh=l7udyNqzceXwe+51hS2W8asvIKu6hfDCq8ORIZc8syA=;
        b=AdhDPCoHEeyGZ5dA23fB+u8jU8iWRqjQ5l7Bs0Dreh56Lfq+oXHVcxN+caVIY4MSpL
         eaXSBG83RLvyeGR6LzB2cx87S9SUM9s/90QeyM4vu67jUVqOr2TWzKnSjOTL+p3u/8BD
         0eM4w6HlRTBluzdTmkzzm1KCPHM4vUqHEGdIg=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :thread-index:content-language;
        bh=l7udyNqzceXwe+51hS2W8asvIKu6hfDCq8ORIZc8syA=;
        b=OQRCTBlNdT0Jfp7b+j1WIzFXbaCnyGEjyUV1OeRWqcWdJhR9rzfqYnM9cmT1KYNDka
         zPMUP6pJJxYViilT35GZXlk30B7bCGmGsTAFYKdAL0GoyM/3fJZ8UBQz1AZb8oYnnHv7
         F9TjnRY/G9QMTUkSpFYf9ppq0QD8Xb+u56LG0DP+l/p+YrDbaEiKNPwBZdzzxFmZeJRM
         FcaaeOUdbI2l6xBnbfyn3EIqR3+BYV13UU9C1rf5j6kL1PcqJLm9XDisgMHBXsV304/j
         W7dkvMm/y+xxGUcNTt5Re+WYffHAZQJcOW14PycYq8+e7XDQvBQcJIuW919eAOR1RKLf
         +HOA==
X-Gm-Message-State: ALoCoQlgVnvUkFjdN2AmSbvqvXNQuiqHSwVfqBWWQhqv9Hb0wbVJL2CiDFWhz3dbY11drcrTezNv
X-Received: by 10.194.61.13 with SMTP id l13mr4777711wjr.76.1446668346013;
        Wed, 04 Nov 2015 12:19:06 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id e9sm3308331wjw.8.2015.11.04.12.19.05
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 04 Nov 2015 12:19:05 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <7DF31206-8325-4C02-8FE0-5D2E3F59050C@greenbytes.de>
In-Reply-To: <7DF31206-8325-4C02-8FE0-5D2E3F59050C@greenbytes.de>
Subject: RE: h1/h2/h2c throughput numbers
Date: Wed, 4 Nov 2015 21:18:58 +0100
Message-ID: <08d501d1173e$0a9149c0$1fb3dd40$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AQHAjXfiZmozrPUGliheKWos0iWQl56tYCHQ
Content-Language: nl

> -----Original Message-----
> From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
> Sent: woensdag 4 november 2015 12:54
> To: dev@httpd.apache.org
> Subject: h1/h2/h2c throughput numbers
> 
> See https://icing.github.io/mod_h2/throughput.html
> 
> This discusses the performance improvements regarding raw throughput of
> the current mod_http2 implementation vs. the 2.4.17 one. Some outlook
> onto the next release, hopefully.
> 
> tl;dr
> 
> h2 (https) raw transfer numbers are on par with HTTP/1.1 now, h2c (http:)
> are at 95% - in my setup.

	Hi Stefan,

Thanks for all your work on this.

I'm currently working on adding http/2 support to Apache Serf, and 2.4.17
provides an easy to use test target for me :)

Good to see the progress here. I hope to start testing Subversion over
http/2 soon.

Thanks,

	Bert Huijben

--
Subversion, Serf, AnkhSVN, SharpSvn, SharpGit, ...


From dev-return-84514-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov  5 06:05:09 2015
Return-Path: <dev-return-84514-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1CCA318F37
	for <apmail-httpd-dev-archive@www.apache.org>; Thu,  5 Nov 2015 06:05:09 +0000 (UTC)
Received: (qmail 44031 invoked by uid 500); 5 Nov 2015 06:05:08 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 43958 invoked by uid 500); 5 Nov 2015 06:05:08 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 43948 invoked by uid 99); 5 Nov 2015 06:05:08 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Nov 2015 06:05:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 0662F1A2E43
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 06:05:08 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.11
X-Spam-Level:
X-Spam-Status: No, score=-0.11 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 6D7GFwk8nKE0 for <dev@httpd.apache.org>;
	Thu,  5 Nov 2015 06:04:57 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id DC44520FF5
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 06:04:56 +0000 (UTC)
Received: from [192.168.178.60] (unknown [84.150.82.229])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 8434715A04EC
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 07:04:54 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1446703494; bh=CFkpZS161DzWPL/ZFeuUDySIlzgHVA6g2CoxpwtapHA=;
	h=From:Subject:Date:References:In-Reply-To:To:From;
	b=qVAfuVBUqygjE0b71vA8Mhd6VO/ZNCWbVuKUK/f8ZhX3rXP1BXpeXUDDtd9m6/4Qz
	 Uornut5le96jODkNkrdxRn9NLQ5lNRkeAM4Ws2KxujlI6bqZkPMs7HzHGQtkwRdt+I
	 zXG67DiNLTv8psJ5EpAf23QAo7Qf3h1Q9BADMEsY=
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (1.0)
Subject: Re: h1/h2/h2c throughput numbers
Message-Id: <EB3E02CC-024E-4C68-BEEA-88C25A8FAB47@greenbytes.de>
Date: Thu, 5 Nov 2015 07:04:53 +0100
References: <7DF31206-8325-4C02-8FE0-5D2E3F59050C@greenbytes.de> <08d501d1173e$0a9149c0$1fb3dd40$@qqmail.nl>
In-Reply-To: <08d501d1173e$0a9149c0$1fb3dd40$@qqmail.nl>
To: dev@httpd.apache.org
X-Mailer: iPhone Mail (13B143)

Hi Bert,

nice! will be interesting to get numbers on that and how it affects svn timi=
ngs (if).=20

You write your own h2 implementation?

Cheers,
  Stefan

Am 04.11.2015 um 21:18 schrieb Bert Huijben <bert@qqmail.nl>:

>> -----Original Message-----
>> From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
>> Sent: woensdag 4 november 2015 12:54
>> To: dev@httpd.apache.org
>> Subject: h1/h2/h2c throughput numbers
>>=20
>> See https://icing.github.io/mod_h2/throughput.html
>>=20
>> This discusses the performance improvements regarding raw throughput of
>> the current mod_http2 implementation vs. the 2.4.17 one. Some outlook
>> onto the next release, hopefully.
>>=20
>> tl;dr
>>=20
>> h2 (https) raw transfer numbers are on par with HTTP/1.1 now, h2c (http:)=

>> are at 95% - in my setup.
>=20
>    Hi Stefan,
>=20
> Thanks for all your work on this.
>=20
> I'm currently working on adding http/2 support to Apache Serf, and 2.4.17
> provides an easy to use test target for me :)
>=20
> Good to see the progress here. I hope to start testing Subversion over
> http/2 soon.
>=20
> Thanks,
>=20
>    Bert Huijben
>=20
> --
> Subversion, Serf, AnkhSVN, SharpSvn, SharpGit, ...
>=20

From dev-return-84515-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov  5 13:05:08 2015
Return-Path: <dev-return-84515-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2D1F317F23
	for <apmail-httpd-dev-archive@www.apache.org>; Thu,  5 Nov 2015 13:05:08 +0000 (UTC)
Received: (qmail 80142 invoked by uid 500); 5 Nov 2015 13:05:07 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 80075 invoked by uid 500); 5 Nov 2015 13:05:07 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 80065 invoked by uid 99); 5 Nov 2015 13:05:07 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Nov 2015 13:05:07 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 1A8D4C070B
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 13:05:07 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.111
X-Spam-Level:
X-Spam-Status: No, score=-0.111 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 5_LabkDITQks for <dev@httpd.apache.org>;
	Thu,  5 Nov 2015 13:05:06 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id E8FA2444E9
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 13:05:05 +0000 (UTC)
Received: from [192.168.1.42] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 7017515A057F
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 14:04:59 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1446728699; bh=Ql1KkrvWyBOsjLCk7oIxstLCY6KErN/rviAkWrM6ixU=;
	h=From:Subject:Date:To:From;
	b=XElK6pa5PWDclVun6ZJjbR0WFHV+0L1SkdowdyjtHWM1vrLv2ghktxvnDfG25h4l/
	 KGEDXRKvP7jLRa45xYxDpIM3HxBMacvcCvc5uA118CurLw9E6LwANH2l4jSrNSW38e
	 kCD/DguqqljUFFziji3h0xGPy4u+haTv4OxeIfY0=
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: trailer
Message-Id: <E6E0EB2F-3A2D-4622-AC16-E5FFA9F0ED6F@greenbytes.de>
Date: Thu, 5 Nov 2015 14:04:59 +0100
To: dev@httpd.apache.org
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
X-Mailer: Apple Mail (2.3096.5)

Looking at the source regarding trailer handling, am I correct in =
seeing:

- request trailer supported with option to merge on/off into the normal =
headers
- mod_proxy_http support to move trailer from the backend to table =
trailers_out
- no support for sending trailer to the client in http core

?

There is interest in supporting trailer in HTTP/2, where they work for =
every request as chunked encoding is not an issue. That's why I'm =
asking.

Cheers,

  Stefan=

From dev-return-84516-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov  5 13:15:56 2015
Return-Path: <dev-return-84516-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2D7AE17F91
	for <apmail-httpd-dev-archive@www.apache.org>; Thu,  5 Nov 2015 13:15:56 +0000 (UTC)
Received: (qmail 1459 invoked by uid 500); 5 Nov 2015 13:15:55 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 1349 invoked by uid 500); 5 Nov 2015 13:15:55 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 1294 invoked by uid 99); 5 Nov 2015 13:15:55 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Nov 2015 13:15:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 02286C44FA
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 13:15:55 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id vppgtxyT4FML for <dev@httpd.apache.org>;
	Thu,  5 Nov 2015 13:15:49 +0000 (UTC)
Received: from mail-ig0-f180.google.com (mail-ig0-f180.google.com [209.85.213.180])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 1CD5A21270
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 13:15:49 +0000 (UTC)
Received: by igpw7 with SMTP id w7so11055069igp.0
        for <dev@httpd.apache.org>; Thu, 05 Nov 2015 05:15:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=hRajegSwY9cd119GaBCzUch6Kx+L+fEUE/Gcm1m9Ir0=;
        b=RZoQsa7Gd7tL0CxfSMgq2vWLi1e8sXfiV/THN9U/qm5fXBTumMO7ZQeTZK5o6BFNQ4
         hyDR5HaedoeAW04tz3HOPyn1lVR6XrgTd7OIK4z9f2n8vduI/oIme9Fm3Fj+loIdtx38
         +Rk9OU/PjSxiQJyFC7rFqcDkvxxooh4KAT2e1CTrb68EOvYYvES59xz4+bRTrhHMYB6A
         c7Ru5TqD1QHgyK1r/CreZqkOtAegJ8lfBnToj7OsvtMLwcmubvdf1XnD8eozpCsC1NgT
         qGDDzcy05EnBHL1FBmjpec8VrvLoxt/Oqb7lzU3q7FXGVBYXd1IEHyaOzbRDrnn3J9zI
         v0lg==
MIME-Version: 1.0
X-Received: by 10.50.150.9 with SMTP id ue9mr2898930igb.56.1446729348104; Thu,
 05 Nov 2015 05:15:48 -0800 (PST)
Received: by 10.64.59.197 with HTTP; Thu, 5 Nov 2015 05:15:48 -0800 (PST)
In-Reply-To: <E6E0EB2F-3A2D-4622-AC16-E5FFA9F0ED6F@greenbytes.de>
References: <E6E0EB2F-3A2D-4622-AC16-E5FFA9F0ED6F@greenbytes.de>
Date: Thu, 5 Nov 2015 08:15:48 -0500
Message-ID: <CALK=YjODFoiDkym1wFj9ETc_w2uOjbicVEzZswW2Fx6=2cZRLQ@mail.gmail.com>
Subject: Re: trailer
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Thu, Nov 5, 2015 at 8:04 AM, Stefan Eissing
<stefan.eissing@greenbytes.de> wrote:
> Looking at the source regarding trailer handling, am I correct in seeing:
>
> - request trailer supported with option to merge on/off into the normal headers
> - mod_proxy_http support to move trailer from the backend to table trailers_out
> - no support for sending trailer to the client in http core
>
> ?
>
> There is interest in supporting trailer in HTTP/2, where they work for every request as chunked encoding is not an issue. That's why I'm asking.

I think the summary is right.  What's there is a  very late addition.
We had a CVE where we originally folded trailers into request headers
(r->headers_in), which meant headers changed depending on which
modules looked / when you looked.

There is a relatively recent PR with someone asking about being able
to pass trailers to origin servers w/ mod_proxy for example.

From dev-return-84517-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov  5 15:39:24 2015
Return-Path: <dev-return-84517-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 24821187A3
	for <apmail-httpd-dev-archive@www.apache.org>; Thu,  5 Nov 2015 15:39:24 +0000 (UTC)
Received: (qmail 99803 invoked by uid 500); 5 Nov 2015 15:39:18 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 99726 invoked by uid 500); 5 Nov 2015 15:39:18 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 99716 invoked by uid 99); 5 Nov 2015 15:39:18 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Nov 2015 15:39:18 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 43ED5180A58
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 15:39:18 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.01
X-Spam-Level:
X-Spam-Status: No, score=-0.01 tagged_above=-999 required=6.31
	tests=[SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 17rPgFxkMrMN for <dev@httpd.apache.org>;
	Thu,  5 Nov 2015 15:39:12 +0000 (UTC)
Received: from monica.sharp.fm (monica.sharp.fm [80.168.143.5])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTP id 0FC3E444E9
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 15:39:09 +0000 (UTC)
Received: from [192.168.220.234] (unknown [192.168.220.234])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	(Authenticated sender: minfrin@sharp.fm)
	by monica.sharp.fm (Postfix) with ESMTPSA id 44AF380C84
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 15:39:01 +0000 (GMT)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: trailer
From: Graham Leggett <minfrin@sharp.fm>
In-Reply-To: <E6E0EB2F-3A2D-4622-AC16-E5FFA9F0ED6F@greenbytes.de>
Date: Thu, 5 Nov 2015 17:39:00 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <CFCD5DB8-BEF5-4788-9F34-B1826AE36D7B@sharp.fm>
References: <E6E0EB2F-3A2D-4622-AC16-E5FFA9F0ED6F@greenbytes.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

On 05 Nov 2015, at 3:04 PM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:

> Looking at the source regarding trailer handling, am I correct in =
seeing:

> - no support for sending trailer to the client in http core

Did a quick look at this and it looks like it, yes.

Ideally the CHUNK filter should =E2=80=9Cdo the right thing=E2=80=9D =
with respect to r->trailers_in (and _out), both for HTTP/1.1 and HTTP/2.

Regards,
Graham
=E2=80=94


From dev-return-84518-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov  5 16:03:24 2015
Return-Path: <dev-return-84518-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 341F2188AA
	for <apmail-httpd-dev-archive@www.apache.org>; Thu,  5 Nov 2015 16:03:24 +0000 (UTC)
Received: (qmail 87621 invoked by uid 500); 5 Nov 2015 16:03:17 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 87567 invoked by uid 500); 5 Nov 2015 16:03:17 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 87557 invoked by uid 99); 5 Nov 2015 16:03:17 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Nov 2015 16:03:17 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 999BE1A2424
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 16:03:16 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id rrKfpLJHi29c for <dev@httpd.apache.org>;
	Thu,  5 Nov 2015 16:03:13 +0000 (UTC)
Received: from mail-qg0-f44.google.com (mail-qg0-f44.google.com [209.85.192.44])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 19BCB2389E
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 16:03:13 +0000 (UTC)
Received: by qgec40 with SMTP id c40so8984508qge.2
        for <dev@httpd.apache.org>; Thu, 05 Nov 2015 08:03:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=RSGNU/ZDQ5WmRErVKNzqKX694RkXCGFo0RuW2AEAB6k=;
        b=ZyQ953IBqN6Eo8ooE1cDUEXLaqn9VARfbkh8B1ne0r2++s0vLBZjaOYrcpta0KJeGY
         AO+6EKDmHLXmY4Ntk0/zeeQWQvxVPTmTQZo039C7f05kxeavUu3vWJkipEDwCJPfjqhC
         vltyI/KNphYOLyYOdctqIXPw5vBwvcecHKnwceukN5NOTdZ9L+DH9nLy+6cR7Vel6hW1
         eFriCKRaPzr1LewQ6Xr/wzj6O4X7MlSuTnbYA1WKq79RlcHYtiFxkZYQebNeSfI9nTk1
         trFh3WbwJFY+Wo5rd7JR8Our2tAOnkar5vZ3QCH2+CycaBc+/sacb5JCL7Q2TYgS6hJg
         wvZA==
MIME-Version: 1.0
X-Received: by 10.140.43.183 with SMTP id e52mr8273270qga.38.1446739392108;
 Thu, 05 Nov 2015 08:03:12 -0800 (PST)
Received: by 10.55.101.196 with HTTP; Thu, 5 Nov 2015 08:03:12 -0800 (PST)
In-Reply-To: <20151105142113.CA0D73A022D@svn01-us-west.apache.org>
References: <20151105142113.CA0D73A022D@svn01-us-west.apache.org>
Date: Thu, 5 Nov 2015 17:03:12 +0100
Message-ID: <CAKQ1sVPFMV6kYZo5NRkE1H0W6fiFG3FKVXtCQ2poN91NYxkWgw@mail.gmail.com>
Subject: Re: svn commit: r1712782 - in /httpd/httpd/trunk/modules/http2:
 h2_session.c h2_stream_set.c h2_stream_set.h h2_version.h
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Thu, Nov 5, 2015 at 3:21 PM,  <icing@apache.org> wrote:
> Author: icing
> Date: Thu Nov  5 14:21:13 2015
> New Revision: 1712782
>
> URL: http://svn.apache.org/viewvc?rev=1712782&view=rev
> Log:
> replacing own stream_set with apr_hash internally
>
>
> Modified: httpd/httpd/trunk/modules/http2/h2_stream_set.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_stream_set.c?rev=1712782&r1=1712781&r2=1712782&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/modules/http2/h2_stream_set.c (original)
> +++ httpd/httpd/trunk/modules/http2/h2_stream_set.c Thu Nov  5 14:21:13 2015
> @@ -19,31 +19,30 @@
>  #include <apr_strings.h>
>
>  #include <httpd.h>
> -#include <http_core.h>
> -#include <http_connection.h>
>  #include <http_log.h>
>
>  #include "h2_private.h"
> -#include "h2_session.h"
>  #include "h2_stream.h"
> -#include "h2_task.h"
>  #include "h2_stream_set.h"
>
> -#define H2_STREAM_IDX(list, i) ((h2_stream**)(list)->elts)[i]
>
>  struct h2_stream_set {
> -    apr_array_header_t *list;
> +    apr_hash_t *hash;
>  };
>
> -h2_stream_set *h2_stream_set_create(apr_pool_t *pool)
> +static unsigned int stream_hash(const char *key, apr_ssize_t *klen)
> +{
> +    /* we use the "int stream_id" has key, which always odd from
> +    * client and even from server. As long as we do not mix them
> +    * in one set, snip off the lsb. */
> +    return (unsigned int)(*((int*)key)) >> 1;

This may cause alignment issues, 'key' is not necessarily int or word
aligned here.
You possibly should go for something like:
  apr_uint32_r k =
      (key[0] << 0)  |
      (key[1] << 8)  |
      (key[2] << 16) |
      (key[3] << 24) ;
or the other way around depending on byte order (if that matters, probably not).

> +}

Regards,
Yann.

From dev-return-84519-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov  5 16:07:44 2015
Return-Path: <dev-return-84519-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2B43C188FF
	for <apmail-httpd-dev-archive@www.apache.org>; Thu,  5 Nov 2015 16:07:44 +0000 (UTC)
Received: (qmail 512 invoked by uid 500); 5 Nov 2015 16:07:40 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 449 invoked by uid 500); 5 Nov 2015 16:07:40 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 439 invoked by uid 99); 5 Nov 2015 16:07:40 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Nov 2015 16:07:40 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 4C5BCC14C5
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 16:07:40 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id BzlfNVV_x67U for <dev@httpd.apache.org>;
	Thu,  5 Nov 2015 16:07:37 +0000 (UTC)
Received: from mail-qg0-f42.google.com (mail-qg0-f42.google.com [209.85.192.42])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id D4E3842ABE
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 16:07:36 +0000 (UTC)
Received: by qgeo38 with SMTP id o38so70430068qge.0
        for <dev@httpd.apache.org>; Thu, 05 Nov 2015 08:07:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Emzs6L6rKaqvBovMzDvFzMeoYQbUt5aVdFkrMsj5ccM=;
        b=yb+PD6tRXMlub9nni9M0xXMvsqC1oFDLxWX/JFBE96v/a6CBYmVH0psRL617F7yt0l
         ieaAnxK88ClY5y99esCXdr9XziO0XMsxtDgJcnvWwXiv0KPEW8RHErhzvPHx6+WJvkHN
         ZCf1ewIGfGf/52vPm3lf3S4ybMYmOkNahxi9hCJejoyTtVEMYpNa+sV1SU9k7quQBAx0
         o7V3ZE3TSSJ1vt0ffVPeoki/keOStEdKQKwPP6f92nLD3gwrQ9e6DPtPriVBslClzO3z
         qqRtu4qxCzIhMstljU72f1GwOIQePqy3oDLnfhrOgkspEwx1WyaRzz6bVcWoSGzo2Dij
         7xaA==
MIME-Version: 1.0
X-Received: by 10.140.179.213 with SMTP id z204mr3852195qhz.70.1446739656312;
 Thu, 05 Nov 2015 08:07:36 -0800 (PST)
Received: by 10.55.101.196 with HTTP; Thu, 5 Nov 2015 08:07:36 -0800 (PST)
In-Reply-To: <CAKQ1sVPFMV6kYZo5NRkE1H0W6fiFG3FKVXtCQ2poN91NYxkWgw@mail.gmail.com>
References: <20151105142113.CA0D73A022D@svn01-us-west.apache.org>
	<CAKQ1sVPFMV6kYZo5NRkE1H0W6fiFG3FKVXtCQ2poN91NYxkWgw@mail.gmail.com>
Date: Thu, 5 Nov 2015 17:07:36 +0100
Message-ID: <CAKQ1sVM2BTM_AQ+=7pDAqiJQ97Dg3QY9nJY=bDc6NVgfS1+QJQ@mail.gmail.com>
Subject: Re: svn commit: r1712782 - in /httpd/httpd/trunk/modules/http2:
 h2_session.c h2_stream_set.c h2_stream_set.h h2_version.h
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Thu, Nov 5, 2015 at 5:03 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
> On Thu, Nov 5, 2015 at 3:21 PM,  <icing@apache.org> wrote:
>>
>> -h2_stream_set *h2_stream_set_create(apr_pool_t *pool)
>> +static unsigned int stream_hash(const char *key, apr_ssize_t *klen)
>> +{
>> +    /* we use the "int stream_id" has key, which always odd from
>> +    * client and even from server. As long as we do not mix them
>> +    * in one set, snip off the lsb. */
>> +    return (unsigned int)(*((int*)key)) >> 1;
>
> This may cause alignment issues, 'key' is not necessarily int or word
> aligned here.
> You possibly should go for something like:
>   apr_uint32_r k =
>       (key[0] << 0)  |
>       (key[1] << 8)  |
>       (key[2] << 16) |
>       (key[3] << 24) ;

Or maybe simply:
  memcpy(&k, key, 4);
  return k;
...

From dev-return-84520-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov  5 16:21:07 2015
Return-Path: <dev-return-84520-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 638FA18A26
	for <apmail-httpd-dev-archive@www.apache.org>; Thu,  5 Nov 2015 16:21:07 +0000 (UTC)
Received: (qmail 54551 invoked by uid 500); 5 Nov 2015 16:21:07 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 54473 invoked by uid 500); 5 Nov 2015 16:21:06 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 54463 invoked by uid 99); 5 Nov 2015 16:21:06 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Nov 2015 16:21:06 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 38D9B180A58
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 16:21:06 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.111
X-Spam-Level:
X-Spam-Status: No, score=-0.111 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id DEf7V88XY6sp for <dev@httpd.apache.org>;
	Thu,  5 Nov 2015 16:21:05 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id CCAEC20F6E
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 16:21:04 +0000 (UTC)
Received: from [192.168.1.42] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 5451D15A06A6
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 17:20:56 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1446740456; bh=1tzPUgbgtRlzWk3KuPrGKu+bFQ/jSQoU246ILF1WA5E=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=AbwnYh8hKU+LVQISLGqldeuUUphpN0tVXvEwGfDguSqxkPPN/PSw953JKOvH+zT6v
	 1HbJvTNudalTjJ+DRR6Gb1SWc36vJyHsdvgIlzc8xCIGcnGMXKd7ejMxm8ifcAhA+t
	 x6/dSmskjhWmIBGefufdlzfehxTwp4bfPhrNE/Vc=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: svn commit: r1712782 - in /httpd/httpd/trunk/modules/http2: h2_session.c h2_stream_set.c h2_stream_set.h h2_version.h
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CAKQ1sVM2BTM_AQ+=7pDAqiJQ97Dg3QY9nJY=bDc6NVgfS1+QJQ@mail.gmail.com>
Date: Thu, 5 Nov 2015 17:20:56 +0100
Content-Transfer-Encoding: 7bit
Message-Id: <691F3502-5959-461E-8201-B9BA0CB5772E@greenbytes.de>
References: <20151105142113.CA0D73A022D@svn01-us-west.apache.org> <CAKQ1sVPFMV6kYZo5NRkE1H0W6fiFG3FKVXtCQ2poN91NYxkWgw@mail.gmail.com> <CAKQ1sVM2BTM_AQ+=7pDAqiJQ97Dg3QY9nJY=bDc6NVgfS1+QJQ@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

But if I only put them in via sth like:

void h2_stream_set_add(h2_stream_set *sp, h2_stream *stream)
{
    apr_hash_set(sp->hash, &stream->id, sizeof(stream->id), stream);
}

the (int*) conversion to (void*) and back to (int*) should not hurt. Or?

It's the only way I access the hash and its not visible outside that file...

//Stefan


> Am 05.11.2015 um 17:07 schrieb Yann Ylavic <ylavic.dev@gmail.com>:
> 
> On Thu, Nov 5, 2015 at 5:03 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>> On Thu, Nov 5, 2015 at 3:21 PM,  <icing@apache.org> wrote:
>>> 
>>> -h2_stream_set *h2_stream_set_create(apr_pool_t *pool)
>>> +static unsigned int stream_hash(const char *key, apr_ssize_t *klen)
>>> +{
>>> +    /* we use the "int stream_id" has key, which always odd from
>>> +    * client and even from server. As long as we do not mix them
>>> +    * in one set, snip off the lsb. */
>>> +    return (unsigned int)(*((int*)key)) >> 1;
>> 
>> This may cause alignment issues, 'key' is not necessarily int or word
>> aligned here.
>> You possibly should go for something like:
>>  apr_uint32_r k =
>>      (key[0] << 0)  |
>>      (key[1] << 8)  |
>>      (key[2] << 16) |
>>      (key[3] << 24) ;
> 
> Or maybe simply:
>  memcpy(&k, key, 4);
>  return k;
> ...


From dev-return-84521-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov  5 16:50:01 2015
Return-Path: <dev-return-84521-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4860918B80
	for <apmail-httpd-dev-archive@www.apache.org>; Thu,  5 Nov 2015 16:50:01 +0000 (UTC)
Received: (qmail 39489 invoked by uid 500); 5 Nov 2015 16:50:00 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 39419 invoked by uid 500); 5 Nov 2015 16:50:00 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 39409 invoked by uid 99); 5 Nov 2015 16:50:00 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Nov 2015 16:50:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id EEDBAC4983
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 16:49:59 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id JRofUqx3Q1eP for <dev@httpd.apache.org>;
	Thu,  5 Nov 2015 16:49:53 +0000 (UTC)
Received: from mail-qg0-f46.google.com (mail-qg0-f46.google.com [209.85.192.46])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 190B121310
	for <dev@httpd.apache.org>; Thu,  5 Nov 2015 16:49:53 +0000 (UTC)
Received: by qgeb1 with SMTP id b1so17955101qge.1
        for <dev@httpd.apache.org>; Thu, 05 Nov 2015 08:49:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=VVchBPzT6h/6rCj/J3UBS6oiMVDzZs8sM6bBR4ZDD3U=;
        b=d6AjFUXpItdlaIRm5ZJHvgNqahjXyjcmbHHZMN7n3Pvorktobh2DVZKdsODJ5GRl6g
         2rs9WwSb1BpMlIbWROuw1YsEkVdJU/QX9W15LKe615VEO9vfZawF4pRQ3bQVHqUECLdR
         U2MDD0LYZuC8SJvHjfEgda0TQiTRd9yVd+gkaZVd/T7ZRC18lH9iJwBHGa3zsHEvi5DP
         aYy3KY/tTPHsRB54CSahGMgRpEh5XWzLdd9GoH0k5Mv/Q0dgAgt0GHnq5HO01lj1hmvU
         8s/QE+0BrhY/SjHxPWtySArSRFdg3g5rDtseqoMyhWpP2Pd5fzeMoNr2BcngwynkNA/K
         0EGA==
MIME-Version: 1.0
X-Received: by 10.140.216.87 with SMTP id m84mr8839702qhb.97.1446742192071;
 Thu, 05 Nov 2015 08:49:52 -0800 (PST)
Received: by 10.55.101.196 with HTTP; Thu, 5 Nov 2015 08:49:52 -0800 (PST)
In-Reply-To: <691F3502-5959-461E-8201-B9BA0CB5772E@greenbytes.de>
References: <20151105142113.CA0D73A022D@svn01-us-west.apache.org>
	<CAKQ1sVPFMV6kYZo5NRkE1H0W6fiFG3FKVXtCQ2poN91NYxkWgw@mail.gmail.com>
	<CAKQ1sVM2BTM_AQ+=7pDAqiJQ97Dg3QY9nJY=bDc6NVgfS1+QJQ@mail.gmail.com>
	<691F3502-5959-461E-8201-B9BA0CB5772E@greenbytes.de>
Date: Thu, 5 Nov 2015 17:49:52 +0100
Message-ID: <CAKQ1sVPAnJBnb+sax+3y6WD+=Z2bkqF4Yxd918BOHiR1=36oDg@mail.gmail.com>
Subject: Re: svn commit: r1712782 - in /httpd/httpd/trunk/modules/http2:
 h2_session.c h2_stream_set.c h2_stream_set.h h2_version.h
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Thu, Nov 5, 2015 at 5:20 PM, Stefan Eissing
<stefan.eissing@greenbytes.de> wrote:
> But if I only put them in via sth like:
>
> void h2_stream_set_add(h2_stream_set *sp, h2_stream *stream)
> {
>     apr_hash_set(sp->hash, &stream->id, sizeof(stream->id), stream);
> }
>
> the (int*) conversion to (void*) and back to (int*) should not hurt. Or?
>
> It's the only way I access the hash and its not visible outside that file...

OK, h2_stream->id is an int member, so it should always be aligned
(provided h2_stream itself is aligned, but that's another story :)
Any char* dereferenced as an integral number makes me nervous, someone
may reuse that hash function someday...
But I agree this is not necessary for now.

From dev-return-84522-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov  6 14:34:35 2015
Return-Path: <dev-return-84522-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A6FA8184DE
	for <apmail-httpd-dev-archive@www.apache.org>; Fri,  6 Nov 2015 14:34:35 +0000 (UTC)
Received: (qmail 66751 invoked by uid 500); 6 Nov 2015 14:34:35 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 66679 invoked by uid 500); 6 Nov 2015 14:34:35 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 66669 invoked by uid 99); 6 Nov 2015 14:34:35 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Nov 2015 14:34:35 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id C5A171A4243
	for <dev@httpd.apache.org>; Fri,  6 Nov 2015 14:34:34 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=egnyte_com.20150623.gappssmtp.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id XulnuwaEyeEK for <dev@httpd.apache.org>;
	Fri,  6 Nov 2015 14:34:29 +0000 (UTC)
Received: from mail-io0-f178.google.com (mail-io0-f178.google.com [209.85.223.178])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id B9EF021141
	for <dev@httpd.apache.org>; Fri,  6 Nov 2015 14:34:28 +0000 (UTC)
Received: by ioc74 with SMTP id 74so59998019ioc.2
        for <dev@httpd.apache.org>; Fri, 06 Nov 2015 06:34:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=egnyte_com.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=iqRFeaX/Aq3Bi5g6eyCza5jU2kP7Ng0hpbM61uTcMa4=;
        b=LtQxkFbQ7fa5bq57sc5gEZpQ6S8dESBwlKo/WRmkLnNYQ9kbnG6SBpAkspNm5ZTvc2
         LUSqkHiGCY6XIhEXCftZ3ImdCR5u+mCDCnwq/BN3afpzkoI6L4G6B1GlyqlAxlyRV/cF
         YNAz/j+/4A0ZwcHJ18oLe6b2Rj7p8nyfmu8FMDGA2GOsJpO+lq/kAajqCCqszRhZN6rq
         t4iEy9E52h9eXeZI/tK7zRINZgNdicYK9+3LUK+onnwLGBwl5BryIX/B+f2ToPi78bT7
         0v1ugAa43I1T6UkgrhE/vcdM+VcSHEre8E0igkIDfNh9H7i8+KaZESxVmpaZgegESe5O
         3Swg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=iqRFeaX/Aq3Bi5g6eyCza5jU2kP7Ng0hpbM61uTcMa4=;
        b=djm6VNPBqd1/g+RzMcamn9qxQdMaeM8lN8Wopt5eXMcEDHTB5I5zjhaC9MfUFFHMAS
         mOm5LtVf0ehj69LYe29srDM4eW9rfagtNLdTsa1Z4pIHY30FyaBV7JteSbPgFfBDkEZq
         ZTiq/pjvyethsOmO+GIT3Usm7CeDHkYutzFl5bF9ruC0iFOD7YdOk0kn7JcuGxMdzF9p
         V5xpXEWXTvGASyMPWh1qLB8lwYi0PmCJk3zL6RClCMJVbMiAhJF6ci6C32LnxOiBLZdq
         15RryUHtho7nz7sGD4Cw2SfPRNTPLq1ifDIRapJzBt/oPs97v9FV3xRK3YIuLxZuDCpX
         dbtQ==
X-Gm-Message-State: ALoCoQnJGXvLe7Squao7U8LOQNMwkNs8yPsUxa9ZRQ0uunqwrQZHoPB6X/DH/ML56thkLmHvieHI
MIME-Version: 1.0
X-Received: by 10.107.6.195 with SMTP id f64mr14557843ioi.46.1446820467504;
 Fri, 06 Nov 2015 06:34:27 -0800 (PST)
Received: by 10.36.72.137 with HTTP; Fri, 6 Nov 2015 06:34:27 -0800 (PST)
In-Reply-To: <CALK=YjODFoiDkym1wFj9ETc_w2uOjbicVEzZswW2Fx6=2cZRLQ@mail.gmail.com>
References: <E6E0EB2F-3A2D-4622-AC16-E5FFA9F0ED6F@greenbytes.de>
	<CALK=YjODFoiDkym1wFj9ETc_w2uOjbicVEzZswW2Fx6=2cZRLQ@mail.gmail.com>
Date: Fri, 6 Nov 2015 15:34:27 +0100
Message-ID: <CAECPfcxXUiMTC6fN8+xRsXvRO8-otngJmHMYJy8aM=TMacr6mA@mail.gmail.com>
Subject: Re: trailer
From: Daniil Iaitskov <diaitskov@egnyte.com>
To: dev@httpd.apache.org
Content-Type: multipart/alternative; boundary=001a113df8a8052e360523e024e1

--001a113df8a8052e360523e024e1
Content-Type: text/plain; charset=UTF-8

Hi,

On Thu, Nov 5, 2015 at 2:15 PM, Eric Covener <covener@gmail.com> wrote:

> On Thu, Nov 5, 2015 at 8:04 AM, Stefan Eissing
> <stefan.eissing@greenbytes.de> wrote:
> > Looking at the source regarding trailer handling, am I correct in seeing:
> >
> > - request trailer supported with option to merge on/off into the normal
> headers
> > - mod_proxy_http support to move trailer from the backend to table
> trailers_out
> > - no support for sending trailer to the client in http core
> >
> > ?
> >
> > There is interest in supporting trailer in HTTP/2, where they work for
> every request as chunked encoding is not an issue. That's why I'm asking.
>
> I think the summary is right.  What's there is a  very late addition.
> We had a CVE where we originally folded trailers into request headers
> (r->headers_in), which meant headers changed depending on which
> modules looked / when you looked.
>
> There is a relatively recent PR with someone asking about being able
> to pass trailers to origin servers w/ mod_proxy for example.
>

Yeah, I would be very glad if you merge the patch
<https://bz.apache.org/bugzilla/show_bug.cgi?id=58177>.
I also pushed a symmetric patch
<https://issues.apache.org/jira/browse/HTTPCORE-412> to Apache HTTP client
library.



-- 


Daneel Yaitskov
Egnyte Java Team

skype: daneel_s_yaitskov

--001a113df8a8052e360523e024e1
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Hi,<br><div class=3D"gmail_extra"><br><div class=3D"gmail_=
quote">On Thu, Nov 5, 2015 at 2:15 PM, Eric Covener <span dir=3D"ltr">&lt;<=
a href=3D"mailto:covener@gmail.com" target=3D"_blank">covener@gmail.com</a>=
&gt;</span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px=
 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);bor=
der-left-style:solid;padding-left:1ex"><span class=3D"">On Thu, Nov 5, 2015=
 at 8:04 AM, Stefan Eissing<br>
&lt;<a href=3D"mailto:stefan.eissing@greenbytes.de">stefan.eissing@greenbyt=
es.de</a>&gt; wrote:<br>
&gt; Looking at the source regarding trailer handling, am I correct in seei=
ng:<br>
&gt;<br>
&gt; - request trailer supported with option to merge on/off into the norma=
l headers<br>
&gt; - mod_proxy_http support to move trailer from the backend to table tra=
ilers_out<br>
&gt; - no support for sending trailer to the client in http core<br>
&gt;<br>
&gt; ?<br>
&gt;<br>
&gt; There is interest in supporting trailer in HTTP/2, where they work for=
 every request as chunked encoding is not an issue. That&#39;s why I&#39;m =
asking.<br>
<br>
</span>I think the summary is right.=C2=A0 What&#39;s there is a=C2=A0 very=
 late addition.<br>
We had a CVE where we originally folded trailers into request headers<br>
(r-&gt;headers_in), which meant headers changed depending on which<br>
modules looked / when you looked.<br>
<br>
There is a relatively recent PR with someone asking about being able<br>
to pass trailers to origin servers w/ mod_proxy for example.<br></blockquot=
e><div><br></div><div>Yeah, I would be very glad if you merge the <a href=
=3D"https://bz.apache.org/bugzilla/show_bug.cgi?id=3D58177">patch</a>.</div=
><div>I also pushed a symmetric <a href=3D"https://issues.apache.org/jira/b=
rowse/HTTPCORE-412">patch</a> to Apache HTTP client library.</div></div><br=
><br clear=3D"all"><div><br></div>-- <br><div class=3D"gmail_signature"><di=
v dir=3D"ltr"><div><div dir=3D"ltr"><br><div><br></div><div>Daneel Yaitskov=
</div><div>Egnyte Java Team</div><div><br></div><div>skype: daneel_s_yaitsk=
ov</div></div></div></div></div>
</div></div>

--001a113df8a8052e360523e024e1--

From dev-return-84523-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov  6 16:53:29 2015
Return-Path: <dev-return-84523-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D63DB18A8C
	for <apmail-httpd-dev-archive@www.apache.org>; Fri,  6 Nov 2015 16:53:29 +0000 (UTC)
Received: (qmail 16310 invoked by uid 500); 6 Nov 2015 16:53:25 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 16199 invoked by uid 500); 6 Nov 2015 16:53:24 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 16102 invoked by uid 99); 6 Nov 2015 16:53:24 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Nov 2015 16:53:24 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 7EBF3C1784
	for <dev@httpd.apache.org>; Fri,  6 Nov 2015 16:53:24 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.011
X-Spam-Level:
X-Spam-Status: No, score=-0.011 tagged_above=-999 required=6.31
	tests=[SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 26WCssmq2PMu for <dev@httpd.apache.org>;
	Fri,  6 Nov 2015 16:53:23 +0000 (UTC)
Received: from monica.sharp.fm (monica.sharp.fm [80.168.143.5])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTP id 00B3520F6E
	for <dev@httpd.apache.org>; Fri,  6 Nov 2015 16:53:22 +0000 (UTC)
Received: from [10.1.82.114] (dab-ntm1-h-86-6.dab.02.net [82.132.230.151])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	(Authenticated sender: minfrin@sharp.fm)
	by monica.sharp.fm (Postfix) with ESMTPSA id CDC5C80C6B
	for <dev@httpd.apache.org>; Fri,  6 Nov 2015 16:53:15 +0000 (GMT)
From: Graham Leggett <minfrin@sharp.fm>
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (1.0)
Subject: Moderations for modules.apache.org
Message-Id: <3C83A262-8317-4166-8282-55F067BDD8F6@sharp.fm>
Date: Fri, 6 Nov 2015 16:53:12 +0000
To: dev@httpd.apache.org
X-Mailer: iPhone Mail (13B143)

Hi all,

I've had a module waiting to be approved at modules.apache.org for a while, a=
nyone know who the moderator is?

Regards,
Graham
--


From dev-return-84524-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov  6 16:55:49 2015
Return-Path: <dev-return-84524-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D851B18AB5
	for <apmail-httpd-dev-archive@www.apache.org>; Fri,  6 Nov 2015 16:55:49 +0000 (UTC)
Received: (qmail 29497 invoked by uid 500); 6 Nov 2015 16:55:49 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 29439 invoked by uid 500); 6 Nov 2015 16:55:49 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 29429 invoked by uid 99); 6 Nov 2015 16:55:49 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Nov 2015 16:55:49 +0000
Received: from [192.168.1.37] (2804ds5-soeb.0.fullrate.dk [90.184.204.23])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPSA id DFF0D1A0046
	for <dev@httpd.apache.org>; Fri,  6 Nov 2015 16:55:48 +0000 (UTC)
Subject: Re: Moderations for modules.apache.org
To: dev@httpd.apache.org
References: <3C83A262-8317-4166-8282-55F067BDD8F6@sharp.fm>
From: Daniel Gruno <humbedooh@apache.org>
Message-ID: <563CDB8E.8090500@apache.org>
Date: Fri, 6 Nov 2015 17:55:42 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <3C83A262-8317-4166-8282-55F067BDD8F6@sharp.fm>
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: 7bit

On 11/06/2015 05:53 PM, Graham Leggett wrote:
> Hi all,
> 
> I've had a module waiting to be approved at modules.apache.org for a while, anyone know who the moderator is?
> 
> Regards,
> Graham
> --
> 
Hi Graham,
I'm sorry to say modules.apache.org is so bot/spam infested now, that
it's impossible to moderate it unless I spend more than an hour every
day going through all the fake modules and users added on a daily basis.

I am contemplating scrapping it entirely, or possibly creating a new
system at some point, with stronger anti-spam measures.

with regards,
Daniel.

From dev-return-84525-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov  8 07:15:17 2015
Return-Path: <dev-return-84525-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0BEC71886C
	for <apmail-httpd-dev-archive@www.apache.org>; Sun,  8 Nov 2015 07:15:17 +0000 (UTC)
Received: (qmail 83233 invoked by uid 500); 8 Nov 2015 07:15:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 83161 invoked by uid 500); 8 Nov 2015 07:15:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 83152 invoked by uid 99); 8 Nov 2015 07:15:16 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Nov 2015 07:15:16 +0000
Received: from asf-bz1-us-mid.priv.apache.org (nat1-us-mid.apache.org [23.253.172.122])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPS id AAC241A022F
	for <dev@httpd.apache.org>; Sun,  8 Nov 2015 07:15:15 +0000 (UTC)
Received: by asf-bz1-us-mid.priv.apache.org (ASF Mail Server at asf-bz1-us-mid.priv.apache.org, from userid 0)
	id 296C960019; Sun,  8 Nov 2015 07:15:15 +0000 (UTC)
From: bugzilla@apache.org
To: dev@httpd.apache.org
Subject: Bug report for Apache httpd-2 [2015/11/08]
Message-Id: <20151108071515.296C960019@asf-bz1-us-mid.priv.apache.org>
Date: Sun,  8 Nov 2015 07:15:05 +0000 (UTC)

+---------------------------------------------------------------------------+
| Bugzilla Bug ID                                                           |
|     +---------------------------------------------------------------------+
|     | Status: UNC=Unconfirmed NEW=New         ASS=Assigned                |
|     |         OPN=Reopened    VER=Verified    (Skipped Closed/Resolved)   |
|     |   +-----------------------------------------------------------------+
|     |   | Severity: BLK=Blocker CRI=Critical  REG=Regression  MAJ=Major   |
|     |   |           MIN=Minor   NOR=Normal    ENH=Enhancement TRV=Trivial |
|     |   |   +-------------------------------------------------------------+
|     |   |   | Date Posted                                                 |
|     |   |   |          +--------------------------------------------------+
|     |   |   |          | Description                                      |
|     |   |   |          |                                                  |
| 7483|Ass|Enh|2002-03-26|Add FileAction directive to assign a cgi interpret|
| 8713|Inf|Min|2002-05-01|No Errorlog on PROPFIND/Depth:Infinity            |
| 8867|Opn|Cri|2002-05-07|exports.c generation fails when using a symlink to|
|10747|New|Maj|2002-07-12|ftp SIZE command and 'smart' ftp servers results i|
|11294|New|Enh|2002-07-30|desired vhost_alias option                        |
|11580|Opn|Enh|2002-08-09|generate Content-Location headers                 |
|12033|Opn|Nor|2002-08-26|Graceful restart immediately result in [warn] long|
|12680|New|Enh|2002-09-16|Digest authentication with integrity protection   |
|13599|Inf|Nor|2002-10-14|autoindex formating broken for multibyte sequences|
|13661|Ass|Enh|2002-10-15|Apache cannot not handle dynamic IP reallocation  |
|14104|Opn|Enh|2002-10-30|not documented: must restart server to load new CR|
|14496|New|Enh|2002-11-13|Cannot upgrade any version on Windows. Must uninst|
|14922|Inf|Enh|2002-11-28|<target> is currently hardcoded to 'apache2'      |
|15719|Inf|Nor|2002-12-30|WebDAV MOVE to destination URI which is content-ne|
|16761|Inf|Nor|2003-02-04|CustomLog with pipe spawns process during config  |
|16802|New|Enh|2003-02-05|Additional AllowOverride directive "Restrict"     |
|16811|Ass|Maj|2003-02-05|mod_autoindex always return webpages in UTF-8.    |
|17107|New|Min|2003-02-16|Windows should not install printenv               |
|17114|New|Enh|2003-02-17|Please add strip and install-strip targets to Make|
|17244|Ass|Nor|2003-02-20|./configure --help gives false information regardi|
|17497|Opn|Nor|2003-02-27|mod_mime_magic generates incorrect response header|
|18325|New|Enh|2003-03-25|PAM support for suEXEC                            |
|18334|Inf|Cri|2003-03-25|Server crashes when authenticating users against L|
|18497|New|Min|2003-03-30|configure --help gives wrong default for sysconfdi|
|19043|New|Min|2003-04-15|Interesting interaction between cern_meta module a|
|19670|New|Enh|2003-05-05|content type header supplied upon PUT is thrown aw|
|20036|Ass|Nor|2003-05-19|Trailing Dots stripped from PATH_INFO environment |
|21253|New|Nor|2003-07-01|Mime magic doesn't continue if type is specifed fo|
|21260|New|Nor|2003-07-02|CacheMaxExpire directive not enforced !           |
|21533|Ass|Cri|2003-07-11|Multiple levels of htacces files can cause mod_aut|
|22138|Inf|Cri|2003-08-05|Webdav is not preccessing special chars right.    |
|22237|New|Enh|2003-08-08|option to disable ServerSignature on index pages  |
|22484|Opn|Maj|2003-08-16|semaphore problem takes httpd down                |
|22686|Opn|Nor|2003-08-25|ab: apr_poll: The timeout specified has expired (7|
|22898|Opn|Nor|2003-09-02|nph scripts with two HTTP header                  |
|23167|Inf|Cri|2003-09-14|--enable-layout never goes to apr apr-util        |
|23181|New|Nor|2003-09-15|Status 304 (Not modified) and chunking leads to an|
|23238|New|Cri|2003-09-18|non-async-signal-safe operations from signal handl|
|23330|New|Enh|2003-09-22|Enhance ApacheMonitor to view and control Tomcat s|
|23911|Opn|Cri|2003-10-18|CGI processes left defunct/zombie under 2.0.54    |
|24031|New|Enh|2003-10-23|Passphrase protected private key in SSLProxyMachin|
|24095|Opn|Cri|2003-10-24|ERROR "Parent: child process exited with status 32|
|24437|Opn|Nor|2003-11-05|mod_auth_ldap doubly-escapes backslash (\) charact|
|24890|Opn|Nor|2003-11-21|Apache config parser should not be local aware ( g|
|25014|New|Enh|2003-11-26|A flexible interface for mod_log_config           |
|25201|New|Enh|2003-12-04|Provide Cache Purge operation                     |
|25240|Inf|Enh|2003-12-05|SSL Library Error: 336105671 logged as information|
|25435|New|Enh|2003-12-11|sethandler and directoryindex not playing nice    |
|25469|Opn|Enh|2003-12-12|create AuthRoot for defining paths to auth files  |
|25484|Ass|Nor|2003-12-12|Non-service Apache cannot be stopped in WinXP     |
|25543|Inf|Nor|2003-12-15|mod_proxy_ajp overwrites existing response headers|
|25667|New|Nor|2003-12-19|Memory leak in function ssl_scache_dbm_retrieve().|
|25863|New|Enh|2004-01-02|new per-host initialization hooks                 |
|26005|New|Nor|2004-01-08|SERVER_NAME incorrect when using IPv6 address in U|
|26142|New|Maj|2004-01-14|EnableSendFile Off for Windows XP Home            |
|26153|Opn|Cri|2004-01-15|Apache cygwin directory traversal vulnerability   |
|26368|New|Min|2004-01-23|File extensions in AddDescription treated as part |
|26446|New|Nor|2004-01-26|flush buckets followed by eos bucket emit multiple|
|26478|New|Enh|2004-01-28|mod_dav does not expose a method for setting the D|
|26835|New|Enh|2004-02-10|[PATCH] Mod_status Readability & Browser Side Tabl|
|27257|Ass|Enh|2004-02-26|rotatelogs with getopt and setuid                 |
|27578|New|Enh|2004-03-10|made getlastmodified a writable property          |
|27715|Ass|Enh|2004-03-16|Client sending misformed Range "bytes = 0-100" ins|
|27791|Inf|Nor|2004-03-18|mod_cache doesn't re-cache expired content        |
|27835|New|Enh|2004-03-22|When proxying FTP, all errors turns into 404      |
|27869|New|Enh|2004-03-23|stopping and starting httpd again immediately caus|
|28854|Inf|Nor|2004-05-09|Build fails with missing library call on Solaris i|
|28903|New|Enh|2004-05-11|Hooks to add environment variables to CGI and othe|
|29090|Ass|Enh|2004-05-19|MultiviewsMatch NegotiatedOnly extensions not resp|
|29165|New|Nor|2004-05-24|Parent directory icon not correct                 |
|29446|New|Enh|2004-06-08|want directive for setting content negotiation qua|
|29449|New|Enh|2004-06-09|Limit length of specified fields in LogFormat     |
|29450|New|Enh|2004-06-09|Improved logging for mod_access                   |
|29510|Ass|Enh|2004-06-10|ab does not support multiple cookies              |
|29644|Ver|Nor|2004-06-17|mod_proxy keeps downloading even after the client |
|29755|Opn|Nor|2004-06-23|mod_usertrack should use err_headers_out          |
|29822|New|Enh|2004-06-26|implement FTP 'PUT' support in proxy_ftp.c        |
|29941|Ass|Enh|2004-07-06|log files are not tested for availability on confi|
|30259|Ass|Enh|2004-07-22|When proxy connects to backend, a DNS lookup is do|
|30505|Ass|Enh|2004-08-05|Apache uses 'Error', and not lower level event typ|
|30730|Inf|Nor|2004-08-18|[PatchAvailable] mod_actions and Server-Status    |
|30865|Inf|Maj|2004-08-26|mod_disk_cache leaves many temporary files slowing|
|31302|Opn|Cri|2004-09-19|suexec doesn't execute commands if they're not in |
|31311|New|Enh|2004-09-20|Remote user not logged in reverse proxy scenario  |
|31352|Ass|Enh|2004-09-21|RFE, Bind to LDAP server with browser supplier use|
|31418|Opn|Nor|2004-09-25|SSLUserName is not usable by other modules        |
|31484|New|Maj|2004-09-30|Custom environment variables not passed to content|
|31490|New|Nor|2004-09-30|mod_proxy_ftp renders filenames with spaces badly |
|31565|New|Enh|2004-10-06|Won't start correctly if parent closed stdin, stdo|
|31679|New|Enh|2004-10-12|If the argument of a CGI has two or more consecuti|
|31709|Inf|Nor|2004-10-13|Raises an error on SSL name based virtualhosts (wi|
|31712|New|Enh|2004-10-14|config_file is NULL at ap_walk_config etc         |
|31952|New|Enh|2004-10-29|mod_proxy and RealPlayer: audio content streaming |
|32051|Opn|Nor|2004-11-04|mod_example is not thread safe                    |
|32328|Opn|Enh|2004-11-19|Make mod_rewrite escaping optional / expose intern|
|32346|New|Enh|2004-11-22|mod_include/include virtual checks content-type is|
|32524|New|Enh|2004-12-03|ab: add an option to specify a source address     |
|32703|Inf|Enh|2004-12-14|Cannot determine that Apache is frozen if /var fil|
|32750|Ass|Maj|2004-12-17|mod_proxy + Win32DisableAcceptEx = memory leak    |
|32877|New|Enh|2004-12-29|wrong utf-8 encoding/escaping in a href for umlaut|
|33084|New|Enh|2005-01-13|Optional certificate validity period check on SSLV|
|33089|New|Nor|2005-01-13|mod_include: Options +Includes (or IncludesNoExec)|
|33207|New|Nor|2005-01-23|Results of my suexec.c code audit                 |
|33215|New|Nor|2005-01-24|Cygwin build/install.sh fix (OSTYPE => ext=.exe)  |
|33512|Inf|Maj|2005-02-11|mod_mem_cache and possibly mod_deflate            |
|33627|New|Nor|2005-02-18|Bite-sized changes making progress towards compila|
|33685|New|Maj|2005-02-22|Unable to install in the path containing non engli|
|34270|Inf|Nor|2005-04-01|Large POSTs over SSL from Internet Explorer do not|
|34375|New|Enh|2005-04-08|enhancements for mod_include                      |
|34377|New|Enh|2005-04-08|Allow the overriding of 401 Unauthorized returns f|
|34405|New|Enh|2005-04-11|adds DOCUMENT_NAME_WITHOUT_SUFFIX to mod_include  |
|34508|New|Nor|2005-04-19|Randomly slow graceful restart, not accepting new |
|34519|New|Enh|2005-04-19|Directory index should emit valid XHTML           |
|35049|New|Nor|2005-05-24|let AddDefaultCharset apply to text/css and applic|
|35077|New|Nor|2005-05-26|mod_dav passes incorrect paths with LocationMatch |
|35083|Inf|Enh|2005-05-26|Certificate validation problems trapping          |
|35098|Ver|Maj|2005-05-27|Install fails using --prefix                      |
|35154|New|Nor|2005-06-01|Support for NID_serialNumber, etc. in SSLUserName |
|35245|New|Nor|2005-06-06|cache ignores max-age cache-directive in requests |
|35250|New|Enh|2005-06-07|[PatchAvailable] add logging to mod_proxy_connect |
|35280|New|Nor|2005-06-09|FTP proxy breaks RFC 2428 when trying to fall back|
|35556|Inf|Nor|2005-06-30|CRL files not re-read by HUP                      |
|35652|Opn|Min|2005-07-07|Improve error message: "pcfg_openfile: unable to c|
|35702|New|Nor|2005-07-12|Using with https URL, ab freezes or gets SIGSEGV o|
|35781|New|Nor|2005-07-18|ap_sub_req_method_uri() bypasses Limit security co|
|35981|Inf|Maj|2005-08-02|mod_dav overrides dav_fs response on PUT failure  |
|36286|New|Enh|2005-08-20|configtest doesn't check SSL certificates         |
|36492|New|Nor|2005-09-04|split-logfile script dies when splitting log of ma|
|36495|Inf|Nor|2005-09-05|mod_proxy_ajp: ajp_check_msg_header() got bad sign|
|36564|New|Enh|2005-09-08|make mod_ldap really universal                    |
|36636|New|Maj|2005-09-13|database write lock taken for PROPFIND operations |
|36676|New|Nor|2005-09-15|time() bug in httpd/os/win32/util_win32.c:wait_for|
|36710|Opn|Blk|2005-09-19|CGI output not captured                           |
|36724|New|Nor|2005-09-20|Don't install Apache Monitor by default           |
|37110|New|Nor|2005-10-17|Build fails when source tree is read-only         |
|37196|Inf|Min|2005-10-21|Wrong "Parent directory" link                     |
|37201|New|Enh|2005-10-21|Add <IfInterface IP> syntax to apache configuratio|
|37290|Opn|Min|2005-10-28|DirectoryIndex don't work in scriptaliased directo|
|37307|New|Enh|2005-10-31|Can't suppress error messages                     |
|37355|New|Enh|2005-11-04|Allow to specify Proxy-Authorization in ProxyRemot|
|37360|New|Maj|2005-11-04|Install fails on Windows XP x64 when program files|
|37402|New|Nor|2005-11-08|mod_proxy has stopped allowing POST sub-requests  |
|37514|Inf|Nor|2005-11-15|mod_proxy buffers chunked data.                   |
|37564|New|Enh|2005-11-19|Suggestion: mod_suexec SuexecUserGroup directive i|
|37587|Inf|Min|2005-11-22|mod_status Total Traffic value goes up then down? |
|37770|Opn|Blk|2005-12-03|proxy: error reading status line from remote serve|
|37823|Inf|Nor|2005-12-07|The openssl library linked is different between ht|
|37920|New|Maj|2005-12-15|mod_proxy does not flush data on POST requests fro|
|38116|New|Enh|2006-01-04|Chroot-Patch for SuExec                           |
|38164|New|Nor|2006-01-06|wrong status code for failed COPY/MOVE            |
|38182|New|Nor|2006-01-08|COPY ignores authority in Destination header      |
|38218|New|Enh|2006-01-10|Multiline Comments for *.conf files               |
|38240|Inf|Nor|2006-01-12|apache restart segfault with mutliple Include dire|
|38325|Opn|Nor|2006-01-20|impossible to determine AUTH_TYPE of interpreted r|
|38355|Unc|Enh|2006-01-23|DSO support for mod_rewrite                       |
|38369|New|Enh|2006-01-24|mod_proxy keeps alive connections that should be b|
|38408|New|Nor|2006-01-27|SSI environment vars not set in spawned processes |
|38419|New|Nor|2006-01-27|Problems with large WebDAV properties             |
|38478|New|Maj|2006-02-01|A client starting a SSL renegotiation can crash th|
|38515|New|Enh|2006-02-05|Dynamic LDAP Group Support                        |
|38550|New|Enh|2006-02-07|Setting headers based on proxied data             |
|38571|New|Enh|2006-02-08|CustomLog directive checked by apachectl configtes|
|38756|Inf|Nor|2006-02-22|errors with running make                          |
|38786|New|Nor|2006-02-26|"IndexOption VersionSort" has problems with traili|
|38827|New|Reg|2006-03-02|mod_disk_cache trying to rename locked tempfile on|
|38864|Inf|Enh|2006-03-06|ProxyPassReverse fails in <Location>              |
|38903|New|Maj|2006-03-09|r->allowed does not affect Allow response header  |
|38923|New|Min|2006-03-10|mod_speling incorrectly escapes linked URLs       |
|38928|New|Min|2006-03-11|propose removing "VARIANTS" feature               |
|38995|New|Nor|2006-03-16|httpd tries to communicate with the CGI daemon eve|
|39111|New|Nor|2006-03-27|Potential bug brought by mmapfile (mod_file_cache)|
|39128|Inf|Maj|2006-03-28|Apache 2.2 will not compile mod_ssl library's corr|
|39185|Inf|Nor|2006-04-03|Approximately in 1-2 weeks of work the server hang|
|39216|New|Maj|2006-04-05|mod_disk_cache trying to rename locked file, decre|
|39238|New|Nor|2006-04-07|mod_auth_dbm requires mod_auth or "no groups file?|
|39275|Opn|Nor|2006-04-11|slow child_init causes MaxClients warning         |
|39287|New|Nor|2006-04-12|Incorrect If-Modified-Since validation (due to syn|
|39299|New|Nor|2006-04-13|Internal Server Error (500) on COPY               |
|39329|Inf|Nor|2006-04-17|mod_dbd reconnection and prepared statements      |
|39370|New|Nor|2006-04-20|SSL session will be removed if the client is sendi|
|39380|Inf|Nor|2006-04-21|mod_disk_cache eats memory, has no LFS support, et|
|39418|New|Nor|2006-04-26|CacheMaxExpire directive not enforced             |
|39448|New|Min|2006-04-29|old-style <directory proxy:*> doesn't give any war|
|39498|New|Nor|2006-05-06|accept_filter in apr assumes if found in sys/socke|
|39517|New|Nor|2006-05-08|Corrupt chunked transfer-encoding with Content Neg|
|39658|Opn|Nor|2006-05-25|mod_proxy_ajp SSL Key Size Bug                    |
|39673|New|Nor|2006-05-29|mod_proxy opens connections that disturb NTLM     |
|39692|New|Nor|2006-05-31|mod_proxy_balancer doesn't retry a failed request |
|39723|Inf|Enh|2006-06-05|Forward proxy does not work in tranparent mode    |
|39727|Ass|Nor|2006-06-05|Incorrect ETag on gzip:ed content                 |
|39730|New|Nor|2006-06-06|LanguagePriority and DefaultLanguage are Case Sens|
|39737|New|Nor|2006-06-06|LogFormat "%{tid}P" reports wrong thread id on Win|
|39748|New|Enh|2006-06-07|Header and POST support for mod_include           |
|39753|New|Nor|2006-06-07|incorrect source for LOCALE Decimal Symbol in Win2|
|39785|Inf|Nor|2006-06-12|Status code 408 (Request Timeout) is not logged   |
|39807|Opn|Enh|2006-06-13|large files / filesystem corruption can cause apac|
|39902|New|Nor|2006-06-27|HeaderName directive breaks mod_filter somehow    |
|39904|New|Nor|2006-06-27|graceful restart error and cpu load               |
|39913|Ass|Blk|2006-06-27|detection of static OpenSSL libraries requiring li|
|39916|New|Nor|2006-06-28|Core Filters & non-blocking Sendfile              |
|39923|New|Nor|2006-06-28|AddDescription doesn't work in server config with |
|39928|New|Nor|2006-06-28|port no detected when file name not in URL        |
|39935|New|Nor|2006-06-29|AddDescription does not do literal comparisons on |
|39973|Ass|Enh|2006-07-06|apache software folder should be movable          |
|40035|New|Cri|2006-07-13|Windows Server 2003 "("R2")" 64-Bit Edition no cgi|
|40060|New|Nor|2006-07-17|AuthGroupFile should accept /etc/group syntax     |
|40075|New|Enh|2006-07-19|unable to use ldap groups that contain DNs and use|
|40102|Opn|Nor|2006-07-24|SCRIPT_NAME set incorrectly with mod_rewrite      |
|40146|New|Nor|2006-07-31|mod_ssl info in server_info is blank              |
|40174|New|Min|2006-08-03|Unable to get IndexOptionis ScanHTMLTitles to work|
|40180|Inf|Maj|2006-08-03|Mod_dav and remove folder doesn't work with Micros|
|40190|New|Nor|2006-08-05|translate file                                    |
|40196|New|Nor|2006-08-06|EILSEQ handling, NoImplicitAdd should work, and so|
|40217|Opn|Nor|2006-08-08|mod_dav PROPFIND ignores access restrictions on it|
|40266|Inf|Blk|2006-08-16|berkeley db support in httpd is screwed           |
|40312|New|Nor|2006-08-24|ssl_engine_init.c, ssl_init_ctx_verify contains a |
|40373|New|Nor|2006-08-31|mod_dir adds trailing slash after internal redirec|
|40408|New|Blk|2006-09-04|Apache 2.2.3 is not starting                      |
|40416|New|Maj|2006-09-05|mod_proxy_ftp cannot connect under http load in fo|
|40441|New|Enh|2006-09-08|intelligently handling dynamic subdomains         |
|40453|New|Nor|2006-09-09|lexicographic compare in RewriteCond isn't lexicog|
|40463|New|Nor|2006-09-11|piped logging causes some weird kill()ing         |
|40513|Opn|Maj|2006-09-14|Seeding PRNG with 0 bytes of entropy              |
|40514|New|Nor|2006-09-14|would like GracefulShutdownTimeout to work for gra|
|40540|Inf|Nor|2006-09-19|Bad interaction between MultiViews and SetOutputFi|
|40541|New|Nor|2006-09-19|Action rewrites URI used by Location?             |
|40571|New|Nor|2006-09-21|mod_proxy_ajp don't works with mod_usertrack      |
|40586|New|Enh|2006-09-22|Add option to supress default '-' output          |
|40746|New|Enh|2006-10-12|Feature request: ProxyAllow directive             |
|40749|New|Min|2006-10-12|magic file with string and "%n" causes Apache chil|
|40781|New|Nor|2006-10-17|PATH_TRANSLATED: 'redirect:/~jablko/gallery2/main.|
|40808|New|Enh|2006-10-23|ProxyRemote with optional proxy authentication    |
|40859|New|Enh|2006-11-01|[PATCH] Support -F force option to 'ab' support to|
|40917|New|Nor|2006-11-07|configure does not detect OpenSSL shared lib on HP|
|40953|New|Min|2006-11-12|Should not send any data in 1xx/204/304 reply from|
|40984|Inf|Enh|2006-11-16|AddIcon, AddIconByType for OpenDocument format    |
|40987|Opn|Enh|2006-11-16|ProxyVia Block doesn't remove Via: header for reve|
|41000|New|Nor|2006-11-19|mod_authn_dbd have an error, in function 'authn_db|
|41025|New|Nor|2006-11-23|ROBOTS META-Tag directive needed in mod_autoindex |
|41088|New|Nor|2006-11-30|installation backcolor is wrong (white)           |
|41111|New|Enh|2006-12-05|New option for filters: run only if there are spar|
|41114|New|Blk|2006-12-06|ACL HTTP method is rejected by mod_proxy_ajp      |
|41130|New|Nor|2006-12-07|mod_mime and mod_negotiation type-map both clobber|
|41143|Opn|Nor|2006-12-10|Incorrect ap_getline assumption in mod_proxy_http |
|41195|New|Nor|2006-12-17|properly set the parent pid on shutdown           |
|41196|New|Nor|2006-12-17|worker mpm usage of apr's memory pools is not thre|
|41200|Inf|Maj|2006-12-18|SSI include, prevent client from receiving full ou|
|41240|Inf|Enh|2006-12-25|BRF files support                                 |
|41262|Inf|Nor|2006-12-29|Embedded pcre causes runtime segfault             |
|41362|Inf|Maj|2007-01-14|mod_disk_cache and mod_include conflict generating|
|41375|Inf|Min|2007-01-15|Using same SSL Certificate with different ServerNa|
|41391|New|Min|2007-01-17|too long period setting makes max-age overflow    |
|41412|New|Enh|2007-01-19|RewriteRule Skip should take negative arguments   |
|41435|New|Nor|2007-01-22|Authentication fails with 500 Server Error        |
|41450|Inf|Cri|2007-01-24|Empty page (200 OK) while max-age is empty        |
|41485|New|Nor|2007-01-28|LDAP client certificates not usable in 2.2.x/trunk|
|41529|New|Enh|2007-02-02|Accept BOM in .htaccess                           |
|41556|New|Enh|2007-02-07|Feature Request: format string for masking ip addr|
|41621|New|Maj|2007-02-15|Apache 2.2.4 backend problem with Apache 2.0.59 Re|
|41646|New|Nor|2007-02-16|wrong headers are sent for HEAD requests when Prox|
|41676|Opn|Enh|2007-02-22|Refactor mod_proxy_ftp                            |
|41685|New|Enh|2007-02-22|Implement optional HTTP Authentication in a standa|
|41712|Inf|Nor|2007-02-26|threads locked at logging state                   |
|41729|New|Maj|2007-02-28|error message: ap_get_scoreboard_lb(130) failed in|
|41744|Inf|Maj|2007-03-01|SSI resolves includes but removes original HTML   |
|41763|Opn|Nor|2007-03-05|mod_disk_cache ignores CacheDirLevels and CacheDir|
|41764|New|Nor|2007-03-05|error state and conf                              |
|41771|Inf|Nor|2007-03-06|Erro with mod_proxy_ajp or mod_prox_balancer      |
|41867|New|Nor|2007-03-16|<DirectoryMatch> Matches Files                    |
|41925|New|Nor|2007-03-21|trivial patch to add automatic crypting to 'dbmman|
|41929|New|Nor|2007-03-22|ISAPI ssl variables                               |
|41953|New|Nor|2007-03-26|pidfile remains when 2nd pass of post-config retur|
|41962|New|Min|2007-03-27|Need mod_auth_ldap to authenticate with Active Dir|
|42027|Inf|Nor|2007-04-02|FileETag directive appears to be ignored          |
|42054|New|Nor|2007-04-04|service name and parameter issues                 |
|42079|New|Nor|2007-04-10|SSLRequire: Additional access in sub-directoies   |
|42082|New|Nor|2007-04-10|filter_init is called multiple times after an INCL|
|42182|Inf|Nor|2007-04-22|Mime types for cached proxied content             |
|42216|New|Enh|2007-04-24|RFE -- external overload procedure                |
|42262|Inf|Nor|2007-04-26|mod_dav /  worker fails to allocate memory and seg|
|42287|Inf|Nor|2007-04-28|chunked encoded response to POST request to cgi sc|
|42368|Inf|Nor|2007-05-09|httpd is crashing if conf/extra/httpd-manual.conf |
|42373|Inf|Maj|2007-05-09|REPORT request fails over mod_proxy               |
|42404|New|Enh|2007-05-13|Filename/info for disk-cached proxied remote URLs |
|42425|Inf|Nor|2007-05-15|Additional freshness checks in mod_cache.c cause m|
|42471|Inf|Nor|2007-05-21|clients with IE7 take 3megs per page load. httpd.e|
|42492|Inf|Nor|2007-05-22|mod_proxy_ajp with SSL front end: data corruption |
|42499|Inf|Nor|2007-05-23|Backslash produces a 404 error instead of going to|
|42548|New|Nor|2007-05-30|INCLUDE negotiating language aborts with APR_POOL_|
|42561|New|Enh|2007-05-31|[PATCH] AuthLDAPRemoteUserAttribute only applies i|
|42633|New|Min|2007-06-11|mod_info gives wrong information about actual conf|
|42665|New|Nor|2007-06-14|spurious attempt to open ".../file.html/.htaccess"|
|42666|New|Nor|2007-06-14|code & docs corrections for FollowSymLinks and Sym|
|42667|New|Nor|2007-06-14|mod_proxy_balancer not reporting when workers are |
|42668|Inf|Nor|2007-06-14|balancer_manager shows Ok status for the workers t|
|42687|New|Nor|2007-06-18|Fully delegate certificate & key semantics to the |
|42688|New|Enh|2007-06-18|engine managed keys: per process openssl context  |
|42690|New|Nor|2007-06-18|realm is not set for each configured directory whe|
|42695|Inf|Cri|2007-06-18|mod_proxy balancer problem                        |
|42699|New|Enh|2007-06-20|share mod_logio data with other modules           |
|42711|New|Enh|2007-06-20|format string for whole log entries not just id   |
|42732|Opn|Maj|2007-06-25|Authentication against database issue.            |
|42763|New|Nor|2007-06-28|graceful-stop/restart loops go loop too far       |
|42923|Inf|Maj|2007-07-17|vhost certificate NOT overriding cert from the _de|
|42972|Inf|Nor|2007-07-25|Certificate list in mod_ssl module context are not|
|42977|New|Nor|2007-07-25|DAV locking is busted when apr-util is built with |
|42987|New|Nor|2007-07-27|Weak Etags in Apache are useless and violate RFC 2|
|43012|New|Nor|2007-08-02|AIX instdso.sh libphp5.so                         |
|43027|New|Enh|2007-08-03|Header in default language                        |
|43033|New|Nor|2007-08-04|apxs does not correctly detect module name (w/o -n|
|43177|New|Nor|2007-08-21|child pid xxxxx exit signal Segmentation fault    |
|43218|New|Nor|2007-08-27|Wrong cert used for vhost if ServerName is same   |
|43220|Opn|Cri|2007-08-27|mod_proxy truncating ajp output                   |
|43249|Inf|Maj|2007-08-30|ldap_simple_bind_s failed when using SUN LDAP Libs|
|43275|New|Enh|2007-08-31|Remove avoidable network transactions in mod_proxy|
|43289|New|Nor|2007-09-02|XBitHack full g+x returns zero sized response on I|
|43308|New|Nor|2007-09-04|Persistent backend connections not supported for R|
|43352|New|Nor|2007-09-11|Apache2: out of memory during heavy webdav files c|
|43441|New|Nor|2007-09-20|Incorrect HTTP status for pre-commit-blocked autov|
|43471|New|Min|2007-09-25|no need to create a global pool on open_scoreboard|
|43481|New|Cri|2007-09-26|AuthLDAPURL must contain a final path of branch?(l|
|43494|New|Nor|2007-09-26|mod_cgid does not kill never ending scripts       |
|43502|New|Enh|2007-09-28|httpd fails to start if log directory does not exi|
|43513|New|Nor|2007-09-29|Persistent backend connections for ProxyPassMatch |
|43532|Inf|Cri|2007-10-02|Error while compiling Apache 2.2.3 on HPUX        |
|43533|Opn|Nor|2007-10-02|Frequent crashes in mod_include's bndm()          |
|43561|New|Nor|2007-10-05|apxs -q anomaly                                   |
|43577|Inf|Blk|2007-10-09|mod_authnz_ldap not working under WLDAP32 (novell/|
|43607|New|Nor|2007-10-11|mod_proxy sends data on closed connections without|
|43649|Opn|Trv|2007-10-18|mod_autoindex is generating invalid XHTML markup  |
|43652|New|Enh|2007-10-18|Suggest small change for big fix with SuExec & Vir|
|43666|New|Nor|2007-10-20|CGI works, but client denied error messages in err|
|43679|New|Enh|2007-10-23|Contributed tests for checking that subrequests ta|
|43723|Inf|Cri|2007-10-29|Apache 2.2.6 segfault when using mod_dbd          |
|43724|New|Cri|2007-10-29|Apache 2.2.6 segfault on url wich not in cache    |
|43755|New|Enh|2007-10-31|Add a SSLOptions to don't fill SSL_CLIENT_VERIFY  |
|43762|New|Enh|2007-10-31|Misleading tips in an error message about internal|
|43777|New|Nor|2007-11-01|Wrong encoding of <href> element in response      |
|43778|New|Nor|2007-11-01|Wrong responses if httpd has not access to some el|
|43785|New|Enh|2007-11-02|Tracking the per-hit impact of mod_include        |
|43792|New|Enh|2007-11-04|Feature proposal - bind phase                     |
|43818|New|Nor|2007-11-08|PROPFIND on -w- collections returns 207 MULTI-STAT|
|43838|New|Enh|2007-11-11|If-Modified-Since request and htcacheclean conflic|
|43895|New|Nor|2007-11-18|mod_mbox improvements                             |
|43897|Inf|Cri|2007-11-18|Huge memory consumption httpd 2.2.6, mod_proxy - m|
|43931|New|Enh|2007-11-21|OpenSSL autoconfig support for mod_ssl            |
|43943|New|Nor|2007-11-22|SHMCB crash due to misalignment and GCC 4 optimiza|
|43958|Inf|Maj|2007-11-26|mod_proxy_balancer not balancing correct in combin|
|43997|Opn|Min|2007-11-29|Only issue "Init: SSL server IP/Port conflict" if |
|44025|Inf|Nor|2007-12-05|Apache 2.2.6 fails to configure on OpenBSD 4.1    |
|44027|Ass|Enh|2007-12-05|Internationalized Domain Name (IDN) support       |
|44031|Opn|Maj|2007-12-06|RemoveHandler inside subdir location              |
|44034|Ass|Enh|2007-12-06|mpm_winnt doesn't call monitor hook               |
|44105|New|Nor|2007-12-19|Core dumps when using Proxy Keepalive             |
|44155|New|Enh|2007-12-31|smarter retry for LDAP_UNAVAILABLE, LDAP_BUSY, etc|
|44181|Opn|Enh|2008-01-07|add UnAlias                                       |
|44188|Inf|Cri|2008-01-08|Empty response for certain requests (mod_proxy as |
|44218|New|Min|2008-01-13|mod_autoindex shows the default icon for files wit|
|44221|Opn|Cri|2008-01-14|CheckCaseOnly On does not stop Multiple Choices ba|
|44250|New|Nor|2008-01-16|OSX 10.5: __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_|
|44279|New|Enh|2008-01-22|Add "iterate" flag to apply rule in a loop while p|
|44302|New|Nor|2008-01-27|AuthLDAPURL does not accept ldapi:// urls         |
|44305|New|Nor|2008-01-28|Inconsistent configuration for suexec path        |
|44316|New|Nor|2008-01-28|httpd 2.0 does not follow ScriptAliases when invok|
|44322|New|Enh|2008-01-29|mod_proxy ProxyPassReverseCookieDomain with no dom|
|44351|New|Nor|2008-02-04|File descriptor leak when using prg RewriteMap    |
|44363|Inf|Maj|2008-02-05|Slow file transfers                               |
|44384|Ass|Nor|2008-02-09|mod_ssl on MacOS X 10.5.1 does not work because of|
|44453|New|Nor|2008-02-19|list_hooks.pl doesn't parse declarations that span|
|44476|New|Maj|2008-02-23|Apache service fails to start due to missing depen|
|44503|Inf|Blk|2008-02-27|Errors during SSL handshake                       |
|44518|New|Enh|2008-03-02|Don't set expires header on HTTP redirect.        |
|44578|New|Enh|2008-03-11|mod_authn_dbd option to let database validate pass|
|44601|New|Trv|2008-03-13|Add a lowercase value to Vary header for consisten|
|44602|New|Enh|2008-03-13|Options for modfying Content-Location (relative OR|
|44622|Inf|Nor|2008-03-17|POST fails to SSL vhost with proxy to HTTP backend|
|44631|New|Nor|2008-03-18|with-included-apr fails to work when using a separ|
|44638|New|Nor|2008-03-19|sed error in httpd.spec.in                        |
|44656|New|Nor|2008-03-22|Tries to retrive error document 404 instead of 406|
|44657|New|Enh|2008-03-22|prefer-type, -encoding, and -charset cookie? (as p|
|44670|New|Min|2008-03-25|Apache httpd 2.2.8 : Cannot ./configure when curre|
|44696|Inf|Nor|2008-03-27|mod_cache sometimes serves old content despite hav|
|44730|New|Nor|2008-04-01|duplicate query string in remote server url when u|
|44752|New|Nor|2008-04-03|Suexec does not correctly check that scripts are i|
|44757|New|Enh|2008-04-04|adding stderr buckets to mod_cgi                  |
|44758|New|Enh|2008-04-04|LimitRequestBody undocumented behaviour with proxi|
|44779|New|Enh|2008-04-08|Using commas and semicolons for content negotiatio|
|44855|New|Nor|2008-04-22|irregular balancing with sticky-session after re-e|
|44865|Ass|Nor|2008-04-23|mod_dav's lock database becomes consistently corru|
|44870|Inf|Nor|2008-04-24|process spinning on 100% cpu                      |
|44923|Inf|Min|2008-05-02|consequences of multiple LDAPTrustedGlobalCert    |
|44924|New|Enh|2008-05-02|allow 'CACERTDIR' in mod_ldap                     |
|44940|New|Maj|2008-05-06|Httpd randomly breaks when verifying client certif|
|44981|New|Enh|2008-05-12|Digital Certificates (CN Based) for Authorization |
|45022|New|Nor|2008-05-16|Processing of escaped glob patterns in "Include" d|
|45023|Opn|Reg|2008-05-16|DEFLATE preventing 304 NOT MODIFIED response      |
|45049|Opn|Nor|2008-05-20|mod_mem_cache caches partial content when client c|
|45054|New|Nor|2008-05-21|SSLVerifyClient optional_no_ca is broken          |
|45058|New|Nor|2008-05-21|Mod_SSL does not set AUTH_TYPE with client certifi|
|45078|New|Nor|2008-05-27|mod_proxy stalls when uploading files             |
|45103|Ass|Min|2008-05-30|apachectl should do config test before reload/rest|
|45111|New|Enh|2008-06-01|make mod_usertrack use mod_unique_id if available |
|45116|New|Nor|2008-06-02|fail to check return value of apr_file_dup2() in /|
|45148|New|Enh|2008-06-06|The actual host of the request will be more helpfu|
|45184|New|Enh|2008-06-11|Regular Expression in directive ServerAlias       |
|45187|New|Maj|2008-06-11|Long File name requests gives FORBIDDEN response  |
|45225|New|Nor|2008-06-17|XBitHack breaks DirectoryIndex + MultiViews conten|
|45253|New|Nor|2008-06-23|Unable to build httpd 2.2.9 on Solaris/SPARC      |
|45257|New|Enh|2008-06-23|add (en)force option for UseCanonicalName         |
|45259|New|Enh|2008-06-23|Add /home/[a-z]/* scheme to UserDir conf          |
|45275|New|Maj|2008-06-25|Locked files during expired page renew in disk cac|
|45281|New|Enh|2008-06-25|SITE CHMOD/SEARCH                                 |
|45287|Inf|Min|2008-06-26|build failure because of difference between BSD an|
|45297|New|Min|2008-06-27|mod_dir does not manage correctly the user (r->use|
|45302|New|Enh|2008-06-28|ServerRoot directive                              |
|45355|New|Nor|2008-07-07|ab text and html output jumbo unification         |
|45356|New|Nor|2008-07-07|ab: optionally reduce resource usage (qsort and me|
|45371|New|Nor|2008-07-10|MSI installer requires uninstall of previous versi|
|45374|New|Blk|2008-07-10|Shared memory error on starting httpd with mod_lda|
|45379|Inf|Nor|2008-07-11|[Bug] svn merge, apache and trailing slashes      |
|45385|Inf|Nor|2008-07-11|unable to compile/make 2.2.9 with --enable-ldap   |
|45393|New|Nor|2008-07-14|Apache returns 500 Error when no LDAP credentials |
|45402|New|Nor|2008-07-15|mod_autoindex incorrectly fails to list files     |
|45405|New|Enh|2008-07-16|Allow binding port to be set for individual worker|
|45449|New|Nor|2008-07-21|[PATCH] Add support to WebDav to MOVE/COPY to remo|
|45456|New|Enh|2008-07-22|mod_dbd don't allow more then one database pool   |
|45487|New|Trv|2008-07-27|broken log messages on startup in win32 version   |
|45497|New|Nor|2008-07-29|Scoreboard slot leaked using MaxRequestsPerChild a|
|45512|Ass|Maj|2008-07-31|Bad Performance of mod_proxy with SSL on Solaris 1|
|45524|New|Enh|2008-08-01|Specifying multiple vhost aliases                 |
|45525|New|Enh|2008-08-01|Switch mod_autoindex to Tango icons               |
|45579|New|Nor|2008-08-06|unknown URI scheme in request-URI ignored         |
|45674|New|Enh|2008-08-22|Allow to change error code returned by "Require ld|
|45726|New|Enh|2008-09-02|Build in a maintenance functionallity             |
|45736|New|Nor|2008-09-03|mod_dav needs a directory for its locks and one sh|
|45754|New|Enh|2008-09-06|autoconf macros                                   |
|45763|New|Nor|2008-09-08|No openssl.cnf defined by default causes OpenSSL c|
|45773|New|Nor|2008-09-09|pcre build generates sources to srcdir rather than|
|45788|New|Nor|2008-09-11|mod_log_forensic output shouldn't be buffered when|
|45801|Opn|Nor|2008-09-13|SSLRequireSSL with strictrequire and satisfy any d|
|45838|New|Nor|2008-09-18|mod_authz_owner & directories                     |
|45868|New|Nor|2008-09-23|mod_mem_cache update of headers in cache object is|
|45900|New|Nor|2008-09-26|"make install" fails from read-only filesystem    |
|45905|New|Enh|2008-09-26|ErrorDocument and default URL                     |
|45922|New|Enh|2008-09-30|Expand the conditions under which "SSLVerifyClient|
|45923|New|Nor|2008-09-30|htpasswd tries to open(file, O_RDONLY | O_APPEND) |
|45926|Inf|Nor|2008-10-01|Unable to start apache 2.2.9                      |
|45986|New|Nor|2008-10-10|[info]...Invalid argument: core_output_filter: wri|
|46024|Opn|Nor|2008-10-16|--enable-static is not available in apache's confi|
|46037|Inf|Nor|2008-10-18|Configuration of trusted OCSP responder certificat|
|46040|New|Enh|2008-10-20|Check for existing version of Apache while install|
|46054|New|Nor|2008-10-21|Running httpd returns the error "bad user name nob|
|46070|New|Nor|2008-10-22|MSI installer does not validate custom installatio|
|46071|New|Enh|2008-10-22|Allowing space in between comma and last option in|
|46074|New|Enh|2008-10-23|Need of friendly and easy to use configuration gra|
|46139|New|Nor|2008-11-02|Apache Restart option is not working              |
|46140|New|Enh|2008-11-03|Change error state in balancer manager            |
|46188|Inf|Nor|2008-11-11|Core dumps in apache 2.0.59                       |
|46195|Opn|Nor|2008-11-12|ProxyPass fails with literal IPv6 address         |
|46215|New|Nor|2008-11-14|Race condition in bybusyness algorithm            |
|46231|New|Maj|2008-11-18|Connection Pooling with ajp depends on syntax ?   |
|46241|New|Enh|2008-11-19|mod_expires - ExpiresByPattern or ExpiresIf       |
|46267|New|Nor|2008-11-22|No shared modules build if use --with-apr and --wi|
|46270|New|Enh|2008-11-23|Add FIPS 140-2 mode for mod_ssl for FIPS 1.2 modul|
|46282|New|Nor|2008-11-24|apache2.2 reverse proxy causing full memory and sw|
|46316|New|Maj|2008-12-01|Proxied SSI ProxyTimeout render failure           |
|46317|Inf|Nor|2008-12-01|mod_authnz_ldap.c(373)  seg fault                 |
|46412|New|Nor|2008-12-17|make_child return value not checked               |
|46417|New|Cri|2008-12-19|[notice] Parent: child process exited with status |
|46428|Opn|Nor|2008-12-21|Spaces in URI doesn't encode in proxy-requests    |
|46442|New|Nor|2008-12-29|Semicolon in allow/deny all rules cause reverse lo|
|46449|New|Maj|2008-12-30|Output out of order from SSI include virtual      |
|46454|New|Min|2008-12-30|escaping wildcards in AddIcon filename matching   |
|46475|New|Nor|2009-01-04|build warnings.                                   |
|46499|New|Maj|2009-01-09|httpd accept() return EAGAIN error                |
|46521|New|Nor|2009-01-13|mod_dav doesn't show symlinks                     |
|46529|Ass|Nor|2009-01-14|Child httpd processes crash with Segmentation faul|
|46534|New|Nor|2009-01-14|mod_proxy_ajp scheme and port do not follow UseCan|
|46578|New|Nor|2009-01-21|Flawed header                                     |
|46582|Ver|Min|2009-01-22|RewriteMap internal functions are not well documen|
|46604|New|Nor|2009-01-26|Error thrown when trying to rpmbuild -tb httpd sou|
|46629|New|Maj|2009-01-29|Apache hanging on system calls for php and perl   |
|46634|Ass|Nor|2009-01-30|Requests sometimes take too long, wrong time taken|
|46644|New|Enh|2009-01-31|Clean way to pass custom environment variables to |
|46646|Ass|Nor|2009-02-01|check group membership is sometimes case sensitive|
|46650|Opn|Nor|2009-02-02|CustomLog enviroment condition SCRIPT_FILENAME    |
|46656|New|Enh|2009-02-03|ProxyErrorOverride inside location                |
|46669|New|Enh|2009-02-06|rotatelogs doesn't autocreate directories         |
|46671|Opn|Cri|2009-02-07|Apache periodicaly crashes .                      |
|46678|New|Nor|2009-02-09|Fixed Content-Length using mod_ext_filter with mod|
|46682|New|Nor|2009-02-09|mod_proxy EAI_AGAIN DNS failure                   |
|46685|Opn|Nor|2009-02-09|401 sent without WWW-Authenticate header when requ|
|46709|Opn|Reg|2009-02-12|Expect: 100-continue to an HTTP/1.0 server change |
|46724|Inf|Cri|2009-02-17|WinXP SP3 - Apache crashes on startup in libapr-1.|
|46743|New|Nor|2009-02-19|Inconsistent behavior of "RewriteOptions inherit" |
|46745|New|Maj|2009-02-20|ab.c error :  undefined reference to `BIO_set_call|
|46751|New|Nor|2009-02-21|Can passenv variables who's name contain '(' or ')|
|46762|New|Nor|2009-02-24|Error, SSL/TLS libraries were missing or unusable |
|46765|Opn|Nor|2009-02-25|doubled HTTP header leads to error (Redmine)      |
|46785|Inf|Nor|2009-03-02|Child process increases to 100% (CPU)             |
|46788|New|Nor|2009-03-02|Set resource limits to avoid denial of service att|
|46810|New|Nor|2009-03-05|apxs / apu-1-config outputting erroneous include p|
|46824|New|Nor|2009-03-09|RemoveOutputFilter will not work for Filters added|
|46845|Inf|Cri|2009-03-12|Apache crashes in Windows when using subversion(pr|
|46847|New|Nor|2009-03-13|WebDAV methods with encoding other than "identity"|
|46873|New|Nor|2009-03-18|feature request: connection count on balancer-mana|
|46884|New|Min|2009-03-20|Call to apu_dso_load Fails In apr_ldap_stub.c On O|
|46946|Inf|Nor|2009-03-31|mod_mbox shows email addresses in plain text      |
|46963|New|Nor|2009-04-03|KeepAliveTimout prevents child process from exitin|
|46969|New|Nor|2009-04-05|CustomLog format %m always GET on errors with loca|
|46970|New|Nor|2009-04-05|CustomLog %X does not record aborted connections w|
|47011|New|Reg|2009-04-09|mod_proxy/mod_proxy_balancer hot-standby BalancerM|
|47055|New|Blk|2009-04-20|SSLVerifyClient + Directory doesn't use cache sess|
|47063|New|Nor|2009-04-21|mod_proxy doesn't call post_request handler when t|
|47134|New|Nor|2009-05-01|Last resolve handling when sending client certific|
|47138|New|Nor|2009-05-01|Reverse Proxy & Balancer generate error fault when|
|47152|New|Maj|2009-05-04|Apache is only serving the first character in the |
|47159|New|Nor|2009-05-06|2.2.x logresolve doesn't support ipv6             |
|47167|New|Nor|2009-05-07|Authenticated sessions being switched by reverse p|
|47170|New|Enh|2009-05-08|rotatelogs ring buffer option                     |
|47180|New|Nor|2009-05-11|DBM ssl_scache setting can cause extreme performan|
|47220|Opn|Enh|2009-05-19|Access to environment variables                   |
|47256|New|Enh|2009-05-23|Enable SSL on a per-port basis                    |
|47289|New|Nor|2009-05-30|Can't build with dynamic libraries on Mac OS 10.4 |
|47295|New|Nor|2009-06-01|AuthDBDUserPWQueryFmt/AuthDBDUserRealmQueryFmt in |
|47329|New|Nor|2009-06-07|SSLCADNRequest* & SSLCACertificate* silently do no|
|47340|New|Nor|2009-06-09|uldap_cache_comparedn() called without a lock     |
|47344|New|Enh|2009-06-10|[FEATURE REQUEST] RedirectCanonicalName           |
|47345|New|Enh|2009-06-10|rotatelogs timeout patch                          |
|47346|New|Maj|2009-06-10|mod_cache doesn't re-cache expired content when La|
|47387|Inf|Nor|2009-06-18|SSL_CLIENT_I_DN and SSL_CLIENT_S_DN use Email inst|
|47392|Opn|Nor|2009-06-18|<FilesMatch> is using the wrong directory         |
|47435|New|Nor|2009-06-26|mod_authz_host does reading of /etc/hosts on each |
|47438|Inf|Enh|2009-06-27|how to create a non-html "listing generated by the|
|47447|New|Enh|2009-06-29|Add possibility to use client IP as a value in Req|
|47484|New|Nor|2009-07-06|Spurious RewriteLock warning when using external m|
|47485|New|Enh|2009-07-06|HTML5 Websocket implementation                    |
|47514|New|Enh|2009-07-12|Personal data and restrictions based on subject di|
|47528|New|Maj|2009-07-14|Worker process won't restart more than once using |
|47542|New|Nor|2009-07-16|Piped logging processes killed before other proces|
|47562|Inf|Nor|2009-07-23|Apache/2.2.3 (Win32) mod_perl/2.0.3-rc1           |
|47578|New|Nor|2009-07-24|compile ERROR with ssl                            |
|47580|Opn|Nor|2009-07-25|mod_cache sends 200 response instead of 304       |
|47586|New|Nor|2009-07-27|httpd -k start doesn't start service when rotatelo|
|47591|New|Min|2009-07-27|show current HTTP_HOST in mod_status scoreboard   |
|47601|New|Enh|2009-07-29|Support X-Forwarded-For in forward proxy requests |
|47625|New|Nor|2009-08-02|2.2.12 win32 msi installer missing                |
|47634|New|Maj|2009-08-04|mod_ldap connection pool session keepalive not imp|
|47643|New|Enh|2009-08-04|added meta tags to xhtml output for ease of search|
|47650|Opn|Trv|2009-08-05|httxt2dbm calculates value size incorrectly       |
|47657|New|Nor|2009-08-06|Make WebDAV MOVE atomic when replacing files on sa|
|47659|New|Nor|2009-08-07|makefile.win needs check for DBM_LIST, dies on bui|
|47664|New|Nor|2009-08-07|ap_proxy_canonenc: does not recode all high-byte c|
|47665|Inf|Blk|2009-08-09|Apache service well launched but blank Screen     |
|47691|New|Enh|2009-08-12|libtool invocations should use --tag              |
|47693|Opn|Nor|2009-08-13|GET request has race condition w.r.t. replacement |
|47706|Inf|Nor|2009-08-19|(20014)Internal error: proxy: error reading status|
|47716|New|Min|2009-08-20|LimitRequestFieldSize and friends not merged well |
|47719|Opn|Enh|2009-08-20|Broken symbolic link (symlink) causes wrong ErrorD|
|47723|New|Nor|2009-08-22|suEXEC and low RLimitMem gives "crit: invalid uid"|
|47743|Inf|Nor|2009-08-26|mod_so segfaults at server startup in ap_find_load|
|47753|New|Nor|2009-08-27|output and error channels not explicitly passed fo|
|47778|Opn|Enh|2009-09-03|wrong exit value on graceful restart              |
|47780|New|Nor|2009-09-03|Critical errors should be marked by time and level|
|47807|Inf|Nor|2009-09-09|Proxy dialog error with Apache 2.2.13             |
|47808|New|Maj|2009-09-09|Child process core dumps when enabling CRL        |
|47814|Inf|Maj|2009-09-10|openssl_pkcs7_sign error                          |
|47838|New|Enh|2009-09-14|Ability to Dynamically Inject Current Time Into a |
|47874|New|Nor|2009-09-18|mod_fcgid crashes if added during restart         |
|47895|New|Maj|2009-09-24|Incorrect 413 error handling                      |
|47908|New|Min|2009-09-27|'invalid result code' in error_log                |
|47981|New|Nor|2009-10-12|allow language specific html-versions (index.html.|
|47982|New|Nor|2009-10-12|correctly interprete non-standard HTTP_ACCEPT_LANG|
|47988|New|Nor|2009-10-12|Segmentation fault                                |
|47989|New|Nor|2009-10-13|Junk string appended to compressed dynamic content|
|47994|New|Enh|2009-10-14|ScriptInterpreterSource apparently broken in Windo|
|48020|New|Nor|2009-10-17|KCP+ Opera support for mod_auth_digest            |
|48037|Inf|Nor|2009-10-21|mod_proxy_http does not handle asynchronous keepal|
|48045|New|Nor|2009-10-23|Apache 2 initgroups alert, Max OS X, abnormal exit|
|48057|New|Nor|2009-10-26|mod_fcgid creates 1 more process then allowed     |
|48094|New|Nor|2009-11-01|Avoid a race condition in close_worker_sockets()  |
|48107|New|Maj|2009-11-02|Mutual Authentication: Order in ca-bundle influenc|
|48115|New|Enh|2009-11-03|Duration to receive the request, generate response|
|48130|New|Maj|2009-11-04|DAV operations on large filesets consume all the O|
|48154|New|Nor|2009-11-06|Requests through mod_isapi are not parsed by HTTP_|
|48164|New|Enh|2009-11-09|add new parameters to rotatelogs                  |
|48219|New|Nor|2009-11-17|Retrying the worker for seems to omit POST variabl|
|48228|New|Nor|2009-11-18|Renegocation requires multiple client authenticati|
|48246|New|Enh|2009-11-19|Check permissions on file/directory specified for |
|48254|New|Trv|2009-11-20|Bogus "DocumentRoot does not exist" warning when s|
|48283|New|Nor|2009-11-25|Proxy errors since httpd 2.2.12 with Tomcat 6.0.20|
|48291|New|Maj|2009-11-26|mod_substitute loops                              |
|48295|Opn|Nor|2009-11-27|ProxyPassReverseCookiePath: Not changing path corr|
|48301|New|Enh|2009-11-30|Feature request: improved connection status report|
|48309|New|Maj|2009-11-30|libapreq2-2.12: "make test" fails at request.t and|
|48312|Opn|Nor|2009-11-30|ProxyPassReverseCookiePath: Not changing path corr|
|48316|Inf|Nor|2009-12-01|ap_run_insert_filter doesn't work in cache_url_han|
|48354|New|Enh|2009-12-08|void ap_custom_response is not supporting the bina|
|48360|New|Enh|2009-12-09|provide sample configuration file for inclusion in|
|48361|New|Enh|2009-12-09|Add global server option for specifying desired DS|
|48364|Opn|Nor|2009-12-10|PHP-generated pages are not cached in spite of per|
|48369|New|Enh|2009-12-10|add option to automatically restart if a script is|
|48431|New|Nor|2009-12-22|Error logging doesn't work when configured to use |
|48440|Inf|Cri|2009-12-23|Segmentation Fault                                |
|48449|Inf|Nor|2009-12-28|make distclean removes core.c and core_filters.c  |
|48465|Opn|Enh|2009-12-30|Support TCP to connect to backends                |
|48499|New|Nor|2010-01-06|mod_rewrite can't redirect to files with ? in them|
|48500|New|Nor|2010-01-06|mod_mbox mishandles right-click to open msg in new|
|48508|New|Nor|2010-01-07|BalancerMember doesn't accept nocanon directive   |
|48549|New|Enh|2010-01-14|Add Cache-Control s-maxage support                |
|48576|New|Nor|2010-01-19|MOVE or COPY in WebDAV fails with 404 when file ex|
|48585|New|Enh|2010-01-20|mod_cache no longer caches expired content        |
|48602|New|Enh|2010-01-23|use asynch ldap_compare so LDAPTimeout applies    |
|48623|New|Maj|2010-01-26|AuthLDAPURL syntax is not RFC-compliant, prevents |
|48639|New|Enh|2010-01-29|Add htcacheclean as a core monitored process      |
|48652|New|Maj|2010-02-01|"AuthType form" fails if a password contains  '&' |
|48659|New|Maj|2010-02-02|Problem with accents in filename and byte serving |
|48687|New|Nor|2010-02-05|mod_rewrite ignores trailing dot in request URI on|
|48705|New|Enh|2010-02-08|flag to allow newlines in the error log as opposed|
|48712|New|Enh|2010-02-09|Add UID and GID to status page                    |
|48719|New|Nor|2010-02-09|[BUG] mod_proxy_ajp return wrong error message whe|
|48721|New|Nor|2010-02-10|[Patch] Add ProxyAllow to mod_proxy               |
|48731|New|Maj|2010-02-11|Prefork not creating processes after 10 servers ar|
|48732|New|Nor|2010-02-12|[BUG] environment variable SCRIPT_NAME output erro|
|48769|New|Nor|2010-02-18|[PATCH] Processes in the busy list should not be k|
|48777|New|Maj|2010-02-19|proxy balancer not detecting correctly when host (|
|48780|New|Enh|2010-02-19|Enable mod_authnz_ldap to accept valid client cert|
|48792|New|Enh|2010-02-22|httpd util apachectl returns wrong status informat|
|48805|New|Nor|2010-02-23|Corrupted response for HTTPS + KEEPALIVE=ON       |
|48808|New|Enh|2010-02-24|mod_authz_owner support for POSIX access control l|
|48819|Inf|Nor|2010-02-25|After users login on the web page, the page does n|
|48842|Inf|Nor|2010-03-02|mod_log_config logs the full size of the file inst|
|48880|Opn|Nor|2010-03-09|error on make                                     |
|48888|New|Nor|2010-03-10|DOCTYPE definitions nearly 11 years out-of-date   |
|48920|New|Enh|2010-03-15|Breadcrumbs on mod_autoindex path                 |
|48921|Inf|Nor|2010-03-16|mod_mem_cache crash, version 2.2.15.0             |
|48937|New|Enh|2010-03-18|Feature proposal - support sasl_bind              |
|48949|Inf|Cri|2010-03-20|fcgid processes never get killed after graceful re|
|48958|New|Nor|2010-03-22|mod_ldap, ldap credential cache & graceful restart|
|48987|New|Trv|2010-03-25|typo in polish translation of HTTP_UNAUTHORIZED.ht|
|49037|New|Enh|2010-04-02|SSLVerifyClient require_no_ca                     |
|49043|New|Maj|2010-04-04|Using ssi include directive overwrites QUERY_STRIN|
|49058|New|Nor|2010-04-06|Prefork MPM tries to accept on closed listener soc|
|49067|New|Nor|2010-04-08|FTPOptions ShowUnAuthorizedFiles does not work    |
|49068|New|Nor|2010-04-08|UTF-8 URL Encode error                            |
|49087|New|Maj|2010-04-11|MSI installation reports "interrupted installation|
|49114|New|Maj|2010-04-13|NTFS junction directories missing from directory l|
|49123|New|Nor|2010-04-14|mod_proxy_ajp does not send the client's SSL chain|
|49131|New|Nor|2010-04-15|Very long URLs cause 404 or 403 errors with SetAct|
|49133|New|Maj|2010-04-16|Windows service recovery options do not work for A|
|49157|New|Nor|2010-04-20|Issues with xml interface for balancer manager    |
|49187|New|Nor|2010-04-26|Crash mod_mem_cache and mod_svn                   |
|49199|New|Enh|2010-04-27|Implement LDAP scope-aware caching in mod_ldap    |
|49220|New|Nor|2010-04-29|feature request for being able to disable FcgidWra|
|49239|New|Blk|2010-05-01|Apache mod_ssl gives coredump with openssl 0.9.8  |
|49277|New|Nor|2010-05-12|Expose a variable to identify SSL Session renegoti|
|49283|New|Nor|2010-05-12|Language of dates on SSI                          |
|49285|New|Enh|2010-05-13|Relative (local to current directory) URLs do not |
|49348|New|Enh|2010-05-27|[mod_log_config] Output log file name format capab|
|49385|New|Maj|2010-06-03|mod_disk_cache server side included files are inte|
|49387|Inf|Cri|2010-06-03|Unable to modify default charset setting to UTF-8 |
|49391|New|Nor|2010-06-05|mod_disk_cache needs to register a cleanup to kill|
|49396|New|Enh|2010-06-06|PATH_INFO normalization, especially relating to vo|
|49427|New|Nor|2010-06-11|mod_cgid and mod_cgi do not return proper value wh|
|49433|New|Enh|2010-06-13|improving info in server status                   |
|49439|New|Nor|2010-06-14|Bug in mod_userdir which prevents suexec from runn|
|49504|New|Nor|2010-06-25|Solaris 10/x64 worker graceful restart problem    |
|49532|New|Nor|2010-06-30|mod_cache: Set-Cookie headers are appended to cach|
|49553|New|Min|2010-07-05|Set QoS bits via APR2 API instead                 |
|49568|New|Maj|2010-07-07|Apache mod_authnz_ldap built with the MS LDAPSDK d|
|49632|Inf|Nor|2010-07-21|mod_authnz_ldap denies users when search is perfor|
|49633|New|Enh|2010-07-21|Handle AD primary groups in mod_authnz_ldap       |
|49642|New|Nor|2010-07-23|mod_rewrite mistakes encoded question mark as path|
|49643|New|Nor|2010-07-23|WebDav plus mod Negotiation causes directory creat|
|49676|New|Nor|2010-07-30|directory with german umlauts are indented by one |
|49680|New|Maj|2010-07-30|Perl script are not running on Win32, Apache 2.2.1|
|49684|New|Enh|2010-08-01|enhancement for ipv6 implementation               |
|49699|New|Nor|2010-08-03|Inconsistent Keep-alive from proxy to the origin s|
|49715|New|Maj|2010-08-06|ProxyPassMatch Url Encoder Problem                |
|49717|New|Enh|2010-08-06|PATCH: Enable SSL Timeout                         |
|49737|Inf|Nor|2010-08-10|order allow,deny does not work on IPv6            |
|49743|New|Maj|2010-08-12|SSI 'echo encoding="(url/none)"' bug              |
|49746|Opn|Enh|2010-08-12|mod_rewrite urlencode option                      |
|49766|New|Maj|2010-08-17|POST request on CGI script generating empty body c|
|49771|New|Nor|2010-08-17|After graceful restart using mod_proxy_ajp, couldn|
|49772|New|Nor|2010-08-18|mod_deflate kicks itself out on Content-Range resp|
|49798|Opn|Nor|2010-08-22|[mod_log_config] Piped Log scripts process cause w|
|49807|New|Enh|2010-08-23|hard to force Content-Type header for non static f|
|49810|New|Nor|2010-08-23|Mod_autoindex output of header/body/footer scrambl|
|49815|New|Enh|2010-08-24|Enable caching for HTTP Range requests / 206 respo|
|49829|New|Trv|2010-08-26|CGI index command line arguments excessively escap|
|49832|New|Enh|2010-08-26|void ap_custom_response is not supporting the bina|
|49859|Opn|Nor|2010-09-01|url with additional filepath generates bad environ|
|49921|New|Nor|2010-09-13|Trailers in chunked http requests are not handled |
|49926|New|Enh|2010-09-14|New option for mod_log_forensics or mod_log_config|
|49980|New|Nor|2010-09-22|can't use a FIFO for SSL key file; mod_ssl checks |
|49981|New|Enh|2010-09-22|Requesting SSLCertificateKeyFile Dialog functional|
|49990|New|Nor|2010-09-23|Feature request: implement ExpiresActive reset    |
|49996|New|Nor|2010-09-24|Proxied ErrorDocument returns 200 OK response code|
|49997|New|Nor|2010-09-24|wrowe promised me...                              |
|50004|New|Nor|2010-09-26|per-dir rewrite without DocumentRoot or RewriteBas|
|50011|New|Cri|2010-09-27|error running apache, and installing apache as a s|
|50024|New|Min|2010-09-29|Mod_cache/mod_mem_cache and mod_security combinati|
|50038|New|Enh|2010-10-01|What Directives apply to a file/directory? Resulta|
|50041|New|Min|2010-10-04|(9)Bad file descriptor: apr_socket_accept: (client|
|50051|New|Nor|2010-10-07|Log PID in first entry logged for each request    |
|50061|New|Nor|2010-10-08|Semicolon character '%3B' seems to be decoded to '|
|50082|New|Nor|2010-10-12|apachectl status returns incorrect exit code      |
|50112|New|Nor|2010-10-18|buildconf broken in two places                    |
|50116|New|Nor|2010-10-19|Apache fragments packets unnecessarily            |
|50151|New|Nor|2010-10-25|Software caused connection abort and apache proces|
|50155|Inf|Nor|2010-10-25|httpd -s attempts to read SSL certificates        |
|50172|Inf|Nor|2010-10-28|Digest allows access bypassing secuity            |
|50227|New|Enh|2010-11-07|Option to fail SSL handshake for diverted SNI conn|
|50237|Inf|Nor|2010-11-08|webdav LOCK access with multiple threads to same f|
|50261|New|Nor|2010-11-12|graceful restart with multiple listeners using pre|
|50262|New|Nor|2010-11-12|mod_rewrite log ip address vs hostname            |
|50274|New|Nor|2010-11-15|always pass CONTENT_LENGTH to the application     |
|50278|New|Nor|2010-11-16|-DFOREGROUND and ap_unixd_killpg()/ap_os_killpg() |
|50290|Inf|Nor|2010-11-18|vanilla apache 2.2.17 installation crashes (lib-ap|
|50296|New|Nor|2010-11-18|LDAPVerifyServerCert and possibly LDAPTrustedMode |
|50317|New|Nor|2010-11-22|Possible error in mod_cache's "Avoiding the Thunde|
|50336|New|Min|2010-11-25|PUT failures do not emit Allow:                   |
|50344|New|Nor|2010-11-26|ProxyPass does not handle different protocols when|
|50357|New|Enh|2010-11-28|improve matching mechanisms for mime type and enco|
|50372|New|Enh|2010-11-29|any reason for allowing ModMimeUsePathInfo only in|
|50390|New|Nor|2010-11-30|WARNING: Unrecognized options : --disable-ipv6    |
|50402|New|Nor|2010-12-02|SetEnv proxy-sendchunks is ignored for small amoun|
|50412|New|Nor|2010-12-04|if IndexOptions +XHTML, the correct MIME type shou|
|50423|Inf|Nor|2010-12-06|Apache is terminated with signal 11, Segmentation |
|50427|New|Nor|2010-12-07|Windows>=Vista+mod_auth_digest+command line=proble|
|50432|New|Enh|2010-12-08|add PCRE-mode for file based matches              |
|50436|New|Enh|2010-12-08|VirtualHost could behave like people expect it to |
|50444|New|Enh|2010-12-09|Pre-close logging handles in cgid agent           |
|50456|Inf|Nor|2010-12-10|Invalid Error 413 crash Apache                    |
|50464|New|Blk|2010-12-13|undefined reference to `BIO_set_callback' `BIO_set|
|50466|Inf|Maj|2010-12-13|httpd process doesn't recycle                     |
|50473|New|Maj|2010-12-14|zlib.dll Problem                                  |
|50521|New|Nor|2010-12-25|Comment at top of sample main config file is wrong|
|50525|New|Nor|2010-12-28|Header directive won't edit Location header from P|
|50530|New|Enh|2010-12-29|Provide rate limiting for failed authentication at|
|50532|New|Enh|2010-12-30|Mail protection                                   |
|50551|New|Nor|2011-01-06|Some proxied connections ignore ttl setting       |
|50562|Opn|Cri|2011-01-09|wrong PATH_INFO CGI environment with non-ASCII UTF|
|50584|New|Enh|2011-01-14|Add error message when RequestReadTimeout triggere|
|50592|New|Maj|2011-01-15|httpd dumps core on an IPv6 only system           |
|50602|New|Nor|2011-01-17|non thread safe functions used in apache httpd pro|
|50619|New|Min|2011-01-19|After changing resolv.conf signaling httpd doesn't|
|50628|New|Blk|2011-01-21|Core dump happens with Apache 2.2.15 using openssl|
|50630|New|Nor|2011-01-21|Apache return 500 error with authentication by LDA|
|50644|New|Enh|2011-01-24|Add support for maximum number of requests per Kee|
|50654|New|Nor|2011-01-25|FileETag ContentMD5 & Filename, optimisation to Co|
|50693|New|Nor|2011-01-31|AllowOverride Options=(not Foo) should permit no-o|
|50704|Inf|Nor|2011-02-01|mod_cache doesn't cache MultiViews                |
|50712|New|Maj|2011-02-02|Restart button only stops the server ...and do not|
|50727|New|Nor|2011-02-07|ISAPI EXTENSION_CONTROL_BLOCK Missing PostData wit|
|50765|New|Enh|2011-02-11|Runtime Backend Pinning via balancer-manager      |
|50770|New|Nor|2011-02-14|a rotatelogs issue, if time changed               |
|50773|Inf|Nor|2011-02-14|Dav lock database corruption                      |
|50774|New|Enh|2011-02-14|Have a way to invalidate cache without other reque|
|50777|New|Nor|2011-02-14|Back port buildconf specifies AC_PREREQ(2.13) fix |
|50796|New|Enh|2011-02-16|record time between keepalives in access log      |
|50807|New|Maj|2011-02-18|mod_proxy fails to send FIN response when a FIN is|
|50814|New|Nor|2011-02-21|SSI exec not working on Windows (Apache 2.x)      |
|50848|New|Enh|2011-03-01|Content Negotiation type map file precedence could|
|50869|New|Enh|2011-03-04|Need directive to control use and timeout of sessi|
|50873|New|Nor|2011-03-04|httpd does not start properly when built from sour|
|50878|New|Nor|2011-03-05|redundant operation when calling apr_stat         |
|50891|New|Nor|2011-03-08|Apache rewrites WWW-Authenticate headers from CGI |
|50902|Inf|Maj|2011-03-09|on major load on the server, poll() hangs         |
|50916|New|Nor|2011-03-11|RewriteMap program: mod_rewrite sends request but |
|50926|New|Nor|2011-03-14|unexpected <Directory> file-matching behavior     |
|50942|New|Maj|2011-03-17|Apache 2.2.16 forward proxy is 5x times slower tha|
|50945|Opn|Nor|2011-03-18|AJP: Missing support for ErrorOverride            |
|50948|Opn|Nor|2011-03-19|Connection not closed when CGI dies waiting for PO|
|50954|New|Nor|2011-03-21|ProxyRemote doesnt use CONNECT method with https s|
|50959|New|Enh|2011-03-23|Add cache-manifest to the mime type list          |
|50976|New|Nor|2011-03-26|Apache losts client's ip (%a or %h) sometimes.    |
|50999|Opn|Nor|2011-03-30|it seems the configure wrong detect my apr-util ve|
|51001|New|Nor|2011-03-31|patch for hook ap_lua_run_lua_open                |
|51005|New|Enh|2011-04-01|Allow to use username in LDAP filter              |
|51006|New|Blk|2011-04-01|Apache consume all memory and swap when setup as r|
|51019|New|Enh|2011-04-04|[PATCH] Implementation of Asynchronous processing |
|51020|Opn|Nor|2011-04-04|[PATCH] Apache/mod_fcgid.so does not start in comp|
|51022|New|Nor|2011-04-05|Segmentation fault on PUT request                 |
|51030|New|Enh|2011-04-06|Way to terminate CGI immediatly after closing conn|
|51078|Inf|Nor|2011-04-18|[PATCH] mod_fcgid spawned CGI Processes gets orpha|
|51079|New|Enh|2011-04-18|[PATCH] mod_fcgid spawned CGI Process cannot imper|
|51080|New|Nor|2011-04-18|[PATCH] mod_isapi does not support Except:100-Cont|
|51103|Opn|Nor|2011-04-21|mod_reqtimeout does not drop connection and return|
|51104|Opn|Maj|2011-04-21|C++ support about httpd_config.h                  |
|51107|New|Min|2011-04-22|SetOutputFilter and SetInputFilter should allow "n|
|51118|New|Nor|2011-04-26|LDAP cache is cleared after graceful/restart and o|
|51127|New|Nor|2011-04-27|Make ProxyPassReverseCookiePath work as expected  |
|51168|New|Nor|2011-05-08|mod_status Total Traffic won't take account of int|
|51170|New|Nor|2011-05-09|I/O errors when using keep-alive + mod_ssl        |
|51174|New|Min|2011-05-09|SSLRequire predicates using OIDs unknown to openss|
|51186|New|Blk|2011-05-11|NEw Openssl 1.0.1 with new FIPS                   |
|51190|New|Min|2011-05-12|::/0 does not work with allow from and deny from  |
|51194|New|Nor|2011-05-13|FcgidWrapper does not support paths containing a s|
|51201|Inf|Nor|2011-05-15|Strange behavior REQUEST_METHOD & GET in mod_rewri|
|51223|New|Nor|2011-05-18|304 HTTP Not Modified strips out CORS headers     |
|51224|New|Nor|2011-05-18|mod_dav_fs should respect FileETag                |
|51239|New|Nor|2011-05-21|ap_get_client_block may block continuously sometim|
|51257|New|Nor|2011-05-24|Build failed when cross-compiling: ./gen_test_char|
|51258|Opn|Enh|2011-05-24|new features for mod_substitute                   |
|51296|New|Enh|2011-05-31|Dynamic engine support using SSLCryptoDevice suppo|
|51297|New|Nor|2011-05-31|Improve error handling during "UNLOCK"            |
|51303|New|Nor|2011-05-31|TraceEnable 500 error                             |
|51312|New|Nor|2011-06-01|mod_filter should support adding to the Vary heade|
|51322|New|Enh|2011-06-04|Prepend and append string to LDAP search parameter|
|51359|Inf|Enh|2011-06-11|Added shebang check for //! so that .js scripts wo|
|51365|New|Nor|2011-06-13|Mod_proxy mangles query string with mod_security  |
|51402|New|Nor|2011-06-21|"ForceLanguagePriority Fallback" not working as im|
|51406|New|Maj|2011-06-21|When listing files in subdirectories, the path is |
|51409|New|Nor|2011-06-21|Sorting options accepted by ls, but ignored       |
|51471|New|Nor|2011-07-04|<DirectoryMatch>ed IndexIgnore doesn't            |
|51479|New|Enh|2011-07-05|[PATCH] AB feature to optionally read in a reusabl|
|51491|New|Nor|2011-07-08|mod_dir breaks POSTs to URLs not ending in /      |
|51495|New|Nor|2011-07-11|mod_substitute cpu and memory limit               |
|51517|New|Maj|2011-07-16|mod_proxy_fcgi is not RFC 3875 compliant (SCRIPT_F|
|51522|Ver|Trv|2011-07-18|Wrong French translation in mpm.html ("Certains Mo|
|51542|New|Nor|2011-07-22|Apache HTTP Server vs PVS-Studio                  |
|51543|New|Nor|2011-07-22|Space in username not properly escaped in log file|
|51552|Inf|Cri|2011-07-25|Apache is not starting (2.2.15)                   |
|51573|New|Enh|2011-07-28|Easy way to erase log files                       |
|51576|Inf|Nor|2011-07-28|mod_rewrite rule stopped working                  |
|51600|New|Enh|2011-08-02|Loading the same certificate in multiple virtual h|
|51603|Inf|Maj|2011-08-02|Apache accepts completely bogus HTTP requests (pos|
|51607|Inf|Nor|2011-08-03|DBDPrepareSQL ( ap_dbd_prepare ) does not work cor|
|51629|New|Nor|2011-08-05|DocumentRoot check incorrect when running under ch|
|51674|New|Blk|2011-08-18|AJP Module Bad Request                            |
|51679|New|Min|2011-08-18|Code signature key expired                        |
|51689|New|Trv|2011-08-19|Cross compiling causes multiple Listen directives |
|51695|New|Trv|2011-08-20|Code clean up (ap_rputs merge)                    |
|51707|New|Nor|2011-08-22|ProxyPassReverse issues within <Location> (differe|
|51709|New|Nor|2011-08-23|ServerName/ServerAlias don't work if Host: header |
|51711|New|Nor|2011-08-23|mod_auth_digest have broken shared mem (nonce) cod|
|51718|New|Enh|2011-08-24|Feature Request: Add shorthand to redirect any Ser|
|51725|New|Nor|2011-08-26|Multiple Range: request accepted as "Range: n-m"  |
|51732|New|Nor|2011-08-29|Inconsistencies in log messages' verbosity levels |
|51747|New|Blk|2011-08-31|mod_fcgid loads entire request into memory while p|
|51757|Inf|Enh|2011-09-02|Add support for SASL auth in LDAP                 |
|51778|Inf|Cri|2011-09-07|while buliding(make) a unix source "httpd-2.2.20.t|
|51797|Inf|Maj|2011-09-10|Crash HTTPD(Windows)                              |
|51814|New|Enh|2011-09-14|mod_proxy in Apache HTTP 2.2 FIN_WAIT2 in server s|
|51858|Inf|Nor|2011-09-21|weird error for mod_rewrite with more then 3 param|
|51864|New|Nor|2011-09-22|mod_cache returns entire entity from origin server|
|51904|New|Nor|2011-09-28|output to stderr from cgi script causes script to |
|51951|New|Nor|2011-10-04|mod_mbox hang on some e-mails on press@a.o - was I|
|51964|Ver|Nor|2011-10-05|Documentation of RewriteRule flag skip unclear    |
|51965|New|Nor|2011-10-05|--with-z=DIR not being honored                    |
|51982|Opn|Nor|2011-10-06|ProxyPassReverse / balancer://cluster/ adds slash |
|51987|Inf|Nor|2011-10-07|RewriteRule doesn't work correctly with apache 2.3|
|51994|New|Enh|2011-10-07|Mod_authn_socache should have some way to flush th|
|52004|Ver|Trv|2011-10-10|Typo "indexe" in French translation of mpm.html   |
|52007|New|Nor|2011-10-10|Content-Length: 0 not set on proxy response       |
|52038|New|Nor|2011-10-16|NameWidth works incorrectly together with Charset=|
|52039|Inf|Nor|2011-10-16|Browser mode does not always work                 |
|52043|New|Nor|2011-10-17|Directories ".", "..", and "/" do not work correct|
|52081|New|Nor|2011-10-24|segfault if mbox files have unexpected names      |
|52090|New|Maj|2011-10-26|Apache thread hangs with error 500 when sending a |
|52120|Opn|Nor|2011-11-01|mod_cache edge case: uncacheable 304 sends cached |
|52123|New|Maj|2011-11-02|DoS: High memory usage in propfind                |
|52132|New|Nor|2011-11-03|[PATCH] process activity score calculated incorrec|
|52139|New|Nor|2011-11-05|Never Syntax Error on non-existent DocumentRoot   |
|52171|Ver|Nor|2011-11-13|confusing documentation of request phases         |
|52174|New|Enh|2011-11-13|Allow hard lower-limits on the number of fcgi serv|
|52178|New|Nor|2011-11-14|IPv6 IPs as ServerName not allowed                |
|52181|Ver|Nor|2011-11-14|mod_rewrite Technical Details Ruleset Processing d|
|52195|Inf|Nor|2011-11-16|Japanese texts are garbled on mailing list archive|
|52196|Inf|Nor|2011-11-16|winnt mpm, others mpm also have this bug. pool sha|
|52207|Inf|Maj|2011-11-18|Upgrade apache version from 2.0.59 to 2.2.12 or ab|
|52222|New|Nor|2011-11-21|IndexIgnore ignores parent directories in argument|
|52247|New|Nor|2011-11-26|mod_mbox gives up on unexpected message format    |
|52248|New|Nor|2011-11-26|Bugzilla version drop-down list does not offer "un|
|52252|New|Nor|2011-11-27|luajit support broken for (at least) luajit 2.0   |
|52253|Inf|Nor|2011-11-28|Timeout doesn't work. mod_proxy_balancer strongly |
|52264|New|Enh|2011-11-30|Update and complete balancer-manager XML output   |
|52269|Inf|Nor|2011-12-01|[mod_proxy] Apache reverse proxy status code trans|
|52275|New|Nor|2011-12-02|memory leak in proxy_ajp_handler                  |
|52298|Inf|Nor|2011-12-07|Can't enter website with client certificate on an |
|52301|New|Enh|2011-12-07|Error message "RSA server certificate ... CN ... d|
|52302|New|Enh|2011-12-07|Better documentation of how server name is determi|
|52304|New|Nor|2011-12-08|<Limit> Does Not Apply When URI Is Folder         |
|52313|New|Enh|2011-12-09|htdbm enhancement: options for colon-in-username, |
|52322|Inf|Enh|2011-12-13|Providing BBC developed httpd modules for inclusio|
|52342|New|Nor|2011-12-15|ap_internal_redirect dropping filters means incons|
|52370|New|Nor|2011-12-19|apreq_decode/url_decode length miscalculation     |
|52377|New|Enh|2011-12-20|Add Directives to assert user, group, and permissi|
|52383|New|Trv|2011-12-24|Instllation log typo                              |
|52391|New|Cri|2011-12-27|100% CPU usage while using Forward Proxy          |
|52395|New|Nor|2011-12-29|reload results in different end environment to res|
|52403|New|Nor|2011-12-31|FallbackResource doesn't work for non-existent PHP|
|52408|New|Nor|2012-01-01|Directoryindex matching automatically redirects   |
|52415|New|Nor|2012-01-03|LockFile placed inappropriately                   |
|52417|New|Nor|2012-01-03|HEADERS information in the file                   |
|52435|New|Nor|2012-01-06|Apache shutdown automatically                     |
|52439|New|Nor|2012-01-09|It should be possible to treat errors in .htaccess|
|52453|New|Enh|2012-01-11|Ability to configure --logfiledir                 |
|52465|New|Nor|2012-01-13|mod_dir is allowed to redirect proxy requests     |
|52481|New|Nor|2012-01-18|Rotatelog.exe crashes Apache after setting 256MB r|
|52485|New|Nor|2012-01-19|CPU load 100%                                     |
|52494|New|Enh|2012-01-22|allow the Action directive to point in the filesys|
|52495|New|Enh|2012-01-22|CACertificate, CADNCertificate, CARevocation, Cert|
|52501|New|Cri|2012-01-23|child pid 10824 exit signal Segmentation fault (11|
|52505|New|Nor|2012-01-23|Include with directory wildcards gives errors for |
|52509|New|Nor|2012-01-23|Resources protected by .htaccess file may not be a|
|52510|New|Cri|2012-01-23|Segmentation Fault 11                             |
|52520|New|Nor|2012-01-24|ProxyRemote & NoProxy directive can not take IPv6 |
|52532|New|Trv|2012-01-26|VirtualHost added TWICE to name-virtual-host list |
|52539|New|Nor|2012-01-26|Apache mod_dav 400 Bad Request for non-existent co|
|52546|New|Nor|2012-01-27|overwrite SERVER_PROTOCOL environment             |
|52573|New|Nor|2012-02-01|mod_speling case correction fails when URI has dou|
|52578|Opn|Enh|2012-02-02|Wrong "bytes sent" logged when connection is close|
|52594|New|Nor|2012-02-03|rpmbuild -ba errors out with "File not found by gl|
|52595|New|Nor|2012-02-03|requests with gzip+chunked encoded body don't prox|
|52605|Inf|Min|2012-02-05|Please allow request lines longer than 8k         |
|52612|New|Nor|2012-02-06|Default Service Account                           |
|52616|Opn|Enh|2012-02-07|SSLUserName uses SSL_CLIENT_S_DN insted of SSL_CLI|
|52617|New|Maj|2012-02-07|Visit the rewrite page from ServerAlias domain vho|
|52623|New|Nor|2012-02-08|does not build with pcre-8.30                     |
|52644|New|Nor|2012-02-12|document how SSL FakeBasicAuth works with strange |
|52668|New|Trv|2012-02-14|More future safe patch for old MSIE ssl-unclean-sh|
|52670|New|Trv|2012-02-15|please clarify the effect of SSLStrictSNIVHostChec|
|52683|New|Enh|2012-02-16|add a symlink option that rechecks the access perm|
|52700|Inf|Blk|2012-02-17|Not rendering html content instead displaying clie|
|52703|Inf|Maj|2012-02-18|SSL+SNI+client-auth "lost" after some time        |
|52710|New|Nor|2012-02-19|mod_fcgid should set PATH_INFO when configured in |
|52756|Inf|Trv|2012-02-24|proxy_html_module LoadModule line not created in h|
|52759|New|Cri|2012-02-24|Apache httpd child process consuming high CPU Util|
|52790|New|Nor|2012-02-28|ldap caching not sufficient                       |
|52795|Opn|Nor|2012-02-29|mod_fcgid fails to spawn process in C:\Program Fil|
|52806|New|Nor|2012-03-01|configure: --with-included-apr is not supported in|
|52807|New|Nor|2012-03-01|some random strings are accepted by "configure" as|
|52816|New|Nor|2012-03-03|Potential segfault in socache_shmcb_create        |
|52817|New|Nor|2012-03-03|Long directory path sucks (but it's really a valid|
|52822|New|Nor|2012-03-04|Quiet installation not fully quiet                |
|52824|Inf|Nor|2012-03-04|Conflicts between AllowOverride and AllowOverrideL|
|52828|New|Maj|2012-03-05|Child process is not replaced in Windows, after a |
|52832|New|Nor|2012-03-05|numerical configuration entry can be mistakenly in|
|52841|Opn|Nor|2012-03-06|[proxy_balancer:emerg] [pid 25593] AH01177: Failed|
|52851|New|Nor|2012-03-07|Core TimeOut directive doesn't work               |
|52860|New|Enh|2012-03-08|Support Transfer-Encoding: gzip                   |
|52865|New|Nor|2012-03-09|Crash by segmentation fault in mod_authn_core in A|
|52870|New|Cri|2012-03-09|100% CPU usage while using Forward Proxy          |
|52874|New|Enh|2012-03-09|Support Use TrustedFirst checking when verifying c|
|52884|New|Nor|2012-03-12|"localhost" leads to start failure                |
|52890|Inf|Nor|2012-03-12|--with-included-apr doesn't work when srclib/apr a|
|52891|New|Nor|2012-03-12|2.2 doesn't perform as well as 1.3                |
|52894|Inf|Nor|2012-03-13|Apache aborts abnormally when ChrootDir is set    |
|52927|Inf|Nor|2012-03-16|[Bug in httpd 2.2.4] [error] (70014)End of file fo|
|52933|New|Nor|2012-03-17|Child survives '-k stop', consuming lots of CPU   |
|52950|New|Nor|2012-03-20|Error when set AuthType to None with valid-user   |
|52963|New|Nor|2012-03-21|Typo in AuthLDAPURL RFC 2255 error message        |
|52975|New|Nor|2012-03-23|Receiving files is suboptimal                     |
|52976|New|Min|2012-03-23|Gratuitous string-duplication in module-configurat|
|52978|New|Enh|2012-03-23|Binding to an interface instead of an address     |
|52995|New|Nor|2012-03-28|httpd -V does not print the default Mutex         |
|53002|New|Nor|2012-03-29|<Location> and auth_form (trailing slash problem?)|
|53015|New|Nor|2012-03-31|missing apr_socket_close                          |
|53016|New|Nor|2012-03-31|missing apr_brigade_destroy                       |
|53023|New|Nor|2012-04-02|mod_rewrite RewriteCond parser error and documenta|
|53037|New|Enh|2012-04-05|clarify mod_ssl documentation on the UID/GID conte|
|53059|New|Nor|2012-04-10|Make httpd easier relocatable by using a variable |
|53098|New|Nor|2012-04-18|mod_proxy_ajp: patch to set worker secret passed t|
|53099|New|Enh|2012-04-18|feature request for mod_remoteip                  |
|53108|New|Enh|2012-04-19|clarification on url-path vs full filesystem path |
|53111|New|Nor|2012-04-20|1% of CMS sites expose database passwords         |
|53121|New|Nor|2012-04-22|Confusing documentation, gzip and deflate         |
|53149|New|Enh|2012-04-25|mod_ldap should/could use mod_socache             |
|53152|Opn|Nor|2012-04-26|RewriteRule documentation: Error about per-directo|
|53156|New|Enh|2012-04-27|CRL validation fails if CRL is missing            |
|53160|New|Cri|2012-04-29|Reverse Proxy mod_deflate doesn't zip back content|
|53183|New|Min|2012-05-03|mod_apreq2 entry point is apreq_module and not apr|
|53193|New|Nor|2012-05-04|SLVerifyClient optional_no_ca + SSLSessionCache = |
|53218|New|Blk|2012-05-11|ProxyPass worker name(http://localhost:3128/...|
|53233|New|Maj|2012-05-15|Internal error: proxy: error reading status line f|
|53239|New|Maj|2012-05-16|Httpd has problems delivering data on rate-limited|
|53253|New|Maj|2012-05-17|TCP_NOPUSH used with sendfile(2), cause transfers |
|53284|New|Nor|2012-05-24|crash                                             |
|53290|New|Maj|2012-05-24|memory usage                                      |
|53292|New|Min|2012-05-25|add support for HTTP status code 308              |
|53305|New|Nor|2012-05-28|404 errors when adding query string in a balancer |
|53313|New|Nor|2012-05-28|SSI #echo VAR fails (#include OK) if URI/URL has f|
|53319|New|Nor|2012-05-29|Multiple DirectoryIndex statements in the same con|
|53332|New|Nor|2012-05-30|Requests with chunked encoding have no body availa|
|53350|New|Nor|2012-06-01|mod_cache caching 403 responses Apahce 2.2.22     |
|53351|New|Nor|2012-06-02|make fails if layout begins on first line of confi|
|53388|Opn|Nor|2012-06-08|mod_proxy_balanser generates 503 when proxying to |
|53402|New|Trv|2012-06-12|Incorrect error message for mod_ldap params       |
|53461|Inf|Cri|2012-06-23|Compilation problems                              |
|53462|New|Nor|2012-06-25|mod_rewrite does not remove trailing slash when as|
|53479|New|Nor|2012-06-27|mod_rewrite [B] flag should percent-encode the spa|
|53483|New|Enh|2012-06-29|dangerous PCRE patterns in *Match directives      |
|53539|New|Maj|2012-07-12|content type and character set are changing when t|
|53554|New|Nor|2012-07-16|Wrong case for hexadecimal percent encoding [patch|
|53555|New|Maj|2012-07-17|Scoreboard full error with event/ssl              |
|53579|New|Cri|2012-07-20|httpd looping writing on a pipe and unresponsive (|
|53581|New|Blk|2012-07-21|FollowSymlinks doesn't work with DirectoryMatch an|
|53594|New|Enh|2012-07-24|ipad as webserver                                 |
|53595|New|Nor|2012-07-24|Media type qs parameters for MultiViews sent in Co|
|53612|Inf|Nor|2012-07-27|Reverse Proxy causing 500 error SSL proxy 1.0.1c O|
|53618|New|Nor|2012-07-29|proxy_worker_shared fields not maintained in threa|
|53634|New|Nor|2012-08-01|mod_cache returning HTTP 200 for nonexistent resou|
|53638|New|Nor|2012-08-02|Problem with shortcuts to bugzilla in http://httpd|
|53640|Inf|Maj|2012-08-02|make: Fatal error: Command failed for target `htpa|
|53643|New|Cri|2012-08-02|apache segfaults with mod_authn_dbd when dbd_min i|
|53646|New|Nor|2012-08-02|Invalid uniformly distributed balancing of request|
|53651|New|Nor|2012-08-03|Worker failure doesn't have same behaviour as work|
|53667|New|Enh|2012-08-07|Add an equivalent option to "JkOptions ForwardLoca|
|53669|New|Nor|2012-08-07|IndexOptions Incremental IndexOptions documentatio|
|53686|New|Enh|2012-08-09|Status "501 Not Implemented" sent very late       |
|53690|New|Nor|2012-08-09|Calls to semctl() trigger "uninitialized memory" w|
|53692|New|Nor|2012-08-10|mod_auth_form loses request body before login page|
|53693|Opn|Nor|2012-08-10|mod_fcgid performance suffers under increase in re|
|53704|New|Enh|2012-08-13|True online configuration is needed - via LDAP?   |
|53705|New|Nor|2012-08-13|Align server-status balancer display to balancer-m|
|53706|New|Enh|2012-08-13|Include a status display for mod_ldap when present|
|53722|New|Nor|2012-08-15|when -D NO_DETACH is used, no PID file should be c|
|53736|New|Nor|2012-08-17|/balancer-manager doesn't save runtime adjusted se|
|53757|New|Enh|2012-08-21|RewriteMap of type txt should allow specifying col|
|53767|New|Nor|2012-08-23|htcacheclean deletes stale "vary" header files eve|
|53772|New|Nor|2012-08-24|REDIRECT_URL not accessible in mod_proxy          |
|53787|New|Reg|2012-08-28|In forward proxy, doesn't cache disk anymore      |
|53823|New|Nor|2012-09-03|[patch] pure IPv6 only host fix (server/config.c) |
|53835|New|Cri|2012-09-06|mod_proxy_ajp truncate output when using deflate i|
|53870|New|Maj|2012-09-13|Deadlock in CRYPTO_add_lock with Apache 2.2.22 wor|
|53886|New|Nor|2012-09-18|can't start apache control in Redhat Linux 3 X64  |
|53899|New|Nor|2012-09-19|SSL_OP_ALL disables the mitigation code for CVE-20|
|53915|New|Nor|2012-09-21|Colon lost when :port is used in CacheKeyBaseURL  |
|53919|Inf|Enh|2012-09-21|DEFAULT_LOG_FORMAT is not RFC6302 compliant       |
|53923|New|Min|2012-09-23|Overriding CustomLog directive seems impossible   |
|53932|New|Nor|2012-09-25|PROPFIND doesn't support If, If-Match ETag predica|
|53947|New|Enh|2012-09-29|Feature Request, RewriteRule - ProxyPreserveHost f|
|53961|New|Nor|2012-10-04|Null sessions to the default vhost                |
|53970|New|Nor|2012-10-05|Network control directives affects internal subreq|
|53981|New|Nor|2012-10-08|move def of log_request_state from mod_log_config.|
|53988|New|Enh|2012-10-10|Missing FCGIWrapper script should not be a critica|
|53999|Opn|Nor|2012-10-13|Deadlock between procmgr_send_spawn_cmd()/proctabl|
|54030|New|Enh|2012-10-19|Support subjectAltName when (reverse-)proxying    |
|54033|New|Enh|2012-10-21|Parent languages are not ordered according to Acce|
|54072|New|Reg|2012-10-30|Syntax error front-end virtual-path too long      |
|54102|New|Enh|2012-11-05|new feature: automatic route detection            |
|54118|New|Nor|2012-11-08|Handle leak on parent httpd process when rotatelog|
|54126|New|Maj|2012-11-09|Mod_rewrite failing because of url in query string|
|54134|New|Enh|2012-11-11|new feature: ability to use multiple routes in sti|
|54136|New|Min|2012-11-11|balancer-handler shows xml not, when only xml para|
|54158|New|Nor|2012-11-16|Suggestion regarding 2.0 to 2.2 Upgrade Documentat|
|54183|Inf|Nor|2012-11-21|PROPFIND doesn't report getcontenttype property   |
|54215|New|Maj|2012-11-27|configure fails for httpd 2.2.3 with openssl 1.0.1|
|54221|Opn|Nor|2012-11-28|no ErrorLog prefix on CGI errors                  |
|54222|New|Min|2012-11-28|ServerTokens checking is not complete             |
|54223|New|Nor|2012-11-29|AH00554 error when runtime configuration Includes |
|54252|New|Nor|2012-12-05|acinclude.m4 requires -lz when linking with ssl st|
|54253|New|Nor|2012-12-05|mod_proxy_ftp doesn't handle/log partial or cancel|
|54255|New|Nor|2012-12-06|mod_deflate adjusts the headers "too late", should|
|54269|New|Maj|2012-12-09|mod_proxy_html documentation misses several things|
|54276|New|Nor|2012-12-10|rotatelogs not getting killed on graceful restart |
|54280|New|Nor|2012-12-11|mod_auth_form inline login not working with traili|
|54281|New|Nor|2012-12-11|Stick use Partial parameters from query string    |
|54289|New|Nor|2012-12-13|"ap_get_brigade" api is failing in "AP_MODE_SPECUL|
|54306|New|Enh|2012-12-15|add regexp versions of ProxyPassReverse, ProxyPass|
|54309|New|Trv|2012-12-15|clarification on the <Location> directive when use|
|54310|Opn|Nor|2012-12-15|mod_proxy_html drops meta elements with http-equiv|
|54319|New|Reg|2012-12-17|ProxyPass has no effect in <Location> if rewrite o|
|54339|New|Nor|2012-12-21|piped log entries > PIPE_BUF can be interleaved   |
|54342|New|Nor|2012-12-22|AuthnCacheSOCache can't pass args to socache provi|
|54343|New|Maj|2012-12-22|Add sanity checks for malloc() in mpm_winnt.c and |
|54358|New|Nor|2012-12-29|Status 500 when using ldap on Solaris because apr_|
|54363|New|Nor|2012-12-31|make time conversion caching functions thread-safe|
|54364|New|Nor|2012-12-31|Add ref to mod_fcgid docs                         |
|54365|New|Nor|2013-01-02|Connection closed by server during file transfer  |
|54366|New|Nor|2013-01-02|$sysconfdir/extra/httpd-dav.conf is not built base|
|54367|Opn|Maj|2013-01-02|Location header in response to PUT is not %-escape|
|54385|New|Enh|2013-01-08|SSL configuration independent from virtual hosts, |
|54401|New|Nor|2013-01-10|Suggest to make ProxyPassReverseCookieDomain accep|
|54415|New|Enh|2013-01-14|Please tell the root cause of mutex and scoreboard|
|54431|Inf|Blk|2013-01-16|Unable to start the Apache 2.4.3 windows service. |
|54498|New|Nor|2013-01-28|apache crash on any cgi request with certain http |
|54502|New|Nor|2013-01-29|Apache deadlock on epoll_ctl error (1000 process l|
|54512|Inf|Cri|2013-01-31|Apache hung                                       |
|54517|New|Nor|2013-02-01|proxy balancer: timeout or partial failure of back|
|54518|New|Nor|2013-02-01|mod_rewrite not adding Vary header                |
|54519|New|Nor|2013-02-02|httpd already running                             |
|54526|New|Nor|2013-02-05|mod_proxy_http ignores request abortion           |
|54543|New|Enh|2013-02-10|Compile regex only when need                      |
|54546|New|Nor|2013-02-11|httpd crashes on first HUP after change Listen dir|
|54549|New|Nor|2013-02-11|mod_mime AddEncoding and mod_negotiation fix_encod|
|54556|New|Enh|2013-02-13|New flag to add default rule in rule chain        |
|54560|New|Nor|2013-02-13|Potential segfault on return from ap_server_root_r|
|54563|New|Maj|2013-02-15|mod_webdav ignores quota                          |
|54578|New|Nor|2013-02-18|Bad docs or unchecked code for "LimitRequestFields|
|54605|New|Enh|2013-02-24|mod_negotiation should cache the info it generates|
|54608|New|Enh|2013-02-25|Support an option to allow page caching when using|
|54622|New|Nor|2013-02-28|shared memory cleanup                             |
|54626|New|Nor|2013-03-01|mod_authnz_ldap through util_ldap.c does not suppo|
|54633|New|Nor|2013-03-04|Invalid % encoding not rejected                   |
|54637|New|Nor|2013-03-05|Digest: secret not used                           |
|54640|New|Nor|2013-03-05|Slow transaction on a balance member is holding su|
|54649|New|Nor|2013-03-06|Incorrect PIDFILE prevent httpd restart           |
|54653|New|Min|2013-03-08|Suggestion to add https example for forward proxy |
|54656|New|Maj|2013-03-09|SNI and SSLProxyCheckPeerCN based on "connection" |
|54657|New|Nor|2013-03-09|DNS lookup failure for load balancer member does n|
|54683|New|Min|2013-03-13|Ignor directive ErrorDocument with null byte      |
|54699|Opn|Enh|2013-03-15|[feature request] cli webaccess tester            |
|54701|New|Cri|2013-03-15|Apache 2.4.3 Migration Issue Not loading the pages|
|54704|New|Nor|2013-03-15|Web Services stalling on it's own                 |
|54719|New|Nor|2013-03-18|httpd should check for and eventually create pid f|
|54752|New|Nor|2013-03-25|mod_ssl should not use uninitialized memory as ran|
|54782|New|Nor|2013-04-02|Memory Corruption errors - mpm_worker mod_perl    |
|54785|New|Nor|2013-04-02|Random crash when httpd server is stopped         |
|54793|New|Nor|2013-04-03|Socket timeout handler can delete uploaded files P|
|54794|New|Reg|2013-04-03|mod_wsgi|fcgid and subversion >= 1.7 issues       |
|54795|New|Nor|2013-04-03|'apxs -g -n' should be self-referring             |
|54796|Inf|Enh|2013-04-03|CustomLog should be able to use syslog as ErrorLog|
|54804|New|Nor|2013-04-05|mod_fcgid sends a Continue 100 response automatica|
|54813|New|Nor|2013-04-08|documnt the Require args used by authz_dbm includi|
|54816|Inf|Nor|2013-04-08|AH00566: request failed: invalid characters in URI|
|54817|New|Nor|2013-04-09|if prefix and sysconfdir are the same then http.co|
|54820|Inf|Cri|2013-04-09|REwriterule stops working                         |
|54824|New|Nor|2013-04-10|Spec file is missing libuuid-devel requirement    |
|54830|New|Enh|2013-04-11|Make SSLPProxyMachineCertificateFile configurable |
|54848|New|Nor|2013-04-15|Client field too short for IPv6 addresses         |
|54856|Inf|Enh|2013-04-17|NSCreateObjectFileImageFromFile                   |
|54858|New|Nor|2013-04-17|ld duplicate                                      |
|54861|New|Blk|2013-04-18|The number of connections with mysql is more      |
|54869|Inf|Nor|2013-04-19|Non-breaking space characters cause httpd to choke|
|54875|New|Nor|2013-04-23|Conditional request predicated on another URL's ET|
|54878|New|Nor|2013-04-23|Multiple Listen directives prevent server to start|
|54905|Inf|Cri|2013-04-29|Apache2 loops in child Segfaults                  |
|54910|New|Enh|2013-04-30|Format %{Foobar}o cannot be used to log Date and S|
|54911|New|Enh|2013-04-30|Allow logging of fields set by a backend server in|
|54914|New|Nor|2013-04-30|mod_dir DirectoryIndex breaks WebDAV PROPFIND / DE|
|54915|New|Nor|2013-04-30|GET on a WebDAV-enabled collection, with Directory|
|54918|New|Enh|2013-05-02|Implement RFC 6797 HTTP Strict Transport Security |
|54919|Inf|Nor|2013-05-02|*** glibc detected *** /usr/sbin/httpd: double fre|
|54930|New|Nor|2013-05-06|Allow empty message in ErrorDocument directive    |
|54934|Inf|Cri|2013-05-07|Apache is crashing intermittently with a message "|
|54936|New|Nor|2013-05-08|Some potential bugs reported by static analysis to|
|54949|New|Nor|2013-05-10|[PATCH] mod_cache: fix uninitialized tmppath varia|
|54952|Inf|Cri|2013-05-10|[Fri May 10 17:39:01 2013] [error] proxy: CLUSTER:|
|54953|New|Nor|2013-05-11|<VirtualHost 0.0.0.0:80> matches IPv6             |
|54958|New|Nor|2013-05-13|mod_deflate + mod_mime with SSI gives mixed compre|
|54962|New|Maj|2013-05-14|Apache will set incorrect Content-Length header an|
|54965|New|Enh|2013-05-14|Allow ProxyPassMatch in Directory context         |
|54976|New|Nor|2013-05-15|ProxyPass parameter "acquire" and "ttl" ignored in|
|54986|New|Maj|2013-05-16|httpd hanging on large form submit in ap_run_handl|
|54989|New|Nor|2013-05-17|Apache Segfaults on OS X at random - how can I dia|
|54993|New|Nor|2013-05-20|Critical error: File descriptor in bad state: apr_|
|54998|Ver|Nor|2013-05-21|Apache 2.4 terminates all SSL connections using an|
|55000|New|Nor|2013-05-21|Memory usage per process doubles when Apache is co|
|55021|New|Enh|2013-05-28|Support arbitrary sql to authentication username/p|
|55022|Inf|Cri|2013-05-28|child pid 3123 exit signal Bus error (10) - Apache|
|55034|Inf|Maj|2013-05-31|Apache 2.4.4 won't open more that 32k VH file hand|
|55039|New|Enh|2013-05-31|"RequestHeader edit" can't access environment vari|
|55045|New|Nor|2013-06-01|calls to gets() in test_find.c and test_parser.c  |
|55068|New|Enh|2013-06-06|root permissions when writing to per vhosts errorl|
|55069|New|Min|2013-06-06|notice message in error_log even when LogLevel err|
|55070|Opn|Enh|2013-06-06|mod_fcgid stderr always goes to main error log    |
|55072|New|Nor|2013-06-07|ErrorLog doesn't work well when apache shutdown   |
|55093|New|Nor|2013-06-12|[PATCH] mod_fcgid 2.3.7 truncates large posts on R|
|55096|New|Nor|2013-06-12|Make not running on httpd configure Solaris       |
|55098|New|Nor|2013-06-13|does not listen to IP4 when both IP4 address and I|
|55106|New|Enh|2013-06-17|ProxyErrorOverride considers response codes >= 400|
|55117|New|Nor|2013-06-18|GracefullTimeout for worker threads               |
|55148|Inf|Nor|2013-06-26|Error during SSL Handshake with remote server     |
|55152|New|Nor|2013-06-28|graceful restart adjusts to new balancer members, |
|55156|New|Nor|2013-06-28|mod_cache not respecting s-maxage cache-control he|
|55178|New|Nor|2013-07-01|[PATCH] mod_authnz_ldap SASL authentication suppor|
|55192|New|Trv|2013-07-03|htaccess error messages missing request context   |
|55193|New|Min|2013-07-03|ErrorLogFormat is ignored by some modules         |
|55226|New|Enh|2013-07-09|Request for "domain cluster" feature for mod_proxy|
|55234|New|Maj|2013-07-10|Working of attribute "protocol" attribute "protoco|
|55276|Inf|Enh|2013-07-17|Add REST API for load balancer for dynamic registr|
|55278|New|Nor|2013-07-18|mod_session's cookie may be empty, is repeated twi|
|55284|New|Nor|2013-07-20|repeatable segv                                   |
|55286|New|Nor|2013-07-21|Floating point exception (8) in mod_auth_digest   |
|55293|New|Nor|2013-07-22|Incorrect default MIME type for .woff fonts       |
|55306|New|Nor|2013-07-25|Error when copying svn repository, which contains |
|55323|New|Nor|2013-07-29|Double unescaped uri in sub request handler       |
|55327|New|Nor|2013-07-30|Segmentation fault when stopping Apache 2.4.6 norm|
|55340|New|Maj|2013-08-01|Listen for valid, unconfigured IP address passes c|
|55344|New|Nor|2013-08-02|missing ap_hook_monitor on windows                |
|55346|New|Nor|2013-08-02|When on filled quota filesystem, mod_fcgid init in|
|55348|New|Nor|2013-08-02|%h is not changed in logging, only %a             |
|55351|New|Enh|2013-08-04|allow ProxyPassReverseCookieDomain to automaticall|
|55362|New|Nor|2013-08-05|Apache httpd sends "400 Bad Request" to client due|
|55379|New|Min|2013-08-07|htdigest -c doesn't behave as described anymore   |
|55394|New|Nor|2013-08-09|apache 2.4 randomy crashes with signal 6          |
|55401|New|Enh|2013-08-11|document that force-proxy-request-1.0 implies prox|
|55415|New|Maj|2013-08-14|Proxy loop caused by ProxyErrorOverride and ErrorD|
|55431|New|Nor|2013-08-16|mod_negotation does not force the mime type listed|
|55433|New|Nor|2013-08-16|mod_proxy ignores final status code for aborted re|
|55443|Inf|Maj|2013-08-17|never gives 300 multiple choices                  |
|55445|New|Maj|2013-08-18|mod_socache_memcache ignores expiry, creating eter|
|55447|New|Enh|2013-08-18|make type-maps usable again, by making them access|
|55448|New|Nor|2013-08-19|segfault in set_max_workers at event.c:3194 on SIG|
|55449|New|Maj|2013-08-19|AH01185: worker slotmem_create failed --> slotmem |
|55452|New|Maj|2013-08-19|Redirect                                          |
|55458|New|Enh|2013-08-20|allow to configure what mod_ssl responds when one |
|55460|New|Enh|2013-08-21|allow service names to be used in the Listen direc|
|55467|New|Nor|2013-08-21|Support for OpenSSL custom TLS extensions and supp|
|55523|New|Trv|2013-09-04|auth_groupfile error log on access even though suc|
|55535|Inf|Nor|2013-09-08|incorrect check state parametr                    |
|55540|New|Cri|2013-09-09|mod_proxy gzip chunked issue (sample site provided|
|55549|New|Min|2013-09-11|AuthLDAPSubGroupAttribute doesn't do anything     |
|55550|New|Nor|2013-09-11|AuthLDAPSubGroupClass checking is very inefficient|
|55556|New|Nor|2013-09-13|apachebench (ab) doesn't use so_reuseaddr         |
|55557|New|Nor|2013-09-14|Some cppcheck reports                             |
|55573|New|Enh|2013-09-19|FileETag needs MTimeSeconds, MTime with granularit|
|55581|New|Enh|2013-09-22|Support concurrent connections to same FastCGI pro|
|55590|Inf|Maj|2013-09-24|second commit is failing if space is in file name |
|55596|New|Enh|2013-09-25|Add date format used by Expires header            |
|55607|New|Enh|2013-09-28|Re-set HOME environment variable to directory from|
|55615|New|Nor|2013-09-30|Connections are starved and not balanced when conc|
|55619|New|Nor|2013-10-02|Apache httpd reported 500 internal error when uplo|
|55627|New|Min|2013-10-04|Remove unnecessary APLOGNO() for trace logging per|
|55636|Inf|Cri|2013-10-07|long lost child came home - Apache is not respondi|
|55646|Inf|Nor|2013-10-10|non-2xx responses are not considered errors       |
|55654|New|Nor|2013-10-15|Extract variables from configuration without start|
|55670|New|Min|2013-10-18|Startup may fail silently at post_config          |
|55673|New|Nor|2013-10-18|httpd fails to start with SSLProxyMachineCertifica|
|55680|New|Enh|2013-10-20|online manual directory option doesn't exist      |
|55698|New|Maj|2013-10-24|Apache 2.2 + mod_fcgid 2.3.7 (CentOS 6.4) graceful|
|55700|New|Enh|2013-10-24|add something like RewriteOptions InheritDown     |
|55707|New|Nor|2013-10-25|SSLProtocol directive seem to be ignored over diff|
|55708|New|Nor|2013-10-25|Access violation in msvcrt.dll when calling getenv|
|55711|New|Min|2013-10-28|--enable-foo doesn't enable foo                   |
|55712|New|Nor|2013-10-28|Relative <!--#include virtual="../file.shtml"--> g|
|55720|New|Enh|2013-10-29|separate LDAP Bind timeout from LDAPTimeout       |
|55738|New|Nor|2013-11-03|PVS-Studio: few issues                            |
|55763|New|Nor|2013-11-09|raise roots soft RLIMIT_NPROC on linux for high ma|
|55774|New|Nor|2013-11-13|ab: optionally accept tls client certificate      |
|55781|New|Nor|2013-11-15|ajp_read_header: ajp_ilink_receive failed; 120006)|
|55786|New|Maj|2013-11-16|SSLVerifyClient and OptRenegotiate result in a 403|
|55787|New|Maj|2013-11-16|Chroot fails with "Cannot chroot when not started |
|55790|New|Maj|2013-11-17|mod_fcgid lockfile hardcoded to be in /tmp        |
|55793|New|Enh|2013-11-18|DTrace/SystemTap support                          |
|55808|New|Nor|2013-11-21|File integrity verification using MD5 and SHA1    |
|55819|Inf|Nor|2013-11-27|Closing connection behaviour                      |
|55828|New|Cri|2013-11-28|Httpd not start if use ProxyPass balancer://      |
|55834|New|Maj|2013-12-02|Apache does not honor the openssl library path giv|
|55838|New|Nor|2013-12-03|PHP files are being executed instead of downloaded|
|55841|New|Nor|2013-12-04|Misleading news items on bugfix releases ("This ve|
|55856|New|Nor|2013-12-08|YYEMPTY (-2) used as index into yytname (const arr|
|55866|New|Nor|2013-12-11|When ProxyPreserveHost is on, SSL expects the wron|
|55878|New|Nor|2013-12-12|mod_fcgid kills spawned processes too early       |
|55881|New|Nor|2013-12-13|segmentation fault at proxy_util.c:1546           |
|55883|New|Enh|2013-12-14|string callers of ap_expr should be able to transf|
|55887|New|Maj|2013-12-16|In Windows apache, when user access to /con, apach|
|55898|New|Enh|2013-12-17|[RFE] listen on unix socket?                      |
|55914|New|Reg|2013-12-20|child exit segmentation fault after apache gracefu|
|55919|New|Nor|2013-12-22|EPREFIX and dynamic modules                       |
|55942|New|Nor|2014-01-01|400 - Bad Request on POST (Windows Server 2012 Hyp|
|55952|New|Nor|2014-01-05|ab: SSL keep-alive fails with apr_pollset_poll: Th|
|55962|New|Enh|2014-01-06|mod_remoteip should not allow an external proxy to|
|55963|New|Nor|2014-01-07|Add application/ld+json to mime.types             |
|55981|Opn|Nor|2014-01-09|mod_mbox hang on some e-mails on user@openoffice.a|
|55985|Opn|Nor|2014-01-10|apache does not reopen logs when multiple graceful|
|55989|Opn|Enh|2014-01-11|write to error log upon RewriteRule [F]orbidden   |
|55991|New|Nor|2014-01-12|mod_charset_lite doesn't bail out on non-identity |
|56009|Inf|Cri|2014-01-14|Memory leak in httpd 2.4.3 over time with persista|
|56014|New|Nor|2014-01-15|MOd rewrite CO Cookie method the lifetime flag not|
|56028|New|Enh|2014-01-17|Add http/1.0, http/1.1 NPN advertisement to enable|
|56034|New|Nor|2014-01-20|CPU consumption due to circular linked list in ap_|
|56040|New|Enh|2014-01-21|should be able to remove Max-Age cookie parameter |
|56041|New|Enh|2014-01-21|should be able to disable session expiry increment|
|56052|New|Nor|2014-01-22|ap_session_load called multiple times for expired |
|56055|New|Nor|2014-01-23|Route is not extracted properly when a session coo|
|56064|New|Enh|2014-01-25|Optimize PNGs                                     |
|56067|New|Nor|2014-01-27|FallbackResource doesn't work if directory exists |
|56081|New|Maj|2014-01-28|Apache 2.2.26 SIGSEGVs when POST'ing data         |
|56091|Inf|Nor|2014-01-30|SSL handshake error when httpd compiled on Oracle |
|56098|New|Nor|2014-02-01|duplicate cookie                                  |
|56101|New|Cri|2014-02-03|Apache 2.4.6 ceases processing requests (scoreboar|
|56102|New|Nor|2014-02-03|SSL_CLIENT_S_DN_x509_0 is undefined in the environ|
|56109|New|Nor|2014-02-05|Cannot increase the read limit                    |
|56113|New|Nor|2014-02-06|dist commit messages missing from mail-archives di|
|56131|New|Nor|2014-02-12|ProxyPassReverse / zealously replaces Location hea|
|56135|New|Nor|2014-02-13|Add DC to list of x509 components                 |
|56152|New|Nor|2014-02-18|ProxyBlock does not accept network addresses      |
|56176|New|Nor|2014-02-21|mod_substitute truncates the response body if the |
|56188|New|Nor|2014-02-25|mod_proxy_fcgi does not send FCGI_ABORT_REQUEST on|
|56209|New|Nor|2014-03-03|Uninitialised variables in os/win32/ap_regkey.c   |
|56226|Ver|Nor|2014-03-06|per VirtualHost KeepAliveTimeout is not recognized|
|56229|New|Enh|2014-03-06|ocsp ProxyHost and ProxyPort support              |
|56230|New|Nor|2014-03-07|mod_access_compat can log a bogus client denied me|
|56235|New|Nor|2014-03-07|quotes should be optional around expr             |
|56247|New|Cri|2014-03-12|semaphore creation for proxypass                  |
|56250|New|Nor|2014-03-12|sbindir in config.layout for Apache has bin instea|
|56251|New|Nor|2014-03-12|Increase maximum length of FcgidInitialEnv string |
|56252|New|Enh|2014-03-12|make install as privileged user creates files not |
|56262|New|Nor|2014-03-14|ab does not work with extremely long cookies      |
|56264|New|Trv|2014-03-14|Confusing error with .htaccess rewrite to proxy wh|
|56270|New|Enh|2014-03-15|--with-ssl=/foo w/o pkgconfig needs help on AIX 64|
|56288|New|Enh|2014-03-19|rewrite URLs in style attributes                  |
|56289|New|Nor|2014-03-19|Buffer overflow in mod_proxy_html's string replace|
|56308|New|Nor|2014-03-24|1 second delay in handle request kills performance|
|56312|New|Nor|2014-03-25|Can't configure different balancing workers that c|
|56314|New|Nor|2014-03-25|exiting from MPM-worker child caused assert in apr|
|56326|New|Nor|2014-03-27|cache_quick_handler does not serve responses with |
|56331|New|Nor|2014-03-29|windows 'access denied' during revalidaton of reso|
|56333|New|Enh|2014-03-31|API to resume a SUSPENDED connection              |
|56362|New|Maj|2014-04-08|ldaps only works with port 636. Non-standard port |
|56379|New|Nor|2014-04-09|Number of columns in the results returned from pgs|
|56395|New|Enh|2014-04-11|Allow SERVER_ADDR environment variable to be optio|
|56404|New|Nor|2014-04-12|endless loop  when connect to a website(https)  wh|
|56413|New|Blk|2014-04-15|can not restart httpd on centos 5.10 64bit        |
|56422|New|Nor|2014-04-17|authnz_ldap with other forms of authn can fail req|
|56457|New|Nor|2014-04-25|mod_proxy_html.c: 2 * cut'n'paste errors          |
|56473|New|Nor|2014-04-30|ETags don't change when headers do                |
|56475|New|Enh|2014-04-30|Allow TLS record size to be configured            |
|56483|New|Enh|2014-05-02|add disableKeepAlivePercentage similar to tomcat h|
|56493|New|Min|2014-05-06|mod_expires should not set expires in future for s|
|56495|New|Nor|2014-05-06|Application behind mod_proxy does not get SessionH|
|56500|Opn|Enh|2014-05-07|vhosts priority order with wildcard               |
|56504|New|Nor|2014-05-08|cannot build static support binaries              |
|56508|New|Nor|2014-05-09|Requiring SNI - SSLStrictSNIVHostCheck semantics  |
|56517|New|Enh|2014-05-12|Virtualhosts cannot inherit parent CustomLog      |
|56528|New|Enh|2014-05-15|"bad flags delimiter" - improve helpfulness       |
|56541|New|Nor|2014-05-18|Proxy 502's on large file post requests           |
|56559|New|Nor|2014-05-25|multiple unix sockets in one virtualhost fails    |
|56569|New|Nor|2014-05-27|Null CRC in gzip footer with mod_cgid and ErrorDoc|
|56587|New|Nor|2014-06-03|Many VirtualHost's with SSLEngine On              |
|56590|New|Enh|2014-06-04|(REST-) API for configuring balancer manager remot|
|56594|Inf|Nor|2014-06-05|mod_authn_dbd, mod_dbd and mod_ssl                |
|56598|New|Nor|2014-06-06|Content-Length header should be always interpreted|
|56621|New|Nor|2014-06-13|Rotatelogs.exe first start                        |
|56622|New|Nor|2014-06-13|mod_reqtimeout incorrectly applies timeouts to CON|
|56626|New|Nor|2014-06-15|Add info about rotatelogs to log rotation document|
|56633|New|Nor|2014-06-16|mod_auth_basic breaks mod_autoindex               |
|56645|New|Maj|2014-06-19|socket callback with timeout callback causes infin|
|56664|New|Nor|2014-06-24|Proxy retry timeout does not cope with system time|
|56697|New|Maj|2014-07-04|status page still shown while blocked             |
|56718|New|Nor|2014-07-14|Cleanup request Host headers when absolute URI are|
|56719|New|Nor|2014-07-14|parallel requests get served with delays          |
|56738|New|Enh|2014-07-17|Ability to extract route from cookie with regexp  |
|56740|New|Nor|2014-07-18|suspended_count not maintained properly with wstun|
|56750|New|Enh|2014-07-20|SuexecUserGroup replacement                       |
|56751|New|Maj|2014-07-20|Fails to properly mitigate Slow Post DoS attack   |
|56753|New|Nor|2014-07-21|mod_lua.so: symbol luaL_openlib: referenced symbol|
|56778|New|Nor|2014-07-28|while running make command i got this error       |
|56794|New|Nor|2014-07-31|Added AuthDBDFullAuthQuery option                 |
|56795|Inf|Nor|2014-07-31|Apache 2.4.10 Program received signal SIGPIPE, Bro|
|56818|Inf|Nor|2014-08-05|SetEnvIf may set invalid string length on empty st|
|56843|New|Enh|2014-08-12|Support different OCSP stapling max ages          |
|56868|New|Nor|2014-08-18|relative LuaRoot broken                           |
|56879|New|Nor|2014-08-22|Information disclosure                            |
|56889|New|Nor|2014-08-26|Close state never dies                            |
|56918|Opn|Blk|2014-09-06|error: 'ap_copy_scoreboard_worker' undeclared here|
|56926|New|Nor|2014-09-08|Filename causes AH02599 slotmem issue             |
|56933|New|Min|2014-09-09|not sure it's an appache bug : some browser want t|
|56942|New|Reg|2014-09-10|Unable to implement TRANSFER-CHUNKED:ENCODING with|
|56943|New|Nor|2014-09-10|mod_proxy_connect - AH02447: err/hup on backconn  |
|56977|New|Maj|2014-09-12|segfaults when using mod_mem_cache + mod_disk_cach|
|56986|New|Blk|2014-09-17|chunked Transfer-Encoding forbidden: /test/test.dl|
|57014|New|Cri|2014-09-24|Incorrect test for CC_FOR_BUILD prevents build (on|
|57023|New|Nor|2014-09-26|Socache shmcb don't cache file bigger than 11k    |
|57028|New|Enh|2014-09-27|mod_spdy - support Apache 2.4                     |
|57044|New|Nor|2014-09-29|[PatchAvailable] Use base64url in mod_unique_id ('|
|57045|New|Nor|2014-09-30|dumpio output strings are missing                 |
|57046|New|Enh|2014-09-30|Add additional parameter to enable check URL befor|
|57056|New|Maj|2014-10-03|Rewrite port is taken into hostname               |
|57067|New|Nor|2014-10-08|A proxy worker both standalone and balancer member|
|57069|New|Nor|2014-10-08|apache ssl timeout during chunked request in rever|
|57073|New|Cri|2014-10-09|Intermittent Connection Issues using default httpd|
|57085|New|Enh|2014-10-14|Implement Proxy Protocol in httpd                 |
|57087|New|Nor|2014-10-14|mod_proxy_fcgi doesn't send cgi CONTENT_LENGTH var|
|57100|Ver|Nor|2014-10-16|"SSLProtocol ALL" is ignored for virtual hosts    |
|57101|New|Enh|2014-10-16|[PATCH] Better error reporting when child spawn fa|
|57109|New|Nor|2014-10-17|GPG verification examples are wrong               |
|57119|Opn|Enh|2014-10-20|Suppress address reuse / DNS cache in mod_proxy   |
|57121|New|Nor|2014-10-21|ocsp stapling should not pass temporary server out|
|57131|New|Nor|2014-10-22|OCSP Stapling scalability concern                 |
|57159|New|Min|2014-10-28|mod_ssl OCSP Stapling directives don't support per|
|57160|New|Nor|2014-10-29|httxt2dbm doesn't generate files on NAS           |
|57174|New|Nor|2014-10-31|Update windows visual studio build                |
|57210|New|Nor|2014-11-14|LuaHookMapToStorage not firing in per-directory co|
|57211|New|Enh|2014-11-14|Config-time options                               |
|57212|Opn|Nor|2014-11-14|Headers returned by scripts are limited to 8190 by|
|57218|New|Nor|2014-11-15|[Feature Request] Apache Bench (AB) to output a cs|
|57219|New|Nor|2014-11-15|ApacheBench quits unexpectedly with high concurren|
|57220|New|Nor|2014-11-15|[Feature Request] Add option to ApacheBench to giv|
|57228|New|Nor|2014-11-17|glibc detected *** httpd: double free or corruptio|
|57229|New|Maj|2014-11-17|mod_sed dies on long lines                        |
|57286|New|Nor|2014-11-29|Symbolic links are not honoured                   |
|57298|New|Min|2014-12-02|RewriteBase inside FilesMatch behaves oddly       |
|57299|New|Enh|2014-12-02|mod_session_dbd should not make a database call pe|
|57300|New|Enh|2014-12-02|mod_session_dbd should not save the session at eac|
|57301|New|Enh|2014-12-02|Add SessionMaxAgeAbsolute Directive               |
|57304|Inf|Nor|2014-12-03|MySQL DBD Authentication Incompatible with SSL    |
|57311|New|Nor|2014-12-04|BalancerMember enclosed by <If> gives syntax error|
|57313|New|Nor|2014-12-05|The DefaultType directive has been removed        |
|57327|New|Nor|2014-12-08|mod_ssl seg fault on exit                         |
|57334|Ver|Maj|2014-12-09|Segmentation fault in SSL_renegotiate at ssl_lib.c|
|57337|New|Nor|2014-12-10|Content negotiation fails with conditional Redirec|
|57339|New|Enh|2014-12-10|ErrorLogFormat doesn't allow logging in Internet d|
|57360|New|Nor|2014-12-17|Fail gracefully on certificate/key mismatch       |
|57372|New|Nor|2014-12-19|httpd will lookup every home directory while start|
|57374|Ver|Nor|2014-12-19|Event MPM: Wrong KeepAliveTimeout when system cloc|
|57379|New|Nor|2014-12-20|[patch] Makefile.in  with mpm-shared, cgi and cgid|
|57383|New|Cri|2014-12-21|Error retrieving Report: An Existing connection wa|
|57386|New|Blk|2014-12-22|html5 lost some comments                          |
|57398|New|Maj|2014-12-26|AH01075: Error dispatching request to : (passing b|
|57399|New|Nor|2014-12-28|Many unnecessary CPU wakeups per second           |
|57406|New|Nor|2014-12-31|cgi-bin script is not executing                   |
|57412|New|Maj|2015-01-04|rewrite rules causes duplicate requests           |
|57416|New|Nor|2015-01-06|htcacheclean thinks the cache is smaller than it a|
|57424|Opn|Nor|2015-01-07|mod_rewrite not using ap_context_document_root    |
|57436|New|Enh|2015-01-12|Option to strip extra data after websocket request|
|57439|New|Enh|2015-01-13|Allow to change body timeout per location         |
|57448|New|Nor|2015-01-16|SSI <!--#set --> cannot capture backreferences fro|
|57453|New|Maj|2015-01-17|403 error when virtualhost configured with non-exi|
|57471|New|Nor|2015-01-20|Apache 2.4.10 Compilation fails when compiling aga|
|57477|New|Nor|2015-01-21|mod_auth_digest AH00052: child pid $pid exit signa|
|57483|New|Nor|2015-01-22|Omit "Keep-Alive" header on 1.1 connections       |
|57492|New|Nor|2015-01-24|incomplete chunked-transfered request body is not |
|57506|New|Nor|2015-01-27|<If> directive doesn't work within a <Location> se|
|57510|New|Enh|2015-01-28|Engine keyform support for private keys           |
|57511|New|Maj|2015-01-28|Opening plain TCP Socket on SSL port causes denial|
|57515|New|Nor|2015-01-30|Define/Undefine don't work reasonably outside of g|
|57519|New|Nor|2015-02-01|change SSLv2 to SSLv3 or remove SSLv2 support allt|
|57526|Opn|Maj|2015-02-03|Apache 2.2.29_openssl-1.0.1k_x86_64 Error creating|
|57529|Opn|Nor|2015-02-03|htcacheclean doesn't show the cached URL with '-a'|
|57585|New|Nor|2015-02-13|httpd fails to start if there is an IncludeOptiona|
|57590|New|Nor|2015-02-18|loading mod_proxy_http makes rewriteRule's [proxy]|
|57591|New|Nor|2015-02-18|DirectoryIndex directive cannot be overwritten    |
|57616|New|Maj|2015-02-23|AB - DNS roundrobin support                       |
|57624|New|Enh|2015-02-23|Provide support for http/2.0                      |
|57631|New|Nor|2015-02-24|Useless test in acinclude.m4                      |
|57632|New|Nor|2015-02-24|mod_systemd passes invalid default to APACHE_MODUL|
|57635|New|Nor|2015-02-25|meta-refresh is not rewritten by mod_proxy_html   |
|57636|New|Nor|2015-02-25|URLs without protocol are not rewriten by mod_prox|
|57641|New|Maj|2015-02-27|mod_substitute: Invalid merge order               |
|57646|New|Enh|2015-02-27|SSLEngine inside If directive                     |
|57660|New|Trv|2015-03-04|AB - free memory allocated by xmalloc and xcalloc |
|57680|New|Nor|2015-03-09|SSLSessionCacheTimeout has no effect              |
|57685|New|Nor|2015-03-10|Requests are denied while the mod_cgid daemon star|
|57691|New|Nor|2015-03-12|mod_proxy/proxy_util confuses UDS scheme with HTTP|
|57695|New|Nor|2015-03-12|[core:warn] [pid 1120] (101)Network is unreachable|
|57710|New|Nor|2015-03-15|Wildcard matching for logging headers             |
|57725|New|Enh|2015-03-18|ApacheBench: include http status code in gnuplot o|
|57742|New|Nor|2015-03-23|"reliable piped logging" doesn't work for ErrorLog|
|57745|New|Nor|2015-03-23|httpd exits 1 with no stderr when proxy_balancer_m|
|57746|New|Nor|2015-03-23|Apache hangs on startup using MPM event           |
|57751|Inf|Maj|2015-03-24|Problems with proxy reverse to websockets         |
|57756|New|Enh|2015-03-25|Config options for handling of pipelined request  |
|57757|New|Cri|2015-03-25|extern apr_xlate_t *ap_locale_to_ascii variable gi|
|57771|New|Nor|2015-03-27|cleanup_script uses incorrect connection ID       |
|57774|Inf|Nor|2015-03-28|httpd.conf <IfModule proxy_html_module> content er|
|57777|New|Nor|2015-03-30|Security concerns with documentation of AddHandler|
|57781|New|Nor|2015-03-31|disable reconnection after connection error       |
|57784|New|Enh|2015-03-31|[RFE] Multiple ErrorLog directives                |
|57785|Opn|Nor|2015-04-01|REDIRECT_URL is not suitable for use in server-gen|
|57795|Opn|Maj|2015-04-07|mod_proxy_wstunnel sometimes does not connect and |
|57800|New|Nor|2015-04-09|High CPU usage in ap_core_output_filter           |
|57807|New|Enh|2015-04-13|Build-configurable environment variable length    |
|57810|New|Nor|2015-04-13|Should apache ignore difference in trailing dot be|
|57813|New|Nor|2015-04-14|Rewrite 'pre-compressed content' recipe using 2.4 |
|57814|New|Nor|2015-04-14|Teach mod_deflate how to serve pre-comressed conte|
|57819|New|Nor|2015-04-15|Need a conventions document                       |
|57832|New|Enh|2015-04-19|Reduction of response splitting attacks consequenc|
|57853|Inf|Nor|2015-04-24|mod_proxy_http sends request with header 'Expect: |
|57876|New|Reg|2015-04-30|logresolve.exe on any Windows immediately crashes |
|57878|New|Nor|2015-04-30|Using UTF-8 for all languages, and avoiding html-e|
|57895|New|Min|2015-05-05|missing m4a mimeType in mime.types                |
|57911|New|Min|2015-05-09|Rewrite documentation unclear or wrong about what |
|57927|New|Maj|2015-05-13|Segmentation Fault at proxy_util.c:994            |
|57933|New|Min|2015-05-18|apr_port_t returns constant                       |
|57941|New|Nor|2015-05-21|config.status: line 331: syntax error near unexpec|
|57949|New|Enh|2015-05-25|new mod_ssl environment variable SSL_{CLIENT|SERVE|
|57950|New|Nor|2015-05-26|[patch] buildconf change hint in build to newer ap|
|57960|New|Nor|2015-05-27|PUT truncates response body; status_line appears t|
|57976|New|Cri|2015-05-30|Server threads stale when sending 500 status with |
|57978|New|Nor|2015-06-01|unix:/ works with any number of / slashes  except |
|57979|New|Nor|2015-06-01|can not turn change log level for mod_filter      |
|57996|New|Nor|2015-06-03|Symlinks erroneously not followed when target inod|
|57997|New|Nor|2015-06-03|Threads started during child_init don't block sign|
|57999|New|Nor|2015-06-04|ap_getparents() may remove start slash of uri     |
|58001|New|Enh|2015-06-04|Implement Forwarded header (RFC 7239) to mod_proxy|
|58007|New|Nor|2015-06-06|400 Bad Request with fully qualified domain name o|
|58025|New|Enh|2015-06-11|mod_authz_dbd : new dbd-query and AuthzDBDQuery op|
|58026|New|Nor|2015-06-11|return 421 status code when SNI and Host: header d|
|58044|New|Cri|2015-06-16|Error sintax 'lua_dump'                           |
|58050|New|Nor|2015-06-17|ErrorDocument does not always work                |
|58073|New|Nor|2015-06-24|Extremely long time for graceful restart          |
|58089|New|Nor|2015-07-01|mod_authz_host uses proxy IP even when mod_remotei|
|58097|New|Enh|2015-07-03|[feat] Preserve original connecting IP            |
|58101|New|Nor|2015-07-05|DeflateCompressionLevel inside vhost resets logfor|
|58107|New|Blk|2015-07-06|Httpd crashes on startup every time, dump file att|
|58109|New|Nor|2015-07-06|Apache on windows cannot handle the hash symbol (#|
|58118|Inf|Min|2015-07-09|mod_proxy_fcgi logs 503 when user aborts connectio|
|58120|New|Nor|2015-07-10|ProxyPassInherit does not work as expect          |
|58121|New|Nor|2015-07-10|ProxyHTMLMeta seems to ignore all <meta http-equiv|
|58129|New|Nor|2015-07-12|man pages are not generated correctly             |
|58132|New|Nor|2015-07-12|non-standard, non-traditional man page layout make|
|58135|New|Nor|2015-07-14|mod_cache sends client "if-Modified-Since" to back|
|58141|New|Nor|2015-07-15|Apache Service doesn't start when rotatlogs.exe pa|
|58142|New|Nor|2015-07-15|authz_core ignores loglevel                       |
|58158|New|Nor|2015-07-21|Not honoring HTTP spec with regard to Accept-Encod|
|58168|New|Enh|2015-07-21|Would like full request evaluation support in Rewr|
|58171|New|Nor|2015-07-22|ap_session_save saves the wrong session after a de|
|58177|New|Enh|2015-07-24|Mod Proxy forward trailers in http chunked request|
|58180|New|Enh|2015-07-24|ErrorDocument original URL in subsequent <Location|
|58181|New|Enh|2015-07-25|mod_expire should allow "minus" keyword same like |
|58188|New|Nor|2015-07-28|http2 mod_lua: support build with lua 5.2+        |
|58197|New|Nor|2015-07-31|apr-util-1.5.4 build against openldap - "could not|
|58225|New|Reg|2015-08-08|intermitant segfault 11 in session_identity_encode|
|58226|New|Nor|2015-08-08|XSS in Error Page                                 |
|58231|New|Nor|2015-08-11|RewriteCond can add "Host" to the Vary-Header     |
|58235|New|Enh|2015-08-12|Ability to allow from domain but with using forwar|
|58243|New|Nor|2015-08-14|rotatelogs goes infinite at startup               |
|58248|New|Nor|2015-08-17|Error 404 in use some characters of utf8 in url   |
|58257|New|Nor|2015-08-18|require ldap-group does not work if account-fullna|
|58278|Inf|Blk|2015-08-24|apache - mod_security Issue : apache no releasing |
|58280|New|Nor|2015-08-24|Backend connection not closed until timeout if cli|
|58288|New|Blk|2015-08-27|Semaphore amount increase until crash when enablin|
|58292|New|Nor|2015-08-27|FallbackResource breaks chunked encoding sometimes|
|58304|New|Nor|2015-08-30|Unexpected Warnings from Macro Use in 2.4         |
|58305|New|Nor|2015-08-30|mod_cgi documentation not clear about what is pass|
|58306|New|Nor|2015-08-30|documentation needs to make it clear which directi|
|58307|New|Nor|2015-08-31|Segmentation fault in child in "read(__nbytes, __b|
|58317|New|Min|2015-09-02|Error message AH01630 is missing file name on deny|
|58334|New|Min|2015-09-06|WebDAV HTTP access does not include meta tag for c|
|58335|New|Nor|2015-09-07|mod_authnz_ldap mismatch                          |
|58343|New|Nor|2015-09-08|The pdf files come up as a blank page.            |
|58354|New|Maj|2015-09-10|(20014)Internal error (specific information not av|
|58356|New|Blk|2015-09-10|Session jumping due to incorrect route            |
|58364|New|Reg|2015-09-11|Apache Server is restarted time to time (Release 2|
|58417|New|Min|2015-09-16|ApacheBench (ab) won't display Server Software of |
|58419|New|Nor|2015-09-16|ApacheBench (ab) doesn't work with keep-alives aga|
|58423|New|Reg|2015-09-17|Apache >= 2.4.8 PCRE_DUPNAMES causes build failure|
|58467|New|Maj|2015-09-29|Environment Variables in ProxyHTMLURLMap produces |
|58475|New|Nor|2015-10-03|Support append/merge with semicolon-separated head|
|58488|New|Nor|2015-10-08|Stoped PHP-FPM pool in multi-pool system with comu|
|58491|New|Maj|2015-10-09|Core dumps appear when the load increases         |
|58492|Inf|Nor|2015-10-09|I think LDAPConnectionPoolTTL is not being honored|
|58498|New|Nor|2015-10-16|Apache 2.4.17: Regression with mod_autoindex (in c|
|58500|New|Nor|2015-10-16|dav_fs not enabled by default                     |
|58503|New|Cri|2015-10-16|segfault in apr_brigade_cleanup() under high load |
|58509|New|Trv|2015-10-20|2.4.17-dev introduces second core.c handler at sta|
|58513|New|Maj|2015-10-21|httpd code documentation is missing               |
|58524|New|Nor|2015-10-23|mod_http2 segfaults when under heavy load         |
|58528|New|Nor|2015-10-23|AllowOverrideList None gets misparsed and .htacces|
|58529|New|Maj|2015-10-23|Segmentation fault after modifying a proxy Balance|
|58550|New|Enh|2015-10-26|During load, Apache 2.2.x with prefork MPM didn|
|58574|New|Nor|2015-11-02|Apache error AH01630 (client denied) but working  |
|58593|New|Nor|2015-11-06|mod_proxy wrong decision between http and ws      |
+-----+---+---+----------+--------------------------------------------------+
| Total 1549 bugs                                                           |
+---------------------------------------------------------------------------+

From dev-return-84526-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov  9 12:25:42 2015
Return-Path: <dev-return-84526-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AEC8A18149
	for <apmail-httpd-dev-archive@www.apache.org>; Mon,  9 Nov 2015 12:25:42 +0000 (UTC)
Received: (qmail 32880 invoked by uid 500); 9 Nov 2015 12:25:42 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 32811 invoked by uid 500); 9 Nov 2015 12:25:42 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 32798 invoked by uid 99); 9 Nov 2015 12:25:42 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Nov 2015 12:25:42 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id DA0331A0C62
	for <dev@httpd.apache.org>; Mon,  9 Nov 2015 12:25:41 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.011
X-Spam-Level:
X-Spam-Status: No, score=-0.011 tagged_above=-999 required=6.31
	tests=[SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 2pv03UdVeiDl for <dev@httpd.apache.org>;
	Mon,  9 Nov 2015 12:25:40 +0000 (UTC)
Received: from monica.sharp.fm (monica.sharp.fm [80.168.143.5])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTP id 93CF543DAB
	for <dev@httpd.apache.org>; Mon,  9 Nov 2015 12:25:40 +0000 (UTC)
Received: from [10.105.13.224] (unknown [5.56.169.82])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	(Authenticated sender: minfrin@sharp.fm)
	by monica.sharp.fm (Postfix) with ESMTPSA id 6A48B80C91
	for <dev@httpd.apache.org>; Mon,  9 Nov 2015 12:25:34 +0000 (GMT)
Content-Type: text/plain; charset=windows-1252
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: Moderations for modules.apache.org
From: Graham Leggett <minfrin@sharp.fm>
In-Reply-To: <563CDB8E.8090500@apache.org>
Date: Mon, 9 Nov 2015 14:25:33 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <34696952-2525-4672-832A-46044B45A7BA@sharp.fm>
References: <3C83A262-8317-4166-8282-55F067BDD8F6@sharp.fm> <563CDB8E.8090500@apache.org>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

On 06 Nov 2015, at 6:55 PM, Daniel Gruno <humbedooh@apache.org> wrote:

> I'm sorry to say modules.apache.org is so bot/spam infested now, that
> it's impossible to moderate it unless I spend more than an hour every
> day going through all the fake modules and users added on a daily =
basis.
>=20
> I am contemplating scrapping it entirely, or possibly creating a new
> system at some point, with stronger anti-spam measures.

Need a hand with moderation?

Having what looks to be the formal module search engine being frozen in =
time is a problem for us, it makes us look stale when we aren=92t.

Regards,
Graham
=97


From dev-return-84527-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov  9 12:41:28 2015
Return-Path: <dev-return-84527-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3FD7C18230
	for <apmail-httpd-dev-archive@www.apache.org>; Mon,  9 Nov 2015 12:41:28 +0000 (UTC)
Received: (qmail 66564 invoked by uid 500); 9 Nov 2015 12:41:27 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 66485 invoked by uid 500); 9 Nov 2015 12:41:27 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 66476 invoked by uid 99); 9 Nov 2015 12:41:27 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Nov 2015 12:41:27 +0000
Received: from [192.168.1.37] (2804ds5-soeb.0.fullrate.dk [90.184.204.23])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPSA id 183181A022F
	for <dev@httpd.apache.org>; Mon,  9 Nov 2015 12:41:26 +0000 (UTC)
Subject: Re: Moderations for modules.apache.org
To: dev@httpd.apache.org
References: <3C83A262-8317-4166-8282-55F067BDD8F6@sharp.fm>
 <563CDB8E.8090500@apache.org> <34696952-2525-4672-832A-46044B45A7BA@sharp.fm>
From: Daniel Gruno <humbedooh@apache.org>
Message-ID: <56409470.1040505@apache.org>
Date: Mon, 9 Nov 2015 13:41:20 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <34696952-2525-4672-832A-46044B45A7BA@sharp.fm>
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: 8bit

On 11/09/2015 01:25 PM, Graham Leggett wrote:
> On 06 Nov 2015, at 6:55 PM, Daniel Gruno <humbedooh@apache.org> wrote:
> 
>> I'm sorry to say modules.apache.org is so bot/spam infested now, that
>> it's impossible to moderate it unless I spend more than an hour every
>> day going through all the fake modules and users added on a daily basis.
>>
>> I am contemplating scrapping it entirely, or possibly creating a new
>> system at some point, with stronger anti-spam measures.
> 
> Need a hand with moderation?
> 
> Having what looks to be the formal module search engine being frozen in time is a problem for us, it makes us look stale when we arent.
> 
> Regards,
> Graham
> 
> 
You're welcome to try to clean it up ;)
make a user account on the system and give me the UID of that user (the
ID, not the username - there are tens of thousands of users, so I can't
see them all in the admin interface anymore).

I am contemplating removing all users/mods and adding some recaptcha
stuff to it soon, but enotime right now.

With regards,
Daniel.

From dev-return-84528-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov  9 12:55:03 2015
Return-Path: <dev-return-84528-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3F459182B7
	for <apmail-httpd-dev-archive@www.apache.org>; Mon,  9 Nov 2015 12:55:03 +0000 (UTC)
Received: (qmail 90078 invoked by uid 500); 9 Nov 2015 12:55:02 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 90018 invoked by uid 500); 9 Nov 2015 12:55:02 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 90005 invoked by uid 99); 9 Nov 2015 12:55:02 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Nov 2015 12:55:02 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 5A2351A09EE
	for <dev@httpd.apache.org>; Mon,  9 Nov 2015 12:55:02 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.011
X-Spam-Level:
X-Spam-Status: No, score=-0.011 tagged_above=-999 required=6.31
	tests=[SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id vzKcmKKWWWja for <dev@httpd.apache.org>;
	Mon,  9 Nov 2015 12:55:01 +0000 (UTC)
Received: from monica.sharp.fm (monica.sharp.fm [80.168.143.5])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTP id 1A69F4419E
	for <dev@httpd.apache.org>; Mon,  9 Nov 2015 12:55:01 +0000 (UTC)
Received: from [10.105.13.224] (unknown [5.56.169.82])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	(Authenticated sender: minfrin@sharp.fm)
	by monica.sharp.fm (Postfix) with ESMTPSA id 7B9A880C91
	for <dev@httpd.apache.org>; Mon,  9 Nov 2015 12:55:00 +0000 (GMT)
Content-Type: text/plain; charset=windows-1252
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: Moderations for modules.apache.org
From: Graham Leggett <minfrin@sharp.fm>
In-Reply-To: <56409470.1040505@apache.org>
Date: Mon, 9 Nov 2015 14:54:59 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <97A461C0-0EDB-4D01-9055-615D3C455DB8@sharp.fm>
References: <3C83A262-8317-4166-8282-55F067BDD8F6@sharp.fm> <563CDB8E.8090500@apache.org> <34696952-2525-4672-832A-46044B45A7BA@sharp.fm> <56409470.1040505@apache.org>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

On 09 Nov 2015, at 2:41 PM, Daniel Gruno <humbedooh@apache.org> wrote:

> You're welcome to try to clean it up ;)
> make a user account on the system and give me the UID of that user =
(the
> ID, not the username - there are tens of thousands of users, so I =
can't
> see them all in the admin interface anymore).

:)

> I am contemplating removing all users/mods and adding some recaptcha
> stuff to it soon, but enotime right now.

Is there a way to leverage LDAP at all? (Or whatever backs the JIRA et =
al instances)

Regards,
Graham
=97


From dev-return-84529-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 11 08:21:35 2015
Return-Path: <dev-return-84529-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5695A18A9C
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 11 Nov 2015 08:21:35 +0000 (UTC)
Received: (qmail 96492 invoked by uid 500); 11 Nov 2015 08:21:34 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 96402 invoked by uid 500); 11 Nov 2015 08:21:34 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 96392 invoked by uid 99); 11 Nov 2015 08:21:34 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Nov 2015 08:21:34 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 0FD0FC09FA
	for <dev@httpd.apache.org>; Wed, 11 Nov 2015 08:21:34 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.003
X-Spam-Level:
X-Spam-Status: No, score=-0.003 tagged_above=-999 required=6.31
	tests=[HEADER_FROM_DIFFERENT_DOMAINS=0.008, SPF_HELO_PASS=-0.001,
	T_RP_MATCHES_RCVD=-0.01] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Ag742RxsfiIy for <dev@httpd.apache.org>;
	Wed, 11 Nov 2015 08:21:29 +0000 (UTC)
Received: from plane.gmane.org (plane.gmane.org [80.91.229.3])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 9AE2F439E9
	for <dev@httpd.apache.org>; Wed, 11 Nov 2015 08:21:29 +0000 (UTC)
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <apache-dev@m.gmane.org>)
	id 1ZwQed-0007O1-Ir
	for dev@httpd.apache.org; Wed, 11 Nov 2015 09:21:19 +0100
Received: from aorleans-552-1-111-228.w92-140.abo.wanadoo.fr ([92.140.238.228])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Wed, 11 Nov 2015 09:21:19 +0100
Received: from christophe.jaillet by aorleans-552-1-111-228.w92-140.abo.wanadoo.fr with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Wed, 11 Nov 2015 09:21:19 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: dev@httpd.apache.org
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Subject: cppcheck warning with mod_http2
Date: Wed, 11 Nov 2015 09:21:09 +0100
Lines: 43
Message-ID: <n1utpn$is8$1@ger.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: aorleans-552-1-111-228.w92-140.abo.wanadoo.fr
X-Mozilla-News-Host: news://news.gmane.org:119
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
X-Antivirus: avast! (VPS 151110-1, 10/11/2015), Outbound message
X-Antivirus-Status: Clean

Hi,

mod_http2 generates some new cppcheck warnings:

modules/http2/h2_config.h
62    unnecessaryForwardDeclaration    style    The struct 'h2_config' 
forward declaration is unnecessary. Type struct is already declared earlier.
modules/http2/h2_io_set.h
25    unnecessaryForwardDeclaration    style    The struct 'h2_io_set' 
forward declaration is unnecessary. Type struct is already declared earlier.
modules/http2/h2_mplx.c
106    redundantAssignment    style    Variable 'status' is reassigned a 
value before the old one has been used.
modules/http2/h2_request.c
87    unsignedLessThanZero    style    Checking if unsigned variable 
'nlen' is less than zero.
modules/http2/h2_response.h
34    unnecessaryForwardDeclaration    style    The struct 'h2_response' 
forward declaration is unnecessary. Type struct is already declared earlier.
modules/http2/h2_session.c
1150    unusedStructMember    style    struct or union member 
'nvctx_t::offset' is never used.
modules/http2/h2_task.c
211    redundantAssignment    style    Variable 'status' is reassigned a 
value before the old one has been used.
modules/http2/h2_to_h1.c
284    redundantAssignment    style    Variable 'status' is reassigned a 
value before the old one has been used.



At least this one is spurious:
    modules/http2/h2_session.c
    1150    unusedStructMember    style    struct or union member 
'nvctx_t::offset' is never used.

nvctx_t is defined both in h2_session and in h2_response.
Only the latter seems useful. I think that the one in h2_session could 
be completely dropped.


Best regards,
CJ


From dev-return-84530-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 11 11:24:28 2015
Return-Path: <dev-return-84530-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0865B18211
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 11 Nov 2015 11:24:28 +0000 (UTC)
Received: (qmail 57528 invoked by uid 500); 11 Nov 2015 11:24:27 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 57455 invoked by uid 500); 11 Nov 2015 11:24:27 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 57446 invoked by uid 99); 11 Nov 2015 11:24:27 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Nov 2015 11:24:27 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 005A9C3E0A
	for <dev@httpd.apache.org>; Wed, 11 Nov 2015 11:24:27 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.667
X-Spam-Level: *
X-Spam-Status: No, score=1.667 tagged_above=-999 required=6.31
	tests=[FROM_MISSP_EH_MATCH=1.999, RP_MATCHES_RCVD=-0.343,
	T_FROM_MISSP_DKIM=0.01, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id D5KeKeAv3eL3 for <dev@httpd.apache.org>;
	Wed, 11 Nov 2015 11:24:20 +0000 (UTC)
Received: from mailrelay1-us-west.apache.org (mailrelay1-us-west.apache.org [209.188.14.139])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTP id 7667E439DC
	for <dev@httpd.apache.org>; Wed, 11 Nov 2015 11:24:20 +0000 (UTC)
Received: from pony-poc.apache.org (pony-poc.apache.org [195.154.156.166])
	by mailrelay1-us-west.apache.org (ASF Mail Server at mailrelay1-us-west.apache.org) with ESMTP id C9F00E0044
	for <dev@httpd.apache.org>; Wed, 11 Nov 2015 11:24:19 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
	by pony-poc.apache.org (ASF Mail Server at pony-poc.apache.org) with ESMTP id CBEDA260076
	for <dev@httpd.apache.org>; Wed, 11 Nov 2015 11:24:36 +0000 (UTC)
MIME-Version: 1.0
Date: Wed, 11 Nov 2015 11:24:36 -0000
Subject: Re: Moderations for modules.apache.org
x-ponymail-sender: f85cc4d67b0b00a9017135e4201b9225b5053fac
To: <dev@httpd.apache.org>
From: "Daniel Gruno"<humbedooh@apache.org>
References: <97A461C0-0EDB-4D01-9055-615D3C455DB8@sharp.fm> <3C83A262-8317-4166-8282-55F067BDD8F6@sharp.fm> <563CDB8E.8090500@apache.org> <34696952-2525-4672-832A-46044B45A7BA@sharp.fm> <56409470.1040505@apache.org>
In-Reply-To: <97A461C0-0EDB-4D01-9055-615D3C455DB8@sharp.fm>
Content-Type: text/plain; charset="iso-8859-1"
X-Mailer: LuaSocket 3.0-rc1
x-ponymail-agent: PonyMail/0.1a
Message-ID: <pony-f85cc4d67b0b00a9017135e4201b9225b5053fac-21633ac5925ada0a11ddc950a80e905cd1c97b97@dev.httpd.apache.org>



On 11/9/2015, 1:54:59 PM, Graham Leggett <minfrin@sharp.fm> wrote: 
> On 09 Nov 2015, at 2:41 PM, Daniel Gruno <humbedooh@apache.org> wrote:
> 
> > You're welcome to try to clean it up ;)
> > make a user account on the system and give me the UID of that user (the
> > ID, not the username - there are tens of thousands of users, so I can't
> > see them all in the admin interface anymore).
> 
> :)
> 
> > I am contemplating removing all users/mods and adding some recaptcha
> > stuff to it soon, but enotime right now.
> 
> Is there a way to leverage LDAP at all? (Or whatever backs the JIRA et al instances)
> 

JIRA isn't LDAP backed, FWIW.
And no, we wanted it to be open to the larger public to submit modules, not just committers. But the rub is, we are being attacked manually by actual people sending in garbage stuff, bypassing the security checks. I'm not entirely sure how to combat this, but I do have a few ideas. They require something close to a complete wipe of the database , however.

With regards,
Daniel.

> Regards,
> Graham
> 
> 
> 
------
Sent via Pony Mail for dev@httpd.apache.org. 
View this email online at:
https://pony-poc.apache.org/list.html?dev@httpd.apache.org

From dev-return-84531-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 11 11:27:06 2015
Return-Path: <dev-return-84531-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 10E6D18221
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 11 Nov 2015 11:27:06 +0000 (UTC)
Received: (qmail 64627 invoked by uid 500); 11 Nov 2015 11:27:05 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 64550 invoked by uid 500); 11 Nov 2015 11:27:05 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 64541 invoked by uid 99); 11 Nov 2015 11:27:05 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Nov 2015 11:27:05 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id D847B1A2D2C
	for <dev@httpd.apache.org>; Wed, 11 Nov 2015 11:27:04 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[FROM_MISSP_EH_MATCH=1.999, KAM_LAZY_DOMAIN_SECURITY=1,
	T_FROM_MISSP_DKIM=0.01, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id eduq65EmwB6b for <dev@httpd.apache.org>;
	Wed, 11 Nov 2015 11:27:03 +0000 (UTC)
Received: from mailrelay1-us-west.apache.org (mailrelay1-us-west.apache.org [209.188.14.139])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTP id 5DB87439F8
	for <dev@httpd.apache.org>; Wed, 11 Nov 2015 11:27:03 +0000 (UTC)
Received: from pony-poc.apache.org (pony-poc.apache.org [195.154.156.166])
	by mailrelay1-us-west.apache.org (ASF Mail Server at mailrelay1-us-west.apache.org) with ESMTP id 91248E0044
	for <dev@httpd.apache.org>; Wed, 11 Nov 2015 11:27:02 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
	by pony-poc.apache.org (ASF Mail Server at pony-poc.apache.org) with ESMTP id B3AA2260076
	for <dev@httpd.apache.org>; Wed, 11 Nov 2015 11:27:19 +0000 (UTC)
Message-ID: <pony-f85cc4d67b0b00a9017135e4201b9225b5053fac-21e955df35970cd5198098239a60f0003139be7a@dev.httpd.apache.org>
From: "Daniel Gruno"<humbedooh@apache.org>
To: <dev@httpd.apache.org>
MIME-Version: 1.0
x-ponymail-sender: f85cc4d67b0b00a9017135e4201b9225b5053fac
x-ponymail-agent: PonyMail/0.1a
In-Reply-To: <97A461C0-0EDB-4D01-9055-615D3C455DB8@sharp.fm>
Content-Type: text/plain; charset="iso-8859-1"
References: <97A461C0-0EDB-4D01-9055-615D3C455DB8@sharp.fm> <3C83A262-8317-4166-8282-55F067BDD8F6@sharp.fm> <563CDB8E.8090500@apache.org> <34696952-2525-4672-832A-46044B45A7BA@sharp.fm> <56409470.1040505@apache.org>
X-Mailer: LuaSocket 3.0-rc1
Subject: Re: Moderations for modules.apache.org
Date: Wed, 11 Nov 2015 11:27:19 -0000

I'm a bit slow this morning. I'm sitting here, using Pony Mail for replying, not realizing...we should use OAuth for this! It would still require a wipe of the current DB, but if we use the ASF OAuth plus maybe Google OAuth for non-committers, we should be able to allow only _actual people_ to contribute to this. :)

Does this sound like a good idea, or complete overkill?

With regards,
Daniel.

On 11/9/2015, 1:54:59 PM, Graham Leggett <minfrin@sharp.fm> wrote: 
> On 09 Nov 2015, at 2:41 PM, Daniel Gruno <humbedooh@apache.org> wrote:
> 
> > You're welcome to try to clean it up ;)
> > make a user account on the system and give me the UID of that user (the
> > ID, not the username - there are tens of thousands of users, so I can't
> > see them all in the admin interface anymore).
> 
> :)
> 
> > I am contemplating removing all users/mods and adding some recaptcha
> > stuff to it soon, but enotime right now.
> 
> Is there a way to leverage LDAP at all? (Or whatever backs the JIRA et al instances)
> 
> Regards,
> Graham
> 
> 
> 
------
Sent via Pony Mail for dev@httpd.apache.org. 
View this email online at:
https://pony-poc.apache.org/list.html?dev@httpd.apache.org

From dev-return-84532-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 11 12:24:56 2015
Return-Path: <dev-return-84532-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C7A281839F
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 11 Nov 2015 12:24:56 +0000 (UTC)
Received: (qmail 38789 invoked by uid 500); 11 Nov 2015 12:24:56 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 38728 invoked by uid 500); 11 Nov 2015 12:24:56 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 38719 invoked by uid 99); 11 Nov 2015 12:24:56 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Nov 2015 12:24:56 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id A9F3AC0473
	for <dev@httpd.apache.org>; Wed, 11 Nov 2015 12:24:55 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.363
X-Spam-Level: *
X-Spam-Status: No, score=1.363 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RDNS_DYNAMIC=0.363]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id V-lOCWD_93ya for <dev@httpd.apache.org>;
	Wed, 11 Nov 2015 12:24:55 +0000 (UTC)
Received: from gungnir.webthing.com (209-20-83-52.slicehost.net [209.20.83.52])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTP id DE780439E9
	for <dev@httpd.apache.org>; Wed, 11 Nov 2015 12:24:54 +0000 (UTC)
Received: from [192.168.0.127] (cpc36-newt30-2-0-cust898.19-3.cable.virginm.net [82.32.195.131])
	by gungnir.webthing.com (Postfix) with ESMTPSA id 65308E8C51
	for <dev@httpd.apache.org>; Wed, 11 Nov 2015 12:24:48 +0000 (UTC)
Message-ID: <1447244687.4165.42.camel@mimir.webthing.com>
Subject: Re: Moderations for modules.apache.org
From: Nick Kew <niq@apache.org>
To: dev@httpd.apache.org
Date: Wed, 11 Nov 2015 12:24:47 +0000
In-Reply-To: <pony-f85cc4d67b0b00a9017135e4201b9225b5053fac-21e955df35970cd5198098239a60f0003139be7a@dev.httpd.apache.org>
References: <97A461C0-0EDB-4D01-9055-615D3C455DB8@sharp.fm>
	 <3C83A262-8317-4166-8282-55F067BDD8F6@sharp.fm>
	 <563CDB8E.8090500@apache.org>
	 <34696952-2525-4672-832A-46044B45A7BA@sharp.fm>
	 <56409470.1040505@apache.org>
	 <pony-f85cc4d67b0b00a9017135e4201b9225b5053fac-21e955df35970cd5198098239a60f0003139be7a@dev.httpd.apache.org>
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.4.4-3 
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit

On Wed, 2015-11-11 at 11:27 +0000, Daniel Gruno wrote:

> Does this sound like a good idea, or complete overkill?

I have long thought we might employ an alternative scheme
akin to a "planet" aggregator.  Make the module index
an aggregator from module authors providing and
maintaining their own descriptions as DOAP files.
That way an author doesn't have to go through any
manual process or moderation to update entries,
and the admin burden is reduced.

We still have to bootstrap new authors wanting us to
aggregate their DOAP URLs.  We could fully automate it
for committers by auto-approving apache.org URLs,
leaving a much reduced space for manual moderation
and still vulnerable to spam attacks.

Then we can reduce that further by requiring oauth
as you suggest.  And once the OpenMiracl podling
has a TA up-and-running, we can deploy that to
help open a wider circle of strong trust.

Just a thought.

-- 
Nick Kew


From dev-return-84533-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 11 16:44:21 2015
Return-Path: <dev-return-84533-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CD91618E26
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 11 Nov 2015 16:44:21 +0000 (UTC)
Received: (qmail 21312 invoked by uid 500); 11 Nov 2015 16:44:21 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 21251 invoked by uid 500); 11 Nov 2015 16:44:21 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 21241 invoked by uid 99); 11 Nov 2015 16:44:21 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Nov 2015 16:44:21 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id C2942C5E9C
	for <dev@httpd.apache.org>; Wed, 11 Nov 2015 16:44:20 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.344
X-Spam-Level:
X-Spam-Status: No, score=-0.344 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.343, SPF_HELO_PASS=-0.001, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id EFg4DTsnJOnq for <dev@httpd.apache.org>;
	Wed, 11 Nov 2015 16:44:15 +0000 (UTC)
Received: from mail.thelounge.net (mail.thelounge.net [91.118.73.15])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id B5D62439DB
	for <dev@httpd.apache.org>; Wed, 11 Nov 2015 16:44:14 +0000 (UTC)
Subject: Re: [VOTE] Release Apache httpd 2.4.17 as GA
To: dev@httpd.apache.org
References: <C45BAF78-8A10-4751-B1CA-62BB499FD795@jaguNET.com>
 <561AAE67.4010609@thelounge.net>
 <CAKQ1sVNqM7s1-eOnLsHr7gs_kyoQvH3FM+1yXGqRtjWC4FDTbQ@mail.gmail.com>
 <561AB192.7000709@thelounge.net>
 <CAKQ1sVNbPSYQVA5dRrRXkoR1tp+UychOBY3-sSMTNhbU__Q1zw@mail.gmail.com>
 <561AB51F.7070303@thelounge.net> <561AC150.7020707@kippdata.de>
From: Reindl Harald <h.reindl@thelounge.net>
Openpgp: id=13540402D67A7F71C6E974EA866063CF7F780279;
 url=https://arrakis.thelounge.net/gpg/h.reindl_thelounge.net.pub.txt
X-Enigmail-Draft-Status: N1110
Organization: the lounge interactive design
Message-ID: <56437054.3050503@thelounge.net>
Date: Wed, 11 Nov 2015 17:44:04 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <561AC150.7020707@kippdata.de>
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="5PgpIORbokR2FDoIwDSdH10lLdsO2Khnv"

This is an OpenPGP/MIME signed message (RFC 4880 and 3156)
--5PgpIORbokR2FDoIwDSdH10lLdsO2Khnv
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: quoted-printable



Am 11.10.2015 um 22:06 schrieb Rainer Jung:
> Am 11.10.2015 um 21:14 schrieb Reindl Harald:
>>
>>
>> Am 11.10.2015 um 21:07 schrieb Yann Ylavic:
>>> On Sun, Oct 11, 2015 at 8:59 PM, Reindl Harald
>>> <h.reindl@thelounge.net> wrote:
>>>>
>>>> Google only showed discussions, Bugzilla and so on and finding the n=
ew
>>>> directive is hard - maybe the hint should made it into the changelog=

>>>> for GA
>>>> release
>>>
>>> Yes you're right, I should have mentioned that directive in the
>>> CHANGES entry.
>>> Unfortunately I'm afraid it's too late now, the 2.4.17 tag is frozen.=

>>> Hopefully the (new) documentation will quickly be indexed...
>>
>> no problem since it's diabled by default
>>
>>
>> "ab -c 100 -n 50000 http://small-image.gif" did not make me that happy=

>> after a short test on a quadcore machine, after some time httpd stoppe=
d
>> to respond for a tinay statical image with a few bytes
>>
>> # SO_REUSEPORT support
>> # <IfVersion >=3D 2.4.17>
>> #  ListenCoresBucketsRatio 4
>> # </IfVersion>
>
> You might run into problems if your server accumulates to many TIME_WAI=
T
> connections. Check their number in the "netstat -an" output.
>
> ab without "-k" does in connection per request and if those are only
> used very short and the server is fast you can end up with a couple of
> 10.000s of TIME_WAIT connections (independent of SO_REUSEPORT)

sorry for the last reply

no, it's only when "ListenCoresBucketsRatio 4" is used while otherwise a =

"ab -c 100 -n 5000000 http://small-image.gif" is no problem


--5PgpIORbokR2FDoIwDSdH10lLdsO2Khnv
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2

iEYEARECAAYFAlZDcFQACgkQhmBjz394AnncewCfQY6sunhY46w9kb/2llt3ATKK
ZnsAoIT0ymQ4b3KNlhOuey67CvDB4WKg
=EUp7
-----END PGP SIGNATURE-----

--5PgpIORbokR2FDoIwDSdH10lLdsO2Khnv--

From dev-return-84534-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 12 08:00:12 2015
Return-Path: <dev-return-84534-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EC19418F98
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 12 Nov 2015 08:00:11 +0000 (UTC)
Received: (qmail 3224 invoked by uid 500); 12 Nov 2015 08:00:11 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 3156 invoked by uid 500); 12 Nov 2015 08:00:10 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 3145 invoked by uid 99); 12 Nov 2015 08:00:10 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Nov 2015 08:00:10 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 7FFBDC0481
	for <dev@httpd.apache.org>; Thu, 12 Nov 2015 08:00:10 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan_net.20150623.gappssmtp.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Q9EsN3SLOBOq for <dev@httpd.apache.org>;
	Thu, 12 Nov 2015 08:00:04 +0000 (UTC)
Received: from mail-io0-f179.google.com (mail-io0-f179.google.com [209.85.223.179])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 811CF439DB
	for <dev@httpd.apache.org>; Thu, 12 Nov 2015 08:00:04 +0000 (UTC)
Received: by ioir85 with SMTP id r85so16933033ioi.1
        for <dev@httpd.apache.org>; Thu, 12 Nov 2015 00:00:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan_net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=myQz1HfWVUbKxkLu4PC93TcP6B2iBN3bzPknKCTuYwA=;
        b=N99dpbpQh78t8pNPk2mmAK3eETptv8kybNKmbmnsg4eI+Se//k0uGo9IS1wUnLZMhr
         HG3UVeLqUNvOQlBESxxQPzb3FS/akacM19ev3hU4E0W0TbjoKuSzyX+yS6zOq9bvVh2n
         /GhxCYQ7x6TE1F1Qi1r8DDsoZ3BGJxaxi1cVzYlBrlhp4DM3z41aJ9TGXzg7dg6tIgY+
         RX8YxVooiK6qlDPB9+tyxDtA204RMIRzEFqlLr5DafuV9ga7Uje60jjP3wLc1ZWRFaHg
         0U1QJ6Ta2cELbZ0SLCymwhBGTTBGs1sWzWrhqqdwVvd1RBRmWaxox9EzRbGjfnnbvF8M
         GNWg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=myQz1HfWVUbKxkLu4PC93TcP6B2iBN3bzPknKCTuYwA=;
        b=aekefeFTE+x/8AC9wi3BpZbjefiQOi7qLcXZV5gGZDyfAYlz9kV6uzYZToZZj7EVmk
         ueD0Lw6M2tx6b2PLAAx6LbTZw2FUVh6u4w6zBkV47+oBAi5y+O2aF7lCxKTH+NT+Zwbi
         pDqiVXTsWdHskfbS5WMkl5r6ulG6z/gPab/X+fdzXyfox88mbxxqS5Taztlac43nCBWG
         5EsqjXXTfHUxm7YIVz42A/QZ0K3xVexNVqY4N4TiArFZpnNwCCh0bUzrpXAOSqvFRx7y
         CROkuUkPA9YMCuC+2KOtIO9DydzArO23bzx9g7aAIbtxvxochc6gXu8xvXu6bFb6R1a+
         U/kw==
X-Gm-Message-State: ALoCoQnjrDWRZboMsxM2Wey2Y6KvtxZ0PbexLur9Q9B+IElMI30AYVbzleD31JpRkT3HDRdj8tG6
MIME-Version: 1.0
X-Received: by 10.107.4.83 with SMTP id 80mr13767545ioe.150.1447315204101;
 Thu, 12 Nov 2015 00:00:04 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Thu, 12 Nov 2015 00:00:04 -0800 (PST)
Date: Thu, 12 Nov 2015 02:00:04 -0600
Message-ID: <CACsi253sSs3hk1jLQw4WwcrB0MMahiLKm6suVzp3gvv+NBNrjw@mail.gmail.com>
Subject: Interesting data point
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a113edfac9e6ee005245354c6

--001a113edfac9e6ee005245354c6
Content-Type: text/plain; charset=UTF-8

According to securityspace's October-November delta, nearly half a million
web hosts jumped to httpd 2.2.31 in the past month alone (almost entirely
from older 2.2.x servers) while 11k downgraded to an older 2.2 or upgraded
2.2.31 to 2.4.x.

Half a million in 31 days?  This is triple the 2.2.31 adoption from the
Sept time-frame.

http://www.securityspace.com/s_survey/data/man.201510/srvch.html?server=Apache&revision=Apache%2F2.2.31

The httpd 2.4.12 - 2.4.17 series experienced about 142k upgrades vs. 16k
downgrades over the same period, and similar numbers in Sept-Oct.  Those
releases are essentially concurrent with the 2.2.31 release, and I didn't
look back into 2014's releases on either branch since 2.2.29 and 2.4.10 are
both over a year old.

Here are some tallies to give you a rough idea of what happened last month;
FromToFromTo2.2.x-2.2.314723592.2.312.4.x26972.4.x+2.2.3119162.2.312.2.x-
1634Other2.2.31246702.2.31Other6697498945110282.4.x-2.4.x613082.4.x2.4.x-800
2.2.x2.4.x419742.4.x2.2.x-2715Other2.4.x385992.4.xOther1238114188115896
Upgrades640826Downgrades26924

2.4.x refers to the 2.4.12 - 2.4.17 releases (past 12 mos,
the same basic lifespan as 2.2.31), but I tallied our earlier
2.4.x release counts for any +/- upgrade/downgrade deltas.
E.g. 2.2.4 -> 2.4.7 isn't counted anywhere, but 2.4.16 -> 2.4.7
is counted as a 2.4.x- downgrade.  I counted 2.4.12 -> 2.4.16
only once, in the 2.4.x+ upgrade tally.

2.2.x refers to 2.2 flavors prior to 2.2.31, but .31 is tallied
but I tallied 2.2.31 into +/- upgrade/downgrade deltas.
I did re-count 2.4.x+ -> 2.2.31 conversion in the 2.4.x -> 2.2.x-
downgrade tally.

"Other" may be pre-2.4.x, or a non-specific Apache/2 Server string,
or too small a proportion to call out individually.

On the one hand, I'm ecstatic that users are clearly upgrading at
maybe the fastest pace in forever.  On the other hand, I am stuck
wondering how we have made the 2.4.x transition effectively 3x
harder than upgrading within the 2.2 lineage, and puzzling over
what we can improve as a project to ease this transition for millions
of deployed 2.2.x instances.

--001a113edfac9e6ee005245354c6
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><p dir=3D"ltr">According to securityspace&#39;s October-No=
vember delta, nearly half a million web hosts jumped to httpd 2.2.31 in the=
 past month alone (almost entirely from older 2.2.x servers) while 11k down=
graded to an older 2.2 or upgraded 2.2.31 to 2.4.x.</p>
<p dir=3D"ltr">Half a million in 31 days?=C2=A0 This is triple the 2.2.31 a=
doption from the Sept time-frame.</p>
<p dir=3D"ltr"><a href=3D"http://www.securityspace.com/s_survey/data/man.20=
1510/srvch.html?server=3DApache&amp;revision=3DApache%2F2.2.31" target=3D"_=
blank" rel=3D"noreferrer">http://www.securityspace.com/s_survey/data/man.20=
1510/srvch.html?server=3DApache&amp;revision=3DApache%2F2.2.31</a></p>
<p dir=3D"ltr">The httpd 2.4.12 - 2.4.17 series experienced about 142k upgr=
ades vs. 16k downgrades over the same period, and similar numbers in Sept-O=
ct.=C2=A0 Those releases are essentially concurrent with the 2.2.31 release=
, and I didn&#39;t look back into 2014&#39;s releases on either branch sinc=
e 2.2.29 and 2.4.10 are both over a year old.<br><br>Here are some tallies =
to give you a rough idea of what happened last month;</p><table cellspacing=
=3D"0" cellpadding=3D"0" dir=3D"ltr" border=3D"1" style=3D"table-layout:fix=
ed;font-size:13px;font-family:arial,sans,sans-serif;border-collapse:collaps=
e;border:1px solid rgb(204,204,204)"><colgroup><col width=3D"38"><col width=
=3D"42"><col width=3D"48"><col width=3D"35"><col width=3D"42"><col width=3D=
"38"><col width=3D"41"></colgroup><tbody><tr style=3D"height:21px"><td styl=
e=3D"padding:2px 3px;vertical-align:bottom">From</td><td style=3D"padding:2=
px 3px;vertical-align:bottom">To</td><td style=3D"padding:2px 3px;vertical-=
align:bottom"></td><td style=3D"padding:2px 3px;vertical-align:bottom"></td=
><td style=3D"padding:2px 3px;vertical-align:bottom">From</td><td style=3D"=
padding:2px 3px;vertical-align:bottom">To</td><td style=3D"padding:2px 3px;=
vertical-align:bottom"></td></tr><tr style=3D"height:21px"><td style=3D"pad=
ding:2px 3px;vertical-align:bottom">2.2.x-</td><td style=3D"padding:2px 3px=
;vertical-align:bottom">2.2.31</td><td style=3D"padding:2px 3px;vertical-al=
ign:bottom;text-align:right">472359</td><td></td><td style=3D"padding:2px 3=
px;vertical-align:bottom">2.2.31</td><td style=3D"padding:2px 3px;vertical-=
align:bottom">2.4.x</td><td style=3D"padding:2px 3px;vertical-align:bottom;=
text-align:right">2697</td></tr><tr style=3D"height:21px"><td style=3D"padd=
ing:2px 3px;vertical-align:bottom">2.4.x+</td><td style=3D"padding:2px 3px;=
vertical-align:bottom">2.2.31</td><td style=3D"padding:2px 3px;vertical-ali=
gn:bottom;text-align:right">1916</td><td></td><td style=3D"padding:2px 3px;=
vertical-align:bottom">2.2.31</td><td style=3D"padding:2px 3px;vertical-ali=
gn:bottom">2.2.x-</td><td style=3D"padding:2px 3px;vertical-align:bottom;te=
xt-align:right">1634</td></tr><tr style=3D"height:21px"><td style=3D"paddin=
g:2px 3px;vertical-align:bottom">Other</td><td style=3D"padding:2px 3px;ver=
tical-align:bottom">2.2.31</td><td style=3D"padding:2px 3px;vertical-align:=
bottom;text-align:right">24670</td><td></td><td style=3D"padding:2px 3px;ve=
rtical-align:bottom">2.2.31</td><td style=3D"padding:2px 3px;vertical-align=
:bottom">Other</td><td style=3D"padding:2px 3px;vertical-align:bottom;text-=
align:right">6697</td></tr><tr style=3D"height:21px"><td style=3D"padding:2=
px 3px;vertical-align:bottom"></td><td style=3D"padding:2px 3px;vertical-al=
ign:bottom"></td><td style=3D"padding:2px 3px;vertical-align:bottom;text-al=
ign:right">498945</td><td></td><td style=3D"padding:2px 3px;vertical-align:=
bottom"></td><td style=3D"padding:2px 3px;vertical-align:bottom"></td><td s=
tyle=3D"padding:2px 3px;vertical-align:bottom;text-align:right">11028</td><=
/tr><tr style=3D"height:21px"><td style=3D"padding:2px 3px;vertical-align:b=
ottom"></td><td style=3D"padding:2px 3px;vertical-align:bottom"></td><td st=
yle=3D"padding:2px 3px;vertical-align:bottom"></td><td></td><td style=3D"pa=
dding:2px 3px;vertical-align:bottom"></td><td style=3D"padding:2px 3px;vert=
ical-align:bottom"></td><td></td></tr><tr style=3D"height:21px"><td style=
=3D"padding:2px 3px;vertical-align:bottom">2.4.x-</td><td style=3D"padding:=
2px 3px;vertical-align:bottom">2.4.x</td><td style=3D"padding:2px 3px;verti=
cal-align:bottom;text-align:right">61308</td><td></td><td style=3D"padding:=
2px 3px;vertical-align:bottom">2.4.x</td><td style=3D"padding:2px 3px;verti=
cal-align:bottom">2.4.x-</td><td style=3D"padding:2px 3px;vertical-align:bo=
ttom;text-align:right">800</td></tr><tr style=3D"height:21px"><td style=3D"=
padding:2px 3px;vertical-align:bottom">2.2.x</td><td style=3D"padding:2px 3=
px;vertical-align:bottom">2.4.x</td><td style=3D"padding:2px 3px;vertical-a=
lign:bottom;text-align:right">41974</td><td></td><td style=3D"padding:2px 3=
px;vertical-align:bottom">2.4.x</td><td style=3D"padding:2px 3px;vertical-a=
lign:bottom">2.2.x-</td><td style=3D"padding:2px 3px;vertical-align:bottom;=
text-align:right">2715</td></tr><tr style=3D"height:21px"><td style=3D"padd=
ing:2px 3px;vertical-align:bottom">Other</td><td style=3D"padding:2px 3px;v=
ertical-align:bottom">2.4.x</td><td style=3D"padding:2px 3px;vertical-align=
:bottom;text-align:right">38599</td><td></td><td style=3D"padding:2px 3px;v=
ertical-align:bottom">2.4.x</td><td style=3D"padding:2px 3px;vertical-align=
:bottom">Other</td><td style=3D"padding:2px 3px;vertical-align:bottom;text-=
align:right">12381</td></tr><tr style=3D"height:21px"><td style=3D"padding:=
2px 3px;vertical-align:bottom"></td><td></td><td style=3D"padding:2px 3px;v=
ertical-align:bottom;text-align:right">141881</td><td></td><td></td><td></t=
d><td style=3D"padding:2px 3px;vertical-align:bottom;text-align:right">1589=
6</td></tr><tr style=3D"height:21px"><td style=3D"padding:2px 3px;vertical-=
align:bottom"></td><td></td><td></td><td></td><td></td><td></td><td></td></=
tr><tr style=3D"height:21px"><td style=3D"padding:2px 3px;vertical-align:bo=
ttom">Upgrades</td><td></td><td style=3D"padding:2px 3px;vertical-align:bot=
tom;text-align:right">640826</td><td></td><td style=3D"padding:2px 3px;vert=
ical-align:bottom">Downgrades</td><td></td><td style=3D"padding:2px 3px;ver=
tical-align:bottom;text-align:right">26924</td></tr></tbody></table><p dir=
=3D"ltr"><span style=3D"font-size:13px">2.4.x refers to the 2.4.12 - 2.4.17=
 releases (past 12 mos,<br></span><span style=3D"font-size:13px">the same b=
asic lifespan as 2.2.31),=C2=A0</span><span style=3D"font-size:13px">but I =
tallied our earlier <br>2.4.x release counts for any +/- upgrade/downgrade =
deltas.<br>E.g. 2.2.4 -&gt; 2.4.7 isn&#39;t counted anywhere, but 2.4.16 -&=
gt; 2.4.7=C2=A0<br></span><span style=3D"font-size:13px">is counted as a 2.=
4.x- downgrade. =C2=A0</span><span style=3D"font-size:13px">I counted 2.4.1=
2 -&gt; 2.4.16 <br>only once, in the 2.4.x+ upgrade tally.</span></p><p dir=
=3D"ltr"><span style=3D"font-size:13px">2.2.x refers to 2.2 flavors prior t=
o 2.2.31, but .31 is tallied<br></span><span style=3D"font-size:13px">but I=
 tallied 2.2.31 into +/- upgrade/downgrade deltas.<br>I did re-count 2.4.x+=
 -&gt; 2.2.31 conversion in the 2.4.x -&gt; 2.2.x-=C2=A0<br></span><span st=
yle=3D"font-size:13px">downgrade tally.</span></p><p dir=3D"ltr"><span styl=
e=3D"font-size:13px">&quot;Other&quot; may be pre-2.4.x, or a non-specific =
Apache/2 Server string,=C2=A0<br></span><span style=3D"font-size:13px">or t=
oo small a proportion to call out individually.</span></p><p>On the one han=
d, I&#39;m=C2=A0ecstatic=C2=A0that users are clearly upgrading at<br>maybe =
the fastest pace in forever.=C2=A0 On the other hand, I am stuck<br>wonderi=
ng how we have made the 2.4.x transition effectively 3x<br>harder than upgr=
ading within the 2.2 lineage, and puzzling over<br>what we can improve as a=
 project to ease this transition for millions<br>of deployed 2.2.x instance=
s.</p><p><br></p>
</div>

--001a113edfac9e6ee005245354c6--

From dev-return-84535-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 12 08:35:09 2015
Return-Path: <dev-return-84535-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 873A31817D
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 12 Nov 2015 08:35:09 +0000 (UTC)
Received: (qmail 72051 invoked by uid 500); 12 Nov 2015 08:35:09 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 71975 invoked by uid 500); 12 Nov 2015 08:35:09 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 71965 invoked by uid 99); 12 Nov 2015 08:35:09 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Nov 2015 08:35:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 90C241A2D4B
	for <dev@httpd.apache.org>; Thu, 12 Nov 2015 08:35:08 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan_net.20150623.gappssmtp.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id iHj7d82f5SBJ for <dev@httpd.apache.org>;
	Thu, 12 Nov 2015 08:35:01 +0000 (UTC)
Received: from mail-io0-f169.google.com (mail-io0-f169.google.com [209.85.223.169])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id CB30A43A00
	for <dev@httpd.apache.org>; Thu, 12 Nov 2015 08:35:00 +0000 (UTC)
Received: by ioc74 with SMTP id 74so58272835ioc.2
        for <dev@httpd.apache.org>; Thu, 12 Nov 2015 00:35:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan_net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=/p6YZRHAc6iv6W85OjLdXSxqOsAzLAosrBP0Hutn7nw=;
        b=QVv1G7yHo5maD+Jj6IfKOPEV86qCM8IJo/eE6HIy6lE36bew4umZJ/akvNCHQ2eoC7
         auGvQMOxdujud0x/oHKxqnOSN1DVs/KeOnxMudLPY36FKKLOsk4oqbP3exb9ezxMW19j
         hhAfFqP2Ug4kYEMHqHF5G6aQCXsOJhulrn1XZi/XJnAfYCehYc8MQD8yKhQTDxVWgIUi
         nboR5+nMY3FEDJlGCwsg0+Fpf723bN5ydyzWus0tYp+GRIHSsbrYkRTV3xOgHh945uZ8
         yvLolKuToHlf37QLNyDyUtkVFdM2l9o3Yy+/6VjUeGHCkooh3HtGvPmpBdlsb6uDD6EZ
         2awA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=/p6YZRHAc6iv6W85OjLdXSxqOsAzLAosrBP0Hutn7nw=;
        b=P1ZMnSqEMIfCfU624V/ehfrvjAQu6hSKs5QmrxbZJUL4f0cuE53Az+aySVebYX1tJt
         hSj6AKApBkPBSJwpbRH1h+PmE8v5TiV5D5Y101fbF/zjBmj5cPwqdWBmOWJf7O87F0rT
         Ujb1OK/29z1foo8U0Gn646M3tZ0sIgSNwSCp1FzPZJmQXHLB2djeGF7jiHvjBu+WGNq9
         uNGlLKjsVJSyzWhoHnHRqDBNK+HxbprX9NfvWfWz8dqorlpsKzvEJMRCDt9lRf/A3l+p
         Kg3Hox9CHHGu0PmqpKaMYiUiYKPxnjzeGp9NBpwGH5CtfvyGM6gIhp0nw5abRp8m2WU7
         2lIQ==
X-Gm-Message-State: ALoCoQlpXu9J7tWPnT8c3PgD25m3QTlDGb1tolE4QCZy54F8owYDn4Hst5bDY/Foo3r0D3Sieakt
MIME-Version: 1.0
X-Received: by 10.107.10.66 with SMTP id u63mr12509008ioi.86.1447317300411;
 Thu, 12 Nov 2015 00:35:00 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Thu, 12 Nov 2015 00:35:00 -0800 (PST)
In-Reply-To: <CACsi253sSs3hk1jLQw4WwcrB0MMahiLKm6suVzp3gvv+NBNrjw@mail.gmail.com>
References: <CACsi253sSs3hk1jLQw4WwcrB0MMahiLKm6suVzp3gvv+NBNrjw@mail.gmail.com>
Date: Thu, 12 Nov 2015 02:35:00 -0600
Message-ID: <CACsi251_1-b8Rg5rpd0YEwrMHk=R70+5hyioWiH524uc1r2N_Q@mail.gmail.com>
Subject: Re: Interesting data point
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a113f93be91b89a052453d1a4

--001a113f93be91b89a052453d1a4
Content-Type: text/plain; charset=UTF-8

On Thu, Nov 12, 2015 at 2:00 AM, William A Rowe Jr <wrowe@rowe-clan.net>
wrote:

> According to securityspace's October-November delta, nearly half a million
> web hosts jumped to httpd 2.2.31 in the past month alone (almost entirely
> from older 2.2.x servers) while 11k downgraded to an older 2.2 or upgraded
> 2.2.31 to 2.4.x.
>
> Half a million in 31 days?  This is triple the 2.2.31 adoption from the
> Sept time-frame.
>
>
> http://www.securityspace.com/s_survey/data/man.201510/srvch.html?server=Apache&revision=Apache%2F2.2.31
>
> The httpd 2.4.12 - 2.4.17 series experienced about 142k upgrades vs. 16k
> downgrades over the same period, and similar numbers in Sept-Oct.  Those
> releases are essentially concurrent with the 2.2.31 release, and I didn't
> look back into 2014's releases on either branch since 2.2.29 and 2.4.10 are
> both over a year old.
>
This might be easier to follow as a graphic, here is the overall adoption
of 2.2.29 and .31, along with 2.4.10 and later;

http://s.apache.org/FXM

Consider that this all ignores the users who latch onto their OS
distributor - who had 'locked' on 2.2 and 2.4 releases long ago, and whose
users are only going to pick up a new httpd when their distributor ships
it.  What I believe we are looking at is honest-to-goodness sysadmins who
push out "their own choice" of httpd onto their machines.

> On the one hand, I'm ecstatic that users are clearly upgrading at maybe
> the fastest pace in forever.  On the other hand, I am stuck wondering how
> we have made the 2.4.x transition effectively 3x harder than upgrading
> within the 2.2 lineage, and puzzling over what we can improve as a project
> to ease this transition for millions of deployed 2.2.x instances.
>
And before the inevitable laments begin that we chose to ship a 2.2.31
release...

Same time period, 201,907 sites adopted nginx in lieu of Apache, while
90,997 left nginx for Apache, with a net deficit of 111k sites moving to
'something else'.

If it is that easy to move 202k sites (111k net) to an entirely different
server, it is supposed to be much simpler for the users to move within the
same server - from their 2.2.x to 2.4.current, isn't it?  And if it is that
easy to move away, then for 2.2 to 2.4 migration to continue to be painful
will surely hurt httpd adoption, down the road.

--001a113f93be91b89a052453d1a4
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On T=
hu, Nov 12, 2015 at 2:00 AM, William A Rowe Jr <span dir=3D"ltr">&lt;<a hre=
f=3D"mailto:wrowe@rowe-clan.net" target=3D"_blank">wrowe@rowe-clan.net</a>&=
gt;</span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px =
0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);bord=
er-left-style:solid;padding-left:1ex"><div dir=3D"ltr"><p dir=3D"ltr">Accor=
ding to securityspace&#39;s October-November delta, nearly half a million w=
eb hosts jumped to httpd 2.2.31 in the past month alone (almost entirely fr=
om older 2.2.x servers) while 11k downgraded to an older 2.2 or upgraded 2.=
2.31 to 2.4.x.</p>
<p dir=3D"ltr">Half a million in 31 days?=C2=A0 This is triple the 2.2.31 a=
doption from the Sept time-frame.</p>
<p dir=3D"ltr"><a href=3D"http://www.securityspace.com/s_survey/data/man.20=
1510/srvch.html?server=3DApache&amp;revision=3DApache%2F2.2.31" rel=3D"nore=
ferrer" target=3D"_blank">http://www.securityspace.com/s_survey/data/man.20=
1510/srvch.html?server=3DApache&amp;revision=3DApache%2F2.2.31</a></p>
<p dir=3D"ltr">The httpd 2.4.12 - 2.4.17 series experienced about 142k upgr=
ades vs. 16k downgrades over the same period, and similar numbers in Sept-O=
ct.=C2=A0 Those releases are essentially concurrent with the 2.2.31 release=
, and I didn&#39;t look back into 2014&#39;s releases on either branch sinc=
e 2.2.29 and 2.4.10 are both over a year old.</p></div></blockquote><div>Th=
is might be easier to follow as a graphic, here is the overall adoption of =
2.2.29 and .31, along with 2.4.10 and later;</div><div><br></div><div><a hr=
ef=3D"http://s.apache.org/FXM">http://s.apache.org/FXM</a><br></div><div><b=
r></div><div>Consider that this all ignores the users who latch onto their =
OS distributor - who had &#39;locked&#39; on 2.2 and 2.4 releases long ago,=
 and whose users are only going to pick up a new httpd when their distribut=
or ships it.=C2=A0 What I believe we are looking at is honest-to-goodness s=
ysadmins who push out &quot;their own choice&quot; of httpd onto their mach=
ines.=C2=A0</div><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px =
0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-l=
eft-style:solid;padding-left:1ex"><div dir=3D"ltr"><p dir=3D"ltr">On the on=
e hand, I&#39;m=C2=A0ecstatic=C2=A0that users are clearly upgrading at mayb=
e the fastest pace in forever.=C2=A0 On the other hand, I am stuck wonderin=
g how we have made the 2.4.x transition effectively 3x harder than upgradin=
g within the 2.2 lineage, and puzzling over what we can improve as a projec=
t to ease this transition for millions of deployed 2.2.x instances.</p></di=
v></blockquote><div>And before the inevitable laments begin that we chose t=
o ship a 2.2.31 release...</div><div><br></div><div>Same time period, 201,9=
07 sites adopted nginx in lieu of Apache, while 90,997 left nginx for Apach=
e, with a net deficit of 111k sites moving to &#39;something else&#39;.<br>=
</div><div><br></div><div>If it is that easy to move 202k sites (111k net) =
to an entirely different server, it is supposed to be much simpler for the =
users to move within the same server - from their 2.2.x to 2.4.current, isn=
&#39;t it?=C2=A0 And if it is that easy to move away, then for 2.2 to 2.4 m=
igration to continue to be painful will surely hurt httpd adoption, down th=
e road.</div><div><br></div></div><br></div></div>

--001a113f93be91b89a052453d1a4--

From dev-return-84536-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 12 14:17:43 2015
Return-Path: <dev-return-84536-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1114D18CD4
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 12 Nov 2015 14:17:43 +0000 (UTC)
Received: (qmail 71316 invoked by uid 500); 12 Nov 2015 14:17:42 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 71239 invoked by uid 500); 12 Nov 2015 14:17:42 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 71229 invoked by uid 99); 12 Nov 2015 14:17:42 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Nov 2015 14:17:42 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id F3BDAC0F3D
	for <dev@httpd.apache.org>; Thu, 12 Nov 2015 14:17:41 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id hv3_h5KRtkwY for <dev@httpd.apache.org>;
	Thu, 12 Nov 2015 14:17:35 +0000 (UTC)
Received: from mail-io0-f175.google.com (mail-io0-f175.google.com [209.85.223.175])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 72D5420384
	for <dev@httpd.apache.org>; Thu, 12 Nov 2015 14:17:35 +0000 (UTC)
Received: by iouu10 with SMTP id u10so58169245iou.0
        for <dev@httpd.apache.org>; Thu, 12 Nov 2015 06:17:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=4ALNJkFm2vqwuOVH+8z4QulNzKFEknHQxlV2trvUvPQ=;
        b=pv1pAk74Ey2Rz1qpluCSvF9h/ErvKF5FWniVtQfX3aEFO3mdPqHG6KadPOIlzGd5ch
         m2ZgpXBwJj4v63m5LMq8PLQNyHHzgnI9HrZ45RsdX+/dygDVv2eAXcsbAnCckeTgJ3N9
         exSl2FB0aFFSce90iB3Ame4PxAhCiMYFdLwoYJW/DC43AXAX+JKNJwGP0DX+VAlrAjwZ
         5KWGygZJj/dNimcPZEtuO5P86EDpIMczEuRgvfG+hOvIb0rzhT2Om65K85A92d2j8cFU
         MbRR+ks2aLIHWwkGIi7LoglXK9eJM8/W4dnyM7q24Jh7S/FP8/HGT2V5EBoTacJmnKCF
         UIXQ==
MIME-Version: 1.0
X-Received: by 10.107.134.103 with SMTP id i100mr11067213iod.90.1447337849446;
 Thu, 12 Nov 2015 06:17:29 -0800 (PST)
Received: by 10.64.59.197 with HTTP; Thu, 12 Nov 2015 06:17:29 -0800 (PST)
In-Reply-To: <CACsi251_1-b8Rg5rpd0YEwrMHk=R70+5hyioWiH524uc1r2N_Q@mail.gmail.com>
References: <CACsi253sSs3hk1jLQw4WwcrB0MMahiLKm6suVzp3gvv+NBNrjw@mail.gmail.com>
	<CACsi251_1-b8Rg5rpd0YEwrMHk=R70+5hyioWiH524uc1r2N_Q@mail.gmail.com>
Date: Thu, 12 Nov 2015 09:17:29 -0500
Message-ID: <CALK=YjNYtqkDPJvPdvqA7wH1pkvSCCCnFFasUJOnka4y+XN9FQ@mail.gmail.com>
Subject: Re: Interesting data point
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Thu, Nov 12, 2015 at 3:35 AM, William A Rowe Jr <wrowe@rowe-clan.net> wrote:
> If it is that easy to move 202k sites (111k net) to an entirely different
> server, it is supposed to be much simpler for the users to move within the
> same server - from their 2.2.x to 2.4.current, isn't it?  And if it is that
> easy to move away, then for 2.2 to 2.4 migration to continue to be painful
> will surely hurt httpd adoption, down the road.

I don't think the numbers necessarily speak to the difficulty in
upgrading (or switching).  There are
some people who won't switch until absolutely forced, and others who
have new requirements
or are just more liberal in making a change.

I personally do not really see a lot of bad feedback about 2.2 to 2.4
migration. Maybe there would be a good perspective from e.g. one of
the debian maintainers, because their users in some way would have
been "forcibly" dragged though it to stay current on the OS.

From dev-return-84537-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 12 14:56:02 2015
Return-Path: <dev-return-84537-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3F44418E4D
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 12 Nov 2015 14:56:02 +0000 (UTC)
Received: (qmail 79615 invoked by uid 500); 12 Nov 2015 14:56:01 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 79541 invoked by uid 500); 12 Nov 2015 14:56:01 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 79531 invoked by uid 99); 12 Nov 2015 14:56:01 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Nov 2015 14:56:01 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 5ADFA180A60
	for <dev@httpd.apache.org>; Thu, 12 Nov 2015 14:56:01 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.01
X-Spam-Level:
X-Spam-Status: No, score=-0.01 tagged_above=-999 required=6.31
	tests=[SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id Z0K0QgvKUtn2 for <dev@httpd.apache.org>;
	Thu, 12 Nov 2015 14:55:55 +0000 (UTC)
Received: from smtp02.postecom.it (smtp02.postecom.it [62.241.5.183])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 7BADA20EA4
	for <dev@httpd.apache.org>; Thu, 12 Nov 2015 14:55:54 +0000 (UTC)
Received: from VM-EXFE01.Postecom.local (192.168.98.84) by
 vm-exsmtp02.postecom.local (192.168.78.92) with Microsoft SMTP Server (TLS)
 id 14.3.266.1; Thu, 12 Nov 2015 15:55:45 +0100
Received: from [192.168.96.38] (192.168.82.1) by VM-EXFE01.Postecom.local
 (192.168.98.34) with Microsoft SMTP Server (TLS) id 14.3.266.1; Thu, 12 Nov
 2015 15:55:44 +0100
Subject: Re: Interesting data point
To: <dev@httpd.apache.org>
References: <CACsi253sSs3hk1jLQw4WwcrB0MMahiLKm6suVzp3gvv+NBNrjw@mail.gmail.com>
 <CACsi251_1-b8Rg5rpd0YEwrMHk=R70+5hyioWiH524uc1r2N_Q@mail.gmail.com>
 <CALK=YjNYtqkDPJvPdvqA7wH1pkvSCCCnFFasUJOnka4y+XN9FQ@mail.gmail.com>
From: Frederik Nosi <frederik.nosi@postecom.it>
Organization: Postecom s.r.l.
Message-ID: <5644A870.8060404@postecom.it>
Date: Thu, 12 Nov 2015 15:55:44 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <CALK=YjNYtqkDPJvPdvqA7wH1pkvSCCCnFFasUJOnka4y+XN9FQ@mail.gmail.com>
Content-Type: text/plain; charset="utf-8"; format=flowed
Content-Transfer-Encoding: 7bit
X-Originating-IP: [192.168.82.1]

Hi,

On 11/12/2015 03:17 PM, Eric Covener wrote:
> On Thu, Nov 12, 2015 at 3:35 AM, William A Rowe Jr <wrowe@rowe-clan.net> wrote:
>> If it is that easy to move 202k sites (111k net) to an entirely different
>> server, it is supposed to be much simpler for the users to move within the
>> same server - from their 2.2.x to 2.4.current, isn't it?  And if it is that
>> easy to move away, then for 2.2 to 2.4 migration to continue to be painful
>> will surely hurt httpd adoption, down the road.
> I don't think the numbers necessarily speak to the difficulty in
> upgrading (or switching).  There are
> some people who won't switch until absolutely forced, and others who
> have new requirements
> or are just more liberal in making a change.
>
> I personally do not really see a lot of bad feedback about 2.2 to 2.4
> migration. Maybe there would be a good perspective from e.g. one of
> the debian maintainers, because their users in some way would have
> been "forcibly" dragged though it to stay current on the OS.
In my experience, it's not the apache upgrade difficulty per se, but the 
fact that a lot of people using RHEL / SLES have yet to upgrade to their 
latest versions (RHEL 7 / SLES 12) which include Apache 2.4

From dev-return-84538-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 12 15:04:02 2015
Return-Path: <dev-return-84538-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6086118F07
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 12 Nov 2015 15:04:02 +0000 (UTC)
Received: (qmail 5116 invoked by uid 500); 12 Nov 2015 15:04:01 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 5043 invoked by uid 500); 12 Nov 2015 15:04:01 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 5033 invoked by uid 99); 12 Nov 2015 15:04:01 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Nov 2015 15:04:01 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 52D30180A60
	for <dev@httpd.apache.org>; Thu, 12 Nov 2015 15:04:01 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan_net.20150623.gappssmtp.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id ZtFR6rlFGDeK for <dev@httpd.apache.org>;
	Thu, 12 Nov 2015 15:03:52 +0000 (UTC)
Received: from mail-io0-f177.google.com (mail-io0-f177.google.com [209.85.223.177])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 9BD3A43ACA
	for <dev@httpd.apache.org>; Thu, 12 Nov 2015 15:03:52 +0000 (UTC)
Received: by iofh3 with SMTP id h3so67397828iof.3
        for <dev@httpd.apache.org>; Thu, 12 Nov 2015 07:03:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan_net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=rAZmlQvzU2F0leq6nxAKsa/3qugCkJ6uzYdPb/zYvk0=;
        b=qwYEoc2+DsXcK64b+VO9CfLlTxwa+UOQPn5xMb6WyDm3r4D4gF5hiK1Df5U/gXTwDh
         i6sfIc1mUxMXEFmLR1SMA4MIT+PmTXvSQ6nYiSooxDvi4oF29kX3jTuY2y3T8s75k8Se
         d7N9ctV3+SvYoaFDB6+3FmH/lYP6fhh0uknBxAaoxan54SFgVKXVqN89TqJ2ttxH2jx4
         CHEC3IyXaz2BhWUrU/cs6gYSG2h6ImnpVaJ2BU5Q7jWl0H8j0p0iu8YcQrMJGJRAu72v
         /OWiNtKrztUmIFkbL79NmVyjIpTd4YaF7qfAWYQQkk/KlVFnkiAUCehZH2QZx1en8BqS
         n1/A==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=rAZmlQvzU2F0leq6nxAKsa/3qugCkJ6uzYdPb/zYvk0=;
        b=mzqxoBajVctVBq0T4SDMCVeehV2CgW3eSv13BBAaB8WXYkA+0o15JF28IxQx0zPMHj
         SlFMaef2BBDZfVpC9p9GAfipBktX2GTJqDVLrQp1VcBD83MibtF+jaHBTmPNpXO2ruxw
         EYblAUVoGHgYHCNixRhZXoTRidehFC0A66F8RgFtqrZBnOSxaLDNfgw8HzJC32FPDa0i
         ZbnK2ID55FfDQjbN0x3rrVXJzIbZdd8iqfKeyW3Z5yyHtC60iNvxUSAa2wrtog1vKr37
         Uo3SGSddajgbEm9kG6dsb5h6BA3Vd6Sy1LnFhMYcSZ5bOAOBlJgPj0s2LNY/ERekNlgi
         P7PQ==
X-Gm-Message-State: ALoCoQnIYyhx3yZnvkcYCRnIy02AAWK3Sfuguq1mKTIs7fX1883E+Eu/H9ogIKHli4gFpAvzeycJ
MIME-Version: 1.0
X-Received: by 10.107.156.6 with SMTP id f6mr11526526ioe.163.1447340631654;
 Thu, 12 Nov 2015 07:03:51 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Thu, 12 Nov 2015 07:03:51 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Thu, 12 Nov 2015 07:03:51 -0800 (PST)
In-Reply-To: <5644A870.8060404@postecom.it>
References: <CACsi253sSs3hk1jLQw4WwcrB0MMahiLKm6suVzp3gvv+NBNrjw@mail.gmail.com>
	<CACsi251_1-b8Rg5rpd0YEwrMHk=R70+5hyioWiH524uc1r2N_Q@mail.gmail.com>
	<CALK=YjNYtqkDPJvPdvqA7wH1pkvSCCCnFFasUJOnka4y+XN9FQ@mail.gmail.com>
	<5644A870.8060404@postecom.it>
Date: Thu, 12 Nov 2015 09:03:51 -0600
Message-ID: <CACsi250fKVYz+OZ_Y-SWBaQ4RuSku4b5fcBMHv5T52ScM_ikLg@mail.gmail.com>
Subject: Re: Interesting data point
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1140ccc038210e0524594090

--001a1140ccc038210e0524594090
Content-Type: text/plain; charset=UTF-8

Indeed Frederik and Eric,

I looked this morning and only OpenSUSE.latest and FreeBSD.latest appear to
include one of the versions current over the past year.  Others are
shipping older (often much older) 2.2/2.4 versions.

So all but a handful of the numbers cited were for admins 'going it on
their own' from source or third parties, very few using distribution
packages at all.  Similarly, changing server products altogether is a
manually intensive exercise.
On Nov 12, 2015 08:56, "Frederik Nosi" <frederik.nosi@postecom.it> wrote:

> Hi,
>
> On 11/12/2015 03:17 PM, Eric Covener wrote:
>
>> On Thu, Nov 12, 2015 at 3:35 AM, William A Rowe Jr <wrowe@rowe-clan.net>
>> wrote:
>>
>>> If it is that easy to move 202k sites (111k net) to an entirely different
>>> server, it is supposed to be much simpler for the users to move within
>>> the
>>> same server - from their 2.2.x to 2.4.current, isn't it?  And if it is
>>> that
>>> easy to move away, then for 2.2 to 2.4 migration to continue to be
>>> painful
>>> will surely hurt httpd adoption, down the road.
>>>
>> I don't think the numbers necessarily speak to the difficulty in
>> upgrading (or switching).  There are
>> some people who won't switch until absolutely forced, and others who
>> have new requirements
>> or are just more liberal in making a change.
>>
>> I personally do not really see a lot of bad feedback about 2.2 to 2.4
>> migration. Maybe there would be a good perspective from e.g. one of
>> the debian maintainers, because their users in some way would have
>> been "forcibly" dragged though it to stay current on the OS.
>>
> In my experience, it's not the apache upgrade difficulty per se, but the
> fact that a lot of people using RHEL / SLES have yet to upgrade to their
> latest versions (RHEL 7 / SLES 12) which include Apache 2.4
>

--001a1140ccc038210e0524594090
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<p dir=3D"ltr">Indeed Frederik and Eric,</p>
<p dir=3D"ltr">I looked this morning and only OpenSUSE.latest and FreeBSD.l=
atest appear to include one of the versions current over the past year.=C2=
=A0 Others are shipping older (often much older) 2.2/2.4 versions.</p>
<p dir=3D"ltr">So all but a handful of the numbers cited were for admins &#=
39;going it on their own&#39; from source or third parties, very few using =
distribution packages at all.=C2=A0 Similarly, changing server products alt=
ogether is a manually intensive exercise.</p>
<div class=3D"gmail_quote">On Nov 12, 2015 08:56, &quot;Frederik Nosi&quot;=
 &lt;<a href=3D"mailto:frederik.nosi@postecom.it">frederik.nosi@postecom.it=
</a>&gt; wrote:<br type=3D"attribution"><blockquote class=3D"gmail_quote" s=
tyle=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">Hi,<=
br>
<br>
On 11/12/2015 03:17 PM, Eric Covener wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">
On Thu, Nov 12, 2015 at 3:35 AM, William A Rowe Jr &lt;<a href=3D"mailto:wr=
owe@rowe-clan.net" target=3D"_blank">wrowe@rowe-clan.net</a>&gt; wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">
If it is that easy to move 202k sites (111k net) to an entirely different<b=
r>
server, it is supposed to be much simpler for the users to move within the<=
br>
same server - from their 2.2.x to 2.4.current, isn&#39;t it?=C2=A0 And if i=
t is that<br>
easy to move away, then for 2.2 to 2.4 migration to continue to be painful<=
br>
will surely hurt httpd adoption, down the road.<br>
</blockquote>
I don&#39;t think the numbers necessarily speak to the difficulty in<br>
upgrading (or switching).=C2=A0 There are<br>
some people who won&#39;t switch until absolutely forced, and others who<br=
>
have new requirements<br>
or are just more liberal in making a change.<br>
<br>
I personally do not really see a lot of bad feedback about 2.2 to 2.4<br>
migration. Maybe there would be a good perspective from e.g. one of<br>
the debian maintainers, because their users in some way would have<br>
been &quot;forcibly&quot; dragged though it to stay current on the OS.<br>
</blockquote>
In my experience, it&#39;s not the apache upgrade difficulty per se, but th=
e fact that a lot of people using RHEL / SLES have yet to upgrade to their =
latest versions (RHEL 7 / SLES 12) which include Apache 2.4<br>
</blockquote></div>

--001a1140ccc038210e0524594090--

From dev-return-84539-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 12 19:43:16 2015
Return-Path: <dev-return-84539-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 722EA18CEB
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 12 Nov 2015 19:43:16 +0000 (UTC)
Received: (qmail 96508 invoked by uid 500); 12 Nov 2015 19:43:15 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 96456 invoked by uid 500); 12 Nov 2015 19:43:15 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 96446 invoked by uid 99); 12 Nov 2015 19:43:15 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Nov 2015 19:43:15 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 504AAC4BD4
	for <dev@httpd.apache.org>; Thu, 12 Nov 2015 19:43:15 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id AjSsv0iMzT55 for <dev@httpd.apache.org>;
	Thu, 12 Nov 2015 19:43:14 +0000 (UTC)
Received: from mail-pa0-f52.google.com (mail-pa0-f52.google.com [209.85.220.52])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id BA17220F43
	for <dev@httpd.apache.org>; Thu, 12 Nov 2015 19:43:14 +0000 (UTC)
Received: by pasz6 with SMTP id z6so76676978pas.2
        for <dev@httpd.apache.org>; Thu, 12 Nov 2015 11:43:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=subject:to:references:from:message-id:date:user-agent:mime-version
         :in-reply-to:content-type:content-transfer-encoding;
        bh=N3SnoiSHf5J5KmpkO2LpK+b/wasH32jPCO0hdyIAync=;
        b=HN6GXxeM6p1bFO+vPH5bmmow8iyGBxi4QnEHjrnivUMTKYVfqtAI0zWcoZ+mlzcHnj
         waps+HAYMKOseHKZrqb9JOxm6i3AKiFSVZyuLgSKhKbrcTDdFFS+fICZqXsCNuLSjesV
         +0BUXbMVyWOlLI22OGUulS0lHEl68GP9MNYrJAwcVM9MCJPUu+M58oIro89RzegANhLz
         VCOmbQY9zR4M9cX1awlyZAhXdah/k56wAy2faZBw9od3dtKYK1GsE0WUgLud+gzjPJJ/
         87aqzj7RkgEGc6ivan/JmpWyzmJ1TLiw91E4kYNEHgGa89oWeyI0qcqIZjV8/HYw2WQS
         ExDg==
X-Received: by 10.68.98.129 with SMTP id ei1mr25423215pbb.7.1447357394504;
        Thu, 12 Nov 2015 11:43:14 -0800 (PST)
Received: from [192.168.1.4] (50-39-127-128.bvtn.or.frontiernet.net. [50.39.127.128])
        by smtp.gmail.com with ESMTPSA id rs5sm15642076pbb.61.2015.11.12.11.43.13
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 12 Nov 2015 11:43:13 -0800 (PST)
Subject: Re: Interesting data point
To: dev@httpd.apache.org
References: <CACsi253sSs3hk1jLQw4WwcrB0MMahiLKm6suVzp3gvv+NBNrjw@mail.gmail.com>
 <CACsi251_1-b8Rg5rpd0YEwrMHk=R70+5hyioWiH524uc1r2N_Q@mail.gmail.com>
From: Jacob Champion <champion.p@gmail.com>
Message-ID: <5644EBD0.8060108@gmail.com>
Date: Thu, 12 Nov 2015 11:43:12 -0800
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <CACsi251_1-b8Rg5rpd0YEwrMHk=R70+5hyioWiH524uc1r2N_Q@mail.gmail.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

On 11/12/2015 12:35 AM, William A Rowe Jr wrote:
> If it is that easy to move 202k sites (111k net) to an entirely
> different server, it is supposed to be much simpler for the users to
> move within the same server - from their 2.2.x to 2.4.current, isn't
> it?  And if it is that easy to move away, then for 2.2 to 2.4 migration
> to continue to be painful will surely hurt httpd adoption, down the road.

I think this oversimplifies things. In my experience the decision to 
switch servers or upgrade versions involves a lot more than how "easy" 
or "hard" the upgrade is.

If (hypothetically) nginx meets a new use case that Apache doesn't, it 
doesn't matter how much easier it would have been to upgrade Apache. I'm 
going to switch straight from Apache 2.2 to nginx, even if it's very 
difficult to do.

If I am perfectly happy (or more appropriately: my management chain is 
perfectly happy) with Apache 2.2, it doesn't matter how easy or hard it 
is to switch to 2.4. I'm not going to spend any money/effort to switch; 
I'm just going to follow the 2.2.x line. (And it looks like 2.2.31 added 
a lot of great functionality.)

So I don't want to downplay your comment -- you may be absolutely 
correct, and maybe it is hard to upgrade -- but adoption numbers alone 
don't necessarily tell you much about the *difficulty* of said adoption. 
It probably tells you more about the user-perceived bang for buck.

--Jacob

From dev-return-84540-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 13 22:31:00 2015
Return-Path: <dev-return-84540-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1CAC718D7E
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 13 Nov 2015 22:31:00 +0000 (UTC)
Received: (qmail 75116 invoked by uid 500); 13 Nov 2015 22:30:59 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 75055 invoked by uid 500); 13 Nov 2015 22:30:59 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 75040 invoked by uid 99); 13 Nov 2015 22:30:59 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Nov 2015 22:30:59 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id D38DAC50C0
	for <dev@httpd.apache.org>; Fri, 13 Nov 2015 22:30:58 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id zqjJnJuGIiRl for <dev@httpd.apache.org>;
	Fri, 13 Nov 2015 22:30:50 +0000 (UTC)
Received: from mail-pa0-f53.google.com (mail-pa0-f53.google.com [209.85.220.53])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 6096A210B6
	for <dev@httpd.apache.org>; Fri, 13 Nov 2015 22:30:50 +0000 (UTC)
Received: by padhx2 with SMTP id hx2so112568220pad.1
        for <dev@httpd.apache.org>; Fri, 13 Nov 2015 14:30:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=from:to:subject:message-id:date:user-agent:mime-version
         :content-type:content-transfer-encoding;
        bh=/AgJra1vvbi81Y5036hDZEyIWf+BtT6fCx9gXdvtlY8=;
        b=OvVohiZc5XtUnLpSJXSlePKHjH91g89WvwJk5feOBlR6AJq6yg2zcA53Jy/Wf7y8G1
         /JrXotufk7NJvEKv64op53emIyQOUwvNFT0YajZvWePmcSytfdCuo8KHGcaSW9Qfm+i6
         +iq8sI6JJj7F0P8IvM06sWsuXP0g9mQfIWkKo/bLmrTVJzE3fBFnwuUz+G5FHnSfL0+U
         Xzp9kn/jXtrsjGwHZOUQIWRKyc3zLkCNAzRq6kNVjKEumJClSacJsVubS+p/9cy1GkRU
         OiQyznVB3b0kWlqTnyVlcsaZQL8uPUcnRntRdeN1fJ+0BkZ5eVla/A3ydmgMEGbkINsz
         3B3g==
X-Received: by 10.68.231.7 with SMTP id tc7mr36144614pbc.108.1447453843916;
        Fri, 13 Nov 2015 14:30:43 -0800 (PST)
Received: from [192.168.1.4] (50-39-127-128.bvtn.or.frontiernet.net. [50.39.127.128])
        by smtp.gmail.com with ESMTPSA id ez1sm22364344pab.6.2015.11.13.14.30.42
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 13 Nov 2015 14:30:43 -0800 (PST)
From: Jacob Champion <champion.p@gmail.com>
To: dev@httpd.apache.org
Subject: mod_websocket cross-post
Message-ID: <56466492.8030103@gmail.com>
Date: Fri, 13 Nov 2015 14:30:42 -0800
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

Hi all,

(If you're already subscribed to modules-dev@ or users@, you've already 
seen this -- sorry -- but Rich Bowen suggested that I post here as well.)

I recently released a 0.1.0 version of mod_websocket, which was at one 
point [1] under consideration for folding into the httpd project, but it 
was abandoned sometime in 2012. I'm picking it up.

If you're interested, you can see a copy of the users@ announcement at

 
http://mail-archives.apache.org/mod_mbox/httpd-users/201511.mbox/%3C56425497.60301%40gmail.com%3E

or take a look at the project page at

     https://github.com/jchampio/apache-websocket

If you'd like to talk about its design, or long-term goals, or the 
appropriateness of its being an httpd module -- or even if you just have 
questions like "who would use this thing?!" -- I would love to discuss it.

Thanks,
--Jacob

[1] 
https://github.com/disconnect/apache-websocket/issues/27#issuecomment-145019603

From dev-return-84541-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 14 10:14:32 2015
Return-Path: <dev-return-84541-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EBF3C18ADD
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 14 Nov 2015 10:14:31 +0000 (UTC)
Received: (qmail 3279 invoked by uid 500); 14 Nov 2015 10:14:26 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 3218 invoked by uid 500); 14 Nov 2015 10:14:25 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 3205 invoked by uid 99); 14 Nov 2015 10:14:25 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Nov 2015 10:14:25 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 62F601A0695
	for <dev@httpd.apache.org>; Sat, 14 Nov 2015 10:14:25 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.879
X-Spam-Level: **
X-Spam-Status: No, score=2.879 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01,
	SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id HijxJTEIfF_A for <dev@httpd.apache.org>;
	Sat, 14 Nov 2015 10:14:23 +0000 (UTC)
Received: from mail-wm0-f49.google.com (mail-wm0-f49.google.com [74.125.82.49])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id C945E20273
	for <dev@httpd.apache.org>; Sat, 14 Nov 2015 10:14:22 +0000 (UTC)
Received: by wmec201 with SMTP id c201so113956715wme.0
        for <dev@httpd.apache.org>; Sat, 14 Nov 2015 02:14:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:subject:date:message-id:mime-version:content-type
         :content-language:thread-index;
        bh=xQU8sFzUohAn2hpudEHpmQTGTRZ8ihCAtLRrbzZ726k=;
        b=Y8XBtD1yvnR76a1aTnHCcPd9XpEv1yR0BwtzmpekPD4oC5sBkLMC4Xl4p869rUgf4T
         amHhVmguDA+IanPSxvlALuUpAQE7AF90fF43XU/NvKZC5fvWcxIV+DLx7dcCBwK7wAYM
         8FNfTzDfB1225CkJ5qz5JTdbj+zJsaTK+tshA=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:subject:date:message-id:mime-version
         :content-type:content-language:thread-index;
        bh=xQU8sFzUohAn2hpudEHpmQTGTRZ8ihCAtLRrbzZ726k=;
        b=CL6gLh5sB7l5zOBPMn9pLkFsEa4OHwfUQGXA3ZIek3UUNkFLdh3aU6wX5OsjqRstBf
         pDnRty8YU3auj+9PpVpVZuLthmbrE5xpL/Iguvk5ZQLqyqCboy7s9gV7AZ1BZrAfIyjJ
         2OGk62nNPrGNk7dfUtTL3VQQSJKabJaMZ3/fpGlkp0fzAT9m7Jn2H5wSQA5xxSjHjsrm
         PPNvY1/lq6X4I8OzrLGl3fer89BlGeOtCQdDOIoYgL8lETKrzJhHsSLDE9i4OQprZv9J
         nI6VLdXssaXpMiq6fRpAkAaLp5oh0dzkgJPa1eRQC2yHEZzNth8EQ7VaUT1CeW+dVkwO
         7xow==
X-Gm-Message-State: ALoCoQnaAOGtPgoqlG+z4JQg6oRNtjCdPi7bvvuGTPtW9IN1wF/T4w6HJX6aY5HWczPTX5e+VHLf
X-Received: by 10.194.192.106 with SMTP id hf10mr27299671wjc.131.1447496062369;
        Sat, 14 Nov 2015 02:14:22 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id y77sm8183198wme.15.2015.11.14.02.14.21
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 14 Nov 2015 02:14:21 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
Subject: mod_http2 / H2WindowSize default
Date: Sat, 14 Nov 2015 11:14:02 +0100
Message-ID: <008501d11ec5$313f5600$93be0200$@qqmail.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0086_01D11ECD.9304F680"
X-Mailer: Microsoft Outlook 16.0
Content-Language: nl
Thread-Index: AdEexA6JddYxh2WXQwOQjr8pMt7xKg==

This is a multipart message in MIME format.

------=_NextPart_000_0086_01D11ECD.9304F680
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

                Hi,

 

I was wondering why mod_http2 currently uses a default window size of 65536.

 

The http2 protocol defines a default window size of 65535, just 1 byte less
than the current default. Changing the default requires transferring this
setting to every client in the initial settings frame, while sticking to
65535 would allow not doing that.

 

I can imagine that a completely different default makes sense (and allowing
to configure this certainly does), but this 1 byte of the protocol default
doesn't make much sense to me.

 

This is just 6 bytes wasted in the handshake for no obvious benefit.

 

 

I would recommend changing the default to 65535 or perhaps to something
completely different. (1MB. Don't know). But sending a setting that is less
than 0.002% off the protocol default doesn't make much sense to me.

 

 

Note that this size is not really used by httpd itself. This size is used by
clients that need to transfer request bodies to httpd. This number of bytes
specifies the maximum number of bytes the client is allowed to send before
it needs to receive a WINDOW_UPDATE from the server, allowing it to transfer
more data.

 

The client determines the default in the other direction.

 

 

                Bert


------=_NextPart_000_0086_01D11ECD.9304F680
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><META =
HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 15 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:#954F72;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri",sans-serif;
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri",sans-serif;
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:70.85pt 70.85pt 70.85pt 70.85pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DNL =
link=3D"#0563C1" vlink=3D"#954F72"><div class=3DWordSection1><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Hi,<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal><span =
lang=3DEN-US>I was wondering why mod_http2 currently uses a default =
window size of 65536.<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US>The http2 protocol defines a default window size of 65535, =
just 1 byte less than the current default. Changing the default requires =
transferring this setting to every client in the initial settings frame, =
while sticking to 65535 would allow not doing =
that.<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US>I can imagine that a completely different default makes =
sense (and allowing to configure this certainly does), but this 1 byte =
of the protocol default doesn&#8217;t make much sense to =
me.<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US>This is just 6 bytes wasted in the handshake for no obvious =
benefit.<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US>I would recommend changing the default to 65535 or perhaps =
to something completely different. (1MB&#8230; Don&#8217;t know). But =
sending a setting that is less than 0.002% off the protocol default =
doesn&#8217;t make much sense to me.<o:p></o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US>Note that this size is not really =
used by httpd itself. This size is used by clients that need to transfer =
request bodies to httpd. This number of bytes specifies the maximum =
number of bytes the client is allowed to send before it needs to receive =
a WINDOW_UPDATE from the server, allowing it to transfer more =
data.<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US>The client determines the default in the other =
direction.<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
Bert<o:p></o:p></span></p></div></body></html>
------=_NextPart_000_0086_01D11ECD.9304F680--


From dev-return-84542-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 14 21:22:16 2015
Return-Path: <dev-return-84542-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5D5F51874A
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 14 Nov 2015 21:22:16 +0000 (UTC)
Received: (qmail 18506 invoked by uid 500); 14 Nov 2015 21:22:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 18450 invoked by uid 500); 14 Nov 2015 21:22:15 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 18440 invoked by uid 99); 14 Nov 2015 21:22:15 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Nov 2015 21:22:15 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 569871A4258
	for <dev@httpd.apache.org>; Sat, 14 Nov 2015 21:22:15 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 4.623
X-Spam-Level: ****
X-Spam-Status: No, score=4.623 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, SUBJ_ALL_CAPS=1.625]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=egnyte_com.20150623.gappssmtp.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 6-FA8nbb9G2v for <dev@httpd.apache.org>;
	Sat, 14 Nov 2015 21:22:14 +0000 (UTC)
Received: from mail-io0-f182.google.com (mail-io0-f182.google.com [209.85.223.182])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 6EECD203C1
	for <dev@httpd.apache.org>; Sat, 14 Nov 2015 21:22:14 +0000 (UTC)
Received: by ioir85 with SMTP id r85so87413025ioi.1
        for <dev@httpd.apache.org>; Sat, 14 Nov 2015 13:22:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=egnyte_com.20150623.gappssmtp.com; s=20150623;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=K4X/HVMVQ2q645KgkBFGLa0sPGPLPS6U1/atzETYVMk=;
        b=ZV6BTBmxN7FB4FfdIpehzH4x2C4eoqfsdIEVnc7WqMgxs3izpQN2ktOnTgx3EkGYnT
         20HZM+uEIv6k8JzilaKki0fQfyz+J5TAOWeBR5jXZOtyLiKF6IEd1myk3HUV8NlfXk6j
         GyZYxtj9626cn/+jaSMu46/CAmTYtbQbrA1zQwZcru2vr+O8WpxXij4PJlR7OnoT5yHa
         DDEY5S14TxXeZf43CPzPxpeAoLvMb/OWY0irNYz/D+gaL2puHKIZl8Ys/0EE3IE723q3
         PfEiGBXn1x/tdvx7APXC7klod8NzIiRCV6+wrWgUKTUqUATuCTWxdMXfPJvQKS5wfdqt
         iQ1Q==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=K4X/HVMVQ2q645KgkBFGLa0sPGPLPS6U1/atzETYVMk=;
        b=Rn3N6b283s7Vp78VvD9goTgtyMIWDUmoKaK3APt81uf1ZKj82UmbpC+XA2v8jrLfiH
         rcdyUfR/6ejcWcKL9yA6ncGvVapMw85j0wOLDicxRA8LLbU2DmS90TxplioRh68RFl24
         MiNoxFYeQCVcYbm7ic7NHQ9ine5i2OVjrMn1DpoVBfIjEEzjBDRJ/gAKsvHnaeUYiECK
         NleCLRWBnNojQZ96G5sV5pRx8LI+gs3wP7rPVsXqV9i/BWgvidZa8gj9ea3RS3k/N5YF
         z2xam4l/WxtzYXv8b4dKHfA+mes1im4SiXu8F0ELkINEg4LEsuEvZAjbKJEelZJt7Kt/
         lVPQ==
X-Gm-Message-State: ALoCoQlva9LeSdj0CxGpTaUGMPmLNj9MGGSy5/jJ288lyC4IGSHiFtYnwwC8mI/uGM1ByBTBFLXM
MIME-Version: 1.0
X-Received: by 10.107.6.146 with SMTP id f18mr24900211ioi.46.1447536127823;
 Sat, 14 Nov 2015 13:22:07 -0800 (PST)
Received: by 10.36.72.137 with HTTP; Sat, 14 Nov 2015 13:22:07 -0800 (PST)
Date: Sat, 14 Nov 2015 22:22:07 +0100
Message-ID: <CAECPfczPAaZpbToUGriYaA+aHwaF4+DPfsfiL63iLAhVN_y7OQ@mail.gmail.com>
Subject: PATCH 58177
From: Daniil Iaitskov <diaitskov@egnyte.com>
To: dev@httpd.apache.org
Content-Type: multipart/alternative; boundary=001a113ea896b2f513052486c4e0

--001a113ea896b2f513052486c4e0
Content-Type: text/plain; charset=UTF-8

Hi List,

I fixed the issues from the last review.
Is there any other problems with the patch?

Now the HTTP Apache Client is able to send trailers,
so keep up with the client, guys.

http://svn.apache.org/viewvc?view=revision&revision=1713993


-- 


Daneel Yaitskov
Egnyte Java Team

skype: daneel_s_yaitskov

--001a113ea896b2f513052486c4e0
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Hi List,<div><br></div><div>I fixed the issues from the la=
st review.</div><div>Is there any other problems with the patch?</div><div>=
<br></div><div>Now the HTTP Apache Client is able to send trailers,=C2=A0</=
div><div>so keep up with the client, guys.</div><div><br></div><div><a href=
=3D"http://svn.apache.org/viewvc?view=3Drevision&amp;revision=3D1713993">ht=
tp://svn.apache.org/viewvc?view=3Drevision&amp;revision=3D1713993</a>=C2=A0=
</div><div><br clear=3D"all"><div><br></div>-- <br><div class=3D"gmail_sign=
ature"><div dir=3D"ltr"><div><div dir=3D"ltr"><br><div><br></div><div>Danee=
l Yaitskov</div><div>Egnyte Java Team</div><div><br></div><div>skype: danee=
l_s_yaitskov</div></div></div></div></div>
</div></div>

--001a113ea896b2f513052486c4e0--

From dev-return-84543-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov 15 07:15:17 2015
Return-Path: <dev-return-84543-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1E73118F70
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 15 Nov 2015 07:15:17 +0000 (UTC)
Received: (qmail 36968 invoked by uid 500); 15 Nov 2015 07:15:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 36893 invoked by uid 500); 15 Nov 2015 07:15:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 36884 invoked by uid 99); 15 Nov 2015 07:15:16 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Nov 2015 07:15:16 +0000
Received: from asf-bz1-us-mid.priv.apache.org (nat1-us-mid.apache.org [23.253.172.122])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPS id 32ED81A0056
	for <dev@httpd.apache.org>; Sun, 15 Nov 2015 07:15:16 +0000 (UTC)
Received: by asf-bz1-us-mid.priv.apache.org (ASF Mail Server at asf-bz1-us-mid.priv.apache.org, from userid 0)
	id 8689E605AF; Sun, 15 Nov 2015 07:15:15 +0000 (UTC)
From: bugzilla@apache.org
To: dev@httpd.apache.org
Subject: Bug report for Apache httpd-2 [2015/11/15]
Message-Id: <20151115071515.8689E605AF@asf-bz1-us-mid.priv.apache.org>
Date: Sun, 15 Nov 2015 07:15:05 +0000 (UTC)

+---------------------------------------------------------------------------+
| Bugzilla Bug ID                                                           |
|     +---------------------------------------------------------------------+
|     | Status: UNC=Unconfirmed NEW=New         ASS=Assigned                |
|     |         OPN=Reopened    VER=Verified    (Skipped Closed/Resolved)   |
|     |   +-----------------------------------------------------------------+
|     |   | Severity: BLK=Blocker CRI=Critical  REG=Regression  MAJ=Major   |
|     |   |           MIN=Minor   NOR=Normal    ENH=Enhancement TRV=Trivial |
|     |   |   +-------------------------------------------------------------+
|     |   |   | Date Posted                                                 |
|     |   |   |          +--------------------------------------------------+
|     |   |   |          | Description                                      |
|     |   |   |          |                                                  |
| 7483|Ass|Enh|2002-03-26|Add FileAction directive to assign a cgi interpret|
| 8713|Inf|Min|2002-05-01|No Errorlog on PROPFIND/Depth:Infinity            |
| 8867|Opn|Cri|2002-05-07|exports.c generation fails when using a symlink to|
|10747|New|Maj|2002-07-12|ftp SIZE command and 'smart' ftp servers results i|
|11294|New|Enh|2002-07-30|desired vhost_alias option                        |
|11580|Opn|Enh|2002-08-09|generate Content-Location headers                 |
|12033|Opn|Nor|2002-08-26|Graceful restart immediately result in [warn] long|
|12680|New|Enh|2002-09-16|Digest authentication with integrity protection   |
|13599|Inf|Nor|2002-10-14|autoindex formating broken for multibyte sequences|
|13661|Ass|Enh|2002-10-15|Apache cannot not handle dynamic IP reallocation  |
|14104|Opn|Enh|2002-10-30|not documented: must restart server to load new CR|
|14496|New|Enh|2002-11-13|Cannot upgrade any version on Windows. Must uninst|
|14922|Inf|Enh|2002-11-28|<target> is currently hardcoded to 'apache2'      |
|15719|Inf|Nor|2002-12-30|WebDAV MOVE to destination URI which is content-ne|
|16761|Inf|Nor|2003-02-04|CustomLog with pipe spawns process during config  |
|16802|New|Enh|2003-02-05|Additional AllowOverride directive "Restrict"     |
|16811|Ass|Maj|2003-02-05|mod_autoindex always return webpages in UTF-8.    |
|17107|New|Min|2003-02-16|Windows should not install printenv               |
|17114|New|Enh|2003-02-17|Please add strip and install-strip targets to Make|
|17244|Ass|Nor|2003-02-20|./configure --help gives false information regardi|
|17497|Opn|Nor|2003-02-27|mod_mime_magic generates incorrect response header|
|18325|New|Enh|2003-03-25|PAM support for suEXEC                            |
|18334|Inf|Cri|2003-03-25|Server crashes when authenticating users against L|
|18497|New|Min|2003-03-30|configure --help gives wrong default for sysconfdi|
|19043|New|Min|2003-04-15|Interesting interaction between cern_meta module a|
|19670|New|Enh|2003-05-05|content type header supplied upon PUT is thrown aw|
|20036|Ass|Nor|2003-05-19|Trailing Dots stripped from PATH_INFO environment |
|21253|New|Nor|2003-07-01|Mime magic doesn't continue if type is specifed fo|
|21260|New|Nor|2003-07-02|CacheMaxExpire directive not enforced !           |
|21533|Ass|Cri|2003-07-11|Multiple levels of htacces files can cause mod_aut|
|22138|Inf|Cri|2003-08-05|Webdav is not preccessing special chars right.    |
|22237|New|Enh|2003-08-08|option to disable ServerSignature on index pages  |
|22484|Opn|Maj|2003-08-16|semaphore problem takes httpd down                |
|22686|Opn|Nor|2003-08-25|ab: apr_poll: The timeout specified has expired (7|
|22898|Opn|Nor|2003-09-02|nph scripts with two HTTP header                  |
|23167|Inf|Cri|2003-09-14|--enable-layout never goes to apr apr-util        |
|23181|New|Nor|2003-09-15|Status 304 (Not modified) and chunking leads to an|
|23238|New|Cri|2003-09-18|non-async-signal-safe operations from signal handl|
|23330|New|Enh|2003-09-22|Enhance ApacheMonitor to view and control Tomcat s|
|23911|Opn|Cri|2003-10-18|CGI processes left defunct/zombie under 2.0.54    |
|24031|New|Enh|2003-10-23|Passphrase protected private key in SSLProxyMachin|
|24095|Opn|Cri|2003-10-24|ERROR "Parent: child process exited with status 32|
|24437|Opn|Nor|2003-11-05|mod_auth_ldap doubly-escapes backslash (\) charact|
|24890|Opn|Nor|2003-11-21|Apache config parser should not be local aware ( g|
|25014|New|Enh|2003-11-26|A flexible interface for mod_log_config           |
|25201|New|Enh|2003-12-04|Provide Cache Purge operation                     |
|25240|Inf|Enh|2003-12-05|SSL Library Error: 336105671 logged as information|
|25435|New|Enh|2003-12-11|sethandler and directoryindex not playing nice    |
|25469|Opn|Enh|2003-12-12|create AuthRoot for defining paths to auth files  |
|25484|Ass|Nor|2003-12-12|Non-service Apache cannot be stopped in WinXP     |
|25543|Inf|Nor|2003-12-15|mod_proxy_ajp overwrites existing response headers|
|25667|New|Nor|2003-12-19|Memory leak in function ssl_scache_dbm_retrieve().|
|25863|New|Enh|2004-01-02|new per-host initialization hooks                 |
|26005|New|Nor|2004-01-08|SERVER_NAME incorrect when using IPv6 address in U|
|26142|New|Maj|2004-01-14|EnableSendFile Off for Windows XP Home            |
|26153|Opn|Cri|2004-01-15|Apache cygwin directory traversal vulnerability   |
|26368|New|Min|2004-01-23|File extensions in AddDescription treated as part |
|26446|New|Nor|2004-01-26|flush buckets followed by eos bucket emit multiple|
|26478|New|Enh|2004-01-28|mod_dav does not expose a method for setting the D|
|26835|New|Enh|2004-02-10|[PATCH] Mod_status Readability & Browser Side Tabl|
|27257|Ass|Enh|2004-02-26|rotatelogs with getopt and setuid                 |
|27578|New|Enh|2004-03-10|made getlastmodified a writable property          |
|27715|Ass|Enh|2004-03-16|Client sending misformed Range "bytes = 0-100" ins|
|27791|Inf|Nor|2004-03-18|mod_cache doesn't re-cache expired content        |
|27835|New|Enh|2004-03-22|When proxying FTP, all errors turns into 404      |
|27869|New|Enh|2004-03-23|stopping and starting httpd again immediately caus|
|28854|Inf|Nor|2004-05-09|Build fails with missing library call on Solaris i|
|28903|New|Enh|2004-05-11|Hooks to add environment variables to CGI and othe|
|29090|Ass|Enh|2004-05-19|MultiviewsMatch NegotiatedOnly extensions not resp|
|29165|New|Nor|2004-05-24|Parent directory icon not correct                 |
|29446|New|Enh|2004-06-08|want directive for setting content negotiation qua|
|29449|New|Enh|2004-06-09|Limit length of specified fields in LogFormat     |
|29450|New|Enh|2004-06-09|Improved logging for mod_access                   |
|29510|Ass|Enh|2004-06-10|ab does not support multiple cookies              |
|29644|Ver|Nor|2004-06-17|mod_proxy keeps downloading even after the client |
|29755|Opn|Nor|2004-06-23|mod_usertrack should use err_headers_out          |
|29822|New|Enh|2004-06-26|implement FTP 'PUT' support in proxy_ftp.c        |
|29941|Ass|Enh|2004-07-06|log files are not tested for availability on confi|
|30259|Ass|Enh|2004-07-22|When proxy connects to backend, a DNS lookup is do|
|30505|Ass|Enh|2004-08-05|Apache uses 'Error', and not lower level event typ|
|30730|Inf|Nor|2004-08-18|[PatchAvailable] mod_actions and Server-Status    |
|30865|Inf|Maj|2004-08-26|mod_disk_cache leaves many temporary files slowing|
|31302|Opn|Cri|2004-09-19|suexec doesn't execute commands if they're not in |
|31311|New|Enh|2004-09-20|Remote user not logged in reverse proxy scenario  |
|31352|Ass|Enh|2004-09-21|RFE, Bind to LDAP server with browser supplier use|
|31418|Opn|Nor|2004-09-25|SSLUserName is not usable by other modules        |
|31484|New|Maj|2004-09-30|Custom environment variables not passed to content|
|31490|New|Nor|2004-09-30|mod_proxy_ftp renders filenames with spaces badly |
|31565|New|Enh|2004-10-06|Won't start correctly if parent closed stdin, stdo|
|31679|New|Enh|2004-10-12|If the argument of a CGI has two or more consecuti|
|31709|Inf|Nor|2004-10-13|Raises an error on SSL name based virtualhosts (wi|
|31712|New|Enh|2004-10-14|config_file is NULL at ap_walk_config etc         |
|31952|New|Enh|2004-10-29|mod_proxy and RealPlayer: audio content streaming |
|32051|Opn|Nor|2004-11-04|mod_example is not thread safe                    |
|32328|Opn|Enh|2004-11-19|Make mod_rewrite escaping optional / expose intern|
|32346|New|Enh|2004-11-22|mod_include/include virtual checks content-type is|
|32524|New|Enh|2004-12-03|ab: add an option to specify a source address     |
|32703|Inf|Enh|2004-12-14|Cannot determine that Apache is frozen if /var fil|
|32750|Ass|Maj|2004-12-17|mod_proxy + Win32DisableAcceptEx = memory leak    |
|32877|New|Enh|2004-12-29|wrong utf-8 encoding/escaping in a href for umlaut|
|33084|New|Enh|2005-01-13|Optional certificate validity period check on SSLV|
|33089|New|Nor|2005-01-13|mod_include: Options +Includes (or IncludesNoExec)|
|33207|New|Nor|2005-01-23|Results of my suexec.c code audit                 |
|33215|New|Nor|2005-01-24|Cygwin build/install.sh fix (OSTYPE => ext=.exe)  |
|33512|Inf|Maj|2005-02-11|mod_mem_cache and possibly mod_deflate            |
|33627|New|Nor|2005-02-18|Bite-sized changes making progress towards compila|
|33685|New|Maj|2005-02-22|Unable to install in the path containing non engli|
|34270|Inf|Nor|2005-04-01|Large POSTs over SSL from Internet Explorer do not|
|34375|New|Enh|2005-04-08|enhancements for mod_include                      |
|34377|New|Enh|2005-04-08|Allow the overriding of 401 Unauthorized returns f|
|34405|New|Enh|2005-04-11|adds DOCUMENT_NAME_WITHOUT_SUFFIX to mod_include  |
|34508|New|Nor|2005-04-19|Randomly slow graceful restart, not accepting new |
|34519|New|Enh|2005-04-19|Directory index should emit valid XHTML           |
|35049|New|Nor|2005-05-24|let AddDefaultCharset apply to text/css and applic|
|35077|New|Nor|2005-05-26|mod_dav passes incorrect paths with LocationMatch |
|35083|Inf|Enh|2005-05-26|Certificate validation problems trapping          |
|35098|Ver|Maj|2005-05-27|Install fails using --prefix                      |
|35154|New|Nor|2005-06-01|Support for NID_serialNumber, etc. in SSLUserName |
|35245|New|Nor|2005-06-06|cache ignores max-age cache-directive in requests |
|35250|New|Enh|2005-06-07|[PatchAvailable] add logging to mod_proxy_connect |
|35280|New|Nor|2005-06-09|FTP proxy breaks RFC 2428 when trying to fall back|
|35556|Inf|Nor|2005-06-30|CRL files not re-read by HUP                      |
|35652|Opn|Min|2005-07-07|Improve error message: "pcfg_openfile: unable to c|
|35702|New|Nor|2005-07-12|Using with https URL, ab freezes or gets SIGSEGV o|
|35781|New|Nor|2005-07-18|ap_sub_req_method_uri() bypasses Limit security co|
|35981|Inf|Maj|2005-08-02|mod_dav overrides dav_fs response on PUT failure  |
|36286|New|Enh|2005-08-20|configtest doesn't check SSL certificates         |
|36492|New|Nor|2005-09-04|split-logfile script dies when splitting log of ma|
|36495|Inf|Nor|2005-09-05|mod_proxy_ajp: ajp_check_msg_header() got bad sign|
|36564|New|Enh|2005-09-08|make mod_ldap really universal                    |
|36636|New|Maj|2005-09-13|database write lock taken for PROPFIND operations |
|36676|New|Nor|2005-09-15|time() bug in httpd/os/win32/util_win32.c:wait_for|
|36710|Opn|Blk|2005-09-19|CGI output not captured                           |
|36724|New|Nor|2005-09-20|Don't install Apache Monitor by default           |
|37110|New|Nor|2005-10-17|Build fails when source tree is read-only         |
|37196|Inf|Min|2005-10-21|Wrong "Parent directory" link                     |
|37201|New|Enh|2005-10-21|Add <IfInterface IP> syntax to apache configuratio|
|37290|Opn|Min|2005-10-28|DirectoryIndex don't work in scriptaliased directo|
|37307|New|Enh|2005-10-31|Can't suppress error messages                     |
|37355|New|Enh|2005-11-04|Allow to specify Proxy-Authorization in ProxyRemot|
|37360|New|Maj|2005-11-04|Install fails on Windows XP x64 when program files|
|37402|New|Nor|2005-11-08|mod_proxy has stopped allowing POST sub-requests  |
|37514|Inf|Nor|2005-11-15|mod_proxy buffers chunked data.                   |
|37564|New|Enh|2005-11-19|Suggestion: mod_suexec SuexecUserGroup directive i|
|37587|Inf|Min|2005-11-22|mod_status Total Traffic value goes up then down? |
|37770|Opn|Blk|2005-12-03|proxy: error reading status line from remote serve|
|37823|Inf|Nor|2005-12-07|The openssl library linked is different between ht|
|37920|New|Maj|2005-12-15|mod_proxy does not flush data on POST requests fro|
|38116|New|Enh|2006-01-04|Chroot-Patch for SuExec                           |
|38164|New|Nor|2006-01-06|wrong status code for failed COPY/MOVE            |
|38182|New|Nor|2006-01-08|COPY ignores authority in Destination header      |
|38218|New|Enh|2006-01-10|Multiline Comments for *.conf files               |
|38240|Inf|Nor|2006-01-12|apache restart segfault with mutliple Include dire|
|38325|Opn|Nor|2006-01-20|impossible to determine AUTH_TYPE of interpreted r|
|38355|Unc|Enh|2006-01-23|DSO support for mod_rewrite                       |
|38369|New|Enh|2006-01-24|mod_proxy keeps alive connections that should be b|
|38408|New|Nor|2006-01-27|SSI environment vars not set in spawned processes |
|38419|New|Nor|2006-01-27|Problems with large WebDAV properties             |
|38478|New|Maj|2006-02-01|A client starting a SSL renegotiation can crash th|
|38515|New|Enh|2006-02-05|Dynamic LDAP Group Support                        |
|38550|New|Enh|2006-02-07|Setting headers based on proxied data             |
|38571|New|Enh|2006-02-08|CustomLog directive checked by apachectl configtes|
|38756|Inf|Nor|2006-02-22|errors with running make                          |
|38786|New|Nor|2006-02-26|"IndexOption VersionSort" has problems with traili|
|38827|New|Reg|2006-03-02|mod_disk_cache trying to rename locked tempfile on|
|38864|Inf|Enh|2006-03-06|ProxyPassReverse fails in <Location>              |
|38903|New|Maj|2006-03-09|r->allowed does not affect Allow response header  |
|38923|New|Min|2006-03-10|mod_speling incorrectly escapes linked URLs       |
|38928|New|Min|2006-03-11|propose removing "VARIANTS" feature               |
|38995|New|Nor|2006-03-16|httpd tries to communicate with the CGI daemon eve|
|39111|New|Nor|2006-03-27|Potential bug brought by mmapfile (mod_file_cache)|
|39128|Inf|Maj|2006-03-28|Apache 2.2 will not compile mod_ssl library's corr|
|39185|Inf|Nor|2006-04-03|Approximately in 1-2 weeks of work the server hang|
|39216|New|Maj|2006-04-05|mod_disk_cache trying to rename locked file, decre|
|39238|New|Nor|2006-04-07|mod_auth_dbm requires mod_auth or "no groups file?|
|39275|Opn|Nor|2006-04-11|slow child_init causes MaxClients warning         |
|39287|New|Nor|2006-04-12|Incorrect If-Modified-Since validation (due to syn|
|39299|New|Nor|2006-04-13|Internal Server Error (500) on COPY               |
|39329|Inf|Nor|2006-04-17|mod_dbd reconnection and prepared statements      |
|39370|New|Nor|2006-04-20|SSL session will be removed if the client is sendi|
|39380|Inf|Nor|2006-04-21|mod_disk_cache eats memory, has no LFS support, et|
|39418|New|Nor|2006-04-26|CacheMaxExpire directive not enforced             |
|39448|New|Min|2006-04-29|old-style <directory proxy:*> doesn't give any war|
|39498|New|Nor|2006-05-06|accept_filter in apr assumes if found in sys/socke|
|39517|New|Nor|2006-05-08|Corrupt chunked transfer-encoding with Content Neg|
|39658|Opn|Nor|2006-05-25|mod_proxy_ajp SSL Key Size Bug                    |
|39673|New|Nor|2006-05-29|mod_proxy opens connections that disturb NTLM     |
|39692|New|Nor|2006-05-31|mod_proxy_balancer doesn't retry a failed request |
|39723|Inf|Enh|2006-06-05|Forward proxy does not work in tranparent mode    |
|39727|Ass|Nor|2006-06-05|Incorrect ETag on gzip:ed content                 |
|39730|New|Nor|2006-06-06|LanguagePriority and DefaultLanguage are Case Sens|
|39737|New|Nor|2006-06-06|LogFormat "%{tid}P" reports wrong thread id on Win|
|39748|New|Enh|2006-06-07|Header and POST support for mod_include           |
|39753|New|Nor|2006-06-07|incorrect source for LOCALE Decimal Symbol in Win2|
|39785|Inf|Nor|2006-06-12|Status code 408 (Request Timeout) is not logged   |
|39807|Opn|Enh|2006-06-13|large files / filesystem corruption can cause apac|
|39902|New|Nor|2006-06-27|HeaderName directive breaks mod_filter somehow    |
|39904|New|Nor|2006-06-27|graceful restart error and cpu load               |
|39913|Ass|Blk|2006-06-27|detection of static OpenSSL libraries requiring li|
|39916|New|Nor|2006-06-28|Core Filters & non-blocking Sendfile              |
|39923|New|Nor|2006-06-28|AddDescription doesn't work in server config with |
|39928|New|Nor|2006-06-28|port no detected when file name not in URL        |
|39935|New|Nor|2006-06-29|AddDescription does not do literal comparisons on |
|39973|Ass|Enh|2006-07-06|apache software folder should be movable          |
|40035|New|Cri|2006-07-13|Windows Server 2003 "("R2")" 64-Bit Edition no cgi|
|40060|New|Nor|2006-07-17|AuthGroupFile should accept /etc/group syntax     |
|40075|New|Enh|2006-07-19|unable to use ldap groups that contain DNs and use|
|40102|Opn|Nor|2006-07-24|SCRIPT_NAME set incorrectly with mod_rewrite      |
|40146|New|Nor|2006-07-31|mod_ssl info in server_info is blank              |
|40174|New|Min|2006-08-03|Unable to get IndexOptionis ScanHTMLTitles to work|
|40180|Inf|Maj|2006-08-03|Mod_dav and remove folder doesn't work with Micros|
|40190|New|Nor|2006-08-05|translate file                                    |
|40196|New|Nor|2006-08-06|EILSEQ handling, NoImplicitAdd should work, and so|
|40217|Opn|Nor|2006-08-08|mod_dav PROPFIND ignores access restrictions on it|
|40266|Inf|Blk|2006-08-16|berkeley db support in httpd is screwed           |
|40312|New|Nor|2006-08-24|ssl_engine_init.c, ssl_init_ctx_verify contains a |
|40373|New|Nor|2006-08-31|mod_dir adds trailing slash after internal redirec|
|40408|New|Blk|2006-09-04|Apache 2.2.3 is not starting                      |
|40416|New|Maj|2006-09-05|mod_proxy_ftp cannot connect under http load in fo|
|40441|New|Enh|2006-09-08|intelligently handling dynamic subdomains         |
|40453|New|Nor|2006-09-09|lexicographic compare in RewriteCond isn't lexicog|
|40463|New|Nor|2006-09-11|piped logging causes some weird kill()ing         |
|40513|Opn|Maj|2006-09-14|Seeding PRNG with 0 bytes of entropy              |
|40514|New|Nor|2006-09-14|would like GracefulShutdownTimeout to work for gra|
|40540|Inf|Nor|2006-09-19|Bad interaction between MultiViews and SetOutputFi|
|40541|New|Nor|2006-09-19|Action rewrites URI used by Location?             |
|40571|New|Nor|2006-09-21|mod_proxy_ajp don't works with mod_usertrack      |
|40586|New|Enh|2006-09-22|Add option to supress default '-' output          |
|40746|New|Enh|2006-10-12|Feature request: ProxyAllow directive             |
|40749|New|Min|2006-10-12|magic file with string and "%n" causes Apache chil|
|40781|New|Nor|2006-10-17|PATH_TRANSLATED: 'redirect:/~jablko/gallery2/main.|
|40808|New|Enh|2006-10-23|ProxyRemote with optional proxy authentication    |
|40859|New|Enh|2006-11-01|[PATCH] Support -F force option to 'ab' support to|
|40917|New|Nor|2006-11-07|configure does not detect OpenSSL shared lib on HP|
|40953|New|Min|2006-11-12|Should not send any data in 1xx/204/304 reply from|
|40984|Inf|Enh|2006-11-16|AddIcon, AddIconByType for OpenDocument format    |
|40987|Opn|Enh|2006-11-16|ProxyVia Block doesn't remove Via: header for reve|
|41000|New|Nor|2006-11-19|mod_authn_dbd have an error, in function 'authn_db|
|41025|New|Nor|2006-11-23|ROBOTS META-Tag directive needed in mod_autoindex |
|41088|New|Nor|2006-11-30|installation backcolor is wrong (white)           |
|41111|New|Enh|2006-12-05|New option for filters: run only if there are spar|
|41114|New|Blk|2006-12-06|ACL HTTP method is rejected by mod_proxy_ajp      |
|41130|New|Nor|2006-12-07|mod_mime and mod_negotiation type-map both clobber|
|41143|Opn|Nor|2006-12-10|Incorrect ap_getline assumption in mod_proxy_http |
|41195|New|Nor|2006-12-17|properly set the parent pid on shutdown           |
|41196|New|Nor|2006-12-17|worker mpm usage of apr's memory pools is not thre|
|41200|Inf|Maj|2006-12-18|SSI include, prevent client from receiving full ou|
|41240|Inf|Enh|2006-12-25|BRF files support                                 |
|41262|Inf|Nor|2006-12-29|Embedded pcre causes runtime segfault             |
|41362|Inf|Maj|2007-01-14|mod_disk_cache and mod_include conflict generating|
|41375|Inf|Min|2007-01-15|Using same SSL Certificate with different ServerNa|
|41391|New|Min|2007-01-17|too long period setting makes max-age overflow    |
|41412|New|Enh|2007-01-19|RewriteRule Skip should take negative arguments   |
|41435|New|Nor|2007-01-22|Authentication fails with 500 Server Error        |
|41450|Inf|Cri|2007-01-24|Empty page (200 OK) while max-age is empty        |
|41485|New|Nor|2007-01-28|LDAP client certificates not usable in 2.2.x/trunk|
|41529|New|Enh|2007-02-02|Accept BOM in .htaccess                           |
|41556|New|Enh|2007-02-07|Feature Request: format string for masking ip addr|
|41621|New|Maj|2007-02-15|Apache 2.2.4 backend problem with Apache 2.0.59 Re|
|41646|New|Nor|2007-02-16|wrong headers are sent for HEAD requests when Prox|
|41676|Opn|Enh|2007-02-22|Refactor mod_proxy_ftp                            |
|41685|New|Enh|2007-02-22|Implement optional HTTP Authentication in a standa|
|41712|Inf|Nor|2007-02-26|threads locked at logging state                   |
|41729|New|Maj|2007-02-28|error message: ap_get_scoreboard_lb(130) failed in|
|41744|Inf|Maj|2007-03-01|SSI resolves includes but removes original HTML   |
|41763|Opn|Nor|2007-03-05|mod_disk_cache ignores CacheDirLevels and CacheDir|
|41764|New|Nor|2007-03-05|error state and conf                              |
|41771|Inf|Nor|2007-03-06|Erro with mod_proxy_ajp or mod_prox_balancer      |
|41867|New|Nor|2007-03-16|<DirectoryMatch> Matches Files                    |
|41925|New|Nor|2007-03-21|trivial patch to add automatic crypting to 'dbmman|
|41929|New|Nor|2007-03-22|ISAPI ssl variables                               |
|41953|New|Nor|2007-03-26|pidfile remains when 2nd pass of post-config retur|
|41962|New|Min|2007-03-27|Need mod_auth_ldap to authenticate with Active Dir|
|42027|Inf|Nor|2007-04-02|FileETag directive appears to be ignored          |
|42054|New|Nor|2007-04-04|service name and parameter issues                 |
|42079|New|Nor|2007-04-10|SSLRequire: Additional access in sub-directoies   |
|42082|New|Nor|2007-04-10|filter_init is called multiple times after an INCL|
|42182|Inf|Nor|2007-04-22|Mime types for cached proxied content             |
|42216|New|Enh|2007-04-24|RFE -- external overload procedure                |
|42262|Inf|Nor|2007-04-26|mod_dav /  worker fails to allocate memory and seg|
|42287|Inf|Nor|2007-04-28|chunked encoded response to POST request to cgi sc|
|42368|Inf|Nor|2007-05-09|httpd is crashing if conf/extra/httpd-manual.conf |
|42373|Inf|Maj|2007-05-09|REPORT request fails over mod_proxy               |
|42404|New|Enh|2007-05-13|Filename/info for disk-cached proxied remote URLs |
|42425|Inf|Nor|2007-05-15|Additional freshness checks in mod_cache.c cause m|
|42471|Inf|Nor|2007-05-21|clients with IE7 take 3megs per page load. httpd.e|
|42492|Inf|Nor|2007-05-22|mod_proxy_ajp with SSL front end: data corruption |
|42499|Inf|Nor|2007-05-23|Backslash produces a 404 error instead of going to|
|42548|New|Nor|2007-05-30|INCLUDE negotiating language aborts with APR_POOL_|
|42561|New|Enh|2007-05-31|[PATCH] AuthLDAPRemoteUserAttribute only applies i|
|42633|New|Min|2007-06-11|mod_info gives wrong information about actual conf|
|42665|New|Nor|2007-06-14|spurious attempt to open ".../file.html/.htaccess"|
|42666|New|Nor|2007-06-14|code & docs corrections for FollowSymLinks and Sym|
|42667|New|Nor|2007-06-14|mod_proxy_balancer not reporting when workers are |
|42668|Inf|Nor|2007-06-14|balancer_manager shows Ok status for the workers t|
|42687|New|Nor|2007-06-18|Fully delegate certificate & key semantics to the |
|42688|New|Enh|2007-06-18|engine managed keys: per process openssl context  |
|42690|New|Nor|2007-06-18|realm is not set for each configured directory whe|
|42695|Inf|Cri|2007-06-18|mod_proxy balancer problem                        |
|42699|New|Enh|2007-06-20|share mod_logio data with other modules           |
|42711|New|Enh|2007-06-20|format string for whole log entries not just id   |
|42732|Opn|Maj|2007-06-25|Authentication against database issue.            |
|42763|New|Nor|2007-06-28|graceful-stop/restart loops go loop too far       |
|42923|Inf|Maj|2007-07-17|vhost certificate NOT overriding cert from the _de|
|42972|Inf|Nor|2007-07-25|Certificate list in mod_ssl module context are not|
|42977|New|Nor|2007-07-25|DAV locking is busted when apr-util is built with |
|42987|New|Nor|2007-07-27|Weak Etags in Apache are useless and violate RFC 2|
|43012|New|Nor|2007-08-02|AIX instdso.sh libphp5.so                         |
|43027|New|Enh|2007-08-03|Header in default language                        |
|43033|New|Nor|2007-08-04|apxs does not correctly detect module name (w/o -n|
|43177|New|Nor|2007-08-21|child pid xxxxx exit signal Segmentation fault    |
|43218|New|Nor|2007-08-27|Wrong cert used for vhost if ServerName is same   |
|43220|Opn|Cri|2007-08-27|mod_proxy truncating ajp output                   |
|43249|Inf|Maj|2007-08-30|ldap_simple_bind_s failed when using SUN LDAP Libs|
|43275|New|Enh|2007-08-31|Remove avoidable network transactions in mod_proxy|
|43289|New|Nor|2007-09-02|XBitHack full g+x returns zero sized response on I|
|43308|New|Nor|2007-09-04|Persistent backend connections not supported for R|
|43352|New|Nor|2007-09-11|Apache2: out of memory during heavy webdav files c|
|43441|New|Nor|2007-09-20|Incorrect HTTP status for pre-commit-blocked autov|
|43471|New|Min|2007-09-25|no need to create a global pool on open_scoreboard|
|43481|New|Cri|2007-09-26|AuthLDAPURL must contain a final path of branch?(l|
|43494|New|Nor|2007-09-26|mod_cgid does not kill never ending scripts       |
|43502|New|Enh|2007-09-28|httpd fails to start if log directory does not exi|
|43513|New|Nor|2007-09-29|Persistent backend connections for ProxyPassMatch |
|43532|Inf|Cri|2007-10-02|Error while compiling Apache 2.2.3 on HPUX        |
|43533|Opn|Nor|2007-10-02|Frequent crashes in mod_include's bndm()          |
|43561|New|Nor|2007-10-05|apxs -q anomaly                                   |
|43577|Inf|Blk|2007-10-09|mod_authnz_ldap not working under WLDAP32 (novell/|
|43607|New|Nor|2007-10-11|mod_proxy sends data on closed connections without|
|43649|Opn|Trv|2007-10-18|mod_autoindex is generating invalid XHTML markup  |
|43652|New|Enh|2007-10-18|Suggest small change for big fix with SuExec & Vir|
|43666|New|Nor|2007-10-20|CGI works, but client denied error messages in err|
|43679|New|Enh|2007-10-23|Contributed tests for checking that subrequests ta|
|43723|Inf|Cri|2007-10-29|Apache 2.2.6 segfault when using mod_dbd          |
|43724|New|Cri|2007-10-29|Apache 2.2.6 segfault on url wich not in cache    |
|43755|New|Enh|2007-10-31|Add a SSLOptions to don't fill SSL_CLIENT_VERIFY  |
|43762|New|Enh|2007-10-31|Misleading tips in an error message about internal|
|43777|New|Nor|2007-11-01|Wrong encoding of <href> element in response      |
|43778|New|Nor|2007-11-01|Wrong responses if httpd has not access to some el|
|43785|New|Enh|2007-11-02|Tracking the per-hit impact of mod_include        |
|43792|New|Enh|2007-11-04|Feature proposal - bind phase                     |
|43818|New|Nor|2007-11-08|PROPFIND on -w- collections returns 207 MULTI-STAT|
|43838|New|Enh|2007-11-11|If-Modified-Since request and htcacheclean conflic|
|43895|New|Nor|2007-11-18|mod_mbox improvements                             |
|43897|Inf|Cri|2007-11-18|Huge memory consumption httpd 2.2.6, mod_proxy - m|
|43931|New|Enh|2007-11-21|OpenSSL autoconfig support for mod_ssl            |
|43943|New|Nor|2007-11-22|SHMCB crash due to misalignment and GCC 4 optimiza|
|43958|Inf|Maj|2007-11-26|mod_proxy_balancer not balancing correct in combin|
|43997|Opn|Min|2007-11-29|Only issue "Init: SSL server IP/Port conflict" if |
|44025|Inf|Nor|2007-12-05|Apache 2.2.6 fails to configure on OpenBSD 4.1    |
|44027|Ass|Enh|2007-12-05|Internationalized Domain Name (IDN) support       |
|44031|Opn|Maj|2007-12-06|RemoveHandler inside subdir location              |
|44034|Ass|Enh|2007-12-06|mpm_winnt doesn't call monitor hook               |
|44105|New|Nor|2007-12-19|Core dumps when using Proxy Keepalive             |
|44155|New|Enh|2007-12-31|smarter retry for LDAP_UNAVAILABLE, LDAP_BUSY, etc|
|44181|Opn|Enh|2008-01-07|add UnAlias                                       |
|44188|Inf|Cri|2008-01-08|Empty response for certain requests (mod_proxy as |
|44218|New|Min|2008-01-13|mod_autoindex shows the default icon for files wit|
|44221|Opn|Cri|2008-01-14|CheckCaseOnly On does not stop Multiple Choices ba|
|44250|New|Nor|2008-01-16|OSX 10.5: __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_|
|44279|New|Enh|2008-01-22|Add "iterate" flag to apply rule in a loop while p|
|44302|New|Nor|2008-01-27|AuthLDAPURL does not accept ldapi:// urls         |
|44305|New|Nor|2008-01-28|Inconsistent configuration for suexec path        |
|44316|New|Nor|2008-01-28|httpd 2.0 does not follow ScriptAliases when invok|
|44322|New|Enh|2008-01-29|mod_proxy ProxyPassReverseCookieDomain with no dom|
|44351|New|Nor|2008-02-04|File descriptor leak when using prg RewriteMap    |
|44363|Inf|Maj|2008-02-05|Slow file transfers                               |
|44384|Ass|Nor|2008-02-09|mod_ssl on MacOS X 10.5.1 does not work because of|
|44453|New|Nor|2008-02-19|list_hooks.pl doesn't parse declarations that span|
|44476|New|Maj|2008-02-23|Apache service fails to start due to missing depen|
|44503|Inf|Blk|2008-02-27|Errors during SSL handshake                       |
|44518|New|Enh|2008-03-02|Don't set expires header on HTTP redirect.        |
|44578|New|Enh|2008-03-11|mod_authn_dbd option to let database validate pass|
|44601|New|Trv|2008-03-13|Add a lowercase value to Vary header for consisten|
|44602|New|Enh|2008-03-13|Options for modfying Content-Location (relative OR|
|44622|Inf|Nor|2008-03-17|POST fails to SSL vhost with proxy to HTTP backend|
|44631|New|Nor|2008-03-18|with-included-apr fails to work when using a separ|
|44638|New|Nor|2008-03-19|sed error in httpd.spec.in                        |
|44656|New|Nor|2008-03-22|Tries to retrive error document 404 instead of 406|
|44657|New|Enh|2008-03-22|prefer-type, -encoding, and -charset cookie? (as p|
|44670|New|Min|2008-03-25|Apache httpd 2.2.8 : Cannot ./configure when curre|
|44696|Inf|Nor|2008-03-27|mod_cache sometimes serves old content despite hav|
|44730|New|Nor|2008-04-01|duplicate query string in remote server url when u|
|44752|New|Nor|2008-04-03|Suexec does not correctly check that scripts are i|
|44757|New|Enh|2008-04-04|adding stderr buckets to mod_cgi                  |
|44758|New|Enh|2008-04-04|LimitRequestBody undocumented behaviour with proxi|
|44779|New|Enh|2008-04-08|Using commas and semicolons for content negotiatio|
|44855|New|Nor|2008-04-22|irregular balancing with sticky-session after re-e|
|44865|Ass|Nor|2008-04-23|mod_dav's lock database becomes consistently corru|
|44870|Inf|Nor|2008-04-24|process spinning on 100% cpu                      |
|44923|Inf|Min|2008-05-02|consequences of multiple LDAPTrustedGlobalCert    |
|44924|New|Enh|2008-05-02|allow 'CACERTDIR' in mod_ldap                     |
|44940|New|Maj|2008-05-06|Httpd randomly breaks when verifying client certif|
|44981|New|Enh|2008-05-12|Digital Certificates (CN Based) for Authorization |
|45022|New|Nor|2008-05-16|Processing of escaped glob patterns in "Include" d|
|45023|Opn|Reg|2008-05-16|DEFLATE preventing 304 NOT MODIFIED response      |
|45049|Opn|Nor|2008-05-20|mod_mem_cache caches partial content when client c|
|45054|New|Nor|2008-05-21|SSLVerifyClient optional_no_ca is broken          |
|45058|New|Nor|2008-05-21|Mod_SSL does not set AUTH_TYPE with client certifi|
|45078|New|Nor|2008-05-27|mod_proxy stalls when uploading files             |
|45103|Ass|Min|2008-05-30|apachectl should do config test before reload/rest|
|45111|New|Enh|2008-06-01|make mod_usertrack use mod_unique_id if available |
|45116|New|Nor|2008-06-02|fail to check return value of apr_file_dup2() in /|
|45148|New|Enh|2008-06-06|The actual host of the request will be more helpfu|
|45184|New|Enh|2008-06-11|Regular Expression in directive ServerAlias       |
|45187|New|Maj|2008-06-11|Long File name requests gives FORBIDDEN response  |
|45225|New|Nor|2008-06-17|XBitHack breaks DirectoryIndex + MultiViews conten|
|45253|New|Nor|2008-06-23|Unable to build httpd 2.2.9 on Solaris/SPARC      |
|45257|New|Enh|2008-06-23|add (en)force option for UseCanonicalName         |
|45259|New|Enh|2008-06-23|Add /home/[a-z]/* scheme to UserDir conf          |
|45275|New|Maj|2008-06-25|Locked files during expired page renew in disk cac|
|45281|New|Enh|2008-06-25|SITE CHMOD/SEARCH                                 |
|45287|Inf|Min|2008-06-26|build failure because of difference between BSD an|
|45297|New|Min|2008-06-27|mod_dir does not manage correctly the user (r->use|
|45302|New|Enh|2008-06-28|ServerRoot directive                              |
|45355|New|Nor|2008-07-07|ab text and html output jumbo unification         |
|45356|New|Nor|2008-07-07|ab: optionally reduce resource usage (qsort and me|
|45371|New|Nor|2008-07-10|MSI installer requires uninstall of previous versi|
|45374|New|Blk|2008-07-10|Shared memory error on starting httpd with mod_lda|
|45379|Inf|Nor|2008-07-11|[Bug] svn merge, apache and trailing slashes      |
|45385|Inf|Nor|2008-07-11|unable to compile/make 2.2.9 with --enable-ldap   |
|45393|New|Nor|2008-07-14|Apache returns 500 Error when no LDAP credentials |
|45402|New|Nor|2008-07-15|mod_autoindex incorrectly fails to list files     |
|45405|New|Enh|2008-07-16|Allow binding port to be set for individual worker|
|45449|New|Nor|2008-07-21|[PATCH] Add support to WebDav to MOVE/COPY to remo|
|45456|New|Enh|2008-07-22|mod_dbd don't allow more then one database pool   |
|45487|New|Trv|2008-07-27|broken log messages on startup in win32 version   |
|45497|New|Nor|2008-07-29|Scoreboard slot leaked using MaxRequestsPerChild a|
|45512|Ass|Maj|2008-07-31|Bad Performance of mod_proxy with SSL on Solaris 1|
|45524|New|Enh|2008-08-01|Specifying multiple vhost aliases                 |
|45525|New|Enh|2008-08-01|Switch mod_autoindex to Tango icons               |
|45579|New|Nor|2008-08-06|unknown URI scheme in request-URI ignored         |
|45674|New|Enh|2008-08-22|Allow to change error code returned by "Require ld|
|45726|New|Enh|2008-09-02|Build in a maintenance functionallity             |
|45736|New|Nor|2008-09-03|mod_dav needs a directory for its locks and one sh|
|45754|New|Enh|2008-09-06|autoconf macros                                   |
|45763|New|Nor|2008-09-08|No openssl.cnf defined by default causes OpenSSL c|
|45773|New|Nor|2008-09-09|pcre build generates sources to srcdir rather than|
|45788|New|Nor|2008-09-11|mod_log_forensic output shouldn't be buffered when|
|45801|Opn|Nor|2008-09-13|SSLRequireSSL with strictrequire and satisfy any d|
|45838|New|Nor|2008-09-18|mod_authz_owner & directories                     |
|45868|New|Nor|2008-09-23|mod_mem_cache update of headers in cache object is|
|45900|New|Nor|2008-09-26|"make install" fails from read-only filesystem    |
|45905|New|Enh|2008-09-26|ErrorDocument and default URL                     |
|45922|New|Enh|2008-09-30|Expand the conditions under which "SSLVerifyClient|
|45923|New|Nor|2008-09-30|htpasswd tries to open(file, O_RDONLY | O_APPEND) |
|45926|Inf|Nor|2008-10-01|Unable to start apache 2.2.9                      |
|45986|New|Nor|2008-10-10|[info]...Invalid argument: core_output_filter: wri|
|46024|Opn|Nor|2008-10-16|--enable-static is not available in apache's confi|
|46037|Inf|Nor|2008-10-18|Configuration of trusted OCSP responder certificat|
|46040|New|Enh|2008-10-20|Check for existing version of Apache while install|
|46054|New|Nor|2008-10-21|Running httpd returns the error "bad user name nob|
|46070|New|Nor|2008-10-22|MSI installer does not validate custom installatio|
|46071|New|Enh|2008-10-22|Allowing space in between comma and last option in|
|46074|New|Enh|2008-10-23|Need of friendly and easy to use configuration gra|
|46139|New|Nor|2008-11-02|Apache Restart option is not working              |
|46140|New|Enh|2008-11-03|Change error state in balancer manager            |
|46188|Inf|Nor|2008-11-11|Core dumps in apache 2.0.59                       |
|46195|Opn|Nor|2008-11-12|ProxyPass fails with literal IPv6 address         |
|46215|New|Nor|2008-11-14|Race condition in bybusyness algorithm            |
|46231|New|Maj|2008-11-18|Connection Pooling with ajp depends on syntax ?   |
|46241|New|Enh|2008-11-19|mod_expires - ExpiresByPattern or ExpiresIf       |
|46267|New|Nor|2008-11-22|No shared modules build if use --with-apr and --wi|
|46270|New|Enh|2008-11-23|Add FIPS 140-2 mode for mod_ssl for FIPS 1.2 modul|
|46282|New|Nor|2008-11-24|apache2.2 reverse proxy causing full memory and sw|
|46316|New|Maj|2008-12-01|Proxied SSI ProxyTimeout render failure           |
|46317|Inf|Nor|2008-12-01|mod_authnz_ldap.c(373)  seg fault                 |
|46412|New|Nor|2008-12-17|make_child return value not checked               |
|46417|New|Cri|2008-12-19|[notice] Parent: child process exited with status |
|46428|Opn|Nor|2008-12-21|Spaces in URI doesn't encode in proxy-requests    |
|46442|New|Nor|2008-12-29|Semicolon in allow/deny all rules cause reverse lo|
|46449|New|Maj|2008-12-30|Output out of order from SSI include virtual      |
|46454|New|Min|2008-12-30|escaping wildcards in AddIcon filename matching   |
|46475|New|Nor|2009-01-04|build warnings.                                   |
|46499|New|Maj|2009-01-09|httpd accept() return EAGAIN error                |
|46521|New|Nor|2009-01-13|mod_dav doesn't show symlinks                     |
|46529|Ass|Nor|2009-01-14|Child httpd processes crash with Segmentation faul|
|46534|New|Nor|2009-01-14|mod_proxy_ajp scheme and port do not follow UseCan|
|46578|New|Nor|2009-01-21|Flawed header                                     |
|46582|Ver|Min|2009-01-22|RewriteMap internal functions are not well documen|
|46604|New|Nor|2009-01-26|Error thrown when trying to rpmbuild -tb httpd sou|
|46629|New|Maj|2009-01-29|Apache hanging on system calls for php and perl   |
|46634|Ass|Nor|2009-01-30|Requests sometimes take too long, wrong time taken|
|46644|New|Enh|2009-01-31|Clean way to pass custom environment variables to |
|46646|Ass|Nor|2009-02-01|check group membership is sometimes case sensitive|
|46650|Opn|Nor|2009-02-02|CustomLog enviroment condition SCRIPT_FILENAME    |
|46656|New|Enh|2009-02-03|ProxyErrorOverride inside location                |
|46669|New|Enh|2009-02-06|rotatelogs doesn't autocreate directories         |
|46671|Opn|Cri|2009-02-07|Apache periodicaly crashes .                      |
|46678|New|Nor|2009-02-09|Fixed Content-Length using mod_ext_filter with mod|
|46682|New|Nor|2009-02-09|mod_proxy EAI_AGAIN DNS failure                   |
|46685|Opn|Nor|2009-02-09|401 sent without WWW-Authenticate header when requ|
|46709|Opn|Reg|2009-02-12|Expect: 100-continue to an HTTP/1.0 server change |
|46724|Inf|Cri|2009-02-17|WinXP SP3 - Apache crashes on startup in libapr-1.|
|46743|New|Nor|2009-02-19|Inconsistent behavior of "RewriteOptions inherit" |
|46745|New|Maj|2009-02-20|ab.c error :  undefined reference to `BIO_set_call|
|46751|New|Nor|2009-02-21|Can passenv variables who's name contain '(' or ')|
|46762|New|Nor|2009-02-24|Error, SSL/TLS libraries were missing or unusable |
|46765|Opn|Nor|2009-02-25|doubled HTTP header leads to error (Redmine)      |
|46785|Inf|Nor|2009-03-02|Child process increases to 100% (CPU)             |
|46788|New|Nor|2009-03-02|Set resource limits to avoid denial of service att|
|46810|New|Nor|2009-03-05|apxs / apu-1-config outputting erroneous include p|
|46824|New|Nor|2009-03-09|RemoveOutputFilter will not work for Filters added|
|46845|Inf|Cri|2009-03-12|Apache crashes in Windows when using subversion(pr|
|46847|New|Nor|2009-03-13|WebDAV methods with encoding other than "identity"|
|46873|New|Nor|2009-03-18|feature request: connection count on balancer-mana|
|46884|New|Min|2009-03-20|Call to apu_dso_load Fails In apr_ldap_stub.c On O|
|46946|Inf|Nor|2009-03-31|mod_mbox shows email addresses in plain text      |
|46963|New|Nor|2009-04-03|KeepAliveTimout prevents child process from exitin|
|46969|New|Nor|2009-04-05|CustomLog format %m always GET on errors with loca|
|46970|New|Nor|2009-04-05|CustomLog %X does not record aborted connections w|
|47011|New|Reg|2009-04-09|mod_proxy/mod_proxy_balancer hot-standby BalancerM|
|47055|New|Blk|2009-04-20|SSLVerifyClient + Directory doesn't use cache sess|
|47063|New|Nor|2009-04-21|mod_proxy doesn't call post_request handler when t|
|47134|New|Nor|2009-05-01|Last resolve handling when sending client certific|
|47138|New|Nor|2009-05-01|Reverse Proxy & Balancer generate error fault when|
|47152|New|Maj|2009-05-04|Apache is only serving the first character in the |
|47159|New|Nor|2009-05-06|2.2.x logresolve doesn't support ipv6             |
|47167|New|Nor|2009-05-07|Authenticated sessions being switched by reverse p|
|47170|New|Enh|2009-05-08|rotatelogs ring buffer option                     |
|47180|New|Nor|2009-05-11|DBM ssl_scache setting can cause extreme performan|
|47220|Opn|Enh|2009-05-19|Access to environment variables                   |
|47256|New|Enh|2009-05-23|Enable SSL on a per-port basis                    |
|47289|New|Nor|2009-05-30|Can't build with dynamic libraries on Mac OS 10.4 |
|47295|New|Nor|2009-06-01|AuthDBDUserPWQueryFmt/AuthDBDUserRealmQueryFmt in |
|47329|New|Nor|2009-06-07|SSLCADNRequest* & SSLCACertificate* silently do no|
|47340|New|Nor|2009-06-09|uldap_cache_comparedn() called without a lock     |
|47344|New|Enh|2009-06-10|[FEATURE REQUEST] RedirectCanonicalName           |
|47345|New|Enh|2009-06-10|rotatelogs timeout patch                          |
|47346|New|Maj|2009-06-10|mod_cache doesn't re-cache expired content when La|
|47387|Inf|Nor|2009-06-18|SSL_CLIENT_I_DN and SSL_CLIENT_S_DN use Email inst|
|47392|Opn|Nor|2009-06-18|<FilesMatch> is using the wrong directory         |
|47435|New|Nor|2009-06-26|mod_authz_host does reading of /etc/hosts on each |
|47438|Inf|Enh|2009-06-27|how to create a non-html "listing generated by the|
|47447|New|Enh|2009-06-29|Add possibility to use client IP as a value in Req|
|47484|New|Nor|2009-07-06|Spurious RewriteLock warning when using external m|
|47485|New|Enh|2009-07-06|HTML5 Websocket implementation                    |
|47514|New|Enh|2009-07-12|Personal data and restrictions based on subject di|
|47528|New|Maj|2009-07-14|Worker process won't restart more than once using |
|47542|New|Nor|2009-07-16|Piped logging processes killed before other proces|
|47562|Inf|Nor|2009-07-23|Apache/2.2.3 (Win32) mod_perl/2.0.3-rc1           |
|47578|New|Nor|2009-07-24|compile ERROR with ssl                            |
|47580|Opn|Nor|2009-07-25|mod_cache sends 200 response instead of 304       |
|47586|New|Nor|2009-07-27|httpd -k start doesn't start service when rotatelo|
|47591|New|Min|2009-07-27|show current HTTP_HOST in mod_status scoreboard   |
|47601|New|Enh|2009-07-29|Support X-Forwarded-For in forward proxy requests |
|47625|New|Nor|2009-08-02|2.2.12 win32 msi installer missing                |
|47634|New|Maj|2009-08-04|mod_ldap connection pool session keepalive not imp|
|47643|New|Enh|2009-08-04|added meta tags to xhtml output for ease of search|
|47650|Opn|Trv|2009-08-05|httxt2dbm calculates value size incorrectly       |
|47657|New|Nor|2009-08-06|Make WebDAV MOVE atomic when replacing files on sa|
|47659|New|Nor|2009-08-07|makefile.win needs check for DBM_LIST, dies on bui|
|47664|New|Nor|2009-08-07|ap_proxy_canonenc: does not recode all high-byte c|
|47665|Inf|Blk|2009-08-09|Apache service well launched but blank Screen     |
|47691|New|Enh|2009-08-12|libtool invocations should use --tag              |
|47693|Opn|Nor|2009-08-13|GET request has race condition w.r.t. replacement |
|47706|Inf|Nor|2009-08-19|(20014)Internal error: proxy: error reading status|
|47716|New|Min|2009-08-20|LimitRequestFieldSize and friends not merged well |
|47719|Opn|Enh|2009-08-20|Broken symbolic link (symlink) causes wrong ErrorD|
|47723|New|Nor|2009-08-22|suEXEC and low RLimitMem gives "crit: invalid uid"|
|47743|Inf|Nor|2009-08-26|mod_so segfaults at server startup in ap_find_load|
|47753|New|Nor|2009-08-27|output and error channels not explicitly passed fo|
|47778|Opn|Enh|2009-09-03|wrong exit value on graceful restart              |
|47780|New|Nor|2009-09-03|Critical errors should be marked by time and level|
|47807|Inf|Nor|2009-09-09|Proxy dialog error with Apache 2.2.13             |
|47808|New|Maj|2009-09-09|Child process core dumps when enabling CRL        |
|47814|Inf|Maj|2009-09-10|openssl_pkcs7_sign error                          |
|47838|New|Enh|2009-09-14|Ability to Dynamically Inject Current Time Into a |
|47874|New|Nor|2009-09-18|mod_fcgid crashes if added during restart         |
|47895|New|Maj|2009-09-24|Incorrect 413 error handling                      |
|47908|New|Min|2009-09-27|'invalid result code' in error_log                |
|47981|New|Nor|2009-10-12|allow language specific html-versions (index.html.|
|47982|New|Nor|2009-10-12|correctly interprete non-standard HTTP_ACCEPT_LANG|
|47988|New|Nor|2009-10-12|Segmentation fault                                |
|47989|New|Nor|2009-10-13|Junk string appended to compressed dynamic content|
|47994|New|Enh|2009-10-14|ScriptInterpreterSource apparently broken in Windo|
|48020|New|Nor|2009-10-17|KCP+ Opera support for mod_auth_digest            |
|48037|Inf|Nor|2009-10-21|mod_proxy_http does not handle asynchronous keepal|
|48045|New|Nor|2009-10-23|Apache 2 initgroups alert, Max OS X, abnormal exit|
|48057|New|Nor|2009-10-26|mod_fcgid creates 1 more process then allowed     |
|48094|New|Nor|2009-11-01|Avoid a race condition in close_worker_sockets()  |
|48107|New|Maj|2009-11-02|Mutual Authentication: Order in ca-bundle influenc|
|48115|New|Enh|2009-11-03|Duration to receive the request, generate response|
|48130|New|Maj|2009-11-04|DAV operations on large filesets consume all the O|
|48154|New|Nor|2009-11-06|Requests through mod_isapi are not parsed by HTTP_|
|48164|New|Enh|2009-11-09|add new parameters to rotatelogs                  |
|48219|New|Nor|2009-11-17|Retrying the worker for seems to omit POST variabl|
|48228|New|Nor|2009-11-18|Renegocation requires multiple client authenticati|
|48246|New|Enh|2009-11-19|Check permissions on file/directory specified for |
|48254|New|Trv|2009-11-20|Bogus "DocumentRoot does not exist" warning when s|
|48283|New|Nor|2009-11-25|Proxy errors since httpd 2.2.12 with Tomcat 6.0.20|
|48291|New|Maj|2009-11-26|mod_substitute loops                              |
|48295|Opn|Nor|2009-11-27|ProxyPassReverseCookiePath: Not changing path corr|
|48301|New|Enh|2009-11-30|Feature request: improved connection status report|
|48309|New|Maj|2009-11-30|libapreq2-2.12: "make test" fails at request.t and|
|48312|Opn|Nor|2009-11-30|ProxyPassReverseCookiePath: Not changing path corr|
|48316|Inf|Nor|2009-12-01|ap_run_insert_filter doesn't work in cache_url_han|
|48354|New|Enh|2009-12-08|void ap_custom_response is not supporting the bina|
|48360|New|Enh|2009-12-09|provide sample configuration file for inclusion in|
|48361|New|Enh|2009-12-09|Add global server option for specifying desired DS|
|48364|Opn|Nor|2009-12-10|PHP-generated pages are not cached in spite of per|
|48369|New|Enh|2009-12-10|add option to automatically restart if a script is|
|48431|New|Nor|2009-12-22|Error logging doesn't work when configured to use |
|48440|Inf|Cri|2009-12-23|Segmentation Fault                                |
|48449|Inf|Nor|2009-12-28|make distclean removes core.c and core_filters.c  |
|48465|Opn|Enh|2009-12-30|Support TCP to connect to backends                |
|48499|New|Nor|2010-01-06|mod_rewrite can't redirect to files with ? in them|
|48500|New|Nor|2010-01-06|mod_mbox mishandles right-click to open msg in new|
|48508|New|Nor|2010-01-07|BalancerMember doesn't accept nocanon directive   |
|48549|New|Enh|2010-01-14|Add Cache-Control s-maxage support                |
|48576|New|Nor|2010-01-19|MOVE or COPY in WebDAV fails with 404 when file ex|
|48585|New|Enh|2010-01-20|mod_cache no longer caches expired content        |
|48602|New|Enh|2010-01-23|use asynch ldap_compare so LDAPTimeout applies    |
|48623|New|Maj|2010-01-26|AuthLDAPURL syntax is not RFC-compliant, prevents |
|48639|New|Enh|2010-01-29|Add htcacheclean as a core monitored process      |
|48652|New|Maj|2010-02-01|"AuthType form" fails if a password contains  '&' |
|48659|New|Maj|2010-02-02|Problem with accents in filename and byte serving |
|48687|New|Nor|2010-02-05|mod_rewrite ignores trailing dot in request URI on|
|48705|New|Enh|2010-02-08|flag to allow newlines in the error log as opposed|
|48712|New|Enh|2010-02-09|Add UID and GID to status page                    |
|48719|New|Nor|2010-02-09|[BUG] mod_proxy_ajp return wrong error message whe|
|48721|New|Nor|2010-02-10|[Patch] Add ProxyAllow to mod_proxy               |
|48731|New|Maj|2010-02-11|Prefork not creating processes after 10 servers ar|
|48732|New|Nor|2010-02-12|[BUG] environment variable SCRIPT_NAME output erro|
|48769|New|Nor|2010-02-18|[PATCH] Processes in the busy list should not be k|
|48777|New|Maj|2010-02-19|proxy balancer not detecting correctly when host (|
|48780|New|Enh|2010-02-19|Enable mod_authnz_ldap to accept valid client cert|
|48792|New|Enh|2010-02-22|httpd util apachectl returns wrong status informat|
|48805|New|Nor|2010-02-23|Corrupted response for HTTPS + KEEPALIVE=ON       |
|48808|New|Enh|2010-02-24|mod_authz_owner support for POSIX access control l|
|48819|Inf|Nor|2010-02-25|After users login on the web page, the page does n|
|48842|Inf|Nor|2010-03-02|mod_log_config logs the full size of the file inst|
|48880|Opn|Nor|2010-03-09|error on make                                     |
|48888|New|Nor|2010-03-10|DOCTYPE definitions nearly 11 years out-of-date   |
|48920|New|Enh|2010-03-15|Breadcrumbs on mod_autoindex path                 |
|48921|Inf|Nor|2010-03-16|mod_mem_cache crash, version 2.2.15.0             |
|48937|New|Enh|2010-03-18|Feature proposal - support sasl_bind              |
|48949|Inf|Cri|2010-03-20|fcgid processes never get killed after graceful re|
|48958|New|Nor|2010-03-22|mod_ldap, ldap credential cache & graceful restart|
|48987|New|Trv|2010-03-25|typo in polish translation of HTTP_UNAUTHORIZED.ht|
|49037|New|Enh|2010-04-02|SSLVerifyClient require_no_ca                     |
|49043|New|Maj|2010-04-04|Using ssi include directive overwrites QUERY_STRIN|
|49058|New|Nor|2010-04-06|Prefork MPM tries to accept on closed listener soc|
|49067|New|Nor|2010-04-08|FTPOptions ShowUnAuthorizedFiles does not work    |
|49068|New|Nor|2010-04-08|UTF-8 URL Encode error                            |
|49087|New|Maj|2010-04-11|MSI installation reports "interrupted installation|
|49114|New|Maj|2010-04-13|NTFS junction directories missing from directory l|
|49123|New|Nor|2010-04-14|mod_proxy_ajp does not send the client's SSL chain|
|49131|New|Nor|2010-04-15|Very long URLs cause 404 or 403 errors with SetAct|
|49133|New|Maj|2010-04-16|Windows service recovery options do not work for A|
|49157|New|Nor|2010-04-20|Issues with xml interface for balancer manager    |
|49187|New|Nor|2010-04-26|Crash mod_mem_cache and mod_svn                   |
|49199|New|Enh|2010-04-27|Implement LDAP scope-aware caching in mod_ldap    |
|49220|New|Nor|2010-04-29|feature request for being able to disable FcgidWra|
|49239|New|Blk|2010-05-01|Apache mod_ssl gives coredump with openssl 0.9.8  |
|49277|New|Nor|2010-05-12|Expose a variable to identify SSL Session renegoti|
|49283|New|Nor|2010-05-12|Language of dates on SSI                          |
|49285|New|Enh|2010-05-13|Relative (local to current directory) URLs do not |
|49348|New|Enh|2010-05-27|[mod_log_config] Output log file name format capab|
|49385|New|Maj|2010-06-03|mod_disk_cache server side included files are inte|
|49387|Inf|Cri|2010-06-03|Unable to modify default charset setting to UTF-8 |
|49391|New|Nor|2010-06-05|mod_disk_cache needs to register a cleanup to kill|
|49396|New|Enh|2010-06-06|PATH_INFO normalization, especially relating to vo|
|49427|New|Nor|2010-06-11|mod_cgid and mod_cgi do not return proper value wh|
|49433|New|Enh|2010-06-13|improving info in server status                   |
|49439|New|Nor|2010-06-14|Bug in mod_userdir which prevents suexec from runn|
|49504|New|Nor|2010-06-25|Solaris 10/x64 worker graceful restart problem    |
|49532|New|Nor|2010-06-30|mod_cache: Set-Cookie headers are appended to cach|
|49553|New|Min|2010-07-05|Set QoS bits via APR2 API instead                 |
|49568|New|Maj|2010-07-07|Apache mod_authnz_ldap built with the MS LDAPSDK d|
|49632|Inf|Nor|2010-07-21|mod_authnz_ldap denies users when search is perfor|
|49633|New|Enh|2010-07-21|Handle AD primary groups in mod_authnz_ldap       |
|49642|New|Nor|2010-07-23|mod_rewrite mistakes encoded question mark as path|
|49643|New|Nor|2010-07-23|WebDav plus mod Negotiation causes directory creat|
|49676|New|Nor|2010-07-30|directory with german umlauts are indented by one |
|49680|New|Maj|2010-07-30|Perl script are not running on Win32, Apache 2.2.1|
|49684|New|Enh|2010-08-01|enhancement for ipv6 implementation               |
|49699|New|Nor|2010-08-03|Inconsistent Keep-alive from proxy to the origin s|
|49715|New|Maj|2010-08-06|ProxyPassMatch Url Encoder Problem                |
|49717|New|Enh|2010-08-06|PATCH: Enable SSL Timeout                         |
|49737|Inf|Nor|2010-08-10|order allow,deny does not work on IPv6            |
|49743|New|Maj|2010-08-12|SSI 'echo encoding="(url/none)"' bug              |
|49746|Opn|Enh|2010-08-12|mod_rewrite urlencode option                      |
|49766|New|Maj|2010-08-17|POST request on CGI script generating empty body c|
|49771|New|Nor|2010-08-17|After graceful restart using mod_proxy_ajp, couldn|
|49772|New|Nor|2010-08-18|mod_deflate kicks itself out on Content-Range resp|
|49798|Opn|Nor|2010-08-22|[mod_log_config] Piped Log scripts process cause w|
|49807|New|Enh|2010-08-23|hard to force Content-Type header for non static f|
|49810|New|Nor|2010-08-23|Mod_autoindex output of header/body/footer scrambl|
|49815|New|Enh|2010-08-24|Enable caching for HTTP Range requests / 206 respo|
|49829|New|Trv|2010-08-26|CGI index command line arguments excessively escap|
|49832|New|Enh|2010-08-26|void ap_custom_response is not supporting the bina|
|49859|Opn|Nor|2010-09-01|url with additional filepath generates bad environ|
|49921|New|Nor|2010-09-13|Trailers in chunked http requests are not handled |
|49926|New|Enh|2010-09-14|New option for mod_log_forensics or mod_log_config|
|49980|New|Nor|2010-09-22|can't use a FIFO for SSL key file; mod_ssl checks |
|49981|New|Enh|2010-09-22|Requesting SSLCertificateKeyFile Dialog functional|
|49990|New|Nor|2010-09-23|Feature request: implement ExpiresActive reset    |
|49996|New|Nor|2010-09-24|Proxied ErrorDocument returns 200 OK response code|
|49997|New|Nor|2010-09-24|wrowe promised me...                              |
|50004|New|Nor|2010-09-26|per-dir rewrite without DocumentRoot or RewriteBas|
|50011|New|Cri|2010-09-27|error running apache, and installing apache as a s|
|50024|New|Min|2010-09-29|Mod_cache/mod_mem_cache and mod_security combinati|
|50038|New|Enh|2010-10-01|What Directives apply to a file/directory? Resulta|
|50041|New|Min|2010-10-04|(9)Bad file descriptor: apr_socket_accept: (client|
|50051|New|Nor|2010-10-07|Log PID in first entry logged for each request    |
|50061|New|Nor|2010-10-08|Semicolon character '%3B' seems to be decoded to '|
|50082|New|Nor|2010-10-12|apachectl status returns incorrect exit code      |
|50112|New|Nor|2010-10-18|buildconf broken in two places                    |
|50116|New|Nor|2010-10-19|Apache fragments packets unnecessarily            |
|50151|New|Nor|2010-10-25|Software caused connection abort and apache proces|
|50155|Inf|Nor|2010-10-25|httpd -s attempts to read SSL certificates        |
|50172|Inf|Nor|2010-10-28|Digest allows access bypassing secuity            |
|50227|New|Enh|2010-11-07|Option to fail SSL handshake for diverted SNI conn|
|50237|Inf|Nor|2010-11-08|webdav LOCK access with multiple threads to same f|
|50261|New|Nor|2010-11-12|graceful restart with multiple listeners using pre|
|50262|New|Nor|2010-11-12|mod_rewrite log ip address vs hostname            |
|50274|New|Nor|2010-11-15|always pass CONTENT_LENGTH to the application     |
|50278|New|Nor|2010-11-16|-DFOREGROUND and ap_unixd_killpg()/ap_os_killpg() |
|50290|Inf|Nor|2010-11-18|vanilla apache 2.2.17 installation crashes (lib-ap|
|50296|New|Nor|2010-11-18|LDAPVerifyServerCert and possibly LDAPTrustedMode |
|50317|New|Nor|2010-11-22|Possible error in mod_cache's "Avoiding the Thunde|
|50336|New|Min|2010-11-25|PUT failures do not emit Allow:                   |
|50344|New|Nor|2010-11-26|ProxyPass does not handle different protocols when|
|50357|New|Enh|2010-11-28|improve matching mechanisms for mime type and enco|
|50372|New|Enh|2010-11-29|any reason for allowing ModMimeUsePathInfo only in|
|50390|New|Nor|2010-11-30|WARNING: Unrecognized options : --disable-ipv6    |
|50402|New|Nor|2010-12-02|SetEnv proxy-sendchunks is ignored for small amoun|
|50412|New|Nor|2010-12-04|if IndexOptions +XHTML, the correct MIME type shou|
|50423|Inf|Nor|2010-12-06|Apache is terminated with signal 11, Segmentation |
|50427|New|Nor|2010-12-07|Windows>=Vista+mod_auth_digest+command line=proble|
|50432|New|Enh|2010-12-08|add PCRE-mode for file based matches              |
|50436|New|Enh|2010-12-08|VirtualHost could behave like people expect it to |
|50444|New|Enh|2010-12-09|Pre-close logging handles in cgid agent           |
|50456|Inf|Nor|2010-12-10|Invalid Error 413 crash Apache                    |
|50464|New|Blk|2010-12-13|undefined reference to `BIO_set_callback' `BIO_set|
|50466|Inf|Maj|2010-12-13|httpd process doesn't recycle                     |
|50473|New|Maj|2010-12-14|zlib.dll Problem                                  |
|50521|New|Nor|2010-12-25|Comment at top of sample main config file is wrong|
|50525|New|Nor|2010-12-28|Header directive won't edit Location header from P|
|50530|New|Enh|2010-12-29|Provide rate limiting for failed authentication at|
|50532|New|Enh|2010-12-30|Mail protection                                   |
|50551|New|Nor|2011-01-06|Some proxied connections ignore ttl setting       |
|50562|Opn|Cri|2011-01-09|wrong PATH_INFO CGI environment with non-ASCII UTF|
|50584|New|Enh|2011-01-14|Add error message when RequestReadTimeout triggere|
|50592|New|Maj|2011-01-15|httpd dumps core on an IPv6 only system           |
|50602|New|Nor|2011-01-17|non thread safe functions used in apache httpd pro|
|50619|New|Min|2011-01-19|After changing resolv.conf signaling httpd doesn't|
|50628|New|Blk|2011-01-21|Core dump happens with Apache 2.2.15 using openssl|
|50630|New|Nor|2011-01-21|Apache return 500 error with authentication by LDA|
|50644|New|Enh|2011-01-24|Add support for maximum number of requests per Kee|
|50654|New|Nor|2011-01-25|FileETag ContentMD5 & Filename, optimisation to Co|
|50693|New|Nor|2011-01-31|AllowOverride Options=(not Foo) should permit no-o|
|50704|Inf|Nor|2011-02-01|mod_cache doesn't cache MultiViews                |
|50712|New|Maj|2011-02-02|Restart button only stops the server ...and do not|
|50727|New|Nor|2011-02-07|ISAPI EXTENSION_CONTROL_BLOCK Missing PostData wit|
|50765|New|Enh|2011-02-11|Runtime Backend Pinning via balancer-manager      |
|50770|New|Nor|2011-02-14|a rotatelogs issue, if time changed               |
|50773|Inf|Nor|2011-02-14|Dav lock database corruption                      |
|50774|New|Enh|2011-02-14|Have a way to invalidate cache without other reque|
|50777|New|Nor|2011-02-14|Back port buildconf specifies AC_PREREQ(2.13) fix |
|50796|New|Enh|2011-02-16|record time between keepalives in access log      |
|50807|New|Maj|2011-02-18|mod_proxy fails to send FIN response when a FIN is|
|50814|New|Nor|2011-02-21|SSI exec not working on Windows (Apache 2.x)      |
|50848|New|Enh|2011-03-01|Content Negotiation type map file precedence could|
|50869|New|Enh|2011-03-04|Need directive to control use and timeout of sessi|
|50873|New|Nor|2011-03-04|httpd does not start properly when built from sour|
|50878|New|Nor|2011-03-05|redundant operation when calling apr_stat         |
|50891|New|Nor|2011-03-08|Apache rewrites WWW-Authenticate headers from CGI |
|50902|Inf|Maj|2011-03-09|on major load on the server, poll() hangs         |
|50916|New|Nor|2011-03-11|RewriteMap program: mod_rewrite sends request but |
|50926|New|Nor|2011-03-14|unexpected <Directory> file-matching behavior     |
|50942|New|Maj|2011-03-17|Apache 2.2.16 forward proxy is 5x times slower tha|
|50945|Opn|Nor|2011-03-18|AJP: Missing support for ErrorOverride            |
|50948|Opn|Nor|2011-03-19|Connection not closed when CGI dies waiting for PO|
|50954|New|Nor|2011-03-21|ProxyRemote doesnt use CONNECT method with https s|
|50959|New|Enh|2011-03-23|Add cache-manifest to the mime type list          |
|50976|New|Nor|2011-03-26|Apache losts client's ip (%a or %h) sometimes.    |
|50999|Opn|Nor|2011-03-30|it seems the configure wrong detect my apr-util ve|
|51001|New|Nor|2011-03-31|patch for hook ap_lua_run_lua_open                |
|51005|New|Enh|2011-04-01|Allow to use username in LDAP filter              |
|51006|New|Blk|2011-04-01|Apache consume all memory and swap when setup as r|
|51019|New|Enh|2011-04-04|[PATCH] Implementation of Asynchronous processing |
|51020|Opn|Nor|2011-04-04|[PATCH] Apache/mod_fcgid.so does not start in comp|
|51022|New|Nor|2011-04-05|Segmentation fault on PUT request                 |
|51030|New|Enh|2011-04-06|Way to terminate CGI immediatly after closing conn|
|51078|Inf|Nor|2011-04-18|[PATCH] mod_fcgid spawned CGI Processes gets orpha|
|51079|New|Enh|2011-04-18|[PATCH] mod_fcgid spawned CGI Process cannot imper|
|51080|New|Nor|2011-04-18|[PATCH] mod_isapi does not support Except:100-Cont|
|51103|Opn|Nor|2011-04-21|mod_reqtimeout does not drop connection and return|
|51104|Opn|Maj|2011-04-21|C++ support about httpd_config.h                  |
|51107|New|Min|2011-04-22|SetOutputFilter and SetInputFilter should allow "n|
|51118|New|Nor|2011-04-26|LDAP cache is cleared after graceful/restart and o|
|51127|New|Nor|2011-04-27|Make ProxyPassReverseCookiePath work as expected  |
|51168|New|Nor|2011-05-08|mod_status Total Traffic won't take account of int|
|51170|New|Nor|2011-05-09|I/O errors when using keep-alive + mod_ssl        |
|51174|New|Min|2011-05-09|SSLRequire predicates using OIDs unknown to openss|
|51186|New|Blk|2011-05-11|NEw Openssl 1.0.1 with new FIPS                   |
|51190|New|Min|2011-05-12|::/0 does not work with allow from and deny from  |
|51194|New|Nor|2011-05-13|FcgidWrapper does not support paths containing a s|
|51201|Inf|Nor|2011-05-15|Strange behavior REQUEST_METHOD & GET in mod_rewri|
|51223|New|Nor|2011-05-18|304 HTTP Not Modified strips out CORS headers     |
|51224|New|Nor|2011-05-18|mod_dav_fs should respect FileETag                |
|51239|New|Nor|2011-05-21|ap_get_client_block may block continuously sometim|
|51257|New|Nor|2011-05-24|Build failed when cross-compiling: ./gen_test_char|
|51258|Opn|Enh|2011-05-24|new features for mod_substitute                   |
|51296|New|Enh|2011-05-31|Dynamic engine support using SSLCryptoDevice suppo|
|51297|New|Nor|2011-05-31|Improve error handling during "UNLOCK"            |
|51303|New|Nor|2011-05-31|TraceEnable 500 error                             |
|51312|New|Nor|2011-06-01|mod_filter should support adding to the Vary heade|
|51322|New|Enh|2011-06-04|Prepend and append string to LDAP search parameter|
|51359|Inf|Enh|2011-06-11|Added shebang check for //! so that .js scripts wo|
|51365|New|Nor|2011-06-13|Mod_proxy mangles query string with mod_security  |
|51402|New|Nor|2011-06-21|"ForceLanguagePriority Fallback" not working as im|
|51406|New|Maj|2011-06-21|When listing files in subdirectories, the path is |
|51409|New|Nor|2011-06-21|Sorting options accepted by ls, but ignored       |
|51471|New|Nor|2011-07-04|<DirectoryMatch>ed IndexIgnore doesn't            |
|51479|New|Enh|2011-07-05|[PATCH] AB feature to optionally read in a reusabl|
|51491|New|Nor|2011-07-08|mod_dir breaks POSTs to URLs not ending in /      |
|51495|New|Nor|2011-07-11|mod_substitute cpu and memory limit               |
|51517|New|Maj|2011-07-16|mod_proxy_fcgi is not RFC 3875 compliant (SCRIPT_F|
|51522|Ver|Trv|2011-07-18|Wrong French translation in mpm.html ("Certains Mo|
|51542|New|Nor|2011-07-22|Apache HTTP Server vs PVS-Studio                  |
|51543|New|Nor|2011-07-22|Space in username not properly escaped in log file|
|51552|Inf|Cri|2011-07-25|Apache is not starting (2.2.15)                   |
|51573|New|Enh|2011-07-28|Easy way to erase log files                       |
|51576|Inf|Nor|2011-07-28|mod_rewrite rule stopped working                  |
|51600|New|Enh|2011-08-02|Loading the same certificate in multiple virtual h|
|51603|Inf|Maj|2011-08-02|Apache accepts completely bogus HTTP requests (pos|
|51607|Inf|Nor|2011-08-03|DBDPrepareSQL ( ap_dbd_prepare ) does not work cor|
|51629|New|Nor|2011-08-05|DocumentRoot check incorrect when running under ch|
|51674|New|Blk|2011-08-18|AJP Module Bad Request                            |
|51679|New|Min|2011-08-18|Code signature key expired                        |
|51689|New|Trv|2011-08-19|Cross compiling causes multiple Listen directives |
|51695|New|Trv|2011-08-20|Code clean up (ap_rputs merge)                    |
|51707|New|Nor|2011-08-22|ProxyPassReverse issues within <Location> (differe|
|51709|New|Nor|2011-08-23|ServerName/ServerAlias don't work if Host: header |
|51711|New|Nor|2011-08-23|mod_auth_digest have broken shared mem (nonce) cod|
|51718|New|Enh|2011-08-24|Feature Request: Add shorthand to redirect any Ser|
|51725|New|Nor|2011-08-26|Multiple Range: request accepted as "Range: n-m"  |
|51732|New|Nor|2011-08-29|Inconsistencies in log messages' verbosity levels |
|51747|New|Blk|2011-08-31|mod_fcgid loads entire request into memory while p|
|51757|Inf|Enh|2011-09-02|Add support for SASL auth in LDAP                 |
|51778|Inf|Cri|2011-09-07|while buliding(make) a unix source "httpd-2.2.20.t|
|51797|Inf|Maj|2011-09-10|Crash HTTPD(Windows)                              |
|51814|New|Enh|2011-09-14|mod_proxy in Apache HTTP 2.2 FIN_WAIT2 in server s|
|51858|Inf|Nor|2011-09-21|weird error for mod_rewrite with more then 3 param|
|51864|New|Nor|2011-09-22|mod_cache returns entire entity from origin server|
|51904|New|Nor|2011-09-28|output to stderr from cgi script causes script to |
|51951|New|Nor|2011-10-04|mod_mbox hang on some e-mails on press@a.o - was I|
|51964|Ver|Nor|2011-10-05|Documentation of RewriteRule flag skip unclear    |
|51965|New|Nor|2011-10-05|--with-z=DIR not being honored                    |
|51982|Opn|Nor|2011-10-06|ProxyPassReverse / balancer://cluster/ adds slash |
|51987|Inf|Nor|2011-10-07|RewriteRule doesn't work correctly with apache 2.3|
|51994|New|Enh|2011-10-07|Mod_authn_socache should have some way to flush th|
|52004|Ver|Trv|2011-10-10|Typo "indexe" in French translation of mpm.html   |
|52007|New|Nor|2011-10-10|Content-Length: 0 not set on proxy response       |
|52038|New|Nor|2011-10-16|NameWidth works incorrectly together with Charset=|
|52039|Inf|Nor|2011-10-16|Browser mode does not always work                 |
|52043|New|Nor|2011-10-17|Directories ".", "..", and "/" do not work correct|
|52081|New|Nor|2011-10-24|segfault if mbox files have unexpected names      |
|52090|New|Maj|2011-10-26|Apache thread hangs with error 500 when sending a |
|52120|Opn|Nor|2011-11-01|mod_cache edge case: uncacheable 304 sends cached |
|52123|New|Maj|2011-11-02|DoS: High memory usage in propfind                |
|52132|New|Nor|2011-11-03|[PATCH] process activity score calculated incorrec|
|52139|New|Nor|2011-11-05|Never Syntax Error on non-existent DocumentRoot   |
|52171|Ver|Nor|2011-11-13|confusing documentation of request phases         |
|52174|New|Enh|2011-11-13|Allow hard lower-limits on the number of fcgi serv|
|52178|New|Nor|2011-11-14|IPv6 IPs as ServerName not allowed                |
|52181|Ver|Nor|2011-11-14|mod_rewrite Technical Details Ruleset Processing d|
|52195|Inf|Nor|2011-11-16|Japanese texts are garbled on mailing list archive|
|52196|Inf|Nor|2011-11-16|winnt mpm, others mpm also have this bug. pool sha|
|52207|Inf|Maj|2011-11-18|Upgrade apache version from 2.0.59 to 2.2.12 or ab|
|52222|New|Nor|2011-11-21|IndexIgnore ignores parent directories in argument|
|52247|New|Nor|2011-11-26|mod_mbox gives up on unexpected message format    |
|52248|New|Nor|2011-11-26|Bugzilla version drop-down list does not offer "un|
|52252|New|Nor|2011-11-27|luajit support broken for (at least) luajit 2.0   |
|52253|Inf|Nor|2011-11-28|Timeout doesn't work. mod_proxy_balancer strongly |
|52264|New|Enh|2011-11-30|Update and complete balancer-manager XML output   |
|52269|Inf|Nor|2011-12-01|[mod_proxy] Apache reverse proxy status code trans|
|52275|New|Nor|2011-12-02|memory leak in proxy_ajp_handler                  |
|52298|Inf|Nor|2011-12-07|Can't enter website with client certificate on an |
|52301|New|Enh|2011-12-07|Error message "RSA server certificate ... CN ... d|
|52302|New|Enh|2011-12-07|Better documentation of how server name is determi|
|52304|New|Nor|2011-12-08|<Limit> Does Not Apply When URI Is Folder         |
|52313|New|Enh|2011-12-09|htdbm enhancement: options for colon-in-username, |
|52322|Inf|Enh|2011-12-13|Providing BBC developed httpd modules for inclusio|
|52342|New|Nor|2011-12-15|ap_internal_redirect dropping filters means incons|
|52370|New|Nor|2011-12-19|apreq_decode/url_decode length miscalculation     |
|52377|New|Enh|2011-12-20|Add Directives to assert user, group, and permissi|
|52383|New|Trv|2011-12-24|Instllation log typo                              |
|52391|New|Cri|2011-12-27|100% CPU usage while using Forward Proxy          |
|52395|New|Nor|2011-12-29|reload results in different end environment to res|
|52403|New|Nor|2011-12-31|FallbackResource doesn't work for non-existent PHP|
|52408|New|Nor|2012-01-01|Directoryindex matching automatically redirects   |
|52415|New|Nor|2012-01-03|LockFile placed inappropriately                   |
|52417|New|Nor|2012-01-03|HEADERS information in the file                   |
|52435|New|Nor|2012-01-06|Apache shutdown automatically                     |
|52439|New|Nor|2012-01-09|It should be possible to treat errors in .htaccess|
|52453|New|Enh|2012-01-11|Ability to configure --logfiledir                 |
|52465|New|Nor|2012-01-13|mod_dir is allowed to redirect proxy requests     |
|52481|New|Nor|2012-01-18|Rotatelog.exe crashes Apache after setting 256MB r|
|52485|New|Nor|2012-01-19|CPU load 100%                                     |
|52494|New|Enh|2012-01-22|allow the Action directive to point in the filesys|
|52495|New|Enh|2012-01-22|CACertificate, CADNCertificate, CARevocation, Cert|
|52501|New|Cri|2012-01-23|child pid 10824 exit signal Segmentation fault (11|
|52505|New|Nor|2012-01-23|Include with directory wildcards gives errors for |
|52509|New|Nor|2012-01-23|Resources protected by .htaccess file may not be a|
|52510|New|Cri|2012-01-23|Segmentation Fault 11                             |
|52520|New|Nor|2012-01-24|ProxyRemote & NoProxy directive can not take IPv6 |
|52532|New|Trv|2012-01-26|VirtualHost added TWICE to name-virtual-host list |
|52539|New|Nor|2012-01-26|Apache mod_dav 400 Bad Request for non-existent co|
|52546|New|Nor|2012-01-27|overwrite SERVER_PROTOCOL environment             |
|52573|New|Nor|2012-02-01|mod_speling case correction fails when URI has dou|
|52578|Opn|Enh|2012-02-02|Wrong "bytes sent" logged when connection is close|
|52594|New|Nor|2012-02-03|rpmbuild -ba errors out with "File not found by gl|
|52595|New|Nor|2012-02-03|requests with gzip+chunked encoded body don't prox|
|52605|Inf|Min|2012-02-05|Please allow request lines longer than 8k         |
|52612|New|Nor|2012-02-06|Default Service Account                           |
|52616|Opn|Enh|2012-02-07|SSLUserName uses SSL_CLIENT_S_DN insted of SSL_CLI|
|52617|New|Maj|2012-02-07|Visit the rewrite page from ServerAlias domain vho|
|52623|New|Nor|2012-02-08|does not build with pcre-8.30                     |
|52644|New|Nor|2012-02-12|document how SSL FakeBasicAuth works with strange |
|52668|New|Trv|2012-02-14|More future safe patch for old MSIE ssl-unclean-sh|
|52670|New|Trv|2012-02-15|please clarify the effect of SSLStrictSNIVHostChec|
|52683|New|Enh|2012-02-16|add a symlink option that rechecks the access perm|
|52700|Inf|Blk|2012-02-17|Not rendering html content instead displaying clie|
|52703|Inf|Maj|2012-02-18|SSL+SNI+client-auth "lost" after some time        |
|52710|New|Nor|2012-02-19|mod_fcgid should set PATH_INFO when configured in |
|52756|Inf|Trv|2012-02-24|proxy_html_module LoadModule line not created in h|
|52759|New|Cri|2012-02-24|Apache httpd child process consuming high CPU Util|
|52790|New|Nor|2012-02-28|ldap caching not sufficient                       |
|52795|Opn|Nor|2012-02-29|mod_fcgid fails to spawn process in C:\Program Fil|
|52806|New|Nor|2012-03-01|configure: --with-included-apr is not supported in|
|52807|New|Nor|2012-03-01|some random strings are accepted by "configure" as|
|52816|New|Nor|2012-03-03|Potential segfault in socache_shmcb_create        |
|52817|New|Nor|2012-03-03|Long directory path sucks (but it's really a valid|
|52822|New|Nor|2012-03-04|Quiet installation not fully quiet                |
|52824|Inf|Nor|2012-03-04|Conflicts between AllowOverride and AllowOverrideL|
|52828|New|Maj|2012-03-05|Child process is not replaced in Windows, after a |
|52832|New|Nor|2012-03-05|numerical configuration entry can be mistakenly in|
|52841|Opn|Nor|2012-03-06|[proxy_balancer:emerg] [pid 25593] AH01177: Failed|
|52851|New|Nor|2012-03-07|Core TimeOut directive doesn't work               |
|52860|New|Enh|2012-03-08|Support Transfer-Encoding: gzip                   |
|52865|New|Nor|2012-03-09|Crash by segmentation fault in mod_authn_core in A|
|52870|New|Cri|2012-03-09|100% CPU usage while using Forward Proxy          |
|52874|New|Enh|2012-03-09|Support Use TrustedFirst checking when verifying c|
|52884|New|Nor|2012-03-12|"localhost" leads to start failure                |
|52890|Inf|Nor|2012-03-12|--with-included-apr doesn't work when srclib/apr a|
|52891|New|Nor|2012-03-12|2.2 doesn't perform as well as 1.3                |
|52894|Inf|Nor|2012-03-13|Apache aborts abnormally when ChrootDir is set    |
|52927|Inf|Nor|2012-03-16|[Bug in httpd 2.2.4] [error] (70014)End of file fo|
|52933|New|Nor|2012-03-17|Child survives '-k stop', consuming lots of CPU   |
|52950|New|Nor|2012-03-20|Error when set AuthType to None with valid-user   |
|52963|New|Nor|2012-03-21|Typo in AuthLDAPURL RFC 2255 error message        |
|52975|New|Nor|2012-03-23|Receiving files is suboptimal                     |
|52976|New|Min|2012-03-23|Gratuitous string-duplication in module-configurat|
|52978|New|Enh|2012-03-23|Binding to an interface instead of an address     |
|52995|New|Nor|2012-03-28|httpd -V does not print the default Mutex         |
|53002|New|Nor|2012-03-29|<Location> and auth_form (trailing slash problem?)|
|53015|New|Nor|2012-03-31|missing apr_socket_close                          |
|53016|New|Nor|2012-03-31|missing apr_brigade_destroy                       |
|53023|New|Nor|2012-04-02|mod_rewrite RewriteCond parser error and documenta|
|53037|New|Enh|2012-04-05|clarify mod_ssl documentation on the UID/GID conte|
|53059|New|Nor|2012-04-10|Make httpd easier relocatable by using a variable |
|53098|New|Nor|2012-04-18|mod_proxy_ajp: patch to set worker secret passed t|
|53099|New|Enh|2012-04-18|feature request for mod_remoteip                  |
|53108|New|Enh|2012-04-19|clarification on url-path vs full filesystem path |
|53111|New|Nor|2012-04-20|1% of CMS sites expose database passwords         |
|53121|New|Nor|2012-04-22|Confusing documentation, gzip and deflate         |
|53149|New|Enh|2012-04-25|mod_ldap should/could use mod_socache             |
|53152|Opn|Nor|2012-04-26|RewriteRule documentation: Error about per-directo|
|53156|New|Enh|2012-04-27|CRL validation fails if CRL is missing            |
|53160|New|Cri|2012-04-29|Reverse Proxy mod_deflate doesn't zip back content|
|53183|New|Min|2012-05-03|mod_apreq2 entry point is apreq_module and not apr|
|53193|New|Nor|2012-05-04|SLVerifyClient optional_no_ca + SSLSessionCache = |
|53218|New|Blk|2012-05-11|ProxyPass worker name(http://localhost:3128/...|
|53233|New|Maj|2012-05-15|Internal error: proxy: error reading status line f|
|53239|New|Maj|2012-05-16|Httpd has problems delivering data on rate-limited|
|53253|New|Maj|2012-05-17|TCP_NOPUSH used with sendfile(2), cause transfers |
|53284|New|Nor|2012-05-24|crash                                             |
|53290|New|Maj|2012-05-24|memory usage                                      |
|53292|New|Min|2012-05-25|add support for HTTP status code 308              |
|53305|New|Nor|2012-05-28|404 errors when adding query string in a balancer |
|53313|New|Nor|2012-05-28|SSI #echo VAR fails (#include OK) if URI/URL has f|
|53319|New|Nor|2012-05-29|Multiple DirectoryIndex statements in the same con|
|53332|New|Nor|2012-05-30|Requests with chunked encoding have no body availa|
|53350|New|Nor|2012-06-01|mod_cache caching 403 responses Apahce 2.2.22     |
|53351|New|Nor|2012-06-02|make fails if layout begins on first line of confi|
|53388|Opn|Nor|2012-06-08|mod_proxy_balanser generates 503 when proxying to |
|53402|New|Trv|2012-06-12|Incorrect error message for mod_ldap params       |
|53461|Inf|Cri|2012-06-23|Compilation problems                              |
|53462|New|Nor|2012-06-25|mod_rewrite does not remove trailing slash when as|
|53479|New|Nor|2012-06-27|mod_rewrite [B] flag should percent-encode the spa|
|53483|New|Enh|2012-06-29|dangerous PCRE patterns in *Match directives      |
|53539|New|Maj|2012-07-12|content type and character set are changing when t|
|53554|New|Nor|2012-07-16|Wrong case for hexadecimal percent encoding [patch|
|53555|New|Maj|2012-07-17|Scoreboard full error with event/ssl              |
|53579|New|Cri|2012-07-20|httpd looping writing on a pipe and unresponsive (|
|53581|New|Blk|2012-07-21|FollowSymlinks doesn't work with DirectoryMatch an|
|53594|New|Enh|2012-07-24|ipad as webserver                                 |
|53595|New|Nor|2012-07-24|Media type qs parameters for MultiViews sent in Co|
|53612|Inf|Nor|2012-07-27|Reverse Proxy causing 500 error SSL proxy 1.0.1c O|
|53618|New|Nor|2012-07-29|proxy_worker_shared fields not maintained in threa|
|53634|New|Nor|2012-08-01|mod_cache returning HTTP 200 for nonexistent resou|
|53638|New|Nor|2012-08-02|Problem with shortcuts to bugzilla in http://httpd|
|53640|Inf|Maj|2012-08-02|make: Fatal error: Command failed for target `htpa|
|53643|New|Cri|2012-08-02|apache segfaults with mod_authn_dbd when dbd_min i|
|53646|New|Nor|2012-08-02|Invalid uniformly distributed balancing of request|
|53651|New|Nor|2012-08-03|Worker failure doesn't have same behaviour as work|
|53667|New|Enh|2012-08-07|Add an equivalent option to "JkOptions ForwardLoca|
|53669|New|Nor|2012-08-07|IndexOptions Incremental IndexOptions documentatio|
|53686|New|Enh|2012-08-09|Status "501 Not Implemented" sent very late       |
|53690|New|Nor|2012-08-09|Calls to semctl() trigger "uninitialized memory" w|
|53692|New|Nor|2012-08-10|mod_auth_form loses request body before login page|
|53693|Opn|Nor|2012-08-10|mod_fcgid performance suffers under increase in re|
|53704|New|Enh|2012-08-13|True online configuration is needed - via LDAP?   |
|53705|New|Nor|2012-08-13|Align server-status balancer display to balancer-m|
|53706|New|Enh|2012-08-13|Include a status display for mod_ldap when present|
|53722|New|Nor|2012-08-15|when -D NO_DETACH is used, no PID file should be c|
|53736|New|Nor|2012-08-17|/balancer-manager doesn't save runtime adjusted se|
|53757|New|Enh|2012-08-21|RewriteMap of type txt should allow specifying col|
|53767|New|Nor|2012-08-23|htcacheclean deletes stale "vary" header files eve|
|53772|New|Nor|2012-08-24|REDIRECT_URL not accessible in mod_proxy          |
|53787|New|Reg|2012-08-28|In forward proxy, doesn't cache disk anymore      |
|53823|New|Nor|2012-09-03|[patch] pure IPv6 only host fix (server/config.c) |
|53835|New|Cri|2012-09-06|mod_proxy_ajp truncate output when using deflate i|
|53870|New|Maj|2012-09-13|Deadlock in CRYPTO_add_lock with Apache 2.2.22 wor|
|53886|New|Nor|2012-09-18|can't start apache control in Redhat Linux 3 X64  |
|53899|New|Nor|2012-09-19|SSL_OP_ALL disables the mitigation code for CVE-20|
|53915|New|Nor|2012-09-21|Colon lost when :port is used in CacheKeyBaseURL  |
|53919|Inf|Enh|2012-09-21|DEFAULT_LOG_FORMAT is not RFC6302 compliant       |
|53923|New|Min|2012-09-23|Overriding CustomLog directive seems impossible   |
|53932|New|Nor|2012-09-25|PROPFIND doesn't support If, If-Match ETag predica|
|53947|New|Enh|2012-09-29|Feature Request, RewriteRule - ProxyPreserveHost f|
|53961|New|Nor|2012-10-04|Null sessions to the default vhost                |
|53970|New|Nor|2012-10-05|Network control directives affects internal subreq|
|53981|New|Nor|2012-10-08|move def of log_request_state from mod_log_config.|
|53988|New|Enh|2012-10-10|Missing FCGIWrapper script should not be a critica|
|53999|Opn|Nor|2012-10-13|Deadlock between procmgr_send_spawn_cmd()/proctabl|
|54030|New|Enh|2012-10-19|Support subjectAltName when (reverse-)proxying    |
|54033|New|Enh|2012-10-21|Parent languages are not ordered according to Acce|
|54072|New|Reg|2012-10-30|Syntax error front-end virtual-path too long      |
|54102|New|Enh|2012-11-05|new feature: automatic route detection            |
|54118|New|Nor|2012-11-08|Handle leak on parent httpd process when rotatelog|
|54126|New|Maj|2012-11-09|Mod_rewrite failing because of url in query string|
|54134|New|Enh|2012-11-11|new feature: ability to use multiple routes in sti|
|54136|New|Min|2012-11-11|balancer-handler shows xml not, when only xml para|
|54158|New|Nor|2012-11-16|Suggestion regarding 2.0 to 2.2 Upgrade Documentat|
|54183|Inf|Nor|2012-11-21|PROPFIND doesn't report getcontenttype property   |
|54215|New|Maj|2012-11-27|configure fails for httpd 2.2.3 with openssl 1.0.1|
|54221|Opn|Nor|2012-11-28|no ErrorLog prefix on CGI errors                  |
|54222|New|Min|2012-11-28|ServerTokens checking is not complete             |
|54223|New|Nor|2012-11-29|AH00554 error when runtime configuration Includes |
|54252|New|Nor|2012-12-05|acinclude.m4 requires -lz when linking with ssl st|
|54253|New|Nor|2012-12-05|mod_proxy_ftp doesn't handle/log partial or cancel|
|54255|New|Nor|2012-12-06|mod_deflate adjusts the headers "too late", should|
|54269|New|Maj|2012-12-09|mod_proxy_html documentation misses several things|
|54276|New|Nor|2012-12-10|rotatelogs not getting killed on graceful restart |
|54280|New|Nor|2012-12-11|mod_auth_form inline login not working with traili|
|54281|New|Nor|2012-12-11|Stick use Partial parameters from query string    |
|54289|New|Nor|2012-12-13|"ap_get_brigade" api is failing in "AP_MODE_SPECUL|
|54306|New|Enh|2012-12-15|add regexp versions of ProxyPassReverse, ProxyPass|
|54309|New|Trv|2012-12-15|clarification on the <Location> directive when use|
|54310|Opn|Nor|2012-12-15|mod_proxy_html drops meta elements with http-equiv|
|54319|New|Reg|2012-12-17|ProxyPass has no effect in <Location> if rewrite o|
|54339|New|Nor|2012-12-21|piped log entries > PIPE_BUF can be interleaved   |
|54342|New|Nor|2012-12-22|AuthnCacheSOCache can't pass args to socache provi|
|54343|New|Maj|2012-12-22|Add sanity checks for malloc() in mpm_winnt.c and |
|54358|New|Nor|2012-12-29|Status 500 when using ldap on Solaris because apr_|
|54363|New|Nor|2012-12-31|make time conversion caching functions thread-safe|
|54364|New|Nor|2012-12-31|Add ref to mod_fcgid docs                         |
|54365|New|Nor|2013-01-02|Connection closed by server during file transfer  |
|54366|New|Nor|2013-01-02|$sysconfdir/extra/httpd-dav.conf is not built base|
|54367|Opn|Maj|2013-01-02|Location header in response to PUT is not %-escape|
|54385|New|Enh|2013-01-08|SSL configuration independent from virtual hosts, |
|54401|New|Nor|2013-01-10|Suggest to make ProxyPassReverseCookieDomain accep|
|54415|New|Enh|2013-01-14|Please tell the root cause of mutex and scoreboard|
|54431|Inf|Blk|2013-01-16|Unable to start the Apache 2.4.3 windows service. |
|54498|New|Nor|2013-01-28|apache crash on any cgi request with certain http |
|54502|New|Nor|2013-01-29|Apache deadlock on epoll_ctl error (1000 process l|
|54512|Inf|Cri|2013-01-31|Apache hung                                       |
|54517|New|Nor|2013-02-01|proxy balancer: timeout or partial failure of back|
|54518|New|Nor|2013-02-01|mod_rewrite not adding Vary header                |
|54519|New|Nor|2013-02-02|httpd already running                             |
|54526|New|Nor|2013-02-05|mod_proxy_http ignores request abortion           |
|54543|New|Enh|2013-02-10|Compile regex only when need                      |
|54546|New|Nor|2013-02-11|httpd crashes on first HUP after change Listen dir|
|54549|New|Nor|2013-02-11|mod_mime AddEncoding and mod_negotiation fix_encod|
|54556|New|Enh|2013-02-13|New flag to add default rule in rule chain        |
|54560|New|Nor|2013-02-13|Potential segfault on return from ap_server_root_r|
|54563|New|Maj|2013-02-15|mod_webdav ignores quota                          |
|54578|New|Nor|2013-02-18|Bad docs or unchecked code for "LimitRequestFields|
|54605|New|Enh|2013-02-24|mod_negotiation should cache the info it generates|
|54608|New|Enh|2013-02-25|Support an option to allow page caching when using|
|54622|New|Nor|2013-02-28|shared memory cleanup                             |
|54626|New|Nor|2013-03-01|mod_authnz_ldap through util_ldap.c does not suppo|
|54633|New|Nor|2013-03-04|Invalid % encoding not rejected                   |
|54637|New|Nor|2013-03-05|Digest: secret not used                           |
|54640|New|Nor|2013-03-05|Slow transaction on a balance member is holding su|
|54649|New|Nor|2013-03-06|Incorrect PIDFILE prevent httpd restart           |
|54653|New|Min|2013-03-08|Suggestion to add https example for forward proxy |
|54656|New|Maj|2013-03-09|SNI and SSLProxyCheckPeerCN based on "connection" |
|54657|New|Nor|2013-03-09|DNS lookup failure for load balancer member does n|
|54683|New|Min|2013-03-13|Ignor directive ErrorDocument with null byte      |
|54699|Opn|Enh|2013-03-15|[feature request] cli webaccess tester            |
|54701|New|Cri|2013-03-15|Apache 2.4.3 Migration Issue Not loading the pages|
|54704|New|Nor|2013-03-15|Web Services stalling on it's own                 |
|54719|New|Nor|2013-03-18|httpd should check for and eventually create pid f|
|54752|New|Nor|2013-03-25|mod_ssl should not use uninitialized memory as ran|
|54782|New|Nor|2013-04-02|Memory Corruption errors - mpm_worker mod_perl    |
|54785|New|Nor|2013-04-02|Random crash when httpd server is stopped         |
|54793|New|Nor|2013-04-03|Socket timeout handler can delete uploaded files P|
|54794|New|Reg|2013-04-03|mod_wsgi|fcgid and subversion >= 1.7 issues       |
|54795|New|Nor|2013-04-03|'apxs -g -n' should be self-referring             |
|54796|Inf|Enh|2013-04-03|CustomLog should be able to use syslog as ErrorLog|
|54804|New|Nor|2013-04-05|mod_fcgid sends a Continue 100 response automatica|
|54813|New|Nor|2013-04-08|documnt the Require args used by authz_dbm includi|
|54816|Inf|Nor|2013-04-08|AH00566: request failed: invalid characters in URI|
|54817|New|Nor|2013-04-09|if prefix and sysconfdir are the same then http.co|
|54820|Inf|Cri|2013-04-09|REwriterule stops working                         |
|54824|New|Nor|2013-04-10|Spec file is missing libuuid-devel requirement    |
|54830|New|Enh|2013-04-11|Make SSLPProxyMachineCertificateFile configurable |
|54848|New|Nor|2013-04-15|Client field too short for IPv6 addresses         |
|54856|Inf|Enh|2013-04-17|NSCreateObjectFileImageFromFile                   |
|54858|New|Nor|2013-04-17|ld duplicate                                      |
|54861|New|Blk|2013-04-18|The number of connections with mysql is more      |
|54869|Inf|Nor|2013-04-19|Non-breaking space characters cause httpd to choke|
|54875|New|Nor|2013-04-23|Conditional request predicated on another URL's ET|
|54878|New|Nor|2013-04-23|Multiple Listen directives prevent server to start|
|54905|Inf|Cri|2013-04-29|Apache2 loops in child Segfaults                  |
|54910|New|Enh|2013-04-30|Format %{Foobar}o cannot be used to log Date and S|
|54911|New|Enh|2013-04-30|Allow logging of fields set by a backend server in|
|54914|New|Nor|2013-04-30|mod_dir DirectoryIndex breaks WebDAV PROPFIND / DE|
|54915|New|Nor|2013-04-30|GET on a WebDAV-enabled collection, with Directory|
|54918|New|Enh|2013-05-02|Implement RFC 6797 HTTP Strict Transport Security |
|54919|Inf|Nor|2013-05-02|*** glibc detected *** /usr/sbin/httpd: double fre|
|54930|New|Nor|2013-05-06|Allow empty message in ErrorDocument directive    |
|54934|Inf|Cri|2013-05-07|Apache is crashing intermittently with a message "|
|54936|New|Nor|2013-05-08|Some potential bugs reported by static analysis to|
|54949|New|Nor|2013-05-10|[PATCH] mod_cache: fix uninitialized tmppath varia|
|54952|Inf|Cri|2013-05-10|[Fri May 10 17:39:01 2013] [error] proxy: CLUSTER:|
|54953|New|Nor|2013-05-11|<VirtualHost 0.0.0.0:80> matches IPv6             |
|54958|New|Nor|2013-05-13|mod_deflate + mod_mime with SSI gives mixed compre|
|54962|New|Maj|2013-05-14|Apache will set incorrect Content-Length header an|
|54965|New|Enh|2013-05-14|Allow ProxyPassMatch in Directory context         |
|54976|New|Nor|2013-05-15|ProxyPass parameter "acquire" and "ttl" ignored in|
|54986|New|Maj|2013-05-16|httpd hanging on large form submit in ap_run_handl|
|54989|New|Nor|2013-05-17|Apache Segfaults on OS X at random - how can I dia|
|54993|New|Nor|2013-05-20|Critical error: File descriptor in bad state: apr_|
|54998|Ver|Nor|2013-05-21|Apache 2.4 terminates all SSL connections using an|
|55000|New|Nor|2013-05-21|Memory usage per process doubles when Apache is co|
|55021|New|Enh|2013-05-28|Support arbitrary sql to authentication username/p|
|55022|Inf|Cri|2013-05-28|child pid 3123 exit signal Bus error (10) - Apache|
|55034|Inf|Maj|2013-05-31|Apache 2.4.4 won't open more that 32k VH file hand|
|55039|New|Enh|2013-05-31|"RequestHeader edit" can't access environment vari|
|55045|New|Nor|2013-06-01|calls to gets() in test_find.c and test_parser.c  |
|55068|New|Enh|2013-06-06|root permissions when writing to per vhosts errorl|
|55069|New|Min|2013-06-06|notice message in error_log even when LogLevel err|
|55070|Opn|Enh|2013-06-06|mod_fcgid stderr always goes to main error log    |
|55072|New|Nor|2013-06-07|ErrorLog doesn't work well when apache shutdown   |
|55093|New|Nor|2013-06-12|[PATCH] mod_fcgid 2.3.7 truncates large posts on R|
|55096|New|Nor|2013-06-12|Make not running on httpd configure Solaris       |
|55098|New|Nor|2013-06-13|does not listen to IP4 when both IP4 address and I|
|55106|New|Enh|2013-06-17|ProxyErrorOverride considers response codes >= 400|
|55117|New|Nor|2013-06-18|GracefullTimeout for worker threads               |
|55148|Inf|Nor|2013-06-26|Error during SSL Handshake with remote server     |
|55152|New|Nor|2013-06-28|graceful restart adjusts to new balancer members, |
|55156|New|Nor|2013-06-28|mod_cache not respecting s-maxage cache-control he|
|55178|New|Nor|2013-07-01|[PATCH] mod_authnz_ldap SASL authentication suppor|
|55192|New|Trv|2013-07-03|htaccess error messages missing request context   |
|55193|New|Min|2013-07-03|ErrorLogFormat is ignored by some modules         |
|55226|New|Enh|2013-07-09|Request for "domain cluster" feature for mod_proxy|
|55234|New|Maj|2013-07-10|Working of attribute "protocol" attribute "protoco|
|55276|Inf|Enh|2013-07-17|Add REST API for load balancer for dynamic registr|
|55278|New|Nor|2013-07-18|mod_session's cookie may be empty, is repeated twi|
|55284|New|Nor|2013-07-20|repeatable segv                                   |
|55286|New|Nor|2013-07-21|Floating point exception (8) in mod_auth_digest   |
|55293|New|Nor|2013-07-22|Incorrect default MIME type for .woff fonts       |
|55306|New|Nor|2013-07-25|Error when copying svn repository, which contains |
|55323|New|Nor|2013-07-29|Double unescaped uri in sub request handler       |
|55327|New|Nor|2013-07-30|Segmentation fault when stopping Apache 2.4.6 norm|
|55340|New|Maj|2013-08-01|Listen for valid, unconfigured IP address passes c|
|55344|New|Nor|2013-08-02|missing ap_hook_monitor on windows                |
|55346|New|Nor|2013-08-02|When on filled quota filesystem, mod_fcgid init in|
|55348|New|Nor|2013-08-02|%h is not changed in logging, only %a             |
|55351|New|Enh|2013-08-04|allow ProxyPassReverseCookieDomain to automaticall|
|55362|New|Nor|2013-08-05|Apache httpd sends "400 Bad Request" to client due|
|55379|New|Min|2013-08-07|htdigest -c doesn't behave as described anymore   |
|55394|New|Nor|2013-08-09|apache 2.4 randomy crashes with signal 6          |
|55401|New|Enh|2013-08-11|document that force-proxy-request-1.0 implies prox|
|55415|New|Maj|2013-08-14|Proxy loop caused by ProxyErrorOverride and ErrorD|
|55431|New|Nor|2013-08-16|mod_negotation does not force the mime type listed|
|55433|New|Nor|2013-08-16|mod_proxy ignores final status code for aborted re|
|55443|Inf|Maj|2013-08-17|never gives 300 multiple choices                  |
|55445|New|Maj|2013-08-18|mod_socache_memcache ignores expiry, creating eter|
|55447|New|Enh|2013-08-18|make type-maps usable again, by making them access|
|55448|New|Nor|2013-08-19|segfault in set_max_workers at event.c:3194 on SIG|
|55449|New|Maj|2013-08-19|AH01185: worker slotmem_create failed --> slotmem |
|55452|New|Maj|2013-08-19|Redirect                                          |
|55458|New|Enh|2013-08-20|allow to configure what mod_ssl responds when one |
|55460|New|Enh|2013-08-21|allow service names to be used in the Listen direc|
|55467|New|Nor|2013-08-21|Support for OpenSSL custom TLS extensions and supp|
|55523|New|Trv|2013-09-04|auth_groupfile error log on access even though suc|
|55535|Inf|Nor|2013-09-08|incorrect check state parametr                    |
|55540|New|Cri|2013-09-09|mod_proxy gzip chunked issue (sample site provided|
|55549|New|Min|2013-09-11|AuthLDAPSubGroupAttribute doesn't do anything     |
|55550|New|Nor|2013-09-11|AuthLDAPSubGroupClass checking is very inefficient|
|55556|New|Nor|2013-09-13|apachebench (ab) doesn't use so_reuseaddr         |
|55557|New|Nor|2013-09-14|Some cppcheck reports                             |
|55573|New|Enh|2013-09-19|FileETag needs MTimeSeconds, MTime with granularit|
|55581|New|Enh|2013-09-22|Support concurrent connections to same FastCGI pro|
|55590|Inf|Maj|2013-09-24|second commit is failing if space is in file name |
|55596|New|Enh|2013-09-25|Add date format used by Expires header            |
|55607|New|Enh|2013-09-28|Re-set HOME environment variable to directory from|
|55615|New|Nor|2013-09-30|Connections are starved and not balanced when conc|
|55619|New|Nor|2013-10-02|Apache httpd reported 500 internal error when uplo|
|55627|New|Min|2013-10-04|Remove unnecessary APLOGNO() for trace logging per|
|55636|Inf|Cri|2013-10-07|long lost child came home - Apache is not respondi|
|55646|Inf|Nor|2013-10-10|non-2xx responses are not considered errors       |
|55654|New|Nor|2013-10-15|Extract variables from configuration without start|
|55670|New|Min|2013-10-18|Startup may fail silently at post_config          |
|55673|New|Nor|2013-10-18|httpd fails to start with SSLProxyMachineCertifica|
|55680|New|Enh|2013-10-20|online manual directory option doesn't exist      |
|55698|New|Maj|2013-10-24|Apache 2.2 + mod_fcgid 2.3.7 (CentOS 6.4) graceful|
|55700|New|Enh|2013-10-24|add something like RewriteOptions InheritDown     |
|55707|New|Nor|2013-10-25|SSLProtocol directive seem to be ignored over diff|
|55708|New|Nor|2013-10-25|Access violation in msvcrt.dll when calling getenv|
|55711|New|Min|2013-10-28|--enable-foo doesn't enable foo                   |
|55712|New|Nor|2013-10-28|Relative <!--#include virtual="../file.shtml"--> g|
|55720|New|Enh|2013-10-29|separate LDAP Bind timeout from LDAPTimeout       |
|55738|New|Nor|2013-11-03|PVS-Studio: few issues                            |
|55763|New|Nor|2013-11-09|raise roots soft RLIMIT_NPROC on linux for high ma|
|55774|New|Nor|2013-11-13|ab: optionally accept tls client certificate      |
|55781|New|Nor|2013-11-15|ajp_read_header: ajp_ilink_receive failed; 120006)|
|55786|New|Maj|2013-11-16|SSLVerifyClient and OptRenegotiate result in a 403|
|55787|New|Maj|2013-11-16|Chroot fails with "Cannot chroot when not started |
|55790|New|Maj|2013-11-17|mod_fcgid lockfile hardcoded to be in /tmp        |
|55793|New|Enh|2013-11-18|DTrace/SystemTap support                          |
|55808|New|Nor|2013-11-21|File integrity verification using MD5 and SHA1    |
|55819|Inf|Nor|2013-11-27|Closing connection behaviour                      |
|55828|New|Cri|2013-11-28|Httpd not start if use ProxyPass balancer://      |
|55834|New|Maj|2013-12-02|Apache does not honor the openssl library path giv|
|55838|New|Nor|2013-12-03|PHP files are being executed instead of downloaded|
|55841|New|Nor|2013-12-04|Misleading news items on bugfix releases ("This ve|
|55856|New|Nor|2013-12-08|YYEMPTY (-2) used as index into yytname (const arr|
|55866|New|Nor|2013-12-11|When ProxyPreserveHost is on, SSL expects the wron|
|55878|New|Nor|2013-12-12|mod_fcgid kills spawned processes too early       |
|55881|New|Nor|2013-12-13|segmentation fault at proxy_util.c:1546           |
|55883|New|Enh|2013-12-14|string callers of ap_expr should be able to transf|
|55887|New|Maj|2013-12-16|In Windows apache, when user access to /con, apach|
|55898|New|Enh|2013-12-17|[RFE] listen on unix socket?                      |
|55914|New|Reg|2013-12-20|child exit segmentation fault after apache gracefu|
|55919|New|Nor|2013-12-22|EPREFIX and dynamic modules                       |
|55942|New|Nor|2014-01-01|400 - Bad Request on POST (Windows Server 2012 Hyp|
|55952|New|Nor|2014-01-05|ab: SSL keep-alive fails with apr_pollset_poll: Th|
|55962|New|Enh|2014-01-06|mod_remoteip should not allow an external proxy to|
|55963|New|Nor|2014-01-07|Add application/ld+json to mime.types             |
|55981|Opn|Nor|2014-01-09|mod_mbox hang on some e-mails on user@openoffice.a|
|55985|Opn|Nor|2014-01-10|apache does not reopen logs when multiple graceful|
|55989|Opn|Enh|2014-01-11|write to error log upon RewriteRule [F]orbidden   |
|55991|New|Nor|2014-01-12|mod_charset_lite doesn't bail out on non-identity |
|56009|Inf|Cri|2014-01-14|Memory leak in httpd 2.4.3 over time with persista|
|56014|New|Nor|2014-01-15|MOd rewrite CO Cookie method the lifetime flag not|
|56028|New|Enh|2014-01-17|Add http/1.0, http/1.1 NPN advertisement to enable|
|56034|New|Nor|2014-01-20|CPU consumption due to circular linked list in ap_|
|56040|New|Enh|2014-01-21|should be able to remove Max-Age cookie parameter |
|56041|New|Enh|2014-01-21|should be able to disable session expiry increment|
|56052|New|Nor|2014-01-22|ap_session_load called multiple times for expired |
|56055|New|Nor|2014-01-23|Route is not extracted properly when a session coo|
|56064|New|Enh|2014-01-25|Optimize PNGs                                     |
|56067|New|Nor|2014-01-27|FallbackResource doesn't work if directory exists |
|56081|New|Maj|2014-01-28|Apache 2.2.26 SIGSEGVs when POST'ing data         |
|56091|Inf|Nor|2014-01-30|SSL handshake error when httpd compiled on Oracle |
|56098|New|Nor|2014-02-01|duplicate cookie                                  |
|56101|New|Cri|2014-02-03|Apache 2.4.6 ceases processing requests (scoreboar|
|56102|New|Nor|2014-02-03|SSL_CLIENT_S_DN_x509_0 is undefined in the environ|
|56109|New|Nor|2014-02-05|Cannot increase the read limit                    |
|56113|New|Nor|2014-02-06|dist commit messages missing from mail-archives di|
|56131|New|Nor|2014-02-12|ProxyPassReverse / zealously replaces Location hea|
|56135|New|Nor|2014-02-13|Add DC to list of x509 components                 |
|56152|New|Nor|2014-02-18|ProxyBlock does not accept network addresses      |
|56176|New|Nor|2014-02-21|mod_substitute truncates the response body if the |
|56188|New|Nor|2014-02-25|mod_proxy_fcgi does not send FCGI_ABORT_REQUEST on|
|56209|New|Nor|2014-03-03|Uninitialised variables in os/win32/ap_regkey.c   |
|56226|Ver|Nor|2014-03-06|per VirtualHost KeepAliveTimeout is not recognized|
|56229|New|Enh|2014-03-06|ocsp ProxyHost and ProxyPort support              |
|56230|New|Nor|2014-03-07|mod_access_compat can log a bogus client denied me|
|56235|New|Nor|2014-03-07|quotes should be optional around expr             |
|56247|New|Cri|2014-03-12|semaphore creation for proxypass                  |
|56250|New|Nor|2014-03-12|sbindir in config.layout for Apache has bin instea|
|56251|New|Nor|2014-03-12|Increase maximum length of FcgidInitialEnv string |
|56252|New|Enh|2014-03-12|make install as privileged user creates files not |
|56262|New|Nor|2014-03-14|ab does not work with extremely long cookies      |
|56264|New|Trv|2014-03-14|Confusing error with .htaccess rewrite to proxy wh|
|56270|New|Enh|2014-03-15|--with-ssl=/foo w/o pkgconfig needs help on AIX 64|
|56288|New|Enh|2014-03-19|rewrite URLs in style attributes                  |
|56289|New|Nor|2014-03-19|Buffer overflow in mod_proxy_html's string replace|
|56308|New|Nor|2014-03-24|1 second delay in handle request kills performance|
|56312|New|Nor|2014-03-25|Can't configure different balancing workers that c|
|56314|New|Nor|2014-03-25|exiting from MPM-worker child caused assert in apr|
|56326|New|Nor|2014-03-27|cache_quick_handler does not serve responses with |
|56331|New|Nor|2014-03-29|windows 'access denied' during revalidaton of reso|
|56333|New|Enh|2014-03-31|API to resume a SUSPENDED connection              |
|56362|New|Maj|2014-04-08|ldaps only works with port 636. Non-standard port |
|56379|New|Nor|2014-04-09|Number of columns in the results returned from pgs|
|56395|New|Enh|2014-04-11|Allow SERVER_ADDR environment variable to be optio|
|56404|New|Nor|2014-04-12|endless loop  when connect to a website(https)  wh|
|56413|New|Blk|2014-04-15|can not restart httpd on centos 5.10 64bit        |
|56422|New|Nor|2014-04-17|authnz_ldap with other forms of authn can fail req|
|56457|New|Nor|2014-04-25|mod_proxy_html.c: 2 * cut'n'paste errors          |
|56473|New|Nor|2014-04-30|ETags don't change when headers do                |
|56475|New|Enh|2014-04-30|Allow TLS record size to be configured            |
|56483|New|Enh|2014-05-02|add disableKeepAlivePercentage similar to tomcat h|
|56493|New|Min|2014-05-06|mod_expires should not set expires in future for s|
|56495|New|Nor|2014-05-06|Application behind mod_proxy does not get SessionH|
|56500|Opn|Enh|2014-05-07|vhosts priority order with wildcard               |
|56504|New|Nor|2014-05-08|cannot build static support binaries              |
|56508|New|Nor|2014-05-09|Requiring SNI - SSLStrictSNIVHostCheck semantics  |
|56517|New|Enh|2014-05-12|Virtualhosts cannot inherit parent CustomLog      |
|56528|New|Enh|2014-05-15|"bad flags delimiter" - improve helpfulness       |
|56541|New|Nor|2014-05-18|Proxy 502's on large file post requests           |
|56559|New|Nor|2014-05-25|multiple unix sockets in one virtualhost fails    |
|56569|New|Nor|2014-05-27|Null CRC in gzip footer with mod_cgid and ErrorDoc|
|56587|New|Nor|2014-06-03|Many VirtualHost's with SSLEngine On              |
|56590|New|Enh|2014-06-04|(REST-) API for configuring balancer manager remot|
|56594|Inf|Nor|2014-06-05|mod_authn_dbd, mod_dbd and mod_ssl                |
|56598|New|Nor|2014-06-06|Content-Length header should be always interpreted|
|56621|New|Nor|2014-06-13|Rotatelogs.exe first start                        |
|56622|New|Nor|2014-06-13|mod_reqtimeout incorrectly applies timeouts to CON|
|56626|New|Nor|2014-06-15|Add info about rotatelogs to log rotation document|
|56633|New|Nor|2014-06-16|mod_auth_basic breaks mod_autoindex               |
|56645|New|Maj|2014-06-19|socket callback with timeout callback causes infin|
|56664|New|Nor|2014-06-24|Proxy retry timeout does not cope with system time|
|56697|New|Maj|2014-07-04|status page still shown while blocked             |
|56718|New|Nor|2014-07-14|Cleanup request Host headers when absolute URI are|
|56719|New|Nor|2014-07-14|parallel requests get served with delays          |
|56738|New|Enh|2014-07-17|Ability to extract route from cookie with regexp  |
|56740|New|Nor|2014-07-18|suspended_count not maintained properly with wstun|
|56750|New|Enh|2014-07-20|SuexecUserGroup replacement                       |
|56751|New|Maj|2014-07-20|Fails to properly mitigate Slow Post DoS attack   |
|56753|New|Nor|2014-07-21|mod_lua.so: symbol luaL_openlib: referenced symbol|
|56778|New|Nor|2014-07-28|while running make command i got this error       |
|56794|New|Nor|2014-07-31|Added AuthDBDFullAuthQuery option                 |
|56795|Inf|Nor|2014-07-31|Apache 2.4.10 Program received signal SIGPIPE, Bro|
|56818|Inf|Nor|2014-08-05|SetEnvIf may set invalid string length on empty st|
|56843|New|Enh|2014-08-12|Support different OCSP stapling max ages          |
|56868|New|Nor|2014-08-18|relative LuaRoot broken                           |
|56879|New|Nor|2014-08-22|Information disclosure                            |
|56889|New|Nor|2014-08-26|Close state never dies                            |
|56918|Opn|Blk|2014-09-06|error: 'ap_copy_scoreboard_worker' undeclared here|
|56926|New|Nor|2014-09-08|Filename causes AH02599 slotmem issue             |
|56933|New|Min|2014-09-09|not sure it's an appache bug : some browser want t|
|56942|New|Reg|2014-09-10|Unable to implement TRANSFER-CHUNKED:ENCODING with|
|56943|New|Nor|2014-09-10|mod_proxy_connect - AH02447: err/hup on backconn  |
|56977|New|Maj|2014-09-12|segfaults when using mod_mem_cache + mod_disk_cach|
|56986|New|Blk|2014-09-17|chunked Transfer-Encoding forbidden: /test/test.dl|
|57014|New|Cri|2014-09-24|Incorrect test for CC_FOR_BUILD prevents build (on|
|57023|New|Nor|2014-09-26|Socache shmcb don't cache file bigger than 11k    |
|57028|New|Enh|2014-09-27|mod_spdy - support Apache 2.4                     |
|57044|New|Nor|2014-09-29|[PatchAvailable] Use base64url in mod_unique_id ('|
|57045|New|Nor|2014-09-30|dumpio output strings are missing                 |
|57046|New|Enh|2014-09-30|Add additional parameter to enable check URL befor|
|57056|New|Maj|2014-10-03|Rewrite port is taken into hostname               |
|57067|New|Nor|2014-10-08|A proxy worker both standalone and balancer member|
|57069|New|Nor|2014-10-08|apache ssl timeout during chunked request in rever|
|57073|New|Cri|2014-10-09|Intermittent Connection Issues using default httpd|
|57085|New|Enh|2014-10-14|Implement Proxy Protocol in httpd                 |
|57087|New|Nor|2014-10-14|mod_proxy_fcgi doesn't send cgi CONTENT_LENGTH var|
|57100|Ver|Nor|2014-10-16|"SSLProtocol ALL" is ignored for virtual hosts    |
|57101|New|Enh|2014-10-16|[PATCH] Better error reporting when child spawn fa|
|57109|New|Nor|2014-10-17|GPG verification examples are wrong               |
|57119|Opn|Enh|2014-10-20|Suppress address reuse / DNS cache in mod_proxy   |
|57121|New|Nor|2014-10-21|ocsp stapling should not pass temporary server out|
|57131|New|Nor|2014-10-22|OCSP Stapling scalability concern                 |
|57159|New|Min|2014-10-28|mod_ssl OCSP Stapling directives don't support per|
|57160|New|Nor|2014-10-29|httxt2dbm doesn't generate files on NAS           |
|57174|New|Nor|2014-10-31|Update windows visual studio build                |
|57210|New|Nor|2014-11-14|LuaHookMapToStorage not firing in per-directory co|
|57211|New|Enh|2014-11-14|Config-time options                               |
|57212|Opn|Nor|2014-11-14|Headers returned by scripts are limited to 8190 by|
|57218|New|Nor|2014-11-15|[Feature Request] Apache Bench (AB) to output a cs|
|57219|New|Nor|2014-11-15|ApacheBench quits unexpectedly with high concurren|
|57220|New|Nor|2014-11-15|[Feature Request] Add option to ApacheBench to giv|
|57228|New|Nor|2014-11-17|glibc detected *** httpd: double free or corruptio|
|57229|New|Maj|2014-11-17|mod_sed dies on long lines                        |
|57286|New|Nor|2014-11-29|Symbolic links are not honoured                   |
|57298|New|Min|2014-12-02|RewriteBase inside FilesMatch behaves oddly       |
|57299|New|Enh|2014-12-02|mod_session_dbd should not make a database call pe|
|57300|New|Enh|2014-12-02|mod_session_dbd should not save the session at eac|
|57301|New|Enh|2014-12-02|Add SessionMaxAgeAbsolute Directive               |
|57304|Inf|Nor|2014-12-03|MySQL DBD Authentication Incompatible with SSL    |
|57311|New|Nor|2014-12-04|BalancerMember enclosed by <If> gives syntax error|
|57313|New|Nor|2014-12-05|The DefaultType directive has been removed        |
|57327|New|Nor|2014-12-08|mod_ssl seg fault on exit                         |
|57334|Ver|Maj|2014-12-09|Segmentation fault in SSL_renegotiate at ssl_lib.c|
|57337|New|Nor|2014-12-10|Content negotiation fails with conditional Redirec|
|57339|New|Enh|2014-12-10|ErrorLogFormat doesn't allow logging in Internet d|
|57360|New|Nor|2014-12-17|Fail gracefully on certificate/key mismatch       |
|57372|New|Nor|2014-12-19|httpd will lookup every home directory while start|
|57374|Ver|Nor|2014-12-19|Event MPM: Wrong KeepAliveTimeout when system cloc|
|57379|New|Nor|2014-12-20|[patch] Makefile.in  with mpm-shared, cgi and cgid|
|57383|New|Cri|2014-12-21|Error retrieving Report: An Existing connection wa|
|57386|New|Blk|2014-12-22|html5 lost some comments                          |
|57398|New|Maj|2014-12-26|AH01075: Error dispatching request to : (passing b|
|57399|New|Nor|2014-12-28|Many unnecessary CPU wakeups per second           |
|57406|New|Nor|2014-12-31|cgi-bin script is not executing                   |
|57412|New|Maj|2015-01-04|rewrite rules causes duplicate requests           |
|57416|New|Nor|2015-01-06|htcacheclean thinks the cache is smaller than it a|
|57424|Opn|Nor|2015-01-07|mod_rewrite not using ap_context_document_root    |
|57436|New|Enh|2015-01-12|Option to strip extra data after websocket request|
|57439|New|Enh|2015-01-13|Allow to change body timeout per location         |
|57448|New|Nor|2015-01-16|SSI <!--#set --> cannot capture backreferences fro|
|57453|New|Maj|2015-01-17|403 error when virtualhost configured with non-exi|
|57471|New|Nor|2015-01-20|Apache 2.4.10 Compilation fails when compiling aga|
|57477|New|Nor|2015-01-21|mod_auth_digest AH00052: child pid $pid exit signa|
|57483|New|Nor|2015-01-22|Omit "Keep-Alive" header on 1.1 connections       |
|57492|New|Nor|2015-01-24|incomplete chunked-transfered request body is not |
|57506|New|Nor|2015-01-27|<If> directive doesn't work within a <Location> se|
|57510|New|Enh|2015-01-28|Engine keyform support for private keys           |
|57511|New|Maj|2015-01-28|Opening plain TCP Socket on SSL port causes denial|
|57515|New|Nor|2015-01-30|Define/Undefine don't work reasonably outside of g|
|57519|New|Nor|2015-02-01|change SSLv2 to SSLv3 or remove SSLv2 support allt|
|57526|Opn|Maj|2015-02-03|Apache 2.2.29_openssl-1.0.1k_x86_64 Error creating|
|57529|Opn|Nor|2015-02-03|htcacheclean doesn't show the cached URL with '-a'|
|57585|New|Nor|2015-02-13|httpd fails to start if there is an IncludeOptiona|
|57590|New|Nor|2015-02-18|loading mod_proxy_http makes rewriteRule's [proxy]|
|57591|New|Nor|2015-02-18|DirectoryIndex directive cannot be overwritten    |
|57616|New|Maj|2015-02-23|AB - DNS roundrobin support                       |
|57624|New|Enh|2015-02-23|Provide support for http/2.0                      |
|57631|New|Nor|2015-02-24|Useless test in acinclude.m4                      |
|57632|New|Nor|2015-02-24|mod_systemd passes invalid default to APACHE_MODUL|
|57635|New|Nor|2015-02-25|meta-refresh is not rewritten by mod_proxy_html   |
|57636|New|Nor|2015-02-25|URLs without protocol are not rewriten by mod_prox|
|57641|New|Maj|2015-02-27|mod_substitute: Invalid merge order               |
|57646|New|Enh|2015-02-27|SSLEngine inside If directive                     |
|57660|New|Trv|2015-03-04|AB - free memory allocated by xmalloc and xcalloc |
|57680|New|Nor|2015-03-09|SSLSessionCacheTimeout has no effect              |
|57685|New|Nor|2015-03-10|Requests are denied while the mod_cgid daemon star|
|57691|New|Nor|2015-03-12|mod_proxy/proxy_util confuses UDS scheme with HTTP|
|57695|New|Nor|2015-03-12|[core:warn] [pid 1120] (101)Network is unreachable|
|57710|New|Nor|2015-03-15|Wildcard matching for logging headers             |
|57725|New|Enh|2015-03-18|ApacheBench: include http status code in gnuplot o|
|57742|New|Nor|2015-03-23|"reliable piped logging" doesn't work for ErrorLog|
|57745|New|Nor|2015-03-23|httpd exits 1 with no stderr when proxy_balancer_m|
|57746|New|Nor|2015-03-23|Apache hangs on startup using MPM event           |
|57751|Inf|Maj|2015-03-24|Problems with proxy reverse to websockets         |
|57756|New|Enh|2015-03-25|Config options for handling of pipelined request  |
|57757|New|Cri|2015-03-25|extern apr_xlate_t *ap_locale_to_ascii variable gi|
|57771|New|Nor|2015-03-27|cleanup_script uses incorrect connection ID       |
|57774|Inf|Nor|2015-03-28|httpd.conf <IfModule proxy_html_module> content er|
|57777|New|Nor|2015-03-30|Security concerns with documentation of AddHandler|
|57781|New|Nor|2015-03-31|disable reconnection after connection error       |
|57784|New|Enh|2015-03-31|[RFE] Multiple ErrorLog directives                |
|57785|Opn|Nor|2015-04-01|REDIRECT_URL is not suitable for use in server-gen|
|57795|Opn|Maj|2015-04-07|mod_proxy_wstunnel sometimes does not connect and |
|57800|New|Nor|2015-04-09|High CPU usage in ap_core_output_filter           |
|57807|New|Enh|2015-04-13|Build-configurable environment variable length    |
|57810|New|Nor|2015-04-13|Should apache ignore difference in trailing dot be|
|57813|New|Nor|2015-04-14|Rewrite 'pre-compressed content' recipe using 2.4 |
|57814|New|Nor|2015-04-14|Teach mod_deflate how to serve pre-comressed conte|
|57819|New|Nor|2015-04-15|Need a conventions document                       |
|57832|New|Enh|2015-04-19|Reduction of response splitting attacks consequenc|
|57853|Inf|Nor|2015-04-24|mod_proxy_http sends request with header 'Expect: |
|57876|New|Reg|2015-04-30|logresolve.exe on any Windows immediately crashes |
|57878|New|Nor|2015-04-30|Using UTF-8 for all languages, and avoiding html-e|
|57895|New|Min|2015-05-05|missing m4a mimeType in mime.types                |
|57911|New|Min|2015-05-09|Rewrite documentation unclear or wrong about what |
|57927|New|Maj|2015-05-13|Segmentation Fault at proxy_util.c:994            |
|57933|New|Min|2015-05-18|apr_port_t returns constant                       |
|57941|New|Nor|2015-05-21|config.status: line 331: syntax error near unexpec|
|57949|New|Enh|2015-05-25|new mod_ssl environment variable SSL_{CLIENT|SERVE|
|57950|New|Nor|2015-05-26|[patch] buildconf change hint in build to newer ap|
|57960|New|Nor|2015-05-27|PUT truncates response body; status_line appears t|
|57976|New|Cri|2015-05-30|Server threads stale when sending 500 status with |
|57978|New|Nor|2015-06-01|unix:/ works with any number of / slashes  except |
|57979|New|Nor|2015-06-01|can not turn change log level for mod_filter      |
|57996|New|Nor|2015-06-03|Symlinks erroneously not followed when target inod|
|57997|New|Nor|2015-06-03|Threads started during child_init don't block sign|
|57999|New|Nor|2015-06-04|ap_getparents() may remove start slash of uri     |
|58001|New|Enh|2015-06-04|Implement Forwarded header (RFC 7239) to mod_proxy|
|58007|New|Nor|2015-06-06|400 Bad Request with fully qualified domain name o|
|58025|New|Enh|2015-06-11|mod_authz_dbd : new dbd-query and AuthzDBDQuery op|
|58026|New|Nor|2015-06-11|return 421 status code when SNI and Host: header d|
|58044|New|Cri|2015-06-16|Error sintax 'lua_dump'                           |
|58050|New|Nor|2015-06-17|ErrorDocument does not always work                |
|58073|New|Nor|2015-06-24|Extremely long time for graceful restart          |
|58089|New|Nor|2015-07-01|mod_authz_host uses proxy IP even when mod_remotei|
|58097|New|Enh|2015-07-03|[feat] Preserve original connecting IP            |
|58101|New|Nor|2015-07-05|DeflateCompressionLevel inside vhost resets logfor|
|58107|New|Blk|2015-07-06|Httpd crashes on startup every time, dump file att|
|58109|New|Nor|2015-07-06|Apache on windows cannot handle the hash symbol (#|
|58118|Inf|Min|2015-07-09|mod_proxy_fcgi logs 503 when user aborts connectio|
|58120|New|Nor|2015-07-10|ProxyPassInherit does not work as expect          |
|58121|New|Nor|2015-07-10|ProxyHTMLMeta seems to ignore all <meta http-equiv|
|58129|New|Nor|2015-07-12|man pages are not generated correctly             |
|58132|New|Nor|2015-07-12|non-standard, non-traditional man page layout make|
|58135|New|Nor|2015-07-14|mod_cache sends client "if-Modified-Since" to back|
|58141|New|Nor|2015-07-15|Apache Service doesn't start when rotatlogs.exe pa|
|58142|New|Nor|2015-07-15|authz_core ignores loglevel                       |
|58158|New|Nor|2015-07-21|Not honoring HTTP spec with regard to Accept-Encod|
|58168|New|Enh|2015-07-21|Would like full request evaluation support in Rewr|
|58171|New|Nor|2015-07-22|ap_session_save saves the wrong session after a de|
|58177|New|Enh|2015-07-24|Mod Proxy forward trailers in http chunked request|
|58180|New|Enh|2015-07-24|ErrorDocument original URL in subsequent <Location|
|58181|New|Enh|2015-07-25|mod_expire should allow "minus" keyword same like |
|58188|New|Nor|2015-07-28|http2 mod_lua: support build with lua 5.2+        |
|58197|New|Nor|2015-07-31|apr-util-1.5.4 build against openldap - "could not|
|58225|New|Reg|2015-08-08|intermitant segfault 11 in session_identity_encode|
|58226|New|Nor|2015-08-08|XSS in Error Page                                 |
|58231|New|Nor|2015-08-11|RewriteCond can add "Host" to the Vary-Header     |
|58235|New|Enh|2015-08-12|Ability to allow from domain but with using forwar|
|58243|New|Nor|2015-08-14|rotatelogs goes infinite at startup               |
|58248|New|Nor|2015-08-17|Error 404 in use some characters of utf8 in url   |
|58257|New|Nor|2015-08-18|require ldap-group does not work if account-fullna|
|58278|Inf|Blk|2015-08-24|apache - mod_security Issue : apache no releasing |
|58280|New|Nor|2015-08-24|Backend connection not closed until timeout if cli|
|58288|New|Blk|2015-08-27|Semaphore amount increase until crash when enablin|
|58292|New|Nor|2015-08-27|FallbackResource breaks chunked encoding sometimes|
|58304|New|Nor|2015-08-30|Unexpected Warnings from Macro Use in 2.4         |
|58305|New|Nor|2015-08-30|mod_cgi documentation not clear about what is pass|
|58306|New|Nor|2015-08-30|documentation needs to make it clear which directi|
|58307|New|Nor|2015-08-31|Segmentation fault in child in "read(__nbytes, __b|
|58317|New|Min|2015-09-02|Error message AH01630 is missing file name on deny|
|58334|New|Min|2015-09-06|WebDAV HTTP access does not include meta tag for c|
|58335|New|Nor|2015-09-07|mod_authnz_ldap mismatch                          |
|58343|New|Nor|2015-09-08|The pdf files come up as a blank page.            |
|58354|New|Maj|2015-09-10|(20014)Internal error (specific information not av|
|58356|New|Blk|2015-09-10|Session jumping due to incorrect route            |
|58364|New|Reg|2015-09-11|Apache Server is restarted time to time (Release 2|
|58417|New|Min|2015-09-16|ApacheBench (ab) won't display Server Software of |
|58419|New|Nor|2015-09-16|ApacheBench (ab) doesn't work with keep-alives aga|
|58423|New|Reg|2015-09-17|Apache >= 2.4.8 PCRE_DUPNAMES causes build failure|
|58467|New|Maj|2015-09-29|Environment Variables in ProxyHTMLURLMap produces |
|58475|New|Nor|2015-10-03|Support append/merge with semicolon-separated head|
|58488|New|Nor|2015-10-08|Stoped PHP-FPM pool in multi-pool system with comu|
|58491|New|Maj|2015-10-09|Core dumps appear when the load increases         |
|58492|Inf|Nor|2015-10-09|I think LDAPConnectionPoolTTL is not being honored|
|58498|New|Nor|2015-10-16|Apache 2.4.17: Regression with mod_autoindex (in c|
|58500|New|Nor|2015-10-16|dav_fs not enabled by default                     |
|58503|New|Cri|2015-10-16|segfault in apr_brigade_cleanup() under high load |
|58509|New|Trv|2015-10-20|2.4.17-dev introduces second core.c handler at sta|
|58513|New|Maj|2015-10-21|httpd code documentation is missing               |
|58524|New|Nor|2015-10-23|mod_http2 segfaults when under heavy load         |
|58528|New|Nor|2015-10-23|AllowOverrideList None gets misparsed and .htacces|
|58529|New|Maj|2015-10-23|Segmentation fault after modifying a proxy Balance|
|58550|New|Enh|2015-10-26|During load, Apache 2.2.x with prefork MPM didn|
|58574|New|Nor|2015-11-02|Apache error AH01630 (client denied) but working  |
|58593|New|Nor|2015-11-06|mod_proxy wrong decision between http and ws      |
|58598|New|Enh|2015-11-08|Internal Server Error (500) when requesting non-ex|
|58602|New|Nor|2015-11-11|Priority issue on DirectoryMatch directive        |
|58604|New|Reg|2015-11-12|Plaintext auth broken in any Explicit FTP/AUTH TLS|
+-----+---+---+----------+--------------------------------------------------+
| Total 1552 bugs                                                           |
+---------------------------------------------------------------------------+

From dev-return-84544-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 16 11:41:36 2015
Return-Path: <dev-return-84544-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 709231869C
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 16 Nov 2015 11:41:36 +0000 (UTC)
Received: (qmail 76414 invoked by uid 500); 16 Nov 2015 11:41:36 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 76340 invoked by uid 500); 16 Nov 2015 11:41:36 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 76330 invoked by uid 99); 16 Nov 2015 11:41:36 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Nov 2015 11:41:36 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 7505BC141C
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 11:41:35 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.109
X-Spam-Level:
X-Spam-Status: No, score=-0.109 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id WEUN5JFAbiBF for <dev@httpd.apache.org>;
	Mon, 16 Nov 2015 11:41:27 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 1BE5220B90
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 11:41:27 +0000 (UTC)
Received: from [192.168.178.41] (unknown [84.189.81.103])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 9DD4E15A0396
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 12:41:19 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447674079; bh=9PcxiN6xyZEPOqsBw+wRjkK74RgxGNc49+IJPDzW2C0=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=bbonDCR1ASaotY0GbUfkXYTPpUpgqxQz9djBMTwgzLjnLPF5fgtTJB7UgzGwdOpDP
	 YoAxLE1TCS+d/TppCwT0ukhOdJIISjur+jDFMWVFoblpYej6MZ9EICLPPendTESPy8
	 DXlaMoUXAV0aB9SKIdQFEbNZhwP2+jgRmCTZUsAw=
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: mod_http2 / H2WindowSize default
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <008501d11ec5$313f5600$93be0200$@qqmail.nl>
Date: Mon, 16 Nov 2015 12:41:18 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <CF636B95-51D9-40CD-91B3-51B883DD9BDC@greenbytes.de>
References: <008501d11ec5$313f5600$93be0200$@qqmail.nl>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)


> Am 14.11.2015 um 11:14 schrieb Bert Huijben <bert@qqmail.nl>:
>=20
>                 Hi,
> =20
> I was wondering why mod_http2 currently uses a default window size of =
65536.

Pure mistake on my part. I put this in almost at the start of =
development and never reviewed this.

Thanks for catching it. I am just about to commit a change that
a) set the default to 65535
b) will not send a setting for it to the client unless it has been =
configured to have another value

I also removed the sending of the MAX_HEADER_LIST_SIZE, since it is not =
enforced in any way currently.

Hope this change works for you.=20

Cheers,

  Stefan
> =20
> The http2 protocol defines a default window size of 65535, just 1 byte =
less than the current default. Changing the default requires =
transferring this setting to every client in the initial settings frame, =
while sticking to 65535 would allow not doing that.
> =20
> I can imagine that a completely different default makes sense (and =
allowing to configure this certainly does), but this 1 byte of the =
protocol default doesn=E2=80=99t make much sense to me.
> =20
> This is just 6 bytes wasted in the handshake for no obvious benefit.
> =20
> =20
> I would recommend changing the default to 65535 or perhaps to =
something completely different. (1MB=E2=80=A6 Don=E2=80=99t know). But =
sending a setting that is less than 0.002% off the protocol default =
doesn=E2=80=99t make much sense to me.
> =20
> =20
> Note that this size is not really used by httpd itself. This size is =
used by clients that need to transfer request bodies to httpd. This =
number of bytes specifies the maximum number of bytes the client is =
allowed to send before it needs to receive a WINDOW_UPDATE from the =
server, allowing it to transfer more data.
> =20
> The client determines the default in the other direction.
> =20
> =20
>                 Bert


From dev-return-84545-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 16 13:21:06 2015
Return-Path: <dev-return-84545-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 90F9B18AE3
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 16 Nov 2015 13:21:06 +0000 (UTC)
Received: (qmail 70411 invoked by uid 500); 16 Nov 2015 13:21:05 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 70324 invoked by uid 500); 16 Nov 2015 13:21:05 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 70314 invoked by uid 99); 16 Nov 2015 13:21:05 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Nov 2015 13:21:05 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id C8BFEC5617
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 13:21:04 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.773
X-Spam-Level:
X-Spam-Status: No, score=-0.773 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.773, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id G-acVxbEGFRB for <dev@httpd.apache.org>;
	Mon, 16 Nov 2015 13:20:55 +0000 (UTC)
Received: from aserp1040.oracle.com (aserp1040.oracle.com [141.146.126.69])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id C8A7D441A4
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 13:20:54 +0000 (UTC)
Received: from userv0021.oracle.com (userv0021.oracle.com [156.151.31.71])
	by aserp1040.oracle.com (Sentrion-MTA-4.3.2/Sentrion-MTA-4.3.2) with ESMTP id tAGDKlAJ005701
	(version=TLSv1 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 13:20:47 GMT
Received: from aserv0121.oracle.com (aserv0121.oracle.com [141.146.126.235])
	by userv0021.oracle.com (8.13.8/8.13.8) with ESMTP id tAGDKkgA017696
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 13:20:47 GMT
Received: from abhmp0010.oracle.com (abhmp0010.oracle.com [141.146.116.16])
	by aserv0121.oracle.com (8.13.8/8.13.8) with ESMTP id tAGDKk8u031122
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 13:20:46 GMT
Received: from [10.159.129.232] (/10.159.129.232)
	by default (Oracle Beehive Gateway v4.0)
	with ESMTP ; Mon, 16 Nov 2015 05:20:46 -0800
To: dev@httpd.apache.org
From: Petr Sumbera <petr.sumbera@oracle.com>
Subject: mod_http2 copyright
Organization: Oracle Corporation
Message-ID: <5649D825.6040907@oracle.com>
Date: Mon, 16 Nov 2015 14:20:37 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Source-IP: userv0021.oracle.com [156.151.31.71]

Hi,

I see that Apache HTTPD 2.4.17 comes with new module mod_http2. Source 
files for this module have just following copyright:

Copyright 2015 greenbytes GmbH (https://www.greenbytes.de)

But NOTICE file doesn't mention it.

Is this correct or NOTICE file needs to be updated?

Thanks,

Petr

From dev-return-84546-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 16 16:30:59 2015
Return-Path: <dev-return-84546-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A203118365
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 16 Nov 2015 16:30:59 +0000 (UTC)
Received: (qmail 57808 invoked by uid 500); 16 Nov 2015 16:30:58 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 57736 invoked by uid 500); 16 Nov 2015 16:30:58 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 57726 invoked by uid 99); 16 Nov 2015 16:30:58 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Nov 2015 16:30:58 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id D1A6AC574B
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 16:30:57 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id CjwUklxh4JcV for <dev@httpd.apache.org>;
	Mon, 16 Nov 2015 16:30:48 +0000 (UTC)
Received: from mail-qk0-f174.google.com (mail-qk0-f174.google.com [209.85.220.174])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id A5FA020B90
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 16:30:47 +0000 (UTC)
Received: by qkfo3 with SMTP id o3so117304153qkf.1
        for <dev@httpd.apache.org>; Mon, 16 Nov 2015 08:30:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=XHJMgJmUoD5Edui6CeaC2u/t2sR/6fKRoF7kMLRlz50=;
        b=euH9vKv8zcVIlvYheEUIqBFWZDLu48ZCogqGIQwTdFdI7y9Uz+fADsK87zWAN4CIcX
         DdYM+2A9+gnz8Cj86+ChCcZFvN4IZK9Ei8M1XCBguEmA2Q4uZhcqZ41TcQOfVpVfudNT
         2Hz/WBew/sus72CeGCWN5vQPJWUrvatD0oSg+cjxJfMqY3DJpcryCauXQ7h/pE/Eb8Ue
         NvKOMOssH+a9RQX7DSh5z6BZvf+QV/8M5aL+Uy903IRy/WhlXGYvESjHnOzA3ddM22g4
         HydkXA2aGFvDmHCoJJZnvbyJYnuSzs9VcnM5XmbCqteYz6YsxPvkqiAdYiL2g9/75Ft8
         b9ZQ==
MIME-Version: 1.0
X-Received: by 10.140.95.66 with SMTP id h60mr37605625qge.14.1447691446521;
 Mon, 16 Nov 2015 08:30:46 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 16 Nov 2015 08:30:46 -0800 (PST)
In-Reply-To: <20151116151235.7749A3A0472@svn01-us-west.apache.org>
References: <20151116151235.7749A3A0472@svn01-us-west.apache.org>
Date: Mon, 16 Nov 2015 17:30:46 +0100
Message-ID: <CAKQ1sVNrJVq85db7YvnzZRpurkJKws8-KtELkMByNnzvG4=-8w@mail.gmail.com>
Subject: Re: svn commit: r1714602 - in /httpd/httpd/trunk/modules/http2:
 h2_bucket_eoc.c h2_conn.c h2_io.c h2_io.h h2_mplx.c h2_session.c h2_session.h
 h2_task.c h2_task.h
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Mon, Nov 16, 2015 at 4:12 PM,  <icing@apache.org> wrote:
> Author: icing
> Date: Mon Nov 16 15:12:35 2015
> New Revision: 1714602
>
> URL: http://svn.apache.org/viewvc?rev=1714602&view=rev
> Log:
> improvements in handling orphaned stream resources, where client prematurely closed it, guarantueed session shutdown, slave connections created 2.5-DEV style
>
[]
> Modified: httpd/httpd/trunk/modules/http2/h2_mplx.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_mplx.c?rev=1714602&r1=1714601&r2=1714602&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/modules/http2/h2_mplx.c (original)
> +++ httpd/httpd/trunk/modules/http2/h2_mplx.c Mon Nov 16 15:12:35 2015
> @@ -227,24 +227,22 @@ void h2_mplx_abort(h2_mplx *m)
>
>  static void io_destroy(h2_mplx *m, h2_io *io)
>  {
> -    if (io) {
> -        apr_pool_t *pool = io->pool;
> -        if (pool) {
> -            io->pool = NULL;
> -            apr_pool_clear(pool);
> -            if (m->spare_pool) {
> -                apr_pool_destroy(m->spare_pool);
> -            }
> -            m->spare_pool = pool;
> -        }
> -        /* The pool is cleared/destroyed which also closes all
> -         * allocated file handles. Give this count back to our
> -         * file handle pool. */
> -        m->file_handles_allowed += io->files_handles_owned;
> -        h2_io_set_remove(m->stream_ios, io);
> -        h2_io_set_remove(m->ready_ios, io);
> -        h2_io_destroy(io);
> -    }
> +    apr_pool_t *pool = io->pool;
> +    if (pool) {
> +        io->pool = NULL;
> +        apr_pool_clear(pool);
> +        if (m->spare_pool) {
> +            apr_pool_destroy(m->spare_pool);
> +        }
> +        m->spare_pool = pool;

One spare pool only?

Maybe we could then:
    if (m->spare_pool) {
        apr_pool_destroy(pool);
    }
    else {
       apr_pool_clear(pool);
       m->spare_pool = pool;
   }
?

> +    }
> +    /* The pool is cleared/destroyed which also closes all
> +     * allocated file handles. Give this count back to our
> +     * file handle pool. */
> +    m->file_handles_allowed += io->files_handles_owned;
> +    h2_io_set_remove(m->stream_ios, io);
> +    h2_io_set_remove(m->ready_ios, io);
> +    h2_io_destroy(io);

Looks like io is desallocated here (with apr_pool_clear/destroy()
above), can we still use it at that point?

>  }

Regards,
Yann.

From dev-return-84547-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 16 16:53:32 2015
Return-Path: <dev-return-84547-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7AA04184C7
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 16 Nov 2015 16:53:32 +0000 (UTC)
Received: (qmail 35534 invoked by uid 500); 16 Nov 2015 16:53:31 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 35454 invoked by uid 500); 16 Nov 2015 16:53:31 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 35444 invoked by uid 99); 16 Nov 2015 16:53:31 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Nov 2015 16:53:31 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 50573180A18
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 16:53:31 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.679
X-Spam-Level:
X-Spam-Status: No, score=0.679 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	KAM_ASCII_DIVIDERS=0.8, RCVD_IN_MSPIKE_H3=-0.01,
	RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id aSSF4hQFKnTx for <dev@httpd.apache.org>;
	Mon, 16 Nov 2015 16:53:30 +0000 (UTC)
Received: from mail-wm0-f46.google.com (mail-wm0-f46.google.com [74.125.82.46])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id D249E20C41
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 16:53:29 +0000 (UTC)
Received: by wmec201 with SMTP id c201so186663647wme.0
        for <dev@httpd.apache.org>; Mon, 16 Nov 2015 08:53:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=subject:to:references:from:message-id:date:user-agent:mime-version
         :in-reply-to:content-type:content-transfer-encoding;
        bh=MCPinmijjYOzjRgZRP8D0baBFObJ8CYqpykPFCblogw=;
        b=s6vTExXUs36f6Xg8pDqwA7F0jfvpKRuM9l0DQ0Fs4dkbgcrenXKrIgdAM7Qxc+fdGt
         99TtCtbxbq6Wiz4IytAeukNKvDpIO+xclAe2KzPiwvo0gOIz5xhuECPIDRUqMNis5gLz
         TF4qVz8wLCspogzEn32tLy0NbF6KNgoHasQWeN3WJXJe6HuRIdZrJv9MggKLuyhurOew
         FAFjSvbemi5yU/VIYwza7AX9P2E4egiwB5nQa4wXPAVcbvwycbR6jTY1P3UBswb+OgT5
         I7/TWSdmFhAqNQXqH954rSly8dToJH/w2CUW8R9qQuzZCD1VxFoN9FErSH/yOnhcv9t2
         +bZQ==
X-Received: by 10.28.16.72 with SMTP id 69mr8447138wmq.100.1447692808573;
        Mon, 16 Nov 2015 08:53:28 -0800 (PST)
Received: from [10.33.144.3] (nat-pool-gva-t.redhat.com. [209.132.186.32])
        by smtp.gmail.com with ESMTPSA id jh4sm35354819wjb.33.2015.11.16.08.53.27
        for <dev@httpd.apache.org>
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Mon, 16 Nov 2015 08:53:27 -0800 (PST)
Subject: Re: svn commit: r1650655 - in /httpd/httpd/branches/2.4.x: CHANGES
 STATUS modules/proxy/proxy_util.c
To: dev@httpd.apache.org
References: <20150109203751.20247AC0143@hades.apache.org>
From: jean-frederic clere <jfclere@gmail.com>
Message-ID: <564A0A06.1040300@gmail.com>
Date: Mon, 16 Nov 2015 17:53:26 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <20150109203751.20247AC0143@hades.apache.org>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit

On 01/09/2015 09:37 PM, jailletc36@apache.org wrote:
> Author: jailletc36
> Date: Fri Jan  9 20:37:50 2015
> New Revision: 1650655
> 
> URL: http://svn.apache.org/r1650655
> Log:
> Merge r1644503 from trunk
> 
>    * mod_proxy_ajp: Fix handling of the default port (8009) in the
>      ProxyPass and <Proxy> configurations.  PR 57259.
> 
> Submitted by: ylavic
> Reviewed by: ylavic, jim, covener
> Backported by: jailletc36
> 
> Modified:
>     httpd/httpd/branches/2.4.x/CHANGES
>     httpd/httpd/branches/2.4.x/STATUS
>     httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c
> 
> Modified: httpd/httpd/branches/2.4.x/CHANGES
> URL: http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/CHANGES?rev=1650655&r1=1650654&r2=1650655&view=diff
> ==============================================================================
> --- httpd/httpd/branches/2.4.x/CHANGES [utf-8] (original)
> +++ httpd/httpd/branches/2.4.x/CHANGES [utf-8] Fri Jan  9 20:37:50 2015
> @@ -22,6 +22,9 @@ Changes with Apache 2.4.11
>       request headers earlier.  Adds "MergeTrailers" directive to restore
>       legacy behavior.  [Edward Lu, Yann Ylavic, Joe Orton, Eric Covener]
>  
> +  *) mod_proxy_ajp: Fix handling of the default port (8009) in the
> +     ProxyPass and <Proxy> configurations.  PR 57259.  [Yann Ylavic].
> +
>    *) mpm_event: Avoid a possible use after free when notifying the end of
>       connection during lingering close.  PR 57268.  [Eric Covener, Yann Ylavic]
>  
> 
> Modified: httpd/httpd/branches/2.4.x/STATUS
> URL: http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/STATUS?rev=1650655&r1=1650654&r2=1650655&view=diff
> ==============================================================================
> --- httpd/httpd/branches/2.4.x/STATUS (original)
> +++ httpd/httpd/branches/2.4.x/STATUS Fri Jan  9 20:37:50 2015
> @@ -104,12 +104,6 @@ RELEASE SHOWSTOPPERS:
>  PATCHES ACCEPTED TO BACKPORT FROM TRUNK:
>    [ start all new proposals below, under PATCHES PROPOSED. ]
>  
> -   * mod_proxy_ajp: Fix handling of the default port (8009) in the
> -     ProxyPass and <Proxy> configurations.  PR 57259.
> -     trunk patch: http://svn.apache.org/r1644503
> -     2.4.x patch: trunk works (module CHANGES)
> -     +1: ylavic, jim, covener
> -
>     * mod_ssl: Check if we are having an SSL connection before looking up SSL
>                related variables during expression evaluation to avoid a crash.
>                If not return NULL as ssl_var_lookup_ssl does by default.  PR 57070
> 
> Modified: httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c?rev=1650655&r1=1650654&r2=1650655&view=diff
> ==============================================================================
> --- httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c (original)
> +++ httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c Fri Jan  9 20:37:50 2015
> @@ -1683,6 +1683,9 @@ PROXY_DECLARE(char *) ap_proxy_define_wo
>  
>      memset(wshared, 0, sizeof(proxy_worker_shared));
>  
> +    if (uri.port && uri.port == ap_proxy_port_of_scheme(uri.scheme)) {
> +        uri.port = 0;
> +    }


I must be doing something wrong but the above seems to hurt by 30% more
CPU one for the tests we are doing, any hints?

Cheers

Jean-Frederic

From dev-return-84548-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 16 17:01:47 2015
Return-Path: <dev-return-84548-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 488571853A
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 16 Nov 2015 17:01:47 +0000 (UTC)
Received: (qmail 56953 invoked by uid 500); 16 Nov 2015 17:01:46 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 56872 invoked by uid 500); 16 Nov 2015 17:01:46 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 56862 invoked by uid 99); 16 Nov 2015 17:01:46 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Nov 2015 17:01:46 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 12982C05B6
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 17:01:46 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.989
X-Spam-Level: **
X-Spam-Status: No, score=2.989 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, SPF_HELO_PASS=-0.001, SPF_PASS=-0.001,
	T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id DGk7CN7bUndn for <dev@httpd.apache.org>;
	Mon, 16 Nov 2015 17:01:35 +0000 (UTC)
Received: from mx1.cpanel.net (mx1.cpanel.net [208.74.121.68])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 6009642AEE
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 17:01:35 +0000 (UTC)
Received: from [208.74.121.106] (port=27461 helo=[10.1.4.91])
	by mx1.cpanel.net with esmtpsa (TLSv1:DHE-RSA-AES256-SHA:256)
	(Exim 4.86)
	(envelope-from <jacob.perkins@cpanel.net>)
	id 1ZyN9l-0005i4-0h
	for dev@httpd.apache.org; Mon, 16 Nov 2015 11:01:29 -0600
From: Jacob Perkins <jacob.perkins@cpanel.net>
X-Pgp-Agent: GPGMail 2.6b2
Content-Type: multipart/signed; boundary="Apple-Mail=_61C1D9E7-B7D0-4812-B18E-D5CDD87D685F"; protocol="application/pgp-signature"; micalg=pgp-sha512
Subject: 2.4.18?
Date: Mon, 16 Nov 2015 11:01:27 -0600
Message-Id: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net>
To: dev@httpd.apache.org
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
X-Mailer: Apple Mail (2.3096.5)
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - mx1.cpanel.net
X-AntiAbuse: Original Domain - httpd.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - cpanel.net
X-Get-Message-Sender-Via: mx1.cpanel.net: authenticated_id: jacob.perkins@cpanel.net
X-Authenticated-Sender: mx1.cpanel.net: jacob.perkins@cpanel.net


--Apple-Mail=_61C1D9E7-B7D0-4812-B18E-D5CDD87D685F
Content-Type: multipart/alternative;
	boundary="Apple-Mail=_097AC558-505E-485D-9CDE-9C9C829B53DF"


--Apple-Mail=_097AC558-505E-485D-9CDE-9C9C829B53DF
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=utf-8

Good morning!

Is there an ETA of when 2.4.18 will be available? I=E2=80=99m wondering =
if it=E2=80=99s better time-wise to manually patch the REDIRECT_URL =
changes and send that out to customers or to wait for 2.4.18.

Thanks in advance!
=E2=80=94
Jacob Perkins
Product Owner
cPanel Inc.

jacob.perkins@cpanel.net <mailto:jacob.perkins@cpanel.net>
Office:  713-529-0800 x 4046
Cell:  713-560-8655


--Apple-Mail=_097AC558-505E-485D-9CDE-9C9C829B53DF
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=utf-8

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
charset=3Dutf-8"></head><body style=3D"word-wrap: break-word; =
-webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" =
class=3D"">Good morning!<div class=3D""><br class=3D""></div><div =
class=3D"">Is there an ETA of when 2.4.18 will be available? I=E2=80=99m =
wondering if it=E2=80=99s better time-wise to manually patch the =
REDIRECT_URL changes and send that out to customers or to wait for =
2.4.18.&nbsp;<br class=3D""><div class=3D""><br =
class=3D"webkit-block-placeholder"></div><div =
apple-content-edited=3D"true" class=3D"">
<div style=3D"color: rgb(0, 0, 0); font-family: Helvetica; font-size: =
12px; font-style: normal; font-variant: normal; font-weight: normal; =
letter-spacing: normal; line-height: normal; text-align: -webkit-auto; =
text-indent: 0px; text-transform: none; white-space: normal; =
word-spacing: 0px; -webkit-text-stroke-width: 0px; orphans: 2; widows: =
2; word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: =
after-white-space;" class=3D"">Thanks in advance!<br =
class=3D"Apple-interchange-newline">=E2=80=94</div><div style=3D"color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: =
normal; font-variant: normal; font-weight: normal; letter-spacing: =
normal; line-height: normal; text-align: -webkit-auto; text-indent: 0px; =
text-transform: none; white-space: normal; word-spacing: 0px; =
-webkit-text-stroke-width: 0px; orphans: 2; widows: 2; word-wrap: =
break-word; -webkit-nbsp-mode: space; -webkit-line-break: =
after-white-space;" class=3D"">Jacob Perkins<br class=3D""></div><div =
style=3D"color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; =
font-style: normal; font-variant: normal; font-weight: normal; =
letter-spacing: normal; line-height: normal; text-align: -webkit-auto; =
text-indent: 0px; text-transform: none; white-space: normal; =
word-spacing: 0px; -webkit-text-stroke-width: 0px; orphans: 2; widows: =
2; word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: =
after-white-space;" class=3D"">Product Owner</div><div style=3D"color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: =
normal; font-variant: normal; font-weight: normal; letter-spacing: =
normal; line-height: normal; text-align: -webkit-auto; text-indent: 0px; =
text-transform: none; white-space: normal; word-spacing: 0px; =
-webkit-text-stroke-width: 0px; orphans: 2; widows: 2; word-wrap: =
break-word; -webkit-nbsp-mode: space; -webkit-line-break: =
after-white-space;" class=3D""><b class=3D""><font color=3D"#ff7c00" =
class=3D"">cPanel Inc.</font></b></div><div style=3D"color: rgb(0, 0, =
0); font-family: Helvetica; font-size: 12px; font-style: normal; =
font-variant: normal; font-weight: normal; letter-spacing: normal; =
line-height: normal; text-align: -webkit-auto; text-indent: 0px; =
text-transform: none; white-space: normal; word-spacing: 0px; =
-webkit-text-stroke-width: 0px; orphans: 2; widows: 2; word-wrap: =
break-word; -webkit-nbsp-mode: space; -webkit-line-break: =
after-white-space;" class=3D""><br class=3D""></div><div style=3D"color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: =
normal; font-variant: normal; font-weight: normal; letter-spacing: =
normal; line-height: normal; text-align: -webkit-auto; text-indent: 0px; =
text-transform: none; white-space: normal; word-spacing: 0px; =
-webkit-text-stroke-width: 0px; orphans: 2; widows: 2; word-wrap: =
break-word; -webkit-nbsp-mode: space; -webkit-line-break: =
after-white-space;" class=3D""><a href=3D"mailto:jacob.perkins@cpanel.net"=
 class=3D"">jacob.perkins@cpanel.net</a></div><div style=3D"color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: =
normal; font-variant: normal; font-weight: normal; letter-spacing: =
normal; line-height: normal; text-align: -webkit-auto; text-indent: 0px; =
text-transform: none; white-space: normal; word-spacing: 0px; =
-webkit-text-stroke-width: 0px; orphans: 2; widows: 2; word-wrap: =
break-word; -webkit-nbsp-mode: space; -webkit-line-break: =
after-white-space;" class=3D"">Office: &nbsp;713-529-0800 =
x&nbsp;4046</div><div style=3D"color: rgb(0, 0, 0); font-family: =
Helvetica; font-size: 12px; font-style: normal; font-variant: normal; =
font-weight: normal; letter-spacing: normal; line-height: normal; =
text-align: -webkit-auto; text-indent: 0px; text-transform: none; =
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; =
orphans: 2; widows: 2; word-wrap: break-word; -webkit-nbsp-mode: space; =
-webkit-line-break: after-white-space;" class=3D"">Cell: =
&nbsp;713-560-8655</div>
</div>
<br class=3D""></div></body></html>=

--Apple-Mail=_097AC558-505E-485D-9CDE-9C9C829B53DF--

--Apple-Mail=_61C1D9E7-B7D0-4812-B18E-D5CDD87D685F
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename=signature.asc
Content-Type: application/pgp-signature;
	name=signature.asc
Content-Description: Message signed with OpenPGP using GPGMail

-----BEGIN PGP SIGNATURE-----
Comment: GPGTools - https://gpgtools.org

iQEcBAEBCgAGBQJWSgvoAAoJEIo8JcFLoqwq0JQH/A5LoIFlvHhvHxlGui/jLYA9
L3d+11wKGANQyxdi07I91ezVvFZl3Pp0QYUW89j695dA8kDWUpkDJ8kYgAwXg2nS
NxL+pK5dDGQASfTVQpe2hzrxxwepYYRjar00a/JjX+osroIX9txTDc/tLLNyCsvT
LzwKr728i7TWTMwe4OH3LLps/4BRXfhOs6AEYpjSDjwB7M47rK5BklvlRpEl5VOl
lKjiAcEFxx92ENu43gxLobYf0PR3M/N0DqbSeR47cCJWf+GeYiysOQnu2eoYPTBy
wlRRE7XmB9adKEaRjL4Gp5/B4hMZjisQFt0QspGxOSGzAOTivJlQuEDYe+7wSbA=
=nso9
-----END PGP SIGNATURE-----

--Apple-Mail=_61C1D9E7-B7D0-4812-B18E-D5CDD87D685F--

From dev-return-84549-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 16 17:04:35 2015
Return-Path: <dev-return-84549-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 171471859C
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 16 Nov 2015 17:04:35 +0000 (UTC)
Received: (qmail 73061 invoked by uid 500); 16 Nov 2015 17:04:34 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 72994 invoked by uid 500); 16 Nov 2015 17:04:34 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 72979 invoked by uid 99); 16 Nov 2015 17:04:34 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Nov 2015 17:04:34 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id D197D1A256F
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 17:04:33 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.452
X-Spam-Level: *
X-Spam-Status: No, score=1.452 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, KAM_ASCII_DIVIDERS=0.8,
	SPF_NEUTRAL=0.652] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id zSGri8c8p5QG for <dev@httpd.apache.org>;
	Mon, 16 Nov 2015 17:04:28 +0000 (UTC)
Received: from resqmta-po-05v.sys.comcast.net (resqmta-po-05v.sys.comcast.net [96.114.154.164])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 1E12C23039
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 17:04:28 +0000 (UTC)
Received: from resomta-po-16v.sys.comcast.net ([96.114.154.240])
	by resqmta-po-05v.sys.comcast.net with comcast
	id iH4R1r0025BUCh401H4TBk; Mon, 16 Nov 2015 17:04:27 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-16v.sys.comcast.net with comcast
	id iH4S1r00Y2U0RYt01H4S3X; Mon, 16 Nov 2015 17:04:27 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1650655 - in /httpd/httpd/branches/2.4.x: CHANGES STATUS modules/proxy/proxy_util.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <564A0A06.1040300@gmail.com>
Date: Mon, 16 Nov 2015 12:04:26 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <4AA71A7C-197A-4BB9-86D1-B8829CAE4191@jaguNET.com>
References: <20150109203751.20247AC0143@hades.apache.org> <564A0A06.1040300@gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1447693467;
	bh=1EDUXwJEoQGllfv6hQSg9yI3A+/50vbrwuTo8wawZhA=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=Px8NUXQTl/ANT0y+RSZxAqNh4MSAK6XamO5FG0D2Wrt2d1XkMJY/wefgnkSNoh0ZX
	 PaSXgWZE2ldhKUBzgx8vCOpXvau8ppZaFxzRnyIbGm6z8wjJGsV1wJVkCOydZ9wEo7
	 oZ7XTC/jcnOLJpS/GJYaQtkxOrd219+ss9jnxDxgjUuELYFwLT+6WzQ62vzlgzce47
	 ehWJMsEG0RHQAmhrMvef3FQlkkst5FazJ6C6YdBDkOEGjQgzaf6gu7RqlrN5WPC7WP
	 qUWhzeo/dkCgbsUmjN2W1CeNhjVUgvKNk6uyLfxiJSc9eOJoPSD/ImtShfvyUgAPAq
	 IlJU34UsOerUQ==

Are you logging DEBUG?

> On Nov 16, 2015, at 11:53 AM, jean-frederic clere <jfclere@gmail.com> =
wrote:
>=20
> On 01/09/2015 09:37 PM, jailletc36@apache.org wrote:
>> Author: jailletc36
>> Date: Fri Jan  9 20:37:50 2015
>> New Revision: 1650655
>>=20
>> URL: http://svn.apache.org/r1650655
>> Log:
>> Merge r1644503 from trunk
>>=20
>>   * mod_proxy_ajp: Fix handling of the default port (8009) in the
>>     ProxyPass and <Proxy> configurations.  PR 57259.
>>=20
>> Submitted by: ylavic
>> Reviewed by: ylavic, jim, covener
>> Backported by: jailletc36
>>=20
>> Modified:
>>    httpd/httpd/branches/2.4.x/CHANGES
>>    httpd/httpd/branches/2.4.x/STATUS
>>    httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c
>>=20
>> Modified: httpd/httpd/branches/2.4.x/CHANGES
>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/CHANGES?rev=3D1650=
655&r1=3D1650654&r2=3D1650655&view=3Ddiff
>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>> --- httpd/httpd/branches/2.4.x/CHANGES [utf-8] (original)
>> +++ httpd/httpd/branches/2.4.x/CHANGES [utf-8] Fri Jan  9 20:37:50 =
2015
>> @@ -22,6 +22,9 @@ Changes with Apache 2.4.11
>>      request headers earlier.  Adds "MergeTrailers" directive to =
restore
>>      legacy behavior.  [Edward Lu, Yann Ylavic, Joe Orton, Eric =
Covener]
>>=20
>> +  *) mod_proxy_ajp: Fix handling of the default port (8009) in the
>> +     ProxyPass and <Proxy> configurations.  PR 57259.  [Yann =
Ylavic].
>> +
>>   *) mpm_event: Avoid a possible use after free when notifying the =
end of
>>      connection during lingering close.  PR 57268.  [Eric Covener, =
Yann Ylavic]
>>=20
>>=20
>> Modified: httpd/httpd/branches/2.4.x/STATUS
>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/STATUS?rev=3D16506=
55&r1=3D1650654&r2=3D1650655&view=3Ddiff
>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>> --- httpd/httpd/branches/2.4.x/STATUS (original)
>> +++ httpd/httpd/branches/2.4.x/STATUS Fri Jan  9 20:37:50 2015
>> @@ -104,12 +104,6 @@ RELEASE SHOWSTOPPERS:
>> PATCHES ACCEPTED TO BACKPORT FROM TRUNK:
>>   [ start all new proposals below, under PATCHES PROPOSED. ]
>>=20
>> -   * mod_proxy_ajp: Fix handling of the default port (8009) in the
>> -     ProxyPass and <Proxy> configurations.  PR 57259.
>> -     trunk patch: http://svn.apache.org/r1644503
>> -     2.4.x patch: trunk works (module CHANGES)
>> -     +1: ylavic, jim, covener
>> -
>>    * mod_ssl: Check if we are having an SSL connection before looking =
up SSL
>>               related variables during expression evaluation to avoid =
a crash.
>>               If not return NULL as ssl_var_lookup_ssl does by =
default.  PR 57070
>>=20
>> Modified: httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c
>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/modules/proxy/prox=
y_util.c?rev=3D1650655&r1=3D1650654&r2=3D1650655&view=3Ddiff
>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>> --- httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c (original)
>> +++ httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c Fri Jan  9 =
20:37:50 2015
>> @@ -1683,6 +1683,9 @@ PROXY_DECLARE(char *) ap_proxy_define_wo
>>=20
>>     memset(wshared, 0, sizeof(proxy_worker_shared));
>>=20
>> +    if (uri.port && uri.port =3D=3D =
ap_proxy_port_of_scheme(uri.scheme)) {
>> +        uri.port =3D 0;
>> +    }
>=20
>=20
> I must be doing something wrong but the above seems to hurt by 30% =
more
> CPU one for the tests we are doing, any hints?
>=20
> Cheers
>=20
> Jean-Frederic


From dev-return-84550-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 16 17:05:25 2015
Return-Path: <dev-return-84550-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0190E185BC
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 16 Nov 2015 17:05:25 +0000 (UTC)
Received: (qmail 77790 invoked by uid 500); 16 Nov 2015 17:05:24 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 77728 invoked by uid 500); 16 Nov 2015 17:05:24 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 77715 invoked by uid 99); 16 Nov 2015 17:05:24 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Nov 2015 17:05:24 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id B5101180A18
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 17:05:23 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id x4FDSpSZ6aHH for <dev@httpd.apache.org>;
	Mon, 16 Nov 2015 17:05:14 +0000 (UTC)
Received: from resqmta-po-10v.sys.comcast.net (resqmta-po-10v.sys.comcast.net [96.114.154.169])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id C43A943E20
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 17:05:14 +0000 (UTC)
Received: from resomta-po-16v.sys.comcast.net ([96.114.154.240])
	by resqmta-po-10v.sys.comcast.net with comcast
	id iH4e1r0035BUCh401H58Nq; Mon, 16 Nov 2015 17:05:08 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-16v.sys.comcast.net with comcast
	id iH4S1r00Y2U0RYt01H588n; Mon, 16 Nov 2015 17:05:08 +0000
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: 2.4.18?
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net>
Date: Mon, 16 Nov 2015 12:05:08 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com>
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1447693508;
	bh=7OdmzPG/rbPWYfN+BBi44pzl4mzyFpUlF6dzzIbBJ8Q=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=vlfRwrYiGLkuCOjCEHH1fzuUPjcNPWzeZB1Y76a0L+RKTkxzRA3sk0D2j2P6CugUK
	 1mJ+cEmhKJ7xEFRstdRdP5GWT9ZhlQr3+wMosZV8UNAZIB5nnYBwgnAYUVyUIf2E0m
	 kG0FloNnJ6eeXA3//fU4bXgIGZR5CnGrgwWYAKCze8nPWq71zkl8AnZe0R15ZNuKxL
	 gReqEsRvurDG8oCtwoY76SfPzpdflXRmpRAr4tmh+bJjTIOBxMdMKNakJ9RiM+WFff
	 E/P5Nnlvvq2/XzwUroSqpx84RoIZsPAXe/tm72yiPbkzCsruTe/AMkFyD+y7Hu81LI
	 /jWqrba3ez5Pw==

My plan is to T&R 2.4.18 sometime next week in hopes of a formal
release the beginning of Dec.

> On Nov 16, 2015, at 12:01 PM, Jacob Perkins <jacob.perkins@cpanel.net> =
wrote:
>=20
> Good morning!
>=20
> Is there an ETA of when 2.4.18 will be available? I=E2=80=99m =
wondering if it=E2=80=99s better time-wise to manually patch the =
REDIRECT_URL changes and send that out to customers or to wait for =
2.4.18.=20
>=20
> Thanks in advance!
> =E2=80=94
> Jacob Perkins
> Product Owner
> cPanel Inc.
>=20
> jacob.perkins@cpanel.net
> Office:  713-529-0800 x 4046
> Cell:  713-560-8655
>=20


From dev-return-84551-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 16 17:15:10 2015
Return-Path: <dev-return-84551-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 449AB1865F
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 16 Nov 2015 17:15:10 +0000 (UTC)
Received: (qmail 5364 invoked by uid 500); 16 Nov 2015 17:15:09 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 5300 invoked by uid 500); 16 Nov 2015 17:15:09 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 5290 invoked by uid 99); 16 Nov 2015 17:15:09 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Nov 2015 17:15:09 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 12D0D180A18
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 17:15:09 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.679
X-Spam-Level:
X-Spam-Status: No, score=0.679 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	KAM_ASCII_DIVIDERS=0.8, RCVD_IN_MSPIKE_H3=-0.01,
	RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id KDty-AdDIdFH for <dev@httpd.apache.org>;
	Mon, 16 Nov 2015 17:15:08 +0000 (UTC)
Received: from mail-wm0-f46.google.com (mail-wm0-f46.google.com [74.125.82.46])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id CD06543E20
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 17:15:07 +0000 (UTC)
Received: by wmww144 with SMTP id w144so119743819wmw.1
        for <dev@httpd.apache.org>; Mon, 16 Nov 2015 09:15:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=subject:to:references:from:message-id:date:user-agent:mime-version
         :in-reply-to:content-type:content-transfer-encoding;
        bh=i+ha7zpT/owPFIp29W6yxHLGFp/gEGA0BhV/YqA5DFA=;
        b=x1ixUiClLzI0A5vslUqnY0NucvtrRbKYObqvcfXPtk6XX8+QtFUD1WZqlaPd/aep3q
         fXACAEuIsbDUd8yl23vXi2NZhWTRg2FgSfaUMb8kLks4CuC2/20Yn775wdkt4PAKiIyp
         aWRl2KdXDH5bq3iVv76AoOKFXw+gj8LizzXNWmV6c8GEJPpJ97R8V0tDIHvV0UVppz1B
         UMbrRRKDm6uuM/a3ci7afsyKiUhEIICSApf8QdZy5kiIWY/U0yuDUG0NeJY9c1+J3Pvo
         yDaX1ngKUVM/tNunS39299dMpotBEK+OzFL/M83l2LXi4ZgIZKMIzzzP0PNBLBSYFDYX
         RvRg==
X-Received: by 10.28.4.7 with SMTP id 7mr19233463wme.85.1447694106990;
        Mon, 16 Nov 2015 09:15:06 -0800 (PST)
Received: from [10.33.144.3] (nat-pool-gva-t.redhat.com. [209.132.186.32])
        by smtp.gmail.com with ESMTPSA id b12sm19587811wma.6.2015.11.16.09.15.05
        for <dev@httpd.apache.org>
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Mon, 16 Nov 2015 09:15:06 -0800 (PST)
Subject: Re: svn commit: r1650655 - in /httpd/httpd/branches/2.4.x: CHANGES
 STATUS modules/proxy/proxy_util.c
To: dev@httpd.apache.org
References: <20150109203751.20247AC0143@hades.apache.org>
 <564A0A06.1040300@gmail.com>
 <4AA71A7C-197A-4BB9-86D1-B8829CAE4191@jaguNET.com>
From: jean-frederic clere <jfclere@gmail.com>
Message-ID: <564A0F19.3030905@gmail.com>
Date: Mon, 16 Nov 2015 18:15:05 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <4AA71A7C-197A-4BB9-86D1-B8829CAE4191@jaguNET.com>
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: 7bit

On 11/16/2015 06:04 PM, Jim Jagielski wrote:
> Are you logging DEBUG?

No, I also though that was the problem and checked it ;-)

Cheers

Jean-Frederic

> 
>> On Nov 16, 2015, at 11:53 AM, jean-frederic clere <jfclere@gmail.com> wrote:
>>
>> On 01/09/2015 09:37 PM, jailletc36@apache.org wrote:
>>> Author: jailletc36
>>> Date: Fri Jan  9 20:37:50 2015
>>> New Revision: 1650655
>>>
>>> URL: http://svn.apache.org/r1650655
>>> Log:
>>> Merge r1644503 from trunk
>>>
>>>   * mod_proxy_ajp: Fix handling of the default port (8009) in the
>>>     ProxyPass and <Proxy> configurations.  PR 57259.
>>>
>>> Submitted by: ylavic
>>> Reviewed by: ylavic, jim, covener
>>> Backported by: jailletc36
>>>
>>> Modified:
>>>    httpd/httpd/branches/2.4.x/CHANGES
>>>    httpd/httpd/branches/2.4.x/STATUS
>>>    httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c
>>>
>>> Modified: httpd/httpd/branches/2.4.x/CHANGES
>>> URL: http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/CHANGES?rev=1650655&r1=1650654&r2=1650655&view=diff
>>> ==============================================================================
>>> --- httpd/httpd/branches/2.4.x/CHANGES [utf-8] (original)
>>> +++ httpd/httpd/branches/2.4.x/CHANGES [utf-8] Fri Jan  9 20:37:50 2015
>>> @@ -22,6 +22,9 @@ Changes with Apache 2.4.11
>>>      request headers earlier.  Adds "MergeTrailers" directive to restore
>>>      legacy behavior.  [Edward Lu, Yann Ylavic, Joe Orton, Eric Covener]
>>>
>>> +  *) mod_proxy_ajp: Fix handling of the default port (8009) in the
>>> +     ProxyPass and <Proxy> configurations.  PR 57259.  [Yann Ylavic].
>>> +
>>>   *) mpm_event: Avoid a possible use after free when notifying the end of
>>>      connection during lingering close.  PR 57268.  [Eric Covener, Yann Ylavic]
>>>
>>>
>>> Modified: httpd/httpd/branches/2.4.x/STATUS
>>> URL: http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/STATUS?rev=1650655&r1=1650654&r2=1650655&view=diff
>>> ==============================================================================
>>> --- httpd/httpd/branches/2.4.x/STATUS (original)
>>> +++ httpd/httpd/branches/2.4.x/STATUS Fri Jan  9 20:37:50 2015
>>> @@ -104,12 +104,6 @@ RELEASE SHOWSTOPPERS:
>>> PATCHES ACCEPTED TO BACKPORT FROM TRUNK:
>>>   [ start all new proposals below, under PATCHES PROPOSED. ]
>>>
>>> -   * mod_proxy_ajp: Fix handling of the default port (8009) in the
>>> -     ProxyPass and <Proxy> configurations.  PR 57259.
>>> -     trunk patch: http://svn.apache.org/r1644503
>>> -     2.4.x patch: trunk works (module CHANGES)
>>> -     +1: ylavic, jim, covener
>>> -
>>>    * mod_ssl: Check if we are having an SSL connection before looking up SSL
>>>               related variables during expression evaluation to avoid a crash.
>>>               If not return NULL as ssl_var_lookup_ssl does by default.  PR 57070
>>>
>>> Modified: httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c
>>> URL: http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c?rev=1650655&r1=1650654&r2=1650655&view=diff
>>> ==============================================================================
>>> --- httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c (original)
>>> +++ httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c Fri Jan  9 20:37:50 2015
>>> @@ -1683,6 +1683,9 @@ PROXY_DECLARE(char *) ap_proxy_define_wo
>>>
>>>     memset(wshared, 0, sizeof(proxy_worker_shared));
>>>
>>> +    if (uri.port && uri.port == ap_proxy_port_of_scheme(uri.scheme)) {
>>> +        uri.port = 0;
>>> +    }
>>
>>
>> I must be doing something wrong but the above seems to hurt by 30% more
>> CPU one for the tests we are doing, any hints?
>>
>> Cheers
>>
>> Jean-Frederic
> 
> 


From dev-return-84552-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 16 17:34:29 2015
Return-Path: <dev-return-84552-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B7F6B18752
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 16 Nov 2015 17:34:29 +0000 (UTC)
Received: (qmail 58569 invoked by uid 500); 16 Nov 2015 17:34:29 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 58507 invoked by uid 500); 16 Nov 2015 17:34:29 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 58497 invoked by uid 99); 16 Nov 2015 17:34:29 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Nov 2015 17:34:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id C486BC05B6
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 17:34:28 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.99
X-Spam-Level: **
X-Spam-Status: No, score=2.99 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, SPF_HELO_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01,
	URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id LAadpI1bjnfO for <dev@httpd.apache.org>;
	Mon, 16 Nov 2015 17:34:15 +0000 (UTC)
Received: from mx1.cpanel.net (mx1.cpanel.net [208.74.121.68])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 5A7C044508
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 17:34:14 +0000 (UTC)
Received: from [208.74.121.106] (port=37549 helo=[10.1.4.91])
	by mx1.cpanel.net with esmtpsa (TLSv1:DHE-RSA-AES256-SHA:256)
	(Exim 4.86)
	(envelope-from <jacob.perkins@cpanel.net>)
	id 1ZyNfR-00045O-MK
	for dev@httpd.apache.org; Mon, 16 Nov 2015 11:34:13 -0600
Content-Type: multipart/signed; boundary="Apple-Mail=_B23E1C7F-3CAF-4A8E-9A9A-9AB26D8D6D38"; protocol="application/pgp-signature"; micalg=pgp-sha512
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: 2.4.18?
X-Pgp-Agent: GPGMail 2.6b2
From: Jacob Perkins <jacob.perkins@cpanel.net>
In-Reply-To: <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com>
Date: Mon, 16 Nov 2015 11:34:12 -0600
Message-Id: <E07715CE-457B-4611-A1A3-06B58FC09A4F@cpanel.net>
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net> <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - mx1.cpanel.net
X-AntiAbuse: Original Domain - httpd.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - cpanel.net
X-Get-Message-Sender-Via: mx1.cpanel.net: authenticated_id: jacob.perkins@cpanel.net
X-Authenticated-Sender: mx1.cpanel.net: jacob.perkins@cpanel.net


--Apple-Mail=_B23E1C7F-3CAF-4A8E-9A9A-9AB26D8D6D38
Content-Type: multipart/alternative;
	boundary="Apple-Mail=_0207D4DD-9579-4EB9-84D5-8F696BB0C555"


--Apple-Mail=_0207D4DD-9579-4EB9-84D5-8F696BB0C555
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=utf-8

Jim,

Thanks for the quick reply! I appreciate the response, and I think =
we=E2=80=99ll be waiting for 2.4.18 then.

Thanks again!
=E2=80=94
Jacob Perkins
Product Owner
cPanel Inc.

jacob.perkins@cpanel.net <mailto:jacob.perkins@cpanel.net>
Office:  713-529-0800 x 4046
Cell:  713-560-8655

> On Nov 16, 2015, at 11:05 AM, Jim Jagielski <jim@jaguNET.com> wrote:
>=20
> My plan is to T&R 2.4.18 sometime next week in hopes of a formal
> release the beginning of Dec.
>=20
>> On Nov 16, 2015, at 12:01 PM, Jacob Perkins =
<jacob.perkins@cpanel.net> wrote:
>>=20
>> Good morning!
>>=20
>> Is there an ETA of when 2.4.18 will be available? I=E2=80=99m =
wondering if it=E2=80=99s better time-wise to manually patch the =
REDIRECT_URL changes and send that out to customers or to wait for =
2.4.18.
>>=20
>> Thanks in advance!
>> =E2=80=94
>> Jacob Perkins
>> Product Owner
>> cPanel Inc.
>>=20
>> jacob.perkins@cpanel.net
>> Office:  713-529-0800 x 4046
>> Cell:  713-560-8655
>>=20
>=20


--Apple-Mail=_0207D4DD-9579-4EB9-84D5-8F696BB0C555
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=utf-8

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
charset=3Dutf-8"></head><body style=3D"word-wrap: break-word; =
-webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" =
class=3D"">Jim,<div class=3D""><br class=3D""></div><div class=3D"">Thanks=
 for the quick reply! I appreciate the response, and I think we=E2=80=99ll=
 be waiting for 2.4.18 then.</div><div class=3D""><br =
class=3D""></div><div class=3D"">Thanks again!<div =
apple-content-edited=3D"true" class=3D""><div style=3D"color: rgb(0, 0, =
0); font-family: Helvetica; font-size: 12px; font-style: normal; =
font-variant: normal; font-weight: normal; letter-spacing: normal; =
line-height: normal; text-align: -webkit-auto; text-indent: 0px; =
text-transform: none; white-space: normal; word-spacing: 0px; =
-webkit-text-stroke-width: 0px; orphans: 2; widows: 2; word-wrap: =
break-word; -webkit-nbsp-mode: space; -webkit-line-break: =
after-white-space;" class=3D"">=E2=80=94</div><div style=3D"color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: =
normal; font-variant: normal; font-weight: normal; letter-spacing: =
normal; line-height: normal; text-align: -webkit-auto; text-indent: 0px; =
text-transform: none; white-space: normal; word-spacing: 0px; =
-webkit-text-stroke-width: 0px; orphans: 2; widows: 2; word-wrap: =
break-word; -webkit-nbsp-mode: space; -webkit-line-break: =
after-white-space;" class=3D"">Jacob Perkins<br class=3D""></div><div =
style=3D"color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; =
font-style: normal; font-variant: normal; font-weight: normal; =
letter-spacing: normal; line-height: normal; text-align: -webkit-auto; =
text-indent: 0px; text-transform: none; white-space: normal; =
word-spacing: 0px; -webkit-text-stroke-width: 0px; orphans: 2; widows: =
2; word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: =
after-white-space;" class=3D"">Product Owner</div><div style=3D"color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: =
normal; font-variant: normal; font-weight: normal; letter-spacing: =
normal; line-height: normal; text-align: -webkit-auto; text-indent: 0px; =
text-transform: none; white-space: normal; word-spacing: 0px; =
-webkit-text-stroke-width: 0px; orphans: 2; widows: 2; word-wrap: =
break-word; -webkit-nbsp-mode: space; -webkit-line-break: =
after-white-space;" class=3D""><b class=3D""><font color=3D"#ff7c00" =
class=3D"">cPanel Inc.</font></b></div><div style=3D"color: rgb(0, 0, =
0); font-family: Helvetica; font-size: 12px; font-style: normal; =
font-variant: normal; font-weight: normal; letter-spacing: normal; =
line-height: normal; text-align: -webkit-auto; text-indent: 0px; =
text-transform: none; white-space: normal; word-spacing: 0px; =
-webkit-text-stroke-width: 0px; orphans: 2; widows: 2; word-wrap: =
break-word; -webkit-nbsp-mode: space; -webkit-line-break: =
after-white-space;" class=3D""><br class=3D""></div><div style=3D"color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: =
normal; font-variant: normal; font-weight: normal; letter-spacing: =
normal; line-height: normal; text-align: -webkit-auto; text-indent: 0px; =
text-transform: none; white-space: normal; word-spacing: 0px; =
-webkit-text-stroke-width: 0px; orphans: 2; widows: 2; word-wrap: =
break-word; -webkit-nbsp-mode: space; -webkit-line-break: =
after-white-space;" class=3D""><a href=3D"mailto:jacob.perkins@cpanel.net"=
 class=3D"">jacob.perkins@cpanel.net</a></div><div style=3D"color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: =
normal; font-variant: normal; font-weight: normal; letter-spacing: =
normal; line-height: normal; text-align: -webkit-auto; text-indent: 0px; =
text-transform: none; white-space: normal; word-spacing: 0px; =
-webkit-text-stroke-width: 0px; orphans: 2; widows: 2; word-wrap: =
break-word; -webkit-nbsp-mode: space; -webkit-line-break: =
after-white-space;" class=3D"">Office: &nbsp;713-529-0800 =
x&nbsp;4046</div><div style=3D"color: rgb(0, 0, 0); font-family: =
Helvetica; font-size: 12px; font-style: normal; font-variant: normal; =
font-weight: normal; letter-spacing: normal; line-height: normal; =
text-align: -webkit-auto; text-indent: 0px; text-transform: none; =
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; =
orphans: 2; widows: 2; word-wrap: break-word; -webkit-nbsp-mode: space; =
-webkit-line-break: after-white-space;" class=3D"">Cell: =
&nbsp;713-560-8655</div>
</div>
<br class=3D""><div><blockquote type=3D"cite" class=3D""><div =
class=3D"">On Nov 16, 2015, at 11:05 AM, Jim Jagielski &lt;<a =
href=3D"mailto:jim@jagunet.com" class=3D"">jim@jaguNET.com</a>&gt; =
wrote:</div><br class=3D"Apple-interchange-newline"><div class=3D""><div =
class=3D"">My plan is to T&amp;R 2.4.18 sometime next week in hopes of a =
formal<br class=3D"">release the beginning of Dec.<br class=3D""><br =
class=3D""><blockquote type=3D"cite" class=3D"">On Nov 16, 2015, at =
12:01 PM, Jacob Perkins &lt;<a href=3D"mailto:jacob.perkins@cpanel.net" =
class=3D"">jacob.perkins@cpanel.net</a>&gt; wrote:<br class=3D""><br =
class=3D"">Good morning!<br class=3D""><br class=3D"">Is there an ETA of =
when 2.4.18 will be available? I=E2=80=99m wondering if it=E2=80=99s =
better time-wise to manually patch the REDIRECT_URL changes and send =
that out to customers or to wait for 2.4.18. <br class=3D""><br =
class=3D"">Thanks in advance!<br class=3D"">=E2=80=94<br class=3D"">Jacob =
Perkins<br class=3D"">Product Owner<br class=3D"">cPanel Inc.<br =
class=3D""><br class=3D""><a href=3D"mailto:jacob.perkins@cpanel.net" =
class=3D"">jacob.perkins@cpanel.net</a><br class=3D"">Office: =
&nbsp;713-529-0800 x 4046<br class=3D"">Cell: &nbsp;713-560-8655<br =
class=3D""><br class=3D""></blockquote><br =
class=3D""></div></div></blockquote></div><br =
class=3D""></div></body></html>=

--Apple-Mail=_0207D4DD-9579-4EB9-84D5-8F696BB0C555--

--Apple-Mail=_B23E1C7F-3CAF-4A8E-9A9A-9AB26D8D6D38
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename=signature.asc
Content-Type: application/pgp-signature;
	name=signature.asc
Content-Description: Message signed with OpenPGP using GPGMail

-----BEGIN PGP SIGNATURE-----
Comment: GPGTools - https://gpgtools.org

iQEcBAEBCgAGBQJWShOUAAoJEIo8JcFLoqwqZOcH/RH8xpPxYW+rNZPiO8fTw+iq
WHYy/Gej6p1Clg8hpOmLQ/Pig/U9GUXgMR2buI9dc7YFcto9XRvcoWO2rN3efEA7
Na0dxhdbjKl4Tl7gGUw/YDzQJW+v2uXxOi2OXCUCm0GHO0N725i2t4mi9s9+5mRB
t6HTx2aAfojRytONLTuU4WWJ0xnWOXCUiiz/PBuYBt5HuP7zrtV08nbYAk9RsqFt
npZjSboFIF40sx3eqvMTUj3ilnZkLOx9KKoauJndlDAgo+J0iPxlxRy7q+ao3zRT
v+jPk9h004HOQ6CgpcKOSPD57r+NReWvcs/NNe3wbgnl5KbwFxs5OB17t7fJrWI=
=g9NW
-----END PGP SIGNATURE-----

--Apple-Mail=_B23E1C7F-3CAF-4A8E-9A9A-9AB26D8D6D38--

From dev-return-84553-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 16 17:35:27 2015
Return-Path: <dev-return-84553-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DC2CB18763
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 16 Nov 2015 17:35:27 +0000 (UTC)
Received: (qmail 60502 invoked by uid 500); 16 Nov 2015 17:35:27 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 60426 invoked by uid 500); 16 Nov 2015 17:35:27 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 60416 invoked by uid 99); 16 Nov 2015 17:35:27 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Nov 2015 17:35:27 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id EDADC180A60
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 17:35:26 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.111
X-Spam-Level:
X-Spam-Status: No, score=-0.111 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id T5oGn-G_DLpL for <dev@httpd.apache.org>;
	Mon, 16 Nov 2015 17:35:25 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id B792D20B90
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 17:35:24 +0000 (UTC)
Received: from [192.168.178.41] (unknown [84.189.81.103])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id F0EDD15A0235
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 18:35:23 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447695324; bh=bocsIeb84XEk/vt+qEQo8GvGf96vyZ3DOOXUQIXjtaE=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=pOpA1+7QVsygBqwmsHGgFC2wbFUufQocAfenuFpB0TI3qYuhzKLg+GncOKi+ljnJt
	 1rAZQTGT5qzmqjftskC5LTAFBoli2KfOfXhdgi1OdhAs5Gp/G98NLWFGrEtA0fKY06
	 cbC8TA+MgFTa9/6S5a2yIyVSDmg8XXGMWK5FZp4Y=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: svn commit: r1714602 - in /httpd/httpd/trunk/modules/http2: h2_bucket_eoc.c h2_conn.c h2_io.c h2_io.h h2_mplx.c h2_session.c h2_session.h h2_task.c h2_task.h
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CAKQ1sVNrJVq85db7YvnzZRpurkJKws8-KtELkMByNnzvG4=-8w@mail.gmail.com>
Date: Mon, 16 Nov 2015 18:35:23 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <065E9C88-B242-44B6-ABED-284BD88CBD84@greenbytes.de>
References: <20151116151235.7749A3A0472@svn01-us-west.apache.org> <CAKQ1sVNrJVq85db7YvnzZRpurkJKws8-KtELkMByNnzvG4=-8w@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

Yann,

I changed the access after free, thanks again(!) for reviewing this.

The spare pool I left like this for now. I think, *if* there is only one =
spare, it may be beneficial to keep the newest one, as a) that might be =
hot and b) it destroys pools more frequently and may recycle memory =
better. But pbly not a big difference...

//Stefan

> Am 16.11.2015 um 17:30 schrieb Yann Ylavic <ylavic.dev@gmail.com>:
>=20
> On Mon, Nov 16, 2015 at 4:12 PM,  <icing@apache.org> wrote:
>> Author: icing
>> Date: Mon Nov 16 15:12:35 2015
>> New Revision: 1714602
>>=20
>> URL: http://svn.apache.org/viewvc?rev=3D1714602&view=3Drev
>> Log:
>> improvements in handling orphaned stream resources, where client =
prematurely closed it, guarantueed session shutdown, slave connections =
created 2.5-DEV style
>>=20
> []
>> Modified: httpd/httpd/trunk/modules/http2/h2_mplx.c
>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_mplx.c?rev=
=3D1714602&r1=3D1714601&r2=3D1714602&view=3Ddiff
>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>> --- httpd/httpd/trunk/modules/http2/h2_mplx.c (original)
>> +++ httpd/httpd/trunk/modules/http2/h2_mplx.c Mon Nov 16 15:12:35 =
2015
>> @@ -227,24 +227,22 @@ void h2_mplx_abort(h2_mplx *m)
>>=20
>> static void io_destroy(h2_mplx *m, h2_io *io)
>> {
>> -    if (io) {
>> -        apr_pool_t *pool =3D io->pool;
>> -        if (pool) {
>> -            io->pool =3D NULL;
>> -            apr_pool_clear(pool);
>> -            if (m->spare_pool) {
>> -                apr_pool_destroy(m->spare_pool);
>> -            }
>> -            m->spare_pool =3D pool;
>> -        }
>> -        /* The pool is cleared/destroyed which also closes all
>> -         * allocated file handles. Give this count back to our
>> -         * file handle pool. */
>> -        m->file_handles_allowed +=3D io->files_handles_owned;
>> -        h2_io_set_remove(m->stream_ios, io);
>> -        h2_io_set_remove(m->ready_ios, io);
>> -        h2_io_destroy(io);
>> -    }
>> +    apr_pool_t *pool =3D io->pool;
>> +    if (pool) {
>> +        io->pool =3D NULL;
>> +        apr_pool_clear(pool);
>> +        if (m->spare_pool) {
>> +            apr_pool_destroy(m->spare_pool);
>> +        }
>> +        m->spare_pool =3D pool;
>=20
> One spare pool only?
>=20
> Maybe we could then:
>    if (m->spare_pool) {
>        apr_pool_destroy(pool);
>    }
>    else {
>       apr_pool_clear(pool);
>       m->spare_pool =3D pool;
>   }
> ?
>=20
>> +    }
>> +    /* The pool is cleared/destroyed which also closes all
>> +     * allocated file handles. Give this count back to our
>> +     * file handle pool. */
>> +    m->file_handles_allowed +=3D io->files_handles_owned;
>> +    h2_io_set_remove(m->stream_ios, io);
>> +    h2_io_set_remove(m->ready_ios, io);
>> +    h2_io_destroy(io);
>=20
> Looks like io is desallocated here (with apr_pool_clear/destroy()
> above), can we still use it at that point?
>=20
>> }
>=20
> Regards,
> Yann.


From dev-return-84554-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 16 17:38:46 2015
Return-Path: <dev-return-84554-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D91FD187C5
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 16 Nov 2015 17:38:46 +0000 (UTC)
Received: (qmail 73787 invoked by uid 500); 16 Nov 2015 17:38:46 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 73718 invoked by uid 500); 16 Nov 2015 17:38:46 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 73708 invoked by uid 99); 16 Nov 2015 17:38:46 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Nov 2015 17:38:46 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id EAB35C55EB
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 17:38:45 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.698
X-Spam-Level:
X-Spam-Status: No, score=0.698 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	KAM_ASCII_DIVIDERS=0.8, RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id PNe8KeTW4nA0 for <dev@httpd.apache.org>;
	Mon, 16 Nov 2015 17:38:45 +0000 (UTC)
Received: from mail-qk0-f171.google.com (mail-qk0-f171.google.com [209.85.220.171])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 5EE5921275
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 17:38:44 +0000 (UTC)
Received: by qkas77 with SMTP id s77so120345940qka.0
        for <dev@httpd.apache.org>; Mon, 16 Nov 2015 09:38:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=yRbll0w+EBQo/Sfk/YBy/KIg5zB2P++4dvfYY4aL2Ts=;
        b=TLaJjrqtvClKYB7FEwAay/6KsKA9+24Z0XF2UF2jCj5FXGStFkaLcervmTWkNOz9zG
         QWtFWfXi2yetPi2k2ci9VUW24n9mW0y995x5TeptMDHYJIqto6IwqZ9RTkg6zDznQagf
         x0WD1zJQGqKU9zV62ssbV32UkVGYvvqYjD2J0iteQKbeg+UI8QWNC9VFpC+TsRqGFGe9
         TaXnqjuFxRw5hyb1EKoRYnKk1iyYL4zfD4Hcqg6tqFTm8s3Cfqy3Uev92x0Z1OTlIRWJ
         Bs3HHLCCMSV+rJcJh+N7HaawVGqf5oMqKWQK+6sqvbAXUVUf6+B1ZwQlt8GgOVCgAy0n
         mpsQ==
MIME-Version: 1.0
X-Received: by 10.140.237.208 with SMTP id i199mr36999913qhc.73.1447695523199;
 Mon, 16 Nov 2015 09:38:43 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 16 Nov 2015 09:38:43 -0800 (PST)
In-Reply-To: <564A0A06.1040300@gmail.com>
References: <20150109203751.20247AC0143@hades.apache.org>
	<564A0A06.1040300@gmail.com>
Date: Mon, 16 Nov 2015 18:38:43 +0100
Message-ID: <CAKQ1sVP-ZO=C8kUt_+tW7+h5A=yjDuKhEE9ah9shF1xRQVciRw@mail.gmail.com>
Subject: Re: svn commit: r1650655 - in /httpd/httpd/branches/2.4.x: CHANGES
 STATUS modules/proxy/proxy_util.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Mon, Nov 16, 2015 at 5:53 PM, jean-frederic clere <jfclere@gmail.com> wrote:
> On 01/09/2015 09:37 PM, jailletc36@apache.org wrote:
>>
>> Modified: httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c
>> URL: http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c?rev=1650655&r1=1650654&r2=1650655&view=diff
>> ==============================================================================
>> --- httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c (original)
>> +++ httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c Fri Jan  9 20:37:50 2015
>> @@ -1683,6 +1683,9 @@ PROXY_DECLARE(char *) ap_proxy_define_wo
>>
>>      memset(wshared, 0, sizeof(proxy_worker_shared));
>>
>> +    if (uri.port && uri.port == ap_proxy_port_of_scheme(uri.scheme)) {
>> +        uri.port = 0;
>> +    }
>
>
> I must be doing something wrong but the above seems to hurt by 30% more
> CPU one for the tests we are doing, any hints?

Looks like you are quite heavy testing this path...

Could you please try the following patch and see if it helps?

Index: modules/proxy/proxy_util.c
===================================================================
--- modules/proxy/proxy_util.c    (revision 1714617)
+++ modules/proxy/proxy_util.c    (working copy)
@@ -3663,35 +3663,51 @@ PROXY_DECLARE(int) ap_proxy_pass_brigade(apr_bucke
     return OK;
 }

-/* Fill in unknown schemes from apr_uri_port_of_scheme() */

-typedef struct proxy_schemes_t {
-    const char *name;
-    apr_port_t default_port;
-} proxy_schemes_t ;
-
-static proxy_schemes_t pschemes[] =
-{
-    {"fcgi",     8000},
-    {"ajp",      AJP13_DEF_PORT},
-    {"scgi",     SCGI_DEF_PORT},
-    { NULL, 0xFFFF }     /* unknown port */
-};
-
 PROXY_DECLARE(apr_port_t) ap_proxy_port_of_scheme(const char *scheme)
 {
     if (scheme) {
-        apr_port_t port;
-        if ((port = apr_uri_port_of_scheme(scheme)) != 0) {
-            return port;
-        } else {
-            proxy_schemes_t *pscheme;
-            for (pscheme = pschemes; pscheme->name != NULL; ++pscheme) {
-                if (strcasecmp(scheme, pscheme->name) == 0) {
-                    return pscheme->default_port;
+        /* Fill in unknown schemes from apr_uri_port_of_scheme(),
+         * and try a fast path for common schemes.
+         */
+        switch (ap_tolower(*scheme)) {
+        case 'a':
+            if (strcasecmp(scheme + 1, "jp") == 0) {
+                return AJP13_DEF_PORT;
+            }
+            break;
+        case 'f':
+            if (strcasecmp(scheme + 1, "cgi") == 0) {
+                return 8000;
+            }
+            if (strcasecmp(scheme + 1, "tp") == 0) {
+                return APR_URI_FTP_DEFAULT_PORT;
+            }
+            break;
+        case 'h':
+            if (strncasecmp(scheme + 1, "ttp", 4) == 0) {
+                int s4 = ap_tolower(scheme[4]);
+                if (!s4) {
+                    return APR_URI_HTTP_DEFAULT_PORT;
                 }
+                else if (s4 == 's' && !scheme[5]) {
+                    return APR_URI_HTTPS_DEFAULT_PORT;
+                }
             }
+            break;
+        case 'n':
+            if (strcasecmp(scheme + 1, "ntp") == 0) {
+                return APR_URI_NNTP_DEFAULT_PORT;
+            }
+            break;
+        case 's':
+            if (strcasecmp(scheme + 1, "cgi") == 0) {
+                return SCGI_DEF_PORT;
+            }
+            break;
         }
+
+        return apr_uri_port_of_scheme(scheme);
     }
     return 0;
 }
--

Regards,
Yann.

From dev-return-84555-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 16 17:51:48 2015
Return-Path: <dev-return-84555-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B8BBC18898
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 16 Nov 2015 17:51:48 +0000 (UTC)
Received: (qmail 21413 invoked by uid 500); 16 Nov 2015 17:51:48 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 21339 invoked by uid 500); 16 Nov 2015 17:51:48 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 21329 invoked by uid 99); 16 Nov 2015 17:51:48 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Nov 2015 17:51:48 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id D75A61A0C46
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 17:51:47 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 2qaIwqx9R-Pt for <dev@httpd.apache.org>;
	Mon, 16 Nov 2015 17:51:47 +0000 (UTC)
Received: from mail-qk0-f172.google.com (mail-qk0-f172.google.com [209.85.220.172])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id CAC9B20C40
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 17:51:46 +0000 (UTC)
Received: by qkfo3 with SMTP id o3so119938481qkf.1
        for <dev@httpd.apache.org>; Mon, 16 Nov 2015 09:51:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=OIvwcF4U0X5kA27pbjKD7WAwnVMMZOlfch0EzHHwWyA=;
        b=qaMBLB+mkP3tK/GU2CzfByAGrrqm15H002mr264Hzs4eF0I6ngeXj4uJhIrQOclaRP
         JzPc3Pe2+uVByZ8hsbT0/QnIW3Mc336oRTCz++idHDDLqmvA33DwEIlw577kUPXsRBLi
         UXdElLrQaUR/eGUMsRszJt4+CulP21gTn7Nx2/OFF/9BYaspSq6ClWd8WUmLbeqKxG5y
         27uMCBk0jCAbQsSeS0t1kvqwEXFdgF9vsazki6Iv83WKI9FauMzfAgNjxdLDpKSuZEjW
         MiFrOjtaTH20KBy89qEy2ynNxH8myAUCMGIUIebDvzITMIxMi7HfqMMCgXFyFV41aXmk
         2N9Q==
MIME-Version: 1.0
X-Received: by 10.140.96.45 with SMTP id j42mr36653939qge.92.1447696299962;
 Mon, 16 Nov 2015 09:51:39 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 16 Nov 2015 09:51:39 -0800 (PST)
In-Reply-To: <CAKQ1sVP-ZO=C8kUt_+tW7+h5A=yjDuKhEE9ah9shF1xRQVciRw@mail.gmail.com>
References: <20150109203751.20247AC0143@hades.apache.org>
	<564A0A06.1040300@gmail.com>
	<CAKQ1sVP-ZO=C8kUt_+tW7+h5A=yjDuKhEE9ah9shF1xRQVciRw@mail.gmail.com>
Date: Mon, 16 Nov 2015 18:51:39 +0100
Message-ID: <CAKQ1sVO_-Shud7EXrCBn-KhjdPdNVk96Npwxeeb6Lk5n0TE1KA@mail.gmail.com>
Subject: Re: svn commit: r1650655 - in /httpd/httpd/branches/2.4.x: CHANGES
 STATUS modules/proxy/proxy_util.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Mon, Nov 16, 2015 at 6:38 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>
> Could you please try the following patch and see if it helps?
>
> Index: modules/proxy/proxy_util.c
> ===================================================================
> --- modules/proxy/proxy_util.c    (revision 1714617)
> +++ modules/proxy/proxy_util.c    (working copy)
[]
>  PROXY_DECLARE(apr_port_t) ap_proxy_port_of_scheme(const char *scheme)
>  {
>      if (scheme) {
[]
> +        switch (ap_tolower(*scheme)) {
[]
> +        case 'h':
> +            if (strncasecmp(scheme + 1, "ttp", 4) == 0) {

Actually this should be strncasecmp(scheme + 1, "ttp", 3)...

> +                int s4 = ap_tolower(scheme[4]);
> +                if (!s4) {
> +                    return APR_URI_HTTP_DEFAULT_PORT;
>                  }
> +                else if (s4 == 's' && !scheme[5]) {
> +                    return APR_URI_HTTPS_DEFAULT_PORT;
> +                }
>              }
> +            break;

From dev-return-84556-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 16 19:24:17 2015
Return-Path: <dev-return-84556-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 90BFF18E11
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 16 Nov 2015 19:24:17 +0000 (UTC)
Received: (qmail 5888 invoked by uid 500); 16 Nov 2015 19:24:17 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 5818 invoked by uid 500); 16 Nov 2015 19:24:17 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 5808 invoked by uid 99); 16 Nov 2015 19:24:16 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Nov 2015 19:24:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 5EA6D18099A
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 19:24:16 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id ihjm8PTzOx_g for <dev@httpd.apache.org>;
	Mon, 16 Nov 2015 19:24:08 +0000 (UTC)
Received: from mail-wm0-f47.google.com (mail-wm0-f47.google.com [74.125.82.47])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 8F92842B20
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 19:24:08 +0000 (UTC)
Received: by wmvv187 with SMTP id v187so193397487wmv.1
        for <dev@httpd.apache.org>; Mon, 16 Nov 2015 11:24:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:content-language
         :thread-index;
        bh=yJ/Gml0R04Xqpl+BzYIts2EDrIFfihjXRN9uVdld4Ao=;
        b=fBzhs8UVBvfdUjAN9stJPzdKczUxg/MzXkbe+QnrWiQ74wmk/rgOuUGH7uRXoXe2Rl
         +fY1lFSvhJ/7Xrf297J91jME6IQu/+F3W9VjxDW0+UQbiGPnOzYPEbbo5zFyWp7Zdb5p
         CBK/2aswobZGvfToHvjGp0+mz8MYq8aE6aunY=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :content-language:thread-index;
        bh=yJ/Gml0R04Xqpl+BzYIts2EDrIFfihjXRN9uVdld4Ao=;
        b=SmEJ6cEQP1ugDuZUTJokbrT6HZpF9f7GVky7jclnm0A8tERx9WOvRgPaNSW+Mwh7KT
         2smZc7txWwt8Sg2mt2zDmgPbFxmxDtBVPI3ybhQR4ikz5qFwHUiDNsz7eezGGs3knX3u
         DC8YSXGQGYnR2PWzhOfrS7mvjGqEFwr5iFGVY2xLg3KgeSSBQWLsocsbQ1D4rzFc7CH9
         7bY/JjiJ99I77vnbonQco0AFaLIUT7Qo/NwV+gjMgQ0AD7zE1HYU24/4OXkGpgqpQmIo
         h+BAxNCpH4LJOFHGlDNcIZj5x+zOvxLnfYNid0WKvJKK2YeMzmG8NAHsV9lbM7Qa3812
         kMbg==
X-Gm-Message-State: ALoCoQmyeReRAYGhyT1ktGies5JJB6m5I40+Xos/iEzscZgOYoU8zSVCW4njs0bQ4kri0S5tK9yM
X-Received: by 10.28.135.206 with SMTP id j197mr22263136wmd.14.1447701840729;
        Mon, 16 Nov 2015 11:24:00 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id t2sm20095241wme.0.2015.11.16.11.23.59
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 16 Nov 2015 11:24:00 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <008501d11ec5$313f5600$93be0200$@qqmail.nl> <CF636B95-51D9-40CD-91B3-51B883DD9BDC@greenbytes.de>
In-Reply-To: <CF636B95-51D9-40CD-91B3-51B883DD9BDC@greenbytes.de>
Subject: RE: mod_http2 / H2WindowSize default
Date: Mon, 16 Nov 2015 20:23:55 +0100
Message-ID: <028a01d120a4$56ebbbb0$04c33310$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 16.0
Content-Language: nl
Thread-Index: AQJvlDD3t8ycaY0x91kDVNFMWrOccwKG2ZfTnU3gTnA=

> -----Original Message-----
> From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
> Sent: maandag 16 november 2015 12:41
> To: dev@httpd.apache.org
> Subject: Re: mod_http2 / H2WindowSize default
>=20
>=20
> > Am 14.11.2015 um 11:14 schrieb Bert Huijben <bert@qqmail.nl>:
> >
> >                 Hi,
> >
> > I was wondering why mod_http2 currently uses a default window size =
of
> 65536.
>=20
> Pure mistake on my part. I put this in almost at the start of =
development and
> never reviewed this.
>=20
> Thanks for catching it. I am just about to commit a change that
> a) set the default to 65535
> b) will not send a setting for it to the client unless it has been =
configured to
> have another value
>=20
> I also removed the sending of the MAX_HEADER_LIST_SIZE, since it is =
not
> enforced in any way currently.
>=20
> Hope this change works for you.

	Thanks,

Those settings are enforced in (my) Serf implementation now, so my code =
will see a difference. Thanks for fixing.
(BTW: It is very easy to spot these two if you run nghttp2 in verbose =
mode against httpd).


As my http2 implementation in serf is coming closer to full-featured I'm =
trying to exercise more and more things in httpd 2.4.17.

Currently it looks like bodies of requests are not delivered over http/2 =
unless I add a Content-Length header to the request.


Serf is a client that is eager to use chunked encoding over http/1, so =
by default it won't send such a header. And in http/2 this header is =
fully optional as the existence of a body on a request is already =
available with a flag on the headers frame.

I would love to see this fixed soon, as this is currently a blocker for =
me to start testing Subversion over http/2.

	Bert


From dev-return-84557-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 16 23:49:23 2015
Return-Path: <dev-return-84557-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 34F6B18BCE
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 16 Nov 2015 23:49:23 +0000 (UTC)
Received: (qmail 71665 invoked by uid 500); 16 Nov 2015 23:49:22 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 71568 invoked by uid 500); 16 Nov 2015 23:49:22 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 71556 invoked by uid 99); 16 Nov 2015 23:49:22 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Nov 2015 23:49:22 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id E73821A0953
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 23:49:21 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 6gTwb7nAgEJ2 for <dev@httpd.apache.org>;
	Mon, 16 Nov 2015 23:49:15 +0000 (UTC)
Received: from mail-qg0-f45.google.com (mail-qg0-f45.google.com [209.85.192.45])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id A3EE520C40
	for <dev@httpd.apache.org>; Mon, 16 Nov 2015 23:49:14 +0000 (UTC)
Received: by qgeb1 with SMTP id b1so61876215qge.1
        for <dev@httpd.apache.org>; Mon, 16 Nov 2015 15:49:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=7/LhzEnXjKFWNlyjFQBenwD7DWDcYGlkzFPcEFSa/LM=;
        b=gHlBDungyfZI5IozhkVFLF4mQyVDWLXbzazGf/D96tb4cNI97mtR9AqkBwSBFx+Yg6
         tlIUHhGQanjoEBU6gdQw5HyZ0NvWkrxYVQ1Shnfk6IHzqMNBz/H6/3zav1ZlN9lLyEeI
         n/9qCYVXnrRmincrf/UfBtgalLceIOxTPEJ6Y0xAOGqegR/dXgiH91J3yYf0zk4DkjHZ
         JjsBrHdQXu71rzPOPuUX+CGi4XOSjF6DTZOXDIuQ3FmFzxdRaFTwbSiuZRyZRy9whuiP
         Olwu8WAo5GMp9uFdtPlfOQS9LHdwQqYPXspAGP/DnIRxd80qtXzbECqwMcSd/YAO/zCa
         EIwQ==
MIME-Version: 1.0
X-Received: by 10.140.142.147 with SMTP id 141mr41074697qho.24.1447717747971;
 Mon, 16 Nov 2015 15:49:07 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 16 Nov 2015 15:49:07 -0800 (PST)
In-Reply-To: <028a01d120a4$56ebbbb0$04c33310$@qqmail.nl>
References: <008501d11ec5$313f5600$93be0200$@qqmail.nl>
	<CF636B95-51D9-40CD-91B3-51B883DD9BDC@greenbytes.de>
	<028a01d120a4$56ebbbb0$04c33310$@qqmail.nl>
Date: Tue, 17 Nov 2015 00:49:07 +0100
Message-ID: <CAKQ1sVPZj1Cm2UPbLbKyPC0qLFmKmLqav1qO5+hWMkcnHH7+Ww@mail.gmail.com>
Subject: Re: mod_http2 / H2WindowSize default
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Mon, Nov 16, 2015 at 8:23 PM, Bert Huijben <bert@qqmail.nl> wrote:
>
> Currently it looks like bodies of requests are not delivered over http/2 unless I add a Content-Length header to the request.

Do you mean it does not work with the "Transfer-Encoding: chunked"
header either?

Regards,
Yann.

From dev-return-84558-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 07:13:22 2015
Return-Path: <dev-return-84558-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B2A5018E0F
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 07:13:22 +0000 (UTC)
Received: (qmail 52492 invoked by uid 500); 17 Nov 2015 07:13:22 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 52399 invoked by uid 500); 17 Nov 2015 07:13:22 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 52389 invoked by uid 99); 17 Nov 2015 07:13:22 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 07:13:22 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id D5FEC1A0AC6
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 07:13:21 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.009
X-Spam-Level:
X-Spam-Status: No, score=-0.009 tagged_above=-999 required=6.31
	tests=[SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01,
	UNPARSEABLE_RELAY=0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id JvuGvWglQBr7 for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 07:13:19 +0000 (UTC)
Received: from mail.ausics.net (valhalla.ausics.net [27.33.160.23])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id DF84A23047
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 07:13:18 +0000 (UTC)
Received: from mail.ausics.net (valhalla.ausics.net [10.10.0.10])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.ausics.net (Postfix) with ESMTPSA id 92946C0E122
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 17:13:08 +1000 (AEST)
Received: from eTn9/YMYYtOOSKO+SHG2vyJzPBHsA7otiojMt85/gzE=
 (3Z7LvTdMlivuGXtlX0o61DxS/VStIYx2)
 by mail.ausics.net
 with HTTP (HTTP/1.1 POST); Tue, 17 Nov 2015 17:13:08 +1000
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII;
 format=flowed
Content-Transfer-Encoding: 7bit
Date: Tue, 17 Nov 2015 17:13:08 +1000
From: Noel Butler <noel.butler@ausics.net>
To: dev@httpd.apache.org
Subject: Re: 2.4.18?
In-Reply-To: <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com>
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net>
 <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com>
Message-ID: <139befce90c51c313f7b512915241f71@ausics.net>
X-Sender: noel.butler@ausics.net
User-Agent: Roundcube Webmail

On 17/11/2015 03:05, Jim Jagielski wrote:
> My plan is to T&R 2.4.18 sometime next week in hopes of a formal
> release the beginning of Dec.
> 

??? We only had 2.4.17  5 weeks ago, why the rush?


-- 
If you have the urge to reply to all rather than reply to list, you best
read  http://members.ausics.net/qwerty/

From dev-return-84559-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 08:03:01 2015
Return-Path: <dev-return-84559-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B746A18FED
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 08:03:01 +0000 (UTC)
Received: (qmail 45177 invoked by uid 500); 17 Nov 2015 08:02:56 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 45093 invoked by uid 500); 17 Nov 2015 08:02:56 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 45080 invoked by uid 99); 17 Nov 2015 08:02:56 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 08:02:56 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id EA7F2C59C3
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 08:02:55 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.682
X-Spam-Level:
X-Spam-Status: No, score=-0.682 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RP_MATCHES_RCVD=-0.582, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 6OHNUlvJ1ehR for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 08:02:48 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id E942A22F15
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 08:02:47 +0000 (UTC)
Received: from [192.168.178.61] (unknown [84.189.80.147])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 8FC7F15A0110
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 09:02:39 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447747359; bh=KYSaEWadUPguw4ilUvh+SYadRZs7GR56RGfbLIFUmcY=;
	h=From:Subject:Date:References:In-Reply-To:To:From;
	b=anqx6QtkivgjbjjzMTMbVD0kpgDHNgVwny952pv3sc10lklX7uZr6UZEBx5boFBau
	 5J2o+qDNIjA6tszKHQEWO5niKBYZ4npNRRKEi1Ng4GynRey9M/PYsrIur+aXPA7VWl
	 Lce7oie9tHkfT6GtFJo6s3hbRLHF9uahoCrE2OdM=
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (1.0)
Subject: Re: 2.4.18?
Message-Id: <BCBFC8FF-EE49-4E2F-8783-69DECEB025EF@greenbytes.de>
Date: Tue, 17 Nov 2015 09:02:38 +0100
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net> <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com> <139befce90c51c313f7b512915241f71@ausics.net>
In-Reply-To: <139befce90c51c313f7b512915241f71@ausics.net>
To: dev@httpd.apache.org
X-Mailer: iPhone Mail (13B143)


> Am 17.11.2015 um 08:13 schrieb Noel Butler <noel.butler@ausics.net>:
>=20
>> On 17/11/2015 03:05, Jim Jagielski wrote:
>> My plan is to T&R 2.4.18 sometime next week in hopes of a formal
>> release the beginning of Dec.
>=20
> ??? We only had 2.4.17  5 weeks ago, why the rush?

Uhm. When would be a better time for you to get fixes and functional improve=
ments?

//Stefan=

From dev-return-84560-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 09:03:55 2015
Return-Path: <dev-return-84560-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0760917441
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 09:03:55 +0000 (UTC)
Received: (qmail 126 invoked by uid 500); 17 Nov 2015 09:03:54 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 99950 invoked by uid 500); 17 Nov 2015 09:03:54 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 99940 invoked by uid 99); 17 Nov 2015 09:03:54 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 09:03:54 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 1F5E0C2B70
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 09:03:54 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.901
X-Spam-Level: **
X-Spam-Status: No, score=2.901 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, MIME_QP_LONG_LINE=0.001, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=apachelounge.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id RsFS_dwbZwLR for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 09:03:43 +0000 (UTC)
Received: from land10web.com (land10web.com [80.101.236.247])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTP id 325C020592
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 09:03:42 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=apachelounge.com;
	s=default; t=1447751021;
	bh=KRv2MolE5FcSbfvp4pypmP5wj5G6SA4N1tUaL3HcB5M=;
	h=From:To:Subject:Date;
	b=2JpeGLwQ3WfDNp+H7PM3D+qLAsTjhsGCzDDcGf5vCupcRmEv4mBbMfXUc9TUDgHoR
	 /+Cm9y2K2I3LB4pxoF+ES4RrictNZYtEiU50VkDp/PTHG3iPcFzFRInQEiJxlf6oyI
	 gRSr+FixaxDCrAUjjSDzJK0o/WmpsPRC0yjZ2erU=
X-Default-Received-SPF: pass (skip=forwardok (res=PASS)) x-ip-name=127.0.0.1;
From: Steffen <info@apachelounge.com>
To:  <dev@httpd.apache.org>
Subject: Re: 2.4.18?
Date: Tue, 17 Nov 2015 10:03:33 +0100
Message-ID: <564aed65.548.1958.1401@land10.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="----=_SW_17129_1447751013_mpa="
X-Originating-IP: 127.0.0.1
X-Mailer: SurgeWeb - Ajax Webmail Client

This is a multi-part message in MIME format.

------=_SW_17129_1447751013_mpa=
Content-Type: text/plain; charset=utf-8; format=flowed


There are serious memory issues  introduced with the test branch 
2.4-http2-alpha. Issues I had with 2.4.17 GA and mod-http2 seems to be 
solved in the test branch. .

For me there is need to get fixes out soon, had to disable mod_http2.

It crashes httpd after sometime with:


[crit] Memory allocation failed, aborting process.

[mpm_winnt:notice] [pid 5716:tid 444] AH00428: Parent: child process
4948 exited with status 3221226505 -- Restarting

Noticeable is that without mod_http2 the httpd process memory usage is 
a steady line, with mod_https it peaks regular to double amount.

Others with no crashes but errors like:


VirtualAlloc() failed: [0x000005af] Sivutustiedosto on liian pieni 
tmn toiminnon loppuun suorittamiseksi. (~Page file is too small to 
finish this action)
VirtualFree() failed: [0x000001e7] Yritettiin kytt osoitetta, 
joka ei kelpaa. (~Attempt to use invalid address).

Off-list I send info to Stefan.


Steffen



On Tuesday 17/11/2015 at 09:03, Stefan Eissing  wrote:
>
>>
>> Am 17.11.2015 um 08:13 schrieb Noel Butler <noel.butler@ausics.net>:
>>
>>>
>>> On 17/11/2015 03:05, Jim Jagielski wrote:
>>> My plan is to T&R 2.4.18 sometime next week in hopes of a formal
>>> release the beginning of Dec.
>>
>> ??? We only had 2.4.17  5 weeks ago, why the rush?
>
> Uhm. When would be a better time for you to get fixes and functional 
> improvements?
>
> //Stefan


------=_SW_17129_1447751013_mpa=
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

<html>
<head>
<style>
 .sw_message P{margin:0px;padding:0px;}
 .sw_message {FONT-SIZE: 12pt;FONT-FAMILY:Tahoma,Arial,Helvetica,sans-serif;background:white;}
 .sw_message blockquote{margin-left:5px;padding-left:5px;border-left:2px solid #144fae;color: #144fae;}
 .sw_message blockquote blockquote{border-left:2px solid #006312;color: #006312;}
 .sw_message blockquote blockquote blockquote{border-left:2px solid #8e5656;color: #8e5656;}
 .sw_message blockquote blockquote blockquote blockquote{border-left:2px solid #888;color: #888;}
</style>
</head>
<body class=3d"sw_message">
<div>There are serious memory issues &nbsp;introduced with the test branch 2=
.4-http2-alpha. I<span style=3d"font-size: 12pt;">ssues I had with 2.4.17 GA=
 and mod-http2 seems to be solved in the test&nbsp;</span>branch<span style=
=3d"font-size: 12pt;">. .</span></div><div><br></div><div>For me there is ne=
ed to get fixes out soon, had to disable mod_http2.</div><div><br></div><div=
>It crashes httpd after sometime with:</div><div><br></div><div><div>[crit] =
Memory allocation failed, aborting process.</div><div><br></div><div>[mpm_wi=
nnt:notice] [pid 5716:tid 444] AH00428: Parent: child process&nbsp;</div><di=
v>4948 exited with status 3221226505 -- Restarting</div></div><div><br></div=
><div>Noticeable is that without mod_http2 the httpd process memory usage is=
 a steady line, with mod_https it peaks regular to double amount.</div><div>=
<br></div><div>Others with no crashes but errors like:</div><div><br></div><=
div><div>VirtualAlloc() failed: [0x000005af] Sivutustiedosto on liian pieni =
t=c3=a4m=c3=a4n toiminnon loppuun suorittamiseksi. (~Page file is too small =
to finish this action)&nbsp;</div><div>VirtualFree() failed: [0x000001e7] Yr=
itettiin k=c3=a4ytt=c3=a4=c3=a4 osoitetta, joka ei kelpaa. (~Attempt to use =
invalid address).</div></div><div><br></div><div>Off-list I send info to Ste=
fan.</div><div><br></div><div><br></div><div>Steffen</div><div><br></div><di=
v>&nbsp;</div><div id=3d"editor_signature"></div><div>On Tuesday 17/11/2015 =
at 09:03, Stefan Eissing  wrote: </div><blockquote type=3d"cite"><br><blockq=
uote type=3d"cite"> Am 17.11.2015 um 08:13 schrieb Noel Butler &lt;noel.butl=
er@ausics.net&gt;:<br> <br><blockquote type=3d"cite"> On 17/11/2015 03:05, J=
im Jagielski wrote:<br> My plan is to T&amp;R 2.4.18 sometime next week in h=
opes of a formal<br> release the beginning of Dec.<br></blockquote> <br> ???=
 We only had 2.4.17  5 weeks ago, why the rush?<br></blockquote><br>Uhm. Whe=
n would be a better time for you to get fixes and functional improvements?<b=
r><br>//Stefan<br></blockquote><br> 
</body></html>

------=_SW_17129_1447751013_mpa=--


From dev-return-84561-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 09:25:13 2015
Return-Path: <dev-return-84561-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3681817534
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 09:25:13 +0000 (UTC)
Received: (qmail 71344 invoked by uid 500); 17 Nov 2015 09:25:12 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 71263 invoked by uid 500); 17 Nov 2015 09:25:12 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 71253 invoked by uid 99); 17 Nov 2015 09:25:12 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 09:25:12 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 47AE4C05AD
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 09:25:12 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.01
X-Spam-Level:
X-Spam-Status: No, score=-0.01 tagged_above=-999 required=6.31
	tests=[SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id tLJW-KwxQmv5 for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 09:25:03 +0000 (UTC)
Received: from monica.sharp.fm (monica.sharp.fm [80.168.143.5])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTP id E644C21247
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 09:25:02 +0000 (UTC)
Received: from [10.181.149.170] (unknown [46.233.116.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	(Authenticated sender: minfrin@sharp.fm)
	by monica.sharp.fm (Postfix) with ESMTPSA id 8381180C92
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 09:24:56 +0000 (GMT)
From: Graham Leggett <minfrin@sharp.fm>
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (1.0)
Subject: Re: 2.4.18?
Message-Id: <93FFD147-A1B3-4902-B2C2-630EB7742C0D@sharp.fm>
Date: Tue, 17 Nov 2015 09:24:55 +0000
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net> <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com> <139befce90c51c313f7b512915241f71@ausics.net>
In-Reply-To: <139befce90c51c313f7b512915241f71@ausics.net>
To: dev@httpd.apache.org
X-Mailer: iPhone Mail (13B143)

On 17 Nov 2015, at 07:13, Noel Butler <noel.butler@ausics.net> wrote:

> ??? We only had 2.4.17  5 weeks ago, why the rush?

We have improvements, why make people wait?

Regards,
Graham
--


From dev-return-84562-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 10:17:03 2015
Return-Path: <dev-return-84562-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C68C217733
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 10:17:03 +0000 (UTC)
Received: (qmail 97644 invoked by uid 500); 17 Nov 2015 10:17:03 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 97564 invoked by uid 500); 17 Nov 2015 10:17:03 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 97554 invoked by uid 99); 17 Nov 2015 10:17:03 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 10:17:03 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id D1864C059C
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 10:17:02 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.11
X-Spam-Level:
X-Spam-Status: No, score=-0.11 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id rzupAVPsox0g for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 10:16:56 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id B389F23048
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 10:16:55 +0000 (UTC)
Received: from [192.168.1.134] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 9804715A0396
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 11:16:54 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447755414; bh=+v83/9UWi/2ia9KHUFyXxWvmLNXkm84/MlXWwxcVoL4=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=BAsEoNXzfkZdA34j1qf5WhjKcmspUcYk1r/xioqU6UpeW7NrfULkRf/surPRBu5L2
	 TIUyPJibSmEU+bjCiBpRTRJjZWNLYkoSZrk2u8bovSHkch75xKDVEsCEKI+mOgTP7g
	 gFEjSEpJ0ZlaXYgkh8LCW6JfuSEOkdOMKuhF62GE=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: mod_http2 / H2WindowSize default
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <028a01d120a4$56ebbbb0$04c33310$@qqmail.nl>
Date: Tue, 17 Nov 2015 11:16:54 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <B2A3EFE4-4876-491A-8BC3-4ECA707772AA@greenbytes.de>
References: <008501d11ec5$313f5600$93be0200$@qqmail.nl> <CF636B95-51D9-40CD-91B3-51B883DD9BDC@greenbytes.de> <028a01d120a4$56ebbbb0$04c33310$@qqmail.nl>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

Hmm, I have test cases with uploads without content-length, but those =
included a content-type...

Ok, adding a POST lacking both triggers the misbehaviour. Working on a =
fix...

//Stefan

> Am 16.11.2015 um 20:23 schrieb Bert Huijben <bert@qqmail.nl>:
>=20
>> -----Original Message-----
>> From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
>> Sent: maandag 16 november 2015 12:41
>> To: dev@httpd.apache.org
>> Subject: Re: mod_http2 / H2WindowSize default
>>=20
>>=20
>>> Am 14.11.2015 um 11:14 schrieb Bert Huijben <bert@qqmail.nl>:
>>>=20
>>>                Hi,
>>>=20
>>> I was wondering why mod_http2 currently uses a default window size =
of
>> 65536.
>>=20
>> Pure mistake on my part. I put this in almost at the start of =
development and
>> never reviewed this.
>>=20
>> Thanks for catching it. I am just about to commit a change that
>> a) set the default to 65535
>> b) will not send a setting for it to the client unless it has been =
configured to
>> have another value
>>=20
>> I also removed the sending of the MAX_HEADER_LIST_SIZE, since it is =
not
>> enforced in any way currently.
>>=20
>> Hope this change works for you.
>=20
> 	Thanks,
>=20
> Those settings are enforced in (my) Serf implementation now, so my =
code will see a difference. Thanks for fixing.
> (BTW: It is very easy to spot these two if you run nghttp2 in verbose =
mode against httpd).
>=20
>=20
> As my http2 implementation in serf is coming closer to full-featured =
I'm trying to exercise more and more things in httpd 2.4.17.
>=20
> Currently it looks like bodies of requests are not delivered over =
http/2 unless I add a Content-Length header to the request.
>=20
>=20
> Serf is a client that is eager to use chunked encoding over http/1, so =
by default it won't send such a header. And in http/2 this header is =
fully optional as the existence of a body on a request is already =
available with a flag on the headers frame.
>=20
> I would love to see this fixed soon, as this is currently a blocker =
for me to start testing Subversion over http/2.
>=20
> 	Bert


From dev-return-84563-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 10:28:15 2015
Return-Path: <dev-return-84563-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4AA9D17799
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 10:28:15 +0000 (UTC)
Received: (qmail 26352 invoked by uid 500); 17 Nov 2015 10:28:14 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 26280 invoked by uid 500); 17 Nov 2015 10:28:14 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 26270 invoked by uid 99); 17 Nov 2015 10:28:14 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 10:28:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 0C2EEC6D71
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 10:28:14 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.681
X-Spam-Level:
X-Spam-Status: No, score=-0.681 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RP_MATCHES_RCVD=-0.582, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id sCqJzh57jLL5 for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 10:28:01 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id DD63E23048
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 10:28:00 +0000 (UTC)
Received: from [192.168.1.134] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 78AA515A0396
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 11:28:00 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447756080; bh=iXATdIum0H12MgCpHdvVecVxfP6e6Z8CZw+P8YhELEM=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=r0/H3WEzUEJ+UAVxhuIb7b81CjN++kTVABXQjlJFnNZ9JpG3sMDsyMYViaL++Ti3Y
	 xWtoCXe2aQbECu3FKWIWAjKVLcj4PkJvLQ3Y4BFaqWxa5HQvDLhg2wOg+iuwRJfS0w
	 NAFHHPb1di5qbDgmvaWfUXBxAfuAoIbpyRrNzlIo=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: mod_http2 / H2WindowSize default
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <B2A3EFE4-4876-491A-8BC3-4ECA707772AA@greenbytes.de>
Date: Tue, 17 Nov 2015 11:28:00 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <1A2B54FC-1693-40A5-A4FA-41669BD6BA91@greenbytes.de>
References: <008501d11ec5$313f5600$93be0200$@qqmail.nl> <CF636B95-51D9-40CD-91B3-51B883DD9BDC@greenbytes.de> <028a01d120a4$56ebbbb0$04c33310$@qqmail.nl> <B2A3EFE4-4876-491A-8BC3-4ECA707772AA@greenbytes.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

Fixed in r1714751.

> Am 17.11.2015 um 11:16 schrieb Stefan Eissing =
<stefan.eissing@greenbytes.de>:
>=20
> Hmm, I have test cases with uploads without content-length, but those =
included a content-type...
>=20
> Ok, adding a POST lacking both triggers the misbehaviour. Working on a =
fix...
>=20
> //Stefan
>=20
>> Am 16.11.2015 um 20:23 schrieb Bert Huijben <bert@qqmail.nl>:
>>=20
>>> -----Original Message-----
>>> From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
>>> Sent: maandag 16 november 2015 12:41
>>> To: dev@httpd.apache.org
>>> Subject: Re: mod_http2 / H2WindowSize default
>>>=20
>>>=20
>>>> Am 14.11.2015 um 11:14 schrieb Bert Huijben <bert@qqmail.nl>:
>>>>=20
>>>>               Hi,
>>>>=20
>>>> I was wondering why mod_http2 currently uses a default window size =
of
>>> 65536.
>>>=20
>>> Pure mistake on my part. I put this in almost at the start of =
development and
>>> never reviewed this.
>>>=20
>>> Thanks for catching it. I am just about to commit a change that
>>> a) set the default to 65535
>>> b) will not send a setting for it to the client unless it has been =
configured to
>>> have another value
>>>=20
>>> I also removed the sending of the MAX_HEADER_LIST_SIZE, since it is =
not
>>> enforced in any way currently.
>>>=20
>>> Hope this change works for you.
>>=20
>> 	Thanks,
>>=20
>> Those settings are enforced in (my) Serf implementation now, so my =
code will see a difference. Thanks for fixing.
>> (BTW: It is very easy to spot these two if you run nghttp2 in verbose =
mode against httpd).
>>=20
>>=20
>> As my http2 implementation in serf is coming closer to full-featured =
I'm trying to exercise more and more things in httpd 2.4.17.
>>=20
>> Currently it looks like bodies of requests are not delivered over =
http/2 unless I add a Content-Length header to the request.
>>=20
>>=20
>> Serf is a client that is eager to use chunked encoding over http/1, =
so by default it won't send such a header. And in http/2 this header is =
fully optional as the existence of a body on a request is already =
available with a flag on the headers frame.
>>=20
>> I would love to see this fixed soon, as this is currently a blocker =
for me to start testing Subversion over http/2.
>>=20
>> 	Bert
>=20


From dev-return-84564-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 11:21:16 2015
Return-Path: <dev-return-84564-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 78C7717965
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 11:21:16 +0000 (UTC)
Received: (qmail 21480 invoked by uid 500); 17 Nov 2015 11:21:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 21407 invoked by uid 500); 17 Nov 2015 11:21:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 21397 invoked by uid 99); 17 Nov 2015 11:21:16 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 11:21:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 812C0180A63
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 11:21:15 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 3dEK-X971h88 for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 11:21:14 +0000 (UTC)
Received: from mail-qk0-f179.google.com (mail-qk0-f179.google.com [209.85.220.179])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 73566441B8
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 11:21:14 +0000 (UTC)
Received: by qkas77 with SMTP id s77so1469378qka.0
        for <dev@httpd.apache.org>; Tue, 17 Nov 2015 03:21:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=T0AKr8E1gsUhFaOE/uI5YaZVumylMcyV6Tc0Rzfa/sg=;
        b=K9DYxNzhrIZUygIuOORwjPuu1bdXBAkwZ4vqo9lFBUxY8x+NuqURfHWe0A14R9hy1L
         VO9/nogmQir12MBMaa8LFGirvVJ0pX9bj5en8Y2uAd1MVlAganzcawa2BQoT/co8jOUD
         ugBoFp08Bevlxju1g104/1uyaOoorfUktnutF35pr0m0eSnAnZ4foYTMxEAPHXGuP1PB
         5eGbp3cgef2Cb9Ha7FT2t5VVUCTEweTXZDwggFFulT6RFjWgH2XUvB2MyoG/7FHdQuwg
         gs8xNgE1EQpblfGr0GmXKBssuSG2iopsFN+VGGSF6S+LIAnEuFjJeVVWiExyODDgdTYp
         ilYQ==
MIME-Version: 1.0
X-Received: by 10.55.56.130 with SMTP id f124mr39387670qka.79.1447759267869;
 Tue, 17 Nov 2015 03:21:07 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 17 Nov 2015 03:21:07 -0800 (PST)
In-Reply-To: <20151117102639.2195C3A024F@svn01-us-west.apache.org>
References: <20151117102639.2195C3A024F@svn01-us-west.apache.org>
Date: Tue, 17 Nov 2015 12:21:07 +0100
Message-ID: <CAKQ1sVMJ9zF_DrT1buNWjxv3o3cX6-v3ED13zsvuP0cnuV57+A@mail.gmail.com>
Subject: Re: svn commit: r1714751 - /httpd/httpd/trunk/modules/http2/h2_request.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 17, 2015 at 11:26 AM,  <icing@apache.org> wrote:
> Author: icing
> Date: Tue Nov 17 10:26:38 2015
> New Revision: 1714751
>
> URL: http://svn.apache.org/viewvc?rev=1714751&view=rev
> Log:
> handling body of chunked requests without content-length and content-type correctly
>
> Modified:
>     httpd/httpd/trunk/modules/http2/h2_request.c
>
> Modified: httpd/httpd/trunk/modules/http2/h2_request.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_request.c?rev=1714751&r1=1714750&r2=1714751&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/modules/http2/h2_request.c (original)
> +++ httpd/httpd/trunk/modules/http2/h2_request.c Tue Nov 17 10:26:38 2015
> @@ -254,18 +254,21 @@ apr_status_t h2_request_end_headers(h2_r
>      else {
>          /* no content-length given */
>          req->content_length = -1;
> -        s = apr_table_get(req->headers, "Content-Type");
> -        if (eos && s) {
> -            req->chunked = 0;
> -            apr_table_setn(req->headers, "Content-Length", "0");
> -        }
> -        else if (s) {
> -            /* We have not seen a content-length, but a content-type.
> -             * must pass any request content in chunked form.
> +        if (!eos) {
> +            /* We have not seen a content-length and have no eos,
> +             * simulate a chunked encoding for our HTTP/1.1 infrastructure,
> +             * in case we have "H2SerializeHeaders on" here
>               */
>              req->chunked = 1;
>              apr_table_mergen(req->headers, "Transfer-Encoding", "chunked");
>          }
> +        else if (apr_table_get(req->headers, "Content-Type")) {
> +            /* If we have a content-type, but already see eos, no more
> +             * data will come. Signal a zero content length explicitly.
> +             */
> +            req->chunked = 0;
> +            apr_table_setn(req->headers, "Content-Length", "0");
> +        }
>      }

Not sure to understand here, are HTTP2 requirements about "Message
Body" different from those in HTTP1 (rfc7230, section 3.3)?
For the latter, Content-Type has no role to play, message bodies are
solely given by either "Content-Length" or "Transfer-Encoding: [...,]
chunked" headers.
Any request (whose method "defines a meaning for an enclosed payload
body") SHOULD contain one of those, otherwise it is considered to have
no body.
IMHO we should be strict about messages boundaries to avoid HTTP
requests/responses smuggling.
Did I miss something?

From dev-return-84565-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 11:58:23 2015
Return-Path: <dev-return-84565-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 839A717AE0
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 11:58:23 +0000 (UTC)
Received: (qmail 85663 invoked by uid 500); 17 Nov 2015 11:58:23 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 85585 invoked by uid 500); 17 Nov 2015 11:58:22 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 85575 invoked by uid 99); 17 Nov 2015 11:58:22 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 11:58:22 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 74C4AC5A14
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 11:58:22 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.683
X-Spam-Level:
X-Spam-Status: No, score=-0.683 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RP_MATCHES_RCVD=-0.582, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id zl4M31WRjg5k for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 11:58:21 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 8C63123047
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 11:58:20 +0000 (UTC)
Received: from [192.168.1.134] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id ACA0715A0396
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:58:13 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447761493; bh=6ygydCwk/F2NNiR/fyhJ73yge5J+AX6rYHyADwLbDww=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=bN95UAwxTv4iQVqFDdaSQg+C5I0aLdSvLvvNqmMwEgexRhjZVS4J3hMrIGUpSbriZ
	 ahamhfqm1KNQonUAyKgksjU26O16R1NFpQg3Cun8L4NkHrXxl69ZOmX+aFO4uRmahf
	 +Y2gCVQVzReUz2PQzsoX80Qw18Kx2N0MiuuCkvTk=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: svn commit: r1714751 - /httpd/httpd/trunk/modules/http2/h2_request.c
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CAKQ1sVMJ9zF_DrT1buNWjxv3o3cX6-v3ED13zsvuP0cnuV57+A@mail.gmail.com>
Date: Tue, 17 Nov 2015 12:58:13 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <96555307-DAD5-4EB0-AD1C-7B20FBDD2B84@greenbytes.de>
References: <20151117102639.2195C3A024F@svn01-us-west.apache.org> <CAKQ1sVMJ9zF_DrT1buNWjxv3o3cX6-v3ED13zsvuP0cnuV57+A@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

There is no "Transfer-Encoding" header in HTTP/2. When forwarding the
request for processing into httpd core, there are currently two paths:
- H2SerializeHeaders off (default), where request_rec is created =
directly
and
- H2SerializeHeaders on, where the slave connection carries a serialized=20=

  HTTP/1.1 request that is parsed and processed as if it where a real=20
  client connection.

if content-length has not been specified in the HTTP/2 request, the code
- adds "Transfer-Encoding" if DATA is to be expected (no EOS signaled)
- adds "Content-Length: 0" if EOS has already been signaled. This is to
  allow the eventual HTTP/1.1 request parsing to know that no data will
  come. Adding this only for requests with "Content-Type" present is
  up for discussion. I want to avoid adding headers to common requests
  that do not normally carry a body, like GET, DELETE, HEAD and others.

//Stefan

> Am 17.11.2015 um 12:21 schrieb Yann Ylavic <ylavic.dev@gmail.com>:
>=20
> On Tue, Nov 17, 2015 at 11:26 AM,  <icing@apache.org> wrote:
>> Author: icing
>> Date: Tue Nov 17 10:26:38 2015
>> New Revision: 1714751
>>=20
>> URL: http://svn.apache.org/viewvc?rev=3D1714751&view=3Drev
>> Log:
>> handling body of chunked requests without content-length and =
content-type correctly
>>=20
>> Modified:
>>    httpd/httpd/trunk/modules/http2/h2_request.c
>>=20
>> Modified: httpd/httpd/trunk/modules/http2/h2_request.c
>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_request.c?=
rev=3D1714751&r1=3D1714750&r2=3D1714751&view=3Ddiff
>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>> --- httpd/httpd/trunk/modules/http2/h2_request.c (original)
>> +++ httpd/httpd/trunk/modules/http2/h2_request.c Tue Nov 17 10:26:38 =
2015
>> @@ -254,18 +254,21 @@ apr_status_t h2_request_end_headers(h2_r
>>     else {
>>         /* no content-length given */
>>         req->content_length =3D -1;
>> -        s =3D apr_table_get(req->headers, "Content-Type");
>> -        if (eos && s) {
>> -            req->chunked =3D 0;
>> -            apr_table_setn(req->headers, "Content-Length", "0");
>> -        }
>> -        else if (s) {
>> -            /* We have not seen a content-length, but a =
content-type.
>> -             * must pass any request content in chunked form.
>> +        if (!eos) {
>> +            /* We have not seen a content-length and have no eos,
>> +             * simulate a chunked encoding for our HTTP/1.1 =
infrastructure,
>> +             * in case we have "H2SerializeHeaders on" here
>>              */
>>             req->chunked =3D 1;
>>             apr_table_mergen(req->headers, "Transfer-Encoding", =
"chunked");
>>         }
>> +        else if (apr_table_get(req->headers, "Content-Type")) {
>> +            /* If we have a content-type, but already see eos, no =
more
>> +             * data will come. Signal a zero content length =
explicitly.
>> +             */
>> +            req->chunked =3D 0;
>> +            apr_table_setn(req->headers, "Content-Length", "0");
>> +        }
>>     }
>=20
> Not sure to understand here, are HTTP2 requirements about "Message
> Body" different from those in HTTP1 (rfc7230, section 3.3)?
> For the latter, Content-Type has no role to play, message bodies are
> solely given by either "Content-Length" or "Transfer-Encoding: [...,]
> chunked" headers.
> Any request (whose method "defines a meaning for an enclosed payload
> body") SHOULD contain one of those, otherwise it is considered to have
> no body.
> IMHO we should be strict about messages boundaries to avoid HTTP
> requests/responses smuggling.
> Did I miss something?


From dev-return-84566-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 12:14:02 2015
Return-Path: <dev-return-84566-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6935B17B7A
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 12:14:02 +0000 (UTC)
Received: (qmail 24232 invoked by uid 500); 17 Nov 2015 12:14:02 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 24157 invoked by uid 500); 17 Nov 2015 12:14:02 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 24145 invoked by uid 99); 17 Nov 2015 12:14:02 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 12:14:02 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 7CF58C11BE
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:14:01 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.998
X-Spam-Level:
X-Spam-Status: No, score=0.998 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H2=-0.001,
	SPF_HELO_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id CLGn6CvG2EEY for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 12:13:50 +0000 (UTC)
Received: from mail1.bemta14.messagelabs.com (mail1.bemta14.messagelabs.com [193.109.254.108])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id CE4B8441AF
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:13:49 +0000 (UTC)
Received: from [193.109.254.3] by server-4.bemta-14.messagelabs.com id 4B/CD-10715-7F91B465; Tue, 17 Nov 2015 12:13:43 +0000
X-Env-Sender: ruediger.pluem@vodafone.com
X-Msg-Ref: server-9.tower-184.messagelabs.com!1447762422!5213698!1
X-Originating-IP: [195.232.244.134]
X-StarScan-Received:
X-StarScan-Version: 7.19.2; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 7791 invoked from network); 17 Nov 2015 12:13:42 -0000
Received: from mailout02.vodafone.com (HELO mailout02.vodafone.com) (195.232.244.134)
  by server-9.tower-184.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 17 Nov 2015 12:13:42 -0000
Received: from mailint03.vodafone.com (mailint03.vodafone.com [195.232.244.200])
	by mailout02.vodafone.com (Postfix) with ESMTP id 3p0R523kfKzbdMV
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 13:13:42 +0100 (CET)
Received: from mailint03.vodafone.com (localhost [127.0.0.1])
	by mailint03.vodafone.com (Postfix) with ESMTP id 3p0R522XJjz16Mhn
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 13:13:42 +0100 (CET)
Received: from VOEXC03W.internal.vodafone.com (voexc03w.dc-ratingen.de [145.230.101.23])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mailint03.vodafone.com (Postfix) with ESMTPS id 3p0R522Snzz16Mhm
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 13:13:42 +0100 (CET)
Received: from VOEXC18W.internal.vodafone.com (145.230.101.20) by
 VOEXC03W.internal.vodafone.com (145.230.101.23) with Microsoft SMTP Server
 (TLS) id 14.3.224.2; Tue, 17 Nov 2015 13:13:42 +0100
Received: from VOEXM10W.internal.vodafone.com ([169.254.2.138]) by
 voexc18w.internal.vodafone.com ([145.230.101.20]) with mapi id
 14.03.0224.002; Tue, 17 Nov 2015 13:13:41 +0100
From: =?iso-8859-1?Q?Pl=FCm=2C_R=FCdiger=2C_Vodafone_Group?=
	<ruediger.pluem@vodafone.com>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
Subject: AW: svn commit: r1714751 -
 /httpd/httpd/trunk/modules/http2/h2_request.c
Thread-Topic: svn commit: r1714751 -
 /httpd/httpd/trunk/modules/http2/h2_request.c
Thread-Index: AQHRISoVptjJbaPowEeV5lA1MSRLzp6gC2CAgAAUbHA=
Date: Tue, 17 Nov 2015 12:13:40 +0000
Message-ID: <AB1691BE05AE7F4992697F2A0835627AC63AAB46@VOEXM10W.internal.vodafone.com>
References: <20151117102639.2195C3A024F@svn01-us-west.apache.org>
 <CAKQ1sVMJ9zF_DrT1buNWjxv3o3cX6-v3ED13zsvuP0cnuV57+A@mail.gmail.com>
 <96555307-DAD5-4EB0-AD1C-7B20FBDD2B84@greenbytes.de>
In-Reply-To: <96555307-DAD5-4EB0-AD1C-7B20FBDD2B84@greenbytes.de>
Accept-Language: en-US
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0



> -----Urspr=FCngliche Nachricht-----
> Von: Stefan Eissing=20
> Gesendet: Dienstag, 17. November 2015 12:58
> An: dev@httpd.apache.org
> Betreff: Re: svn commit: r1714751 -
> /httpd/httpd/trunk/modules/http2/h2_request.c
>=20
> There is no "Transfer-Encoding" header in HTTP/2. When forwarding the
> request for processing into httpd core, there are currently two paths:
> - H2SerializeHeaders off (default), where request_rec is created
> directly
> and
> - H2SerializeHeaders on, where the slave connection carries a serialized
>   HTTP/1.1 request that is parsed and processed as if it where a real
>   client connection.
>=20
> if content-length has not been specified in the HTTP/2 request, the code
> - adds "Transfer-Encoding" if DATA is to be expected (no EOS signaled)
> - adds "Content-Length: 0" if EOS has already been signaled. This is to
>   allow the eventual HTTP/1.1 request parsing to know that no data will
>   come. Adding this only for requests with "Content-Type" present is
>   up for discussion. I want to avoid adding headers to common requests
>   that do not normally carry a body, like GET, DELETE, HEAD and others.

>From performance point of view this is quite understandable, but we need to=
 ensure that we do not open
up the door for request smuggling.

Regards

R=FCdiger


From dev-return-84567-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 12:19:01 2015
Return-Path: <dev-return-84567-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 98A1217B9E
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 12:19:01 +0000 (UTC)
Received: (qmail 30286 invoked by uid 500); 17 Nov 2015 12:19:00 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 30213 invoked by uid 500); 17 Nov 2015 12:19:00 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 30203 invoked by uid 99); 17 Nov 2015 12:19:00 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 12:19:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 5B807180A63
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:19:00 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.009
X-Spam-Level:
X-Spam-Status: No, score=-0.009 tagged_above=-999 required=6.31
	tests=[SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01,
	UNPARSEABLE_RELAY=0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 89IVlNduHDuO for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 12:18:54 +0000 (UTC)
Received: from mail.ausics.net (valhalla.ausics.net [27.33.160.23])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id AFFA542AEE
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:18:53 +0000 (UTC)
Received: from mail.ausics.net (valhalla.ausics.net [10.10.0.10])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.ausics.net (Postfix) with ESMTPSA id 29582C0E069
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 22:18:44 +1000 (AEST)
Received: from w2E6NAXExKvbSkNKGztj023kpIkVKee6EaDZ/88An3k=
 (VggOuqaYermKnGiOxUUWnvcsPqmaHsLP)
 by mail.ausics.net
 with HTTP (HTTP/1.1 POST); Tue, 17 Nov 2015 22:18:43 +1000
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII;
 format=flowed
Content-Transfer-Encoding: 7bit
Date: Tue, 17 Nov 2015 22:18:43 +1000
From: Noel Butler <noel.butler@ausics.net>
To: dev@httpd.apache.org
Subject: Re: 2.4.18?
In-Reply-To: <93FFD147-A1B3-4902-B2C2-630EB7742C0D@sharp.fm>
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net>
 <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com>
 <139befce90c51c313f7b512915241f71@ausics.net>
 <93FFD147-A1B3-4902-B2C2-630EB7742C0D@sharp.fm>
Message-ID: <623514d11afa03abfdbf687643130442@ausics.net>
X-Sender: noel.butler@ausics.net
User-Agent: Roundcube Webmail

On 17/11/2015 19:24, Graham Leggett wrote:
> On 17 Nov 2015, at 07:13, Noel Butler <noel.butler@ausics.net> wrote:
> 
>> ??? We only had 2.4.17  5 weeks ago, why the rush?
> 
> We have improvements, why make people wait?
> 
> Regards,
> Graham
> --

You run into complacency dangers if you end up in a "release very often" 
mode, take phpmyadmin as one example, most admins I know gave up 
updating it, because there were updates every week, sometimes  every few 
days, Marc has accepted this is a serious problem and unless a critical 
security bug is found, , normal bug fixes releases will be only once per 
month if need be, take dovecot, not so bad now days but in years gone 
by, it too released weekly or bi-weekly and a lot of people got pissed 
and stopped updating it too.

Projects that "release often" are seen by most admins I talk to (from 
around the world too, not just locally) as unstable and to be avoided, 
not something we want to see here with nginx already take a good share 
inm recent times, and only getting more of it.


-- 
If you have the urge to reply to all rather than reply to list, you best
read  http://members.ausics.net/qwerty/

From dev-return-84568-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 12:27:25 2015
Return-Path: <dev-return-84568-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 42D9D17BD9
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 12:27:25 +0000 (UTC)
Received: (qmail 43809 invoked by uid 500); 17 Nov 2015 12:27:24 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 43740 invoked by uid 500); 17 Nov 2015 12:27:24 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 43730 invoked by uid 99); 17 Nov 2015 12:27:24 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 12:27:24 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 456A7180A63
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:27:24 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.009
X-Spam-Level:
X-Spam-Status: No, score=-0.009 tagged_above=-999 required=6.31
	tests=[SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01,
	UNPARSEABLE_RELAY=0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id Aiv7c_oo8NBB for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 12:27:18 +0000 (UTC)
Received: from mail.ausics.net (valhalla.ausics.net [27.33.160.23])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id C5B372302D
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:27:17 +0000 (UTC)
Received: from mail.ausics.net (valhalla.ausics.net [10.10.0.10])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.ausics.net (Postfix) with ESMTPSA id 2E28CC0E08E
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 22:27:15 +1000 (AEST)
Received: from Uk+wWX9luDM9maPVr0ltfZcUKZ3yNLglIWUuLFclEQI=
 (swr11G5fcM6xzdLchaoq6x7uGq4H8t0h)
 by mail.ausics.net
 with HTTP (HTTP/1.1 POST); Tue, 17 Nov 2015 22:27:14 +1000
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII;
 format=flowed
Content-Transfer-Encoding: 7bit
Date: Tue, 17 Nov 2015 22:27:14 +1000
From: Noel Butler <noel.butler@ausics.net>
To: dev@httpd.apache.org
Subject: Re: 2.4.18?
In-Reply-To: <BCBFC8FF-EE49-4E2F-8783-69DECEB025EF@greenbytes.de>
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net>
 <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com>
 <139befce90c51c313f7b512915241f71@ausics.net>
 <BCBFC8FF-EE49-4E2F-8783-69DECEB025EF@greenbytes.de>
Message-ID: <d4d0ad850c6aa9f3b5186929bad23d71@ausics.net>
X-Sender: noel.butler@ausics.net
User-Agent: Roundcube Webmail

On 17/11/2015 18:02, Stefan Eissing wrote:
>> Am 17.11.2015 um 08:13 schrieb Noel Butler <noel.butler@ausics.net>:
>> 
>>> On 17/11/2015 03:05, Jim Jagielski wrote:
>>> My plan is to T&R 2.4.18 sometime next week in hopes of a formal
>>> release the beginning of Dec.
>> 
>> ??? We only had 2.4.17  5 weeks ago, why the rush?
> 
> Uhm. When would be a better time for you to get fixes and functional
> improvements?
> 
> //Stefan

when there is
1/ serious security issue that need to be addresses immediately, or,
2/ when there are enough stable new functions to warrant it - just like 
every other project out there that has a stable product.

We need to loose this desire to release often mentality, I can accept 
every 3 or 4 months which is how its generally been done in the past, 
but 5 or 6 bloody weeks? thats a concern, for reasons I outlayed to 
Graham, it says, " ohh its flawed release, and when it happens a few 
times people think " oh FFS, must be more stable software than this" and 
over time the userbase dwindles away.

-- 
If you have the urge to reply to all rather than reply to list, you best
read  http://members.ausics.net/qwerty/

From dev-return-84569-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 12:32:04 2015
Return-Path: <dev-return-84569-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E8CFA17BF3
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 12:32:03 +0000 (UTC)
Received: (qmail 50406 invoked by uid 500); 17 Nov 2015 12:32:03 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 50333 invoked by uid 500); 17 Nov 2015 12:32:03 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 50323 invoked by uid 99); 17 Nov 2015 12:32:03 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 12:32:03 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 0AF87C059C
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:32:03 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.01
X-Spam-Level:
X-Spam-Status: No, score=-0.01 tagged_above=-999 required=6.31
	tests=[SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id ejr4iug2WMkW for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 12:31:54 +0000 (UTC)
Received: from monica.sharp.fm (monica.sharp.fm [80.168.143.5])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTP id 36A9723048
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:31:54 +0000 (UTC)
Received: from [10.105.13.237] (unknown [5.56.169.82])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	(Authenticated sender: minfrin@sharp.fm)
	by monica.sharp.fm (Postfix) with ESMTPSA id 7F24380C90
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:31:53 +0000 (GMT)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: 2.4.18?
From: Graham Leggett <minfrin@sharp.fm>
In-Reply-To: <623514d11afa03abfdbf687643130442@ausics.net>
Date: Tue, 17 Nov 2015 14:31:52 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <3EDB21F5-343A-46CB-874D-08DA7C4D86DE@sharp.fm>
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net> <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com> <139befce90c51c313f7b512915241f71@ausics.net> <93FFD147-A1B3-4902-B2C2-630EB7742C0D@sharp.fm> <623514d11afa03abfdbf687643130442@ausics.net>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

On 17 Nov 2015, at 2:18 PM, Noel Butler <noel.butler@ausics.net> wrote:

> You run into complacency dangers if you end up in a "release very =
often" mode, take phpmyadmin as one example, most admins I know gave up =
updating it, because there were updates every week, sometimes  every few =
days, Marc has accepted this is a serious problem and unless a critical =
security bug is found, , normal bug fixes releases will be only once per =
month if need be, take dovecot, not so bad now days but in years gone =
by, it too released weekly or bi-weekly and a lot of people got pissed =
and stopped updating it too.

I=E2=80=99m not understanding your point - you=E2=80=99re saying normal =
bug fix releases once a month is fine, but us doing so after 5 weeks =
isn=E2=80=99t fine?

We=E2=80=99ve just released HTTP/2 support for the very first time. =
People want to use it, people want to see problems in it fixed. I =
don=E2=80=99t see the number of releases as excessive at all.

Regards,
Graham
=E2=80=94


From dev-return-84570-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 12:32:56 2015
Return-Path: <dev-return-84570-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8F82617BFB
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 12:32:56 +0000 (UTC)
Received: (qmail 52220 invoked by uid 500); 17 Nov 2015 12:32:56 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 52148 invoked by uid 500); 17 Nov 2015 12:32:56 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 52137 invoked by uid 99); 17 Nov 2015 12:32:56 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 12:32:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 701FBC059C
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:32:55 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.11
X-Spam-Level:
X-Spam-Status: No, score=-0.11 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 1IWR9O_5He9W for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 12:32:49 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 1AAFC42AEE
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:32:48 +0000 (UTC)
Received: from [192.168.1.134] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id C923615A0445
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 13:32:41 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447763561; bh=aPHbPdJu3eHsLQNxy7djpN9rEDdIgx0ucnRr4zewqN8=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=frZccPj7tt71QYxdaaP6whnrSjtnjkXKdnPebntKB4msEDFLdOrmDsAjqzNIbnD8W
	 QRMrBWZ3kAJf7xkkxf7ydIcrH+AiJj8uz8Lvq6hC31fHlC7kbKqKd/O4PiypzOQaKi
	 g3r4CciHhITcX8lUPRqJrpU/W3JFnAkxkdVKXt3Q=
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: svn commit: r1714751 - /httpd/httpd/trunk/modules/http2/h2_request.c
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <AB1691BE05AE7F4992697F2A0835627AC63AAB46@VOEXM10W.internal.vodafone.com>
Date: Tue, 17 Nov 2015 13:32:41 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <C2C2340F-7496-40DF-8E63-FD3BB66AE1F0@greenbytes.de>
References: <20151117102639.2195C3A024F@svn01-us-west.apache.org> <CAKQ1sVMJ9zF_DrT1buNWjxv3o3cX6-v3ED13zsvuP0cnuV57+A@mail.gmail.com> <96555307-DAD5-4EB0-AD1C-7B20FBDD2B84@greenbytes.de> <AB1691BE05AE7F4992697F2A0835627AC63AAB46@VOEXM10W.internal.vodafone.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)


> Am 17.11.2015 um 13:13 schrieb Pl=FCm, R=FCdiger, Vodafone Group =
<ruediger.pluem@vodafone.com>:
>> -----Urspr=FCngliche Nachricht-----
>> Von: Stefan Eissing=20
>> Gesendet: Dienstag, 17. November 2015 12:58
>> An: dev@httpd.apache.org
>> Betreff: Re: svn commit: r1714751 -
>> /httpd/httpd/trunk/modules/http2/h2_request.c
>>=20
>> There is no "Transfer-Encoding" header in HTTP/2. When forwarding the
>> request for processing into httpd core, there are currently two =
paths:
>> - H2SerializeHeaders off (default), where request_rec is created
>> directly
>> and
>> - H2SerializeHeaders on, where the slave connection carries a =
serialized
>>  HTTP/1.1 request that is parsed and processed as if it where a real
>>  client connection.
>>=20
>> if content-length has not been specified in the HTTP/2 request, the =
code
>> - adds "Transfer-Encoding" if DATA is to be expected (no EOS =
signaled)
>> - adds "Content-Length: 0" if EOS has already been signaled. This is =
to
>>  allow the eventual HTTP/1.1 request parsing to know that no data =
will
>>  come. Adding this only for requests with "Content-Type" present is
>>  up for discussion. I want to avoid adding headers to common requests
>>  that do not normally carry a body, like GET, DELETE, HEAD and =
others.
>=20
> =46rom performance point of view this is quite understandable, but we =
need to ensure that we do not open
> up the door for request smuggling.

By which you mean sneaking in a request inside the body of another one,=20=

confusing boundaries?=20

Fair enough.

The job of preventing that lies in the HTTP/2 framing layer which=20
also keeps the stream states. Sending any more HEADER/DATA frames=20
for a closed stream is a protocol error and must lead to termination
of the connection.

If the framing layer does its job, signaling an end-of-stream=20
- means there will not be any more DATA to come
- therefore the request input is complete and has 0 length

But mistakes are easily made and I appreciated that you're looking
critically at this.

//Stefan

>=20
> Regards
>=20
> R=FCdiger


From dev-return-84571-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 12:33:48 2015
Return-Path: <dev-return-84571-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9D57717C03
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 12:33:48 +0000 (UTC)
Received: (qmail 57541 invoked by uid 500); 17 Nov 2015 12:33:47 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 57475 invoked by uid 500); 17 Nov 2015 12:33:47 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 57464 invoked by uid 99); 17 Nov 2015 12:33:47 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 12:33:47 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 2D1A0C5AD2
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:33:47 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.583
X-Spam-Level:
X-Spam-Status: No, score=-0.583 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.582, SPF_HELO_PASS=-0.001, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id b4MnQdal8h-m for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 12:33:43 +0000 (UTC)
Received: from mail.thelounge.net (mail.thelounge.net [91.118.73.15])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 89C6921270
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:33:42 +0000 (UTC)
Subject: Re: 2.4.18?
To: dev@httpd.apache.org
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net>
 <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com>
 <139befce90c51c313f7b512915241f71@ausics.net>
 <BCBFC8FF-EE49-4E2F-8783-69DECEB025EF@greenbytes.de>
 <d4d0ad850c6aa9f3b5186929bad23d71@ausics.net>
From: Reindl Harald <h.reindl@thelounge.net>
Openpgp: id=13540402D67A7F71C6E974EA866063CF7F780279;
 url=https://arrakis.thelounge.net/gpg/h.reindl_thelounge.net.pub.txt
X-Enigmail-Draft-Status: N1110
Organization: the lounge interactive design
Message-ID: <564B1E9F.9040100@thelounge.net>
Date: Tue, 17 Nov 2015 13:33:35 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <d4d0ad850c6aa9f3b5186929bad23d71@ausics.net>
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="J7tRhWIuIRlwrwUR8RORw7cJArXWsB4p2"

This is an OpenPGP/MIME signed message (RFC 4880 and 3156)
--J7tRhWIuIRlwrwUR8RORw7cJArXWsB4p2
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: quoted-printable



Am 17.11.2015 um 13:27 schrieb Noel Butler:
> On 17/11/2015 18:02, Stefan Eissing wrote:
>>> Am 17.11.2015 um 08:13 schrieb Noel Butler <noel.butler@ausics.net>:
>>>
>>>> On 17/11/2015 03:05, Jim Jagielski wrote:
>>>> My plan is to T&R 2.4.18 sometime next week in hopes of a formal
>>>> release the beginning of Dec.
>>>
>>> ??? We only had 2.4.17  5 weeks ago, why the rush?
>>
>> Uhm. When would be a better time for you to get fixes and functional
>> improvements?
>>
>> //Stefan
>
> when there is
> 1/ serious security issue that need to be addresses immediately, or,
> 2/ when there are enough stable new functions to warrant it - just like=

> every other project out there that has a stable product.
>
> We need to loose this desire to release often mentality, I can accept
> every 3 or 4 months which is how its generally been done in the past,
> but 5 or 6 bloody weeks? thats a concern, for reasons I outlayed to
> Graham, it says, " ohh its flawed release, and when it happens a few
> times people think " oh FFS, must be more stable software than this" an=
d
> over time the userbase dwindles away

5 or 6 bloody weeks is a month - so what's the problem?
any other software but httpd is allowed to have monthly updates?

"I can accept" - seriously - you can just ignore a release when you=20
think it's not important for you but i don't get why anybody else should =

wait for available non-security bugfixes just because you feel like=20
someone enforces you to update your server


--J7tRhWIuIRlwrwUR8RORw7cJArXWsB4p2
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2

iEYEARECAAYFAlZLHp8ACgkQhmBjz394AnkX3ACeJk/HPo75kG4XmN4GWvNDjcFZ
dHUAnjzVQDoJ1nESMeEjNhIX0hAcGBJ6
=QThX
-----END PGP SIGNATURE-----

--J7tRhWIuIRlwrwUR8RORw7cJArXWsB4p2--

From dev-return-84572-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 12:35:10 2015
Return-Path: <dev-return-84572-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D335817C0A
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 12:35:10 +0000 (UTC)
Received: (qmail 58983 invoked by uid 500); 17 Nov 2015 12:35:10 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 58916 invoked by uid 500); 17 Nov 2015 12:35:10 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 58905 invoked by uid 99); 17 Nov 2015 12:35:10 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 12:35:10 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id E7C991A0D17
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:35:09 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.452
X-Spam-Level: *
X-Spam-Status: No, score=1.452 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, KAM_ASCII_DIVIDERS=0.8,
	SPF_NEUTRAL=0.652] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id F4-4mmiqGy6V for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 12:35:04 +0000 (UTC)
Received: from resqmta-ch2-08v.sys.comcast.net (resqmta-ch2-08v.sys.comcast.net [69.252.207.40])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 33D4E20384
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:35:04 +0000 (UTC)
Received: from resomta-ch2-08v.sys.comcast.net ([69.252.207.104])
	by resqmta-ch2-08v.sys.comcast.net with comcast
	id icZx1r0082Fh1PH01caxhh; Tue, 17 Nov 2015 12:34:57 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-08v.sys.comcast.net with comcast
	id icaw1r00K2U0RYt01cawlR; Tue, 17 Nov 2015 12:34:56 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1650655 - in /httpd/httpd/branches/2.4.x: CHANGES STATUS modules/proxy/proxy_util.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CAKQ1sVP-ZO=C8kUt_+tW7+h5A=yjDuKhEE9ah9shF1xRQVciRw@mail.gmail.com>
Date: Tue, 17 Nov 2015 07:34:56 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <F824122C-EF56-4A66-B921-8FB8AE5BF179@jaguNET.com>
References: <20150109203751.20247AC0143@hades.apache.org> <564A0A06.1040300@gmail.com> <CAKQ1sVP-ZO=C8kUt_+tW7+h5A=yjDuKhEE9ah9shF1xRQVciRw@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1447763697;
	bh=kXskdsiL42JyO5Xg7bjuTMsj6TCYzTcmjU+G5+62iaU=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=IKKmJP+p5O+x03VhOHd4jBn+qo71k9tugVYgfr6yqJT1E3BHuMU83XNgK/LxNapvq
	 6ZrINE5/z2bUBqi7YVkPrM6qp+WLX1YitfJEKAzOo2dggBy/mIb5G05+g0pv7O+37A
	 Xka0DvV7at1cLQKk9tFZQlqPozJycnZ7nFFC0zdYh1vTmH5ogVyg4+m80QOGNoQIPp
	 SzRZ1yvSmxDnBGNdWf8mR7kYKKgLuq9kLjNFSA1+BYekC/aUxT/k98+aD+rY9xsMIE
	 hM/ntfMHMrkZuORpCUgNtx1si2vB9kDRSkEZsZbOUMdptmrj/2KrH29Qb9R2HsCImx
	 ZZOnDvPhZCr4A==


> On Nov 16, 2015, at 12:38 PM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>=20
> On Mon, Nov 16, 2015 at 5:53 PM, jean-frederic clere =
<jfclere@gmail.com> wrote:
>> On 01/09/2015 09:37 PM, jailletc36@apache.org wrote:
>>>=20
>>> Modified: httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c
>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/modules/proxy/prox=
y_util.c?rev=3D1650655&r1=3D1650654&r2=3D1650655&view=3Ddiff
>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>> --- httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c (original)
>>> +++ httpd/httpd/branches/2.4.x/modules/proxy/proxy_util.c Fri Jan  9 =
20:37:50 2015
>>> @@ -1683,6 +1683,9 @@ PROXY_DECLARE(char *) ap_proxy_define_wo
>>>=20
>>>     memset(wshared, 0, sizeof(proxy_worker_shared));
>>>=20
>>> +    if (uri.port && uri.port =3D=3D =
ap_proxy_port_of_scheme(uri.scheme)) {
>>> +        uri.port =3D 0;
>>> +    }
>>=20
>>=20
>> I must be doing something wrong but the above seems to hurt by 30% =
more
>> CPU one for the tests we are doing, any hints?
>=20
> Looks like you are quite heavy testing this path...
>=20
> Could you please try the following patch and see if it helps?
>=20
> Index: modules/proxy/proxy_util.c
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> --- modules/proxy/proxy_util.c    (revision 1714617)
> +++ modules/proxy/proxy_util.c    (working copy)
> @@ -3663,35 +3663,51 @@ PROXY_DECLARE(int) =
ap_proxy_pass_brigade(apr_bucke
>     return OK;
> }
>=20
> -/* Fill in unknown schemes from apr_uri_port_of_scheme() */
>=20
> -typedef struct proxy_schemes_t {
> -    const char *name;
> -    apr_port_t default_port;
> -} proxy_schemes_t ;
> -
> -static proxy_schemes_t pschemes[] =3D
> -{
> -    {"fcgi",     8000},
> -    {"ajp",      AJP13_DEF_PORT},
> -    {"scgi",     SCGI_DEF_PORT},
> -    { NULL, 0xFFFF }     /* unknown port */
> -};
> -
> PROXY_DECLARE(apr_port_t) ap_proxy_port_of_scheme(const char *scheme)
> {
>     if (scheme) {
> -        apr_port_t port;
> -        if ((port =3D apr_uri_port_of_scheme(scheme)) !=3D 0) {
> -            return port;
> -        } else {
> -            proxy_schemes_t *pscheme;
> -            for (pscheme =3D pschemes; pscheme->name !=3D NULL; =
++pscheme) {
> -                if (strcasecmp(scheme, pscheme->name) =3D=3D 0) {
> -                    return pscheme->default_port;
> +        /* Fill in unknown schemes from apr_uri_port_of_scheme(),
> +         * and try a fast path for common schemes.
> +         */
> +        switch (ap_tolower(*scheme)) {
> +        case 'a':
> +            if (strcasecmp(scheme + 1, "jp") =3D=3D 0) {
> +                return AJP13_DEF_PORT;
> +            }
> +            break;
> +        case 'f':
> +            if (strcasecmp(scheme + 1, "cgi") =3D=3D 0) {
> +                return 8000;
> +            }
> +            if (strcasecmp(scheme + 1, "tp") =3D=3D 0) {
> +                return APR_URI_FTP_DEFAULT_PORT;
> +            }
> +            break;
> +        case 'h':
> +            if (strncasecmp(scheme + 1, "ttp", 4) =3D=3D 0) {

Should be 3, shouldn't it?

> +                int s4 =3D ap_tolower(scheme[4]);
> +                if (!s4) {
> +                    return APR_URI_HTTP_DEFAULT_PORT;
>                 }
> +                else if (s4 =3D=3D 's' && !scheme[5]) {
> +                    return APR_URI_HTTPS_DEFAULT_PORT;
> +                }
>             }

If we are really trying to optimize the heck out of this, certainly
we should not ap_tolower s4 until we know it's not '\0'.

> +            break;
> +        case 'n':
> +            if (strcasecmp(scheme + 1, "ntp") =3D=3D 0) {
> +                return APR_URI_NNTP_DEFAULT_PORT;
> +            }
> +            break;
> +        case 's':
> +            if (strcasecmp(scheme + 1, "cgi") =3D=3D 0) {
> +                return SCGI_DEF_PORT;
> +            }
> +            break;
>         }
> +
> +        return apr_uri_port_of_scheme(scheme);
>     }
>     return 0;
> }
> --
>=20
> Regards,
> Yann.


From dev-return-84573-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 12:36:52 2015
Return-Path: <dev-return-84573-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1FF1E17C1A
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 12:36:52 +0000 (UTC)
Received: (qmail 61540 invoked by uid 500); 17 Nov 2015 12:36:51 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 61471 invoked by uid 500); 17 Nov 2015 12:36:51 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 61461 invoked by uid 99); 17 Nov 2015 12:36:51 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 12:36:51 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 3582E1A08DC
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:36:51 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id EQWrE2za31Gi for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 12:36:42 +0000 (UTC)
Received: from resqmta-po-06v.sys.comcast.net (resqmta-po-06v.sys.comcast.net [96.114.154.165])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 580222304C
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:36:41 +0000 (UTC)
Received: from resomta-po-09v.sys.comcast.net ([96.114.154.233])
	by resqmta-po-06v.sys.comcast.net with comcast
	id iccS1r00152QWKC01ccaJA; Tue, 17 Nov 2015 12:36:34 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-09v.sys.comcast.net with comcast
	id iccZ1r00C2U0RYt01ccZzM; Tue, 17 Nov 2015 12:36:34 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: 2.4.18?
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <139befce90c51c313f7b512915241f71@ausics.net>
Date: Tue, 17 Nov 2015 07:36:33 -0500
Content-Transfer-Encoding: 7bit
Message-Id: <A382D08A-24C0-45A9-81A1-2A64FEFB6200@jaguNET.com>
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net> <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com> <139befce90c51c313f7b512915241f71@ausics.net>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1447763794;
	bh=bUmP7P4W9/RmfhyUu8eIbylZpTMj/DJCe4hy5TiWiSw=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=nLFHVgvtYOo/3L3v6wPVRTgjatXGtmXLeyjB2YVjttAAkmFwbt7uvENeilsJXOx0m
	 ZfknBRkLXZCYTvXxK8byUEiQ2B69dDJklWAtOr12/oWj2dDtwPQ7G0+jtVZdqtPKfR
	 F886CQAkApKEff9K+PEYwDrurHOKf2VGVPGpZG8UtdF7cvtfR3PoPhydiwbT+ad4FJ
	 8o5J0dgU1/M/0ortapN+146eDIAsphc334XChHVjEto/K3OcBhf+FZHGXbyM4qB0EL
	 Vl2841WgDLTgzhwTi8lR0uSwAQtKOD8pT/WjyGfXO4dyzjgbYkuQbi6HnLnzGc1TMg
	 e/zLN77CnSRNg==

Seems to me we have some significant improvements to offer
our end users... why wait?

> On Nov 17, 2015, at 2:13 AM, Noel Butler <noel.butler@ausics.net> wrote:
> 
> On 17/11/2015 03:05, Jim Jagielski wrote:
>> My plan is to T&R 2.4.18 sometime next week in hopes of a formal
>> release the beginning of Dec.
> 
> ??? We only had 2.4.17  5 weeks ago, why the rush?
> 
> 
> -- 
> If you have the urge to reply to all rather than reply to list, you best
> read  http://members.ausics.net/qwerty/


From dev-return-84574-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 12:41:28 2015
Return-Path: <dev-return-84574-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EF94C17C2F
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 12:41:28 +0000 (UTC)
Received: (qmail 68120 invoked by uid 500); 17 Nov 2015 12:41:28 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 68052 invoked by uid 500); 17 Nov 2015 12:41:28 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 68039 invoked by uid 99); 17 Nov 2015 12:41:28 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 12:41:28 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id DD2A8C6D74
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:41:27 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.699
X-Spam-Level:
X-Spam-Status: No, score=0.699 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	KAM_ASCII_DIVIDERS=0.8, RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id ZfqGDcvkDZsH for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 12:41:23 +0000 (UTC)
Received: from mail-qg0-f45.google.com (mail-qg0-f45.google.com [209.85.192.45])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id B87F520384
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:41:22 +0000 (UTC)
Received: by qgad10 with SMTP id d10so4234682qga.3
        for <dev@httpd.apache.org>; Tue, 17 Nov 2015 04:41:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=BmOL/a+9HmDklb5VERUcCNo+3rJTNMRY3YyuPGhvsMk=;
        b=ZlUpzMIzHsnfjs+M/JwKAR/td42y/HdlKRK5s/BXN1rtHH+qi2xmkjk7jeC5XU811C
         WbJTe5d9v/wG+15MBtGmvIR49lvfdtUveQjYv286Izyd66zkXzr7Ui61t0H6bQDW18kJ
         tT5YEFIYzaFDv1B/lQFVSf9jtGqI6725sI1eRqojVIBtTsedQ+XqpSevjEZrmy62u9Xo
         Iya6SYu4mE8Vc48o4AAnkztAL5z/2nwbjhgsuxGrOK5G9N7qJWBeVAK3qSIgAxVLmwC8
         Z/wDvlzPoI3hmoTuZFK97ZXzkXL87oAJuROqC+6MuEfEywJw/wRf8d9G4Ugu7WYa/9wa
         Itew==
MIME-Version: 1.0
X-Received: by 10.140.216.87 with SMTP id m84mr43577337qhb.97.1447764081948;
 Tue, 17 Nov 2015 04:41:21 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 17 Nov 2015 04:41:21 -0800 (PST)
In-Reply-To: <F824122C-EF56-4A66-B921-8FB8AE5BF179@jaguNET.com>
References: <20150109203751.20247AC0143@hades.apache.org>
	<564A0A06.1040300@gmail.com>
	<CAKQ1sVP-ZO=C8kUt_+tW7+h5A=yjDuKhEE9ah9shF1xRQVciRw@mail.gmail.com>
	<F824122C-EF56-4A66-B921-8FB8AE5BF179@jaguNET.com>
Date: Tue, 17 Nov 2015 13:41:21 +0100
Message-ID: <CAKQ1sVMrLPdUrxnxahscpW_JmPW=jf5uDNhXaCZSa8G2mNiCkg@mail.gmail.com>
Subject: Re: svn commit: r1650655 - in /httpd/httpd/branches/2.4.x: CHANGES
 STATUS modules/proxy/proxy_util.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 17, 2015 at 1:34 PM, Jim Jagielski <jim@jagunet.com> wrote:
>
>> On Nov 16, 2015, at 12:38 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>
>> +        case 'h':
>> +            if (strncasecmp(scheme + 1, "ttp", 4) == 0) {
>
> Should be 3, shouldn't it?

Yes, I corrected this already in a previous message.

>
>> +                int s4 = ap_tolower(scheme[4]);
>> +                if (!s4) {
>> +                    return APR_URI_HTTP_DEFAULT_PORT;
>>                 }
>> +                else if (s4 == 's' && !scheme[5]) {
>> +                    return APR_URI_HTTPS_DEFAULT_PORT;
>> +                }
>>             }
>
> If we are really trying to optimize the heck out of this, certainly
> we should not ap_tolower s4 until we know it's not '\0'.

Agreed, I have a final patch already which addresses this, just wanted
to see (quickly) if that was the real issue.

The patch I'd propose to commit is something like:

Index: modules/proxy/proxy_util.c
===================================================================
--- modules/proxy/proxy_util.c    (revision 1714617)
+++ modules/proxy/proxy_util.c    (working copy)
@@ -3663,37 +3663,61 @@ PROXY_DECLARE(int) ap_proxy_pass_brigade(apr_bucke
     return OK;
 }

-/* Fill in unknown schemes from apr_uri_port_of_scheme() */

-typedef struct proxy_schemes_t {
-    const char *name;
-    apr_port_t default_port;
-} proxy_schemes_t ;
-
-static proxy_schemes_t pschemes[] =
+PROXY_DECLARE(apr_port_t) ap_proxy_port_of_scheme(const char *scheme)
 {
-    {"fcgi",     8000},
-    {"ajp",      AJP13_DEF_PORT},
-    {"scgi",     SCGI_DEF_PORT},
-    { NULL, 0xFFFF }     /* unknown port */
-};
+    if (!scheme) {
+        return 0;
+    }

-PROXY_DECLARE(apr_port_t) ap_proxy_port_of_scheme(const char *scheme)
-{
-    if (scheme) {
-        apr_port_t port;
-        if ((port = apr_uri_port_of_scheme(scheme)) != 0) {
-            return port;
-        } else {
-            proxy_schemes_t *pscheme;
-            for (pscheme = pschemes; pscheme->name != NULL; ++pscheme) {
-                if (strcasecmp(scheme, pscheme->name) == 0) {
-                    return pscheme->default_port;
-                }
+    /* Fill in unknown schemes from apr_uri_port_of_scheme(),
+     * and try a fast path for common ones.
+     */
+    switch (*scheme) {
+    case 'a':
+    case 'A':
+        if (strcasecmp(scheme + 1, "jp") == 0) {
+            return AJP13_DEF_PORT;
+        }
+        break;
+
+    case 'f':
+    case 'F':
+        if (strcasecmp(scheme + 1, "cgi") == 0) {
+            return AP_FCGI_DEF_PORT;
+        }
+        if (strcasecmp(scheme + 1, "tp") == 0) {
+            return APR_URI_FTP_DEFAULT_PORT;
+        }
+        break;
+
+    case 'h':
+    case 'H':
+        if (strncasecmp(scheme + 1, "ttp", 3) == 0) {
+            if (!scheme[4]) {
+                return APR_URI_HTTP_DEFAULT_PORT;
             }
+            else if (ap_tolower(scheme[4]) == 's' && !scheme[5]) {
+                return APR_URI_HTTPS_DEFAULT_PORT;
+            }
         }
+        break;
+
+    case 'n':
+    case 'N':
+        if (strcasecmp(scheme + 1, "ntp") == 0) {
+            return APR_URI_NNTP_DEFAULT_PORT;
+        }
+        break;
+
+    case 's':
+    case 'S':
+        if (strcasecmp(scheme + 1, "cgi") == 0) {
+            return SCGI_DEF_PORT;
+        }
+        break;
     }
-    return 0;
+    return apr_uri_port_of_scheme(scheme);
 }

 void proxy_util_register_hooks(apr_pool_t *p)
Index: include/util_fcgi.h
===================================================================
--- include/util_fcgi.h    (revision 1714617)
+++ include/util_fcgi.h    (working copy)
@@ -72,6 +72,11 @@ typedef struct {
 #define AP_FCGI_VERSION_1 1

 /**
+ * Default port for FastCGI backends.
+ */
+#define AP_FCGI_DEF_PORT 8000
+
+/**
  * Possible values for the type field of ap_fcgi_header
  */
 #define AP_FCGI_BEGIN_REQUEST       1
Index: modules/proxy/mod_proxy_ajp.c
===================================================================
--- modules/proxy/mod_proxy_ajp.c    (revision 1714617)
+++ modules/proxy/mod_proxy_ajp.c    (working copy)
@@ -48,7 +48,7 @@ static int proxy_ajp_canon(request_rec *r, char *u
      * do syntactic check.
      * We break the URL into host, port, path, search
      */
-    port = def_port = ap_proxy_port_of_scheme("ajp");
+    port = def_port = AJP13_DEF_PORT;

     err = ap_proxy_canon_netloc(r->pool, &url, NULL, NULL, &host, &port);
     if (err) {
Index: modules/proxy/mod_proxy_fcgi.c
===================================================================
--- modules/proxy/mod_proxy_fcgi.c    (revision 1714617)
+++ modules/proxy/mod_proxy_fcgi.c    (working copy)
@@ -46,7 +46,7 @@ static int proxy_fcgi_canon(request_rec *r, char *
         return DECLINED;
     }

-    port = def_port = ap_proxy_port_of_scheme("fcgi");
+    port = def_port = AP_FCGI_DEF_PORT;

     ap_log_rerror(APLOG_MARK, APLOG_TRACE1, 0, r,
                  "canonicalising URL %s", url);
Index: modules/proxy/mod_proxy_http.c
===================================================================
--- modules/proxy/mod_proxy_http.c    (revision 1714617)
+++ modules/proxy/mod_proxy_http.c    (working copy)
@@ -46,15 +46,16 @@ static int proxy_http_canon(request_rec *r, char *
     if (strncasecmp(url, "http:", 5) == 0) {
         url += 5;
         scheme = "http";
+        port = def_port = APR_URI_HTTP_DEFAULT_PORT;
     }
     else if (strncasecmp(url, "https:", 6) == 0) {
         url += 6;
         scheme = "https";
+        port = def_port = APR_URI_HTTPS_DEFAULT_PORT;
     }
     else {
         return DECLINED;
     }
-    port = def_port = ap_proxy_port_of_scheme(scheme);

     ap_log_rerror(APLOG_MARK, APLOG_TRACE1, 0, r,
                   "HTTP: canonicalising URL %s", url);
--

where we both optimize ap_proxy_port_of_scheme() and avoid unnessary calls...

From dev-return-84575-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 12:47:29 2015
Return-Path: <dev-return-84575-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 396DD17C59
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 12:47:29 +0000 (UTC)
Received: (qmail 79514 invoked by uid 500); 17 Nov 2015 12:47:28 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 79431 invoked by uid 500); 17 Nov 2015 12:47:28 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 79421 invoked by uid 99); 17 Nov 2015 12:47:28 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 12:47:28 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 57E12C6DAB
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:47:28 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.682
X-Spam-Level:
X-Spam-Status: No, score=-0.682 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RP_MATCHES_RCVD=-0.582, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id QIiOIFR18_RE for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 12:47:19 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id B69B620592
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 12:47:18 +0000 (UTC)
Received: from [192.168.1.134] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id C276415A0445
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 13:47:16 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447764436; bh=klwfN4vf9hSwJpi8HfXLeWZ+SJslF3FxCJojiW5BH0U=;
	h=From:Subject:Date:To:From;
	b=Wayjs8UqiUoKOoEZRUwsVS5ovVJaJm1+RaLGardUsPRJIUJ2Js0RS+hRSdmfBm4E1
	 nXJJIjY1vVlPxpiWlkyotmbfl2drPBNsU0osPseQrN6lR2it0NH1QmXW5ej/Su8xoR
	 d+bXmtasdC0sQeYD/mizEFbsJVXGv1waj4zKK/Cg=
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: 2.4.18 backporting
Message-Id: <DCA25590-E588-4AD5-8B68-6E473764F773@greenbytes.de>
Date: Tue, 17 Nov 2015 13:47:16 +0100
To: dev@httpd.apache.org
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
X-Mailer: Apple Mail (2.3096.5)

For the 2.4.18 backporting, can I find people here willing to look at:

  *) core/mod_ssl:=20
     - master conn_rec* addition to conn_rec
     - minor mmn bump
     - improved ALPN and Upgrade handling
     - allowing requests for servers whose TLS configuration is =
compatible
       to the SNI server ones
     - disabling TLS renegotiation for slave connections
     changes are necessary for update modules/http2
     trunk patch: http://svn.apache.org/r1708107
                  http://svn.apache.org/r1709587
                  http://svn.apache.org/r1709602
                  http://svn.apache.org/r1709995
                  http://svn.apache.org/r1710231
                  http://svn.apache.org/r1710419
                  http://svn.apache.org/r1710572
                  http://svn.apache.org/r1710583
                  + manual addition of "conn_rec *master;"
     2.4.x patch: =
https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patche=
s/2.4.17-protocols.patch
     branch mergeable to 2.4.x: =
^/httpd/httpd/branches/2.4.17-protocols-changes
     +1: icing

? This is needed to backport the current mod_http2. If someone could =
find the time to look at this, please? Thanks!

Cheers,

  Stefan=

From dev-return-84576-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 13:12:33 2015
Return-Path: <dev-return-84576-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2831B17D48
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 13:12:33 +0000 (UTC)
Received: (qmail 22865 invoked by uid 500); 17 Nov 2015 13:12:32 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 22782 invoked by uid 500); 17 Nov 2015 13:12:32 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 22770 invoked by uid 99); 17 Nov 2015 13:12:32 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 13:12:32 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id A57B7C5A77
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 13:12:31 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.452
X-Spam-Level: *
X-Spam-Status: No, score=1.452 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, KAM_ASCII_DIVIDERS=0.8,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_NEUTRAL=0.652, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id GtSWRZp6Lxmg for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 13:12:22 +0000 (UTC)
Received: from resqmta-ch2-04v.sys.comcast.net (resqmta-ch2-04v.sys.comcast.net [69.252.207.36])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 42433441BC
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 13:12:22 +0000 (UTC)
Received: from resomta-ch2-11v.sys.comcast.net ([69.252.207.107])
	by resqmta-ch2-04v.sys.comcast.net with comcast
	id idBD1r0022Ka2Q501dCMDq; Tue, 17 Nov 2015 13:12:21 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-11v.sys.comcast.net with comcast
	id idCL1r00V2U0RYt01dCMDZ; Tue, 17 Nov 2015 13:12:21 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1650655 - in /httpd/httpd/branches/2.4.x: CHANGES STATUS modules/proxy/proxy_util.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CAKQ1sVMrLPdUrxnxahscpW_JmPW=jf5uDNhXaCZSa8G2mNiCkg@mail.gmail.com>
Date: Tue, 17 Nov 2015 08:12:20 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <EF411C1E-AFD0-44E5-8358-72854B79FEC3@jaguNET.com>
References: <20150109203751.20247AC0143@hades.apache.org> <564A0A06.1040300@gmail.com> <CAKQ1sVP-ZO=C8kUt_+tW7+h5A=yjDuKhEE9ah9shF1xRQVciRw@mail.gmail.com> <F824122C-EF56-4A66-B921-8FB8AE5BF179@jaguNET.com> <CAKQ1sVMrLPdUrxnxahscpW_JmPW=jf5uDNhXaCZSa8G2mNiCkg@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1447765941;
	bh=ZoEFHeH5ShgTUoCIgGMOrXN6ql2SCTD9u4ytYTiBb4Y=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=BC2SYVLKpAIXWQJfSneHONj7fWXKOUXzBSoG8g4a1OZGiWTi12IMiuOJ7Ep50zsmC
	 sc2UHPIzBInMAGrj19yd2yoai3hDv/eq1KHpCvoqZGZuqHHEWrndXUaaEHHvMYnYc3
	 ZtpXorCb/3mGWCWvO90q0LKy7aYHcDz7SB/NoPUZpL65spsp5+4NXw4AFfbKVPtcqa
	 quj71OIE32oEhpwqe+jQQcAdw3BF/JYjSe9UYezxFoI8VVnpB/0N1v6kyQHoaMyP6Q
	 LHuHWn+p4eT3AdfUKe7aOL6KBW1OEYec3hZI6QH1yUfbs0dGxsJqvG53sYJasE40Cm
	 0D/Gh+JL0KmZg==

I would propose that if the below is NOT the cause, then the
old version remain. There is a lot to be said for simplicity
and clarity.

Plus, the whole reason for ap_proxy_port_of_scheme() was
to avoid the sorts of special numbers the below "hides"
in various locations.

> On Nov 17, 2015, at 7:41 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>=20
> On Tue, Nov 17, 2015 at 1:34 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>>=20
>>> On Nov 16, 2015, at 12:38 PM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>>>=20
>>> +        case 'h':
>>> +            if (strncasecmp(scheme + 1, "ttp", 4) =3D=3D 0) {
>>=20
>> Should be 3, shouldn't it?
>=20
> Yes, I corrected this already in a previous message.
>=20
>>=20
>>> +                int s4 =3D ap_tolower(scheme[4]);
>>> +                if (!s4) {
>>> +                    return APR_URI_HTTP_DEFAULT_PORT;
>>>                }
>>> +                else if (s4 =3D=3D 's' && !scheme[5]) {
>>> +                    return APR_URI_HTTPS_DEFAULT_PORT;
>>> +                }
>>>            }
>>=20
>> If we are really trying to optimize the heck out of this, certainly
>> we should not ap_tolower s4 until we know it's not '\0'.
>=20
> Agreed, I have a final patch already which addresses this, just wanted
> to see (quickly) if that was the real issue.
>=20
> The patch I'd propose to commit is something like:
>=20
> Index: modules/proxy/proxy_util.c
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> --- modules/proxy/proxy_util.c    (revision 1714617)
> +++ modules/proxy/proxy_util.c    (working copy)
> @@ -3663,37 +3663,61 @@ PROXY_DECLARE(int) =
ap_proxy_pass_brigade(apr_bucke
>     return OK;
> }
>=20
> -/* Fill in unknown schemes from apr_uri_port_of_scheme() */
>=20
> -typedef struct proxy_schemes_t {
> -    const char *name;
> -    apr_port_t default_port;
> -} proxy_schemes_t ;
> -
> -static proxy_schemes_t pschemes[] =3D
> +PROXY_DECLARE(apr_port_t) ap_proxy_port_of_scheme(const char *scheme)
> {
> -    {"fcgi",     8000},
> -    {"ajp",      AJP13_DEF_PORT},
> -    {"scgi",     SCGI_DEF_PORT},
> -    { NULL, 0xFFFF }     /* unknown port */
> -};
> +    if (!scheme) {
> +        return 0;
> +    }
>=20
> -PROXY_DECLARE(apr_port_t) ap_proxy_port_of_scheme(const char *scheme)
> -{
> -    if (scheme) {
> -        apr_port_t port;
> -        if ((port =3D apr_uri_port_of_scheme(scheme)) !=3D 0) {
> -            return port;
> -        } else {
> -            proxy_schemes_t *pscheme;
> -            for (pscheme =3D pschemes; pscheme->name !=3D NULL; =
++pscheme) {
> -                if (strcasecmp(scheme, pscheme->name) =3D=3D 0) {
> -                    return pscheme->default_port;
> -                }
> +    /* Fill in unknown schemes from apr_uri_port_of_scheme(),
> +     * and try a fast path for common ones.
> +     */
> +    switch (*scheme) {
> +    case 'a':
> +    case 'A':
> +        if (strcasecmp(scheme + 1, "jp") =3D=3D 0) {
> +            return AJP13_DEF_PORT;
> +        }
> +        break;
> +
> +    case 'f':
> +    case 'F':
> +        if (strcasecmp(scheme + 1, "cgi") =3D=3D 0) {
> +            return AP_FCGI_DEF_PORT;
> +        }
> +        if (strcasecmp(scheme + 1, "tp") =3D=3D 0) {
> +            return APR_URI_FTP_DEFAULT_PORT;
> +        }
> +        break;
> +
> +    case 'h':
> +    case 'H':
> +        if (strncasecmp(scheme + 1, "ttp", 3) =3D=3D 0) {
> +            if (!scheme[4]) {
> +                return APR_URI_HTTP_DEFAULT_PORT;
>             }
> +            else if (ap_tolower(scheme[4]) =3D=3D 's' && !scheme[5]) =
{
> +                return APR_URI_HTTPS_DEFAULT_PORT;
> +            }
>         }
> +        break;
> +
> +    case 'n':
> +    case 'N':
> +        if (strcasecmp(scheme + 1, "ntp") =3D=3D 0) {
> +            return APR_URI_NNTP_DEFAULT_PORT;
> +        }
> +        break;
> +
> +    case 's':
> +    case 'S':
> +        if (strcasecmp(scheme + 1, "cgi") =3D=3D 0) {
> +            return SCGI_DEF_PORT;
> +        }
> +        break;
>     }
> -    return 0;
> +    return apr_uri_port_of_scheme(scheme);
> }
>=20
> void proxy_util_register_hooks(apr_pool_t *p)
> Index: include/util_fcgi.h
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> --- include/util_fcgi.h    (revision 1714617)
> +++ include/util_fcgi.h    (working copy)
> @@ -72,6 +72,11 @@ typedef struct {
> #define AP_FCGI_VERSION_1 1
>=20
> /**
> + * Default port for FastCGI backends.
> + */
> +#define AP_FCGI_DEF_PORT 8000
> +
> +/**
>  * Possible values for the type field of ap_fcgi_header
>  */
> #define AP_FCGI_BEGIN_REQUEST       1
> Index: modules/proxy/mod_proxy_ajp.c
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> --- modules/proxy/mod_proxy_ajp.c    (revision 1714617)
> +++ modules/proxy/mod_proxy_ajp.c    (working copy)
> @@ -48,7 +48,7 @@ static int proxy_ajp_canon(request_rec *r, char *u
>      * do syntactic check.
>      * We break the URL into host, port, path, search
>      */
> -    port =3D def_port =3D ap_proxy_port_of_scheme("ajp");
> +    port =3D def_port =3D AJP13_DEF_PORT;
>=20
>     err =3D ap_proxy_canon_netloc(r->pool, &url, NULL, NULL, &host, =
&port);
>     if (err) {
> Index: modules/proxy/mod_proxy_fcgi.c
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> --- modules/proxy/mod_proxy_fcgi.c    (revision 1714617)
> +++ modules/proxy/mod_proxy_fcgi.c    (working copy)
> @@ -46,7 +46,7 @@ static int proxy_fcgi_canon(request_rec *r, char *
>         return DECLINED;
>     }
>=20
> -    port =3D def_port =3D ap_proxy_port_of_scheme("fcgi");
> +    port =3D def_port =3D AP_FCGI_DEF_PORT;
>=20
>     ap_log_rerror(APLOG_MARK, APLOG_TRACE1, 0, r,
>                  "canonicalising URL %s", url);
> Index: modules/proxy/mod_proxy_http.c
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> --- modules/proxy/mod_proxy_http.c    (revision 1714617)
> +++ modules/proxy/mod_proxy_http.c    (working copy)
> @@ -46,15 +46,16 @@ static int proxy_http_canon(request_rec *r, char *
>     if (strncasecmp(url, "http:", 5) =3D=3D 0) {
>         url +=3D 5;
>         scheme =3D "http";
> +        port =3D def_port =3D APR_URI_HTTP_DEFAULT_PORT;
>     }
>     else if (strncasecmp(url, "https:", 6) =3D=3D 0) {
>         url +=3D 6;
>         scheme =3D "https";
> +        port =3D def_port =3D APR_URI_HTTPS_DEFAULT_PORT;
>     }
>     else {
>         return DECLINED;
>     }
> -    port =3D def_port =3D ap_proxy_port_of_scheme(scheme);
>=20
>     ap_log_rerror(APLOG_MARK, APLOG_TRACE1, 0, r,
>                   "HTTP: canonicalising URL %s", url);
> --
>=20
> where we both optimize ap_proxy_port_of_scheme() and avoid unnessary =
calls...


From dev-return-84577-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 13:12:54 2015
Return-Path: <dev-return-84577-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C731D17D4F
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 13:12:54 +0000 (UTC)
Received: (qmail 24280 invoked by uid 500); 17 Nov 2015 13:12:54 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 24191 invoked by uid 500); 17 Nov 2015 13:12:54 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 24162 invoked by uid 99); 17 Nov 2015 13:12:54 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 13:12:54 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 83905C6DD2
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 13:12:53 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 2S7RXgj5qBQW for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 13:12:43 +0000 (UTC)
Received: from resqmta-ch2-11v.sys.comcast.net (resqmta-ch2-11v.sys.comcast.net [69.252.207.43])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id BF32343DD4
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 13:12:42 +0000 (UTC)
Received: from resomta-ch2-11v.sys.comcast.net ([69.252.207.107])
	by resqmta-ch2-11v.sys.comcast.net with comcast
	id idAK1r0032Ka2Q501dCcr7; Tue, 17 Nov 2015 13:12:36 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-11v.sys.comcast.net with comcast
	id idCL1r00V2U0RYt01dCcFq; Tue, 17 Nov 2015 13:12:36 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: 2.4.18 backporting
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <DCA25590-E588-4AD5-8B68-6E473764F773@greenbytes.de>
Date: Tue, 17 Nov 2015 08:12:36 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <D9EF2A21-F446-4DE2-A1C4-A22F2D0BECF6@jaguNET.com>
References: <DCA25590-E588-4AD5-8B68-6E473764F773@greenbytes.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1447765956;
	bh=qIONvTk+D7XPDsGGo+5MrtlJreIq3kEpuhSlU81ohnE=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=wj0ix2CKM/ScWLkSoOnxyQFHF+7AWcSSjX7XodroGbKKN0ucx6VElCmfmX0c0S3bv
	 oDnJ27jrWPfh838Na0TUWrTV2AFOPWFwAC0CtPPAB68MTciZGCQApjl04HrxRhhnNE
	 YXfO6YrrTwgVbJHNYs5JxAool2ZxSVkkhhhJBgHiPZ42U4WQQUuZhCVR+QqJCTpxZ6
	 Q9nCgnMpufIt+ASEwI8jJMh4T+/c+DiEROCsMqSZQO0Cww4ck7IT2rT3R96BeiNS4N
	 6oUwwtKHQa4e/CYVJf20leSbTmqKRHigyH7uTVwHk2zVEn1kbWDn9CiQM1xUrFCeEW
	 R15krJ7QsMIMg==

I will.

> On Nov 17, 2015, at 7:47 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>=20
> For the 2.4.18 backporting, can I find people here willing to look at:
>=20
>  *) core/mod_ssl:=20
>     - master conn_rec* addition to conn_rec
>     - minor mmn bump
>     - improved ALPN and Upgrade handling
>     - allowing requests for servers whose TLS configuration is =
compatible
>       to the SNI server ones
>     - disabling TLS renegotiation for slave connections
>     changes are necessary for update modules/http2
>     trunk patch: http://svn.apache.org/r1708107
>                  http://svn.apache.org/r1709587
>                  http://svn.apache.org/r1709602
>                  http://svn.apache.org/r1709995
>                  http://svn.apache.org/r1710231
>                  http://svn.apache.org/r1710419
>                  http://svn.apache.org/r1710572
>                  http://svn.apache.org/r1710583
>                  + manual addition of "conn_rec *master;"
>     2.4.x patch: =
https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patche=
s/2.4.17-protocols.patch
>     branch mergeable to 2.4.x: =
^/httpd/httpd/branches/2.4.17-protocols-changes
>     +1: icing
>=20
> ? This is needed to backport the current mod_http2. If someone could =
find the time to look at this, please? Thanks!
>=20
> Cheers,
>=20
>  Stefan


From dev-return-84578-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 13:18:42 2015
Return-Path: <dev-return-84578-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6DA9317D81
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 13:18:42 +0000 (UTC)
Received: (qmail 50900 invoked by uid 500); 17 Nov 2015 13:18:42 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 50829 invoked by uid 500); 17 Nov 2015 13:18:42 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 50819 invoked by uid 99); 17 Nov 2015 13:18:41 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 13:18:41 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 88502C6DD6
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 13:18:41 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id etEwpxuBJu1z for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 13:18:36 +0000 (UTC)
Received: from mail-io0-f169.google.com (mail-io0-f169.google.com [209.85.223.169])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 0844520271
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 13:18:36 +0000 (UTC)
Received: by iouu10 with SMTP id u10so18184587iou.0
        for <dev@httpd.apache.org>; Tue, 17 Nov 2015 05:18:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=6EclbzCrC/XGElOxHpzPbL6zRDLt+UnY5iT31kPV9WI=;
        b=CQbRPa3Tuc6ya9FbVEz7dDCCtAXFYMvaQxfzku+6TxkdwXlYKnBzx8tSg/xMkpPm83
         ac43vKSosyPflNeeo9lIFM12QxlaHD1aj6mcT1x4Vv8kw5br+gMboVo+ichDdMU+WYFn
         1OZdYTrHnbvfsuzE2e2gdlyv/O0UzWFznD5UCN1tOKnlSWsbOH4RgWv3mPcLIWbsC1B1
         Y5aEyz2DW+gRb5fPF88Yzog7QOIJ1nVuHSx2a61itk9HesIouU1NVL6PyegXo+9lxCef
         uOXJFOIuf2eJuJgPa7tdOEQSd78B4dI6zH2bAuqCTOuUSucK1fpfpExtaUxKPdISLt0i
         ihPA==
MIME-Version: 1.0
X-Received: by 10.107.4.70 with SMTP id 67mr27154135ioe.13.1447766314998; Tue,
 17 Nov 2015 05:18:34 -0800 (PST)
Received: by 10.64.114.199 with HTTP; Tue, 17 Nov 2015 05:18:34 -0800 (PST)
In-Reply-To: <139befce90c51c313f7b512915241f71@ausics.net>
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net>
	<E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com>
	<139befce90c51c313f7b512915241f71@ausics.net>
Date: Tue, 17 Nov 2015 08:18:34 -0500
Message-ID: <CALK=YjO5UA0vBsokFobZDXQ+Wb=d0z7B-TicPV7M9pzquQRvRw@mail.gmail.com>
Subject: Re: 2.4.18?
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 17, 2015 at 2:13 AM, Noel Butler <noel.butler@ausics.net> wrote:
> ??? We only had 2.4.17  5 weeks ago, why the rush?


OP also refers to a regression that makes 2.4.17 unusable for some.

From dev-return-84579-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 13:20:57 2015
Return-Path: <dev-return-84579-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B432517D8C
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 13:20:57 +0000 (UTC)
Received: (qmail 57683 invoked by uid 500); 17 Nov 2015 13:20:57 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 57617 invoked by uid 500); 17 Nov 2015 13:20:57 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 57606 invoked by uid 99); 17 Nov 2015 13:20:57 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 13:20:57 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id D4DDF180A63
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 13:20:56 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 7Wl5HWew-L9g for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 13:20:52 +0000 (UTC)
Received: from mail-qg0-f49.google.com (mail-qg0-f49.google.com [209.85.192.49])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id D40C7441AB
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 13:20:51 +0000 (UTC)
Received: by qgec40 with SMTP id c40so4957782qge.2
        for <dev@httpd.apache.org>; Tue, 17 Nov 2015 05:20:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=oRQBIE1pnhU0oKAzkZwCy9We+S46AyOapmtJbkrRHQI=;
        b=xbFRSzla66N4aFNm95YJ/MhT5Pt3Gv4N+1+nWrpG/EBwCuSyf9PcSLuad72JhJdD71
         wEAjiJPEbIHkTTPVIHQDvb2ZkX3fIZbP0dQDhk4vqSX8PCicOjyEFGsdPaCHGO56L6NY
         iHYvaRVVVSWu6AfcWelRLgS5jLROf0GITex3b4Gm4ri8IMvoGMHoVUxDJ/VdMxrzI0MA
         +HJQvTbBxyL9XoQxiGkDtgwmGAS1VxZ891wOkOkoE94+rRlHZi3iFhdrwq8wHRqwdeSt
         AORv/wKvaqmLJuC+TM3KBtt8BJiOTIKQ3XsVlF596haiYa9wRweVyk2/bq13kONqUpKZ
         aLAQ==
MIME-Version: 1.0
X-Received: by 10.140.237.208 with SMTP id i199mr41520292qhc.73.1447766451628;
 Tue, 17 Nov 2015 05:20:51 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 17 Nov 2015 05:20:51 -0800 (PST)
In-Reply-To: <EF411C1E-AFD0-44E5-8358-72854B79FEC3@jaguNET.com>
References: <20150109203751.20247AC0143@hades.apache.org>
	<564A0A06.1040300@gmail.com>
	<CAKQ1sVP-ZO=C8kUt_+tW7+h5A=yjDuKhEE9ah9shF1xRQVciRw@mail.gmail.com>
	<F824122C-EF56-4A66-B921-8FB8AE5BF179@jaguNET.com>
	<CAKQ1sVMrLPdUrxnxahscpW_JmPW=jf5uDNhXaCZSa8G2mNiCkg@mail.gmail.com>
	<EF411C1E-AFD0-44E5-8358-72854B79FEC3@jaguNET.com>
Date: Tue, 17 Nov 2015 14:20:51 +0100
Message-ID: <CAKQ1sVNdSG3mohk48TWGx+2Gyx5tX9f=T_Va04TwShmKV1diQg@mail.gmail.com>
Subject: Re: svn commit: r1650655 - in /httpd/httpd/branches/2.4.x: CHANGES
 STATUS modules/proxy/proxy_util.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 17, 2015 at 2:12 PM, Jim Jagielski <jim@jagunet.com> wrote:
> I would propose that if the below is NOT the cause, then the
> old version remain. There is a lot to be said for simplicity
> and clarity.

There is still a (per request) call to ap_proxy_port_of_scheme() in
ap_proxy_determine_connection() we can't avoid (AFAICT), so it is
worth optimize it anyway IMO.

>
> Plus, the whole reason for ap_proxy_port_of_scheme() was
> to avoid the sorts of special numbers the below "hides"
> in various locations.

Agreed, the optimization in ap_proxy_port_of_scheme() only is probably better.

From dev-return-84580-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 13:28:31 2015
Return-Path: <dev-return-84580-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 05E2817DD6
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 13:28:31 +0000 (UTC)
Received: (qmail 79358 invoked by uid 500); 17 Nov 2015 13:28:30 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 79285 invoked by uid 500); 17 Nov 2015 13:28:30 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 79275 invoked by uid 99); 17 Nov 2015 13:28:30 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 13:28:30 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 1CB71C05AD
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 13:28:30 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level:
X-Spam-Status: No, score=0.001 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id O9SOfRxa_CXF for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 13:28:18 +0000 (UTC)
Received: from resqmta-po-10v.sys.comcast.net (resqmta-po-10v.sys.comcast.net [96.114.154.169])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id B9C1C42B7B
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 13:28:18 +0000 (UTC)
Received: from resomta-po-01v.sys.comcast.net ([96.114.154.225])
	by resqmta-po-10v.sys.comcast.net with comcast
	id idUJ1r0034s37d401dUJRb; Tue, 17 Nov 2015 13:28:18 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-01v.sys.comcast.net with comcast
	id idUH1r00H2U0RYt01dUHru; Tue, 17 Nov 2015 13:28:18 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1650655 - in /httpd/httpd/branches/2.4.x: CHANGES STATUS modules/proxy/proxy_util.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CAKQ1sVNdSG3mohk48TWGx+2Gyx5tX9f=T_Va04TwShmKV1diQg@mail.gmail.com>
Date: Tue, 17 Nov 2015 08:28:17 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <15B8666D-025C-4DA3-B730-342941D91B1E@jaguNET.com>
References: <20150109203751.20247AC0143@hades.apache.org> <564A0A06.1040300@gmail.com> <CAKQ1sVP-ZO=C8kUt_+tW7+h5A=yjDuKhEE9ah9shF1xRQVciRw@mail.gmail.com> <F824122C-EF56-4A66-B921-8FB8AE5BF179@jaguNET.com> <CAKQ1sVMrLPdUrxnxahscpW_JmPW=jf5uDNhXaCZSa8G2mNiCkg@mail.gmail.com> <EF411C1E-AFD0-44E5-8358-72854B79FEC3@jaguNET.com> <CAKQ1sVNdSG3mohk48TWGx+2Gyx5tX9f=T_Va04TwShmKV1diQg@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1447766898;
	bh=BHMEW66quq96dOLJECOjEBl3F4fEJUatwfRDbZhroPs=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=IvD+u9ILLDsc27gaWNv2O19za48ZssvQyt59RVykKcvPzHeZxjYrfVqrFaUksIk+o
	 40N4ze70WMLUDV9mnaDrIlFqkwxYzoKLwYpkvNviicYoZOfPc0S8uXAlUTgPT6vUSc
	 Vv1RGQDa23sUeHqKmOAg/iVPvX/aNAE9ZvxEvRDxeUj5ZXEfR9VAnMbxBj2Yo86dRK
	 WFmzLJDR4OwJEZ6UvSsHMq+xC5aYUsGmvpIspAf5Sf5UmDzyj3FXZYEltCiFLxu1U9
	 i/oOQ//YqDHY4NnBSU7YGf2ebKToH1xYMVLOGDLRAf6bjwst5qBVxdmBvzvrmc3pyK
	 Msjt/v/PhRuUw==

Agreed... if we should optimize, then focusing on =
ap_proxy_port_of_scheme(),
which is part of the actual API, is likely best.

> On Nov 17, 2015, at 8:20 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>=20
> On Tue, Nov 17, 2015 at 2:12 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>> I would propose that if the below is NOT the cause, then the
>> old version remain. There is a lot to be said for simplicity
>> and clarity.
>=20
> There is still a (per request) call to ap_proxy_port_of_scheme() in
> ap_proxy_determine_connection() we can't avoid (AFAICT), so it is
> worth optimize it anyway IMO.
>=20
>>=20
>> Plus, the whole reason for ap_proxy_port_of_scheme() was
>> to avoid the sorts of special numbers the below "hides"
>> in various locations.
>=20
> Agreed, the optimization in ap_proxy_port_of_scheme() only is probably =
better.


From dev-return-84581-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 14:44:57 2015
Return-Path: <dev-return-84581-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AF51E181C0
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 14:44:57 +0000 (UTC)
Received: (qmail 75311 invoked by uid 500); 17 Nov 2015 14:44:57 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 75250 invoked by uid 500); 17 Nov 2015 14:44:57 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 75236 invoked by uid 99); 17 Nov 2015 14:44:57 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 14:44:57 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 9140C18017A
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 14:44:56 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id AcepKo9Mg9rJ for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 14:44:41 +0000 (UTC)
Received: from resqmta-po-08v.sys.comcast.net (resqmta-po-08v.sys.comcast.net [96.114.154.167])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 3420120751
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 14:44:41 +0000 (UTC)
Received: from resomta-po-14v.sys.comcast.net ([96.114.154.238])
	by resqmta-po-08v.sys.comcast.net with comcast
	id iekT1r00358ss0Y01ekg9o; Tue, 17 Nov 2015 14:44:40 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-14v.sys.comcast.net with comcast
	id iekf1r00J2U0RYt01ekg5k; Tue, 17 Nov 2015 14:44:40 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: 2.4.18 backporting
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <D9EF2A21-F446-4DE2-A1C4-A22F2D0BECF6@jaguNET.com>
Date: Tue, 17 Nov 2015 09:44:39 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <3D49817D-DD89-4D8E-B7C3-257D3FF7D1C8@jaguNET.com>
References: <DCA25590-E588-4AD5-8B68-6E473764F773@greenbytes.de> <D9EF2A21-F446-4DE2-A1C4-A22F2D0BECF6@jaguNET.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1447771480;
	bh=XZvTyPkTN877XMJ3N0ZOhY6cR+gbjqI5Og2QlL7HHtk=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=fmI+4PDgIMWeGRsEe56CYCljj4flrINsT+L2q75rE3/fjtcUBmzQSey/ltZGeQ6Zs
	 mgg2ifbDhF0YvRxPTF7wfxL5pkGJRTar056OGAaZpdm2j6LtmBQq8XJicBkHGkcX20
	 oEq7IXvT4Dqx7uGese68Rzkepi4vq9OgBfat/sxbzJVc56GMoUB8OtQZrugFBZ8+fH
	 0m+GWula/0JdRdbGbpJyztg8GB0545egvSnkf8VsqxwQYDBGlpSg1yA2RE72iwfM+C
	 gYKaEarLhCl3ZbfsiJiVxzZxHMfnHrQndYaFthJp6dxrhlwx3DGkAe3YB/Nh1Irkg+
	 sIXIPrPyKXtBw==

Doing a quick tst I get:

  t/modules/http2.t .. push on reference is experimental at =
t/modules/http2.t line 319.
  Dubious, test returned 255 (wstat 65280, 0xff00)
  No subtests run

  Test Summary Report
  -------------------
  t/modules/http2.t (Wstat: 65280 Tests: 0 Failed: 0)
    Non-zero exit status: 255
    Parse errors: No plan found in TAP output
  Files=3D1, Tests=3D0,  1 wallclock secs ( 0.02 usr  0.01 sys +  0.31 =
cusr  0.06 csys =3D  0.40 CPU)
  Result: FAIL
  Failed 1/1 test programs. 0/0 subtests failed.

This is on OSX

> On Nov 17, 2015, at 8:12 AM, Jim Jagielski <jim@jaguNET.com> wrote:
>=20
> I will.
>=20
>> On Nov 17, 2015, at 7:47 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>=20
>> For the 2.4.18 backporting, can I find people here willing to look =
at:
>>=20
>> *) core/mod_ssl:=20
>>    - master conn_rec* addition to conn_rec
>>    - minor mmn bump
>>    - improved ALPN and Upgrade handling
>>    - allowing requests for servers whose TLS configuration is =
compatible
>>      to the SNI server ones
>>    - disabling TLS renegotiation for slave connections
>>    changes are necessary for update modules/http2
>>    trunk patch: http://svn.apache.org/r1708107
>>                 http://svn.apache.org/r1709587
>>                 http://svn.apache.org/r1709602
>>                 http://svn.apache.org/r1709995
>>                 http://svn.apache.org/r1710231
>>                 http://svn.apache.org/r1710419
>>                 http://svn.apache.org/r1710572
>>                 http://svn.apache.org/r1710583
>>                 + manual addition of "conn_rec *master;"
>>    2.4.x patch: =
https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patche=
s/2.4.17-protocols.patch
>>    branch mergeable to 2.4.x: =
^/httpd/httpd/branches/2.4.17-protocols-changes
>>    +1: icing
>>=20
>> ? This is needed to backport the current mod_http2. If someone could =
find the time to look at this, please? Thanks!
>>=20
>> Cheers,
>>=20
>> Stefan
>=20


From dev-return-84582-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 14:50:23 2015
Return-Path: <dev-return-84582-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7D618181F3
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 14:50:23 +0000 (UTC)
Received: (qmail 92368 invoked by uid 500); 17 Nov 2015 14:50:23 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 92303 invoked by uid 500); 17 Nov 2015 14:50:23 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 92292 invoked by uid 99); 17 Nov 2015 14:50:23 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 14:50:23 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 987C8C5ADE
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 14:50:22 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id xJxvoIOskCO0 for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 14:50:22 +0000 (UTC)
Received: from mail-ig0-f180.google.com (mail-ig0-f180.google.com [209.85.213.180])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id EC18F42B60
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 14:50:21 +0000 (UTC)
Received: by igbxm8 with SMTP id xm8so14953319igb.1
        for <dev@httpd.apache.org>; Tue, 17 Nov 2015 06:50:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=8cWSvNQbb1PrRJM/yPASrIT8JUxVNkByD7E5nSkbpwo=;
        b=CYLN4MpJqlFqmNdcMKEXWpYq1U2wdMAv0CY6fG2fd7k464ekE2H3KrWHhFZrT1xikQ
         H9izG5urG/6g4FpVnFHBbBCKoSrAthA1WLLJ5lVa1jYaqkzwMiLeawff649ERnPAdUeI
         DW7tdJId13+KdlJphengOLdOnNHCbb2DIY9a2XGmavg3+d+54HdzBYkxdOC7gUb24n1I
         NQzDyGRQOFBhYvZwG/ep0fU2xlOU7qiwQUuLsysOsOpGKdz5yuqb7DRPb037TBC/mHwa
         E8p3VT5ZY9P2Yaoec/0G1ZafOYIiHRNqTRqX+eZ24j1b1zWNy3nBPG2rKjKKHHwOx8ZZ
         zK/w==
MIME-Version: 1.0
X-Received: by 10.50.142.8 with SMTP id rs8mr2355841igb.87.1447771821589; Tue,
 17 Nov 2015 06:50:21 -0800 (PST)
Received: by 10.64.39.106 with HTTP; Tue, 17 Nov 2015 06:50:21 -0800 (PST)
In-Reply-To: <20151117094854.AE44E3A024F@svn01-us-west.apache.org>
References: <20151117094854.AE44E3A024F@svn01-us-west.apache.org>
Date: Tue, 17 Nov 2015 15:50:21 +0100
Message-ID: <CAKQ1sVNNP9k_5SORazSkc1fTAvmQq41HULNSE6ow49AGsc0nSg@mail.gmail.com>
Subject: Re: svn commit: r1714742 - /httpd/httpd/branches/2.4.x/STATUS
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 17, 2015 at 10:48 AM,  <icing@apache.org> wrote:
>
> Modified: httpd/httpd/branches/2.4.x/STATUS
> URL: http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/STATUS?rev=1714742&r1=1714741&r2=1714742&view=diff
> ==============================================================================
> --- httpd/httpd/branches/2.4.x/STATUS (original)
> +++ httpd/httpd/branches/2.4.x/STATUS Tue Nov 17 09:48:54 2015
> @@ -161,6 +161,7 @@ PATCHES PROPOSED TO BACKPORT FROM TRUNK:
>       2.4.x patch: http://people.apache.org/~ylavic/httpd-2.4.x-check_pipeline_blank_lines.patch
>                    (trunk works, meant to ease review)
>       +1: ylavic, minfrin
> +     icing: test 3 fails for me in t/security/CVE-2005-3357.t

I can't reproduce this (with 2.4.x and this patch only)...
Can you provide the ./TEST -v output and maybe the trace logs?

From dev-return-84583-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 14:59:38 2015
Return-Path: <dev-return-84583-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 14DF318269
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 14:59:38 +0000 (UTC)
Received: (qmail 23497 invoked by uid 500); 17 Nov 2015 14:59:37 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 23429 invoked by uid 500); 17 Nov 2015 14:59:37 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 23419 invoked by uid 99); 17 Nov 2015 14:59:37 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 14:59:37 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 0989518028A
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 14:59:37 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.11
X-Spam-Level:
X-Spam-Status: No, score=-0.11 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 0Y4yz7N93v6q for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 14:59:27 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 7D31542B60
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 14:59:27 +0000 (UTC)
Received: from [192.168.1.134] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 0B44915A008E
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 15:59:26 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447772366; bh=8Bnk93YPnDJK+IuRcAVAJ5Ry9L6Jz/pQ7DgAUO7MlmE=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=SiZFVXCurmMn5YanhrIzupMDhLcWnz3vsnqxyZrJbLafpKk91R1Hg5WdsEpl5lsYB
	 W5SwlVnD6tEoYzySn97xYitBYOkpIGpZkqK8sZrgMJX7ADF6Q36y6q7thCLpYSHzLN
	 vwQSvZknPpK/6JJ9c5l31shOdWI+FZwiOhdgFObQ=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: 2.4.18 backporting
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <3D49817D-DD89-4D8E-B7C3-257D3FF7D1C8@jaguNET.com>
Date: Tue, 17 Nov 2015 15:59:25 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <9C3DA6EF-0AAB-496B-B502-0CFDAAB89F13@greenbytes.de>
References: <DCA25590-E588-4AD5-8B68-6E473764F773@greenbytes.de> <D9EF2A21-F446-4DE2-A1C4-A22F2D0BECF6@jaguNET.com> <3D49817D-DD89-4D8E-B7C3-257D3FF7D1C8@jaguNET.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

Hmm, what perl version is that? Works on my OS X (El 10.11) with perl =
-v:

This is perl 5, version 18, subversion 2 (v5.18.2) built for =
darwin-thread-multi-2level
(with 2 registered patches, see perl -V for more detail)

//Stefan

> Am 17.11.2015 um 15:44 schrieb Jim Jagielski <jim@jaguNET.com>:
>=20
> Doing a quick tst I get:
>=20
>  t/modules/http2.t .. push on reference is experimental at =
t/modules/http2.t line 319.
>  Dubious, test returned 255 (wstat 65280, 0xff00)
>  No subtests run
>=20
>  Test Summary Report
>  -------------------
>  t/modules/http2.t (Wstat: 65280 Tests: 0 Failed: 0)
>    Non-zero exit status: 255
>    Parse errors: No plan found in TAP output
>  Files=3D1, Tests=3D0,  1 wallclock secs ( 0.02 usr  0.01 sys +  0.31 =
cusr  0.06 csys =3D  0.40 CPU)
>  Result: FAIL
>  Failed 1/1 test programs. 0/0 subtests failed.
>=20
> This is on OSX
>=20
>> On Nov 17, 2015, at 8:12 AM, Jim Jagielski <jim@jaguNET.com> wrote:
>>=20
>> I will.
>>=20
>>> On Nov 17, 2015, at 7:47 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>=20
>>> For the 2.4.18 backporting, can I find people here willing to look =
at:
>>>=20
>>> *) core/mod_ssl:=20
>>>   - master conn_rec* addition to conn_rec
>>>   - minor mmn bump
>>>   - improved ALPN and Upgrade handling
>>>   - allowing requests for servers whose TLS configuration is =
compatible
>>>     to the SNI server ones
>>>   - disabling TLS renegotiation for slave connections
>>>   changes are necessary for update modules/http2
>>>   trunk patch: http://svn.apache.org/r1708107
>>>                http://svn.apache.org/r1709587
>>>                http://svn.apache.org/r1709602
>>>                http://svn.apache.org/r1709995
>>>                http://svn.apache.org/r1710231
>>>                http://svn.apache.org/r1710419
>>>                http://svn.apache.org/r1710572
>>>                http://svn.apache.org/r1710583
>>>                + manual addition of "conn_rec *master;"
>>>   2.4.x patch: =
https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patche=
s/2.4.17-protocols.patch
>>>   branch mergeable to 2.4.x: =
^/httpd/httpd/branches/2.4.17-protocols-changes
>>>   +1: icing
>>>=20
>>> ? This is needed to backport the current mod_http2. If someone could =
find the time to look at this, please? Thanks!
>>>=20
>>> Cheers,
>>>=20
>>> Stefan
>>=20
>=20


From dev-return-84584-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 15:03:56 2015
Return-Path: <dev-return-84584-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3070318298
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 15:03:56 +0000 (UTC)
Received: (qmail 35639 invoked by uid 500); 17 Nov 2015 15:03:55 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 35572 invoked by uid 500); 17 Nov 2015 15:03:55 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 35561 invoked by uid 99); 17 Nov 2015 15:03:55 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 15:03:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id BF0E218028A
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 15:03:54 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.11
X-Spam-Level:
X-Spam-Status: No, score=-0.11 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id Q8OGlNXJO4MG for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 15:03:47 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id A1E7120271
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 15:03:44 +0000 (UTC)
Received: from [192.168.1.134] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 0B7D015A0655
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 16:03:44 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447772624; bh=MEtbeMYUwfIFwu+cg1XX5KgnA0fKK2sgSqQ9u6/Y7qw=;
	h=From:Subject:Date:References:To:In-Reply-To:From;
	b=EKtv/HmwUsoAT/hELSTW/sjDOSjyMiFL4N+IW0mXy3bA5hkUMPfYKoXSlsEJKpZNM
	 hSCwllugH+pySE2F4+LMRY9vnYpuxpNIa7zf3xqj0zH2Dtmi/gsxFXi7uNxY4Fis/j
	 qxgvEv/FpXJy/vRYyrMsekocvVHbeYQ6/jNwYS5o=
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: multipart/mixed; boundary="Apple-Mail=_56E6216A-38DE-476F-81C0-8D530E2D98F1"
Message-Id: <43BC2556-F18A-4DFC-888B-186226F35A78@greenbytes.de>
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: svn commit: r1714742 - /httpd/httpd/branches/2.4.x/STATUS
Date: Tue, 17 Nov 2015 16:03:43 +0100
References: <20151117094854.AE44E3A024F@svn01-us-west.apache.org> <CAKQ1sVNNP9k_5SORazSkc1fTAvmQq41HULNSE6ow49AGsc0nSg@mail.gmail.com>
To: dev@httpd.apache.org
In-Reply-To: <CAKQ1sVNNP9k_5SORazSkc1fTAvmQq41HULNSE6ow49AGsc0nSg@mail.gmail.com>
X-Mailer: Apple Mail (2.3096.5)


--Apple-Mail=_56E6216A-38DE-476F-81C0-8D530E2D98F1
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Hmm, just testing for Jim, I see the same error on 2.5-DEV on my OS X =
machine:

t/security/CVE-2005-3357.t ..=20
1..3
# Running under perl version 5.018002 for darwin
# Current time local: Tue Nov 17 16:00:55 2015
# Current time GMT:   Tue Nov 17 15:00:55 2015
# Using Test.pm version 1.26
# Using Apache/Test.pm version 1.40
# URL is http://localhost:8534/
ok 1
# testing : Expected bad request from 'GET http://localhost:8534/'
# expected: 400
# received: '400'
ok 2
# testing : errordoc content was served
# expected: qr/(?^:welcome to localhost)/
# received: '<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
# <html><head>
# <title>400 Bad Request</title>
# </head><body>
# <h1>Bad Request</h1>
# <p>Your browser sent a request that this server could not =
understand.<br />
# </p>
# <p>Additionally, a 400 Bad Request
# error was encountered while trying to use an ErrorDocument to handle =
the request.</p>
# </body></html>
# '
not ok 3
# Failed test 3 in t/security/CVE-2005-3357.t at line 51
Failed 1/3 subtests=20

Test Summary Report
-------------------
t/security/CVE-2005-3357.t (Wstat: 0 Tests: 3 Failed: 1)
  Failed test:  3
Files=3D1, Tests=3D3,  0 wallclock secs ( 0.02 usr  0.00 sys +  0.37 =
cusr  0.15 csys =3D  0.54 CPU)
Result: FAIL
Failed 1/1 test programs. 1/3 subtests failed.


--Apple-Mail=_56E6216A-38DE-476F-81C0-8D530E2D98F1
Content-Disposition: attachment;
	filename=access_log
Content-Type: application/octet-stream;
	name="access_log"
Content-Transfer-Encoding: 7bit

127.0.0.1 - - [17/Nov/2015:15:02:28 +0000] "GET /index.html HTTP/1.1" 200 26
127.0.0.1 - - [17/Nov/2015:15:02:28 +0000] "1.1" 400 -

--Apple-Mail=_56E6216A-38DE-476F-81C0-8D530E2D98F1
Content-Disposition: attachment;
	filename=error_log
Content-Type: application/octet-stream;
	name="error_log"
Content-Transfer-Encoding: 7bit

[Tue Nov 17 15:02:26.868611 2015] [ssl:info] [pid 14555:tid 140735202668544] AH01887: Init: Initializing (virtual) servers for SSL
[Tue Nov 17 15:02:26.868703 2015] [ssl:info] [pid 14555:tid 140735202668544] AH01914: Configuring server localhost:8534 for SSL protocol
[Tue Nov 17 15:02:26.869241 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.869569 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.869586 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.870252 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.870273 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.870293 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.870310 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Global Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.870327 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Object Publishing CA,OU=BelSign Object Publishing Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.870344 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Secure Server CA,OU=BelSign Secure Server Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.870658 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.870763 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(415): AH01893: Configuring TLS extension handling
[Tue Nov 17 15:02:26.871043 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_util_ssl.c(443): AH02412: [localhost:8534] Cert matches for name 'localhost' [subject: emailAddress=test-dev@httpd.apache.org,CN=localhost,OU=httpd-test/rsa-test,O=ASF,L=San Francisco,ST=California,C=US / issuer: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US / serial: 08 / notbefore: Nov  4 15:07:58 2015 GMT / notafter: Nov  3 15:07:58 2016 GMT]
[Tue Nov 17 15:02:26.871052 2015] [ssl:info] [pid 14555:tid 140735202668544] AH02568: Certificate and private key localhost:8534:0 configured from /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/certs/server.crt and /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/keys/server.pem
[Tue Nov 17 15:02:26.871147 2015] [ssl:info] [pid 14555:tid 140735202668544] AH01914: Configuring server localhost:8533 for SSL protocol
[Tue Nov 17 15:02:26.871469 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.871732 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.871747 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.872394 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.872415 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.872434 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.872450 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Global Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.872468 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Object Publishing CA,OU=BelSign Object Publishing Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.872484 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Secure Server CA,OU=BelSign Secure Server Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.872737 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.872816 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(415): AH01893: Configuring TLS extension handling
[Tue Nov 17 15:02:26.873028 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_util_ssl.c(443): AH02412: [localhost:8533] Cert matches for name 'localhost' [subject: emailAddress=test-dev@httpd.apache.org,CN=localhost,OU=httpd-test/rsa-test,O=ASF,L=San Francisco,ST=California,C=US / issuer: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US / serial: 08 / notbefore: Nov  4 15:07:58 2015 GMT / notafter: Nov  3 15:07:58 2016 GMT]
[Tue Nov 17 15:02:26.873036 2015] [ssl:info] [pid 14555:tid 140735202668544] AH02568: Certificate and private key localhost:8533:0 configured from /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/certs/server.crt and /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/keys/server.pem
[Tue Nov 17 15:02:26.873117 2015] [ssl:info] [pid 14555:tid 140735202668544] AH01914: Configuring server localhost:8532 for SSL protocol
[Tue Nov 17 15:02:26.873434 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.873668 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.873681 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.874214 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.874231 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.874247 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.874269 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Global Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.874284 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Object Publishing CA,OU=BelSign Object Publishing Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.874300 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Secure Server CA,OU=BelSign Secure Server Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.874515 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.874581 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(415): AH01893: Configuring TLS extension handling
[Tue Nov 17 15:02:26.874757 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_util_ssl.c(443): AH02412: [localhost:8532] Cert matches for name 'localhost' [subject: emailAddress=test-dev@httpd.apache.org,CN=localhost,OU=httpd-test/rsa-test,O=ASF,L=San Francisco,ST=California,C=US / issuer: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US / serial: 08 / notbefore: Nov  4 15:07:58 2015 GMT / notafter: Nov  3 15:07:58 2016 GMT]
[Tue Nov 17 15:02:26.874764 2015] [ssl:info] [pid 14555:tid 140735202668544] AH02568: Certificate and private key localhost:8532:0 configured from /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/certs/server.crt and /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/keys/server.pem
[Tue Nov 17 15:02:26.874832 2015] [ssl:info] [pid 14555:tid 140735202668544] AH01914: Configuring server localhost:8553 for SSL protocol
[Tue Nov 17 15:02:26.875099 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.875318 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.875331 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.875863 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.875880 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.875896 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.875910 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Global Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.875925 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Object Publishing CA,OU=BelSign Object Publishing Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.875938 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Secure Server CA,OU=BelSign Secure Server Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.876158 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.876224 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(415): AH01893: Configuring TLS extension handling
[Tue Nov 17 15:02:26.876402 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_util_ssl.c(443): AH02412: [localhost:8553] Cert matches for name 'localhost' [subject: emailAddress=test-dev@httpd.apache.org,CN=localhost,OU=httpd-test/rsa-test,O=ASF,L=San Francisco,ST=California,C=US / issuer: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US / serial: 08 / notbefore: Nov  4 15:07:58 2015 GMT / notafter: Nov  3 15:07:58 2016 GMT]
[Tue Nov 17 15:02:26.876409 2015] [ssl:info] [pid 14555:tid 140735202668544] AH02568: Certificate and private key localhost:8553:0 configured from /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/certs/server.crt and /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/keys/server.pem
[Tue Nov 17 15:02:26.876476 2015] [ssl:info] [pid 14555:tid 140735202668544] AH01914: Configuring server localhost:8552 for SSL protocol
[Tue Nov 17 15:02:26.876741 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.876963 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.876977 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.877512 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.877529 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.877550 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.877564 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Global Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.877579 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Object Publishing CA,OU=BelSign Object Publishing Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.877601 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Secure Server CA,OU=BelSign Secure Server Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.877789 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.877847 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(415): AH01893: Configuring TLS extension handling
[Tue Nov 17 15:02:26.878001 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_util_ssl.c(443): AH02412: [localhost:8552] Cert matches for name 'localhost' [subject: emailAddress=test-dev@httpd.apache.org,CN=localhost,OU=httpd-test/rsa-test,O=ASF,L=San Francisco,ST=California,C=US / issuer: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US / serial: 08 / notbefore: Nov  4 15:07:58 2015 GMT / notafter: Nov  3 15:07:58 2016 GMT]
[Tue Nov 17 15:02:26.878014 2015] [ssl:info] [pid 14555:tid 140735202668544] AH02568: Certificate and private key localhost:8552:0 configured from /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/certs/server.crt and /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/keys/server.pem
[Tue Nov 17 15:02:26.878314 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.878354 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.878980 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1393): AH02207: loaded 4 client certs for SSL proxy
[Tue Nov 17 15:02:26.879247 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.879455 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.879468 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.879941 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.879957 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.879971 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.879983 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Global Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.879995 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Object Publishing CA,OU=BelSign Object Publishing Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.880007 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Secure Server CA,OU=BelSign Secure Server Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.880192 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.880346 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1393): AH02207: loaded 1 client certs for SSL proxy
[Tue Nov 17 15:02:26.880352 2015] [ssl:info] [pid 14555:tid 140735202668544] AH01914: Configuring server localhost:8544 for SSL protocol
[Tue Nov 17 15:02:26.880581 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.880775 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.880786 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.881244 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.881267 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.881284 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.881296 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Global Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.881309 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Object Publishing CA,OU=BelSign Object Publishing Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.881321 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Secure Server CA,OU=BelSign Secure Server Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.881516 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.881573 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(415): AH01893: Configuring TLS extension handling
[Tue Nov 17 15:02:26.881739 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_util_ssl.c(443): AH02412: [localhost:8544] Cert matches for name 'localhost' [subject: emailAddress=test-dev@httpd.apache.org,CN=localhost,OU=httpd-test/rsa-test,O=ASF,L=San Francisco,ST=California,C=US / issuer: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US / serial: 08 / notbefore: Nov  4 15:07:58 2015 GMT / notafter: Nov  3 15:07:58 2016 GMT]
[Tue Nov 17 15:02:26.881746 2015] [ssl:info] [pid 14555:tid 140735202668544] AH02568: Certificate and private key localhost:8544:0 configured from /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/certs/server.crt and /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/keys/server.pem
[Tue Nov 17 15:02:26.881807 2015] [ssl:info] [pid 14555:tid 140735202668544] AH01914: Configuring server localhost:8531 for SSL protocol
[Tue Nov 17 15:02:26.882044 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.882244 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.882255 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.882727 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.882742 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.882757 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.882769 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Global Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.882789 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Object Publishing CA,OU=BelSign Object Publishing Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.882802 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Secure Server CA,OU=BelSign Secure Server Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.882994 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.883053 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_engine_init.c(415): AH01893: Configuring TLS extension handling
[Tue Nov 17 15:02:26.883212 2015] [ssl:debug] [pid 14555:tid 140735202668544] ssl_util_ssl.c(443): AH02412: [localhost:8531] Cert matches for name 'localhost' [subject: emailAddress=test-dev@httpd.apache.org,CN=localhost,OU=httpd-test/rsa-test,O=ASF,L=San Francisco,ST=California,C=US / issuer: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US / serial: 08 / notbefore: Nov  4 15:07:58 2015 GMT / notafter: Nov  3 15:07:58 2016 GMT]
[Tue Nov 17 15:02:26.883218 2015] [ssl:info] [pid 14555:tid 140735202668544] AH02568: Certificate and private key localhost:8531:0 configured from /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/certs/server.crt and /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/keys/server.pem
[Tue Nov 17 15:02:26.883286 2015] [ssl:info] [pid 14555:tid 140735202668544] AH01876: mod_ssl/2.5.0-dev compiled against Server: Apache/2.5.0-dev, Library: OpenSSL/1.0.2d
[Tue Nov 17 15:02:26.883316 2015] [http2:debug] [pid 14555:tid 140735202668544] mod_http2.c(74): initializing post config dry run
[Tue Nov 17 15:02:26.916691 2015] [ssl:warn] [pid 14556:tid 140735202668544] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]
[Tue Nov 17 15:02:26.916717 2015] [ssl:info] [pid 14556:tid 140735202668544] AH01887: Init: Initializing (virtual) servers for SSL
[Tue Nov 17 15:02:26.916723 2015] [ssl:info] [pid 14556:tid 140735202668544] AH01914: Configuring server localhost:8534 for SSL protocol
[Tue Nov 17 15:02:26.917224 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.917545 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.917558 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.918063 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.918079 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.918102 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.918137 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Global Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.918153 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Object Publishing CA,OU=BelSign Object Publishing Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.918183 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Secure Server CA,OU=BelSign Secure Server Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.918473 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.918603 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(415): AH01893: Configuring TLS extension handling
[Tue Nov 17 15:02:26.918875 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_util_ssl.c(443): AH02412: [localhost:8534] Cert matches for name 'localhost' [subject: emailAddress=test-dev@httpd.apache.org,CN=localhost,OU=httpd-test/rsa-test,O=ASF,L=San Francisco,ST=California,C=US / issuer: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US / serial: 08 / notbefore: Nov  4 15:07:58 2015 GMT / notafter: Nov  3 15:07:58 2016 GMT]
[Tue Nov 17 15:02:26.918883 2015] [ssl:info] [pid 14556:tid 140735202668544] AH02568: Certificate and private key localhost:8534:0 configured from /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/certs/server.crt and /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/keys/server.pem
[Tue Nov 17 15:02:26.918957 2015] [ssl:info] [pid 14556:tid 140735202668544] AH01914: Configuring server localhost:8533 for SSL protocol
[Tue Nov 17 15:02:26.919228 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.919439 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.919451 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.920003 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.920023 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.920038 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.920051 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Global Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.920064 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Object Publishing CA,OU=BelSign Object Publishing Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.920076 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Secure Server CA,OU=BelSign Secure Server Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.920281 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.920344 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(415): AH01893: Configuring TLS extension handling
[Tue Nov 17 15:02:26.920508 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_util_ssl.c(443): AH02412: [localhost:8533] Cert matches for name 'localhost' [subject: emailAddress=test-dev@httpd.apache.org,CN=localhost,OU=httpd-test/rsa-test,O=ASF,L=San Francisco,ST=California,C=US / issuer: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US / serial: 08 / notbefore: Nov  4 15:07:58 2015 GMT / notafter: Nov  3 15:07:58 2016 GMT]
[Tue Nov 17 15:02:26.920525 2015] [ssl:info] [pid 14556:tid 140735202668544] AH02568: Certificate and private key localhost:8533:0 configured from /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/certs/server.crt and /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/keys/server.pem
[Tue Nov 17 15:02:26.920590 2015] [ssl:info] [pid 14556:tid 140735202668544] AH01914: Configuring server localhost:8532 for SSL protocol
[Tue Nov 17 15:02:26.920836 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.921112 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.921125 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.921726 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.921746 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.921762 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.921775 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Global Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.921788 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Object Publishing CA,OU=BelSign Object Publishing Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.921803 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Secure Server CA,OU=BelSign Secure Server Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.922024 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.922092 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(415): AH01893: Configuring TLS extension handling
[Tue Nov 17 15:02:26.922318 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_util_ssl.c(443): AH02412: [localhost:8532] Cert matches for name 'localhost' [subject: emailAddress=test-dev@httpd.apache.org,CN=localhost,OU=httpd-test/rsa-test,O=ASF,L=San Francisco,ST=California,C=US / issuer: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US / serial: 08 / notbefore: Nov  4 15:07:58 2015 GMT / notafter: Nov  3 15:07:58 2016 GMT]
[Tue Nov 17 15:02:26.922327 2015] [ssl:info] [pid 14556:tid 140735202668544] AH02568: Certificate and private key localhost:8532:0 configured from /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/certs/server.crt and /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/keys/server.pem
[Tue Nov 17 15:02:26.922422 2015] [ssl:info] [pid 14556:tid 140735202668544] AH01914: Configuring server localhost:8553 for SSL protocol
[Tue Nov 17 15:02:26.922691 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.922910 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.922923 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.923416 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.923432 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.923447 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.923460 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Global Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.923473 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Object Publishing CA,OU=BelSign Object Publishing Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.923485 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Secure Server CA,OU=BelSign Secure Server Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.923685 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.923746 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(415): AH01893: Configuring TLS extension handling
[Tue Nov 17 15:02:26.923904 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_util_ssl.c(443): AH02412: [localhost:8553] Cert matches for name 'localhost' [subject: emailAddress=test-dev@httpd.apache.org,CN=localhost,OU=httpd-test/rsa-test,O=ASF,L=San Francisco,ST=California,C=US / issuer: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US / serial: 08 / notbefore: Nov  4 15:07:58 2015 GMT / notafter: Nov  3 15:07:58 2016 GMT]
[Tue Nov 17 15:02:26.923911 2015] [ssl:info] [pid 14556:tid 140735202668544] AH02568: Certificate and private key localhost:8553:0 configured from /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/certs/server.crt and /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/keys/server.pem
[Tue Nov 17 15:02:26.923973 2015] [ssl:info] [pid 14556:tid 140735202668544] AH01914: Configuring server localhost:8552 for SSL protocol
[Tue Nov 17 15:02:26.924214 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.924422 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.924434 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.924927 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.924943 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.924957 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.924970 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Global Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.924983 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Object Publishing CA,OU=BelSign Object Publishing Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.924995 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Secure Server CA,OU=BelSign Secure Server Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.925191 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.925251 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(415): AH01893: Configuring TLS extension handling
[Tue Nov 17 15:02:26.925409 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_util_ssl.c(443): AH02412: [localhost:8552] Cert matches for name 'localhost' [subject: emailAddress=test-dev@httpd.apache.org,CN=localhost,OU=httpd-test/rsa-test,O=ASF,L=San Francisco,ST=California,C=US / issuer: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US / serial: 08 / notbefore: Nov  4 15:07:58 2015 GMT / notafter: Nov  3 15:07:58 2016 GMT]
[Tue Nov 17 15:02:26.925415 2015] [ssl:info] [pid 14556:tid 140735202668544] AH02568: Certificate and private key localhost:8552:0 configured from /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/certs/server.crt and /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/keys/server.pem
[Tue Nov 17 15:02:26.925715 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.925756 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.926201 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1393): AH02207: loaded 4 client certs for SSL proxy
[Tue Nov 17 15:02:26.926438 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.926638 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.926650 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.927134 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.927150 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.927172 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.927185 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Global Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.927198 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Object Publishing CA,OU=BelSign Object Publishing Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.927211 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Secure Server CA,OU=BelSign Secure Server Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.927406 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.927571 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1393): AH02207: loaded 1 client certs for SSL proxy
[Tue Nov 17 15:02:26.927579 2015] [ssl:info] [pid 14556:tid 140735202668544] AH01914: Configuring server localhost:8544 for SSL protocol
[Tue Nov 17 15:02:26.927816 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.928021 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.928033 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.928515 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.928530 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.928548 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.928561 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Global Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.928574 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Object Publishing CA,OU=BelSign Object Publishing Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.928586 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Secure Server CA,OU=BelSign Secure Server Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.928791 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.928850 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(415): AH01893: Configuring TLS extension handling
[Tue Nov 17 15:02:26.929026 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_util_ssl.c(443): AH02412: [localhost:8544] Cert matches for name 'localhost' [subject: emailAddress=test-dev@httpd.apache.org,CN=localhost,OU=httpd-test/rsa-test,O=ASF,L=San Francisco,ST=California,C=US / issuer: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US / serial: 08 / notbefore: Nov  4 15:07:58 2015 GMT / notafter: Nov  3 15:07:58 2016 GMT]
[Tue Nov 17 15:02:26.929040 2015] [ssl:info] [pid 14556:tid 140735202668544] AH02568: Certificate and private key localhost:8544:0 configured from /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/certs/server.crt and /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/keys/server.pem
[Tue Nov 17 15:02:26.929107 2015] [ssl:info] [pid 14556:tid 140735202668544] AH01914: Configuring server localhost:8531 for SSL protocol
[Tue Nov 17 15:02:26.929348 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US
[Tue Nov 17 15:02:26.929567 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.929580 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.930174 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=ca@digsigtrust.com,CN=Xcert EZ by DST,O=Xcert EZ by DST,L=Salt Lake City,ST=Utah,C=US
[Tue Nov 17 15:02:26.930194 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: OU=DST (ANX Network) CA,O=Digital Signature Trust Co.,C=US
[Tue Nov 17 15:02:26.930209 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.930222 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: CN=American Express Global Certificate Authority,OU=American Express Technologies,O=American Express Company\\, Inc.,C=US
[Tue Nov 17 15:02:26.930235 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Object Publishing CA,OU=BelSign Object Publishing Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.930248 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(1745): AH02209: CA certificate: emailAddress=webmaster@belsign.be,CN=BelSign Secure Server CA,OU=BelSign Secure Server Certificate Authority,O=BelSign NV,L=Brussels,C=BE
[Tue Nov 17 15:02:26.930466 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(827): AH01900: Configuring certificate revocation facility
[Tue Nov 17 15:02:26.930550 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_engine_init.c(415): AH01893: Configuring TLS extension handling
[Tue Nov 17 15:02:26.930750 2015] [ssl:debug] [pid 14556:tid 140735202668544] ssl_util_ssl.c(443): AH02412: [localhost:8531] Cert matches for name 'localhost' [subject: emailAddress=test-dev@httpd.apache.org,CN=localhost,OU=httpd-test/rsa-test,O=ASF,L=San Francisco,ST=California,C=US / issuer: emailAddress=test-dev@httpd.apache.org,CN=ca,OU=httpd-test,O=ASF,L=San Francisco,ST=California,C=US / serial: 08 / notbefore: Nov  4 15:07:58 2015 GMT / notafter: Nov  3 15:07:58 2016 GMT]
[Tue Nov 17 15:02:26.930757 2015] [ssl:info] [pid 14556:tid 140735202668544] AH02568: Certificate and private key localhost:8531:0 configured from /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/certs/server.crt and /Users/sei/projects/httpd/test/framework/trunk/t/conf/ssl/ca/asf/keys/server.pem
[Tue Nov 17 15:02:26.930827 2015] [ssl:info] [pid 14556:tid 140735202668544] AH01876: mod_ssl/2.5.0-dev compiled against Server: Apache/2.5.0-dev, Library: OpenSSL/1.0.2d
[Tue Nov 17 15:02:26.930876 2015] [http2:info] [pid 14556:tid 140735202668544] mod_http2 (v1.0.5-DEV, nghttp2 1.4.0), initializing...
[Tue Nov 17 15:02:26.930897 2015] [http2:debug] [pid 14556:tid 140735202668544] h2_h2.c(449): h2_h2, child_init
[Tue Nov 17 15:02:26.930935 2015] [http2:debug] [pid 14556:tid 140735202668544] h2_switch.c(43): h2_switch init
[Tue Nov 17 15:02:26.930981 2015] [proxy_balancer:debug] [pid 14556:tid 140735202668544] mod_proxy_balancer.c(793): AH01178: Doing balancers create: 480, 2 (7)
[Tue Nov 17 15:02:26.930989 2015] [slotmem_shm:debug] [pid 14556:tid 140735202668544] mod_slotmem_shm.c(363): AH02602: create didn't find /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5.shm in global list
[Tue Nov 17 15:02:26.930992 2015] [slotmem_shm:debug] [pid 14556:tid 140735202668544] mod_slotmem_shm.c(372): AH02300: create /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5.shm: 480/7
[Tue Nov 17 15:02:26.931216 2015] [slotmem_shm:debug] [pid 14556:tid 140735202668544] mod_slotmem_shm.c(413): AH02611: create: apr_shm_create(/Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5.shm) succeeded
[Tue Nov 17 15:02:26.931240 2015] [proxy:debug] [pid 14556:tid 140735202668544] proxy_util.c(1234): AH02337: copying shm[0] (0x1019b5018) for balancer://foo
[Tue Nov 17 15:02:26.931323 2015] [proxy_balancer:debug] [pid 14556:tid 140735202668544] mod_proxy_balancer.c(862): AH01184: Doing workers create: balancer://foo (p1c6d97c5_foo), 1024, 2 [0]
[Tue Nov 17 15:02:26.931330 2015] [slotmem_shm:debug] [pid 14556:tid 140735202668544] mod_slotmem_shm.c(363): AH02602: create didn't find /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_foo.shm in global list
[Tue Nov 17 15:02:26.931333 2015] [slotmem_shm:debug] [pid 14556:tid 140735202668544] mod_slotmem_shm.c(372): AH02300: create /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_foo.shm: 1024/2
[Tue Nov 17 15:02:26.931537 2015] [slotmem_shm:debug] [pid 14556:tid 140735202668544] mod_slotmem_shm.c(413): AH02611: create: apr_shm_create(/Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_foo.shm) succeeded
[Tue Nov 17 15:02:26.931552 2015] [proxy:debug] [pid 14556:tid 140735202668544] proxy_util.c(1831): AH02338: copying shm[0] (0x1019dc018) for worker: http://localhost:8547
[Tue Nov 17 15:02:26.931558 2015] [proxy:debug] [pid 14556:tid 140735202668544] proxy_util.c(1831): AH02338: copying shm[1] (0x1019dc418) for worker: http://localhost:8548
[Tue Nov 17 15:02:26.931590 2015] [proxy:debug] [pid 14556:tid 140735202668544] proxy_util.c(1234): AH02337: copying shm[1] (0x1019b51f8) for balancer://pr45434
[Tue Nov 17 15:02:26.931603 2015] [proxy_balancer:debug] [pid 14556:tid 140735202668544] mod_proxy_balancer.c(862): AH01184: Doing workers create: balancer://pr45434 (p1c6d97c5_pr45434), 1024, 1 [1]
[Tue Nov 17 15:02:26.931608 2015] [slotmem_shm:debug] [pid 14556:tid 140735202668544] mod_slotmem_shm.c(363): AH02602: create didn't find /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_pr45434.shm in global list
[Tue Nov 17 15:02:26.931612 2015] [slotmem_shm:debug] [pid 14556:tid 140735202668544] mod_slotmem_shm.c(372): AH02300: create /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_pr45434.shm: 1024/1
[Tue Nov 17 15:02:26.931815 2015] [slotmem_shm:debug] [pid 14556:tid 140735202668544] mod_slotmem_shm.c(413): AH02611: create: apr_shm_create(/Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_pr45434.shm) succeeded
[Tue Nov 17 15:02:26.931826 2015] [proxy:debug] [pid 14556:tid 140735202668544] proxy_util.c(1831): AH02338: copying shm[0] (0x101a47018) for worker: http://localhost:8529/modules
[Tue Nov 17 15:02:26.931861 2015] [slotmem_shm:debug] [pid 14556:tid 140735202668544] mod_slotmem_shm.c(495): AH02301: attach looking for /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-mod_heartmonitor.shm
[Tue Nov 17 15:02:26.931879 2015] [lbmethod_heartbeat:notice] [pid 14556:tid 140735202668544] AH02282: No slotmem from mod_heartmonitor
[Tue Nov 17 15:02:26.933867 2015] [mpm_event:notice] [pid 14556:tid 140735202668544] AH00489: Apache/2.5.0-dev (Unix) OpenSSL/1.0.2d configured -- resuming normal operations
[Tue Nov 17 15:02:26.933898 2015] [mpm_event:info] [pid 14556:tid 140735202668544] AH00490: Server built: Nov 11 2015 14:32:23
[Tue Nov 17 15:02:26.933933 2015] [core:notice] [pid 14556:tid 140735202668544] AH00094: Command line: '/opt/apache-trunk/bin/httpd -d /Users/sei/projects/httpd/test/framework/trunk/t -f /Users/sei/projects/httpd/test/framework/trunk/t/conf/httpd.conf -D APACHE2 -D PERL_USEITHREADS'
[Tue Nov 17 15:02:26.933942 2015] [core:debug] [pid 14556:tid 140735202668544] log.c(1494): AH02639: Using SO_REUSEPORT: no (1)
[Tue Nov 17 15:02:26.934036 2015] [http2:debug] [pid 14559:tid 140735202668544] h2_conn.c(113): h2_workers: min=25 max=64, mthrpchild=25, thr_limit=64
[Tue Nov 17 15:02:26.934093 2015] [http2:debug] [pid 14559:tid 140735202668544] h2_workers.c(237): h2_workers: starting
[Tue Nov 17 15:02:26.934440 2015] [http2:debug] [pid 14560:tid 140735202668544] h2_conn.c(113): h2_workers: min=25 max=64, mthrpchild=25, thr_limit=64
[Tue Nov 17 15:02:26.934502 2015] [http2:debug] [pid 14560:tid 140735202668544] h2_workers.c(237): h2_workers: starting
[Tue Nov 17 15:02:26.934531 2015] [http2:debug] [pid 14561:tid 140735202668544] h2_conn.c(113): h2_workers: min=25 max=64, mthrpchild=25, thr_limit=64
[Tue Nov 17 15:02:26.934596 2015] [http2:debug] [pid 14561:tid 140735202668544] h2_workers.c(237): h2_workers: starting
[Tue Nov 17 15:02:26.934809 2015] [slotmem_shm:debug] [pid 14559:tid 140735202668544] mod_slotmem_shm.c(495): AH02301: attach looking for /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5.shm
[Tue Nov 17 15:02:26.934828 2015] [slotmem_shm:debug] [pid 14559:tid 140735202668544] mod_slotmem_shm.c(506): AH02302: attach found /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5.shm: 480/7
[Tue Nov 17 15:02:26.934849 2015] [slotmem_shm:debug] [pid 14559:tid 140735202668544] mod_slotmem_shm.c(495): AH02301: attach looking for /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_foo.shm
[Tue Nov 17 15:02:26.934858 2015] [slotmem_shm:debug] [pid 14559:tid 140735202668544] mod_slotmem_shm.c(506): AH02302: attach found /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_foo.shm: 1024/2
[Tue Nov 17 15:02:26.934874 2015] [proxy_balancer:debug] [pid 14559:tid 140735202668544] mod_proxy_balancer.c(120): AH01158: Looking at balancer://foo -> http://localhost:8547 initialized?
[Tue Nov 17 15:02:26.934889 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker http://localhost:8547 shared
[Tue Nov 17 15:02:26.934899 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8547 local
[Tue Nov 17 15:02:26.934965 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.934975 2015] [proxy_balancer:debug] [pid 14559:tid 140735202668544] mod_proxy_balancer.c(120): AH01158: Looking at balancer://foo -> http://localhost:8548 initialized?
[Tue Nov 17 15:02:26.934980 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker http://localhost:8548 shared
[Tue Nov 17 15:02:26.934985 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8548 local
[Tue Nov 17 15:02:26.935008 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.935020 2015] [slotmem_shm:debug] [pid 14559:tid 140735202668544] mod_slotmem_shm.c(495): AH02301: attach looking for /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_pr45434.shm
[Tue Nov 17 15:02:26.935042 2015] [slotmem_shm:debug] [pid 14559:tid 140735202668544] mod_slotmem_shm.c(506): AH02302: attach found /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_pr45434.shm: 1024/1
[Tue Nov 17 15:02:26.935056 2015] [proxy_balancer:debug] [pid 14559:tid 140735202668544] mod_proxy_balancer.c(120): AH01158: Looking at balancer://pr45434 -> http://localhost:8529/modules initialized?
[Tue Nov 17 15:02:26.935062 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker http://localhost:8529/modules shared
[Tue Nov 17 15:02:26.935067 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/modules local
[Tue Nov 17 15:02:26.935086 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.935160 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker http://localhost:8529/ shared
[Tue Nov 17 15:02:26.935173 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.935196 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.935225 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker proxy:reverse shared
[Tue Nov 17 15:02:26.935231 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker proxy:reverse local
[Tue Nov 17 15:02:26.935249 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (*) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.935317 2015] [slotmem_shm:debug] [pid 14560:tid 140735202668544] mod_slotmem_shm.c(495): AH02301: attach looking for /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5.shm
[Tue Nov 17 15:02:26.935339 2015] [slotmem_shm:debug] [pid 14560:tid 140735202668544] mod_slotmem_shm.c(506): AH02302: attach found /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5.shm: 480/7
[Tue Nov 17 15:02:26.935363 2015] [slotmem_shm:debug] [pid 14560:tid 140735202668544] mod_slotmem_shm.c(495): AH02301: attach looking for /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_foo.shm
[Tue Nov 17 15:02:26.935372 2015] [slotmem_shm:debug] [pid 14560:tid 140735202668544] mod_slotmem_shm.c(506): AH02302: attach found /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_foo.shm: 1024/2
[Tue Nov 17 15:02:26.935339 2015] [slotmem_shm:debug] [pid 14561:tid 140735202668544] mod_slotmem_shm.c(495): AH02301: attach looking for /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5.shm
[Tue Nov 17 15:02:26.935410 2015] [slotmem_shm:debug] [pid 14561:tid 140735202668544] mod_slotmem_shm.c(506): AH02302: attach found /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5.shm: 480/7
[Tue Nov 17 15:02:26.935431 2015] [slotmem_shm:debug] [pid 14561:tid 140735202668544] mod_slotmem_shm.c(495): AH02301: attach looking for /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_foo.shm
[Tue Nov 17 15:02:26.935441 2015] [slotmem_shm:debug] [pid 14561:tid 140735202668544] mod_slotmem_shm.c(506): AH02302: attach found /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_foo.shm: 1024/2
[Tue Nov 17 15:02:26.935456 2015] [proxy_balancer:debug] [pid 14561:tid 140735202668544] mod_proxy_balancer.c(120): AH01158: Looking at balancer://foo -> http://localhost:8547 initialized?
[Tue Nov 17 15:02:26.935467 2015] [proxy_balancer:debug] [pid 14561:tid 140735202668544] mod_proxy_balancer.c(120): AH01158: Looking at balancer://foo -> http://localhost:8548 initialized?
[Tue Nov 17 15:02:26.935319 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935474 2015] [slotmem_shm:debug] [pid 14561:tid 140735202668544] mod_slotmem_shm.c(495): AH02301: attach looking for /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_pr45434.shm
[Tue Nov 17 15:02:26.935388 2015] [proxy_balancer:debug] [pid 14560:tid 140735202668544] mod_proxy_balancer.c(120): AH01158: Looking at balancer://foo -> http://localhost:8547 initialized?
[Tue Nov 17 15:02:26.935511 2015] [proxy_balancer:debug] [pid 14560:tid 140735202668544] mod_proxy_balancer.c(120): AH01158: Looking at balancer://foo -> http://localhost:8548 initialized?
[Tue Nov 17 15:02:26.935515 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.935501 2015] [slotmem_shm:debug] [pid 14561:tid 140735202668544] mod_slotmem_shm.c(506): AH02302: attach found /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_pr45434.shm: 1024/1
[Tue Nov 17 15:02:26.935520 2015] [slotmem_shm:debug] [pid 14560:tid 140735202668544] mod_slotmem_shm.c(495): AH02301: attach looking for /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_pr45434.shm
[Tue Nov 17 15:02:26.935542 2015] [slotmem_shm:debug] [pid 14560:tid 140735202668544] mod_slotmem_shm.c(506): AH02302: attach found /Users/sei/projects/httpd/test/framework/trunk/t/logs/slotmem-shm-p1c6d97c5_pr45434.shm: 1024/1
[Tue Nov 17 15:02:26.935545 2015] [proxy_balancer:debug] [pid 14561:tid 140735202668544] mod_proxy_balancer.c(120): AH01158: Looking at balancer://pr45434 -> http://localhost:8529/modules initialized?
[Tue Nov 17 15:02:26.935557 2015] [proxy_balancer:debug] [pid 14560:tid 140735202668544] mod_proxy_balancer.c(120): AH01158: Looking at balancer://pr45434 -> http://localhost:8529/modules initialized?
[Tue Nov 17 15:02:26.935530 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935583 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.935594 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935606 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.935617 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker http://localhost:8529/ shared
[Tue Nov 17 15:02:26.935622 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935638 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.935648 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.935647 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker http://localhost:8529/ shared
[Tue Nov 17 15:02:26.935668 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935686 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.935689 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.935711 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14561 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.935758 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker proxy:reverse shared
[Tue Nov 17 15:02:26.935767 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker proxy:reverse local
[Tue Nov 17 15:02:26.935769 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14560 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.935793 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker proxy:reverse shared
[Tue Nov 17 15:02:26.935797 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker proxy:reverse local
[Tue Nov 17 15:02:26.935797 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.935812 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker http://localhost:8529/ shared
[Tue Nov 17 15:02:26.935821 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14561 for (*) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.935827 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.935831 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935835 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.935840 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935840 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14560 for (*) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.935843 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.935853 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935855 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935860 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.935860 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.935865 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935857 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.935868 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.935879 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935874 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935884 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.935885 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.935873 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935899 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935902 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.935898 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14561 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.935903 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.935913 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker http://localhost:8529/ shared
[Tue Nov 17 15:02:26.935915 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935920 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.935923 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935925 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.935926 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.935926 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.935946 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker https://localhost:8532/ shared
[Tue Nov 17 15:02:26.935956 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14561 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.935957 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker https://localhost:8532/ local
[Tue Nov 17 15:02:26.935970 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.935974 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.935978 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14560 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.935989 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker http://localhost:8529/ shared
[Tue Nov 17 15:02:26.935995 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936001 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.936003 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936011 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.936017 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14561 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936026 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker https://localhost:8532/ shared
[Tue Nov 17 15:02:26.936035 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14560 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936044 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker https://localhost:8532/ local
[Tue Nov 17 15:02:26.936051 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936056 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.936056 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14561 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936070 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936074 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.936079 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936087 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker https://localhost:8532/ shared
[Tue Nov 17 15:02:26.936097 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker https://localhost:8532/ local
[Tue Nov 17 15:02:26.936101 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14560 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936109 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker https://localhost:8532/ shared
[Tue Nov 17 15:02:26.936119 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker https://localhost:8532/ local
[Tue Nov 17 15:02:26.936120 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14561 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936133 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker https://localhost:8532/ shared
[Tue Nov 17 15:02:26.936144 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker https://localhost:8532/ local
[Tue Nov 17 15:02:26.936146 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936156 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936159 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936162 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936165 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936169 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936165 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14560 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936172 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936179 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936189 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14561 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936190 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.936181 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936198 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936210 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14560 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936212 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936207 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936217 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker https://localhost:8532/ shared
[Tue Nov 17 15:02:26.936218 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936226 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker https://localhost:8532/ local
[Tue Nov 17 15:02:26.936228 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker proxy:forward shared
[Tue Nov 17 15:02:26.936235 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker proxy:forward local
[Tue Nov 17 15:02:26.936237 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14560 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936228 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936244 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936248 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936252 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936253 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (*) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936244 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936260 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936265 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936262 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936274 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936279 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936269 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936289 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936256 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936304 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936307 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936303 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker proxy:forward shared
[Tue Nov 17 15:02:26.936314 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936309 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936320 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker proxy:forward local
[Tue Nov 17 15:02:26.936331 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936325 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936342 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936347 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936347 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14561 for (*) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936357 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936365 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936367 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker proxy:forward shared
[Tue Nov 17 15:02:26.936366 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936371 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker proxy:forward local
[Tue Nov 17 15:02:26.936371 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936378 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936392 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14560 for (*) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936388 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936402 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936406 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936411 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936393 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936402 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936420 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936432 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936440 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936426 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936445 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936445 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936451 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936449 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936454 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936462 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936455 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936465 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936471 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936479 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936482 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936485 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936487 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936491 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936491 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936496 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936507 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936513 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936466 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936524 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936504 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936527 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936527 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936539 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936546 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936550 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936556 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936560 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936532 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936565 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936551 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936568 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936567 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936581 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936584 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936573 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936586 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936592 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936590 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936595 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936601 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936596 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936607 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936614 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936633 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936620 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936642 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936646 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936651 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.936637 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936638 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.936661 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936670 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936667 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936676 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936679 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936682 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker http://localhost$1 shared
[Tue Nov 17 15:02:26.936684 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936693 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936698 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936693 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14560 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936701 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936692 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost$1 local
[Tue Nov 17 15:02:26.936711 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker http://localhost$1 shared
[Tue Nov 17 15:02:26.936712 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936727 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.936727 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (localhost$1) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936727 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost$1 local
[Tue Nov 17 15:02:26.936743 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936748 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.936752 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14561 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936762 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker http://localhost$1 shared
[Tue Nov 17 15:02:26.936769 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost$1 local
[Tue Nov 17 15:02:26.936772 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14560 for (localhost$1) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936785 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936789 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.936793 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936803 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker http://localhost:8529/ shared
[Tue Nov 17 15:02:26.936810 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.936812 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14561 for (localhost$1) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936824 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936828 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.936829 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14560 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936843 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker http://localhost:8529/ shared
[Tue Nov 17 15:02:26.936848 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936851 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.936857 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker unix:/tmp/test-ptf.sock|http://localhost shared
[Tue Nov 17 15:02:26.936866 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14561 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936871 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker unix:/tmp/test-ptf.sock|http://localhost local
[Tue Nov 17 15:02:26.936875 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker http://localhost:8529/ shared
[Tue Nov 17 15:02:26.936882 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker http://localhost:8529/ local
[Tue Nov 17 15:02:26.936882 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14560 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936901 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker unix:/tmp/test-ptf.sock|http://localhost shared
[Tue Nov 17 15:02:26.936910 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker unix:/tmp/test-ptf.sock|http://localhost local
[Tue Nov 17 15:02:26.936910 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14559 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936924 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936928 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936934 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936938 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936934 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14561 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936943 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936946 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936948 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1853): AH00925: initializing worker unix:/tmp/test-ptf.sock|http://localhost shared
[Tue Nov 17 15:02:26.936949 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936957 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14560 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936958 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1895): AH00927: initializing worker unix:/tmp/test-ptf.sock|http://localhost local
[Tue Nov 17 15:02:26.936958 2015] [proxy:debug] [pid 14559:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936966 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936979 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1929): AH00930: initialized pool in child 14561 for (localhost) min=0 max=25 smax=25
[Tue Nov 17 15:02:26.936980 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936986 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936993 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.936996 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.936997 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.937002 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.937011 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.937008 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.937017 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.937030 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.937035 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.937039 2015] [proxy:debug] [pid 14561:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.937025 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.937047 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1848): AH00924: worker http://localhost:8529/ shared already initialized
[Tue Nov 17 15:02:26.937050 2015] [proxy:debug] [pid 14560:tid 140735202668544] proxy_util.c(1890): AH00926: worker http://localhost:8529/ local already initialized
[Tue Nov 17 15:02:26.937120 2015] [mpm_event:debug] [pid 14559:tid 123145316253696] event.c(2379): AH02471: start_threads: Using kqueue
[Tue Nov 17 15:02:26.937188 2015] [mpm_event:debug] [pid 14560:tid 123145316253696] event.c(2379): AH02471: start_threads: Using kqueue
[Tue Nov 17 15:02:26.937244 2015] [mpm_event:debug] [pid 14561:tid 123145316253696] event.c(2379): AH02471: start_threads: Using kqueue
[Tue Nov 17 15:02:28.024790 2015] [authz_core:debug] [pid 14561:tid 123145316790272] mod_authz_core.c(834): [client 127.0.0.1:57883] AH01628: authorization result: granted (no directives)
[Tue Nov 17 15:02:28.481836 2015] [ssl:info] [pid 14561:tid 123145317326848] [client 127.0.0.1:57884] AH01964: Connection to child 129 established (server localhost:8534)
[Tue Nov 17 15:02:28.505066 2015] [ssl:info] [pid 14561:tid 123145317326848] [client 127.0.0.1:57884] AH01996: SSL handshake failed: HTTP spoken on HTTPS port; trying to send HTML error page
[Tue Nov 17 15:02:28.505144 2015] [ssl:info] [pid 14561:tid 123145317326848] SSL Library Error: error:1407609C:SSL routines:SSL23_GET_CLIENT_HELLO:http request -- speaking HTTP to HTTPS port!?
[Tue Nov 17 15:02:28.627397 2015] [core:info] [pid 14556:tid 140735202668544] AH00096: removed PID file /Users/sei/projects/httpd/test/framework/trunk/t/logs/httpd.pid (pid=14556)
[Tue Nov 17 15:02:28.627442 2015] [mpm_event:notice] [pid 14556:tid 140735202668544] AH00491: caught SIGTERM, shutting down

--Apple-Mail=_56E6216A-38DE-476F-81C0-8D530E2D98F1
Content-Disposition: attachment;
	filename=ssl_request_log
Content-Type: application/octet-stream;
	name="ssl_request_log"
Content-Transfer-Encoding: 7bit

[17/Nov/2015:15:02:28 +0000] 127.0.0.1 - - "GET /index.html HTTP/1.1" 200 26
[17/Nov/2015:15:02:28 +0000] 127.0.0.1 - - "1.1" 400 -

--Apple-Mail=_56E6216A-38DE-476F-81C0-8D530E2D98F1
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii


> Am 17.11.2015 um 15:50 schrieb Yann Ylavic <ylavic.dev@gmail.com>:
>=20
> On Tue, Nov 17, 2015 at 10:48 AM,  <icing@apache.org> wrote:
>>=20
>> Modified: httpd/httpd/branches/2.4.x/STATUS
>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/STATUS?rev=3D17147=
42&r1=3D1714741&r2=3D1714742&view=3Ddiff
>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>> --- httpd/httpd/branches/2.4.x/STATUS (original)
>> +++ httpd/httpd/branches/2.4.x/STATUS Tue Nov 17 09:48:54 2015
>> @@ -161,6 +161,7 @@ PATCHES PROPOSED TO BACKPORT FROM TRUNK:
>>      2.4.x patch: =
http://people.apache.org/~ylavic/httpd-2.4.x-check_pipeline_blank_lines.pa=
tch
>>                   (trunk works, meant to ease review)
>>      +1: ylavic, minfrin
>> +     icing: test 3 fails for me in t/security/CVE-2005-3357.t
>=20
> I can't reproduce this (with 2.4.x and this patch only)...
> Can you provide the ./TEST -v output and maybe the trace logs?


--Apple-Mail=_56E6216A-38DE-476F-81C0-8D530E2D98F1--

From dev-return-84585-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 15:07:20 2015
Return-Path: <dev-return-84585-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 44113182D1
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 15:07:20 +0000 (UTC)
Received: (qmail 43037 invoked by uid 500); 17 Nov 2015 15:07:19 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 42968 invoked by uid 500); 17 Nov 2015 15:07:19 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 42958 invoked by uid 99); 17 Nov 2015 15:07:19 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 15:07:19 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id BE8D01A1043
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 15:07:18 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 238stg_MOMZz for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 15:07:04 +0000 (UTC)
Received: from resqmta-po-04v.sys.comcast.net (resqmta-po-04v.sys.comcast.net [96.114.154.163])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 6535920271
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 15:07:03 +0000 (UTC)
Received: from resomta-po-16v.sys.comcast.net ([96.114.154.240])
	by resqmta-po-04v.sys.comcast.net with comcast
	id if6M1r0025BUCh401f6vy3; Tue, 17 Nov 2015 15:06:55 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-16v.sys.comcast.net with comcast
	id if6v1r0022U0RYt01f6vht; Tue, 17 Nov 2015 15:06:55 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: 2.4.18 backporting
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <9C3DA6EF-0AAB-496B-B502-0CFDAAB89F13@greenbytes.de>
Date: Tue, 17 Nov 2015 10:06:54 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <BF3A59FA-C287-4C32-A41B-240599D55829@jaguNET.com>
References: <DCA25590-E588-4AD5-8B68-6E473764F773@greenbytes.de> <D9EF2A21-F446-4DE2-A1C4-A22F2D0BECF6@jaguNET.com> <3D49817D-DD89-4D8E-B7C3-257D3FF7D1C8@jaguNET.com> <9C3DA6EF-0AAB-496B-B502-0CFDAAB89F13@greenbytes.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1447772815;
	bh=zcranAFalsJ7bL4/6h9G406kz9Z1/YspTVPAeImJ2v0=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=JGywzFz1TLLKTCi3djqGuJjN2RvUHRMBC/8ybJO5v0LjvNdO0BdoU9peBcxcPUnda
	 DlOHzVMlpwd331su7z2xC8qf0eX8U+s6ipn5tA7t08w3GgB55VrOgpJLEBeJTdMVko
	 RL9FmG5F0Pj8qe+4IoElbpmcHmEhsiHc/R13ZmAXQ92tQ8LtGIGrYcS11/SqrzWzBs
	 aaf9pmFoyYJeZcGHn+u9acLvFw1q50xjRwJxOWggTqBucgTQ94vJoUcbcoO/mZ+etV
	 tTJhnUKLd/KMGzpxs/XjHIy40LLb3qn1mYYjXpf+xeN/XzvVDBiNuL0+pYNx5tGUih
	 agGbBDShn/d3Q==

I am still 10.10 but w/ Xcode 7.1.1


<jimsys:stable/httpd-test/framework> % perl -V
Summary of my perl5 (revision 5 version 20 subversion 2) configuration:

  Platform:
    osname=3Ddarwin, osvers=3D14.4.0, =
archname=3Ddarwin-thread-multi-2level
    uname=3D'darwin jimsys.local 14.4.0 darwin kernel version 14.4.0: =
thu may 28 11:35:04 pdt 2015; root:xnu-2782.30.5~1release_x86_64 x86_64 =
'
    config_args=3D'-des -Duseithreads -Dusemultiplicity=3Dy -Duseshrplib =
-Dprefix=3D/usr/local2 -Dvendorprefix=3D/usr/local2'
    hint=3Drecommended, useposix=3Dtrue, d_sigaction=3Ddefine
    useithreads=3Ddefine, usemultiplicity=3Ddefine
    use64bitint=3Ddefine, use64bitall=3Ddefine, uselongdouble=3Dundef
    usemymalloc=3Dn, bincompat5005=3Dundef
  Compiler:
    cc=3D'cc', ccflags =3D'-fno-common -DPERL_DARWIN =
-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include =
-I/opt/local/include',
    optimize=3D'-O3',
    cppflags=3D'-fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe =
-fstack-protector -I/usr/local/include -I/opt/local/include'
    ccversion=3D'', gccversion=3D'4.2.1 Compatible Apple LLVM 6.1.0 =
(clang-602.0.53)', gccosandvers=3D''
    intsize=3D4, longsize=3D8, ptrsize=3D8, doublesize=3D8, =
byteorder=3D12345678
    d_longlong=3Ddefine, longlongsize=3D8, d_longdbl=3Ddefine, =
longdblsize=3D16
    ivtype=3D'long', ivsize=3D8, nvtype=3D'double', nvsize=3D8, =
Off_t=3D'off_t', lseeksize=3D8
    alignbytes=3D8, prototype=3Ddefine
  Linker and Libraries:
    ld=3D'env MACOSX_DEPLOYMENT_TARGET=3D10.3 cc', ldflags =3D' =
-fstack-protector -L/usr/local/lib -L/opt/local/lib'
    libpth=3D/usr/local/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/bin/../lib/clang/6.1.0/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/lib /usr/lib /opt/local/lib
    libs=3D-lgdbm -ldbm -ldl -lm -lutil -lc
    perllibs=3D-ldl -lm -lutil -lc
    libc=3D, so=3Ddylib, useshrplib=3Dtrue, libperl=3Dlibperl.dylib
    gnulibc_version=3D''
  Dynamic Linking:
    dlsrc=3Ddl_dlopen.xs, dlext=3Dbundle, d_dlsymun=3Dundef, ccdlflags=3D'=
 '
    cccdlflags=3D' ', lddlflags=3D' -bundle -undefined dynamic_lookup =
-L/usr/local/lib -L/opt/local/lib -fstack-protector'

> On Nov 17, 2015, at 9:59 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>=20
> Hmm, what perl version is that? Works on my OS X (El 10.11) with perl =
-v:
>=20
> This is perl 5, version 18, subversion 2 (v5.18.2) built for =
darwin-thread-multi-2level
> (with 2 registered patches, see perl -V for more detail)
>=20
> //Stefan
>=20
>> Am 17.11.2015 um 15:44 schrieb Jim Jagielski <jim@jaguNET.com>:
>>=20
>> Doing a quick tst I get:
>>=20
>> t/modules/http2.t .. push on reference is experimental at =
t/modules/http2.t line 319.
>> Dubious, test returned 255 (wstat 65280, 0xff00)
>> No subtests run
>>=20
>> Test Summary Report
>> -------------------
>> t/modules/http2.t (Wstat: 65280 Tests: 0 Failed: 0)
>>   Non-zero exit status: 255
>>   Parse errors: No plan found in TAP output
>> Files=3D1, Tests=3D0,  1 wallclock secs ( 0.02 usr  0.01 sys +  0.31 =
cusr  0.06 csys =3D  0.40 CPU)
>> Result: FAIL
>> Failed 1/1 test programs. 0/0 subtests failed.
>>=20
>> This is on OSX
>>=20
>>> On Nov 17, 2015, at 8:12 AM, Jim Jagielski <jim@jaguNET.com> wrote:
>>>=20
>>> I will.
>>>=20
>>>> On Nov 17, 2015, at 7:47 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>=20
>>>> For the 2.4.18 backporting, can I find people here willing to look =
at:
>>>>=20
>>>> *) core/mod_ssl:=20
>>>>  - master conn_rec* addition to conn_rec
>>>>  - minor mmn bump
>>>>  - improved ALPN and Upgrade handling
>>>>  - allowing requests for servers whose TLS configuration is =
compatible
>>>>    to the SNI server ones
>>>>  - disabling TLS renegotiation for slave connections
>>>>  changes are necessary for update modules/http2
>>>>  trunk patch: http://svn.apache.org/r1708107
>>>>               http://svn.apache.org/r1709587
>>>>               http://svn.apache.org/r1709602
>>>>               http://svn.apache.org/r1709995
>>>>               http://svn.apache.org/r1710231
>>>>               http://svn.apache.org/r1710419
>>>>               http://svn.apache.org/r1710572
>>>>               http://svn.apache.org/r1710583
>>>>               + manual addition of "conn_rec *master;"
>>>>  2.4.x patch: =
https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patche=
s/2.4.17-protocols.patch
>>>>  branch mergeable to 2.4.x: =
^/httpd/httpd/branches/2.4.17-protocols-changes
>>>>  +1: icing
>>>>=20
>>>> ? This is needed to backport the current mod_http2. If someone =
could find the time to look at this, please? Thanks!
>>>>=20
>>>> Cheers,
>>>>=20
>>>> Stefan
>>>=20
>>=20
>=20


From dev-return-84586-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 15:16:52 2015
Return-Path: <dev-return-84586-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0624E18350
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 15:16:52 +0000 (UTC)
Received: (qmail 70131 invoked by uid 500); 17 Nov 2015 15:16:51 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 70041 invoked by uid 500); 17 Nov 2015 15:16:51 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 70031 invoked by uid 99); 17 Nov 2015 15:16:51 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 15:16:51 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 2703B18028A
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 15:16:51 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.652
X-Spam-Level:
X-Spam-Status: No, score=0.652 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id zdCLSbRVGzoQ for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 15:16:43 +0000 (UTC)
Received: from resqmta-ch2-12v.sys.comcast.net (resqmta-ch2-12v.sys.comcast.net [69.252.207.44])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 6146843DD4
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 15:16:43 +0000 (UTC)
Received: from resomta-ch2-08v.sys.comcast.net ([69.252.207.104])
	by resqmta-ch2-12v.sys.comcast.net with comcast
	id ifFS1r0012Fh1PH01fGdyc; Tue, 17 Nov 2015 15:16:37 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-08v.sys.comcast.net with comcast
	id ifGc1r00f2U0RYt01fGd1Y; Tue, 17 Nov 2015 15:16:37 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: 2.4.18 backporting
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <BF3A59FA-C287-4C32-A41B-240599D55829@jaguNET.com>
Date: Tue, 17 Nov 2015 10:16:36 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <D128BC98-126E-4C3F-A9EE-1501D9522670@jaguNET.com>
References: <DCA25590-E588-4AD5-8B68-6E473764F773@greenbytes.de> <D9EF2A21-F446-4DE2-A1C4-A22F2D0BECF6@jaguNET.com> <3D49817D-DD89-4D8E-B7C3-257D3FF7D1C8@jaguNET.com> <9C3DA6EF-0AAB-496B-B502-0CFDAAB89F13@greenbytes.de> <BF3A59FA-C287-4C32-A41B-240599D55829@jaguNET.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1447773397;
	bh=/kCVW0SAUz3wPLh6lpFRnaK9l04IA6isGgWR6cT474Q=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=McPWKkMBTeXL+V/T/0/krOiXg72hxvWChLna68fmuABKXujoKHdfhwY9B5F//MS09
	 xPYK5MTx3ITKPcohxpz7qp+np1dLQlZ2QcJwjcCyEek1edJJcV8mfZy+cPD5c1Pufa
	 RDbZrAgR1h4KWsX1CFGTIIIHVnoa8hvDLaJxb3ZAIL2CoJXfas2pnhOl4fzrYD8LYj
	 g2K9ye7dY8kJl/4csHOpiHfta0nXUYOKFCpP5lbcjQmk8SK/0iYE7bOyXBIzkN6LvP
	 fhyT7ZFQ1RZTFnnPbNPtKrebCRhRtmAU0U9zHW2PUmemskHbWZ4l2qh+AJeJPcOnpF
	 tngrMp9Ju3SjQ==

using perl 5.18 I get:

t/modules/http2.t ................... 1/51
# Failed test 34 in t/modules/http2.t at line 242 fail #4
# Failed test 50 in t/modules/http2.t at line 194 fail #6
# Failed test 51 in t/modules/http2.t at line 194 fail #7

# testing : content comparision
# expected: '<html><body>
# <h2>Hello World!</h2>
# TLS_SNI=3D"localhost"
# </body></html>
# '
# received: '<html><body>
# <h2>Hello World!</h2>
# TLS_SNI=3D""
# </body></html>
# '
not ok 34

test case: VHOST001, expect 404 or 421 (using Host:): GET =
https://localhost:8544/misdirected
# testing : GET https://localhost:8544/misdirected
# expected: 421
# received: '404'
not ok 50
test case: VHOST002, expect 404 or 421 (using :authority): GET =
https://localhost:8544/misdirected
# Failed test 50 in t/modules/http2.t at line 194 fail #6
# testing : GET https://localhost:8544/misdirected
# expected: 421
# received: '404'
not ok 51
# Failed test 51 in t/modules/http2.t at line 194 fail #7=

From dev-return-84587-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 15:17:19 2015
Return-Path: <dev-return-84587-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7784A1835C
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 15:17:19 +0000 (UTC)
Received: (qmail 71918 invoked by uid 500); 17 Nov 2015 15:17:19 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 71853 invoked by uid 500); 17 Nov 2015 15:17:19 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 71843 invoked by uid 99); 17 Nov 2015 15:17:19 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 15:17:19 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 8B860C05AD
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 15:17:18 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.109
X-Spam-Level:
X-Spam-Status: No, score=-0.109 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id QOLvgXhKy11q for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 15:17:05 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 3DC7D43DD4
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 15:17:05 +0000 (UTC)
Received: from [192.168.1.134] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 48AE315A0531
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 16:17:04 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447773424; bh=X1L3zyaY3krKWHplGufxC3GZY5xUMzYRcScoaLGCfjY=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=WH9fs/HOCOKeQ147aptYxmLiCoYCe0aV0KmbMg76EGYg+eHADN8wV1+ZHwsCASTqK
	 2c2BCgX69lGR+TaFaXz7uISsqoRKJae7Qc6dsLa2CZ5lP5B8A7FsBcQhK/nGtc+I2B
	 +ob81GXGmtF+wYSancl4jQRmaI/fwCbMhCUUw2VA=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: 2.4.18 backporting
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <BF3A59FA-C287-4C32-A41B-240599D55829@jaguNET.com>
Date: Tue, 17 Nov 2015 16:17:04 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <E095C163-F046-4C9C-A912-5183E710817B@greenbytes.de>
References: <DCA25590-E588-4AD5-8B68-6E473764F773@greenbytes.de> <D9EF2A21-F446-4DE2-A1C4-A22F2D0BECF6@jaguNET.com> <3D49817D-DD89-4D8E-B7C3-257D3FF7D1C8@jaguNET.com> <9C3DA6EF-0AAB-496B-B502-0CFDAAB89F13@greenbytes.de> <BF3A59FA-C287-4C32-A41B-240599D55829@jaguNET.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

OK, the change is from October 19th by me. I changed the test suite to =
have
the test run in deterministic order. $r is a references to an array of =
tests
and, depending on module availability, I push more elements to $r.

I just changed it to push @$r, { ... }

Please give it a try.

> Am 17.11.2015 um 16:06 schrieb Jim Jagielski <jim@jaguNET.com>:
>=20
> I am still 10.10 but w/ Xcode 7.1.1
>=20
>=20
> <jimsys:stable/httpd-test/framework> % perl -V
> Summary of my perl5 (revision 5 version 20 subversion 2) =
configuration:
>=20
>  Platform:
>    osname=3Ddarwin, osvers=3D14.4.0, =
archname=3Ddarwin-thread-multi-2level
>    uname=3D'darwin jimsys.local 14.4.0 darwin kernel version 14.4.0: =
thu may 28 11:35:04 pdt 2015; root:xnu-2782.30.5~1release_x86_64 x86_64 =
'
>    config_args=3D'-des -Duseithreads -Dusemultiplicity=3Dy =
-Duseshrplib -Dprefix=3D/usr/local2 -Dvendorprefix=3D/usr/local2'
>    hint=3Drecommended, useposix=3Dtrue, d_sigaction=3Ddefine
>    useithreads=3Ddefine, usemultiplicity=3Ddefine
>    use64bitint=3Ddefine, use64bitall=3Ddefine, uselongdouble=3Dundef
>    usemymalloc=3Dn, bincompat5005=3Dundef
>  Compiler:
>    cc=3D'cc', ccflags =3D'-fno-common -DPERL_DARWIN =
-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include =
-I/opt/local/include',
>    optimize=3D'-O3',
>    cppflags=3D'-fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe =
-fstack-protector -I/usr/local/include -I/opt/local/include'
>    ccversion=3D'', gccversion=3D'4.2.1 Compatible Apple LLVM 6.1.0 =
(clang-602.0.53)', gccosandvers=3D''
>    intsize=3D4, longsize=3D8, ptrsize=3D8, doublesize=3D8, =
byteorder=3D12345678
>    d_longlong=3Ddefine, longlongsize=3D8, d_longdbl=3Ddefine, =
longdblsize=3D16
>    ivtype=3D'long', ivsize=3D8, nvtype=3D'double', nvsize=3D8, =
Off_t=3D'off_t', lseeksize=3D8
>    alignbytes=3D8, prototype=3Ddefine
>  Linker and Libraries:
>    ld=3D'env MACOSX_DEPLOYMENT_TARGET=3D10.3 cc', ldflags =3D' =
-fstack-protector -L/usr/local/lib -L/opt/local/lib'
>    libpth=3D/usr/local/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/bin/../lib/clang/6.1.0/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/lib /usr/lib /opt/local/lib
>    libs=3D-lgdbm -ldbm -ldl -lm -lutil -lc
>    perllibs=3D-ldl -lm -lutil -lc
>    libc=3D, so=3Ddylib, useshrplib=3Dtrue, libperl=3Dlibperl.dylib
>    gnulibc_version=3D''
>  Dynamic Linking:
>    dlsrc=3Ddl_dlopen.xs, dlext=3Dbundle, d_dlsymun=3Dundef, =
ccdlflags=3D' '
>    cccdlflags=3D' ', lddlflags=3D' -bundle -undefined dynamic_lookup =
-L/usr/local/lib -L/opt/local/lib -fstack-protector'
>=20
>> On Nov 17, 2015, at 9:59 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>=20
>> Hmm, what perl version is that? Works on my OS X (El 10.11) with perl =
-v:
>>=20
>> This is perl 5, version 18, subversion 2 (v5.18.2) built for =
darwin-thread-multi-2level
>> (with 2 registered patches, see perl -V for more detail)
>>=20
>> //Stefan
>>=20
>>> Am 17.11.2015 um 15:44 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>=20
>>> Doing a quick tst I get:
>>>=20
>>> t/modules/http2.t .. push on reference is experimental at =
t/modules/http2.t line 319.
>>> Dubious, test returned 255 (wstat 65280, 0xff00)
>>> No subtests run
>>>=20
>>> Test Summary Report
>>> -------------------
>>> t/modules/http2.t (Wstat: 65280 Tests: 0 Failed: 0)
>>>  Non-zero exit status: 255
>>>  Parse errors: No plan found in TAP output
>>> Files=3D1, Tests=3D0,  1 wallclock secs ( 0.02 usr  0.01 sys +  0.31 =
cusr  0.06 csys =3D  0.40 CPU)
>>> Result: FAIL
>>> Failed 1/1 test programs. 0/0 subtests failed.
>>>=20
>>> This is on OSX
>>>=20
>>>> On Nov 17, 2015, at 8:12 AM, Jim Jagielski <jim@jaguNET.com> wrote:
>>>>=20
>>>> I will.
>>>>=20
>>>>> On Nov 17, 2015, at 7:47 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>=20
>>>>> For the 2.4.18 backporting, can I find people here willing to look =
at:
>>>>>=20
>>>>> *) core/mod_ssl:=20
>>>>> - master conn_rec* addition to conn_rec
>>>>> - minor mmn bump
>>>>> - improved ALPN and Upgrade handling
>>>>> - allowing requests for servers whose TLS configuration is =
compatible
>>>>>   to the SNI server ones
>>>>> - disabling TLS renegotiation for slave connections
>>>>> changes are necessary for update modules/http2
>>>>> trunk patch: http://svn.apache.org/r1708107
>>>>>              http://svn.apache.org/r1709587
>>>>>              http://svn.apache.org/r1709602
>>>>>              http://svn.apache.org/r1709995
>>>>>              http://svn.apache.org/r1710231
>>>>>              http://svn.apache.org/r1710419
>>>>>              http://svn.apache.org/r1710572
>>>>>              http://svn.apache.org/r1710583
>>>>>              + manual addition of "conn_rec *master;"
>>>>> 2.4.x patch: =
https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patche=
s/2.4.17-protocols.patch
>>>>> branch mergeable to 2.4.x: =
^/httpd/httpd/branches/2.4.17-protocols-changes
>>>>> +1: icing
>>>>>=20
>>>>> ? This is needed to backport the current mod_http2. If someone =
could find the time to look at this, please? Thanks!
>>>>>=20
>>>>> Cheers,
>>>>>=20
>>>>> Stefan
>>>>=20
>>>=20
>>=20
>=20


From dev-return-84588-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 15:30:43 2015
Return-Path: <dev-return-84588-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0B745183CD
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 15:30:43 +0000 (UTC)
Received: (qmail 9455 invoked by uid 500); 17 Nov 2015 15:30:42 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 9377 invoked by uid 500); 17 Nov 2015 15:30:42 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 9367 invoked by uid 99); 17 Nov 2015 15:30:42 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 15:30:42 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 20F7AC2E41
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 15:30:42 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id cmx5w2Tl846k for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 15:30:30 +0000 (UTC)
Received: from resqmta-ch2-07v.sys.comcast.net (resqmta-ch2-07v.sys.comcast.net [69.252.207.39])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 9DA0B20384
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 15:30:30 +0000 (UTC)
Received: from resomta-ch2-02v.sys.comcast.net ([69.252.207.98])
	by resqmta-ch2-07v.sys.comcast.net with comcast
	id ifVy1r00G27uzMh01fWWwx; Tue, 17 Nov 2015 15:30:30 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-02v.sys.comcast.net with comcast
	id ifWV1r00P2U0RYt01fWVZE; Tue, 17 Nov 2015 15:30:29 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: 2.4.18 backporting
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <E095C163-F046-4C9C-A912-5183E710817B@greenbytes.de>
Date: Tue, 17 Nov 2015 10:30:29 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <47BE49D3-48FB-4054-AFB9-3460015F84E7@jaguNET.com>
References: <DCA25590-E588-4AD5-8B68-6E473764F773@greenbytes.de> <D9EF2A21-F446-4DE2-A1C4-A22F2D0BECF6@jaguNET.com> <3D49817D-DD89-4D8E-B7C3-257D3FF7D1C8@jaguNET.com> <9C3DA6EF-0AAB-496B-B502-0CFDAAB89F13@greenbytes.de> <BF3A59FA-C287-4C32-A41B-240599D55829@jaguNET.com> <E095C163-F046-4C9C-A912-5183E710817B@greenbytes.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1447774230;
	bh=U/iC/6zFG8gtD7/toOprtOLP//tiidEk8Guie3zBdKs=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=eaJKVH0u7Gqjv/j3DDVsuJmekx0xfHi90semky/fDj7xMabclDU5jVU1JcdGRlCNw
	 lBOzL74o4JswVNjsbfeyZNKJogAjcbTVZqNLbteBK2fw4ObxtiDzbtJZSwi/nqDT4q
	 5wMXomtDfbWc1ZmMWUlJIj2iZxaI+IybAw2h8dRArzkhMae8KlOywHM8keMxAh51a4
	 qNNGdqr8uWusxQ7aa6grr2igYgbrMYCemIA2GUNwcHZUHkhL1WNPlYQvZlsbEMezPj
	 lJyCwdG+4Bjr6FIS4tySrYK4AToKHsuaq9bp8+VraQyR901kh71nSbvQAQXWteI5D/
	 5f6IVFaYD76Ng==

Still:

t/modules/http2.t .. 26/51
# Failed test 34 in t/modules/http2.t at line 242 fail #4
 # testing : content comparision
 # expected: '<html><body>
 # <h2>Hello World!</h2>
 # TLS_SNI=3D"localhost"
 # </body></html>
 # '
 # received: '<html><body>
 # <h2>Hello World!</h2>
 # TLS_SNI=3D""
 # </body></html>
 # '
 not ok 34

# Failed test 50 in t/modules/http2.t at line 194 fail #6
 test case: VHOST001, expect 404 or 421 (using Host:): GET =
https://localhost:8544/misdirected
 # testing : GET https://localhost:8544/misdirected
 # expected: 421
 # received: '404'
 not ok 50

# Failed test 51 in t/modules/http2.t at line 194 fail #7
 test case: VHOST002, expect 404 or 421 (using :authority): GET =
https://localhost:8544/misdirected
 # Failed test 50 in t/modules/http2.t at line 194 fail #6
 # testing : GET https://localhost:8544/misdirected
 # expected: 421
 # received: '404'
 not ok 51

t/modules/http2.t .. Failed 3/51 subtests


> On Nov 17, 2015, at 10:17 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>=20
> OK, the change is from October 19th by me. I changed the test suite to =
have
> the test run in deterministic order. $r is a references to an array of =
tests
> and, depending on module availability, I push more elements to $r.
>=20
> I just changed it to push @$r, { ... }
>=20
> Please give it a try.
>=20
>> Am 17.11.2015 um 16:06 schrieb Jim Jagielski <jim@jaguNET.com>:
>>=20
>> I am still 10.10 but w/ Xcode 7.1.1
>>=20
>>=20
>> <jimsys:stable/httpd-test/framework> % perl -V
>> Summary of my perl5 (revision 5 version 20 subversion 2) =
configuration:
>>=20
>> Platform:
>>   osname=3Ddarwin, osvers=3D14.4.0, =
archname=3Ddarwin-thread-multi-2level
>>   uname=3D'darwin jimsys.local 14.4.0 darwin kernel version 14.4.0: =
thu may 28 11:35:04 pdt 2015; root:xnu-2782.30.5~1release_x86_64 x86_64 =
'
>>   config_args=3D'-des -Duseithreads -Dusemultiplicity=3Dy =
-Duseshrplib -Dprefix=3D/usr/local2 -Dvendorprefix=3D/usr/local2'
>>   hint=3Drecommended, useposix=3Dtrue, d_sigaction=3Ddefine
>>   useithreads=3Ddefine, usemultiplicity=3Ddefine
>>   use64bitint=3Ddefine, use64bitall=3Ddefine, uselongdouble=3Dundef
>>   usemymalloc=3Dn, bincompat5005=3Dundef
>> Compiler:
>>   cc=3D'cc', ccflags =3D'-fno-common -DPERL_DARWIN =
-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include =
-I/opt/local/include',
>>   optimize=3D'-O3',
>>   cppflags=3D'-fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe =
-fstack-protector -I/usr/local/include -I/opt/local/include'
>>   ccversion=3D'', gccversion=3D'4.2.1 Compatible Apple LLVM 6.1.0 =
(clang-602.0.53)', gccosandvers=3D''
>>   intsize=3D4, longsize=3D8, ptrsize=3D8, doublesize=3D8, =
byteorder=3D12345678
>>   d_longlong=3Ddefine, longlongsize=3D8, d_longdbl=3Ddefine, =
longdblsize=3D16
>>   ivtype=3D'long', ivsize=3D8, nvtype=3D'double', nvsize=3D8, =
Off_t=3D'off_t', lseeksize=3D8
>>   alignbytes=3D8, prototype=3Ddefine
>> Linker and Libraries:
>>   ld=3D'env MACOSX_DEPLOYMENT_TARGET=3D10.3 cc', ldflags =3D' =
-fstack-protector -L/usr/local/lib -L/opt/local/lib'
>>   libpth=3D/usr/local/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/bin/../lib/clang/6.1.0/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/lib /usr/lib /opt/local/lib
>>   libs=3D-lgdbm -ldbm -ldl -lm -lutil -lc
>>   perllibs=3D-ldl -lm -lutil -lc
>>   libc=3D, so=3Ddylib, useshrplib=3Dtrue, libperl=3Dlibperl.dylib
>>   gnulibc_version=3D''
>> Dynamic Linking:
>>   dlsrc=3Ddl_dlopen.xs, dlext=3Dbundle, d_dlsymun=3Dundef, =
ccdlflags=3D' '
>>   cccdlflags=3D' ', lddlflags=3D' -bundle -undefined dynamic_lookup =
-L/usr/local/lib -L/opt/local/lib -fstack-protector'
>>=20
>>> On Nov 17, 2015, at 9:59 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>=20
>>> Hmm, what perl version is that? Works on my OS X (El 10.11) with =
perl -v:
>>>=20
>>> This is perl 5, version 18, subversion 2 (v5.18.2) built for =
darwin-thread-multi-2level
>>> (with 2 registered patches, see perl -V for more detail)
>>>=20
>>> //Stefan
>>>=20
>>>> Am 17.11.2015 um 15:44 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>>=20
>>>> Doing a quick tst I get:
>>>>=20
>>>> t/modules/http2.t .. push on reference is experimental at =
t/modules/http2.t line 319.
>>>> Dubious, test returned 255 (wstat 65280, 0xff00)
>>>> No subtests run
>>>>=20
>>>> Test Summary Report
>>>> -------------------
>>>> t/modules/http2.t (Wstat: 65280 Tests: 0 Failed: 0)
>>>> Non-zero exit status: 255
>>>> Parse errors: No plan found in TAP output
>>>> Files=3D1, Tests=3D0,  1 wallclock secs ( 0.02 usr  0.01 sys +  =
0.31 cusr  0.06 csys =3D  0.40 CPU)
>>>> Result: FAIL
>>>> Failed 1/1 test programs. 0/0 subtests failed.
>>>>=20
>>>> This is on OSX
>>>>=20
>>>>> On Nov 17, 2015, at 8:12 AM, Jim Jagielski <jim@jaguNET.com> =
wrote:
>>>>>=20
>>>>> I will.
>>>>>=20
>>>>>> On Nov 17, 2015, at 7:47 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>>=20
>>>>>> For the 2.4.18 backporting, can I find people here willing to =
look at:
>>>>>>=20
>>>>>> *) core/mod_ssl:=20
>>>>>> - master conn_rec* addition to conn_rec
>>>>>> - minor mmn bump
>>>>>> - improved ALPN and Upgrade handling
>>>>>> - allowing requests for servers whose TLS configuration is =
compatible
>>>>>>  to the SNI server ones
>>>>>> - disabling TLS renegotiation for slave connections
>>>>>> changes are necessary for update modules/http2
>>>>>> trunk patch: http://svn.apache.org/r1708107
>>>>>>             http://svn.apache.org/r1709587
>>>>>>             http://svn.apache.org/r1709602
>>>>>>             http://svn.apache.org/r1709995
>>>>>>             http://svn.apache.org/r1710231
>>>>>>             http://svn.apache.org/r1710419
>>>>>>             http://svn.apache.org/r1710572
>>>>>>             http://svn.apache.org/r1710583
>>>>>>             + manual addition of "conn_rec *master;"
>>>>>> 2.4.x patch: =
https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patche=
s/2.4.17-protocols.patch
>>>>>> branch mergeable to 2.4.x: =
^/httpd/httpd/branches/2.4.17-protocols-changes
>>>>>> +1: icing
>>>>>>=20
>>>>>> ? This is needed to backport the current mod_http2. If someone =
could find the time to look at this, please? Thanks!
>>>>>>=20
>>>>>> Cheers,
>>>>>>=20
>>>>>> Stefan
>>>>>=20
>>>>=20
>>>=20
>>=20
>=20


From dev-return-84589-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 15:43:35 2015
Return-Path: <dev-return-84589-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1075018452
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 15:43:35 +0000 (UTC)
Received: (qmail 31705 invoked by uid 500); 17 Nov 2015 15:43:29 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 31600 invoked by uid 500); 17 Nov 2015 15:43:29 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 31590 invoked by uid 99); 17 Nov 2015 15:43:29 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 15:43:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 008E4C5ADE
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 15:43:29 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.682
X-Spam-Level:
X-Spam-Status: No, score=-0.682 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RP_MATCHES_RCVD=-0.582, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id Kprjuy4p-MPM for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 15:43:19 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 18AEA441AF
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 15:43:19 +0000 (UTC)
Received: from [192.168.1.134] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 124CF15A0531
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 16:43:18 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447774998; bh=SIp8M0Dk3MXaSdBHyq2947JnjTh4poVySdqA9m3tKL4=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=gUXYnxWOre+L8dKwXF6WpY4gAsC9OW7RLKW3msjnlYfeW3mUFKsyCbcEYELMOYUfs
	 tZsp8G2c2n2H8tMU7PhcsMS0DjVBuEtMH7hpsrfQrV3BuXEJngROuf65X1ItglLkp0
	 GKh5DjQQakJLZ+yYr9I0WFgU1nm0WWrHwRIhHQzw=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: 2.4.18 backporting
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <47BE49D3-48FB-4054-AFB9-3460015F84E7@jaguNET.com>
Date: Tue, 17 Nov 2015 16:43:17 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <04A2D4C6-894B-443E-B4EB-3586626247B9@greenbytes.de>
References: <DCA25590-E588-4AD5-8B68-6E473764F773@greenbytes.de> <D9EF2A21-F446-4DE2-A1C4-A22F2D0BECF6@jaguNET.com> <3D49817D-DD89-4D8E-B7C3-257D3FF7D1C8@jaguNET.com> <9C3DA6EF-0AAB-496B-B502-0CFDAAB89F13@greenbytes.de> <BF3A59FA-C287-4C32-A41B-240599D55829@jaguNET.com> <E095C163-F046-4C9C-A912-5183E710817B@greenbytes.de> <47BE49D3-48FB-4054-AFB9-3460015F84E7@jaguNET.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

OK, the problem on OS X is that the default openssl is 0.98 which does =
not do SNI.

I try to detect this in lines 14-17 by:
my $alpn_available =3D exists &Net::SSLeay::CTX_set_alpn_protos;
if ($alpn_available) {
    $total_tests +=3D $vhost_suite;
}

and change the test case expectations accordingly. That seems to fail on =
your system. The test case thinks ALPN+SNI are available and wants to =
see "localhost" in the response, but it is not used.

Unnecessary to say that the detection (and therefore the tests) work on =
my OS X installation - also before 10.11.

Hmmm....are there SNI test cases for mod_ssl where I could see how it =
detects it?


> Am 17.11.2015 um 16:30 schrieb Jim Jagielski <jim@jaguNET.com>:
>=20
> Still:
>=20
> t/modules/http2.t .. 26/51
> # Failed test 34 in t/modules/http2.t at line 242 fail #4
> # testing : content comparision
> # expected: '<html><body>
> # <h2>Hello World!</h2>
> # TLS_SNI=3D"localhost"
> # </body></html>
> # '
> # received: '<html><body>
> # <h2>Hello World!</h2>
> # TLS_SNI=3D""
> # </body></html>
> # '
> not ok 34
>=20
> # Failed test 50 in t/modules/http2.t at line 194 fail #6
> test case: VHOST001, expect 404 or 421 (using Host:): GET =
https://localhost:8544/misdirected
> # testing : GET https://localhost:8544/misdirected
> # expected: 421
> # received: '404'
> not ok 50
>=20
> # Failed test 51 in t/modules/http2.t at line 194 fail #7
> test case: VHOST002, expect 404 or 421 (using :authority): GET =
https://localhost:8544/misdirected
> # Failed test 50 in t/modules/http2.t at line 194 fail #6
> # testing : GET https://localhost:8544/misdirected
> # expected: 421
> # received: '404'
> not ok 51
>=20
> t/modules/http2.t .. Failed 3/51 subtests
>=20
>=20
>> On Nov 17, 2015, at 10:17 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>=20
>> OK, the change is from October 19th by me. I changed the test suite =
to have
>> the test run in deterministic order. $r is a references to an array =
of tests
>> and, depending on module availability, I push more elements to $r.
>>=20
>> I just changed it to push @$r, { ... }
>>=20
>> Please give it a try.
>>=20
>>> Am 17.11.2015 um 16:06 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>=20
>>> I am still 10.10 but w/ Xcode 7.1.1
>>>=20
>>>=20
>>> <jimsys:stable/httpd-test/framework> % perl -V
>>> Summary of my perl5 (revision 5 version 20 subversion 2) =
configuration:
>>>=20
>>> Platform:
>>>  osname=3Ddarwin, osvers=3D14.4.0, =
archname=3Ddarwin-thread-multi-2level
>>>  uname=3D'darwin jimsys.local 14.4.0 darwin kernel version 14.4.0: =
thu may 28 11:35:04 pdt 2015; root:xnu-2782.30.5~1release_x86_64 x86_64 =
'
>>>  config_args=3D'-des -Duseithreads -Dusemultiplicity=3Dy =
-Duseshrplib -Dprefix=3D/usr/local2 -Dvendorprefix=3D/usr/local2'
>>>  hint=3Drecommended, useposix=3Dtrue, d_sigaction=3Ddefine
>>>  useithreads=3Ddefine, usemultiplicity=3Ddefine
>>>  use64bitint=3Ddefine, use64bitall=3Ddefine, uselongdouble=3Dundef
>>>  usemymalloc=3Dn, bincompat5005=3Dundef
>>> Compiler:
>>>  cc=3D'cc', ccflags =3D'-fno-common -DPERL_DARWIN =
-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include =
-I/opt/local/include',
>>>  optimize=3D'-O3',
>>>  cppflags=3D'-fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe =
-fstack-protector -I/usr/local/include -I/opt/local/include'
>>>  ccversion=3D'', gccversion=3D'4.2.1 Compatible Apple LLVM 6.1.0 =
(clang-602.0.53)', gccosandvers=3D''
>>>  intsize=3D4, longsize=3D8, ptrsize=3D8, doublesize=3D8, =
byteorder=3D12345678
>>>  d_longlong=3Ddefine, longlongsize=3D8, d_longdbl=3Ddefine, =
longdblsize=3D16
>>>  ivtype=3D'long', ivsize=3D8, nvtype=3D'double', nvsize=3D8, =
Off_t=3D'off_t', lseeksize=3D8
>>>  alignbytes=3D8, prototype=3Ddefine
>>> Linker and Libraries:
>>>  ld=3D'env MACOSX_DEPLOYMENT_TARGET=3D10.3 cc', ldflags =3D' =
-fstack-protector -L/usr/local/lib -L/opt/local/lib'
>>>  libpth=3D/usr/local/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/bin/../lib/clang/6.1.0/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/lib /usr/lib /opt/local/lib
>>>  libs=3D-lgdbm -ldbm -ldl -lm -lutil -lc
>>>  perllibs=3D-ldl -lm -lutil -lc
>>>  libc=3D, so=3Ddylib, useshrplib=3Dtrue, libperl=3Dlibperl.dylib
>>>  gnulibc_version=3D''
>>> Dynamic Linking:
>>>  dlsrc=3Ddl_dlopen.xs, dlext=3Dbundle, d_dlsymun=3Dundef, =
ccdlflags=3D' '
>>>  cccdlflags=3D' ', lddlflags=3D' -bundle -undefined dynamic_lookup =
-L/usr/local/lib -L/opt/local/lib -fstack-protector'
>>>=20
>>>> On Nov 17, 2015, at 9:59 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>=20
>>>> Hmm, what perl version is that? Works on my OS X (El 10.11) with =
perl -v:
>>>>=20
>>>> This is perl 5, version 18, subversion 2 (v5.18.2) built for =
darwin-thread-multi-2level
>>>> (with 2 registered patches, see perl -V for more detail)
>>>>=20
>>>> //Stefan
>>>>=20
>>>>> Am 17.11.2015 um 15:44 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>>>=20
>>>>> Doing a quick tst I get:
>>>>>=20
>>>>> t/modules/http2.t .. push on reference is experimental at =
t/modules/http2.t line 319.
>>>>> Dubious, test returned 255 (wstat 65280, 0xff00)
>>>>> No subtests run
>>>>>=20
>>>>> Test Summary Report
>>>>> -------------------
>>>>> t/modules/http2.t (Wstat: 65280 Tests: 0 Failed: 0)
>>>>> Non-zero exit status: 255
>>>>> Parse errors: No plan found in TAP output
>>>>> Files=3D1, Tests=3D0,  1 wallclock secs ( 0.02 usr  0.01 sys +  =
0.31 cusr  0.06 csys =3D  0.40 CPU)
>>>>> Result: FAIL
>>>>> Failed 1/1 test programs. 0/0 subtests failed.
>>>>>=20
>>>>> This is on OSX
>>>>>=20
>>>>>> On Nov 17, 2015, at 8:12 AM, Jim Jagielski <jim@jaguNET.com> =
wrote:
>>>>>>=20
>>>>>> I will.
>>>>>>=20
>>>>>>> On Nov 17, 2015, at 7:47 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>>>=20
>>>>>>> For the 2.4.18 backporting, can I find people here willing to =
look at:
>>>>>>>=20
>>>>>>> *) core/mod_ssl:=20
>>>>>>> - master conn_rec* addition to conn_rec
>>>>>>> - minor mmn bump
>>>>>>> - improved ALPN and Upgrade handling
>>>>>>> - allowing requests for servers whose TLS configuration is =
compatible
>>>>>>> to the SNI server ones
>>>>>>> - disabling TLS renegotiation for slave connections
>>>>>>> changes are necessary for update modules/http2
>>>>>>> trunk patch: http://svn.apache.org/r1708107
>>>>>>>            http://svn.apache.org/r1709587
>>>>>>>            http://svn.apache.org/r1709602
>>>>>>>            http://svn.apache.org/r1709995
>>>>>>>            http://svn.apache.org/r1710231
>>>>>>>            http://svn.apache.org/r1710419
>>>>>>>            http://svn.apache.org/r1710572
>>>>>>>            http://svn.apache.org/r1710583
>>>>>>>            + manual addition of "conn_rec *master;"
>>>>>>> 2.4.x patch: =
https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patche=
s/2.4.17-protocols.patch
>>>>>>> branch mergeable to 2.4.x: =
^/httpd/httpd/branches/2.4.17-protocols-changes
>>>>>>> +1: icing
>>>>>>>=20
>>>>>>> ? This is needed to backport the current mod_http2. If someone =
could find the time to look at this, please? Thanks!
>>>>>>>=20
>>>>>>> Cheers,
>>>>>>>=20
>>>>>>> Stefan
>>>>>>=20
>>>>>=20
>>>>=20
>>>=20
>>=20
>=20


From dev-return-84590-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 15:51:39 2015
Return-Path: <dev-return-84590-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3AB04184BA
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 15:51:39 +0000 (UTC)
Received: (qmail 49702 invoked by uid 500); 17 Nov 2015 15:51:38 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 49636 invoked by uid 500); 17 Nov 2015 15:51:38 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 49625 invoked by uid 99); 17 Nov 2015 15:51:38 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 15:51:38 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 4972EC059C
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 15:51:38 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id opZIHgLw7LXM for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 15:51:25 +0000 (UTC)
Received: from resqmta-ch2-01v.sys.comcast.net (resqmta-ch2-01v.sys.comcast.net [69.252.207.33])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 0BE3F22F16
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 15:51:24 +0000 (UTC)
Received: from resomta-ch2-08v.sys.comcast.net ([69.252.207.104])
	by resqmta-ch2-01v.sys.comcast.net with comcast
	id ifpr1r0032Fh1PH01frHX8; Tue, 17 Nov 2015 15:51:17 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-08v.sys.comcast.net with comcast
	id ifrH1r00A2U0RYt01frHes; Tue, 17 Nov 2015 15:51:17 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: 2.4.18 backporting
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <04A2D4C6-894B-443E-B4EB-3586626247B9@greenbytes.de>
Date: Tue, 17 Nov 2015 10:51:17 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <C41522BC-3280-467A-B895-E7465D2C6D9E@jaguNET.com>
References: <DCA25590-E588-4AD5-8B68-6E473764F773@greenbytes.de> <D9EF2A21-F446-4DE2-A1C4-A22F2D0BECF6@jaguNET.com> <3D49817D-DD89-4D8E-B7C3-257D3FF7D1C8@jaguNET.com> <9C3DA6EF-0AAB-496B-B502-0CFDAAB89F13@greenbytes.de> <BF3A59FA-C287-4C32-A41B-240599D55829@jaguNET.com> <E095C163-F046-4C9C-A912-5183E710817B@greenbytes.de> <47BE49D3-48FB-4054-AFB9-3460015F84E7@jaguNET.com> <04A2D4C6-894B-443E-B4EB-3586626247B9@greenbytes.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1447775477;
	bh=pyWHlPT1Us8lXd4zaV8eiheUGU0QVmFEHFQ8zlpD8nc=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=GUhUfUKnBdUhP71s3cNiEvCIDjx1DpU7sYAJxQZ0XQPI1LthIGbSJQ9xUgC1chAse
	 WU4abuLzBMWBlPiodGw0801JewIXsV3Q+cj3T7wPy9DCmckhkkbrwHjTbqe0MOESpp
	 byBNDr8u2vQeg9ireb5Rc6FHWs/AzXyaiyghzAjwAwRSrikkL7kudDgTh3lnqBIt7k
	 6P4b0KJe9Csg5Vwl+hBdMVly9P1GJHOoBsfklV+3ZTd8OA8mafzVQ6jxWDjk459oVG
	 Z746iFKJbnTsdiAx2/A4RdFZfiAaTJmKopocSoLXjGB+zSIY7dI3RfOluXtfVCWgU0
	 VOCEcskteYUwQ==

My perl is built against openssl 1.0.2...

> On Nov 17, 2015, at 10:43 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>=20
> OK, the problem on OS X is that the default openssl is 0.98 which does =
not do SNI.
>=20
> I try to detect this in lines 14-17 by:
> my $alpn_available =3D exists &Net::SSLeay::CTX_set_alpn_protos;
> if ($alpn_available) {
>    $total_tests +=3D $vhost_suite;
> }
>=20
> and change the test case expectations accordingly. That seems to fail =
on your system. The test case thinks ALPN+SNI are available and wants to =
see "localhost" in the response, but it is not used.
>=20
> Unnecessary to say that the detection (and therefore the tests) work =
on my OS X installation - also before 10.11.
>=20
> Hmmm....are there SNI test cases for mod_ssl where I could see how it =
detects it?
>=20
>=20
>> Am 17.11.2015 um 16:30 schrieb Jim Jagielski <jim@jaguNET.com>:
>>=20
>> Still:
>>=20
>> t/modules/http2.t .. 26/51
>> # Failed test 34 in t/modules/http2.t at line 242 fail #4
>> # testing : content comparision
>> # expected: '<html><body>
>> # <h2>Hello World!</h2>
>> # TLS_SNI=3D"localhost"
>> # </body></html>
>> # '
>> # received: '<html><body>
>> # <h2>Hello World!</h2>
>> # TLS_SNI=3D""
>> # </body></html>
>> # '
>> not ok 34
>>=20
>> # Failed test 50 in t/modules/http2.t at line 194 fail #6
>> test case: VHOST001, expect 404 or 421 (using Host:): GET =
https://localhost:8544/misdirected
>> # testing : GET https://localhost:8544/misdirected
>> # expected: 421
>> # received: '404'
>> not ok 50
>>=20
>> # Failed test 51 in t/modules/http2.t at line 194 fail #7
>> test case: VHOST002, expect 404 or 421 (using :authority): GET =
https://localhost:8544/misdirected
>> # Failed test 50 in t/modules/http2.t at line 194 fail #6
>> # testing : GET https://localhost:8544/misdirected
>> # expected: 421
>> # received: '404'
>> not ok 51
>>=20
>> t/modules/http2.t .. Failed 3/51 subtests
>>=20
>>=20
>>> On Nov 17, 2015, at 10:17 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>=20
>>> OK, the change is from October 19th by me. I changed the test suite =
to have
>>> the test run in deterministic order. $r is a references to an array =
of tests
>>> and, depending on module availability, I push more elements to $r.
>>>=20
>>> I just changed it to push @$r, { ... }
>>>=20
>>> Please give it a try.
>>>=20
>>>> Am 17.11.2015 um 16:06 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>>=20
>>>> I am still 10.10 but w/ Xcode 7.1.1
>>>>=20
>>>>=20
>>>> <jimsys:stable/httpd-test/framework> % perl -V
>>>> Summary of my perl5 (revision 5 version 20 subversion 2) =
configuration:
>>>>=20
>>>> Platform:
>>>> osname=3Ddarwin, osvers=3D14.4.0, =
archname=3Ddarwin-thread-multi-2level
>>>> uname=3D'darwin jimsys.local 14.4.0 darwin kernel version 14.4.0: =
thu may 28 11:35:04 pdt 2015; root:xnu-2782.30.5~1release_x86_64 x86_64 =
'
>>>> config_args=3D'-des -Duseithreads -Dusemultiplicity=3Dy =
-Duseshrplib -Dprefix=3D/usr/local2 -Dvendorprefix=3D/usr/local2'
>>>> hint=3Drecommended, useposix=3Dtrue, d_sigaction=3Ddefine
>>>> useithreads=3Ddefine, usemultiplicity=3Ddefine
>>>> use64bitint=3Ddefine, use64bitall=3Ddefine, uselongdouble=3Dundef
>>>> usemymalloc=3Dn, bincompat5005=3Dundef
>>>> Compiler:
>>>> cc=3D'cc', ccflags =3D'-fno-common -DPERL_DARWIN =
-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include =
-I/opt/local/include',
>>>> optimize=3D'-O3',
>>>> cppflags=3D'-fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe =
-fstack-protector -I/usr/local/include -I/opt/local/include'
>>>> ccversion=3D'', gccversion=3D'4.2.1 Compatible Apple LLVM 6.1.0 =
(clang-602.0.53)', gccosandvers=3D''
>>>> intsize=3D4, longsize=3D8, ptrsize=3D8, doublesize=3D8, =
byteorder=3D12345678
>>>> d_longlong=3Ddefine, longlongsize=3D8, d_longdbl=3Ddefine, =
longdblsize=3D16
>>>> ivtype=3D'long', ivsize=3D8, nvtype=3D'double', nvsize=3D8, =
Off_t=3D'off_t', lseeksize=3D8
>>>> alignbytes=3D8, prototype=3Ddefine
>>>> Linker and Libraries:
>>>> ld=3D'env MACOSX_DEPLOYMENT_TARGET=3D10.3 cc', ldflags =3D' =
-fstack-protector -L/usr/local/lib -L/opt/local/lib'
>>>> libpth=3D/usr/local/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/bin/../lib/clang/6.1.0/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/lib /usr/lib /opt/local/lib
>>>> libs=3D-lgdbm -ldbm -ldl -lm -lutil -lc
>>>> perllibs=3D-ldl -lm -lutil -lc
>>>> libc=3D, so=3Ddylib, useshrplib=3Dtrue, libperl=3Dlibperl.dylib
>>>> gnulibc_version=3D''
>>>> Dynamic Linking:
>>>> dlsrc=3Ddl_dlopen.xs, dlext=3Dbundle, d_dlsymun=3Dundef, =
ccdlflags=3D' '
>>>> cccdlflags=3D' ', lddlflags=3D' -bundle -undefined dynamic_lookup =
-L/usr/local/lib -L/opt/local/lib -fstack-protector'
>>>>=20
>>>>> On Nov 17, 2015, at 9:59 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>=20
>>>>> Hmm, what perl version is that? Works on my OS X (El 10.11) with =
perl -v:
>>>>>=20
>>>>> This is perl 5, version 18, subversion 2 (v5.18.2) built for =
darwin-thread-multi-2level
>>>>> (with 2 registered patches, see perl -V for more detail)
>>>>>=20
>>>>> //Stefan
>>>>>=20
>>>>>> Am 17.11.2015 um 15:44 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>>>>=20
>>>>>> Doing a quick tst I get:
>>>>>>=20
>>>>>> t/modules/http2.t .. push on reference is experimental at =
t/modules/http2.t line 319.
>>>>>> Dubious, test returned 255 (wstat 65280, 0xff00)
>>>>>> No subtests run
>>>>>>=20
>>>>>> Test Summary Report
>>>>>> -------------------
>>>>>> t/modules/http2.t (Wstat: 65280 Tests: 0 Failed: 0)
>>>>>> Non-zero exit status: 255
>>>>>> Parse errors: No plan found in TAP output
>>>>>> Files=3D1, Tests=3D0,  1 wallclock secs ( 0.02 usr  0.01 sys +  =
0.31 cusr  0.06 csys =3D  0.40 CPU)
>>>>>> Result: FAIL
>>>>>> Failed 1/1 test programs. 0/0 subtests failed.
>>>>>>=20
>>>>>> This is on OSX
>>>>>>=20
>>>>>>> On Nov 17, 2015, at 8:12 AM, Jim Jagielski <jim@jaguNET.com> =
wrote:
>>>>>>>=20
>>>>>>> I will.
>>>>>>>=20
>>>>>>>> On Nov 17, 2015, at 7:47 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>>>>=20
>>>>>>>> For the 2.4.18 backporting, can I find people here willing to =
look at:
>>>>>>>>=20
>>>>>>>> *) core/mod_ssl:=20
>>>>>>>> - master conn_rec* addition to conn_rec
>>>>>>>> - minor mmn bump
>>>>>>>> - improved ALPN and Upgrade handling
>>>>>>>> - allowing requests for servers whose TLS configuration is =
compatible
>>>>>>>> to the SNI server ones
>>>>>>>> - disabling TLS renegotiation for slave connections
>>>>>>>> changes are necessary for update modules/http2
>>>>>>>> trunk patch: http://svn.apache.org/r1708107
>>>>>>>>           http://svn.apache.org/r1709587
>>>>>>>>           http://svn.apache.org/r1709602
>>>>>>>>           http://svn.apache.org/r1709995
>>>>>>>>           http://svn.apache.org/r1710231
>>>>>>>>           http://svn.apache.org/r1710419
>>>>>>>>           http://svn.apache.org/r1710572
>>>>>>>>           http://svn.apache.org/r1710583
>>>>>>>>           + manual addition of "conn_rec *master;"
>>>>>>>> 2.4.x patch: =
https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patche=
s/2.4.17-protocols.patch
>>>>>>>> branch mergeable to 2.4.x: =
^/httpd/httpd/branches/2.4.17-protocols-changes
>>>>>>>> +1: icing
>>>>>>>>=20
>>>>>>>> ? This is needed to backport the current mod_http2. If someone =
could find the time to look at this, please? Thanks!
>>>>>>>>=20
>>>>>>>> Cheers,
>>>>>>>>=20
>>>>>>>> Stefan
>>>>>>>=20
>>>>>>=20
>>>>>=20
>>>>=20
>>>=20
>>=20
>=20


From dev-return-84591-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 16:29:00 2015
Return-Path: <dev-return-84591-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C1796186F3
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 16:29:00 +0000 (UTC)
Received: (qmail 65795 invoked by uid 500); 17 Nov 2015 16:29:00 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 65707 invoked by uid 500); 17 Nov 2015 16:29:00 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 65697 invoked by uid 99); 17 Nov 2015 16:29:00 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 16:29:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id B8155C059C
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 16:28:59 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.11
X-Spam-Level:
X-Spam-Status: No, score=-0.11 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id vHxg-lUVps0U for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 16:28:48 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id D6941215CF
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 16:28:47 +0000 (UTC)
Received: from [192.168.1.134] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 5345B15A008E
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 17:28:47 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447777727; bh=tL8kspWwTSjBXpzI2vwidABXQyRg9RbiFjg/csmI+aY=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=UP7Bw0HWLMzZpnTf2PEC2IRUIRATvAJYmrTt6ANAAR2K4knKVc9Q2+VJj4v1JgC7x
	 uWM8JMoyhjFjc8ZS4qvV8S/ocXQyzW4WTEXs1H11zcdi5tl9FXO4EdNwk/oTvyLunW
	 jJQGYjZOSxarXIeFWNHiEdH3X3zx0e5qYjnbHz6o=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: 2.4.18 backporting
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <C41522BC-3280-467A-B895-E7465D2C6D9E@jaguNET.com>
Date: Tue, 17 Nov 2015 17:28:46 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <4B4ED947-BEB3-49DD-A1AE-D45921ECB603@greenbytes.de>
References: <DCA25590-E588-4AD5-8B68-6E473764F773@greenbytes.de> <D9EF2A21-F446-4DE2-A1C4-A22F2D0BECF6@jaguNET.com> <3D49817D-DD89-4D8E-B7C3-257D3FF7D1C8@jaguNET.com> <9C3DA6EF-0AAB-496B-B502-0CFDAAB89F13@greenbytes.de> <BF3A59FA-C287-4C32-A41B-240599D55829@jaguNET.com> <E095C163-F046-4C9C-A912-5183E710817B@greenbytes.de> <47BE49D3-48FB-4054-AFB9-3460015F84E7@jaguNET.com> <04A2D4C6-894B-443E-B4EB-3586626247B9@greenbytes.de> <C41522BC-3280-467A-B895-E7465D2C6D9E@jaguNET.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

That's cheating...

I'll let you know when it works for me in such a configuration.

> Am 17.11.2015 um 16:51 schrieb Jim Jagielski <jim@jaguNET.com>:
>=20
> My perl is built against openssl 1.0.2...
>=20
>> On Nov 17, 2015, at 10:43 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>=20
>> OK, the problem on OS X is that the default openssl is 0.98 which =
does not do SNI.
>>=20
>> I try to detect this in lines 14-17 by:
>> my $alpn_available =3D exists &Net::SSLeay::CTX_set_alpn_protos;
>> if ($alpn_available) {
>>   $total_tests +=3D $vhost_suite;
>> }
>>=20
>> and change the test case expectations accordingly. That seems to fail =
on your system. The test case thinks ALPN+SNI are available and wants to =
see "localhost" in the response, but it is not used.
>>=20
>> Unnecessary to say that the detection (and therefore the tests) work =
on my OS X installation - also before 10.11.
>>=20
>> Hmmm....are there SNI test cases for mod_ssl where I could see how it =
detects it?
>>=20
>>=20
>>> Am 17.11.2015 um 16:30 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>=20
>>> Still:
>>>=20
>>> t/modules/http2.t .. 26/51
>>> # Failed test 34 in t/modules/http2.t at line 242 fail #4
>>> # testing : content comparision
>>> # expected: '<html><body>
>>> # <h2>Hello World!</h2>
>>> # TLS_SNI=3D"localhost"
>>> # </body></html>
>>> # '
>>> # received: '<html><body>
>>> # <h2>Hello World!</h2>
>>> # TLS_SNI=3D""
>>> # </body></html>
>>> # '
>>> not ok 34
>>>=20
>>> # Failed test 50 in t/modules/http2.t at line 194 fail #6
>>> test case: VHOST001, expect 404 or 421 (using Host:): GET =
https://localhost:8544/misdirected
>>> # testing : GET https://localhost:8544/misdirected
>>> # expected: 421
>>> # received: '404'
>>> not ok 50
>>>=20
>>> # Failed test 51 in t/modules/http2.t at line 194 fail #7
>>> test case: VHOST002, expect 404 or 421 (using :authority): GET =
https://localhost:8544/misdirected
>>> # Failed test 50 in t/modules/http2.t at line 194 fail #6
>>> # testing : GET https://localhost:8544/misdirected
>>> # expected: 421
>>> # received: '404'
>>> not ok 51
>>>=20
>>> t/modules/http2.t .. Failed 3/51 subtests
>>>=20
>>>=20
>>>> On Nov 17, 2015, at 10:17 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>=20
>>>> OK, the change is from October 19th by me. I changed the test suite =
to have
>>>> the test run in deterministic order. $r is a references to an array =
of tests
>>>> and, depending on module availability, I push more elements to $r.
>>>>=20
>>>> I just changed it to push @$r, { ... }
>>>>=20
>>>> Please give it a try.
>>>>=20
>>>>> Am 17.11.2015 um 16:06 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>>>=20
>>>>> I am still 10.10 but w/ Xcode 7.1.1
>>>>>=20
>>>>>=20
>>>>> <jimsys:stable/httpd-test/framework> % perl -V
>>>>> Summary of my perl5 (revision 5 version 20 subversion 2) =
configuration:
>>>>>=20
>>>>> Platform:
>>>>> osname=3Ddarwin, osvers=3D14.4.0, =
archname=3Ddarwin-thread-multi-2level
>>>>> uname=3D'darwin jimsys.local 14.4.0 darwin kernel version 14.4.0: =
thu may 28 11:35:04 pdt 2015; root:xnu-2782.30.5~1release_x86_64 x86_64 =
'
>>>>> config_args=3D'-des -Duseithreads -Dusemultiplicity=3Dy =
-Duseshrplib -Dprefix=3D/usr/local2 -Dvendorprefix=3D/usr/local2'
>>>>> hint=3Drecommended, useposix=3Dtrue, d_sigaction=3Ddefine
>>>>> useithreads=3Ddefine, usemultiplicity=3Ddefine
>>>>> use64bitint=3Ddefine, use64bitall=3Ddefine, uselongdouble=3Dundef
>>>>> usemymalloc=3Dn, bincompat5005=3Dundef
>>>>> Compiler:
>>>>> cc=3D'cc', ccflags =3D'-fno-common -DPERL_DARWIN =
-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include =
-I/opt/local/include',
>>>>> optimize=3D'-O3',
>>>>> cppflags=3D'-fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe =
-fstack-protector -I/usr/local/include -I/opt/local/include'
>>>>> ccversion=3D'', gccversion=3D'4.2.1 Compatible Apple LLVM 6.1.0 =
(clang-602.0.53)', gccosandvers=3D''
>>>>> intsize=3D4, longsize=3D8, ptrsize=3D8, doublesize=3D8, =
byteorder=3D12345678
>>>>> d_longlong=3Ddefine, longlongsize=3D8, d_longdbl=3Ddefine, =
longdblsize=3D16
>>>>> ivtype=3D'long', ivsize=3D8, nvtype=3D'double', nvsize=3D8, =
Off_t=3D'off_t', lseeksize=3D8
>>>>> alignbytes=3D8, prototype=3Ddefine
>>>>> Linker and Libraries:
>>>>> ld=3D'env MACOSX_DEPLOYMENT_TARGET=3D10.3 cc', ldflags =3D' =
-fstack-protector -L/usr/local/lib -L/opt/local/lib'
>>>>> libpth=3D/usr/local/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/bin/../lib/clang/6.1.0/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/lib /usr/lib /opt/local/lib
>>>>> libs=3D-lgdbm -ldbm -ldl -lm -lutil -lc
>>>>> perllibs=3D-ldl -lm -lutil -lc
>>>>> libc=3D, so=3Ddylib, useshrplib=3Dtrue, libperl=3Dlibperl.dylib
>>>>> gnulibc_version=3D''
>>>>> Dynamic Linking:
>>>>> dlsrc=3Ddl_dlopen.xs, dlext=3Dbundle, d_dlsymun=3Dundef, =
ccdlflags=3D' '
>>>>> cccdlflags=3D' ', lddlflags=3D' -bundle -undefined dynamic_lookup =
-L/usr/local/lib -L/opt/local/lib -fstack-protector'
>>>>>=20
>>>>>> On Nov 17, 2015, at 9:59 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>>=20
>>>>>> Hmm, what perl version is that? Works on my OS X (El 10.11) with =
perl -v:
>>>>>>=20
>>>>>> This is perl 5, version 18, subversion 2 (v5.18.2) built for =
darwin-thread-multi-2level
>>>>>> (with 2 registered patches, see perl -V for more detail)
>>>>>>=20
>>>>>> //Stefan
>>>>>>=20
>>>>>>> Am 17.11.2015 um 15:44 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>>>>>=20
>>>>>>> Doing a quick tst I get:
>>>>>>>=20
>>>>>>> t/modules/http2.t .. push on reference is experimental at =
t/modules/http2.t line 319.
>>>>>>> Dubious, test returned 255 (wstat 65280, 0xff00)
>>>>>>> No subtests run
>>>>>>>=20
>>>>>>> Test Summary Report
>>>>>>> -------------------
>>>>>>> t/modules/http2.t (Wstat: 65280 Tests: 0 Failed: 0)
>>>>>>> Non-zero exit status: 255
>>>>>>> Parse errors: No plan found in TAP output
>>>>>>> Files=3D1, Tests=3D0,  1 wallclock secs ( 0.02 usr  0.01 sys +  =
0.31 cusr  0.06 csys =3D  0.40 CPU)
>>>>>>> Result: FAIL
>>>>>>> Failed 1/1 test programs. 0/0 subtests failed.
>>>>>>>=20
>>>>>>> This is on OSX
>>>>>>>=20
>>>>>>>> On Nov 17, 2015, at 8:12 AM, Jim Jagielski <jim@jaguNET.com> =
wrote:
>>>>>>>>=20
>>>>>>>> I will.
>>>>>>>>=20
>>>>>>>>> On Nov 17, 2015, at 7:47 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>>>>>=20
>>>>>>>>> For the 2.4.18 backporting, can I find people here willing to =
look at:
>>>>>>>>>=20
>>>>>>>>> *) core/mod_ssl:=20
>>>>>>>>> - master conn_rec* addition to conn_rec
>>>>>>>>> - minor mmn bump
>>>>>>>>> - improved ALPN and Upgrade handling
>>>>>>>>> - allowing requests for servers whose TLS configuration is =
compatible
>>>>>>>>> to the SNI server ones
>>>>>>>>> - disabling TLS renegotiation for slave connections
>>>>>>>>> changes are necessary for update modules/http2
>>>>>>>>> trunk patch: http://svn.apache.org/r1708107
>>>>>>>>>          http://svn.apache.org/r1709587
>>>>>>>>>          http://svn.apache.org/r1709602
>>>>>>>>>          http://svn.apache.org/r1709995
>>>>>>>>>          http://svn.apache.org/r1710231
>>>>>>>>>          http://svn.apache.org/r1710419
>>>>>>>>>          http://svn.apache.org/r1710572
>>>>>>>>>          http://svn.apache.org/r1710583
>>>>>>>>>          + manual addition of "conn_rec *master;"
>>>>>>>>> 2.4.x patch: =
https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patche=
s/2.4.17-protocols.patch
>>>>>>>>> branch mergeable to 2.4.x: =
^/httpd/httpd/branches/2.4.17-protocols-changes
>>>>>>>>> +1: icing
>>>>>>>>>=20
>>>>>>>>> ? This is needed to backport the current mod_http2. If someone =
could find the time to look at this, please? Thanks!
>>>>>>>>>=20
>>>>>>>>> Cheers,
>>>>>>>>>=20
>>>>>>>>> Stefan
>>>>>>>>=20
>>>>>>>=20
>>>>>>=20
>>>>>=20
>>>>=20
>>>=20
>>=20
>=20


From dev-return-84592-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 17:09:12 2015
Return-Path: <dev-return-84592-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4FBB41893D
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 17:09:12 +0000 (UTC)
Received: (qmail 24955 invoked by uid 500); 17 Nov 2015 17:09:11 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 24832 invoked by uid 500); 17 Nov 2015 17:09:11 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 24718 invoked by uid 99); 17 Nov 2015 17:09:11 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 17:09:11 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 0C351C6E4A
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 17:09:11 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id ISDZ5oP5eO_x for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 17:09:00 +0000 (UTC)
Received: from resqmta-ch2-12v.sys.comcast.net (resqmta-ch2-12v.sys.comcast.net [69.252.207.44])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 560E2441BB
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 17:09:00 +0000 (UTC)
Received: from resomta-ch2-20v.sys.comcast.net ([69.252.207.116])
	by resqmta-ch2-12v.sys.comcast.net with comcast
	id ih851r0052XD5SV01h8zqK; Tue, 17 Nov 2015 17:08:59 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-20v.sys.comcast.net with comcast
	id ih8z1r0042U0RYt01h8zNf; Tue, 17 Nov 2015 17:08:59 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: 2.4.18 backporting
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <4B4ED947-BEB3-49DD-A1AE-D45921ECB603@greenbytes.de>
Date: Tue, 17 Nov 2015 12:08:58 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <C7BF422C-73B6-4E97-893F-11E5B0AA705E@jaguNET.com>
References: <DCA25590-E588-4AD5-8B68-6E473764F773@greenbytes.de> <D9EF2A21-F446-4DE2-A1C4-A22F2D0BECF6@jaguNET.com> <3D49817D-DD89-4D8E-B7C3-257D3FF7D1C8@jaguNET.com> <9C3DA6EF-0AAB-496B-B502-0CFDAAB89F13@greenbytes.de> <BF3A59FA-C287-4C32-A41B-240599D55829@jaguNET.com> <E095C163-F046-4C9C-A912-5183E710817B@greenbytes.de> <47BE49D3-48FB-4054-AFB9-3460015F84E7@jaguNET.com> <04A2D4C6-894B-443E-B4EB-3586626247B9@greenbytes.de> <C41522BC-3280-467A-B895-E7465D2C6D9E@jaguNET.com> <4B4ED947-BEB3-49DD-A1AE-D45921ECB603@greenbytes.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1447780139;
	bh=77QuBnSseO/6rIaRcE7PmPSNRXaZ67rlv1CX2C1bFUs=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=M3HobqsINHBSXx7kKdi+5Uj7fwk8LKa02TzbUUdHtEpMJWICyCJiSaC3032DnP2Si
	 w4a2GKqaQanNFl7cOs0tFBAcUP7PtJLeO4Bewa/vtLcEob280T6o6gsP37Au8ReLbC
	 P+1/fVx0UrGfUmxLwvVLqP6ocO4Bki8LWO6Po1GadkZnfPsdknfT6aDzAD1cxLCkzN
	 U6T/PgLmE78XO5aW75Q0rGBebZXaaw8aD1kfEjiuQyX33iviWNquuXJvEnx3i24xMW
	 WqPrquLZoI1RexPc1aQmjaRQyRHzjz2k90yLKRA+xy4oltsBQKSfJKOm0AMd9SD5nB
	 Z+KMsm0KzThxw==

No issues under CentOS...

> On Nov 17, 2015, at 11:28 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>=20
> That's cheating...
>=20
> I'll let you know when it works for me in such a configuration.
>=20
>> Am 17.11.2015 um 16:51 schrieb Jim Jagielski <jim@jaguNET.com>:
>>=20
>> My perl is built against openssl 1.0.2...
>>=20
>>> On Nov 17, 2015, at 10:43 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>=20
>>> OK, the problem on OS X is that the default openssl is 0.98 which =
does not do SNI.
>>>=20
>>> I try to detect this in lines 14-17 by:
>>> my $alpn_available =3D exists &Net::SSLeay::CTX_set_alpn_protos;
>>> if ($alpn_available) {
>>>  $total_tests +=3D $vhost_suite;
>>> }
>>>=20
>>> and change the test case expectations accordingly. That seems to =
fail on your system. The test case thinks ALPN+SNI are available and =
wants to see "localhost" in the response, but it is not used.
>>>=20
>>> Unnecessary to say that the detection (and therefore the tests) work =
on my OS X installation - also before 10.11.
>>>=20
>>> Hmmm....are there SNI test cases for mod_ssl where I could see how =
it detects it?
>>>=20
>>>=20
>>>> Am 17.11.2015 um 16:30 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>>=20
>>>> Still:
>>>>=20
>>>> t/modules/http2.t .. 26/51
>>>> # Failed test 34 in t/modules/http2.t at line 242 fail #4
>>>> # testing : content comparision
>>>> # expected: '<html><body>
>>>> # <h2>Hello World!</h2>
>>>> # TLS_SNI=3D"localhost"
>>>> # </body></html>
>>>> # '
>>>> # received: '<html><body>
>>>> # <h2>Hello World!</h2>
>>>> # TLS_SNI=3D""
>>>> # </body></html>
>>>> # '
>>>> not ok 34
>>>>=20
>>>> # Failed test 50 in t/modules/http2.t at line 194 fail #6
>>>> test case: VHOST001, expect 404 or 421 (using Host:): GET =
https://localhost:8544/misdirected
>>>> # testing : GET https://localhost:8544/misdirected
>>>> # expected: 421
>>>> # received: '404'
>>>> not ok 50
>>>>=20
>>>> # Failed test 51 in t/modules/http2.t at line 194 fail #7
>>>> test case: VHOST002, expect 404 or 421 (using :authority): GET =
https://localhost:8544/misdirected
>>>> # Failed test 50 in t/modules/http2.t at line 194 fail #6
>>>> # testing : GET https://localhost:8544/misdirected
>>>> # expected: 421
>>>> # received: '404'
>>>> not ok 51
>>>>=20
>>>> t/modules/http2.t .. Failed 3/51 subtests
>>>>=20
>>>>=20
>>>>> On Nov 17, 2015, at 10:17 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>=20
>>>>> OK, the change is from October 19th by me. I changed the test =
suite to have
>>>>> the test run in deterministic order. $r is a references to an =
array of tests
>>>>> and, depending on module availability, I push more elements to $r.
>>>>>=20
>>>>> I just changed it to push @$r, { ... }
>>>>>=20
>>>>> Please give it a try.
>>>>>=20
>>>>>> Am 17.11.2015 um 16:06 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>>>>=20
>>>>>> I am still 10.10 but w/ Xcode 7.1.1
>>>>>>=20
>>>>>>=20
>>>>>> <jimsys:stable/httpd-test/framework> % perl -V
>>>>>> Summary of my perl5 (revision 5 version 20 subversion 2) =
configuration:
>>>>>>=20
>>>>>> Platform:
>>>>>> osname=3Ddarwin, osvers=3D14.4.0, =
archname=3Ddarwin-thread-multi-2level
>>>>>> uname=3D'darwin jimsys.local 14.4.0 darwin kernel version 14.4.0: =
thu may 28 11:35:04 pdt 2015; root:xnu-2782.30.5~1release_x86_64 x86_64 =
'
>>>>>> config_args=3D'-des -Duseithreads -Dusemultiplicity=3Dy =
-Duseshrplib -Dprefix=3D/usr/local2 -Dvendorprefix=3D/usr/local2'
>>>>>> hint=3Drecommended, useposix=3Dtrue, d_sigaction=3Ddefine
>>>>>> useithreads=3Ddefine, usemultiplicity=3Ddefine
>>>>>> use64bitint=3Ddefine, use64bitall=3Ddefine, uselongdouble=3Dundef
>>>>>> usemymalloc=3Dn, bincompat5005=3Dundef
>>>>>> Compiler:
>>>>>> cc=3D'cc', ccflags =3D'-fno-common -DPERL_DARWIN =
-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include =
-I/opt/local/include',
>>>>>> optimize=3D'-O3',
>>>>>> cppflags=3D'-fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe =
-fstack-protector -I/usr/local/include -I/opt/local/include'
>>>>>> ccversion=3D'', gccversion=3D'4.2.1 Compatible Apple LLVM 6.1.0 =
(clang-602.0.53)', gccosandvers=3D''
>>>>>> intsize=3D4, longsize=3D8, ptrsize=3D8, doublesize=3D8, =
byteorder=3D12345678
>>>>>> d_longlong=3Ddefine, longlongsize=3D8, d_longdbl=3Ddefine, =
longdblsize=3D16
>>>>>> ivtype=3D'long', ivsize=3D8, nvtype=3D'double', nvsize=3D8, =
Off_t=3D'off_t', lseeksize=3D8
>>>>>> alignbytes=3D8, prototype=3Ddefine
>>>>>> Linker and Libraries:
>>>>>> ld=3D'env MACOSX_DEPLOYMENT_TARGET=3D10.3 cc', ldflags =3D' =
-fstack-protector -L/usr/local/lib -L/opt/local/lib'
>>>>>> libpth=3D/usr/local/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/bin/../lib/clang/6.1.0/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/lib /usr/lib /opt/local/lib
>>>>>> libs=3D-lgdbm -ldbm -ldl -lm -lutil -lc
>>>>>> perllibs=3D-ldl -lm -lutil -lc
>>>>>> libc=3D, so=3Ddylib, useshrplib=3Dtrue, libperl=3Dlibperl.dylib
>>>>>> gnulibc_version=3D''
>>>>>> Dynamic Linking:
>>>>>> dlsrc=3Ddl_dlopen.xs, dlext=3Dbundle, d_dlsymun=3Dundef, =
ccdlflags=3D' '
>>>>>> cccdlflags=3D' ', lddlflags=3D' -bundle -undefined dynamic_lookup =
-L/usr/local/lib -L/opt/local/lib -fstack-protector'
>>>>>>=20
>>>>>>> On Nov 17, 2015, at 9:59 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>>>=20
>>>>>>> Hmm, what perl version is that? Works on my OS X (El 10.11) with =
perl -v:
>>>>>>>=20
>>>>>>> This is perl 5, version 18, subversion 2 (v5.18.2) built for =
darwin-thread-multi-2level
>>>>>>> (with 2 registered patches, see perl -V for more detail)
>>>>>>>=20
>>>>>>> //Stefan
>>>>>>>=20
>>>>>>>> Am 17.11.2015 um 15:44 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>>>>>>=20
>>>>>>>> Doing a quick tst I get:
>>>>>>>>=20
>>>>>>>> t/modules/http2.t .. push on reference is experimental at =
t/modules/http2.t line 319.
>>>>>>>> Dubious, test returned 255 (wstat 65280, 0xff00)
>>>>>>>> No subtests run
>>>>>>>>=20
>>>>>>>> Test Summary Report
>>>>>>>> -------------------
>>>>>>>> t/modules/http2.t (Wstat: 65280 Tests: 0 Failed: 0)
>>>>>>>> Non-zero exit status: 255
>>>>>>>> Parse errors: No plan found in TAP output
>>>>>>>> Files=3D1, Tests=3D0,  1 wallclock secs ( 0.02 usr  0.01 sys +  =
0.31 cusr  0.06 csys =3D  0.40 CPU)
>>>>>>>> Result: FAIL
>>>>>>>> Failed 1/1 test programs. 0/0 subtests failed.
>>>>>>>>=20
>>>>>>>> This is on OSX
>>>>>>>>=20
>>>>>>>>> On Nov 17, 2015, at 8:12 AM, Jim Jagielski <jim@jaguNET.com> =
wrote:
>>>>>>>>>=20
>>>>>>>>> I will.
>>>>>>>>>=20
>>>>>>>>>> On Nov 17, 2015, at 7:47 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>>>>>>=20
>>>>>>>>>> For the 2.4.18 backporting, can I find people here willing to =
look at:
>>>>>>>>>>=20
>>>>>>>>>> *) core/mod_ssl:=20
>>>>>>>>>> - master conn_rec* addition to conn_rec
>>>>>>>>>> - minor mmn bump
>>>>>>>>>> - improved ALPN and Upgrade handling
>>>>>>>>>> - allowing requests for servers whose TLS configuration is =
compatible
>>>>>>>>>> to the SNI server ones
>>>>>>>>>> - disabling TLS renegotiation for slave connections
>>>>>>>>>> changes are necessary for update modules/http2
>>>>>>>>>> trunk patch: http://svn.apache.org/r1708107
>>>>>>>>>>         http://svn.apache.org/r1709587
>>>>>>>>>>         http://svn.apache.org/r1709602
>>>>>>>>>>         http://svn.apache.org/r1709995
>>>>>>>>>>         http://svn.apache.org/r1710231
>>>>>>>>>>         http://svn.apache.org/r1710419
>>>>>>>>>>         http://svn.apache.org/r1710572
>>>>>>>>>>         http://svn.apache.org/r1710583
>>>>>>>>>>         + manual addition of "conn_rec *master;"
>>>>>>>>>> 2.4.x patch: =
https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patche=
s/2.4.17-protocols.patch
>>>>>>>>>> branch mergeable to 2.4.x: =
^/httpd/httpd/branches/2.4.17-protocols-changes
>>>>>>>>>> +1: icing
>>>>>>>>>>=20
>>>>>>>>>> ? This is needed to backport the current mod_http2. If =
someone could find the time to look at this, please? Thanks!
>>>>>>>>>>=20
>>>>>>>>>> Cheers,
>>>>>>>>>>=20
>>>>>>>>>> Stefan
>>>>>>>>>=20
>>>>>>>>=20
>>>>>>>=20
>>>>>>=20
>>>>>=20
>>>>=20
>>>=20
>>=20
>=20


From dev-return-84593-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 17 17:19:01 2015
Return-Path: <dev-return-84593-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A5BCF18992
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 17 Nov 2015 17:19:01 +0000 (UTC)
Received: (qmail 52087 invoked by uid 500); 17 Nov 2015 17:19:00 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 52009 invoked by uid 500); 17 Nov 2015 17:19:00 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 51993 invoked by uid 99); 17 Nov 2015 17:19:00 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Nov 2015 17:19:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 2CE4F1A0A16
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 17:19:00 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.109
X-Spam-Level:
X-Spam-Status: No, score=-0.109 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id w_VAqZ9eXFU9 for <dev@httpd.apache.org>;
	Tue, 17 Nov 2015 17:18:46 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id DCA0942B7B
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 17:18:45 +0000 (UTC)
Received: from [192.168.1.134] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 513F815A0531
	for <dev@httpd.apache.org>; Tue, 17 Nov 2015 18:18:44 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447780724; bh=SDHNH+wxPO7FN6izWIDOuSCuIZOjNe9LveTNLyySzFM=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=jg4a8nPOs7qSJ/iMwcz1GDQ/1TR0zikuRfmoLNpXSmG+P9d13IW4Gr6eNVHoDDz4r
	 AVOv3awSj/oCxjSllBNznq/CyzrWKcoxXqIJ54xsuGEdjVDszPV21y9GnsrMat8RMq
	 Juw6Bm6S+QEsbeWyWvExag5IwErHHw4LdTyf8vOU=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: 2.4.18 backporting
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <C7BF422C-73B6-4E97-893F-11E5B0AA705E@jaguNET.com>
Date: Tue, 17 Nov 2015 18:18:44 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <BCFB2170-5F65-4FAD-ABFE-2CEAF6AB4F4C@greenbytes.de>
References: <DCA25590-E588-4AD5-8B68-6E473764F773@greenbytes.de> <D9EF2A21-F446-4DE2-A1C4-A22F2D0BECF6@jaguNET.com> <3D49817D-DD89-4D8E-B7C3-257D3FF7D1C8@jaguNET.com> <9C3DA6EF-0AAB-496B-B502-0CFDAAB89F13@greenbytes.de> <BF3A59FA-C287-4C32-A41B-240599D55829@jaguNET.com> <E095C163-F046-4C9C-A912-5183E710817B@greenbytes.de> <47BE49D3-48FB-4054-AFB9-3460015F84E7@jaguNET.com> <04A2D4C6-894B-443E-B4EB-3586626247B9@greenbytes.de> <C41522BC-3280-467A-B895-E7465D2C6D9E@jaguNET.com> <4B4ED947-BEB3-49DD-A1AE-D45921ECB603@greenbytes.de> <C7BF422C-73B6-4E97-893F-11E5B0AA705E@jaguNET.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

Just found out that AnyEvent::TLS does not support SNI *at all*, so I am =
considering scrapping these VHOST tests. All in all, I am not very happy =
with Protocol::HTTP2::Client. I think I would rather call nghttp and =
curl from our Perl framework directly. But that would mean that people =
build nghttp2 with apps and have nghttp in the $PATH...

//Stefan

> Am 17.11.2015 um 18:08 schrieb Jim Jagielski <jim@jaguNET.com>:
>=20
> No issues under CentOS...
>=20
>> On Nov 17, 2015, at 11:28 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>=20
>> That's cheating...
>>=20
>> I'll let you know when it works for me in such a configuration.
>>=20
>>> Am 17.11.2015 um 16:51 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>=20
>>> My perl is built against openssl 1.0.2...
>>>=20
>>>> On Nov 17, 2015, at 10:43 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>=20
>>>> OK, the problem on OS X is that the default openssl is 0.98 which =
does not do SNI.
>>>>=20
>>>> I try to detect this in lines 14-17 by:
>>>> my $alpn_available =3D exists &Net::SSLeay::CTX_set_alpn_protos;
>>>> if ($alpn_available) {
>>>> $total_tests +=3D $vhost_suite;
>>>> }
>>>>=20
>>>> and change the test case expectations accordingly. That seems to =
fail on your system. The test case thinks ALPN+SNI are available and =
wants to see "localhost" in the response, but it is not used.
>>>>=20
>>>> Unnecessary to say that the detection (and therefore the tests) =
work on my OS X installation - also before 10.11.
>>>>=20
>>>> Hmmm....are there SNI test cases for mod_ssl where I could see how =
it detects it?
>>>>=20
>>>>=20
>>>>> Am 17.11.2015 um 16:30 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>>>=20
>>>>> Still:
>>>>>=20
>>>>> t/modules/http2.t .. 26/51
>>>>> # Failed test 34 in t/modules/http2.t at line 242 fail #4
>>>>> # testing : content comparision
>>>>> # expected: '<html><body>
>>>>> # <h2>Hello World!</h2>
>>>>> # TLS_SNI=3D"localhost"
>>>>> # </body></html>
>>>>> # '
>>>>> # received: '<html><body>
>>>>> # <h2>Hello World!</h2>
>>>>> # TLS_SNI=3D""
>>>>> # </body></html>
>>>>> # '
>>>>> not ok 34
>>>>>=20
>>>>> # Failed test 50 in t/modules/http2.t at line 194 fail #6
>>>>> test case: VHOST001, expect 404 or 421 (using Host:): GET =
https://localhost:8544/misdirected
>>>>> # testing : GET https://localhost:8544/misdirected
>>>>> # expected: 421
>>>>> # received: '404'
>>>>> not ok 50
>>>>>=20
>>>>> # Failed test 51 in t/modules/http2.t at line 194 fail #7
>>>>> test case: VHOST002, expect 404 or 421 (using :authority): GET =
https://localhost:8544/misdirected
>>>>> # Failed test 50 in t/modules/http2.t at line 194 fail #6
>>>>> # testing : GET https://localhost:8544/misdirected
>>>>> # expected: 421
>>>>> # received: '404'
>>>>> not ok 51
>>>>>=20
>>>>> t/modules/http2.t .. Failed 3/51 subtests
>>>>>=20
>>>>>=20
>>>>>> On Nov 17, 2015, at 10:17 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>>=20
>>>>>> OK, the change is from October 19th by me. I changed the test =
suite to have
>>>>>> the test run in deterministic order. $r is a references to an =
array of tests
>>>>>> and, depending on module availability, I push more elements to =
$r.
>>>>>>=20
>>>>>> I just changed it to push @$r, { ... }
>>>>>>=20
>>>>>> Please give it a try.
>>>>>>=20
>>>>>>> Am 17.11.2015 um 16:06 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>>>>>=20
>>>>>>> I am still 10.10 but w/ Xcode 7.1.1
>>>>>>>=20
>>>>>>>=20
>>>>>>> <jimsys:stable/httpd-test/framework> % perl -V
>>>>>>> Summary of my perl5 (revision 5 version 20 subversion 2) =
configuration:
>>>>>>>=20
>>>>>>> Platform:
>>>>>>> osname=3Ddarwin, osvers=3D14.4.0, =
archname=3Ddarwin-thread-multi-2level
>>>>>>> uname=3D'darwin jimsys.local 14.4.0 darwin kernel version =
14.4.0: thu may 28 11:35:04 pdt 2015; root:xnu-2782.30.5~1release_x86_64 =
x86_64 '
>>>>>>> config_args=3D'-des -Duseithreads -Dusemultiplicity=3Dy =
-Duseshrplib -Dprefix=3D/usr/local2 -Dvendorprefix=3D/usr/local2'
>>>>>>> hint=3Drecommended, useposix=3Dtrue, d_sigaction=3Ddefine
>>>>>>> useithreads=3Ddefine, usemultiplicity=3Ddefine
>>>>>>> use64bitint=3Ddefine, use64bitall=3Ddefine, uselongdouble=3Dundef
>>>>>>> usemymalloc=3Dn, bincompat5005=3Dundef
>>>>>>> Compiler:
>>>>>>> cc=3D'cc', ccflags =3D'-fno-common -DPERL_DARWIN =
-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include =
-I/opt/local/include',
>>>>>>> optimize=3D'-O3',
>>>>>>> cppflags=3D'-fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe =
-fstack-protector -I/usr/local/include -I/opt/local/include'
>>>>>>> ccversion=3D'', gccversion=3D'4.2.1 Compatible Apple LLVM 6.1.0 =
(clang-602.0.53)', gccosandvers=3D''
>>>>>>> intsize=3D4, longsize=3D8, ptrsize=3D8, doublesize=3D8, =
byteorder=3D12345678
>>>>>>> d_longlong=3Ddefine, longlongsize=3D8, d_longdbl=3Ddefine, =
longdblsize=3D16
>>>>>>> ivtype=3D'long', ivsize=3D8, nvtype=3D'double', nvsize=3D8, =
Off_t=3D'off_t', lseeksize=3D8
>>>>>>> alignbytes=3D8, prototype=3Ddefine
>>>>>>> Linker and Libraries:
>>>>>>> ld=3D'env MACOSX_DEPLOYMENT_TARGET=3D10.3 cc', ldflags =3D' =
-fstack-protector -L/usr/local/lib -L/opt/local/lib'
>>>>>>> libpth=3D/usr/local/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/bin/../lib/clang/6.1.0/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/lib /usr/lib /opt/local/lib
>>>>>>> libs=3D-lgdbm -ldbm -ldl -lm -lutil -lc
>>>>>>> perllibs=3D-ldl -lm -lutil -lc
>>>>>>> libc=3D, so=3Ddylib, useshrplib=3Dtrue, libperl=3Dlibperl.dylib
>>>>>>> gnulibc_version=3D''
>>>>>>> Dynamic Linking:
>>>>>>> dlsrc=3Ddl_dlopen.xs, dlext=3Dbundle, d_dlsymun=3Dundef, =
ccdlflags=3D' '
>>>>>>> cccdlflags=3D' ', lddlflags=3D' -bundle -undefined =
dynamic_lookup -L/usr/local/lib -L/opt/local/lib -fstack-protector'
>>>>>>>=20
>>>>>>>> On Nov 17, 2015, at 9:59 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>>>>=20
>>>>>>>> Hmm, what perl version is that? Works on my OS X (El 10.11) =
with perl -v:
>>>>>>>>=20
>>>>>>>> This is perl 5, version 18, subversion 2 (v5.18.2) built for =
darwin-thread-multi-2level
>>>>>>>> (with 2 registered patches, see perl -V for more detail)
>>>>>>>>=20
>>>>>>>> //Stefan
>>>>>>>>=20
>>>>>>>>> Am 17.11.2015 um 15:44 schrieb Jim Jagielski =
<jim@jaguNET.com>:
>>>>>>>>>=20
>>>>>>>>> Doing a quick tst I get:
>>>>>>>>>=20
>>>>>>>>> t/modules/http2.t .. push on reference is experimental at =
t/modules/http2.t line 319.
>>>>>>>>> Dubious, test returned 255 (wstat 65280, 0xff00)
>>>>>>>>> No subtests run
>>>>>>>>>=20
>>>>>>>>> Test Summary Report
>>>>>>>>> -------------------
>>>>>>>>> t/modules/http2.t (Wstat: 65280 Tests: 0 Failed: 0)
>>>>>>>>> Non-zero exit status: 255
>>>>>>>>> Parse errors: No plan found in TAP output
>>>>>>>>> Files=3D1, Tests=3D0,  1 wallclock secs ( 0.02 usr  0.01 sys + =
 0.31 cusr  0.06 csys =3D  0.40 CPU)
>>>>>>>>> Result: FAIL
>>>>>>>>> Failed 1/1 test programs. 0/0 subtests failed.
>>>>>>>>>=20
>>>>>>>>> This is on OSX
>>>>>>>>>=20
>>>>>>>>>> On Nov 17, 2015, at 8:12 AM, Jim Jagielski <jim@jaguNET.com> =
wrote:
>>>>>>>>>>=20
>>>>>>>>>> I will.
>>>>>>>>>>=20
>>>>>>>>>>> On Nov 17, 2015, at 7:47 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>>>>>>>=20
>>>>>>>>>>> For the 2.4.18 backporting, can I find people here willing =
to look at:
>>>>>>>>>>>=20
>>>>>>>>>>> *) core/mod_ssl:=20
>>>>>>>>>>> - master conn_rec* addition to conn_rec
>>>>>>>>>>> - minor mmn bump
>>>>>>>>>>> - improved ALPN and Upgrade handling
>>>>>>>>>>> - allowing requests for servers whose TLS configuration is =
compatible
>>>>>>>>>>> to the SNI server ones
>>>>>>>>>>> - disabling TLS renegotiation for slave connections
>>>>>>>>>>> changes are necessary for update modules/http2
>>>>>>>>>>> trunk patch: http://svn.apache.org/r1708107
>>>>>>>>>>>        http://svn.apache.org/r1709587
>>>>>>>>>>>        http://svn.apache.org/r1709602
>>>>>>>>>>>        http://svn.apache.org/r1709995
>>>>>>>>>>>        http://svn.apache.org/r1710231
>>>>>>>>>>>        http://svn.apache.org/r1710419
>>>>>>>>>>>        http://svn.apache.org/r1710572
>>>>>>>>>>>        http://svn.apache.org/r1710583
>>>>>>>>>>>        + manual addition of "conn_rec *master;"
>>>>>>>>>>> 2.4.x patch: =
https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patche=
s/2.4.17-protocols.patch
>>>>>>>>>>> branch mergeable to 2.4.x: =
^/httpd/httpd/branches/2.4.17-protocols-changes
>>>>>>>>>>> +1: icing
>>>>>>>>>>>=20
>>>>>>>>>>> ? This is needed to backport the current mod_http2. If =
someone could find the time to look at this, please? Thanks!
>>>>>>>>>>>=20
>>>>>>>>>>> Cheers,
>>>>>>>>>>>=20
>>>>>>>>>>> Stefan
>>>>>>>>>>=20
>>>>>>>>>=20
>>>>>>>>=20
>>>>>>>=20
>>>>>>=20
>>>>>=20
>>>>=20
>>>=20
>>=20
>=20


From dev-return-84594-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 00:10:20 2015
Return-Path: <dev-return-84594-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 96FF9181A9
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 00:10:20 +0000 (UTC)
Received: (qmail 35863 invoked by uid 500); 18 Nov 2015 00:10:20 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 35795 invoked by uid 500); 18 Nov 2015 00:10:20 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 35781 invoked by uid 99); 18 Nov 2015 00:10:20 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 00:10:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 9ABB21A2D20
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 00:10:19 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id XQGC3xIJCNqA for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 00:10:11 +0000 (UTC)
Received: from mail-io0-f182.google.com (mail-io0-f182.google.com [209.85.223.182])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 75D2120B66
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 00:10:10 +0000 (UTC)
Received: by ioc74 with SMTP id 74so36747273ioc.2
        for <dev@httpd.apache.org>; Tue, 17 Nov 2015 16:10:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=8p4PoYZckrelbLJwvRsqW8CbrS/zQaSyrQsTpd/+TxQ=;
        b=WOSSj8Gh3deH44iivKOSXpmuHtGtPSYdal4haDma3T4jRSrTQ+s+PiSfy9RZaAE0O3
         sGVDwMkdXyB6BFylZhw93Kk6B7L8SbnSchGAdPd3/l5Gk1ubPrstFjotR/C3GleZM/M2
         xJkclYLtTa2zrh82F8LlCgMiFzwRqO4r+bsJ1WKyv0WnMEm4OATsgSHe8G3HzjvfJaXp
         MVVPwUTWIBTeGtrDIXwZojOG5gWJC6IF86Z1sPZRejDUUrmCk73BioPfNj8++WzeVmRR
         oaEYFEhkYD5BdNHwJ64XaOTHziqXoZ5hs+ZNSGB7MpgS0MGtO7RZMfhPykRH3dof/qAW
         l4XA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=8p4PoYZckrelbLJwvRsqW8CbrS/zQaSyrQsTpd/+TxQ=;
        b=Mz79WmPRCbvF/YKqzBU3lgDnWFQZraMtx/aE+4+uL6Yp3PyV43gBW8sG7oZUF9JvS3
         kJozOOpW5wWJv/wy9fju9GS0/eSxZM2jkIGCXAkc12YKkcesyFJxz3TXPrWveTHjqZLR
         HHGEXEetXificre4ZKLIXxVNCuGi3BiAL2yECisGS4YzFnmNsziqpBSBayQONFhHfgfg
         hcVd0hZXvYfXwcondHL6woXACYZAUlSrrApUeOjA2FL+BriX18HuJMuKd4Az/W+Wmsor
         XzW4+FZR4dDs8t6z8zhxFrYCSUZFDKJ60vB1oYIkfDOrNwyC6EJ/N4qS6JuWGbFpoWIl
         13zw==
X-Gm-Message-State: ALoCoQn5I9TsJ6DrhNerJxEuVfCGGjpsSY/0p6PsZbFIx1h/Hauj9fvctRbfw6F7/uPv+STtmkEQ
MIME-Version: 1.0
X-Received: by 10.107.156.6 with SMTP id f6mr273933ioe.163.1447805409292; Tue,
 17 Nov 2015 16:10:09 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Tue, 17 Nov 2015 16:10:09 -0800 (PST)
In-Reply-To: <rt-4.0.19-28684-1447802781-437.4145-21-0@openssl.org>
References: <RT-Ticket-4145@openssl.org>
	<CACsi2527hLC6HhBAiOHMOarvj7-3eYLpc_7T33OE4PXtrsbjuA@mail.gmail.com>
	<rt-4.0.19-28684-1447802781-437.4145-21-0@openssl.org>
Date: Tue, 17 Nov 2015 18:10:09 -0600
Message-ID: <CACsi252q_TZQEfaMGNicqk4JbyyMYFxnopJUnJnSH-3Ub0fjHw@mail.gmail.com>
Subject: Fwd: [openssl-dev] [openssl.org #4145] Enhancement: patch to support
 s_client -starttls http
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/mixed; boundary=001a1140ccc02032940524c57745

--001a1140ccc02032940524c57745
Content-Type: multipart/alternative; boundary=001a1140ccc020328e0524c57743

--001a1140ccc020328e0524c57743
Content-Type: text/plain; charset=UTF-8

I'm fairly certain this will be applied to 1.1.0 and not necessarily
backported to 1.0.2, so this hack might be useful to some of you
who want to test for the preservation of the SSLEngine optional
Upgrade: TLS/1.0 behavior on trunk and 2.4.x branch...



---------- Forwarded message ----------
From: William A. Rowe Jr. via RT <rt@openssl.org>
Date: Tue, Nov 17, 2015 at 5:26 PM
Subject: [openssl-dev] [openssl.org #4145] Enhancement: patch to support
s_client -starttls http
To:
Cc: openssl-dev@openssl.org


RFC 2817 defines upgrading HTTP/1.1 to TLS (or SSL).

Because Apache httpd supports Connection: Upgrade and Upgrade: TLS/1.x I've
gone ahead and instrumented s_client to support this behavior (and noted a
small optimization in the same logic stream for starttls support).

Attached is the patch to introduce this behavior.  It is a bit crufty, but
lacking a CUPS client that did connection upgrade to TLS, I needed
something for testing and experimentation.

I don't know that there is a justification for implementing Upgrade: h2
since this is a binary protocol that is not conducive to terminal mode :)

Source licensed by me under the OpenSSL license at
https://www.openssl.org/source/license.txt - don't see a need for a CLA,
but email me privately if so.


_______________________________________________
openssl-bugs-mod mailing list
openssl-bugs-mod@openssl.org
https://mta.openssl.org/mailman/listinfo/openssl-bugs-mod
_______________________________________________
openssl-dev mailing list
To unsubscribe: https://mta.openssl.org/mailman/listinfo/openssl-dev

--001a1140ccc020328e0524c57743
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">I&#39;m fairly certain this will be applied to 1.1.0 and n=
ot necessarily<div>backported to 1.0.2, so this hack might be useful to som=
e of you=C2=A0</div><div>who want to test for the preservation of the SSLEn=
gine optional=C2=A0</div><div>Upgrade: TLS/1.0 behavior on trunk and 2.4.x =
branch...<div><br></div><div><br></div><div><br><div class=3D"gmail_quote">=
---------- Forwarded message ----------<br>From: <b class=3D"gmail_senderna=
me">William A. Rowe Jr. via RT</b> <span dir=3D"ltr">&lt;<a href=3D"mailto:=
rt@openssl.org">rt@openssl.org</a>&gt;</span><br>Date: Tue, Nov 17, 2015 at=
 5:26 PM<br>Subject: [openssl-dev] [<a href=3D"http://openssl.org">openssl.=
org</a> #4145] Enhancement: patch to support s_client -starttls http<br>To:=
 <br>Cc: <a href=3D"mailto:openssl-dev@openssl.org">openssl-dev@openssl.org=
</a><br><br><br><div class=3D"HOEnZb"><div class=3D"h5">RFC 2817 defines up=
grading HTTP/1.1 to TLS (or SSL).<br>
<br>
Because Apache httpd supports Connection: Upgrade and Upgrade: TLS/1.x I&#3=
9;ve<br>
gone ahead and instrumented s_client to support this behavior (and noted a<=
br>
small optimization in the same logic stream for starttls support).<br>
<br>
Attached is the patch to introduce this behavior.=C2=A0 It is a bit crufty,=
 but<br>
lacking a CUPS client that did connection upgrade to TLS, I needed<br>
something for testing and experimentation.<br>
<br>
I don&#39;t know that there is a justification for implementing Upgrade: h2=
<br>
since this is a binary protocol that is not conducive to terminal mode :)<b=
r>
<br>
Source licensed by me under the OpenSSL license at<br>
<a href=3D"https://www.openssl.org/source/license.txt" rel=3D"noreferrer" t=
arget=3D"_blank">https://www.openssl.org/source/license.txt</a> - don&#39;t=
 see a need for a CLA,<br>
but email me privately if so.<br>
<br>
</div></div><br>_______________________________________________<br>
openssl-bugs-mod mailing list<br>
<a href=3D"mailto:openssl-bugs-mod@openssl.org">openssl-bugs-mod@openssl.or=
g</a><br>
<a href=3D"https://mta.openssl.org/mailman/listinfo/openssl-bugs-mod" rel=
=3D"noreferrer" target=3D"_blank">https://mta.openssl.org/mailman/listinfo/=
openssl-bugs-mod</a><br>_______________________________________________<br>
openssl-dev mailing list<br>
To unsubscribe: <a href=3D"https://mta.openssl.org/mailman/listinfo/openssl=
-dev" rel=3D"noreferrer" target=3D"_blank">https://mta.openssl.org/mailman/=
listinfo/openssl-dev</a><br>
<br></div><br></div></div></div>

--001a1140ccc020328e0524c57743--
--001a1140ccc02032940524c57745
Content-Type: text/x-patch; charset=ascii; name="starttls-http.patch"
Content-Disposition: attachment; filename="starttls-http.patch"
Content-Transfer-Encoding: base64
X-Attachment-Id: 54da0bb699184fad_0.1

ZGlmZiAtLWdpdCBhL2FwcHMvc19jbGllbnQuYyBiL2FwcHMvc19jbGllbnQuYw0KaW5kZXggZjgw
NzExZi4uNGZlOTA4ZCAxMDA2NDQNCi0tLSBhL2FwcHMvc19jbGllbnQuYw0KKysrIGIvYXBwcy9z
X2NsaWVudC5jDQpAQCAtNDAzLDcgKzQwMyw3IEBAIHN0YXRpYyB2b2lkIHNjX3VzYWdlKHZvaWQp
DQogICAgIEJJT19wcmludGYoYmlvX2VyciwNCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAg
ICAgICAncHJvdCcgZGVmaW5lcyB3aGljaCBvbmUgdG8gYXNzdW1lLiAgQ3VycmVudGx5LFxuIik7
DQogICAgIEJJT19wcmludGYoYmlvX2VyciwNCi0gICAgICAgICAgICAgICAiICAgICAgICAgICAg
ICAgICBvbmx5IFwic210cFwiLCBcInBvcDNcIiwgXCJpbWFwXCIsIFwiZnRwXCIgYW5kIFwieG1w
cFwiXG4iKTsNCisgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICBvbmx5IFwic210cFwi
LCBcInBvcDNcIiwgXCJpbWFwXCIsIFwiZnRwXCIsIFwieG1wcFwiIGFuZCBcImh0dHBcIlxuIik7
DQogICAgIEJJT19wcmludGYoYmlvX2VyciwgIiAgICAgICAgICAgICAgICAgYXJlIHN1cHBvcnRl
ZC5cbiIpOw0KICNpZm5kZWYgT1BFTlNTTF9OT19FTkdJTkUNCiAgICAgQklPX3ByaW50ZihiaW9f
ZXJyLA0KQEAgLTY1NSw3ICs2NTUsOCBAQCBlbnVtIHsNCiAgICAgUFJPVE9fUE9QMywNCiAgICAg
UFJPVE9fSU1BUCwNCiAgICAgUFJPVE9fRlRQLA0KLSAgICBQUk9UT19YTVBQDQorICAgIFBST1RP
X1hNUFAsDQorICAgIFBST1RPX0hUVFANCiB9Ow0KIA0KIGludCBNQUlOKGludCwgY2hhciAqKik7
DQpAQCAtMTA3Nyw2ICsxMDc4LDggQEAgaW50IE1BSU4oaW50IGFyZ2MsIGNoYXIgKiphcmd2KQ0K
ICAgICAgICAgICAgICAgICBzdGFydHRsc19wcm90byA9IFBST1RPX0ZUUDsNCiAgICAgICAgICAg
ICBlbHNlIGlmIChzdHJjbXAoKmFyZ3YsICJ4bXBwIikgPT0gMCkNCiAgICAgICAgICAgICAgICAg
c3RhcnR0bHNfcHJvdG8gPSBQUk9UT19YTVBQOw0KKyAgICAgICAgICAgIGVsc2UgaWYgKHN0cmNt
cCgqYXJndiwgImh0dHAiKSA9PSAwKQ0KKyAgICAgICAgICAgICAgICBzdGFydHRsc19wcm90byA9
IFBST1RPX0hUVFA7DQogICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICBnb3RvIGJh
ZDsNCiAgICAgICAgIH0NCkBAIC0xNjMyLDggKzE2MzUsNyBAQCBpbnQgTUFJTihpbnQgYXJnYywg
Y2hhciAqKmFyZ3YpDQogICAgICAgICBCSU9fZnJlZShmYmlvKTsNCiAgICAgICAgIEJJT19wcmlu
dGYoc2JpbywgIkFVVEggVExTXHJcbiIpOw0KICAgICAgICAgQklPX3JlYWQoc2Jpbywgc2J1Ziwg
QlVGU0laWik7DQotICAgIH0NCi0gICAgaWYgKHN0YXJ0dGxzX3Byb3RvID09IFBST1RPX1hNUFAp
IHsNCisgICAgfSBlbHNlIGlmIChzdGFydHRsc19wcm90byA9PSBQUk9UT19YTVBQKSB7DQogICAg
ICAgICBpbnQgc2VlbiA9IDA7DQogICAgICAgICBCSU9fcHJpbnRmKHNiaW8sICI8c3RyZWFtOnN0
cmVhbSAiDQogICAgICAgICAgICAgICAgICAgICJ4bWxuczpzdHJlYW09J2h0dHA6Ly9ldGhlcngu
amFiYmVyLm9yZy9zdHJlYW1zJyAiDQpAQCAtMTY1NCw2ICsxNjU2LDU0IEBAIGludCBNQUlOKGlu
dCBhcmdjLCBjaGFyICoqYXJndikNCiAgICAgICAgIGlmICghc3Ryc3RyKHNidWYsICI8cHJvY2Vl
ZCIpKQ0KICAgICAgICAgICAgIGdvdG8gc2h1dDsNCiAgICAgICAgIG1idWZbMF0gPSAwOw0KKyAg
ICB9IGVsc2UgaWYgKHN0YXJ0dGxzX3Byb3RvID09IFBST1RPX0hUVFApIHsNCisgICAgICAgIGlu
dCBmb3VuZGl0ID0gMDsNCisgICAgICAgIEJJTyAqZmJpbyA9IEJJT19uZXcoQklPX2ZfYnVmZmVy
KCkpOw0KKyAgICAgICAgQklPX3B1c2goZmJpbywgc2Jpbyk7DQorICAgICAgICBCSU9fcHJpbnRm
KGZiaW8sICJPUFRJT05TICogSFRUUC8xLjFcclxuIik7DQorICAgICAgICBCSU9fcHJpbnRmKGZi
aW8sICJDb25uZWN0aW9uOiBVcGdyYWRlXHJcbiIpOw0KKyAgICAgICAgQklPX3ByaW50ZihmYmlv
LCAiSG9zdDogJXNcclxuIiwgaG9zdCk7DQorICAgICAgICBpZiAoMCkNCisgICAgICAgICAgICA7
IC8qIHRvIGdyYWNlZnVsbHkgcmVzdW1lIGJlbG93Li4uICovDQorI2lmbmRlZiBPUEVOU1NMX05P
X1NTTDINCisgICAgICAgIGVsc2UgaWYgKG1ldGggPT0gU1NMdjJfY2xpZW50X21ldGhvZCgpKQ0K
KyAgICAgICAgICAgIEJJT19wcmludGYoZmJpbywgIlVwZ3JhZGU6IFNTTC8yLjBcclxuIik7DQor
I2VuZGlmDQorI2lmbmRlZiBPUEVOU1NMX05PX1NTTDNfTUVUSE9EDQorICAgICAgICBlbHNlIGlm
IChtZXRoID09IFNTTHYzX2NsaWVudF9tZXRob2QoKSkNCisgICAgICAgICAgICBCSU9fcHJpbnRm
KGZiaW8sICJVcGdyYWRlOiBTU0wvMy4wXHJcbiIpOw0KKyNlbmRpZg0KKyNpZm5kZWYgT1BFTlNT
TF9OT19UTFMxDQorICAgICAgICBlbHNlIGlmIChtZXRoID0gVExTdjFfMl9jbGllbnRfbWV0aG9k
KCkpDQorICAgICAgICAgICAgQklPX3ByaW50ZihmYmlvLCAiVXBncmFkZTogVExTLzEuMlxyXG4i
KTsNCisgICAgICAgIGVsc2UgaWYgKG1ldGggPSBUTFN2MV8xX2NsaWVudF9tZXRob2QoKSkNCisg
ICAgICAgICAgICBCSU9fcHJpbnRmKGZiaW8sICJVcGdyYWRlOiBUTFMvMS4xXHJcbiIpOw0KKyAg
ICAgICAgZWxzZSBpZiAobWV0aCA9IFRMU3YxX2NsaWVudF9tZXRob2QoKSkNCisgICAgICAgICAg
ICBCSU9fcHJpbnRmKGZiaW8sICJVcGdyYWRlOiBUTFMvMS4wXHJcbiIpOw0KKyNlbmRpZg0KKyAg
ICAgICAgLyogQklPX3ByaW50ZihmYmlvLCAiVXBncmFkZTogVExTLzEuMixUTFMvMS4xLFRMUy8x
LjBcclxuIik7DQorICAgICAgICAgKi8NCisgICAgICAgIEJJT19wcmludGYoZmJpbywgIlVzZXIt
QWdlbnQ6IHNfY2xpZW50LyVzIE9wZW5TU0wvJXNcclxuIiwNCisgICAgICAgICAgICAgICAgICAg
T1BFTlNTTF9WRVJTSU9OX1RFWFQsIFNTTGVheV92ZXJzaW9uKFNTTEVBWV9WRVJTSU9OKSk7DQor
ICAgICAgICBCSU9fcHJpbnRmKGZiaW8sICJcclxuIik7DQorICAgICAgICAodm9pZClCSU9fZmx1
c2goZmJpbyk7DQorICAgICAgICAvKiB3YWl0IGZvciBtdWx0aS1saW5lIEhUVFAvMS4xIDEwMSBT
d2l0Y2hpbmcgUHJvdG9jb2xzIHJlc3BvbnNlICovDQorICAgICAgICBtYnVmX2xlbiA9IEJJT19n
ZXRzKGZiaW8sIG1idWYsIEJVRlNJWlopOw0KKyAgICAgICAgQklPX3ByaW50ZihiaW9fZXJyLCAi
JXMiLCBtYnVmKTsNCisgICAgICAgIGlmIChzdHJzdHIobWJ1ZiwgIiAxMDEgIikpDQorICAgICAg
ICAgICAgZm91bmRpdCA9IDE7DQorICAgICAgICBkbyB7DQorICAgICAgICAgICAgbWJ1Zl9sZW4g
PSBCSU9fZ2V0cyhmYmlvLCBtYnVmLCBCVUZTSVpaKTsNCisgICAgICAgICAgICBCSU9fcHJpbnRm
KGJpb19lcnIsICIlcyIsIG1idWYpOw0KKyAgICAgICAgfQ0KKyAgICAgICAgd2hpbGUgKG1idWZf
bGVuID49IDIgJiYgbWJ1ZlswXSAhPSAnXHInICYmIG1idWZbMV0gIT0gJ1xuJyk7DQorICAgICAg
ICAodm9pZClCSU9fZmx1c2goZmJpbyk7DQorICAgICAgICBCSU9fcG9wKGZiaW8pOw0KKyAgICAg
ICAgQklPX2ZyZWUoZmJpbyk7DQorICAgICAgICBpZiAoIWZvdW5kaXQpDQorICAgICAgICAgICAg
QklPX3ByaW50ZihiaW9fZXJyLA0KKyAgICAgICAgICAgICAgICAgICAgICAgIlNlcnZlciByZXNw
b25zZSB3YXMgbm90IDEwMSBTd2l0Y2hpbmcgUHJvdG9jb2xzIg0KKyAgICAgICAgICAgICAgICAg
ICAgICAgIiB0cnkgYW55d2F5Li4uXG4iKTsNCiAgICAgfQ0KIA0KICAgICBmb3IgKDs7KSB7DQo=
--001a1140ccc02032940524c57745--

From dev-return-84595-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 00:59:41 2015
Return-Path: <dev-return-84595-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BD3D118432
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 00:59:41 +0000 (UTC)
Received: (qmail 47594 invoked by uid 500); 18 Nov 2015 00:59:41 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 47506 invoked by uid 500); 18 Nov 2015 00:59:41 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 47496 invoked by uid 99); 18 Nov 2015 00:59:41 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 00:59:41 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id C05EEC05AD
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 00:59:40 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id WYwBKozpwb1l for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 00:59:33 +0000 (UTC)
Received: from mail-wm0-f53.google.com (mail-wm0-f53.google.com [74.125.82.53])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 03B6A20C41
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 00:59:32 +0000 (UTC)
Received: by wmww144 with SMTP id w144so50606381wmw.0
        for <dev@httpd.apache.org>; Tue, 17 Nov 2015 16:59:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:content-language
         :thread-index;
        bh=aeYottCR4Q5OPDGHeiRdgHUI5mEUAbmAI86ALjR6584=;
        b=Mn1UozerMwF8S8D1GbhjTWzZ5pqAoKKQpmQ231vx3S42MkqKJGv8OiyPCXh/zDJf8v
         xasLpBb+lkcS5N+grNSNRjyMG+vGOz7J6I3+Bw+VJzpX3aXvENS5KV23kynGYN6Fua0l
         dc/R0jHi5X/xwNXSRPcoz8lT1yKwmvTYRFTpM=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :content-language:thread-index;
        bh=aeYottCR4Q5OPDGHeiRdgHUI5mEUAbmAI86ALjR6584=;
        b=e1NHi301uQfOfIsHOZV9dUzDUdNb1e7NXvNqKkRBADzudP2a5qCD9k08SuO2xbvj8K
         KNbF5EZuQy1FmKAy8VBpsHEf3rcsGIy2jr5Cfi59sWNvUKav4PPId0ChN+Ms6kQXXJ45
         v40bVLvtl2rCZBD1v1LejwH/Z4glGSWYk5rLvOpv+/ovnUvFUYAGM8CozZ/4OfOiALRO
         a0IQWAHFLzKhUlEJM06BWReRayLkxEQzO4yLgt7ri1lpyAk4ZoxI4A9HaBt8f/hWDVx7
         CFzQZjGE+0mLvjvwqqifal6QZTcBsAQglbi/L4fNRJEcnXCp3ZKnRByIBkN+pByyxDXg
         xBPw==
X-Gm-Message-State: ALoCoQnlonr+KwSIipMZ2vC/c8ENK0hxiDeCUQz0e8lr0d7fiRm7E7ZJw9Gur4Jk/zyL36AJ4w0L
X-Received: by 10.194.87.39 with SMTP id u7mr46141293wjz.11.1447808371326;
        Tue, 17 Nov 2015 16:59:31 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id l1sm598492wmg.21.2015.11.17.16.59.30
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 17 Nov 2015 16:59:30 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <008501d11ec5$313f5600$93be0200$@qqmail.nl>	<CF636B95-51D9-40CD-91B3-51B883DD9BDC@greenbytes.de>	<028a01d120a4$56ebbbb0$04c33310$@qqmail.nl> <CAKQ1sVPZj1Cm2UPbLbKyPC0qLFmKmLqav1qO5+hWMkcnHH7+Ww@mail.gmail.com>
In-Reply-To: <CAKQ1sVPZj1Cm2UPbLbKyPC0qLFmKmLqav1qO5+hWMkcnHH7+Ww@mail.gmail.com>
Subject: RE: mod_http2 / H2WindowSize default
Date: Wed, 18 Nov 2015 01:59:23 +0100
Message-ID: <049e01d1219c$5faa8300$1eff8900$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 16.0
Content-Language: nl
Thread-Index: AQJvlDD3t8ycaY0x91kDVNFMWrOccwKG2ZfTA5C3bAsCadtTBp0gBEzA



> -----Original Message-----
> From: Yann Ylavic [mailto:ylavic.dev@gmail.com]
> Sent: dinsdag 17 november 2015 00:49
> To: httpd-dev <dev@httpd.apache.org>
> Subject: Re: mod_http2 / H2WindowSize default
>=20
> On Mon, Nov 16, 2015 at 8:23 PM, Bert Huijben <bert@qqmail.nl> wrote:
> >
> > Currently it looks like bodies of requests are not delivered over =
http/2
> unless I add a Content-Length header to the request.
>=20
> Do you mean it does not work with the "Transfer-Encoding: chunked"
> header either?

Not following up on this:
http/2 strictly disallows transfer-encoding chunked.


http/2 always uses streams and framing... completely different system, =
but solves the same problem as chunking did in http/1.1.

If a content-length header exists, it is transferred... but it isn't =
used at the protocol level.=20
(In most cases it is still used at the application level, but that is a =
different story)

	Bert


From dev-return-84596-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 07:11:51 2015
Return-Path: <dev-return-84596-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2F9F61822C
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 07:11:51 +0000 (UTC)
Received: (qmail 72875 invoked by uid 500); 18 Nov 2015 07:11:50 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 72781 invoked by uid 500); 18 Nov 2015 07:11:50 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 72771 invoked by uid 99); 18 Nov 2015 07:11:50 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 07:11:50 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 1E3831A41D9
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 07:11:50 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.009
X-Spam-Level:
X-Spam-Status: No, score=-0.009 tagged_above=-999 required=6.31
	tests=[SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01,
	UNPARSEABLE_RELAY=0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id WIm8gb2-sIYO for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 07:11:44 +0000 (UTC)
Received: from mail.ausics.net (valhalla.ausics.net [27.33.160.23])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 6199E439B6
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 07:11:43 +0000 (UTC)
Received: from mail.ausics.net (valhalla.ausics.net [10.10.0.10])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.ausics.net (Postfix) with ESMTPSA id 90790C0E04C
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 17:11:38 +1000 (AEST)
Received: from mpNGI7K71v6duvRv8fxLORQiPSB+YxxwcNiHbweAtGA=
 (6wD/nFWkOZ6Ppxh3voRac6odFk09A7CP)
 by mail.ausics.net
 with HTTP (HTTP/1.1 POST); Wed, 18 Nov 2015 17:11:38 +1000
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8;
 format=flowed
Content-Transfer-Encoding: 8bit
Date: Wed, 18 Nov 2015 17:11:38 +1000
From: Noel Butler <noel.butler@ausics.net>
To: dev@httpd.apache.org
Subject: Re: 2.4.18?
In-Reply-To: <3EDB21F5-343A-46CB-874D-08DA7C4D86DE@sharp.fm>
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net>
 <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com>
 <139befce90c51c313f7b512915241f71@ausics.net>
 <93FFD147-A1B3-4902-B2C2-630EB7742C0D@sharp.fm>
 <623514d11afa03abfdbf687643130442@ausics.net>
 <3EDB21F5-343A-46CB-874D-08DA7C4D86DE@sharp.fm>
Message-ID: <137dbab0d0d5e1199ae660d5c449504d@ausics.net>
X-Sender: noel.butler@ausics.net
User-Agent: Roundcube Webmail

On 17/11/2015 22:31, Graham Leggett wrote:
> On 17 Nov 2015, at 2:18 PM, Noel Butler <noel.butler@ausics.net> wrote:
> 
>> You run into complacency dangers if you end up in a "release very 
>> often" mode, take phpmyadmin as one example, most admins I know gave 
>> up updating it, because there were updates every week, sometimes  
>> every few days, Marc has accepted this is a serious problem and unless 
>> a critical security bug is found, , normal bug fixes releases will be 
>> only once per month if need be, take dovecot, not so bad now days but 
>> in years gone by, it too released weekly or bi-weekly and a lot of 
>> people got pissed and stopped updating it too.
> 
> Im not understanding your point - youre saying normal bug fix
> releases once a month is fine, but us doing so after 5 weeks isnt
> fine?


absolutely not! I personally only update  phpmyadmin once, on initial 
major release, because I (like many others) were so of updating it every 
few days .


> 
> Weve just released HTTP/2 support for the very first time. People
> want to use it, people want to see problems in it fixed. I dont see
> the number of releases as excessive at all.
> 

You obviously dont manage very many public facing servers then, I have 
that advantage of looking at it from both sides, when I do testing - I 
test based on what sys admins want.


> Regards,
> Graham
> 

-- 
If you have the urge to reply to all rather than reply to list, you best
read  http://members.ausics.net/qwerty/

From dev-return-84597-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 07:16:35 2015
Return-Path: <dev-return-84597-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 106F61825A
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 07:16:35 +0000 (UTC)
Received: (qmail 79741 invoked by uid 500); 18 Nov 2015 07:16:34 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 79666 invoked by uid 500); 18 Nov 2015 07:16:34 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 79653 invoked by uid 99); 18 Nov 2015 07:16:34 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 07:16:34 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 309D9C0EC7
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 07:16:34 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.008
X-Spam-Level:
X-Spam-Status: No, score=-0.008 tagged_above=-999 required=6.31
	tests=[T_RP_MATCHES_RCVD=-0.01, UNPARSEABLE_RELAY=0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 6JhE8v06Zt1P for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 07:16:27 +0000 (UTC)
Received: from mail.ausics.net (valhalla.ausics.net [27.33.160.23])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 0DE8E21195
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 07:16:26 +0000 (UTC)
Received: from mail.ausics.net (valhalla.ausics.net [10.10.0.10])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.ausics.net (Postfix) with ESMTPSA id 3E888C0E050
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 17:16:17 +1000 (AEST)
Received: from mizQ9/J65JeOaev3mhDjcx4VlxBWOQ9F5I/yJ+OxVac=
 (3gCpWchzn4UybqEGd2vUK4OvkB68MGNz)
 by mail.ausics.net
 with HTTP (HTTP/1.1 POST); Wed, 18 Nov 2015 17:16:16 +1000
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII;
 format=flowed
Content-Transfer-Encoding: 7bit
Date: Wed, 18 Nov 2015 17:16:16 +1000
From: Noel Butler <noel.butler@ausics.net>
To: dev@httpd.apache.org
Subject: Re: 2.4.18?
In-Reply-To: <564B1E9F.9040100@thelounge.net>
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net>
 <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com>
 <139befce90c51c313f7b512915241f71@ausics.net>
 <BCBFC8FF-EE49-4E2F-8783-69DECEB025EF@greenbytes.de>
 <d4d0ad850c6aa9f3b5186929bad23d71@ausics.net>
 <564B1E9F.9040100@thelounge.net>
Message-ID: <46dd21388865d4a6b41e72cf00cd0303@ausics.net>
X-Sender: noel.butler@ausics.net
User-Agent: Roundcube Webmail

On 17/11/2015 22:33, Reindl Harald wrote:

> 
> 5 or 6 bloody weeks is a month - so what's the problem?
> any other software but httpd is allowed to have monthly updates?
> 
> "I can accept" - seriously - you can just ignore a release when you
> think it's not important for you but i don't get why anybody else
> should wait for available non-security bugfixes just because you feel
> like someone enforces you to update your server

your problem harry as usual is you dont comprehend whats said, because i 
never once said it was OK for that other software, in fact its made 
clear otherwise, but I'll grant you your comments based only on the fact 
you have little comprehension of english and rely on translators.



-- 
If you have the urge to reply to all rather than reply to list, you best
read  http://members.ausics.net/qwerty/

From dev-return-84598-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 08:22:07 2015
Return-Path: <dev-return-84598-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BB97B1862E
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 08:22:07 +0000 (UTC)
Received: (qmail 24853 invoked by uid 500); 18 Nov 2015 08:22:07 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 24781 invoked by uid 500); 18 Nov 2015 08:22:07 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 24767 invoked by uid 99); 18 Nov 2015 08:22:07 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 08:22:07 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id C097FC05AD
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 08:22:06 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.701
X-Spam-Level:
X-Spam-Status: No, score=0.701 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	KAM_ASCII_DIVIDERS=0.8, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 7gOSU_5csdXy for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 08:21:58 +0000 (UTC)
Received: from mail-qg0-f47.google.com (mail-qg0-f47.google.com [209.85.192.47])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id DB9482022D
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 08:21:57 +0000 (UTC)
Received: by qgea14 with SMTP id a14so22939422qge.0
        for <dev@httpd.apache.org>; Wed, 18 Nov 2015 00:21:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=SrPmhSLRlRUJVYO71EBOghS+QDunhVl1znAFKGHWV7Q=;
        b=COxCI4pTo0UTwA7LBTQ3lZewUkP/mxaXuyiZE8uwPImUtszqjX5kd89JlVZJfqtvZY
         TaqXJ2qy1ZqE2ng3e0SWVaQv97SR7dKiDUCZ1QJMbkdACo4orKZstL0XDFZncELirYe8
         bv6NXFI14pgBXl+YuVIe4kRUuTZi0i9dfGzyozIfwF9bEXEvWNbYj7TDqwJDZwwowWYI
         6jTbFXbYlRJMiBJH6aVm8jv+C62Lv19LhKNs+fSgCwWEcUxsaP/KJSk62vYf7tLOtUbA
         3I3Flwts/xxH2DmUowM8jnk+CsvQOEzoONsEBV/YmJzfQ/nHnjdBXiCi6qwqXtxjh9oi
         H1ew==
MIME-Version: 1.0
X-Received: by 10.140.96.45 with SMTP id j42mr188959qge.92.1447834916948; Wed,
 18 Nov 2015 00:21:56 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Wed, 18 Nov 2015 00:21:56 -0800 (PST)
In-Reply-To: <CACsi252q_TZQEfaMGNicqk4JbyyMYFxnopJUnJnSH-3Ub0fjHw@mail.gmail.com>
References: <RT-Ticket-4145@openssl.org>
	<CACsi2527hLC6HhBAiOHMOarvj7-3eYLpc_7T33OE4PXtrsbjuA@mail.gmail.com>
	<rt-4.0.19-28684-1447802781-437.4145-21-0@openssl.org>
	<CACsi252q_TZQEfaMGNicqk4JbyyMYFxnopJUnJnSH-3Ub0fjHw@mail.gmail.com>
Date: Wed, 18 Nov 2015 09:21:56 +0100
Message-ID: <CAKQ1sVMQMcRMoWaX6OnJu9Ro2Q+JABRv0hr_zKN2RfjxEibzBw@mail.gmail.com>
Subject: Re: [openssl-dev] [openssl.org #4145] Enhancement: patch to support
 s_client -starttls http
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

Hi Bill,

thanks, this will be quite useful.

A little note, probably some missing == here:
+        else if (meth = TLSv1_2_client_method())
+            BIO_printf(fbio, "Upgrade: TLS/1.2\r\n");
+        else if (meth = TLSv1_1_client_method())
+            BIO_printf(fbio, "Upgrade: TLS/1.1\r\n");
+        else if (meth = TLSv1_client_method())
+            BIO_printf(fbio, "Upgrade: TLS/1.0\r\n");
+

Cheers,
Yann.

On Wed, Nov 18, 2015 at 1:10 AM, William A Rowe Jr <wrowe@rowe-clan.net> wrote:
> I'm fairly certain this will be applied to 1.1.0 and not necessarily
> backported to 1.0.2, so this hack might be useful to some of you
> who want to test for the preservation of the SSLEngine optional
> Upgrade: TLS/1.0 behavior on trunk and 2.4.x branch...
>
>
>
> ---------- Forwarded message ----------
> From: William A. Rowe Jr. via RT <rt@openssl.org>
> Date: Tue, Nov 17, 2015 at 5:26 PM
> Subject: [openssl-dev] [openssl.org #4145] Enhancement: patch to support
> s_client -starttls http
> To:
> Cc: openssl-dev@openssl.org
>
>
> RFC 2817 defines upgrading HTTP/1.1 to TLS (or SSL).
>
> Because Apache httpd supports Connection: Upgrade and Upgrade: TLS/1.x I've
> gone ahead and instrumented s_client to support this behavior (and noted a
> small optimization in the same logic stream for starttls support).
>
> Attached is the patch to introduce this behavior.  It is a bit crufty, but
> lacking a CUPS client that did connection upgrade to TLS, I needed
> something for testing and experimentation.
>
> I don't know that there is a justification for implementing Upgrade: h2
> since this is a binary protocol that is not conducive to terminal mode :)
>
> Source licensed by me under the OpenSSL license at
> https://www.openssl.org/source/license.txt - don't see a need for a CLA,
> but email me privately if so.
>
>
> _______________________________________________
> openssl-bugs-mod mailing list
> openssl-bugs-mod@openssl.org
> https://mta.openssl.org/mailman/listinfo/openssl-bugs-mod
> _______________________________________________
> openssl-dev mailing list
> To unsubscribe: https://mta.openssl.org/mailman/listinfo/openssl-dev
>
>

From dev-return-84599-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 09:48:14 2015
Return-Path: <dev-return-84599-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B2747189BA
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 09:48:14 +0000 (UTC)
Received: (qmail 31191 invoked by uid 500); 18 Nov 2015 09:48:14 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 31126 invoked by uid 500); 18 Nov 2015 09:48:14 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 31116 invoked by uid 99); 18 Nov 2015 09:48:14 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 09:48:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id B4A3D180A4D
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 09:48:13 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.012
X-Spam-Level:
X-Spam-Status: No, score=-0.012 tagged_above=-999 required=6.31
	tests=[SPF_HELO_PASS=-0.001, SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id ljXG-16VHDlX for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 09:48:12 +0000 (UTC)
Received: from mail.thelounge.net (mail.thelounge.net [91.118.73.15])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id D734E2154C
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 09:48:11 +0000 (UTC)
Subject: Re: 2.4.18?
To: dev@httpd.apache.org
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net>
 <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com>
 <139befce90c51c313f7b512915241f71@ausics.net>
 <BCBFC8FF-EE49-4E2F-8783-69DECEB025EF@greenbytes.de>
 <d4d0ad850c6aa9f3b5186929bad23d71@ausics.net>
 <564B1E9F.9040100@thelounge.net>
 <46dd21388865d4a6b41e72cf00cd0303@ausics.net>
From: Reindl Harald <h.reindl@thelounge.net>
Openpgp: id=13540402D67A7F71C6E974EA866063CF7F780279;
 url=https://arrakis.thelounge.net/gpg/h.reindl_thelounge.net.pub.txt
X-Enigmail-Draft-Status: N1110
Organization: the lounge interactive design
Message-ID: <564C4952.5030008@thelounge.net>
Date: Wed, 18 Nov 2015 10:48:02 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <46dd21388865d4a6b41e72cf00cd0303@ausics.net>
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="CXV65l9OKGQAmQxExchVQ2jTFeC2Ne5Q0"

This is an OpenPGP/MIME signed message (RFC 4880 and 3156)
--CXV65l9OKGQAmQxExchVQ2jTFeC2Ne5Q0
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: quoted-printable



Am 18.11.2015 um 08:16 schrieb Noel Butler:
> On 17/11/2015 22:33, Reindl Harald wrote:
>>
>> 5 or 6 bloody weeks is a month - so what's the problem?
>> any other software but httpd is allowed to have monthly updates?
>>
>> "I can accept" - seriously - you can just ignore a release when you
>> think it's not important for you but i don't get why anybody else
>> should wait for available non-security bugfixes just because you feel
>> like someone enforces you to update your server
>
> your problem harry as usual is you dont comprehend whats said, because =
i
> never once said it was OK for that other software, in fact its made
> clear otherwise, but I'll grant you your comments based only on the fac=
t
> you have little comprehension of english and rely on translators.

no i don't rely on a translator, i just read you other posts too before=20
reply and one part of that was "take phpmyadmin as one example, most=20
admins I know gave up updating it, because there were updates every=20
week, sometimes  every few days, Marc has accepted this is a serious=20
problem and unless a critical security bug is found, normal bug fixes=20
releases will be only once per month if need be"

and here we talk about that *one month* - so what's the problem?

anyways, if you can't cope with monthly updates and in doubt decide if=20
they are relevant at all hire somebody who can cope or just install a=20
LTS distribution only delivering critical bugfixes


--CXV65l9OKGQAmQxExchVQ2jTFeC2Ne5Q0
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2

iEYEARECAAYFAlZMSVIACgkQhmBjz394AnkaWACeJYuuaqjrj7v3bgQhbi+kRlWN
rpgAnjrseWea1ZpVkTO9466bLWwhPBBm
=j5Pn
-----END PGP SIGNATURE-----

--CXV65l9OKGQAmQxExchVQ2jTFeC2Ne5Q0--

From dev-return-84600-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 09:52:56 2015
Return-Path: <dev-return-84600-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 02FB0189EA
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 09:52:56 +0000 (UTC)
Received: (qmail 40562 invoked by uid 500); 18 Nov 2015 09:52:55 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 40490 invoked by uid 500); 18 Nov 2015 09:52:55 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 40480 invoked by uid 99); 18 Nov 2015 09:52:55 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 09:52:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 249C9C07D8
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 09:52:55 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.011
X-Spam-Level:
X-Spam-Status: No, score=-0.011 tagged_above=-999 required=6.31
	tests=[SPF_HELO_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id pYts98i6XxOs for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 09:52:51 +0000 (UTC)
Received: from mail.thelounge.net (mail.thelounge.net [91.118.73.15])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id CC32220C41
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 09:52:50 +0000 (UTC)
Subject: Re: 2.4.18?
To: dev@httpd.apache.org
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net>
 <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com>
 <139befce90c51c313f7b512915241f71@ausics.net>
 <93FFD147-A1B3-4902-B2C2-630EB7742C0D@sharp.fm>
 <623514d11afa03abfdbf687643130442@ausics.net>
 <3EDB21F5-343A-46CB-874D-08DA7C4D86DE@sharp.fm>
 <137dbab0d0d5e1199ae660d5c449504d@ausics.net>
From: Reindl Harald <h.reindl@thelounge.net>
Openpgp: id=13540402D67A7F71C6E974EA866063CF7F780279;
 url=https://arrakis.thelounge.net/gpg/h.reindl_thelounge.net.pub.txt
X-Enigmail-Draft-Status: N1110
Organization: the lounge interactive design
Message-ID: <564C4A71.8040103@thelounge.net>
Date: Wed, 18 Nov 2015 10:52:49 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <137dbab0d0d5e1199ae660d5c449504d@ausics.net>
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="CWrqwAS3xijxrMPUR4xiEo8tBimIRe3nR"

This is an OpenPGP/MIME signed message (RFC 4880 and 3156)
--CWrqwAS3xijxrMPUR4xiEo8tBimIRe3nR
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: quoted-printable


Am 18.11.2015 um 08:11 schrieb Noel Butler:
> On 17/11/2015 22:31, Graham Leggett wrote:
>> We=E2=80=99ve just released HTTP/2 support for the very first time. Pe=
ople
>> want to use it, people want to see problems in it fixed. I don=E2=80=99=
t see
>> the number of releases as excessive at all.
>
> You obviously dont manage very many public facing servers then, I have
> that advantage of looking at it from both sides, when I do testing - I
> test based on what sys admins want

not in my name!

i manage enough public facing servers, maintain enough RPM packages at=20
my own and have no problem put a new release tarball below=20
rpmbuild/SOURFCES, edit the version in the SPEC file and build a package =

followed by standard tests and automated deployment

not for MariaDB, not for PHP, not for anything else and as long as i can =

deploy weekly kernel updates for 35 machines (and yes for some times=20
they are weekly) i can cope with monthly httpd updates pretty fine


--CWrqwAS3xijxrMPUR4xiEo8tBimIRe3nR
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2

iEYEARECAAYFAlZMSnEACgkQhmBjz394AnkAlQCfcX9X7LJ56niL4c3OuMnu0gwb
PkUAnjnyeKJkhR6WFX8s30lqh2dYY6ah
=Zcb1
-----END PGP SIGNATURE-----

--CWrqwAS3xijxrMPUR4xiEo8tBimIRe3nR--

From dev-return-84601-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 11:17:18 2015
Return-Path: <dev-return-84601-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4082418D3C
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 11:17:18 +0000 (UTC)
Received: (qmail 17899 invoked by uid 500); 18 Nov 2015 11:17:17 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 17831 invoked by uid 500); 18 Nov 2015 11:17:17 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 17821 invoked by uid 99); 18 Nov 2015 11:17:17 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 11:17:17 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id D082EC7190
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 11:17:16 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.653
X-Spam-Level:
X-Spam-Status: No, score=-0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RP_MATCHES_RCVD=-0.553, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id zt6Zy4xtVl_b for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 11:17:07 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id D701F439B6
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 11:17:06 +0000 (UTC)
Received: from [192.168.1.134] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 133BD15A0531
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 12:17:05 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447845425; bh=grl6RYgd9KXfCobTpXkmQJcf/DoT26/CPvqY7Br8/oI=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=rl0AZDOUcLGHW0UF/H06EG9c6z1bIkUvqXrdw6yNA0clkz5oUTRYHMEKxxcdb2auh
	 kl8DHFdxisfAQoZUZNh3mlygS/AFB/rehC251m1EJUovVfpZgsX/Hw9lBAwgjZrnZL
	 UTZ8cFkNbiYRhuNgLkMQ8/Gna8ReTMOjeRaYtK5c=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: 2.4.18 backporting
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <C7BF422C-73B6-4E97-893F-11E5B0AA705E@jaguNET.com>
Date: Wed, 18 Nov 2015 12:17:04 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <3853FAF7-E235-4016-82E8-C2A7CBCB0DC1@greenbytes.de>
References: <DCA25590-E588-4AD5-8B68-6E473764F773@greenbytes.de> <D9EF2A21-F446-4DE2-A1C4-A22F2D0BECF6@jaguNET.com> <3D49817D-DD89-4D8E-B7C3-257D3FF7D1C8@jaguNET.com> <9C3DA6EF-0AAB-496B-B502-0CFDAAB89F13@greenbytes.de> <BF3A59FA-C287-4C32-A41B-240599D55829@jaguNET.com> <E095C163-F046-4C9C-A912-5183E710817B@greenbytes.de> <47BE49D3-48FB-4054-AFB9-3460015F84E7@jaguNET.com> <04A2D4C6-894B-443E-B4EB-3586626247B9@greenbytes.de> <C41522BC-3280-467A-B895-E7465D2C6D9E@jaguNET.com> <4B4ED947-BEB3-49DD-A1AE-D45921ECB603@greenbytes.de> <C7BF422C-73B6-4E97-893F-11E5B0AA705E@jaguNET.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

OK, test framework fixed in r1714972

http2 vhost test cases will not run unless openssl >=3D 1.0.0
http2 tests will work on a 2.4.17 and 2.5-DEV
http2 test 52 will fail on a 2.4.18-DEV without the proposed core =
protocols changes
http2 tests will work on a 2.4.18-DEV with changes applied

Hope this works for everyone. Sorry for the initial confusion.

//Stefan

> Am 17.11.2015 um 18:08 schrieb Jim Jagielski <jim@jaguNET.com>:
>=20
> No issues under CentOS...
>=20
>> On Nov 17, 2015, at 11:28 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>=20
>> That's cheating...
>>=20
>> I'll let you know when it works for me in such a configuration.
>>=20
>>> Am 17.11.2015 um 16:51 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>=20
>>> My perl is built against openssl 1.0.2...
>>>=20
>>>> On Nov 17, 2015, at 10:43 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>=20
>>>> OK, the problem on OS X is that the default openssl is 0.98 which =
does not do SNI.
>>>>=20
>>>> I try to detect this in lines 14-17 by:
>>>> my $alpn_available =3D exists &Net::SSLeay::CTX_set_alpn_protos;
>>>> if ($alpn_available) {
>>>> $total_tests +=3D $vhost_suite;
>>>> }
>>>>=20
>>>> and change the test case expectations accordingly. That seems to =
fail on your system. The test case thinks ALPN+SNI are available and =
wants to see "localhost" in the response, but it is not used.
>>>>=20
>>>> Unnecessary to say that the detection (and therefore the tests) =
work on my OS X installation - also before 10.11.
>>>>=20
>>>> Hmmm....are there SNI test cases for mod_ssl where I could see how =
it detects it?
>>>>=20
>>>>=20
>>>>> Am 17.11.2015 um 16:30 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>>>=20
>>>>> Still:
>>>>>=20
>>>>> t/modules/http2.t .. 26/51
>>>>> # Failed test 34 in t/modules/http2.t at line 242 fail #4
>>>>> # testing : content comparision
>>>>> # expected: '<html><body>
>>>>> # <h2>Hello World!</h2>
>>>>> # TLS_SNI=3D"localhost"
>>>>> # </body></html>
>>>>> # '
>>>>> # received: '<html><body>
>>>>> # <h2>Hello World!</h2>
>>>>> # TLS_SNI=3D""
>>>>> # </body></html>
>>>>> # '
>>>>> not ok 34
>>>>>=20
>>>>> # Failed test 50 in t/modules/http2.t at line 194 fail #6
>>>>> test case: VHOST001, expect 404 or 421 (using Host:): GET =
https://localhost:8544/misdirected
>>>>> # testing : GET https://localhost:8544/misdirected
>>>>> # expected: 421
>>>>> # received: '404'
>>>>> not ok 50
>>>>>=20
>>>>> # Failed test 51 in t/modules/http2.t at line 194 fail #7
>>>>> test case: VHOST002, expect 404 or 421 (using :authority): GET =
https://localhost:8544/misdirected
>>>>> # Failed test 50 in t/modules/http2.t at line 194 fail #6
>>>>> # testing : GET https://localhost:8544/misdirected
>>>>> # expected: 421
>>>>> # received: '404'
>>>>> not ok 51
>>>>>=20
>>>>> t/modules/http2.t .. Failed 3/51 subtests
>>>>>=20
>>>>>=20
>>>>>> On Nov 17, 2015, at 10:17 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>>=20
>>>>>> OK, the change is from October 19th by me. I changed the test =
suite to have
>>>>>> the test run in deterministic order. $r is a references to an =
array of tests
>>>>>> and, depending on module availability, I push more elements to =
$r.
>>>>>>=20
>>>>>> I just changed it to push @$r, { ... }
>>>>>>=20
>>>>>> Please give it a try.
>>>>>>=20
>>>>>>> Am 17.11.2015 um 16:06 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>>>>>=20
>>>>>>> I am still 10.10 but w/ Xcode 7.1.1
>>>>>>>=20
>>>>>>>=20
>>>>>>> <jimsys:stable/httpd-test/framework> % perl -V
>>>>>>> Summary of my perl5 (revision 5 version 20 subversion 2) =
configuration:
>>>>>>>=20
>>>>>>> Platform:
>>>>>>> osname=3Ddarwin, osvers=3D14.4.0, =
archname=3Ddarwin-thread-multi-2level
>>>>>>> uname=3D'darwin jimsys.local 14.4.0 darwin kernel version =
14.4.0: thu may 28 11:35:04 pdt 2015; root:xnu-2782.30.5~1release_x86_64 =
x86_64 '
>>>>>>> config_args=3D'-des -Duseithreads -Dusemultiplicity=3Dy =
-Duseshrplib -Dprefix=3D/usr/local2 -Dvendorprefix=3D/usr/local2'
>>>>>>> hint=3Drecommended, useposix=3Dtrue, d_sigaction=3Ddefine
>>>>>>> useithreads=3Ddefine, usemultiplicity=3Ddefine
>>>>>>> use64bitint=3Ddefine, use64bitall=3Ddefine, uselongdouble=3Dundef
>>>>>>> usemymalloc=3Dn, bincompat5005=3Dundef
>>>>>>> Compiler:
>>>>>>> cc=3D'cc', ccflags =3D'-fno-common -DPERL_DARWIN =
-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include =
-I/opt/local/include',
>>>>>>> optimize=3D'-O3',
>>>>>>> cppflags=3D'-fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe =
-fstack-protector -I/usr/local/include -I/opt/local/include'
>>>>>>> ccversion=3D'', gccversion=3D'4.2.1 Compatible Apple LLVM 6.1.0 =
(clang-602.0.53)', gccosandvers=3D''
>>>>>>> intsize=3D4, longsize=3D8, ptrsize=3D8, doublesize=3D8, =
byteorder=3D12345678
>>>>>>> d_longlong=3Ddefine, longlongsize=3D8, d_longdbl=3Ddefine, =
longdblsize=3D16
>>>>>>> ivtype=3D'long', ivsize=3D8, nvtype=3D'double', nvsize=3D8, =
Off_t=3D'off_t', lseeksize=3D8
>>>>>>> alignbytes=3D8, prototype=3Ddefine
>>>>>>> Linker and Libraries:
>>>>>>> ld=3D'env MACOSX_DEPLOYMENT_TARGET=3D10.3 cc', ldflags =3D' =
-fstack-protector -L/usr/local/lib -L/opt/local/lib'
>>>>>>> libpth=3D/usr/local/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/bin/../lib/clang/6.1.0/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/lib /usr/lib /opt/local/lib
>>>>>>> libs=3D-lgdbm -ldbm -ldl -lm -lutil -lc
>>>>>>> perllibs=3D-ldl -lm -lutil -lc
>>>>>>> libc=3D, so=3Ddylib, useshrplib=3Dtrue, libperl=3Dlibperl.dylib
>>>>>>> gnulibc_version=3D''
>>>>>>> Dynamic Linking:
>>>>>>> dlsrc=3Ddl_dlopen.xs, dlext=3Dbundle, d_dlsymun=3Dundef, =
ccdlflags=3D' '
>>>>>>> cccdlflags=3D' ', lddlflags=3D' -bundle -undefined =
dynamic_lookup -L/usr/local/lib -L/opt/local/lib -fstack-protector'
>>>>>>>=20
>>>>>>>> On Nov 17, 2015, at 9:59 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>>>>=20
>>>>>>>> Hmm, what perl version is that? Works on my OS X (El 10.11) =
with perl -v:
>>>>>>>>=20
>>>>>>>> This is perl 5, version 18, subversion 2 (v5.18.2) built for =
darwin-thread-multi-2level
>>>>>>>> (with 2 registered patches, see perl -V for more detail)
>>>>>>>>=20
>>>>>>>> //Stefan
>>>>>>>>=20
>>>>>>>>> Am 17.11.2015 um 15:44 schrieb Jim Jagielski =
<jim@jaguNET.com>:
>>>>>>>>>=20
>>>>>>>>> Doing a quick tst I get:
>>>>>>>>>=20
>>>>>>>>> t/modules/http2.t .. push on reference is experimental at =
t/modules/http2.t line 319.
>>>>>>>>> Dubious, test returned 255 (wstat 65280, 0xff00)
>>>>>>>>> No subtests run
>>>>>>>>>=20
>>>>>>>>> Test Summary Report
>>>>>>>>> -------------------
>>>>>>>>> t/modules/http2.t (Wstat: 65280 Tests: 0 Failed: 0)
>>>>>>>>> Non-zero exit status: 255
>>>>>>>>> Parse errors: No plan found in TAP output
>>>>>>>>> Files=3D1, Tests=3D0,  1 wallclock secs ( 0.02 usr  0.01 sys + =
 0.31 cusr  0.06 csys =3D  0.40 CPU)
>>>>>>>>> Result: FAIL
>>>>>>>>> Failed 1/1 test programs. 0/0 subtests failed.
>>>>>>>>>=20
>>>>>>>>> This is on OSX
>>>>>>>>>=20
>>>>>>>>>> On Nov 17, 2015, at 8:12 AM, Jim Jagielski <jim@jaguNET.com> =
wrote:
>>>>>>>>>>=20
>>>>>>>>>> I will.
>>>>>>>>>>=20
>>>>>>>>>>> On Nov 17, 2015, at 7:47 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>>>>>>>=20
>>>>>>>>>>> For the 2.4.18 backporting, can I find people here willing =
to look at:
>>>>>>>>>>>=20
>>>>>>>>>>> *) core/mod_ssl:=20
>>>>>>>>>>> - master conn_rec* addition to conn_rec
>>>>>>>>>>> - minor mmn bump
>>>>>>>>>>> - improved ALPN and Upgrade handling
>>>>>>>>>>> - allowing requests for servers whose TLS configuration is =
compatible
>>>>>>>>>>> to the SNI server ones
>>>>>>>>>>> - disabling TLS renegotiation for slave connections
>>>>>>>>>>> changes are necessary for update modules/http2
>>>>>>>>>>> trunk patch: http://svn.apache.org/r1708107
>>>>>>>>>>>        http://svn.apache.org/r1709587
>>>>>>>>>>>        http://svn.apache.org/r1709602
>>>>>>>>>>>        http://svn.apache.org/r1709995
>>>>>>>>>>>        http://svn.apache.org/r1710231
>>>>>>>>>>>        http://svn.apache.org/r1710419
>>>>>>>>>>>        http://svn.apache.org/r1710572
>>>>>>>>>>>        http://svn.apache.org/r1710583
>>>>>>>>>>>        + manual addition of "conn_rec *master;"
>>>>>>>>>>> 2.4.x patch: =
https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patche=
s/2.4.17-protocols.patch
>>>>>>>>>>> branch mergeable to 2.4.x: =
^/httpd/httpd/branches/2.4.17-protocols-changes
>>>>>>>>>>> +1: icing
>>>>>>>>>>>=20
>>>>>>>>>>> ? This is needed to backport the current mod_http2. If =
someone could find the time to look at this, please? Thanks!
>>>>>>>>>>>=20
>>>>>>>>>>> Cheers,
>>>>>>>>>>>=20
>>>>>>>>>>> Stefan
>>>>>>>>>>=20
>>>>>>>>>=20
>>>>>>>>=20
>>>>>>>=20
>>>>>>=20
>>>>>=20
>>>>=20
>>>=20
>>=20
>=20


From dev-return-84602-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 11:19:47 2015
Return-Path: <dev-return-84602-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ED0C918D58
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 11:19:47 +0000 (UTC)
Received: (qmail 21079 invoked by uid 500); 18 Nov 2015 11:19:47 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 21004 invoked by uid 500); 18 Nov 2015 11:19:47 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 20994 invoked by uid 99); 18 Nov 2015 11:19:47 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 11:19:47 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 0633F1A0C85
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 11:19:47 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.901
X-Spam-Level: **
X-Spam-Status: No, score=2.901 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id z5W4Snq4Vrec for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 11:19:38 +0000 (UTC)
Received: from mail-wm0-f43.google.com (mail-wm0-f43.google.com [74.125.82.43])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id B359F2154C
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 11:19:37 +0000 (UTC)
Received: by wmec201 with SMTP id c201so273006095wme.0
        for <dev@httpd.apache.org>; Wed, 18 Nov 2015 03:19:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-language:thread-index;
        bh=PmjcSKyPeIVdWGiKXxERggw6nr7qNuTFJI42IY2pdPA=;
        b=Yht3Y7WEdVwtBpIOjuli3on3pp+CHTmmCjahQ+ru1K9mimmuuFCa6EWLWWmfqgxUHV
         BGvKbTHIOh8puwvWgk83NG3UgZOluPvHG4wJiyUUIusoY4FdSYrMYwXyjK3GpJcWYskY
         Jqwh0kebN8fidst5Z07I6kngZlMaXhs3/leUY=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-language:thread-index;
        bh=PmjcSKyPeIVdWGiKXxERggw6nr7qNuTFJI42IY2pdPA=;
        b=Zo9FBstmtyPLYVo3znCl5u2z5FZkhee1DLJme5pLvRf+79PCCmk5hRqtLsPJ9sY9fX
         rjBZlQB3U3T4flRnT89cih+l54RUdDycI0a3y8VAVW1bTKR906XQg+TU1/yu40VXN8c5
         YQ0+y+yB5UA5g9rcSgS/qDKNX9S4x44CAHMSnfRzrNHVNQBw+uidP6fmAf+lU2EzXPlc
         oy7cg4VMlnn1jT97KCJLZb0yI6Q7UAh51ybAMgGfAWb+VauUIgKkzRBrR+TIm6z5aXGJ
         Vo7p8rjCO4Uw+VURus5dks8zqdjVW7T7CAZoWwg9XQ7Wlbs9aj7rqMfC9kuo9RXSRGKm
         os+A==
X-Gm-Message-State: ALoCoQnYUQLK4zifE2qFq7MSGMPYzriofty23IWBQPWToVbab3NdT6F5jIYIAO8j6+3PR7FffbDp
X-Received: by 10.194.2.5 with SMTP id 5mr1247472wjq.153.1447845575855;
        Wed, 18 Nov 2015 03:19:35 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id jt9sm2351441wjc.24.2015.11.18.03.19.35
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 18 Nov 2015 03:19:35 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <RT-Ticket-4145@openssl.org>	<CACsi2527hLC6HhBAiOHMOarvj7-3eYLpc_7T33OE4PXtrsbjuA@mail.gmail.com>	<rt-4.0.19-28684-1447802781-437.4145-21-0@openssl.org> <CACsi252q_TZQEfaMGNicqk4JbyyMYFxnopJUnJnSH-3Ub0fjHw@mail.gmail.com>
In-Reply-To: <CACsi252q_TZQEfaMGNicqk4JbyyMYFxnopJUnJnSH-3Ub0fjHw@mail.gmail.com>
Subject: RE: [openssl-dev] [openssl.org #4145] Enhancement: patch to support s_client -starttls http
Date: Wed, 18 Nov 2015 12:19:30 +0100
Message-ID: <04eb01d121f2$ff3c7710$fdb56530$@qqmail.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_04EC_01D121FB.61023EA0"
X-Mailer: Microsoft Outlook 16.0
Content-Language: nl
Thread-Index: AQESyQO3IKDV3A1KLQzYNyVOuej2dgNOK2XgAg9k//ICQM2ZyZ/hX7cQ

This is a multipart message in MIME format.

------=_NextPart_000_04EC_01D121FB.61023EA0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable

                Hi William,

=20

Is any commonly used client actually implementing this spec in a way =
that makes this RFC relevant for httpd?

=20

Sure we could implement this=E2=80=A6 Perhaps we already did but once =
you switch to TLS there are so many security related things to account =
for.

=20

Ignoring the server certificate case, what about SNI and ALPN?

=20

Is there really a specific upgrade to tls/1.0, 1.1 and 1.2. Or is one =
upgrade enough as the handshake does the rest.

=20

Does this also allow switching to http/2 in one step via ALPN?

=20

Or is that explicitly forbidden?

=20

                Bert

=20

From: William A Rowe Jr [mailto:wrowe@rowe-clan.net]=20
Sent: woensdag 18 november 2015 01:10
To: httpd <dev@httpd.apache.org>
Subject: Fwd: [openssl-dev] [openssl.org #4145] Enhancement: patch to =
support s_client -starttls http

=20

I'm fairly certain this will be applied to 1.1.0 and not necessarily

backported to 1.0.2, so this hack might be useful to some of you=20

who want to test for the preservation of the SSLEngine optional=20

Upgrade: TLS/1.0 behavior on trunk and 2.4.x branch...

=20

=20

=20

---------- Forwarded message ----------
From: William A. Rowe Jr. via RT <rt@openssl.org <mailto:rt@openssl.org> =
>
Date: Tue, Nov 17, 2015 at 5:26 PM
Subject: [openssl-dev] [openssl.org <http://openssl.org>  #4145] =
Enhancement: patch to support s_client -starttls http
To:=20
Cc: openssl-dev@openssl.org <mailto:openssl-dev@openssl.org>=20



RFC 2817 defines upgrading HTTP/1.1 to TLS (or SSL).

Because Apache httpd supports Connection: Upgrade and Upgrade: TLS/1.x =
I've
gone ahead and instrumented s_client to support this behavior (and noted =
a
small optimization in the same logic stream for starttls support).

Attached is the patch to introduce this behavior.  It is a bit crufty, =
but
lacking a CUPS client that did connection upgrade to TLS, I needed
something for testing and experimentation.

I don't know that there is a justification for implementing Upgrade: h2
since this is a binary protocol that is not conducive to terminal mode =
:)

Source licensed by me under the OpenSSL license at
https://www.openssl.org/source/license.txt - don't see a need for a CLA,
but email me privately if so.


_______________________________________________
openssl-bugs-mod mailing list
openssl-bugs-mod@openssl.org <mailto:openssl-bugs-mod@openssl.org>=20
https://mta.openssl.org/mailman/listinfo/openssl-bugs-mod
_______________________________________________
openssl-dev mailing list
To unsubscribe: https://mta.openssl.org/mailman/listinfo/openssl-dev

=20


------=_NextPart_000_04EC_01D121FB.61023EA0
Content-Type: text/html;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; charset=3Dutf-8"><meta =
name=3DGenerator content=3D"Microsoft Word 15 (filtered =
medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
p.msonormal0, li.msonormal0, div.msonormal0
	{mso-style-name:msonormal;
	mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
span.EmailStyle18
	{mso-style-type:personal-reply;
	font-family:"Calibri",sans-serif;
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri",sans-serif;
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:70.85pt 70.85pt 70.85pt 70.85pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DNL link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal><span =
lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0 Hi =
William,<o:p></o:p></span></p><p class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>Is any commonly used client actually =
implementing this spec in a way that makes this RFC relevant for =
httpd?<o:p></o:p></span></p><p class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>Sure we could implement this=E2=80=A6 =
Perhaps we already did but once you switch to TLS there are so many =
security related things to account for.<o:p></o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>Ignoring the server certificate case, what =
about SNI and ALPN?<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>Is there really a specific upgrade to =
tls/1.0, 1.1 and 1.2. Or is one upgrade enough as the handshake does the =
rest.<o:p></o:p></span></p><p class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>Does this also allow switching to http/2 in =
one step via ALPN?<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>Or is that explicitly =
forbidden?<o:p></o:p></span></p><p class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0 =
Bert<o:p></o:p></span></p><p class=3DMsoNormal><a =
name=3D"_MailEndCompose"><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></a></p><div =
style=3D'border:none;border-left:solid blue 1.5pt;padding:0cm 0cm 0cm =
4.0pt'><div><div style=3D'border:none;border-top:solid #E1E1E1 =
1.0pt;padding:3.0pt 0cm 0cm 0cm'><p class=3DMsoNormal><b><span =
lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif'>From:</span><=
/b><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif'> William A =
Rowe Jr [mailto:wrowe@rowe-clan.net] <br><b>Sent:</b> woensdag 18 =
november 2015 01:10<br><b>To:</b> httpd =
&lt;dev@httpd.apache.org&gt;<br><b>Subject:</b> Fwd: [openssl-dev] =
[openssl.org #4145] Enhancement: patch to support s_client -starttls =
http<o:p></o:p></span></p></div></div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><div><p class=3DMsoNormal>I'm =
fairly certain this will be applied to 1.1.0 and not =
necessarily<o:p></o:p></p><div><p class=3DMsoNormal>backported to 1.0.2, =
so this hack might be useful to some of =
you&nbsp;<o:p></o:p></p></div><div><p class=3DMsoNormal>who want to test =
for the preservation of the SSLEngine =
optional&nbsp;<o:p></o:p></p></div><div><p class=3DMsoNormal>Upgrade: =
TLS/1.0 behavior on trunk and 2.4.x branch...<o:p></o:p></p><div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div><div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div><div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><div><p class=3DMsoNormal =
style=3D'margin-bottom:12.0pt'>---------- Forwarded message =
----------<br>From: <b>William A. Rowe Jr. via RT</b> &lt;<a =
href=3D"mailto:rt@openssl.org">rt@openssl.org</a>&gt;<br>Date: Tue, Nov =
17, 2015 at 5:26 PM<br>Subject: [openssl-dev] [<a =
href=3D"http://openssl.org">openssl.org</a> #4145] Enhancement: patch to =
support s_client -starttls http<br>To: <br>Cc: <a =
href=3D"mailto:openssl-dev@openssl.org">openssl-dev@openssl.org</a><br><b=
r><o:p></o:p></p><div><div><p class=3DMsoNormal =
style=3D'margin-bottom:12.0pt'>RFC 2817 defines upgrading HTTP/1.1 to =
TLS (or SSL).<br><br>Because Apache httpd supports Connection: Upgrade =
and Upgrade: TLS/1.x I've<br>gone ahead and instrumented s_client to =
support this behavior (and noted a<br>small optimization in the same =
logic stream for starttls support).<br><br>Attached is the patch to =
introduce this behavior.&nbsp; It is a bit crufty, but<br>lacking a CUPS =
client that did connection upgrade to TLS, I needed<br>something for =
testing and experimentation.<br><br>I don't know that there is a =
justification for implementing Upgrade: h2<br>since this is a binary =
protocol that is not conducive to terminal mode :)<br><br>Source =
licensed by me under the OpenSSL license at<br><a =
href=3D"https://www.openssl.org/source/license.txt" =
target=3D"_blank">https://www.openssl.org/source/license.txt</a> - don't =
see a need for a CLA,<br>but email me privately if =
so.<o:p></o:p></p></div></div><p class=3DMsoNormal =
style=3D'margin-bottom:12.0pt'><br>______________________________________=
_________<br>openssl-bugs-mod mailing list<br><a =
href=3D"mailto:openssl-bugs-mod@openssl.org">openssl-bugs-mod@openssl.org=
</a><br><a =
href=3D"https://mta.openssl.org/mailman/listinfo/openssl-bugs-mod" =
target=3D"_blank">https://mta.openssl.org/mailman/listinfo/openssl-bugs-m=
od</a><br>_______________________________________________<br>openssl-dev =
mailing list<br>To unsubscribe: <a =
href=3D"https://mta.openssl.org/mailman/listinfo/openssl-dev" =
target=3D"_blank">https://mta.openssl.org/mailman/listinfo/openssl-dev</a=
><o:p></o:p></p></div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div></div></div></div></div></bo=
dy></html>
------=_NextPart_000_04EC_01D121FB.61023EA0--


From dev-return-84603-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 11:35:15 2015
Return-Path: <dev-return-84603-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A821C18DD6
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 11:35:15 +0000 (UTC)
Received: (qmail 66115 invoked by uid 500); 18 Nov 2015 11:35:15 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 66046 invoked by uid 500); 18 Nov 2015 11:35:15 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 66036 invoked by uid 99); 18 Nov 2015 11:35:15 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 11:35:15 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id B65E0C71A0
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 11:35:14 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id CL3Gkh1nqUA0 for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 11:35:09 +0000 (UTC)
Received: from mail-wm0-f46.google.com (mail-wm0-f46.google.com [74.125.82.46])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 727CE2160F
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 11:35:08 +0000 (UTC)
Received: by wmww144 with SMTP id w144so193049413wmw.1
        for <dev@httpd.apache.org>; Wed, 18 Nov 2015 03:35:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:content-language
         :thread-index;
        bh=bl+odIoVnCH0HyrV3Oc0RvjQqWIWK07V9jN6ouygyT0=;
        b=KPE68ZhXBxfK3KjhzPV1k1v+c+DGSHlaOa6BNTpW/G0WgRUm9GbLMJ+N6mMqjr8y6T
         0SQVz8e/scOE98YZxhwZM+g1siRtb6qIRoJThY9kuVv1G1f1vLP8m5W7nXAM6xsdMh1w
         cl0KHUwK9E1V8XvqGW25rL/obrzGwNG2cYgHw=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :content-language:thread-index;
        bh=bl+odIoVnCH0HyrV3Oc0RvjQqWIWK07V9jN6ouygyT0=;
        b=ZoG0v2So9Y0Q+iRT49jF0aWjBEFuO3nc2LqArPSPy2/YdgLiS7OedKE2LSZLEcjzRg
         djf8YrtZow4vlAq6xC2GaY+QwwUduWQwDXgxHCl4rHo4lt3DGAR7roQMmKZhfkCeci/4
         33laUKanN11q/hmSBiURFEhiLwgGXBzbx75zjqPJxd3770zH7FKo1TqvmOBfYKyooIIS
         1/RZkUfvvVcmnd6cnwOGgUjKWVKN/zZjC3Q55KBd3mzgUkRTibjJe6xNghHk9JUVELQw
         V0M5eWpimbeJgDeZkmAEEyhXVuHoQ+SyHusc5g4j8IlyELn628H5IQGiN5ykNp70UEUD
         K4vQ==
X-Gm-Message-State: ALoCoQl0za/IJZMqWxMRfsbNHn47Ak3kmSZlPEmQvr/nM0IoHKmvOGjnU8jobC+0AxeZ2ewfekWP
X-Received: by 10.28.6.130 with SMTP id 124mr3582269wmg.7.1447846507762;
        Wed, 18 Nov 2015 03:35:07 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id h4sm2390742wjx.41.2015.11.18.03.35.07
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 18 Nov 2015 03:35:07 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <20151113145416.477F13A058A@svn01-us-west.apache.org>
In-Reply-To: <20151113145416.477F13A058A@svn01-us-west.apache.org>
Subject: RE: svn commit: r1714219 - in /httpd/httpd/trunk: docs/manual/mod/ modules/http2/
Date: Wed, 18 Nov 2015 12:35:02 +0100
Message-ID: <04f801d121f5$2aba6da0$802f48e0$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 16.0
Content-Language: nl
Thread-Index: AQHBgPixemxHdEC5KzXPLpJhtUFNup7A5VDQ



> -----Original Message-----
> From: icing@apache.org [mailto:icing@apache.org]
> Sent: vrijdag 13 november 2015 15:54
> To: cvs@httpd.apache.org
> Subject: svn commit: r1714219 - in /httpd/httpd/trunk: =
docs/manual/mod/
> modules/http2/
>=20
> Author: icing
> Date: Fri Nov 13 14:54:15 2015
> New Revision: 1714219
>=20
> URL: http://svn.apache.org/viewvc?rev=3D1714219&view=3Drev
> Log:
> new directive H2Push on/off to en-/disable HTTP/2 server pushes. =
Server
> pushes are recognized by Link: headers in responses that carry the
> rel=3Dpreload parameter
>=20


> Modified: httpd/httpd/trunk/modules/http2/h2_request.c
> URL:
> http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_reque
> st.c?rev=3D1714219&r1=3D1714218&r2=3D1714219&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> --- httpd/httpd/trunk/modules/http2/h2_request.c (original)
> +++ httpd/httpd/trunk/modules/http2/h2_request.c Fri Nov 13 14:54:15
> 2015
> @@ -31,11 +31,22 @@
>=20
>  h2_request *h2_request_create(int id, apr_pool_t *pool)
>  {
> +    return h2_request_createn(id, pool, NULL, NULL, NULL, NULL, =
NULL);
> +}
> +
> +h2_request *h2_request_createn(int id, apr_pool_t *pool,
> +                               const char *method, const char =
*scheme,
> +                               const char *authority, const char =
*path,
> +                               apr_table_t *header)
> +{
>      h2_request *req =3D apr_pcalloc(pool, sizeof(h2_request));
>=20
> -    req->id =3D id;
> -    req->headers =3D apr_table_make(pool, 10);
> -    req->content_length =3D -1;
> +    req->id             =3D id;
> +    req->method         =3D method;
> +    req->scheme         =3D scheme;
> +    req->authority      =3D authority;
> +    req->path           =3D path;
> +    req->headers        =3D header? header : apr_table_make(pool, =
10);
>=20
>      return req;
>  }
> @@ -44,45 +55,26 @@ void h2_request_destroy(h2_request *req)
>  {
>  }
>=20
> +static apr_status_t inspect_clen(h2_request *req, const char *s)
> +{
> +    char *end;
> +    req->content_length =3D apr_strtoi64(s, &end, 10);
> +    return (s =3D=3D end)? APR_EINVAL : APR_SUCCESS;
> +}
> +
>  static apr_status_t add_h1_header(h2_request *req, apr_pool_t *pool,
>                                    const char *name, size_t nlen,
>                                    const char *value, size_t vlen)
>  {
>      char *hname, *hvalue;
>=20
> -    if (H2_HD_MATCH_LIT("transfer-encoding", name, nlen)) {
> -        if (!apr_strnatcasecmp("chunked", value)) {
> -            /* This should never arrive here in a HTTP/2 request */
> -            ap_log_perror(APLOG_MARK, APLOG_ERR, APR_BADARG, pool,
> -                          APLOGNO(02945)
> -                          "h2_request: 'transfer-encoding: chunked' =
received");
> -            return APR_BADARG;
> -        }
> -    }
> -    else if (H2_HD_MATCH_LIT("content-length", name, nlen)) {
> -        char *end;
> -        req->content_length =3D apr_strtoi64(value, &end, 10);
> -        if (value =3D=3D end) {
> -            ap_log_perror(APLOG_MARK, APLOG_WARNING, APR_EINVAL, =
pool,
> -                          APLOGNO(02959)
> -                          "h2_request(%d): content-length value not =
parsed: %s",
> -                          req->id, value);
> -            return APR_EINVAL;
> -        }
> -        req->chunked =3D 0;
> -    }
> -    else if (H2_HD_MATCH_LIT("content-type", name, nlen)) {
> -        /* If we see a content-type and have no length (yet),
> -         * we need to chunk. */
> -        req->chunked =3D (req->content_length =3D=3D -1);
> -    }
> -    else if ((req->seen_host && H2_HD_MATCH_LIT("host", name, nlen))
> -             || H2_HD_MATCH_LIT("expect", name, nlen)
> -             || H2_HD_MATCH_LIT("upgrade", name, nlen)
> -             || H2_HD_MATCH_LIT("connection", name, nlen)
> -             || H2_HD_MATCH_LIT("proxy-connection", name, nlen)
> -             || H2_HD_MATCH_LIT("keep-alive", name, nlen)
> -             || H2_HD_MATCH_LIT("http2-settings", name, nlen)) {
> +    if (H2_HD_MATCH_LIT("expect", name, nlen)
> +        || H2_HD_MATCH_LIT("upgrade", name, nlen)
> +        || H2_HD_MATCH_LIT("connection", name, nlen)
> +        || H2_HD_MATCH_LIT("proxy-connection", name, nlen)
> +        || H2_HD_MATCH_LIT("transfer-encoding", name, nlen)
> +        || H2_HD_MATCH_LIT("keep-alive", name, nlen)
> +        || H2_HD_MATCH_LIT("http2-settings", name, nlen)) {
>          /* ignore these. */
>          return APR_SUCCESS;


Not added in this revision, but this is not 100% to the spec:

http2-settings is only special if it is referenced in the upgrade =
header, so dropping "connection" would be enough.

Expect is still 100% valid in http/2; as are trailing headers, which =
used transfer-encoding in http/1. So that header shouldn't be dropped.

Not sure about keep-alive. But if I remember correctly the spec says =
that it needs to be referenced from connection too, to be applied at the =
connection layer. (But I wouldn't be surprised if actual implementation =
think different there)

	Bert


From dev-return-84604-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 11:56:20 2015
Return-Path: <dev-return-84604-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9452D18EAF
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 11:56:20 +0000 (UTC)
Received: (qmail 16965 invoked by uid 500); 18 Nov 2015 11:56:20 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 16896 invoked by uid 500); 18 Nov 2015 11:56:20 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 16886 invoked by uid 99); 18 Nov 2015 11:56:20 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 11:56:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 8ED82180A4D
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 11:56:19 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id lr7h_8ayAtiB for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 11:56:08 +0000 (UTC)
Received: from resqmta-ch2-08v.sys.comcast.net (resqmta-ch2-08v.sys.comcast.net [69.252.207.40])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id ADC4442AEE
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 11:56:07 +0000 (UTC)
Received: from resomta-ch2-19v.sys.comcast.net ([69.252.207.115])
	by resqmta-ch2-08v.sys.comcast.net with comcast
	id izw11r0022VvR6D01zw17N; Wed, 18 Nov 2015 11:56:01 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-19v.sys.comcast.net with comcast
	id izw01r00H2U0RYt01zw1sP; Wed, 18 Nov 2015 11:56:01 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: 2.4.18 backporting
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <3853FAF7-E235-4016-82E8-C2A7CBCB0DC1@greenbytes.de>
Date: Wed, 18 Nov 2015 06:56:00 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <A3DACC7B-3C24-4306-B656-D4B866A9D7B7@jaguNET.com>
References: <DCA25590-E588-4AD5-8B68-6E473764F773@greenbytes.de> <D9EF2A21-F446-4DE2-A1C4-A22F2D0BECF6@jaguNET.com> <3D49817D-DD89-4D8E-B7C3-257D3FF7D1C8@jaguNET.com> <9C3DA6EF-0AAB-496B-B502-0CFDAAB89F13@greenbytes.de> <BF3A59FA-C287-4C32-A41B-240599D55829@jaguNET.com> <E095C163-F046-4C9C-A912-5183E710817B@greenbytes.de> <47BE49D3-48FB-4054-AFB9-3460015F84E7@jaguNET.com> <04A2D4C6-894B-443E-B4EB-3586626247B9@greenbytes.de> <C41522BC-3280-467A-B895-E7465D2C6D9E@jaguNET.com> <4B4ED947-BEB3-49DD-A1AE-D45921ECB603@greenbytes.de> <C7BF422C-73B6-4E97-893F-11E5B0AA705E@jaguNET.com> <3853FAF7-E235-4016-82E8-C2A7CBCB0DC1@greenbytes.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1447847761;
	bh=fzyjBnTN5liMR+hN0YsNQo+IeRtmMsIWESNY8+Zjphk=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=nHvzjFvfaS2pZV8UUCWrOokyFTZM3TxcXCUyhBlqdmz32sclxxKstGn8TnXbH3uH9
	 GdxdPHkApJwCx+WebBnBeJmnbkWFMceyBvuOeoYTmyYDPtvL9gwZhggB9vKf5HAdOv
	 LKOaTrFzy/JhHJwRZ3xtWh2akYv0Mp3z5/uF41kFB6jKyhmU5+c1Y36y0bX8Jitj8q
	 +L8RZ8A3yRhI3KXjOJj4OlZDZH44ysR8+XG2RXPIT0A+6+GA7Js6GsgYBgA6kwYPEr
	 LnpftLL3dJHMJWMkM8ouCKyc05MWE9cYG/v9CnSVPV0yIHQVVxvOvapum+0eNu1yxP
	 CD5w8Giqyy4QQ==

Perfect! Runs clean as a whistle!

I am ++1 for merging /httpd/httpd/branches/2.4.17-protocols-changes

> On Nov 18, 2015, at 6:17 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>=20
> OK, test framework fixed in r1714972
>=20
> http2 vhost test cases will not run unless openssl >=3D 1.0.0
> http2 tests will work on a 2.4.17 and 2.5-DEV
> http2 test 52 will fail on a 2.4.18-DEV without the proposed core =
protocols changes
> http2 tests will work on a 2.4.18-DEV with changes applied
>=20
> Hope this works for everyone. Sorry for the initial confusion.
>=20
> //Stefan
>=20
>> Am 17.11.2015 um 18:08 schrieb Jim Jagielski <jim@jaguNET.com>:
>>=20
>> No issues under CentOS...
>>=20
>>> On Nov 17, 2015, at 11:28 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>=20
>>> That's cheating...
>>>=20
>>> I'll let you know when it works for me in such a configuration.
>>>=20
>>>> Am 17.11.2015 um 16:51 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>>=20
>>>> My perl is built against openssl 1.0.2...
>>>>=20
>>>>> On Nov 17, 2015, at 10:43 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>=20
>>>>> OK, the problem on OS X is that the default openssl is 0.98 which =
does not do SNI.
>>>>>=20
>>>>> I try to detect this in lines 14-17 by:
>>>>> my $alpn_available =3D exists &Net::SSLeay::CTX_set_alpn_protos;
>>>>> if ($alpn_available) {
>>>>> $total_tests +=3D $vhost_suite;
>>>>> }
>>>>>=20
>>>>> and change the test case expectations accordingly. That seems to =
fail on your system. The test case thinks ALPN+SNI are available and =
wants to see "localhost" in the response, but it is not used.
>>>>>=20
>>>>> Unnecessary to say that the detection (and therefore the tests) =
work on my OS X installation - also before 10.11.
>>>>>=20
>>>>> Hmmm....are there SNI test cases for mod_ssl where I could see how =
it detects it?
>>>>>=20
>>>>>=20
>>>>>> Am 17.11.2015 um 16:30 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>>>>=20
>>>>>> Still:
>>>>>>=20
>>>>>> t/modules/http2.t .. 26/51
>>>>>> # Failed test 34 in t/modules/http2.t at line 242 fail #4
>>>>>> # testing : content comparision
>>>>>> # expected: '<html><body>
>>>>>> # <h2>Hello World!</h2>
>>>>>> # TLS_SNI=3D"localhost"
>>>>>> # </body></html>
>>>>>> # '
>>>>>> # received: '<html><body>
>>>>>> # <h2>Hello World!</h2>
>>>>>> # TLS_SNI=3D""
>>>>>> # </body></html>
>>>>>> # '
>>>>>> not ok 34
>>>>>>=20
>>>>>> # Failed test 50 in t/modules/http2.t at line 194 fail #6
>>>>>> test case: VHOST001, expect 404 or 421 (using Host:): GET =
https://localhost:8544/misdirected
>>>>>> # testing : GET https://localhost:8544/misdirected
>>>>>> # expected: 421
>>>>>> # received: '404'
>>>>>> not ok 50
>>>>>>=20
>>>>>> # Failed test 51 in t/modules/http2.t at line 194 fail #7
>>>>>> test case: VHOST002, expect 404 or 421 (using :authority): GET =
https://localhost:8544/misdirected
>>>>>> # Failed test 50 in t/modules/http2.t at line 194 fail #6
>>>>>> # testing : GET https://localhost:8544/misdirected
>>>>>> # expected: 421
>>>>>> # received: '404'
>>>>>> not ok 51
>>>>>>=20
>>>>>> t/modules/http2.t .. Failed 3/51 subtests
>>>>>>=20
>>>>>>=20
>>>>>>> On Nov 17, 2015, at 10:17 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>>>=20
>>>>>>> OK, the change is from October 19th by me. I changed the test =
suite to have
>>>>>>> the test run in deterministic order. $r is a references to an =
array of tests
>>>>>>> and, depending on module availability, I push more elements to =
$r.
>>>>>>>=20
>>>>>>> I just changed it to push @$r, { ... }
>>>>>>>=20
>>>>>>> Please give it a try.
>>>>>>>=20
>>>>>>>> Am 17.11.2015 um 16:06 schrieb Jim Jagielski <jim@jaguNET.com>:
>>>>>>>>=20
>>>>>>>> I am still 10.10 but w/ Xcode 7.1.1
>>>>>>>>=20
>>>>>>>>=20
>>>>>>>> <jimsys:stable/httpd-test/framework> % perl -V
>>>>>>>> Summary of my perl5 (revision 5 version 20 subversion 2) =
configuration:
>>>>>>>>=20
>>>>>>>> Platform:
>>>>>>>> osname=3Ddarwin, osvers=3D14.4.0, =
archname=3Ddarwin-thread-multi-2level
>>>>>>>> uname=3D'darwin jimsys.local 14.4.0 darwin kernel version =
14.4.0: thu may 28 11:35:04 pdt 2015; root:xnu-2782.30.5~1release_x86_64 =
x86_64 '
>>>>>>>> config_args=3D'-des -Duseithreads -Dusemultiplicity=3Dy =
-Duseshrplib -Dprefix=3D/usr/local2 -Dvendorprefix=3D/usr/local2'
>>>>>>>> hint=3Drecommended, useposix=3Dtrue, d_sigaction=3Ddefine
>>>>>>>> useithreads=3Ddefine, usemultiplicity=3Ddefine
>>>>>>>> use64bitint=3Ddefine, use64bitall=3Ddefine, uselongdouble=3Dundef=

>>>>>>>> usemymalloc=3Dn, bincompat5005=3Dundef
>>>>>>>> Compiler:
>>>>>>>> cc=3D'cc', ccflags =3D'-fno-common -DPERL_DARWIN =
-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include =
-I/opt/local/include',
>>>>>>>> optimize=3D'-O3',
>>>>>>>> cppflags=3D'-fno-common -DPERL_DARWIN -fno-strict-aliasing =
-pipe -fstack-protector -I/usr/local/include -I/opt/local/include'
>>>>>>>> ccversion=3D'', gccversion=3D'4.2.1 Compatible Apple LLVM 6.1.0 =
(clang-602.0.53)', gccosandvers=3D''
>>>>>>>> intsize=3D4, longsize=3D8, ptrsize=3D8, doublesize=3D8, =
byteorder=3D12345678
>>>>>>>> d_longlong=3Ddefine, longlongsize=3D8, d_longdbl=3Ddefine, =
longdblsize=3D16
>>>>>>>> ivtype=3D'long', ivsize=3D8, nvtype=3D'double', nvsize=3D8, =
Off_t=3D'off_t', lseeksize=3D8
>>>>>>>> alignbytes=3D8, prototype=3Ddefine
>>>>>>>> Linker and Libraries:
>>>>>>>> ld=3D'env MACOSX_DEPLOYMENT_TARGET=3D10.3 cc', ldflags =3D' =
-fstack-protector -L/usr/local/lib -L/opt/local/lib'
>>>>>>>> libpth=3D/usr/local/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/bin/../lib/clang/6.1.0/lib =
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolc=
hain/usr/lib /usr/lib /opt/local/lib
>>>>>>>> libs=3D-lgdbm -ldbm -ldl -lm -lutil -lc
>>>>>>>> perllibs=3D-ldl -lm -lutil -lc
>>>>>>>> libc=3D, so=3Ddylib, useshrplib=3Dtrue, libperl=3Dlibperl.dylib
>>>>>>>> gnulibc_version=3D''
>>>>>>>> Dynamic Linking:
>>>>>>>> dlsrc=3Ddl_dlopen.xs, dlext=3Dbundle, d_dlsymun=3Dundef, =
ccdlflags=3D' '
>>>>>>>> cccdlflags=3D' ', lddlflags=3D' -bundle -undefined =
dynamic_lookup -L/usr/local/lib -L/opt/local/lib -fstack-protector'
>>>>>>>>=20
>>>>>>>>> On Nov 17, 2015, at 9:59 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>>>>>=20
>>>>>>>>> Hmm, what perl version is that? Works on my OS X (El 10.11) =
with perl -v:
>>>>>>>>>=20
>>>>>>>>> This is perl 5, version 18, subversion 2 (v5.18.2) built for =
darwin-thread-multi-2level
>>>>>>>>> (with 2 registered patches, see perl -V for more detail)
>>>>>>>>>=20
>>>>>>>>> //Stefan
>>>>>>>>>=20
>>>>>>>>>> Am 17.11.2015 um 15:44 schrieb Jim Jagielski =
<jim@jaguNET.com>:
>>>>>>>>>>=20
>>>>>>>>>> Doing a quick tst I get:
>>>>>>>>>>=20
>>>>>>>>>> t/modules/http2.t .. push on reference is experimental at =
t/modules/http2.t line 319.
>>>>>>>>>> Dubious, test returned 255 (wstat 65280, 0xff00)
>>>>>>>>>> No subtests run
>>>>>>>>>>=20
>>>>>>>>>> Test Summary Report
>>>>>>>>>> -------------------
>>>>>>>>>> t/modules/http2.t (Wstat: 65280 Tests: 0 Failed: 0)
>>>>>>>>>> Non-zero exit status: 255
>>>>>>>>>> Parse errors: No plan found in TAP output
>>>>>>>>>> Files=3D1, Tests=3D0,  1 wallclock secs ( 0.02 usr  0.01 sys =
+  0.31 cusr  0.06 csys =3D  0.40 CPU)
>>>>>>>>>> Result: FAIL
>>>>>>>>>> Failed 1/1 test programs. 0/0 subtests failed.
>>>>>>>>>>=20
>>>>>>>>>> This is on OSX
>>>>>>>>>>=20
>>>>>>>>>>> On Nov 17, 2015, at 8:12 AM, Jim Jagielski <jim@jaguNET.com> =
wrote:
>>>>>>>>>>>=20
>>>>>>>>>>> I will.
>>>>>>>>>>>=20
>>>>>>>>>>>> On Nov 17, 2015, at 7:47 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>>>>>>>>>>>>=20
>>>>>>>>>>>> For the 2.4.18 backporting, can I find people here willing =
to look at:
>>>>>>>>>>>>=20
>>>>>>>>>>>> *) core/mod_ssl:=20
>>>>>>>>>>>> - master conn_rec* addition to conn_rec
>>>>>>>>>>>> - minor mmn bump
>>>>>>>>>>>> - improved ALPN and Upgrade handling
>>>>>>>>>>>> - allowing requests for servers whose TLS configuration is =
compatible
>>>>>>>>>>>> to the SNI server ones
>>>>>>>>>>>> - disabling TLS renegotiation for slave connections
>>>>>>>>>>>> changes are necessary for update modules/http2
>>>>>>>>>>>> trunk patch: http://svn.apache.org/r1708107
>>>>>>>>>>>>       http://svn.apache.org/r1709587
>>>>>>>>>>>>       http://svn.apache.org/r1709602
>>>>>>>>>>>>       http://svn.apache.org/r1709995
>>>>>>>>>>>>       http://svn.apache.org/r1710231
>>>>>>>>>>>>       http://svn.apache.org/r1710419
>>>>>>>>>>>>       http://svn.apache.org/r1710572
>>>>>>>>>>>>       http://svn.apache.org/r1710583
>>>>>>>>>>>>       + manual addition of "conn_rec *master;"
>>>>>>>>>>>> 2.4.x patch: =
https://raw.githubusercontent.com/icing/mod_h2/master/sandbox/httpd/patche=
s/2.4.17-protocols.patch
>>>>>>>>>>>> branch mergeable to 2.4.x: =
^/httpd/httpd/branches/2.4.17-protocols-changes
>>>>>>>>>>>> +1: icing
>>>>>>>>>>>>=20
>>>>>>>>>>>> ? This is needed to backport the current mod_http2. If =
someone could find the time to look at this, please? Thanks!
>>>>>>>>>>>>=20
>>>>>>>>>>>> Cheers,
>>>>>>>>>>>>=20
>>>>>>>>>>>> Stefan
>>>>>>>>>>>=20
>>>>>>>>>>=20
>>>>>>>>>=20
>>>>>>>>=20
>>>>>>>=20
>>>>>>=20
>>>>>=20
>>>>=20
>>>=20
>>=20
>=20


From dev-return-84605-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 12:01:35 2015
Return-Path: <dev-return-84605-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DA36F18F08
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 12:01:34 +0000 (UTC)
Received: (qmail 30534 invoked by uid 500); 18 Nov 2015 12:01:34 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 30473 invoked by uid 500); 18 Nov 2015 12:01:34 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 30463 invoked by uid 99); 18 Nov 2015 12:01:34 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 12:01:34 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id A91D01A20A7
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 12:01:33 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.009
X-Spam-Level:
X-Spam-Status: No, score=-0.009 tagged_above=-999 required=6.31
	tests=[T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id ce6If11GwhqP for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 12:01:24 +0000 (UTC)
Received: from lewis.sophia.w3.org (lewis.sophia.w3.org [193.51.208.79])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id C8ACD2304C
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 12:01:23 +0000 (UTC)
Received: from mut38-7-78-226-234-114.fbx.proxad.net ([78.226.234.114] helo=kiribati.inrialpes.fr)
	by lewis.sophia.w3.org with esmtpsa (TLS1.2:DHE_RSA_AES_256_CBC_SHA256:256)
	(Exim 4.80)
	(envelope-from <kahan@w3.org>)
	id 1Zz1QL-00058a-Af
	for dev@httpd.apache.org; Wed, 18 Nov 2015 12:01:17 +0000
Received: by kiribati.inrialpes.fr (Postfix, from userid 50104)
	id 990BC77A; Wed, 18 Nov 2015 13:01:12 +0100 (CET)
Date: Wed, 18 Nov 2015 13:01:12 +0100
From: Jose Kahan <jose.kahan@w3.org>
To: dev@httpd.apache.org
Subject: Re: patch to mod_authz_dbd to handle query parameters
Message-ID: <20151118120112.GA30637@kiribati.inrialpes.fr>
Reply-To: jose.kahan@w3.org
References: <20150414173852.GA7233@kiribati.inrialpes.fr>
 <304DB914-ED71-4476-B875-F1ABDD1E370C@sharp.fm>
 <20150423195443.GA6564@kiribati.inrialpes.fr>
 <20150428165148.GA17745@kiribati.inrialpes.fr>
 <20150530092940.GA5259@kiribati.inrialpes.fr>
 <20150530093150.GA5492@kiribati.inrialpes.fr>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20150530093150.GA5492@kiribati.inrialpes.fr>
User-Agent: Mutt/1.5.21 (2010-09-15)

Hi,

Not having heard back since submitting this enhancement, I decided
to put it on github to share it with other people who may be 
interested by it [1]. I integrated the changes from [2] and used
2.4.17 as the "base version".

My original submission is [3].

Feel free to contact me if you are interested to integrate this
into apache and require further changes.

-jose

[1] https://github.com/jkbzh/apache2_mod_authz_dbd
[2] https://bz.apache.org/bugzilla/show_bug.cgi?id=57868
[3] https://bz.apache.org/bugzilla/show_bug.cgi?id=58025

From dev-return-84606-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 12:58:55 2015
Return-Path: <dev-return-84606-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EC27F181A6
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 12:58:54 +0000 (UTC)
Received: (qmail 88881 invoked by uid 500); 18 Nov 2015 12:58:49 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 88818 invoked by uid 500); 18 Nov 2015 12:58:49 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 88808 invoked by uid 99); 18 Nov 2015 12:58:49 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 12:58:49 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 0073AC3DE6
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 12:58:48 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.099
X-Spam-Level:
X-Spam-Status: No, score=-0.099 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 1m1M3xbB-0tv for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 12:58:42 +0000 (UTC)
Received: from mail-wm0-f44.google.com (mail-wm0-f44.google.com [74.125.82.44])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 0B355439CD
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 12:58:42 +0000 (UTC)
Received: by wmec201 with SMTP id c201so71817565wme.1
        for <dev@httpd.apache.org>; Wed, 18 Nov 2015 04:58:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        bh=dCwoYTHlC+lRkak47KLW4lxBxZFG1IQUc3F/4TSsHCQ=;
        b=NfSWfKWuvMpwiyF9G1ieHHEi/mRDqc7C8Y9EUZk4spEpng52uMUAKJNTU4Jh+p1q8q
         BpkOhJMzbvutTmamCDFdbPNouPKsK+e6bmxyt7IggLrbiEeIl93Y/GYH7FrZvhk2TYQ5
         AxJqbyZ7WQ7Bz1r432sj7mWC1mTNuf1i6FIWqOlGe4TK5GW7MA1Tqsui/8emmS8sZ4Om
         rBHu/4399YP1XVo62vsMIZ8+/lqqueluRLS6jeeEMTR0GanL0A+DIRHC0h/bTXIGScj7
         iTKZCoykUhe9KyRCG+y0/Wre6wx6X0NdDE5oW7MTn8YuZDV4PI1YmYt2vjAwayuvlse5
         fNCg==
X-Received: by 10.28.153.130 with SMTP id b124mr9817830wme.12.1447851521288;
        Wed, 18 Nov 2015 04:58:41 -0800 (PST)
Received: from localhost.localdomain (nat-pool-brq-t.redhat.com. [213.175.37.10])
        by smtp.gmail.com with ESMTPSA id gl10sm2523997wjb.30.2015.11.18.04.58.40
        for <dev@httpd.apache.org>
        (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Wed, 18 Nov 2015 04:58:40 -0800 (PST)
Message-ID: <564C75FF.9090408@gmail.com>
Date: Wed, 18 Nov 2015 13:58:39 +0100
From: Michal Karm <michal.babacek@gmail.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:31.0) Gecko/20100101 Thunderbird/31.7.0
MIME-Version: 1.0
To: dev@httpd.apache.org
Subject: Re: svn commit: r1650655 - in /httpd/httpd/branches/2.4.x: CHANGES
 STATUS modules/proxy/proxy_util.c
References: <20150109203751.20247AC0143@hades.apache.org> <564A0A06.1040300@gmail.com> <CAKQ1sVP-ZO=C8kUt_+tW7+h5A=yjDuKhEE9ah9shF1xRQVciRw@mail.gmail.com> <F824122C-EF56-4A66-B921-8FB8AE5BF179@jaguNET.com> <CAKQ1sVMrLPdUrxnxahscpW_JmPW=jf5uDNhXaCZSa8G2mNiCkg@mail.gmail.com> <EF411C1E-AFD0-44E5-8358-72854B79FEC3@jaguNET.com> <CAKQ1sVNdSG3mohk48TWGx+2Gyx5tX9f=T_Va04TwShmKV1diQg@mail.gmail.com> <15B8666D-025C-4DA3-B730-342941D91B1E@jaguNET.com>
In-Reply-To: <15B8666D-025C-4DA3-B730-342941D91B1E@jaguNET.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

On 11/17/2015 02:28 PM, Jim Jagielski wrote:
> Agreed... if we should optimize, then focusing on ap_proxy_port_of_scheme(),
> which is part of the actual API, is likely best.
>
>> On Nov 17, 2015, at 8:20 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>
>> On Tue, Nov 17, 2015 at 2:12 PM, Jim Jagielski <jim@jagunet.com> wrote:
>>> I would propose that if the below is NOT the cause, then the
>>> old version remain. There is a lot to be said for simplicity
>>> and clarity.
>> There is still a (per request) call to ap_proxy_port_of_scheme() in
>> ap_proxy_determine_connection() we can't avoid (AFAICT), so it is
>> worth optimize it anyway IMO.
>>
>>> Plus, the whole reason for ap_proxy_port_of_scheme() was
>>> to avoid the sorts of special numbers the below "hides"
>>> in various locations.
>> Agreed, the optimization in ap_proxy_port_of_scheme() only is probably better.
>

Hi guys, FYI,
the patch suggested by Yenn [1][2] did not help the performance
results in any substantial capacity. The difference between having and not having

      if (uri.port && uri.port == ap_proxy_port_of_scheme(uri.scheme)) {
          uri.port = 0;
      }

in proxy_util.c is still at least 30% performance loss, gain respectively.

The test case is having hundreds of different application contexts
being accessed by hundreds of concurrent clients.

Thanks for comments.

Cheers

[1] 
http://mail-archives.apache.org/mod_mbox/httpd-dev/201511.mbox/%3CCAKQ1sVP-ZO%3DC8kUt_%2BtW7%2Bh5A%3DyjDuKhEE9ah9shF1xRQVciRw%40mail.gmail.com%3E
[2] 
http://mail-archives.apache.org/mod_mbox/httpd-dev/201511.mbox/%3CCAKQ1sVO_-Shud7EXrCBn-KhjdPdNVk96Npwxeeb6Lk5n0TE1KA%40mail.gmail.com%3E

Michal Karm Babacek

-- 
Sent from my Hosaka Ono-Sendai Cyberspace 7


From dev-return-84607-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 14:08:20 2015
Return-Path: <dev-return-84607-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7EE98184C0
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 14:08:20 +0000 (UTC)
Received: (qmail 42248 invoked by uid 500); 18 Nov 2015 14:08:20 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 42175 invoked by uid 500); 18 Nov 2015 14:08:20 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 42165 invoked by uid 99); 18 Nov 2015 14:08:20 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 14:08:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 7FAA5C0FEC
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 14:08:19 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id zNI0GrUsM0gN for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 14:08:18 +0000 (UTC)
Received: from mail-qk0-f176.google.com (mail-qk0-f176.google.com [209.85.220.176])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 9B174232AA
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 14:08:18 +0000 (UTC)
Received: by qkao63 with SMTP id o63so14069176qka.2
        for <dev@httpd.apache.org>; Wed, 18 Nov 2015 06:08:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        bh=UkUnQF3D0qs4tOY+mGr6YUG5Jdq/arLI6A0bguyPc3k=;
        b=SA9irScjV5t9hc0e3Awlys117lEDQHkL0G3DRKFufVP0RMHp9mczdSIJmWA78mBRLk
         1pzmxmNLASDUHOZyLqV7qrz9MNd+/3PLLsMEnHdx4hjMmNpjyuWcigZXy9RyOsqCGas8
         tUkHAkQAWN3q1J05A9X8m0f0MxbhWoyc/46kMTysTMF0r9S8/5HgG/FGBVPRz7akCs5f
         swNlwHZAgqh7M0aKCppkrCZgQcucK7oPKUHMA2xuWQN3VT2d4gcpTqL7Z3Aco287Yqw+
         5Z/UjLbRAfOgksvPjs4GHS9bZxDvBGdIeZ57uK0bAxjLhTHs856Twlb5yK8BQJg9cexs
         2TRQ==
MIME-Version: 1.0
X-Received: by 10.55.76.73 with SMTP id z70mr1588019qka.38.1447855692617; Wed,
 18 Nov 2015 06:08:12 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Wed, 18 Nov 2015 06:08:12 -0800 (PST)
In-Reply-To: <564C75FF.9090408@gmail.com>
References: <20150109203751.20247AC0143@hades.apache.org>
	<564A0A06.1040300@gmail.com>
	<CAKQ1sVP-ZO=C8kUt_+tW7+h5A=yjDuKhEE9ah9shF1xRQVciRw@mail.gmail.com>
	<F824122C-EF56-4A66-B921-8FB8AE5BF179@jaguNET.com>
	<CAKQ1sVMrLPdUrxnxahscpW_JmPW=jf5uDNhXaCZSa8G2mNiCkg@mail.gmail.com>
	<EF411C1E-AFD0-44E5-8358-72854B79FEC3@jaguNET.com>
	<CAKQ1sVNdSG3mohk48TWGx+2Gyx5tX9f=T_Va04TwShmKV1diQg@mail.gmail.com>
	<15B8666D-025C-4DA3-B730-342941D91B1E@jaguNET.com>
	<564C75FF.9090408@gmail.com>
Date: Wed, 18 Nov 2015 15:08:12 +0100
Message-ID: <CAKQ1sVMw=78Y6Da8k2kxD5G=w0R=qcke07-ads4anaS3fyWpOQ@mail.gmail.com>
Subject: Re: svn commit: r1650655 - in /httpd/httpd/branches/2.4.x: CHANGES
 STATUS modules/proxy/proxy_util.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Cc: michal.babacek@gmail.com
Content-Type: text/plain; charset=UTF-8

On Wed, Nov 18, 2015 at 1:58 PM, Michal Karm <michal.babacek@gmail.com> wrote:
>
> the patch suggested by Yenn [1][2] did not help the performance
> results in any substantial capacity. The difference between having and not
> having
>
>      if (uri.port && uri.port == ap_proxy_port_of_scheme(uri.scheme)) {
>          uri.port = 0;
>      }
>
> in proxy_util.c is still at least 30% performance loss, gain respectively.

The code above is load time only (i.e. not per request), so it's not
this particular ap_proxy_port_of_scheme() which eats cycles, but
rather the fact that the proxy worker URL (name) is now canonicalized
at startup (not including the port if it is well known) and thus when
that URL is parsed/used at runtime (per request) in
ap_proxy_determine_connection(), the backend's port needs to be
determined using ap_proxy_port_of_scheme().

I thought this latter call was the culprit for the increased cycles,
but it seems not (the new version should be quite more efficient than
the previous code to find a know port associated to a scheme).
So I'm a bit lost here...

Can you confirm that reverting this only commit (r1650655) from 2.4.17
fixes the performance loss?

Also, which proxy module(s) is(are) used, http/ajp/...?
How are the backends ports declared in ProxyPass/BalancerMember
directives, using the default port for the scheme (ie. 80/443 for
http/s, 8009 for ajp, ...) or with a custom port or else no port at
all?

Regards,
Yann.

From dev-return-84608-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 14:16:28 2015
Return-Path: <dev-return-84608-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 71D1418509
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 14:16:28 +0000 (UTC)
Received: (qmail 59227 invoked by uid 500); 18 Nov 2015 14:16:28 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 59164 invoked by uid 500); 18 Nov 2015 14:16:28 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 59154 invoked by uid 99); 18 Nov 2015 14:16:27 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 14:16:27 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 75E6CC71C1
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 14:16:27 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.001
X-Spam-Level: ***
X-Spam-Status: No, score=3.001 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id NprcYA4HoU3C for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 14:16:17 +0000 (UTC)
Received: from mail-io0-f178.google.com (mail-io0-f178.google.com [209.85.223.178])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 860AF232B4
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 14:16:17 +0000 (UTC)
Received: by iofh3 with SMTP id h3so54521864iof.3
        for <dev@httpd.apache.org>; Wed, 18 Nov 2015 06:16:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=t0l/VMnKdwpRuaYGbQ73INFXh5UPzbzKXtgpoIslg9U=;
        b=bXABU7ZA5ClDwfb0l7rHnTAPZVva5/m8IZGauo7stoabtsg64Zq2jJCePJEb0eYEaO
         zLD4RnvyljoRh9kxnc+3nLLMP0YAcIZRLLGwIe2GCDKFxgCRKgY4RxejUNkgnSzSPuuJ
         tP0pOz4G+mQoPbj56HWkgsIq0Y+ulh7uoCLxUWlCIrUkOn5hCp87fXTXZ4qCFRfqZma8
         e2G+YlDeu4upJbB2IM2vbPSS95Uzd90xmumMxr2wv1v2PpmzbKCMODkuQhwUR0wu0KpN
         DZNJ6LcmRN+9Wil8UX21VXc0fDLW9+C1NpDZK+yKr65XCxC+qIvT+H17HZEYJQcbKSz3
         YcvQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=t0l/VMnKdwpRuaYGbQ73INFXh5UPzbzKXtgpoIslg9U=;
        b=jKd0QHen6evA09Fw2bsXv3Fa7ztPAMz2B1kTSWnlNBhY3u7QwuoQ5xoSc4dpoi24a+
         Wngo+wuceRrrkBSpj5cvymABCfILF91iVt8C670P/OCePtS1vvd+QSesCSzBkSEJiAUC
         mvn5Y5NOkwHoRxvGxz3uE5m4voFZofjImmy+N6/GKDDleqEG1rP0HjXVWFxeAkoonsqo
         8NqN4D9inb1rbfvgYkiGYuTpLdr+a3S4QnDTlEDU7h8+OZ2sZRSIeoX7Kx8vUPxVjp9H
         SmHFuyNJnb8VDJevV5/HFsnmEML1hJ1kRWr9hiKYT0inlJ9trtOxyM2arKUr8gByiKq3
         rQ0A==
X-Gm-Message-State: ALoCoQlZh8DoRr9RvMjZzNGuDzG4V09gQey3O/y1duBrsgirq81UGbupQTiqpYP2S/BFQ4O7MuBn
MIME-Version: 1.0
X-Received: by 10.107.10.66 with SMTP id u63mr2874425ioi.86.1447856171020;
 Wed, 18 Nov 2015 06:16:11 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Wed, 18 Nov 2015 06:16:10 -0800 (PST)
In-Reply-To: <04eb01d121f2$ff3c7710$fdb56530$@qqmail.nl>
References: <RT-Ticket-4145@openssl.org>
	<CACsi2527hLC6HhBAiOHMOarvj7-3eYLpc_7T33OE4PXtrsbjuA@mail.gmail.com>
	<rt-4.0.19-28684-1447802781-437.4145-21-0@openssl.org>
	<CACsi252q_TZQEfaMGNicqk4JbyyMYFxnopJUnJnSH-3Ub0fjHw@mail.gmail.com>
	<04eb01d121f2$ff3c7710$fdb56530$@qqmail.nl>
Date: Wed, 18 Nov 2015 08:16:10 -0600
Message-ID: <CACsi251wn9TV2en--aAJCeFcgbsdMXas_02HFz64VArVQO5+Ww@mail.gmail.com>
Subject: Re: [openssl-dev] [openssl.org #4145] Enhancement: patch to support
 s_client -starttls http
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a113f93bec289070524d1480f

--001a113f93bec289070524d1480f
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Wed, Nov 18, 2015 at 5:19 AM, Bert Huijben <bert@qqmail.nl> wrote:

> Hi William,
>
>
>
> Is any commonly used client actually implementing this spec in a way that
> makes this RFC relevant for httpd?
>
>
Note httpd already implements this correctly, it's simply a matter of not
breaking it.  My quick checks indicate that 2.4.18-dev is working well.
Next check is the protocols patch in the queue.

My checks with -starttls ftp indicate we broke mod_ftp auth over explicit
tls connections some time back in 2.4.13-dev when we had fixed error
document response to speaking plain http over https.  Need to see how many
other ways mod_ftp tls has been corrupted recently, but will probably
leverage mod_ssl's internal upgrade handling for the mod_ftp use case.

The major peering for this upgrade logic has been CUPS printing.  Outside
of this case there has been fairly little traction.

SNI and ALPN both solve issues that this spec was designed to solve (host,
then tls handshake, upgrade to a specific protocol etc).

What it now solves is limited to consolidating on port 80, and very few
clients ever picked this up.


> Sure we could implement this=E2=80=A6 Perhaps we already did but once you=
 switch
> to TLS there are so many security related things to account for.
>
>
>
> Ignoring the server certificate case, what about SNI and ALPN?
>
>
>
> Is there really a specific upgrade to tls/1.0, 1.1 and 1.2. Or is one
> upgrade enough as the handshake does the rest.
>

The spec suggests it is called out, but you are correct, in this tool we
begin at the appropriate -tls1_2 provided (fixing Yann's observation) but
perform a normal handshake.

Does this also allow switching to http/2 in one step via ALPN?
>
>
>
> Or is that explicitly forbidden?
>

There is an interesting thread
http://www.ietf.org/mail-archive/web/httpbisa/current/msg24147.html and
further discussion about ALPN vs Upgrade and the coexistence of the two
schemas.

--001a113f93bec289070524d1480f
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On W=
ed, Nov 18, 2015 at 5:19 AM, Bert Huijben <span dir=3D"ltr">&lt;<a href=3D"=
mailto:bert@qqmail.nl" target=3D"_blank">bert@qqmail.nl</a>&gt;</span> wrot=
e:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8ex;b=
order-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:s=
olid;padding-left:1ex"><div lang=3D"NL" link=3D"blue" vlink=3D"purple"><div=
><p class=3D"MsoNormal"><span lang=3D"EN-US" style=3D"font-size:11pt;font-f=
amily:Calibri,sans-serif;color:rgb(31,73,125)">Hi William,<u></u><u></u></s=
pan></p><p class=3D"MsoNormal"><span lang=3D"EN-US" style=3D"font-size:11pt=
;font-family:Calibri,sans-serif;color:rgb(31,73,125)"><u></u>=C2=A0<u></u><=
/span></p><p class=3D"MsoNormal"><span lang=3D"EN-US" style=3D"font-size:11=
pt;font-family:Calibri,sans-serif;color:rgb(31,73,125)">Is any commonly use=
d client actually implementing this spec in a way that makes this RFC relev=
ant for httpd?<u></u><u></u></span></p><p class=3D"MsoNormal"><span lang=3D=
"EN-US" style=3D"font-size:11pt;font-family:Calibri,sans-serif;color:rgb(31=
,73,125)"><u></u></span></p></div></div></blockquote><div><br></div><div>No=
te httpd already implements this correctly, it&#39;s simply a matter of not=
 breaking it.=C2=A0 My quick checks indicate that 2.4.18-dev is working wel=
l.=C2=A0 Next check is the protocols patch in the queue.</div><div><br></di=
v><div>My checks with -starttls ftp indicate we broke mod_ftp auth over exp=
licit tls connections some time back in 2.4.13-dev when we had fixed error =
document response to speaking plain http over https.=C2=A0 Need to see how =
many other ways mod_ftp tls has been corrupted recently, but will probably =
leverage mod_ssl&#39;s internal upgrade handling for the mod_ftp use case.<=
/div><div><br></div><div>The major peering for this upgrade logic has been =
CUPS printing.=C2=A0 Outside of this case there has been fairly little trac=
tion.</div><div><br></div><div>SNI and ALPN both solve issues that this spe=
c was designed to solve (host, then tls handshake, upgrade to a specific pr=
otocol etc).</div><div><br></div><div>What it now solves is limited to cons=
olidating on port 80, and very few clients ever picked this up.</div><div>=
=C2=A0</div><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0=
.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-s=
tyle:solid;padding-left:1ex"><div lang=3D"NL" link=3D"blue" vlink=3D"purple=
"><p class=3D"MsoNormal"><span style=3D"color:rgb(31,73,125);font-family:Ca=
libri,sans-serif;font-size:11pt">Sure we could implement this=E2=80=A6 Perh=
aps we already did but once you switch to TLS there are so many security re=
lated things to account for.</span></p><p class=3D"MsoNormal"><span lang=3D=
"EN-US" style=3D"font-size:11pt;font-family:Calibri,sans-serif;color:rgb(31=
,73,125)"><u></u>=C2=A0<u></u></span></p><p class=3D"MsoNormal"><span lang=
=3D"EN-US" style=3D"font-size:11pt;font-family:Calibri,sans-serif;color:rgb=
(31,73,125)">Ignoring the server certificate case, what about SNI and ALPN?=
<u></u><u></u></span></p><p class=3D"MsoNormal"><span lang=3D"EN-US" style=
=3D"font-size:11pt;font-family:Calibri,sans-serif;color:rgb(31,73,125)"><u>=
</u>=C2=A0<u></u></span></p><p class=3D"MsoNormal"><span lang=3D"EN-US" sty=
le=3D"font-size:11pt;font-family:Calibri,sans-serif;color:rgb(31,73,125)">I=
s there really a specific upgrade to tls/1.0, 1.1 and 1.2. Or is one upgrad=
e enough as the handshake does the rest.</span><span style=3D"color:rgb(31,=
73,125);font-family:Calibri,sans-serif;font-size:11pt">=C2=A0</span></p></d=
iv></blockquote><div>=C2=A0</div><div>The spec suggests it is called out, b=
ut you are correct, in this tool we begin at the appropriate -tls1_2 provid=
ed (fixing Yann&#39;s observation) but perform a normal handshake.</div><di=
v><br></div><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0=
.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-s=
tyle:solid;padding-left:1ex"><div lang=3D"NL" link=3D"blue" vlink=3D"purple=
"><p class=3D"MsoNormal"><span lang=3D"EN-US" style=3D"font-size:11pt;font-=
family:Calibri,sans-serif;color:rgb(31,73,125)"><u></u></span></p><p class=
=3D"MsoNormal"><span lang=3D"EN-US" style=3D"font-size:11pt;font-family:Cal=
ibri,sans-serif;color:rgb(31,73,125)">Does this also allow switching to htt=
p/2 in one step via ALPN?<u></u><u></u></span></p><p class=3D"MsoNormal"><s=
pan lang=3D"EN-US" style=3D"font-size:11pt;font-family:Calibri,sans-serif;c=
olor:rgb(31,73,125)"><u></u>=C2=A0<u></u></span></p><p class=3D"MsoNormal">=
<span lang=3D"EN-US" style=3D"font-size:11pt;font-family:Calibri,sans-serif=
;color:rgb(31,73,125)">Or is that explicitly forbidden?</span></p></div></b=
lockquote><div><br></div><div>There is an interesting thread=C2=A0<a href=
=3D"http://www.ietf.org/mail-archive/web/httpbisa/current/msg24147.html">ht=
tp://www.ietf.org/mail-archive/web/httpbisa/current/msg24147.html</a> and f=
urther discussion about ALPN vs Upgrade and the coexistence of the two sche=
mas.</div><div><br></div></div></div></div>

--001a113f93bec289070524d1480f--

From dev-return-84609-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 15:26:51 2015
Return-Path: <dev-return-84609-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D71681884A
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 15:26:50 +0000 (UTC)
Received: (qmail 74397 invoked by uid 500); 18 Nov 2015 15:26:50 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 74323 invoked by uid 500); 18 Nov 2015 15:26:50 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 74313 invoked by uid 99); 18 Nov 2015 15:26:50 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 15:26:50 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id BE434C3E20
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 15:26:49 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level:
X-Spam-Status: No, score=0.001 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=heroku-com.20150623.gappssmtp.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id apL_H4DTOa2R for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 15:26:42 +0000 (UTC)
Received: from mail-wm0-f46.google.com (mail-wm0-f46.google.com [74.125.82.46])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id D2B5221195
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 15:26:41 +0000 (UTC)
Received: by wmww144 with SMTP id w144so201917696wmw.1
        for <dev@httpd.apache.org>; Wed, 18 Nov 2015 07:26:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=heroku-com.20150623.gappssmtp.com; s=20150623;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to;
        bh=Qo6GR6qkm5iGe41xTUvYhAlT3BqVI9Q99n2B55DBFxg=;
        b=CQ5twd6VaM3D15PFFnPnQdEawSOK0kf3nI7i9Cho/PMQnpZmiawRiXfraqdXsdYyzv
         H8a5QY9s7MO9GyHo0qT0ZBQdWbK8LBGdXGKN/RBBFYLhLtf8XmbGGMfp5LB3qj1s/gqd
         xvt8XtoR+eTgIT4aKYW2YAl3K4LafltCD+OKKgon9JbZA/PdphxKd3V6wHWaM3i9B56k
         yTHWcoX4LizhUW1vgxwGsCQJMHXKifel0eLFjxNgb7J1k94oTos7bjkDf10GVSaPUPeg
         CYCRyya2Oh5HRJO0F4P6IjpObCxNt+l6Y4NAWntH/Bl1mvCMEJuNuZgq0ZOZ8WiB8T+N
         csbg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:content-type:mime-version:subject:from
         :in-reply-to:date:content-transfer-encoding:message-id:references:to;
        bh=Qo6GR6qkm5iGe41xTUvYhAlT3BqVI9Q99n2B55DBFxg=;
        b=jm+ozM5okqeaxnoN7t5k10zvIVRtlHAHaDlj7i+GGorNgiC8c+vyaOinv6vHEatxg4
         gSzZ3/VVbi8tzPf8PAo9rVhLBhOTuwJub5FpG2V+v8FIipxxJdedBAUCS7N56Zt4F4r7
         A1DqEQ4OPDNHWHROKYZe5ABSrgIiRfyicBC/3qWX2eflSbETjYPM5LlfbVg5dJ+60rY7
         CnsBNuT4o1Yrev6LXJiDQdNaGwTNvVMc64IiF+XrKEC8KBQAgm6pZMMpNU0V2xglzAWK
         cvSjGRA1JFZ5z2ipjydRCxOU+xhjyLEhgj41cNZ5bQeNhceAlJ13IyU3ePKSpqU4Nnu6
         eneg==
X-Gm-Message-State: ALoCoQnbnXpNM/ivtlx9J0AsJTjZRlUb7wcvHgNFRhZv7mDiaUQrw8OdgveiOSN+usj5rNW+tP40
X-Received: by 10.28.129.82 with SMTP id c79mr5012824wmd.80.1447860401341;
        Wed, 18 Nov 2015 07:26:41 -0800 (PST)
Received: from [192.168.19.20] (ipbcc0d8c7.dynamic.kabel-deutschland.de. [188.192.216.199])
        by smtp.gmail.com with ESMTPSA id t2sm18797762wmt.1.2015.11.18.07.26.40
        for <dev@httpd.apache.org>
        (version=TLS1 cipher=ECDHE-RSA-AES128-SHA bits=128/128);
        Wed, 18 Nov 2015 07:26:40 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: 2.4.18?
From: David Zuelke <dz@heroku.com>
In-Reply-To: <137dbab0d0d5e1199ae660d5c449504d@ausics.net>
Date: Wed, 18 Nov 2015 16:26:38 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <8F160745-C72D-4F04-931F-2B33D4116B9C@heroku.com>
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net> <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com> <139befce90c51c313f7b512915241f71@ausics.net> <93FFD147-A1B3-4902-B2C2-630EB7742C0D@sharp.fm> <623514d11afa03abfdbf687643130442@ausics.net> <3EDB21F5-343A-46CB-874D-08DA7C4D86DE@sharp.fm> <137dbab0d0d5e1199ae660d5c449504d@ausics.net>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

On 18.11.2015, at 08:11, Noel Butler <noel.butler@ausics.net> wrote:

> absolutely not! I personally only update  phpmyadmin once, on initial =
major release, because I (like many others) were so of updating it every =
few days .

> You obviously dont manage very many public facing servers then, I have =
that advantage of looking at it from both sides, when I do testing - I =
test based on what sys admins want.

Please don't make your inability to quickly roll out updated versions my =
problem.

I want SO_REUSEPORT for my users, but with the REDIRECT_URL regression, =
I am stuck on 2.4.16.

You're always free to skip a release, so what's the issue?



From dev-return-84610-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 15:43:50 2015
Return-Path: <dev-return-84610-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E7A35188F6
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 15:43:50 +0000 (UTC)
Received: (qmail 23610 invoked by uid 500); 18 Nov 2015 15:43:50 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 23546 invoked by uid 500); 18 Nov 2015 15:43:50 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 23536 invoked by uid 99); 18 Nov 2015 15:43:50 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 15:43:50 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 0657D1801DA
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 15:43:50 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id OYZR_i7Qj1zg for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 15:43:40 +0000 (UTC)
Received: from resqmta-po-02v.sys.comcast.net (resqmta-po-02v.sys.comcast.net [96.114.154.161])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 0F0082304B
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 15:43:39 +0000 (UTC)
Received: from resomta-po-08v.sys.comcast.net ([96.114.154.232])
	by resqmta-po-02v.sys.comcast.net with comcast
	id j3jS1r003516pyw013jY5v; Wed, 18 Nov 2015 15:43:32 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-08v.sys.comcast.net with comcast
	id j3jX1r00S2U0RYt013jYjU; Wed, 18 Nov 2015 15:43:32 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: 2.4.18?
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <46dd21388865d4a6b41e72cf00cd0303@ausics.net>
Date: Wed, 18 Nov 2015 10:43:31 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <99B78A9A-41F0-4BA3-91E4-84EDBCC9D50E@jaguNET.com>
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net> <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com> <139befce90c51c313f7b512915241f71@ausics.net> <BCBFC8FF-EE49-4E2F-8783-69DECEB025EF@greenbytes.de> <d4d0ad850c6aa9f3b5186929bad23d71@ausics.net> <564B1E9F.9040100@thelounge.net> <46dd21388865d4a6b41e72cf00cd0303@ausics.net>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1447861412;
	bh=1M8qYPJnwR7/Ku4LU3rRp2gK2bi+WuwsiqT5xt0tGCo=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=weQcms//wNbYrRuONynQ211Tnhv7lvQFMTaW3PLL3BjMpmNAkw6CNgy7W9V9e0IIp
	 66Uh3OPfWjA3I3K+yfMdRY+HzHbuAisRaF618INAuWvWw/RZ3Yi9/rx1C4wnhvhUZi
	 uXqtT9CW84xkI5br4ML8IN6aiO8ypocDbb9l/ThG7exNoURVTAQ49cW+kgwWtmFKtV
	 Uk0fZbwfvhdRAXeLhQzbvylaUxyI9z+qrdV7aybbNziMi7w1IYPhqTVERQZc1mGBQt
	 3ntVSpe9VLy2Rp60KS3y7n+9gpbsvKhmNwmsu/mYpvk1Dh7sAZzoN6E8qBwDQxJOCr
	 LXCflEk/xZXpA==

If you don't need the stuff in 2.4.18 and 2.4.17 is fine
for you then there is no need to upgrade...

> On Nov 18, 2015, at 2:16 AM, Noel Butler <noel.butler@ausics.net> =
wrote:
>=20
> On 17/11/2015 22:33, Reindl Harald wrote:
>=20
>> 5 or 6 bloody weeks is a month - so what's the problem?
>> any other software but httpd is allowed to have monthly updates?
>> "I can accept" - seriously - you can just ignore a release when you
>> think it's not important for you but i don't get why anybody else
>> should wait for available non-security bugfixes just because you feel
>> like someone enforces you to update your server
>=20
> your problem harry as usual is you dont comprehend whats said, because =
i never once said it was OK for that other software, in fact its made =
clear otherwise, but I'll grant you your comments based only on the fact =
you have little comprehension of english and rely on translators.
>=20
>=20
>=20
> --=20
> If you have the urge to reply to all rather than reply to list, you =
best
> read  http://members.ausics.net/qwerty/


From dev-return-84611-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 15:46:00 2015
Return-Path: <dev-return-84611-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9573B1891E
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 15:46:00 +0000 (UTC)
Received: (qmail 29856 invoked by uid 500); 18 Nov 2015 15:46:00 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 29789 invoked by uid 500); 18 Nov 2015 15:45:59 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 29779 invoked by uid 99); 18 Nov 2015 15:45:59 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 15:45:59 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 844D01801DA
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 15:45:59 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.652
X-Spam-Level:
X-Spam-Status: No, score=0.652 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 2Bbital1kPR1 for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 15:45:51 +0000 (UTC)
Received: from resqmta-ch2-02v.sys.comcast.net (resqmta-ch2-02v.sys.comcast.net [69.252.207.34])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id D047E2327B
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 15:45:50 +0000 (UTC)
Received: from resomta-ch2-02v.sys.comcast.net ([69.252.207.98])
	by resqmta-ch2-02v.sys.comcast.net with comcast
	id j3l31r00727uzMh013lkcF; Wed, 18 Nov 2015 15:45:44 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-02v.sys.comcast.net with comcast
	id j3lj1r0092U0RYt013ljxQ; Wed, 18 Nov 2015 15:45:44 +0000
From: Jim Jagielski <jim@jaguNET.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Subject: CentOS 7 and test framework
Date: Wed, 18 Nov 2015 10:45:43 -0500
Message-Id: <C2F324D9-3321-48C0-B865-9EF60032A260@jaguNET.com>
Cc: dev@perl.apache.org
To: httpd <dev@httpd.apache.org>
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1447861544;
	bh=yRi8WgpeaPn8d1RldHbk/KeFOpQAP2xKoUUmM0AQILo=;
	h=Received:Received:From:Content-Type:Subject:Date:Message-Id:To:
	 Mime-Version;
	b=dZoCGAAPqIMhBhEqKVkct82obyE+VJKdaupRc5LF+zhok2LmWpOfpfqwps/VrnAR0
	 QJFKbjMldufD86uGF4muc3V71rTl9VcwNOAGMF6KSSdQcVn7E9iN1XjGDqzvG05ms0
	 zyzF9syOAR8+tfTOCBx1kbzZFA978o2zAVkJEBbznud6uVNiswkjsa3ePJcMSa5kMu
	 HLQ0ojRyGBmd6MnWq2FsU0oWaCMjEA/O29YE5621P4IjsibW5gZS+ISpmAnx5dSo/y
	 864vs4avHHLmI7MWkVxd/DDoXQWs4oPDEW5n5lIjS5cmPqPRFMSZ0pQTE2HalUqm8F
	 Iuua//0Ha1v4g==

Anyone else having troubles convincing the test framework
in centOS 7 to recreate the various SSL certs and stuff???

usually a 'make realclean' will delete them and a t/TEST -clean
followed by t/TEST will recreate them. No luck. Nothing
removes 'em :/


From dev-return-84612-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 15:57:31 2015
Return-Path: <dev-return-84612-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C9C0B1899D
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 15:57:31 +0000 (UTC)
Received: (qmail 68686 invoked by uid 500); 18 Nov 2015 15:57:31 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 68623 invoked by uid 500); 18 Nov 2015 15:57:31 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 68613 invoked by uid 99); 18 Nov 2015 15:57:31 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 15:57:31 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id E5544C07D8
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 15:57:30 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.009
X-Spam-Level:
X-Spam-Status: No, score=-0.009 tagged_above=-999 required=6.31
	tests=[T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id qqN-jPZJo6th for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 15:57:23 +0000 (UTC)
Received: from monica.sharp.fm (monica.sharp.fm [80.168.143.5])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTP id 638C642B60
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 15:57:23 +0000 (UTC)
Received: from [192.168.220.234] (unknown [192.168.220.234])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	(Authenticated sender: minfrin@sharp.fm)
	by monica.sharp.fm (Postfix) with ESMTPSA id 8C9A280C9B
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 15:57:16 +0000 (GMT)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: 2.4.18?
From: Graham Leggett <minfrin@sharp.fm>
In-Reply-To: <137dbab0d0d5e1199ae660d5c449504d@ausics.net>
Date: Wed, 18 Nov 2015 17:57:15 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <113F3A43-E2DB-4E05-9E72-51018D7385E8@sharp.fm>
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net> <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com> <139befce90c51c313f7b512915241f71@ausics.net> <93FFD147-A1B3-4902-B2C2-630EB7742C0D@sharp.fm> <623514d11afa03abfdbf687643130442@ausics.net> <3EDB21F5-343A-46CB-874D-08DA7C4D86DE@sharp.fm> <137dbab0d0d5e1199ae660d5c449504d@ausics.net>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

On 18 Nov 2015, at 9:11 AM, Noel Butler <noel.butler@ausics.net> wrote:

> absolutely not! I personally only update  phpmyadmin once, on initial =
major release, because I (like many others) were so of updating it every =
few days .

We=E2=80=99re catering for everybody here, not just your unique use =
case.

Regards,
Graham
=E2=80=94


From dev-return-84613-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 15:58:01 2015
Return-Path: <dev-return-84613-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9DA45189B2
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 15:58:01 +0000 (UTC)
Received: (qmail 75394 invoked by uid 500); 18 Nov 2015 15:58:00 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 75325 invoked by uid 500); 18 Nov 2015 15:58:00 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 75315 invoked by uid 99); 18 Nov 2015 15:58:00 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 15:58:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 752D81A2D9B
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 15:58:00 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.01
X-Spam-Level:
X-Spam-Status: No, score=-0.01 tagged_above=-999 required=6.31
	tests=[SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id s1lVJDLDccv5 for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 15:57:47 +0000 (UTC)
Received: from monica.sharp.fm (monica.sharp.fm [80.168.143.5])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTP id CCE0D43DB5
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 15:57:46 +0000 (UTC)
Received: from [192.168.220.234] (unknown [192.168.220.234])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	(Authenticated sender: minfrin@sharp.fm)
	by monica.sharp.fm (Postfix) with ESMTPSA id 323BD80C9B;
	Wed, 18 Nov 2015 15:57:46 +0000 (GMT)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: CentOS 7 and test framework
From: Graham Leggett <minfrin@sharp.fm>
In-Reply-To: <C2F324D9-3321-48C0-B865-9EF60032A260@jaguNET.com>
Date: Wed, 18 Nov 2015 17:57:45 +0200
Cc: dev@perl.apache.org
Content-Transfer-Encoding: quoted-printable
Message-Id: <AD386AAA-A108-4C0F-8434-2DCE91E29CEC@sharp.fm>
References: <C2F324D9-3321-48C0-B865-9EF60032A260@jaguNET.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

On 18 Nov 2015, at 5:45 PM, Jim Jagielski <jim@jaguNET.com> wrote:

> Anyone else having troubles convincing the test framework
> in centOS 7 to recreate the various SSL certs and stuff???
>=20
> usually a 'make realclean' will delete them and a t/TEST -clean
> followed by t/TEST will recreate them. No luck. Nothing
> removes 'em :/

I=E2=80=99ve had this before, but never found what caused it :(

Regards,
Graham
=E2=80=94


From dev-return-84614-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 18 17:21:50 2015
Return-Path: <dev-return-84614-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5CE7518F7E
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 18 Nov 2015 17:21:50 +0000 (UTC)
Received: (qmail 57337 invoked by uid 500); 18 Nov 2015 17:21:49 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 57264 invoked by uid 500); 18 Nov 2015 17:21:49 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 57254 invoked by uid 99); 18 Nov 2015 17:21:49 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Nov 2015 17:21:49 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 6DD48C07D8
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 17:21:49 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id B_4Wo1AlR4qq for <dev@httpd.apache.org>;
	Wed, 18 Nov 2015 17:21:48 +0000 (UTC)
Received: from mail-qg0-f50.google.com (mail-qg0-f50.google.com [209.85.192.50])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 1D6C021195
	for <dev@httpd.apache.org>; Wed, 18 Nov 2015 17:21:48 +0000 (UTC)
Received: by qgec40 with SMTP id c40so32568363qge.2
        for <dev@httpd.apache.org>; Wed, 18 Nov 2015 09:21:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=8bTDUY1oGTWy5j8bNblv06zHpWBflEGrj68KTggCeCs=;
        b=kfZWPr2nDdn2WHlsQekngFU5GI4tEc3c+6WQwojmqp8cbz6nb/ugnGwZpXmMp3/tO2
         bW2ZMp1GRh9C+wZWET3i+mXXc2SXPb142UAoUyhF5okhnnMSanGj5kUprN1Cf3tqHhT0
         A0nb8ZcRkCWcTD/P8gMOqmckTtqiK/x7hChq8JpyiXMPm8vw51BgAEnhRz/0pfsDMQzC
         qxKyc5KOLAkHGTggcdQivqXot/pxzG88rWqvrii9spwUHnbFL06LvRZV7uxWc1x4Odlp
         9YPCnGHE7iyXGjKZLbNlccNRgI9LUurgKsqHO3e/8dzt/3tewfkAFGTBuYbLK/FLmDP+
         lB7A==
MIME-Version: 1.0
X-Received: by 10.140.179.213 with SMTP id z204mr2927043qhz.70.1447867301596;
 Wed, 18 Nov 2015 09:21:41 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Wed, 18 Nov 2015 09:21:41 -0800 (PST)
In-Reply-To: <CAKQ1sVNNP9k_5SORazSkc1fTAvmQq41HULNSE6ow49AGsc0nSg@mail.gmail.com>
References: <20151117094854.AE44E3A024F@svn01-us-west.apache.org>
	<CAKQ1sVNNP9k_5SORazSkc1fTAvmQq41HULNSE6ow49AGsc0nSg@mail.gmail.com>
Date: Wed, 18 Nov 2015 18:21:41 +0100
Message-ID: <CAKQ1sVNReSsXWZfx1SS7i6RazaBmrmS7ER8Prg8kRJ+jwbvnKA@mail.gmail.com>
Subject: Re: svn commit: r1714742 - /httpd/httpd/branches/2.4.x/STATUS
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 17, 2015 at 3:50 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
> On Tue, Nov 17, 2015 at 10:48 AM,  <icing@apache.org> wrote:
>>
>> Modified: httpd/httpd/branches/2.4.x/STATUS
>> URL: http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/STATUS?rev=1714742&r1=1714741&r2=1714742&view=diff
>> ==============================================================================
>> --- httpd/httpd/branches/2.4.x/STATUS (original)
>> +++ httpd/httpd/branches/2.4.x/STATUS Tue Nov 17 09:48:54 2015
>> @@ -161,6 +161,7 @@ PATCHES PROPOSED TO BACKPORT FROM TRUNK:
>>       2.4.x patch: http://people.apache.org/~ylavic/httpd-2.4.x-check_pipeline_blank_lines.patch
>>                    (trunk works, meant to ease review)
>>       +1: ylavic, minfrin
>> +     icing: test 3 fails for me in t/security/CVE-2005-3357.t
>
> I can't reproduce this (with 2.4.x and this patch only)...

Finally got it.

The problem was about "HTTP spoken on HTTPS port" handling in
ssl_io_filter_input() not prepared to AP_MODE_INIT from
process_connection() and AP_MODE_SPECULATIVE read for H2Direct.

I fixed it in r1715023 by extending the NON_SSL_* state machine,
please review...

From dev-return-84615-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 19 09:07:41 2015
Return-Path: <dev-return-84615-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 12F40180F9
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 19 Nov 2015 09:07:41 +0000 (UTC)
Received: (qmail 22381 invoked by uid 500); 19 Nov 2015 09:07:35 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 22310 invoked by uid 500); 19 Nov 2015 09:07:35 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 22300 invoked by uid 99); 19 Nov 2015 09:07:35 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Nov 2015 09:07:35 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id BF918C1336
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 09:07:34 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.111
X-Spam-Level:
X-Spam-Status: No, score=-0.111 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=mailbox.org
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id OxxCPQ4JFJTm for <dev@httpd.apache.org>;
	Thu, 19 Nov 2015 09:07:33 +0000 (UTC)
Received: from mx2.mailbox.org (mx2.mailbox.org [80.241.60.215])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id E352820384
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 09:07:32 +0000 (UTC)
Received: from smtp1.mailbox.org (smtp1.mailbox.org [80.241.60.240])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by mx2.mailbox.org (Postfix) with ESMTPS id C848440049
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 10:07:23 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=mailbox.org; h=
	content-transfer-encoding:content-type:content-type:mime-version
	:user-agent:date:date:message-id:subject:subject:from:from
	:received; s=mail20150812; t=1447924042; bh=mg2hlp6yPTC3/gzlP7t/
	nX8z5myvYR8LrD99YTywWH8=; b=jUfPY3KJWcmBC2lTAxIc5GxYY/1J9XYqucMA
	iy4E8U9xmtK9woG8o94PSiTj2+DJZcjB0xTwqeoTfs/lnlqRqU4efYoN1PS8ETbj
	MRT/zxelDD/Y/0RFy3P6vS5arvvVCwae24ZEn8wSkBTthWW2ZxySc2lbVFCXyH1I
	DIPiIehCWHg3L0+k9ikTw/0Putv4nq1VLl8xxf9FZTrWZM9XGtE3Qf32Q6V6MsYj
	kMoNZpByZO4jMZ86vGxKCtdzywvW9b/l5Qn0TRRS2ssLa8+wa00Tc/pAAtD2BS0F
	H8GEqkkOjjUUgiUQ2iruT8mPsCBi4kmf5FFGgEfUpY+OlOT+oQ==
X-Virus-Scanned: amavisd-new at heinlein-support.de
Received: from smtp1.mailbox.org ([80.241.60.240])
	by hefe.heinlein-support.de (hefe.heinlein-support.de [91.198.250.172]) (amavisd-new, port 10030)
	with ESMTP id EArfbLxcxjbg for <dev@httpd.apache.org>;
	Thu, 19 Nov 2015 10:07:22 +0100 (CET)
To: httpd-dev <dev@httpd.apache.org>
From: Ewald Dieterich <ewald@mailbox.org>
Subject: Buffer size in mod_session_crypto.c, decrypt_string()
Message-ID: <564D914A.9090101@mailbox.org>
Date: Thu, 19 Nov 2015 10:07:22 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

This is from mod_session_crypto.c, decrypt_string():

     /* strip base64 from the string */
     decoded = apr_palloc(r->pool, apr_base64_decode_len(in));
     decodedlen = apr_base64_decode(decoded, in);
     decoded[decodedlen] = '\0';

Shouldn't that be ("+ 1" for the added '\0'):

    decoded = apr_palloc(r->pool, apr_base64_decode_len(in) + 1);

At least that's how it's done in eg. mod_auth_basic.c. Or can we make 
any assumptions about the number of characters that 
apr_base64_decode_len() returns?

From dev-return-84616-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 19 09:14:54 2015
Return-Path: <dev-return-84616-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 225E61813C
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 19 Nov 2015 09:14:54 +0000 (UTC)
Received: (qmail 46385 invoked by uid 500); 19 Nov 2015 09:14:53 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 46310 invoked by uid 500); 19 Nov 2015 09:14:53 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 46300 invoked by uid 99); 19 Nov 2015 09:14:53 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Nov 2015 09:14:53 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id CA19EC05AD
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 09:14:52 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.991
X-Spam-Level: **
X-Spam-Status: No, score=2.991 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id J1XK9HBrQGHm for <dev@httpd.apache.org>;
	Thu, 19 Nov 2015 09:14:41 +0000 (UTC)
Received: from weser.webweaving.org (weser.webweaving.org [148.251.234.232])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id CD2EB439F8
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 09:14:40 +0000 (UTC)
Received: from [10.11.0.122] (5ED29D98.cm-7-3c.dynamic.ziggo.nl [94.210.157.152])
	(authenticated bits=0)
	by weser.webweaving.org (8.15.2/8.15.2) with ESMTPSA id tAJ9EXtG068308
	(version=TLSv1 cipher=ECDHE-RSA-AES256-SHA bits=256 verify=NO)
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 10:14:33 +0100 (CET)
	(envelope-from dirkx@webweaving.org)
X-Authentication-Warning: weser.webweaving.org: Host 5ED29D98.cm-7-3c.dynamic.ziggo.nl [94.210.157.152] claimed to be [10.11.0.122]
From: Dirk-Willem van Gulik <dirkx@webweaving.org>
Content-Type: multipart/alternative; boundary="Apple-Mail=_2F7C79FD-7521-4643-8364-27DBE5863A96"
Message-Id: <D9B81A3F-CCC2-49A2-A728-3E49F96786EE@webweaving.org>
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: Buffer size in mod_session_crypto.c, decrypt_string()
Date: Thu, 19 Nov 2015 10:14:33 +0100
References: <564D914A.9090101@mailbox.org>
To: dev@httpd.apache.org
In-Reply-To: <564D914A.9090101@mailbox.org>
X-Mailer: Apple Mail (2.3096.5)
X-Greylist: Sender succeeded SMTP AUTH, not delayed by milter-greylist-4.4.3 (weser.webweaving.org [148.251.234.232]); Thu, 19 Nov 2015 10:14:33 +0100 (CET)


--Apple-Mail=_2F7C79FD-7521-4643-8364-27DBE5863A96
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=utf-8


> On 19 Nov 2015, at 10:07, Ewald Dieterich <ewald@mailbox.org> wrote:
>=20
> This is from mod_session_crypto.c, decrypt_string():
>=20
>    /* strip base64 from the string */
>    decoded =3D apr_palloc(r->pool, apr_base64_decode_len(in));
>    decodedlen =3D apr_base64_decode(decoded, in);
>    decoded[decodedlen] =3D '\0';
>=20
> Shouldn't that be ("+ 1" for the added '\0'):
>=20
>   decoded =3D apr_palloc(r->pool, apr_base64_decode_len(in) + 1);
>=20
> At least that's how it's done in eg. mod_auth_basic.c. Or can we make =
any assumptions about the number of characters that =
apr_base64_decode_len() returns?
>=20

Hmm - very strong feeling of a deja vu:  =
https://bz.apache.org/bugzilla/show_bug.cgi?id=3D43448 =
<https://bz.apache.org/bugzilla/show_bug.cgi?id=3D43448>  from some 10 =
years ago (it blew something out of the water back then).

And pretty sure we fixed the documentation. _len() returns the max size =
of the buffer (i.e. + 1).=20

And _decode the exact length of the string without the trailing \0 which =
it silently does add. And which may be shorter than _len.

So above should be fine =E2=80=94 but the=20

>    decoded[decodedlen] =3D '\0=E2=80=99;

seems both confusing and superfluous. Alternatively one could use =
_decode_binary()  in which case above terminator is absolutely needed. =
There is no _binary_len().

Dw





--Apple-Mail=_2F7C79FD-7521-4643-8364-27DBE5863A96
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=utf-8

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
charset=3Dutf-8"></head><body style=3D"word-wrap: break-word; =
-webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" =
class=3D""><br class=3D""><div><blockquote type=3D"cite" class=3D""><div =
class=3D"">On 19 Nov 2015, at 10:07, Ewald Dieterich &lt;<a =
href=3D"mailto:ewald@mailbox.org" class=3D"">ewald@mailbox.org</a>&gt; =
wrote:</div><br class=3D"Apple-interchange-newline"><div class=3D""><div =
class=3D"">This is from mod_session_crypto.c, decrypt_string():<br =
class=3D""><br class=3D""> &nbsp;&nbsp;&nbsp;/* strip base64 from the =
string */<br class=3D""> &nbsp;&nbsp;&nbsp;decoded =3D =
apr_palloc(r-&gt;pool, apr_base64_decode_len(in));<br class=3D""> =
&nbsp;&nbsp;&nbsp;decodedlen =3D apr_base64_decode(decoded, in);<br =
class=3D""> &nbsp;&nbsp;&nbsp;decoded[decodedlen] =3D '\0';<br =
class=3D""><br class=3D"">Shouldn't that be ("+ 1" for the added =
'\0'):<br class=3D""><br class=3D""> &nbsp;&nbsp;decoded =3D =
apr_palloc(r-&gt;pool, apr_base64_decode_len(in) + 1);<br class=3D""><br =
class=3D"">At least that's how it's done in eg. mod_auth_basic.c. Or can =
we make any assumptions about the number of characters that =
apr_base64_decode_len() returns?<br class=3D""><br =
class=3D""></div></div></blockquote></div><br class=3D""><div =
class=3D"">Hmm - very strong feeling of a deja vu: &nbsp;<a =
href=3D"https://bz.apache.org/bugzilla/show_bug.cgi?id=3D43448" =
class=3D"">https://bz.apache.org/bugzilla/show_bug.cgi?id=3D43448</a>&nbsp=
; from some 10 years ago (it blew something out of the water back =
then).</div><div class=3D""><br class=3D""></div><div class=3D"">And =
pretty sure we fixed the documentation. _len() returns the max size of =
the buffer (i.e. + 1).&nbsp;</div><div class=3D""><br =
class=3D""></div><div class=3D"">And _decode the exact length of the =
string without the trailing \0 which it silently does add. And which may =
be shorter than _len.</div><div class=3D""><br class=3D""></div><div =
class=3D"">So above should be fine =E2=80=94 but the&nbsp;</div><div =
class=3D""><br class=3D""></div><div class=3D""><blockquote type=3D"cite" =
class=3D"">&nbsp; &nbsp;decoded[decodedlen] =3D '\0=E2=80=99;<br =
class=3D""></blockquote><br class=3D""></div><div class=3D"">seems both =
confusing and superfluous. Alternatively one could use _decode_binary() =
&nbsp;in which case above terminator is absolutely needed. There is no =
_binary_len().</div><div class=3D""><br class=3D""></div><div =
class=3D"">Dw</div><div class=3D""><br class=3D""></div><div =
class=3D""><br class=3D""></div><div class=3D""><br class=3D""></div><div =
class=3D""><br class=3D""></div></body></html>=

--Apple-Mail=_2F7C79FD-7521-4643-8364-27DBE5863A96--

From dev-return-84617-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 19 12:09:28 2015
Return-Path: <dev-return-84617-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B6D6D18932
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 19 Nov 2015 12:09:28 +0000 (UTC)
Received: (qmail 27189 invoked by uid 500); 19 Nov 2015 12:09:28 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 27124 invoked by uid 500); 19 Nov 2015 12:09:28 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 27114 invoked by uid 99); 19 Nov 2015 12:09:28 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Nov 2015 12:09:28 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id E4150C0EC7
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 12:09:27 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id bGyq55jhRmD7 for <dev@httpd.apache.org>;
	Thu, 19 Nov 2015 12:09:21 +0000 (UTC)
Received: from mail-qg0-f41.google.com (mail-qg0-f41.google.com [209.85.192.41])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id A151C42B7B
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 12:09:21 +0000 (UTC)
Received: by qgec40 with SMTP id c40so49012193qge.2
        for <dev@httpd.apache.org>; Thu, 19 Nov 2015 04:09:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=cBSoSRrIL6v312666e95PyifQY5LniPMesNoJ2tjEHk=;
        b=WLlwHUorsUPSml/xvCVOR4h0K4AHx/kudfB4G0lsqrDeS1dhYAZ2EMO8ytDtX0rCRm
         hv+s6ka3yKAi0KfN2GbCsSYkQm3Moloz0C6G+MlYCN/91z32dOqEe1OBPC0ZTC0o+M2e
         /LQnLqClK7pIvCkI3NBjQIdVK8ig77zTQxOKty4vzHcuDlDfJkc6beoPa0+qQwr6Xwic
         BIz8+cgb5meVeVBiv2dldZS8aoLzsmXI+R7I1mt5NR63tkGDa00iLaD/EiA63HM6Wmq8
         helhQN/ycDIdNQlM+cfoYKWfxF5p0EIH+WEMORCUyHXUhU68KNSRxGGGEbTsxNyZZmaL
         t/wQ==
MIME-Version: 1.0
X-Received: by 10.140.226.198 with SMTP id w189mr5943757qhb.83.1447934955421;
 Thu, 19 Nov 2015 04:09:15 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Thu, 19 Nov 2015 04:09:15 -0800 (PST)
In-Reply-To: <D9B81A3F-CCC2-49A2-A728-3E49F96786EE@webweaving.org>
References: <564D914A.9090101@mailbox.org>
	<D9B81A3F-CCC2-49A2-A728-3E49F96786EE@webweaving.org>
Date: Thu, 19 Nov 2015 13:09:15 +0100
Message-ID: <CAKQ1sVP1pPDr=87z33KV7=cY+qjbq4qo8QqoXVZAKnmHTKsPWg@mail.gmail.com>
Subject: Re: Buffer size in mod_session_crypto.c, decrypt_string()
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Thu, Nov 19, 2015 at 10:14 AM, Dirk-Willem van Gulik
<dirkx@webweaving.org> wrote:
>
> Alternatively one could use
> _decode_binary()  in which case above terminator is absolutely needed. There
> is no _binary_len().

Or use apr_pbase64_decode(pool, in) for clarity.
(Even though it also consumes one extra byte, could be optimized in APR...)

Regards,
Yann.

From dev-return-84618-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 19 12:26:26 2015
Return-Path: <dev-return-84618-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C032C18A0A
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 19 Nov 2015 12:26:26 +0000 (UTC)
Received: (qmail 61571 invoked by uid 500); 19 Nov 2015 12:26:26 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 61472 invoked by uid 500); 19 Nov 2015 12:26:26 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 61461 invoked by uid 99); 19 Nov 2015 12:26:26 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Nov 2015 12:26:26 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id D5218C44E8
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 12:26:25 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id z7tfCOrU7X_I for <dev@httpd.apache.org>;
	Thu, 19 Nov 2015 12:26:21 +0000 (UTC)
Received: from mail-qg0-f54.google.com (mail-qg0-f54.google.com [209.85.192.54])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 264E924CA1
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 12:26:20 +0000 (UTC)
Received: by qgec40 with SMTP id c40so49302730qge.2
        for <dev@httpd.apache.org>; Thu, 19 Nov 2015 04:26:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=pg0Vi2Xf34lEXJyPJ35Ls2KGjBT6DcyKhNoXEPvxTvQ=;
        b=kAOGdMXNBIZt0HLIuR2s9uV7Lkum1Ayem/sgzDINKvkYs+zPosTJTaAlVNdFr+V4xe
         e2aoa2rum6ZBtvZBCTipLzZBze36giyO+CBNCS1yADkp5j3A6jeDzaRC76uWb0/xtGlF
         IS6Sx3JQGE/Bx8jzQfqPD1mfdEAe5xw4Y4lhWRqrgdA96p1fX8gp2WTVflbHtl0dRovd
         yvgF3omaUGHslKXzSZp57g2zU76CeIM+lyuUmZNaUqqMIvYiYaWzX1xN1xTN5fecbOjO
         fGBEOQJHR9wJ3CDtsj9u3dyTKzM51+1PqgFTRT5vys5SM0j90jLGPNgfnsIkVqq3eTRK
         Scfg==
MIME-Version: 1.0
X-Received: by 10.140.216.87 with SMTP id m84mr6961519qhb.97.1447935973442;
 Thu, 19 Nov 2015 04:26:13 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Thu, 19 Nov 2015 04:26:13 -0800 (PST)
In-Reply-To: <CAKQ1sVNReSsXWZfx1SS7i6RazaBmrmS7ER8Prg8kRJ+jwbvnKA@mail.gmail.com>
References: <20151117094854.AE44E3A024F@svn01-us-west.apache.org>
	<CAKQ1sVNNP9k_5SORazSkc1fTAvmQq41HULNSE6ow49AGsc0nSg@mail.gmail.com>
	<CAKQ1sVNReSsXWZfx1SS7i6RazaBmrmS7ER8Prg8kRJ+jwbvnKA@mail.gmail.com>
Date: Thu, 19 Nov 2015 13:26:13 +0100
Message-ID: <CAKQ1sVMVDde6yqjZQtDoLh16VNoJHi7nWs6Y+dC7ABs4zvog3g@mail.gmail.com>
Subject: Re: svn commit: r1714742 - /httpd/httpd/branches/2.4.x/STATUS
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Wed, Nov 18, 2015 at 6:21 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>
> The problem was about "HTTP spoken on HTTPS port" handling in
> ssl_io_filter_input() not prepared to AP_MODE_INIT from
> process_connection() and AP_MODE_SPECULATIVE read for H2Direct.

Btw, when http2 tests are enabled, could me make some specific test(s)
case(s) for "H2Direct on" and leave the default for all the other
tests (either implicit or explicit "H2Direct off")?

Am I right to assume "H2Direct off" is the defaut now (in 2.5-dev and
upcoming 2.4.18, trunk docs seem not updated, and [1] suggests this is
from r1708107)?

[1] https://www.mail-archive.com/dev@httpd.apache.org/msg63547.html

From dev-return-84619-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 19 12:58:28 2015
Return-Path: <dev-return-84619-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4CA6B18B72
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 19 Nov 2015 12:58:28 +0000 (UTC)
Received: (qmail 57473 invoked by uid 500); 19 Nov 2015 12:58:27 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 57388 invoked by uid 500); 19 Nov 2015 12:58:27 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 57378 invoked by uid 99); 19 Nov 2015 12:58:27 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Nov 2015 12:58:27 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 31C53C45E8
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 12:58:27 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 74xdpSRCAq1M for <dev@httpd.apache.org>;
	Thu, 19 Nov 2015 12:58:26 +0000 (UTC)
Received: from mail-qg0-f49.google.com (mail-qg0-f49.google.com [209.85.192.49])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 961CA23291
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 12:58:26 +0000 (UTC)
Received: by qgcc31 with SMTP id c31so7208201qgc.3
        for <dev@httpd.apache.org>; Thu, 19 Nov 2015 04:58:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=8vGBnnBnqfyzupSdCGmy31GpwZhsR9z0/f9jK2uq0cU=;
        b=Vx3Pl8qTrpy2spBvKW9qX8mGE1khWhbgE+OJRq7+2myEq7if87qnNx7/OxCogCjsml
         +MzAFX4IxTO94XiJnCE07TZYWbbo9AxaJSsYUjiThAqhgNzJq1RulGbqNLj/i3JtliwR
         M2YDuQlblWEf0oMWmcWXVl9saBKG1rXtXc4bDf1b8zhdhcbUdRCkOqgITajgMfcElxoO
         N59tQopZYxaqbnmzBeX34H9eJrSWObqRkJssYWf2nw9xIz8pJTKiM8ckIlDAN9qUEQTW
         LjjE1uNU2i3w3FLPOtBVoaqVZjjTqI0bL1cGt6t3vyjdrlBRk5ey3Hp156XUVz2sVzPl
         fQkw==
MIME-Version: 1.0
X-Received: by 10.140.101.51 with SMTP id t48mr7072811qge.71.1447937900121;
 Thu, 19 Nov 2015 04:58:20 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Thu, 19 Nov 2015 04:58:20 -0800 (PST)
In-Reply-To: <CAKQ1sVMVDde6yqjZQtDoLh16VNoJHi7nWs6Y+dC7ABs4zvog3g@mail.gmail.com>
References: <20151117094854.AE44E3A024F@svn01-us-west.apache.org>
	<CAKQ1sVNNP9k_5SORazSkc1fTAvmQq41HULNSE6ow49AGsc0nSg@mail.gmail.com>
	<CAKQ1sVNReSsXWZfx1SS7i6RazaBmrmS7ER8Prg8kRJ+jwbvnKA@mail.gmail.com>
	<CAKQ1sVMVDde6yqjZQtDoLh16VNoJHi7nWs6Y+dC7ABs4zvog3g@mail.gmail.com>
Date: Thu, 19 Nov 2015 13:58:20 +0100
Message-ID: <CAKQ1sVO2cydyo05eq-pBRmcrLjDB+vb-z4=i0ZDREVqadCVN0g@mail.gmail.com>
Subject: Re: svn commit: r1714742 - /httpd/httpd/branches/2.4.x/STATUS
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Thu, Nov 19, 2015 at 1:26 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>
> Am I right to assume "H2Direct off" is the defaut now (in 2.5-dev and
> upcoming 2.4.18, trunk docs seem not updated, and [1] suggests this is
> from r1708107)?

Hmm, then r1709587 swithed it back to "H2Direct on for http:, off for
https: requests", whereas the commit states "H2Direct off, on when h2c
is in Protocols".
What's the status exactly?

Thanks,
Yann.

From dev-return-84620-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 19 13:04:34 2015
Return-Path: <dev-return-84620-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A016718BC2
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 19 Nov 2015 13:04:34 +0000 (UTC)
Received: (qmail 73781 invoked by uid 500); 19 Nov 2015 13:04:34 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 73694 invoked by uid 500); 19 Nov 2015 13:04:34 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 73684 invoked by uid 99); 19 Nov 2015 13:04:34 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Nov 2015 13:04:34 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id BF39DC49FF
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 13:04:33 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.655
X-Spam-Level:
X-Spam-Status: No, score=-0.655 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RP_MATCHES_RCVD=-0.554, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id UnFl0EQ6ldf3 for <dev@httpd.apache.org>;
	Thu, 19 Nov 2015 13:04:32 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 038BF23291
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 13:04:30 +0000 (UTC)
Received: from [192.168.1.134] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 8202B15A0443
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 14:04:22 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447938262; bh=sDRllIguT3mjYhuXdsmKw1YN5UVVetWnKiV+RxyzzLE=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=kVyWDqriE2PNEOIorGls0rb0QiB2pkXgptO73fKxjXE8AcjimRpO0tM/Oc78uWlvu
	 yqKSBxUaxYCHIjuZ7SZr6nrsGh/fz05NJJQrb3sWVR+czVUakt+wpDbtnxkvgufPYG
	 kGfo1sXrr5gPfzTywcw6NnocYqRkGug1PBCWUT28=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: svn commit: r1714742 - /httpd/httpd/branches/2.4.x/STATUS
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CAKQ1sVO2cydyo05eq-pBRmcrLjDB+vb-z4=i0ZDREVqadCVN0g@mail.gmail.com>
Date: Thu, 19 Nov 2015 14:04:22 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <1C81597E-02FA-4F6C-B18F-E4F9348152BA@greenbytes.de>
References: <20151117094854.AE44E3A024F@svn01-us-west.apache.org> <CAKQ1sVNNP9k_5SORazSkc1fTAvmQq41HULNSE6ow49AGsc0nSg@mail.gmail.com> <CAKQ1sVNReSsXWZfx1SS7i6RazaBmrmS7ER8Prg8kRJ+jwbvnKA@mail.gmail.com> <CAKQ1sVMVDde6yqjZQtDoLh16VNoJHi7nWs6Y+dC7ABs4zvog3g@mail.gmail.com> <CAKQ1sVO2cydyo05eq-pBRmcrLjDB+vb-z4=i0ZDREVqadCVN0g@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)


> Am 19.11.2015 um 13:58 schrieb Yann Ylavic <ylavic.dev@gmail.com>:
>=20
> On Thu, Nov 19, 2015 at 1:26 PM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>>=20
>> Am I right to assume "H2Direct off" is the defaut now (in 2.5-dev and
>> upcoming 2.4.18, trunk docs seem not updated, and [1] suggests this =
is
>> from r1708107)?
>=20
> Hmm, then r1709587 swithed it back to "H2Direct on for http:, off for
> https: requests", whereas the commit states "H2Direct off, on when h2c
> is in Protocols".
> What's the status exactly?

The status in trunk is as documented in trunk ;-)

H2Direct, unless set otherwise, is enabled if and only if a server has =
"Protocols h2c".

The reason for enabling it also for "h2" hosts in the test framework is =
to enable
tests to run on machines that do not have SSL+ALPN in the perl tests. =
This is true
for OS X, unfortunately.

The doc in 2.4.x is not updated as the http2 modules is not updated, as =
I am waiting
for the proposed core-protocols changes to be backported.

//Stefan


From dev-return-84621-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 19 13:12:17 2015
Return-Path: <dev-return-84621-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1B3EC18C3D
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 19 Nov 2015 13:12:17 +0000 (UTC)
Received: (qmail 11474 invoked by uid 500); 19 Nov 2015 13:12:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 11395 invoked by uid 500); 19 Nov 2015 13:12:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 11381 invoked by uid 99); 19 Nov 2015 13:12:16 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Nov 2015 13:12:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 46B41C75B2
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 13:12:15 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.099
X-Spam-Level:
X-Spam-Status: No, score=-0.099 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id OWA5jeUVmEsE for <dev@httpd.apache.org>;
	Thu, 19 Nov 2015 13:12:04 +0000 (UTC)
Received: from mail-qg0-f47.google.com (mail-qg0-f47.google.com [209.85.192.47])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id BA09A20EBA
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 13:12:03 +0000 (UTC)
Received: by qgeb1 with SMTP id b1so50255044qge.1
        for <dev@httpd.apache.org>; Thu, 19 Nov 2015 05:11:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=yfERcV1p0thikoG9vv+F4uCdmIwbuVccLu6r6RhUUJk=;
        b=hxCEAiAztdliTuMpkMRAdRVcmSFFE79twzM+o+1GsMxd1Z8rUQj9Q+ltEKenUw0cA1
         FM8BJVxrGp123mVdJ0bIkbuWApTYElrLS6ET2+NbJn8NqoIwmQ5+3IPhq4IxztY4dYgL
         Mte4uKdbD1ZnPltqzau11IPvbNzf9gPMHHRTXgzOPpm5cC0nrEVFoKOBqk3AwEpXfq67
         hKhZXPrJK+jcDU9FPAA9uQUKzmIzW4rYY4e9FXnmVAZp79YoSbzYPR6d/47SB4cdqUuv
         /mUw/3vo3rhDyZQJ2DTlQUtIep+pW4nGNCpzi2C0Gqhcj5Xo7PL2w14p/+K/Ve6ezMmH
         iMIA==
MIME-Version: 1.0
X-Received: by 10.140.220.136 with SMTP id q130mr2613858qhb.24.1447938716634;
 Thu, 19 Nov 2015 05:11:56 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Thu, 19 Nov 2015 05:11:56 -0800 (PST)
In-Reply-To: <1C81597E-02FA-4F6C-B18F-E4F9348152BA@greenbytes.de>
References: <20151117094854.AE44E3A024F@svn01-us-west.apache.org>
	<CAKQ1sVNNP9k_5SORazSkc1fTAvmQq41HULNSE6ow49AGsc0nSg@mail.gmail.com>
	<CAKQ1sVNReSsXWZfx1SS7i6RazaBmrmS7ER8Prg8kRJ+jwbvnKA@mail.gmail.com>
	<CAKQ1sVMVDde6yqjZQtDoLh16VNoJHi7nWs6Y+dC7ABs4zvog3g@mail.gmail.com>
	<CAKQ1sVO2cydyo05eq-pBRmcrLjDB+vb-z4=i0ZDREVqadCVN0g@mail.gmail.com>
	<1C81597E-02FA-4F6C-B18F-E4F9348152BA@greenbytes.de>
Date: Thu, 19 Nov 2015 14:11:56 +0100
Message-ID: <CAKQ1sVNtW+P14PNuNXV+VxDPd-KQp7Z7a7isZbLw2qDgRtoF9g@mail.gmail.com>
Subject: Re: svn commit: r1714742 - /httpd/httpd/branches/2.4.x/STATUS
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Thu, Nov 19, 2015 at 2:04 PM, Stefan Eissing
<stefan.eissing@greenbytes.de> wrote:
>>
>> Hmm, then r1709587 swithed it back to "H2Direct on for http:, off for
>> https: requests", whereas the commit states "H2Direct off, on when h2c
>> is in Protocols".
>> What's the status exactly?
>
> The status in trunk is as documented in trunk ;-)
>
> H2Direct, unless set otherwise, is enabled if and only if a server has "Protocols h2c".

Is that what "H2Direct on for http:, off for https: requests" means? oO
(I prefer the commit message terms in this case :p )

>
> The reason for enabling it also for "h2" hosts in the test framework is to enable
> tests to run on machines that do not have SSL+ALPN in the perl tests. This is true
> for OS X, unfortunately.

The tests framework enables it unconditionally provided mod_http2 is loaded.

Was thinking of something like:

Index: t/conf/http2.conf.in
===================================================================
--- t/conf/http2.conf.in    (revision 1715025)
+++ t/conf/http2.conf.in    (working copy)
@@ -6,10 +6,11 @@
     <IfModule http2_module>

         LogLevel http2:debug
-        H2Direct on

         <VirtualHost h2c>
             Protocols h2c http/1.1
+            # Should be implicit with h2c
+            #H2Direct on

             <IfModule @CGI_MODULE@>
                 <Directory @SERVERROOT@/htdocs/modules/h2>
@@ -32,6 +33,7 @@

             <VirtualHost localhost:h2>
                 Protocols h2 http/1.1
+                H2Direct on

                 SSLEngine on
                 SSLCACertificateFile @SSLCA@/asf/certs/ca.crt
@@ -74,6 +76,7 @@

             <VirtualHost test.example.org:h2>
                 Protocols h2 http/1.1
+                H2Direct on

                 SSLEngine on
                 SSLCACertificateFile @SSLCA@/asf/certs/ca.crt
@@ -91,6 +94,7 @@

             <VirtualHost test2.example.org:h2>
                 Protocols http/1.1 h2
+                H2Direct on
             </VirtualHost>

             <VirtualHost test-ser.example.org:h2>
--

>
> The doc in 2.4.x is not updated as the http2 modules is not updated, as I am waiting
> for the proposed core-protocols changes to be backported.

Working on it ;)


Thanks,
Yann.

From dev-return-84622-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 19 13:14:58 2015
Return-Path: <dev-return-84622-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 08FEC18C45
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 19 Nov 2015 13:14:58 +0000 (UTC)
Received: (qmail 15252 invoked by uid 500); 19 Nov 2015 13:14:57 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 15176 invoked by uid 500); 19 Nov 2015 13:14:57 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 15166 invoked by uid 99); 19 Nov 2015 13:14:57 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Nov 2015 13:14:57 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 0D9011A5AB8
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 13:14:57 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.11
X-Spam-Level:
X-Spam-Status: No, score=-0.11 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	T_RP_MATCHES_RCVD=-0.01] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id K8T9vREw2OPu for <dev@httpd.apache.org>;
	Thu, 19 Nov 2015 13:14:41 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 457DB429AA
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 13:14:41 +0000 (UTC)
Received: from [192.168.1.134] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id D37EE15A0443
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 14:14:33 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1447938873; bh=BKOLG1jeIBA6ByeKjvwLs+cTwsT1Cd43FvQYMlhfu90=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=dX76yxJIJ0TLm2bv/D2xqYQo3cLnBsHS+CiKOMo+ubK/gttYUerOoenY/WHhOZ3k0
	 j92J81gkazJo2C3QVHRbAqubxDdP7bKU222AV94TkoaMzb6Mmgv8RggcZHZaGqvrsZ
	 DxfX/qhKMkz1R+UbDUnRuyB5JW1Nuc6FpBHtK2Q0=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: svn commit: r1714742 - /httpd/httpd/branches/2.4.x/STATUS
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CAKQ1sVNtW+P14PNuNXV+VxDPd-KQp7Z7a7isZbLw2qDgRtoF9g@mail.gmail.com>
Date: Thu, 19 Nov 2015 14:14:33 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <4F3560AA-56B2-4525-97D1-081E6AB334A1@greenbytes.de>
References: <20151117094854.AE44E3A024F@svn01-us-west.apache.org> <CAKQ1sVNNP9k_5SORazSkc1fTAvmQq41HULNSE6ow49AGsc0nSg@mail.gmail.com> <CAKQ1sVNReSsXWZfx1SS7i6RazaBmrmS7ER8Prg8kRJ+jwbvnKA@mail.gmail.com> <CAKQ1sVMVDde6yqjZQtDoLh16VNoJHi7nWs6Y+dC7ABs4zvog3g@mail.gmail.com> <CAKQ1sVO2cydyo05eq-pBRmcrLjDB+vb-z4=i0ZDREVqadCVN0g@mail.gmail.com> <1C81597E-02FA-4F6C-B18F-E4F9348152BA@greenbytes.de> <CAKQ1sVNtW+P14PNuNXV+VxDPd-KQp7Z7a7isZbLw2qDgRtoF9g@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

I can check that change on the test setup and meditate about the docs =
phrasing a bit...

> Am 19.11.2015 um 14:11 schrieb Yann Ylavic <ylavic.dev@gmail.com>:
>=20
> On Thu, Nov 19, 2015 at 2:04 PM, Stefan Eissing
> <stefan.eissing@greenbytes.de> wrote:
>>>=20
>>> Hmm, then r1709587 swithed it back to "H2Direct on for http:, off =
for
>>> https: requests", whereas the commit states "H2Direct off, on when =
h2c
>>> is in Protocols".
>>> What's the status exactly?
>>=20
>> The status in trunk is as documented in trunk ;-)
>>=20
>> H2Direct, unless set otherwise, is enabled if and only if a server =
has "Protocols h2c".
>=20
> Is that what "H2Direct on for http:, off for https: requests" means? =
oO
> (I prefer the commit message terms in this case :p )
>=20
>>=20
>> The reason for enabling it also for "h2" hosts in the test framework =
is to enable
>> tests to run on machines that do not have SSL+ALPN in the perl tests. =
This is true
>> for OS X, unfortunately.
>=20
> The tests framework enables it unconditionally provided mod_http2 is =
loaded.
>=20
> Was thinking of something like:
>=20
> Index: t/conf/http2.conf.in
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> --- t/conf/http2.conf.in    (revision 1715025)
> +++ t/conf/http2.conf.in    (working copy)
> @@ -6,10 +6,11 @@
>     <IfModule http2_module>
>=20
>         LogLevel http2:debug
> -        H2Direct on
>=20
>         <VirtualHost h2c>
>             Protocols h2c http/1.1
> +            # Should be implicit with h2c
> +            #H2Direct on
>=20
>             <IfModule @CGI_MODULE@>
>                 <Directory @SERVERROOT@/htdocs/modules/h2>
> @@ -32,6 +33,7 @@
>=20
>             <VirtualHost localhost:h2>
>                 Protocols h2 http/1.1
> +                H2Direct on
>=20
>                 SSLEngine on
>                 SSLCACertificateFile @SSLCA@/asf/certs/ca.crt
> @@ -74,6 +76,7 @@
>=20
>             <VirtualHost test.example.org:h2>
>                 Protocols h2 http/1.1
> +                H2Direct on
>=20
>                 SSLEngine on
>                 SSLCACertificateFile @SSLCA@/asf/certs/ca.crt
> @@ -91,6 +94,7 @@
>=20
>             <VirtualHost test2.example.org:h2>
>                 Protocols http/1.1 h2
> +                H2Direct on
>             </VirtualHost>
>=20
>             <VirtualHost test-ser.example.org:h2>
> --
>=20
>>=20
>> The doc in 2.4.x is not updated as the http2 modules is not updated, =
as I am waiting
>> for the proposed core-protocols changes to be backported.
>=20
> Working on it ;)
>=20
>=20
> Thanks,
> Yann.


From dev-return-84623-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 19 23:17:49 2015
Return-Path: <dev-return-84623-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0B94B1819A
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 19 Nov 2015 23:17:49 +0000 (UTC)
Received: (qmail 43673 invoked by uid 500); 19 Nov 2015 23:17:48 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 43616 invoked by uid 500); 19 Nov 2015 23:17:48 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 43606 invoked by uid 99); 19 Nov 2015 23:17:48 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Nov 2015 23:17:48 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id C0B7C1A21F7
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 23:17:47 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.879
X-Spam-Level: **
X-Spam-Status: No, score=2.879 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01,
	SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id OF43L8eza4yW for <dev@httpd.apache.org>;
	Thu, 19 Nov 2015 23:17:45 +0000 (UTC)
Received: from mail-wm0-f45.google.com (mail-wm0-f45.google.com [74.125.82.45])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 595E123048
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 23:17:45 +0000 (UTC)
Received: by wmec201 with SMTP id c201so48904920wme.0
        for <dev@httpd.apache.org>; Thu, 19 Nov 2015 15:17:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:subject:date:message-id:mime-version:content-type
         :content-language:thread-index;
        bh=IluuqUh9yZ0HmY+LYlpNU7KYK3gj2crelPCzXl/cIZ8=;
        b=hLMoob8kHACDzvjSFfyfPxWA95GdYYvQAx4FEUibAiu6S55bexD9RmCo+uSnZq94nz
         MROB7iGtYBphBP6c4TdpeUnsgMqlXChJkRRR6CiO/SpR0PhX6lfTBfKhweg1JJ+R2Ebo
         UTNo+JDblLiOgpflcNPUOYQPnxBUMHWz9it8E=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:subject:date:message-id:mime-version
         :content-type:content-language:thread-index;
        bh=IluuqUh9yZ0HmY+LYlpNU7KYK3gj2crelPCzXl/cIZ8=;
        b=X52XL1Wy+MUA3H7CGvHHnT36Cv5GOndHN37SFJ5DLxU9mD6xp7YvEL7pT6y7rTxxx2
         sx1dcV6k2evSd2TXudXeoSOM+TUdbWEPLoSqiGdXj6VQ6fiuq8BDW5VYAQJJqE63ZBli
         F0kVM32kgrwx4zeYtNZQ6FOjCtRdt0e1aJ35lXjSs0rXa7IvRdgCBa/qraVhKsuI1y65
         RnvLXCB/P9FQCCQysr19u2+D/LrPfL4ozJGbg8amQsOUYVNEEo0ycSyWqMpE2cmLnB5W
         MKqWJ7cyr2HfW+UXlZ9aBm7ryYKARPWbhOZyKX0uT0juwgv3tJb+E1L7x4etwfXBKRAt
         LPxg==
X-Gm-Message-State: ALoCoQn9Ck/Etf4Td9/vucYxuvJZAwC+Vuj6Lmct7Zwq91am7PWIQtMksTGNBOWHyb1jM4FU7gK1
X-Received: by 10.28.48.213 with SMTP id w204mr331340wmw.38.1447975065070;
        Thu, 19 Nov 2015 15:17:45 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id n127sm72452wmf.12.2015.11.19.15.17.44
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 19 Nov 2015 15:17:44 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
Subject: H2 stream dependencies
Date: Fri, 20 Nov 2015 00:17:42 +0100
Message-ID: <076f01d12320$7e7d1fb0$7b775f10$@qqmail.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0770_01D12328.E04223F0"
X-Mailer: Microsoft Outlook 16.0
Content-Language: nl
Thread-Index: AdEjH4yN/x7K30TORs67WCYHnO2uuQ==

This is a multipart message in MIME format.

------=_NextPart_000_0770_01D12328.E04223F0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

                Hi All (and Stefan in particular),

 

As already noted I'm trying to make Subversion work over http/2 via the
Apache Serf library. Today I made a few huge steps forward and got most of
the Subversion tests working over h2. (Just +- 60 failures left of the +-
2000 tests)

 

One particular problem that remains is that we have some code that assumes
some related responses are delivered in strict order. This code worked for
many releases, so there is not much I can change on the information needed,
without adding features that only work in future Subversion versions.

 

In theory I should be able to get exactly the behavior I want by adding
priority information to my h2 requests. but I don't know if httpd is ready
to process that information in a way that would help us.

(Currently I just ignore all this in my implementation. as will at least
some other implementations)

 

Can somebody give me an update on what the current status of priority
handling in httpd is? (trunk vs 2.4.17)

 

Thanks,

                Bert


------=_NextPart_000_0770_01D12328.E04223F0
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 15 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:#954F72;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri",sans-serif;
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri",sans-serif;
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:70.85pt 70.85pt 70.85pt 70.85pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DNL =
link=3D"#0563C1" vlink=3D"#954F72"><div class=3DWordSection1><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span lang=3DEN-US>Hi All (and =
Stefan in particular),<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US>As already noted I&#8217;m trying to make Subversion work =
over http/2 via the Apache Serf library. Today I made a few huge steps =
forward and got most of the Subversion tests working over h2. (Just +- =
60 failures left of the +- 2000 tests)<o:p></o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US>One particular problem that remains =
is that we have some code that assumes some related responses are =
delivered in strict order. This code worked for many releases, so there =
is not much I can change on the information needed, without adding =
features that only work in future Subversion =
versions.<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US>In theory I should be able to get exactly the behavior I =
want by adding priority information to my h2 requests&#8230; but I =
don&#8217;t know if httpd is ready to process that information in a way =
that would help us.<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US>(Currently I just ignore all this in my =
implementation&#8230; as will at least some other =
implementations)<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US>Can somebody give me an update on what the current status =
of priority handling in httpd is? (trunk vs =
2.4.17)<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US>Thanks,<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
Bert<o:p></o:p></span></p></div></body></html>
------=_NextPart_000_0770_01D12328.E04223F0--


From dev-return-84624-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 19 23:24:29 2015
Return-Path: <dev-return-84624-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E1994181EC
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 19 Nov 2015 23:24:28 +0000 (UTC)
Received: (qmail 63968 invoked by uid 500); 19 Nov 2015 23:24:28 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 63889 invoked by uid 500); 19 Nov 2015 23:24:28 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 63879 invoked by uid 99); 19 Nov 2015 23:24:28 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Nov 2015 23:24:28 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 0D7E11A22EB
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 23:24:28 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.979
X-Spam-Level: **
X-Spam-Status: No, score=2.979 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id zrRaZR1IZlgP for <dev@httpd.apache.org>;
	Thu, 19 Nov 2015 23:24:26 +0000 (UTC)
Received: from mail-ig0-f177.google.com (mail-ig0-f177.google.com [209.85.213.177])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 9393B205C2
	for <dev@httpd.apache.org>; Thu, 19 Nov 2015 23:24:26 +0000 (UTC)
Received: by igvi2 with SMTP id i2so22394246igv.0
        for <dev@httpd.apache.org>; Thu, 19 Nov 2015 15:24:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=82IjNxX8senoZrADKvvVjx+Gqy/wbc2Wa4qbBX6uGjw=;
        b=UWeUCpiPLcWQE0hxDIWA2vn1Q4ZC8qMmusP2LIG2IwnsfGL+JpRv8MdqWfqjFfAznn
         bApIfM5NTlwNRr3hXLejzfbVw/ubPa8Wp+lKnXspbUXmnHKXi4DC4WqG8QwYiMNtmJGa
         aC8n01efh+tHry3VR/bIBUZuTuR5hccABX1pbnxEjkLP5Hge1TJ3IIHp4DNAL8PCyH70
         5CMPZt3IspZfvcSC6EFq0lepDzV9aITKMAmYsIFjxvFeBcLfTUHzDJIp/PD6ye1cnezZ
         P3vNGw2xKIcQ9JjEB9cus8Z51Djx28gMSoQk/gsXpBavE50m7DTp50RZV0H+yszmryOA
         Y98g==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=82IjNxX8senoZrADKvvVjx+Gqy/wbc2Wa4qbBX6uGjw=;
        b=ll/pGu/H5k1g6KGjoIznKUaI4sV7pbL4lfhTMziROJCJpA7dv2yViJZwA4pqaKVK0n
         PlpWpqy+DKJfAnHlJ1D7OU8rRBltlRWD45duQ5LXRdrRwObBHgbijtDQzhLWCUN46S1H
         aMuay0eQ3JHHz+sQox5abJDx9Z/3NXljRAOIYkLS4vhfofhrJE0+dRmGQV+y8IlkEFQr
         xpExZQuVZnmi9Xl54+65freUZtPjbfGYY6xRMqhHsTxpxRFZl2D3pKNSHylK88tyH/kx
         zIPLUVb7w+KobyqBL6w+mUkVKHvQQERYOKRvNUOLTsGWTIl51hqSZVe+Nen4l8Z90P7C
         nxXA==
X-Gm-Message-State: ALoCoQnVQ83zo0PvUW0qXlhZzbKm+Z4B5ku5SsbLk8/jvHrHBmnJYq/Bwy7f6Zl6P6SmBJrVANqM
MIME-Version: 1.0
X-Received: by 10.50.30.101 with SMTP id r5mr413975igh.35.1447975465854; Thu,
 19 Nov 2015 15:24:25 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Thu, 19 Nov 2015 15:24:25 -0800 (PST)
In-Reply-To: <20151119215448.5A9E83A00E5@svn01-us-west.apache.org>
References: <20151119215448.5A9E83A00E5@svn01-us-west.apache.org>
Date: Thu, 19 Nov 2015 17:24:25 -0600
Message-ID: <CACsi251-SFcdT2Prf43m_kbe1UfxkhwR0cbkx7ody8bVn_=J7Q@mail.gmail.com>
Subject: Re: svn commit: r1715294 - /httpd/httpd/trunk/server/core.c
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=047d7bdca97e49473c0524ed0fd3

--047d7bdca97e49473c0524ed0fd3
Content-Type: text/plain; charset=UTF-8

It wouldn't hurt to change this though, the tokens are generally
represented in lowercase, and this could avoid case folding I suppose.

How often do we see value tokens as upper case from httpd?  Let's be
consistent although it isn't strictly required.



On Thu, Nov 19, 2015 at 3:54 PM, <jailletc36@apache.org> wrote:

> Author: jailletc36
> Date: Thu Nov 19 21:54:48 2015
> New Revision: 1715294
>
> URL: http://svn.apache.org/viewvc?rev=1715294&view=rev
> Log:
> Revert r1715289 (Connection header field should use "upgrade" instead of
> "Upgrade")
>
> This is case-insensitive, so no need for such a change.
>
> Modified:
>     httpd/httpd/trunk/server/core.c
>
> Modified: httpd/httpd/trunk/server/core.c
> URL:
> http://svn.apache.org/viewvc/httpd/httpd/trunk/server/core.c?rev=1715294&r1=1715293&r2=1715294&view=diff
>
> ==============================================================================
> --- httpd/httpd/trunk/server/core.c (original)
> +++ httpd/httpd/trunk/server/core.c Thu Nov 19 21:54:48 2015
> @@ -5379,7 +5379,7 @@ static int core_upgrade_handler(request_
>                      /* Let the client know what we are upgrading to. */
>                      apr_table_clear(r->headers_out);
>                      apr_table_setn(r->headers_out, "Upgrade", protocol);
> -                    apr_table_setn(r->headers_out, "Connection",
> "upgrade");
> +                    apr_table_setn(r->headers_out, "Connection",
> "Upgrade");
>
>                      r->status = HTTP_SWITCHING_PROTOCOLS;
>                      r->status_line = ap_get_status_line(r->status);
> @@ -5404,7 +5404,7 @@ static int core_upgrade_handler(request_
>          if (upgrades && upgrades->nelts > 0) {
>              char *protocols = apr_array_pstrcat(r->pool, upgrades, ',');
>              apr_table_setn(r->headers_out, "Upgrade", protocols);
> -            apr_table_setn(r->headers_out, "Connection", "upgrade");
> +            apr_table_setn(r->headers_out, "Connection", "Upgrade");
>          }
>      }
>
>
>
>

--047d7bdca97e49473c0524ed0fd3
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">It wouldn&#39;t hurt to change this though, the tokens are=
 generally represented in lowercase, and this could avoid case folding I su=
ppose.<div><br></div><div>How often do we see value tokens as upper case fr=
om httpd?=C2=A0 Let&#39;s be consistent although it isn&#39;t strictly requ=
ired.</div><div><br></div><div><br><div class=3D"gmail_extra"><br><div clas=
s=3D"gmail_quote">On Thu, Nov 19, 2015 at 3:54 PM,  <span dir=3D"ltr">&lt;<=
a href=3D"mailto:jailletc36@apache.org" target=3D"_blank">jailletc36@apache=
.org</a>&gt;</span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"ma=
rgin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">Author: jaille=
tc36<br>
Date: Thu Nov 19 21:54:48 2015<br>
New Revision: 1715294<br>
<br>
URL: <a href=3D"http://svn.apache.org/viewvc?rev=3D1715294&amp;view=3Drev" =
rel=3D"noreferrer" target=3D"_blank">http://svn.apache.org/viewvc?rev=3D171=
5294&amp;view=3Drev</a><br>
Log:<br>
Revert r1715289 (Connection header field should use &quot;upgrade&quot; ins=
tead of &quot;Upgrade&quot;)<br>
<br>
This is case-insensitive, so no need for such a change.<br>
<br>
Modified:<br>
=C2=A0 =C2=A0 httpd/httpd/trunk/server/core.c<br>
<br>
Modified: httpd/httpd/trunk/server/core.c<br>
URL: <a href=3D"http://svn.apache.org/viewvc/httpd/httpd/trunk/server/core.=
c?rev=3D1715294&amp;r1=3D1715293&amp;r2=3D1715294&amp;view=3Ddiff" rel=3D"n=
oreferrer" target=3D"_blank">http://svn.apache.org/viewvc/httpd/httpd/trunk=
/server/core.c?rev=3D1715294&amp;r1=3D1715293&amp;r2=3D1715294&amp;view=3Dd=
iff</a><br>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D<br>
--- httpd/httpd/trunk/server/core.c (original)<br>
+++ httpd/httpd/trunk/server/core.c Thu Nov 19 21:54:48 2015<br>
@@ -5379,7 +5379,7 @@ static int core_upgrade_handler(request_<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0/* Let the client know what we are upgrading to. */<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0apr_table_clear(r-&gt;headers_out);<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0apr_table_setn(r-&gt;headers_out, &quot;Upgrade&quot;, protocol);<br>
-=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 apr_=
table_setn(r-&gt;headers_out, &quot;Connection&quot;, &quot;upgrade&quot;);=
<br>
+=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 apr_=
table_setn(r-&gt;headers_out, &quot;Connection&quot;, &quot;Upgrade&quot;);=
<br>
<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0r-&gt;status =3D HTTP_SWITCHING_PROTOCOLS;<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0r-&gt;status_line =3D ap_get_status_line(r-&gt;status);<br>
@@ -5404,7 +5404,7 @@ static int core_upgrade_handler(request_<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0if (upgrades &amp;&amp; upgrades-&gt;nelt=
s &gt; 0) {<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0char *protocols =3D apr_arr=
ay_pstrcat(r-&gt;pool, upgrades, &#39;,&#39;);<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0apr_table_setn(r-&gt;header=
s_out, &quot;Upgrade&quot;, protocols);<br>
-=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 apr_table_setn(r-&gt;headers_out=
, &quot;Connection&quot;, &quot;upgrade&quot;);<br>
+=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 apr_table_setn(r-&gt;headers_out=
, &quot;Connection&quot;, &quot;Upgrade&quot;);<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0}<br>
=C2=A0 =C2=A0 =C2=A0}<br>
<br>
<br>
<br>
</blockquote></div><br></div></div></div>

--047d7bdca97e49473c0524ed0fd3--

From dev-return-84625-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 09:11:15 2015
Return-Path: <dev-return-84625-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 678B4186B1
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 09:11:15 +0000 (UTC)
Received: (qmail 4193 invoked by uid 500); 20 Nov 2015 09:11:14 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 4125 invoked by uid 500); 20 Nov 2015 09:11:14 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 4115 invoked by uid 99); 20 Nov 2015 09:11:14 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 09:11:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id F39F5C216B
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 09:11:13 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.654
X-Spam-Level:
X-Spam-Status: No, score=-0.654 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RP_MATCHES_RCVD=-0.554, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id pD6tAIDp1hnM for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 09:11:05 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 97BA420225
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 09:11:05 +0000 (UTC)
Received: from [192.168.178.41] (unknown [84.189.87.110])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 182D115A047E
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 10:11:03 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1448010663; bh=WJ3RDrXqkjNjfCSp4ElOLJzUl9rFlRg2juEt3H+8pqM=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=KgfKdZTNAiUlYlN0x4pivYxOyuLcXVs+PbAWrzic6+SNL8rkxT/aYnxMY7z2Oesuj
	 4CnaDF2gdJlraZna2Y8NHQ+GxD+MIPSl8ipP6Rn1h82lfaF9WcPBzTZsUKhvddgcHR
	 I50eT5YJVv8d5qLb1dnbfSogaieYCR+xIEKzbLdQ=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: svn commit: r1715294 - /httpd/httpd/trunk/server/core.c
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CACsi251-SFcdT2Prf43m_kbe1UfxkhwR0cbkx7ody8bVn_=J7Q@mail.gmail.com>
Date: Fri, 20 Nov 2015 10:11:02 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <2E4FC3B2-9564-41CC-A52C-85A74567F630@greenbytes.de>
References: <20151119215448.5A9E83A00E5@svn01-us-west.apache.org> <CACsi251-SFcdT2Prf43m_kbe1UfxkhwR0cbkx7ody8bVn_=J7Q@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

+1 for lowercasing and pls backport, since it just arrived as is in =
2.4.x, i think.

> Am 20.11.2015 um 00:24 schrieb William A Rowe Jr =
<wrowe@rowe-clan.net>:
>=20
> It wouldn't hurt to change this though, the tokens are generally =
represented in lowercase, and this could avoid case folding I suppose.
>=20
> How often do we see value tokens as upper case from httpd?  Let's be =
consistent although it isn't strictly required.
>=20
>=20
>=20
> On Thu, Nov 19, 2015 at 3:54 PM, <jailletc36@apache.org> wrote:
> Author: jailletc36
> Date: Thu Nov 19 21:54:48 2015
> New Revision: 1715294
>=20
> URL: http://svn.apache.org/viewvc?rev=3D1715294&view=3Drev
> Log:
> Revert r1715289 (Connection header field should use "upgrade" instead =
of "Upgrade")
>=20
> This is case-insensitive, so no need for such a change.
>=20
> Modified:
>     httpd/httpd/trunk/server/core.c
>=20
> Modified: httpd/httpd/trunk/server/core.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/server/core.c?rev=3D1715294=
&r1=3D1715293&r2=3D1715294&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/server/core.c (original)
> +++ httpd/httpd/trunk/server/core.c Thu Nov 19 21:54:48 2015
> @@ -5379,7 +5379,7 @@ static int core_upgrade_handler(request_
>                      /* Let the client know what we are upgrading to. =
*/
>                      apr_table_clear(r->headers_out);
>                      apr_table_setn(r->headers_out, "Upgrade", =
protocol);
> -                    apr_table_setn(r->headers_out, "Connection", =
"upgrade");
> +                    apr_table_setn(r->headers_out, "Connection", =
"Upgrade");
>=20
>                      r->status =3D HTTP_SWITCHING_PROTOCOLS;
>                      r->status_line =3D ap_get_status_line(r->status);
> @@ -5404,7 +5404,7 @@ static int core_upgrade_handler(request_
>          if (upgrades && upgrades->nelts > 0) {
>              char *protocols =3D apr_array_pstrcat(r->pool, upgrades, =
',');
>              apr_table_setn(r->headers_out, "Upgrade", protocols);
> -            apr_table_setn(r->headers_out, "Connection", "upgrade");
> +            apr_table_setn(r->headers_out, "Connection", "Upgrade");
>          }
>      }
>=20
>=20
>=20
>=20


From dev-return-84626-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 09:13:54 2015
Return-Path: <dev-return-84626-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 639B8186DA
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 09:13:54 +0000 (UTC)
Received: (qmail 12137 invoked by uid 500); 20 Nov 2015 09:13:54 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 12076 invoked by uid 500); 20 Nov 2015 09:13:53 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 12066 invoked by uid 99); 20 Nov 2015 09:13:53 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 09:13:53 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 63ED2C7B65
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 09:13:53 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id LEnKphVsxvBS for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 09:13:52 +0000 (UTC)
Received: from mail-wm0-f42.google.com (mail-wm0-f42.google.com [74.125.82.42])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 32A0D2031C
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 09:13:52 +0000 (UTC)
Received: by wmec201 with SMTP id c201so12547612wme.1
        for <dev@httpd.apache.org>; Fri, 20 Nov 2015 01:13:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:content-language
         :thread-index;
        bh=PWrtN/16GO/Y8iVSula4GscU8e6wIv7RoNiqkiFMZwI=;
        b=i+tfSC6wMFJmLCPFnCMTY6gXQNkpupozW2jLRzQ/mVwcWEeRCaJSYn128Ru314TuX9
         44UgZ/TnPfnPOYQpfefq8ZssF7JmAJRtkJ+7fbnTEybqZHsm+J4E2vUqDEco180AGSxn
         McLX1ztaqTLja+eyk1o+dFb6o3CGlKu2kBGqQ=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :content-language:thread-index;
        bh=PWrtN/16GO/Y8iVSula4GscU8e6wIv7RoNiqkiFMZwI=;
        b=jjrnS98o1vEKaoRME31QB3tYUYnOWZvWVnDiCY8ocJJXkrdjHGKY32wisVdbfJWXOM
         NV0V5l5A8F7KR28T+z5bFs9qhIDqLYRD60FhKrdeuDntV1EoXDKNFhYvo7Y2i18DYdgl
         m7pHxNH5UmFxMCA+T3JUamKyLwVA9nPM6x/wpGBhZhM23kGoaPverV2ZRbeJmPIKXCCd
         w0RMFskl58mDM3TVexw4oUyczEbr+/9Q41QbE8tHHesrJFVvSNJyTxWxcem9/5RUynCV
         SekVGglOgNG1pmCGYIPcE9motCp6v9mJyLG1X5FSOvZhaS+I05AaLBb3ee98bcd1LbuD
         J0TA==
X-Gm-Message-State: ALoCoQnmbYKzdeAhFazJkFPi/30w/dmMPRoV48QG6/vhOV0Q+VUtulbPZ3QNVzxKrKXJblwqDzuz
X-Received: by 10.28.50.193 with SMTP id y184mr1192435wmy.26.1448010830878;
        Fri, 20 Nov 2015 01:13:50 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id h7sm11726997wjz.7.2015.11.20.01.13.50
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 20 Nov 2015 01:13:50 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <20151119215448.5A9E83A00E5@svn01-us-west.apache.org> <CACsi251-SFcdT2Prf43m_kbe1UfxkhwR0cbkx7ody8bVn_=J7Q@mail.gmail.com> <2E4FC3B2-9564-41CC-A52C-85A74567F630@greenbytes.de>
In-Reply-To: <2E4FC3B2-9564-41CC-A52C-85A74567F630@greenbytes.de>
Subject: RE: svn commit: r1715294 - /httpd/httpd/trunk/server/core.c
Date: Fri, 20 Nov 2015 10:13:47 +0100
Message-ID: <003701d12373$c471d260$4d557720$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 16.0
Content-Language: nl
Thread-Index: AQI39YL7gR31ZBDazWVv+LR+ToS9agGx/Jb3AmNQ5KOdtlF5EA==



> -----Original Message-----
> From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
> Sent: vrijdag 20 november 2015 10:11
> To: dev@httpd.apache.org
> Subject: Re: svn commit: r1715294 - /httpd/httpd/trunk/server/core.c
> 
> +1 for lowercasing and pls backport, since it just arrived as is in 2.4.x,
i think.

<snip>

> >                      apr_table_clear(r->headers_out);
> >                      apr_table_setn(r->headers_out, "Upgrade",
protocol);
> > -                    apr_table_setn(r->headers_out, "Connection",
"upgrade");
> > +                    apr_table_setn(r->headers_out, "Connection",
"Upgrade");

As the 'Connection' header technically refers to the 'Upgrade' header I
would paint both sheds in the same color.

Either would be fine by me.

	Bert



From dev-return-84627-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 09:26:41 2015
Return-Path: <dev-return-84627-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 956C518727
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 09:26:41 +0000 (UTC)
Received: (qmail 35807 invoked by uid 500); 20 Nov 2015 09:26:41 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 35742 invoked by uid 500); 20 Nov 2015 09:26:41 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 35732 invoked by uid 99); 20 Nov 2015 09:26:41 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 09:26:41 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 92ABF1A22E3
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 09:26:40 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.109
X-Spam-Level:
X-Spam-Status: No, score=-0.109 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id QQDnYMBTbDDf for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 09:26:27 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 78F832304D
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 09:26:26 +0000 (UTC)
Received: from [192.168.178.41] (unknown [84.189.87.110])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 7A41615A0371
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 10:26:20 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1448011580; bh=ouxURqnsWCwMM5aRul/fHTe5SVidEYXphvhwBf6H8vQ=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=dWOSpEAKKZi0DJ8cV+E9Jk/iyF7PLf+PohZ1HpuK/SVJl3+397FTrPDL/rTFlDoQB
	 x6AclTQcVbSTkp2VVxzI1DjZqPJGeRZTJ12dysheR7dZ6lfB/uVRFu3ul2+3wsV59T
	 Niu+vcALEt+AST6ZQPPkQnw1yU016PNA7doCitI0=
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: H2 stream dependencies
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <076f01d12320$7e7d1fb0$7b775f10$@qqmail.nl>
Date: Fri, 20 Nov 2015 10:26:19 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <5A92C9AE-2C53-42F3-A4B1-5019A92EF6F6@greenbytes.de>
References: <076f01d12320$7e7d1fb0$7b775f10$@qqmail.nl>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

Bert,

interesting and nice to see the progress. You probably could use =
priorities for ordering, especially when using the stream dependencies. =
I am not certain, however, if this will give you totally deterministic =
behavior. If stream B depends on A, usually A will be sent out before B. =
However, should stream A become suspended - e.g. unable to progress, =
either because there is no data available which some other thread needs =
to produce, or because the flow control window has not been updated in =
time - the server will start sending data for B.

The state of the implementation is:
2.4.17: fully implemented priority handling on sending stream data, as =
implemented by the nghttp2 library
2.4.18: additionally, streams are scheduled for execution by priority. =
Makes a difference when the number of available worker is less than the =
stream queue length, e.g. when der server is under load or only few =
workers are available (in prefork, for certain).

Another way to influence the ordering is for the client to play with the =
stream window sizes. If you give stream A 2^31-1 and stream B 0 until =
you have A, then update B, it may also do what you want. If both streams =
produce response bodies...flow only applies to DATA...

Cheers,

  Stefan

> Am 20.11.2015 um 00:17 schrieb Bert Huijben <bert@qqmail.nl>:
>=20
>                 Hi All (and Stefan in particular),
> =20
> As already noted I=E2=80=99m trying to make Subversion work over =
http/2 via the Apache Serf library. Today I made a few huge steps =
forward and got most of the Subversion tests working over h2. (Just +- =
60 failures left of the +- 2000 tests)
> =20
> One particular problem that remains is that we have some code that =
assumes some related responses are delivered in strict order. This code =
worked for many releases, so there is not much I can change on the =
information needed, without adding features that only work in future =
Subversion versions.
> =20
> In theory I should be able to get exactly the behavior I want by =
adding priority information to my h2 requests=E2=80=A6 but I don=E2=80=99t=
 know if httpd is ready to process that information in a way that would =
help us.
> (Currently I just ignore all this in my implementation=E2=80=A6 as =
will at least some other implementations)
> =20
> Can somebody give me an update on what the current status of priority =
handling in httpd is? (trunk vs 2.4.17)
> =20
> Thanks,
>                 Bert


From dev-return-84628-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 14:42:00 2015
Return-Path: <dev-return-84628-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0AE0C18336
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 14:42:00 +0000 (UTC)
Received: (qmail 93092 invoked by uid 500); 20 Nov 2015 14:41:59 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 93019 invoked by uid 500); 20 Nov 2015 14:41:59 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 93009 invoked by uid 99); 20 Nov 2015 14:41:59 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 14:41:59 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id EA3B1180AA3
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 14:41:58 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id HR54xdEnMSM3 for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 14:41:48 +0000 (UTC)
Received: from mail-io0-f178.google.com (mail-io0-f178.google.com [209.85.223.178])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 22F0742B08
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 14:41:48 +0000 (UTC)
Received: by iofh3 with SMTP id h3so125489758iof.3
        for <dev@httpd.apache.org>; Fri, 20 Nov 2015 06:41:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=TB1zID0XCPQNu3uL87lA8DVYYoeCXScS4GzWcUixoOA=;
        b=kyjScMRoEJp/j6xz+5xErb7HGkmbrELpaPmS1ZFL32k+rDsy7WwwDNnOvLrgODbP3z
         ijNc8hoiDCF1k0OmBhcVvN0n6s9cS0JCQcXa2rDKB4arp2Ot1tsbE/3Re22R+UoDB/Is
         KhJLXh2k/D0RLa6FeQNwvsz8uETU+042dVWzLeEScFuj1Y+oQXdL5jkwX1lQPR85yPv9
         QsFRg1OhUBnMP7t7ReyDWaT4VQHx2Q8zqbNu/P3wyJvhBsxjLbmEpmXSjMK1cHfMNknH
         6w2fZTTH38W86dHoeWCUe+5W+6EZSCQMpFBUIER6Og+QUzPcLiYxDmz26A1sJ4E43el2
         j0sA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=TB1zID0XCPQNu3uL87lA8DVYYoeCXScS4GzWcUixoOA=;
        b=EUg1Z6kc4WGpgAv3ROVDIiue22MKwtCLy5w76JbESqJaRnQdyC2+yV/kObkartDebY
         NBSrdxoC1TzySaDyXuKDbiZJ1FrHSbnd6VD9/er/Hyf0evAVeFrTtjiyn/ONwYgd6sg9
         6MC0qg19B3+tLwOXdrUmitIlJsi9nfPwEcCkZUaKwud6BusLBa/7KYffkp8miBnI5nVR
         l3xEenK8nFbFSHODJyyUKQOhwTAmcRtJHJfbGKeikZtNiTpFFHJ3lO/xbWCEfGiCXVkz
         8YRqiMl26nyfnJkjPtHQO2v66Po7Mxn07jFdjCAr/4RN81O5DKdLbcyqf88Adml0P+50
         T49A==
X-Gm-Message-State: ALoCoQk5oT7AP3SkixZ62jugnfiaJOUVY3PAXKWObHtiWnJR8yIAlrGQ8MEQebxJHWqFfqPwB7J1
MIME-Version: 1.0
X-Received: by 10.107.10.66 with SMTP id u63mr13281735ioi.86.1448030501394;
 Fri, 20 Nov 2015 06:41:41 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Fri, 20 Nov 2015 06:41:41 -0800 (PST)
In-Reply-To: <003701d12373$c471d260$4d557720$@qqmail.nl>
References: <20151119215448.5A9E83A00E5@svn01-us-west.apache.org>
	<CACsi251-SFcdT2Prf43m_kbe1UfxkhwR0cbkx7ody8bVn_=J7Q@mail.gmail.com>
	<2E4FC3B2-9564-41CC-A52C-85A74567F630@greenbytes.de>
	<003701d12373$c471d260$4d557720$@qqmail.nl>
Date: Fri, 20 Nov 2015 08:41:41 -0600
Message-ID: <CACsi252MJ8Czc43mTQ=ktvvn02bi_ep1A716vU8YMjdrW1VJpw@mail.gmail.com>
Subject: Re: svn commit: r1715294 - /httpd/httpd/trunk/server/core.c
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a113f93bea8f4fe0524f9dfbb

--001a113f93bea8f4fe0524f9dfbb
Content-Type: text/plain; charset=UTF-8

On Fri, Nov 20, 2015 at 3:13 AM, Bert Huijben <bert@qqmail.nl> wrote:

>
> > -----Original Message-----
> > From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
> > Sent: vrijdag 20 november 2015 10:11
> > To: dev@httpd.apache.org
> > Subject: Re: svn commit: r1715294 - /httpd/httpd/trunk/server/core.c
> >
> > +1 for lowercasing and pls backport, since it just arrived as is in
> 2.4.x,
> i think.
>
> > > -                    apr_table_setn(r->headers_out, "Connection",
> "upgrade");
> > > +                    apr_table_setn(r->headers_out, "Connection",
> "Upgrade");
>
> As the 'Connection' header technically refers to the 'Upgrade' header I
> would paint both sheds in the same color.


It does, yes,  That's part of my motivation, the Key (field title) is
generally
capitalized, the values are generally lowercase, and in this case upgrade
does appear twice, so it helps slightly to distinguish the two.

Referring  back it has appeared both ways in the specs, but RFC 7230
has buried RFC 2817 :)

http://tools.ietf.org/html/rfc7230#page-57

My inclination is obvious but I don't feel strongly enough to patch this
myself, will let the others do so.  For reference, we actually followed
the RFC 2817 conventions in 2.2...

ssl_engine_io.c:#define CONNECTION_HEADER "Connection: Upgrade"
ssl_engine_kernel.c:            apr_table_setn(r->err_headers_out,
"Connection", "Upgrade");

and it now appears both ways in the code.  /shrug

ssl_engine_kernel.c:#define CONNECTION_HEADER "Connection: Upgrade"
ssl_engine_kernel.c:            apr_table_setn(r->err_headers_out,
"Connection", "Upgrade");
ssl_engine_kernel.c:     * connection, and this isn't a subrequest, send an
Upgrade
ssl_engine_kernel.c:        apr_table_mergen(r->headers_out, "Connection",
"upgrade");

--001a113f93bea8f4fe0524f9dfbb
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On F=
ri, Nov 20, 2015 at 3:13 AM, Bert Huijben <span dir=3D"ltr">&lt;<a href=3D"=
mailto:bert@qqmail.nl" target=3D"_blank">bert@qqmail.nl</a>&gt;</span> wrot=
e:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8ex;b=
order-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:s=
olid;padding-left:1ex"><span class=3D""><br>
&gt; -----Original Message-----<br>
&gt; From: Stefan Eissing [mailto:<a href=3D"mailto:stefan.eissing@greenbyt=
es.de">stefan.eissing@greenbytes.de</a>]<br>
&gt; Sent: vrijdag 20 november 2015 10:11<br>
&gt; To: <a href=3D"mailto:dev@httpd.apache.org">dev@httpd.apache.org</a><b=
r>
&gt; Subject: Re: svn commit: r1715294 - /httpd/httpd/trunk/server/core.c<b=
r>
&gt;<br>
&gt; +1 for lowercasing and pls backport, since it just arrived as is in 2.=
4.x,<br>
i think.<br>
<br></span><span class=3D"">&gt; &gt; -=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 apr_table_setn(r-&gt;headers_out, &quot;=
Connection&quot;,<br>
&quot;upgrade&quot;);<br>
&gt; &gt; +=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 apr_table_setn(r-&gt;headers_out, &quot;Connection&quot;,<br>
&quot;Upgrade&quot;);<br>
<br>
</span>As the &#39;Connection&#39; header technically refers to the &#39;Up=
grade&#39; header I<br>
would paint both sheds in the same color.</blockquote><div><br></div><div>I=
t does, yes, =C2=A0That&#39;s part of my motivation, the Key (field title) =
is generally</div><div>capitalized, the values are generally lowercase, and=
 in this case upgrade</div><div>does appear twice, so it helps slightly to =
distinguish the two.</div><div><br></div><div>Referring =C2=A0back it has a=
ppeared both ways in the specs, but RFC 7230=C2=A0</div><div>has buried RFC=
 2817 :)</div><div><br></div><div><a href=3D"http://tools.ietf.org/html/rfc=
7230#page-57">http://tools.ietf.org/html/rfc7230#page-57</a></div><div><br>=
</div><div>My inclination is obvious but I don&#39;t feel strongly enough t=
o patch this</div><div>myself, will let the others do so.=C2=A0 For referen=
ce, we actually followed</div><div>the RFC 2817 conventions in 2.2...</div>=
</div><br></div><div class=3D"gmail_extra"><div class=3D"gmail_extra">ssl_e=
ngine_io.c:#define CONNECTION_HEADER &quot;Connection: Upgrade&quot;</div><=
div class=3D"gmail_extra">ssl_engine_kernel.c: =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0apr_table_setn(r-&gt;err_headers_out, &quot;Connection&quot;, =
&quot;Upgrade&quot;);</div><div class=3D"gmail_extra"><br></div><div class=
=3D"gmail_extra">and it now appears both ways in the code. =C2=A0/shrug</di=
v><div class=3D"gmail_extra"><br></div><div class=3D"gmail_extra"><div clas=
s=3D"gmail_extra">ssl_engine_kernel.c:#define CONNECTION_HEADER &quot;Conne=
ction: Upgrade&quot;</div><div class=3D"gmail_extra">ssl_engine_kernel.c: =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0apr_table_setn(r-&gt;err_headers_o=
ut, &quot;Connection&quot;, &quot;Upgrade&quot;);</div><div class=3D"gmail_=
extra">ssl_engine_kernel.c: =C2=A0 =C2=A0 * connection, and this isn&#39;t =
a subrequest, send an Upgrade</div><div class=3D"gmail_extra">ssl_engine_ke=
rnel.c: =C2=A0 =C2=A0 =C2=A0 =C2=A0apr_table_mergen(r-&gt;headers_out, &quo=
t;Connection&quot;, &quot;upgrade&quot;);</div></div><div><br></div></div><=
/div>

--001a113f93bea8f4fe0524f9dfbb--

From dev-return-84629-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 15:26:07 2015
Return-Path: <dev-return-84629-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F323E1851D
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 15:26:06 +0000 (UTC)
Received: (qmail 76834 invoked by uid 500); 20 Nov 2015 15:26:06 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 76766 invoked by uid 500); 20 Nov 2015 15:26:06 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 76756 invoked by uid 99); 20 Nov 2015 15:26:06 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 15:26:06 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 51DEE180A2A
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 15:26:05 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id Ws7N8_A224FS for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 15:25:50 +0000 (UTC)
Received: from mail-qg0-f49.google.com (mail-qg0-f49.google.com [209.85.192.49])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 18DC320EBA
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 15:25:50 +0000 (UTC)
Received: by qgcc31 with SMTP id c31so32297814qgc.3
        for <dev@httpd.apache.org>; Fri, 20 Nov 2015 07:25:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=jef3BZVEgD47mOhxQtYAdPrPY5ngCY5x8e07DsNDJzM=;
        b=rXsA8u2gfJ8Lz7qn3Wef4kJunBRSadaDOwq0eBonyRMNHS3BfORxsKKKBYYOFGGiV7
         Ks9gI0Amue1lNvWwxbRm4Stky8enB4KEEzytMVZXAj87G1qZFroNmEx5BRxaey9kREgU
         /CVWBZy5DFnbtAeTCvu8N8giZ9N6ha2U4ir8oZVVZBt20xivlNxJbblMFMvb5dn03enc
         PkJE8xZ3MO9LKLz+68WRdWuPe7OiN+HuGzIB9wktDPRAjqnCuGSD1SW3Zr5EKGADavl2
         T8SVa9mRP7Tf4gR48e3cgowkeFahMNpmBIWfXx8yo4aIG3XP+WCY2GgkWQjbjGdIduc1
         Sl5A==
MIME-Version: 1.0
X-Received: by 10.140.16.131 with SMTP id 3mr13509548qgb.51.1448033142691;
 Fri, 20 Nov 2015 07:25:42 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Fri, 20 Nov 2015 07:25:42 -0800 (PST)
In-Reply-To: <20151120135833.5D7E83A0234@svn01-us-west.apache.org>
References: <20151120135833.5D7E83A0234@svn01-us-west.apache.org>
Date: Fri, 20 Nov 2015 16:25:42 +0100
Message-ID: <CAKQ1sVMSo73XK0Whhx2fR8Y5NH+mLp67VSOFE1Fi5iFkB3vCgA@mail.gmail.com>
Subject: Re: svn commit: r1715363 - in /httpd/httpd/trunk/modules/http2:
 h2_request.c h2_response.h h2_session.c h2_stream.c h2_stream.h h2_util.c h2_util.h
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Fri, Nov 20, 2015 at 2:58 PM,  <icing@apache.org> wrote:
> Author: icing
> Date: Fri Nov 20 13:58:32 2015
> New Revision: 1715363
>
> URL: http://svn.apache.org/viewvc?rev=1715363&view=rev
> Log:
> incoming trailers passed into chunked request bodies, outgoing trailers not supported yet
>
> Modified:
[]
>     httpd/httpd/trunk/modules/http2/h2_util.c
[]
>
>
> Modified: httpd/httpd/trunk/modules/http2/h2_util.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_util.c?rev=1715363&r1=1715362&r2=1715363&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/modules/http2/h2_util.c (original)
> +++ httpd/httpd/trunk/modules/http2/h2_util.c Fri Nov 20 13:58:32 2015
[]
> @@ -879,3 +894,94 @@ h2_ngheader *h2_util_ngheader_make_req(a
>      return ngh;
>  }
>
> +/*******************************************************************************
> + * header HTTP/1 <-> HTTP/2 conversions
> + ******************************************************************************/
> +
> +
> +typedef struct {
> +    const char *name;
> +    size_t len;
> +} literal;
> +
> +#define H2_DEF_LITERAL(n)   { (n), (sizeof(n)-1) }
> +#define H2_ALEN(a)          (sizeof(a)/sizeof((a)[0]))
> +#define H2_LIT_ARGS(a)      (a),H2_ALEN(a)
> +
> +static literal IgnoredRequestHeaders[] = {
> +    H2_DEF_LITERAL("host"),
> +    H2_DEF_LITERAL("expect"),
> +    H2_DEF_LITERAL("upgrade"),
> +    H2_DEF_LITERAL("connection"),
> +    H2_DEF_LITERAL("keep-alive"),
> +    H2_DEF_LITERAL("http2-settings"),
> +    H2_DEF_LITERAL("proxy-connection"),
> +    H2_DEF_LITERAL("transfer-encoding"),
> +};

Shouldn't we also include all the tokens from the Connection header?
(obviously not feasible with this only blacklist)


> +static literal IgnoredRequestTrailers[] = { /* Ignore, see rfc7230, ch. 4.1.2 */
> +    H2_DEF_LITERAL("te"),
> +    H2_DEF_LITERAL("host"),
> +    H2_DEF_LITERAL("range"),
> +    H2_DEF_LITERAL("cookie"),
> +    H2_DEF_LITERAL("expect"),
> +    H2_DEF_LITERAL("pragma"),
> +    H2_DEF_LITERAL("max-forwards"),
> +    H2_DEF_LITERAL("cache-control"),
> +    H2_DEF_LITERAL("authorization"),
> +    H2_DEF_LITERAL("content-length"),
> +    H2_DEF_LITERAL("proxy-authorization"),
> +};

No notion of announced trailers in HTTP2, with eg. the request header
"Trailer: token1, token2, ..." (any non-announced trailer would be
ignored), something we could (always/optionally) enforce?

> +static literal IgnoredResponseTrailers[] = {
> +    H2_DEF_LITERAL("age"),
> +    H2_DEF_LITERAL("date"),
> +    H2_DEF_LITERAL("vary"),
> +    H2_DEF_LITERAL("cookie"),
> +    H2_DEF_LITERAL("expires"),
> +    H2_DEF_LITERAL("warning"),
> +    H2_DEF_LITERAL("location"),
> +    H2_DEF_LITERAL("retry-after"),
> +    H2_DEF_LITERAL("cache-control"),
> +    H2_DEF_LITERAL("www-authenticate"),
> +    H2_DEF_LITERAL("proxy-authenticate"),
> +};

Likewise, shouldn't we check whether the request associated to the
response contains a "TE: trailers" or otherwise use no trailer?


I'm a bit confused about what is included-in/overwritten-by the HTTP2
framing and what remains from HTTP1 RFCs/requirements.


Regards,
Yann.

From dev-return-84630-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 15:38:41 2015
Return-Path: <dev-return-84630-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7CD4F185A7
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 15:38:41 +0000 (UTC)
Received: (qmail 13584 invoked by uid 500); 20 Nov 2015 15:38:41 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 13516 invoked by uid 500); 20 Nov 2015 15:38:41 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 13505 invoked by uid 99); 20 Nov 2015 15:38:41 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 15:38:41 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 7376EC05B5
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 15:38:40 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id bennHKIfYK7M for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 15:38:39 +0000 (UTC)
Received: from mail-qg0-f53.google.com (mail-qg0-f53.google.com [209.85.192.53])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 6EF8C22EFB
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 15:38:39 +0000 (UTC)
Received: by qgea14 with SMTP id a14so75302123qge.0
        for <dev@httpd.apache.org>; Fri, 20 Nov 2015 07:38:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=kjtbEp+sDvNL+2WD6zCIUaNLJ2c7Y152+jyocyGItAs=;
        b=W7P15fi3IagqZ7xr7jTzuTuQv2qwhScEunEn+nuBw7jBN//fPWCgZ8QrBlm5XveM0m
         GjPGnL0WU30DG/MK1hELL8QuWpuj0JgZFBH0Hq4a8jWCFBpzGUCLYFWuThHp2smWNOjK
         Yd8OxVc8Qx4k5saRSO5hZWHdojM+QArPE5h+DQHXgEF33B3OOy3AbyKDxiTHIc+8eVWQ
         lMJCO9oTY5qkd+SYoNXt6ywYc1VFowMAKgLF9M04xyIUvsiAaGeT2TPplF14DZt6+Mwp
         CWCcjLhUqa40oHlEwm3Z+no177H6HwRPIoNySBzg5gkvSZYEYG45GQ83y749MyHFqIiv
         SerA==
MIME-Version: 1.0
X-Received: by 10.140.179.213 with SMTP id z204mr14934024qhz.70.1448033918729;
 Fri, 20 Nov 2015 07:38:38 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Fri, 20 Nov 2015 07:38:38 -0800 (PST)
In-Reply-To: <20151120152422.5955F3A075E@svn01-us-west.apache.org>
References: <20151120152422.5955F3A075E@svn01-us-west.apache.org>
Date: Fri, 20 Nov 2015 16:38:38 +0100
Message-ID: <CAKQ1sVNTsEQxHT-L4NiShWBX3nD0h0+gUa009ux8xm2O-S9YWA@mail.gmail.com>
Subject: Re: svn commit: r1715375 - /httpd/httpd/trunk/CHANGES
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Fri, Nov 20, 2015 at 4:24 PM,  <icing@apache.org> wrote:
> Author: icing
> Date: Fri Nov 20 15:24:21 2015
> New Revision: 1715375
>
> URL: http://svn.apache.org/viewvc?rev=1715375&view=rev
> Log:
> updated CHANGES
>
> Modified:
>     httpd/httpd/trunk/CHANGES
>
> Modified: httpd/httpd/trunk/CHANGES
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=1715375&r1=1715374&r2=1715375&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Nov 20 15:24:21 2015
> @@ -4,6 +4,24 @@ Changes with Apache 2.5.0
>    *) mod_ssl: For the "SSLStaplingReturnResponderErrors off" case, make sure
>       to only staple responses with certificate status "good". [Kaspar Brand]
>
> +  *) mod_http2: incoming trailers (headers after request body) are properly
> +     forwarded to the processing engine. [Stefan Eissing]
> +
> +  *) mod_http2: new directive 'H2Push' to en-/disable HTTP/2 server
> +     pushes a server/virtual host. Pushes are initiated by the presence
> +     of 'Link:' headers with relation 'preload' on a response. [Stefan Eissing]
> +
> +  *) mod_http2: write performance of http2 improved for larger resources,
> +     especially static files. [Stefan Eissing]
> +
> +  *) core: if the first HTTP/1.1 request on a connection goes to a server that
> +     prefers different protocols, these protocols are announced in a Upgrade:
> +     header on the response, mentioning the preferred protocols.
> +     [Stefan Eissing]
> +
> +  *) mod_http2: new directive 'H2ModernTLSOnly' to enforce security
> +     requirements of RFC 7540 on TLS connections. [Stefan Eissing]
> +

This should rather be removed from trunk/CHANGES once backported to
2.4.x/CHANGES (and added when committed to trunk ;).


>    *) mod_http2: new directives 'H2TLSWarmUpSize' and 'H2TLSCoolDownSecs'
>       to control TLS record sizes during connection lifetime.
>
> @@ -12,8 +30,7 @@ Changes with Apache 2.5.0
>
>    *) core: add ap_get_protocol_upgrades() to retrieve the list of protocols
>       that a client could possibly upgrade to. Use in first request on a
> -     connection to announce protocol choices.
> -     [Stefan Eissing]
> +     connection to announce protocol choices. [Stefan Eissing]

Likewise.

>
>    *) mod_http2: reworked deallocation on connection shutdown and worker
>       abort. Separate parent pool for all workers. worker threads are joined
> @@ -29,8 +46,7 @@ Changes with Apache 2.5.0
>       Detailed examination of renegotiation is only done when these do not
>       match.
>       Renegotiation is 403ed when a master connection is present. Exact reason
> -     is given additionally in a request note.
> -     [Stefan Eissing]
> +     is given additionally in a request note. [Stefan Eissing]

Likewise.

Thanks,
Yann.

From dev-return-84631-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 15:44:54 2015
Return-Path: <dev-return-84631-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6FC4D185E9
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 15:44:54 +0000 (UTC)
Received: (qmail 31223 invoked by uid 500); 20 Nov 2015 15:44:54 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 31153 invoked by uid 500); 20 Nov 2015 15:44:54 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 31143 invoked by uid 99); 20 Nov 2015 15:44:53 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 15:44:53 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 7F2AB180A2A
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 15:44:53 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.11
X-Spam-Level:
X-Spam-Status: No, score=-0.11 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 3BxBoyhBObxb for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 15:44:45 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id DEDCC43DFB
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 15:44:44 +0000 (UTC)
Received: from [192.168.178.41] (unknown [84.189.87.110])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id CCECD15A0445
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 16:44:36 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1448034276; bh=aOm/Sx95ui9i6AEi0/l4Ui6hR4URW8no+79Lo4ow10o=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=lnpxj5gHcAVq0Yydib9bKV7t1LctbuYvdt92kRrzor0WaRFOGP12qWWjsYuEnrixu
	 SCFFmSrbybwtlYDcK5ZbGGL8BGCog9V5ysWjiinVVnyeZX3SF5zB9bhdrXG5rddASy
	 ZcaV1jbJbyrTRYjp0VcoJPU1nWfnx+8qmVVU1USA=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: svn commit: r1715363 - in /httpd/httpd/trunk/modules/http2: h2_request.c h2_response.h h2_session.c h2_stream.c h2_stream.h h2_util.c h2_util.h
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CAKQ1sVMSo73XK0Whhx2fR8Y5NH+mLp67VSOFE1Fi5iFkB3vCgA@mail.gmail.com>
Date: Fri, 20 Nov 2015 16:44:36 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <94EB7D5D-A77F-4C66-AAA4-48E81054969E@greenbytes.de>
References: <20151120135833.5D7E83A0234@svn01-us-west.apache.org> <CAKQ1sVMSo73XK0Whhx2fR8Y5NH+mLp67VSOFE1Fi5iFkB3vCgA@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

Most of this is discussed here: =
https://httpwg.github.io/specs/rfc7540.html#HttpHeaders

Basically HTTP/2 defines its own connection properties, so several =
things which are announced/controlled
by Connection: and other headers do not apply to HTTP/2 connections. So, =
the "Connection:" header itself
was obsoleted.

mod_http2 has to translate between both worlds a bit and is doing so =
probably incompletely so now, so
the discussion about this is very useful.

There are two conversions for mod_http2 to make:
1. request headers (H2 -> H1):=20
2. response headers (H1 -> H2):

For 1. certain headers should not arrive at all. If they do, we can =
either ignore or generate an error and deny the request. For example =
"Connection: ..." should never arrive. Same for "Transfer-Encoding: ". =
The current implementation ignores. One could argue for deny.
For 2. certain headers we cannot send out and we need to take proper =
actions for that. For example a "TE: deflate" we cannot process like =
this. Here more checks need to be added.

//Stefan

> Am 20.11.2015 um 16:25 schrieb Yann Ylavic <ylavic.dev@gmail.com>:
>=20
> On Fri, Nov 20, 2015 at 2:58 PM,  <icing@apache.org> wrote:
>> Author: icing
>> Date: Fri Nov 20 13:58:32 2015
>> New Revision: 1715363
>>=20
>> URL: http://svn.apache.org/viewvc?rev=3D1715363&view=3Drev
>> Log:
>> incoming trailers passed into chunked request bodies, outgoing =
trailers not supported yet
>>=20
>> Modified:
> []
>>    httpd/httpd/trunk/modules/http2/h2_util.c
> []
>>=20
>>=20
>> Modified: httpd/httpd/trunk/modules/http2/h2_util.c
>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_util.c?rev=
=3D1715363&r1=3D1715362&r2=3D1715363&view=3Ddiff
>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>> --- httpd/httpd/trunk/modules/http2/h2_util.c (original)
>> +++ httpd/httpd/trunk/modules/http2/h2_util.c Fri Nov 20 13:58:32 =
2015
> []
>> @@ -879,3 +894,94 @@ h2_ngheader *h2_util_ngheader_make_req(a
>>     return ngh;
>> }
>>=20
>> =
+/************************************************************************=
*******
>> + * header HTTP/1 <-> HTTP/2 conversions
>> + =
**************************************************************************=
****/
>> +
>> +
>> +typedef struct {
>> +    const char *name;
>> +    size_t len;
>> +} literal;
>> +
>> +#define H2_DEF_LITERAL(n)   { (n), (sizeof(n)-1) }
>> +#define H2_ALEN(a)          (sizeof(a)/sizeof((a)[0]))
>> +#define H2_LIT_ARGS(a)      (a),H2_ALEN(a)
>> +
>> +static literal IgnoredRequestHeaders[] =3D {
>> +    H2_DEF_LITERAL("host"),
>> +    H2_DEF_LITERAL("expect"),
>> +    H2_DEF_LITERAL("upgrade"),
>> +    H2_DEF_LITERAL("connection"),
>> +    H2_DEF_LITERAL("keep-alive"),
>> +    H2_DEF_LITERAL("http2-settings"),
>> +    H2_DEF_LITERAL("proxy-connection"),
>> +    H2_DEF_LITERAL("transfer-encoding"),
>> +};
>=20
> Shouldn't we also include all the tokens from the Connection header?
> (obviously not feasible with this only blacklist)
>=20
>=20
>> +static literal IgnoredRequestTrailers[] =3D { /* Ignore, see =
rfc7230, ch. 4.1.2 */
>> +    H2_DEF_LITERAL("te"),
>> +    H2_DEF_LITERAL("host"),
>> +    H2_DEF_LITERAL("range"),
>> +    H2_DEF_LITERAL("cookie"),
>> +    H2_DEF_LITERAL("expect"),
>> +    H2_DEF_LITERAL("pragma"),
>> +    H2_DEF_LITERAL("max-forwards"),
>> +    H2_DEF_LITERAL("cache-control"),
>> +    H2_DEF_LITERAL("authorization"),
>> +    H2_DEF_LITERAL("content-length"),
>> +    H2_DEF_LITERAL("proxy-authorization"),
>> +};
>=20
> No notion of announced trailers in HTTP2, with eg. the request header
> "Trailer: token1, token2, ..." (any non-announced trailer would be
> ignored), something we could (always/optionally) enforce?
>=20
>> +static literal IgnoredResponseTrailers[] =3D {
>> +    H2_DEF_LITERAL("age"),
>> +    H2_DEF_LITERAL("date"),
>> +    H2_DEF_LITERAL("vary"),
>> +    H2_DEF_LITERAL("cookie"),
>> +    H2_DEF_LITERAL("expires"),
>> +    H2_DEF_LITERAL("warning"),
>> +    H2_DEF_LITERAL("location"),
>> +    H2_DEF_LITERAL("retry-after"),
>> +    H2_DEF_LITERAL("cache-control"),
>> +    H2_DEF_LITERAL("www-authenticate"),
>> +    H2_DEF_LITERAL("proxy-authenticate"),
>> +};
>=20
> Likewise, shouldn't we check whether the request associated to the
> response contains a "TE: trailers" or otherwise use no trailer?
>=20
>=20
> I'm a bit confused about what is included-in/overwritten-by the HTTP2
> framing and what remains from HTTP1 RFCs/requirements.
>=20
>=20
> Regards,
> Yann.


From dev-return-84632-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 15:45:24 2015
Return-Path: <dev-return-84632-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 67BE2185F8
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 15:45:24 +0000 (UTC)
Received: (qmail 33830 invoked by uid 500); 20 Nov 2015 15:45:23 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 33761 invoked by uid 500); 20 Nov 2015 15:45:23 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 33751 invoked by uid 99); 20 Nov 2015 15:45:23 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 15:45:23 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 58BA21A236E
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 15:45:23 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.11
X-Spam-Level:
X-Spam-Status: No, score=-0.11 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	T_RP_MATCHES_RCVD=-0.01] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id Ph8Ui4Y8Xu-1 for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 15:45:18 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 2C4DC2154C
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 15:45:17 +0000 (UTC)
Received: from [192.168.178.41] (unknown [84.189.87.110])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 3962C15A0445
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 16:45:10 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1448034310; bh=iTpmghgnAe8aK/6mce43amtICHUc/ldC/iz7B0fsHiw=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=fVr81oIyWhhm44qj0YkF+ElmNUbBux2PvWqHKRNBIosQMlVtcxkz6WByEgMs4Pj6h
	 rW0ZvOZwTQQ/gVbLdOYPryBWMZOUUnn+LtEbPdM2ezo0HSeeywdtiZtMTGg9fQD2Q2
	 tjHadjRZFwp8mz7C5lyWNxpZ6IrRVHXw7pTiQNsA=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: svn commit: r1715375 - /httpd/httpd/trunk/CHANGES
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <CAKQ1sVNTsEQxHT-L4NiShWBX3nD0h0+gUa009ux8xm2O-S9YWA@mail.gmail.com>
Date: Fri, 20 Nov 2015 16:45:10 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <A580E99E-F87E-45A1-81D8-E21CF985D793@greenbytes.de>
References: <20151120152422.5955F3A075E@svn01-us-west.apache.org> <CAKQ1sVNTsEQxHT-L4NiShWBX3nD0h0+gUa009ux8xm2O-S9YWA@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

Updated.=20

Sorry, misunderstood the "delta" intention of the file.

> Am 20.11.2015 um 16:38 schrieb Yann Ylavic <ylavic.dev@gmail.com>:
>=20
> On Fri, Nov 20, 2015 at 4:24 PM,  <icing@apache.org> wrote:
>> Author: icing
>> Date: Fri Nov 20 15:24:21 2015
>> New Revision: 1715375
>>=20
>> URL: http://svn.apache.org/viewvc?rev=3D1715375&view=3Drev
>> Log:
>> updated CHANGES
>>=20
>> Modified:
>>    httpd/httpd/trunk/CHANGES
>>=20
>> Modified: httpd/httpd/trunk/CHANGES
>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=3D1715375&r1=3D=
1715374&r2=3D1715375&view=3Ddiff
>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
>> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Nov 20 15:24:21 2015
>> @@ -4,6 +4,24 @@ Changes with Apache 2.5.0
>>   *) mod_ssl: For the "SSLStaplingReturnResponderErrors off" case, =
make sure
>>      to only staple responses with certificate status "good". [Kaspar =
Brand]
>>=20
>> +  *) mod_http2: incoming trailers (headers after request body) are =
properly
>> +     forwarded to the processing engine. [Stefan Eissing]
>> +
>> +  *) mod_http2: new directive 'H2Push' to en-/disable HTTP/2 server
>> +     pushes a server/virtual host. Pushes are initiated by the =
presence
>> +     of 'Link:' headers with relation 'preload' on a response. =
[Stefan Eissing]
>> +
>> +  *) mod_http2: write performance of http2 improved for larger =
resources,
>> +     especially static files. [Stefan Eissing]
>> +
>> +  *) core: if the first HTTP/1.1 request on a connection goes to a =
server that
>> +     prefers different protocols, these protocols are announced in a =
Upgrade:
>> +     header on the response, mentioning the preferred protocols.
>> +     [Stefan Eissing]
>> +
>> +  *) mod_http2: new directive 'H2ModernTLSOnly' to enforce security
>> +     requirements of RFC 7540 on TLS connections. [Stefan Eissing]
>> +
>=20
> This should rather be removed from trunk/CHANGES once backported to
> 2.4.x/CHANGES (and added when committed to trunk ;).
>=20
>=20
>>   *) mod_http2: new directives 'H2TLSWarmUpSize' and =
'H2TLSCoolDownSecs'
>>      to control TLS record sizes during connection lifetime.
>>=20
>> @@ -12,8 +30,7 @@ Changes with Apache 2.5.0
>>=20
>>   *) core: add ap_get_protocol_upgrades() to retrieve the list of =
protocols
>>      that a client could possibly upgrade to. Use in first request on =
a
>> -     connection to announce protocol choices.
>> -     [Stefan Eissing]
>> +     connection to announce protocol choices. [Stefan Eissing]
>=20
> Likewise.
>=20
>>=20
>>   *) mod_http2: reworked deallocation on connection shutdown and =
worker
>>      abort. Separate parent pool for all workers. worker threads are =
joined
>> @@ -29,8 +46,7 @@ Changes with Apache 2.5.0
>>      Detailed examination of renegotiation is only done when these do =
not
>>      match.
>>      Renegotiation is 403ed when a master connection is present. =
Exact reason
>> -     is given additionally in a request note.
>> -     [Stefan Eissing]
>> +     is given additionally in a request note. [Stefan Eissing]
>=20
> Likewise.
>=20
> Thanks,
> Yann.


From dev-return-84633-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 15:57:02 2015
Return-Path: <dev-return-84633-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 48E9618659
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 15:57:02 +0000 (UTC)
Received: (qmail 71154 invoked by uid 500); 20 Nov 2015 15:57:01 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 71078 invoked by uid 500); 20 Nov 2015 15:57:01 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 71065 invoked by uid 99); 20 Nov 2015 15:57:01 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 15:57:01 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 256F4C147B
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 15:57:01 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id GlqLm0VpUva2 for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 15:56:50 +0000 (UTC)
Received: from mail-qk0-f181.google.com (mail-qk0-f181.google.com [209.85.220.181])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 7D7C220225
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 15:56:50 +0000 (UTC)
Received: by qkas77 with SMTP id s77so38275838qka.0
        for <dev@httpd.apache.org>; Fri, 20 Nov 2015 07:56:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=ZJITjDIQwKmkam5l3DF8GJk7sAWuMA0CI1kiNIB7PS4=;
        b=txIGDlwMx4AC6VWSmOADzO9zAcMBFUUcwpufik6Bvy/lu0bWBu/WhSC3qySXesCH8X
         gJnnDkgM1+TFC01o3Q93zH0BiKbTvUnKH4KKLkPPaQ38QLUoTa6c7YXM8wLlJuDKeW/X
         gYJenqUnqUWQU4Qs2pX5NgWhkLIBNiHli7HTQXyzvWmWSLci8XDulFD+fTpndQ+8VxL7
         ioF53fRU4Oi7udQJP2hKW9ZJNuyGVL76onAtM7bdtwHfT0zMOxDJJ6yZ3hZ4hqWNgI2A
         cSZzjlFsrBZ3mb3FNoIgwphNHJlz2OmIdhQ00HZ1SmIuakaClp2CDhoVFBbEqDLBPk9K
         WIpA==
MIME-Version: 1.0
X-Received: by 10.55.217.27 with SMTP id u27mr14009465qki.55.1448035003680;
 Fri, 20 Nov 2015 07:56:43 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Fri, 20 Nov 2015 07:56:43 -0800 (PST)
In-Reply-To: <94EB7D5D-A77F-4C66-AAA4-48E81054969E@greenbytes.de>
References: <20151120135833.5D7E83A0234@svn01-us-west.apache.org>
	<CAKQ1sVMSo73XK0Whhx2fR8Y5NH+mLp67VSOFE1Fi5iFkB3vCgA@mail.gmail.com>
	<94EB7D5D-A77F-4C66-AAA4-48E81054969E@greenbytes.de>
Date: Fri, 20 Nov 2015 16:56:43 +0100
Message-ID: <CAKQ1sVNFRHsyEt4qEpxW4-kgATFLg_5fbswX2izA0prQsQcBmw@mail.gmail.com>
Subject: Re: svn commit: r1715363 - in /httpd/httpd/trunk/modules/http2:
 h2_request.c h2_response.h h2_session.c h2_stream.c h2_stream.h h2_util.c h2_util.h
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Fri, Nov 20, 2015 at 4:44 PM, Stefan Eissing
<stefan.eissing@greenbytes.de> wrote:
> Most of this is discussed here: https://httpwg.github.io/specs/rfc7540.ht=
ml#HttpHeaders
>
> Basically HTTP/2 defines its own connection properties, so several things=
 which are announced/controlled
> by Connection: and other headers do not apply to HTTP/2 connections. So, =
the "Connection:" header itself
> was obsoleted.
>
> mod_http2 has to translate between both worlds a bit and is doing so prob=
ably incompletely so now, so
> the discussion about this is very useful.
>
> There are two conversions for mod_http2 to make:
> 1. request headers (H2 -> H1):
> 2. response headers (H1 -> H2):
>
> For 1. certain headers should not arrive at all. If they do, we can eithe=
r ignore or generate an error and deny the request. For example "Connection=
: ..." should never arrive. Same for "Transfer-Encoding: ". The current imp=
lementation ignores. One could argue for deny.
> For 2. certain headers we cannot send out and we need to take proper acti=
ons for that. For example a "TE: deflate" we cannot process like this. Here=
 more checks need to be added.

OK, thanks for the explanation/pointer.

In rfc7540.html#rfc.section.8.1.2, looks like "TE: trailers" is still
meaningful, and "Trailer:" is also in the examples.
Should we ignore the trailers unless explicitely specified?

I really need to have a closer look at rfc7540...

From dev-return-84634-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 15:59:05 2015
Return-Path: <dev-return-84634-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E6B5018672
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 15:59:04 +0000 (UTC)
Received: (qmail 81583 invoked by uid 500); 20 Nov 2015 15:59:04 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 81518 invoked by uid 500); 20 Nov 2015 15:59:04 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 81507 invoked by uid 99); 20 Nov 2015 15:59:04 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 15:59:04 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 9345C180A62
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 15:59:03 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id SWLCWTIjbso1 for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 15:58:56 +0000 (UTC)
Received: from mail-qk0-f178.google.com (mail-qk0-f178.google.com [209.85.220.178])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 28ECF20C53
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 15:58:56 +0000 (UTC)
Received: by qkda6 with SMTP id a6so38075823qkd.3
        for <dev@httpd.apache.org>; Fri, 20 Nov 2015 07:58:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=q3YbRYsKb/x7LWv7At5d7b6IkQafKfSIFpxLt0AJbOY=;
        b=buvsBB8qtAohJJ4ZywyL8+7egeQbyikV09FGxARp+5BmI86vyRTI0dfw45Zht3O0wo
         2J5Eaeact2+En55v7NJd8wJ1v/lSmb8T3tzbp4MUohhIkEDNqStdm+GvGRHZCVxS6jhW
         TYCA0IIzJZ75WeuEzfib4SavC6fRX9zVOmhjRbCFcLw47ZAjkcqfrb46VWMvVrq2cZ1e
         O10/wKj6UeRiUQ2a/IDs9N4TxHQGliRIiyoIujOxcPiMRztBRhjnYwAwK51275zXRI+u
         ge8aHauWQhRFruneVSntZ1r5KyU+BRqh2fSuqwNuk46wjcXEY4zNwY0BNC2pUifY+zPG
         AkFQ==
MIME-Version: 1.0
X-Received: by 10.55.76.73 with SMTP id z70mr13782867qka.38.1448035129573;
 Fri, 20 Nov 2015 07:58:49 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Fri, 20 Nov 2015 07:58:49 -0800 (PST)
In-Reply-To: <A580E99E-F87E-45A1-81D8-E21CF985D793@greenbytes.de>
References: <20151120152422.5955F3A075E@svn01-us-west.apache.org>
	<CAKQ1sVNTsEQxHT-L4NiShWBX3nD0h0+gUa009ux8xm2O-S9YWA@mail.gmail.com>
	<A580E99E-F87E-45A1-81D8-E21CF985D793@greenbytes.de>
Date: Fri, 20 Nov 2015 16:58:49 +0100
Message-ID: <CAKQ1sVMx9KCZRkf0U3jqnzrJFPjRiG0WoGZPngT8ridkyndTAQ@mail.gmail.com>
Subject: Re: svn commit: r1715375 - /httpd/httpd/trunk/CHANGES
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

No pb ;)
The rationale is (I think) that next httpd (2.6/3) CHANGES shouldn't
contain the ones from the previous versions.

On Fri, Nov 20, 2015 at 4:45 PM, Stefan Eissing
<stefan.eissing@greenbytes.de> wrote:
> Updated.
>
> Sorry, misunderstood the "delta" intention of the file.
>
>> Am 20.11.2015 um 16:38 schrieb Yann Ylavic <ylavic.dev@gmail.com>:
>>
>> On Fri, Nov 20, 2015 at 4:24 PM,  <icing@apache.org> wrote:
>>> Author: icing
>>> Date: Fri Nov 20 15:24:21 2015
>>> New Revision: 1715375
>>>
>>> URL: http://svn.apache.org/viewvc?rev=1715375&view=rev
>>> Log:
>>> updated CHANGES
>>>
>>> Modified:
>>>    httpd/httpd/trunk/CHANGES
>>>
>>> Modified: httpd/httpd/trunk/CHANGES
>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?rev=1715375&r1=1715374&r2=1715375&view=diff
>>> ==============================================================================
>>> --- httpd/httpd/trunk/CHANGES [utf-8] (original)
>>> +++ httpd/httpd/trunk/CHANGES [utf-8] Fri Nov 20 15:24:21 2015
>>> @@ -4,6 +4,24 @@ Changes with Apache 2.5.0
>>>   *) mod_ssl: For the "SSLStaplingReturnResponderErrors off" case, make sure
>>>      to only staple responses with certificate status "good". [Kaspar Brand]
>>>
>>> +  *) mod_http2: incoming trailers (headers after request body) are properly
>>> +     forwarded to the processing engine. [Stefan Eissing]
>>> +
>>> +  *) mod_http2: new directive 'H2Push' to en-/disable HTTP/2 server
>>> +     pushes a server/virtual host. Pushes are initiated by the presence
>>> +     of 'Link:' headers with relation 'preload' on a response. [Stefan Eissing]
>>> +
>>> +  *) mod_http2: write performance of http2 improved for larger resources,
>>> +     especially static files. [Stefan Eissing]
>>> +
>>> +  *) core: if the first HTTP/1.1 request on a connection goes to a server that
>>> +     prefers different protocols, these protocols are announced in a Upgrade:
>>> +     header on the response, mentioning the preferred protocols.
>>> +     [Stefan Eissing]
>>> +
>>> +  *) mod_http2: new directive 'H2ModernTLSOnly' to enforce security
>>> +     requirements of RFC 7540 on TLS connections. [Stefan Eissing]
>>> +
>>
>> This should rather be removed from trunk/CHANGES once backported to
>> 2.4.x/CHANGES (and added when committed to trunk ;).
>>
>>
>>>   *) mod_http2: new directives 'H2TLSWarmUpSize' and 'H2TLSCoolDownSecs'
>>>      to control TLS record sizes during connection lifetime.
>>>
>>> @@ -12,8 +30,7 @@ Changes with Apache 2.5.0
>>>
>>>   *) core: add ap_get_protocol_upgrades() to retrieve the list of protocols
>>>      that a client could possibly upgrade to. Use in first request on a
>>> -     connection to announce protocol choices.
>>> -     [Stefan Eissing]
>>> +     connection to announce protocol choices. [Stefan Eissing]
>>
>> Likewise.
>>
>>>
>>>   *) mod_http2: reworked deallocation on connection shutdown and worker
>>>      abort. Separate parent pool for all workers. worker threads are joined
>>> @@ -29,8 +46,7 @@ Changes with Apache 2.5.0
>>>      Detailed examination of renegotiation is only done when these do not
>>>      match.
>>>      Renegotiation is 403ed when a master connection is present. Exact reason
>>> -     is given additionally in a request note.
>>> -     [Stefan Eissing]
>>> +     is given additionally in a request note. [Stefan Eissing]
>>
>> Likewise.
>>
>> Thanks,
>> Yann.
>

From dev-return-84635-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 16:04:25 2015
Return-Path: <dev-return-84635-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DB487186D6
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 16:04:25 +0000 (UTC)
Received: (qmail 8707 invoked by uid 500); 20 Nov 2015 16:04:25 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 8633 invoked by uid 500); 20 Nov 2015 16:04:25 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 8623 invoked by uid 99); 20 Nov 2015 16:04:25 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 16:04:25 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 00E0B1A21BA
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 16:04:25 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id yxm924Fcc51l for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 16:04:13 +0000 (UTC)
Received: from resqmta-po-02v.sys.comcast.net (resqmta-po-02v.sys.comcast.net [96.114.154.161])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 23151429AA
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 16:04:13 +0000 (UTC)
Received: from resomta-po-14v.sys.comcast.net ([96.114.154.238])
	by resqmta-po-02v.sys.comcast.net with comcast
	id js401r00958ss0Y01s46qx; Fri, 20 Nov 2015 16:04:06 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-14v.sys.comcast.net with comcast
	id js451r00H2U0RYt01s458V; Fri, 20 Nov 2015 16:04:06 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715363 - in /httpd/httpd/trunk/modules/http2: h2_request.c h2_response.h h2_session.c h2_stream.c h2_stream.h h2_util.c h2_util.h
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <94EB7D5D-A77F-4C66-AAA4-48E81054969E@greenbytes.de>
Date: Fri, 20 Nov 2015 11:04:05 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <3E06B1AE-4931-404E-9E50-45723B38E462@jaguNET.com>
References: <20151120135833.5D7E83A0234@svn01-us-west.apache.org> <CAKQ1sVMSo73XK0Whhx2fR8Y5NH+mLp67VSOFE1Fi5iFkB3vCgA@mail.gmail.com> <94EB7D5D-A77F-4C66-AAA4-48E81054969E@greenbytes.de>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448035446;
	bh=w1GcbhZLIXnICVt5fCP/F2TTHpjDIo5jknsFJu2MPUI=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=HxhadzHq0AYzTtokBCsSm69POu2nGVkewHDM1M4OVJie6A+BBJJFzN8CjW/KFFrOK
	 GRbt8WPQT84pXndISd5WSDR5Z9RvZcVYl0HSa3NPq7LnpNE6m5DdUN+ftmiS8UK0+u
	 /GjGHJJ+2lPvUVmDNk43JW8yzergS/sDIWI+VsEPFiFhPP/csBflNTjZYnhAgJjsVf
	 ZIFp+lt5jFuxJO2c6WtROZS9nvgIeSfPUGH7X19SkP4FUMufIPd1mkX2KMeqdzCBex
	 AgtQ+d4YDOwLepxQjH64LOtCsfDQQUj7JQUgHfij9Lj/OglchPawW7MIYCBVw7Q9iu
	 vSCXMJ9OgCACw==

Ugg... I *just* noticed:

	However, header field names MUST be converted to lowercase
	prior to their encoding in HTTP/2. A request or response
	containing uppercase header field names MUST be treated as
	malformed=20



> On Nov 20, 2015, at 10:44 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>=20
> Most of this is discussed here: =
https://httpwg.github.io/specs/rfc7540.html#HttpHeaders
>=20
> Basically HTTP/2 defines its own connection properties, so several =
things which are announced/controlled
> by Connection: and other headers do not apply to HTTP/2 connections. =
So, the "Connection:" header itself
> was obsoleted.
>=20
> mod_http2 has to translate between both worlds a bit and is doing so =
probably incompletely so now, so
> the discussion about this is very useful.
>=20
> There are two conversions for mod_http2 to make:
> 1. request headers (H2 -> H1):=20
> 2. response headers (H1 -> H2):
>=20
> For 1. certain headers should not arrive at all. If they do, we can =
either ignore or generate an error and deny the request. For example =
"Connection: ..." should never arrive. Same for "Transfer-Encoding: ". =
The current implementation ignores. One could argue for deny.
> For 2. certain headers we cannot send out and we need to take proper =
actions for that. For example a "TE: deflate" we cannot process like =
this. Here more checks need to be added.
>=20
> //Stefan
>=20
>> Am 20.11.2015 um 16:25 schrieb Yann Ylavic <ylavic.dev@gmail.com>:
>>=20
>> On Fri, Nov 20, 2015 at 2:58 PM,  <icing@apache.org> wrote:
>>> Author: icing
>>> Date: Fri Nov 20 13:58:32 2015
>>> New Revision: 1715363
>>>=20
>>> URL: http://svn.apache.org/viewvc?rev=3D1715363&view=3Drev
>>> Log:
>>> incoming trailers passed into chunked request bodies, outgoing =
trailers not supported yet
>>>=20
>>> Modified:
>> []
>>>   httpd/httpd/trunk/modules/http2/h2_util.c
>> []
>>>=20
>>>=20
>>> Modified: httpd/httpd/trunk/modules/http2/h2_util.c
>>> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_util.c?rev=
=3D1715363&r1=3D1715362&r2=3D1715363&view=3Ddiff
>>> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>>> --- httpd/httpd/trunk/modules/http2/h2_util.c (original)
>>> +++ httpd/httpd/trunk/modules/http2/h2_util.c Fri Nov 20 13:58:32 =
2015
>> []
>>> @@ -879,3 +894,94 @@ h2_ngheader *h2_util_ngheader_make_req(a
>>>    return ngh;
>>> }
>>>=20
>>> =
+/************************************************************************=
*******
>>> + * header HTTP/1 <-> HTTP/2 conversions
>>> + =
**************************************************************************=
****/
>>> +
>>> +
>>> +typedef struct {
>>> +    const char *name;
>>> +    size_t len;
>>> +} literal;
>>> +
>>> +#define H2_DEF_LITERAL(n)   { (n), (sizeof(n)-1) }
>>> +#define H2_ALEN(a)          (sizeof(a)/sizeof((a)[0]))
>>> +#define H2_LIT_ARGS(a)      (a),H2_ALEN(a)
>>> +
>>> +static literal IgnoredRequestHeaders[] =3D {
>>> +    H2_DEF_LITERAL("host"),
>>> +    H2_DEF_LITERAL("expect"),
>>> +    H2_DEF_LITERAL("upgrade"),
>>> +    H2_DEF_LITERAL("connection"),
>>> +    H2_DEF_LITERAL("keep-alive"),
>>> +    H2_DEF_LITERAL("http2-settings"),
>>> +    H2_DEF_LITERAL("proxy-connection"),
>>> +    H2_DEF_LITERAL("transfer-encoding"),
>>> +};
>>=20
>> Shouldn't we also include all the tokens from the Connection header?
>> (obviously not feasible with this only blacklist)
>>=20
>>=20
>>> +static literal IgnoredRequestTrailers[] =3D { /* Ignore, see =
rfc7230, ch. 4.1.2 */
>>> +    H2_DEF_LITERAL("te"),
>>> +    H2_DEF_LITERAL("host"),
>>> +    H2_DEF_LITERAL("range"),
>>> +    H2_DEF_LITERAL("cookie"),
>>> +    H2_DEF_LITERAL("expect"),
>>> +    H2_DEF_LITERAL("pragma"),
>>> +    H2_DEF_LITERAL("max-forwards"),
>>> +    H2_DEF_LITERAL("cache-control"),
>>> +    H2_DEF_LITERAL("authorization"),
>>> +    H2_DEF_LITERAL("content-length"),
>>> +    H2_DEF_LITERAL("proxy-authorization"),
>>> +};
>>=20
>> No notion of announced trailers in HTTP2, with eg. the request header
>> "Trailer: token1, token2, ..." (any non-announced trailer would be
>> ignored), something we could (always/optionally) enforce?
>>=20
>>> +static literal IgnoredResponseTrailers[] =3D {
>>> +    H2_DEF_LITERAL("age"),
>>> +    H2_DEF_LITERAL("date"),
>>> +    H2_DEF_LITERAL("vary"),
>>> +    H2_DEF_LITERAL("cookie"),
>>> +    H2_DEF_LITERAL("expires"),
>>> +    H2_DEF_LITERAL("warning"),
>>> +    H2_DEF_LITERAL("location"),
>>> +    H2_DEF_LITERAL("retry-after"),
>>> +    H2_DEF_LITERAL("cache-control"),
>>> +    H2_DEF_LITERAL("www-authenticate"),
>>> +    H2_DEF_LITERAL("proxy-authenticate"),
>>> +};
>>=20
>> Likewise, shouldn't we check whether the request associated to the
>> response contains a "TE: trailers" or otherwise use no trailer?
>>=20
>>=20
>> I'm a bit confused about what is included-in/overwritten-by the HTTP2
>> framing and what remains from HTTP1 RFCs/requirements.
>>=20
>>=20
>> Regards,
>> Yann.
>=20


From dev-return-84636-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 16:12:36 2015
Return-Path: <dev-return-84636-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4780F1872A
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 16:12:36 +0000 (UTC)
Received: (qmail 33013 invoked by uid 500); 20 Nov 2015 16:12:35 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 32938 invoked by uid 500); 20 Nov 2015 16:12:35 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 32927 invoked by uid 99); 20 Nov 2015 16:12:35 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 16:12:35 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 4D11AC05B5
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 16:12:35 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.109
X-Spam-Level:
X-Spam-Status: No, score=-0.109 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	MIME_QP_LONG_LINE=0.001, SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id k8Tx3Fr_PvaH for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 16:12:24 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 0809A42B08
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 16:12:24 +0000 (UTC)
Received: from [192.168.178.61] (unknown [84.189.87.110])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 76E7A15A057E
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 17:12:22 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1448035942; bh=8hUMAZDXS3XsNfDcjuCthn4yuNOlIuUcnFh+JwpZlvI=;
	h=From:Subject:Date:References:In-Reply-To:To:From;
	b=QJ/y667wIZXhtv+/5+1qX+6YxWfSHBIPQif4HPR6RY7oZG23rWxtTP/L2L8RIstF7
	 QGcPF2Sh+DxbGdFvYjZuG//b3Ct0ac98EwEua4JZOKbHgPO9MlU8q+C/bjChKtDszj
	 k2DEvxGpNl0WQ3JATL6CL2WWcTptOxoxs+hVBt7U=
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (1.0)
Subject: Re: svn commit: r1715363 - in /httpd/httpd/trunk/modules/http2: h2_request.c h2_response.h h2_session.c h2_stream.c h2_stream.h h2_util.c h2_util.h
Message-Id: <21FDE383-40C5-4435-8DE5-5E8020C844DC@greenbytes.de>
Date: Fri, 20 Nov 2015 17:12:24 +0100
References: <20151120135833.5D7E83A0234@svn01-us-west.apache.org> <CAKQ1sVMSo73XK0Whhx2fR8Y5NH+mLp67VSOFE1Fi5iFkB3vCgA@mail.gmail.com> <94EB7D5D-A77F-4C66-AAA4-48E81054969E@greenbytes.de> <3E06B1AE-4931-404E-9E50-45723B38E462@jaguNET.com>
In-Reply-To: <3E06B1AE-4931-404E-9E50-45723B38E462@jaguNET.com>
To: dev@httpd.apache.org
X-Mailer: iPhone Mail (13B143)

Yes, but I interpret that as the header fields, not any tokens that refer to=
 header names.=20

> Am 20.11.2015 um 17:04 schrieb Jim Jagielski <jim@jaguNET.com>:
>=20
> Ugg... I *just* noticed:
>=20
>    However, header field names MUST be converted to lowercase
>    prior to their encoding in HTTP/2. A request or response
>    containing uppercase header field names MUST be treated as
>    malformed=20
>=20
>=20
>=20
>> On Nov 20, 2015, at 10:44 AM, Stefan Eissing <stefan.eissing@greenbytes.d=
e> wrote:
>>=20
>> Most of this is discussed here: https://httpwg.github.io/specs/rfc7540.ht=
ml#HttpHeaders
>>=20
>> Basically HTTP/2 defines its own connection properties, so several things=
 which are announced/controlled
>> by Connection: and other headers do not apply to HTTP/2 connections. So, t=
he "Connection:" header itself
>> was obsoleted.
>>=20
>> mod_http2 has to translate between both worlds a bit and is doing so prob=
ably incompletely so now, so
>> the discussion about this is very useful.
>>=20
>> There are two conversions for mod_http2 to make:
>> 1. request headers (H2 -> H1):=20
>> 2. response headers (H1 -> H2):
>>=20
>> For 1. certain headers should not arrive at all. If they do, we can eithe=
r ignore or generate an error and deny the request. For example "Connection:=
 ..." should never arrive. Same for "Transfer-Encoding: ". The current imple=
mentation ignores. One could argue for deny.
>> For 2. certain headers we cannot send out and we need to take proper acti=
ons for that. For example a "TE: deflate" we cannot process like this. Here m=
ore checks need to be added.
>>=20
>> //Stefan
>>=20
>>> Am 20.11.2015 um 16:25 schrieb Yann Ylavic <ylavic.dev@gmail.com>:
>>>=20
>>> On Fri, Nov 20, 2015 at 2:58 PM,  <icing@apache.org> wrote:
>>>> Author: icing
>>>> Date: Fri Nov 20 13:58:32 2015
>>>> New Revision: 1715363
>>>>=20
>>>> URL: http://svn.apache.org/viewvc?rev=3D1715363&view=3Drev
>>>> Log:
>>>> incoming trailers passed into chunked request bodies, outgoing trailers=
 not supported yet
>>>>=20
>>>> Modified:
>>> []
>>>>  httpd/httpd/trunk/modules/http2/h2_util.c
>>> []
>>>>=20
>>>>=20
>>>> Modified: httpd/httpd/trunk/modules/http2/h2_util.c
>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_ut=
il.c?rev=3D1715363&r1=3D1715362&r2=3D1715363&view=3Ddiff
>>>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D
>>>> --- httpd/httpd/trunk/modules/http2/h2_util.c (original)
>>>> +++ httpd/httpd/trunk/modules/http2/h2_util.c Fri Nov 20 13:58:32 2015
>>> []
>>>> @@ -879,3 +894,94 @@ h2_ngheader *h2_util_ngheader_make_req(a
>>>>   return ngh;
>>>> }
>>>>=20
>>>> +/*********************************************************************=
**********
>>>> + * header HTTP/1 <-> HTTP/2 conversions
>>>> + *********************************************************************=
*********/
>>>> +
>>>> +
>>>> +typedef struct {
>>>> +    const char *name;
>>>> +    size_t len;
>>>> +} literal;
>>>> +
>>>> +#define H2_DEF_LITERAL(n)   { (n), (sizeof(n)-1) }
>>>> +#define H2_ALEN(a)          (sizeof(a)/sizeof((a)[0]))
>>>> +#define H2_LIT_ARGS(a)      (a),H2_ALEN(a)
>>>> +
>>>> +static literal IgnoredRequestHeaders[] =3D {
>>>> +    H2_DEF_LITERAL("host"),
>>>> +    H2_DEF_LITERAL("expect"),
>>>> +    H2_DEF_LITERAL("upgrade"),
>>>> +    H2_DEF_LITERAL("connection"),
>>>> +    H2_DEF_LITERAL("keep-alive"),
>>>> +    H2_DEF_LITERAL("http2-settings"),
>>>> +    H2_DEF_LITERAL("proxy-connection"),
>>>> +    H2_DEF_LITERAL("transfer-encoding"),
>>>> +};
>>>=20
>>> Shouldn't we also include all the tokens from the Connection header?
>>> (obviously not feasible with this only blacklist)
>>>=20
>>>=20
>>>> +static literal IgnoredRequestTrailers[] =3D { /* Ignore, see rfc7230, c=
h. 4.1.2 */
>>>> +    H2_DEF_LITERAL("te"),
>>>> +    H2_DEF_LITERAL("host"),
>>>> +    H2_DEF_LITERAL("range"),
>>>> +    H2_DEF_LITERAL("cookie"),
>>>> +    H2_DEF_LITERAL("expect"),
>>>> +    H2_DEF_LITERAL("pragma"),
>>>> +    H2_DEF_LITERAL("max-forwards"),
>>>> +    H2_DEF_LITERAL("cache-control"),
>>>> +    H2_DEF_LITERAL("authorization"),
>>>> +    H2_DEF_LITERAL("content-length"),
>>>> +    H2_DEF_LITERAL("proxy-authorization"),
>>>> +};
>>>=20
>>> No notion of announced trailers in HTTP2, with eg. the request header
>>> "Trailer: token1, token2, ..." (any non-announced trailer would be
>>> ignored), something we could (always/optionally) enforce?
>>>=20
>>>> +static literal IgnoredResponseTrailers[] =3D {
>>>> +    H2_DEF_LITERAL("age"),
>>>> +    H2_DEF_LITERAL("date"),
>>>> +    H2_DEF_LITERAL("vary"),
>>>> +    H2_DEF_LITERAL("cookie"),
>>>> +    H2_DEF_LITERAL("expires"),
>>>> +    H2_DEF_LITERAL("warning"),
>>>> +    H2_DEF_LITERAL("location"),
>>>> +    H2_DEF_LITERAL("retry-after"),
>>>> +    H2_DEF_LITERAL("cache-control"),
>>>> +    H2_DEF_LITERAL("www-authenticate"),
>>>> +    H2_DEF_LITERAL("proxy-authenticate"),
>>>> +};
>>>=20
>>> Likewise, shouldn't we check whether the request associated to the
>>> response contains a "TE: trailers" or otherwise use no trailer?
>>>=20
>>>=20
>>> I'm a bit confused about what is included-in/overwritten-by the HTTP2
>>> framing and what remains from HTTP1 RFCs/requirements.
>>>=20
>>>=20
>>> Regards,
>>> Yann.
>=20

From dev-return-84637-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 16:26:07 2015
Return-Path: <dev-return-84637-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 983A1187F6
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 16:26:07 +0000 (UTC)
Received: (qmail 94209 invoked by uid 500); 20 Nov 2015 16:26:07 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 94143 invoked by uid 500); 20 Nov 2015 16:26:07 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 94133 invoked by uid 99); 20 Nov 2015 16:26:07 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 16:26:07 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id A5E601A251E
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 16:26:06 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id LsYltYWKj8iN for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 16:25:57 +0000 (UTC)
Received: from mail-qg0-f41.google.com (mail-qg0-f41.google.com [209.85.192.41])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id C7885429AA
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 16:25:56 +0000 (UTC)
Received: by qgeb1 with SMTP id b1so76551760qge.1
        for <dev@httpd.apache.org>; Fri, 20 Nov 2015 08:25:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=/JIQNcn32XLpKTy2j2g3JD80OGVvWII6ZSwBkoccpuM=;
        b=a7Soj9u2z0BEYPHaVOb1+hGNPnYIhK+PcuPUGKv6BpYp5j9iSuiSYcPe8T9oBy4+fd
         ChrGexSPXn0DeiM6cuZOiQ3JXziMwZ4cEjv7j3dB8/iUIbY0od4LP4ZuY1oDwKpYUYm6
         sN/al71x03DCV8fLuI3KRB+R9h4xd7VwSh869tB35gexNHLJi1a7gyoKQnJNWx5R1vun
         uQheGKHzxuWv2ejPq5C36f/S3N9v65jP+0boWS2JRtjBe0X4BDqSHI9ODrJHeIpCsAmB
         snpLocI5HjFzxvtHVKQ72v8EM6H8bjoRe9vZ9xgDOw+aKqwyZXrh7PNr+qjhRihh3pkl
         LeXg==
MIME-Version: 1.0
X-Received: by 10.140.89.201 with SMTP id v67mr14104222qgd.38.1448036750051;
 Fri, 20 Nov 2015 08:25:50 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Fri, 20 Nov 2015 08:25:50 -0800 (PST)
In-Reply-To: <3E06B1AE-4931-404E-9E50-45723B38E462@jaguNET.com>
References: <20151120135833.5D7E83A0234@svn01-us-west.apache.org>
	<CAKQ1sVMSo73XK0Whhx2fR8Y5NH+mLp67VSOFE1Fi5iFkB3vCgA@mail.gmail.com>
	<94EB7D5D-A77F-4C66-AAA4-48E81054969E@greenbytes.de>
	<3E06B1AE-4931-404E-9E50-45723B38E462@jaguNET.com>
Date: Fri, 20 Nov 2015 17:25:50 +0100
Message-ID: <CAKQ1sVNX8J2FU99cjnF-oSD=O_ZoVDF+2g4LZ2RjUrNkGRhj9A@mail.gmail.com>
Subject: Re: svn commit: r1715363 - in /httpd/httpd/trunk/modules/http2:
 h2_request.c h2_response.h h2_session.c h2_stream.c h2_stream.h h2_util.c h2_util.h
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Fri, Nov 20, 2015 at 5:04 PM, Jim Jagielski <jim@jagunet.com> wrote:
> Ugg... I *just* noticed:
>
>         However, header field names MUST be converted to lowercase
>         prior to their encoding in HTTP/2. A request or response
>         containing uppercase header field names MUST be treated as
>         malformed

Gain some cycles (client side), to the detriment of existing apps...
This won't help H1->H2, at least.

From dev-return-84638-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 16:27:32 2015
Return-Path: <dev-return-84638-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3117D1880F
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 16:27:32 +0000 (UTC)
Received: (qmail 98616 invoked by uid 500); 20 Nov 2015 16:27:31 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 98543 invoked by uid 500); 20 Nov 2015 16:27:31 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 98533 invoked by uid 99); 20 Nov 2015 16:27:31 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 16:27:31 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id B8C49C0288
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 16:27:30 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 58uhV-YyYonj for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 16:27:20 +0000 (UTC)
Received: from mail-qk0-f178.google.com (mail-qk0-f178.google.com [209.85.220.178])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id AB97C20C34
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 16:27:19 +0000 (UTC)
Received: by qkfo3 with SMTP id o3so38290605qkf.1
        for <dev@httpd.apache.org>; Fri, 20 Nov 2015 08:27:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=lm3TiIGXKpHw8ycRl87jRdAA5ZL/Zc0iMfflIJTjnIA=;
        b=QR+K3baXefXFjZFLcLq7frPEpkFesxJLaH7//j874/efU9+QQr1MDuGDiVgeJmdJ6B
         EWSHWRTLwBgIpmcXOBcEzMGEmQDNIDj0k3REXyD3nZRX1VSOZ1zqzymGvFhDmp69TR5M
         NowxIfYxT70/uhO/vs6ZdTOQYrQ/EJPmtCaCu3F7PTVYueD+PEyO370Mp+WaiikBAvME
         vf6/gaV60ZoAAXPoUN45ahrx8UqsqmUwrWRLhN0zsEJjq4OW6YK0kIP4i/aEJxI7y4P2
         FJRwROnh74B6XO2MrpSbVuqR0xhLQ0xK3r46k0bKNQ6dw0ezsvY874vMiST85xQmkAfi
         l8PQ==
MIME-Version: 1.0
X-Received: by 10.55.217.27 with SMTP id u27mr14192424qki.55.1448036838958;
 Fri, 20 Nov 2015 08:27:18 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Fri, 20 Nov 2015 08:27:18 -0800 (PST)
In-Reply-To: <21FDE383-40C5-4435-8DE5-5E8020C844DC@greenbytes.de>
References: <20151120135833.5D7E83A0234@svn01-us-west.apache.org>
	<CAKQ1sVMSo73XK0Whhx2fR8Y5NH+mLp67VSOFE1Fi5iFkB3vCgA@mail.gmail.com>
	<94EB7D5D-A77F-4C66-AAA4-48E81054969E@greenbytes.de>
	<3E06B1AE-4931-404E-9E50-45723B38E462@jaguNET.com>
	<21FDE383-40C5-4435-8DE5-5E8020C844DC@greenbytes.de>
Date: Fri, 20 Nov 2015 17:27:18 +0100
Message-ID: <CAKQ1sVPZQczjGTzt0Z78NN37E+wkSzKoxS2pw4Z3cZjtDOhrwg@mail.gmail.com>
Subject: Re: svn commit: r1715363 - in /httpd/httpd/trunk/modules/http2:
 h2_request.c h2_response.h h2_session.c h2_stream.c h2_stream.h h2_util.c h2_util.h
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hmm, "header field names" usually refers to header names.

On Fri, Nov 20, 2015 at 5:12 PM, Stefan Eissing
<stefan.eissing@greenbytes.de> wrote:
> Yes, but I interpret that as the header fields, not any tokens that refer=
 to header names.
>
>> Am 20.11.2015 um 17:04 schrieb Jim Jagielski <jim@jaguNET.com>:
>>
>> Ugg... I *just* noticed:
>>
>>    However, header field names MUST be converted to lowercase
>>    prior to their encoding in HTTP/2. A request or response
>>    containing uppercase header field names MUST be treated as
>>    malformed
>>
>>
>>
>>> On Nov 20, 2015, at 10:44 AM, Stefan Eissing <stefan.eissing@greenbytes=
.de> wrote:
>>>
>>> Most of this is discussed here: https://httpwg.github.io/specs/rfc7540.=
html#HttpHeaders
>>>
>>> Basically HTTP/2 defines its own connection properties, so several thin=
gs which are announced/controlled
>>> by Connection: and other headers do not apply to HTTP/2 connections. So=
, the "Connection:" header itself
>>> was obsoleted.
>>>
>>> mod_http2 has to translate between both worlds a bit and is doing so pr=
obably incompletely so now, so
>>> the discussion about this is very useful.
>>>
>>> There are two conversions for mod_http2 to make:
>>> 1. request headers (H2 -> H1):
>>> 2. response headers (H1 -> H2):
>>>
>>> For 1. certain headers should not arrive at all. If they do, we can eit=
her ignore or generate an error and deny the request. For example "Connecti=
on: ..." should never arrive. Same for "Transfer-Encoding: ". The current i=
mplementation ignores. One could argue for deny.
>>> For 2. certain headers we cannot send out and we need to take proper ac=
tions for that. For example a "TE: deflate" we cannot process like this. He=
re more checks need to be added.
>>>
>>> //Stefan
>>>
>>>> Am 20.11.2015 um 16:25 schrieb Yann Ylavic <ylavic.dev@gmail.com>:
>>>>
>>>> On Fri, Nov 20, 2015 at 2:58 PM,  <icing@apache.org> wrote:
>>>>> Author: icing
>>>>> Date: Fri Nov 20 13:58:32 2015
>>>>> New Revision: 1715363
>>>>>
>>>>> URL: http://svn.apache.org/viewvc?rev=3D1715363&view=3Drev
>>>>> Log:
>>>>> incoming trailers passed into chunked request bodies, outgoing traile=
rs not supported yet
>>>>>
>>>>> Modified:
>>>> []
>>>>>  httpd/httpd/trunk/modules/http2/h2_util.c
>>>> []
>>>>>
>>>>>
>>>>> Modified: httpd/httpd/trunk/modules/http2/h2_util.c
>>>>> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_=
util.c?rev=3D1715363&r1=3D1715362&r2=3D1715363&view=3Ddiff
>>>>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D
>>>>> --- httpd/httpd/trunk/modules/http2/h2_util.c (original)
>>>>> +++ httpd/httpd/trunk/modules/http2/h2_util.c Fri Nov 20 13:58:32 201=
5
>>>> []
>>>>> @@ -879,3 +894,94 @@ h2_ngheader *h2_util_ngheader_make_req(a
>>>>>   return ngh;
>>>>> }
>>>>>
>>>>> +/*******************************************************************=
************
>>>>> + * header HTTP/1 <-> HTTP/2 conversions
>>>>> + *******************************************************************=
***********/
>>>>> +
>>>>> +
>>>>> +typedef struct {
>>>>> +    const char *name;
>>>>> +    size_t len;
>>>>> +} literal;
>>>>> +
>>>>> +#define H2_DEF_LITERAL(n)   { (n), (sizeof(n)-1) }
>>>>> +#define H2_ALEN(a)          (sizeof(a)/sizeof((a)[0]))
>>>>> +#define H2_LIT_ARGS(a)      (a),H2_ALEN(a)
>>>>> +
>>>>> +static literal IgnoredRequestHeaders[] =3D {
>>>>> +    H2_DEF_LITERAL("host"),
>>>>> +    H2_DEF_LITERAL("expect"),
>>>>> +    H2_DEF_LITERAL("upgrade"),
>>>>> +    H2_DEF_LITERAL("connection"),
>>>>> +    H2_DEF_LITERAL("keep-alive"),
>>>>> +    H2_DEF_LITERAL("http2-settings"),
>>>>> +    H2_DEF_LITERAL("proxy-connection"),
>>>>> +    H2_DEF_LITERAL("transfer-encoding"),
>>>>> +};
>>>>
>>>> Shouldn't we also include all the tokens from the Connection header?
>>>> (obviously not feasible with this only blacklist)
>>>>
>>>>
>>>>> +static literal IgnoredRequestTrailers[] =3D { /* Ignore, see rfc7230=
, ch. 4.1.2 */
>>>>> +    H2_DEF_LITERAL("te"),
>>>>> +    H2_DEF_LITERAL("host"),
>>>>> +    H2_DEF_LITERAL("range"),
>>>>> +    H2_DEF_LITERAL("cookie"),
>>>>> +    H2_DEF_LITERAL("expect"),
>>>>> +    H2_DEF_LITERAL("pragma"),
>>>>> +    H2_DEF_LITERAL("max-forwards"),
>>>>> +    H2_DEF_LITERAL("cache-control"),
>>>>> +    H2_DEF_LITERAL("authorization"),
>>>>> +    H2_DEF_LITERAL("content-length"),
>>>>> +    H2_DEF_LITERAL("proxy-authorization"),
>>>>> +};
>>>>
>>>> No notion of announced trailers in HTTP2, with eg. the request header
>>>> "Trailer: token1, token2, ..." (any non-announced trailer would be
>>>> ignored), something we could (always/optionally) enforce?
>>>>
>>>>> +static literal IgnoredResponseTrailers[] =3D {
>>>>> +    H2_DEF_LITERAL("age"),
>>>>> +    H2_DEF_LITERAL("date"),
>>>>> +    H2_DEF_LITERAL("vary"),
>>>>> +    H2_DEF_LITERAL("cookie"),
>>>>> +    H2_DEF_LITERAL("expires"),
>>>>> +    H2_DEF_LITERAL("warning"),
>>>>> +    H2_DEF_LITERAL("location"),
>>>>> +    H2_DEF_LITERAL("retry-after"),
>>>>> +    H2_DEF_LITERAL("cache-control"),
>>>>> +    H2_DEF_LITERAL("www-authenticate"),
>>>>> +    H2_DEF_LITERAL("proxy-authenticate"),
>>>>> +};
>>>>
>>>> Likewise, shouldn't we check whether the request associated to the
>>>> response contains a "TE: trailers" or otherwise use no trailer?
>>>>
>>>>
>>>> I'm a bit confused about what is included-in/overwritten-by the HTTP2
>>>> framing and what remains from HTTP1 RFCs/requirements.
>>>>
>>>>
>>>> Regards,
>>>> Yann.
>>

From dev-return-84639-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 17:00:20 2015
Return-Path: <dev-return-84639-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8B3E918A73
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 17:00:20 +0000 (UTC)
Received: (qmail 99253 invoked by uid 500); 20 Nov 2015 17:00:20 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 99185 invoked by uid 500); 20 Nov 2015 17:00:20 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 99175 invoked by uid 99); 20 Nov 2015 17:00:20 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 17:00:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 957A1180AA3
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 17:00:19 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level:
X-Spam-Status: No, score=0.001 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id PYMXf8yLiuKC for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 17:00:07 +0000 (UTC)
Received: from resqmta-po-05v.sys.comcast.net (resqmta-po-05v.sys.comcast.net [96.114.154.164])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 259582059C
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 17:00:05 +0000 (UTC)
Received: from resomta-po-18v.sys.comcast.net ([96.114.154.242])
	by resqmta-po-05v.sys.comcast.net with comcast
	id jsyw1r0085E3ZMc01szycd; Fri, 20 Nov 2015 16:59:58 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-18v.sys.comcast.net with comcast
	id jszx1r00G2U0RYt01szxu3; Fri, 20 Nov 2015 16:59:58 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715363 - in /httpd/httpd/trunk/modules/http2: h2_request.c h2_response.h h2_session.c h2_stream.c h2_stream.h h2_util.c h2_util.h
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CAKQ1sVNX8J2FU99cjnF-oSD=O_ZoVDF+2g4LZ2RjUrNkGRhj9A@mail.gmail.com>
Date: Fri, 20 Nov 2015 11:59:57 -0500
Content-Transfer-Encoding: 7bit
Message-Id: <250DF0E4-0749-4029-8C36-4977CEFC2B68@jaguNET.com>
References: <20151120135833.5D7E83A0234@svn01-us-west.apache.org> <CAKQ1sVMSo73XK0Whhx2fR8Y5NH+mLp67VSOFE1Fi5iFkB3vCgA@mail.gmail.com> <94EB7D5D-A77F-4C66-AAA4-48E81054969E@greenbytes.de> <3E06B1AE-4931-404E-9E50-45723B38E462@jaguNET.com> <CAKQ1sVNX8J2FU99cjnF-oSD=O_ZoVDF+2g4LZ2RjUrNkGRhj9A@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448038798;
	bh=mSzzL19n5Ehz0Eei+euArEmoai1fUicKJo5XGkn2+28=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=uznRxOw8sK73Xv74XiCfg4XWd0YZUGwLzboGAK/aUzJxS8/4XvWoLWmuEfi4JrYKZ
	 QPaMklTlEX9AB+FdRILvQ7mCMXhmZqGo3rEbaK5MrH7cfVWOL08kPoNKUEa4TR1O5N
	 RdReV7Iz9fRdPm2AY3L4Zmupp+wPtmPSte7ISe9dnjEiV3dVgzrAFx21s0c0Q0brfR
	 cDWYdDO+WE7DuDLcVC9aMz5J7Hp0gxmsbaeW3Im+baI6CfcBgP9lvRGzCia0GL8xlt
	 9Zf3g49OM4ERIZNGs4WfcnaEjWmCxSTKtKFR5MSo0n24Aa9a1A/8xqkZLfekBXFS/H
	 AoStEi5xDFWoA==


> On Nov 20, 2015, at 11:25 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
> 
> On Fri, Nov 20, 2015 at 5:04 PM, Jim Jagielski <jim@jagunet.com> wrote:
>> Ugg... I *just* noticed:
>> 
>>        However, header field names MUST be converted to lowercase
>>        prior to their encoding in HTTP/2. A request or response
>>        containing uppercase header field names MUST be treated as
>>        malformed
> 
> Gain some cycles (client side), to the detriment of existing apps...
> This won't help H1->H2, at least.

Yeah... This just seemed coincidental considering the other
thread about the tokens themselves.

From dev-return-84640-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 17:17:14 2015
Return-Path: <dev-return-84640-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8AD3118B3C
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 17:17:14 +0000 (UTC)
Received: (qmail 43833 invoked by uid 500); 20 Nov 2015 17:17:14 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 43767 invoked by uid 500); 20 Nov 2015 17:17:13 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 43757 invoked by uid 99); 20 Nov 2015 17:17:13 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 17:17:13 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 7F41AC05AC
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 17:17:13 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.652
X-Spam-Level:
X-Spam-Status: No, score=0.652 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id gMbyMoeR1z6k for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 17:17:07 +0000 (UTC)
Received: from resqmta-po-09v.sys.comcast.net (resqmta-po-09v.sys.comcast.net [96.114.154.168])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id AD1A0429AA
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 17:17:06 +0000 (UTC)
Received: from resomta-po-11v.sys.comcast.net ([96.114.154.235])
	by resqmta-po-09v.sys.comcast.net with comcast
	id jtG31r00554zqzk01tH6z5; Fri, 20 Nov 2015 17:17:06 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-11v.sys.comcast.net with comcast
	id jtH51r00C2U0RYt01tH5wY; Fri, 20 Nov 2015 17:17:06 +0000
From: Jim Jagielski <jim@jaguNET.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Subject: strncasecmp
Message-Id: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
Date: Fri, 20 Nov 2015 12:17:05 -0500
To: httpd <dev@httpd.apache.org>
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448039826;
	bh=66iKy+Jhh0GhX2lY1Y7KJYOhv+cWz26exT4RvigRNWg=;
	h=Received:Received:From:Content-Type:Subject:Message-Id:Date:To:
	 Mime-Version;
	b=Y6G2eJ3DxCFP7/3WKtO8QtV5O++t06fhWKwd7BhPp910FXuTR+Fc4g26YhKTmB3Qj
	 ZOHhyc6vTs9ljOBQrvv64P+7O9az0iDzs8KiYoEB5XBDXJfamWwqMT6oB+MkfWzpPN
	 yHSxvSQjXAbssi1iEhiq84qmCfWCLZlJisXcgUxtjVsjWlL71L21ztK872Qxq05TQh
	 /LCKY2RDHn7mZ9iKK8gMV6JGL1w4vcdFjWe0UIebn/kywssTAtndok6hXRX27ab5J3
	 e/b68vPhzNyZ7uF+mjIBdRlnCV0gwm0baTE8+9y96Dxeb3Bsx86nA+CWZMIlbeu5uU
	 M0gMpKIHQKdGQ==

We use str[n]casecmp quite a bit. The rub is that some
platforms use a sensible implementation (such as OSX) which
uses a upper-lowercase map and is v. fast, and others
use a brain-dead version which does an actual tolower() of
each char in the string as it tests. We actually try to
handle this in many cases by doing a switch/case test on the
1st char to fast path the strncasecmp, resulting in ugly code.

This is crazy.

I propose a ap_strncasecmp/ap_strcasecmp which we should use.
Ideally, it would be in apr but no need to wait for that
to happen :)

Unless people have heartburn about this, I will add next week.

From dev-return-84641-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 17:58:23 2015
Return-Path: <dev-return-84641-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5767418C9C
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 17:58:23 +0000 (UTC)
Received: (qmail 44201 invoked by uid 500); 20 Nov 2015 17:58:22 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 44135 invoked by uid 500); 20 Nov 2015 17:58:22 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 44125 invoked by uid 99); 20 Nov 2015 17:58:22 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 17:58:22 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 75B55C13A4
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 17:58:22 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.999
X-Spam-Level: ***
X-Spam-Status: No, score=3.999 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H2=-0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id ZghSIyg3VvBD for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 17:58:21 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp01.smtpout.orange.fr [80.12.242.123])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 91BD720C53
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 17:58:20 +0000 (UTC)
Received: from [127.0.0.1] ([92.140.231.6])
	by mwinf5d02 with ME
	id jtyB1r01508wHE403tyB5Q; Fri, 20 Nov 2015 18:58:12 +0100
X-ME-Helo: [127.0.0.1]
X-ME-Date: Fri, 20 Nov 2015 18:58:12 +0100
X-ME-IP: 92.140.231.6
From: Marion & Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Subject: Re: svn commit: r1715294 - /httpd/httpd/trunk/server/core.c
To: dev@httpd.apache.org
References: <20151119215448.5A9E83A00E5@svn01-us-west.apache.org>
 <CACsi251-SFcdT2Prf43m_kbe1UfxkhwR0cbkx7ody8bVn_=J7Q@mail.gmail.com>
Message-ID: <564F5F32.4020901@wanadoo.fr>
Date: Fri, 20 Nov 2015 18:58:10 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <CACsi251-SFcdT2Prf43m_kbe1UfxkhwR0cbkx7ody8bVn_=J7Q@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------050203050805060406080204"
X-Antivirus: avast! (VPS 151120-0, 20/11/2015), Outbound message
X-Antivirus-Status: Clean

This is a multi-part message in MIME format.
--------------050203050805060406080204
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit

That was I first thought too.

When I looked at r1715255, I noticed:
          const char *conn = apr_table_get(r->headers_in, "Connection");
          if (ap_find_token(r->pool, conn, "upgrade")) {
and looked for inconsistencies.

When digging deeper, I found that "Connection Upgrade" was used in most 
cases in httpd. That's why I reverted.

The only places where I found the lowercase version are:
   core.c:5366:               if (ap_find_token(r->pool, conn, "upgrade")) {
   ssl_engine_kernel.c:1344:  apr_table_mergen(r->headers_out, 
"Connection", "upgrade");
   http2:                     in different places

So, for consistency, it's maybe these places that should be updated???


In any case, I don't think that it would avoid some case folding.
For "Connection upgrade", the only places I've found that process it is 
the one given above (core.c:5366)
In this case, taking advantage of a lower case version would require to 
tweak ap_find_token.
This would, IMHO, add complexity to the code and would be worse for the 
common case (i.e. if what we have does not match what we test, we would 
test twice)


If having upgrade in lower case makes it way, other places should also 
be looked at:
     Upgrade: WebSocket    vs    websocket

CJ


Le 20/11/2015 00:24, William A Rowe Jr a crit :
> It wouldn't hurt to change this though, the tokens are generally 
> represented in lowercase, and this could avoid case folding I suppose.
>
> How often do we see value tokens as upper case from httpd? Let's be 
> consistent although it isn't strictly required.
>
>
>
> On Thu, Nov 19, 2015 at 3:54 PM, <jailletc36@apache.org 
> <mailto:jailletc36@apache.org>> wrote:
>
>     Author: jailletc36
>     Date: Thu Nov 19 21:54:48 2015
>     New Revision: 1715294
>
>     URL: http://svn.apache.org/viewvc?rev=1715294&view=rev
>     Log:
>     Revert r1715289 (Connection header field should use "upgrade"
>     instead of "Upgrade")
>
>     This is case-insensitive, so no need for such a change.
>
>     Modified:
>         httpd/httpd/trunk/server/core.c
>
>     Modified: httpd/httpd/trunk/server/core.c
>     URL:
>     http://svn.apache.org/viewvc/httpd/httpd/trunk/server/core.c?rev=1715294&r1=1715293&r2=1715294&view=diff
>     ==============================================================================
>     --- httpd/httpd/trunk/server/core.c (original)
>     +++ httpd/httpd/trunk/server/core.c Thu Nov 19 21:54:48 2015
>     @@ -5379,7 +5379,7 @@ static int core_upgrade_handler(request_
>                          /* Let the client know what we are upgrading
>     to. */
>                          apr_table_clear(r->headers_out);
>                          apr_table_setn(r->headers_out, "Upgrade",
>     protocol);
>     -                    apr_table_setn(r->headers_out, "Connection",
>     "upgrade");
>     +                    apr_table_setn(r->headers_out, "Connection",
>     "Upgrade");
>
>                          r->status = HTTP_SWITCHING_PROTOCOLS;
>                          r->status_line = ap_get_status_line(r->status);
>     @@ -5404,7 +5404,7 @@ static int core_upgrade_handler(request_
>              if (upgrades && upgrades->nelts > 0) {
>                  char *protocols = apr_array_pstrcat(r->pool,
>     upgrades, ',');
>                  apr_table_setn(r->headers_out, "Upgrade", protocols);
>     -            apr_table_setn(r->headers_out, "Connection", "upgrade");
>     +            apr_table_setn(r->headers_out, "Connection", "Upgrade");
>              }
>          }
>
>
>
>


--------------050203050805060406080204
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: 8bit

<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  </head>
  <body bgcolor="#FFFFFF" text="#000000">
    That was I first thought too.<br>
    <br>
    When I looked at r1715255, I noticed:<br>
     const char *conn = apr_table_get(r-&gt;headers_in,
    "Connection");<br>
     if (ap_find_token(r-&gt;pool, conn, "upgrade")) {<br>
    and looked for inconsistencies.<br>
    <br>
    When digging deeper, I found that "Connection Upgrade" was used in
    most cases in httpd. That's why I reverted.<br>
    <br>
    The only places where I found the lowercase version are:<br>
     core.c:5366:     if (ap_find_token(r-&gt;pool, conn,
    "upgrade")) {<br>
     ssl_engine_kernel.c:1344: apr_table_mergen(r-&gt;headers_out,
    "Connection", "upgrade");<br>
     http2:      in different places<br>
    <br>
    So, for consistency, it's maybe these places that should be
    updated???<br>
    <br>
    <br>
    In any case, I don't think that it would avoid some case folding. <br>
    For "Connection upgrade", the only places I've found that process it
    is the one given above (core.c:5366)<br>
    In this case, taking advantage of a lower case version would require
    to tweak ap_find_token.<br>
    This would, IMHO, add complexity to the code and would be worse for
    the common case (i.e. if what we have does not match what we test,
    we would test twice)<br>
    <br>
    <br>
    If having upgrade in lower case makes it way, other places should
    also be looked at:<br>
     Upgrade: WebSocket vs websocket<br>
    <br>
    CJ<br>
    <br>
    <br>
    <div class="moz-cite-prefix">Le 20/11/2015 00:24, William A Rowe Jr
      a crit:<br>
    </div>
    <blockquote
cite="mid:CACsi251-SFcdT2Prf43m_kbe1UfxkhwR0cbkx7ody8bVn_=J7Q@mail.gmail.com"
      type="cite">
      <div dir="ltr">It wouldn't hurt to change this though, the tokens
        are generally represented in lowercase, and this could avoid
        case folding I suppose.
        <div><br>
        </div>
        <div>How often do we see value tokens as upper case from httpd?
          Let's be consistent although it isn't strictly required.</div>
        <div><br>
        </div>
        <div><br>
          <div class="gmail_extra"><br>
            <div class="gmail_quote">On Thu, Nov 19, 2015 at 3:54 PM, <span
                dir="ltr">&lt;<a moz-do-not-send="true"
                  href="mailto:jailletc36@apache.org" target="_blank">jailletc36@apache.org</a>&gt;</span>
              wrote:<br>
              <blockquote class="gmail_quote" style="margin:0 0 0
                .8ex;border-left:1px #ccc solid;padding-left:1ex">Author:


                jailletc36<br>
                Date: Thu Nov 19 21:54:48 2015<br>
                New Revision: 1715294<br>
                <br>
                URL: <a moz-do-not-send="true"
                  href="http://svn.apache.org/viewvc?rev=1715294&amp;view=rev"
                  rel="noreferrer" target="_blank">http://svn.apache.org/viewvc?rev=1715294&amp;view=rev</a><br>
                Log:<br>
                Revert r1715289 (Connection header field should use
                "upgrade" instead of "Upgrade")<br>
                <br>
                This is case-insensitive, so no need for such a change.<br>
                <br>
                Modified:<br>
                  httpd/httpd/trunk/server/core.c<br>
                <br>
                Modified: httpd/httpd/trunk/server/core.c<br>
                URL: <a moz-do-not-send="true"
href="http://svn.apache.org/viewvc/httpd/httpd/trunk/server/core.c?rev=1715294&amp;r1=1715293&amp;r2=1715294&amp;view=diff"
                  rel="noreferrer" target="_blank">http://svn.apache.org/viewvc/httpd/httpd/trunk/server/core.c?rev=1715294&amp;r1=1715293&amp;r2=1715294&amp;view=diff</a><br>
==============================================================================<br>
                --- httpd/httpd/trunk/server/core.c (original)<br>
                +++ httpd/httpd/trunk/server/core.c Thu Nov 19 21:54:48
                2015<br>
                @@ -5379,7 +5379,7 @@ static int
                core_upgrade_handler(request_<br>
                          /* Let the client know what we are
                upgrading to. */<br>
                          apr_table_clear(r-&gt;headers_out);<br>
                          apr_table_setn(r-&gt;headers_out,
                "Upgrade", protocol);<br>
                -          apr_table_setn(r-&gt;headers_out,
                "Connection", "upgrade");<br>
                +          apr_table_setn(r-&gt;headers_out,
                "Connection", "Upgrade");<br>
                <br>
                          r-&gt;status =
                HTTP_SWITCHING_PROTOCOLS;<br>
                          r-&gt;status_line =
                ap_get_status_line(r-&gt;status);<br>
                @@ -5404,7 +5404,7 @@ static int
                core_upgrade_handler(request_<br>
                    if (upgrades &amp;&amp; upgrades-&gt;nelts &gt;
                0) {<br>
                      char *protocols =
                apr_array_pstrcat(r-&gt;pool, upgrades, ',');<br>
                      apr_table_setn(r-&gt;headers_out,
                "Upgrade", protocols);<br>
                -      apr_table_setn(r-&gt;headers_out,
                "Connection", "upgrade");<br>
                +      apr_table_setn(r-&gt;headers_out,
                "Connection", "Upgrade");<br>
                    }<br>
                  }<br>
                <br>
                <br>
                <br>
              </blockquote>
            </div>
            <br>
          </div>
        </div>
      </div>
    </blockquote>
    <br>
  </body>
</html>

--------------050203050805060406080204--

From dev-return-84642-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 18:02:24 2015
Return-Path: <dev-return-84642-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 06B1118CCC
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 18:02:24 +0000 (UTC)
Received: (qmail 53137 invoked by uid 500); 20 Nov 2015 18:02:23 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 53058 invoked by uid 500); 20 Nov 2015 18:02:23 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 53048 invoked by uid 99); 20 Nov 2015 18:02:23 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 18:02:23 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 1D7611A2AE8
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 18:02:23 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.999
X-Spam-Level:
X-Spam-Status: No, score=0.999 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H2=-0.001]
	autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id eDdQ1T3KnfHZ for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 18:02:22 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp01.smtpout.orange.fr [80.12.242.123])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id B47DA20C8B
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 18:02:21 +0000 (UTC)
Received: from [127.0.0.1] ([92.140.231.6])
	by mwinf5d02 with ME
	id ju2M1r00408wHE403u2MBY; Fri, 20 Nov 2015 19:02:21 +0100
X-ME-Helo: [127.0.0.1]
X-ME-Date: Fri, 20 Nov 2015 19:02:21 +0100
X-ME-IP: 92.140.231.6
Subject: Re: strncasecmp
To: dev@httpd.apache.org
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Message-ID: <564F602C.9080605@wanadoo.fr>
Date: Fri, 20 Nov 2015 19:02:20 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 151120-0, 20/11/2015), Outbound message
X-Antivirus-Status: Clean

+1


Le 20/11/2015 18:17, Jim Jagielski a crit :
> We use str[n]casecmp quite a bit. The rub is that some
> platforms use a sensible implementation (such as OSX) which
> uses a upper-lowercase map and is v. fast, and others
> use a brain-dead version which does an actual tolower() of
> each char in the string as it tests. We actually try to
> handle this in many cases by doing a switch/case test on the
> 1st char to fast path the strncasecmp, resulting in ugly code.
>
> This is crazy.
>
> I propose a ap_strncasecmp/ap_strcasecmp which we should use.
> Ideally, it would be in apr but no need to wait for that
> to happen :)
>
> Unless people have heartburn about this, I will add next week.
>


From dev-return-84643-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 18:03:34 2015
Return-Path: <dev-return-84643-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1150B18CE8
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 18:03:34 +0000 (UTC)
Received: (qmail 59634 invoked by uid 500); 20 Nov 2015 18:03:33 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 59563 invoked by uid 500); 20 Nov 2015 18:03:33 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 59553 invoked by uid 99); 20 Nov 2015 18:03:33 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 18:03:33 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id D7754180AAC
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 18:03:32 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 5MD8BMNg_n19 for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 18:03:27 +0000 (UTC)
Received: from mail-qg0-f50.google.com (mail-qg0-f50.google.com [209.85.192.50])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 1FECF43DFB
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 18:03:27 +0000 (UTC)
Received: by qgec40 with SMTP id c40so78147808qge.2
        for <dev@httpd.apache.org>; Fri, 20 Nov 2015 10:03:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=aFKWvwzJNFLG3Hugi2vOgfglSyIN3oJld/f1hiIsUHQ=;
        b=YRUREYN4zLeavpAKasyq9RCcPkrBVbMTHr3//+LZ3ltL6lA/USIinrUjt1eKqVB5EU
         hvfOFaRYQFM8es8Z3K2S6r99+cGt57ktbdXR6OGTD69a5lSX1vS45zv26QhtDK+zhDV1
         KUIhk8CdQbrKh9R5QjgrZ4zOtqnGQco6+iGryDRl/j+VEYib5WIr4fNeLGCqkphi3m6j
         K1/GTnIOD2PPyfBMnW+yxjBeyJXzhY2lIBfHAC0vaR6qyIOst1DhtSEpWlDQA2Lgu5ve
         ObpW2afbaZ+CabzV5jEon+T3sRs1a4zMfvr0nsCJl+ayWhEz+PpzgxqKL3oJSG3W5ddj
         rgtQ==
MIME-Version: 1.0
X-Received: by 10.140.95.66 with SMTP id h60mr14812436qge.14.1448042601793;
 Fri, 20 Nov 2015 10:03:21 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Fri, 20 Nov 2015 10:03:21 -0800 (PST)
In-Reply-To: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
Date: Fri, 20 Nov 2015 19:03:21 +0100
Message-ID: <CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
Subject: Re: strncasecmp
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

+1

On Fri, Nov 20, 2015 at 6:17 PM, Jim Jagielski <jim@jagunet.com> wrote:
> We use str[n]casecmp quite a bit. The rub is that some
> platforms use a sensible implementation (such as OSX) which
> uses a upper-lowercase map and is v. fast, and others
> use a brain-dead version which does an actual tolower() of
> each char in the string as it tests. We actually try to
> handle this in many cases by doing a switch/case test on the
> 1st char to fast path the strncasecmp, resulting in ugly code.
>
> This is crazy.
>
> I propose a ap_strncasecmp/ap_strcasecmp which we should use.
> Ideally, it would be in apr but no need to wait for that
> to happen :)
>
> Unless people have heartburn about this, I will add next week.

From dev-return-84644-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 18:22:21 2015
Return-Path: <dev-return-84644-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7069C18DEF
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 18:22:21 +0000 (UTC)
Received: (qmail 15539 invoked by uid 500); 20 Nov 2015 18:22:21 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 15464 invoked by uid 500); 20 Nov 2015 18:22:21 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 15454 invoked by uid 99); 20 Nov 2015 18:22:20 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 18:22:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 86C761A08EC
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 18:22:20 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 9yvhT1Z-w0Xj for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 18:22:14 +0000 (UTC)
Received: from mail-ig0-f175.google.com (mail-ig0-f175.google.com [209.85.213.175])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 1B07242B7B
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 18:22:14 +0000 (UTC)
Received: by igcph11 with SMTP id ph11so16300788igc.1
        for <dev@httpd.apache.org>; Fri, 20 Nov 2015 10:22:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Hbbgl+f4WHmhKVyK9cmm7YDAuhj7+1DkhAyCmws/VqA=;
        b=nYIK1J3q7t3xNZWHoKiLgmvBBrIZeNFD7Bc51B5v2N+BRU4BeYGpzK1R3l4xFOmz7D
         b+oNiabJ6WEhGS1ZeWKu37uaG6PE20H6PKEfwvaE5h1Gm+JLrHPFMdLuBli6rDw0mE4x
         bfWWsWg/onn4GLhYH11zwpH1HhXxHVpC/HYNN2oifxM9IcnRbkz2YEeerc6ZlIMhhfhs
         p2e6VPsZcq9DWzAaJnL377GIz2H4sp6WKRz4qIlx7aMQVL8wQRSsD19uoFuW0wE6a0lq
         yCZ8UX+33gqs29mz0vrwZ/mYiV3qBxyVWkV/LEu46gKzLTry10JABqpgf35KzFVFDFXx
         xxNQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=Hbbgl+f4WHmhKVyK9cmm7YDAuhj7+1DkhAyCmws/VqA=;
        b=NljWx9kzS7PfAsMfFhacVpLqv2wNXJYIsLv/rImoADRTzUEiGZRT6CcgBbZsLcXDaW
         QCnqNR2t3ioZVx6TV9UJw+mz5yaHGlGwxWekXoEu10G412GIOlj1l3WG2wI8ClKFZhoj
         2T6LqtAnBbHEGIgHCNoDnbdrO+t6PsDTS4FfWqbsDrtUegsbntFriYqOePjHwgK1vD7A
         e5eDfI3HFyX0GEailiepAE2z+fWB23hmB4MKAuSUc41ETuw8+Tl+PCmAhP4BHTKERcAm
         q5MZLGgblDhM0FuCmYZ38L/7EkYT2mm3sTyjoiakbCccElIQEulXra4UXJM0ozsOfu8p
         Bcpw==
X-Gm-Message-State: ALoCoQnWwBKzQ5JRWYc++zzlrWg7rUMLlXj80ArcDLuzAY6LAjd9hlo9nSOH8xegeWYf6jDkLdpo
MIME-Version: 1.0
X-Received: by 10.50.50.8 with SMTP id y8mr1347917ign.77.1448043732195; Fri,
 20 Nov 2015 10:22:12 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Fri, 20 Nov 2015 10:22:12 -0800 (PST)
In-Reply-To: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
Date: Fri, 20 Nov 2015 12:22:12 -0600
Message-ID: <CACsi250AgQkXSuRk-dkKbpzuvY1Sw_7Y9BqH4t-KSuUCqKOEZA@mail.gmail.com>
Subject: Re: strncasecmp
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=047d7b2ee09546f8590524fcf467

--047d7b2ee09546f8590524fcf467
Content-Type: text/plain; charset=UTF-8

I'm +1 if you are suggesting an ascii-only implementation, and by all means
introduce both an ap_ and apr_ flavor at the same time.

E.g. apr[r]_ascii_str[n]casecmp().

All characters <'A' || >'Z' && <'a || >'z' should be compared by identity.

I'm not sure which OS/X implementation you are referring to, though...
http://www.opensource.apple.com/source/Libc/Libc-1044.40.1/string/FreeBSD/strcasecmp.c

That implementation reminds us that we shouldn't be trusting these local
code page implementations for comparing defined ascii tokens, and many
of our comparisons in httpd are for such purposes.

But since a non-locale based ascii implementation comparing
tolower(x)-tolower(y) devolves to chrtable[x]-chrtable[y], where
tolower is inline, and if we intend to preserve the defined <0 == >0
behavior of the K&R definition, you do need to fold.

Yes the switch/case is ugly, but far more efficient for a larger set of
values/tokens.  One optimization would be iterating the pre-sorted
list of tokens in a binary fashion with a near skip pointer or returning
the elt of that item, but that would quickly become as crufty, subject
to bugs and unmaintainable as the usual switch/case solution.



On Fri, Nov 20, 2015 at 11:17 AM, Jim Jagielski <jim@jagunet.com> wrote:

> We use str[n]casecmp quite a bit. The rub is that some
> platforms use a sensible implementation (such as OSX) which
> uses a upper-lowercase map and is v. fast, and others
> use a brain-dead version which does an actual tolower() of
> each char in the string as it tests. We actually try to
> handle this in many cases by doing a switch/case test on the
> 1st char to fast path the strncasecmp, resulting in ugly code.
>
> This is crazy.
>
> I propose a ap_strncasecmp/ap_strcasecmp which we should use.
> Ideally, it would be in apr but no need to wait for that
> to happen :)
>
> Unless people have heartburn about this, I will add next week.
>

--047d7b2ee09546f8590524fcf467
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">I&#39;m +1 if you are suggesting an ascii-only implementat=
ion, and by all means<div>introduce both an ap_ and apr_ flavor at the same=
 time.<br><div><br></div><div>E.g. apr[r]_ascii_str[n]casecmp().</div><div>=
<br></div><div>All characters &lt;&#39;A&#39; || &gt;&#39;Z&#39; &amp;&amp;=
 &lt;&#39;a || &gt;&#39;z&#39; should be compared by identity.</div><div><b=
r></div><div>I&#39;m not sure which OS/X implementation you are referring t=
o, though...</div><div><a href=3D"http://www.opensource.apple.com/source/Li=
bc/Libc-1044.40.1/string/FreeBSD/strcasecmp.c">http://www.opensource.apple.=
com/source/Libc/Libc-1044.40.1/string/FreeBSD/strcasecmp.c</a><br><div><br>=
</div><div>That implementation reminds us that we shouldn&#39;t be trusting=
 these local</div><div>code page implementations for comparing defined asci=
i tokens, and many=C2=A0</div><div>of our comparisons in httpd are for such=
 purposes.</div><div><br></div><div>But since a non-locale based ascii impl=
ementation comparing</div><div>tolower(x)-tolower(y) devolves to chrtable[x=
]-chrtable[y], where</div><div>tolower is inline, and if we intend to prese=
rve the defined &lt;0 =3D=3D &gt;0=C2=A0</div><div>behavior of the K&amp;R =
definition, you do need to fold.</div><div><br></div><div>Yes the switch/ca=
se is ugly, but far more efficient for a larger set of</div><div>values/tok=
ens.=C2=A0 One optimization would be iterating the pre-sorted</div><div>lis=
t of tokens in a binary fashion with a near skip pointer or returning</div>=
<div>the elt of that item, but that would quickly become as crufty, subject=
=C2=A0</div><div>to bugs and unmaintainable as the usual switch/case soluti=
on.</div><div><br></div><div><br></div><div class=3D"gmail_extra"><br><div =
class=3D"gmail_quote">On Fri, Nov 20, 2015 at 11:17 AM, Jim Jagielski <span=
 dir=3D"ltr">&lt;<a href=3D"mailto:jim@jagunet.com" target=3D"_blank">jim@j=
agunet.com</a>&gt;</span> wrote:<br><blockquote class=3D"gmail_quote" style=
=3D"margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(20=
4,204,204);border-left-style:solid;padding-left:1ex">We use str[n]casecmp q=
uite a bit. The rub is that some<br>
platforms use a sensible implementation (such as OSX) which<br>
uses a upper-lowercase map and is v. fast, and others<br>
use a brain-dead version which does an actual tolower() of<br>
each char in the string as it tests. We actually try to<br>
handle this in many cases by doing a switch/case test on the<br>
1st char to fast path the strncasecmp, resulting in ugly code.<br>
<br>
This is crazy.<br>
<br>
I propose a ap_strncasecmp/ap_strcasecmp which we should use.<br>
Ideally, it would be in apr but no need to wait for that<br>
to happen :)<br>
<br>
Unless people have heartburn about this, I will add next week.<br>
</blockquote></div><br></div></div></div></div>

--047d7b2ee09546f8590524fcf467--

From dev-return-84645-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 18:27:03 2015
Return-Path: <dev-return-84645-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 901E018E2A
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 18:27:03 +0000 (UTC)
Received: (qmail 29495 invoked by uid 500); 20 Nov 2015 18:27:03 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 29423 invoked by uid 500); 20 Nov 2015 18:27:03 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 29413 invoked by uid 99); 20 Nov 2015 18:27:03 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 18:27:03 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 9CA14C1440
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 18:27:02 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.001
X-Spam-Level: ***
X-Spam-Status: No, score=3.001 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id bSey8Le-naaO for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 18:26:52 +0000 (UTC)
Received: from mail-ig0-f169.google.com (mail-ig0-f169.google.com [209.85.213.169])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 3EAFA42B08
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 18:26:52 +0000 (UTC)
Received: by igcto18 with SMTP id to18so17987198igc.0
        for <dev@httpd.apache.org>; Fri, 20 Nov 2015 10:26:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=3uwS/A6Au1xMvGmDPO9zB1yCJEmltB5kLQG6ddjWtAs=;
        b=vI2tThFetwy0eLEB/KNU+bZmT6cHcMt+ABDilLvFrBnGxbzv7cf/G+lCF6UledBluX
         cbQRMtr++HiLQtJkyPvD7CGhVlKTi4pFc4OEYpfCtq6nmVwzJYfIB/1TMWfK5fqyWHJ8
         DERXCWFx47/fxJrEkD94U0G40UOGE8mJEdIWrrEHMbnrFpGvv+GrvZZUk0z1TZDzu37t
         PjxqToQWITko2IdQ4h4HUi9SV9DXaRC/YppAt/pvLOoV3EdeZrKN21Zk38CzZVneW359
         +ApoMtiItS8nZ735ivR6Vry/ixgHD0PIsU848cXumzPHqmfjHQsJuKOj1No9LF29ADIM
         MS1Q==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=3uwS/A6Au1xMvGmDPO9zB1yCJEmltB5kLQG6ddjWtAs=;
        b=Zc05cWac4qaGHGqKWRUW/3ZJcVLoC62OTzWIs8yQ1SuAKkqqnfDkh8Fnhab1q5MDDw
         4RpQpBVAdiF5IdbfcJrT+R2ax5g4LYQq+5o2uD6tfOWAtl8SFiOHj0ip2z9n+z+0skoF
         JLoKw+yGtgTXtyV0kbMRb6NnrVtvrQyRzHQYy6llnvfakquUlXVAFI8w8BKpC440GsDK
         +MYgfkDsiaSzQPDd3UKJRA6RLFGagPloVxhbCSJCMc5M8erUiHQL/ljQCa2Nj+SvetAK
         FkruH2A9DcD/4LlEEyAIA0x7i1l71aQDZXwlxY0FsLXxNax920YggC7TSdqftDZpzwMe
         yhCQ==
X-Gm-Message-State: ALoCoQk7xyPUBn2r+R7DL6VpFre9cv1dLV/x8iDuXNx+jwAYB9Kr6qyyrL4KHdUoD8+CbkwMSJip
MIME-Version: 1.0
X-Received: by 10.50.30.101 with SMTP id r5mr3252411igh.35.1448044010330; Fri,
 20 Nov 2015 10:26:50 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Fri, 20 Nov 2015 10:26:50 -0800 (PST)
In-Reply-To: <CACsi250AgQkXSuRk-dkKbpzuvY1Sw_7Y9BqH4t-KSuUCqKOEZA@mail.gmail.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
	<CACsi250AgQkXSuRk-dkKbpzuvY1Sw_7Y9BqH4t-KSuUCqKOEZA@mail.gmail.com>
Date: Fri, 20 Nov 2015 12:26:50 -0600
Message-ID: <CACsi251zSVQbGYGhZLc3Rp4pRztNPfUShLqyoiTPZ22=0aFywQ@mail.gmail.com>
Subject: Re: strncasecmp
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=047d7bdca97edafc510524fd0423

--047d7bdca97edafc510524fd0423
Content-Type: text/plain; charset=UTF-8

Pay special attention to;

The *strncasecmp*() function shall compare, *while ignoring differences in
case*, not more than *n* bytes from the string pointed to by *s1* to the
string pointed to by *s2*.

In the POSIX locale, *strcasecmp*() and *strncasecmp*() shall *behave as if
the strings had been converted to lowercase* and then a byte comparison
performed. The results are unspecified in other locales.
http://pubs.opengroup.org/onlinepubs/009695399/functions/strcasecmp.html

E.g. 0x5B-0x60 sort before alpha.

If you don't want to honor posix semantics, don't abuse the "strcmp"
concept, but rather name this "streq" or something otherwise less confusing
:-)

On Fri, Nov 20, 2015 at 12:22 PM, William A Rowe Jr <wrowe@rowe-clan.net>
wrote:

> I'm +1 if you are suggesting an ascii-only implementation, and by all means
> introduce both an ap_ and apr_ flavor at the same time.
>
> E.g. apr[r]_ascii_str[n]casecmp().
>
> All characters <'A' || >'Z' && <'a || >'z' should be compared by identity.
>
> I'm not sure which OS/X implementation you are referring to, though...
>
> http://www.opensource.apple.com/source/Libc/Libc-1044.40.1/string/FreeBSD/strcasecmp.c
>
> That implementation reminds us that we shouldn't be trusting these local
> code page implementations for comparing defined ascii tokens, and many
> of our comparisons in httpd are for such purposes.
>
> But since a non-locale based ascii implementation comparing
> tolower(x)-tolower(y) devolves to chrtable[x]-chrtable[y], where
> tolower is inline, and if we intend to preserve the defined <0 == >0
> behavior of the K&R definition, you do need to fold.
>
> Yes the switch/case is ugly, but far more efficient for a larger set of
> values/tokens.  One optimization would be iterating the pre-sorted
> list of tokens in a binary fashion with a near skip pointer or returning
> the elt of that item, but that would quickly become as crufty, subject
> to bugs and unmaintainable as the usual switch/case solution.
>
>
>
> On Fri, Nov 20, 2015 at 11:17 AM, Jim Jagielski <jim@jagunet.com> wrote:
>
>> We use str[n]casecmp quite a bit. The rub is that some
>> platforms use a sensible implementation (such as OSX) which
>> uses a upper-lowercase map and is v. fast, and others
>> use a brain-dead version which does an actual tolower() of
>> each char in the string as it tests. We actually try to
>> handle this in many cases by doing a switch/case test on the
>> 1st char to fast path the strncasecmp, resulting in ugly code.
>>
>> This is crazy.
>>
>> I propose a ap_strncasecmp/ap_strcasecmp which we should use.
>> Ideally, it would be in apr but no need to wait for that
>> to happen :)
>>
>> Unless people have heartburn about this, I will add next week.
>>
>
>

--047d7bdca97edafc510524fd0423
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Pay special attention to;<div><span style=3D"color:rgb(0,0=
,0);font-family:Verdana,Arial,Helvetica,sans-serif;font-size:13.3333px"><br=
></span></div><div><span style=3D"color:rgb(0,0,0);font-family:Verdana,Aria=
l,Helvetica,sans-serif;font-size:13.3333px">The</span><span style=3D"color:=
rgb(0,0,0);font-family:Verdana,Arial,Helvetica,sans-serif;font-size:13.3333=
px">=C2=A0</span><i style=3D"color:rgb(0,0,0);font-family:Verdana,Arial,Hel=
vetica,sans-serif;font-size:13.3333px">strncasecmp</i><span style=3D"color:=
rgb(0,0,0);font-family:Verdana,Arial,Helvetica,sans-serif;font-size:13.3333=
px">() function shall compare, <u>while ignoring differences in case</u>, n=
ot more than</span><span style=3D"color:rgb(0,0,0);font-family:Verdana,Aria=
l,Helvetica,sans-serif;font-size:13.3333px">=C2=A0</span><i style=3D"color:=
rgb(0,0,0);font-family:Verdana,Arial,Helvetica,sans-serif;font-size:13.3333=
px">n</i><span style=3D"color:rgb(0,0,0);font-family:Verdana,Arial,Helvetic=
a,sans-serif;font-size:13.3333px">=C2=A0</span><span style=3D"color:rgb(0,0=
,0);font-family:Verdana,Arial,Helvetica,sans-serif;font-size:13.3333px">byt=
es from the string pointed to by</span><span style=3D"color:rgb(0,0,0);font=
-family:Verdana,Arial,Helvetica,sans-serif;font-size:13.3333px">=C2=A0</spa=
n><i style=3D"color:rgb(0,0,0);font-family:Verdana,Arial,Helvetica,sans-ser=
if;font-size:13.3333px">s1</i><span style=3D"color:rgb(0,0,0);font-family:V=
erdana,Arial,Helvetica,sans-serif;font-size:13.3333px">=C2=A0</span><span s=
tyle=3D"color:rgb(0,0,0);font-family:Verdana,Arial,Helvetica,sans-serif;fon=
t-size:13.3333px">to the string pointed to by</span><span style=3D"color:rg=
b(0,0,0);font-family:Verdana,Arial,Helvetica,sans-serif;font-size:13.3333px=
">=C2=A0</span><i style=3D"color:rgb(0,0,0);font-family:Verdana,Arial,Helve=
tica,sans-serif;font-size:13.3333px">s2</i><span style=3D"color:rgb(0,0,0);=
font-family:Verdana,Arial,Helvetica,sans-serif;font-size:13.3333px">.</span=
><br></div><div><p style=3D"color:rgb(0,0,0);font-family:Verdana,Arial,Helv=
etica,sans-serif;font-size:13.3333px">In the POSIX locale,=C2=A0<i>strcasec=
mp</i>() and=C2=A0<i>strncasecmp</i>() shall <u>behave as if the strings ha=
d been converted to lowercase</u> and then a byte comparison performed. The=
 results are unspecified in other locales.</p><div class=3D"gmail_extra"><a=
 href=3D"http://pubs.opengroup.org/onlinepubs/009695399/functions/strcasecm=
p.html">http://pubs.opengroup.org/onlinepubs/009695399/functions/strcasecmp=
.html</a><br></div><div class=3D"gmail_extra"><br></div><div class=3D"gmail=
_extra">E.g. 0x5B-0x60 sort before alpha.</div><div class=3D"gmail_extra"><=
br></div><div class=3D"gmail_extra">If you don&#39;t want to honor posix se=
mantics, don&#39;t abuse the &quot;strcmp&quot; concept, but rather name th=
is &quot;streq&quot; or something otherwise less confusing :-)</div><div cl=
ass=3D"gmail_extra"><br><div class=3D"gmail_quote">On Fri, Nov 20, 2015 at =
12:22 PM, William A Rowe Jr <span dir=3D"ltr">&lt;<a href=3D"mailto:wrowe@r=
owe-clan.net" target=3D"_blank">wrowe@rowe-clan.net</a>&gt;</span> wrote:<b=
r><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8ex;borde=
r-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid=
;padding-left:1ex"><div dir=3D"ltr">I&#39;m +1 if you are suggesting an asc=
ii-only implementation, and by all means<div>introduce both an ap_ and apr_=
 flavor at the same time.<br><div><br></div><div>E.g. apr[r]_ascii_str[n]ca=
secmp().</div><div><br></div><div>All characters &lt;&#39;A&#39; || &gt;&#3=
9;Z&#39; &amp;&amp; &lt;&#39;a || &gt;&#39;z&#39; should be compared by ide=
ntity.</div><div><br></div><div>I&#39;m not sure which OS/X implementation =
you are referring to, though...</div><div><a href=3D"http://www.opensource.=
apple.com/source/Libc/Libc-1044.40.1/string/FreeBSD/strcasecmp.c" target=3D=
"_blank">http://www.opensource.apple.com/source/Libc/Libc-1044.40.1/string/=
FreeBSD/strcasecmp.c</a><br><div><br></div><div>That implementation reminds=
 us that we shouldn&#39;t be trusting these local</div><div>code page imple=
mentations for comparing defined ascii tokens, and many=C2=A0</div><div>of =
our comparisons in httpd are for such purposes.</div><div><br></div><div>Bu=
t since a non-locale based ascii implementation comparing</div><div>tolower=
(x)-tolower(y) devolves to chrtable[x]-chrtable[y], where</div><div>tolower=
 is inline, and if we intend to preserve the defined &lt;0 =3D=3D &gt;0=C2=
=A0</div><div>behavior of the K&amp;R definition, you do need to fold.</div=
><div><br></div><div>Yes the switch/case is ugly, but far more efficient fo=
r a larger set of</div><div>values/tokens.=C2=A0 One optimization would be =
iterating the pre-sorted</div><div>list of tokens in a binary fashion with =
a near skip pointer or returning</div><div>the elt of that item, but that w=
ould quickly become as crufty, subject=C2=A0</div><div>to bugs and unmainta=
inable as the usual switch/case solution.</div><div><div class=3D"h5"><div>=
<br></div><div><br></div><div class=3D"gmail_extra"><br><div class=3D"gmail=
_quote">On Fri, Nov 20, 2015 at 11:17 AM, Jim Jagielski <span dir=3D"ltr">&=
lt;<a href=3D"mailto:jim@jagunet.com" target=3D"_blank">jim@jagunet.com</a>=
&gt;</span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px=
 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);bor=
der-left-style:solid;padding-left:1ex">We use str[n]casecmp quite a bit. Th=
e rub is that some<br>
platforms use a sensible implementation (such as OSX) which<br>
uses a upper-lowercase map and is v. fast, and others<br>
use a brain-dead version which does an actual tolower() of<br>
each char in the string as it tests. We actually try to<br>
handle this in many cases by doing a switch/case test on the<br>
1st char to fast path the strncasecmp, resulting in ugly code.<br>
<br>
This is crazy.<br>
<br>
I propose a ap_strncasecmp/ap_strcasecmp which we should use.<br>
Ideally, it would be in apr but no need to wait for that<br>
to happen :)<br>
<br>
Unless people have heartburn about this, I will add next week.<br>
</blockquote></div><br></div></div></div></div></div></div>
</blockquote></div><br></div></div></div>

--047d7bdca97edafc510524fd0423--

From dev-return-84646-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 18:37:24 2015
Return-Path: <dev-return-84646-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 43E0818EA6
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 18:37:24 +0000 (UTC)
Received: (qmail 67819 invoked by uid 500); 20 Nov 2015 18:37:23 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 67738 invoked by uid 500); 20 Nov 2015 18:37:23 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 67727 invoked by uid 99); 20 Nov 2015 18:37:23 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 18:37:23 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 550A6C1568
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 18:37:23 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id kLoZw-EPXYSP for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 18:37:22 +0000 (UTC)
Received: from mail-wm0-f52.google.com (mail-wm0-f52.google.com [74.125.82.52])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 8F4272154C
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 18:37:21 +0000 (UTC)
Received: by wmvv187 with SMTP id v187so84339672wmv.1
        for <dev@httpd.apache.org>; Fri, 20 Nov 2015 10:37:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:content-language
         :thread-index;
        bh=dDaYciMp10aou/7Ori/XQkbUlOCfKtUjJVNvOEJbzvU=;
        b=RB/6oPKXNXe6Ti7MUV4eKDkjpeR70wKmfd25XpNGjYXtROYbbFiok80g1vU8Xvcvsm
         wwHYqPR/ljb7j96K4VZoSvywoK4dqCGpmyoZvh2m1h+wMylfxQnf8KVmJfuRuq2ezFSu
         /frRQo5goau3s1J3bCnGOa89crf2jqIl/lsoU=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :content-language:thread-index;
        bh=dDaYciMp10aou/7Ori/XQkbUlOCfKtUjJVNvOEJbzvU=;
        b=ZJ5xiMwmZOFH6jNmA2Lq1cVm8tVQEIPgAUc3s9Tm0eduwm9GBDVJbeENJbcc2ABJJl
         qmS6ezJoMxdFeyci/0PxlM7anW+vlg6ko6gq1FIup9g4OAZS2u0QXuYSPAWgckRSaOb+
         6GqPhKRjf3EVWs+ycnaXlIRkCFfnDu1meh6AjgKL6AkUcBRyIF/H2rP2YtwNeFkCEZoq
         X1bAw2ucSPNc79XNsdZqD2R96hpWahleYbV3lfcKHstaMUZn7iWongZDDKisMjttXSHd
         yEzDzeJVf6gFuNTxykucHff4KLLsg+6xhaSNgZcQofBEbYLo7Mgz2eAJlg3H6ppueexs
         KC+A==
X-Gm-Message-State: ALoCoQnfHEgzhJKju1cLS7rGgmarRb6CUZEk4/fsMSMUCMgF5PXlG4fZlnOZdCc7lAxxSxWrbZQd
X-Received: by 10.28.156.83 with SMTP id f80mr4180999wme.41.1448044640223;
        Fri, 20 Nov 2015 10:37:20 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id t64sm695542wmf.23.2015.11.20.10.37.19
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 20 Nov 2015 10:37:19 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <076f01d12320$7e7d1fb0$7b775f10$@qqmail.nl> <5A92C9AE-2C53-42F3-A4B1-5019A92EF6F6@greenbytes.de>
In-Reply-To: <5A92C9AE-2C53-42F3-A4B1-5019A92EF6F6@greenbytes.de>
Subject: RE: H2 stream dependencies
Date: Fri, 20 Nov 2015 19:37:16 +0100
Message-ID: <00f901d123c2$7c123290$743697b0$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 16.0
Content-Language: nl
Thread-Index: AQHV/QgOI/sUUA2RfgLMoIZiYUV50QF0Ev7lno/ncCA=

> -----Original Message-----
> From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
> Sent: vrijdag 20 november 2015 10:26
> To: dev@httpd.apache.org
> Subject: Re: H2 stream dependencies
>=20
> Bert,
>=20
> interesting and nice to see the progress. You probably could use =
priorities for
> ordering, especially when using the stream dependencies. I am not =
certain,
> however, if this will give you totally deterministic behavior. If =
stream B
> depends on A, usually A will be sent out before B. However, should =
stream A
> become suspended - e.g. unable to progress, either because there is no =
data
> available which some other thread needs to produce, or because the =
flow
> control window has not been updated in time - the server will start =
sending
> data for B.
>=20
> The state of the implementation is:
> 2.4.17: fully implemented priority handling on sending stream data, as
> implemented by the nghttp2 library
> 2.4.18: additionally, streams are scheduled for execution by priority. =
Makes a
> difference when the number of available worker is less than the stream
> queue length, e.g. when der server is under load or only few workers =
are
> available (in prefork, for certain).
>=20
> Another way to influence the ordering is for the client to play with =
the
> stream window sizes. If you give stream A 2^31-1 and stream B 0 until =
you
> have A, then update B, it may also do what you want. If both streams
> produce response bodies...flow only applies to DATA...

I'm currently thinking about combining both approaches... Sending the =
dependencies and (just to be sure) also keep the window low on such a =
stream. In that case only a very small cache should be able to handle =
the delaying in case (somehow) the dependency doesn't do the right =
thing.

In the specific case of Subversion there shouldn't be many cases where =
output is delayed, so I hope this will just work for us. But once we see =
h2 proxies, I'm guessing we will really need the window handling as =
fallback.



In a few of the remaining test failures I see httpd spinning at 100% CPU =
(automatically cooling down after some timout; perhaps if the connection =
is closed). I haven't investigated those, but it could be an httpd =
issue. This usually triggers other test failures for me as I limit the =
amount of workers and threads while testing. I'll follow-up when I know =
more.

	Bert



From dev-return-84647-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 18:45:43 2015
Return-Path: <dev-return-84647-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9A85218F2A
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 18:45:43 +0000 (UTC)
Received: (qmail 4569 invoked by uid 500); 20 Nov 2015 18:45:43 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 4499 invoked by uid 500); 20 Nov 2015 18:45:43 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 4485 invoked by uid 99); 20 Nov 2015 18:45:43 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 18:45:43 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 9B00B1A24CE
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 18:45:42 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 4JBqJ_Skg_0b for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 18:45:41 +0000 (UTC)
Received: from mail-wm0-f49.google.com (mail-wm0-f49.google.com [74.125.82.49])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 6F0BF20FFE
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 18:45:41 +0000 (UTC)
Received: by wmec201 with SMTP id c201so84623711wme.0
        for <dev@httpd.apache.org>; Fri, 20 Nov 2015 10:45:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:content-language
         :thread-index;
        bh=ZQZ+2iEP7WSBGC4CYIaQ19EyhYQlR5o0iibsMojFTq0=;
        b=dSlHtXK0LyDTe+r1ETihe1dt6flplAIrkJ2SXblhcx/zlR5qPtrlROsUf3ZsAeO5m2
         7IuzaGxgsI1ZrE8syG0Hoo/KivLiRflefw9yJy5MJJgKsYY/EINIo3uQe3KR/ExuEk5D
         8ARMJn68OtRJPh/iNulVyjT/fZeznRZY6v7To=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :content-language:thread-index;
        bh=ZQZ+2iEP7WSBGC4CYIaQ19EyhYQlR5o0iibsMojFTq0=;
        b=jJFaRxjIuKi/BQEFPHgwrbfN0N89tkM+7Qm/on7cudmcm/19Ioh4tckj7/OuCFsRuM
         kDc19BCO2W0eQY6IArXfYWxk6Aer7Y56PXqUpG4HbLUPVus49SmQMAZFkle3HXwdp7g5
         N3eyQFOK3+TVuQOLor5h/0BPKpjRZUXnNhXU/dfqdWKmV8jQMErhf2CCcjcxcN3DKdFD
         aZ1GSAZ27wF7zkjq2OME1TPJUhz7EakdJDxMnH1ln+bo8YQz4w/Py0ycTnRwqp+AjiS2
         oFEC3Km1+8b4NkxZdYPVOcXDrPrsbi2hDr/Eu3CmbOVAQybfn/LRW/JZoCcv0+LJLKCi
         FjRg==
X-Gm-Message-State: ALoCoQnipQSMQrr8oaIJMxeOvkVgDtQhEAEwMlWuS6LiHh+mYpe+QYgRfwv/DBKAOH28blFL+i7E
X-Received: by 10.194.84.42 with SMTP id v10mr16400605wjy.116.1448045140116;
        Fri, 20 Nov 2015 10:45:40 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id vu4sm773452wjc.2.2015.11.20.10.45.39
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 20 Nov 2015 10:45:39 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <20151120135833.5D7E83A0234@svn01-us-west.apache.org> <CAKQ1sVMSo73XK0Whhx2fR8Y5NH+mLp67VSOFE1Fi5iFkB3vCgA@mail.gmail.com> <94EB7D5D-A77F-4C66-AAA4-48E81054969E@greenbytes.de> <3E06B1AE-4931-404E-9E50-45723B38E462@jaguNET.com>
In-Reply-To: <3E06B1AE-4931-404E-9E50-45723B38E462@jaguNET.com>
Subject: RE: svn commit: r1715363 - in /httpd/httpd/trunk/modules/http2: h2_request.c h2_response.h h2_session.c h2_stream.c h2_stream.h h2_util.c h2_util.h
Date: Fri, 20 Nov 2015 19:45:35 +0100
Message-ID: <010e01d123c3$a5f2c240$f1d846c0$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 16.0
Content-Language: nl
Thread-Index: AQHGip33Dxb2TsviOekjO8v9pKC+fwFOGLNyAeQKxHoBoLgxH56T2sZQ



> -----Original Message-----
> From: Jim Jagielski [mailto:jim@jaguNET.com]
> Sent: vrijdag 20 november 2015 17:04
> To: dev@httpd.apache.org
> Subject: Re: svn commit: r1715363 - in /httpd/httpd/trunk/modules/http2:
> h2_request.c h2_response.h h2_session.c h2_stream.c h2_stream.h
> h2_util.c h2_util.h
> 
> Ugg... I *just* noticed:
> 
> 	However, header field names MUST be converted to lowercase
> 	prior to their encoding in HTTP/2. A request or response
> 	containing uppercase header field names MUST be treated as
> 	malformed

Nghttp2 handles this just fine.

My early tests with serf showed that some servers didn't enforce the
validation rule, while others (nghttp2 based) did.

	Bert



From dev-return-84648-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 18:53:58 2015
Return-Path: <dev-return-84648-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A68A818F85
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 18:53:58 +0000 (UTC)
Received: (qmail 29791 invoked by uid 500); 20 Nov 2015 18:53:58 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 29728 invoked by uid 500); 20 Nov 2015 18:53:58 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 29715 invoked by uid 99); 20 Nov 2015 18:53:58 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 18:53:58 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id BAA81180A62
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 18:53:57 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id snIR2yofkJdz for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 18:53:49 +0000 (UTC)
Received: from resqmta-po-11v.sys.comcast.net (resqmta-po-11v.sys.comcast.net [96.114.154.170])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 5AC6D2059C
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 18:53:48 +0000 (UTC)
Received: from resomta-po-20v.sys.comcast.net ([96.114.154.244])
	by resqmta-po-11v.sys.comcast.net with comcast
	id jutf1r0045Geu2801utgmL; Fri, 20 Nov 2015 18:53:40 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-20v.sys.comcast.net with comcast
	id jutf1r00Q2U0RYt01utgLK; Fri, 20 Nov 2015 18:53:40 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: strncasecmp
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
Date: Fri, 20 Nov 2015 13:53:39 -0500
Content-Transfer-Encoding: 7bit
Message-Id: <301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com> <CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448045620;
	bh=UH4yvhpu1bpNEpzhMKTvHApEzXreBYiXbZvYtTY2A28=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=wsiZPl4n8MPAjx2Q4NokK2UQbMw285gfprHmnj6tAx3C68gMYjQ9xKXnRHnowvWHg
	 ack+rOOO5sUsM4SU2HZFr8aMX9DM7ZUG9z4tRcF/NU1bjLLMMwc6gVyyJWVJkn6Akk
	 vn7fmYr4x1qs7lnn5pCkk2lu54MIrTEVxQ/fs7kvEyfzFYjNuUaK2DVQIbbgmSL4Uf
	 oPozRBCH9l0Lqx4RVWoeNWrqPVppnol7v/X3/FmynZlj0YHpfzi5mVv07/CZLm4f3A
	 gmJgvEh5a+daOtmDOX3HY37lQjN+h6hT6aJZa+hz2JSDYz18SIIMjmlEFVqFBnEhQH
	 /CnNZzxc80K6g==

Implemented in r1715401

If people want to nit-pick about naming and wish to
rename it to something else, be my guest.

> On Nov 20, 2015, at 1:03 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
> 
> +1
> 
> On Fri, Nov 20, 2015 at 6:17 PM, Jim Jagielski <jim@jagunet.com> wrote:
>> We use str[n]casecmp quite a bit. The rub is that some
>> platforms use a sensible implementation (such as OSX) which
>> uses a upper-lowercase map and is v. fast, and others
>> use a brain-dead version which does an actual tolower() of
>> each char in the string as it tests. We actually try to
>> handle this in many cases by doing a switch/case test on the
>> 1st char to fast path the strncasecmp, resulting in ugly code.
>> 
>> This is crazy.
>> 
>> I propose a ap_strncasecmp/ap_strcasecmp which we should use.
>> Ideally, it would be in apr but no need to wait for that
>> to happen :)
>> 
>> Unless people have heartburn about this, I will add next week.


From dev-return-84649-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 19:50:58 2015
Return-Path: <dev-return-84649-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1378718349
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 19:50:58 +0000 (UTC)
Received: (qmail 27246 invoked by uid 500); 20 Nov 2015 19:50:57 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 27172 invoked by uid 500); 20 Nov 2015 19:50:57 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 27160 invoked by uid 99); 20 Nov 2015 19:50:57 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 19:50:57 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 377C6C0288
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 19:50:57 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0
X-Spam-Level:
X-Spam-Status: No, score=0 tagged_above=-999 required=6.31 tests=[none]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id ToGmSwQe-XQR for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 19:50:42 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp07.smtpout.orange.fr [80.12.242.129])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 94E6420C41
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 19:50:41 +0000 (UTC)
Received: from [127.0.0.1] ([92.140.231.6])
	by mwinf5d65 with ME
	id jvqY1r00808wHE403vqYeE; Fri, 20 Nov 2015 20:50:32 +0100
X-ME-Helo: [127.0.0.1]
X-ME-Date: Fri, 20 Nov 2015 20:50:32 +0100
X-ME-IP: 92.140.231.6
Subject: Re: strncasecmp
To: dev@httpd.apache.org
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Message-ID: <564F7987.2000808@wanadoo.fr>
Date: Fri, 20 Nov 2015 20:50:31 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 151120-0, 20/11/2015), Outbound message
X-Antivirus-Status: Clean

Le 20/11/2015 18:17, Jim Jagielski a crit :
> Ideally, it would be in apr
+1
This could also be even more interesting, because of apr_table_ functions.

CJ


From dev-return-84650-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 19:51:54 2015
Return-Path: <dev-return-84650-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9298D1835D
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 19:51:54 +0000 (UTC)
Received: (qmail 34779 invoked by uid 500); 20 Nov 2015 19:51:54 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 34717 invoked by uid 500); 20 Nov 2015 19:51:54 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 34707 invoked by uid 99); 20 Nov 2015 19:51:53 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 19:51:53 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 85F901A21D5
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 19:51:53 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.001
X-Spam-Level: ***
X-Spam-Status: No, score=3.001 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id CSF1zGQLE6Vv for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 19:51:39 +0000 (UTC)
Received: from mail-io0-f171.google.com (mail-io0-f171.google.com [209.85.223.171])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 9589620C41
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 19:51:39 +0000 (UTC)
Received: by ioir85 with SMTP id r85so134562336ioi.1
        for <dev@httpd.apache.org>; Fri, 20 Nov 2015 11:51:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=8pllCKgLNZjNb+9H66B6khxkpZOialYNWFLyxxn6fjw=;
        b=qYmCeI/x4++pbMWUC6xHztILPg2KuDjYsJ19feDsi0Dx2BLZbAujO4mphIayIhxXYZ
         gHVKUXsBjQ6nrIeAtOOf6H7lvRHM4FFgqitPpIe2sRgmqOWJh6ahXmcujhsMONQ1ouFa
         YsuTToQ90VQpZa5XnU5ZmLcsrHs/W5NoPiDu3D43vi8n+nvnUjnaPKaCNiJN4iOf/1Ij
         ZJm8G1GJ8izZGsYN/ik8AUcbd4ch6Ke8vQo1knNm53ZcWTVJcZn9RT3DsBEPJcXbWP4p
         YbKR45ZdSVxyvJT93sOs8a1XwsY0tj5xv/n7DmVoj8Yu22e674x6R1I+IAcuR3Kwah5F
         Dyfg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=8pllCKgLNZjNb+9H66B6khxkpZOialYNWFLyxxn6fjw=;
        b=knuQOYvIQiljTDfeUMBvDi8rs0yVnFoi4kuJhMoR38PXym+faOQmcFnq6gJ9EhrJv5
         ++VHCdmfJ72rlWZq1CNNzAL1SbaMJftYAq3XFSkZ0XJjUoTT2c2cElOs78wVVs0/6bL9
         sp+40TnRaSXGjpKhJ3sxZCdMGKsW3Zn03TuLmfSneCeM0wzk8aqxuAWTir4cm1+cG/A8
         N/ay+6+CEfREyJSmHN3fGj/VeDL3KZVKDwESRmRm9hsd9s/FOQHHi0oGpr3XJFOuKzGn
         aKnt/lXlI83S1Z6ZZcGAwTmO8xcCDOgeeyFkBxnh6dnZBqZ/Jffz5ilTu9LZzDCuX9m7
         lO5A==
X-Gm-Message-State: ALoCoQlDbOJ3TWfZxl6h/gcghtPBAlZ/IO20oTCCZwuUGVNVvgeTn7p5tshzlL3E4wjlB46rzd4l
MIME-Version: 1.0
X-Received: by 10.107.10.66 with SMTP id u63mr14608574ioi.86.1448049098722;
 Fri, 20 Nov 2015 11:51:38 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Fri, 20 Nov 2015 11:51:38 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Fri, 20 Nov 2015 11:51:38 -0800 (PST)
In-Reply-To: <301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
	<CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
	<301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
Date: Fri, 20 Nov 2015 13:51:38 -0600
Message-ID: <CACsi2511QBBzXkpRPPza+9B6d0KPggFCnQQL39hkZfnz0qC2Tg@mail.gmail.com>
Subject: Re: strncasecmp
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a113f93be259b730524fe341d

--001a113f93be259b730524fe341d
Content-Type: text/plain; charset=UTF-8

At first glance this seems to meet the POSIX definition in the POSIX
context.  Just want to be careful about using this for non-posix
applications and your doxygen seems to cover this.  Looks good to me.
Implemented in r1715401

If people want to nit-pick about naming and wish to
rename it to something else, be my guest.

> On Nov 20, 2015, at 1:03 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>
> +1
>
> On Fri, Nov 20, 2015 at 6:17 PM, Jim Jagielski <jim@jagunet.com> wrote:
>> We use str[n]casecmp quite a bit. The rub is that some
>> platforms use a sensible implementation (such as OSX) which
>> uses a upper-lowercase map and is v. fast, and others
>> use a brain-dead version which does an actual tolower() of
>> each char in the string as it tests. We actually try to
>> handle this in many cases by doing a switch/case test on the
>> 1st char to fast path the strncasecmp, resulting in ugly code.
>>
>> This is crazy.
>>
>> I propose a ap_strncasecmp/ap_strcasecmp which we should use.
>> Ideally, it would be in apr but no need to wait for that
>> to happen :)
>>
>> Unless people have heartburn about this, I will add next week.

--001a113f93be259b730524fe341d
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<p dir=3D"ltr">At first glance this seems to meet the POSIX definition in t=
he POSIX context.=C2=A0 Just want to be careful about using this for non-po=
six applications and your doxygen seems to cover this.=C2=A0 Looks good to =
me.</p>
<div class=3D"gmail_quot&lt;blockquote class=3D" style=3D"margin:0 0 0 .8ex=
;border-left:1px #ccc solid;padding-left:1ex">Implemented in r1715401<br>
<br>
If people want to nit-pick about naming and wish to<br>
rename it to something else, be my guest.<br>
<br>
&gt; On Nov 20, 2015, at 1:03 PM, Yann Ylavic &lt;<a href=3D"mailto:ylavic.=
dev@gmail.com">ylavic.dev@gmail.com</a>&gt; wrote:<br>
&gt;<br>
&gt; +1<br>
&gt;<br>
&gt; On Fri, Nov 20, 2015 at 6:17 PM, Jim Jagielski &lt;<a href=3D"mailto:j=
im@jagunet.com">jim@jagunet.com</a>&gt; wrote:<br>
&gt;&gt; We use str[n]casecmp quite a bit. The rub is that some<br>
&gt;&gt; platforms use a sensible implementation (such as OSX) which<br>
&gt;&gt; uses a upper-lowercase map and is v. fast, and others<br>
&gt;&gt; use a brain-dead version which does an actual tolower() of<br>
&gt;&gt; each char in the string as it tests. We actually try to<br>
&gt;&gt; handle this in many cases by doing a switch/case test on the<br>
&gt;&gt; 1st char to fast path the strncasecmp, resulting in ugly code.<br>
&gt;&gt;<br>
&gt;&gt; This is crazy.<br>
&gt;&gt;<br>
&gt;&gt; I propose a ap_strncasecmp/ap_strcasecmp which we should use.<br>
&gt;&gt; Ideally, it would be in apr but no need to wait for that<br>
&gt;&gt; to happen :)<br>
&gt;&gt;<br>
&gt;&gt; Unless people have heartburn about this, I will add next week.<br>
<br>
</div>

--001a113f93be259b730524fe341d--

From dev-return-84651-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 22:18:06 2015
Return-Path: <dev-return-84651-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 558D018AEC
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 22:18:06 +0000 (UTC)
Received: (qmail 99276 invoked by uid 500); 20 Nov 2015 22:18:04 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 99207 invoked by uid 500); 20 Nov 2015 22:18:04 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 99197 invoked by uid 99); 20 Nov 2015 22:18:04 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 22:18:04 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 5ADA3C4F62
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 22:18:04 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id YkmikEYz_gPo for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 22:18:03 +0000 (UTC)
Received: from mail-qg0-f45.google.com (mail-qg0-f45.google.com [209.85.192.45])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 08908211D3
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 22:18:03 +0000 (UTC)
Received: by qgeb1 with SMTP id b1so82643947qge.1
        for <dev@httpd.apache.org>; Fri, 20 Nov 2015 14:17:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=hJ8QfZZR7EbUgQ3oRiF7bwloLRoReYUCIQaTdHVRDcc=;
        b=Xq+xXwF84T3XDoo+Wq7V7AKOYosIO3QIxLx7sb6j3HMltq6HIpzESsRmXi8Yfp/guw
         lYXDdbjlaypuJb4CqAE4zciURBTSJzcFTHolc6F3ULkMHmziPEm6piOA0tXCMVrDhZ8D
         b58es2kVXBIKyIpNW0k3D/8ZLlrQwmUFfajN1KElRrrfKEgpbQtp/w6HM2MqkdADjeZb
         bhev7FlLvtDnWF2DJvxE0xoX7mUZysbG7N1LWRFH5TDdAqELZO/TsHirEGaMScggf8SV
         /cd2AgLLUvlOf/tkKLL6vnOwLdNnFT8qE4rAmnZy84FZGsLncSSFUi7ECgrKdYlUjaC2
         A+xw==
MIME-Version: 1.0
X-Received: by 10.140.16.131 with SMTP id 3mr15476740qgb.51.1448057876375;
 Fri, 20 Nov 2015 14:17:56 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Fri, 20 Nov 2015 14:17:56 -0800 (PST)
In-Reply-To: <20151120184939.8483A3A075E@svn01-us-west.apache.org>
References: <20151120184939.8483A3A075E@svn01-us-west.apache.org>
Date: Fri, 20 Nov 2015 23:17:56 +0100
Message-ID: <CAKQ1sVMB1tNwcx7fcxWV-rdUK9gXFFA8M1GSsSktJ0VpY3qfNg@mail.gmail.com>
Subject: Re: svn commit: r1715401 - in /httpd/httpd/trunk: include/ap_mmn.h
 include/httpd.h server/util.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Fri, Nov 20, 2015 at 7:49 PM,  <jim@apache.org> wrote:
> Author: jim
> Date: Fri Nov 20 18:49:38 2015
> New Revision: 1715401
>
> URL: http://svn.apache.org/viewvc?rev=1715401&view=rev
> Log:
> Provide our own impl of str[n]casecmp()
>
> This simply provides it. Next step is to change all uses of
> str[n]casecmp to ap_str[n]casecmp and *then* remove those silly
> logic paths where we check the 1st char of a string before
> we do the strcasecmp (since this is no longer expensive).
>
> Modified:
[]
>     httpd/httpd/trunk/server/util.c
[]
> +AP_DECLARE(int) ap_strncasecmp(const char *s1, const char *s2, apr_size_t n)
> +{
> +    const unsigned char *ps1 = (const unsigned char *) s1;
> +    const unsigned char *ps2 = (const unsigned char *) s2;
> +    if (n) {
> +        do {
> +            if (ucharmap[*ps1] != ucharmap[*ps2++]) {
> +                return (ucharmap[*ps1] - ucharmap[*--ps2]);
> +            }
> +            if (*ps1++ == '\0') {
> +                /* we know both end here */
> +                return (0);
> +            }
> +        } while (!--n);

while (--n) probably.

> +    }
> +    return (0);
> +}
>
>

From dev-return-84652-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 20 22:29:04 2015
Return-Path: <dev-return-84652-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8B13718B71
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 20 Nov 2015 22:29:04 +0000 (UTC)
Received: (qmail 26464 invoked by uid 500); 20 Nov 2015 22:29:04 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 26392 invoked by uid 500); 20 Nov 2015 22:29:04 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 26382 invoked by uid 99); 20 Nov 2015 22:29:04 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Nov 2015 22:29:04 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id A8B0C1A259A
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 22:29:03 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id wApjn5wRad6U for <dev@httpd.apache.org>;
	Fri, 20 Nov 2015 22:29:03 +0000 (UTC)
Received: from mail-qg0-f52.google.com (mail-qg0-f52.google.com [209.85.192.52])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 394EA215DD
	for <dev@httpd.apache.org>; Fri, 20 Nov 2015 22:29:02 +0000 (UTC)
Received: by qgeb1 with SMTP id b1so82787006qge.1
        for <dev@httpd.apache.org>; Fri, 20 Nov 2015 14:29:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=cEQ0iyRBor/vcCtkY8cnvZDFx3eeqo3ztOVqzDdqIn4=;
        b=yIPyABwbwINy9uevDA/XV22gg+cX46/9TZ8hwXdfF6DatHLX05O6sgn9QmHqQCb+Ez
         nuBNNwbFUSTC3d8EcepRJVDhf2AxSXLzP8j8EvXfJCKqmxwu1oi69Vw2fmwEfaEwF2//
         BdOAtqFMT4sNYBzJB9Ad0yn3HmQpwflHuSW5REP49jXtOt4kXUfmQ2Rg/g6R8bd9roxi
         EGSL3U+HLgktGap+rIH5urvfTuR1HGmaOJFHfPieYxrGdKnF+t+5ELR6pau/NANquoAY
         5VkT00bIhCQmQOjjxA6kuJxztpo+5ATQQsBYSQDPBo+yaz3zbP6pGIJe9lgwJdUY+hQW
         XKbQ==
MIME-Version: 1.0
X-Received: by 10.140.216.87 with SMTP id m84mr16408211qhb.97.1448058540990;
 Fri, 20 Nov 2015 14:29:00 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Fri, 20 Nov 2015 14:29:00 -0800 (PST)
In-Reply-To: <CAKQ1sVMB1tNwcx7fcxWV-rdUK9gXFFA8M1GSsSktJ0VpY3qfNg@mail.gmail.com>
References: <20151120184939.8483A3A075E@svn01-us-west.apache.org>
	<CAKQ1sVMB1tNwcx7fcxWV-rdUK9gXFFA8M1GSsSktJ0VpY3qfNg@mail.gmail.com>
Date: Fri, 20 Nov 2015 23:29:00 +0100
Message-ID: <CAKQ1sVMJ--ndHgz5KsCmSt=NPhWASfbD5-qo5XhOwko=KOPmGA@mail.gmail.com>
Subject: Re: svn commit: r1715401 - in /httpd/httpd/trunk: include/ap_mmn.h
 include/httpd.h server/util.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

Alternatively, a single/simpler while (n--){} would work too.


On Fri, Nov 20, 2015 at 11:17 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
> On Fri, Nov 20, 2015 at 7:49 PM,  <jim@apache.org> wrote:
>> Author: jim
>> Date: Fri Nov 20 18:49:38 2015
>> New Revision: 1715401
>>
>> URL: http://svn.apache.org/viewvc?rev=1715401&view=rev
>> Log:
>> Provide our own impl of str[n]casecmp()
>>
>> This simply provides it. Next step is to change all uses of
>> str[n]casecmp to ap_str[n]casecmp and *then* remove those silly
>> logic paths where we check the 1st char of a string before
>> we do the strcasecmp (since this is no longer expensive).
>>
>> Modified:
> []
>>     httpd/httpd/trunk/server/util.c
> []
>> +AP_DECLARE(int) ap_strncasecmp(const char *s1, const char *s2, apr_size_t n)
>> +{
>> +    const unsigned char *ps1 = (const unsigned char *) s1;
>> +    const unsigned char *ps2 = (const unsigned char *) s2;
>> +    if (n) {
>> +        do {
>> +            if (ucharmap[*ps1] != ucharmap[*ps2++]) {
>> +                return (ucharmap[*ps1] - ucharmap[*--ps2]);
>> +            }
>> +            if (*ps1++ == '\0') {
>> +                /* we know both end here */
>> +                return (0);
>> +            }
>> +        } while (!--n);
>
> while (--n) probably.
>
>> +    }
>> +    return (0);
>> +}
>>
>>

From dev-return-84653-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 21 09:14:50 2015
Return-Path: <dev-return-84653-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F1C8418CDC
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 21 Nov 2015 09:14:49 +0000 (UTC)
Received: (qmail 14398 invoked by uid 500); 21 Nov 2015 09:14:49 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 14314 invoked by uid 500); 21 Nov 2015 09:14:49 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 14304 invoked by uid 99); 21 Nov 2015 09:14:49 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Nov 2015 09:14:49 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 275FFC151E
	for <dev@httpd.apache.org>; Sat, 21 Nov 2015 09:14:49 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.553
X-Spam-Level:
X-Spam-Status: No, score=-0.553 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.554, SPF_PASS=-0.001,
	UNPARSEABLE_RELAY=0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id EejCj2QjCwzl for <dev@httpd.apache.org>;
	Sat, 21 Nov 2015 09:14:43 +0000 (UTC)
Received: from mail.ausics.net (valhalla.ausics.net [27.33.160.23])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 8551C43DFB
	for <dev@httpd.apache.org>; Sat, 21 Nov 2015 09:14:42 +0000 (UTC)
Received: from mail.ausics.net (valhalla.ausics.net [10.10.0.10])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.ausics.net (Postfix) with ESMTPSA id 3DBFDC0E083
	for <dev@httpd.apache.org>; Sat, 21 Nov 2015 19:14:32 +1000 (AEST)
Received: from zAlmi8anDCce6zFit+AdIrADwjJv+vugsu8ZI6bVjAQ=
 (6GsGxzNzK3zK00KfQayEQpA29K7cf2gl)
 by mail.ausics.net
 with HTTP (HTTP/1.1 POST); Sat, 21 Nov 2015 19:14:32 +1000
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII;
 format=flowed
Content-Transfer-Encoding: 7bit
Date: Sat, 21 Nov 2015 19:14:32 +1000
From: Noel Butler <noel.butler@ausics.net>
To: dev@httpd.apache.org
Subject: Re: 2.4.18?
In-Reply-To: <99B78A9A-41F0-4BA3-91E4-84EDBCC9D50E@jaguNET.com>
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net>
 <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com>
 <139befce90c51c313f7b512915241f71@ausics.net>
 <BCBFC8FF-EE49-4E2F-8783-69DECEB025EF@greenbytes.de>
 <d4d0ad850c6aa9f3b5186929bad23d71@ausics.net>
 <564B1E9F.9040100@thelounge.net>
 <46dd21388865d4a6b41e72cf00cd0303@ausics.net>
 <99B78A9A-41F0-4BA3-91E4-84EDBCC9D50E@jaguNET.com>
Message-ID: <747296e72c395f02235c1067711a6d56@ausics.net>
X-Sender: noel.butler@ausics.net
User-Agent: Roundcube Webmail

On 19/11/2015 01:43, Jim Jagielski wrote:
> If you don't need the stuff in 2.4.18 and 2.4.17 is fine
> for you then there is no need to upgrade...

I certainly wont be, nor will many others from what I've heard, anyway 
close to holidays now so wont be doing much anyway.



-- 
If you have the urge to reply to all rather than reply to list, you best
read  http://members.ausics.net/qwerty/

From dev-return-84654-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 21 09:18:35 2015
Return-Path: <dev-return-84654-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 82E5D18CF5
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 21 Nov 2015 09:18:35 +0000 (UTC)
Received: (qmail 17877 invoked by uid 500); 21 Nov 2015 09:18:35 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 17806 invoked by uid 500); 21 Nov 2015 09:18:35 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 17795 invoked by uid 99); 21 Nov 2015 09:18:35 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Nov 2015 09:18:35 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 829A8C048F
	for <dev@httpd.apache.org>; Sat, 21 Nov 2015 09:18:34 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.553
X-Spam-Level:
X-Spam-Status: No, score=-0.553 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.554, SPF_PASS=-0.001,
	UNPARSEABLE_RELAY=0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id BoconZ64LDt3 for <dev@httpd.apache.org>;
	Sat, 21 Nov 2015 09:18:29 +0000 (UTC)
Received: from mail.ausics.net (valhalla.ausics.net [27.33.160.23])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 9C4DE2026D
	for <dev@httpd.apache.org>; Sat, 21 Nov 2015 09:18:28 +0000 (UTC)
Received: from mail.ausics.net (valhalla.ausics.net [10.10.0.10])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.ausics.net (Postfix) with ESMTPSA id 0C5EBC0E08D
	for <dev@httpd.apache.org>; Sat, 21 Nov 2015 19:18:21 +1000 (AEST)
Received: from WfCLh+s8glvBuJWh0i7k5DH7HCzXYt7xGc05vELhFqs=
 (tMMw8bMIjMFEg0dnmycgsfPB+BfmeN84)
 by mail.ausics.net
 with HTTP (HTTP/1.1 POST); Sat, 21 Nov 2015 19:18:20 +1000
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII;
 format=flowed
Content-Transfer-Encoding: 7bit
Date: Sat, 21 Nov 2015 19:18:20 +1000
From: Noel Butler <noel.butler@ausics.net>
To: dev@httpd.apache.org
Subject: Re: 2.4.18?
In-Reply-To: <564C4952.5030008@thelounge.net>
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net>
 <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com>
 <139befce90c51c313f7b512915241f71@ausics.net>
 <BCBFC8FF-EE49-4E2F-8783-69DECEB025EF@greenbytes.de>
 <d4d0ad850c6aa9f3b5186929bad23d71@ausics.net>
 <564B1E9F.9040100@thelounge.net>
 <46dd21388865d4a6b41e72cf00cd0303@ausics.net>
 <564C4952.5030008@thelounge.net>
Message-ID: <7b05bc75238ea59b1da1e6e5e475c029@ausics.net>
X-Sender: noel.butler@ausics.net
User-Agent: Roundcube Webmail

On 18/11/2015 19:48, Reindl Harald wrote:
> Am 18.11.2015 um 08:16 schrieb Noel Butler:
>> On 17/11/2015 22:33, Reindl Harald wrote:
>>> 
>>> 5 or 6 bloody weeks is a month - so what's the problem?
>>> any other software but httpd is allowed to have monthly updates?
>>> 
>>> "I can accept" - seriously - you can just ignore a release when you
>>> think it's not important for you but i don't get why anybody else
>>> should wait for available non-security bugfixes just because you feel
>>> like someone enforces you to update your server
>> 
>> your problem harry as usual is you dont comprehend whats said, because 
>> i
>> never once said it was OK for that other software, in fact its made
>> clear otherwise, but I'll grant you your comments based only on the 
>> fact
>> you have little comprehension of english and rely on translators.
> 
> no i don't rely on a translator, i just read you other posts too

oh  really this is not what you told us before, when you played hard dun 
by and getting kicked off lists and RBL'd - I probably still have the 
email, ahh thanks, so it confirms mew you are full of shit and your 
blacklisting  remains warranted :)



> before reply and one part of that was "take phpmyadmin as one example,
> most admins I know gave up updating it, because there were updates
> every week, sometimes  every few days, Marc has accepted this is a
> serious problem and unless a critical security bug is found, normal
> bug fixes releases will be only once per month if need be"
> 
> and here we talk about that *one month* - so what's the problem?
> 
> anyways, if you can't cope with monthly updates and in doubt decide if
> they are relevant at all hire somebody who can cope or just install a
> LTS distribution only delivering critical bugfixes

i have better things to do with my time, like laugh at idiots like you


-- 
If you have the urge to reply to all rather than reply to list, you best
read  http://members.ausics.net/qwerty/

From dev-return-84655-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 21 09:22:53 2015
Return-Path: <dev-return-84655-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4654018D16
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 21 Nov 2015 09:22:53 +0000 (UTC)
Received: (qmail 21846 invoked by uid 500); 21 Nov 2015 09:22:52 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 21779 invoked by uid 500); 21 Nov 2015 09:22:52 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 21770 invoked by uid 99); 21 Nov 2015 09:22:52 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Nov 2015 09:22:52 +0000
Received: from [192.168.1.36] (2804ds5-soeb.0.fullrate.dk [90.184.204.23])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPSA id 4DCCF1A0338
	for <dev@httpd.apache.org>; Sat, 21 Nov 2015 09:22:51 +0000 (UTC)
Subject: Re: 2.4.18?
To: dev@httpd.apache.org
References: <D4F755D4-C65E-4217-95D5-320F84D8E04B@cpanel.net>
 <E6442FAB-C1DE-4768-950E-DA2084B0A583@jaguNET.com>
 <139befce90c51c313f7b512915241f71@ausics.net>
 <BCBFC8FF-EE49-4E2F-8783-69DECEB025EF@greenbytes.de>
 <d4d0ad850c6aa9f3b5186929bad23d71@ausics.net>
 <564B1E9F.9040100@thelounge.net>
 <46dd21388865d4a6b41e72cf00cd0303@ausics.net>
 <564C4952.5030008@thelounge.net>
 <7b05bc75238ea59b1da1e6e5e475c029@ausics.net>
From: Daniel Gruno <humbedooh@apache.org>
Message-ID: <565037E5.1000803@apache.org>
Date: Sat, 21 Nov 2015 10:22:45 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <7b05bc75238ea59b1da1e6e5e475c029@ausics.net>
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: 7bit

I don't care who the author is - if people keep up with toxic language
like what has been used in this thread, they will be removed from the
lists without any further warning.

Consider this your first, last and only warning. I trust I don't have to
go into details about who said what here.

With regards,
Daniel.

From dev-return-84656-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 21 13:55:09 2015
Return-Path: <dev-return-84656-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 663941823A
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 21 Nov 2015 13:55:09 +0000 (UTC)
Received: (qmail 61637 invoked by uid 500); 21 Nov 2015 13:55:08 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 61575 invoked by uid 500); 21 Nov 2015 13:55:08 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 61565 invoked by uid 99); 21 Nov 2015 13:55:08 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Nov 2015 13:55:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 06F361A086F
	for <dev@httpd.apache.org>; Sat, 21 Nov 2015 13:55:08 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.652
X-Spam-Level:
X-Spam-Status: No, score=0.652 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id Zgx3nmzSuMpP for <dev@httpd.apache.org>;
	Sat, 21 Nov 2015 13:55:01 +0000 (UTC)
Received: from resqmta-po-09v.sys.comcast.net (resqmta-po-09v.sys.comcast.net [96.114.154.168])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 7DC3A2026A
	for <dev@httpd.apache.org>; Sat, 21 Nov 2015 13:55:00 +0000 (UTC)
Received: from resomta-po-17v.sys.comcast.net ([96.114.154.241])
	by resqmta-po-09v.sys.comcast.net with comcast
	id kDuq1r0045Clt1L01DuyQe; Sat, 21 Nov 2015 13:54:58 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-17v.sys.comcast.net with comcast
	id kDux1r0092U0RYt01DuyTH; Sat, 21 Nov 2015 13:54:58 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715401 - in /httpd/httpd/trunk: include/ap_mmn.h include/httpd.h server/util.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CAKQ1sVMJ--ndHgz5KsCmSt=NPhWASfbD5-qo5XhOwko=KOPmGA@mail.gmail.com>
Date: Sat, 21 Nov 2015 08:54:57 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <1259FD96-FA67-4971-B2E9-2F9C56AA5CE9@jaguNET.com>
References: <20151120184939.8483A3A075E@svn01-us-west.apache.org> <CAKQ1sVMB1tNwcx7fcxWV-rdUK9gXFFA8M1GSsSktJ0VpY3qfNg@mail.gmail.com> <CAKQ1sVMJ--ndHgz5KsCmSt=NPhWASfbD5-qo5XhOwko=KOPmGA@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448114098;
	bh=UBoYpCQVzG3B5SEbYWediDV52yFFmD1V3G0gjZ4lU5k=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=W3bPfMitcaOzIWqHxwFvTv5rn2QMKtGqYcZ/SyaiCFZ0hJ2/fZcqDIBcXr5ykucqM
	 CchlgPH/rykLbfxskgl2DI38pbuZiH2etOlS400M+x/Fu2x3TKKpArD17wnLugRM7m
	 3oyHbWi4w7eLXW5ovPsJtWUsx9/RgfsTUOiOvquR0BASlvpniW5IeBP5OGEE7grOF/
	 J2gb2RRtYnY7iw3KIYVa5BKFhJm8wUpXrV/9YEO7Hs8pxeGLFvs6mk3jWQWgduFtwJ
	 CUW0w6XU037THUw86SwhbpU2PeQxAqm0ndkBJGwd2gTe9OOQP3/oIOe50gJ3YZLO+1
	 5MF5jWlpkMMHg==

I thought about that, but we don't have many do-whiles :)

But whatever people would prefer is fine w/ me...

> On Nov 20, 2015, at 5:29 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>=20
> Alternatively, a single/simpler while (n--){} would work too.
>=20
>=20
> On Fri, Nov 20, 2015 at 11:17 PM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>> On Fri, Nov 20, 2015 at 7:49 PM,  <jim@apache.org> wrote:
>>> Author: jim
>>> Date: Fri Nov 20 18:49:38 2015
>>> New Revision: 1715401
>>>=20
>>> URL: http://svn.apache.org/viewvc?rev=3D1715401&view=3Drev
>>> Log:
>>> Provide our own impl of str[n]casecmp()
>>>=20
>>> This simply provides it. Next step is to change all uses of
>>> str[n]casecmp to ap_str[n]casecmp and *then* remove those silly
>>> logic paths where we check the 1st char of a string before
>>> we do the strcasecmp (since this is no longer expensive).
>>>=20
>>> Modified:
>> []
>>>    httpd/httpd/trunk/server/util.c
>> []
>>> +AP_DECLARE(int) ap_strncasecmp(const char *s1, const char *s2, =
apr_size_t n)
>>> +{
>>> +    const unsigned char *ps1 =3D (const unsigned char *) s1;
>>> +    const unsigned char *ps2 =3D (const unsigned char *) s2;
>>> +    if (n) {
>>> +        do {
>>> +            if (ucharmap[*ps1] !=3D ucharmap[*ps2++]) {
>>> +                return (ucharmap[*ps1] - ucharmap[*--ps2]);
>>> +            }
>>> +            if (*ps1++ =3D=3D '\0') {
>>> +                /* we know both end here */
>>> +                return (0);
>>> +            }
>>> +        } while (!--n);
>>=20
>> while (--n) probably.
>>=20
>>> +    }
>>> +    return (0);
>>> +}
>>>=20
>>>=20


From dev-return-84657-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 21 13:59:14 2015
Return-Path: <dev-return-84657-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 32A8E18262
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 21 Nov 2015 13:59:14 +0000 (UTC)
Received: (qmail 68644 invoked by uid 500); 21 Nov 2015 13:59:13 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 68564 invoked by uid 500); 21 Nov 2015 13:59:13 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 68554 invoked by uid 99); 21 Nov 2015 13:59:13 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Nov 2015 13:59:13 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 498A7C50C6
	for <dev@httpd.apache.org>; Sat, 21 Nov 2015 13:59:13 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id IHw39eUZQJGd for <dev@httpd.apache.org>;
	Sat, 21 Nov 2015 13:59:07 +0000 (UTC)
Received: from mail-qg0-f43.google.com (mail-qg0-f43.google.com [209.85.192.43])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id C612B20225
	for <dev@httpd.apache.org>; Sat, 21 Nov 2015 13:59:06 +0000 (UTC)
Received: by qgcc31 with SMTP id c31so47393092qgc.3
        for <dev@httpd.apache.org>; Sat, 21 Nov 2015 05:59:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=urs6puvVZRwn6bP6BrZjU6eQcinBR8joKIuNSg/1JUk=;
        b=RLj4tjSaRsIjsfSuZcf4hR2qMXCVt1ruiakt8k/YsGBer5agYsvuQFGoXE+k/KSyPT
         PCzOgZ29+g4VFdA2+blA0fMKyi2IOqLrm0ks+2CadRE293dtyRR5UAAYxE+wHfJXFFb3
         qJe2FUEYQ0kY44auqgnbJSOd728Mv2BElp1cIzmT7pmjAOZKU2tL/lsrSgDWQgKRThbp
         TnqVReFl1PKWqof364bAGLx4D9gm3pBY0xbax9i/ddZIiMkDTyE1ihWT2Tsa1JJnVTC6
         iC1UqJf2wORrnsASboZ5glbN+hRle+6UToZ+QjitFzQJu/7cuK5BT7pH6qDK+UWNfEwV
         vAQw==
MIME-Version: 1.0
X-Received: by 10.140.251.215 with SMTP id w206mr714909qhc.73.1448114345933;
 Sat, 21 Nov 2015 05:59:05 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Sat, 21 Nov 2015 05:59:05 -0800 (PST)
In-Reply-To: <1259FD96-FA67-4971-B2E9-2F9C56AA5CE9@jaguNET.com>
References: <20151120184939.8483A3A075E@svn01-us-west.apache.org>
	<CAKQ1sVMB1tNwcx7fcxWV-rdUK9gXFFA8M1GSsSktJ0VpY3qfNg@mail.gmail.com>
	<CAKQ1sVMJ--ndHgz5KsCmSt=NPhWASfbD5-qo5XhOwko=KOPmGA@mail.gmail.com>
	<1259FD96-FA67-4971-B2E9-2F9C56AA5CE9@jaguNET.com>
Date: Sat, 21 Nov 2015 14:59:05 +0100
Message-ID: <CAKQ1sVOzutUqT3M1zy51W5C8B8AeVxtNBa=eEkrXOyK1OdEdRA@mail.gmail.com>
Subject: Re: svn commit: r1715401 - in /httpd/httpd/trunk: include/ap_mmn.h
 include/httpd.h server/util.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Sat, Nov 21, 2015 at 2:54 PM, Jim Jagielski <jim@jagunet.com> wrote:
> I thought about that, but we don't have many do-whiles :)

Fair enough :)

>
> But whatever people would prefer is fine w/ me...

You convinced me.

From dev-return-84658-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 21 22:47:15 2015
Return-Path: <dev-return-84658-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BD70518BD7
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 21 Nov 2015 22:47:15 +0000 (UTC)
Received: (qmail 83689 invoked by uid 500); 21 Nov 2015 22:47:15 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 83614 invoked by uid 500); 21 Nov 2015 22:47:15 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 83604 invoked by uid 99); 21 Nov 2015 22:47:15 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Nov 2015 22:47:15 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id BF1B0C7E2C
	for <dev@httpd.apache.org>; Sat, 21 Nov 2015 22:47:14 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.378
X-Spam-Level: ***
X-Spam-Status: No, score=3.378 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	NO_DNS_FOR_FROM=0.379, RCVD_IN_MSPIKE_H2=-0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 3RWsR75WYpOZ for <dev@httpd.apache.org>;
	Sat, 21 Nov 2015 22:47:08 +0000 (UTC)
Received: from mail-io0-f182.google.com (mail-io0-f182.google.com [209.85.223.182])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id BEE9220225
	for <dev@httpd.apache.org>; Sat, 21 Nov 2015 22:47:07 +0000 (UTC)
Received: by iofh3 with SMTP id h3so156710585iof.3
        for <dev@httpd.apache.org>; Sat, 21 Nov 2015 14:47:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=C+AQT6VXJU8jgM5YN9uw3jwj7YMgXnZrQINaAD/ZmJA=;
        b=jZ9Dbw8toBK0E+8mzAi2gmGuF8lcyViKPWtzhyfb7RpPEmoMsBmwUaJHEFHtOURML2
         ezWgvyFSDpP8Ydo4trDgQvB9wOS7pqG3wnshKlfnF6wR5FxZ8r7rnG1PREr6mrAMHZpF
         SroSEW7wbnaCB0iRHH0I8NTbXA6gxHeqkfk88WZ5PAp3k76bfsihlUs1Dokgk++QgBEl
         FcX3Zr4wonMyTjfdTOeZU6K/cT8WpUEh3mhY9/RtKwim1bsueaGUakMpoSayIU+DMMqW
         DQ3us+VCEVoYIfm8TsPuIcSbE3CQb480sRP3Y1mJZJ9w2Z/Qkfsdi0Qq2tCAJVTHmw19
         Zj5g==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=C+AQT6VXJU8jgM5YN9uw3jwj7YMgXnZrQINaAD/ZmJA=;
        b=Q8kwKvgDr4Qo+2sJMRgL1rhd+5GmdOI54wsJauFEhcnprURvsyYliAk9lczHReFu5C
         WoZZmJKr/zPnLJi+Pr96BPNPbEkZeqZSkh/t3UGU4WGq8l0QcqhEwCDwiezLgRiYCHC3
         dwh+YcWFc6AIe4zWRG+q6O/jSz09EgyJHdrxxOYUJX0dz3WnP6I0yhIrj6PgXyrLxOUS
         TdtDw6aw+Z1TFVZ/lmCqH4BCl5lZPs3akzW5rxq+0Dz5dPEXtWzvMIebu1nhrIsXHOyt
         wXzzYy/1YMNJTHOq4VlrGjHJnq9HT7vUaUvU3e8mzur7cR2LIajGiD/MArel4FN3alYY
         Sedg==
X-Gm-Message-State: ALoCoQnN924SO5Sp+5v6YXwbThWSEEdnK3ahcFWrEQg0kDhAxnFqkqNLsFIXHvSHZJPWMUeAhSap
MIME-Version: 1.0
X-Received: by 10.107.156.6 with SMTP id f6mr19810285ioe.163.1448146021574;
 Sat, 21 Nov 2015 14:47:01 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Sat, 21 Nov 2015 14:47:01 -0800 (PST)
In-Reply-To: <20151121193525.3104C3A023D@svn01-us-west.apache.org>
References: <20151121193525.3104C3A023D@svn01-us-west.apache.org>
Date: Sat, 21 Nov 2015 16:47:01 -0600
Message-ID: <CACsi250Pmsu2qNRdW9ND5ODK7SKa-iHLFTLsLJo6QkwxGTy1fg@mail.gmail.com>
Subject: Re: svn commit: r1715554 - /httpd/httpd/trunk/server/util.c
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1140ccc0330213052514c54d

--001a1140ccc0330213052514c54d
Content-Type: text/plain; charset=UTF-8

I suggest this is wrong, and that the appropriate table should be built.

EBCDIC platforms do have i18n (typicially single-byte) lower/upper
equivalences, and the underlying implementation should not be trusted for
straight ASCII token case insensitive comparisons.

On Sat, Nov 21, 2015 at 1:35 PM, <covener@apache.org> wrote:

> Author: covener
> Date: Sat Nov 21 19:35:24 2015
> New Revision: 1715554
>
> URL: http://svn.apache.org/viewvc?rev=1715554&view=rev
> Log:
> stick with underlying strcasecmp on EBCDIC builds
>
>
> Modified:
>     httpd/httpd/trunk/server/util.c
>
> Modified: httpd/httpd/trunk/server/util.c
> URL:
> http://svn.apache.org/viewvc/httpd/httpd/trunk/server/util.c?rev=1715554&r1=1715553&r2=1715554&view=diff
>
> ==============================================================================
> --- httpd/httpd/trunk/server/util.c (original)
> +++ httpd/httpd/trunk/server/util.c Sat Nov 21 19:35:24 2015
> @@ -3172,6 +3172,7 @@ AP_DECLARE(int) ap_array_str_contains(co
>      return (ap_array_str_index(array, s, 0) >= 0);
>  }
>
> +#if !APR_CHARSET_EBCDIC
>  /*
>   * Provide our own known-fast implementation of str[n]casecmp()
>   * NOTE: ASCII only!
> @@ -3238,3 +3239,14 @@ AP_DECLARE(int) ap_strncasecmp(const cha
>      }
>      return (0);
>  }
> +#else
> +AP_DECLARE(int) ap_strcasecmp(const char *s1, const char *s2)
> +{
> +  return strcasecmp(s1, s2);
> +}
> +
> +AP_DECLARE(int) ap_strncasecmp(const char *s1, const char *s2, apr_size_t
> n)
> +{
> +  return strncasecmp(s1, s2, n);
> +}
> +#endif /*APR_CHARSET_EBCDIC*/
>
>
>

--001a1140ccc0330213052514c54d
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">I suggest this is wrong, and that the appropriate table sh=
ould be built.<div><br></div><div>EBCDIC platforms do have i18n (typicially=
 single-byte) lower/upper equivalences, and the underlying implementation s=
hould not be trusted for straight ASCII token case insensitive comparisons.=
</div></div><div class=3D"gmail_extra"><br><div class=3D"gmail_quote">On Sa=
t, Nov 21, 2015 at 1:35 PM,  <span dir=3D"ltr">&lt;<a href=3D"mailto:covene=
r@apache.org" target=3D"_blank">covener@apache.org</a>&gt;</span> wrote:<br=
><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1=
px #ccc solid;padding-left:1ex">Author: covener<br>
Date: Sat Nov 21 19:35:24 2015<br>
New Revision: 1715554<br>
<br>
URL: <a href=3D"http://svn.apache.org/viewvc?rev=3D1715554&amp;view=3Drev" =
rel=3D"noreferrer" target=3D"_blank">http://svn.apache.org/viewvc?rev=3D171=
5554&amp;view=3Drev</a><br>
Log:<br>
stick with underlying strcasecmp on EBCDIC builds<br>
<br>
<br>
Modified:<br>
=C2=A0 =C2=A0 httpd/httpd/trunk/server/util.c<br>
<br>
Modified: httpd/httpd/trunk/server/util.c<br>
URL: <a href=3D"http://svn.apache.org/viewvc/httpd/httpd/trunk/server/util.=
c?rev=3D1715554&amp;r1=3D1715553&amp;r2=3D1715554&amp;view=3Ddiff" rel=3D"n=
oreferrer" target=3D"_blank">http://svn.apache.org/viewvc/httpd/httpd/trunk=
/server/util.c?rev=3D1715554&amp;r1=3D1715553&amp;r2=3D1715554&amp;view=3Dd=
iff</a><br>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D<br>
--- httpd/httpd/trunk/server/util.c (original)<br>
+++ httpd/httpd/trunk/server/util.c Sat Nov 21 19:35:24 2015<br>
@@ -3172,6 +3172,7 @@ AP_DECLARE(int) ap_array_str_contains(co<br>
=C2=A0 =C2=A0 =C2=A0return (ap_array_str_index(array, s, 0) &gt;=3D 0);<br>
=C2=A0}<br>
<br>
+#if !APR_CHARSET_EBCDIC<br>
=C2=A0/*<br>
=C2=A0 * Provide our own known-fast implementation of str[n]casecmp()<br>
=C2=A0 * NOTE: ASCII only!<br>
@@ -3238,3 +3239,14 @@ AP_DECLARE(int) ap_strncasecmp(const cha<br>
=C2=A0 =C2=A0 =C2=A0}<br>
=C2=A0 =C2=A0 =C2=A0return (0);<br>
=C2=A0}<br>
+#else<br>
+AP_DECLARE(int) ap_strcasecmp(const char *s1, const char *s2)<br>
+{<br>
+=C2=A0 return strcasecmp(s1, s2);<br>
+}<br>
+<br>
+AP_DECLARE(int) ap_strncasecmp(const char *s1, const char *s2, apr_size_t =
n)<br>
+{<br>
+=C2=A0 return strncasecmp(s1, s2, n);<br>
+}<br>
+#endif /*APR_CHARSET_EBCDIC*/<br>
<br>
<br>
</blockquote></div><br></div>

--001a1140ccc0330213052514c54d--

From dev-return-84659-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 21 23:10:48 2015
Return-Path: <dev-return-84659-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1F95B18C54
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 21 Nov 2015 23:10:48 +0000 (UTC)
Received: (qmail 22697 invoked by uid 500); 21 Nov 2015 23:10:47 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 22625 invoked by uid 500); 21 Nov 2015 23:10:47 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 22615 invoked by uid 99); 21 Nov 2015 23:10:47 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Nov 2015 23:10:47 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 14361C05AD
	for <dev@httpd.apache.org>; Sat, 21 Nov 2015 23:10:47 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id d7i2ao1ruoEH for <dev@httpd.apache.org>;
	Sat, 21 Nov 2015 23:10:39 +0000 (UTC)
Received: from mail-io0-f174.google.com (mail-io0-f174.google.com [209.85.223.174])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 7BE0F2026D
	for <dev@httpd.apache.org>; Sat, 21 Nov 2015 23:10:39 +0000 (UTC)
Received: by ioc74 with SMTP id 74so156387259ioc.2
        for <dev@httpd.apache.org>; Sat, 21 Nov 2015 15:10:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=+SZseoGmCgrkzSHuWFXt/YxP7mnU64Ch0FSdsVzOHOI=;
        b=EvY6Th2uV6Qv+ChBVcKZwOhW8nQ/DN+zxUiqJQNKhEHHL1N9wy0kV2A2mc3p6vAPGn
         BtzGYKNbFUonnJk6G85PvuVUDPiYG297lbT9ewPrqU6ZGmVzN1jJFYt07md8vZ94dpcZ
         KAVxRgGelhKbJsWTAaJ5KsBbq+c5E3RtXNMq+US+rsEGw5S2cBa9IyG0wagnltQosD6F
         K1b5gi9tSwFMR3lwRr3wr6QczNBIhUM6njWR6jLk3t/aH9YHNnModJTm4+pgFYCRF10z
         2KUxZeqdhboQjeKDcz9Sd4FzdVkWi7iKYsEEFq8j2LXErvAh0vwOjWYZbm1+KfcPJaFg
         x7sQ==
MIME-Version: 1.0
X-Received: by 10.107.10.94 with SMTP id u91mr22050482ioi.169.1448147438949;
 Sat, 21 Nov 2015 15:10:38 -0800 (PST)
Received: by 10.64.114.199 with HTTP; Sat, 21 Nov 2015 15:10:38 -0800 (PST)
In-Reply-To: <CACsi250Pmsu2qNRdW9ND5ODK7SKa-iHLFTLsLJo6QkwxGTy1fg@mail.gmail.com>
References: <20151121193525.3104C3A023D@svn01-us-west.apache.org>
	<CACsi250Pmsu2qNRdW9ND5ODK7SKa-iHLFTLsLJo6QkwxGTy1fg@mail.gmail.com>
Date: Sat, 21 Nov 2015 18:10:38 -0500
Message-ID: <CALK=YjPV=Eo+hGEa5yOtOFMPQ=ox7KZ2r=FeEciYfp7X+7UTRw@mail.gmail.com>
Subject: Re: svn commit: r1715554 - /httpd/httpd/trunk/server/util.c
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Sat, Nov 21, 2015 at 5:47 PM, William A Rowe Jr <wrowe@rowe-clan.net> wrote:
> I suggest this is wrong, and that the appropriate table should be built.
>
> EBCDIC platforms do have i18n (typicially single-byte) lower/upper
> equivalences, and the underlying implementation should not be trusted for
> straight ASCII token case insensitive comparisons.

I don't see it why it shouldn't be trusted, but I've reverted for now,

I'll revisit when this settles down / the function is used somewhere.

From dev-return-84660-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov 22 07:15:17 2015
Return-Path: <dev-return-84660-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B0C041817E
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 22 Nov 2015 07:15:17 +0000 (UTC)
Received: (qmail 61721 invoked by uid 500); 22 Nov 2015 07:15:17 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 61654 invoked by uid 500); 22 Nov 2015 07:15:17 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 61645 invoked by uid 99); 22 Nov 2015 07:15:17 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Nov 2015 07:15:17 +0000
Received: from asf-bz1-us-mid.priv.apache.org (nat1-us-mid.apache.org [23.253.172.122])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPS id AC0941A0048
	for <dev@httpd.apache.org>; Sun, 22 Nov 2015 07:15:16 +0000 (UTC)
Received: by asf-bz1-us-mid.priv.apache.org (ASF Mail Server at asf-bz1-us-mid.priv.apache.org, from userid 0)
	id 37724604A6; Sun, 22 Nov 2015 07:15:16 +0000 (UTC)
From: bugzilla@apache.org
To: dev@httpd.apache.org
Subject: Bug report for Apache httpd-2 [2015/11/22]
Message-Id: <20151122071516.37724604A6@asf-bz1-us-mid.priv.apache.org>
Date: Sun, 22 Nov 2015 07:15:06 +0000 (UTC)

+---------------------------------------------------------------------------+
| Bugzilla Bug ID                                                           |
|     +---------------------------------------------------------------------+
|     | Status: UNC=Unconfirmed NEW=New         ASS=Assigned                |
|     |         OPN=Reopened    VER=Verified    (Skipped Closed/Resolved)   |
|     |   +-----------------------------------------------------------------+
|     |   | Severity: BLK=Blocker CRI=Critical  REG=Regression  MAJ=Major   |
|     |   |           MIN=Minor   NOR=Normal    ENH=Enhancement TRV=Trivial |
|     |   |   +-------------------------------------------------------------+
|     |   |   | Date Posted                                                 |
|     |   |   |          +--------------------------------------------------+
|     |   |   |          | Description                                      |
|     |   |   |          |                                                  |
| 7483|Ass|Enh|2002-03-26|Add FileAction directive to assign a cgi interpret|
| 8713|Inf|Min|2002-05-01|No Errorlog on PROPFIND/Depth:Infinity            |
| 8867|Opn|Cri|2002-05-07|exports.c generation fails when using a symlink to|
|10747|New|Maj|2002-07-12|ftp SIZE command and 'smart' ftp servers results i|
|11294|New|Enh|2002-07-30|desired vhost_alias option                        |
|11580|Opn|Enh|2002-08-09|generate Content-Location headers                 |
|12033|Opn|Nor|2002-08-26|Graceful restart immediately result in [warn] long|
|12680|New|Enh|2002-09-16|Digest authentication with integrity protection   |
|13599|Inf|Nor|2002-10-14|autoindex formating broken for multibyte sequences|
|13661|Ass|Enh|2002-10-15|Apache cannot not handle dynamic IP reallocation  |
|14104|Opn|Enh|2002-10-30|not documented: must restart server to load new CR|
|14496|New|Enh|2002-11-13|Cannot upgrade any version on Windows. Must uninst|
|14922|Inf|Enh|2002-11-28|<target> is currently hardcoded to 'apache2'      |
|15719|Inf|Nor|2002-12-30|WebDAV MOVE to destination URI which is content-ne|
|16761|Inf|Nor|2003-02-04|CustomLog with pipe spawns process during config  |
|16802|New|Enh|2003-02-05|Additional AllowOverride directive "Restrict"     |
|16811|Ass|Maj|2003-02-05|mod_autoindex always return webpages in UTF-8.    |
|17107|New|Min|2003-02-16|Windows should not install printenv               |
|17114|New|Enh|2003-02-17|Please add strip and install-strip targets to Make|
|17244|Ass|Nor|2003-02-20|./configure --help gives false information regardi|
|17497|Opn|Nor|2003-02-27|mod_mime_magic generates incorrect response header|
|18325|New|Enh|2003-03-25|PAM support for suEXEC                            |
|18334|Inf|Cri|2003-03-25|Server crashes when authenticating users against L|
|18497|New|Min|2003-03-30|configure --help gives wrong default for sysconfdi|
|19043|New|Min|2003-04-15|Interesting interaction between cern_meta module a|
|19670|New|Enh|2003-05-05|content type header supplied upon PUT is thrown aw|
|20036|Ass|Nor|2003-05-19|Trailing Dots stripped from PATH_INFO environment |
|21253|New|Nor|2003-07-01|Mime magic doesn't continue if type is specifed fo|
|21260|New|Nor|2003-07-02|CacheMaxExpire directive not enforced !           |
|21533|Ass|Cri|2003-07-11|Multiple levels of htacces files can cause mod_aut|
|22138|Inf|Cri|2003-08-05|Webdav is not preccessing special chars right.    |
|22237|New|Enh|2003-08-08|option to disable ServerSignature on index pages  |
|22484|Opn|Maj|2003-08-16|semaphore problem takes httpd down                |
|22686|Opn|Nor|2003-08-25|ab: apr_poll: The timeout specified has expired (7|
|22898|Opn|Nor|2003-09-02|nph scripts with two HTTP header                  |
|23167|Inf|Cri|2003-09-14|--enable-layout never goes to apr apr-util        |
|23181|New|Nor|2003-09-15|Status 304 (Not modified) and chunking leads to an|
|23238|New|Cri|2003-09-18|non-async-signal-safe operations from signal handl|
|23330|New|Enh|2003-09-22|Enhance ApacheMonitor to view and control Tomcat s|
|23911|Opn|Cri|2003-10-18|CGI processes left defunct/zombie under 2.0.54    |
|24031|New|Enh|2003-10-23|Passphrase protected private key in SSLProxyMachin|
|24095|Opn|Cri|2003-10-24|ERROR "Parent: child process exited with status 32|
|24437|Opn|Nor|2003-11-05|mod_auth_ldap doubly-escapes backslash (\) charact|
|24890|Opn|Nor|2003-11-21|Apache config parser should not be local aware ( g|
|25014|New|Enh|2003-11-26|A flexible interface for mod_log_config           |
|25201|New|Enh|2003-12-04|Provide Cache Purge operation                     |
|25240|Inf|Enh|2003-12-05|SSL Library Error: 336105671 logged as information|
|25435|New|Enh|2003-12-11|sethandler and directoryindex not playing nice    |
|25469|Opn|Enh|2003-12-12|create AuthRoot for defining paths to auth files  |
|25484|Ass|Nor|2003-12-12|Non-service Apache cannot be stopped in WinXP     |
|25543|Inf|Nor|2003-12-15|mod_proxy_ajp overwrites existing response headers|
|25667|New|Nor|2003-12-19|Memory leak in function ssl_scache_dbm_retrieve().|
|25863|New|Enh|2004-01-02|new per-host initialization hooks                 |
|26005|New|Nor|2004-01-08|SERVER_NAME incorrect when using IPv6 address in U|
|26142|New|Maj|2004-01-14|EnableSendFile Off for Windows XP Home            |
|26153|Opn|Cri|2004-01-15|Apache cygwin directory traversal vulnerability   |
|26368|New|Min|2004-01-23|File extensions in AddDescription treated as part |
|26446|New|Nor|2004-01-26|flush buckets followed by eos bucket emit multiple|
|26478|New|Enh|2004-01-28|mod_dav does not expose a method for setting the D|
|26835|New|Enh|2004-02-10|[PATCH] Mod_status Readability & Browser Side Tabl|
|27257|Ass|Enh|2004-02-26|rotatelogs with getopt and setuid                 |
|27578|New|Enh|2004-03-10|made getlastmodified a writable property          |
|27715|Ass|Enh|2004-03-16|Client sending misformed Range "bytes = 0-100" ins|
|27791|Inf|Nor|2004-03-18|mod_cache doesn't re-cache expired content        |
|27835|New|Enh|2004-03-22|When proxying FTP, all errors turns into 404      |
|27869|New|Enh|2004-03-23|stopping and starting httpd again immediately caus|
|28854|Inf|Nor|2004-05-09|Build fails with missing library call on Solaris i|
|28903|New|Enh|2004-05-11|Hooks to add environment variables to CGI and othe|
|29090|Ass|Enh|2004-05-19|MultiviewsMatch NegotiatedOnly extensions not resp|
|29165|New|Nor|2004-05-24|Parent directory icon not correct                 |
|29446|New|Enh|2004-06-08|want directive for setting content negotiation qua|
|29449|New|Enh|2004-06-09|Limit length of specified fields in LogFormat     |
|29450|New|Enh|2004-06-09|Improved logging for mod_access                   |
|29510|Ass|Enh|2004-06-10|ab does not support multiple cookies              |
|29644|Ver|Nor|2004-06-17|mod_proxy keeps downloading even after the client |
|29755|Opn|Nor|2004-06-23|mod_usertrack should use err_headers_out          |
|29822|New|Enh|2004-06-26|implement FTP 'PUT' support in proxy_ftp.c        |
|29941|Ass|Enh|2004-07-06|log files are not tested for availability on confi|
|30259|Ass|Enh|2004-07-22|When proxy connects to backend, a DNS lookup is do|
|30505|Ass|Enh|2004-08-05|Apache uses 'Error', and not lower level event typ|
|30730|Inf|Nor|2004-08-18|[PatchAvailable] mod_actions and Server-Status    |
|30865|Inf|Maj|2004-08-26|mod_disk_cache leaves many temporary files slowing|
|31302|Opn|Cri|2004-09-19|suexec doesn't execute commands if they're not in |
|31311|New|Enh|2004-09-20|Remote user not logged in reverse proxy scenario  |
|31352|Ass|Enh|2004-09-21|RFE, Bind to LDAP server with browser supplier use|
|31418|Opn|Nor|2004-09-25|SSLUserName is not usable by other modules        |
|31484|New|Maj|2004-09-30|Custom environment variables not passed to content|
|31490|New|Nor|2004-09-30|mod_proxy_ftp renders filenames with spaces badly |
|31565|New|Enh|2004-10-06|Won't start correctly if parent closed stdin, stdo|
|31679|New|Enh|2004-10-12|If the argument of a CGI has two or more consecuti|
|31709|Inf|Nor|2004-10-13|Raises an error on SSL name based virtualhosts (wi|
|31712|New|Enh|2004-10-14|config_file is NULL at ap_walk_config etc         |
|31952|New|Enh|2004-10-29|mod_proxy and RealPlayer: audio content streaming |
|32051|Opn|Nor|2004-11-04|mod_example is not thread safe                    |
|32328|Opn|Enh|2004-11-19|Make mod_rewrite escaping optional / expose intern|
|32346|New|Enh|2004-11-22|mod_include/include virtual checks content-type is|
|32524|New|Enh|2004-12-03|ab: add an option to specify a source address     |
|32703|Inf|Enh|2004-12-14|Cannot determine that Apache is frozen if /var fil|
|32750|Ass|Maj|2004-12-17|mod_proxy + Win32DisableAcceptEx = memory leak    |
|32877|New|Enh|2004-12-29|wrong utf-8 encoding/escaping in a href for umlaut|
|33084|New|Enh|2005-01-13|Optional certificate validity period check on SSLV|
|33089|New|Nor|2005-01-13|mod_include: Options +Includes (or IncludesNoExec)|
|33207|New|Nor|2005-01-23|Results of my suexec.c code audit                 |
|33215|New|Nor|2005-01-24|Cygwin build/install.sh fix (OSTYPE => ext=.exe)  |
|33512|Inf|Maj|2005-02-11|mod_mem_cache and possibly mod_deflate            |
|33627|New|Nor|2005-02-18|Bite-sized changes making progress towards compila|
|33685|New|Maj|2005-02-22|Unable to install in the path containing non engli|
|34270|Inf|Nor|2005-04-01|Large POSTs over SSL from Internet Explorer do not|
|34375|New|Enh|2005-04-08|enhancements for mod_include                      |
|34377|New|Enh|2005-04-08|Allow the overriding of 401 Unauthorized returns f|
|34405|New|Enh|2005-04-11|adds DOCUMENT_NAME_WITHOUT_SUFFIX to mod_include  |
|34508|New|Nor|2005-04-19|Randomly slow graceful restart, not accepting new |
|34519|New|Enh|2005-04-19|Directory index should emit valid XHTML           |
|35049|New|Nor|2005-05-24|let AddDefaultCharset apply to text/css and applic|
|35077|New|Nor|2005-05-26|mod_dav passes incorrect paths with LocationMatch |
|35083|Inf|Enh|2005-05-26|Certificate validation problems trapping          |
|35098|Ver|Maj|2005-05-27|Install fails using --prefix                      |
|35154|New|Nor|2005-06-01|Support for NID_serialNumber, etc. in SSLUserName |
|35245|New|Nor|2005-06-06|cache ignores max-age cache-directive in requests |
|35250|New|Enh|2005-06-07|[PatchAvailable] add logging to mod_proxy_connect |
|35280|New|Nor|2005-06-09|FTP proxy breaks RFC 2428 when trying to fall back|
|35556|Inf|Nor|2005-06-30|CRL files not re-read by HUP                      |
|35652|Opn|Min|2005-07-07|Improve error message: "pcfg_openfile: unable to c|
|35702|New|Nor|2005-07-12|Using with https URL, ab freezes or gets SIGSEGV o|
|35781|New|Nor|2005-07-18|ap_sub_req_method_uri() bypasses Limit security co|
|35981|Inf|Maj|2005-08-02|mod_dav overrides dav_fs response on PUT failure  |
|36286|New|Enh|2005-08-20|configtest doesn't check SSL certificates         |
|36492|New|Nor|2005-09-04|split-logfile script dies when splitting log of ma|
|36495|Inf|Nor|2005-09-05|mod_proxy_ajp: ajp_check_msg_header() got bad sign|
|36564|New|Enh|2005-09-08|make mod_ldap really universal                    |
|36636|New|Maj|2005-09-13|database write lock taken for PROPFIND operations |
|36676|New|Nor|2005-09-15|time() bug in httpd/os/win32/util_win32.c:wait_for|
|36710|Opn|Blk|2005-09-19|CGI output not captured                           |
|36724|New|Nor|2005-09-20|Don't install Apache Monitor by default           |
|37110|New|Nor|2005-10-17|Build fails when source tree is read-only         |
|37196|Inf|Min|2005-10-21|Wrong "Parent directory" link                     |
|37201|New|Enh|2005-10-21|Add <IfInterface IP> syntax to apache configuratio|
|37290|Opn|Min|2005-10-28|DirectoryIndex don't work in scriptaliased directo|
|37307|New|Enh|2005-10-31|Can't suppress error messages                     |
|37355|New|Enh|2005-11-04|Allow to specify Proxy-Authorization in ProxyRemot|
|37360|New|Maj|2005-11-04|Install fails on Windows XP x64 when program files|
|37402|New|Nor|2005-11-08|mod_proxy has stopped allowing POST sub-requests  |
|37514|Inf|Nor|2005-11-15|mod_proxy buffers chunked data.                   |
|37564|New|Enh|2005-11-19|Suggestion: mod_suexec SuexecUserGroup directive i|
|37587|Inf|Min|2005-11-22|mod_status Total Traffic value goes up then down? |
|37770|Opn|Blk|2005-12-03|proxy: error reading status line from remote serve|
|37823|Inf|Nor|2005-12-07|The openssl library linked is different between ht|
|37920|New|Maj|2005-12-15|mod_proxy does not flush data on POST requests fro|
|38116|New|Enh|2006-01-04|Chroot-Patch for SuExec                           |
|38164|New|Nor|2006-01-06|wrong status code for failed COPY/MOVE            |
|38182|New|Nor|2006-01-08|COPY ignores authority in Destination header      |
|38218|New|Enh|2006-01-10|Multiline Comments for *.conf files               |
|38240|Inf|Nor|2006-01-12|apache restart segfault with mutliple Include dire|
|38325|Opn|Nor|2006-01-20|impossible to determine AUTH_TYPE of interpreted r|
|38355|Unc|Enh|2006-01-23|DSO support for mod_rewrite                       |
|38369|New|Enh|2006-01-24|mod_proxy keeps alive connections that should be b|
|38408|New|Nor|2006-01-27|SSI environment vars not set in spawned processes |
|38419|New|Nor|2006-01-27|Problems with large WebDAV properties             |
|38478|New|Maj|2006-02-01|A client starting a SSL renegotiation can crash th|
|38515|New|Enh|2006-02-05|Dynamic LDAP Group Support                        |
|38550|New|Enh|2006-02-07|Setting headers based on proxied data             |
|38571|New|Enh|2006-02-08|CustomLog directive checked by apachectl configtes|
|38756|Inf|Nor|2006-02-22|errors with running make                          |
|38786|New|Nor|2006-02-26|"IndexOption VersionSort" has problems with traili|
|38827|New|Reg|2006-03-02|mod_disk_cache trying to rename locked tempfile on|
|38864|Inf|Enh|2006-03-06|ProxyPassReverse fails in <Location>              |
|38903|New|Maj|2006-03-09|r->allowed does not affect Allow response header  |
|38923|New|Min|2006-03-10|mod_speling incorrectly escapes linked URLs       |
|38928|New|Min|2006-03-11|propose removing "VARIANTS" feature               |
|38995|New|Nor|2006-03-16|httpd tries to communicate with the CGI daemon eve|
|39111|New|Nor|2006-03-27|Potential bug brought by mmapfile (mod_file_cache)|
|39128|Inf|Maj|2006-03-28|Apache 2.2 will not compile mod_ssl library's corr|
|39185|Inf|Nor|2006-04-03|Approximately in 1-2 weeks of work the server hang|
|39216|New|Maj|2006-04-05|mod_disk_cache trying to rename locked file, decre|
|39238|New|Nor|2006-04-07|mod_auth_dbm requires mod_auth or "no groups file?|
|39275|Opn|Nor|2006-04-11|slow child_init causes MaxClients warning         |
|39287|New|Nor|2006-04-12|Incorrect If-Modified-Since validation (due to syn|
|39299|New|Nor|2006-04-13|Internal Server Error (500) on COPY               |
|39329|Inf|Nor|2006-04-17|mod_dbd reconnection and prepared statements      |
|39370|New|Nor|2006-04-20|SSL session will be removed if the client is sendi|
|39380|Inf|Nor|2006-04-21|mod_disk_cache eats memory, has no LFS support, et|
|39418|New|Nor|2006-04-26|CacheMaxExpire directive not enforced             |
|39448|New|Min|2006-04-29|old-style <directory proxy:*> doesn't give any war|
|39498|New|Nor|2006-05-06|accept_filter in apr assumes if found in sys/socke|
|39517|New|Nor|2006-05-08|Corrupt chunked transfer-encoding with Content Neg|
|39658|Opn|Nor|2006-05-25|mod_proxy_ajp SSL Key Size Bug                    |
|39673|New|Nor|2006-05-29|mod_proxy opens connections that disturb NTLM     |
|39692|New|Nor|2006-05-31|mod_proxy_balancer doesn't retry a failed request |
|39723|Inf|Enh|2006-06-05|Forward proxy does not work in tranparent mode    |
|39727|Ass|Nor|2006-06-05|Incorrect ETag on gzip:ed content                 |
|39730|New|Nor|2006-06-06|LanguagePriority and DefaultLanguage are Case Sens|
|39737|New|Nor|2006-06-06|LogFormat "%{tid}P" reports wrong thread id on Win|
|39748|New|Enh|2006-06-07|Header and POST support for mod_include           |
|39753|New|Nor|2006-06-07|incorrect source for LOCALE Decimal Symbol in Win2|
|39785|Inf|Nor|2006-06-12|Status code 408 (Request Timeout) is not logged   |
|39807|Opn|Enh|2006-06-13|large files / filesystem corruption can cause apac|
|39902|New|Nor|2006-06-27|HeaderName directive breaks mod_filter somehow    |
|39904|New|Nor|2006-06-27|graceful restart error and cpu load               |
|39913|Ass|Blk|2006-06-27|detection of static OpenSSL libraries requiring li|
|39916|New|Nor|2006-06-28|Core Filters & non-blocking Sendfile              |
|39923|New|Nor|2006-06-28|AddDescription doesn't work in server config with |
|39928|New|Nor|2006-06-28|port no detected when file name not in URL        |
|39935|New|Nor|2006-06-29|AddDescription does not do literal comparisons on |
|39973|Ass|Enh|2006-07-06|apache software folder should be movable          |
|40035|New|Cri|2006-07-13|Windows Server 2003 "("R2")" 64-Bit Edition no cgi|
|40060|New|Nor|2006-07-17|AuthGroupFile should accept /etc/group syntax     |
|40075|New|Enh|2006-07-19|unable to use ldap groups that contain DNs and use|
|40102|Opn|Nor|2006-07-24|SCRIPT_NAME set incorrectly with mod_rewrite      |
|40146|New|Nor|2006-07-31|mod_ssl info in server_info is blank              |
|40174|New|Min|2006-08-03|Unable to get IndexOptionis ScanHTMLTitles to work|
|40180|Inf|Maj|2006-08-03|Mod_dav and remove folder doesn't work with Micros|
|40190|New|Nor|2006-08-05|translate file                                    |
|40196|New|Nor|2006-08-06|EILSEQ handling, NoImplicitAdd should work, and so|
|40217|Opn|Nor|2006-08-08|mod_dav PROPFIND ignores access restrictions on it|
|40266|Inf|Blk|2006-08-16|berkeley db support in httpd is screwed           |
|40312|New|Nor|2006-08-24|ssl_engine_init.c, ssl_init_ctx_verify contains a |
|40373|New|Nor|2006-08-31|mod_dir adds trailing slash after internal redirec|
|40408|New|Blk|2006-09-04|Apache 2.2.3 is not starting                      |
|40416|New|Maj|2006-09-05|mod_proxy_ftp cannot connect under http load in fo|
|40441|New|Enh|2006-09-08|intelligently handling dynamic subdomains         |
|40453|New|Nor|2006-09-09|lexicographic compare in RewriteCond isn't lexicog|
|40463|New|Nor|2006-09-11|piped logging causes some weird kill()ing         |
|40513|Opn|Maj|2006-09-14|Seeding PRNG with 0 bytes of entropy              |
|40514|New|Nor|2006-09-14|would like GracefulShutdownTimeout to work for gra|
|40540|Inf|Nor|2006-09-19|Bad interaction between MultiViews and SetOutputFi|
|40541|New|Nor|2006-09-19|Action rewrites URI used by Location?             |
|40571|New|Nor|2006-09-21|mod_proxy_ajp don't works with mod_usertrack      |
|40586|New|Enh|2006-09-22|Add option to supress default '-' output          |
|40746|New|Enh|2006-10-12|Feature request: ProxyAllow directive             |
|40749|New|Min|2006-10-12|magic file with string and "%n" causes Apache chil|
|40781|New|Nor|2006-10-17|PATH_TRANSLATED: 'redirect:/~jablko/gallery2/main.|
|40808|New|Enh|2006-10-23|ProxyRemote with optional proxy authentication    |
|40859|New|Enh|2006-11-01|[PATCH] Support -F force option to 'ab' support to|
|40917|New|Nor|2006-11-07|configure does not detect OpenSSL shared lib on HP|
|40953|New|Min|2006-11-12|Should not send any data in 1xx/204/304 reply from|
|40984|Inf|Enh|2006-11-16|AddIcon, AddIconByType for OpenDocument format    |
|40987|Opn|Enh|2006-11-16|ProxyVia Block doesn't remove Via: header for reve|
|41000|New|Nor|2006-11-19|mod_authn_dbd have an error, in function 'authn_db|
|41025|New|Nor|2006-11-23|ROBOTS META-Tag directive needed in mod_autoindex |
|41088|New|Nor|2006-11-30|installation backcolor is wrong (white)           |
|41111|New|Enh|2006-12-05|New option for filters: run only if there are spar|
|41114|New|Blk|2006-12-06|ACL HTTP method is rejected by mod_proxy_ajp      |
|41130|New|Nor|2006-12-07|mod_mime and mod_negotiation type-map both clobber|
|41143|Opn|Nor|2006-12-10|Incorrect ap_getline assumption in mod_proxy_http |
|41195|New|Nor|2006-12-17|properly set the parent pid on shutdown           |
|41196|New|Nor|2006-12-17|worker mpm usage of apr's memory pools is not thre|
|41200|Inf|Maj|2006-12-18|SSI include, prevent client from receiving full ou|
|41240|Inf|Enh|2006-12-25|BRF files support                                 |
|41262|Inf|Nor|2006-12-29|Embedded pcre causes runtime segfault             |
|41362|Inf|Maj|2007-01-14|mod_disk_cache and mod_include conflict generating|
|41375|Inf|Min|2007-01-15|Using same SSL Certificate with different ServerNa|
|41391|New|Min|2007-01-17|too long period setting makes max-age overflow    |
|41412|New|Enh|2007-01-19|RewriteRule Skip should take negative arguments   |
|41435|New|Nor|2007-01-22|Authentication fails with 500 Server Error        |
|41450|Inf|Cri|2007-01-24|Empty page (200 OK) while max-age is empty        |
|41485|New|Nor|2007-01-28|LDAP client certificates not usable in 2.2.x/trunk|
|41529|New|Enh|2007-02-02|Accept BOM in .htaccess                           |
|41556|New|Enh|2007-02-07|Feature Request: format string for masking ip addr|
|41621|New|Maj|2007-02-15|Apache 2.2.4 backend problem with Apache 2.0.59 Re|
|41646|New|Nor|2007-02-16|wrong headers are sent for HEAD requests when Prox|
|41676|Opn|Enh|2007-02-22|Refactor mod_proxy_ftp                            |
|41685|New|Enh|2007-02-22|Implement optional HTTP Authentication in a standa|
|41712|Inf|Nor|2007-02-26|threads locked at logging state                   |
|41729|New|Maj|2007-02-28|error message: ap_get_scoreboard_lb(130) failed in|
|41744|Inf|Maj|2007-03-01|SSI resolves includes but removes original HTML   |
|41763|Opn|Nor|2007-03-05|mod_disk_cache ignores CacheDirLevels and CacheDir|
|41764|New|Nor|2007-03-05|error state and conf                              |
|41771|Inf|Nor|2007-03-06|Erro with mod_proxy_ajp or mod_prox_balancer      |
|41867|New|Nor|2007-03-16|<DirectoryMatch> Matches Files                    |
|41925|New|Nor|2007-03-21|trivial patch to add automatic crypting to 'dbmman|
|41929|New|Nor|2007-03-22|ISAPI ssl variables                               |
|41953|New|Nor|2007-03-26|pidfile remains when 2nd pass of post-config retur|
|41962|New|Min|2007-03-27|Need mod_auth_ldap to authenticate with Active Dir|
|42027|Inf|Nor|2007-04-02|FileETag directive appears to be ignored          |
|42054|New|Nor|2007-04-04|service name and parameter issues                 |
|42079|New|Nor|2007-04-10|SSLRequire: Additional access in sub-directoies   |
|42082|New|Nor|2007-04-10|filter_init is called multiple times after an INCL|
|42182|Inf|Nor|2007-04-22|Mime types for cached proxied content             |
|42216|New|Enh|2007-04-24|RFE -- external overload procedure                |
|42262|Inf|Nor|2007-04-26|mod_dav /  worker fails to allocate memory and seg|
|42287|Inf|Nor|2007-04-28|chunked encoded response to POST request to cgi sc|
|42368|Inf|Nor|2007-05-09|httpd is crashing if conf/extra/httpd-manual.conf |
|42373|Inf|Maj|2007-05-09|REPORT request fails over mod_proxy               |
|42404|New|Enh|2007-05-13|Filename/info for disk-cached proxied remote URLs |
|42425|Inf|Nor|2007-05-15|Additional freshness checks in mod_cache.c cause m|
|42471|Inf|Nor|2007-05-21|clients with IE7 take 3megs per page load. httpd.e|
|42492|Inf|Nor|2007-05-22|mod_proxy_ajp with SSL front end: data corruption |
|42499|Inf|Nor|2007-05-23|Backslash produces a 404 error instead of going to|
|42548|New|Nor|2007-05-30|INCLUDE negotiating language aborts with APR_POOL_|
|42561|New|Enh|2007-05-31|[PATCH] AuthLDAPRemoteUserAttribute only applies i|
|42633|New|Min|2007-06-11|mod_info gives wrong information about actual conf|
|42665|New|Nor|2007-06-14|spurious attempt to open ".../file.html/.htaccess"|
|42666|New|Nor|2007-06-14|code & docs corrections for FollowSymLinks and Sym|
|42667|New|Nor|2007-06-14|mod_proxy_balancer not reporting when workers are |
|42668|Inf|Nor|2007-06-14|balancer_manager shows Ok status for the workers t|
|42687|New|Nor|2007-06-18|Fully delegate certificate & key semantics to the |
|42688|New|Enh|2007-06-18|engine managed keys: per process openssl context  |
|42690|New|Nor|2007-06-18|realm is not set for each configured directory whe|
|42695|Inf|Cri|2007-06-18|mod_proxy balancer problem                        |
|42699|New|Enh|2007-06-20|share mod_logio data with other modules           |
|42711|New|Enh|2007-06-20|format string for whole log entries not just id   |
|42732|Opn|Maj|2007-06-25|Authentication against database issue.            |
|42763|New|Nor|2007-06-28|graceful-stop/restart loops go loop too far       |
|42923|Inf|Maj|2007-07-17|vhost certificate NOT overriding cert from the _de|
|42972|Inf|Nor|2007-07-25|Certificate list in mod_ssl module context are not|
|42977|New|Nor|2007-07-25|DAV locking is busted when apr-util is built with |
|42987|New|Nor|2007-07-27|Weak Etags in Apache are useless and violate RFC 2|
|43012|New|Nor|2007-08-02|AIX instdso.sh libphp5.so                         |
|43027|New|Enh|2007-08-03|Header in default language                        |
|43033|New|Nor|2007-08-04|apxs does not correctly detect module name (w/o -n|
|43177|New|Nor|2007-08-21|child pid xxxxx exit signal Segmentation fault    |
|43218|New|Nor|2007-08-27|Wrong cert used for vhost if ServerName is same   |
|43220|Opn|Cri|2007-08-27|mod_proxy truncating ajp output                   |
|43249|Inf|Maj|2007-08-30|ldap_simple_bind_s failed when using SUN LDAP Libs|
|43275|New|Enh|2007-08-31|Remove avoidable network transactions in mod_proxy|
|43289|New|Nor|2007-09-02|XBitHack full g+x returns zero sized response on I|
|43308|New|Nor|2007-09-04|Persistent backend connections not supported for R|
|43352|New|Nor|2007-09-11|Apache2: out of memory during heavy webdav files c|
|43441|New|Nor|2007-09-20|Incorrect HTTP status for pre-commit-blocked autov|
|43471|New|Min|2007-09-25|no need to create a global pool on open_scoreboard|
|43481|New|Cri|2007-09-26|AuthLDAPURL must contain a final path of branch?(l|
|43494|New|Nor|2007-09-26|mod_cgid does not kill never ending scripts       |
|43502|New|Enh|2007-09-28|httpd fails to start if log directory does not exi|
|43513|New|Nor|2007-09-29|Persistent backend connections for ProxyPassMatch |
|43532|Inf|Cri|2007-10-02|Error while compiling Apache 2.2.3 on HPUX        |
|43533|Opn|Nor|2007-10-02|Frequent crashes in mod_include's bndm()          |
|43561|New|Nor|2007-10-05|apxs -q anomaly                                   |
|43577|Inf|Blk|2007-10-09|mod_authnz_ldap not working under WLDAP32 (novell/|
|43607|New|Nor|2007-10-11|mod_proxy sends data on closed connections without|
|43649|Opn|Trv|2007-10-18|mod_autoindex is generating invalid XHTML markup  |
|43652|New|Enh|2007-10-18|Suggest small change for big fix with SuExec & Vir|
|43666|New|Nor|2007-10-20|CGI works, but client denied error messages in err|
|43679|New|Enh|2007-10-23|Contributed tests for checking that subrequests ta|
|43723|Inf|Cri|2007-10-29|Apache 2.2.6 segfault when using mod_dbd          |
|43724|New|Cri|2007-10-29|Apache 2.2.6 segfault on url wich not in cache    |
|43755|New|Enh|2007-10-31|Add a SSLOptions to don't fill SSL_CLIENT_VERIFY  |
|43762|New|Enh|2007-10-31|Misleading tips in an error message about internal|
|43777|New|Nor|2007-11-01|Wrong encoding of <href> element in response      |
|43778|New|Nor|2007-11-01|Wrong responses if httpd has not access to some el|
|43785|New|Enh|2007-11-02|Tracking the per-hit impact of mod_include        |
|43792|New|Enh|2007-11-04|Feature proposal - bind phase                     |
|43818|New|Nor|2007-11-08|PROPFIND on -w- collections returns 207 MULTI-STAT|
|43838|New|Enh|2007-11-11|If-Modified-Since request and htcacheclean conflic|
|43895|New|Nor|2007-11-18|mod_mbox improvements                             |
|43897|Inf|Cri|2007-11-18|Huge memory consumption httpd 2.2.6, mod_proxy - m|
|43931|New|Enh|2007-11-21|OpenSSL autoconfig support for mod_ssl            |
|43943|New|Nor|2007-11-22|SHMCB crash due to misalignment and GCC 4 optimiza|
|43958|Inf|Maj|2007-11-26|mod_proxy_balancer not balancing correct in combin|
|43997|Opn|Min|2007-11-29|Only issue "Init: SSL server IP/Port conflict" if |
|44025|Inf|Nor|2007-12-05|Apache 2.2.6 fails to configure on OpenBSD 4.1    |
|44027|Ass|Enh|2007-12-05|Internationalized Domain Name (IDN) support       |
|44031|Opn|Maj|2007-12-06|RemoveHandler inside subdir location              |
|44034|Ass|Enh|2007-12-06|mpm_winnt doesn't call monitor hook               |
|44105|New|Nor|2007-12-19|Core dumps when using Proxy Keepalive             |
|44155|New|Enh|2007-12-31|smarter retry for LDAP_UNAVAILABLE, LDAP_BUSY, etc|
|44181|Opn|Enh|2008-01-07|add UnAlias                                       |
|44188|Inf|Cri|2008-01-08|Empty response for certain requests (mod_proxy as |
|44218|New|Min|2008-01-13|mod_autoindex shows the default icon for files wit|
|44221|Opn|Cri|2008-01-14|CheckCaseOnly On does not stop Multiple Choices ba|
|44250|New|Nor|2008-01-16|OSX 10.5: __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_|
|44279|New|Enh|2008-01-22|Add "iterate" flag to apply rule in a loop while p|
|44302|New|Nor|2008-01-27|AuthLDAPURL does not accept ldapi:// urls         |
|44305|New|Nor|2008-01-28|Inconsistent configuration for suexec path        |
|44316|New|Nor|2008-01-28|httpd 2.0 does not follow ScriptAliases when invok|
|44322|New|Enh|2008-01-29|mod_proxy ProxyPassReverseCookieDomain with no dom|
|44351|New|Nor|2008-02-04|File descriptor leak when using prg RewriteMap    |
|44363|Inf|Maj|2008-02-05|Slow file transfers                               |
|44384|Ass|Nor|2008-02-09|mod_ssl on MacOS X 10.5.1 does not work because of|
|44453|New|Nor|2008-02-19|list_hooks.pl doesn't parse declarations that span|
|44476|New|Maj|2008-02-23|Apache service fails to start due to missing depen|
|44503|Inf|Blk|2008-02-27|Errors during SSL handshake                       |
|44518|New|Enh|2008-03-02|Don't set expires header on HTTP redirect.        |
|44578|New|Enh|2008-03-11|mod_authn_dbd option to let database validate pass|
|44601|New|Trv|2008-03-13|Add a lowercase value to Vary header for consisten|
|44602|New|Enh|2008-03-13|Options for modfying Content-Location (relative OR|
|44622|Inf|Nor|2008-03-17|POST fails to SSL vhost with proxy to HTTP backend|
|44631|New|Nor|2008-03-18|with-included-apr fails to work when using a separ|
|44638|New|Nor|2008-03-19|sed error in httpd.spec.in                        |
|44656|New|Nor|2008-03-22|Tries to retrive error document 404 instead of 406|
|44657|New|Enh|2008-03-22|prefer-type, -encoding, and -charset cookie? (as p|
|44670|New|Min|2008-03-25|Apache httpd 2.2.8 : Cannot ./configure when curre|
|44696|Inf|Nor|2008-03-27|mod_cache sometimes serves old content despite hav|
|44730|New|Nor|2008-04-01|duplicate query string in remote server url when u|
|44752|New|Nor|2008-04-03|Suexec does not correctly check that scripts are i|
|44757|New|Enh|2008-04-04|adding stderr buckets to mod_cgi                  |
|44758|New|Enh|2008-04-04|LimitRequestBody undocumented behaviour with proxi|
|44779|New|Enh|2008-04-08|Using commas and semicolons for content negotiatio|
|44855|New|Nor|2008-04-22|irregular balancing with sticky-session after re-e|
|44865|Ass|Nor|2008-04-23|mod_dav's lock database becomes consistently corru|
|44870|Inf|Nor|2008-04-24|process spinning on 100% cpu                      |
|44923|Inf|Min|2008-05-02|consequences of multiple LDAPTrustedGlobalCert    |
|44924|New|Enh|2008-05-02|allow 'CACERTDIR' in mod_ldap                     |
|44940|New|Maj|2008-05-06|Httpd randomly breaks when verifying client certif|
|44981|New|Enh|2008-05-12|Digital Certificates (CN Based) for Authorization |
|45022|New|Nor|2008-05-16|Processing of escaped glob patterns in "Include" d|
|45023|Opn|Reg|2008-05-16|DEFLATE preventing 304 NOT MODIFIED response      |
|45049|Opn|Nor|2008-05-20|mod_mem_cache caches partial content when client c|
|45054|New|Nor|2008-05-21|SSLVerifyClient optional_no_ca is broken          |
|45058|New|Nor|2008-05-21|Mod_SSL does not set AUTH_TYPE with client certifi|
|45078|New|Nor|2008-05-27|mod_proxy stalls when uploading files             |
|45103|Ass|Min|2008-05-30|apachectl should do config test before reload/rest|
|45111|New|Enh|2008-06-01|make mod_usertrack use mod_unique_id if available |
|45116|New|Nor|2008-06-02|fail to check return value of apr_file_dup2() in /|
|45148|New|Enh|2008-06-06|The actual host of the request will be more helpfu|
|45184|New|Enh|2008-06-11|Regular Expression in directive ServerAlias       |
|45187|New|Maj|2008-06-11|Long File name requests gives FORBIDDEN response  |
|45225|New|Nor|2008-06-17|XBitHack breaks DirectoryIndex + MultiViews conten|
|45253|New|Nor|2008-06-23|Unable to build httpd 2.2.9 on Solaris/SPARC      |
|45257|New|Enh|2008-06-23|add (en)force option for UseCanonicalName         |
|45259|New|Enh|2008-06-23|Add /home/[a-z]/* scheme to UserDir conf          |
|45275|New|Maj|2008-06-25|Locked files during expired page renew in disk cac|
|45281|New|Enh|2008-06-25|SITE CHMOD/SEARCH                                 |
|45287|Inf|Min|2008-06-26|build failure because of difference between BSD an|
|45297|New|Min|2008-06-27|mod_dir does not manage correctly the user (r->use|
|45302|New|Enh|2008-06-28|ServerRoot directive                              |
|45355|New|Nor|2008-07-07|ab text and html output jumbo unification         |
|45356|New|Nor|2008-07-07|ab: optionally reduce resource usage (qsort and me|
|45371|New|Nor|2008-07-10|MSI installer requires uninstall of previous versi|
|45374|New|Blk|2008-07-10|Shared memory error on starting httpd with mod_lda|
|45379|Inf|Nor|2008-07-11|[Bug] svn merge, apache and trailing slashes      |
|45385|Inf|Nor|2008-07-11|unable to compile/make 2.2.9 with --enable-ldap   |
|45393|New|Nor|2008-07-14|Apache returns 500 Error when no LDAP credentials |
|45402|New|Nor|2008-07-15|mod_autoindex incorrectly fails to list files     |
|45405|New|Enh|2008-07-16|Allow binding port to be set for individual worker|
|45449|New|Nor|2008-07-21|[PATCH] Add support to WebDav to MOVE/COPY to remo|
|45456|New|Enh|2008-07-22|mod_dbd don't allow more then one database pool   |
|45487|New|Trv|2008-07-27|broken log messages on startup in win32 version   |
|45497|New|Nor|2008-07-29|Scoreboard slot leaked using MaxRequestsPerChild a|
|45512|Ass|Maj|2008-07-31|Bad Performance of mod_proxy with SSL on Solaris 1|
|45524|New|Enh|2008-08-01|Specifying multiple vhost aliases                 |
|45525|New|Enh|2008-08-01|Switch mod_autoindex to Tango icons               |
|45579|New|Nor|2008-08-06|unknown URI scheme in request-URI ignored         |
|45674|New|Enh|2008-08-22|Allow to change error code returned by "Require ld|
|45726|New|Enh|2008-09-02|Build in a maintenance functionallity             |
|45736|New|Nor|2008-09-03|mod_dav needs a directory for its locks and one sh|
|45754|New|Enh|2008-09-06|autoconf macros                                   |
|45763|New|Nor|2008-09-08|No openssl.cnf defined by default causes OpenSSL c|
|45773|New|Nor|2008-09-09|pcre build generates sources to srcdir rather than|
|45788|New|Nor|2008-09-11|mod_log_forensic output shouldn't be buffered when|
|45801|Opn|Nor|2008-09-13|SSLRequireSSL with strictrequire and satisfy any d|
|45838|New|Nor|2008-09-18|mod_authz_owner & directories                     |
|45868|New|Nor|2008-09-23|mod_mem_cache update of headers in cache object is|
|45900|New|Nor|2008-09-26|"make install" fails from read-only filesystem    |
|45905|New|Enh|2008-09-26|ErrorDocument and default URL                     |
|45922|New|Enh|2008-09-30|Expand the conditions under which "SSLVerifyClient|
|45923|New|Nor|2008-09-30|htpasswd tries to open(file, O_RDONLY | O_APPEND) |
|45926|Inf|Nor|2008-10-01|Unable to start apache 2.2.9                      |
|45986|New|Nor|2008-10-10|[info]...Invalid argument: core_output_filter: wri|
|46024|Opn|Nor|2008-10-16|--enable-static is not available in apache's confi|
|46037|Inf|Nor|2008-10-18|Configuration of trusted OCSP responder certificat|
|46040|New|Enh|2008-10-20|Check for existing version of Apache while install|
|46054|New|Nor|2008-10-21|Running httpd returns the error "bad user name nob|
|46070|New|Nor|2008-10-22|MSI installer does not validate custom installatio|
|46071|New|Enh|2008-10-22|Allowing space in between comma and last option in|
|46074|New|Enh|2008-10-23|Need of friendly and easy to use configuration gra|
|46139|New|Nor|2008-11-02|Apache Restart option is not working              |
|46140|New|Enh|2008-11-03|Change error state in balancer manager            |
|46188|Inf|Nor|2008-11-11|Core dumps in apache 2.0.59                       |
|46195|Opn|Nor|2008-11-12|ProxyPass fails with literal IPv6 address         |
|46215|New|Nor|2008-11-14|Race condition in bybusyness algorithm            |
|46231|New|Maj|2008-11-18|Connection Pooling with ajp depends on syntax ?   |
|46241|New|Enh|2008-11-19|mod_expires - ExpiresByPattern or ExpiresIf       |
|46267|New|Nor|2008-11-22|No shared modules build if use --with-apr and --wi|
|46270|New|Enh|2008-11-23|Add FIPS 140-2 mode for mod_ssl for FIPS 1.2 modul|
|46282|New|Nor|2008-11-24|apache2.2 reverse proxy causing full memory and sw|
|46316|New|Maj|2008-12-01|Proxied SSI ProxyTimeout render failure           |
|46317|Inf|Nor|2008-12-01|mod_authnz_ldap.c(373)  seg fault                 |
|46412|New|Nor|2008-12-17|make_child return value not checked               |
|46417|New|Cri|2008-12-19|[notice] Parent: child process exited with status |
|46428|Opn|Nor|2008-12-21|Spaces in URI doesn't encode in proxy-requests    |
|46442|New|Nor|2008-12-29|Semicolon in allow/deny all rules cause reverse lo|
|46449|New|Maj|2008-12-30|Output out of order from SSI include virtual      |
|46454|New|Min|2008-12-30|escaping wildcards in AddIcon filename matching   |
|46475|New|Nor|2009-01-04|build warnings.                                   |
|46499|New|Maj|2009-01-09|httpd accept() return EAGAIN error                |
|46521|New|Nor|2009-01-13|mod_dav doesn't show symlinks                     |
|46529|Ass|Nor|2009-01-14|Child httpd processes crash with Segmentation faul|
|46534|New|Nor|2009-01-14|mod_proxy_ajp scheme and port do not follow UseCan|
|46578|New|Nor|2009-01-21|Flawed header                                     |
|46582|Ver|Min|2009-01-22|RewriteMap internal functions are not well documen|
|46604|New|Nor|2009-01-26|Error thrown when trying to rpmbuild -tb httpd sou|
|46629|New|Maj|2009-01-29|Apache hanging on system calls for php and perl   |
|46634|Ass|Nor|2009-01-30|Requests sometimes take too long, wrong time taken|
|46644|New|Enh|2009-01-31|Clean way to pass custom environment variables to |
|46646|Ass|Nor|2009-02-01|check group membership is sometimes case sensitive|
|46650|Opn|Nor|2009-02-02|CustomLog enviroment condition SCRIPT_FILENAME    |
|46656|New|Enh|2009-02-03|ProxyErrorOverride inside location                |
|46669|New|Enh|2009-02-06|rotatelogs doesn't autocreate directories         |
|46671|Opn|Cri|2009-02-07|Apache periodicaly crashes .                      |
|46678|New|Nor|2009-02-09|Fixed Content-Length using mod_ext_filter with mod|
|46682|New|Nor|2009-02-09|mod_proxy EAI_AGAIN DNS failure                   |
|46685|Opn|Nor|2009-02-09|401 sent without WWW-Authenticate header when requ|
|46709|Opn|Reg|2009-02-12|Expect: 100-continue to an HTTP/1.0 server change |
|46724|Inf|Cri|2009-02-17|WinXP SP3 - Apache crashes on startup in libapr-1.|
|46743|New|Nor|2009-02-19|Inconsistent behavior of "RewriteOptions inherit" |
|46745|New|Maj|2009-02-20|ab.c error :  undefined reference to `BIO_set_call|
|46751|New|Nor|2009-02-21|Can passenv variables who's name contain '(' or ')|
|46762|New|Nor|2009-02-24|Error, SSL/TLS libraries were missing or unusable |
|46765|Opn|Nor|2009-02-25|doubled HTTP header leads to error (Redmine)      |
|46785|Inf|Nor|2009-03-02|Child process increases to 100% (CPU)             |
|46788|New|Nor|2009-03-02|Set resource limits to avoid denial of service att|
|46810|New|Nor|2009-03-05|apxs / apu-1-config outputting erroneous include p|
|46824|New|Nor|2009-03-09|RemoveOutputFilter will not work for Filters added|
|46845|Inf|Cri|2009-03-12|Apache crashes in Windows when using subversion(pr|
|46847|New|Nor|2009-03-13|WebDAV methods with encoding other than "identity"|
|46873|New|Nor|2009-03-18|feature request: connection count on balancer-mana|
|46884|New|Min|2009-03-20|Call to apu_dso_load Fails In apr_ldap_stub.c On O|
|46946|Inf|Nor|2009-03-31|mod_mbox shows email addresses in plain text      |
|46963|New|Nor|2009-04-03|KeepAliveTimout prevents child process from exitin|
|46969|New|Nor|2009-04-05|CustomLog format %m always GET on errors with loca|
|46970|New|Nor|2009-04-05|CustomLog %X does not record aborted connections w|
|47011|New|Reg|2009-04-09|mod_proxy/mod_proxy_balancer hot-standby BalancerM|
|47055|New|Blk|2009-04-20|SSLVerifyClient + Directory doesn't use cache sess|
|47063|New|Nor|2009-04-21|mod_proxy doesn't call post_request handler when t|
|47134|New|Nor|2009-05-01|Last resolve handling when sending client certific|
|47138|New|Nor|2009-05-01|Reverse Proxy & Balancer generate error fault when|
|47152|New|Maj|2009-05-04|Apache is only serving the first character in the |
|47159|New|Nor|2009-05-06|2.2.x logresolve doesn't support ipv6             |
|47167|New|Nor|2009-05-07|Authenticated sessions being switched by reverse p|
|47170|New|Enh|2009-05-08|rotatelogs ring buffer option                     |
|47180|New|Nor|2009-05-11|DBM ssl_scache setting can cause extreme performan|
|47220|Opn|Enh|2009-05-19|Access to environment variables                   |
|47256|New|Enh|2009-05-23|Enable SSL on a per-port basis                    |
|47289|New|Nor|2009-05-30|Can't build with dynamic libraries on Mac OS 10.4 |
|47295|New|Nor|2009-06-01|AuthDBDUserPWQueryFmt/AuthDBDUserRealmQueryFmt in |
|47329|New|Nor|2009-06-07|SSLCADNRequest* & SSLCACertificate* silently do no|
|47340|New|Nor|2009-06-09|uldap_cache_comparedn() called without a lock     |
|47344|New|Enh|2009-06-10|[FEATURE REQUEST] RedirectCanonicalName           |
|47345|New|Enh|2009-06-10|rotatelogs timeout patch                          |
|47346|New|Maj|2009-06-10|mod_cache doesn't re-cache expired content when La|
|47387|Inf|Nor|2009-06-18|SSL_CLIENT_I_DN and SSL_CLIENT_S_DN use Email inst|
|47392|Opn|Nor|2009-06-18|<FilesMatch> is using the wrong directory         |
|47435|New|Nor|2009-06-26|mod_authz_host does reading of /etc/hosts on each |
|47438|Inf|Enh|2009-06-27|how to create a non-html "listing generated by the|
|47447|New|Enh|2009-06-29|Add possibility to use client IP as a value in Req|
|47484|New|Nor|2009-07-06|Spurious RewriteLock warning when using external m|
|47485|New|Enh|2009-07-06|HTML5 Websocket implementation                    |
|47514|New|Enh|2009-07-12|Personal data and restrictions based on subject di|
|47528|New|Maj|2009-07-14|Worker process won't restart more than once using |
|47542|New|Nor|2009-07-16|Piped logging processes killed before other proces|
|47562|Inf|Nor|2009-07-23|Apache/2.2.3 (Win32) mod_perl/2.0.3-rc1           |
|47578|New|Nor|2009-07-24|compile ERROR with ssl                            |
|47580|Opn|Nor|2009-07-25|mod_cache sends 200 response instead of 304       |
|47586|New|Nor|2009-07-27|httpd -k start doesn't start service when rotatelo|
|47591|New|Min|2009-07-27|show current HTTP_HOST in mod_status scoreboard   |
|47601|New|Enh|2009-07-29|Support X-Forwarded-For in forward proxy requests |
|47625|New|Nor|2009-08-02|2.2.12 win32 msi installer missing                |
|47634|New|Maj|2009-08-04|mod_ldap connection pool session keepalive not imp|
|47643|New|Enh|2009-08-04|added meta tags to xhtml output for ease of search|
|47650|Opn|Trv|2009-08-05|httxt2dbm calculates value size incorrectly       |
|47657|New|Nor|2009-08-06|Make WebDAV MOVE atomic when replacing files on sa|
|47659|New|Nor|2009-08-07|makefile.win needs check for DBM_LIST, dies on bui|
|47664|New|Nor|2009-08-07|ap_proxy_canonenc: does not recode all high-byte c|
|47665|Inf|Blk|2009-08-09|Apache service well launched but blank Screen     |
|47691|New|Enh|2009-08-12|libtool invocations should use --tag              |
|47693|Opn|Nor|2009-08-13|GET request has race condition w.r.t. replacement |
|47706|Inf|Nor|2009-08-19|(20014)Internal error: proxy: error reading status|
|47716|New|Min|2009-08-20|LimitRequestFieldSize and friends not merged well |
|47719|Opn|Enh|2009-08-20|Broken symbolic link (symlink) causes wrong ErrorD|
|47723|New|Nor|2009-08-22|suEXEC and low RLimitMem gives "crit: invalid uid"|
|47743|Inf|Nor|2009-08-26|mod_so segfaults at server startup in ap_find_load|
|47753|New|Nor|2009-08-27|output and error channels not explicitly passed fo|
|47778|Opn|Enh|2009-09-03|wrong exit value on graceful restart              |
|47780|New|Nor|2009-09-03|Critical errors should be marked by time and level|
|47807|Inf|Nor|2009-09-09|Proxy dialog error with Apache 2.2.13             |
|47808|New|Maj|2009-09-09|Child process core dumps when enabling CRL        |
|47814|Inf|Maj|2009-09-10|openssl_pkcs7_sign error                          |
|47838|New|Enh|2009-09-14|Ability to Dynamically Inject Current Time Into a |
|47874|New|Nor|2009-09-18|mod_fcgid crashes if added during restart         |
|47895|New|Maj|2009-09-24|Incorrect 413 error handling                      |
|47908|New|Min|2009-09-27|'invalid result code' in error_log                |
|47981|New|Nor|2009-10-12|allow language specific html-versions (index.html.|
|47982|New|Nor|2009-10-12|correctly interprete non-standard HTTP_ACCEPT_LANG|
|47988|New|Nor|2009-10-12|Segmentation fault                                |
|47989|New|Nor|2009-10-13|Junk string appended to compressed dynamic content|
|47994|New|Enh|2009-10-14|ScriptInterpreterSource apparently broken in Windo|
|48020|New|Nor|2009-10-17|KCP+ Opera support for mod_auth_digest            |
|48037|Inf|Nor|2009-10-21|mod_proxy_http does not handle asynchronous keepal|
|48045|New|Nor|2009-10-23|Apache 2 initgroups alert, Max OS X, abnormal exit|
|48057|New|Nor|2009-10-26|mod_fcgid creates 1 more process then allowed     |
|48094|New|Nor|2009-11-01|Avoid a race condition in close_worker_sockets()  |
|48107|New|Maj|2009-11-02|Mutual Authentication: Order in ca-bundle influenc|
|48115|New|Enh|2009-11-03|Duration to receive the request, generate response|
|48130|New|Maj|2009-11-04|DAV operations on large filesets consume all the O|
|48154|New|Nor|2009-11-06|Requests through mod_isapi are not parsed by HTTP_|
|48164|New|Enh|2009-11-09|add new parameters to rotatelogs                  |
|48219|New|Nor|2009-11-17|Retrying the worker for seems to omit POST variabl|
|48228|New|Nor|2009-11-18|Renegocation requires multiple client authenticati|
|48246|New|Enh|2009-11-19|Check permissions on file/directory specified for |
|48254|New|Trv|2009-11-20|Bogus "DocumentRoot does not exist" warning when s|
|48283|New|Nor|2009-11-25|Proxy errors since httpd 2.2.12 with Tomcat 6.0.20|
|48291|New|Maj|2009-11-26|mod_substitute loops                              |
|48295|Opn|Nor|2009-11-27|ProxyPassReverseCookiePath: Not changing path corr|
|48301|New|Enh|2009-11-30|Feature request: improved connection status report|
|48309|New|Maj|2009-11-30|libapreq2-2.12: "make test" fails at request.t and|
|48312|Opn|Nor|2009-11-30|ProxyPassReverseCookiePath: Not changing path corr|
|48316|Inf|Nor|2009-12-01|ap_run_insert_filter doesn't work in cache_url_han|
|48354|New|Enh|2009-12-08|void ap_custom_response is not supporting the bina|
|48360|New|Enh|2009-12-09|provide sample configuration file for inclusion in|
|48361|New|Enh|2009-12-09|Add global server option for specifying desired DS|
|48364|Opn|Nor|2009-12-10|PHP-generated pages are not cached in spite of per|
|48369|New|Enh|2009-12-10|add option to automatically restart if a script is|
|48431|New|Nor|2009-12-22|Error logging doesn't work when configured to use |
|48440|Inf|Cri|2009-12-23|Segmentation Fault                                |
|48449|Inf|Nor|2009-12-28|make distclean removes core.c and core_filters.c  |
|48465|Opn|Enh|2009-12-30|Support TCP to connect to backends                |
|48499|New|Nor|2010-01-06|mod_rewrite can't redirect to files with ? in them|
|48500|New|Nor|2010-01-06|mod_mbox mishandles right-click to open msg in new|
|48508|New|Nor|2010-01-07|BalancerMember doesn't accept nocanon directive   |
|48549|New|Enh|2010-01-14|Add Cache-Control s-maxage support                |
|48576|New|Nor|2010-01-19|MOVE or COPY in WebDAV fails with 404 when file ex|
|48585|New|Enh|2010-01-20|mod_cache no longer caches expired content        |
|48602|New|Enh|2010-01-23|use asynch ldap_compare so LDAPTimeout applies    |
|48623|New|Maj|2010-01-26|AuthLDAPURL syntax is not RFC-compliant, prevents |
|48639|New|Enh|2010-01-29|Add htcacheclean as a core monitored process      |
|48652|New|Maj|2010-02-01|"AuthType form" fails if a password contains  '&' |
|48659|New|Maj|2010-02-02|Problem with accents in filename and byte serving |
|48687|New|Nor|2010-02-05|mod_rewrite ignores trailing dot in request URI on|
|48705|New|Enh|2010-02-08|flag to allow newlines in the error log as opposed|
|48712|New|Enh|2010-02-09|Add UID and GID to status page                    |
|48719|New|Nor|2010-02-09|[BUG] mod_proxy_ajp return wrong error message whe|
|48721|New|Nor|2010-02-10|[Patch] Add ProxyAllow to mod_proxy               |
|48731|New|Maj|2010-02-11|Prefork not creating processes after 10 servers ar|
|48732|New|Nor|2010-02-12|[BUG] environment variable SCRIPT_NAME output erro|
|48769|New|Nor|2010-02-18|[PATCH] Processes in the busy list should not be k|
|48777|New|Maj|2010-02-19|proxy balancer not detecting correctly when host (|
|48780|New|Enh|2010-02-19|Enable mod_authnz_ldap to accept valid client cert|
|48792|New|Enh|2010-02-22|httpd util apachectl returns wrong status informat|
|48805|New|Nor|2010-02-23|Corrupted response for HTTPS + KEEPALIVE=ON       |
|48808|New|Enh|2010-02-24|mod_authz_owner support for POSIX access control l|
|48819|Inf|Nor|2010-02-25|After users login on the web page, the page does n|
|48842|Inf|Nor|2010-03-02|mod_log_config logs the full size of the file inst|
|48880|Opn|Nor|2010-03-09|error on make                                     |
|48888|New|Nor|2010-03-10|DOCTYPE definitions nearly 11 years out-of-date   |
|48920|New|Enh|2010-03-15|Breadcrumbs on mod_autoindex path                 |
|48921|Inf|Nor|2010-03-16|mod_mem_cache crash, version 2.2.15.0             |
|48937|New|Enh|2010-03-18|Feature proposal - support sasl_bind              |
|48949|Inf|Cri|2010-03-20|fcgid processes never get killed after graceful re|
|48958|New|Nor|2010-03-22|mod_ldap, ldap credential cache & graceful restart|
|48987|New|Trv|2010-03-25|typo in polish translation of HTTP_UNAUTHORIZED.ht|
|49037|New|Enh|2010-04-02|SSLVerifyClient require_no_ca                     |
|49043|New|Maj|2010-04-04|Using ssi include directive overwrites QUERY_STRIN|
|49058|New|Nor|2010-04-06|Prefork MPM tries to accept on closed listener soc|
|49067|New|Nor|2010-04-08|FTPOptions ShowUnAuthorizedFiles does not work    |
|49068|New|Nor|2010-04-08|UTF-8 URL Encode error                            |
|49087|New|Maj|2010-04-11|MSI installation reports "interrupted installation|
|49114|New|Maj|2010-04-13|NTFS junction directories missing from directory l|
|49123|New|Nor|2010-04-14|mod_proxy_ajp does not send the client's SSL chain|
|49131|New|Nor|2010-04-15|Very long URLs cause 404 or 403 errors with SetAct|
|49133|New|Maj|2010-04-16|Windows service recovery options do not work for A|
|49157|New|Nor|2010-04-20|Issues with xml interface for balancer manager    |
|49187|New|Nor|2010-04-26|Crash mod_mem_cache and mod_svn                   |
|49199|New|Enh|2010-04-27|Implement LDAP scope-aware caching in mod_ldap    |
|49220|New|Nor|2010-04-29|feature request for being able to disable FcgidWra|
|49239|New|Blk|2010-05-01|Apache mod_ssl gives coredump with openssl 0.9.8  |
|49277|New|Nor|2010-05-12|Expose a variable to identify SSL Session renegoti|
|49283|New|Nor|2010-05-12|Language of dates on SSI                          |
|49285|New|Enh|2010-05-13|Relative (local to current directory) URLs do not |
|49348|New|Enh|2010-05-27|[mod_log_config] Output log file name format capab|
|49385|New|Maj|2010-06-03|mod_disk_cache server side included files are inte|
|49387|Inf|Cri|2010-06-03|Unable to modify default charset setting to UTF-8 |
|49391|New|Nor|2010-06-05|mod_disk_cache needs to register a cleanup to kill|
|49396|New|Enh|2010-06-06|PATH_INFO normalization, especially relating to vo|
|49427|New|Nor|2010-06-11|mod_cgid and mod_cgi do not return proper value wh|
|49433|New|Enh|2010-06-13|improving info in server status                   |
|49439|New|Nor|2010-06-14|Bug in mod_userdir which prevents suexec from runn|
|49504|New|Nor|2010-06-25|Solaris 10/x64 worker graceful restart problem    |
|49532|New|Nor|2010-06-30|mod_cache: Set-Cookie headers are appended to cach|
|49553|New|Min|2010-07-05|Set QoS bits via APR2 API instead                 |
|49568|New|Maj|2010-07-07|Apache mod_authnz_ldap built with the MS LDAPSDK d|
|49632|Inf|Nor|2010-07-21|mod_authnz_ldap denies users when search is perfor|
|49633|New|Enh|2010-07-21|Handle AD primary groups in mod_authnz_ldap       |
|49642|New|Nor|2010-07-23|mod_rewrite mistakes encoded question mark as path|
|49643|New|Nor|2010-07-23|WebDav plus mod Negotiation causes directory creat|
|49676|New|Nor|2010-07-30|directory with german umlauts are indented by one |
|49680|New|Maj|2010-07-30|Perl script are not running on Win32, Apache 2.2.1|
|49684|New|Enh|2010-08-01|enhancement for ipv6 implementation               |
|49699|New|Nor|2010-08-03|Inconsistent Keep-alive from proxy to the origin s|
|49715|New|Maj|2010-08-06|ProxyPassMatch Url Encoder Problem                |
|49717|New|Enh|2010-08-06|PATCH: Enable SSL Timeout                         |
|49737|Inf|Nor|2010-08-10|order allow,deny does not work on IPv6            |
|49743|New|Maj|2010-08-12|SSI 'echo encoding="(url/none)"' bug              |
|49746|Opn|Enh|2010-08-12|mod_rewrite urlencode option                      |
|49766|New|Maj|2010-08-17|POST request on CGI script generating empty body c|
|49771|New|Nor|2010-08-17|After graceful restart using mod_proxy_ajp, couldn|
|49772|New|Nor|2010-08-18|mod_deflate kicks itself out on Content-Range resp|
|49798|Opn|Nor|2010-08-22|[mod_log_config] Piped Log scripts process cause w|
|49807|New|Enh|2010-08-23|hard to force Content-Type header for non static f|
|49810|New|Nor|2010-08-23|Mod_autoindex output of header/body/footer scrambl|
|49815|New|Enh|2010-08-24|Enable caching for HTTP Range requests / 206 respo|
|49829|New|Trv|2010-08-26|CGI index command line arguments excessively escap|
|49832|New|Enh|2010-08-26|void ap_custom_response is not supporting the bina|
|49859|Opn|Nor|2010-09-01|url with additional filepath generates bad environ|
|49921|New|Nor|2010-09-13|Trailers in chunked http requests are not handled |
|49926|New|Enh|2010-09-14|New option for mod_log_forensics or mod_log_config|
|49980|New|Nor|2010-09-22|can't use a FIFO for SSL key file; mod_ssl checks |
|49981|New|Enh|2010-09-22|Requesting SSLCertificateKeyFile Dialog functional|
|49990|New|Nor|2010-09-23|Feature request: implement ExpiresActive reset    |
|49996|New|Nor|2010-09-24|Proxied ErrorDocument returns 200 OK response code|
|49997|New|Nor|2010-09-24|wrowe promised me...                              |
|50004|New|Nor|2010-09-26|per-dir rewrite without DocumentRoot or RewriteBas|
|50011|New|Cri|2010-09-27|error running apache, and installing apache as a s|
|50024|New|Min|2010-09-29|Mod_cache/mod_mem_cache and mod_security combinati|
|50038|New|Enh|2010-10-01|What Directives apply to a file/directory? Resulta|
|50041|New|Min|2010-10-04|(9)Bad file descriptor: apr_socket_accept: (client|
|50051|New|Nor|2010-10-07|Log PID in first entry logged for each request    |
|50061|New|Nor|2010-10-08|Semicolon character '%3B' seems to be decoded to '|
|50082|New|Nor|2010-10-12|apachectl status returns incorrect exit code      |
|50112|New|Nor|2010-10-18|buildconf broken in two places                    |
|50116|New|Nor|2010-10-19|Apache fragments packets unnecessarily            |
|50151|New|Nor|2010-10-25|Software caused connection abort and apache proces|
|50155|Inf|Nor|2010-10-25|httpd -s attempts to read SSL certificates        |
|50172|Inf|Nor|2010-10-28|Digest allows access bypassing secuity            |
|50227|New|Enh|2010-11-07|Option to fail SSL handshake for diverted SNI conn|
|50237|Inf|Nor|2010-11-08|webdav LOCK access with multiple threads to same f|
|50261|New|Nor|2010-11-12|graceful restart with multiple listeners using pre|
|50262|New|Nor|2010-11-12|mod_rewrite log ip address vs hostname            |
|50274|New|Nor|2010-11-15|always pass CONTENT_LENGTH to the application     |
|50278|New|Nor|2010-11-16|-DFOREGROUND and ap_unixd_killpg()/ap_os_killpg() |
|50290|Inf|Nor|2010-11-18|vanilla apache 2.2.17 installation crashes (lib-ap|
|50296|New|Nor|2010-11-18|LDAPVerifyServerCert and possibly LDAPTrustedMode |
|50317|New|Nor|2010-11-22|Possible error in mod_cache's "Avoiding the Thunde|
|50336|New|Min|2010-11-25|PUT failures do not emit Allow:                   |
|50344|New|Nor|2010-11-26|ProxyPass does not handle different protocols when|
|50357|New|Enh|2010-11-28|improve matching mechanisms for mime type and enco|
|50372|New|Enh|2010-11-29|any reason for allowing ModMimeUsePathInfo only in|
|50390|New|Nor|2010-11-30|WARNING: Unrecognized options : --disable-ipv6    |
|50402|New|Nor|2010-12-02|SetEnv proxy-sendchunks is ignored for small amoun|
|50412|New|Nor|2010-12-04|if IndexOptions +XHTML, the correct MIME type shou|
|50423|Inf|Nor|2010-12-06|Apache is terminated with signal 11, Segmentation |
|50427|New|Nor|2010-12-07|Windows>=Vista+mod_auth_digest+command line=proble|
|50432|New|Enh|2010-12-08|add PCRE-mode for file based matches              |
|50436|New|Enh|2010-12-08|VirtualHost could behave like people expect it to |
|50444|New|Enh|2010-12-09|Pre-close logging handles in cgid agent           |
|50456|Inf|Nor|2010-12-10|Invalid Error 413 crash Apache                    |
|50464|New|Blk|2010-12-13|undefined reference to `BIO_set_callback' `BIO_set|
|50466|Inf|Maj|2010-12-13|httpd process doesn't recycle                     |
|50473|New|Maj|2010-12-14|zlib.dll Problem                                  |
|50521|New|Nor|2010-12-25|Comment at top of sample main config file is wrong|
|50525|New|Nor|2010-12-28|Header directive won't edit Location header from P|
|50530|New|Enh|2010-12-29|Provide rate limiting for failed authentication at|
|50532|New|Enh|2010-12-30|Mail protection                                   |
|50551|New|Nor|2011-01-06|Some proxied connections ignore ttl setting       |
|50562|Opn|Cri|2011-01-09|wrong PATH_INFO CGI environment with non-ASCII UTF|
|50584|New|Enh|2011-01-14|Add error message when RequestReadTimeout triggere|
|50592|New|Maj|2011-01-15|httpd dumps core on an IPv6 only system           |
|50602|New|Nor|2011-01-17|non thread safe functions used in apache httpd pro|
|50619|New|Min|2011-01-19|After changing resolv.conf signaling httpd doesn't|
|50628|New|Blk|2011-01-21|Core dump happens with Apache 2.2.15 using openssl|
|50630|New|Nor|2011-01-21|Apache return 500 error with authentication by LDA|
|50644|New|Enh|2011-01-24|Add support for maximum number of requests per Kee|
|50654|New|Nor|2011-01-25|FileETag ContentMD5 & Filename, optimisation to Co|
|50693|New|Nor|2011-01-31|AllowOverride Options=(not Foo) should permit no-o|
|50704|Inf|Nor|2011-02-01|mod_cache doesn't cache MultiViews                |
|50712|New|Maj|2011-02-02|Restart button only stops the server ...and do not|
|50727|New|Nor|2011-02-07|ISAPI EXTENSION_CONTROL_BLOCK Missing PostData wit|
|50765|New|Enh|2011-02-11|Runtime Backend Pinning via balancer-manager      |
|50770|New|Nor|2011-02-14|a rotatelogs issue, if time changed               |
|50773|Inf|Nor|2011-02-14|Dav lock database corruption                      |
|50774|New|Enh|2011-02-14|Have a way to invalidate cache without other reque|
|50777|New|Nor|2011-02-14|Back port buildconf specifies AC_PREREQ(2.13) fix |
|50796|New|Enh|2011-02-16|record time between keepalives in access log      |
|50807|New|Maj|2011-02-18|mod_proxy fails to send FIN response when a FIN is|
|50814|New|Nor|2011-02-21|SSI exec not working on Windows (Apache 2.x)      |
|50848|New|Enh|2011-03-01|Content Negotiation type map file precedence could|
|50869|New|Enh|2011-03-04|Need directive to control use and timeout of sessi|
|50873|New|Nor|2011-03-04|httpd does not start properly when built from sour|
|50878|New|Nor|2011-03-05|redundant operation when calling apr_stat         |
|50891|New|Nor|2011-03-08|Apache rewrites WWW-Authenticate headers from CGI |
|50902|Inf|Maj|2011-03-09|on major load on the server, poll() hangs         |
|50916|New|Nor|2011-03-11|RewriteMap program: mod_rewrite sends request but |
|50926|New|Nor|2011-03-14|unexpected <Directory> file-matching behavior     |
|50942|New|Maj|2011-03-17|Apache 2.2.16 forward proxy is 5x times slower tha|
|50945|Opn|Nor|2011-03-18|AJP: Missing support for ErrorOverride            |
|50948|Opn|Nor|2011-03-19|Connection not closed when CGI dies waiting for PO|
|50954|New|Nor|2011-03-21|ProxyRemote doesnt use CONNECT method with https s|
|50959|New|Enh|2011-03-23|Add cache-manifest to the mime type list          |
|50976|New|Nor|2011-03-26|Apache losts client's ip (%a or %h) sometimes.    |
|50999|Opn|Nor|2011-03-30|it seems the configure wrong detect my apr-util ve|
|51001|New|Nor|2011-03-31|patch for hook ap_lua_run_lua_open                |
|51005|New|Enh|2011-04-01|Allow to use username in LDAP filter              |
|51006|New|Blk|2011-04-01|Apache consume all memory and swap when setup as r|
|51019|New|Enh|2011-04-04|[PATCH] Implementation of Asynchronous processing |
|51020|Opn|Nor|2011-04-04|[PATCH] Apache/mod_fcgid.so does not start in comp|
|51022|New|Nor|2011-04-05|Segmentation fault on PUT request                 |
|51030|New|Enh|2011-04-06|Way to terminate CGI immediatly after closing conn|
|51078|Inf|Nor|2011-04-18|[PATCH] mod_fcgid spawned CGI Processes gets orpha|
|51079|New|Enh|2011-04-18|[PATCH] mod_fcgid spawned CGI Process cannot imper|
|51080|New|Nor|2011-04-18|[PATCH] mod_isapi does not support Except:100-Cont|
|51103|Opn|Nor|2011-04-21|mod_reqtimeout does not drop connection and return|
|51104|Opn|Maj|2011-04-21|C++ support about httpd_config.h                  |
|51107|New|Min|2011-04-22|SetOutputFilter and SetInputFilter should allow "n|
|51118|New|Nor|2011-04-26|LDAP cache is cleared after graceful/restart and o|
|51127|New|Nor|2011-04-27|Make ProxyPassReverseCookiePath work as expected  |
|51168|New|Nor|2011-05-08|mod_status Total Traffic won't take account of int|
|51170|New|Nor|2011-05-09|I/O errors when using keep-alive + mod_ssl        |
|51174|New|Min|2011-05-09|SSLRequire predicates using OIDs unknown to openss|
|51186|New|Blk|2011-05-11|NEw Openssl 1.0.1 with new FIPS                   |
|51190|New|Min|2011-05-12|::/0 does not work with allow from and deny from  |
|51194|New|Nor|2011-05-13|FcgidWrapper does not support paths containing a s|
|51201|Inf|Nor|2011-05-15|Strange behavior REQUEST_METHOD & GET in mod_rewri|
|51223|New|Nor|2011-05-18|304 HTTP Not Modified strips out CORS headers     |
|51224|New|Nor|2011-05-18|mod_dav_fs should respect FileETag                |
|51239|New|Nor|2011-05-21|ap_get_client_block may block continuously sometim|
|51257|New|Nor|2011-05-24|Build failed when cross-compiling: ./gen_test_char|
|51258|Opn|Enh|2011-05-24|new features for mod_substitute                   |
|51296|New|Enh|2011-05-31|Dynamic engine support using SSLCryptoDevice suppo|
|51297|New|Nor|2011-05-31|Improve error handling during "UNLOCK"            |
|51303|New|Nor|2011-05-31|TraceEnable 500 error                             |
|51312|New|Nor|2011-06-01|mod_filter should support adding to the Vary heade|
|51322|New|Enh|2011-06-04|Prepend and append string to LDAP search parameter|
|51359|Inf|Enh|2011-06-11|Added shebang check for //! so that .js scripts wo|
|51365|New|Nor|2011-06-13|Mod_proxy mangles query string with mod_security  |
|51402|New|Nor|2011-06-21|"ForceLanguagePriority Fallback" not working as im|
|51406|New|Maj|2011-06-21|When listing files in subdirectories, the path is |
|51409|New|Nor|2011-06-21|Sorting options accepted by ls, but ignored       |
|51471|New|Nor|2011-07-04|<DirectoryMatch>ed IndexIgnore doesn't            |
|51479|New|Enh|2011-07-05|[PATCH] AB feature to optionally read in a reusabl|
|51491|New|Nor|2011-07-08|mod_dir breaks POSTs to URLs not ending in /      |
|51495|New|Nor|2011-07-11|mod_substitute cpu and memory limit               |
|51517|New|Maj|2011-07-16|mod_proxy_fcgi is not RFC 3875 compliant (SCRIPT_F|
|51522|Ver|Trv|2011-07-18|Wrong French translation in mpm.html ("Certains Mo|
|51542|New|Nor|2011-07-22|Apache HTTP Server vs PVS-Studio                  |
|51543|New|Nor|2011-07-22|Space in username not properly escaped in log file|
|51552|Inf|Cri|2011-07-25|Apache is not starting (2.2.15)                   |
|51573|New|Enh|2011-07-28|Easy way to erase log files                       |
|51576|Inf|Nor|2011-07-28|mod_rewrite rule stopped working                  |
|51600|New|Enh|2011-08-02|Loading the same certificate in multiple virtual h|
|51603|Inf|Maj|2011-08-02|Apache accepts completely bogus HTTP requests (pos|
|51607|Inf|Nor|2011-08-03|DBDPrepareSQL ( ap_dbd_prepare ) does not work cor|
|51629|New|Nor|2011-08-05|DocumentRoot check incorrect when running under ch|
|51674|New|Blk|2011-08-18|AJP Module Bad Request                            |
|51679|New|Min|2011-08-18|Code signature key expired                        |
|51689|New|Trv|2011-08-19|Cross compiling causes multiple Listen directives |
|51695|New|Trv|2011-08-20|Code clean up (ap_rputs merge)                    |
|51707|New|Nor|2011-08-22|ProxyPassReverse issues within <Location> (differe|
|51709|New|Nor|2011-08-23|ServerName/ServerAlias don't work if Host: header |
|51711|New|Nor|2011-08-23|mod_auth_digest have broken shared mem (nonce) cod|
|51718|New|Enh|2011-08-24|Feature Request: Add shorthand to redirect any Ser|
|51725|New|Nor|2011-08-26|Multiple Range: request accepted as "Range: n-m"  |
|51732|New|Nor|2011-08-29|Inconsistencies in log messages' verbosity levels |
|51747|New|Blk|2011-08-31|mod_fcgid loads entire request into memory while p|
|51757|Inf|Enh|2011-09-02|Add support for SASL auth in LDAP                 |
|51778|Inf|Cri|2011-09-07|while buliding(make) a unix source "httpd-2.2.20.t|
|51797|Inf|Maj|2011-09-10|Crash HTTPD(Windows)                              |
|51814|New|Enh|2011-09-14|mod_proxy in Apache HTTP 2.2 FIN_WAIT2 in server s|
|51858|Inf|Nor|2011-09-21|weird error for mod_rewrite with more then 3 param|
|51864|New|Nor|2011-09-22|mod_cache returns entire entity from origin server|
|51904|New|Nor|2011-09-28|output to stderr from cgi script causes script to |
|51951|New|Nor|2011-10-04|mod_mbox hang on some e-mails on press@a.o - was I|
|51964|Ver|Nor|2011-10-05|Documentation of RewriteRule flag skip unclear    |
|51965|New|Nor|2011-10-05|--with-z=DIR not being honored                    |
|51982|Opn|Nor|2011-10-06|ProxyPassReverse / balancer://cluster/ adds slash |
|51987|Inf|Nor|2011-10-07|RewriteRule doesn't work correctly with apache 2.3|
|51994|New|Enh|2011-10-07|Mod_authn_socache should have some way to flush th|
|52004|Ver|Trv|2011-10-10|Typo "indexe" in French translation of mpm.html   |
|52007|New|Nor|2011-10-10|Content-Length: 0 not set on proxy response       |
|52038|New|Nor|2011-10-16|NameWidth works incorrectly together with Charset=|
|52039|Inf|Nor|2011-10-16|Browser mode does not always work                 |
|52043|New|Nor|2011-10-17|Directories ".", "..", and "/" do not work correct|
|52081|New|Nor|2011-10-24|segfault if mbox files have unexpected names      |
|52090|New|Maj|2011-10-26|Apache thread hangs with error 500 when sending a |
|52120|Opn|Nor|2011-11-01|mod_cache edge case: uncacheable 304 sends cached |
|52123|New|Maj|2011-11-02|DoS: High memory usage in propfind                |
|52132|New|Nor|2011-11-03|[PATCH] process activity score calculated incorrec|
|52139|New|Nor|2011-11-05|Never Syntax Error on non-existent DocumentRoot   |
|52171|Ver|Nor|2011-11-13|confusing documentation of request phases         |
|52174|New|Enh|2011-11-13|Allow hard lower-limits on the number of fcgi serv|
|52178|New|Nor|2011-11-14|IPv6 IPs as ServerName not allowed                |
|52181|Ver|Nor|2011-11-14|mod_rewrite Technical Details Ruleset Processing d|
|52195|Inf|Nor|2011-11-16|Japanese texts are garbled on mailing list archive|
|52196|Inf|Nor|2011-11-16|winnt mpm, others mpm also have this bug. pool sha|
|52207|Inf|Maj|2011-11-18|Upgrade apache version from 2.0.59 to 2.2.12 or ab|
|52222|New|Nor|2011-11-21|IndexIgnore ignores parent directories in argument|
|52247|New|Nor|2011-11-26|mod_mbox gives up on unexpected message format    |
|52248|New|Nor|2011-11-26|Bugzilla version drop-down list does not offer "un|
|52252|New|Nor|2011-11-27|luajit support broken for (at least) luajit 2.0   |
|52253|Inf|Nor|2011-11-28|Timeout doesn't work. mod_proxy_balancer strongly |
|52264|New|Enh|2011-11-30|Update and complete balancer-manager XML output   |
|52269|Inf|Nor|2011-12-01|[mod_proxy] Apache reverse proxy status code trans|
|52275|New|Nor|2011-12-02|memory leak in proxy_ajp_handler                  |
|52298|Inf|Nor|2011-12-07|Can't enter website with client certificate on an |
|52301|New|Enh|2011-12-07|Error message "RSA server certificate ... CN ... d|
|52302|New|Enh|2011-12-07|Better documentation of how server name is determi|
|52304|New|Nor|2011-12-08|<Limit> Does Not Apply When URI Is Folder         |
|52313|New|Enh|2011-12-09|htdbm enhancement: options for colon-in-username, |
|52322|Inf|Enh|2011-12-13|Providing BBC developed httpd modules for inclusio|
|52342|New|Nor|2011-12-15|ap_internal_redirect dropping filters means incons|
|52370|New|Nor|2011-12-19|apreq_decode/url_decode length miscalculation     |
|52377|New|Enh|2011-12-20|Add Directives to assert user, group, and permissi|
|52383|New|Trv|2011-12-24|Instllation log typo                              |
|52391|New|Cri|2011-12-27|100% CPU usage while using Forward Proxy          |
|52395|New|Nor|2011-12-29|reload results in different end environment to res|
|52403|New|Nor|2011-12-31|FallbackResource doesn't work for non-existent PHP|
|52408|New|Nor|2012-01-01|Directoryindex matching automatically redirects   |
|52415|New|Nor|2012-01-03|LockFile placed inappropriately                   |
|52417|New|Nor|2012-01-03|HEADERS information in the file                   |
|52435|New|Nor|2012-01-06|Apache shutdown automatically                     |
|52439|New|Nor|2012-01-09|It should be possible to treat errors in .htaccess|
|52453|New|Enh|2012-01-11|Ability to configure --logfiledir                 |
|52465|New|Nor|2012-01-13|mod_dir is allowed to redirect proxy requests     |
|52481|New|Nor|2012-01-18|Rotatelog.exe crashes Apache after setting 256MB r|
|52485|New|Nor|2012-01-19|CPU load 100%                                     |
|52494|New|Enh|2012-01-22|allow the Action directive to point in the filesys|
|52495|New|Enh|2012-01-22|CACertificate, CADNCertificate, CARevocation, Cert|
|52501|New|Cri|2012-01-23|child pid 10824 exit signal Segmentation fault (11|
|52505|New|Nor|2012-01-23|Include with directory wildcards gives errors for |
|52509|New|Nor|2012-01-23|Resources protected by .htaccess file may not be a|
|52510|New|Cri|2012-01-23|Segmentation Fault 11                             |
|52520|New|Nor|2012-01-24|ProxyRemote & NoProxy directive can not take IPv6 |
|52532|New|Trv|2012-01-26|VirtualHost added TWICE to name-virtual-host list |
|52539|New|Nor|2012-01-26|Apache mod_dav 400 Bad Request for non-existent co|
|52546|New|Nor|2012-01-27|overwrite SERVER_PROTOCOL environment             |
|52573|New|Nor|2012-02-01|mod_speling case correction fails when URI has dou|
|52578|Opn|Enh|2012-02-02|Wrong "bytes sent" logged when connection is close|
|52594|New|Nor|2012-02-03|rpmbuild -ba errors out with "File not found by gl|
|52595|New|Nor|2012-02-03|requests with gzip+chunked encoded body don't prox|
|52605|Inf|Min|2012-02-05|Please allow request lines longer than 8k         |
|52612|New|Nor|2012-02-06|Default Service Account                           |
|52616|Opn|Enh|2012-02-07|SSLUserName uses SSL_CLIENT_S_DN insted of SSL_CLI|
|52617|New|Maj|2012-02-07|Visit the rewrite page from ServerAlias domain vho|
|52623|New|Nor|2012-02-08|does not build with pcre-8.30                     |
|52644|New|Nor|2012-02-12|document how SSL FakeBasicAuth works with strange |
|52668|New|Trv|2012-02-14|More future safe patch for old MSIE ssl-unclean-sh|
|52670|New|Trv|2012-02-15|please clarify the effect of SSLStrictSNIVHostChec|
|52683|New|Enh|2012-02-16|add a symlink option that rechecks the access perm|
|52700|Inf|Blk|2012-02-17|Not rendering html content instead displaying clie|
|52703|Inf|Maj|2012-02-18|SSL+SNI+client-auth "lost" after some time        |
|52710|New|Nor|2012-02-19|mod_fcgid should set PATH_INFO when configured in |
|52756|Inf|Trv|2012-02-24|proxy_html_module LoadModule line not created in h|
|52759|New|Cri|2012-02-24|Apache httpd child process consuming high CPU Util|
|52790|New|Nor|2012-02-28|ldap caching not sufficient                       |
|52795|Opn|Nor|2012-02-29|mod_fcgid fails to spawn process in C:\Program Fil|
|52806|New|Nor|2012-03-01|configure: --with-included-apr is not supported in|
|52807|New|Nor|2012-03-01|some random strings are accepted by "configure" as|
|52816|New|Nor|2012-03-03|Potential segfault in socache_shmcb_create        |
|52817|New|Nor|2012-03-03|Long directory path sucks (but it's really a valid|
|52822|New|Nor|2012-03-04|Quiet installation not fully quiet                |
|52824|Inf|Nor|2012-03-04|Conflicts between AllowOverride and AllowOverrideL|
|52828|New|Maj|2012-03-05|Child process is not replaced in Windows, after a |
|52832|New|Nor|2012-03-05|numerical configuration entry can be mistakenly in|
|52841|Opn|Nor|2012-03-06|[proxy_balancer:emerg] [pid 25593] AH01177: Failed|
|52851|New|Nor|2012-03-07|Core TimeOut directive doesn't work               |
|52860|New|Enh|2012-03-08|Support Transfer-Encoding: gzip                   |
|52865|New|Nor|2012-03-09|Crash by segmentation fault in mod_authn_core in A|
|52870|New|Cri|2012-03-09|100% CPU usage while using Forward Proxy          |
|52874|New|Enh|2012-03-09|Support Use TrustedFirst checking when verifying c|
|52884|New|Nor|2012-03-12|"localhost" leads to start failure                |
|52890|Inf|Nor|2012-03-12|--with-included-apr doesn't work when srclib/apr a|
|52891|New|Nor|2012-03-12|2.2 doesn't perform as well as 1.3                |
|52894|Inf|Nor|2012-03-13|Apache aborts abnormally when ChrootDir is set    |
|52927|Inf|Nor|2012-03-16|[Bug in httpd 2.2.4] [error] (70014)End of file fo|
|52933|New|Nor|2012-03-17|Child survives '-k stop', consuming lots of CPU   |
|52950|New|Nor|2012-03-20|Error when set AuthType to None with valid-user   |
|52963|New|Nor|2012-03-21|Typo in AuthLDAPURL RFC 2255 error message        |
|52975|New|Nor|2012-03-23|Receiving files is suboptimal                     |
|52976|New|Min|2012-03-23|Gratuitous string-duplication in module-configurat|
|52978|New|Enh|2012-03-23|Binding to an interface instead of an address     |
|52995|New|Nor|2012-03-28|httpd -V does not print the default Mutex         |
|53002|New|Nor|2012-03-29|<Location> and auth_form (trailing slash problem?)|
|53015|New|Nor|2012-03-31|missing apr_socket_close                          |
|53016|New|Nor|2012-03-31|missing apr_brigade_destroy                       |
|53023|New|Nor|2012-04-02|mod_rewrite RewriteCond parser error and documenta|
|53037|New|Enh|2012-04-05|clarify mod_ssl documentation on the UID/GID conte|
|53059|New|Nor|2012-04-10|Make httpd easier relocatable by using a variable |
|53098|New|Nor|2012-04-18|mod_proxy_ajp: patch to set worker secret passed t|
|53099|New|Enh|2012-04-18|feature request for mod_remoteip                  |
|53108|New|Enh|2012-04-19|clarification on url-path vs full filesystem path |
|53111|New|Nor|2012-04-20|1% of CMS sites expose database passwords         |
|53121|New|Nor|2012-04-22|Confusing documentation, gzip and deflate         |
|53149|New|Enh|2012-04-25|mod_ldap should/could use mod_socache             |
|53152|Opn|Nor|2012-04-26|RewriteRule documentation: Error about per-directo|
|53156|New|Enh|2012-04-27|CRL validation fails if CRL is missing            |
|53160|New|Cri|2012-04-29|Reverse Proxy mod_deflate doesn't zip back content|
|53183|New|Min|2012-05-03|mod_apreq2 entry point is apreq_module and not apr|
|53193|New|Nor|2012-05-04|SLVerifyClient optional_no_ca + SSLSessionCache = |
|53218|New|Blk|2012-05-11|ProxyPass worker name(http://localhost:3128/...|
|53233|New|Maj|2012-05-15|Internal error: proxy: error reading status line f|
|53239|New|Maj|2012-05-16|Httpd has problems delivering data on rate-limited|
|53253|New|Maj|2012-05-17|TCP_NOPUSH used with sendfile(2), cause transfers |
|53284|New|Nor|2012-05-24|crash                                             |
|53290|New|Maj|2012-05-24|memory usage                                      |
|53292|New|Min|2012-05-25|add support for HTTP status code 308              |
|53305|New|Nor|2012-05-28|404 errors when adding query string in a balancer |
|53313|New|Nor|2012-05-28|SSI #echo VAR fails (#include OK) if URI/URL has f|
|53319|New|Nor|2012-05-29|Multiple DirectoryIndex statements in the same con|
|53332|New|Nor|2012-05-30|Requests with chunked encoding have no body availa|
|53350|New|Nor|2012-06-01|mod_cache caching 403 responses Apahce 2.2.22     |
|53351|New|Nor|2012-06-02|make fails if layout begins on first line of confi|
|53388|Opn|Nor|2012-06-08|mod_proxy_balanser generates 503 when proxying to |
|53402|New|Trv|2012-06-12|Incorrect error message for mod_ldap params       |
|53461|Inf|Cri|2012-06-23|Compilation problems                              |
|53462|New|Nor|2012-06-25|mod_rewrite does not remove trailing slash when as|
|53479|New|Nor|2012-06-27|mod_rewrite [B] flag should percent-encode the spa|
|53483|New|Enh|2012-06-29|dangerous PCRE patterns in *Match directives      |
|53539|New|Maj|2012-07-12|content type and character set are changing when t|
|53554|New|Nor|2012-07-16|Wrong case for hexadecimal percent encoding [patch|
|53555|New|Maj|2012-07-17|Scoreboard full error with event/ssl              |
|53579|New|Cri|2012-07-20|httpd looping writing on a pipe and unresponsive (|
|53581|New|Blk|2012-07-21|FollowSymlinks doesn't work with DirectoryMatch an|
|53594|New|Enh|2012-07-24|ipad as webserver                                 |
|53595|New|Nor|2012-07-24|Media type qs parameters for MultiViews sent in Co|
|53612|Inf|Nor|2012-07-27|Reverse Proxy causing 500 error SSL proxy 1.0.1c O|
|53618|New|Nor|2012-07-29|proxy_worker_shared fields not maintained in threa|
|53634|New|Nor|2012-08-01|mod_cache returning HTTP 200 for nonexistent resou|
|53638|New|Nor|2012-08-02|Problem with shortcuts to bugzilla in http://httpd|
|53640|Inf|Maj|2012-08-02|make: Fatal error: Command failed for target `htpa|
|53643|New|Cri|2012-08-02|apache segfaults with mod_authn_dbd when dbd_min i|
|53646|New|Nor|2012-08-02|Invalid uniformly distributed balancing of request|
|53651|New|Nor|2012-08-03|Worker failure doesn't have same behaviour as work|
|53667|New|Enh|2012-08-07|Add an equivalent option to "JkOptions ForwardLoca|
|53669|New|Nor|2012-08-07|IndexOptions Incremental IndexOptions documentatio|
|53686|New|Enh|2012-08-09|Status "501 Not Implemented" sent very late       |
|53690|New|Nor|2012-08-09|Calls to semctl() trigger "uninitialized memory" w|
|53692|New|Nor|2012-08-10|mod_auth_form loses request body before login page|
|53693|Opn|Nor|2012-08-10|mod_fcgid performance suffers under increase in re|
|53704|New|Enh|2012-08-13|True online configuration is needed - via LDAP?   |
|53705|New|Nor|2012-08-13|Align server-status balancer display to balancer-m|
|53706|New|Enh|2012-08-13|Include a status display for mod_ldap when present|
|53722|New|Nor|2012-08-15|when -D NO_DETACH is used, no PID file should be c|
|53736|New|Nor|2012-08-17|/balancer-manager doesn't save runtime adjusted se|
|53757|New|Enh|2012-08-21|RewriteMap of type txt should allow specifying col|
|53767|New|Nor|2012-08-23|htcacheclean deletes stale "vary" header files eve|
|53772|New|Nor|2012-08-24|REDIRECT_URL not accessible in mod_proxy          |
|53787|New|Reg|2012-08-28|In forward proxy, doesn't cache disk anymore      |
|53823|New|Nor|2012-09-03|[patch] pure IPv6 only host fix (server/config.c) |
|53835|New|Cri|2012-09-06|mod_proxy_ajp truncate output when using deflate i|
|53870|New|Maj|2012-09-13|Deadlock in CRYPTO_add_lock with Apache 2.2.22 wor|
|53886|New|Nor|2012-09-18|can't start apache control in Redhat Linux 3 X64  |
|53899|New|Nor|2012-09-19|SSL_OP_ALL disables the mitigation code for CVE-20|
|53915|New|Nor|2012-09-21|Colon lost when :port is used in CacheKeyBaseURL  |
|53919|Inf|Enh|2012-09-21|DEFAULT_LOG_FORMAT is not RFC6302 compliant       |
|53923|New|Min|2012-09-23|Overriding CustomLog directive seems impossible   |
|53932|New|Nor|2012-09-25|PROPFIND doesn't support If, If-Match ETag predica|
|53947|New|Enh|2012-09-29|Feature Request, RewriteRule - ProxyPreserveHost f|
|53961|New|Nor|2012-10-04|Null sessions to the default vhost                |
|53970|New|Nor|2012-10-05|Network control directives affects internal subreq|
|53981|New|Nor|2012-10-08|move def of log_request_state from mod_log_config.|
|53988|New|Enh|2012-10-10|Missing FCGIWrapper script should not be a critica|
|53999|Opn|Nor|2012-10-13|Deadlock between procmgr_send_spawn_cmd()/proctabl|
|54030|New|Enh|2012-10-19|Support subjectAltName when (reverse-)proxying    |
|54033|New|Enh|2012-10-21|Parent languages are not ordered according to Acce|
|54072|New|Reg|2012-10-30|Syntax error front-end virtual-path too long      |
|54102|New|Enh|2012-11-05|new feature: automatic route detection            |
|54118|New|Nor|2012-11-08|Handle leak on parent httpd process when rotatelog|
|54126|New|Maj|2012-11-09|Mod_rewrite failing because of url in query string|
|54134|New|Enh|2012-11-11|new feature: ability to use multiple routes in sti|
|54136|New|Min|2012-11-11|balancer-handler shows xml not, when only xml para|
|54158|New|Nor|2012-11-16|Suggestion regarding 2.0 to 2.2 Upgrade Documentat|
|54183|Inf|Nor|2012-11-21|PROPFIND doesn't report getcontenttype property   |
|54215|New|Maj|2012-11-27|configure fails for httpd 2.2.3 with openssl 1.0.1|
|54221|Opn|Nor|2012-11-28|no ErrorLog prefix on CGI errors                  |
|54222|New|Min|2012-11-28|ServerTokens checking is not complete             |
|54223|New|Nor|2012-11-29|AH00554 error when runtime configuration Includes |
|54252|New|Nor|2012-12-05|acinclude.m4 requires -lz when linking with ssl st|
|54253|New|Nor|2012-12-05|mod_proxy_ftp doesn't handle/log partial or cancel|
|54255|New|Nor|2012-12-06|mod_deflate adjusts the headers "too late", should|
|54269|New|Maj|2012-12-09|mod_proxy_html documentation misses several things|
|54276|New|Nor|2012-12-10|rotatelogs not getting killed on graceful restart |
|54280|New|Nor|2012-12-11|mod_auth_form inline login not working with traili|
|54281|New|Nor|2012-12-11|Stick use Partial parameters from query string    |
|54289|New|Nor|2012-12-13|"ap_get_brigade" api is failing in "AP_MODE_SPECUL|
|54306|New|Enh|2012-12-15|add regexp versions of ProxyPassReverse, ProxyPass|
|54309|New|Trv|2012-12-15|clarification on the <Location> directive when use|
|54310|Opn|Nor|2012-12-15|mod_proxy_html drops meta elements with http-equiv|
|54319|New|Reg|2012-12-17|ProxyPass has no effect in <Location> if rewrite o|
|54339|New|Nor|2012-12-21|piped log entries > PIPE_BUF can be interleaved   |
|54342|New|Nor|2012-12-22|AuthnCacheSOCache can't pass args to socache provi|
|54343|New|Maj|2012-12-22|Add sanity checks for malloc() in mpm_winnt.c and |
|54358|New|Nor|2012-12-29|Status 500 when using ldap on Solaris because apr_|
|54363|New|Nor|2012-12-31|make time conversion caching functions thread-safe|
|54364|New|Nor|2012-12-31|Add ref to mod_fcgid docs                         |
|54365|New|Nor|2013-01-02|Connection closed by server during file transfer  |
|54366|New|Nor|2013-01-02|$sysconfdir/extra/httpd-dav.conf is not built base|
|54367|Opn|Maj|2013-01-02|Location header in response to PUT is not %-escape|
|54385|New|Enh|2013-01-08|SSL configuration independent from virtual hosts, |
|54401|New|Nor|2013-01-10|Suggest to make ProxyPassReverseCookieDomain accep|
|54415|New|Enh|2013-01-14|Please tell the root cause of mutex and scoreboard|
|54431|Inf|Blk|2013-01-16|Unable to start the Apache 2.4.3 windows service. |
|54498|New|Nor|2013-01-28|apache crash on any cgi request with certain http |
|54502|New|Nor|2013-01-29|Apache deadlock on epoll_ctl error (1000 process l|
|54512|Inf|Cri|2013-01-31|Apache hung                                       |
|54517|New|Nor|2013-02-01|proxy balancer: timeout or partial failure of back|
|54518|New|Nor|2013-02-01|mod_rewrite not adding Vary header                |
|54519|New|Nor|2013-02-02|httpd already running                             |
|54526|New|Nor|2013-02-05|mod_proxy_http ignores request abortion           |
|54543|New|Enh|2013-02-10|Compile regex only when need                      |
|54546|New|Nor|2013-02-11|httpd crashes on first HUP after change Listen dir|
|54549|New|Nor|2013-02-11|mod_mime AddEncoding and mod_negotiation fix_encod|
|54556|New|Enh|2013-02-13|New flag to add default rule in rule chain        |
|54560|New|Nor|2013-02-13|Potential segfault on return from ap_server_root_r|
|54563|New|Maj|2013-02-15|mod_webdav ignores quota                          |
|54578|New|Nor|2013-02-18|Bad docs or unchecked code for "LimitRequestFields|
|54605|New|Enh|2013-02-24|mod_negotiation should cache the info it generates|
|54608|New|Enh|2013-02-25|Support an option to allow page caching when using|
|54622|New|Nor|2013-02-28|shared memory cleanup                             |
|54626|New|Nor|2013-03-01|mod_authnz_ldap through util_ldap.c does not suppo|
|54633|New|Nor|2013-03-04|Invalid % encoding not rejected                   |
|54637|New|Nor|2013-03-05|Digest: secret not used                           |
|54640|New|Nor|2013-03-05|Slow transaction on a balance member is holding su|
|54649|New|Nor|2013-03-06|Incorrect PIDFILE prevent httpd restart           |
|54653|New|Min|2013-03-08|Suggestion to add https example for forward proxy |
|54656|New|Maj|2013-03-09|SNI and SSLProxyCheckPeerCN based on "connection" |
|54657|New|Nor|2013-03-09|DNS lookup failure for load balancer member does n|
|54683|New|Min|2013-03-13|Ignor directive ErrorDocument with null byte      |
|54699|Opn|Enh|2013-03-15|[feature request] cli webaccess tester            |
|54701|New|Cri|2013-03-15|Apache 2.4.3 Migration Issue Not loading the pages|
|54704|New|Nor|2013-03-15|Web Services stalling on it's own                 |
|54719|New|Nor|2013-03-18|httpd should check for and eventually create pid f|
|54752|New|Nor|2013-03-25|mod_ssl should not use uninitialized memory as ran|
|54782|New|Nor|2013-04-02|Memory Corruption errors - mpm_worker mod_perl    |
|54785|New|Nor|2013-04-02|Random crash when httpd server is stopped         |
|54793|New|Nor|2013-04-03|Socket timeout handler can delete uploaded files P|
|54794|New|Reg|2013-04-03|mod_wsgi|fcgid and subversion >= 1.7 issues       |
|54795|New|Nor|2013-04-03|'apxs -g -n' should be self-referring             |
|54796|Inf|Enh|2013-04-03|CustomLog should be able to use syslog as ErrorLog|
|54804|New|Nor|2013-04-05|mod_fcgid sends a Continue 100 response automatica|
|54813|New|Nor|2013-04-08|documnt the Require args used by authz_dbm includi|
|54816|Inf|Nor|2013-04-08|AH00566: request failed: invalid characters in URI|
|54817|New|Nor|2013-04-09|if prefix and sysconfdir are the same then http.co|
|54820|Inf|Cri|2013-04-09|REwriterule stops working                         |
|54824|New|Nor|2013-04-10|Spec file is missing libuuid-devel requirement    |
|54830|New|Enh|2013-04-11|Make SSLPProxyMachineCertificateFile configurable |
|54848|New|Nor|2013-04-15|Client field too short for IPv6 addresses         |
|54856|Inf|Enh|2013-04-17|NSCreateObjectFileImageFromFile                   |
|54858|New|Nor|2013-04-17|ld duplicate                                      |
|54861|New|Blk|2013-04-18|The number of connections with mysql is more      |
|54869|Inf|Nor|2013-04-19|Non-breaking space characters cause httpd to choke|
|54875|New|Nor|2013-04-23|Conditional request predicated on another URL's ET|
|54878|New|Nor|2013-04-23|Multiple Listen directives prevent server to start|
|54905|Inf|Cri|2013-04-29|Apache2 loops in child Segfaults                  |
|54910|New|Enh|2013-04-30|Format %{Foobar}o cannot be used to log Date and S|
|54911|New|Enh|2013-04-30|Allow logging of fields set by a backend server in|
|54914|New|Nor|2013-04-30|mod_dir DirectoryIndex breaks WebDAV PROPFIND / DE|
|54915|New|Nor|2013-04-30|GET on a WebDAV-enabled collection, with Directory|
|54918|New|Enh|2013-05-02|Implement RFC 6797 HTTP Strict Transport Security |
|54919|Inf|Nor|2013-05-02|*** glibc detected *** /usr/sbin/httpd: double fre|
|54930|New|Nor|2013-05-06|Allow empty message in ErrorDocument directive    |
|54934|Inf|Cri|2013-05-07|Apache is crashing intermittently with a message "|
|54936|New|Nor|2013-05-08|Some potential bugs reported by static analysis to|
|54949|New|Nor|2013-05-10|[PATCH] mod_cache: fix uninitialized tmppath varia|
|54952|Inf|Cri|2013-05-10|[Fri May 10 17:39:01 2013] [error] proxy: CLUSTER:|
|54953|New|Nor|2013-05-11|<VirtualHost 0.0.0.0:80> matches IPv6             |
|54958|New|Nor|2013-05-13|mod_deflate + mod_mime with SSI gives mixed compre|
|54962|New|Maj|2013-05-14|Apache will set incorrect Content-Length header an|
|54965|New|Enh|2013-05-14|Allow ProxyPassMatch in Directory context         |
|54976|New|Nor|2013-05-15|ProxyPass parameter "acquire" and "ttl" ignored in|
|54986|New|Maj|2013-05-16|httpd hanging on large form submit in ap_run_handl|
|54989|New|Nor|2013-05-17|Apache Segfaults on OS X at random - how can I dia|
|54993|New|Nor|2013-05-20|Critical error: File descriptor in bad state: apr_|
|54998|Ver|Nor|2013-05-21|Apache 2.4 terminates all SSL connections using an|
|55000|New|Nor|2013-05-21|Memory usage per process doubles when Apache is co|
|55021|New|Enh|2013-05-28|Support arbitrary sql to authentication username/p|
|55022|Inf|Cri|2013-05-28|child pid 3123 exit signal Bus error (10) - Apache|
|55034|Inf|Maj|2013-05-31|Apache 2.4.4 won't open more that 32k VH file hand|
|55039|New|Enh|2013-05-31|"RequestHeader edit" can't access environment vari|
|55045|New|Nor|2013-06-01|calls to gets() in test_find.c and test_parser.c  |
|55068|New|Enh|2013-06-06|root permissions when writing to per vhosts errorl|
|55069|New|Min|2013-06-06|notice message in error_log even when LogLevel err|
|55070|Opn|Enh|2013-06-06|mod_fcgid stderr always goes to main error log    |
|55072|New|Nor|2013-06-07|ErrorLog doesn't work well when apache shutdown   |
|55093|New|Nor|2013-06-12|[PATCH] mod_fcgid 2.3.7 truncates large posts on R|
|55096|New|Nor|2013-06-12|Make not running on httpd configure Solaris       |
|55098|New|Nor|2013-06-13|does not listen to IP4 when both IP4 address and I|
|55106|New|Enh|2013-06-17|ProxyErrorOverride considers response codes >= 400|
|55117|New|Nor|2013-06-18|GracefullTimeout for worker threads               |
|55148|Inf|Nor|2013-06-26|Error during SSL Handshake with remote server     |
|55152|New|Nor|2013-06-28|graceful restart adjusts to new balancer members, |
|55156|New|Nor|2013-06-28|mod_cache not respecting s-maxage cache-control he|
|55178|New|Nor|2013-07-01|[PATCH] mod_authnz_ldap SASL authentication suppor|
|55192|New|Trv|2013-07-03|htaccess error messages missing request context   |
|55193|New|Min|2013-07-03|ErrorLogFormat is ignored by some modules         |
|55226|New|Enh|2013-07-09|Request for "domain cluster" feature for mod_proxy|
|55234|New|Maj|2013-07-10|Working of attribute "protocol" attribute "protoco|
|55276|Inf|Enh|2013-07-17|Add REST API for load balancer for dynamic registr|
|55278|New|Nor|2013-07-18|mod_session's cookie may be empty, is repeated twi|
|55284|New|Nor|2013-07-20|repeatable segv                                   |
|55286|New|Nor|2013-07-21|Floating point exception (8) in mod_auth_digest   |
|55293|New|Nor|2013-07-22|Incorrect default MIME type for .woff fonts       |
|55306|New|Nor|2013-07-25|Error when copying svn repository, which contains |
|55323|New|Nor|2013-07-29|Double unescaped uri in sub request handler       |
|55327|New|Nor|2013-07-30|Segmentation fault when stopping Apache 2.4.6 norm|
|55340|New|Maj|2013-08-01|Listen for valid, unconfigured IP address passes c|
|55344|New|Nor|2013-08-02|missing ap_hook_monitor on windows                |
|55346|New|Nor|2013-08-02|When on filled quota filesystem, mod_fcgid init in|
|55348|New|Nor|2013-08-02|%h is not changed in logging, only %a             |
|55351|New|Enh|2013-08-04|allow ProxyPassReverseCookieDomain to automaticall|
|55362|New|Nor|2013-08-05|Apache httpd sends "400 Bad Request" to client due|
|55379|New|Min|2013-08-07|htdigest -c doesn't behave as described anymore   |
|55394|New|Nor|2013-08-09|apache 2.4 randomy crashes with signal 6          |
|55401|New|Enh|2013-08-11|document that force-proxy-request-1.0 implies prox|
|55415|New|Maj|2013-08-14|Proxy loop caused by ProxyErrorOverride and ErrorD|
|55431|New|Nor|2013-08-16|mod_negotation does not force the mime type listed|
|55433|New|Nor|2013-08-16|mod_proxy ignores final status code for aborted re|
|55443|Inf|Maj|2013-08-17|never gives 300 multiple choices                  |
|55445|New|Maj|2013-08-18|mod_socache_memcache ignores expiry, creating eter|
|55447|New|Enh|2013-08-18|make type-maps usable again, by making them access|
|55448|New|Nor|2013-08-19|segfault in set_max_workers at event.c:3194 on SIG|
|55449|New|Maj|2013-08-19|AH01185: worker slotmem_create failed --> slotmem |
|55452|New|Maj|2013-08-19|Redirect                                          |
|55458|New|Enh|2013-08-20|allow to configure what mod_ssl responds when one |
|55460|New|Enh|2013-08-21|allow service names to be used in the Listen direc|
|55467|New|Nor|2013-08-21|Support for OpenSSL custom TLS extensions and supp|
|55523|New|Trv|2013-09-04|auth_groupfile error log on access even though suc|
|55535|Inf|Nor|2013-09-08|incorrect check state parametr                    |
|55540|New|Cri|2013-09-09|mod_proxy gzip chunked issue (sample site provided|
|55549|New|Min|2013-09-11|AuthLDAPSubGroupAttribute doesn't do anything     |
|55550|New|Nor|2013-09-11|AuthLDAPSubGroupClass checking is very inefficient|
|55556|New|Nor|2013-09-13|apachebench (ab) doesn't use so_reuseaddr         |
|55557|New|Nor|2013-09-14|Some cppcheck reports                             |
|55573|New|Enh|2013-09-19|FileETag needs MTimeSeconds, MTime with granularit|
|55581|New|Enh|2013-09-22|Support concurrent connections to same FastCGI pro|
|55590|Inf|Maj|2013-09-24|second commit is failing if space is in file name |
|55596|New|Enh|2013-09-25|Add date format used by Expires header            |
|55607|New|Enh|2013-09-28|Re-set HOME environment variable to directory from|
|55615|New|Nor|2013-09-30|Connections are starved and not balanced when conc|
|55619|New|Nor|2013-10-02|Apache httpd reported 500 internal error when uplo|
|55627|New|Min|2013-10-04|Remove unnecessary APLOGNO() for trace logging per|
|55636|Inf|Cri|2013-10-07|long lost child came home - Apache is not respondi|
|55646|Inf|Nor|2013-10-10|non-2xx responses are not considered errors       |
|55654|New|Nor|2013-10-15|Extract variables from configuration without start|
|55670|New|Min|2013-10-18|Startup may fail silently at post_config          |
|55673|New|Nor|2013-10-18|httpd fails to start with SSLProxyMachineCertifica|
|55680|New|Enh|2013-10-20|online manual directory option doesn't exist      |
|55698|New|Maj|2013-10-24|Apache 2.2 + mod_fcgid 2.3.7 (CentOS 6.4) graceful|
|55700|New|Enh|2013-10-24|add something like RewriteOptions InheritDown     |
|55707|New|Nor|2013-10-25|SSLProtocol directive seem to be ignored over diff|
|55708|New|Nor|2013-10-25|Access violation in msvcrt.dll when calling getenv|
|55711|New|Min|2013-10-28|--enable-foo doesn't enable foo                   |
|55712|New|Nor|2013-10-28|Relative <!--#include virtual="../file.shtml"--> g|
|55720|New|Enh|2013-10-29|separate LDAP Bind timeout from LDAPTimeout       |
|55738|New|Nor|2013-11-03|PVS-Studio: few issues                            |
|55763|New|Nor|2013-11-09|raise roots soft RLIMIT_NPROC on linux for high ma|
|55774|New|Nor|2013-11-13|ab: optionally accept tls client certificate      |
|55781|New|Nor|2013-11-15|ajp_read_header: ajp_ilink_receive failed; 120006)|
|55786|New|Maj|2013-11-16|SSLVerifyClient and OptRenegotiate result in a 403|
|55787|New|Maj|2013-11-16|Chroot fails with "Cannot chroot when not started |
|55790|New|Maj|2013-11-17|mod_fcgid lockfile hardcoded to be in /tmp        |
|55793|New|Enh|2013-11-18|DTrace/SystemTap support                          |
|55808|New|Nor|2013-11-21|File integrity verification using MD5 and SHA1    |
|55819|Inf|Nor|2013-11-27|Closing connection behaviour                      |
|55828|New|Cri|2013-11-28|Httpd not start if use ProxyPass balancer://      |
|55834|New|Maj|2013-12-02|Apache does not honor the openssl library path giv|
|55838|New|Nor|2013-12-03|PHP files are being executed instead of downloaded|
|55841|New|Nor|2013-12-04|Misleading news items on bugfix releases ("This ve|
|55856|New|Nor|2013-12-08|YYEMPTY (-2) used as index into yytname (const arr|
|55866|New|Nor|2013-12-11|When ProxyPreserveHost is on, SSL expects the wron|
|55878|New|Nor|2013-12-12|mod_fcgid kills spawned processes too early       |
|55881|New|Nor|2013-12-13|segmentation fault at proxy_util.c:1546           |
|55883|New|Enh|2013-12-14|string callers of ap_expr should be able to transf|
|55887|New|Maj|2013-12-16|In Windows apache, when user access to /con, apach|
|55898|New|Enh|2013-12-17|[RFE] listen on unix socket?                      |
|55914|New|Reg|2013-12-20|child exit segmentation fault after apache gracefu|
|55919|New|Nor|2013-12-22|EPREFIX and dynamic modules                       |
|55942|New|Nor|2014-01-01|400 - Bad Request on POST (Windows Server 2012 Hyp|
|55952|New|Nor|2014-01-05|ab: SSL keep-alive fails with apr_pollset_poll: Th|
|55962|New|Enh|2014-01-06|mod_remoteip should not allow an external proxy to|
|55963|New|Nor|2014-01-07|Add application/ld+json to mime.types             |
|55981|Opn|Nor|2014-01-09|mod_mbox hang on some e-mails on user@openoffice.a|
|55985|Opn|Nor|2014-01-10|apache does not reopen logs when multiple graceful|
|55989|Opn|Enh|2014-01-11|write to error log upon RewriteRule [F]orbidden   |
|55991|New|Nor|2014-01-12|mod_charset_lite doesn't bail out on non-identity |
|56009|Inf|Cri|2014-01-14|Memory leak in httpd 2.4.3 over time with persista|
|56014|New|Nor|2014-01-15|MOd rewrite CO Cookie method the lifetime flag not|
|56028|New|Enh|2014-01-17|Add http/1.0, http/1.1 NPN advertisement to enable|
|56034|New|Nor|2014-01-20|CPU consumption due to circular linked list in ap_|
|56040|New|Enh|2014-01-21|should be able to remove Max-Age cookie parameter |
|56041|New|Enh|2014-01-21|should be able to disable session expiry increment|
|56052|New|Nor|2014-01-22|ap_session_load called multiple times for expired |
|56055|New|Nor|2014-01-23|Route is not extracted properly when a session coo|
|56064|New|Enh|2014-01-25|Optimize PNGs                                     |
|56067|New|Nor|2014-01-27|FallbackResource doesn't work if directory exists |
|56081|New|Maj|2014-01-28|Apache 2.2.26 SIGSEGVs when POST'ing data         |
|56091|Inf|Nor|2014-01-30|SSL handshake error when httpd compiled on Oracle |
|56098|New|Nor|2014-02-01|duplicate cookie                                  |
|56101|New|Cri|2014-02-03|Apache 2.4.6 ceases processing requests (scoreboar|
|56102|New|Nor|2014-02-03|SSL_CLIENT_S_DN_x509_0 is undefined in the environ|
|56109|New|Nor|2014-02-05|Cannot increase the read limit                    |
|56113|New|Nor|2014-02-06|dist commit messages missing from mail-archives di|
|56131|New|Nor|2014-02-12|ProxyPassReverse / zealously replaces Location hea|
|56135|New|Nor|2014-02-13|Add DC to list of x509 components                 |
|56152|New|Nor|2014-02-18|ProxyBlock does not accept network addresses      |
|56176|New|Nor|2014-02-21|mod_substitute truncates the response body if the |
|56188|New|Nor|2014-02-25|mod_proxy_fcgi does not send FCGI_ABORT_REQUEST on|
|56209|New|Nor|2014-03-03|Uninitialised variables in os/win32/ap_regkey.c   |
|56226|Ver|Nor|2014-03-06|per VirtualHost KeepAliveTimeout is not recognized|
|56229|New|Enh|2014-03-06|ocsp ProxyHost and ProxyPort support              |
|56230|New|Nor|2014-03-07|mod_access_compat can log a bogus client denied me|
|56235|New|Nor|2014-03-07|quotes should be optional around expr             |
|56247|New|Cri|2014-03-12|semaphore creation for proxypass                  |
|56250|New|Nor|2014-03-12|sbindir in config.layout for Apache has bin instea|
|56251|New|Nor|2014-03-12|Increase maximum length of FcgidInitialEnv string |
|56252|New|Enh|2014-03-12|make install as privileged user creates files not |
|56262|New|Nor|2014-03-14|ab does not work with extremely long cookies      |
|56264|New|Trv|2014-03-14|Confusing error with .htaccess rewrite to proxy wh|
|56270|New|Enh|2014-03-15|--with-ssl=/foo w/o pkgconfig needs help on AIX 64|
|56288|New|Enh|2014-03-19|rewrite URLs in style attributes                  |
|56289|New|Nor|2014-03-19|Buffer overflow in mod_proxy_html's string replace|
|56308|New|Nor|2014-03-24|1 second delay in handle request kills performance|
|56312|New|Nor|2014-03-25|Can't configure different balancing workers that c|
|56314|New|Nor|2014-03-25|exiting from MPM-worker child caused assert in apr|
|56326|New|Nor|2014-03-27|cache_quick_handler does not serve responses with |
|56331|New|Nor|2014-03-29|windows 'access denied' during revalidaton of reso|
|56333|New|Enh|2014-03-31|API to resume a SUSPENDED connection              |
|56362|New|Maj|2014-04-08|ldaps only works with port 636. Non-standard port |
|56379|New|Nor|2014-04-09|Number of columns in the results returned from pgs|
|56395|New|Enh|2014-04-11|Allow SERVER_ADDR environment variable to be optio|
|56404|New|Nor|2014-04-12|endless loop  when connect to a website(https)  wh|
|56413|New|Blk|2014-04-15|can not restart httpd on centos 5.10 64bit        |
|56422|New|Nor|2014-04-17|authnz_ldap with other forms of authn can fail req|
|56457|New|Nor|2014-04-25|mod_proxy_html.c: 2 * cut'n'paste errors          |
|56473|New|Nor|2014-04-30|ETags don't change when headers do                |
|56475|New|Enh|2014-04-30|Allow TLS record size to be configured            |
|56483|New|Enh|2014-05-02|add disableKeepAlivePercentage similar to tomcat h|
|56493|New|Min|2014-05-06|mod_expires should not set expires in future for s|
|56495|New|Nor|2014-05-06|Application behind mod_proxy does not get SessionH|
|56500|Opn|Enh|2014-05-07|vhosts priority order with wildcard               |
|56504|New|Nor|2014-05-08|cannot build static support binaries              |
|56508|New|Nor|2014-05-09|Requiring SNI - SSLStrictSNIVHostCheck semantics  |
|56517|New|Enh|2014-05-12|Virtualhosts cannot inherit parent CustomLog      |
|56528|New|Enh|2014-05-15|"bad flags delimiter" - improve helpfulness       |
|56541|New|Nor|2014-05-18|Proxy 502's on large file post requests           |
|56559|New|Nor|2014-05-25|multiple unix sockets in one virtualhost fails    |
|56569|New|Nor|2014-05-27|Null CRC in gzip footer with mod_cgid and ErrorDoc|
|56587|New|Nor|2014-06-03|Many VirtualHost's with SSLEngine On              |
|56590|New|Enh|2014-06-04|(REST-) API for configuring balancer manager remot|
|56594|Inf|Nor|2014-06-05|mod_authn_dbd, mod_dbd and mod_ssl                |
|56598|New|Nor|2014-06-06|Content-Length header should be always interpreted|
|56621|New|Nor|2014-06-13|Rotatelogs.exe first start                        |
|56622|New|Nor|2014-06-13|mod_reqtimeout incorrectly applies timeouts to CON|
|56626|New|Nor|2014-06-15|Add info about rotatelogs to log rotation document|
|56633|New|Nor|2014-06-16|mod_auth_basic breaks mod_autoindex               |
|56645|New|Maj|2014-06-19|socket callback with timeout callback causes infin|
|56664|New|Nor|2014-06-24|Proxy retry timeout does not cope with system time|
|56697|New|Maj|2014-07-04|status page still shown while blocked             |
|56718|New|Nor|2014-07-14|Cleanup request Host headers when absolute URI are|
|56719|New|Nor|2014-07-14|parallel requests get served with delays          |
|56738|New|Enh|2014-07-17|Ability to extract route from cookie with regexp  |
|56740|New|Nor|2014-07-18|suspended_count not maintained properly with wstun|
|56750|New|Enh|2014-07-20|SuexecUserGroup replacement                       |
|56751|New|Maj|2014-07-20|Fails to properly mitigate Slow Post DoS attack   |
|56753|New|Nor|2014-07-21|mod_lua.so: symbol luaL_openlib: referenced symbol|
|56778|New|Nor|2014-07-28|while running make command i got this error       |
|56794|New|Nor|2014-07-31|Added AuthDBDFullAuthQuery option                 |
|56795|Inf|Nor|2014-07-31|Apache 2.4.10 Program received signal SIGPIPE, Bro|
|56818|Inf|Nor|2014-08-05|SetEnvIf may set invalid string length on empty st|
|56843|New|Enh|2014-08-12|Support different OCSP stapling max ages          |
|56868|New|Nor|2014-08-18|relative LuaRoot broken                           |
|56879|New|Nor|2014-08-22|Information disclosure                            |
|56889|New|Nor|2014-08-26|Close state never dies                            |
|56918|Opn|Blk|2014-09-06|error: 'ap_copy_scoreboard_worker' undeclared here|
|56926|New|Nor|2014-09-08|Filename causes AH02599 slotmem issue             |
|56933|New|Min|2014-09-09|not sure it's an appache bug : some browser want t|
|56942|New|Reg|2014-09-10|Unable to implement TRANSFER-CHUNKED:ENCODING with|
|56943|New|Nor|2014-09-10|mod_proxy_connect - AH02447: err/hup on backconn  |
|56977|New|Maj|2014-09-12|segfaults when using mod_mem_cache + mod_disk_cach|
|56986|New|Blk|2014-09-17|chunked Transfer-Encoding forbidden: /test/test.dl|
|57014|New|Cri|2014-09-24|Incorrect test for CC_FOR_BUILD prevents build (on|
|57023|New|Nor|2014-09-26|Socache shmcb don't cache file bigger than 11k    |
|57028|New|Enh|2014-09-27|mod_spdy - support Apache 2.4                     |
|57044|New|Nor|2014-09-29|[PatchAvailable] Use base64url in mod_unique_id ('|
|57045|New|Nor|2014-09-30|dumpio output strings are missing                 |
|57046|New|Enh|2014-09-30|Add additional parameter to enable check URL befor|
|57056|New|Maj|2014-10-03|Rewrite port is taken into hostname               |
|57067|New|Nor|2014-10-08|A proxy worker both standalone and balancer member|
|57069|New|Nor|2014-10-08|apache ssl timeout during chunked request in rever|
|57073|New|Cri|2014-10-09|Intermittent Connection Issues using default httpd|
|57085|New|Enh|2014-10-14|Implement Proxy Protocol in httpd                 |
|57087|New|Nor|2014-10-14|mod_proxy_fcgi doesn't send cgi CONTENT_LENGTH var|
|57100|Ver|Nor|2014-10-16|"SSLProtocol ALL" is ignored for virtual hosts    |
|57101|New|Enh|2014-10-16|[PATCH] Better error reporting when child spawn fa|
|57109|New|Nor|2014-10-17|GPG verification examples are wrong               |
|57119|Opn|Enh|2014-10-20|Suppress address reuse / DNS cache in mod_proxy   |
|57121|New|Nor|2014-10-21|ocsp stapling should not pass temporary server out|
|57131|New|Nor|2014-10-22|OCSP Stapling scalability concern                 |
|57159|New|Min|2014-10-28|mod_ssl OCSP Stapling directives don't support per|
|57160|New|Nor|2014-10-29|httxt2dbm doesn't generate files on NAS           |
|57174|New|Nor|2014-10-31|Update windows visual studio build                |
|57210|New|Nor|2014-11-14|LuaHookMapToStorage not firing in per-directory co|
|57211|New|Enh|2014-11-14|Config-time options                               |
|57212|Opn|Nor|2014-11-14|Headers returned by scripts are limited to 8190 by|
|57218|New|Nor|2014-11-15|[Feature Request] Apache Bench (AB) to output a cs|
|57219|New|Nor|2014-11-15|ApacheBench quits unexpectedly with high concurren|
|57220|New|Nor|2014-11-15|[Feature Request] Add option to ApacheBench to giv|
|57228|New|Nor|2014-11-17|glibc detected *** httpd: double free or corruptio|
|57229|New|Maj|2014-11-17|mod_sed dies on long lines                        |
|57286|New|Nor|2014-11-29|Symbolic links are not honoured                   |
|57298|New|Min|2014-12-02|RewriteBase inside FilesMatch behaves oddly       |
|57299|New|Enh|2014-12-02|mod_session_dbd should not make a database call pe|
|57300|New|Enh|2014-12-02|mod_session_dbd should not save the session at eac|
|57301|New|Enh|2014-12-02|Add SessionMaxAgeAbsolute Directive               |
|57304|Inf|Nor|2014-12-03|MySQL DBD Authentication Incompatible with SSL    |
|57311|New|Nor|2014-12-04|BalancerMember enclosed by <If> gives syntax error|
|57313|New|Nor|2014-12-05|The DefaultType directive has been removed        |
|57327|New|Nor|2014-12-08|mod_ssl seg fault on exit                         |
|57334|Ver|Maj|2014-12-09|Segmentation fault in SSL_renegotiate at ssl_lib.c|
|57337|New|Nor|2014-12-10|Content negotiation fails with conditional Redirec|
|57339|New|Enh|2014-12-10|ErrorLogFormat doesn't allow logging in Internet d|
|57360|New|Nor|2014-12-17|Fail gracefully on certificate/key mismatch       |
|57372|New|Nor|2014-12-19|httpd will lookup every home directory while start|
|57374|Ver|Nor|2014-12-19|Event MPM: Wrong KeepAliveTimeout when system cloc|
|57379|New|Nor|2014-12-20|[patch] Makefile.in  with mpm-shared, cgi and cgid|
|57383|New|Cri|2014-12-21|Error retrieving Report: An Existing connection wa|
|57386|New|Blk|2014-12-22|html5 lost some comments                          |
|57398|New|Maj|2014-12-26|AH01075: Error dispatching request to : (passing b|
|57399|New|Nor|2014-12-28|Many unnecessary CPU wakeups per second           |
|57406|New|Nor|2014-12-31|cgi-bin script is not executing                   |
|57412|New|Maj|2015-01-04|rewrite rules causes duplicate requests           |
|57416|New|Nor|2015-01-06|htcacheclean thinks the cache is smaller than it a|
|57424|Opn|Nor|2015-01-07|mod_rewrite not using ap_context_document_root    |
|57436|New|Enh|2015-01-12|Option to strip extra data after websocket request|
|57439|New|Enh|2015-01-13|Allow to change body timeout per location         |
|57448|New|Nor|2015-01-16|SSI <!--#set --> cannot capture backreferences fro|
|57453|New|Maj|2015-01-17|403 error when virtualhost configured with non-exi|
|57471|New|Nor|2015-01-20|Apache 2.4.10 Compilation fails when compiling aga|
|57477|New|Nor|2015-01-21|mod_auth_digest AH00052: child pid $pid exit signa|
|57483|New|Nor|2015-01-22|Omit "Keep-Alive" header on 1.1 connections       |
|57492|New|Nor|2015-01-24|incomplete chunked-transfered request body is not |
|57506|New|Nor|2015-01-27|<If> directive doesn't work within a <Location> se|
|57510|New|Enh|2015-01-28|Engine keyform support for private keys           |
|57511|New|Maj|2015-01-28|Opening plain TCP Socket on SSL port causes denial|
|57515|New|Nor|2015-01-30|Define/Undefine don't work reasonably outside of g|
|57519|New|Nor|2015-02-01|change SSLv2 to SSLv3 or remove SSLv2 support allt|
|57526|Opn|Maj|2015-02-03|Apache 2.2.29_openssl-1.0.1k_x86_64 Error creating|
|57529|Opn|Nor|2015-02-03|htcacheclean doesn't show the cached URL with '-a'|
|57585|New|Nor|2015-02-13|httpd fails to start if there is an IncludeOptiona|
|57590|New|Nor|2015-02-18|loading mod_proxy_http makes rewriteRule's [proxy]|
|57591|New|Nor|2015-02-18|DirectoryIndex directive cannot be overwritten    |
|57616|New|Maj|2015-02-23|AB - DNS roundrobin support                       |
|57624|New|Enh|2015-02-23|Provide support for http/2.0                      |
|57631|New|Nor|2015-02-24|Useless test in acinclude.m4                      |
|57632|New|Nor|2015-02-24|mod_systemd passes invalid default to APACHE_MODUL|
|57635|New|Nor|2015-02-25|meta-refresh is not rewritten by mod_proxy_html   |
|57636|New|Nor|2015-02-25|URLs without protocol are not rewriten by mod_prox|
|57641|New|Maj|2015-02-27|mod_substitute: Invalid merge order               |
|57646|New|Enh|2015-02-27|SSLEngine inside If directive                     |
|57660|New|Trv|2015-03-04|AB - free memory allocated by xmalloc and xcalloc |
|57680|New|Nor|2015-03-09|SSLSessionCacheTimeout has no effect              |
|57685|New|Nor|2015-03-10|Requests are denied while the mod_cgid daemon star|
|57691|New|Nor|2015-03-12|mod_proxy/proxy_util confuses UDS scheme with HTTP|
|57695|New|Nor|2015-03-12|[core:warn] [pid 1120] (101)Network is unreachable|
|57710|New|Nor|2015-03-15|Wildcard matching for logging headers             |
|57725|New|Enh|2015-03-18|ApacheBench: include http status code in gnuplot o|
|57742|New|Nor|2015-03-23|"reliable piped logging" doesn't work for ErrorLog|
|57745|New|Nor|2015-03-23|httpd exits 1 with no stderr when proxy_balancer_m|
|57746|New|Nor|2015-03-23|Apache hangs on startup using MPM event           |
|57751|Inf|Maj|2015-03-24|Problems with proxy reverse to websockets         |
|57756|New|Enh|2015-03-25|Config options for handling of pipelined request  |
|57757|New|Cri|2015-03-25|extern apr_xlate_t *ap_locale_to_ascii variable gi|
|57771|New|Nor|2015-03-27|cleanup_script uses incorrect connection ID       |
|57774|Inf|Nor|2015-03-28|httpd.conf <IfModule proxy_html_module> content er|
|57777|New|Nor|2015-03-30|Security concerns with documentation of AddHandler|
|57781|New|Nor|2015-03-31|disable reconnection after connection error       |
|57784|New|Enh|2015-03-31|[RFE] Multiple ErrorLog directives                |
|57785|Opn|Nor|2015-04-01|REDIRECT_URL is not suitable for use in server-gen|
|57795|Opn|Maj|2015-04-07|mod_proxy_wstunnel sometimes does not connect and |
|57800|New|Nor|2015-04-09|High CPU usage in ap_core_output_filter           |
|57807|New|Enh|2015-04-13|Build-configurable environment variable length    |
|57810|New|Nor|2015-04-13|Should apache ignore difference in trailing dot be|
|57813|New|Nor|2015-04-14|Rewrite 'pre-compressed content' recipe using 2.4 |
|57814|New|Nor|2015-04-14|Teach mod_deflate how to serve pre-comressed conte|
|57819|New|Nor|2015-04-15|Need a conventions document                       |
|57832|New|Enh|2015-04-19|Reduction of response splitting attacks consequenc|
|57853|Inf|Nor|2015-04-24|mod_proxy_http sends request with header 'Expect: |
|57876|New|Reg|2015-04-30|logresolve.exe on any Windows immediately crashes |
|57878|New|Nor|2015-04-30|Using UTF-8 for all languages, and avoiding html-e|
|57895|New|Min|2015-05-05|missing m4a mimeType in mime.types                |
|57911|New|Min|2015-05-09|Rewrite documentation unclear or wrong about what |
|57927|New|Maj|2015-05-13|Segmentation Fault at proxy_util.c:994            |
|57933|New|Min|2015-05-18|apr_port_t returns constant                       |
|57941|New|Nor|2015-05-21|config.status: line 331: syntax error near unexpec|
|57949|New|Enh|2015-05-25|new mod_ssl environment variable SSL_{CLIENT|SERVE|
|57950|New|Nor|2015-05-26|[patch] buildconf change hint in build to newer ap|
|57960|New|Nor|2015-05-27|PUT truncates response body; status_line appears t|
|57976|New|Cri|2015-05-30|Server threads stale when sending 500 status with |
|57978|New|Nor|2015-06-01|unix:/ works with any number of / slashes  except |
|57979|New|Nor|2015-06-01|can not turn change log level for mod_filter      |
|57996|New|Nor|2015-06-03|Symlinks erroneously not followed when target inod|
|57997|New|Nor|2015-06-03|Threads started during child_init don't block sign|
|57999|New|Nor|2015-06-04|ap_getparents() may remove start slash of uri     |
|58001|New|Enh|2015-06-04|Implement Forwarded header (RFC 7239) to mod_proxy|
|58007|New|Nor|2015-06-06|400 Bad Request with fully qualified domain name o|
|58025|New|Enh|2015-06-11|mod_authz_dbd : new dbd-query and AuthzDBDQuery op|
|58026|New|Nor|2015-06-11|return 421 status code when SNI and Host: header d|
|58044|New|Cri|2015-06-16|Error sintax 'lua_dump'                           |
|58050|New|Nor|2015-06-17|ErrorDocument does not always work                |
|58073|New|Nor|2015-06-24|Extremely long time for graceful restart          |
|58089|New|Nor|2015-07-01|mod_authz_host uses proxy IP even when mod_remotei|
|58097|New|Enh|2015-07-03|[feat] Preserve original connecting IP            |
|58101|New|Nor|2015-07-05|DeflateCompressionLevel inside vhost resets logfor|
|58107|New|Blk|2015-07-06|Httpd crashes on startup every time, dump file att|
|58109|New|Nor|2015-07-06|Apache on windows cannot handle the hash symbol (#|
|58118|Inf|Min|2015-07-09|mod_proxy_fcgi logs 503 when user aborts connectio|
|58120|New|Nor|2015-07-10|ProxyPassInherit does not work as expect          |
|58121|New|Nor|2015-07-10|ProxyHTMLMeta seems to ignore all <meta http-equiv|
|58129|New|Nor|2015-07-12|man pages are not generated correctly             |
|58132|New|Nor|2015-07-12|non-standard, non-traditional man page layout make|
|58135|New|Nor|2015-07-14|mod_cache sends client "if-Modified-Since" to back|
|58141|New|Nor|2015-07-15|Apache Service doesn't start when rotatlogs.exe pa|
|58142|New|Nor|2015-07-15|authz_core ignores loglevel                       |
|58158|New|Nor|2015-07-21|Not honoring HTTP spec with regard to Accept-Encod|
|58168|New|Enh|2015-07-21|Would like full request evaluation support in Rewr|
|58171|New|Nor|2015-07-22|ap_session_save saves the wrong session after a de|
|58177|New|Enh|2015-07-24|Mod Proxy forward trailers in http chunked request|
|58180|New|Enh|2015-07-24|ErrorDocument original URL in subsequent <Location|
|58181|New|Enh|2015-07-25|mod_expire should allow "minus" keyword same like |
|58188|New|Nor|2015-07-28|http2 mod_lua: support build with lua 5.2+        |
|58197|New|Nor|2015-07-31|apr-util-1.5.4 build against openldap - "could not|
|58225|New|Reg|2015-08-08|intermitant segfault 11 in session_identity_encode|
|58226|New|Nor|2015-08-08|XSS in Error Page                                 |
|58231|New|Nor|2015-08-11|RewriteCond can add "Host" to the Vary-Header     |
|58235|New|Enh|2015-08-12|Ability to allow from domain but with using forwar|
|58243|New|Nor|2015-08-14|rotatelogs goes infinite at startup               |
|58248|New|Nor|2015-08-17|Error 404 in use some characters of utf8 in url   |
|58257|New|Nor|2015-08-18|require ldap-group does not work if account-fullna|
|58278|Inf|Blk|2015-08-24|apache - mod_security Issue : apache no releasing |
|58280|New|Nor|2015-08-24|Backend connection not closed until timeout if cli|
|58288|New|Blk|2015-08-27|Semaphore amount increase until crash when enablin|
|58292|New|Nor|2015-08-27|FallbackResource breaks chunked encoding sometimes|
|58304|New|Nor|2015-08-30|Unexpected Warnings from Macro Use in 2.4         |
|58305|New|Nor|2015-08-30|mod_cgi documentation not clear about what is pass|
|58306|New|Nor|2015-08-30|documentation needs to make it clear which directi|
|58307|New|Nor|2015-08-31|Segmentation fault in child in "read(__nbytes, __b|
|58317|New|Min|2015-09-02|Error message AH01630 is missing file name on deny|
|58334|New|Min|2015-09-06|WebDAV HTTP access does not include meta tag for c|
|58335|New|Nor|2015-09-07|mod_authnz_ldap mismatch                          |
|58343|New|Nor|2015-09-08|The pdf files come up as a blank page.            |
|58354|New|Maj|2015-09-10|(20014)Internal error (specific information not av|
|58356|New|Blk|2015-09-10|Session jumping due to incorrect route            |
|58364|New|Reg|2015-09-11|Apache Server is restarted time to time (Release 2|
|58417|New|Min|2015-09-16|ApacheBench (ab) won't display Server Software of |
|58419|New|Nor|2015-09-16|ApacheBench (ab) doesn't work with keep-alives aga|
|58423|New|Reg|2015-09-17|Apache >= 2.4.8 PCRE_DUPNAMES causes build failure|
|58467|New|Maj|2015-09-29|Environment Variables in ProxyHTMLURLMap produces |
|58475|New|Nor|2015-10-03|Support append/merge with semicolon-separated head|
|58488|New|Nor|2015-10-08|Stoped PHP-FPM pool in multi-pool system with comu|
|58491|New|Maj|2015-10-09|Core dumps appear when the load increases         |
|58492|Inf|Nor|2015-10-09|I think LDAPConnectionPoolTTL is not being honored|
|58498|New|Nor|2015-10-16|Apache 2.4.17: Regression with mod_autoindex (in c|
|58500|New|Nor|2015-10-16|dav_fs not enabled by default                     |
|58503|New|Cri|2015-10-16|segfault in apr_brigade_cleanup() under high load |
|58509|New|Trv|2015-10-20|2.4.17-dev introduces second core.c handler at sta|
|58513|New|Maj|2015-10-21|httpd code documentation is missing               |
|58524|New|Nor|2015-10-23|mod_http2 segfaults when under heavy load         |
|58528|New|Nor|2015-10-23|AllowOverrideList None gets misparsed and .htacces|
|58529|New|Maj|2015-10-23|Segmentation fault after modifying a proxy Balance|
|58550|New|Enh|2015-10-26|During load, Apache 2.2.x with prefork MPM didn|
|58574|New|Nor|2015-11-02|Apache error AH01630 (client denied) but working  |
|58593|New|Nor|2015-11-06|mod_proxy wrong decision between http and ws      |
|58598|New|Enh|2015-11-08|Internal Server Error (500) when requesting non-ex|
|58602|New|Nor|2015-11-11|Priority issue on DirectoryMatch directive        |
|58604|New|Reg|2015-11-12|Plaintext auth broken in any Explicit FTP/AUTH TLS|
|58612|New|Min|2015-11-16|mod_webdav when write_stream failed should break a|
+-----+---+---+----------+--------------------------------------------------+
| Total 1553 bugs                                                           |
+---------------------------------------------------------------------------+

From dev-return-84661-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov 22 13:19:09 2015
Return-Path: <dev-return-84661-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D42DB185A8
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 22 Nov 2015 13:19:09 +0000 (UTC)
Received: (qmail 3314 invoked by uid 500); 22 Nov 2015 13:19:09 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 3263 invoked by uid 500); 22 Nov 2015 13:19:09 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 3253 invoked by uid 99); 22 Nov 2015 13:19:07 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Nov 2015 13:19:07 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id E67961809CB
	for <dev@httpd.apache.org>; Sun, 22 Nov 2015 13:19:06 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level:
X-Spam-Status: No, score=0.001 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id lpVFY9vMUJI9 for <dev@httpd.apache.org>;
	Sun, 22 Nov 2015 13:18:57 +0000 (UTC)
Received: from resqmta-po-03v.sys.comcast.net (resqmta-po-03v.sys.comcast.net [96.114.154.162])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 9298643E19
	for <dev@httpd.apache.org>; Sun, 22 Nov 2015 13:18:57 +0000 (UTC)
Received: from resomta-po-16v.sys.comcast.net ([96.114.154.240])
	by resqmta-po-03v.sys.comcast.net with comcast
	id kdJr1r0015BUCh401dJriL; Sun, 22 Nov 2015 13:18:51 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-16v.sys.comcast.net with comcast
	id kdJq1r0012U0RYt01dJqlK; Sun, 22 Nov 2015 13:18:50 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715554 - /httpd/httpd/trunk/server/util.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <20151121193525.3104C3A023D@svn01-us-west.apache.org>
Date: Sun, 22 Nov 2015 08:18:49 -0500
Cc: cvs@httpd.apache.org
Content-Transfer-Encoding: quoted-printable
Message-Id: <053337CD-0C4A-4945-9D37-4FBBF898C6A1@jaguNET.com>
References: <20151121193525.3104C3A023D@svn01-us-west.apache.org>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448198331;
	bh=UEWLL7zgyHNnIh61Knvi1gN0GHt49ydQ2ddOaFHNKq4=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=LaJPVwPKYQGIrs7gzagETSFRosnkwMqlWXUl7vgwN600lFfz5LKmq1jCJLrtSleZ5
	 PI5wzIjrzCpJn05gbNFOyh1h10ZrjZHd2vM8djsKDseObFmlYawsTUInqFZMg9nkfA
	 yMhna0/kiU/jiUNxi/+ntXUhpNKuEjtXqcCDVAtbPtGyAdjt3M/ekW74z+nPLbY8Ha
	 gKTtmlrCi9y3ixWHqCWBxm2sCpL5mrARkN9T/rYr5HC1sf+M5Fffvkbo6m8dxwoWyH
	 48q9OUj/GPDjO1yLYdCnn4mOeCbBVmxadpd7ktYuUtL35GmAXr2s8o3MAesVMczaqL
	 RIzEKZG4Yv/Mw==

Wouldn't it be better to instead create the corresponding
EBCDIC table and the have ap_strcasecmp() choose which table
to use depending on APR_CHARSET_EBCDIC?

	http://www.astrodigital.org/digital/ebcdic.html

Also, we are assuming that >127 do not map to lowercase.

> On Nov 21, 2015, at 2:35 PM, covener@apache.org wrote:
>=20
> Author: covener
> Date: Sat Nov 21 19:35:24 2015
> New Revision: 1715554
>=20
> URL: http://svn.apache.org/viewvc?rev=3D1715554&view=3Drev
> Log:
> stick with underlying strcasecmp on EBCDIC builds
>=20
>=20
> Modified:
>    httpd/httpd/trunk/server/util.c
>=20
> Modified: httpd/httpd/trunk/server/util.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/server/util.c?rev=3D1715554=
&r1=3D1715553&r2=3D1715554&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/server/util.c (original)
> +++ httpd/httpd/trunk/server/util.c Sat Nov 21 19:35:24 2015
> @@ -3172,6 +3172,7 @@ AP_DECLARE(int) ap_array_str_contains(co
>     return (ap_array_str_index(array, s, 0) >=3D 0);
> }
>=20
> +#if !APR_CHARSET_EBCDIC
> /*
>  * Provide our own known-fast implementation of str[n]casecmp()
>  * NOTE: ASCII only!
> @@ -3238,3 +3239,14 @@ AP_DECLARE(int) ap_strncasecmp(const cha
>     }
>     return (0);
> }
> +#else
> +AP_DECLARE(int) ap_strcasecmp(const char *s1, const char *s2)
> +{
> +  return strcasecmp(s1, s2);
> +}
> +
> +AP_DECLARE(int) ap_strncasecmp(const char *s1, const char *s2, =
apr_size_t n)
> +{
> +  return strncasecmp(s1, s2, n);
> +}
> +#endif /*APR_CHARSET_EBCDIC*/
>=20
>=20


From dev-return-84662-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov 22 15:33:34 2015
Return-Path: <dev-return-84662-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4A57418812
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 22 Nov 2015 15:33:34 +0000 (UTC)
Received: (qmail 96600 invoked by uid 500); 22 Nov 2015 15:33:33 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 96529 invoked by uid 500); 22 Nov 2015 15:33:33 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 96519 invoked by uid 99); 22 Nov 2015 15:33:33 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Nov 2015 15:33:33 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 658B11A0B84
	for <dev@httpd.apache.org>; Sun, 22 Nov 2015 15:33:33 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.98
X-Spam-Level: **
X-Spam-Status: No, score=2.98 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id d_A9zW_IdQ_C for <dev@httpd.apache.org>;
	Sun, 22 Nov 2015 15:33:27 +0000 (UTC)
Received: from mail-ig0-f182.google.com (mail-ig0-f182.google.com [209.85.213.182])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 3AB2042B70
	for <dev@httpd.apache.org>; Sun, 22 Nov 2015 15:33:27 +0000 (UTC)
Received: by igvg19 with SMTP id g19so59975932igv.1
        for <dev@httpd.apache.org>; Sun, 22 Nov 2015 07:33:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=pBI7tdeB+rEFcqdmrMmasj/qUDKx1PHz2nidEsl3iOs=;
        b=GEPDXQ+4kWbkwABfpF9zAn8qE2cKLR95H5GL+zJDu/lYSl992gNTEXysUtCg9M2383
         B+SFAdST28g1ZGDO4uldionBwH4ZAVhR+K16WSxe4kA464ujPQpWvPerIsIE4OVYXzQa
         /4c8ke2Mx2OnSjxxQncYPK6TnSnVkqLvVbZmHVRwOrSL8n/fHcinrEZEVrkyi9qcX+cj
         IBYcC32OiUfnlpxgkGxw2HCH8QAGju9t2ARZU+lV6MDrbt4h6q9y8XgjnSKZiUNpV1wJ
         b2EQWrcQAsxNqotv53eFl7NQQc5hrTB5+EloE/R8RfKxGZqyHrs9DPCDd9v9AOrETPsv
         4UrA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=pBI7tdeB+rEFcqdmrMmasj/qUDKx1PHz2nidEsl3iOs=;
        b=ipboLPQavka6DlVGGqyoMr7wnDnHt2aIdFmZzmvdttCdaUzAAW9kK1IJibQZIDfxTi
         vOSj7jYN2CV7FhA4rB3HN3qJ+JQCCNuDDvHqjXhZMafCbGOQ6LxMHdFgHKyaPrVzHPfs
         wwy7YTMvj8noNoth7JoabeHtIK3aPfQYm0sMwzzqlEZ5K2RfG2bucY2lEnOH53/kUOwb
         S2go95KwyZkLyYjBvETV1RGoVbwXY0BkQ0FMlUYqqrJ6PqMJDEXDgj+EYQXePS6jBA5l
         K3VJjV67EbqbBUNyU5VmaWkVzViIIrn+PjGqukVHomQoPqF7szqys/4EjwFdGdxhXaJV
         0nAA==
X-Gm-Message-State: ALoCoQkAI47At6zKDQDAXmHA9WwUApXDZMl8+X+vCj9JhrcTL5bx+id9ZH1dOJYn57N+M05iNI6a
MIME-Version: 1.0
X-Received: by 10.50.33.69 with SMTP id p5mr4294214igi.35.1448206406819; Sun,
 22 Nov 2015 07:33:26 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Sun, 22 Nov 2015 07:33:26 -0800 (PST)
In-Reply-To: <CALK=YjPV=Eo+hGEa5yOtOFMPQ=ox7KZ2r=FeEciYfp7X+7UTRw@mail.gmail.com>
References: <20151121193525.3104C3A023D@svn01-us-west.apache.org>
	<CACsi250Pmsu2qNRdW9ND5ODK7SKa-iHLFTLsLJo6QkwxGTy1fg@mail.gmail.com>
	<CALK=YjPV=Eo+hGEa5yOtOFMPQ=ox7KZ2r=FeEciYfp7X+7UTRw@mail.gmail.com>
Date: Sun, 22 Nov 2015 09:33:26 -0600
Message-ID: <CACsi252uOZgj5S=u-GyEXEj-=jG-XUs+p_ffTHFntDOUcSNe+A@mail.gmail.com>
Subject: Re: svn commit: r1715554 - /httpd/httpd/trunk/server/util.c
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=089e0158b05c70c186052522d4ed

--089e0158b05c70c186052522d4ed
Content-Type: text/plain; charset=UTF-8

On Sat, Nov 21, 2015 at 5:10 PM, Eric Covener <covener@gmail.com> wrote:

> On Sat, Nov 21, 2015 at 5:47 PM, William A Rowe Jr <wrowe@rowe-clan.net>
> wrote:
> > I suggest this is wrong, and that the appropriate table should be built.
> >
> > EBCDIC platforms do have i18n (typicially single-byte) lower/upper
> > equivalences, and the underlying implementation should not be trusted for
> > straight ASCII token case insensitive comparisons.
>
> I don't see it why it shouldn't be trusted, but I've reverted for now,
>
> I'll revisit when this settles down / the function is used somewhere.
>

Have a look at r1715632 and let me know what you think.

I see a lot of ill-defined or otherwise vague string functions, many of them
are somewhat duplicate in nature, several of them questionable (unbounded
recursion, really?)  It is probably time to move these all out to
util_strings.c
and really evaluate which are appropriate to use in which contexts, while
others should probably be evicted from trunk. ap_strcmp_match looks like
the first worst offender (apr_fnmatch is already a much safer
implementation.)

--089e0158b05c70c186052522d4ed
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On S=
at, Nov 21, 2015 at 5:10 PM, Eric Covener <span dir=3D"ltr">&lt;<a href=3D"=
mailto:covener@gmail.com" target=3D"_blank">covener@gmail.com</a>&gt;</span=
> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0=
.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-s=
tyle:solid;padding-left:1ex"><span class=3D"">On Sat, Nov 21, 2015 at 5:47 =
PM, William A Rowe Jr &lt;<a href=3D"mailto:wrowe@rowe-clan.net">wrowe@rowe=
-clan.net</a>&gt; wrote:<br>
&gt; I suggest this is wrong, and that the appropriate table should be buil=
t.<br>
&gt;<br>
&gt; EBCDIC platforms do have i18n (typicially single-byte) lower/upper<br>
&gt; equivalences, and the underlying implementation should not be trusted =
for<br>
&gt; straight ASCII token case insensitive comparisons.<br>
<br>
</span>I don&#39;t see it why it shouldn&#39;t be trusted, but I&#39;ve rev=
erted for now,<br>
<br>
I&#39;ll revisit when this settles down / the function is used somewhere.<b=
r>
</blockquote></div><br></div><div class=3D"gmail_extra">Have a look at r171=
5632 and let me know what you think.</div><div class=3D"gmail_extra"><br></=
div><div class=3D"gmail_extra">I see a lot of ill-defined or otherwise vagu=
e string functions, many of them</div><div class=3D"gmail_extra">are somewh=
at duplicate in nature, several of them questionable (unbounded</div><div c=
lass=3D"gmail_extra">recursion, really?) =C2=A0It is probably time to move =
these all out to util_strings.c</div><div class=3D"gmail_extra">and really =
evaluate which are appropriate to use in which contexts, while</div><div cl=
ass=3D"gmail_extra">others should probably be evicted from trunk. ap_strcmp=
_match looks like</div><div class=3D"gmail_extra">the first worst offender =
(apr_fnmatch is already a much safer implementation.)</div><div class=3D"gm=
ail_extra"><br></div><div class=3D"gmail_extra"><br></div><div class=3D"gma=
il_extra"><br></div></div>

--089e0158b05c70c186052522d4ed--

From dev-return-84663-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov 22 16:37:39 2015
Return-Path: <dev-return-84663-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6B647189D4
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 22 Nov 2015 16:37:39 +0000 (UTC)
Received: (qmail 74022 invoked by uid 500); 22 Nov 2015 16:37:39 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 73940 invoked by uid 500); 22 Nov 2015 16:37:38 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 73927 invoked by uid 99); 22 Nov 2015 16:37:38 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Nov 2015 16:37:38 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 7F3A1C137D
	for <dev@httpd.apache.org>; Sun, 22 Nov 2015 16:37:38 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 0BZZR0BlIsdt for <dev@httpd.apache.org>;
	Sun, 22 Nov 2015 16:37:34 +0000 (UTC)
Received: from mail-io0-f181.google.com (mail-io0-f181.google.com [209.85.223.181])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 3B4D92026D
	for <dev@httpd.apache.org>; Sun, 22 Nov 2015 16:37:34 +0000 (UTC)
Received: by ioir85 with SMTP id r85so167265123ioi.1
        for <dev@httpd.apache.org>; Sun, 22 Nov 2015 08:37:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=M0iUn6CSlW/oJKRV8pUS/CdOGqocLgE++3jQCxSLsak=;
        b=FgV51M6UIPa8+6IkVb77wiD10o7wG6exkiRmxtQVX8Bcb4aS1BGBpzsjFffRRb6edm
         Y1OnkwB5srV7Ui2tLLsIXxd6PE/l4qWmfIU+w+gsksI0DbGUyxwacgxmYMyBikp+WCld
         zb8CubE+WuqpmlIZjROopYr2VXua2xftnSnl7AW+iG1d2BwXn+TuL2OKodVK2tumjU+r
         a1ErSW8XBeZmocDqQMPf85KLZlFVWU14nTWFp+UCrZefx6qfHujlD4SSDf08bY18p9TP
         m/HEyywfMbzNihXysokGOwfzKCXNUwnMxcZwXLsCBr74QmM8ggPCXoGUgMUA5a6mRqp5
         j/RQ==
MIME-Version: 1.0
X-Received: by 10.107.4.70 with SMTP id 67mr22760456ioe.13.1448210253742; Sun,
 22 Nov 2015 08:37:33 -0800 (PST)
Received: by 10.64.114.199 with HTTP; Sun, 22 Nov 2015 08:37:33 -0800 (PST)
In-Reply-To: <CACsi252uOZgj5S=u-GyEXEj-=jG-XUs+p_ffTHFntDOUcSNe+A@mail.gmail.com>
References: <20151121193525.3104C3A023D@svn01-us-west.apache.org>
	<CACsi250Pmsu2qNRdW9ND5ODK7SKa-iHLFTLsLJo6QkwxGTy1fg@mail.gmail.com>
	<CALK=YjPV=Eo+hGEa5yOtOFMPQ=ox7KZ2r=FeEciYfp7X+7UTRw@mail.gmail.com>
	<CACsi252uOZgj5S=u-GyEXEj-=jG-XUs+p_ffTHFntDOUcSNe+A@mail.gmail.com>
Date: Sun, 22 Nov 2015 11:37:33 -0500
Message-ID: <CALK=YjOJVpuO_2KfmtZF9o=+9KY-HXjLTM1ReefxSnYNZi2Hdw@mail.gmail.com>
Subject: Re: svn commit: r1715554 - /httpd/httpd/trunk/server/util.c
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Sun, Nov 22, 2015 at 10:33 AM, William A Rowe Jr <wrowe@rowe-clan.net> wrote:
> Have a look at r1715632 and let me know what you think.

I was concered about sorting but saw that's already not totally kosher
for !APR_CHARSET_EBCDIC
from your earlier comments. I am +1 to making them used (named) for
equality tests only to
avoid subtle problems down the road.

From dev-return-84664-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 23 14:08:00 2015
Return-Path: <dev-return-84664-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9D2C9180D2
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 23 Nov 2015 14:08:00 +0000 (UTC)
Received: (qmail 93382 invoked by uid 500); 23 Nov 2015 14:08:00 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 93225 invoked by uid 500); 23 Nov 2015 14:07:59 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 93206 invoked by uid 99); 23 Nov 2015 14:07:59 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Nov 2015 14:07:59 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 9C4C4C11C2
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 14:07:58 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.652
X-Spam-Level:
X-Spam-Status: No, score=0.652 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Lwetwf6X22_q for <dev@httpd.apache.org>;
	Mon, 23 Nov 2015 14:07:43 +0000 (UTC)
Received: from resqmta-ch2-04v.sys.comcast.net (resqmta-ch2-04v.sys.comcast.net [69.252.207.36])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id A98D620CF5
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 14:07:43 +0000 (UTC)
Received: from resomta-ch2-03v.sys.comcast.net ([69.252.207.99])
	by resqmta-ch2-04v.sys.comcast.net with comcast
	id l27j1r00129Cfhx0127jif; Mon, 23 Nov 2015 14:07:43 +0000
Received: from [172.25.183.47] ([199.244.219.64])
	by resomta-ch2-03v.sys.comcast.net with comcast
	id l25W1r0061Pxlnr0125au9; Mon, 23 Nov 2015 14:05:41 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715789 - in /httpd/httpd/trunk: modules/cache/ modules/filters/ modules/generators/ modules/http/ modules/http2/ modules/loggers/ modules/mappers/ modules/metadata/ modules/proxy/ modules/slotmem/ modules/test/ server/
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <20151123123311.15DEB3A03E8@svn01-us-west.apache.org>
Date: Mon, 23 Nov 2015 09:05:29 -0500
Cc: cvs@httpd.apache.org
Content-Transfer-Encoding: quoted-printable
Message-Id: <1799BF57-5B3F-4EB9-8469-755FDA461B04@jaguNET.com>
References: <20151123123311.15DEB3A03E8@svn01-us-west.apache.org>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448287663;
	bh=3LO9JjBe2d60hMwp77UlR2x6uqUI+ra0YaYU4TQjoUU=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=fVVD2awX30++MbL0733xpwMgvwqw5bLY7jyItaJeinWumKghtgmjNUhJsNP2mOuqR
	 Q985+K8yFvyiKtBRHbm/xq5hr2U0nQqKOywtIDOP5msZehf+J6XQDN7zgMocM0a5RC
	 ANEoTJ/2hn0NzUIRMYyZwjFg4jhCvq4B99fVpf4G5ObQUow7vXuaTAo+lF/MZqUZE9
	 U2CC/J8QugNFSvKXcfJc7gIzL9fL4AF9uBicepxM8ZmLg0f+iFZ3fQ1zhDrEOuu9V4
	 N90CdJVi49AHZsS1Y5fXTF28R7g6kQ7i5rVSkA77HgaJChW8NqLFHhGl048rL5iEeg
	 vawtXSktiirmg==


> On Nov 23, 2015, at 7:33 AM, ylavic@apache.org wrote:
>=20
> Author: ylavic
> Date: Mon Nov 23 12:33:09 2015
> New Revision: 1715789
>=20
> URL: http://svn.apache.org/viewvc?rev=3D1715789&view=3Drev
> Log:
> Use new ap_casecmpstr[n]() functions where appropriate (not =
exhaustive).
>=20
>=20
> Modified: httpd/httpd/trunk/modules/cache/cache_util.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/cache/cache_util.c?=
rev=3D1715789&r1=3D1715788&r2=3D1715789&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/cache/cache_util.c (original)
> +++ httpd/httpd/trunk/modules/cache/cache_util.c Mon Nov 23 12:33:09 =
2015
> @@ -594,7 +594,12 @@ int cache_check_freshness(cache_handle_t
>     }
>=20
>     if ((agestr =3D apr_table_get(h->resp_hdrs, "Age"))) {
> -        age_c =3D apr_atoi64(agestr);
> +        char *endp;
> +        apr_off_t offt;
> +        if (!apr_strtoff(&offt, agestr, &endp, 10)
> +                && endp > agestr && !*endp) {
> +            age_c =3D offt;
> +        }
>     }
>=20
>     /* calculate age of object */
>=20

That's cheating :)


From dev-return-84665-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 23 14:09:47 2015
Return-Path: <dev-return-84665-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CA61C180F9
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 23 Nov 2015 14:09:47 +0000 (UTC)
Received: (qmail 97155 invoked by uid 500); 23 Nov 2015 14:09:47 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 97089 invoked by uid 500); 23 Nov 2015 14:09:47 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 97079 invoked by uid 99); 23 Nov 2015 14:09:47 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Nov 2015 14:09:47 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 9CDDF1A0C21
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 14:09:46 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id ydgHCbAJWG4Q for <dev@httpd.apache.org>;
	Mon, 23 Nov 2015 14:09:37 +0000 (UTC)
Received: from resqmta-ch2-01v.sys.comcast.net (resqmta-ch2-01v.sys.comcast.net [69.252.207.33])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id ACC822064F
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 14:09:36 +0000 (UTC)
Received: from resomta-ch2-20v.sys.comcast.net ([69.252.207.116])
	by resqmta-ch2-01v.sys.comcast.net with comcast
	id l29P1r00A2XD5SV0129VDM; Mon, 23 Nov 2015 14:09:29 +0000
Received: from [172.25.183.47] ([199.244.219.64])
	by resomta-ch2-20v.sys.comcast.net with comcast
	id l27K1r0021Pxlnr0127PQc; Mon, 23 Nov 2015 14:07:27 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715554 - /httpd/httpd/trunk/server/util.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CACsi252uOZgj5S=u-GyEXEj-=jG-XUs+p_ffTHFntDOUcSNe+A@mail.gmail.com>
Date: Mon, 23 Nov 2015 09:07:18 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <E562BC22-AB65-4556-96CA-79EC9A3BC178@jaguNET.com>
References: <20151121193525.3104C3A023D@svn01-us-west.apache.org> <CACsi250Pmsu2qNRdW9ND5ODK7SKa-iHLFTLsLJo6QkwxGTy1fg@mail.gmail.com> <CALK=YjPV=Eo+hGEa5yOtOFMPQ=ox7KZ2r=FeEciYfp7X+7UTRw@mail.gmail.com> <CACsi252uOZgj5S=u-GyEXEj-=jG-XUs+p_ffTHFntDOUcSNe+A@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448287769;
	bh=fmXJV3MjZanU8/j8wZi+wq3522r5x9l9MIBWqiZkvAQ=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=BJuEOWuwV/UVZwBNam8XhbXA2hcMtJz181BOeiMR0YwxdU5oYMN/EJISe+FYWTp4+
	 VYUdvcIYLW6UvreuHCYMsft2X0RVYI56/crccCxPDMo3rWNQ9t6Or8FHEfhnpnKsZl
	 Hn5VfqkNedmpHL30g+isauWgSh7wOOliElflXzq+RyWszqN0QEGDnYejelTKEkTmHl
	 HODUvfhIK2/tSRxrvLM9YICR6Y97G3tZ0IkxHNreTAugaaBRJpvcmo/coar/IflmxF
	 +8WQr2SZ+jLyWzIlLqxvji+o+G1jvwBoP0yvbmg3PKCRdCdvZFikxysSN7iu1sRSoj
	 Q4dQszZcXhxtA==

++1

> On Nov 22, 2015, at 10:33 AM, William A Rowe Jr <wrowe@rowe-clan.net> =
wrote:
>=20
> On Sat, Nov 21, 2015 at 5:10 PM, Eric Covener <covener@gmail.com> =
wrote:
> On Sat, Nov 21, 2015 at 5:47 PM, William A Rowe Jr =
<wrowe@rowe-clan.net> wrote:
> > I suggest this is wrong, and that the appropriate table should be =
built.
> >
> > EBCDIC platforms do have i18n (typicially single-byte) lower/upper
> > equivalences, and the underlying implementation should not be =
trusted for
> > straight ASCII token case insensitive comparisons.
>=20
> I don't see it why it shouldn't be trusted, but I've reverted for now,
>=20
> I'll revisit when this settles down / the function is used somewhere.
>=20
> Have a look at r1715632 and let me know what you think.
>=20
> I see a lot of ill-defined or otherwise vague string functions, many =
of them
> are somewhat duplicate in nature, several of them questionable =
(unbounded
> recursion, really?)  It is probably time to move these all out to =
util_strings.c
> and really evaluate which are appropriate to use in which contexts, =
while
> others should probably be evicted from trunk. ap_strcmp_match looks =
like
> the first worst offender (apr_fnmatch is already a much safer =
implementation.)
>=20
>=20
>=20


From dev-return-84666-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 23 16:50:51 2015
Return-Path: <dev-return-84666-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 036B118AC9
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 23 Nov 2015 16:50:51 +0000 (UTC)
Received: (qmail 78923 invoked by uid 500); 23 Nov 2015 16:50:50 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 78858 invoked by uid 500); 23 Nov 2015 16:50:50 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 78848 invoked by uid 99); 23 Nov 2015 16:50:50 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Nov 2015 16:50:50 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 93AE21809CB
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 16:50:49 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 87eg_6Q7veH8 for <dev@httpd.apache.org>;
	Mon, 23 Nov 2015 16:50:43 +0000 (UTC)
Received: from mail-qg0-f48.google.com (mail-qg0-f48.google.com [209.85.192.48])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 85DFA205A0
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 16:50:42 +0000 (UTC)
Received: by qgcc31 with SMTP id c31so74563540qgc.3
        for <dev@httpd.apache.org>; Mon, 23 Nov 2015 08:50:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=cROJ9AR6A4eaylxCA7Rg370V6GrWymuedyJ1jO22dCk=;
        b=Ti/4gtScl8xdTqyBhrt5qFxoHufKvHP6Ox60M4Ue7gBpmjJwlqTgAU+tb50I9cSdEw
         iVZnnjJFWrbLXdeNNVVJvg8u5kmyocu56dmCiKJtpQu6H4hKHvNTheKEloC4+Axm6f3g
         VbE/6TfBqjfyoUaAvCehdbMX7f+xEzpUFf6Av5GkPwLv5Ed5CscfVMVUtVuKmSMgf9Z+
         rziiTUAMiGt0RitWqlGU9vk3q4hnelEBqHQwhG9XuA8Bjgh14opsaMOhXymPBIEv0RCm
         n3SqyflrRu5y/DJm11rAvk8zIPeQVF5JQ00IySVRDUr1sg6SCstVFmSi9q4VJ6D5t6Zf
         +New==
MIME-Version: 1.0
X-Received: by 10.140.43.9 with SMTP id d9mr7290684qga.51.1448297441502; Mon,
 23 Nov 2015 08:50:41 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 23 Nov 2015 08:50:41 -0800 (PST)
In-Reply-To: <1799BF57-5B3F-4EB9-8469-755FDA461B04@jaguNET.com>
References: <20151123123311.15DEB3A03E8@svn01-us-west.apache.org>
	<1799BF57-5B3F-4EB9-8469-755FDA461B04@jaguNET.com>
Date: Mon, 23 Nov 2015 17:50:41 +0100
Message-ID: <CAKQ1sVPS9=gE6Hc2jVfmsxZd=8sdohd-KXyxTPR+pES6C++KmA@mail.gmail.com>
Subject: Re: svn commit: r1715789 - in /httpd/httpd/trunk: modules/cache/
 modules/filters/ modules/generators/ modules/http/ modules/http2/
 modules/loggers/ modules/mappers/ modules/metadata/ modules/proxy/
 modules/slotmem/ modules/test/ server/
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Mon, Nov 23, 2015 at 3:05 PM, Jim Jagielski <jim@jagunet.com> wrote:
>
> That's cheating :)

Yeah, reverted (r1715869) and re-committed (r1715876) with no functional change.
Thanks for catching!

From dev-return-84667-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 23 17:02:00 2015
Return-Path: <dev-return-84667-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9E73E18B6A
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 23 Nov 2015 17:02:00 +0000 (UTC)
Received: (qmail 16955 invoked by uid 500); 23 Nov 2015 17:02:00 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 16890 invoked by uid 500); 23 Nov 2015 17:02:00 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 16880 invoked by uid 99); 23 Nov 2015 17:02:00 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Nov 2015 17:02:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 98D3EC06CC
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 17:01:59 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.998
X-Spam-Level: **
X-Spam-Status: No, score=2.998 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id mxWUK5pVwqH2 for <dev@httpd.apache.org>;
	Mon, 23 Nov 2015 17:01:58 +0000 (UTC)
Received: from mail-io0-f171.google.com (mail-io0-f171.google.com [209.85.223.171])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 59D2B20592
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 17:01:58 +0000 (UTC)
Received: by iofh3 with SMTP id h3so193928058iof.3
        for <dev@httpd.apache.org>; Mon, 23 Nov 2015 09:01:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=vJvSsLYiIBy8bOoIHY+PZ3h9BVxq/2tIVtPodmiqItE=;
        b=Gu8Few4RlKLw85kmhGec9U0K3/MREZdPC/yCLWHlPJRdH/FKxUA2+guVRssDU5bhRL
         EJISy5lVVWGbVnrQe3hzsaf+NuVE9yqBulwLkhj30nnl8HqY9bvAdbG+xjpXMH6zwGuP
         +eOQNmTBI0UkuWLjcmxT/8ko7OwEYvxBjnHQeqoS2Q4nQwa8y/XK+oP+JkkTE2sfXQ6y
         TDNZ6Y/BAmK+6wyjGvC3KnJTGtdm1QUdOXe5WbQTV4rtfV3g947zMCO1/6Udxg2qSajj
         zomfFy/nz4VXa9MbfRXY6emFGjMi5Jrk/S6LxHju5ho96JFe/IJ2bIR4QCv3y1xXvtnL
         Eumw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=vJvSsLYiIBy8bOoIHY+PZ3h9BVxq/2tIVtPodmiqItE=;
        b=Ni+2JePSvfkb3/YqTkYMjJcj8692NURiXr5vdQT/nLdbW8cLY4TLsIJIwGGacUYySN
         PYjdBH+IVFVVqOs+/oE/Oct8y2JuDugRo0v2urbwR5B6jLZ8zzeNHv2542ZY15nlUU8P
         IY9+pkmWCSTGRNfyVoGDIUSe6tCzqJTzVfOOku7vuKeZtJcV+7/G3W0ohFCpRI397YOZ
         WQVnlvDttTZ+3zco0EFOL/5aQXk6H3FrI0Rp37OMfLiGoozMQuND1xvYDXRIQL9K1DbT
         UgZQBPzhnU2KpM2gB1lzyZTwYjcYpQE2Q4qGCdpG4ibfC+eZlSeLx0m6ZaQea+n2SZIG
         pHjg==
X-Gm-Message-State: ALoCoQnNn+aGIGMBP1Hfk14kKRxH9/lOQsxGZOUpyxfk1uePbnZuoWsDJc3sO0xKOt7l4mR29sOv
MIME-Version: 1.0
X-Received: by 10.107.34.199 with SMTP id i190mr27095737ioi.150.1448298117651;
 Mon, 23 Nov 2015 09:01:57 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Mon, 23 Nov 2015 09:01:57 -0800 (PST)
In-Reply-To: <20151123155826.39A703A043E@svn01-us-west.apache.org>
References: <20151123155826.39A703A043E@svn01-us-west.apache.org>
Date: Mon, 23 Nov 2015 11:01:57 -0600
Message-ID: <CACsi252Ypb8wgfryMt689sn0nnJwkBrNpjaE7KzFwd3wk2LhdQ@mail.gmail.com>
Subject: Re: svn commit: r1715859 - /httpd/httpd/trunk/include/httpd.h
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1140d944d522c10525382edd

--001a1140d944d522c10525382edd
Content-Type: text/plain; charset=UTF-8

On Mon, Nov 23, 2015 at 9:58 AM, <jim@apache.org> wrote:

> Author: jim
> Date: Mon Nov 23 15:58:25 2015
> New Revision: 1715859
>
> URL: http://svn.apache.org/viewvc?rev=1715859&view=rev
> Log:
> we just worry about "equality" with this implementation...
> So it's not a "real" strcasecmp replacement.
>
> Modified:
>     httpd/httpd/trunk/include/httpd.h
>
> Modified: httpd/httpd/trunk/include/httpd.h
> URL:
> http://svn.apache.org/viewvc/httpd/httpd/trunk/include/httpd.h?rev=1715859&r1=1715858&r2=1715859&view=diff
>
> ==============================================================================
> --- httpd/httpd/trunk/include/httpd.h (original)
> +++ httpd/httpd/trunk/include/httpd.h Mon Nov 23 15:58:25 2015
> @@ -2442,9 +2442,8 @@ AP_DECLARE(int) ap_array_str_contains(co
>   * Known-fast version of strcasecmp(): ASCII case-folding, POSIX compliant
>   * @param s1 The 1st string to compare
>   * @param s2 The 2nd string to compare
> - * @return integer greater than, equal to, or less than 0, depending on
> - *         if s1 is lexicographically greater than, equal to, or less
> - *         than s2 ignoring case.
> + * @return 0 if s1 is lexicographically equal to s2 ignoring case;
> + *         non-0 otherwise.
>   */
>  AP_DECLARE(int) ap_casecmpstr(const char *s1, const char *s2);
>
> @@ -2453,9 +2452,8 @@ AP_DECLARE(int) ap_casecmpstr(const char
>   * @param s1 The 1st string to compare
>   * @param s2 The 2nd string to compare
>   * @param n  Maximum number of characters in the strings to compare
> - * @return integer greater than, equal to, or less than 0, depending on
> - *         if s1 is lexicographically greater than, equal to, or less
> - *         than s2 ignoring case.
> + * @return 0 if s1 is lexicographically equal to s2 ignoring case;
> + *         non-0 otherwise.
>   */
>  AP_DECLARE(int) ap_casecmpstrn(const char *s1, const char *s2, apr_size_t
> n);
>

Howso?  The implementation does provide ASCII numeric-alpha ordering.

--001a1140d944d522c10525382edd
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On M=
on, Nov 23, 2015 at 9:58 AM,  <span dir=3D"ltr">&lt;<a href=3D"mailto:jim@a=
pache.org" target=3D"_blank">jim@apache.org</a>&gt;</span> wrote:<br><block=
quote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc=
 solid;padding-left:1ex">Author: jim<br>
Date: Mon Nov 23 15:58:25 2015<br>
New Revision: 1715859<br>
<br>
URL: <a href=3D"http://svn.apache.org/viewvc?rev=3D1715859&amp;view=3Drev" =
rel=3D"noreferrer" target=3D"_blank">http://svn.apache.org/viewvc?rev=3D171=
5859&amp;view=3Drev</a><br>
Log:<br>
we just worry about &quot;equality&quot; with this implementation...<br>
So it&#39;s not a &quot;real&quot; strcasecmp replacement.<br>
<br>
Modified:<br>
=C2=A0 =C2=A0 httpd/httpd/trunk/include/httpd.h<br>
<br>
Modified: httpd/httpd/trunk/include/httpd.h<br>
URL: <a href=3D"http://svn.apache.org/viewvc/httpd/httpd/trunk/include/http=
d.h?rev=3D1715859&amp;r1=3D1715858&amp;r2=3D1715859&amp;view=3Ddiff" rel=3D=
"noreferrer" target=3D"_blank">http://svn.apache.org/viewvc/httpd/httpd/tru=
nk/include/httpd.h?rev=3D1715859&amp;r1=3D1715858&amp;r2=3D1715859&amp;view=
=3Ddiff</a><br>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D<br>
--- httpd/httpd/trunk/include/httpd.h (original)<br>
+++ httpd/httpd/trunk/include/httpd.h Mon Nov 23 15:58:25 2015<br>
@@ -2442,9 +2442,8 @@ AP_DECLARE(int) ap_array_str_contains(co<br>
=C2=A0 * Known-fast version of strcasecmp(): ASCII case-folding, POSIX comp=
liant<br>
=C2=A0 * @param s1 The 1st string to compare<br>
=C2=A0 * @param s2 The 2nd string to compare<br>
- * @return integer greater than, equal to, or less than 0, depending on<br=
>
- *=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0if s1 is lexicographically greater tha=
n, equal to, or less<br>
- *=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0than s2 ignoring case.<br>
+ * @return 0 if s1 is lexicographically equal to s2 ignoring case;<br>
+ *=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0non-0 otherwise.<br>
=C2=A0 */<br>
=C2=A0AP_DECLARE(int) ap_casecmpstr(const char *s1, const char *s2);<br>
<br>
@@ -2453,9 +2452,8 @@ AP_DECLARE(int) ap_casecmpstr(const char<br>
=C2=A0 * @param s1 The 1st string to compare<br>
=C2=A0 * @param s2 The 2nd string to compare<br>
=C2=A0 * @param n=C2=A0 Maximum number of characters in the strings to comp=
are<br>
- * @return integer greater than, equal to, or less than 0, depending on<br=
>
- *=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0if s1 is lexicographically greater tha=
n, equal to, or less<br>
- *=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0than s2 ignoring case.<br>
+ * @return 0 if s1 is lexicographically equal to s2 ignoring case;<br>
+ *=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0non-0 otherwise.<br>
=C2=A0 */<br>
=C2=A0AP_DECLARE(int) ap_casecmpstrn(const char *s1, const char *s2, apr_si=
ze_t n);<br></blockquote><div><br></div><div>Howso?=C2=A0 The implementatio=
n does provide ASCII numeric-alpha ordering.</div></div></div></div>

--001a1140d944d522c10525382edd--

From dev-return-84668-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 23 19:37:57 2015
Return-Path: <dev-return-84668-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B13EA1875F
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 23 Nov 2015 19:37:57 +0000 (UTC)
Received: (qmail 50433 invoked by uid 500); 23 Nov 2015 19:37:52 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 50359 invoked by uid 500); 23 Nov 2015 19:37:51 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 50350 invoked by uid 99); 23 Nov 2015 19:37:51 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Nov 2015 19:37:51 +0000
Received: from gauss.localdomain (v4-861303ca.pool.vitroconnect.de [134.19.3.202])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPSA id 281191A0182
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 19:37:50 +0000 (UTC)
Received: from [IPv6:::1] (localhost [IPv6:::1])
	by gauss.localdomain (Postfix) with ESMTP id 90A711C6
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 20:37:49 +0100 (CET)
Subject: Re: svn commit: r1715876 - in /httpd/httpd/trunk: modules/cache/
 modules/filters/ modules/generators/ modules/http/ modules/http2/
 modules/loggers/ modules/mappers/ modules/metadata/ modules/proxy/
 modules/slotmem/ modules/test/ server/
To: dev@httpd.apache.org
References: <20151123164602.782763A075E@svn01-us-west.apache.org>
From: Ruediger Pluem <rpluem@apache.org>
Message-ID: <56536B0D.7050609@apache.org>
Date: Mon, 23 Nov 2015 20:37:49 +0100
User-Agent: Mozilla/5.0 (X11; Linux i686 on x86_64; rv:42.0) Gecko/20100101
 Firefox/42.0 SeaMonkey/2.39
MIME-Version: 1.0
In-Reply-To: <20151123164602.782763A075E@svn01-us-west.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit



On 11/23/2015 05:46 PM, ylavic@apache.org wrote:
> Author: ylavic
> Date: Mon Nov 23 16:46:01 2015
> New Revision: 1715876
> 
> URL: http://svn.apache.org/viewvc?rev=1715876&view=rev
> Log:
> Use new ap_casecmpstr[n]() functions where appropriate (not exhaustive).
> 
> Modified:
>     httpd/httpd/trunk/modules/cache/cache_util.c
>     httpd/httpd/trunk/modules/filters/mod_deflate.c
>     httpd/httpd/trunk/modules/filters/mod_include.c
>     httpd/httpd/trunk/modules/filters/mod_proxy_html.c
>     httpd/httpd/trunk/modules/generators/mod_autoindex.c
>     httpd/httpd/trunk/modules/generators/mod_cgi.c
>     httpd/httpd/trunk/modules/generators/mod_cgid.c
>     httpd/httpd/trunk/modules/http/byterange_filter.c
>     httpd/httpd/trunk/modules/http/http_filters.c
>     httpd/httpd/trunk/modules/http2/h2_from_h1.c
>     httpd/httpd/trunk/modules/loggers/mod_log_config.c
>     httpd/httpd/trunk/modules/mappers/mod_rewrite.c
>     httpd/httpd/trunk/modules/metadata/mod_cern_meta.c
>     httpd/httpd/trunk/modules/metadata/mod_headers.c
>     httpd/httpd/trunk/modules/proxy/ajp_header.c
>     httpd/httpd/trunk/modules/proxy/mod_proxy.c
>     httpd/httpd/trunk/modules/proxy/mod_proxy_ajp.c
>     httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>     httpd/httpd/trunk/modules/proxy/mod_proxy_fcgi.c
>     httpd/httpd/trunk/modules/proxy/mod_proxy_fdpass.c
>     httpd/httpd/trunk/modules/proxy/mod_proxy_ftp.c
>     httpd/httpd/trunk/modules/proxy/mod_proxy_http.c
>     httpd/httpd/trunk/modules/proxy/mod_proxy_scgi.c
>     httpd/httpd/trunk/modules/proxy/mod_proxy_wstunnel.c
>     httpd/httpd/trunk/modules/proxy/mod_serf.c
>     httpd/httpd/trunk/modules/proxy/proxy_util.c
>     httpd/httpd/trunk/modules/slotmem/mod_slotmem_shm.c
>     httpd/httpd/trunk/modules/test/mod_policy.c
>     httpd/httpd/trunk/server/mpm_unix.c
>     httpd/httpd/trunk/server/protocol.c
>     httpd/httpd/trunk/server/util.c
>     httpd/httpd/trunk/server/util_expr_eval.c
>     httpd/httpd/trunk/server/util_script.c
> 
> Modified: httpd/httpd/trunk/modules/cache/cache_util.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/cache/cache_util.c?rev=1715876&r1=1715875&r2=1715876&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/modules/cache/cache_util.c (original)
> +++ httpd/httpd/trunk/modules/cache/cache_util.c Mon Nov 23 16:46:01 2015

> @@ -1066,59 +1045,46 @@ int ap_cache_control(request_rec *r, cac
>                          cc->max_stale = 1;
>                          cc->max_stale_value = -1;
>                      }
> -                    break;
>                  }
> -                else if (!strncasecmp(token, "min-fresh", 9)) {
> +                else if (!ap_casecmpstrn(token, "min-fresh", 9)) {
>                      if (token[9] == '=') {
>                          cc->min_fresh = 1;
>                          cc->min_fresh_value = apr_atoi64(token + 10);
>                      }
> -                    break;
> -                }
> -                else if (!strcasecmp(token, "must-revalidate")) {
> -                    cc->must_revalidate = 1;
>                  }
>                  break;
>              }
>              case 'o':
>              case 'O': {
> -                if (!strcasecmp(token, "only-if-cached")) {
> +                if (!ap_casecmpstr(token, "only-if-cached")) {
>                      cc->only_if_cached = 1;
>                  }
>                  break;
>              }
> -            case 'p':
> -            case 'P': {
> -                /* handle most common quickest cases... */
> -                if (!strcmp(token, "private")) {
> -                    cc->private = 1;
> -                }
> -                /* ...then try slowest cases */
> -                else if (!strcasecmp(token, "public")) {
> +            case 'p': {

Why removing the uppercase 'P' case here?

Regards

Rdiger

From dev-return-84669-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 23 20:00:29 2015
Return-Path: <dev-return-84669-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0E51D18873
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 23 Nov 2015 20:00:29 +0000 (UTC)
Received: (qmail 16164 invoked by uid 500); 23 Nov 2015 20:00:28 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 16072 invoked by uid 500); 23 Nov 2015 20:00:28 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 16062 invoked by uid 99); 23 Nov 2015 20:00:28 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Nov 2015 20:00:28 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id D7631C2814
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 20:00:27 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.999
X-Spam-Level:
X-Spam-Status: No, score=0.999 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H2=-0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 8WCnFvy9KZyF for <dev@httpd.apache.org>;
	Mon, 23 Nov 2015 20:00:27 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp01.smtpout.orange.fr [80.12.242.123])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id A33D742B7B
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 20:00:26 +0000 (UTC)
Received: from [127.0.0.1] ([92.140.231.6])
	by mwinf5d53 with ME
	id l80J1r00e08wHE40380Jh2; Mon, 23 Nov 2015 21:00:19 +0100
X-ME-Helo: [127.0.0.1]
X-ME-Date: Mon, 23 Nov 2015 21:00:19 +0100
X-ME-IP: 92.140.231.6
Subject: Re: svn commit: r1715876 - in /httpd/httpd/trunk: modules/cache/
 modules/filters/ modules/generators/ modules/http/ modules/http2/
 modules/loggers/ modules/mappers/ modules/metadata/ modules/proxy/
 modules/slotmem/ modules/test/ server/
To: dev@httpd.apache.org
References: <20151123164602.782763A075E@svn01-us-west.apache.org>
From: Marion & Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Message-ID: <56537051.3020208@wanadoo.fr>
Date: Mon, 23 Nov 2015 21:00:17 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <20151123164602.782763A075E@svn01-us-west.apache.org>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 151123-0, 23/11/2015), Outbound message
X-Antivirus-Status: Clean

Hi,

1 typo below.

Moreover, this kind of patch is a good candidate for backport as it 
introduces many small differences between 2.4 and trunk.
Without a backport, backporting future patches may become a nightmare.

I would find useful to split it into several pieces.
The first one should apply cleanly to 2.4.x to ease backport.
Other parts should be splitted in "as many piece as necessary" for 
potential future backport.

CJ


Le 23/11/2015 17:46, ylavic@apache.org a crit :
> Author: ylavic
> Date: Mon Nov 23 16:46:01 2015
> New Revision: 1715876
>
> URL: http://svn.apache.org/viewvc?rev=1715876&view=rev
> Log:
> Use new ap_casecmpstr[n]() functions where appropriate (not exhaustive).
>
> Modified:
>
> Modified: httpd/httpd/trunk/modules/cache/cache_util.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/cache/cache_util.c?rev=1715876&r1=1715875&r2=1715876&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/modules/cache/cache_util.c (original)
> +++ httpd/httpd/trunk/modules/cache/cache_util.c Mon Nov 23 16:46:01 2015
[...]
> @@ -1066,59 +1045,46 @@ int ap_cache_control(request_rec *r, cac
>                           cc->max_stale = 1;
>                           cc->max_stale_value = -1;
>                       }
> -                    break;
>                   }
> -                else if (!strncasecmp(token, "min-fresh", 9)) {
> +                else if (!ap_casecmpstrn(token, "min-fresh", 9)) {
>                       if (token[9] == '=') {
>                           cc->min_fresh = 1;
>                           cc->min_fresh_value = apr_atoi64(token + 10);
>                       }
> -                    break;
Thanks for that. I was about to commit the same kind of patch (remove 
useless break).

> -                }
> -                else if (!strcasecmp(token, "must-revalidate")) {
> -                    cc->must_revalidate = 1;
>                   }
>                   break;
>               }
>               case 'o':
>               case 'O': {
> -                if (!strcasecmp(token, "only-if-cached")) {
> +                if (!ap_casecmpstr(token, "only-if-cached")) {
>                       cc->only_if_cached = 1;
>                   }
>                   break;
>               }
> -            case 'p':
> -            case 'P': {
> -                /* handle most common quickest cases... */
> -                if (!strcmp(token, "private")) {
> -                    cc->private = 1;
> -                }
> -                /* ...then try slowest cases */
> -                else if (!strcasecmp(token, "public")) {
> +            case 'p': {
case 'P' removed?

Best regards,
CJ


From dev-return-84670-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 23 20:07:17 2015
Return-Path: <dev-return-84670-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 258D2188E2
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 23 Nov 2015 20:07:17 +0000 (UTC)
Received: (qmail 47275 invoked by uid 500); 23 Nov 2015 20:07:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 47188 invoked by uid 500); 23 Nov 2015 20:07:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 47178 invoked by uid 99); 23 Nov 2015 20:07:16 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Nov 2015 20:07:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id D9B85C2851
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 20:07:15 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id GHelYGOyadHz for <dev@httpd.apache.org>;
	Mon, 23 Nov 2015 20:07:15 +0000 (UTC)
Received: from mail-qg0-f45.google.com (mail-qg0-f45.google.com [209.85.192.45])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 1E00C20CE7
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 20:07:15 +0000 (UTC)
Received: by qgec40 with SMTP id c40so121669408qge.2
        for <dev@httpd.apache.org>; Mon, 23 Nov 2015 12:07:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=xX4qWUTqh08P9xE1c0Bs5ant2z3qGodVj61hRDc2AcQ=;
        b=bsX/kirVbJExP1jQA4z/sgBjeGTit6kGLOKSQFWl+KDkItHbs3+wBFRanjQiFpNQyX
         mD1XYDw2AV2GLUTpt43NSyUgXyQO+jZnunIKv6f8lw8EyNTlVJ/6y3l6tNjSuhRbfqsk
         CGMgkYitmhNcp5ED2AYMb0t54mPBVV84ldnfohLFnv6Bu8bRa8Rq6j4Y2YpGSCTNUdPW
         bcnyR//wuum/Q1CYVcIg23WIPSbkp0KZ1lttXaGUP1+VaO2tzb6TsprJN4shw0l/tDc0
         tARUHATG0I9m2bodfdrKuxRsg/wp1+5Y8qcJ05zO39wFCLMz56McVmXiz3OX9PWDnDyS
         3h9g==
MIME-Version: 1.0
X-Received: by 10.140.179.213 with SMTP id z204mr31961386qhz.70.1448309234218;
 Mon, 23 Nov 2015 12:07:14 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 23 Nov 2015 12:07:14 -0800 (PST)
In-Reply-To: <56536B0D.7050609@apache.org>
References: <20151123164602.782763A075E@svn01-us-west.apache.org>
	<56536B0D.7050609@apache.org>
Date: Mon, 23 Nov 2015 21:07:14 +0100
Message-ID: <CAKQ1sVNAsrsY9Rd=aViL4RcRFYQ_javYiqzf6S965V73=2ia9A@mail.gmail.com>
Subject: Re: svn commit: r1715876 - in /httpd/httpd/trunk: modules/cache/
 modules/filters/ modules/generators/ modules/http/ modules/http2/
 modules/loggers/ modules/mappers/ modules/metadata/ modules/proxy/
 modules/slotmem/ modules/test/ server/
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Mon, Nov 23, 2015 at 8:37 PM, Ruediger Pluem <rpluem@apache.org> wrote:
>
> On 11/23/2015 05:46 PM, ylavic@apache.org wrote:
>>
>> -            case 'p':
>> -            case 'P': {
>> -                /* handle most common quickest cases... */
>> -                if (!strcmp(token, "private")) {
>> -                    cc->private = 1;
>> -                }
>> -                /* ...then try slowest cases */
>> -                else if (!strcasecmp(token, "public")) {
>> +            case 'p': {
>
> Why removing the uppercase 'P' case here?

Not intentional, fixed in r1715938.
Thanks for noticing.

Regards,
Yann.

From dev-return-84671-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 23 20:12:05 2015
Return-Path: <dev-return-84671-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1E9B81893F
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 23 Nov 2015 20:12:05 +0000 (UTC)
Received: (qmail 58155 invoked by uid 500); 23 Nov 2015 20:12:04 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 58071 invoked by uid 500); 23 Nov 2015 20:12:04 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 58061 invoked by uid 99); 23 Nov 2015 20:12:04 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Nov 2015 20:12:04 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 0DF26C0FEA
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 20:12:04 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id KorvSmVrlCoD for <dev@httpd.apache.org>;
	Mon, 23 Nov 2015 20:12:03 +0000 (UTC)
Received: from mail-qg0-f44.google.com (mail-qg0-f44.google.com [209.85.192.44])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 39C97203C1
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 20:12:03 +0000 (UTC)
Received: by qgcc31 with SMTP id c31so78825912qgc.3
        for <dev@httpd.apache.org>; Mon, 23 Nov 2015 12:12:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=t37D8iB6pKILQafnfPSJpNVE73BIY3bMRj8uwCn5H3Q=;
        b=oLj2X05pGGJ5qc+84mLnaj1sve+/hhlo5WbV9ePklQ5mMacU+ROrlQS7gJTN0Y86FA
         OMHfGlj2zCu+em7G3vZI2uE70Yfym+/LhTgqu6c12ML9QfhZACumlzmnUcx6YdjWS7OR
         zGu1Q72lmjpFIJmZlHXBX75oACXcP3349QWZpeNeBqDvKA1Krs7eYQrbjOA6XWTZucYX
         wSaiB3bs70luPP/CzSXTPaonvwWHnI6fzcu9dQ4fmJn1YRaXFIXSNe5iVPrlI7uCdTyr
         MF7SuyJW8mhVN0sMyvyRDYeS4IM4aAtqdiAFxKA/ofuTF8wCYwmkHgstoDMyROS+eq5P
         o+tA==
MIME-Version: 1.0
X-Received: by 10.140.95.66 with SMTP id h60mr29799326qge.14.1448309522407;
 Mon, 23 Nov 2015 12:12:02 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 23 Nov 2015 12:12:02 -0800 (PST)
In-Reply-To: <56537051.3020208@wanadoo.fr>
References: <20151123164602.782763A075E@svn01-us-west.apache.org>
	<56537051.3020208@wanadoo.fr>
Date: Mon, 23 Nov 2015 21:12:02 +0100
Message-ID: <CAKQ1sVO+vOjRDH3=Lru5Mzpf8id2iBS_D3fxCYDg4L=2JAQYqA@mail.gmail.com>
Subject: Re: svn commit: r1715876 - in /httpd/httpd/trunk: modules/cache/
 modules/filters/ modules/generators/ modules/http/ modules/http2/
 modules/loggers/ modules/mappers/ modules/metadata/ modules/proxy/
 modules/slotmem/ modules/test/ server/
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Mon, Nov 23, 2015 at 9:00 PM, Marion & Christophe JAILLET
<christophe.jaillet@wanadoo.fr> wrote:
> Hi,
>
> 1 typo below.

Fixed in r1715938, thanks.

>
> Moreover, this kind of patch is a good candidate for backport as it
> introduces many small differences between 2.4 and trunk.
> Without a backport, backporting future patches may become a nightmare.

Agreed.

>
> I would find useful to split it into several pieces.
> The first one should apply cleanly to 2.4.x to ease backport.
> Other parts should be splitted in "as many piece as necessary" for potential
> future backport.

I'll try to merge with svn, and resolve conflicts...

Regards,
Yann.

From dev-return-84672-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 23 20:12:46 2015
Return-Path: <dev-return-84672-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D706F18953
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 23 Nov 2015 20:12:46 +0000 (UTC)
Received: (qmail 61931 invoked by uid 500); 23 Nov 2015 20:12:46 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 61855 invoked by uid 500); 23 Nov 2015 20:12:46 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 61845 invoked by uid 99); 23 Nov 2015 20:12:46 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Nov 2015 20:12:46 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id D0A5DC0FEA
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 20:12:45 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1
X-Spam-Level: *
X-Spam-Status: No, score=1 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H2=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id WTUVbUnETDE7 for <dev@httpd.apache.org>;
	Mon, 23 Nov 2015 20:12:37 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp01.smtpout.orange.fr [80.12.242.123])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 4EAA520C47
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 20:12:37 +0000 (UTC)
Received: from [127.0.0.1] ([92.140.231.6])
	by mwinf5d53 with ME
	id l8CX1r00808wHE4038CXSn; Mon, 23 Nov 2015 21:12:31 +0100
X-ME-Helo: [127.0.0.1]
X-ME-Date: Mon, 23 Nov 2015 21:12:31 +0100
X-ME-IP: 92.140.231.6
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Subject: Re: strncasecmp
To: dev@httpd.apache.org
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
 <CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
 <301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
Message-ID: <5653732E.9030401@wanadoo.fr>
Date: Mon, 23 Nov 2015 21:12:30 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 151123-0, 23/11/2015), Outbound message
X-Antivirus-Status: Clean

Hi Jim,

Do you have done some benchmark and have results to share?

I tried to do some but the benefit of the optimized version is not that 
clear, at least on my system:
    gcc 5.2.1
    Linux linux 4.2.0-18-generic #22-Ubuntu SMP Fri Nov 6 18:25:50 UTC 
2015 x86_64 x86_64 x86_64 GNU/Linux

I've tried to trick gcc in order to avoid some optimization. (gcc does 
its best to remove/inline/remove from loop known standard C functions)
I've check asm output to be more confident on the code generated by gcc.

Based on my own results only, and without any becnhmark, I would -1 a 
backport.
For small strings (below identical char), your implementation looks 
faster, but above 4 identical chars it looks slower

I can provide my test program if interested.


best regards,
CJ


Le 20/11/2015 19:53, Jim Jagielski a crit :
> Implemented in r1715401
>
> If people want to nit-pick about naming and wish to
> rename it to something else, be my guest.
>
>> On Nov 20, 2015, at 1:03 PM, Yann Ylavic<ylavic.dev@gmail.com>  wrote:
>>
>> +1
>>
>> On Fri, Nov 20, 2015 at 6:17 PM, Jim Jagielski<jim@jagunet.com>  wrote:
>>> We use str[n]casecmp quite a bit. The rub is that some
>>> platforms use a sensible implementation (such as OSX) which
>>> uses a upper-lowercase map and is v. fast, and others
>>> use a brain-dead version which does an actual tolower() of
>>> each char in the string as it tests. We actually try to
>>> handle this in many cases by doing a switch/case test on the
>>> 1st char to fast path the strncasecmp, resulting in ugly code.
>>>
>>> This is crazy.
>>>
>>> I propose a ap_strncasecmp/ap_strcasecmp which we should use.
>>> Ideally, it would be in apr but no need to wait for that
>>> to happen :)
>>>
>>> Unless people have heartburn about this, I will add next week.


From dev-return-84673-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 23 20:33:32 2015
Return-Path: <dev-return-84673-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 941B918A98
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 23 Nov 2015 20:33:32 +0000 (UTC)
Received: (qmail 48408 invoked by uid 500); 23 Nov 2015 20:33:32 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 48314 invoked by uid 500); 23 Nov 2015 20:33:32 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 48303 invoked by uid 99); 23 Nov 2015 20:33:32 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Nov 2015 20:33:32 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 97C78C0DD5
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 20:33:31 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 1bt0xRmfxEUY for <dev@httpd.apache.org>;
	Mon, 23 Nov 2015 20:33:31 +0000 (UTC)
Received: from mail-qk0-f171.google.com (mail-qk0-f171.google.com [209.85.220.171])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id D998842AEE
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 20:33:30 +0000 (UTC)
Received: by qkda6 with SMTP id a6so63264919qkd.3
        for <dev@httpd.apache.org>; Mon, 23 Nov 2015 12:33:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=a5irx7kDvgbiEFIzwYjFsB68OqyM+rhM7sBG1ycc+iU=;
        b=VivnQg8ueJTg87LP36UK35oyfnnfSJFDuyE7UCV/CD0hEUwlQlUYpTOGYpBgXsPatv
         E4VQA6eHRCY5dMMxWS0KqCldyQIyfgo08hR3rdnMyuJJ8UAu9p/eFibH/OgGf+xWua4c
         p7OjqCo2Na4rNRgglLRpMoQTkzHU61Di0LmrnHQHHXBHPqOKm6po/TXXUusF6W9Uwd4K
         djLIRZ+xH5nScq3c6LlvF387ht+A6t0NAN00L8+61vy8W6RmG5Dqj/UfuW2e1XvoO4TA
         LefSpyrWnsgM2oKwit9IobEjFoSHyXNZuZzsqT0TGZ73dUrRLKk3Nf1cFfBhSE3z5Ahp
         /9JA==
MIME-Version: 1.0
X-Received: by 10.55.75.8 with SMTP id y8mr18806716qka.2.1448310810415; Mon,
 23 Nov 2015 12:33:30 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 23 Nov 2015 12:33:30 -0800 (PST)
In-Reply-To: <5653732E.9030401@wanadoo.fr>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
	<CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
	<301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
	<5653732E.9030401@wanadoo.fr>
Date: Mon, 23 Nov 2015 21:33:30 +0100
Message-ID: <CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
Subject: Re: strncasecmp
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

Hi Christophe,

On Mon, Nov 23, 2015 at 9:12 PM, Christophe JAILLET
<christophe.jaillet@wanadoo.fr> wrote:
>
> I tried to do some but the benefit of the optimized version is not that
> clear, at least on my system:
>    gcc 5.2.1
>    Linux linux 4.2.0-18-generic #22-Ubuntu SMP Fri Nov 6 18:25:50 UTC 2015
> x86_64 x86_64 x86_64 GNU/Linux

Unfortunately, gcc 5.2.1 (i.e. latest compilers' versions) are not
widely used...

Did you try a code like ap_proxy_port_of_scheme() with values which
are unknown schemes?
Or even worse cases, with similarly chained strcasecmp() looking for
eg. "httpx" in something like {"httpa", "httpb", "httpc", ...,
"httpw"}?

Regards,
Yann.

From dev-return-84674-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 23 21:08:02 2015
Return-Path: <dev-return-84674-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AEC9E18CEC
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 23 Nov 2015 21:08:02 +0000 (UTC)
Received: (qmail 41830 invoked by uid 500); 23 Nov 2015 21:08:02 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 41746 invoked by uid 500); 23 Nov 2015 21:08:01 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 41736 invoked by uid 99); 23 Nov 2015 21:08:01 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Nov 2015 21:08:01 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 6C5EA1A09AD
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 21:08:01 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.999
X-Spam-Level:
X-Spam-Status: No, score=0.999 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H2=-0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id FDEB7xrDUnj1 for <dev@httpd.apache.org>;
	Mon, 23 Nov 2015 21:07:59 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp01.smtpout.orange.fr [80.12.242.123])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id E324E20C41
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 21:07:58 +0000 (UTC)
Received: from [127.0.0.1] ([92.140.231.6])
	by mwinf5d53 with ME
	id l97p1r00B08wHE40397qmU; Mon, 23 Nov 2015 22:07:51 +0100
X-ME-Helo: [127.0.0.1]
X-ME-Date: Mon, 23 Nov 2015 22:07:51 +0100
X-ME-IP: 92.140.231.6
Subject: Re: strncasecmp
To: dev@httpd.apache.org
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
 <CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
 <301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
 <5653732E.9030401@wanadoo.fr>
 <CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
From: Marion & Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Message-ID: <56538021.3030801@wanadoo.fr>
Date: Mon, 23 Nov 2015 22:07:45 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
Content-Type: multipart/mixed;
 boundary="------------050906000802000107020804"
X-Antivirus: avast! (VPS 151123-1, 23/11/2015), Outbound message
X-Antivirus-Status: Clean

This is a multi-part message in MIME format.
--------------050906000802000107020804
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit

I just made a small application which takes as command line parameters 
the number of iteration to run, which version of the algorithm to use, 
the 2 strings to compare and the length to compare (or 0 for the non 'n' 
versions)


Compiled using
     gcc -O3 test.c

Tested using
linux:~/Code_Source$ time ./a.out 1 100000000 
xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa 
xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa 0
Optimized (nb=100000000, len=0)
res = 0

real    0m4.193s
user    0m4.192s
sys    0m0.000s



linux:~/Code_Source$ time ./a.out 0 100000000 
xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa 
xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa 0
<string.h> (nb=100000000, len=0)
res = 0

real    0m1.708s
user    0m1.704s
sys    0m0.000s




See atatchement.

CJ


Le 23/11/2015 21:33, Yann Ylavic a crit :
> Hi Christophe,
>
> On Mon, Nov 23, 2015 at 9:12 PM, Christophe JAILLET
> <christophe.jaillet@wanadoo.fr> wrote:
>> I tried to do some but the benefit of the optimized version is not that
>> clear, at least on my system:
>>     gcc 5.2.1
>>     Linux linux 4.2.0-18-generic #22-Ubuntu SMP Fri Nov 6 18:25:50 UTC 2015
>> x86_64 x86_64 x86_64 GNU/Linux
> Unfortunately, gcc 5.2.1 (i.e. latest compilers' versions) are not
> widely used...
>
> Did you try a code like ap_proxy_port_of_scheme() with values which
> are unknown schemes?
> Or even worse cases, with similarly chained strcasecmp() looking for
> eg. "httpx" in something like {"httpa", "httpb", "httpc", ...,
> "httpw"}?
>
> Regards,
> Yann.
>


--------------050906000802000107020804
Content-Type: text/plain; charset=UTF-8;
 name="test.c"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename="test.c"

I2luY2x1ZGUgPHN0ZGlvLmg+DQojaW5jbHVkZSA8c3RkbGliLmg+DQojaW5jbHVkZSA8c3Ry
aW5nLmg+DQoNCiNpbmNsdWRlIDxsaW1pdHMuaD4NCg0KLyoNCiAqIFByb3ZpZGUgb3VyIG93
biBrbm93bi1mYXN0IGltcGxlbWVudGF0aW9uIG9mIHN0cltuXWNhc2VjbXAoKQ0KICogTk9U
RTogQVNDSUkgb25seSENCiAqLw0Kc3RhdGljIGNvbnN0IHVuc2lnbmVkIGNoYXIgdWNoYXJt
YXBbXSA9IHsNCiAgICAweDAsICAweDEsICAweDIsICAweDMsICAweDQsICAweDUsICAweDYs
ICAweDcsDQogICAgMHg4LCAgMHg5LCAgMHhhLCAgMHhiLCAgMHhjLCAgMHhkLCAgMHhlLCAg
MHhmLA0KICAgIDB4MTAsIDB4MTEsIDB4MTIsIDB4MTMsIDB4MTQsIDB4MTUsIDB4MTYsIDB4
MTcsDQogICAgMHgxOCwgMHgxOSwgMHgxYSwgMHgxYiwgMHgxYywgMHgxZCwgMHgxZSwgMHgx
ZiwNCiAgICAweDIwLCAweDIxLCAweDIyLCAweDIzLCAweDI0LCAweDI1LCAweDI2LCAweDI3
LA0KICAgIDB4MjgsIDB4MjksIDB4MmEsIDB4MmIsIDB4MmMsIDB4MmQsIDB4MmUsIDB4MmYs
DQogICAgMHgzMCwgMHgzMSwgMHgzMiwgMHgzMywgMHgzNCwgMHgzNSwgMHgzNiwgMHgzNywN
CiAgICAweDM4LCAweDM5LCAweDNhLCAweDNiLCAweDNjLCAweDNkLCAweDNlLCAweDNmLA0K
ICAgIDB4NDAsICAnYScsICAnYicsICAnYycsICAnZCcsICAnZScsICAnZicsICAnZycsDQog
ICAgICdoJywgICdpJywgICdqJywgICdrJywgICdsJywgICdtJywgICduJywgICdvJywNCiAg
ICAgJ3AnLCAgJ3EnLCAgJ3InLCAgJ3MnLCAgJ3QnLCAgJ3UnLCAgJ3YnLCAgJ3cnLA0KICAg
ICAneCcsICAneScsICAneicsIDB4NWIsIDB4NWMsIDB4NWQsIDB4NWUsIDB4NWYsDQogICAg
MHg2MCwgICdhJywgICdiJywgICdjJywgICdkJywgICdlJywgICdmJywgICdnJywNCiAgICAg
J2gnLCAgJ2knLCAgJ2onLCAgJ2snLCAgJ2wnLCAgJ20nLCAgJ24nLCAgJ28nLA0KICAgICAn
cCcsICAncScsICAncicsICAncycsICAndCcsICAndScsICAndicsICAndycsDQogICAgICd4
JywgICd5JywgICd6JywgMHg3YiwgMHg3YywgMHg3ZCwgMHg3ZSwgMHg3ZiwNCiAgICAweDgw
LCAweDgxLCAweDgyLCAweDgzLCAweDg0LCAweDg1LCAweDg2LCAweDg3LA0KICAgIDB4ODgs
IDB4ODksIDB4OGEsIDB4OGIsIDB4OGMsIDB4OGQsIDB4OGUsIDB4OGYsDQogICAgMHg5MCwg
MHg5MSwgMHg5MiwgMHg5MywgMHg5NCwgMHg5NSwgMHg5NiwgMHg5NywNCiAgICAweDk4LCAw
eDk5LCAweDlhLCAweDliLCAweDljLCAweDlkLCAweDllLCAweDlmLA0KICAgIDB4YTAsIDB4
YTEsIDB4YTIsIDB4YTMsIDB4YTQsIDB4YTUsIDB4YTYsIDB4YTcsDQogICAgMHhhOCwgMHhh
OSwgMHhhYSwgMHhhYiwgMHhhYywgMHhhZCwgMHhhZSwgMHhhZiwNCiAgICAweGIwLCAweGIx
LCAweGIyLCAweGIzLCAweGI0LCAweGI1LCAweGI2LCAweGI3LA0KICAgIDB4YjgsIDB4Yjks
IDB4YmEsIDB4YmIsIDB4YmMsIDB4YmQsIDB4YmUsIDB4YmYsDQogICAgMHhjMCwgMHhjMSwg
MHhjMiwgMHhjMywgMHhjNCwgMHhjNSwgMHhjNiwgMHhjNywNCiAgICAweGM4LCAweGM5LCAw
eGNhLCAweGNiLCAweGNjLCAweGNkLCAweGNlLCAweGNmLA0KICAgIDB4ZDAsIDB4ZDEsIDB4
ZDIsIDB4ZDMsIDB4ZDQsIDB4ZDUsIDB4ZDYsIDB4ZDcsDQogICAgMHhkOCwgMHhkOSwgMHhk
YSwgMHhkYiwgMHhkYywgMHhkZCwgMHhkZSwgMHhkZiwNCiAgICAweGUwLCAweGUxLCAweGUy
LCAweGUzLCAweGU0LCAweGU1LCAweGU2LCAweGU3LA0KICAgIDB4ZTgsIDB4ZTksIDB4ZWEs
IDB4ZWIsIDB4ZWMsIDB4ZWQsIDB4ZWUsIDB4ZWYsDQogICAgMHhmMCwgMHhmMSwgMHhmMiwg
MHhmMywgMHhmNCwgMHhmNSwgMHhmNiwgMHhmNywNCiAgICAweGY4LCAweGY5LCAweGZhLCAw
eGZiLCAweGZjLCAweGZkLCAweGZlLCAweGZmDQp9Ow0KDQppbnQgYXBfc3RyY2FzZWNtcChj
b25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIpDQp7DQogICAgY29uc3QgdW5zaWduZWQg
Y2hhciAqcHMxID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczE7DQogICAgY29uc3QgdW5z
aWduZWQgY2hhciAqcHMyID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczI7DQoNCiAgICB3
aGlsZSAodWNoYXJtYXBbKnBzMV0gPT0gdWNoYXJtYXBbKnBzMisrXSkgew0KICAgICAgICBp
ZiAoKnBzMSsrID09ICdcMCcpIHsNCiAgICAgICAgICAgIHJldHVybiAoMCk7DQogICAgICAg
IH0NCiAgICB9DQogICAgcmV0dXJuICh1Y2hhcm1hcFsqcHMxXSAtIHVjaGFybWFwWyotLXBz
Ml0pOw0KfQ0KDQppbnQgYXBfc3RybmNhc2VjbXAoY29uc3QgY2hhciAqczEsIGNvbnN0IGNo
YXIgKnMyLCBpbnQgbikNCnsNCiAgICBjb25zdCB1bnNpZ25lZCBjaGFyICpwczEgPSAoY29u
c3QgdW5zaWduZWQgY2hhciAqKSBzMTsNCiAgICBjb25zdCB1bnNpZ25lZCBjaGFyICpwczIg
PSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMjsNCiAgICB3aGlsZSAobi0tKSB7DQogICAg
ICAgIGlmICh1Y2hhcm1hcFsqcHMxXSAhPSB1Y2hhcm1hcFsqcHMyKytdKSB7DQogICAgICAg
ICAgICByZXR1cm4gKHVjaGFybWFwWypwczFdIC0gdWNoYXJtYXBbKi0tcHMyXSk7DQogICAg
ICAgIH0NCiAgICAgICAgaWYgKCpwczErKyA9PSAnXDAnKSB7DQogICAgICAgICAgICBicmVh
azsNCiAgICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gKDApOw0KfQ0KDQojZGVmaW5lIFBS
T0cgYXJndlswXQ0KI2RlZmluZSBNRVRIT0QgYXJndlsxXQ0KI2RlZmluZSBOQiBhcmd2WzJd
DQojZGVmaW5lIFMxIGFyZ3ZbM10NCiNkZWZpbmUgUzIgYXJndls0XQ0KI2RlZmluZSBMRU4g
YXJndls1XQ0KDQovKiBUaGUgKysgYXJlIGhlcmUgdG8gdHJ5IHRvIHByZXZlbnQgc29tZSBv
cHRpbWl6YXRpb24gZG9uZSBieSBnY2MgKi8NCiNkZWZpbmUgRk9SIGZvciAoaT0wOyBpPG5i
OyBpKyssIChTMVswXSkrKywgKFMyWzBdKSsrKQ0KDQppbnQgbWFpbihpbnQgYXJnYywgY2hh
ciAqYXJndltdKQ0Kew0KICAgIGludCBpLCBsZW4sIG5iOw0KICAgIGludCByZXMgPSAwOw0K
ICAgIA0KICAgIGlmIChhcmdjIDwgNikgew0KICAgICAgICBwcmludGYoIiVzIDwwPXN0ZCA7
IDE9b3B0aW1pemVkPiA8bmIgaXRlcj4gUzEgUzIgPG5iIGNoYXIgdG8gY29tcGFyZSBvciAw
PlxuIiwgUFJPRyk7DQogICAgICAgIHJldHVybiAwOw0KICAgIH0NCiAgICAgICAgDQogICAg
bGVuID0gYXRvaShMRU4pOw0KICAgIG5iICA9IGF0b2koTkIpOw0KICAgIA0KICAgIGlmICgq
TUVUSE9EID09ICcwJykgew0KICAgICAgICBwcmludGYoIjxzdHJpbmcuaD4gKG5iPSVkLCBs
ZW49JWQpXG4iLCBuYiwgbGVuKTsNCiAgICAgICAgaWYgKGxlbiA9PSAwKSB7DQogICAgICAg
ICAgICBGT1Igew0KICAgICAgICAgICAgICAgIC8qIHJlYWxseSB1c2UgdGhlIHJlc3VsdCBv
ZiB0aGUgZnVuY3Rpb24gKi8NCiAgICAgICAgICAgICAgICByZXMgfD0gc3RyY2FzZWNtcChT
MSwgUzIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAg
ICAgICAgICAgRk9SIHsNCiAgICAgICAgICAgICAgICByZXMgfD0gc3RybmNhc2VjbXAoUzEs
IFMyLCBsZW4pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIGVsc2Ug
ew0KICAgICAgICBwcmludGYoIk9wdGltaXplZCAobmI9JWQsIGxlbj0lZClcbiIsIG5iLCBs
ZW4pOw0KICAgICAgICBpZiAobGVuID09IDApIHsNCiAgICAgICAgICAgIEZPUiB7DQogICAg
ICAgICAgICAgICAgcmVzIHw9IGFwX3N0cmNhc2VjbXAoUzEsIFMyKTsNCiAgICAgICAgICAg
IH0NCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIEZPUiB7DQogICAg
ICAgICAgICAgICAgcmVzIHw9IGFwX3N0cm5jYXNlY21wKFMxLCBTMiwgbGVuKTsNCiAgICAg
ICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvKiByZWFsbHkgdXNlIHRo
ZSByZXN1bHQgb2YgdGhlIGZ1bmN0aW9uICovDQogICAgcHJpbnRmKCJyZXMgPSAlZFxuIiwg
cmVzKTsNCiAgICByZXR1cm4gMDsgDQp9DQo=
--------------050906000802000107020804--

From dev-return-84675-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 23 22:42:54 2015
Return-Path: <dev-return-84675-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1900218483
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 23 Nov 2015 22:42:54 +0000 (UTC)
Received: (qmail 92528 invoked by uid 500); 23 Nov 2015 22:42:53 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 92440 invoked by uid 500); 23 Nov 2015 22:42:53 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 92429 invoked by uid 99); 23 Nov 2015 22:42:53 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Nov 2015 22:42:53 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id CCBE81A0C88
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 22:42:52 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id OOk0iwsKwNXK for <dev@httpd.apache.org>;
	Mon, 23 Nov 2015 22:42:52 +0000 (UTC)
Received: from mail-qg0-f47.google.com (mail-qg0-f47.google.com [209.85.192.47])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id A275120CF5
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 22:42:51 +0000 (UTC)
Received: by qgec40 with SMTP id c40so124348929qge.2
        for <dev@httpd.apache.org>; Mon, 23 Nov 2015 14:42:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=FAj+/5DTn5rHQGQvMJbE56yG53B2FfjesMmTkNcoo64=;
        b=09/IelYMcRDaI8pGPiHUqWqnLkBBcijv9cu/e/oGSuxhlvJAUlxyRb75Im22AnCTq6
         sTYuUC8plVq7KeCrXwFpXJEUSZm690t4yVCbAZ/rLAOeNeUpeuRWLuC0vsz1eNcIFDPB
         Uj68Y0ZRZC+yqGLsa37+lFn2FiT2LqUWbtddf22g5u6//IoX4mbR9NoZihvJ7D28JakX
         r4JBh9rVrKk6wQTfV+zX9DnH6IQzqADFp2zVvH5CrsviDOq4QvCdawXpv6E5Buv6Ux90
         +G6mCLipfXVXgw462yCuuU7T7YIYE4vrWxYZzJ22clt/PJ7FmMLF9DDnKSZSWy71CcZF
         Ufjg==
MIME-Version: 1.0
X-Received: by 10.140.226.198 with SMTP id w189mr30633830qhb.83.1448318570861;
 Mon, 23 Nov 2015 14:42:50 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 23 Nov 2015 14:42:50 -0800 (PST)
In-Reply-To: <56538021.3030801@wanadoo.fr>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
	<CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
	<301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
	<5653732E.9030401@wanadoo.fr>
	<CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
	<56538021.3030801@wanadoo.fr>
Date: Mon, 23 Nov 2015 23:42:50 +0100
Message-ID: <CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
Subject: Re: strncasecmp
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

I modified your test program a bit (to measure time from it, see
attached), tried with -O{2,3,s}, and except -Os I always have better
results with the "optimized" version, eg:

$ ./a-O3.out 0 150000000 xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa
xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa 0
<string.h> (nb=3D150000000, len=3D0)
time =3D 8.424984 : res =3D 0

$ ./a-O3.out 1 150000000 xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa
xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa 0
Optimized (nb=3D150000000, len=3D0)
time =3D 8.212137 : res =3D 0

Possibly gcc (v4.4.5 here) is clever enough to optimize/inline/cheat
when given standard (no custom) code, since I had similar results than
yours with the original test.c...

How does this one work with gcc-5.2?

On Mon, Nov 23, 2015 at 10:07 PM, Marion & Christophe JAILLET
<christophe.jaillet@wanadoo.fr> wrote:
> I just made a small application which takes as command line parameters th=
e
> number of iteration to run, which version of the algorithm to use, the 2
> strings to compare and the length to compare (or 0 for the non 'n' versio=
ns)
>
>
> Compiled using
>     gcc -O3 test.c
>
> Tested using
> linux:~/Code_Source$ time ./a.out 1 100000000
> xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa
> xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa 0
> Optimized (nb=3D100000000, len=3D0)
> res =3D 0
>
> real    0m4.193s
> user    0m4.192s
> sys    0m0.000s
>
>
>
> linux:~/Code_Source$ time ./a.out 0 100000000
> xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa
> xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa 0
> <string.h> (nb=3D100000000, len=3D0)
> res =3D 0
>
> real    0m1.708s
> user    0m1.704s
> sys    0m0.000s
>
>
>
>
> See atatchement.
>
> CJ
>
>
>
> Le 23/11/2015 21:33, Yann Ylavic a =C3=A9crit :
>>
>> Hi Christophe,
>>
>> On Mon, Nov 23, 2015 at 9:12 PM, Christophe JAILLET
>> <christophe.jaillet@wanadoo.fr> wrote:
>>>
>>> I tried to do some but the benefit of the optimized version is not that
>>> clear, at least on my system:
>>>     gcc 5.2.1
>>>     Linux linux 4.2.0-18-generic #22-Ubuntu SMP Fri Nov 6 18:25:50 UTC
>>> 2015
>>> x86_64 x86_64 x86_64 GNU/Linux
>>
>> Unfortunately, gcc 5.2.1 (i.e. latest compilers' versions) are not
>> widely used...
>>
>> Did you try a code like ap_proxy_port_of_scheme() with values which
>> are unknown schemes?
>> Or even worse cases, with similarly chained strcasecmp() looking for
>> eg. "httpx" in something like {"httpa", "httpb", "httpc", ...,
>> "httpw"}?
>>
>> Regards,
>> Yann.
>>
>

From dev-return-84676-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 23 22:43:33 2015
Return-Path: <dev-return-84676-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 205011848D
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 23 Nov 2015 22:43:33 +0000 (UTC)
Received: (qmail 96557 invoked by uid 500); 23 Nov 2015 22:43:32 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 96479 invoked by uid 500); 23 Nov 2015 22:43:32 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 96469 invoked by uid 99); 23 Nov 2015 22:43:32 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Nov 2015 22:43:32 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 1A55CC692D
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 22:43:32 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id DHAWUPp_GU72 for <dev@httpd.apache.org>;
	Mon, 23 Nov 2015 22:43:31 +0000 (UTC)
Received: from mail-qg0-f52.google.com (mail-qg0-f52.google.com [209.85.192.52])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 2CEC0441A4
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 22:43:31 +0000 (UTC)
Received: by qgea14 with SMTP id a14so124186514qge.0
        for <dev@httpd.apache.org>; Mon, 23 Nov 2015 14:43:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Vfbfaf9Y+SAarIgZXylN9tFsPunVtMOPwo+2vDO+/Hk=;
        b=AGs5uoXYIR6hBhJHiIwRZWeAGOI4OCX5/ysJLQQBdGWl3izDBsluYn8qyH+ZakOWYn
         7Gbzh/40ak3sOFaLZdnRhTGQH+69ZDKxIuFAX9zLCSvtajjeqW1iqqj6/RDA2AaYfKUC
         d2T8xr0JQtqT550tqhWfU8PqxbG0AHQ7Q++xPS7zMhx2s+zJU3/PzcpgKHySSNuT35ge
         CgEAsRYLhLsc2fpUPORL3SuEMwhxwygxBEFxRVM7/sVQ/MD9SXZTbXqvp8dmy26INz4A
         fal5aeITFfxm4MM8IWifMpLXD125bjalpEteiHuxQWB1rq4HVsiZpdJaEpnkn8CdOvyn
         sH0Q==
MIME-Version: 1.0
X-Received: by 10.140.248.70 with SMTP id t67mr14104472qhc.97.1448318610949;
 Mon, 23 Nov 2015 14:43:30 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 23 Nov 2015 14:43:30 -0800 (PST)
In-Reply-To: <CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
	<CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
	<301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
	<5653732E.9030401@wanadoo.fr>
	<CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
	<56538021.3030801@wanadoo.fr>
	<CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
Date: Mon, 23 Nov 2015 23:43:30 +0100
Message-ID: <CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com>
Subject: Re: strncasecmp
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: multipart/mixed; boundary=001a1139b29454074005253cf4e5

--001a1139b29454074005253cf4e5
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

with attachment...

On Mon, Nov 23, 2015 at 11:42 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
> I modified your test program a bit (to measure time from it, see
> attached), tried with -O{2,3,s}, and except -Os I always have better
> results with the "optimized" version, eg:
>
> $ ./a-O3.out 0 150000000 xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa
> xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa 0
> <string.h> (nb=3D150000000, len=3D0)
> time =3D 8.424984 : res =3D 0
>
> $ ./a-O3.out 1 150000000 xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa
> xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa 0
> Optimized (nb=3D150000000, len=3D0)
> time =3D 8.212137 : res =3D 0
>
> Possibly gcc (v4.4.5 here) is clever enough to optimize/inline/cheat
> when given standard (no custom) code, since I had similar results than
> yours with the original test.c...
>
> How does this one work with gcc-5.2?
>
> On Mon, Nov 23, 2015 at 10:07 PM, Marion & Christophe JAILLET
> <christophe.jaillet@wanadoo.fr> wrote:
>> I just made a small application which takes as command line parameters t=
he
>> number of iteration to run, which version of the algorithm to use, the 2
>> strings to compare and the length to compare (or 0 for the non 'n' versi=
ons)
>>
>>
>> Compiled using
>>     gcc -O3 test.c
>>
>> Tested using
>> linux:~/Code_Source$ time ./a.out 1 100000000
>> xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa
>> xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa 0
>> Optimized (nb=3D100000000, len=3D0)
>> res =3D 0
>>
>> real    0m4.193s
>> user    0m4.192s
>> sys    0m0.000s
>>
>>
>>
>> linux:~/Code_Source$ time ./a.out 0 100000000
>> xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa
>> xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa 0
>> <string.h> (nb=3D100000000, len=3D0)
>> res =3D 0
>>
>> real    0m1.708s
>> user    0m1.704s
>> sys    0m0.000s
>>
>>
>>
>>
>> See atatchement.
>>
>> CJ
>>
>>
>>
>> Le 23/11/2015 21:33, Yann Ylavic a =C3=A9crit :
>>>
>>> Hi Christophe,
>>>
>>> On Mon, Nov 23, 2015 at 9:12 PM, Christophe JAILLET
>>> <christophe.jaillet@wanadoo.fr> wrote:
>>>>
>>>> I tried to do some but the benefit of the optimized version is not tha=
t
>>>> clear, at least on my system:
>>>>     gcc 5.2.1
>>>>     Linux linux 4.2.0-18-generic #22-Ubuntu SMP Fri Nov 6 18:25:50 UTC
>>>> 2015
>>>> x86_64 x86_64 x86_64 GNU/Linux
>>>
>>> Unfortunately, gcc 5.2.1 (i.e. latest compilers' versions) are not
>>> widely used...
>>>
>>> Did you try a code like ap_proxy_port_of_scheme() with values which
>>> are unknown schemes?
>>> Or even worse cases, with similarly chained strcasecmp() looking for
>>> eg. "httpx" in something like {"httpa", "httpb", "httpc", ...,
>>> "httpw"}?
>>>
>>> Regards,
>>> Yann.
>>>
>>

--001a1139b29454074005253cf4e5
Content-Type: text/x-csrc; charset=US-ASCII; name="test.c"
Content-Disposition: attachment; filename="test.c"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_ihcji5it0

I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzdGRsaWIuaD4KI2luY2x1ZGUgPHN0cmluZy5o
PgoKI2luY2x1ZGUgPGxpbWl0cy5oPgoKLyoKICogUHJvdmlkZSBvdXIgb3duIGtub3duLWZhc3Qg
aW1wbGVtZW50YXRpb24gb2Ygc3RyW25dY2FzZWNtcCgpCiAqIE5PVEU6IEFTQ0lJIG9ubHkhCiAq
LwpzdGF0aWMgY29uc3QgdW5zaWduZWQgY2hhciB1Y2hhcm1hcFtdID0gewogICAgMHgwLCAgMHgx
LCAgMHgyLCAgMHgzLCAgMHg0LCAgMHg1LCAgMHg2LCAgMHg3LAogICAgMHg4LCAgMHg5LCAgMHhh
LCAgMHhiLCAgMHhjLCAgMHhkLCAgMHhlLCAgMHhmLAogICAgMHgxMCwgMHgxMSwgMHgxMiwgMHgx
MywgMHgxNCwgMHgxNSwgMHgxNiwgMHgxNywKICAgIDB4MTgsIDB4MTksIDB4MWEsIDB4MWIsIDB4
MWMsIDB4MWQsIDB4MWUsIDB4MWYsCiAgICAweDIwLCAweDIxLCAweDIyLCAweDIzLCAweDI0LCAw
eDI1LCAweDI2LCAweDI3LAogICAgMHgyOCwgMHgyOSwgMHgyYSwgMHgyYiwgMHgyYywgMHgyZCwg
MHgyZSwgMHgyZiwKICAgIDB4MzAsIDB4MzEsIDB4MzIsIDB4MzMsIDB4MzQsIDB4MzUsIDB4MzYs
IDB4MzcsCiAgICAweDM4LCAweDM5LCAweDNhLCAweDNiLCAweDNjLCAweDNkLCAweDNlLCAweDNm
LAogICAgMHg0MCwgICdhJywgICdiJywgICdjJywgICdkJywgICdlJywgICdmJywgICdnJywKICAg
ICAnaCcsICAnaScsICAnaicsICAnaycsICAnbCcsICAnbScsICAnbicsICAnbycsCiAgICAgJ3An
LCAgJ3EnLCAgJ3InLCAgJ3MnLCAgJ3QnLCAgJ3UnLCAgJ3YnLCAgJ3cnLAogICAgICd4JywgICd5
JywgICd6JywgMHg1YiwgMHg1YywgMHg1ZCwgMHg1ZSwgMHg1ZiwKICAgIDB4NjAsICAnYScsICAn
YicsICAnYycsICAnZCcsICAnZScsICAnZicsICAnZycsCiAgICAgJ2gnLCAgJ2knLCAgJ2onLCAg
J2snLCAgJ2wnLCAgJ20nLCAgJ24nLCAgJ28nLAogICAgICdwJywgICdxJywgICdyJywgICdzJywg
ICd0JywgICd1JywgICd2JywgICd3JywKICAgICAneCcsICAneScsICAneicsIDB4N2IsIDB4N2Ms
IDB4N2QsIDB4N2UsIDB4N2YsCiAgICAweDgwLCAweDgxLCAweDgyLCAweDgzLCAweDg0LCAweDg1
LCAweDg2LCAweDg3LAogICAgMHg4OCwgMHg4OSwgMHg4YSwgMHg4YiwgMHg4YywgMHg4ZCwgMHg4
ZSwgMHg4ZiwKICAgIDB4OTAsIDB4OTEsIDB4OTIsIDB4OTMsIDB4OTQsIDB4OTUsIDB4OTYsIDB4
OTcsCiAgICAweDk4LCAweDk5LCAweDlhLCAweDliLCAweDljLCAweDlkLCAweDllLCAweDlmLAog
ICAgMHhhMCwgMHhhMSwgMHhhMiwgMHhhMywgMHhhNCwgMHhhNSwgMHhhNiwgMHhhNywKICAgIDB4
YTgsIDB4YTksIDB4YWEsIDB4YWIsIDB4YWMsIDB4YWQsIDB4YWUsIDB4YWYsCiAgICAweGIwLCAw
eGIxLCAweGIyLCAweGIzLCAweGI0LCAweGI1LCAweGI2LCAweGI3LAogICAgMHhiOCwgMHhiOSwg
MHhiYSwgMHhiYiwgMHhiYywgMHhiZCwgMHhiZSwgMHhiZiwKICAgIDB4YzAsIDB4YzEsIDB4YzIs
IDB4YzMsIDB4YzQsIDB4YzUsIDB4YzYsIDB4YzcsCiAgICAweGM4LCAweGM5LCAweGNhLCAweGNi
LCAweGNjLCAweGNkLCAweGNlLCAweGNmLAogICAgMHhkMCwgMHhkMSwgMHhkMiwgMHhkMywgMHhk
NCwgMHhkNSwgMHhkNiwgMHhkNywKICAgIDB4ZDgsIDB4ZDksIDB4ZGEsIDB4ZGIsIDB4ZGMsIDB4
ZGQsIDB4ZGUsIDB4ZGYsCiAgICAweGUwLCAweGUxLCAweGUyLCAweGUzLCAweGU0LCAweGU1LCAw
eGU2LCAweGU3LAogICAgMHhlOCwgMHhlOSwgMHhlYSwgMHhlYiwgMHhlYywgMHhlZCwgMHhlZSwg
MHhlZiwKICAgIDB4ZjAsIDB4ZjEsIDB4ZjIsIDB4ZjMsIDB4ZjQsIDB4ZjUsIDB4ZjYsIDB4Zjcs
CiAgICAweGY4LCAweGY5LCAweGZhLCAweGZiLCAweGZjLCAweGZkLCAweGZlLCAweGZmCn07Cgpp
bnQgYXBfc3RyY2FzZWNtcChjb25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIpCnsKICAgIGNv
bnN0IHVuc2lnbmVkIGNoYXIgKnBzMSA9IChjb25zdCB1bnNpZ25lZCBjaGFyICopIHMxOwogICAg
Y29uc3QgdW5zaWduZWQgY2hhciAqcHMyID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczI7Cgog
ICAgd2hpbGUgKHVjaGFybWFwWypwczFdID09IHVjaGFybWFwWypwczJdKSB7CiAgICAgICAgaWYg
KCpwczEgPT0gJ1wwJykgewogICAgICAgICAgICByZXR1cm4gKDApOwogICAgICAgIH0KICAgICAg
ICArK3BzMTsKICAgICAgICArK3BzMjsKICAgIH0KICAgIHJldHVybiAodWNoYXJtYXBbKnBzMV0g
LSB1Y2hhcm1hcFsqLS1wczJdKTsKfQoKaW50IGFwX3N0cm5jYXNlY21wKGNvbnN0IGNoYXIgKnMx
LCBjb25zdCBjaGFyICpzMiwgaW50IG4pCnsKICAgIGNvbnN0IHVuc2lnbmVkIGNoYXIgKnBzMSA9
IChjb25zdCB1bnNpZ25lZCBjaGFyICopIHMxOwogICAgY29uc3QgdW5zaWduZWQgY2hhciAqcHMy
ID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczI7CiAgICB3aGlsZSAobi0tKSB7CiAgICAgICAg
aWYgKHVjaGFybWFwWypwczFdICE9IHVjaGFybWFwWypwczJdKSB7CiAgICAgICAgICAgIHJldHVy
biAodWNoYXJtYXBbKnBzMV0gLSB1Y2hhcm1hcFsqcHMyXSk7CiAgICAgICAgfQogICAgICAgIGlm
ICgqcHMxID09ICdcMCcpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgICsr
cHMxOwogICAgICAgICsrcHMyOwogICAgfQogICAgcmV0dXJuICgwKTsKfQoKI2RlZmluZSBQUk9H
IGFyZ3ZbMF0KI2RlZmluZSBNRVRIT0QgYXJndlsxXQojZGVmaW5lIE5CIGFyZ3ZbMl0KI2RlZmlu
ZSBTMSBhcmd2WzNdCiNkZWZpbmUgUzIgYXJndls0XQojZGVmaW5lIExFTiBhcmd2WzVdCgovKiBU
aGUgKysgYXJlIGhlcmUgdG8gdHJ5IHRvIHByZXZlbnQgc29tZSBvcHRpbWl6YXRpb24gZG9uZSBi
eSBnY2MgKi8KI2RlZmluZSBGT1IgZm9yIChpPTA7IGk8bmI7IGkrKywgKFMxWzBdKSsrLCAoUzJb
MF0pKyspCgppbnQgbWFpbihpbnQgYXJnYywgY2hhciAqYXJndltdKQp7CiAgICBpbnQ2NF90IGRp
ZmY7CiAgICBzdHJ1Y3QgdGltZXZhbCB0dnMsIHR2ZTsKICAgIGludCBpLCBsZW4sIG5iOwogICAg
aW50IHJlcyA9IDA7CiAgICAKICAgIGlmIChhcmdjIDwgNikgewogICAgICAgIHByaW50ZigiJXMg
PDA9c3RkIDsgMT1vcHRpbWl6ZWQ+IDxuYiBpdGVyPiBTMSBTMiA8bmIgY2hhciB0byBjb21wYXJl
IG9yIDA+XG4iLCBQUk9HKTsKICAgICAgICByZXR1cm4gMDsKICAgIH0KICAgICAgICAKICAgIGxl
biA9IGF0b2koTEVOKTsKICAgIG5iICA9IGF0b2koTkIpOwogICAgCiAgICBpZiAoKk1FVEhPRCA9
PSAnMCcpIHsKICAgICAgICBwcmludGYoIjxzdHJpbmcuaD4gKG5iPSVkLCBsZW49JWQpXG4iLCBu
YiwgbGVuKTsKICAgICAgICBnZXR0aW1lb2ZkYXkoJnR2cyk7CiAgICAgICAgaWYgKGxlbiA9PSAw
KSB7CiAgICAgICAgICAgIEZPUiB7CiAgICAgICAgICAgICAgICAvKiByZWFsbHkgdXNlIHRoZSBy
ZXN1bHQgb2YgdGhlIGZ1bmN0aW9uICovCiAgICAgICAgICAgICAgICByZXMgfD0gc3RyY2FzZWNt
cChTMSwgUzIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAg
ICAgICBGT1IgewogICAgICAgICAgICAgICAgcmVzIHw9IHN0cm5jYXNlY21wKFMxLCBTMiwgbGVu
KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBnZXR0aW1lb2ZkYXkoJnR2ZSk7CiAg
ICB9CiAgICBlbHNlIHsKICAgICAgICBwcmludGYoIk9wdGltaXplZCAobmI9JWQsIGxlbj0lZClc
biIsIG5iLCBsZW4pOwogICAgICAgIGdldHRpbWVvZmRheSgmdHZzKTsKICAgICAgICBpZiAobGVu
ID09IDApIHsKICAgICAgICAgICAgRk9SIHsKICAgICAgICAgICAgICAgIHJlcyB8PSBhcF9zdHJj
YXNlY21wKFMxLCBTMik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAg
ICAgICAgICAgIEZPUiB7CiAgICAgICAgICAgICAgICByZXMgfD0gYXBfc3RybmNhc2VjbXAoUzEs
IFMyLCBsZW4pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGdldHRpbWVvZmRheSgm
dHZlKTsKICAgIH0KCiAgICBkaWZmICA9IChpbnQ2NF90KXR2ZS50dl9zZWMgKiAxMDAwMDAwTCAr
IHR2ZS50dl91c2VjOwogICAgZGlmZiAtPSAoaW50NjRfdCl0dnMudHZfc2VjICogMTAwMDAwMEwg
KyB0dnMudHZfdXNlYzsKCiAgICAvKiByZWFsbHkgdXNlIHRoZSByZXN1bHQgb2YgdGhlIGZ1bmN0
aW9uICovCiAgICBwcmludGYoInRpbWUgPSAlbGxkLiUuNmxsZCA6IHJlcyA9ICVkXG4iLAogICAg
ICAgICAgICAobG9uZyBsb25nKWRpZmYgLyAxMDAwMDAwTCwKICAgICAgICAgICAgKGxvbmcgbG9u
ZylkaWZmICUgMTAwMDAwMEwsCiAgICAgICAgICAgIHJlcyk7CiAgICByZXR1cm4gMDsgCn0K
--001a1139b29454074005253cf4e5--

From dev-return-84677-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 23 22:50:37 2015
Return-Path: <dev-return-84677-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 241A0184CD
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 23 Nov 2015 22:50:37 +0000 (UTC)
Received: (qmail 7358 invoked by uid 500); 23 Nov 2015 22:50:36 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 7270 invoked by uid 500); 23 Nov 2015 22:50:36 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 7260 invoked by uid 99); 23 Nov 2015 22:50:36 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Nov 2015 22:50:36 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 24B6FC693D
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 22:50:36 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id sbSb_M24KeVu for <dev@httpd.apache.org>;
	Mon, 23 Nov 2015 22:50:35 +0000 (UTC)
Received: from mail-qg0-f49.google.com (mail-qg0-f49.google.com [209.85.192.49])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 4DB4843DB6
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 22:50:35 +0000 (UTC)
Received: by qgec40 with SMTP id c40so124456543qge.2
        for <dev@httpd.apache.org>; Mon, 23 Nov 2015 14:50:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=4PU8f4nymOAoLhnENoJFmq7PkwQb45xXQs1qymQn9Ao=;
        b=n+3Bqs0KE8J+HB5oIEyWCMEk4N0EKF9mPU7zIUjXOBbNfKe9mfyPo9Th3eRBMSk8AI
         vfUi7x/x5D137VS82N3o8s73hcf4Musg7jRqIrP3xJz0zXX9wjkSaFRRg1uPcW6bztLL
         N2+ZsEwaXvPanY4R0zL2BMmSP/C8z0c/eL9i+fJf7Dovgrm2aQjQOQRu0qprUxwanjKl
         S4TYHWbBeH/vKKy/Ymt/+Xs1I+aK4TH+mEOYOVXRxZFeQNLHU8LmSVzF6jummOp/4M0j
         K3GlmfRJNw1idU5HMDgSpFmo2AedLMgot+znQ81aMOdaF3NUsOdcOu6rGiwCWo5n1ycZ
         VnGQ==
MIME-Version: 1.0
X-Received: by 10.140.96.45 with SMTP id j42mr29835701qge.92.1448319035084;
 Mon, 23 Nov 2015 14:50:35 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 23 Nov 2015 14:50:35 -0800 (PST)
In-Reply-To: <CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
	<CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
	<301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
	<5653732E.9030401@wanadoo.fr>
	<CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
	<56538021.3030801@wanadoo.fr>
	<CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
	<CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com>
Date: Mon, 23 Nov 2015 23:50:35 +0100
Message-ID: <CAKQ1sVNUWmNubtmqQnzBTVyRcFij0oJXnQ9jaETJyzHX-jt0ww@mail.gmail.com>
Subject: Re: strncasecmp
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Please note that the changes in ap_str[n]casecmp(), ie:
        ++ps1;
        ++ps2;
was a first try/change which (obviously) did nothing.
You may ignore it.


On Mon, Nov 23, 2015 at 11:43 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
> with attachment...
>
> On Mon, Nov 23, 2015 at 11:42 PM, Yann Ylavic <ylavic.dev@gmail.com> wrot=
e:
>> I modified your test program a bit (to measure time from it, see
>> attached), tried with -O{2,3,s}, and except -Os I always have better
>> results with the "optimized" version, eg:
>>
>> $ ./a-O3.out 0 150000000 xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa
>> xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa 0
>> <string.h> (nb=3D150000000, len=3D0)
>> time =3D 8.424984 : res =3D 0
>>
>> $ ./a-O3.out 1 150000000 xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa
>> xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa 0
>> Optimized (nb=3D150000000, len=3D0)
>> time =3D 8.212137 : res =3D 0
>>
>> Possibly gcc (v4.4.5 here) is clever enough to optimize/inline/cheat
>> when given standard (no custom) code, since I had similar results than
>> yours with the original test.c...
>>
>> How does this one work with gcc-5.2?
>>
>> On Mon, Nov 23, 2015 at 10:07 PM, Marion & Christophe JAILLET
>> <christophe.jaillet@wanadoo.fr> wrote:
>>> I just made a small application which takes as command line parameters =
the
>>> number of iteration to run, which version of the algorithm to use, the =
2
>>> strings to compare and the length to compare (or 0 for the non 'n' vers=
ions)
>>>
>>>
>>> Compiled using
>>>     gcc -O3 test.c
>>>
>>> Tested using
>>> linux:~/Code_Source$ time ./a.out 1 100000000
>>> xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa
>>> xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa 0
>>> Optimized (nb=3D100000000, len=3D0)
>>> res =3D 0
>>>
>>> real    0m4.193s
>>> user    0m4.192s
>>> sys    0m0.000s
>>>
>>>
>>>
>>> linux:~/Code_Source$ time ./a.out 0 100000000
>>> xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa
>>> xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa 0
>>> <string.h> (nb=3D100000000, len=3D0)
>>> res =3D 0
>>>
>>> real    0m1.708s
>>> user    0m1.704s
>>> sys    0m0.000s
>>>
>>>
>>>
>>>
>>> See atatchement.
>>>
>>> CJ
>>>
>>>
>>>
>>> Le 23/11/2015 21:33, Yann Ylavic a =C3=A9crit :
>>>>
>>>> Hi Christophe,
>>>>
>>>> On Mon, Nov 23, 2015 at 9:12 PM, Christophe JAILLET
>>>> <christophe.jaillet@wanadoo.fr> wrote:
>>>>>
>>>>> I tried to do some but the benefit of the optimized version is not th=
at
>>>>> clear, at least on my system:
>>>>>     gcc 5.2.1
>>>>>     Linux linux 4.2.0-18-generic #22-Ubuntu SMP Fri Nov 6 18:25:50 UT=
C
>>>>> 2015
>>>>> x86_64 x86_64 x86_64 GNU/Linux
>>>>
>>>> Unfortunately, gcc 5.2.1 (i.e. latest compilers' versions) are not
>>>> widely used...
>>>>
>>>> Did you try a code like ap_proxy_port_of_scheme() with values which
>>>> are unknown schemes?
>>>> Or even worse cases, with similarly chained strcasecmp() looking for
>>>> eg. "httpx" in something like {"httpa", "httpb", "httpc", ...,
>>>> "httpw"}?
>>>>
>>>> Regards,
>>>> Yann.
>>>>
>>>

From dev-return-84678-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 23 23:47:10 2015
Return-Path: <dev-return-84678-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AF8CA18770
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 23 Nov 2015 23:47:10 +0000 (UTC)
Received: (qmail 47480 invoked by uid 500); 23 Nov 2015 23:47:10 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 47378 invoked by uid 500); 23 Nov 2015 23:47:10 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 47367 invoked by uid 99); 23 Nov 2015 23:47:10 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Nov 2015 23:47:10 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id A39C71A0792
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 23:47:09 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.98
X-Spam-Level: ***
X-Spam-Status: No, score=3.98 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id Scnln33NUDTf for <dev@httpd.apache.org>;
	Mon, 23 Nov 2015 23:47:08 +0000 (UTC)
Received: from vms173001pub.verizon.net (vms173001pub.verizon.net [206.46.173.1])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id BDDC82031C
	for <dev@httpd.apache.org>; Mon, 23 Nov 2015 23:47:08 +0000 (UTC)
Received: from [192.168.1.8] ([100.1.236.52]) by vms173001.mailsrvcs.net
 (Oracle Communications Messaging Server 7.0.5.32.0 64bit (built Jul 16 2014))
 with ESMTPA id <0NYA00C7JKPUZU90@vms173001.mailsrvcs.net> for
 dev@httpd.apache.org; Mon, 23 Nov 2015 17:46:47 -0600 (CST)
X-CMAE-Score: 0
X-CMAE-Analysis: v=2.1 cv=Nc0brD34 c=1 sm=1 tr=0	a=UorMnhrCY2jH/mPejITChw==:117
 a=LaogzpLLAAAA:8 a=oR5dmqMzAAAA:8	a=qtqOOiqGOCEA:10 a=r77TgQKjGQsHNAKrUKIA:9
 a=4FVQ3Q3OaSHpzmMCk_EA:9	a=pILNOxqGKmIA:10 a=t29eNCx4SQwA:10 a=pGLkceISAAAA:8
	a=ZGg9gr_FzPcf4OSGmecA:9 a=9wekw3vKIRt8MJkl:21 a=_W_S_7VecoQA:10
Subject: Re: strncasecmp
To: dev@httpd.apache.org
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
 <CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
 <301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
 <5653732E.9030401@wanadoo.fr>
 <CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
 <56538021.3030801@wanadoo.fr>
 <CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
 <CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com>
Cc: ylavic.dev@gmail.com
From: "Mikhail T." <mi+thun@aldan.algebra.com>
X-Enigmail-Draft-Status: N1110
Message-id: <5653A562.7030708@aldan.algebra.com>
Date: Mon, 23 Nov 2015 18:46:42 -0500
User-Agent: Mozilla/5.0 (X11; FreeBSD amd64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-version: 1.0
In-reply-to:
 <CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com>
Content-type: multipart/alternative;
 boundary=------------080805080307030800000401

This is a multi-part message in MIME format.
--------------080805080307030800000401
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: 7bit

On 23.11.2015 17:43, Yann Ylavic wrote:
> with attachment...
There is a mistake somewhere in the optimized version:

    ./o 1 100000000 aaaa aa1a 0
    Optimized (nb=100000000, len=0)
    time = 0.611311 : res = 0

The result should not be zero. Indeed, the string.h version is correct:

    ./o 0 100000000 aaaa aa1a 0
    <string.h> (nb=100000000, len=0)
    time = 4.189366 : res = 48

Yours,

    -mi


--------------080805080307030800000401
Content-Type: text/html; charset=windows-1252
Content-Transfer-Encoding: 7bit

<html>
  <head>
    <meta content="text/html; charset=windows-1252"
      http-equiv="Content-Type">
  </head>
  <body bgcolor="#FFFFFF" text="#000000">
    <div class="moz-cite-prefix">On 23.11.2015 17:43, Yann Ylavic wrote:<br>
    </div>
    <blockquote
cite="mid:CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com"
      type="cite">
      <pre wrap="">with attachment...</pre>
    </blockquote>
    There is a mistake somewhere in the optimized version:<br>
    <blockquote><tt>./o 1 100000000 aaaa aa1a 0</tt><tt><br>
      </tt><tt>Optimized (nb=100000000, len=0)</tt><tt><br>
      </tt><tt>time = 0.611311 : res = <font color="#ff0000">0</font></tt><br>
    </blockquote>
    The result should not be zero. Indeed, the string.h version is
    correct:<br>
    <blockquote><tt>./o 0 100000000 aaaa aa1a 0</tt><tt><br>
      </tt><tt>&lt;string.h&gt; (nb=100000000, len=0)</tt><tt><br>
      </tt><tt>time = 4.189366 : res = <font color="#009900">48</font></tt><br>
    </blockquote>
    Yours,<br>
    <blockquote>-mi<br>
    </blockquote>
  </body>
</html>

--------------080805080307030800000401--

From dev-return-84679-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 00:06:03 2015
Return-Path: <dev-return-84679-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 34E001884F
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 00:06:03 +0000 (UTC)
Received: (qmail 97540 invoked by uid 500); 24 Nov 2015 00:06:02 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 97451 invoked by uid 500); 24 Nov 2015 00:06:02 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 97441 invoked by uid 99); 24 Nov 2015 00:06:02 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 00:06:02 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 40857C11C2
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 00:06:02 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id AKC0jr0uRoo8 for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 00:05:57 +0000 (UTC)
Received: from mail-qg0-f44.google.com (mail-qg0-f44.google.com [209.85.192.44])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 40F57439E9
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 00:05:57 +0000 (UTC)
Received: by qgeb1 with SMTP id b1so589730qge.1
        for <dev@httpd.apache.org>; Mon, 23 Nov 2015 16:05:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=hmIWoEynzxdpEsq7ihz4y0BZ2+f/M6aYKEZKjSC/YZM=;
        b=RQTlLapD7lIJAn0d6J/5yqOKhB/ROoqHOmtcs9bby5JpUaXFyMu11+Evly/EWApuRV
         sUd5wsfrf22V4V8+8IjjNi2FBUM9TcAAq3O4U/gDHKk8zkVsQwXUO246yDLTBrVu4KdL
         6wINI7ZhPjs3AVZfKRo2br5hfQnsuJ1ph/yJX1/202PSlQLsPdlK/X8ic2SJlFHbbrcN
         KOv4yLH7gqxGNG8x1JQx5P1UY5Kn0GNhj4yDLL70EJM/413d7Nn6IYTLerm4RPcIf2hv
         SeSSgPxm/AY+DUXVDltNmc9to7iXAX9DhZ0CjlarIKATTC2FwEq4x73a+KDm0jRQEm4t
         4Y6Q==
MIME-Version: 1.0
X-Received: by 10.140.179.213 with SMTP id z204mr33057420qhz.70.1448323556824;
 Mon, 23 Nov 2015 16:05:56 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 23 Nov 2015 16:05:56 -0800 (PST)
In-Reply-To: <5653A562.7030708@aldan.algebra.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
	<CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
	<301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
	<5653732E.9030401@wanadoo.fr>
	<CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
	<56538021.3030801@wanadoo.fr>
	<CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
	<CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com>
	<5653A562.7030708@aldan.algebra.com>
Date: Tue, 24 Nov 2015 01:05:56 +0100
Message-ID: <CAKQ1sVNRvJ7XZo5rAP_Rq8P44N4PjTyQe8Gw56VODJWb8j95Dw@mail.gmail.com>
Subject: Re: strncasecmp
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: multipart/mixed; boundary=001a113b426820460605253e1bba

--001a113b426820460605253e1bba
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 12:46 AM, Mikhail T. <mi+thun@aldan.algebra.com> wrote:
> On 23.11.2015 17:43, Yann Ylavic wrote:
>
> with attachment...
>
> There is a mistake somewhere in the optimized version:

My bad, I somehow corrupted the original ap_str[n]casecmp() functions.

Here is the correct (new) test, along with the diff wrt the original
(Christophe's) test.c.

Thanks,
Yann.

--001a113b426820460605253e1bba
Content-Type: text/plain; charset=US-ASCII; name="test_vs_newtest.diff"
Content-Disposition: attachment; filename="test_vs_newtest.diff"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_ihcmfud71

LS0tIHRlc3QuYwkyMDE1LTExLTI0IDAxOjAxOjI5LjAzOTMzOTMxOCArMDEwMAorKysgbmV3dGVz
dC5jCTIwMTUtMTEtMjQgMDA6NTc6MTMuNzIwODE3ODk1ICswMTAwCkBAIC0xLDggKzEsMTAgQEAK
ICNpbmNsdWRlIDxzdGRpby5oPgorI2luY2x1ZGUgPHN0ZGludC5oPgogI2luY2x1ZGUgPHN0ZGxp
Yi5oPgogI2luY2x1ZGUgPHN0cmluZy5oPgogCiAjaW5jbHVkZSA8bGltaXRzLmg+CisjaW5jbHVk
ZSA8c3lzL3RpbWUuaD4KIAogLyoKICAqIFByb3ZpZGUgb3VyIG93biBrbm93bi1mYXN0IGltcGxl
bWVudGF0aW9uIG9mIHN0cltuXWNhc2VjbXAoKQpAQCAtODMsNiArODUsOCBAQCBpbnQgYXBfc3Ry
bmNhc2VjbXAoY29uc3QgY2hhciAqczEsIGNvbnN0CiAKIGludCBtYWluKGludCBhcmdjLCBjaGFy
ICphcmd2W10pCiB7CisgICAgaW50NjRfdCBkaWZmOworICAgIHN0cnVjdCB0aW1ldmFsIHR2cywg
dHZlOwogICAgIGludCBpLCBsZW4sIG5iOwogICAgIGludCByZXMgPSAwOwogICAgIApAQCAtOTYs
NiArMTAwLDcgQEAgaW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkKICAgICAKICAgICBp
ZiAoKk1FVEhPRCA9PSAnMCcpIHsKICAgICAgICAgcHJpbnRmKCI8c3RyaW5nLmg+IChuYj0lZCwg
bGVuPSVkKVxuIiwgbmIsIGxlbik7CisgICAgICAgIGdldHRpbWVvZmRheSgmdHZzLCBOVUxMKTsK
ICAgICAgICAgaWYgKGxlbiA9PSAwKSB7CiAgICAgICAgICAgICBGT1IgewogICAgICAgICAgICAg
ICAgIC8qIHJlYWxseSB1c2UgdGhlIHJlc3VsdCBvZiB0aGUgZnVuY3Rpb24gKi8KQEAgLTEwNyw5
ICsxMTIsMTEgQEAgaW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkKICAgICAgICAgICAg
ICAgICByZXMgfD0gc3RybmNhc2VjbXAoUzEsIFMyLCBsZW4pOwogICAgICAgICAgICAgfQogICAg
ICAgICB9CisgICAgICAgIGdldHRpbWVvZmRheSgmdHZlLCBOVUxMKTsKICAgICB9CiAgICAgZWxz
ZSB7CiAgICAgICAgIHByaW50ZigiT3B0aW1pemVkIChuYj0lZCwgbGVuPSVkKVxuIiwgbmIsIGxl
bik7CisgICAgICAgIGdldHRpbWVvZmRheSgmdHZzLCBOVUxMKTsKICAgICAgICAgaWYgKGxlbiA9
PSAwKSB7CiAgICAgICAgICAgICBGT1IgewogICAgICAgICAgICAgICAgIHJlcyB8PSBhcF9zdHJj
YXNlY21wKFMxLCBTMik7CkBAIC0xMjAsOSArMTI3LDE2IEBAIGludCBtYWluKGludCBhcmdjLCBj
aGFyICphcmd2W10pCiAgICAgICAgICAgICAgICAgcmVzIHw9IGFwX3N0cm5jYXNlY21wKFMxLCBT
MiwgbGVuKTsKICAgICAgICAgICAgIH0KICAgICAgICAgfQorICAgICAgICBnZXR0aW1lb2ZkYXko
JnR2ZSwgTlVMTCk7CiAgICAgfQotICAgIAorCisgICAgZGlmZiAgPSAoaW50NjRfdCl0dmUudHZf
c2VjICogMTAwMDAwMEwgKyB0dmUudHZfdXNlYzsKKyAgICBkaWZmIC09IChpbnQ2NF90KXR2cy50
dl9zZWMgKiAxMDAwMDAwTCArIHR2cy50dl91c2VjOworCiAgICAgLyogcmVhbGx5IHVzZSB0aGUg
cmVzdWx0IG9mIHRoZSBmdW5jdGlvbiAqLwotICAgIHByaW50ZigicmVzID0gJWRcbiIsIHJlcyk7
CisgICAgcHJpbnRmKCJ0aW1lID0gJWxsZC4lLjZsbGQgOiByZXMgPSAlZFxuIiwKKyAgICAgICAg
ICAgIChsb25nIGxvbmcpZGlmZiAvIDEwMDAwMDBMLAorICAgICAgICAgICAgKGxvbmcgbG9uZylk
aWZmICUgMTAwMDAwMEwsCisgICAgICAgICAgICByZXMpOwogICAgIHJldHVybiAwOyAKIH0K
--001a113b426820460605253e1bba
Content-Type: text/x-csrc; charset=US-ASCII; name="newtest.c"
Content-Disposition: attachment; filename="newtest.c"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_ihcmfucm0

I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzdGRpbnQuaD4KI2luY2x1ZGUgPHN0ZGxpYi5o
PgojaW5jbHVkZSA8c3RyaW5nLmg+CgojaW5jbHVkZSA8bGltaXRzLmg+CiNpbmNsdWRlIDxzeXMv
dGltZS5oPgoKLyoKICogUHJvdmlkZSBvdXIgb3duIGtub3duLWZhc3QgaW1wbGVtZW50YXRpb24g
b2Ygc3RyW25dY2FzZWNtcCgpCiAqIE5PVEU6IEFTQ0lJIG9ubHkhCiAqLwpzdGF0aWMgY29uc3Qg
dW5zaWduZWQgY2hhciB1Y2hhcm1hcFtdID0gewogICAgMHgwLCAgMHgxLCAgMHgyLCAgMHgzLCAg
MHg0LCAgMHg1LCAgMHg2LCAgMHg3LAogICAgMHg4LCAgMHg5LCAgMHhhLCAgMHhiLCAgMHhjLCAg
MHhkLCAgMHhlLCAgMHhmLAogICAgMHgxMCwgMHgxMSwgMHgxMiwgMHgxMywgMHgxNCwgMHgxNSwg
MHgxNiwgMHgxNywKICAgIDB4MTgsIDB4MTksIDB4MWEsIDB4MWIsIDB4MWMsIDB4MWQsIDB4MWUs
IDB4MWYsCiAgICAweDIwLCAweDIxLCAweDIyLCAweDIzLCAweDI0LCAweDI1LCAweDI2LCAweDI3
LAogICAgMHgyOCwgMHgyOSwgMHgyYSwgMHgyYiwgMHgyYywgMHgyZCwgMHgyZSwgMHgyZiwKICAg
IDB4MzAsIDB4MzEsIDB4MzIsIDB4MzMsIDB4MzQsIDB4MzUsIDB4MzYsIDB4MzcsCiAgICAweDM4
LCAweDM5LCAweDNhLCAweDNiLCAweDNjLCAweDNkLCAweDNlLCAweDNmLAogICAgMHg0MCwgICdh
JywgICdiJywgICdjJywgICdkJywgICdlJywgICdmJywgICdnJywKICAgICAnaCcsICAnaScsICAn
aicsICAnaycsICAnbCcsICAnbScsICAnbicsICAnbycsCiAgICAgJ3AnLCAgJ3EnLCAgJ3InLCAg
J3MnLCAgJ3QnLCAgJ3UnLCAgJ3YnLCAgJ3cnLAogICAgICd4JywgICd5JywgICd6JywgMHg1Yiwg
MHg1YywgMHg1ZCwgMHg1ZSwgMHg1ZiwKICAgIDB4NjAsICAnYScsICAnYicsICAnYycsICAnZCcs
ICAnZScsICAnZicsICAnZycsCiAgICAgJ2gnLCAgJ2knLCAgJ2onLCAgJ2snLCAgJ2wnLCAgJ20n
LCAgJ24nLCAgJ28nLAogICAgICdwJywgICdxJywgICdyJywgICdzJywgICd0JywgICd1JywgICd2
JywgICd3JywKICAgICAneCcsICAneScsICAneicsIDB4N2IsIDB4N2MsIDB4N2QsIDB4N2UsIDB4
N2YsCiAgICAweDgwLCAweDgxLCAweDgyLCAweDgzLCAweDg0LCAweDg1LCAweDg2LCAweDg3LAog
ICAgMHg4OCwgMHg4OSwgMHg4YSwgMHg4YiwgMHg4YywgMHg4ZCwgMHg4ZSwgMHg4ZiwKICAgIDB4
OTAsIDB4OTEsIDB4OTIsIDB4OTMsIDB4OTQsIDB4OTUsIDB4OTYsIDB4OTcsCiAgICAweDk4LCAw
eDk5LCAweDlhLCAweDliLCAweDljLCAweDlkLCAweDllLCAweDlmLAogICAgMHhhMCwgMHhhMSwg
MHhhMiwgMHhhMywgMHhhNCwgMHhhNSwgMHhhNiwgMHhhNywKICAgIDB4YTgsIDB4YTksIDB4YWEs
IDB4YWIsIDB4YWMsIDB4YWQsIDB4YWUsIDB4YWYsCiAgICAweGIwLCAweGIxLCAweGIyLCAweGIz
LCAweGI0LCAweGI1LCAweGI2LCAweGI3LAogICAgMHhiOCwgMHhiOSwgMHhiYSwgMHhiYiwgMHhi
YywgMHhiZCwgMHhiZSwgMHhiZiwKICAgIDB4YzAsIDB4YzEsIDB4YzIsIDB4YzMsIDB4YzQsIDB4
YzUsIDB4YzYsIDB4YzcsCiAgICAweGM4LCAweGM5LCAweGNhLCAweGNiLCAweGNjLCAweGNkLCAw
eGNlLCAweGNmLAogICAgMHhkMCwgMHhkMSwgMHhkMiwgMHhkMywgMHhkNCwgMHhkNSwgMHhkNiwg
MHhkNywKICAgIDB4ZDgsIDB4ZDksIDB4ZGEsIDB4ZGIsIDB4ZGMsIDB4ZGQsIDB4ZGUsIDB4ZGYs
CiAgICAweGUwLCAweGUxLCAweGUyLCAweGUzLCAweGU0LCAweGU1LCAweGU2LCAweGU3LAogICAg
MHhlOCwgMHhlOSwgMHhlYSwgMHhlYiwgMHhlYywgMHhlZCwgMHhlZSwgMHhlZiwKICAgIDB4ZjAs
IDB4ZjEsIDB4ZjIsIDB4ZjMsIDB4ZjQsIDB4ZjUsIDB4ZjYsIDB4ZjcsCiAgICAweGY4LCAweGY5
LCAweGZhLCAweGZiLCAweGZjLCAweGZkLCAweGZlLCAweGZmCn07CgppbnQgYXBfc3RyY2FzZWNt
cChjb25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIpCnsKICAgIGNvbnN0IHVuc2lnbmVkIGNo
YXIgKnBzMSA9IChjb25zdCB1bnNpZ25lZCBjaGFyICopIHMxOwogICAgY29uc3QgdW5zaWduZWQg
Y2hhciAqcHMyID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczI7CgogICAgd2hpbGUgKHVjaGFy
bWFwWypwczFdID09IHVjaGFybWFwWypwczIrK10pIHsKICAgICAgICBpZiAoKnBzMSsrID09ICdc
MCcpIHsKICAgICAgICAgICAgcmV0dXJuICgwKTsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4g
KHVjaGFybWFwWypwczFdIC0gdWNoYXJtYXBbKi0tcHMyXSk7Cn0KCmludCBhcF9zdHJuY2FzZWNt
cChjb25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIsIGludCBuKQp7CiAgICBjb25zdCB1bnNp
Z25lZCBjaGFyICpwczEgPSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMTsKICAgIGNvbnN0IHVu
c2lnbmVkIGNoYXIgKnBzMiA9IChjb25zdCB1bnNpZ25lZCBjaGFyICopIHMyOwogICAgd2hpbGUg
KG4tLSkgewogICAgICAgIGlmICh1Y2hhcm1hcFsqcHMxXSAhPSB1Y2hhcm1hcFsqcHMyKytdKSB7
CiAgICAgICAgICAgIHJldHVybiAodWNoYXJtYXBbKnBzMV0gLSB1Y2hhcm1hcFsqLS1wczJdKTsK
ICAgICAgICB9CiAgICAgICAgaWYgKCpwczErKyA9PSAnXDAnKSB7CiAgICAgICAgICAgIGJyZWFr
OwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiAoMCk7Cn0KCiNkZWZpbmUgUFJPRyBhcmd2WzBd
CiNkZWZpbmUgTUVUSE9EIGFyZ3ZbMV0KI2RlZmluZSBOQiBhcmd2WzJdCiNkZWZpbmUgUzEgYXJn
dlszXQojZGVmaW5lIFMyIGFyZ3ZbNF0KI2RlZmluZSBMRU4gYXJndls1XQoKLyogVGhlICsrIGFy
ZSBoZXJlIHRvIHRyeSB0byBwcmV2ZW50IHNvbWUgb3B0aW1pemF0aW9uIGRvbmUgYnkgZ2NjICov
CiNkZWZpbmUgRk9SIGZvciAoaT0wOyBpPG5iOyBpKyssIChTMVswXSkrKywgKFMyWzBdKSsrKQoK
aW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkKewogICAgaW50NjRfdCBkaWZmOwogICAg
c3RydWN0IHRpbWV2YWwgdHZzLCB0dmU7CiAgICBpbnQgaSwgbGVuLCBuYjsKICAgIGludCByZXMg
PSAwOwogICAgCiAgICBpZiAoYXJnYyA8IDYpIHsKICAgICAgICBwcmludGYoIiVzIDwwPXN0ZCA7
IDE9b3B0aW1pemVkPiA8bmIgaXRlcj4gUzEgUzIgPG5iIGNoYXIgdG8gY29tcGFyZSBvciAwPlxu
IiwgUFJPRyk7CiAgICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICAgICAgCiAgICBsZW4gPSBhdG9p
KExFTik7CiAgICBuYiAgPSBhdG9pKE5CKTsKICAgIAogICAgaWYgKCpNRVRIT0QgPT0gJzAnKSB7
CiAgICAgICAgcHJpbnRmKCI8c3RyaW5nLmg+IChuYj0lZCwgbGVuPSVkKVxuIiwgbmIsIGxlbik7
CiAgICAgICAgZ2V0dGltZW9mZGF5KCZ0dnMsIE5VTEwpOwogICAgICAgIGlmIChsZW4gPT0gMCkg
ewogICAgICAgICAgICBGT1IgewogICAgICAgICAgICAgICAgLyogcmVhbGx5IHVzZSB0aGUgcmVz
dWx0IG9mIHRoZSBmdW5jdGlvbiAqLwogICAgICAgICAgICAgICAgcmVzIHw9IHN0cmNhc2VjbXAo
UzEsIFMyKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAg
ICAgRk9SIHsKICAgICAgICAgICAgICAgIHJlcyB8PSBzdHJuY2FzZWNtcChTMSwgUzIsIGxlbik7
CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZ2V0dGltZW9mZGF5KCZ0dmUsIE5VTEwp
OwogICAgfQogICAgZWxzZSB7CiAgICAgICAgcHJpbnRmKCJPcHRpbWl6ZWQgKG5iPSVkLCBsZW49
JWQpXG4iLCBuYiwgbGVuKTsKICAgICAgICBnZXR0aW1lb2ZkYXkoJnR2cywgTlVMTCk7CiAgICAg
ICAgaWYgKGxlbiA9PSAwKSB7CiAgICAgICAgICAgIEZPUiB7CiAgICAgICAgICAgICAgICByZXMg
fD0gYXBfc3RyY2FzZWNtcChTMSwgUzIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAg
IGVsc2UgewogICAgICAgICAgICBGT1IgewogICAgICAgICAgICAgICAgcmVzIHw9IGFwX3N0cm5j
YXNlY21wKFMxLCBTMiwgbGVuKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBnZXR0
aW1lb2ZkYXkoJnR2ZSwgTlVMTCk7CiAgICB9CgogICAgZGlmZiAgPSAoaW50NjRfdCl0dmUudHZf
c2VjICogMTAwMDAwMEwgKyB0dmUudHZfdXNlYzsKICAgIGRpZmYgLT0gKGludDY0X3QpdHZzLnR2
X3NlYyAqIDEwMDAwMDBMICsgdHZzLnR2X3VzZWM7CgogICAgLyogcmVhbGx5IHVzZSB0aGUgcmVz
dWx0IG9mIHRoZSBmdW5jdGlvbiAqLwogICAgcHJpbnRmKCJ0aW1lID0gJWxsZC4lLjZsbGQgOiBy
ZXMgPSAlZFxuIiwKICAgICAgICAgICAgKGxvbmcgbG9uZylkaWZmIC8gMTAwMDAwMEwsCiAgICAg
ICAgICAgIChsb25nIGxvbmcpZGlmZiAlIDEwMDAwMDBMLAogICAgICAgICAgICByZXMpOwogICAg
cmV0dXJuIDA7IAp9Cg==
--001a113b426820460605253e1bba--

From dev-return-84680-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 00:08:06 2015
Return-Path: <dev-return-84680-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4798A1887B
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 00:08:06 +0000 (UTC)
Received: (qmail 2245 invoked by uid 500); 24 Nov 2015 00:08:05 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 2166 invoked by uid 500); 24 Nov 2015 00:08:05 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 2156 invoked by uid 99); 24 Nov 2015 00:08:05 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 00:08:05 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 304D2C4485
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 00:08:05 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.98
X-Spam-Level: ***
X-Spam-Status: No, score=3.98 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id ghei_xjHnL6x for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 00:08:00 +0000 (UTC)
Received: from vms173005pub.verizon.net (vms173005pub.verizon.net [206.46.173.5])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id CCDF020C47
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 00:07:59 +0000 (UTC)
Received: from [192.168.1.8] ([100.1.236.52]) by vms173005.mailsrvcs.net
 (Oracle Communications Messaging Server 7.0.5.32.0 64bit (built Jul 16 2014))
 with ESMTPA id <0NYA00N8TLOW3970@vms173005.mailsrvcs.net> for
 dev@httpd.apache.org; Mon, 23 Nov 2015 18:07:50 -0600 (CST)
X-CMAE-Score: 0
X-CMAE-Analysis: v=2.1 cv=J+9Xl1TS c=1 sm=1 tr=0	a=UorMnhrCY2jH/mPejITChw==:117
 a=LaogzpLLAAAA:8 a=oR5dmqMzAAAA:8	a=qtqOOiqGOCEA:10 a=r77TgQKjGQsHNAKrUKIA:9
 a=kJItB85CJjxvpzHgUsYA:9	a=pILNOxqGKmIA:10 a=ZU-xFERdZh4A:10 a=pGLkceISAAAA:8
	a=dQGomD_5pfpWpAJGeOwA:9 a=_W_S_7VecoQA:10
Subject: Re: strncasecmp
To: dev@httpd.apache.org
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
 <CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
 <301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
 <5653732E.9030401@wanadoo.fr>
 <CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
 <56538021.3030801@wanadoo.fr>
 <CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
 <CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com>
 <5653A562.7030708@aldan.algebra.com>
 <CAKQ1sVNRvJ7XZo5rAP_Rq8P44N4PjTyQe8Gw56VODJWb8j95Dw@mail.gmail.com>
From: "Mikhail T." <mi+thun@aldan.algebra.com>
Message-id: <5653AA50.9060809@aldan.algebra.com>
Date: Mon, 23 Nov 2015 19:07:44 -0500
User-Agent: Mozilla/5.0 (X11; FreeBSD amd64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-version: 1.0
In-reply-to:
 <CAKQ1sVNRvJ7XZo5rAP_Rq8P44N4PjTyQe8Gw56VODJWb8j95Dw@mail.gmail.com>
Content-type: multipart/alternative;
 boundary=------------030801040505050505040402

This is a multi-part message in MIME format.
--------------030801040505050505040402
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: 7bit

On 23.11.2015 19:05, Yann Ylavic wrote:
> Here is the correct (new) test, along with the diff wrt the original
> (Christophe's) test.c.
BTW, if the program measures its own time, should it not use getrusage()
instead of gettimeofday()?

    -mi


--------------030801040505050505040402
Content-Type: text/html; charset=windows-1252
Content-Transfer-Encoding: 7bit

<html>
  <head>
    <meta content="text/html; charset=windows-1252"
      http-equiv="Content-Type">
  </head>
  <body bgcolor="#FFFFFF" text="#000000">
    <div class="moz-cite-prefix">On 23.11.2015 19:05, Yann Ylavic wrote:<br>
    </div>
    <blockquote
cite="mid:CAKQ1sVNRvJ7XZo5rAP_Rq8P44N4PjTyQe8Gw56VODJWb8j95Dw@mail.gmail.com"
      type="cite">
      <pre wrap="">Here is the correct (new) test, along with the diff wrt the original
(Christophe's) test.c.</pre>
    </blockquote>
    BTW, if the program measures its own time, should it not use
    getrusage() instead of gettimeofday()?<br>
    <blockquote>-mi<br>
    </blockquote>
  </body>
</html>

--------------030801040505050505040402--

From dev-return-84681-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 00:15:10 2015
Return-Path: <dev-return-84681-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CFE1C188C9
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 00:15:10 +0000 (UTC)
Received: (qmail 18972 invoked by uid 500); 24 Nov 2015 00:15:10 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 18908 invoked by uid 500); 24 Nov 2015 00:15:10 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 18897 invoked by uid 99); 24 Nov 2015 00:15:10 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 00:15:10 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id E0B70C440B
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 00:15:09 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id QuY2SuuTUMah for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 00:15:04 +0000 (UTC)
Received: from mail-qg0-f43.google.com (mail-qg0-f43.google.com [209.85.192.43])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id A595220EBA
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 00:15:03 +0000 (UTC)
Received: by qgeb1 with SMTP id b1so698904qge.1
        for <dev@httpd.apache.org>; Mon, 23 Nov 2015 16:14:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=MvYrmNNvHwc1uOoxW8qwilU0ynkBcWmbOEXPojUr9+8=;
        b=e+nQzu3eAgLO0dHOCkvZoDYZStW/171BLuKJpd+UPKVBhbi70ct6X60SKLE5iV1hSO
         4k+RzvHTaFwO3UwEI6kIqhnEQBpppFBTOK2dz/RTQGzzbQNMXYKx4rVXs9Nm2h0rhPAX
         3oIFfhnkS4UWNHKVAeBbmWqFAfJ2XAR+xPHlXDhWM15Hd5T60hjPbjlI27qI6vuev9+9
         YSm2+z5YdDEDzT48KcMmD8gEeTbLlJzSEidmZqTkc1SdUU5i3tcteuKOuhXpksJeh2L9
         NL6LGgZShksG5kOc4eNc8m+JoxD8EPCG8+ktJKUCUw/GdU35K+LAyLj4AajvTT8fGqLg
         KUcQ==
MIME-Version: 1.0
X-Received: by 10.140.251.215 with SMTP id w206mr12734998qhc.73.1448324096855;
 Mon, 23 Nov 2015 16:14:56 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 23 Nov 2015 16:14:56 -0800 (PST)
In-Reply-To: <5653AA50.9060809@aldan.algebra.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
	<CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
	<301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
	<5653732E.9030401@wanadoo.fr>
	<CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
	<56538021.3030801@wanadoo.fr>
	<CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
	<CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com>
	<5653A562.7030708@aldan.algebra.com>
	<CAKQ1sVNRvJ7XZo5rAP_Rq8P44N4PjTyQe8Gw56VODJWb8j95Dw@mail.gmail.com>
	<5653AA50.9060809@aldan.algebra.com>
Date: Tue, 24 Nov 2015 01:14:56 +0100
Message-ID: <CAKQ1sVNeSGM_O-ph8hGV5JV5SSm2yN_nRr_tPq2-=qcf43g=Vw@mail.gmail.com>
Subject: Re: strncasecmp
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 1:07 AM, Mikhail T. <mi+thun@aldan.algebra.com> wrote:
>
> BTW, if the program measures its own time, should it not use getrusage()
> instead of gettimeofday()?

Well, it measures the time spent in the relevant code, with a
monotonic clock, that should be fair enough.
We don't care about the whole process time and other counters.

Regards,
Yann.

From dev-return-84682-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 00:24:47 2015
Return-Path: <dev-return-84682-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1836918934
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 00:24:47 +0000 (UTC)
Received: (qmail 48714 invoked by uid 500); 24 Nov 2015 00:24:46 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 48642 invoked by uid 500); 24 Nov 2015 00:24:46 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 48632 invoked by uid 99); 24 Nov 2015 00:24:46 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 00:24:46 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 16F0018099D
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 00:24:46 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.98
X-Spam-Level: **
X-Spam-Status: No, score=2.98 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01,
	RCVD_IN_MSPIKE_WL=-0.01] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id IgrUIVgveiQL for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 00:24:41 +0000 (UTC)
Received: from vms173013pub.verizon.net (vms173013pub.verizon.net [206.46.173.13])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 4574620BB5
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 00:24:41 +0000 (UTC)
MIME-version: 1.0
Content-type: multipart/alternative;
 boundary="Boundary_(ID_RPwSdNS+azaVqn3rreBvFA)"
Received: from [192.168.1.8] ([100.1.236.52]) by vms173013.mailsrvcs.net
 (Oracle Communications Messaging Server 7.0.5.32.0 64bit (built Jul 16 2014))
 with ESMTPA id <0NYA009MGMGIX040@vms173013.mailsrvcs.net> for
 dev@httpd.apache.org; Mon, 23 Nov 2015 18:24:23 -0600 (CST)
X-CMAE-Score: 0
X-CMAE-Analysis: v=2.1 cv=btqxfxui c=1 sm=1 tr=0	a=UorMnhrCY2jH/mPejITChw==:117
 a=LaogzpLLAAAA:8 a=oR5dmqMzAAAA:8	a=qtqOOiqGOCEA:10 a=r77TgQKjGQsHNAKrUKIA:9
 a=AqTbqLHWc3AOn9YsxRUA:9	a=CzymrE3NL-Sl4kvB:21 a=lK3yAyIbINE_0uX5:21
 a=pILNOxqGKmIA:10	a=pGLkceISAAAA:8 a=LDv739sqSaTw8Yky_AQA:9
 a=XT2cqWy1i2neCDD9:21	a=_W_S_7VecoQA:10
Subject: Re: strncasecmp
To: dev@httpd.apache.org
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
 <CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
 <301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
 <5653732E.9030401@wanadoo.fr>
 <CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
 <56538021.3030801@wanadoo.fr>
 <CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
 <CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com>
 <5653A562.7030708@aldan.algebra.com>
 <CAKQ1sVNRvJ7XZo5rAP_Rq8P44N4PjTyQe8Gw56VODJWb8j95Dw@mail.gmail.com>
From: "Mikhail T." <mi+thun@aldan.algebra.com>
X-Enigmail-Draft-Status: N1110
Message-id: <5653AE32.3030302@aldan.algebra.com>
Date: Mon, 23 Nov 2015 19:24:18 -0500
User-Agent: Mozilla/5.0 (X11; FreeBSD amd64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
In-reply-to:
 <CAKQ1sVNRvJ7XZo5rAP_Rq8P44N4PjTyQe8Gw56VODJWb8j95Dw@mail.gmail.com>

This is a multi-part message in MIME format.

--Boundary_(ID_RPwSdNS+azaVqn3rreBvFA)
Content-type: text/plain; CHARSET=US-ASCII
Content-transfer-encoding: 7BIT

On 23.11.2015 19:05, Yann Ylavic wrote:
>     while (ucharmap[*ps1] == ucharmap[*ps2++]) {
>         if (*ps1++ == '\0') {
>             return (0);
>         }
>     }
>     return (ucharmap[*ps1] - ucharmap[*--ps2]);
Is there really a gain in inc- and decrementing this way? Would not it
be easier to read with the explicit increments -- and, incidentally, no
decrements at all?

        while (ucharmap[*ps1] == ucharmap[*ps2]) {
            if (*ps1 == '\0') {
                return (0);
            }
            ++ps1;
            ++ps2;
        }
        return (ucharmap[*ps1] - ucharmap[*ps2]);

> We don't care about the whole process time and other counters.
That's certainly true. But, then, why bother with building time-counter
into the test at all -- instead of simply relying on time(1)?

But something is still not right -- the result (for either of the
methods) can depend on the number of iterations (!!):

    ./strncasecmp 1 27 aCaa Ac 2
    Optimized (nb=27, len=2)
    time = 0.000001 : res = 32
    ./strncasecmp 1 26 aCaa Ac 2
    Optimized (nb=26, len=2)
    time = 0.000001 : res = 0
    ./strncasecmp 0 27 aCaa Ac 2
    <string.h> (nb=27, len=2)
    time = 0.000003 : res = 32
    ./strncasecmp 0 26 aCaa Ac 2
    <string.h> (nb=26, len=2)
    time = 0.000003 : res = 0

Using clang on FreeBSD/amd64 here. Yours,

    -mi



--Boundary_(ID_RPwSdNS+azaVqn3rreBvFA)
Content-type: text/html; charset=windows-1252
Content-transfer-encoding: 8BIT

<html>
  <head>
    <meta content="text/html; charset=windows-1252"
      http-equiv="Content-Type">
  </head>
  <body bgcolor="#FFFFFF" text="#000000">
    <div class="moz-cite-prefix">On 23.11.2015 19:05, Yann Ylavic wrote:<br>
    </div>
    <blockquote
cite="mid:CAKQ1sVNRvJ7XZo5rAP_Rq8P44N4PjTyQe8Gw56VODJWb8j95Dw@mail.gmail.com"
      type="cite">
      <pre wrap="">    while (ucharmap[*ps1] == ucharmap[*ps2++]) {
        if (*ps1++ == '\0') {
            return (0);
        }
    }
    return (ucharmap[*ps1] - ucharmap[*--ps2]);</pre>
    </blockquote>
    Is there really a gain in inc- and decrementing this way? Would not
    it be easier to read with the explicit increments -- and,
    incidentally, no decrements at all?<br>
    <blockquote><tt> while (ucharmap[*ps1] == ucharmap[*ps2]) {</tt><tt><br>
      </tt><tt> if (*ps1 == '\0') {</tt><tt><br>
      </tt><tt> return (0);</tt><tt><br>
      </tt><tt> }</tt><tt><br>
      </tt><tt> ++ps1;</tt><tt><br>
      </tt><tt> ++ps2;</tt><tt><br>
      </tt><tt> }</tt><tt><br>
      </tt><tt> return (ucharmap[*ps1] - ucharmap[*ps2]);</tt><br>
    </blockquote>
    <blockquote type="cite">
      <pre wrap="">We don't care about the whole process time and other counters.</pre>
    </blockquote>
    That's certainly true. But, then, why bother with building
    time-counter into the test at all -- instead of simply relying on
    time(1)?<br>
    <br>
    But something is still not right -- the result (for either of the
    methods) can depend on the number of iterations (!!):<br>
    <blockquote><tt>./strncasecmp 1 27 aCaa Ac 2</tt><tt><br>
      </tt><tt>Optimized (nb=27, len=2)</tt><tt><br>
      </tt><tt>time = 0.000001 : res = <font color="#ff0000">32</font></tt><tt><br>
      </tt><tt>./strncasecmp 1 26 aCaa Ac 2</tt><tt><br>
      </tt><tt>Optimized (nb=26, len=2)</tt><tt><br>
      </tt><tt>time = 0.000001 : res = 0<br>
        ./strncasecmp 0 27 aCaa Ac 2<br>
        &lt;string.h&gt; (nb=27, len=2)<br>
        time = 0.000003 : res = <font color="#ff0000">32</font><br>
        ./strncasecmp 0 26 aCaa Ac 2<br>
        &lt;string.h&gt; (nb=26, len=2)<br>
        time = 0.000003 : res = 0<br>
      </tt></blockquote>
    Using clang on FreeBSD/amd64 here. Yours,<br>
    <blockquote>-mi<br>
    </blockquote>
    <br>
  </body>
</html>

--Boundary_(ID_RPwSdNS+azaVqn3rreBvFA)--

From dev-return-84683-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 00:43:29 2015
Return-Path: <dev-return-84683-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 692A718A03
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 00:43:29 +0000 (UTC)
Received: (qmail 88943 invoked by uid 500); 24 Nov 2015 00:43:29 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 88855 invoked by uid 500); 24 Nov 2015 00:43:28 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 88845 invoked by uid 99); 24 Nov 2015 00:43:28 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 00:43:28 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 4F763C697C
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 00:43:28 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id TD_KQsAdt0Yy for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 00:43:20 +0000 (UTC)
Received: from mail-qk0-f179.google.com (mail-qk0-f179.google.com [209.85.220.179])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 0D90642B7B
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 00:43:20 +0000 (UTC)
Received: by qkda6 with SMTP id a6so486555qkd.3
        for <dev@httpd.apache.org>; Mon, 23 Nov 2015 16:43:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=jjFsgbvwy2bA+tBQRayHGpBBhSd/k0cD7TOIF44ZZ3g=;
        b=zi8EZ8swsWvxnbqvAdfLimzocBNi0kkLhAw2VbhFtCQBqjcTZXqBEIwIhOooY6wR2L
         Q240rbSpS6tC05JDVPK0b1rUwax4bGDt//Or4L4c7N4aZR1gXbDpspOiGudAonWkKRdE
         isVPSg4DLDTrLPpWHQONXZmYZrwcuyFcQh0vk0c2cpgw2TkNztedDtdFxflNL40r6Ejw
         dwMwp4Vkn3dhmoDchQ4GWV60WU7gJOszmhI36GLHWFmPd3vay/B0dXsWMjpQsK5sGDDC
         R/RlNTTTaQBhQEVDiOEJzVf0+M7APwV7rIatFLr/2lx3RecaQy1V0kTcH7f/L8Y4Sr8N
         Zu/Q==
MIME-Version: 1.0
X-Received: by 10.55.80.194 with SMTP id e185mr30259346qkb.68.1448325799781;
 Mon, 23 Nov 2015 16:43:19 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 23 Nov 2015 16:43:19 -0800 (PST)
In-Reply-To: <5653AE32.3030302@aldan.algebra.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
	<CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
	<301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
	<5653732E.9030401@wanadoo.fr>
	<CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
	<56538021.3030801@wanadoo.fr>
	<CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
	<CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com>
	<5653A562.7030708@aldan.algebra.com>
	<CAKQ1sVNRvJ7XZo5rAP_Rq8P44N4PjTyQe8Gw56VODJWb8j95Dw@mail.gmail.com>
	<5653AE32.3030302@aldan.algebra.com>
Date: Tue, 24 Nov 2015 01:43:19 +0100
Message-ID: <CAKQ1sVNbSzDdbKJWRc_PT+hFDxCV+EeW+-Apud+wDZQFGd5q3Q@mail.gmail.com>
Subject: Re: strncasecmp
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 1:24 AM, Mikhail T. <mi+thun@aldan.algebra.com> wrote:
>
> Is there really a gain in inc- and decrementing this way? Would not it be
> easier to read with the explicit increments -- and, incidentally, no
> decrements at all?

No measured difference in my tests, I guess it depends on likelyhood
to fail/succeed early in the string or not.

>>
>> We don't care about the whole process time and other counters.
>
> That's certainly true. But, then, why bother with building time-counter into
> the test at all -- instead of simply relying on time(1)?

That's the purpose of newtest.c (vs Christophe's test.c): try both...

>
> But something is still not right -- the result (for either of the methods)
> can depend on the number of iterations (!!):

That's expected (or at least no cared about in this test case).
We simply want res to not be optimized out, so print it before
leaving, without any particular relevance for its value (string.h and
optimized versions should return the same res with the same args,
ascii strings only, though).

From dev-return-84684-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 00:47:13 2015
Return-Path: <dev-return-84684-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1891B18A33
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 00:47:13 +0000 (UTC)
Received: (qmail 774 invoked by uid 500); 24 Nov 2015 00:47:12 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 699 invoked by uid 500); 24 Nov 2015 00:47:12 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 689 invoked by uid 99); 24 Nov 2015 00:47:12 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 00:47:12 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 097CE1809B3
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 00:47:12 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id Bl32JxwTZXxR for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 00:47:05 +0000 (UTC)
Received: from mail-qg0-f50.google.com (mail-qg0-f50.google.com [209.85.192.50])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 314D420FE7
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 00:47:05 +0000 (UTC)
Received: by qgeb1 with SMTP id b1so1072645qge.1
        for <dev@httpd.apache.org>; Mon, 23 Nov 2015 16:47:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=YJVpp/5wtSrFw0yNm0e2m1tLBQHf3GbC8Ub951gjxhk=;
        b=UT44zhd4CClAiOyOGTpg6a6z8OGXFN5ag9jqOHp7gmi31WDR9p94BVewlMmCD5ixyf
         bGdWWfsfTA6Jk1sOApdvrTJTPJxkecl6JC0/Oav2Ay96wpJpYPR6qjn78bUGjOLfW7bH
         PubkcWhOqI3oysyKfGpEttzU4yNPj1seDiKCwUnt6FX7kl8HhMS0xs0C/QpKmB1bKomb
         i+266150wZzlVkKMo5plp1mJo/1niiF6bVXMrKZmlyczuSCYhqbc/OVtdCaprKScRFou
         d+tBHGj3HX5lhZ4ABux9CpcaGCV6rq1cmfcuz3QPPTrMvgpwwWR1GcgyqRctHM2/wZsN
         T28A==
MIME-Version: 1.0
X-Received: by 10.140.101.51 with SMTP id t48mr31402611qge.71.1448326024074;
 Mon, 23 Nov 2015 16:47:04 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 23 Nov 2015 16:47:03 -0800 (PST)
In-Reply-To: <CAKQ1sVNbSzDdbKJWRc_PT+hFDxCV+EeW+-Apud+wDZQFGd5q3Q@mail.gmail.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
	<CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
	<301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
	<5653732E.9030401@wanadoo.fr>
	<CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
	<56538021.3030801@wanadoo.fr>
	<CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
	<CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com>
	<5653A562.7030708@aldan.algebra.com>
	<CAKQ1sVNRvJ7XZo5rAP_Rq8P44N4PjTyQe8Gw56VODJWb8j95Dw@mail.gmail.com>
	<5653AE32.3030302@aldan.algebra.com>
	<CAKQ1sVNbSzDdbKJWRc_PT+hFDxCV+EeW+-Apud+wDZQFGd5q3Q@mail.gmail.com>
Date: Tue, 24 Nov 2015 01:47:03 +0100
Message-ID: <CAKQ1sVOO+FHMzN3ar+rfop0M95oyvwn9XGvb8RNSER989DVH9g@mail.gmail.com>
Subject: Re: strncasecmp
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: multipart/mixed; boundary=001a11c16ee22f40f105253eae0e

--001a11c16ee22f40f105253eae0e
Content-Type: text/plain; charset=UTF-8

FWIW, a new version using clock_gettime() instead of gettimeofday().
Same/Comparable results for optimized vs string.h's (the former wins
but with -Os).

On Tue, Nov 24, 2015 at 1:43 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
> On Tue, Nov 24, 2015 at 1:24 AM, Mikhail T. <mi+thun@aldan.algebra.com> wrote:
>>
>> Is there really a gain in inc- and decrementing this way? Would not it be
>> easier to read with the explicit increments -- and, incidentally, no
>> decrements at all?
>
> No measured difference in my tests, I guess it depends on likelyhood
> to fail/succeed early in the string or not.
>
>>>
>>> We don't care about the whole process time and other counters.
>>
>> That's certainly true. But, then, why bother with building time-counter into
>> the test at all -- instead of simply relying on time(1)?
>
> That's the purpose of newtest.c (vs Christophe's test.c): try both...
>
>>
>> But something is still not right -- the result (for either of the methods)
>> can depend on the number of iterations (!!):
>
> That's expected (or at least no cared about in this test case).
> We simply want res to not be optimized out, so print it before
> leaving, without any particular relevance for its value (string.h and
> optimized versions should return the same res with the same args,
> ascii strings only, though).

--001a11c16ee22f40f105253eae0e
Content-Type: text/x-csrc; charset=US-ASCII; name="newtest2.c"
Content-Disposition: attachment; filename="newtest2.c"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_ihcnx11j0

I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzdGRpbnQuaD4KI2luY2x1ZGUgPHN0ZGxpYi5o
PgojaW5jbHVkZSA8c3RyaW5nLmg+CgojaW5jbHVkZSA8bGltaXRzLmg+CiNpbmNsdWRlIDx0aW1l
Lmg+CgovKgogKiBQcm92aWRlIG91ciBvd24ga25vd24tZmFzdCBpbXBsZW1lbnRhdGlvbiBvZiBz
dHJbbl1jYXNlY21wKCkKICogTk9URTogQVNDSUkgb25seSEKICovCnN0YXRpYyBjb25zdCB1bnNp
Z25lZCBjaGFyIHVjaGFybWFwW10gPSB7CiAgICAweDAsICAweDEsICAweDIsICAweDMsICAweDQs
ICAweDUsICAweDYsICAweDcsCiAgICAweDgsICAweDksICAweGEsICAweGIsICAweGMsICAweGQs
ICAweGUsICAweGYsCiAgICAweDEwLCAweDExLCAweDEyLCAweDEzLCAweDE0LCAweDE1LCAweDE2
LCAweDE3LAogICAgMHgxOCwgMHgxOSwgMHgxYSwgMHgxYiwgMHgxYywgMHgxZCwgMHgxZSwgMHgx
ZiwKICAgIDB4MjAsIDB4MjEsIDB4MjIsIDB4MjMsIDB4MjQsIDB4MjUsIDB4MjYsIDB4MjcsCiAg
ICAweDI4LCAweDI5LCAweDJhLCAweDJiLCAweDJjLCAweDJkLCAweDJlLCAweDJmLAogICAgMHgz
MCwgMHgzMSwgMHgzMiwgMHgzMywgMHgzNCwgMHgzNSwgMHgzNiwgMHgzNywKICAgIDB4MzgsIDB4
MzksIDB4M2EsIDB4M2IsIDB4M2MsIDB4M2QsIDB4M2UsIDB4M2YsCiAgICAweDQwLCAgJ2EnLCAg
J2InLCAgJ2MnLCAgJ2QnLCAgJ2UnLCAgJ2YnLCAgJ2cnLAogICAgICdoJywgICdpJywgICdqJywg
ICdrJywgICdsJywgICdtJywgICduJywgICdvJywKICAgICAncCcsICAncScsICAncicsICAncycs
ICAndCcsICAndScsICAndicsICAndycsCiAgICAgJ3gnLCAgJ3knLCAgJ3onLCAweDViLCAweDVj
LCAweDVkLCAweDVlLCAweDVmLAogICAgMHg2MCwgICdhJywgICdiJywgICdjJywgICdkJywgICdl
JywgICdmJywgICdnJywKICAgICAnaCcsICAnaScsICAnaicsICAnaycsICAnbCcsICAnbScsICAn
bicsICAnbycsCiAgICAgJ3AnLCAgJ3EnLCAgJ3InLCAgJ3MnLCAgJ3QnLCAgJ3UnLCAgJ3YnLCAg
J3cnLAogICAgICd4JywgICd5JywgICd6JywgMHg3YiwgMHg3YywgMHg3ZCwgMHg3ZSwgMHg3ZiwK
ICAgIDB4ODAsIDB4ODEsIDB4ODIsIDB4ODMsIDB4ODQsIDB4ODUsIDB4ODYsIDB4ODcsCiAgICAw
eDg4LCAweDg5LCAweDhhLCAweDhiLCAweDhjLCAweDhkLCAweDhlLCAweDhmLAogICAgMHg5MCwg
MHg5MSwgMHg5MiwgMHg5MywgMHg5NCwgMHg5NSwgMHg5NiwgMHg5NywKICAgIDB4OTgsIDB4OTks
IDB4OWEsIDB4OWIsIDB4OWMsIDB4OWQsIDB4OWUsIDB4OWYsCiAgICAweGEwLCAweGExLCAweGEy
LCAweGEzLCAweGE0LCAweGE1LCAweGE2LCAweGE3LAogICAgMHhhOCwgMHhhOSwgMHhhYSwgMHhh
YiwgMHhhYywgMHhhZCwgMHhhZSwgMHhhZiwKICAgIDB4YjAsIDB4YjEsIDB4YjIsIDB4YjMsIDB4
YjQsIDB4YjUsIDB4YjYsIDB4YjcsCiAgICAweGI4LCAweGI5LCAweGJhLCAweGJiLCAweGJjLCAw
eGJkLCAweGJlLCAweGJmLAogICAgMHhjMCwgMHhjMSwgMHhjMiwgMHhjMywgMHhjNCwgMHhjNSwg
MHhjNiwgMHhjNywKICAgIDB4YzgsIDB4YzksIDB4Y2EsIDB4Y2IsIDB4Y2MsIDB4Y2QsIDB4Y2Us
IDB4Y2YsCiAgICAweGQwLCAweGQxLCAweGQyLCAweGQzLCAweGQ0LCAweGQ1LCAweGQ2LCAweGQ3
LAogICAgMHhkOCwgMHhkOSwgMHhkYSwgMHhkYiwgMHhkYywgMHhkZCwgMHhkZSwgMHhkZiwKICAg
IDB4ZTAsIDB4ZTEsIDB4ZTIsIDB4ZTMsIDB4ZTQsIDB4ZTUsIDB4ZTYsIDB4ZTcsCiAgICAweGU4
LCAweGU5LCAweGVhLCAweGViLCAweGVjLCAweGVkLCAweGVlLCAweGVmLAogICAgMHhmMCwgMHhm
MSwgMHhmMiwgMHhmMywgMHhmNCwgMHhmNSwgMHhmNiwgMHhmNywKICAgIDB4ZjgsIDB4ZjksIDB4
ZmEsIDB4ZmIsIDB4ZmMsIDB4ZmQsIDB4ZmUsIDB4ZmYKfTsKCmludCBhcF9zdHJjYXNlY21wKGNv
bnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMikKewogICAgY29uc3QgdW5zaWduZWQgY2hhciAq
cHMxID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczE7CiAgICBjb25zdCB1bnNpZ25lZCBjaGFy
ICpwczIgPSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMjsKCiAgICB3aGlsZSAodWNoYXJtYXBb
KnBzMV0gPT0gdWNoYXJtYXBbKnBzMisrXSkgewogICAgICAgIGlmICgqcHMxKysgPT0gJ1wwJykg
ewogICAgICAgICAgICByZXR1cm4gKDApOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiAodWNo
YXJtYXBbKnBzMV0gLSB1Y2hhcm1hcFsqLS1wczJdKTsKfQoKaW50IGFwX3N0cm5jYXNlY21wKGNv
bnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMiwgaW50IG4pCnsKICAgIGNvbnN0IHVuc2lnbmVk
IGNoYXIgKnBzMSA9IChjb25zdCB1bnNpZ25lZCBjaGFyICopIHMxOwogICAgY29uc3QgdW5zaWdu
ZWQgY2hhciAqcHMyID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczI7CiAgICB3aGlsZSAobi0t
KSB7CiAgICAgICAgaWYgKHVjaGFybWFwWypwczFdICE9IHVjaGFybWFwWypwczIrK10pIHsKICAg
ICAgICAgICAgcmV0dXJuICh1Y2hhcm1hcFsqcHMxXSAtIHVjaGFybWFwWyotLXBzMl0pOwogICAg
ICAgIH0KICAgICAgICBpZiAoKnBzMSsrID09ICdcMCcpIHsKICAgICAgICAgICAgYnJlYWs7CiAg
ICAgICAgfQogICAgfQogICAgcmV0dXJuICgwKTsKfQoKI2RlZmluZSBQUk9HIGFyZ3ZbMF0KI2Rl
ZmluZSBNRVRIT0QgYXJndlsxXQojZGVmaW5lIE5CIGFyZ3ZbMl0KI2RlZmluZSBTMSBhcmd2WzNd
CiNkZWZpbmUgUzIgYXJndls0XQojZGVmaW5lIExFTiBhcmd2WzVdCgovKiBUaGUgKysgYXJlIGhl
cmUgdG8gdHJ5IHRvIHByZXZlbnQgc29tZSBvcHRpbWl6YXRpb24gZG9uZSBieSBnY2MgKi8KI2Rl
ZmluZSBGT1IgZm9yIChpPTA7IGk8bmI7IGkrKywgKFMxWzBdKSsrLCAoUzJbMF0pKyspCgppbnQg
bWFpbihpbnQgYXJnYywgY2hhciAqYXJndltdKQp7CiAgICBpbnQ2NF90IGRpZmY7CiAgICBzdHJ1
Y3QgdGltZXNwZWMgdHZzLCB0dmU7CiAgICBpbnQgaSwgbGVuLCBuYjsKICAgIGludCByZXMgPSAw
OwogICAgCiAgICBpZiAoYXJnYyA8IDYpIHsKICAgICAgICBwcmludGYoIiVzIDwwPXN0ZCA7IDE9
b3B0aW1pemVkPiA8bmIgaXRlcj4gUzEgUzIgPG5iIGNoYXIgdG8gY29tcGFyZSBvciAwPlxuIiwg
UFJPRyk7CiAgICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICAgICAgCiAgICBsZW4gPSBhdG9pKExF
Tik7CiAgICBuYiAgPSBhdG9pKE5CKTsKICAgIAogICAgaWYgKCpNRVRIT0QgPT0gJzAnKSB7CiAg
ICAgICAgcHJpbnRmKCI8c3RyaW5nLmg+IChuYj0lZCwgbGVuPSVkKVxuIiwgbmIsIGxlbik7CiAg
ICAgICAgY2xvY2tfZ2V0dGltZShDTE9DS19NT05PVE9OSUMsICZ0dnMpOwogICAgICAgIGlmIChs
ZW4gPT0gMCkgewogICAgICAgICAgICBGT1IgewogICAgICAgICAgICAgICAgLyogcmVhbGx5IHVz
ZSB0aGUgcmVzdWx0IG9mIHRoZSBmdW5jdGlvbiAqLwogICAgICAgICAgICAgICAgcmVzIHw9IHN0
cmNhc2VjbXAoUzEsIFMyKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsK
ICAgICAgICAgICAgRk9SIHsKICAgICAgICAgICAgICAgIHJlcyB8PSBzdHJuY2FzZWNtcChTMSwg
UzIsIGxlbik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY2xvY2tfZ2V0dGltZShD
TE9DS19NT05PVE9OSUMsICZ0dmUpOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgcHJpbnRmKCJP
cHRpbWl6ZWQgKG5iPSVkLCBsZW49JWQpXG4iLCBuYiwgbGVuKTsKICAgICAgICBjbG9ja19nZXR0
aW1lKENMT0NLX01PTk9UT05JQywgJnR2cyk7CiAgICAgICAgaWYgKGxlbiA9PSAwKSB7CiAgICAg
ICAgICAgIEZPUiB7CiAgICAgICAgICAgICAgICByZXMgfD0gYXBfc3RyY2FzZWNtcChTMSwgUzIp
OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBGT1Ig
ewogICAgICAgICAgICAgICAgcmVzIHw9IGFwX3N0cm5jYXNlY21wKFMxLCBTMiwgbGVuKTsKICAg
ICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjbG9ja19nZXR0aW1lKENMT0NLX01PTk9UT05J
QywgJnR2ZSk7CiAgICB9CgogICAgZGlmZiAgPSAoaW50NjRfdCl0dmUudHZfc2VjICogMTAwMDAw
MDAwMEwgKyB0dmUudHZfbnNlYzsKICAgIGRpZmYgLT0gKGludDY0X3QpdHZzLnR2X3NlYyAqIDEw
MDAwMDAwMDBMICsgdHZzLnR2X25zZWM7CgogICAgLyogcmVhbGx5IHVzZSB0aGUgcmVzdWx0IG9m
IHRoZSBmdW5jdGlvbiAqLwogICAgcHJpbnRmKCJ0aW1lID0gJWxsZC4lLjZsbGQgOiByZXMgPSAl
ZFxuIiwKICAgICAgICAgICAgKGxvbmcgbG9uZylkaWZmIC8gMTAwMDAwMDAwMEwsCiAgICAgICAg
ICAgIChsb25nIGxvbmcpZGlmZiAlIDEwMDAwMDAwMDBMLAogICAgICAgICAgICByZXMpOwogICAg
cmV0dXJuIDA7IAp9Cg==
--001a11c16ee22f40f105253eae0e--

From dev-return-84685-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 01:34:31 2015
Return-Path: <dev-return-84685-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 38C6018C19
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 01:34:31 +0000 (UTC)
Received: (qmail 93349 invoked by uid 500); 24 Nov 2015 01:34:30 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 93262 invoked by uid 500); 24 Nov 2015 01:34:30 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 93247 invoked by uid 99); 24 Nov 2015 01:34:30 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 01:34:30 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id E14E01A0CBF
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 01:34:29 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id JfTmODSpYJqf for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 01:34:28 +0000 (UTC)
Received: from mail-qg0-f50.google.com (mail-qg0-f50.google.com [209.85.192.50])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 93E3B20C41
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 01:34:28 +0000 (UTC)
Received: by qgcc31 with SMTP id c31so1569012qgc.3
        for <dev@httpd.apache.org>; Mon, 23 Nov 2015 17:34:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=fDPBHd2bt1nYLgYi7vQ6BBTls4oJR0cLpud4ZcrB4I4=;
        b=iVP4OyfoEpCiDDj/kZUOs9XaRstGxfdlpEoS0R4s4irdIp4jwRxfyJ5PU/sCvfXoE9
         3u8THcbVJeClBCYvJujoVPdvmSbUKsWydIsFtABRV3a079qhdR+RtmTdercVWe482E/C
         qbbdLB/7HJR0w1TSM+Ur1DSkvPzlYDvETfGT87ZsE1Gk02WyJ9Tx/yhpaVtkMc3TKT0D
         taKB2YQXM0XLCS5+EXcgIU7rokVAsh8dg/Oe92bBActXwU7lVG7lHbQeB4pd7qzPXSNE
         W+SByee3O/N6aN9N8csn3CtQN4Shg6IlblGpbhy6uxM0OsAqF2sCkrn0rv0/JjzZxG3j
         2Ccg==
MIME-Version: 1.0
X-Received: by 10.140.43.9 with SMTP id d9mr9622023qga.51.1448328867838; Mon,
 23 Nov 2015 17:34:27 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 23 Nov 2015 17:34:27 -0800 (PST)
In-Reply-To: <CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
	<CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
	<301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
	<5653732E.9030401@wanadoo.fr>
	<CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
	<56538021.3030801@wanadoo.fr>
	<CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
Date: Tue, 24 Nov 2015 02:34:27 +0100
Message-ID: <CAKQ1sVNZWNJAWrWdPO71yVfnSnNs4=4j+GLiaa6ZFzEBbFFcbw@mail.gmail.com>
Subject: Re: strncasecmp
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Mon, Nov 23, 2015 at 11:42 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
> except -Os I always have better
> results with the "optimized" version

To reach better performances with -Os, we could possibly use:

int ap_strcasecmp(const char *s1, const char *s2)
{
    const unsigned char *ps1 = (const unsigned char *) s1;
    const unsigned char *ps2 = (const unsigned char *) s2;
    for (;;) {
        const unsigned int c1 = ucharmap[*ps1++],
                           c2 = ucharmap[*ps2++];
        if (c1 != c2) {
            return c1 - c2;
        }
        if (c1 == '\0') {
            break;
        }
    }
    return (0);
}

int ap_strncasecmp(const char *s1, const char *s2, int n)
{
    const unsigned char *ps1 = (const unsigned char *) s1;
    const unsigned char *ps2 = (const unsigned char *) s2;
    while (n--) {
        const unsigned int c1 = ucharmap[*ps1++],
                           c2 = ucharmap[*ps2++];
        if (c1 != c2) {
            return c1 - c2;
        }
        if (c1 == '\0') {
            break;
        }
    }
    return (0);
}

This implementation with -Os is ~13% slower than str[n]casemp(),
whereas the original ap_str[n]casemp() is ~30% slower.

Don't know if it happens/makes sense to compile httpd with -Os...
At least for APR, I think we could take that into consideration.

From dev-return-84686-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 03:12:45 2015
Return-Path: <dev-return-84686-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E1C6B19000
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 03:12:44 +0000 (UTC)
Received: (qmail 52667 invoked by uid 500); 24 Nov 2015 03:12:44 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 52583 invoked by uid 500); 24 Nov 2015 03:12:43 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 52573 invoked by uid 99); 24 Nov 2015 03:12:43 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 03:12:43 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 2C544180990
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 03:12:43 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.98
X-Spam-Level: **
X-Spam-Status: No, score=2.98 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01,
	RCVD_IN_MSPIKE_WL=-0.01] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id R-YuE0XTg7Nk for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 03:12:39 +0000 (UTC)
Received: from vms173011pub.verizon.net (vms173011pub.verizon.net [206.46.173.11])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 18B302031C
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 03:12:39 +0000 (UTC)
Received: from [192.168.1.8] ([100.1.236.52]) by vms173011.mailsrvcs.net
 (Oracle Communications Messaging Server 7.0.5.32.0 64bit (built Jul 16 2014))
 with ESMTPA id <0NYA006JEU8BJV70@vms173011.mailsrvcs.net> for
 dev@httpd.apache.org; Mon, 23 Nov 2015 21:12:16 -0600 (CST)
X-CMAE-Score: 0
X-CMAE-Analysis: v=2.1 cv=J+9Xl1TS c=1 sm=1 tr=0	a=UorMnhrCY2jH/mPejITChw==:117
 a=LaogzpLLAAAA:8 a=oR5dmqMzAAAA:8	a=qtqOOiqGOCEA:10 a=r77TgQKjGQsHNAKrUKIA:9
 a=_RbtBOWAzzzU8YH2eIIA:9	a=QEXdDO2ut3YA:10 a=pGLkceISAAAA:8
 a=DocpCjssyxKFY1HH:21 a=_W_S_7VecoQA:10
Subject: Re: strncasecmp
To: dev@httpd.apache.org
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
 <CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
 <301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
 <5653732E.9030401@wanadoo.fr>
 <CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
 <56538021.3030801@wanadoo.fr>
 <CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
 <CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com>
 <5653A562.7030708@aldan.algebra.com>
 <CAKQ1sVNRvJ7XZo5rAP_Rq8P44N4PjTyQe8Gw56VODJWb8j95Dw@mail.gmail.com>
 <5653AE32.3030302@aldan.algebra.com>
 <CAKQ1sVNbSzDdbKJWRc_PT+hFDxCV+EeW+-Apud+wDZQFGd5q3Q@mail.gmail.com>
From: "Mikhail T." <mi+thun@aldan.algebra.com>
Message-id: <5653D58B.8030803@aldan.algebra.com>
Date: Mon, 23 Nov 2015 22:12:11 -0500
User-Agent: Mozilla/5.0 (X11; FreeBSD amd64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-version: 1.0
In-reply-to:
 <CAKQ1sVNbSzDdbKJWRc_PT+hFDxCV+EeW+-Apud+wDZQFGd5q3Q@mail.gmail.com>
Content-type: multipart/alternative;
 boundary=------------030207030403050300010900

This is a multi-part message in MIME format.
--------------030207030403050300010900
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit

On 23.11.2015 19:43, Yann Ylavic wrote:
> No measured difference in my tests, I guess it depends on likelyhood to fail/succeed early in the string or not.
? I don't see, where it wins anything -- but I do see, where it loses a
little...
> That's expected (or at least no cared about in this test case). We
> simply want res to not be optimized out, so print it before leaving,
> without any particular relevance for its value (string.h and optimized
> versions should return the same res with the same args, ascii strings
> only, though). 
Yes, we do want the value printed -- such as to catch the kind of errors
I reported earlier. But my question was, why does the value change
depending on the number of iterations?

    -mi



--------------030207030403050300010900
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: 7bit

<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  </head>
  <body bgcolor="#FFFFFF" text="#000000">
    <div class="moz-cite-prefix">On 23.11.2015 19:43, Yann Ylavic wrote:<br>
    </div>
    <blockquote
cite="mid:CAKQ1sVNbSzDdbKJWRc_PT+hFDxCV+EeW+-Apud+wDZQFGd5q3Q@mail.gmail.com"
      type="cite">
      <pre wrap="">No measured difference in my tests, I guess it depends on likelyhood to fail/succeed early in the string or not.</pre>
    </blockquote>
    ? I don't see, where it wins anything -- but I do see, where it
    loses a little...<br>
    <blockquote
cite="mid:CAKQ1sVNbSzDdbKJWRc_PT+hFDxCV+EeW+-Apud+wDZQFGd5q3Q@mail.gmail.com"
      type="cite">That's expected (or at least no cared about in this
      test case).
      We simply want res to not be optimized out, so print it before
      leaving, without any particular relevance for its value (string.h
      and
      optimized versions should return the same res with the same args,
      ascii strings only, though).
    </blockquote>
    Yes, we do want the value printed -- such as to catch the kind of
    errors I reported earlier. But my question was, why does the value
    change depending on the number of iterations?<br>
    <blockquote>-mi<br>
    </blockquote>
    <br>
  </body>
</html>

--------------030207030403050300010900--

From dev-return-84687-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 04:14:20 2015
Return-Path: <dev-return-84687-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BC10F1824B
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 04:14:20 +0000 (UTC)
Received: (qmail 82686 invoked by uid 500); 24 Nov 2015 04:14:20 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 82619 invoked by uid 500); 24 Nov 2015 04:14:19 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 82609 invoked by uid 99); 24 Nov 2015 04:14:19 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 04:14:19 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 3710D1A0C74
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 04:14:19 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id rCGzN7NQ9bu5 for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 04:14:04 +0000 (UTC)
Received: from mail-ig0-f178.google.com (mail-ig0-f178.google.com [209.85.213.178])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 66F5E20CF5
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 04:14:01 +0000 (UTC)
Received: by igl9 with SMTP id 9so65402801igl.0
        for <dev@httpd.apache.org>; Mon, 23 Nov 2015 20:14:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=NUTasJPNo1Nzc8lDRjPZvIi/7kWVccc6WZp2q9vvpSs=;
        b=QXEyZkph81wHwERkw3aKJAiWYcKVV3VpGKVYvFwjbrjTeSwR5efU5J4kMuXhWTCOIr
         U8/q9S1ge+aemQMkMdq9eBzZNE8+opjCuggHSIsf0KnvahyHN6Ozgt9SHsojtxAE65m0
         7GywB8GUFwJyO2khvaeUYR8BX2rfOAtyeW7Zdo1gEfkYWkCYapkaawVF+5mFg6S4YRxz
         AtDSsc3q2wDou5o5iqI3VbcyJ55+S+AuK8Op4iZpZSOPpHKxlgqcCvuoOYctf05XAhZJ
         gxDmHr0ah6Taxo2Fi0wRcB0btKK3K28kNnlaec3IWLHdKGn6x1HqA4D4eyEziKcLTRsh
         i4/g==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=NUTasJPNo1Nzc8lDRjPZvIi/7kWVccc6WZp2q9vvpSs=;
        b=JctgnwzKDPeQJq13AH6lqY3He+dnwBcBtu45p6ap/IFRy53YhrlxPXNTZU4Tl+rat3
         d/aLRadaYd/jgvND/fzqP7Z20huVaMgvHjmXlVAmb6DkeB2i6GZTmpqTzsLVRgsd+YKU
         OlaDn2yyZOytPLPqElH6W9v+JHO5zl6xceEK0+HRTBA5a3mznQp8qdSzHWmdlIe9fhe0
         5j+2jIZ/wowJpfmK0/g8wF+5rfBw0xb2FLo4iXz21Qw+sRASKOMjfmD49WPhFTkNz9hH
         uD3eDBl+DkMeX6v3FsdbPsMFV3/y0YrEar7UqTWiDg02sjhIs+OgDRUXYVWxhfNqM1wk
         KkEA==
X-Gm-Message-State: ALoCoQntfSCFq2DgOoAjTtaHazSdcp6QED9BFxyDgV7HDcml0FuF4oCskt1yM7jqnbsyDR+QH/5T
MIME-Version: 1.0
X-Received: by 10.50.50.71 with SMTP id a7mr15740631igo.32.1448338440690; Mon,
 23 Nov 2015 20:14:00 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Mon, 23 Nov 2015 20:14:00 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Mon, 23 Nov 2015 20:14:00 -0800 (PST)
In-Reply-To: <5653D58B.8030803@aldan.algebra.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
	<CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
	<301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
	<5653732E.9030401@wanadoo.fr>
	<CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
	<56538021.3030801@wanadoo.fr>
	<CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
	<CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com>
	<5653A562.7030708@aldan.algebra.com>
	<CAKQ1sVNRvJ7XZo5rAP_Rq8P44N4PjTyQe8Gw56VODJWb8j95Dw@mail.gmail.com>
	<5653AE32.3030302@aldan.algebra.com>
	<CAKQ1sVNbSzDdbKJWRc_PT+hFDxCV+EeW+-Apud+wDZQFGd5q3Q@mail.gmail.com>
	<5653D58B.8030803@aldan.algebra.com>
Date: Mon, 23 Nov 2015 22:14:00 -0600
Message-ID: <CACsi252kQbQ0=cyvbVbxgFxLknbtVrHUypp9eNPJj748a36_0w@mail.gmail.com>
Subject: Re: strncasecmp
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=089e013c5c4445b85a05254192e9

--089e013c5c4445b85a05254192e9
Content-Type: text/plain; charset=UTF-8

On Nov 23, 2015 21:12, "Mikhail T." <mi+thun@aldan.algebra.com> wrote:
>
> On 23.11.2015 19:43, Yann Ylavic wrote:
>>
>> No measured difference in my tests, I guess it depends on likelyhood to
fail/succeed early in the string or not.
>
> ? I don't see, where it wins anything -- but I do see, where it loses a
little...
>
>> That's expected (or at least no cared about in this test case). We
simply want res to not be optimized out, so print it before leaving,
without any particular relevance for its value (string.h and optimized
versions should return the same res with the same args, ascii strings only,
though).
>
> Yes, we do want the value printed -- such as to catch the kind of errors
I reported earlier. But my question was, why does the value change
depending on the number of iterations?

L1 cache and other direct effects of cpu internal optimization.

You would be better off introducing a non-optimizable operation consuming
most cpu registers and the L1 cache between iterations if you want to
predict the non-repeditive invocation of this function in different
contexts throughout the processing phases.

--089e013c5c4445b85a05254192e9
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<p dir=3D"ltr">On Nov 23, 2015 21:12, &quot;Mikhail T.&quot; &lt;<a href=3D=
"mailto:mi%2Bthun@aldan.algebra.com">mi+thun@aldan.algebra.com</a>&gt; wrot=
e:<br>
&gt;<br>
&gt; On 23.11.2015 19:43, Yann Ylavic wrote:<br>
&gt;&gt;<br>
&gt;&gt; No measured difference in my tests, I guess it depends on likelyho=
od to fail/succeed early in the string or not.<br>
&gt;<br>
&gt; ? I don&#39;t see, where it wins anything -- but I do see, where it lo=
ses a little...<br>
&gt;<br>
&gt;&gt; That&#39;s expected (or at least no cared about in this test case)=
. We simply want res to not be optimized out, so print it before leaving, w=
ithout any particular relevance for its value (string.h and optimized versi=
ons should return the same res with the same args, ascii strings only, thou=
gh).<br>
&gt;<br>
&gt; Yes, we do want the value printed -- such as to catch the kind of erro=
rs I reported earlier. But my question was, why does the value change depen=
ding on the number of iterations?</p>
<p dir=3D"ltr">L1 cache and other direct effects of cpu internal optimizati=
on.</p>
<p dir=3D"ltr">You would be better off introducing a non-optimizable operat=
ion consuming most cpu registers and the L1 cache between iterations if you=
 want to predict the non-repeditive invocation of this function in differen=
t contexts throughout the processing phases.</p>

--089e013c5c4445b85a05254192e9--

From dev-return-84688-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 04:28:05 2015
Return-Path: <dev-return-84688-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 73871182B1
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 04:28:05 +0000 (UTC)
Received: (qmail 677 invoked by uid 500); 24 Nov 2015 04:28:05 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 608 invoked by uid 500); 24 Nov 2015 04:28:04 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 598 invoked by uid 99); 24 Nov 2015 04:28:04 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 04:28:04 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 26E7B1A0C6E
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 04:28:04 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.998
X-Spam-Level: **
X-Spam-Status: No, score=2.998 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id YXWyefvNr2oI for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 04:28:02 +0000 (UTC)
Received: from mail-io0-f169.google.com (mail-io0-f169.google.com [209.85.223.169])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 03CF92064F
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 04:28:02 +0000 (UTC)
Received: by ioir85 with SMTP id r85so8752316ioi.1
        for <dev@httpd.apache.org>; Mon, 23 Nov 2015 20:28:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=SQBbcvoAO4FZAJr6qwyrnj13MokPJpYJiao9gDIlLtA=;
        b=Hh9LslI4rlPkQ/WfbkQpPXr6wVZItTU/nBK9eBQdKHzL9NnKwpgHrBp6N98GCxCXER
         WBPLLD+0a494ok2ybpTIyPdX+/49mT97Bve22odyUkDD8sSf/foQbAtpVrXGpWKgbUQN
         cBIPDbCP/diPqpvrV4ewKH08/8EL+pJognxBhX7vAV/h9Tba5djrlClBNuMytV2JaS7I
         qM+c3Xf/lF4Krw5k8LYLQ/rjbFDYyCU7SkzPFmoDUZhgMeqQ3xEj01kgwz4YrKpOu81R
         B0kvj/cbCjetMPwXyuJcPYJVEGlfZuCJ82CkobDwVz5/ApcrP059z0RJ6xUXQK0e9yP/
         pP/A==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=SQBbcvoAO4FZAJr6qwyrnj13MokPJpYJiao9gDIlLtA=;
        b=HnGb17SWQCuYwwRO8okg5l/CoRc5EjpDkMZ8ZKhNtUfDXUccPTL3+a1dvceNf2a9JC
         ma2ZCUsNBZsxMjDAyOmdRAuvNtyYJaAaY73GTAqfCABZ9dhvhHkxSKNVOMxgv/4Pwu+m
         nySFQF4svq03V7qcn1NwfHvnlCRMNJ61SmMyefD6cgcwGRxtTkofXGqu9kjsqid0UFUj
         fi5XXdyJOyOlt5C/qA4d/Gl4geKlJltwgmbpl3L9Nv/qHvROqklqAMFqQ171iZMQ4Bik
         qrOWNznvPbYgotS56y1dKTC6kuE77FXp9lwPnMOIaBsK4zV1WzEjTDKOEo3WVLeXnZEt
         8JGA==
X-Gm-Message-State: ALoCoQnFQuGaDrjtPcWHyZcRyqJu8FvD0V+9U1dBKvWX+E0Ba73LipdTA1scb6kZ99zldydK/Mxj
MIME-Version: 1.0
X-Received: by 10.107.34.199 with SMTP id i190mr29498214ioi.150.1448339280969;
 Mon, 23 Nov 2015 20:28:00 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Mon, 23 Nov 2015 20:28:00 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Mon, 23 Nov 2015 20:28:00 -0800 (PST)
In-Reply-To: <CAKQ1sVO+vOjRDH3=Lru5Mzpf8id2iBS_D3fxCYDg4L=2JAQYqA@mail.gmail.com>
References: <20151123164602.782763A075E@svn01-us-west.apache.org>
	<56537051.3020208@wanadoo.fr>
	<CAKQ1sVO+vOjRDH3=Lru5Mzpf8id2iBS_D3fxCYDg4L=2JAQYqA@mail.gmail.com>
Date: Mon, 23 Nov 2015 22:28:00 -0600
Message-ID: <CACsi253Gb+=S4RJR5TU9DUELyZ13T8SsEsM2wo7_OTsh+tBQZw@mail.gmail.com>
Subject: Re: svn commit: r1715876 - in /httpd/httpd/trunk: modules/cache/
 modules/filters/ modules/generators/ modules/http/ modules/http2/
 modules/loggers/ modules/mappers/ modules/metadata/ modules/proxy/
 modules/slotmem/ modules/test/ server/
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1140d9445b5aca052541c458

--001a1140d9445b5aca052541c458
Content-Type: text/plain; charset=UTF-8

On Nov 23, 2015 14:12, "Yann Ylavic" <ylavic.dev@gmail.com> wrote:
>
> On Mon, Nov 23, 2015 at 9:00 PM, Marion & Christophe JAILLET
> <christophe.jaillet@wanadoo.fr> wrote:
> >
> > Moreover, this kind of patch is a good candidate for backport as it
> > introduces many small differences between 2.4 and trunk.
> > Without a backport, backporting future patches may become a nightmare.
>
> Agreed.
>
> >
> > I would find useful to split it into several pieces.
> > The first one should apply cleanly to 2.4.x to ease backport.
> > Other parts should be splitted in "as many piece as necessary" for
potential
> > future backport.
>
> I'll try to merge with svn, and resolve conflicts...

Moreover,

I didn't have a chance to review the patch, but all of the instances that
1. map to an RFC protocol string comparison and 2. occur in 2.4 code base
*should* be coalesced into one patch.  I'm +1 for every such change.  The
rest of the RFC token comparisons can be added individually for later
merging with their associated bug or enhancement backports.

I'm strongly -1 for using this function to 'optimize' what is otherwise a
non-spec string comparison.  There is no excuse for us to defeat good
implementations of strcasecmp for the benefit of platforms with shoddy
implementations.

Jim proposed this as an optimization but I reject that, and wholeheartedly
support his suggested use of a predictable ASCII-only folding comparison
when following any spec that defines token strings in terms of ASCII alpha
chars.

We aren't writing a clib but we do have to be mindful of i18n side-effects
of the clib we are running within.

--001a1140d9445b5aca052541c458
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<p dir=3D"ltr">On Nov 23, 2015 14:12, &quot;Yann Ylavic&quot; &lt;<a href=
=3D"mailto:ylavic.dev@gmail.com">ylavic.dev@gmail.com</a>&gt; wrote:<br>
&gt;<br>
&gt; On Mon, Nov 23, 2015 at 9:00 PM, Marion &amp; Christophe JAILLET<br>
&gt; &lt;<a href=3D"mailto:christophe.jaillet@wanadoo.fr">christophe.jaille=
t@wanadoo.fr</a>&gt; wrote:<br>
&gt; &gt;<br>
&gt; &gt; Moreover, this kind of patch is a good candidate for backport as =
it<br>
&gt; &gt; introduces many small differences between 2.4 and trunk.<br>
&gt; &gt; Without a backport, backporting future patches may become a night=
mare.<br>
&gt;<br>
&gt; Agreed.<br>
&gt;<br>
&gt; &gt;<br>
&gt; &gt; I would find useful to split it into several pieces.<br>
&gt; &gt; The first one should apply cleanly to 2.4.x to ease backport.<br>
&gt; &gt; Other parts should be splitted in &quot;as many piece as necessar=
y&quot; for potential<br>
&gt; &gt; future backport.<br>
&gt;<br>
&gt; I&#39;ll try to merge with svn, and resolve conflicts...</p>
<p dir=3D"ltr">Moreover,</p>
<p dir=3D"ltr">I didn&#39;t have a chance to review the patch, but all of t=
he instances that 1. map to an RFC protocol string comparison and 2. occur =
in 2.4 code base *should* be coalesced into one patch.=C2=A0 I&#39;m +1 for=
 every such change.=C2=A0 The rest of the RFC token comparisons can be adde=
d individually for later merging with their associated bug or enhancement b=
ackports.</p>
<p dir=3D"ltr">I&#39;m strongly -1 for using this function to &#39;optimize=
&#39; what is otherwise a non-spec string comparison.=C2=A0 There is no exc=
use for us to defeat good implementations of strcasecmp for the benefit of =
platforms with shoddy implementations.=C2=A0 </p>
<p dir=3D"ltr">Jim proposed this as an optimization but I reject that, and =
wholeheartedly support his suggested use of a predictable ASCII-only foldin=
g comparison when following any spec that defines token strings in terms of=
 ASCII alpha chars.</p>
<p dir=3D"ltr">We aren&#39;t writing a clib but we do have to be mindful of=
 i18n side-effects of the clib we are running within.<br>
</p>

--001a1140d9445b5aca052541c458--

From dev-return-84689-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 04:48:05 2015
Return-Path: <dev-return-84689-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0AE3A18322
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 04:48:05 +0000 (UTC)
Received: (qmail 27065 invoked by uid 500); 24 Nov 2015 04:48:04 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 26887 invoked by uid 500); 24 Nov 2015 04:48:04 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 26877 invoked by uid 99); 24 Nov 2015 04:48:04 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 04:48:04 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 0F9801809B3
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 04:48:04 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.879
X-Spam-Level: **
X-Spam-Status: No, score=2.879 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01,
	SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id OqJ_8y7RF0JD for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 04:48:03 +0000 (UTC)
Received: from mail-ig0-f181.google.com (mail-ig0-f181.google.com [209.85.213.181])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 458FF20C41
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 04:48:03 +0000 (UTC)
Received: by igcmv3 with SMTP id mv3so43639937igc.0
        for <dev@httpd.apache.org>; Mon, 23 Nov 2015 20:48:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:from:date:message-id:subject:to:content-type;
        bh=lHr+SHrpa0+luNAZSNAK9Si35FIMYM/EgB8m9IflZ60=;
        b=pxQ5znhY6wvjyj695SeDh/rKxAfiSa9PW59FezL7kpbv4xwCyxSHKsfS3AdbdSQVRA
         spZMdXqW5fBQ3HCJTEeSi4XrkBIx5l14NonSYlZkJlhgv5S56Py1B6EI0gSXRYotinXx
         4vajGjm9QYEAkWYzcjgVEgfA0B4zGQmAKhVd+0VRrlRKRFwl9xhCoUjzbyATrrcv0o8V
         fC6YJEL1jfoUteeNHm3yoOcgdZq6jxElk3jmqTWgvYpffBgVHwaXRORIROz25N1Hl5bC
         Vvaq/l6JpVYxG9R1+tcb6kPPD/Cpk30vLZT4+oZ+pcVoM6opB6cMsFNepWXRwC/4/YIX
         RT3A==
X-Received: by 10.50.225.105 with SMTP id rj9mr17820562igc.55.1448340482791;
 Mon, 23 Nov 2015 20:48:02 -0800 (PST)
MIME-Version: 1.0
Received: by 10.36.44.9 with HTTP; Mon, 23 Nov 2015 20:47:43 -0800 (PST)
From: =?UTF-8?B?Vml0aHVsxIXDsSDhuL7hub8=?= <mvvithulan@gmail.com>
Date: Tue, 24 Nov 2015 10:17:43 +0530
Message-ID: <CAEM+pmu3EgfjwmCs_Fhz-oiz_HODGix-JDJ466SzY7AL93k_QA@mail.gmail.com>
Subject: [Dev] GSoC Intro and Contribution to Apache
To: dev@httpd.apache.org
Content-Type: multipart/alternative; boundary=001a11c3a57cfda32d0525420b85

--001a11c3a57cfda32d0525420b85
Content-Type: text/plain; charset=UTF-8

Hi,

I'm Vithulan, Undergraduate of Computer Science and Engineering in
University of Moratuwa, Sri lanka. I have quite experience in Java,
JavaScript, Android and Open Source, Currently doing my internship in a
open source middle-ware company. I'm a potential GSoC candidate, and would
love to help your guidance on how should I proceed?

Thanks.

Regards,
Vithulan MV.

-- 
M.V.Vithulan

--001a11c3a57cfda32d0525420b85
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div><div><div><div>Hi,<br><br></div>I&#39;m Vithulan, Und=
ergraduate of Computer Science and Engineering in University of Moratuwa, S=
ri lanka. I have quite experience in Java, JavaScript, Android and Open Sou=
rce, Currently doing my internship in a open source middle-ware company. I&=
#39;m a potential GSoC candidate, and would love to help your guidance on h=
ow should I proceed?<br><br></div>Thanks.<br><br></div>Regards,<br></div>Vi=
thulan MV.<br clear=3D"all"><div><div><div><div><div><br>-- <br><div class=
=3D"gmail_signature">M.V.Vithulan</div>
</div></div></div></div></div></div>

--001a11c3a57cfda32d0525420b85--

From dev-return-84690-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 05:11:22 2015
Return-Path: <dev-return-84690-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 01518183E0
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 05:11:22 +0000 (UTC)
Received: (qmail 80031 invoked by uid 500); 24 Nov 2015 05:11:21 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 79970 invoked by uid 500); 24 Nov 2015 05:11:21 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 79960 invoked by uid 99); 24 Nov 2015 05:11:21 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 05:11:21 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id CEE0EC6AB3
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 05:11:20 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.98
X-Spam-Level: ***
X-Spam-Status: No, score=3.98 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id My8P8-dKTaYc for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 05:11:19 +0000 (UTC)
Received: from vms173007pub.verizon.net (vms173007pub.verizon.net [206.46.173.7])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 5674B20CF5
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 05:11:19 +0000 (UTC)
MIME-version: 1.0
Content-type: multipart/mixed; boundary="Boundary_(ID_VHiJ6qUTrxmAV/EEsCau3g)"
Received: from [192.168.1.8] ([100.1.236.52]) by vms173007.mailsrvcs.net
 (Oracle Communications Messaging Server 7.0.5.32.0 64bit (built Jul 16 2014))
 with ESMTPA id <0NYA00CW4ZQ5S260@vms173007.mailsrvcs.net> for
 dev@httpd.apache.org; Mon, 23 Nov 2015 23:10:54 -0600 (CST)
X-CMAE-Score: 0
X-CMAE-Analysis: v=2.1 cv=Nc0brD34 c=1 sm=1 tr=0	a=UorMnhrCY2jH/mPejITChw==:117
 a=LaogzpLLAAAA:8 a=oR5dmqMzAAAA:8	a=qtqOOiqGOCEA:10 a=r77TgQKjGQsHNAKrUKIA:9
 a=4e-c-JPurWdIMYIS48UA:9	a=QEXdDO2ut3YA:10 a=pGLkceISAAAA:8
 a=YCCpWQp2w_9lVVNRQyUA:9	a=eTmxhoCqye8qviQd:21 a=_W_S_7VecoQA:10
 a=90hDnOpq_qb3HUDZCIUA:9
Subject: Re: strncasecmp
To: dev@httpd.apache.org
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
 <CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
 <301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
 <5653732E.9030401@wanadoo.fr>
 <CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
 <56538021.3030801@wanadoo.fr>
 <CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
 <CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com>
 <5653A562.7030708@aldan.algebra.com>
 <CAKQ1sVNRvJ7XZo5rAP_Rq8P44N4PjTyQe8Gw56VODJWb8j95Dw@mail.gmail.com>
 <5653AE32.3030302@aldan.algebra.com>
 <CAKQ1sVNbSzDdbKJWRc_PT+hFDxCV+EeW+-Apud+wDZQFGd5q3Q@mail.gmail.com>
 <5653D58B.8030803@aldan.algebra.com>
 <CACsi252kQbQ0=cyvbVbxgFxLknbtVrHUypp9eNPJj748a36_0w@mail.gmail.com>
From: "Mikhail T." <mi+thun@aldan.algebra.com>
X-Enigmail-Draft-Status: N1110
Message-id: <5653F15D.7090504@aldan.algebra.com>
Date: Tue, 24 Nov 2015 00:10:53 -0500
User-Agent: Mozilla/5.0 (X11; FreeBSD amd64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
In-reply-to:
 <CACsi252kQbQ0=cyvbVbxgFxLknbtVrHUypp9eNPJj748a36_0w@mail.gmail.com>

This is a multi-part message in MIME format.

--Boundary_(ID_VHiJ6qUTrxmAV/EEsCau3g)
Content-type: multipart/alternative;
 boundary="Boundary_(ID_4JBedS0DdlDgnCvK0snE6w)"


--Boundary_(ID_4JBedS0DdlDgnCvK0snE6w)
Content-type: text/plain; CHARSET=US-ASCII
Content-transfer-encoding: 7BIT

On 23.11.2015 23:14, William A Rowe Jr wrote:
> L1 cache and other direct effects of cpu internal optimization.
Just what I was thinking. Attached is the same program with one more
pair of functions added (and an easy way to add more "candidates" to the
main-driver). I changed the FOR-loop define to obtain repeatable results:

    # Test 1 -- equal strings:
    foreach m ( 0 1 2 )
    foreach? ./strncasecmp $m 100000000 aaaaaaaaa AAAAAAAAA 7
    foreach? end
    string.h (nb=100000000, len=7)
    time = 6.975845 : res = 0
    optimized (nb=100000000, len=7)
    time = 1.492197 : res = 0
    'A' - 'a' (nb=100000000, len=7)
    time = 1.787807 : res = 0

    # Test 2 -- immediately-different strings
    foreach m ( 0 1 2 )
    foreach? ./strncasecmp $m 100000000 aaaaaaaaa xAAAAAAAA 7
    foreach? end
    string.h (nb=100000000, len=7)
    time = 2.527727 : res = -23
    optimized (nb=100000000, len=7)
    time = 0.406867 : res = -23
    'A' - 'a' (nb=100000000, len=7)
    time = 0.440320 : res = -23

    # Test 3 -- strings different at the very end
    foreach m ( 0 1 2 )
    foreach? ./strncasecmp $m 100000000 aaaaaaaaa AAAAAAAAx 0
    foreach? end
    string.h (nb=100000000, len=0)
    time = 9.629660 : res = -23
    optimized (nb=100000000, len=0)
    time = 1.387208 : res = -23
    'A' - 'a' (nb=100000000, len=0)
    time = 1.754683 : res = -23

The new pair (method 2) does not use the static table, which is likely
to benefit from CPU-cache unfairly in repetitive benchmarks.  It is
slower than the table-using method 1 functions. But the two pairs might
be comparable -- or even faster -- in real life.

    -mi


--Boundary_(ID_4JBedS0DdlDgnCvK0snE6w)
Content-type: text/html; charset=utf-8
Content-transfer-encoding: 8BIT

<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  </head>
  <body bgcolor="#FFFFFF" text="#000000">
    <div class="moz-cite-prefix">On 23.11.2015 23:14, William A Rowe Jr
      wrote:<br>
    </div>
    <blockquote
cite="mid:CACsi252kQbQ0=cyvbVbxgFxLknbtVrHUypp9eNPJj748a36_0w@mail.gmail.com"
      type="cite">L1 cache and other direct effects of cpu internal
      optimization.</blockquote>
    Just what I was thinking. Attached is the same program with one more
    pair of functions added (and an easy way to add more "candidates" to
    the main-driver). I changed the FOR-loop define to obtain repeatable
    results:<br>
    <blockquote><tt># Test 1 -- equal strings:<br>
        foreach m ( 0 1 2 )</tt><tt><br>
      </tt><tt>foreach? ./strncasecmp $m 100000000 aaaaaaaaa AAAAAAAAA 7</tt><tt><br>
      </tt><tt>foreach? end</tt><tt><br>
      </tt><tt>string.h (nb=100000000, len=7)</tt><tt><br>
      </tt><tt>time = 6.975845 : res = 0</tt><tt><br>
      </tt><tt>optimized (nb=100000000, len=7)</tt><tt><br>
      </tt><tt>time = 1.492197 : res = 0</tt><tt><br>
      </tt><tt>'A' - 'a' (nb=100000000, len=7)</tt><tt><br>
      </tt><tt>time = 1.787807 : res = 0</tt><br>
    </blockquote>
    <blockquote><tt># Test 2 -- immediately-different strings<br>
        foreach m ( 0 1 2 )</tt><tt><br>
      </tt><tt>foreach? ./strncasecmp $m 100000000 aaaaaaaaa xAAAAAAAA 7</tt><tt><br>
      </tt><tt>foreach? end</tt><tt><br>
      </tt><tt>string.h (nb=100000000, len=7)</tt><tt><br>
      </tt><tt>time = 2.527727 : res = -23</tt><tt><br>
      </tt><tt>optimized (nb=100000000, len=7)</tt><tt><br>
      </tt><tt>time = 0.406867 : res = -23</tt><tt><br>
      </tt><tt>'A' - 'a' (nb=100000000, len=7)</tt><tt><br>
      </tt><tt>time = 0.440320 : res = -23<br>
        <br>
        # Test 3 -- strings different at the very end<br>
        foreach m ( 0 1 2 )<br>
        foreach? ./strncasecmp $m 100000000 aaaaaaaaa AAAAAAAAx 0<br>
        foreach? end<br>
        string.h (nb=100000000, len=0)<br>
        time = 9.629660 : res = -23<br>
        optimized (nb=100000000, len=0)<br>
        time = 1.387208 : res = -23<br>
        'A' - 'a' (nb=100000000, len=0)<br>
        time = 1.754683 : res = -23<br>
      </tt></blockquote>
    The new pair (method 2) does not use the static table, which is
    likely to benefit from CPU-cache unfairly in repetitive benchmarks.
    It is slower than the table-using method 1 functions. But the two
    pairs might be comparable -- or even faster -- in real life.<br>
    <blockquote>-mi<br>
    </blockquote>
  </body>
</html>

--Boundary_(ID_4JBedS0DdlDgnCvK0snE6w)--

--Boundary_(ID_VHiJ6qUTrxmAV/EEsCau3g)
Content-type: text/plain; CHARSET=US-ASCII; name=strncasecmp.c
Content-transfer-encoding: 7BIT
Content-disposition: attachment; filename=strncasecmp.c

#include <sys/types.h>
#include <sys/time.h>
#include <sys/resource.h>

#define gettimeofday(X) gettimeofday(X, NULL)

#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sysexits.h>

#include <limits.h>

/*
 * Provide our own known-fast implementation of str[n]casecmp()
 * NOTE: ASCII only!
 */
static const unsigned char ucharmap[] = {
    0x0,  0x1,  0x2,  0x3,  0x4,  0x5,  0x6,  0x7,
    0x8,  0x9,  0xa,  0xb,  0xc,  0xd,  0xe,  0xf,
    0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17,
    0x18, 0x19, 0x1a, 0x1b, 0x1c, 0x1d, 0x1e, 0x1f,
    0x20, 0x21, 0x22, 0x23, 0x24, 0x25, 0x26, 0x27,
    0x28, 0x29, 0x2a, 0x2b, 0x2c, 0x2d, 0x2e, 0x2f,
    0x30, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37,
    0x38, 0x39, 0x3a, 0x3b, 0x3c, 0x3d, 0x3e, 0x3f,
    0x40,  'a',  'b',  'c',  'd',  'e',  'f',  'g',
     'h',  'i',  'j',  'k',  'l',  'm',  'n',  'o',
     'p',  'q',  'r',  's',  't',  'u',  'v',  'w',
     'x',  'y',  'z', 0x5b, 0x5c, 0x5d, 0x5e, 0x5f,
    0x60,  'a',  'b',  'c',  'd',  'e',  'f',  'g',
     'h',  'i',  'j',  'k',  'l',  'm',  'n',  'o',
     'p',  'q',  'r',  's',  't',  'u',  'v',  'w',
     'x',  'y',  'z', 0x7b, 0x7c, 0x7d, 0x7e, 0x7f,
    0x80, 0x81, 0x82, 0x83, 0x84, 0x85, 0x86, 0x87,
    0x88, 0x89, 0x8a, 0x8b, 0x8c, 0x8d, 0x8e, 0x8f,
    0x90, 0x91, 0x92, 0x93, 0x94, 0x95, 0x96, 0x97,
    0x98, 0x99, 0x9a, 0x9b, 0x9c, 0x9d, 0x9e, 0x9f,
    0xa0, 0xa1, 0xa2, 0xa3, 0xa4, 0xa5, 0xa6, 0xa7,
    0xa8, 0xa9, 0xaa, 0xab, 0xac, 0xad, 0xae, 0xaf,
    0xb0, 0xb1, 0xb2, 0xb3, 0xb4, 0xb5, 0xb6, 0xb7,
    0xb8, 0xb9, 0xba, 0xbb, 0xbc, 0xbd, 0xbe, 0xbf,
    0xc0, 0xc1, 0xc2, 0xc3, 0xc4, 0xc5, 0xc6, 0xc7,
    0xc8, 0xc9, 0xca, 0xcb, 0xcc, 0xcd, 0xce, 0xcf,
    0xd0, 0xd1, 0xd2, 0xd3, 0xd4, 0xd5, 0xd6, 0xd7,
    0xd8, 0xd9, 0xda, 0xdb, 0xdc, 0xdd, 0xde, 0xdf,
    0xe0, 0xe1, 0xe2, 0xe3, 0xe4, 0xe5, 0xe6, 0xe7,
    0xe8, 0xe9, 0xea, 0xeb, 0xec, 0xed, 0xee, 0xef,
    0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7,
    0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff
};

int ap_strcasecmp(const char *s1, const char *s2)
{
    const unsigned char *ps1 = (const unsigned char *) s1;
    const unsigned char *ps2 = (const unsigned char *) s2;

    while (*ps1 == *ps2 || ucharmap[*ps1] == ucharmap[*ps2]) {
        if (*ps1 == '\0') {
            return (0);
        }
        ++ps1;
        ++ps2;
    }
    return (ucharmap[*ps1] - ucharmap[*ps2]);
}

int ap_strncasecmp(const char *s1, const char *s2, size_t n)
{
    const unsigned char *ps1 = (const unsigned char *) s1;
    const unsigned char *ps2 = (const unsigned char *) s2;
    while (n--) {
        if (*ps1 == *ps2 || ucharmap[*ps1] != ucharmap[*ps2]) {
            return (ucharmap[*ps1] - ucharmap[*ps2]);
        }
        if (*ps1 == '\0') {
            break;
        }
        ++ps1;
        ++ps2;
    }
    return (0);
}

int mi_strcasecmp(const char *s1, const char *s2)
{
	const unsigned char *ps1 = (const unsigned char *) s1;
	const unsigned char *ps2 = (const unsigned char *) s2;

	for (;;) {
		int	diff = *ps1 - *ps2;
		switch (diff) {
		case 0:
			break;
		case 'A' - 'a':
			if (*ps1 <= 'Z' && *ps1 >= 'A')
				break;
			return 1;
		case 'a' - 'A':
			if (*ps2 <= 'Z' && *ps2 >= 'A')
				break;
			return -1;
		default:
			/* Do, what tolower() would've done */
			if (*ps1 <= 'z' && *ps1 >= 'a')
				diff -= ('a' - 'A');
			if (*ps2 <= 'z' && *ps2 >= 'a')
				diff += ('a' - 'A');
			return diff;
		}
		if (*ps1 == '\0') {
			break;
		}
		++ps1;
		++ps2;
	}
	return (0);
}

int mi_strncasecmp(const char *s1, const char *s2, size_t n)
{
	const unsigned char *ps1 = (const unsigned char *) s1;
	const unsigned char *ps2 = (const unsigned char *) s2;

	while (n--) {
		int diff = *ps1 - *ps2;
		switch (diff) {
		case 0:
			break;
		case 'A' - 'a':
			if (*ps1 <= 'Z' && *ps1 >= 'A')
				break;
			return 1;
		case 'a' - 'A':
			if (*ps2 <= 'Z' && *ps2 >= 'A')
				break;
			return -1;
		default:
			/* Do, what tolower() would've done */
			if (*ps1 <= 'z' && *ps1 >= 'a')
				diff -= ('a' - 'A');
			if (*ps2 <= 'z' && *ps2 >= 'a')
				diff += ('a' - 'A');
			return diff;
		}
		if (*ps1 == '\0') {
			break;
		}
		++ps1;
		++ps2;
	}
	return (0);
}

#define PROG argv[0]
#define METHOD argv[1]
#define NB argv[2]
#define S1 argv[3]
#define S2 argv[4]
#define LEN argv[5]

/* The ++ are here to try to prevent some optimization done by gcc */
#define FOR for (i=0; i<nb; i++)

int main(int argc, char *argv[])
{
	int64_t diff;
	struct rusage rus, rue;
	int i, len, nb, method;
	int res = 0;

	struct {
		const char *label;
		int (*cmp)(const char *, const char *);
		int (*ncmp)(const char *, const char *, size_t);
	} methods[] = {
		{ "string.h", strcasecmp, strncasecmp },
		{ "optimized", ap_strcasecmp, ap_strncasecmp },
		{ "'A' - 'a'", mi_strcasecmp, mi_strncasecmp }
	};

	if (argc < 6) {
		fprintf(stderr, "%s <0=std ; 1=optimized> <nb iter> S1 S2 <nb char to compare or 0>\n", PROG);
		return EX_USAGE;
	}

	len = atoi(LEN);
	nb  = atoi(NB);
	method = atoi(METHOD);

	if (method < 0 || method >= sizeof(methods)/sizeof(methods[0])) {
		fprintf(stderr, "Invalid method requested (``%s''?)\n",
		    METHOD);
		return EX_USAGE;
	}

	printf("%s (nb=%d, len=%d)\n", methods[method].label, nb, len);
	getrusage(RUSAGE_SELF, &rus);
	if (len == 0) {
		FOR {
			res |= methods[method].cmp(S1, S2);
		}
	} else {
		FOR {
			res |= methods[method].ncmp(S1, S2, len);
		}
	}
	getrusage(RUSAGE_SELF, &rue);

	diff  = (int64_t)rue.ru_utime.tv_sec * 1000000L + rue.ru_utime.tv_usec;
	diff -= (int64_t)rus.ru_utime.tv_sec * 1000000L + rus.ru_utime.tv_usec;

	/* really use the result of the function */
	printf("time = %lld.%.6lld : res = %d\n",
	    (long long)diff / 1000000L,
	    (long long)diff % 1000000L,
	    res);
	return 0;
}

--Boundary_(ID_VHiJ6qUTrxmAV/EEsCau3g)--

From dev-return-84691-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 09:12:15 2015
Return-Path: <dev-return-84691-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C06F618CC0
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 09:12:15 +0000 (UTC)
Received: (qmail 31133 invoked by uid 500); 24 Nov 2015 09:12:14 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 31063 invoked by uid 500); 24 Nov 2015 09:12:14 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 31053 invoked by uid 99); 24 Nov 2015 09:12:14 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 09:12:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 4CC9CC58DB
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 09:12:14 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id l-lIudt4doTt for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 09:12:08 +0000 (UTC)
Received: from mail-qg0-f46.google.com (mail-qg0-f46.google.com [209.85.192.46])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 11EAC441CC
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 09:12:08 +0000 (UTC)
Received: by qgec40 with SMTP id c40so6172634qge.2
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 01:12:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=mesJm/Q7Yt0r6Yx/SE2esnNGdsZoyEFLNX1D0sHa4MU=;
        b=EPy3lSvi6jPr0o+x5xwVmFxZdIhArAmhDjrDNU8Sq1+ru0yMzk9Y6RK00n5E7Ni8WH
         bQnz8kFxusMNVZ+LajGugzwmeXiSLUl3tPbwQp9CqbsHg5D9wbTQWElBQ+6A/i2kF5l4
         bUsbFW3umgjz35+hmBLjs557dr95uFqSu7VkkSpHo/mdczZkzfhz9GGN0U5NR6S+RvxG
         pJUy3m+blsxuLR9Y/QmJn/PK8Rmq+BYJplh4h5AHus2ljsGBy0w6qNcUPv4meW6nzmDt
         GDxBcck5ANn8FR5Yyl0oHXRDIOfhRaHUQZ09HTupT8dYsvESbwWWmda5q/zaQV5Qd6fx
         nhjw==
MIME-Version: 1.0
X-Received: by 10.140.95.66 with SMTP id h60mr32436732qge.14.1448356321386;
 Tue, 24 Nov 2015 01:12:01 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 24 Nov 2015 01:12:01 -0800 (PST)
In-Reply-To: <5653D58B.8030803@aldan.algebra.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
	<CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
	<301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
	<5653732E.9030401@wanadoo.fr>
	<CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
	<56538021.3030801@wanadoo.fr>
	<CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
	<CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com>
	<5653A562.7030708@aldan.algebra.com>
	<CAKQ1sVNRvJ7XZo5rAP_Rq8P44N4PjTyQe8Gw56VODJWb8j95Dw@mail.gmail.com>
	<5653AE32.3030302@aldan.algebra.com>
	<CAKQ1sVNbSzDdbKJWRc_PT+hFDxCV+EeW+-Apud+wDZQFGd5q3Q@mail.gmail.com>
	<5653D58B.8030803@aldan.algebra.com>
Date: Tue, 24 Nov 2015 10:12:01 +0100
Message-ID: <CAKQ1sVPToFFYC7GTxwToFEHU8B9uDL_u=or2EnknZKziihaDQw@mail.gmail.com>
Subject: Re: strncasecmp
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 4:12 AM, Mikhail T. <mi+thun@aldan.algebra.com> wrote:
> On 23.11.2015 19:43, Yann Ylavic wrote:
>
>> That's expected (or at least no cared about in this test case). We simply
>> want res to not be optimized out, so print it before leaving, without any
>> particular relevance for its value (string.h and optimized versions should
>> return the same res with the same args, ascii strings only, though).
>
> Yes, we do want the value printed -- such as to catch the kind of errors I
> reported earlier. But my question was, why does the value change depending
> on the number of iterations?

Hmm, res is not reset (to 0) in each loop, so I first thought it might
well end up having a different value when ORed more times, but that
makes no sense...

Actually the "evil" is in (S1[0])++, (S2[0])++ in the for loop, which
kills some compiler optimizations in main() but also the comparison
once we leave alpha characters range for those :)
Let's say that for this test to be relevant, the first char of S1 and
S2 must be the same (including case) ;)

Regards,
Yann.

From dev-return-84692-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 09:26:44 2015
Return-Path: <dev-return-84692-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 05B9D18E00
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 09:26:44 +0000 (UTC)
Received: (qmail 93283 invoked by uid 500); 24 Nov 2015 09:26:43 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 93220 invoked by uid 500); 24 Nov 2015 09:26:43 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 93210 invoked by uid 99); 24 Nov 2015 09:26:43 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 09:26:43 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 02709C06CC
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 09:26:43 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 2PLabzocvbID for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 09:26:33 +0000 (UTC)
Received: from mail-qg0-f51.google.com (mail-qg0-f51.google.com [209.85.192.51])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id D155B20C61
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 09:26:32 +0000 (UTC)
Received: by qgeb1 with SMTP id b1so6421335qge.1
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 01:26:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=X9OvJeZtARZjFyVrO+iEYObdQ/b25bVhHP0JIs5AGYI=;
        b=eOCMa6ecKpUt9OlfJWdyKpgHZxh3ZZ+CEyQGgoxJ2QXqYEjStfSoxrbgtzQTs4nA9I
         XiEIpNZ5z9E+MF9H98+fLWa7d3goxpxyf0zwH4yXtjRRlDVqjod6uFBSh1W8+TsK2lLp
         dL1Bpx/Bch3td56nDVd4tMROcaGZTS+7DT+Bjjm4vUTPMEAr6FKUuFoe+WIbJJl5e/s+
         0zPFMBmKTfQLXEFt+46ZT396w7nvaHnG/Nwbq8LAaWX7rLP4xa7mnUtcBbLgHiVw75SJ
         LHrjwPfDNPnNcRhX1ePlGOtkWWAJuXJkmK1ekYlkRvfHqVH7OhnyUUZHMXb2mF7iDeEL
         oCiA==
MIME-Version: 1.0
X-Received: by 10.140.89.201 with SMTP id v67mr32384492qgd.38.1448357186228;
 Tue, 24 Nov 2015 01:26:26 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 24 Nov 2015 01:26:26 -0800 (PST)
In-Reply-To: <5653F15D.7090504@aldan.algebra.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
	<CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
	<301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
	<5653732E.9030401@wanadoo.fr>
	<CAKQ1sVPiyc1GtGHyPdqLcbnVH4AUBULH4PUwBjgUhH1zkijZNg@mail.gmail.com>
	<56538021.3030801@wanadoo.fr>
	<CAKQ1sVOSZe1rL3tnYbOFqR1JHaf8xJKHYj=4dQWJmmtJjisonQ@mail.gmail.com>
	<CAKQ1sVNev=S0ZyE8H1Rq41XtkaNg_1qJg9XyJwY0ip-DsP3v6w@mail.gmail.com>
	<5653A562.7030708@aldan.algebra.com>
	<CAKQ1sVNRvJ7XZo5rAP_Rq8P44N4PjTyQe8Gw56VODJWb8j95Dw@mail.gmail.com>
	<5653AE32.3030302@aldan.algebra.com>
	<CAKQ1sVNbSzDdbKJWRc_PT+hFDxCV+EeW+-Apud+wDZQFGd5q3Q@mail.gmail.com>
	<5653D58B.8030803@aldan.algebra.com>
	<CACsi252kQbQ0=cyvbVbxgFxLknbtVrHUypp9eNPJj748a36_0w@mail.gmail.com>
	<5653F15D.7090504@aldan.algebra.com>
Date: Tue, 24 Nov 2015 10:26:26 +0100
Message-ID: <CAKQ1sVPDd6Zbyq8qp7WER6Tyn9YZrr92Tn9rP54ziix4jz-j5w@mail.gmail.com>
Subject: Re: strncasecmp
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 6:10 AM, Mikhail T. <mi+thun@aldan.algebra.com> wrote:
>
> Attached is the same program with one more pair of
> functions added (and an easy way to add more "candidates" to the
> main-driver). I changed the FOR-loop define to obtain repeatable results:

This test program kills str[n]casecmp()'s inlining with the
indirections (function pointers), so it's not really fair wrt
string.h's versions.
That's not really (often) what we'll find in real world apps.

>
> The new pair (method 2) does not use the static table, which is likely to
> benefit from CPU-cache unfairly in repetitive benchmarks.  It is slower than
> the table-using method 1 functions. But the two pairs might be comparable --
> or even faster -- in real life.

Possibly, this version may also be more "respective" of the cacheline
(the 256 bytes table may evict hot things), yet it is slower here...

Regards,
Yann.

From dev-return-84693-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 12:35:30 2015
Return-Path: <dev-return-84693-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E193218650
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 12:35:30 +0000 (UTC)
Received: (qmail 4270 invoked by uid 500); 24 Nov 2015 12:35:30 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 4193 invoked by uid 500); 24 Nov 2015 12:35:30 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 4183 invoked by uid 99); 24 Nov 2015 12:35:30 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 12:35:30 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id C1ADA180992
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 12:35:29 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 01Fgb8jNOlEy for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 12:35:20 +0000 (UTC)
Received: from resqmta-po-04v.sys.comcast.net (resqmta-po-04v.sys.comcast.net [96.114.154.163])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 9742E20C47
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 12:35:19 +0000 (UTC)
Received: from resomta-po-13v.sys.comcast.net ([96.114.154.237])
	by resqmta-po-04v.sys.comcast.net with comcast
	id lQb71r00657bBgG01QbBGL; Tue, 24 Nov 2015 12:35:11 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-13v.sys.comcast.net with comcast
	id lQbA1r00H2U0RYt01QbBzi; Tue, 24 Nov 2015 12:35:11 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715859 - /httpd/httpd/trunk/include/httpd.h
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CACsi252Ypb8wgfryMt689sn0nnJwkBrNpjaE7KzFwd3wk2LhdQ@mail.gmail.com>
Date: Tue, 24 Nov 2015 07:35:10 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <5437AE63-0061-4346-98B5-F00D6D804E87@jaguNET.com>
References: <20151123155826.39A703A043E@svn01-us-west.apache.org> <CACsi252Ypb8wgfryMt689sn0nnJwkBrNpjaE7KzFwd3wk2LhdQ@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448368511;
	bh=39DQioq2R6Yj+TE9X/qHbnE6ukvScDcQnX/R1tA2c8o=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=jVlyYqTON5h1N8VMBCSkrMpAVGM7IjnP6ybpcXkoV7bX3gBuqBx13TukJsnabIvvl
	 RdTpx+qBuHZFtVDAoNFkHIYljRKgufZzlnk6tZAyi3xoUCTfWqta1G7cejAWtaI2py
	 omXPcOTWCj3cmsd6csPmMGNyoOvMDClHLTAscgtmO7NdMBlQdmGBXO1aNdI8zPZdrc
	 t+iIISc7v0mtIfFpCPCKXEN7iJYPo9pVEVNCnemCxUsBMvLuhGWjtlsdd9/qOQI4jm
	 NEvGBZefAinR9nN3ROMzdNbh2KiDw9h3ZrOnRnhRUY3exglrzycCeIkvurTvvUqrPF
	 QlwTgDpO32JTg==

Yeah, but not, afaict, EBCDIC. And in our use case, we
don't care (and never use) the greater/less-than functionality,
just the equal to. This allows for possible other improvements/
enhancements which might "break" the >< but doesn't affect
how *we* use it.
> On Nov 23, 2015, at 12:01 PM, William A Rowe Jr <wrowe@rowe-clan.net> =
wrote:
>=20
> On Mon, Nov 23, 2015 at 9:58 AM, <jim@apache.org> wrote:
> Author: jim
> Date: Mon Nov 23 15:58:25 2015
> New Revision: 1715859
>=20
> URL: http://svn.apache.org/viewvc?rev=3D1715859&view=3Drev
> Log:
> we just worry about "equality" with this implementation...
> So it's not a "real" strcasecmp replacement.
>=20
> Modified:
>     httpd/httpd/trunk/include/httpd.h
>=20
> Modified: httpd/httpd/trunk/include/httpd.h
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/include/httpd.h?rev=3D17158=
59&r1=3D1715858&r2=3D1715859&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/include/httpd.h (original)
> +++ httpd/httpd/trunk/include/httpd.h Mon Nov 23 15:58:25 2015
> @@ -2442,9 +2442,8 @@ AP_DECLARE(int) ap_array_str_contains(co
>   * Known-fast version of strcasecmp(): ASCII case-folding, POSIX =
compliant
>   * @param s1 The 1st string to compare
>   * @param s2 The 2nd string to compare
> - * @return integer greater than, equal to, or less than 0, depending =
on
> - *         if s1 is lexicographically greater than, equal to, or less
> - *         than s2 ignoring case.
> + * @return 0 if s1 is lexicographically equal to s2 ignoring case;
> + *         non-0 otherwise.
>   */
>  AP_DECLARE(int) ap_casecmpstr(const char *s1, const char *s2);
>=20
> @@ -2453,9 +2452,8 @@ AP_DECLARE(int) ap_casecmpstr(const char
>   * @param s1 The 1st string to compare
>   * @param s2 The 2nd string to compare
>   * @param n  Maximum number of characters in the strings to compare
> - * @return integer greater than, equal to, or less than 0, depending =
on
> - *         if s1 is lexicographically greater than, equal to, or less
> - *         than s2 ignoring case.
> + * @return 0 if s1 is lexicographically equal to s2 ignoring case;
> + *         non-0 otherwise.
>   */
>  AP_DECLARE(int) ap_casecmpstrn(const char *s1, const char *s2, =
apr_size_t n);
>=20
> Howso?  The implementation does provide ASCII numeric-alpha ordering.


From dev-return-84694-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 12:36:52 2015
Return-Path: <dev-return-84694-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BC32B18658
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 12:36:52 +0000 (UTC)
Received: (qmail 6275 invoked by uid 500); 24 Nov 2015 12:36:52 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 6191 invoked by uid 500); 24 Nov 2015 12:36:52 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 6181 invoked by uid 99); 24 Nov 2015 12:36:51 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 12:36:51 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 5DD8A180992
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 12:36:51 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.452
X-Spam-Level: *
X-Spam-Status: No, score=1.452 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, KAM_ASCII_DIVIDERS=0.8,
	SPF_NEUTRAL=0.652] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id EzyAzBH96yoq for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 12:36:38 +0000 (UTC)
Received: from resqmta-po-05v.sys.comcast.net (resqmta-po-05v.sys.comcast.net [96.114.154.164])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 3D00A42AEE
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 12:36:38 +0000 (UTC)
Received: from resomta-po-08v.sys.comcast.net ([96.114.154.232])
	by resqmta-po-05v.sys.comcast.net with comcast
	id lQcZ1r008516pyw01QcdBB; Tue, 24 Nov 2015 12:36:37 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-08v.sys.comcast.net with comcast
	id lQcc1r0042U0RYt01Qcc5N; Tue, 24 Nov 2015 12:36:37 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715869 - in /httpd/httpd/trunk: modules/cache/ modules/filters/ modules/generators/ modules/http/ modules/http2/ modules/loggers/ modules/mappers/ modules/metadata/ modules/proxy/ modules/slotmem/ modules/test/ server/
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <20151123162837.9EA5F3A03E8@svn01-us-west.apache.org>
Date: Tue, 24 Nov 2015 07:36:36 -0500
Cc: cvs@httpd.apache.org
Content-Transfer-Encoding: quoted-printable
Message-Id: <F4415FC8-A433-469F-857C-8645B77FA20A@jaguNET.com>
References: <20151123162837.9EA5F3A03E8@svn01-us-west.apache.org>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448368597;
	bh=MkO69JLNUsQ6OfYg5UZXpzjs3UDkH7piej+NO5dQkx0=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=V8ZHRjh8b+c956S+SI+L5vi1EgWwTY9MjOVQzjYx4WyHhMBeK34aHiY1nHgEyIuMD
	 LGNSJgZrFlvwHujbnoro6osM3ldUjwsqjE9QFJk+hEVgYJSyV0xZtUp9pth+65TRFK
	 dFIXzlqEgIZQbVLNg7xCkVfoiE+rIVlwNV7D3Zc9WhCCIsFdAqT0kS+AFPm4vo+7Am
	 T7Eq06jaMdriMbgpNJSZDCjJxVi/ugieCofQh88X74cYHCDedthCynusqCtbghNjxm
	 RnizMOPt3b1rYSB29V8YBNGUFyUjrL0poXK1O51Mw7sBaiHYp4qq7pQRhlDp46LOb0
	 QVUnFf4Pr2kwA==

Most of those were 100% fine... I was referring to the
apr_atoi64() stuff :)

> On Nov 23, 2015, at 11:28 AM, ylavic@apache.org wrote:
>=20
> Author: ylavic
> Date: Mon Nov 23 16:28:36 2015
> New Revision: 1715869
>=20
> URL: http://svn.apache.org/viewvc?rev=3D1715869&view=3Drev
> Log:
> Revert r1715789: will re-commit without spurious functional changes.
>=20
> Modified:
>    httpd/httpd/trunk/modules/cache/cache_util.c
>    httpd/httpd/trunk/modules/filters/mod_deflate.c
>    httpd/httpd/trunk/modules/filters/mod_include.c
>    httpd/httpd/trunk/modules/filters/mod_proxy_html.c
>    httpd/httpd/trunk/modules/generators/mod_autoindex.c
>    httpd/httpd/trunk/modules/generators/mod_cgi.c
>    httpd/httpd/trunk/modules/generators/mod_cgid.c
>    httpd/httpd/trunk/modules/http/byterange_filter.c
>    httpd/httpd/trunk/modules/http/http_filters.c
>    httpd/httpd/trunk/modules/http2/h2_from_h1.c
>    httpd/httpd/trunk/modules/loggers/mod_log_config.c
>    httpd/httpd/trunk/modules/mappers/mod_rewrite.c
>    httpd/httpd/trunk/modules/metadata/mod_cern_meta.c
>    httpd/httpd/trunk/modules/metadata/mod_headers.c
>    httpd/httpd/trunk/modules/proxy/ajp_header.c
>    httpd/httpd/trunk/modules/proxy/mod_proxy.c
>    httpd/httpd/trunk/modules/proxy/mod_proxy_ajp.c
>    httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
>    httpd/httpd/trunk/modules/proxy/mod_proxy_fcgi.c
>    httpd/httpd/trunk/modules/proxy/mod_proxy_fdpass.c
>    httpd/httpd/trunk/modules/proxy/mod_proxy_ftp.c
>    httpd/httpd/trunk/modules/proxy/mod_proxy_http.c
>    httpd/httpd/trunk/modules/proxy/mod_proxy_scgi.c
>    httpd/httpd/trunk/modules/proxy/mod_proxy_wstunnel.c
>    httpd/httpd/trunk/modules/proxy/mod_serf.c
>    httpd/httpd/trunk/modules/proxy/proxy_util.c
>    httpd/httpd/trunk/modules/slotmem/mod_slotmem_shm.c
>    httpd/httpd/trunk/modules/test/mod_policy.c
>    httpd/httpd/trunk/server/mpm_unix.c
>    httpd/httpd/trunk/server/protocol.c
>    httpd/httpd/trunk/server/util.c
>    httpd/httpd/trunk/server/util_expr_eval.c
>    httpd/httpd/trunk/server/util_script.c
>=20
> Modified: httpd/httpd/trunk/modules/cache/cache_util.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/cache/cache_util.c?=
rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/cache/cache_util.c (original)
> +++ httpd/httpd/trunk/modules/cache/cache_util.c Mon Nov 23 16:28:36 =
2015
> @@ -594,12 +594,7 @@ int cache_check_freshness(cache_handle_t
>     }
>=20
>     if ((agestr =3D apr_table_get(h->resp_hdrs, "Age"))) {
> -        char *endp;
> -        apr_off_t offt;
> -        if (!apr_strtoff(&offt, agestr, &endp, 10)
> -                && endp > agestr && !*endp) {
> -            age_c =3D offt;
> -        }
> +        age_c =3D apr_atoi64(agestr);
>     }
>=20
>     /* calculate age of object */
> @@ -999,7 +994,12 @@ int ap_cache_control(request_rec *r, cac
>         char *header =3D apr_pstrdup(r->pool, pragma_header);
>         const char *token =3D cache_strqtok(header, CACHE_SEPARATOR, =
&last);
>         while (token) {
> -            if (!ap_casecmpstr(token, "no-cache")) {
> +            /* handle most common quickest case... */
> +            if (!strcmp(token, "no-cache")) {
> +                cc->no_cache =3D 1;
> +            }
> +            /* ...then try slowest case */
> +            else if (!strcasecmp(token, "no-cache")) {
>                 cc->no_cache =3D 1;
>             }
>             token =3D cache_strqtok(NULL, CACHE_SEPARATOR, &last);
> @@ -1008,15 +1008,21 @@ int ap_cache_control(request_rec *r, cac
>     }
>=20
>     if (cc_header) {
> -        char *endp;
> -        apr_off_t offt;
>         char *header =3D apr_pstrdup(r->pool, cc_header);
>         const char *token =3D cache_strqtok(header, CACHE_SEPARATOR, =
&last);
>         while (token) {
>             switch (token[0]) {
>             case 'n':
>             case 'N': {
> -                if (!ap_casecmpstrn(token, "no-cache", 8)) {
> +                /* handle most common quickest cases... */
> +                if (!strcmp(token, "no-cache")) {
> +                    cc->no_cache =3D 1;
> +                }
> +                else if (!strcmp(token, "no-store")) {
> +                    cc->no_store =3D 1;
> +                }
> +                /* ...then try slowest cases */
> +                else if (!strncasecmp(token, "no-cache", 8)) {
>                     if (token[8] =3D=3D '=3D') {
>                         cc->no_cache_header =3D 1;
>                     }
> @@ -1025,63 +1031,73 @@ int ap_cache_control(request_rec *r, cac
>                     }
>                     break;
>                 }
> -                else if (!ap_casecmpstr(token, "no-store")) {
> +                else if (!strcasecmp(token, "no-store")) {
>                     cc->no_store =3D 1;
>                 }
> -                else if (!ap_casecmpstr(token, "no-transform")) {
> +                else if (!strcasecmp(token, "no-transform")) {
>                     cc->no_transform =3D 1;
>                 }
>                 break;
>             }
>             case 'm':
>             case 'M': {
> -                if (!ap_casecmpstrn(token, "max-age", 7)) {
> -                    if (token[7] =3D=3D '=3D'
> -                            && !apr_strtoff(&offt, token + 8, &endp, =
10)
> -                            && endp > token + 8 && !*endp) {
> -                        cc->max_age =3D 1;
> -                        cc->max_age_value =3D offt;
> -                    }
> +                /* handle most common quickest cases... */
> +                if (!strcmp(token, "max-age=3D0")) {
> +                    cc->max_age =3D 1;
> +                    cc->max_age_value =3D 0;
>                 }
> -                else if (!ap_casecmpstr(token, "must-revalidate")) {
> +                else if (!strcmp(token, "must-revalidate")) {
>                     cc->must_revalidate =3D 1;
>                 }
> -                else if (!ap_casecmpstrn(token, "max-stale", 9)) {
> -                    if (token[9] =3D=3D '=3D'
> -                             && !apr_strtoff(&offt, token + 10, =
&endp, 10)
> -                             && endp > token + 10 && !*endp) {
> +                /* ...then try slowest cases */
> +                else if (!strncasecmp(token, "max-age", 7)) {
> +                    if (token[7] =3D=3D '=3D') {
> +                        cc->max_age =3D 1;
> +                        cc->max_age_value =3D apr_atoi64(token + 8);
> +                    }
> +                    break;
> +                }
> +                else if (!strncasecmp(token, "max-stale", 9)) {
> +                    if (token[9] =3D=3D '=3D') {
>                         cc->max_stale =3D 1;
> -                        cc->max_stale_value =3D offt;
> +                        cc->max_stale_value =3D apr_atoi64(token + =
10);
>                     }
> -                    else if (!token[9]) {
> +                    else if (!token[10]) {
>                         cc->max_stale =3D 1;
>                         cc->max_stale_value =3D -1;
>                     }
>                     break;
>                 }
> -                else if (!ap_casecmpstrn(token, "min-fresh", 9)) {
> -                    if (token[9] =3D=3D '=3D'
> -                            && !apr_strtoff(&offt, token + 10, &endp, =
10)
> -                            && endp > token + 10 && !*endp) {
> +                else if (!strncasecmp(token, "min-fresh", 9)) {
> +                    if (token[9] =3D=3D '=3D') {
>                         cc->min_fresh =3D 1;
> -                        cc->min_fresh_value =3D offt;
> +                        cc->min_fresh_value =3D apr_atoi64(token + =
10);
>                     }
>                     break;
>                 }
> +                else if (!strcasecmp(token, "must-revalidate")) {
> +                    cc->must_revalidate =3D 1;
> +                }
>                 break;
>             }
>             case 'o':
>             case 'O': {
> -                if (!ap_casecmpstr(token, "only-if-cached")) {
> +                if (!strcasecmp(token, "only-if-cached")) {
>                     cc->only_if_cached =3D 1;
>                 }
>                 break;
>             }
> -            case 'p': {
> -                if (!ap_casecmpstr(token, "public")) {
> +            case 'p':
> +            case 'P': {
> +                /* handle most common quickest cases... */
> +                if (!strcmp(token, "private")) {
> +                    cc->private =3D 1;
> +                }
> +                /* ...then try slowest cases */
> +                else if (!strcasecmp(token, "public")) {
>                     cc->public =3D 1;
>                 }
> -                else if (!ap_casecmpstrn(token, "private", 7)) {
> +                else if (!strncasecmp(token, "private", 7)) {
>                     if (token[7] =3D=3D '=3D') {
>                         cc->private_header =3D 1;
>                     }
> @@ -1090,20 +1106,19 @@ int ap_cache_control(request_rec *r, cac
>                     }
>                     break;
>                 }
> -                else if (!ap_casecmpstr(token, "proxy-revalidate")) {
> +                else if (!strcasecmp(token, "proxy-revalidate")) {
>                     cc->proxy_revalidate =3D 1;
>                 }
>                 break;
>             }
>             case 's':
>             case 'S': {
> -                if (!ap_casecmpstrn(token, "s-maxage", 8)) {
> -                    if (token[8] =3D=3D '=3D'
> -                            && !apr_strtoff(&offt, token + 9, &endp, =
10)
> -                            && endp > token + 9 && !*endp) {
> +                if (!strncasecmp(token, "s-maxage", 8)) {
> +                    if (token[8] =3D=3D '=3D') {
>                         cc->s_maxage =3D 1;
> -                        cc->s_maxage_value =3D offt;
> +                        cc->s_maxage_value =3D apr_atoi64(token + 9);
>                     }
> +                    break;
>                 }
>                 break;
>             }
> @@ -1133,7 +1148,8 @@ static int cache_control_remove(request_
>             switch (token[0]) {
>             case 'n':
>             case 'N': {
> -                if (!ap_casecmpstrn(token, "no-cache", 8)) {
> +                if (!strncmp(token, "no-cache", 8)
> +                        || !strncasecmp(token, "no-cache", 8)) {
>                     if (token[8] =3D=3D '=3D') {
>                         const char *header =3D cache_strqtok(token + =
9,
>                                 CACHE_SEPARATOR "\"", &slast);
> @@ -1150,7 +1166,8 @@ static int cache_control_remove(request_
>             }
>             case 'p':
>             case 'P': {
> -                if (!ap_casecmpstrn(token, "private", 7)) {
> +                if (!strncmp(token, "private", 7)
> +                        || !strncasecmp(token, "private", 7)) {
>                     if (token[7] =3D=3D '=3D') {
>                         const char *header =3D cache_strqtok(token + =
8,
>                                 CACHE_SEPARATOR "\"", &slast);
>=20
> Modified: httpd/httpd/trunk/modules/filters/mod_deflate.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/filters/mod_deflate=
.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/filters/mod_deflate.c (original)
> +++ httpd/httpd/trunk/modules/filters/mod_deflate.c Mon Nov 23 =
16:28:36 2015
> @@ -123,8 +123,8 @@ static int check_gzip(request_rec *r, ap
>     if (encoding && *encoding) {
>=20
>         /* check the usual/simple case first */
> -        if (!ap_casecmpstr(encoding, "gzip")
> -            || !ap_casecmpstr(encoding, "x-gzip")) {
> +        if (!strcasecmp(encoding, "gzip")
> +            || !strcasecmp(encoding, "x-gzip")) {
>             found =3D 1;
>             if (hdrs) {
>                 apr_table_unset(hdrs, "Content-Encoding");
> @@ -142,8 +142,8 @@ static int check_gzip(request_rec *r, ap
>             for(;;) {
>                 char *token =3D ap_strrchr(new_encoding, ',');
>                 if (!token) {        /* gzip:identity or =
other:identity */
> -                    if (!ap_casecmpstr(new_encoding, "gzip")
> -                        || !ap_casecmpstr(new_encoding, "x-gzip")) {
> +                    if (!strcasecmp(new_encoding, "gzip")
> +                        || !strcasecmp(new_encoding, "x-gzip")) {
>                         found =3D 1;
>                         if (hdrs) {
>                             apr_table_unset(hdrs, "Content-Encoding");
> @@ -155,8 +155,8 @@ static int check_gzip(request_rec *r, ap
>                     break; /* seen all tokens */
>                 }
>                 for (ptr=3Dtoken+1; apr_isspace(*ptr); ++ptr);
> -                if (!ap_casecmpstr(ptr, "gzip")
> -                    || !ap_casecmpstr(ptr, "x-gzip")) {
> +                if (!strcasecmp(ptr, "gzip")
> +                    || !strcasecmp(ptr, "x-gzip")) {
>                     *token =3D '\0';
>                     if (hdrs) {
>                         apr_table_setn(hdrs, "Content-Encoding", =
new_encoding);
> @@ -166,7 +166,7 @@ static int check_gzip(request_rec *r, ap
>                     }
>                     found =3D 1;
>                 }
> -                else if (!ptr[0] || !ap_casecmpstr(ptr, "identity")) =
{
> +                else if (!ptr[0] || !strcasecmp(ptr, "identity")) {
>                     *token =3D '\0';
>                     continue; /* strip the token and find the next one =
*/
>                 }
> @@ -744,7 +744,7 @@ static apr_status_t deflate_out_filter(a
>             }
>=20
>             token =3D ap_get_token(r->pool, &accepts, 0);
> -            while (token && token[0] && ap_casecmpstr(token, "gzip")) =
{
> +            while (token && token[0] && strcasecmp(token, "gzip")) {
>                 /* skip parameters, XXX: ;q=3Dfoo evaluation? */
>                 while (*accepts =3D=3D ';') {
>                     ++accepts;
> @@ -818,7 +818,7 @@ static apr_status_t deflate_out_filter(a
>          */
>=20
>         /* If the entire Content-Encoding is "identity", we can =
replace it. */
> -        if (!encoding || !ap_casecmpstr(encoding, "identity")) {
> +        if (!encoding || !strcasecmp(encoding, "identity")) {
>             apr_table_setn(r->headers_out, "Content-Encoding", =
"gzip");
>         }
>         else {
>=20
> Modified: httpd/httpd/trunk/modules/filters/mod_include.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/filters/mod_include=
.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/filters/mod_include.c (original)
> +++ httpd/httpd/trunk/modules/filters/mod_include.c Mon Nov 23 =
16:28:36 2015
> @@ -620,16 +620,16 @@ static void add_include_vars(request_rec
> static const char *add_include_vars_lazy(request_rec *r, const char =
*var, const char *timefmt)
> {
>     char *val;
> -    if (!ap_casecmpstr(var, "DATE_LOCAL")) {
> +    if (!strcasecmp(var, "DATE_LOCAL")) {
>         val =3D ap_ht_time(r->pool, r->request_time, timefmt, 0);
>     }
> -    else if (!ap_casecmpstr(var, "DATE_GMT")) {
> +    else if (!strcasecmp(var, "DATE_GMT")) {
>         val =3D ap_ht_time(r->pool, r->request_time, timefmt, 1);
>     }
> -    else if (!ap_casecmpstr(var, "LAST_MODIFIED")) {
> +    else if (!strcasecmp(var, "LAST_MODIFIED")) {
>         val =3D ap_ht_time(r->pool, r->finfo.mtime, timefmt, 0);
>     }
> -    else if (!ap_casecmpstr(var, "USER_NAME")) {
> +    else if (!strcasecmp(var, "USER_NAME")) {
>         if (apr_uid_name_get(&val, r->finfo.user, r->pool) !=3D =
APR_SUCCESS) {
>             val =3D "<unknown>";
>         }
> @@ -714,9 +714,9 @@ static int include_expr_lookup(ap_expr_l
> {
>     switch (parms->type) {
>     case AP_EXPR_FUNC_STRING:
> -        if (ap_casecmpstr(parms->name, "v") =3D=3D 0 ||
> -            ap_casecmpstr(parms->name, "reqenv") =3D=3D 0 ||
> -            ap_casecmpstr(parms->name, "env") =3D=3D 0) {
> +        if (strcasecmp(parms->name, "v") =3D=3D 0 ||
> +            strcasecmp(parms->name, "reqenv") =3D=3D 0 ||
> +            strcasecmp(parms->name, "env") =3D=3D 0) {
>             *parms->func =3D include_expr_var_fn;
>             *parms->data =3D parms->name;
>             return OK;
> @@ -1947,25 +1947,25 @@ static apr_status_t handle_echo(include_
>                 token =3D apr_strtok(d, ", \t", &last);
>=20
>                 while (token) {
> -                    if (!ap_casecmpstr(token, "none")) {
> +                    if (!strcasecmp(token, "none")) {
>                         /* do nothing */
>                     }
> -                    else if (!ap_casecmpstr(token, "url")) {
> +                    else if (!strcasecmp(token, "url")) {
>                         char *buf =3D apr_pstrdup(ctx->pool, =
echo_text);
>                         ap_unescape_url(buf);
>                         echo_text =3D buf;
>                     }
> -                    else if (!ap_casecmpstr(token, "urlencoded")) {
> +                    else if (!strcasecmp(token, "urlencoded")) {
>                         char *buf =3D apr_pstrdup(ctx->pool, =
echo_text);
>                         ap_unescape_urlencoded(buf);
>                         echo_text =3D buf;
>                     }
> -                    else if (!ap_casecmpstr(token, "entity")) {
> +                    else if (!strcasecmp(token, "entity")) {
>                         char *buf =3D apr_pstrdup(ctx->pool, =
echo_text);
>                         decodehtml(buf);
>                         echo_text =3D buf;
>                     }
> -                    else if (!ap_casecmpstr(token, "base64")) {
> +                    else if (!strcasecmp(token, "base64")) {
>                         echo_text =3D ap_pbase64decode(ctx->dpool, =
echo_text);
>                     }
>                     else {
> @@ -1983,19 +1983,19 @@ static apr_status_t handle_echo(include_
>                 token =3D apr_strtok(e, ", \t", &last);
>=20
>                 while (token) {
> -                    if (!ap_casecmpstr(token, "none")) {
> +                    if (!strcasecmp(token, "none")) {
>                         /* do nothing */
>                     }
> -                    else if (!ap_casecmpstr(token, "url")) {
> +                    else if (!strcasecmp(token, "url")) {
>                         echo_text =3D ap_escape_uri(ctx->dpool, =
echo_text);
>                     }
> -                    else if (!ap_casecmpstr(token, "urlencoded")) {
> +                    else if (!strcasecmp(token, "urlencoded")) {
>                         echo_text =3D ap_escape_urlencoded(ctx->dpool, =
echo_text);
>                     }
> -                    else if (!ap_casecmpstr(token, "entity")) {
> +                    else if (!strcasecmp(token, "entity")) {
>                         echo_text =3D ap_escape_html2(ctx->dpool, =
echo_text, 0);
>                     }
> -                    else if (!ap_casecmpstr(token, "base64")) {
> +                    else if (!strcasecmp(token, "base64")) {
>                         char *buf;
>                         buf =3D ap_pbase64encode(ctx->dpool, (char =
*)echo_text);
>                         echo_text =3D buf;
> @@ -2585,25 +2585,25 @@ static apr_status_t handle_set(include_c
>                 token =3D apr_strtok(d, ", \t", &last);
>=20
>                 while (token) {
> -                    if (!ap_casecmpstr(token, "none")) {
> +                    if (!strcasecmp(token, "none")) {
>                         /* do nothing */
>                     }
> -                    else if (!ap_casecmpstr(token, "url")) {
> +                    else if (!strcasecmp(token, "url")) {
>                         char *buf =3D apr_pstrdup(ctx->pool, =
parsed_string);
>                         ap_unescape_url(buf);
>                         parsed_string =3D buf;
>                     }
> -                    else if (!ap_casecmpstr(token, "urlencoded")) {
> +                    else if (!strcasecmp(token, "urlencoded")) {
>                         char *buf =3D apr_pstrdup(ctx->pool, =
parsed_string);
>                         ap_unescape_urlencoded(buf);
>                         parsed_string =3D buf;
>                     }
> -                    else if (!ap_casecmpstr(token, "entity")) {
> +                    else if (!strcasecmp(token, "entity")) {
>                         char *buf =3D apr_pstrdup(ctx->pool, =
parsed_string);
>                         decodehtml(buf);
>                         parsed_string =3D buf;
>                     }
> -                    else if (!ap_casecmpstr(token, "base64")) {
> +                    else if (!strcasecmp(token, "base64")) {
>                         parsed_string =3D ap_pbase64decode(ctx->dpool, =
parsed_string);
>                     }
>                     else {
> @@ -2621,19 +2621,19 @@ static apr_status_t handle_set(include_c
>                 token =3D apr_strtok(e, ", \t", &last);
>=20
>                 while (token) {
> -                    if (!ap_casecmpstr(token, "none")) {
> +                    if (!strcasecmp(token, "none")) {
>                         /* do nothing */
>                     }
> -                    else if (!ap_casecmpstr(token, "url")) {
> +                    else if (!strcasecmp(token, "url")) {
>                         parsed_string =3D ap_escape_uri(ctx->dpool, =
parsed_string);
>                     }
> -                    else if (!ap_casecmpstr(token, "urlencoded")) {
> +                    else if (!strcasecmp(token, "urlencoded")) {
>                         parsed_string =3D =
ap_escape_urlencoded(ctx->dpool, parsed_string);
>                     }
> -                    else if (!ap_casecmpstr(token, "entity")) {
> +                    else if (!strcasecmp(token, "entity")) {
>                         parsed_string =3D ap_escape_html2(ctx->dpool, =
parsed_string, 0);
>                     }
> -                    else if (!ap_casecmpstr(token, "base64")) {
> +                    else if (!strcasecmp(token, "base64")) {
>                         char *buf;
>                         buf =3D ap_pbase64encode(ctx->dpool, (char =
*)parsed_string);
>                         parsed_string =3D buf;
>=20
> Modified: httpd/httpd/trunk/modules/filters/mod_proxy_html.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/filters/mod_proxy_h=
tml.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/filters/mod_proxy_html.c (original)
> +++ httpd/httpd/trunk/modules/filters/mod_proxy_html.c Mon Nov 23 =
16:28:36 2015
> @@ -295,8 +295,8 @@ static void pinternalSubset(void* ctxt,
>     }
>     ap_fputstrs(ctx->f->next, ctx->bb, "<!DOCTYPE ", (const char =
*)name, NULL);
>     if (externalID) {
> -        if (!ap_casecmpstr((const char*)name, "html") &&
> -            !ap_casecmpstrn((const char *)externalID, "-//W3C//DTD =
XHTML ", 18)) {
> +        if (!strcasecmp((const char*)name, "html") &&
> +            !strncasecmp((const char *)externalID, "-//W3C//DTD XHTML =
", 18)) {
>             ctx->etag =3D xhtml_etag;
>         }
>         else {
> @@ -690,7 +690,7 @@ static meta *metafix(request_rec *r, con
>         while (!apr_isalpha(*++p));
>         for (q =3D p; apr_isalnum(*q) || (*q =3D=3D '-'); ++q);
>         header =3D apr_pstrndup(r->pool, p, q-p);
> -        if (ap_casecmpstrn(header, "Content-", 8)) {
> +        if (strncasecmp(header, "Content-", 8)) {
>             /* find content=3D... string */
>             p =3D apr_strmatch(seek_content, buf+offs+pmatch[0].rm_so,
>                               pmatch[0].rm_eo - pmatch[0].rm_so);
> @@ -718,7 +718,7 @@ static meta *metafix(request_rec *r, con
>                 }
>             }
>         }
> -        else if (!ap_casecmpstrn(header, "Content-Type", 12)) {
> +        else if (!strncasecmp(header, "Content-Type", 12)) {
>             ret =3D apr_palloc(r->pool, sizeof(meta));
>             ret->start =3D offs+pmatch[0].rm_so;
>             ret->end =3D offs+pmatch[0].rm_eo;
> @@ -842,8 +842,8 @@ static saxctxt *check_filter_init (ap_fi
>             else if (!f->r->content_type) {
>                 errmsg =3D "No content-type; bailing out of proxy-html =
filter";
>             }
> -            else if (ap_casecmpstrn(f->r->content_type, "text/html", =
9) &&
> -                     ap_casecmpstrn(f->r->content_type,
> +            else if (strncasecmp(f->r->content_type, "text/html", 9) =
&&
> +                     strncasecmp(f->r->content_type,
>                                  "application/xhtml+xml", 21)) {
>                 errmsg =3D "Non-HTML content; not inserting proxy-html =
filter";
>             }
>=20
> Modified: httpd/httpd/trunk/modules/generators/mod_autoindex.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/generators/mod_auto=
index.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/generators/mod_autoindex.c (original)
> +++ httpd/httpd/trunk/modules/generators/mod_autoindex.c Mon Nov 23 =
16:28:36 2015
> @@ -1068,7 +1068,7 @@ static void emit_head(request_rec *r, ch
>                     emit_H1 =3D 1;
>                 }
>             }
> -            else if (!ap_casecmpstrn("text/", rr->content_type, 5)) {
> +            else if (!strncasecmp("text/", rr->content_type, 5)) {
>                 /*
>                  * If we can open the file, prefix it with the =
preamble
>                  * regardless; since we'll be sending a <pre> block =
around
> @@ -1163,7 +1163,7 @@ static void emit_tail(request_rec *r, ch
>                     suppress_post =3D suppress_amble;
>                 }
>             }
> -            else if (!ap_casecmpstrn("text/", rr->content_type, 5)) {
> +            else if (!strncasecmp("text/", rr->content_type, 5)) {
>                 /*
>                  * If we can open the file, suppress the signature.
>                  */
>=20
> Modified: httpd/httpd/trunk/modules/generators/mod_cgi.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/generators/mod_cgi.=
c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/generators/mod_cgi.c (original)
> +++ httpd/httpd/trunk/modules/generators/mod_cgi.c Mon Nov 23 16:28:36 =
2015
> @@ -78,7 +78,7 @@ static void discard_script_output(apr_bu
> static int is_scriptaliased(request_rec *r)
> {
>     const char *t =3D apr_table_get(r->notes, "alias-forced-type");
> -    return t && (!ap_casecmpstr(t, "cgi-script"));
> +    return t && (!strcasecmp(t, "cgi-script"));
> }
>=20
> /* Configuration stuff */
>=20
> Modified: httpd/httpd/trunk/modules/generators/mod_cgid.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/generators/mod_cgid=
.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/generators/mod_cgid.c (original)
> +++ httpd/httpd/trunk/modules/generators/mod_cgid.c Mon Nov 23 =
16:28:36 2015
> @@ -131,7 +131,7 @@ static ap_unix_identity_t *cgid_suexec_i
> static int is_scriptaliased(request_rec *r)
> {
>     const char *t =3D apr_table_get(r->notes, "alias-forced-type");
> -    return t && (!ap_casecmpstr(t, "cgi-script"));
> +    return t && (!strcasecmp(t, "cgi-script"));
> }
>=20
> /* Configuration stuff */
>=20
> Modified: httpd/httpd/trunk/modules/http/byterange_filter.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http/byterange_filt=
er.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/http/byterange_filter.c (original)
> +++ httpd/httpd/trunk/modules/http/byterange_filter.c Mon Nov 23 =
16:28:36 2015
> @@ -101,7 +101,7 @@ static int ap_set_byterange(request_rec
>     }
>=20
>     range =3D apr_table_get(r->headers_in, "Range");
> -    if (!range || ap_casecmpstrn(range, "bytes=3D", 6) || r->status =
!=3D HTTP_OK) {
> +    if (!range || strncasecmp(range, "bytes=3D", 6) || r->status !=3D =
HTTP_OK) {
>         return 0;
>     }
>=20
> @@ -112,7 +112,7 @@ static int ap_set_byterange(request_rec
>=20
>     /* is content already a multiple range? */
>     if ((ct =3D apr_table_get(r->headers_out, "Content-Type"))
> -        && ap_casecmpstrn(ct, "multipart/byteranges", 20) =3D=3D 0) {
> +        && strncasecmp(ct, "multipart/byteranges", 20) =3D=3D 0) {
>             return 0;
>     }
>=20
>=20
> Modified: httpd/httpd/trunk/modules/http/http_filters.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http/http_filters.c=
?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/http/http_filters.c (original)
> +++ httpd/httpd/trunk/modules/http/http_filters.c Mon Nov 23 16:28:36 =
2015
> @@ -317,7 +317,7 @@ apr_status_t ap_http_filter(ap_filter_t
>         lenp =3D apr_table_get(f->r->headers_in, "Content-Length");
>=20
>         if (tenc) {
> -            if (ap_casecmpstr(tenc, "chunked") =3D=3D 0 /* fast path =
*/
> +            if (strcasecmp(tenc, "chunked") =3D=3D 0 /* fast path */
>                     || ap_find_last_token(f->r->pool, tenc, =
"chunked")) {
>                 ctx->state =3D BODY_CHUNK;
>             }
> @@ -764,7 +764,7 @@ static int uniq_field_values(void *d, co
>          */
>         for (i =3D 0, strpp =3D (char **) values->elts; i < =
values->nelts;
>              ++i, ++strpp) {
> -            if (*strpp && ap_casecmpstr(*strpp, start) =3D=3D 0) {
> +            if (*strpp && strcasecmp(*strpp, start) =3D=3D 0) {
>                 break;
>             }
>         }
> @@ -1543,7 +1543,7 @@ AP_DECLARE(int) ap_setup_client_block(re
>     r->remaining =3D 0;
>=20
>     if (tenc) {
> -        if (ap_casecmpstr(tenc, "chunked")) {
> +        if (strcasecmp(tenc, "chunked")) {
>             ap_log_rerror(APLOG_MARK, APLOG_INFO, 0, r, APLOGNO(01592)
>                           "Unknown Transfer-Encoding %s", tenc);
>             return HTTP_NOT_IMPLEMENTED;
>=20
> Modified: httpd/httpd/trunk/modules/http2/h2_from_h1.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http2/h2_from_h1.c?=
rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/http2/h2_from_h1.c (original)
> +++ httpd/httpd/trunk/modules/http2/h2_from_h1.c Mon Nov 23 16:28:36 =
2015
> @@ -262,7 +262,7 @@ static int uniq_field_values(void *d, co
>          */
>         for (i =3D 0, strpp =3D (char **) values->elts; i < =
values->nelts;
>              ++i, ++strpp) {
> -            if (*strpp && ap_casecmpstr(*strpp, start) =3D=3D 0) {
> +            if (*strpp && strcasecmp(*strpp, start) =3D=3D 0) {
>                 break;
>             }
>         }
>=20
> Modified: httpd/httpd/trunk/modules/loggers/mod_log_config.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/loggers/mod_log_con=
fig.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/loggers/mod_log_config.c (original)
> +++ httpd/httpd/trunk/modules/loggers/mod_log_config.c Mon Nov 23 =
16:28:36 2015
> @@ -497,7 +497,7 @@ static APR_INLINE char *find_multiple_he
>     result_list =3D rp =3D NULL;
>=20
>     do {
> -        if (!ap_casecmpstr(t_elt->key, key)) {
> +        if (!strcasecmp(t_elt->key, key)) {
>             if (!result_list) {
>                 result_list =3D rp =3D apr_palloc(pool, sizeof(*rp));
>             }
> @@ -541,10 +541,10 @@ static const char *log_header_out(reques
> {
>     const char *cp =3D NULL;
>=20
> -    if (!ap_casecmpstr(a, "Content-type") && r->content_type) {
> +    if (!strcasecmp(a, "Content-type") && r->content_type) {
>         cp =3D ap_field_noparam(r->pool, r->content_type);
>     }
> -    else if (!ap_casecmpstr(a, "Set-Cookie")) {
> +    else if (!strcasecmp(a, "Set-Cookie")) {
>         cp =3D find_multiple_headers(r->pool, r->headers_out, a);
>     }
>     else {
> @@ -808,13 +808,13 @@ static const char *log_request_duration_
> static const char *log_request_duration_scaled(request_rec *r, char =
*a)
> {
>     apr_time_t duration =3D get_request_end_time(r) - r->request_time;
> -    if (*a =3D=3D '\0' || !ap_casecmpstr(a, "s")) {
> +    if (*a =3D=3D '\0' || !strcasecmp(a, "s")) {
>         duration =3D apr_time_sec(duration);
>     }
> -    else if (!ap_casecmpstr(a, "ms")) {
> +    else if (!strcasecmp(a, "ms")) {
>         duration =3D apr_time_as_msec(duration);
>     }
> -    else if (!ap_casecmpstr(a, "us")) {
> +    else if (!strcasecmp(a, "us")) {
>     }
>     else {
>         /* bogus format */
> @@ -835,13 +835,13 @@ static const char *log_server_port(reque
> {
>     apr_port_t port;
>=20
> -    if (*a =3D=3D '\0' || !ap_casecmpstr(a, "canonical")) {
> +    if (*a =3D=3D '\0' || !strcasecmp(a, "canonical")) {
>         port =3D r->server->port ? r->server->port : =
ap_default_port(r);
>     }
> -    else if (!ap_casecmpstr(a, "remote")) {
> +    else if (!strcasecmp(a, "remote")) {
>         port =3D r->useragent_addr->port;
>     }
> -    else if (!ap_casecmpstr(a, "local")) {
> +    else if (!strcasecmp(a, "local")) {
>         port =3D r->connection->local_addr->port;
>     }
>     else {
> @@ -861,10 +861,10 @@ static const char *log_server_name(reque
>=20
> static const char *log_pid_tid(request_rec *r, char *a)
> {
> -    if (*a =3D=3D '\0' || !ap_casecmpstr(a, "pid")) {
> +    if (*a =3D=3D '\0' || !strcasecmp(a, "pid")) {
>         return ap_append_pid(r->pool, "", "");
>     }
> -    else if (!ap_casecmpstr(a, "tid") || !ap_casecmpstr(a, "hextid")) =
{
> +    else if (!strcasecmp(a, "tid") || !strcasecmp(a, "hextid")) {
> #if APR_HAS_THREADS
>         apr_os_thread_t tid =3D apr_os_thread_current();
> #else
> @@ -1335,14 +1335,14 @@ static const char *add_custom_log(cmd_pa
>     cls->condition_var =3D NULL;
>     cls->condition_expr =3D NULL;
>     if (envclause !=3D NULL) {
> -        if (ap_casecmpstrn(envclause, "env=3D", 4) =3D=3D 0) {
> +        if (strncasecmp(envclause, "env=3D", 4) =3D=3D 0) {
>             if ((envclause[4] =3D=3D '\0')
>                 || ((envclause[4] =3D=3D '!') && (envclause[5] =3D=3D =
'\0'))) {
>                 return "missing environment variable name";
>             }
>             cls->condition_var =3D apr_pstrdup(cmd->pool, =
&envclause[4]);
>         }
> -        else if (ap_casecmpstrn(envclause, "expr=3D", 5) =3D=3D 0) {
> +        else if (strncasecmp(envclause, "expr=3D", 5) =3D=3D 0) {
>             const char *err;
>             if ((envclause[5] =3D=3D '\0'))
>                 return "missing condition";
>=20
> Modified: httpd/httpd/trunk/modules/mappers/mod_rewrite.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/mappers/mod_rewrite=
.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/mappers/mod_rewrite.c (original)
> +++ httpd/httpd/trunk/modules/mappers/mod_rewrite.c Mon Nov 23 =
16:28:36 2015
> @@ -525,7 +525,7 @@ static unsigned is_absolute_uri(char *ur
>     switch (*uri++) {
>     case 'a':
>     case 'A':
> -        if (!ap_casecmpstrn(uri, "jp://", 5)) {        /* ajp://    =
*/
> +        if (!strncasecmp(uri, "jp://", 5)) {        /* ajp://    */
>           *sqs =3D 1;
>           return 6;
>         }
> @@ -533,7 +533,7 @@ static unsigned is_absolute_uri(char *ur
>=20
>     case 'b':
>     case 'B':
> -        if (!ap_casecmpstrn(uri, "alancer://", 10)) {   /* =
balancer:// */
> +        if (!strncasecmp(uri, "alancer://", 10)) {   /* balancer:// =
*/
>           *sqs =3D 1;
>           return 11;
>         }
> @@ -541,10 +541,10 @@ static unsigned is_absolute_uri(char *ur
>=20
>     case 'f':
>     case 'F':
> -        if (!ap_casecmpstrn(uri, "tp://", 5)) {        /* ftp://    =
*/
> +        if (!strncasecmp(uri, "tp://", 5)) {        /* ftp://    */
>             return 6;
>         }
> -        if (!ap_casecmpstrn(uri, "cgi://", 6)) {       /* fcgi://   =
*/
> +        if (!strncasecmp(uri, "cgi://", 6)) {       /* fcgi://   */
>             *sqs =3D 1;
>             return 7;
>         }
> @@ -552,18 +552,18 @@ static unsigned is_absolute_uri(char *ur
>=20
>     case 'g':
>     case 'G':
> -        if (!ap_casecmpstrn(uri, "opher://", 8)) {     /* gopher:// =
*/
> +        if (!strncasecmp(uri, "opher://", 8)) {     /* gopher:// */
>             return 9;
>         }
>         break;
>=20
>     case 'h':
>     case 'H':
> -        if (!ap_casecmpstrn(uri, "ttp://", 6)) {       /* http://   =
*/
> +        if (!strncasecmp(uri, "ttp://", 6)) {       /* http://   */
>             *sqs =3D 1;
>             return 7;
>         }
> -        else if (!ap_casecmpstrn(uri, "ttps://", 7)) { /* https://  =
*/
> +        else if (!strncasecmp(uri, "ttps://", 7)) { /* https://  */
>             *sqs =3D 1;
>             return 8;
>         }
> @@ -571,14 +571,14 @@ static unsigned is_absolute_uri(char *ur
>=20
>     case 'l':
>     case 'L':
> -        if (!ap_casecmpstrn(uri, "dap://", 6)) {       /* ldap://   =
*/
> +        if (!strncasecmp(uri, "dap://", 6)) {       /* ldap://   */
>             return 7;
>         }
>         break;
>=20
>     case 'm':
>     case 'M':
> -        if (!ap_casecmpstrn(uri, "ailto:", 6)) {       /* mailto:   =
*/
> +        if (!strncasecmp(uri, "ailto:", 6)) {       /* mailto:   */
>             *sqs =3D 1;
>             return 7;
>         }
> @@ -586,17 +586,17 @@ static unsigned is_absolute_uri(char *ur
>=20
>     case 'n':
>     case 'N':
> -        if (!ap_casecmpstrn(uri, "ews:", 4)) {         /* news:     =
*/
> +        if (!strncasecmp(uri, "ews:", 4)) {         /* news:     */
>             return 5;
>         }
> -        else if (!ap_casecmpstrn(uri, "ntp://", 6)) {  /* nntp://   =
*/
> +        else if (!strncasecmp(uri, "ntp://", 6)) {  /* nntp://   */
>             return 7;
>         }
>         break;
>=20
>     case 's':
>     case 'S':
> -        if (!ap_casecmpstrn(uri, "cgi://", 6)) {       /* scgi://   =
*/
> +        if (!strncasecmp(uri, "cgi://", 6)) {       /* scgi://   */
>             *sqs =3D 1;
>             return 7;
>         }
> @@ -604,11 +604,11 @@ static unsigned is_absolute_uri(char *ur
>=20
>     case 'w':
>     case 'W':
> -        if (!ap_casecmpstrn(uri, "s://", 4)) {        /* ws://     */
> +        if (!strncasecmp(uri, "s://", 4)) {        /* ws://     */
>             *sqs =3D 1;
>             return 5;
>         }
> -        else if (!ap_casecmpstrn(uri, "ss://", 5)) {  /* wss://    */
> +        else if (!strncasecmp(uri, "ss://", 5)) {  /* wss://    */
>             *sqs =3D 1;
>             return 6;
>         }
> @@ -716,7 +716,7 @@ static char *escape_absolute_uri(apr_poo
>          *               [dn ["?" [attributes] ["?" [scope]
>          *               ["?" [filter] ["?" extensions]]]]]]
>          */
> -        if (!ap_casecmpstrn(uri, "ldap", 4)) {
> +        if (!strncasecmp(uri, "ldap", 4)) {
>             char *token[5];
>             int c =3D 0;
>=20
> @@ -1576,7 +1576,7 @@ static char *lookup_map_program(request_
>     }
>=20
>     /* catch the "failed" case */
> -    if (i =3D=3D 4 && !ap_casecmpstr(buf, "NULL")) {
> +    if (i =3D=3D 4 && !strcasecmp(buf, "NULL")) {
>         return NULL;
>     }
>=20
> @@ -1829,7 +1829,7 @@ static char *lookup_variable(char *var,
>=20
>     /* fast tests for variable length variables (sic) first */
>     if (var[3] =3D=3D ':') {
> -        if (var[4] && !ap_casecmpstrn(var, "ENV", 3)) {
> +        if (var[4] && !strncasecmp(var, "ENV", 3)) {
>             var +=3D 4;
>             result =3D apr_table_get(r->notes, var);
>=20
> @@ -1840,7 +1840,7 @@ static char *lookup_variable(char *var,
>                 result =3D getenv(var);
>             }
>         }
> -        else if (var[4] && !ap_casecmpstrn(var, "SSL", 3) && =
rewrite_ssl_lookup) {
> +        else if (var[4] && !strncasecmp(var, "SSL", 3) && =
rewrite_ssl_lookup) {
>             result =3D rewrite_ssl_lookup(r->pool, r->server, =
r->connection, r,
>                                         var + 4);
>         }
> @@ -1850,10 +1850,10 @@ static char *lookup_variable(char *var,
>             request_rec *rr;
>             const char *path;
>=20
> -            if (!ap_casecmpstrn(var, "HTTP", 4)) {
> +            if (!strncasecmp(var, "HTTP", 4)) {
>                 result =3D lookup_header(var+5, ctx);
>             }
> -            else if (!ap_casecmpstrn(var, "LA-U", 4)) {
> +            else if (!strncasecmp(var, "LA-U", 4)) {
>                 if (ctx->uri && subreq_ok(r)) {
>                     path =3D ctx->perdir ? la_u(ctx) : ctx->uri;
>                     rr =3D ap_sub_req_lookup_uri(path, r, NULL);
> @@ -1868,7 +1868,7 @@ static char *lookup_variable(char *var,
>                     return (char *)result;
>                 }
>             }
> -            else if (!ap_casecmpstrn(var, "LA-F", 4)) {
> +            else if (!strncasecmp(var, "LA-F", 4)) {
>                 if (ctx->uri && subreq_ok(r)) {
>                     path =3D ctx->uri;
>                     if (ctx->perdir && *path =3D=3D '/') {
> @@ -2575,14 +2575,14 @@ static void add_cookie(request_rec *r, c
>                                  : NULL,
>                                  expires ? (exp_time ? exp_time : "")
>                                  : NULL,
> -                                 (secure && (!ap_casecmpstr(secure, =
"true")
> +                                 (secure && (!strcasecmp(secure, =
"true")
>                                              || !strcmp(secure, "1")
> -                                             || =
!ap_casecmpstr(secure,
> +                                             || !strcasecmp(secure,
>                                                             =
"secure"))) ?
>                                   "; secure" : NULL,
> -                                 (httponly && =
(!ap_casecmpstr(httponly, "true")
> +                                 (httponly && (!strcasecmp(httponly, =
"true")
>                                                || !strcmp(httponly, =
"1")
> -                                               || =
!ap_casecmpstr(httponly,
> +                                               || =
!strcasecmp(httponly,
>                                                               =
"HttpOnly"))) ?
>                                   "; HttpOnly" : NULL,
>                                  NULL);
>=20
> Modified: httpd/httpd/trunk/modules/metadata/mod_cern_meta.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/metadata/mod_cern_m=
eta.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/metadata/mod_cern_meta.c (original)
> +++ httpd/httpd/trunk/modules/metadata/mod_cern_meta.c Mon Nov 23 =
16:28:36 2015
> @@ -240,7 +240,7 @@ static int scan_meta_file(request_rec *r
>         while (apr_isspace(*l))
>             ++l;
>=20
> -        if (!ap_casecmpstr(w, "Content-type")) {
> +        if (!strcasecmp(w, "Content-type")) {
>             char *tmp;
>             /* Nuke trailing whitespace */
>=20
> @@ -252,7 +252,7 @@ static int scan_meta_file(request_rec *r
>             ap_content_type_tolower(tmp);
>             ap_set_content_type(r, tmp);
>         }
> -        else if (!ap_casecmpstr(w, "Status")) {
> +        else if (!strcasecmp(w, "Status")) {
>             sscanf(l, "%d", &r->status);
>             r->status_line =3D apr_pstrdup(r->pool, l);
>         }
>=20
> Modified: httpd/httpd/trunk/modules/metadata/mod_headers.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/metadata/mod_header=
s.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/metadata/mod_headers.c (original)
> +++ httpd/httpd/trunk/modules/metadata/mod_headers.c Mon Nov 23 =
16:28:36 2015
> @@ -789,14 +789,14 @@ static int do_headers_fixup(request_rec
>             }
>             break;
>         case hdr_set:
> -            if (!ap_casecmpstr(hdr->header, "Content-Type")) {
> +            if (!strcasecmp(hdr->header, "Content-Type")) {
>                  ap_set_content_type(r, process_tags(hdr, r));
>             }
>             apr_table_setn(headers, hdr->header, process_tags(hdr, =
r));
>             break;
>         case hdr_setifempty:
>             if (NULL =3D=3D apr_table_get(headers, hdr->header)) {
> -                if (!ap_casecmpstr(hdr->header, "Content-Type")) {
> +                if (!strcasecmp(hdr->header, "Content-Type")) {
>                     ap_set_content_type(r, process_tags(hdr, r));
>                 }
>                 apr_table_setn(headers, hdr->header, process_tags(hdr, =
r));
> @@ -813,7 +813,7 @@ static int do_headers_fixup(request_rec
>             break;
>         case hdr_edit:
>         case hdr_edit_r:
> -            if (!ap_casecmpstr(hdr->header, "Content-Type") && =
r->content_type) {
> +            if (!strcasecmp(hdr->header, "Content-Type") && =
r->content_type) {
>                 const char *repl =3D process_regexp(hdr, =
r->content_type, r);
>                 if (repl =3D=3D NULL)
>                     return 0;
>=20
> Modified: httpd/httpd/trunk/modules/proxy/ajp_header.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/ajp_header.c?=
rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/proxy/ajp_header.c (original)
> +++ httpd/httpd/trunk/modules/proxy/ajp_header.c Mon Nov 23 16:28:36 =
2015
> @@ -633,15 +633,15 @@ static apr_status_t ajp_unmarshal_respon
>         }
>=20
>         /* Set-Cookie need additional processing */
> -        if (!ap_casecmpstr(stringname, "Set-Cookie")) {
> +        if (!strcasecmp(stringname, "Set-Cookie")) {
>             value =3D ap_proxy_cookie_reverse_map(r, dconf, value);
>         }
>         /* Location, Content-Location, URI and Destination need =
additional
>          * processing */
> -        else if (!ap_casecmpstr(stringname, "Location")
> -                 || !ap_casecmpstr(stringname, "Content-Location")
> -                 || !ap_casecmpstr(stringname, "URI")
> -                 || !ap_casecmpstr(stringname, "Destination"))
> +        else if (!strcasecmp(stringname, "Location")
> +                 || !strcasecmp(stringname, "Content-Location")
> +                 || !strcasecmp(stringname, "URI")
> +                 || !strcasecmp(stringname, "Destination"))
>         {
>           value =3D ap_proxy_location_reverse_map(r, dconf, value);
>         }
> @@ -654,7 +654,7 @@ static apr_status_t ajp_unmarshal_respon
>         apr_table_add(r->headers_out, stringname, value);
>=20
>         /* Content-type needs an additional handling */
> -        if (ap_casecmpstr(stringname, "Content-Type") =3D=3D 0) {
> +        if (strcasecmp(stringname, "Content-Type") =3D=3D 0) {
>              /* add corresponding filter */
>             ap_set_content_type(r, apr_pstrdup(r->pool, value));
>             ap_log_rerror(APLOG_MARK, APLOG_TRACE5, 0, r,
>=20
> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy.c?r=
ev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/proxy/mod_proxy.c (original)
> +++ httpd/httpd/trunk/modules/proxy/mod_proxy.c Mon Nov 23 16:28:36 =
2015
> @@ -1105,9 +1105,9 @@ static int proxy_handler(request_rec *r)
>                 if (strcmp(ents[i].scheme, "*") =3D=3D 0 ||
>                     (ents[i].use_regex &&
>                      ap_regexec(ents[i].regexp, url, 0, NULL, 0) =3D=3D =
0) ||
> -                    (p2 =3D=3D NULL && ap_casecmpstr(scheme, =
ents[i].scheme) =3D=3D 0) ||
> +                    (p2 =3D=3D NULL && strcasecmp(scheme, =
ents[i].scheme) =3D=3D 0) ||
>                     (p2 !=3D NULL &&
> -                    ap_casecmpstrn(url, ents[i].scheme,
> +                    strncasecmp(url, ents[i].scheme,
>                                 strlen(ents[i].scheme)) =3D=3D 0)) {
>=20
>                     /* handle the scheme */
> @@ -1593,7 +1593,7 @@ PROXY_DECLARE(const char *) ap_proxy_de_
>      * We could be passed a URL during the config stage that contains
>      * the UDS path... ignore it
>      */
> -    if (!ap_casecmpstrn(url, "unix:", 5) &&
> +    if (!strncasecmp(url, "unix:", 5) &&
>         ((ptr =3D ap_strchr_c(url, '|')) !=3D NULL)) {
>         /* move past the 'unix:...|' UDS path info */
>         const char *ret, *c;
>=20
> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_ajp.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_ajp=
.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/proxy/mod_proxy_ajp.c (original)
> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_ajp.c Mon Nov 23 =
16:28:36 2015
> @@ -35,7 +35,7 @@ static int proxy_ajp_canon(request_rec *
>     apr_port_t port, def_port;
>=20
>     /* ap_port_of_scheme() */
> -    if (ap_casecmpstrn(url, "ajp:", 4) =3D=3D 0) {
> +    if (strncasecmp(url, "ajp:", 4) =3D=3D 0) {
>         url +=3D 4;
>     }
>     else {
> @@ -243,7 +243,7 @@ static int ap_proxy_ajp_request(apr_pool
>     /* read the first bloc of data */
>     input_brigade =3D apr_brigade_create(p, =
r->connection->bucket_alloc);
>     tenc =3D apr_table_get(r->headers_in, "Transfer-Encoding");
> -    if (tenc && (ap_casecmpstr(tenc, "chunked") =3D=3D 0)) {
> +    if (tenc && (strcasecmp(tenc, "chunked") =3D=3D 0)) {
>         /* The AJP protocol does not want body data yet */
>         ap_log_rerror(APLOG_MARK, APLOG_DEBUG, 0, r, APLOGNO(00870) =
"request is chunked");
>     } else {
> @@ -746,7 +746,7 @@ static int proxy_ajp_handler(request_rec
>     apr_pool_t *p =3D r->pool;
>     apr_uri_t *uri;
>=20
> -    if (ap_casecmpstrn(url, "ajp:", 4) !=3D 0) {
> +    if (strncasecmp(url, "ajp:", 4) !=3D 0) {
>         ap_log_rerror(APLOG_MARK, APLOG_DEBUG, 0, r, APLOGNO(00894) =
"declining URL %s", url);
>         return DECLINED;
>     }
>=20
> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_bal=
ancer.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c (original)
> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_balancer.c Mon Nov 23 =
16:28:36 2015
> @@ -63,7 +63,7 @@ static int proxy_balancer_canon(request_
>     apr_port_t port =3D 0;
>=20
>     /* TODO: offset of BALANCER_PREFIX ?? */
> -    if (ap_casecmpstrn(url, "balancer:", 9) =3D=3D 0) {
> +    if (strncasecmp(url, "balancer:", 9) =3D=3D 0) {
>         url +=3D 9;
>     }
>     else {
> @@ -1380,7 +1380,7 @@ static int balancer_handler(request_rec
>                 ap_rprintf(r, "          =
<httpd:lbset>%d</httpd:lbset>\n",
>                            worker->s->lbset);
>                 /* End proxy_worker_stat */
> -                if (!ap_casecmpstr(worker->s->scheme, "ajp")) {
> +                if (!strcasecmp(worker->s->scheme, "ajp")) {
>                     ap_rputs("          <httpd:flushpackets>", r);
>                     switch (worker->s->flush_packets) {
>                         case flush_off:
>=20
> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_fcgi.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_fcg=
i.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/proxy/mod_proxy_fcgi.c (original)
> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_fcgi.c Mon Nov 23 =
16:28:36 2015
> @@ -39,7 +39,7 @@ static int proxy_fcgi_canon(request_rec
>     fcgi_req_config_t *rconf =3D NULL;
>     const char *pathinfo_type =3D NULL;
>=20
> -    if (ap_casecmpstrn(url, "fcgi:", 5) =3D=3D 0) {
> +    if (strncasecmp(url, "fcgi:", 5) =3D=3D 0) {
>         url +=3D 5;
>     }
>     else {
> @@ -878,7 +878,7 @@ static int proxy_fcgi_handler(request_re
>                   "url: %s proxyname: %s proxyport: %d",
>                  url, proxyname, proxyport);
>=20
> -    if (ap_casecmpstrn(url, "fcgi:", 5) !=3D 0) {
> +    if (strncasecmp(url, "fcgi:", 5) !=3D 0) {
>         ap_log_rerror(APLOG_MARK, APLOG_DEBUG, 0, r, APLOGNO(01077) =
"declining URL %s", url);
>         return DECLINED;
>     }
>=20
> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_fdpass.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_fdp=
ass.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/proxy/mod_proxy_fdpass.c (original)
> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_fdpass.c Mon Nov 23 =
16:28:36 2015
> @@ -32,7 +32,7 @@ static int proxy_fdpass_canon(request_re
> {
>     const char *path;
>=20
> -    if (ap_casecmpstrn(url, "fd://", 5) =3D=3D 0) {
> +    if (strncasecmp(url, "fd://", 5) =3D=3D 0) {
>         url +=3D 5;
>     }
>     else {
> @@ -132,7 +132,7 @@ static int proxy_fdpass_handler(request_
>     apr_socket_t *sock;
>     apr_socket_t *clientsock;
>=20
> -    if (ap_casecmpstrn(url, "fd://", 5) =3D=3D 0) {
> +    if (strncasecmp(url, "fd://", 5) =3D=3D 0) {
>         url +=3D 5;
>     }
>     else {
>=20
> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_ftp.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_ftp=
.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/proxy/mod_proxy_ftp.c (original)
> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_ftp.c Mon Nov 23 =
16:28:36 2015
> @@ -294,7 +294,7 @@ static int proxy_ftp_canon(request_rec *
>     apr_port_t port, def_port;
>=20
>     /* */
> -    if (ap_casecmpstrn(url, "ftp:", 4) =3D=3D 0) {
> +    if (strncasecmp(url, "ftp:", 4) =3D=3D 0) {
>         url +=3D 4;
>     }
>     else {
> @@ -494,7 +494,7 @@ static apr_status_t proxy_send_dir_filte
>         path =3D apr_uri_unparse(p, &f->r->parsed_uri, =
APR_URI_UNP_OMITSITEPART | APR_URI_UNP_OMITQUERY);
>=20
>         /* If path began with /%2f, change the basedir */
> -        if (ap_casecmpstrn(path, "/%2f", 4) =3D=3D 0) {
> +        if (strncasecmp(path, "/%2f", 4) =3D=3D 0) {
>             basedir =3D "/%2f";
>         }
>=20
> @@ -1011,7 +1011,7 @@ static int proxy_ftp_handler(request_rec
>                       proxyhost);
>         return DECLINED;        /* proxy connections are via HTTP */
>     }
> -    if (ap_casecmpstrn(url, "ftp:", 4)) {
> +    if (strncasecmp(url, "ftp:", 4)) {
>         ap_log_rerror(APLOG_MARK, APLOG_TRACE3, 0, r,
>                       "declining URL %s - not ftp:", url);
>         return DECLINED;        /* only interested in FTP */
> @@ -1082,7 +1082,7 @@ static int proxy_ftp_handler(request_rec
>      * still smaller that the URL is logged regularly.
>      */
>     if ((password =3D apr_table_get(r->headers_in, "Authorization")) =
!=3D NULL
> -        && ap_casecmpstr(ap_getword(r->pool, &password, ' '), =
"Basic") =3D=3D 0
> +        && strcasecmp(ap_getword(r->pool, &password, ' '), "Basic") =
=3D=3D 0
>         && (password =3D ap_pbase64decode(r->pool, password))[0] !=3D =
':') {
>         /* Check the decoded string for special characters. */
>         if (!ftp_check_string(password)) {
> @@ -1328,7 +1328,7 @@ static int proxy_ftp_handler(request_rec
>     /* Special handling for leading "%2f": this enforces a "cwd /"
>      * out of the $HOME directory which was the starting point after =
login
>      */
> -    if (ap_casecmpstrn(path, "%2f", 3) =3D=3D 0) {
> +    if (strncasecmp(path, "%2f", 3) =3D=3D 0) {
>         path +=3D 3;
>         while (*path =3D=3D '/') /* skip leading '/' (after root %2f) =
*/
>             ++path;
>=20
> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_http.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_htt=
p.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/proxy/mod_proxy_http.c (original)
> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_http.c Mon Nov 23 =
16:28:36 2015
> @@ -43,11 +43,11 @@ static int proxy_http_canon(request_rec
>     apr_port_t port, def_port;
>=20
>     /* ap_port_of_scheme() */
> -    if (ap_casecmpstrn(url, "http:", 5) =3D=3D 0) {
> +    if (strncasecmp(url, "http:", 5) =3D=3D 0) {
>         url +=3D 5;
>         scheme =3D "http";
>     }
> -    else if (ap_casecmpstrn(url, "https:", 6) =3D=3D 0) {
> +    else if (strncasecmp(url, "https:", 6) =3D=3D 0) {
>         url +=3D 6;
>         scheme =3D "https";
>     }
> @@ -792,7 +792,7 @@ static int ap_proxy_http_prefetch(apr_po
>      * encoding has been done by the extensions' handler, and
>      * do not modify add_te_chunked's logic
>      */
> -    if (*old_te_val && ap_casecmpstr(*old_te_val, "chunked") !=3D 0) =
{
> +    if (*old_te_val && strcasecmp(*old_te_val, "chunked") !=3D 0) {
>         ap_log_rerror(APLOG_MARK, APLOG_ERR, 0, r, APLOGNO(01093)
>                       "%s Transfer-Encoding is not supported", =
*old_te_val);
>         return HTTP_INTERNAL_SERVER_ERROR;
> @@ -1113,14 +1113,14 @@ static void process_proxy_header(request
>     };
>     int i;
>     for (i =3D 0; date_hdrs[i]; ++i) {
> -        if (!ap_casecmpstr(date_hdrs[i], key)) {
> +        if (!strcasecmp(date_hdrs[i], key)) {
>             apr_table_add(r->headers_out, key,
>                           date_canon(r->pool, value));
>             return;
>         }
>     }
>     for (i =3D 0; transform_hdrs[i].name; ++i) {
> -        if (!ap_casecmpstr(transform_hdrs[i].name, key)) {
> +        if (!strcasecmp(transform_hdrs[i].name, key)) {
>             apr_table_add(r->headers_out, key,
>                           (*transform_hdrs[i].func)(r, c, value));
>             return;
>=20
> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_scgi.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_scg=
i.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/proxy/mod_proxy_scgi.c (original)
> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_scgi.c Mon Nov 23 =
16:28:36 2015
> @@ -180,7 +180,7 @@ static int scgi_canon(request_rec *r, ch
>     const char *err, *path;
>     apr_port_t port, def_port;
>=20
> -    if (ap_casecmpstrn(url, SCHEME "://", sizeof(SCHEME) + 2)) {
> +    if (strncasecmp(url, SCHEME "://", sizeof(SCHEME) + 2)) {
>         return DECLINED;
>     }
>     url +=3D sizeof(SCHEME); /* Keep slashes */
> @@ -434,7 +434,7 @@ static int pass_response(request_rec *r,
>         if (location && *location =3D=3D '/') {
>             scgi_request_config *req_conf =3D apr_palloc(r->pool,
>                                                        =
sizeof(*req_conf));
> -            if (ap_casecmpstr(location_header, "Location")) {
> +            if (strcasecmp(location_header, "Location")) {
>                 if (err) {
>                     apr_table_unset(r->err_headers_out, =
location_header);
>                 }
> @@ -533,7 +533,7 @@ static int scgi_handler(request_rec *r,
>     apr_uri_t *uri =3D apr_palloc(r->pool, sizeof(*uri));
>     char dummy;
>=20
> -    if (ap_casecmpstrn(url, SCHEME "://", sizeof(SCHEME) + 2)) {
> +    if (strncasecmp(url, SCHEME "://", sizeof(SCHEME) + 2)) {
>         ap_log_rerror(APLOG_MARK, APLOG_DEBUG, 0, r, APLOGNO(00865)
>                       "declining URL %s", url);
>         return DECLINED;
>=20
> Modified: httpd/httpd/trunk/modules/proxy/mod_proxy_wstunnel.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_wst=
unnel.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/proxy/mod_proxy_wstunnel.c (original)
> +++ httpd/httpd/trunk/modules/proxy/mod_proxy_wstunnel.c Mon Nov 23 =
16:28:36 2015
> @@ -211,12 +211,12 @@ static int proxy_wstunnel_canon(request_
>     apr_port_t port, def_port;
>=20
>     /* ap_port_of_scheme() */
> -    if (ap_casecmpstrn(url, "ws:", 3) =3D=3D 0) {
> +    if (strncasecmp(url, "ws:", 3) =3D=3D 0) {
>         url +=3D 3;
>         scheme =3D "ws:";
>         def_port =3D apr_uri_port_of_scheme("http");
>     }
> -    else if (ap_casecmpstrn(url, "wss:", 4) =3D=3D 0) {
> +    else if (strncasecmp(url, "wss:", 4) =3D=3D 0) {
>         url +=3D 4;
>         scheme =3D "wss:";
>         def_port =3D apr_uri_port_of_scheme("https");
> @@ -474,11 +474,11 @@ static int proxy_wstunnel_handler(reques
>     apr_uri_t *uri;
>     int is_ssl =3D 0;
>=20
> -    if (ap_casecmpstrn(url, "wss:", 4) =3D=3D 0) {
> +    if (strncasecmp(url, "wss:", 4) =3D=3D 0) {
>         scheme =3D "WSS";
>         is_ssl =3D 1;
>     }
> -    else if (ap_casecmpstrn(url, "ws:", 3) =3D=3D 0) {
> +    else if (strncasecmp(url, "ws:", 3) =3D=3D 0) {
>         scheme =3D "WS";
>     }
>     else {
> @@ -487,7 +487,7 @@ static int proxy_wstunnel_handler(reques
>     }
>=20
>     upgrade =3D apr_table_get(r->headers_in, "Upgrade");
> -    if (!upgrade || ap_casecmpstr(upgrade, "WebSocket") !=3D 0) {
> +    if (!upgrade || strcasecmp(upgrade, "WebSocket") !=3D 0) {
>         ap_log_rerror(APLOG_MARK, APLOG_DEBUG, 0, r, APLOGNO(02900)
>                       "declining URL %s  (not WebSocket)", url);
>         return DECLINED;
>=20
> Modified: httpd/httpd/trunk/modules/proxy/mod_serf.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/mod_serf.c?re=
v=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/proxy/mod_serf.c (original)
> +++ httpd/httpd/trunk/modules/proxy/mod_serf.c Mon Nov 23 16:28:36 =
2015
> @@ -151,40 +151,40 @@ static int copy_headers_in(void *vbaton,
>     switch (key[0]) {
>     case 'a':
>     case 'A':
> -        if (ap_casecmpstr("Accept-Encoding", key) =3D=3D 0) {
> +        if (strcasecmp("Accept-Encoding", key) =3D=3D 0) {
>             return 0;
>         }
>         break;
>     case 'c':
>     case 'C':
> -        if (ap_casecmpstr("Connection", key) =3D=3D 0) {
> +        if (strcasecmp("Connection", key) =3D=3D 0) {
>             return 0;
>         }
>         break;
>     case 'h':
>     case 'H':
> -        if (ap_casecmpstr("Host", key) =3D=3D 0) {
> +        if (strcasecmp("Host", key) =3D=3D 0) {
>             return 0;
>         }
>         break;
>     case 'k':
>     case 'K':
> -        if (ap_casecmpstr("Keep-Alive", key) =3D=3D 0) {
> +        if (strcasecmp("Keep-Alive", key) =3D=3D 0) {
>             return 0;
>         }
>         break;
>     case 't':
>     case 'T':
> -        if (ap_casecmpstr("TE", key) =3D=3D 0) {
> +        if (strcasecmp("TE", key) =3D=3D 0) {
>             return 0;
>         }
> -        if (ap_casecmpstr("Trailer", key) =3D=3D 0) {
> +        if (strcasecmp("Trailer", key) =3D=3D 0) {
>             return 0;
>         }
>         break;
>     case 'u':
>     case 'U':
> -        if (ap_casecmpstr("Upgrade", key) =3D=3D 0) {
> +        if (strcasecmp("Upgrade", key) =3D=3D 0) {
>             return 0;
>         }
>         break;
> @@ -205,27 +205,27 @@ static int copy_headers_out(void *vbaton
>     switch (key[0]) {
>     case 'c':
>     case 'C':
> -        if (ap_casecmpstr("Content-Type", key) =3D=3D 0) {
> +        if (strcasecmp("Content-Type", key) =3D=3D 0) {
>             ap_set_content_type(ctx->r, value);
>             done =3D 1;
>             break;
>         }
> -        else if (ap_casecmpstr("Connection", key) =3D=3D 0) {
> +        else if (strcasecmp("Connection", key) =3D=3D 0) {
>             done =3D 1;
>             break;
>         }
> -        else if (ap_casecmpstr("Content-Encoding", key) =3D=3D 0) {
> +        else if (strcasecmp("Content-Encoding", key) =3D=3D 0) {
>             done =3D 1;
>             break;
>         }
> -        else if (ap_casecmpstr("Content-Length", key) =3D=3D 0) {
> +        else if (strcasecmp("Content-Length", key) =3D=3D 0) {
>             done =3D 1;
>             break;
>         }
>         break;
>     case 't':
>     case 'T':
> -        if (ap_casecmpstr("Transfer-Encoding", key) =3D=3D 0) {
> +        if (strcasecmp("Transfer-Encoding", key) =3D=3D 0) {
>             done =3D 1;
>             break;
>         }
> @@ -512,7 +512,7 @@ static int drive_serf(request_rec *r, se
>     baton->done_headers =3D 0;
>     baton->keep_reading =3D 1;
>=20
> -    if (ap_casecmpstr(conf->url.scheme, "https") =3D=3D 0) {
> +    if (strcasecmp(conf->url.scheme, "https") =3D=3D 0) {
>         baton->want_ssl =3D 1;
>     }
>     else {
>=20
> Modified: httpd/httpd/trunk/modules/proxy/proxy_util.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?=
rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/proxy/proxy_util.c (original)
> +++ httpd/httpd/trunk/modules/proxy/proxy_util.c Mon Nov 23 16:28:36 =
2015
> @@ -1074,7 +1074,7 @@ PROXY_DECLARE(int) ap_proxy_valid_balanc
> {
>     if (!i)
>         i =3D sizeof(BALANCER_PREFIX)-1;
> -    return (!ap_casecmpstrn(name, BALANCER_PREFIX, i));
> +    return (!strncasecmp(name, BALANCER_PREFIX, i));
> }
>=20
>=20
> @@ -1677,7 +1677,7 @@ PROXY_DECLARE(char *) ap_proxy_define_wo
>     if (ptr) {
>         *ptr =3D '\0';
>         rv =3D apr_uri_parse(p, url, &urisock);
> -        if (rv =3D=3D APR_SUCCESS && !ap_casecmpstr(urisock.scheme, =
"unix")) {
> +        if (rv =3D=3D APR_SUCCESS && !strcasecmp(urisock.scheme, =
"unix")) {
>             sockpath =3D ap_runtime_dir_relative(p, urisock.path);;
>             url =3D ptr+1;    /* so we get the scheme for the uds */
>         }
> @@ -3330,7 +3330,7 @@ static int ap_proxy_clear_connection(req
>             ap_log_rerror(APLOG_MARK, APLOG_DEBUG, 0, r, =
APLOGNO(02807)
>                           "Removing header '%s' listed in Connection =
header",
>                           name);
> -            if (!ap_casecmpstr(name, "close")) {
> +            if (!strcasecmp(name, "close")) {
>                 closed =3D 1;
>             }
>             apr_table_unset(headers, name);
> @@ -3494,7 +3494,7 @@ PROXY_DECLARE(int) ap_proxy_create_hdrbr
>=20
>         /* Add the Expect header if not already there. */
>         if (((val =3D apr_table_get(r->headers_in, "Expect")) =3D=3D =
NULL)
> -                || (ap_casecmpstr(val, "100-Continue") !=3D 0 /* fast =
path */
> +                || (strcasecmp(val, "100-Continue") !=3D 0 /* fast =
path */
>                     && !ap_find_token(r->pool, val, "100-Continue"))) =
{
>             apr_table_mergen(r->headers_in, "Expect", "100-Continue");
>         }
> @@ -3559,15 +3559,15 @@ PROXY_DECLARE(int) ap_proxy_create_hdrbr
>             || headers_in[counter].val =3D=3D NULL
>=20
>             /* Already sent */
> -            || !ap_casecmpstr(headers_in[counter].key, "Host")
> +            || !strcasecmp(headers_in[counter].key, "Host")
>=20
>             /* Clear out hop-by-hop request headers not to send
>              * RFC2616 13.5.1 says we should strip these headers
>              */
> -            || !ap_casecmpstr(headers_in[counter].key, "Keep-Alive")
> -            || !ap_casecmpstr(headers_in[counter].key, "TE")
> -            || !ap_casecmpstr(headers_in[counter].key, "Trailer")
> -            || !ap_casecmpstr(headers_in[counter].key, "Upgrade")
> +            || !strcasecmp(headers_in[counter].key, "Keep-Alive")
> +            || !strcasecmp(headers_in[counter].key, "TE")
> +            || !strcasecmp(headers_in[counter].key, "Trailer")
> +            || !strcasecmp(headers_in[counter].key, "Upgrade")
>=20
>             ) {
>             continue;
> @@ -3577,7 +3577,7 @@ PROXY_DECLARE(int) ap_proxy_create_hdrbr
>          * If we have used it then MAYBE: RFC2616 says we MAY =
propagate it.
>          * So let's make it configurable by env.
>          */
> -        if =
(!ap_casecmpstr(headers_in[counter].key,"Proxy-Authorization")) {
> +        if =
(!strcasecmp(headers_in[counter].key,"Proxy-Authorization")) {
>             if (r->user !=3D NULL) { /* we've authenticated */
>                 if (!apr_table_get(r->subprocess_env, =
"Proxy-Chain-Auth")) {
>                     continue;
> @@ -3587,22 +3587,22 @@ PROXY_DECLARE(int) ap_proxy_create_hdrbr
>=20
>         /* Skip Transfer-Encoding and Content-Length for now.
>          */
> -        if (!ap_casecmpstr(headers_in[counter].key, =
"Transfer-Encoding")) {
> +        if (!strcasecmp(headers_in[counter].key, =
"Transfer-Encoding")) {
>             *old_te_val =3D headers_in[counter].val;
>             continue;
>         }
> -        if (!ap_casecmpstr(headers_in[counter].key, =
"Content-Length")) {
> +        if (!strcasecmp(headers_in[counter].key, "Content-Length")) {
>             *old_cl_val =3D headers_in[counter].val;
>             continue;
>         }
>=20
>         /* for sub-requests, ignore freshness/expiry headers */
>         if (r->main) {
> -            if (   !ap_casecmpstr(headers_in[counter].key, =
"If-Match")
> -                || !ap_casecmpstr(headers_in[counter].key, =
"If-Modified-Since")
> -                || !ap_casecmpstr(headers_in[counter].key, =
"If-Range")
> -                || !ap_casecmpstr(headers_in[counter].key, =
"If-Unmodified-Since")
> -                || !ap_casecmpstr(headers_in[counter].key, =
"If-None-Match")) {
> +            if (   !strcasecmp(headers_in[counter].key, "If-Match")
> +                || !strcasecmp(headers_in[counter].key, =
"If-Modified-Since")
> +                || !strcasecmp(headers_in[counter].key, "If-Range")
> +                || !strcasecmp(headers_in[counter].key, =
"If-Unmodified-Since")
> +                || !strcasecmp(headers_in[counter].key, =
"If-None-Match")) {
>                 continue;
>             }
>         }
> @@ -3687,7 +3687,7 @@ PROXY_DECLARE(apr_port_t) ap_proxy_port_
>         } else {
>             proxy_schemes_t *pscheme;
>             for (pscheme =3D pschemes; pscheme->name !=3D NULL; =
++pscheme) {
> -                if (ap_casecmpstr(scheme, pscheme->name) =3D=3D 0) {
> +                if (strcasecmp(scheme, pscheme->name) =3D=3D 0) {
>                     return pscheme->default_port;
>                 }
>             }
>=20
> Modified: httpd/httpd/trunk/modules/slotmem/mod_slotmem_shm.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/slotmem/mod_slotmem=
_shm.c?rev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/slotmem/mod_slotmem_shm.c (original)
> +++ httpd/httpd/trunk/modules/slotmem/mod_slotmem_shm.c Mon Nov 23 =
16:28:36 2015
> @@ -111,7 +111,7 @@ static int slotmem_filenames(apr_pool_t
> {
>     const char *fname =3D NULL, *pname =3D NULL;
>=20
> -    if (slotname && *slotname && ap_casecmpstr(slotname, "none") !=3D =
0) {
> +    if (slotname && *slotname && strcasecmp(slotname, "none") !=3D 0) =
{
>         if (slotname[0] !=3D '/') {
> #if !SLOTMEM_UNLINK_SEMANTIC
>             /* Each generation needs its own file name. */
>=20
> Modified: httpd/httpd/trunk/modules/test/mod_policy.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/test/mod_policy.c?r=
ev=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/test/mod_policy.c (original)
> +++ httpd/httpd/trunk/modules/test/mod_policy.c Mon Nov 23 16:28:36 =
2015
> @@ -544,7 +544,12 @@ static apr_status_t policy_nocache_out_f
>             char *header =3D apr_pstrdup(r->pool, pragma_header);
>             const char *token =3D apr_strtok(header, ", ", &last);
>             while (token) {
> -                if (!ap_casecmpstr(token, "no-cache")) {
> +                /* handle most common quickest case... */
> +                if (!strcmp(token, "no-cache")) {
> +                    fail =3D 1;
> +                }
> +                /* ...then try slowest case */
> +                else if (!strcasecmp(token, "no-cache")) {
>                     fail =3D 1;
>                 }
>                 token =3D apr_strtok(NULL, ", ", &last);
> @@ -558,7 +563,15 @@ static apr_status_t policy_nocache_out_f
>                 switch (token[0]) {
>                 case 'n':
>                 case 'N': {
> -                    if (!ap_casecmpstrn(token, "no-cache", 8)) {
> +                    /* handle most common quickest cases... */
> +                    if (!strcmp(token, "no-cache")) {
> +                        fail =3D 1;
> +                    }
> +                    else if (!strcmp(token, "no-store")) {
> +                        fail =3D 1;
> +                    }
> +                    /* ...then try slowest cases */
> +                    else if (!strncasecmp(token, "no-cache", 8)) {
>                         if (token[8] =3D=3D '=3D') {
>                         }
>                         else if (!token[8]) {
> @@ -566,14 +579,19 @@ static apr_status_t policy_nocache_out_f
>                         }
>                         break;
>                     }
> -                    else if (!ap_casecmpstr(token, "no-store")) {
> +                    else if (!strcasecmp(token, "no-store")) {
>                         fail =3D 1;
>                     }
>                     break;
>                 }
>                 case 'p':
>                 case 'P': {
> -                    if (!ap_casecmpstrn(token, "private", 7)) {
> +                    /* handle most common quickest cases... */
> +                    if (!strcmp(token, "private")) {
> +                        fail =3D 1;
> +                    }
> +                    /* ...then try slowest cases */
> +                    else if (!strncasecmp(token, "private", 7)) {
>                         if (token[7] =3D=3D '=3D') {
>                         }
>                         else if (!token[7]) {
> @@ -644,7 +662,13 @@ static apr_status_t policy_maxage_out_fi
>                 switch (token[0]) {
>                 case 'm':
>                 case 'M': {
> -                    if (!ap_casecmpstrn(token, "max-age", 7)) {
> +                    /* handle most common quickest cases... */
> +                    if (!strncmp(token, "max-age", 7)) {
> +                        max_age =3D 1;
> +                        max_age_value =3D apr_atoi64(token + 8);
> +                    }
> +                    /* ...then try slowest cases */
> +                    else if (!strncasecmp(token, "max-age", 7)) {
>                         if (token[7] =3D=3D '=3D') {
>                             max_age =3D 1;
>                             max_age_value =3D apr_atoi64(token + 8);
> @@ -655,7 +679,14 @@ static apr_status_t policy_maxage_out_fi
>                 }
>                 case 's':
>                 case 'S': {
> -                    if (!ap_casecmpstrn(token, "s-maxage", 8)) {
> +                    if (!strncmp(token, "s-maxage", 8)) {
> +                        if (token[8] =3D=3D '=3D') {
> +                            s_maxage =3D 1;
> +                            s_maxage_value =3D apr_atoi64(token + 9);
> +                        }
> +                        break;
> +                    }
> +                    else if (!strncasecmp(token, "s-maxage", 8)) {
>                         if (token[8] =3D=3D '=3D') {
>                             s_maxage =3D 1;
>                             s_maxage_value =3D apr_atoi64(token + 9);
>=20
> Modified: httpd/httpd/trunk/server/mpm_unix.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/server/mpm_unix.c?rev=3D171=
5869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/server/mpm_unix.c (original)
> +++ httpd/httpd/trunk/server/mpm_unix.c Mon Nov 23 16:28:36 2015
> @@ -627,7 +627,7 @@ static apr_status_t dummy_connection(ap_
>      * expensive to do correctly (performing a complete SSL handshake)
>      * or cause log spam by doing incorrectly (simply sending EOF). */
>     lp =3D ap_listeners;
> -    while (lp && lp->protocol && ap_casecmpstr(lp->protocol, "http") =
!=3D 0) {
> +    while (lp && lp->protocol && strcasecmp(lp->protocol, "http") !=3D =
0) {
>         lp =3D lp->next;
>     }
>     if (!lp) {
> @@ -675,7 +675,7 @@ static apr_status_t dummy_connection(ap_
>         return rv;
>     }
>=20
> -    if (lp->protocol && ap_casecmpstr(lp->protocol, "https") =3D=3D =
0) {
> +    if (lp->protocol && strcasecmp(lp->protocol, "https") =3D=3D 0) {
>         /* Send a TLS 1.0 close_notify alert.  This is perhaps the
>          * "least wrong" way to open and cleanly terminate an SSL
>          * connection.  It should "work" without noisy error logs if
>=20
> Modified: httpd/httpd/trunk/server/protocol.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/server/protocol.c?rev=3D171=
5869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/server/protocol.c (original)
> +++ httpd/httpd/trunk/server/protocol.c Mon Nov 23 16:28:36 2015
> @@ -526,7 +526,7 @@ AP_CORE_DECLARE(void) ap_parse_uri(reque
>     if (status =3D=3D APR_SUCCESS) {
>         /* if it has a scheme we may need to do absoluteURI vhost =
stuff */
>         if (r->parsed_uri.scheme
> -            && !ap_casecmpstr(r->parsed_uri.scheme, =
ap_http_scheme(r))) {
> +            && !strcasecmp(r->parsed_uri.scheme, ap_http_scheme(r))) =
{
>             r->hostname =3D r->parsed_uri.hostname;
>         }
>         else if (r->method_number =3D=3D M_CONNECT) {
> @@ -692,7 +692,7 @@ static int read_request_line(request_rec
>             }
>         }
>         if (3 =3D=3D sscanf(r->protocol, "%4s/%u.%u", http, &major, =
&minor)
> -            && (ap_casecmpstr("http", http) =3D=3D 0)
> +            && (strcasecmp("http", http) =3D=3D 0)
>             && (minor < HTTP_VERSION(1, 0)) ) { /* don't allow =
HTTP/0.1000 */
>             r->proto_num =3D HTTP_VERSION(major, minor);
>         }
> @@ -1133,7 +1133,7 @@ request_rec *ap_read_request(conn_rec *c
>              * the final encoding ...; the server MUST respond with =
the 400
>              * (Bad Request) status code and then close the =
connection".
>              */
> -            if (!(ap_casecmpstr(tenc, "chunked") =3D=3D 0 /* fast =
path */
> +            if (!(strcasecmp(tenc, "chunked") =3D=3D 0 /* fast path =
*/
>                     || ap_find_last_token(r->pool, tenc, "chunked"))) =
{
>                 ap_log_rerror(APLOG_MARK, APLOG_INFO, 0, r, =
APLOGNO(02539)
>                               "client sent unknown Transfer-Encoding "
> @@ -1238,7 +1238,7 @@ request_rec *ap_read_request(conn_rec *c
>          * unfortunately, to signal a poor man's mandatory extension =
that
>          * the server must understand or return 417 Expectation =
Failed.
>          */
> -        if (ap_casecmpstr(expect, "100-continue") =3D=3D 0) {
> +        if (strcasecmp(expect, "100-continue") =3D=3D 0) {
>             r->expecting_100 =3D 1;
>         }
>         else {
> @@ -1418,7 +1418,7 @@ AP_DECLARE(int) ap_get_basic_auth_pw(req
>                                               : "Authorization");
>     const char *t;
>=20
> -    if (!(t =3D ap_auth_type(r)) || ap_casecmpstr(t, "Basic"))
> +    if (!(t =3D ap_auth_type(r)) || strcasecmp(t, "Basic"))
>         return DECLINED;
>=20
>     if (!ap_auth_name(r)) {
> @@ -1432,7 +1432,7 @@ AP_DECLARE(int) ap_get_basic_auth_pw(req
>         return HTTP_UNAUTHORIZED;
>     }
>=20
> -    if (ap_casecmpstr(ap_getword(r->pool, &auth_line, ' '), "Basic")) =
{
> +    if (strcasecmp(ap_getword(r->pool, &auth_line, ' '), "Basic")) {
>         /* Client tried to authenticate using wrong auth scheme */
>         ap_log_rerror(APLOG_MARK, APLOG_INFO, 0, r, APLOGNO(00573)
>                       "client used wrong authentication scheme: %s", =
r->uri);
>=20
> Modified: httpd/httpd/trunk/server/util.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/server/util.c?rev=3D1715869=
&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/server/util.c (original)
> +++ httpd/httpd/trunk/server/util.c Mon Nov 23 16:28:36 2015
> @@ -1609,7 +1609,7 @@ AP_DECLARE(int) ap_find_token(apr_pool_t
>         while (*s && !TEST_CHAR(*s, T_HTTP_TOKEN_STOP)) {
>             ++s;
>         }
> -        if (!ap_casecmpstrn((const char *)start_token, (const char =
*)tok,
> +        if (!strncasecmp((const char *)start_token, (const char =
*)tok,
>                          s - start_token)) {
>             return 1;
>         }
> @@ -1636,7 +1636,7 @@ AP_DECLARE(int) ap_find_last_token(apr_p
>         (lidx > 0 && !(apr_isspace(line[lidx - 1]) || line[lidx - 1] =
=3D=3D ',')))
>         return 0;
>=20
> -    return (ap_casecmpstrn(&line[lidx], tok, tlen) =3D=3D 0);
> +    return (strncasecmp(&line[lidx], tok, tlen) =3D=3D 0);
> }
>=20
> AP_DECLARE(char *) ap_escape_shell_cmd(apr_pool_t *p, const char *str)
> @@ -2603,7 +2603,7 @@ AP_DECLARE(int) ap_parse_form_data(reque
>=20
>     /* sanity check - we only support forms for now */
>     ct =3D apr_table_get(r->headers_in, "Content-Type");
> -    if (!ct || ap_casecmpstrn("application/x-www-form-urlencoded", =
ct, 33)) {
> +    if (!ct || strncasecmp("application/x-www-form-urlencoded", ct, =
33)) {
>         return ap_discard_request_body(r);
>     }
>=20
>=20
> Modified: httpd/httpd/trunk/server/util_expr_eval.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/server/util_expr_eval.c?rev=
=3D1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/server/util_expr_eval.c (original)
> +++ httpd/httpd/trunk/server/util_expr_eval.c Mon Nov 23 16:28:36 2015
> @@ -1710,13 +1710,13 @@ static int op_T(ap_expr_eval_ctx_t *ctx,
>         return FALSE;
>     case 'o':
>     case 'O':
> -        return ap_casecmpstr(arg, "off") =3D=3D 0 ? FALSE : TRUE;
> +        return strcasecmp(arg, "off") =3D=3D 0 ? FALSE : TRUE;
>     case 'n':
>     case 'N':
> -        return ap_casecmpstr(arg, "no") =3D=3D 0 ? FALSE : TRUE;
> +        return strcasecmp(arg, "no") =3D=3D 0 ? FALSE : TRUE;
>     case 'f':
>     case 'F':
> -        return ap_casecmpstr(arg, "false") =3D=3D 0 ? FALSE : TRUE;
> +        return strcasecmp(arg, "false") =3D=3D 0 ? FALSE : TRUE;
>     case '0':
>         return arg[1] =3D=3D '\0' ? FALSE : TRUE;
>     default:
> @@ -1824,7 +1824,7 @@ static int core_expr_lookup(ap_expr_look
>             while (prov->func) {
>                 const char **name =3D prov->names;
>                 while (*name) {
> -                    if (ap_casecmpstr(*name, parms->name) =3D=3D 0) {
> +                    if (strcasecmp(*name, parms->name) =3D=3D 0) {
>                         *parms->func =3D prov->func;
>                         *parms->data =3D name;
>                         return OK;
> @@ -1857,7 +1857,7 @@ static int core_expr_lookup(ap_expr_look
>                 if (parms->type =3D=3D AP_EXPR_FUNC_OP_UNARY)
>                     match =3D !strcmp(prov->name, parms->name);
>                 else
> -                    match =3D !ap_casecmpstr(prov->name, =
parms->name);
> +                    match =3D !strcasecmp(prov->name, parms->name);
>                 if (match) {
>                     if ((parms->flags & AP_EXPR_FLAG_RESTRICTED)
>                         && prov->restricted) {
>=20
> Modified: httpd/httpd/trunk/server/util_script.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/server/util_script.c?rev=3D=
1715869&r1=3D1715868&r2=3D1715869&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/server/util_script.c (original)
> +++ httpd/httpd/trunk/server/util_script.c Mon Nov 23 16:28:36 2015
> @@ -180,10 +180,10 @@ AP_DECLARE(void) ap_add_common_vars(requ
>          * for no particular reason.
>          */
>=20
> -        if (!ap_casecmpstr(hdrs[i].key, "Content-type")) {
> +        if (!strcasecmp(hdrs[i].key, "Content-type")) {
>             apr_table_addn(e, "CONTENT_TYPE", hdrs[i].val);
>         }
> -        else if (!ap_casecmpstr(hdrs[i].key, "Content-length")) {
> +        else if (!strcasecmp(hdrs[i].key, "Content-length")) {
>             apr_table_addn(e, "CONTENT_LENGTH", hdrs[i].val);
>         }
>         /*
> @@ -192,8 +192,8 @@ AP_DECLARE(void) ap_add_common_vars(requ
>          * in the environment with "ps -e".  But, if you must...
>          */
> #ifndef SECURITY_HOLE_PASS_AUTHORIZATION
> -        else if (!ap_casecmpstr(hdrs[i].key, "Authorization")
> -                 || !ap_casecmpstr(hdrs[i].key, =
"Proxy-Authorization")) {
> +        else if (!strcasecmp(hdrs[i].key, "Authorization")
> +                 || !strcasecmp(hdrs[i].key, "Proxy-Authorization")) =
{
>             if (conf->cgi_pass_auth =3D=3D AP_CGI_PASS_AUTH_ON) {
>                 add_unless_null(e, http2env(r, hdrs[i].key), =
hdrs[i].val);
>             }
> @@ -597,7 +597,7 @@ AP_DECLARE(int) ap_scan_script_header_er
>             ++l;
>         }
>=20
> -        if (!ap_casecmpstr(w, "Content-type")) {
> +        if (!strcasecmp(w, "Content-type")) {
>             char *tmp;
>=20
>             /* Nuke trailing whitespace */
> @@ -615,7 +615,7 @@ AP_DECLARE(int) ap_scan_script_header_er
>          * If the script returned a specific status, that's what
>          * we'll use - otherwise we assume 200 OK.
>          */
> -        else if (!ap_casecmpstr(w, "Status")) {
> +        else if (!strcasecmp(w, "Status")) {
>             r->status =3D cgi_status =3D atoi(l);
>             if (!ap_is_HTTP_VALID_RESPONSE(cgi_status))
>                 ap_log_rerror(SCRIPT_LOG_MARK, =
APLOG_ERR|APLOG_TOCLIENT, 0, r,
> @@ -628,30 +628,30 @@ AP_DECLARE(int) ap_scan_script_header_er
>                                  apr_filepath_name_get(r->filename), =
l);
>             r->status_line =3D apr_pstrdup(r->pool, l);
>         }
> -        else if (!ap_casecmpstr(w, "Location")) {
> +        else if (!strcasecmp(w, "Location")) {
>             apr_table_set(r->headers_out, w, l);
>         }
> -        else if (!ap_casecmpstr(w, "Content-Length")) {
> +        else if (!strcasecmp(w, "Content-Length")) {
>             apr_table_set(r->headers_out, w, l);
>         }
> -        else if (!ap_casecmpstr(w, "Content-Range")) {
> +        else if (!strcasecmp(w, "Content-Range")) {
>             apr_table_set(r->headers_out, w, l);
>         }
> -        else if (!ap_casecmpstr(w, "Transfer-Encoding")) {
> +        else if (!strcasecmp(w, "Transfer-Encoding")) {
>             apr_table_set(r->headers_out, w, l);
>         }
> -        else if (!ap_casecmpstr(w, "ETag")) {
> +        else if (!strcasecmp(w, "ETag")) {
>             apr_table_set(r->headers_out, w, l);
>         }
>         /*
>          * If the script gave us a Last-Modified header, we can't just
>          * pass it on blindly because of restrictions on future =
values.
>          */
> -        else if (!ap_casecmpstr(w, "Last-Modified")) {
> +        else if (!strcasecmp(w, "Last-Modified")) {
>             ap_update_mtime(r, apr_date_parse_http(l));
>             ap_set_last_modified(r);
>         }
> -        else if (!ap_casecmpstr(w, "Set-Cookie")) {
> +        else if (!strcasecmp(w, "Set-Cookie")) {
>             apr_table_add(cookie_table, w, l);
>         }
>         else {
>=20
>=20



From dev-return-84695-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 12:37:47 2015
Return-Path: <dev-return-84695-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B290D18661
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 12:37:47 +0000 (UTC)
Received: (qmail 11050 invoked by uid 500); 24 Nov 2015 12:37:47 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 10978 invoked by uid 500); 24 Nov 2015 12:37:47 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 10964 invoked by uid 99); 24 Nov 2015 12:37:46 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 12:37:46 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 863C5180994
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 12:37:46 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id I1oDHohFZtS7 for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 12:37:38 +0000 (UTC)
Received: from resqmta-po-10v.sys.comcast.net (resqmta-po-10v.sys.comcast.net [96.114.154.169])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id AE14A441C0
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 12:37:37 +0000 (UTC)
Received: from resomta-po-08v.sys.comcast.net ([96.114.154.232])
	by resqmta-po-10v.sys.comcast.net with comcast
	id lQdd1r001516pyw01Qddgj; Tue, 24 Nov 2015 12:37:37 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-08v.sys.comcast.net with comcast
	id lQcc1r0042U0RYt01Qdc9j; Tue, 24 Nov 2015 12:37:37 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715789 - in /httpd/httpd/trunk: modules/cache/ modules/filters/ modules/generators/ modules/http/ modules/http2/ modules/loggers/ modules/mappers/ modules/metadata/ modules/proxy/ modules/slotmem/ modules/test/ server/
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CAKQ1sVPS9=gE6Hc2jVfmsxZd=8sdohd-KXyxTPR+pES6C++KmA@mail.gmail.com>
Date: Tue, 24 Nov 2015 07:37:36 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <452D7C19-557F-4CC4-ACD0-172549A9757D@jaguNET.com>
References: <20151123123311.15DEB3A03E8@svn01-us-west.apache.org> <1799BF57-5B3F-4EB9-8469-755FDA461B04@jaguNET.com> <CAKQ1sVPS9=gE6Hc2jVfmsxZd=8sdohd-KXyxTPR+pES6C++KmA@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448368657;
	bh=/9AIsdVqgMGDErNKNRyxokPjHZ+x7lMkcA9UaKr2uMM=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=XjJatX/Gcf3tOjfXds2g/YzcwxOcIvVCPH62duHc134ipXqBma8Z84A4QjGoH2cqv
	 6IvtrmjzFQbIkbxrv8rQ2Z+Axjh/Dz/gEZl8oZVhRPk9JnGdE6bkHXCFSUin85nbWK
	 R47bGFYKTJCK0NEgxCPSHPt/mIWtK+Gbj8i3T4H1j08D/X1T6UBgc8mL7AFbQxN6+t
	 HUTAMgwjKZ+preVTD/Fjaf4qNkmp7wHAh/HZ78xHDTtoGK3Wzz8o4jo+JSMxgLLoZu
	 HWy+UHNiz+N6zW+AwMdFxJmJdSpi5w35gMfxRGsHw8vxQTvOeTJ1j3CKn8NEfGViTf
	 BLQ9wURW9dZtA==

To be clear, I was only semi-joking about the code
changes (eg: apr_atoi64()) which did not involve
ap_casecmpstr() at all :) :)


> On Nov 23, 2015, at 11:50 AM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>=20
> On Mon, Nov 23, 2015 at 3:05 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>>=20
>> That's cheating :)
>=20
> Yeah, reverted (r1715869) and re-committed (r1715876) with no =
functional change.
> Thanks for catching!


From dev-return-84696-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 12:41:12 2015
Return-Path: <dev-return-84696-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E233B1867A
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 12:41:11 +0000 (UTC)
Received: (qmail 16830 invoked by uid 500); 24 Nov 2015 12:41:11 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 16749 invoked by uid 500); 24 Nov 2015 12:41:11 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 16723 invoked by uid 99); 24 Nov 2015 12:41:11 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 12:41:11 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id D5780180992
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 12:41:10 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id x-n0PdCy9lfE for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 12:41:01 +0000 (UTC)
Received: from resqmta-po-12v.sys.comcast.net (resqmta-po-12v.sys.comcast.net [96.114.154.171])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 3A65C20C47
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 12:41:00 +0000 (UTC)
Received: from resomta-po-04v.sys.comcast.net ([96.114.154.228])
	by resqmta-po-12v.sys.comcast.net with comcast
	id lQgr1r0014vw8ds01Qgths; Tue, 24 Nov 2015 12:40:53 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-04v.sys.comcast.net with comcast
	id lQgs1r00D2U0RYt01QgtkQ; Tue, 24 Nov 2015 12:40:53 +0000
Content-Type: text/plain; charset=windows-1252
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: strncasecmp
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <5653732E.9030401@wanadoo.fr>
Date: Tue, 24 Nov 2015 07:40:52 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <6C408DFD-A50D-4DDF-8090-6488CA9C06C4@jaguNET.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com> <CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com> <301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com> <5653732E.9030401@wanadoo.fr>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448368853;
	bh=IPISMJl+SsgF8XgIggTye05WeYlLTKnBQExdvYz0uNE=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=LmnmBz9n3e4C9xRKx77wgOlJz14lYMQmOE56WCGbpFHLvsVhuW+5WOSG2A6p3P5Xu
	 2AC99xJsqhSeD1J0AwaP6hgxPbNcdBMTtv/4gGTMkJ0j+dBcEYbBbriEjdbaBBJXSN
	 OXfOP2+GkfzWuEZphz/FeEZXLHeMzXla98Nq1nVQY+do9mCjX3+GGm1L8dC6mnPCSS
	 MVHYyD+31B0EiMw0MdKl27nl5sHYrJAKRmycbjbpnZRtrEKLX7VHdoimeEIeG9J+oN
	 gWYArYgRjJ+sat5JyKSSCgC84Q+Xy3fY1uiNz7RlhgiuRZswXLSYM4D3sTfAbY0tRQ
	 Pl6OkSYxm7D4w==

It really depends on the OS and the version of the OS. In
my test cases on OSX and CentOS5 and centOS6, I see
measurable improvements.
> On Nov 23, 2015, at 3:12 PM, Christophe JAILLET =
<christophe.jaillet@wanadoo.fr> wrote:
>=20
> Hi Jim,
>=20
> Do you have done some benchmark and have results to share?
>=20
> I tried to do some but the benefit of the optimized version is not =
that clear, at least on my system:
>   gcc 5.2.1
>   Linux linux 4.2.0-18-generic #22-Ubuntu SMP Fri Nov 6 18:25:50 UTC =
2015 x86_64 x86_64 x86_64 GNU/Linux
>=20
> I've tried to trick gcc in order to avoid some optimization. (gcc does =
its best to remove/inline/remove from loop known standard C functions)
> I've check asm output to be more confident on the code generated by =
gcc.
>=20
> Based on my own results only, and without any becnhmark, I would -1 a =
backport.
> For small strings (below identical char), your implementation looks =
faster, but above 4 identical chars it looks slower
>=20
> I can provide my test program if interested.
>=20
>=20
> best regards,
> CJ
>=20
>=20
> Le 20/11/2015 19:53, Jim Jagielski a =E9crit :
>> Implemented in r1715401
>>=20
>> If people want to nit-pick about naming and wish to
>> rename it to something else, be my guest.
>>=20
>>> On Nov 20, 2015, at 1:03 PM, Yann Ylavic<ylavic.dev@gmail.com>  =
wrote:
>>>=20
>>> +1
>>>=20
>>> On Fri, Nov 20, 2015 at 6:17 PM, Jim Jagielski<jim@jagunet.com>  =
wrote:
>>>> We use str[n]casecmp quite a bit. The rub is that some
>>>> platforms use a sensible implementation (such as OSX) which
>>>> uses a upper-lowercase map and is v. fast, and others
>>>> use a brain-dead version which does an actual tolower() of
>>>> each char in the string as it tests. We actually try to
>>>> handle this in many cases by doing a switch/case test on the
>>>> 1st char to fast path the strncasecmp, resulting in ugly code.
>>>>=20
>>>> This is crazy.
>>>>=20
>>>> I propose a ap_strncasecmp/ap_strcasecmp which we should use.
>>>> Ideally, it would be in apr but no need to wait for that
>>>> to happen :)
>>>>=20
>>>> Unless people have heartburn about this, I will add next week.
>=20


From dev-return-84697-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 12:47:17 2015
Return-Path: <dev-return-84697-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 37284186A7
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 12:47:17 +0000 (UTC)
Received: (qmail 30461 invoked by uid 500); 24 Nov 2015 12:47:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 30397 invoked by uid 500); 24 Nov 2015 12:47:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 30378 invoked by uid 99); 24 Nov 2015 12:47:16 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 12:47:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 37CCDC0FEA
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 12:47:16 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 5O_OhrQPo0qL for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 12:47:12 +0000 (UTC)
Received: from mail-qg0-f50.google.com (mail-qg0-f50.google.com [209.85.192.50])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id E611720562
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 12:47:11 +0000 (UTC)
Received: by qgec40 with SMTP id c40so9254676qge.2
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 04:47:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=gorWoXmaIQH5xNIbnTT6J0Jkc2hotfK3+ZZ8/2kn5O4=;
        b=GGz5OfXSEI3yaZt7muaFBHDiQvVJdte4FCDfYStbSjC5TKO9Ud5PN1uIGu+GGdkcXf
         6niqF2VIgxsRC6xbsdwyLNv2LMReV6ZmtgNqmicjydNDvuW7nmE1wRW/nmouqO62mTwt
         KutQ/0dQfkxwGwKxRaOaYRBjSQx1q8jkJiIFAz0VNxOm5wK4Hsp33Mw+UbSCwB1bLqe2
         01ivn6xHEU0V0RtNxGZpgXUCVtCjjRoP2BZ5z5OOrgtZ3bOg+Iava6qzn6jE3nNUNSyF
         H0hL+fKt9T/U32qmbOBDEVLKAjGXWP579CPghVx9zuyEEBDurcObqc99W5kvpYHVNJTd
         aEjA==
MIME-Version: 1.0
X-Received: by 10.140.89.201 with SMTP id v67mr33162718qgd.38.1448369231249;
 Tue, 24 Nov 2015 04:47:11 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 24 Nov 2015 04:47:11 -0800 (PST)
In-Reply-To: <452D7C19-557F-4CC4-ACD0-172549A9757D@jaguNET.com>
References: <20151123123311.15DEB3A03E8@svn01-us-west.apache.org>
	<1799BF57-5B3F-4EB9-8469-755FDA461B04@jaguNET.com>
	<CAKQ1sVPS9=gE6Hc2jVfmsxZd=8sdohd-KXyxTPR+pES6C++KmA@mail.gmail.com>
	<452D7C19-557F-4CC4-ACD0-172549A9757D@jaguNET.com>
Date: Tue, 24 Nov 2015 13:47:11 +0100
Message-ID: <CAKQ1sVPOyVNiqEdkSCQU5VpJNRS2Yw=zzpffXzhZ64czEt7Ztw@mail.gmail.com>
Subject: Re: svn commit: r1715789 - in /httpd/httpd/trunk: modules/cache/
 modules/filters/ modules/generators/ modules/http/ modules/http2/
 modules/loggers/ modules/mappers/ modules/metadata/ modules/proxy/
 modules/slotmem/ modules/test/ server/
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

I think that's what I understood :)
I prefered reverting the whole and re-committing without the unrelated
changes (the three apr_atoi64() in cache_util.c), and then commit
those apr_atoi64() changes separately (r1715886) to propose a specific
backport...

On Tue, Nov 24, 2015 at 1:37 PM, Jim Jagielski <jim@jagunet.com> wrote:
> To be clear, I was only semi-joking about the code
> changes (eg: apr_atoi64()) which did not involve
> ap_casecmpstr() at all :) :)
>
>
>> On Nov 23, 2015, at 11:50 AM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>
>> On Mon, Nov 23, 2015 at 3:05 PM, Jim Jagielski <jim@jagunet.com> wrote:
>>>
>>> That's cheating :)
>>
>> Yeah, reverted (r1715869) and re-committed (r1715876) with no functional change.
>> Thanks for catching!
>

From dev-return-84698-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 13:40:02 2015
Return-Path: <dev-return-84698-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4312B1887F
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 13:40:02 +0000 (UTC)
Received: (qmail 47925 invoked by uid 500); 24 Nov 2015 13:40:01 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 47811 invoked by uid 500); 24 Nov 2015 13:39:58 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 47801 invoked by uid 99); 24 Nov 2015 13:39:58 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 13:39:58 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id A47671A420D
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 13:39:57 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.652
X-Spam-Level:
X-Spam-Status: No, score=0.652 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id zC0ToIhIS-dn for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 13:39:52 +0000 (UTC)
Received: from resqmta-po-04v.sys.comcast.net (resqmta-po-04v.sys.comcast.net [96.114.154.163])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 01CBB203C1
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 13:39:51 +0000 (UTC)
Received: from resomta-po-16v.sys.comcast.net ([96.114.154.240])
	by resqmta-po-04v.sys.comcast.net with comcast
	id lRfr1r0025BUCh401RfrD7; Tue, 24 Nov 2015 13:39:51 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-16v.sys.comcast.net with comcast
	id lRfq1r0062U0RYt01Rfqyu; Tue, 24 Nov 2015 13:39:51 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715876 - in /httpd/httpd/trunk: modules/cache/ modules/filters/ modules/generators/ modules/http/ modules/http2/ modules/loggers/ modules/mappers/ modules/metadata/ modules/proxy/ modules/slotmem/ modules/test/ server/
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <56537051.3020208@wanadoo.fr>
Date: Tue, 24 Nov 2015 08:39:50 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <92C42935-A8FA-4F22-82DC-F45883BBE56E@jaguNET.com>
References: <20151123164602.782763A075E@svn01-us-west.apache.org> <56537051.3020208@wanadoo.fr>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448372391;
	bh=eNJU/1bC0rmr5f59mkOLSe5OVjUHDSoKeYH9bB+AhB0=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=XDlEGsgO9BL7OPUuAf6lEHivbPPyi7WNqXue18TiqQnieMdZLKoq2F65FoCOsMK6i
	 +vpDJJh3imGtExKNoX5a4u6+UTVQz5EPTm5UIkjfXF+sW4TsuPDEqXW+MtzFEUVEXJ
	 cmuWel1Tj7V0vWTEZUyeYYO+ejOALzzCvlp8jpagzUJDDulRY9/+onb05glUTkb7ev
	 kNu5N0HuCosJcQXDPZmvK9GM918v7v5/fEFWjesI8JvhSDto3fh2K+4yEK/EfLiSTW
	 jOR/edIZmbIe3T8pmG7XEVhZEzPmtyXMBuYeXUiPWehpQSJGKb8+ao60byfhzhKlwb
	 4AeI0aJy08pig==


> On Nov 23, 2015, at 3:00 PM, Marion & Christophe JAILLET =
<christophe.jaillet@wanadoo.fr> wrote:
>=20
> Hi,
>=20
> 1 typo below.
>=20
> Moreover, this kind of patch is a good candidate for backport as it =
introduces many small differences between 2.4 and trunk.
> Without a backport, backporting future patches may become a nightmare.
>=20

++1. I always anticipated it being backported.


From dev-return-84699-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 15:08:42 2015
Return-Path: <dev-return-84699-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 175C318BCB
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 15:08:42 +0000 (UTC)
Received: (qmail 69879 invoked by uid 500); 24 Nov 2015 15:08:41 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 69804 invoked by uid 500); 24 Nov 2015 15:08:41 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 69793 invoked by uid 99); 24 Nov 2015 15:08:41 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 15:08:41 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 16D22C14BA
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:08:41 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.98
X-Spam-Level: **
X-Spam-Status: No, score=2.98 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id xawskhdO5DZK for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 15:08:33 +0000 (UTC)
Received: from mail-ig0-f182.google.com (mail-ig0-f182.google.com [209.85.213.182])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 48D2624E30
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:08:33 +0000 (UTC)
Received: by igvg19 with SMTP id g19so97172957igv.1
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 07:08:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=HjWyE/yCkRpamI561ROrkqxU176UO0MRLNg9iL+3460=;
        b=tsIO2joAFz9driyLsmbauOtw4CiCpe7rDC+FX6pyRF+bsZPQ8/50+USjt2tyjo0gj3
         aELMyqkIv4shg936AaLs6iBckMMiRZA89z5RYiC2gnzbsAeo6XVoERhHz0GREg1+y1L8
         hc3yutGbN5ACEZROl94zztOduNkweLcmrMMaUbE1QAngFoWRdotLouKPympV/1wvkdrW
         r1ZQtCZVl/4+FqUfRGR02/IUZ+KQovYOsDJBZD73vbKU0iVyBYSA9QEdiDwpw8LOUZeS
         VIWcaQC0lgMTYTn6yaycEwVR3aytUT5U4H6QFKQQzyIhpuvy+zpuD0XPLyOEfWoTxRMR
         uXhA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=HjWyE/yCkRpamI561ROrkqxU176UO0MRLNg9iL+3460=;
        b=mgEbkWjLFv6XcXfY1raXO9uu6cw33Nq8d1xiDAVahM9yL8LLLK+IRyiEqDUyPSbvmG
         IfBZCiADZ8Ou4/JxhgXnrXS5mtOTFtEQTZxUOcCY4M5szVwNAbhgIovI+8QdqXYso2Yk
         ErLtM8bDAVkZGWfvr5TCWuvEyhZ1fNuQufJXOnWbuuV0+QWplo9ZH5lCRp+T9wIHAm5U
         velvbVcuapk3fGwXso+t27VFLs1E/hy6sfIxC39tL5+DCxR12prXOewb2WpgyMvQLMZs
         yPOQH56Zu2PbMMfeWiZNRA76Rt/Cywng4Pd0ejjQZd3R5Jh1iuFPc9SPXOaVeLeXp92h
         iTKg==
X-Gm-Message-State: ALoCoQkv1FBNCMFsMaENhsPdIbMBREzfiEEPmPhTReaEHD1Y0YstPOia77SqR6UbyH8TDC5oX+H3
MIME-Version: 1.0
X-Received: by 10.50.20.163 with SMTP id o3mr2717041ige.35.1448377712040; Tue,
 24 Nov 2015 07:08:32 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Tue, 24 Nov 2015 07:08:31 -0800 (PST)
In-Reply-To: <6C408DFD-A50D-4DDF-8090-6488CA9C06C4@jaguNET.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
	<CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
	<301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
	<5653732E.9030401@wanadoo.fr>
	<6C408DFD-A50D-4DDF-8090-6488CA9C06C4@jaguNET.com>
Date: Tue, 24 Nov 2015 09:08:31 -0600
Message-ID: <CACsi253ZgU4waaAiEQm8E6X0gVoEfPw=JdQQ5t7KMNcma5EERA@mail.gmail.com>
Subject: Re: strncasecmp
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=047d7bd75dec06f8b805254ab76e

--047d7bd75dec06f8b805254ab76e
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 6:40 AM, Jim Jagielski <jim@jagunet.com> wrote:

> It really depends on the OS and the version of the OS. In
> my test cases on OSX and CentOS5 and centOS6, I see
> measurable improvements.
>

Part of the reason for your differences... on this console here I have;
$ set | grep -E "^L[AC]"
LANG=en_US.UTF-8

Knock that back to a SBCS en_US.ISO-8859-1 and you'll see an
improvement, not that the stdc library implementation was inefficient
(it wasn't), but that UTF-8 causes strcmp to fall over into MBCS character
handling.

As long as this function is promoted for fast ASCII-specific token
recognition and has no other unexpected equalities, it serves a useful
purpose.

--047d7bd75dec06f8b805254ab76e
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On T=
ue, Nov 24, 2015 at 6:40 AM, Jim Jagielski <span dir=3D"ltr">&lt;<a href=3D=
"mailto:jim@jagunet.com" target=3D"_blank">jim@jagunet.com</a>&gt;</span> w=
rote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8e=
x;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-styl=
e:solid;padding-left:1ex">It really depends on the OS and the version of th=
e OS. In<br>
my test cases on OSX and CentOS5 and centOS6, I see<br>
measurable improvements.<br>
<div class=3D""><div class=3D"h5"></div></div></blockquote></div><br></div>=
<div class=3D"gmail_extra">Part of the reason for your differences... on th=
is console here I have;</div><div class=3D"gmail_extra"><div class=3D"gmail=
_extra">$ set | grep -E &quot;^L[AC]&quot;</div><div class=3D"gmail_extra">=
LANG=3Den_US.UTF-8</div><div><br></div><div>Knock that back to a SBCS en_US=
.ISO-8859-1 and you&#39;ll see an=C2=A0</div><div>improvement, not that=C2=
=A0the stdc library implementation was inefficient=C2=A0</div><div>(it wasn=
&#39;t), but that UTF-8 causes strcmp to fall over into MBCS character=C2=
=A0</div><div>handling.</div><div><br></div><div>As long as this function i=
s promoted for fast ASCII-specific token</div><div>recognition and has no o=
ther unexpected equalities, it serves a useful</div><div>purpose.</div><div=
><br></div><div><br></div></div><div class=3D"gmail_extra"><br></div></div>

--047d7bd75dec06f8b805254ab76e--

From dev-return-84700-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 15:15:15 2015
Return-Path: <dev-return-84700-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C2B7418C0E
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 15:15:15 +0000 (UTC)
Received: (qmail 88914 invoked by uid 500); 24 Nov 2015 15:15:15 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 88852 invoked by uid 500); 24 Nov 2015 15:15:15 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 88842 invoked by uid 99); 24 Nov 2015 15:15:15 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 15:15:15 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id B946F1A0A4A
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:15:14 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id ctjt3lzrPVjJ for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 15:15:13 +0000 (UTC)
Received: from mail-ig0-f171.google.com (mail-ig0-f171.google.com [209.85.213.171])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id C74E720C40
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:15:12 +0000 (UTC)
Received: by igcmv3 with SMTP id mv3so52679938igc.0
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 07:15:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=2ERDC7rRL6OLTMpmLWgXmWL87USFnSy+W+cagobhpDM=;
        b=E+Qrx9PUOhjXlPUEsGR2RvMQGtem+Tvp2fyNox/ZUT8ftdsEdaRKNgRyof3Hb+K2G6
         swwailsYDywAFGFAb+d8cMSGKBBba+ZQHT55xRqmEorMKzcOofHndf5YysG74BLIUtuO
         Y2Mt+1JbIH4l9ZH9FIPFCP6+ru+BFqZG9nBznSKSD46KJ3uOZiPbJjrGBfCsjUvBuFYU
         Pygyy9Qu1d5lNeMEzP918Os0noPTzQBQ0I5i02J0HTI31scK8Dul3tMoaLuyTPIsk/sk
         BtMDVBecqCVZGpLXjLO0uP8m2PKYkrKJ5z9GUvVkko/geQPI/0OR8DYyDpPg6jFbMl/6
         m/jA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=2ERDC7rRL6OLTMpmLWgXmWL87USFnSy+W+cagobhpDM=;
        b=TPAaVk2I85spzwDHzQ92InhR8DnDOvDYuTXxlUUVhulzMzy+baFtNHEkirbqpBdKFq
         NFF+FqiElB1I8Oa3c2tfRMwhh9czSHeZ71faPuP+wSxTSykpeb506zsAKptFNAUSYUrN
         UkC3l8HHEYceRlgEw6d+uLJ7AiPA+UJ8/LOQJoqD1uCfv2Nh7g1Xfx8KiW98uSJxreg0
         uqzui4tRZ5X48CZZ2AY8Un/nq5t27JsrAdxhpdAzLQriWe3E5mfCh5weoAdMDM9HPYQ9
         NlgOUrhToFTMI1L6APdJjCRyCOdgYcCpAlgja3EqMaSGRXS+GQj+D9z9S//xLdqXheoS
         WqFw==
X-Gm-Message-State: ALoCoQnq9cw3ngG+hfJ3z6E2T2wPcfzrT5euiC7VVxW9PLH+WZWChqatxk9817c5hEAvuiU9DIXx
MIME-Version: 1.0
X-Received: by 10.50.143.10 with SMTP id sa10mr18471251igb.77.1448378111747;
 Tue, 24 Nov 2015 07:15:11 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Tue, 24 Nov 2015 07:15:11 -0800 (PST)
In-Reply-To: <5437AE63-0061-4346-98B5-F00D6D804E87@jaguNET.com>
References: <20151123155826.39A703A043E@svn01-us-west.apache.org>
	<CACsi252Ypb8wgfryMt689sn0nnJwkBrNpjaE7KzFwd3wk2LhdQ@mail.gmail.com>
	<5437AE63-0061-4346-98B5-F00D6D804E87@jaguNET.com>
Date: Tue, 24 Nov 2015 09:15:11 -0600
Message-ID: <CACsi250cw1NgJs9u6tdDNf90_UOdWHvKvosOmMe9XTbyi0Q_dQ@mail.gmail.com>
Subject: Re: svn commit: r1715859 - /httpd/httpd/trunk/include/httpd.h
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1135fe9ada045305254ace13

--001a1135fe9ada045305254ace13
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 6:35 AM, Jim Jagielski <jim@jagunet.com> wrote:

> Yeah, but not, afaict, EBCDIC.


It would help for you to review the sources.  It wasn't a correct alpha sort
until I put in the EBCDIC code table this weekend, now EBCDIC chars
collate in ASCII order under this function.


> And in our use case, we
> don't care (and never use) the greater/less-than functionality,
>

s/our/my/;s/we/I/; - projecting much?  Designing utility functions is about
designing for utility, not one case.  If it is one case don't abstract it.
That's
why util[_string].c has a lot of apparently duplicate functionality that we
don't generally need under stdc '89 and APR, but we just hadn't gone back
and mopped up yet.


> just the equal to. This allows for possible other improvements/
> enhancements which might "break" the >< but doesn't affect
> how *we* use it.


Why would we break this?

Right now you can presume that if you are looking strictly for some
encoding tokens 'chunked' 'deflate' 'gzip', you can actually walk the
token list in alpha order and find out what was missing or unexpected
in a slightly more efficient way.

--001a1135fe9ada045305254ace13
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On T=
ue, Nov 24, 2015 at 6:35 AM, Jim Jagielski <span dir=3D"ltr">&lt;<a href=3D=
"mailto:jim@jagunet.com" target=3D"_blank">jim@jagunet.com</a>&gt;</span> w=
rote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;borde=
r-left:1px #ccc solid;padding-left:1ex">Yeah, but not, afaict, EBCDIC. </bl=
ockquote><div><br></div><div>It would help for you to review the sources.=
=C2=A0 It wasn&#39;t a correct alpha sort</div><div>until I put in the EBCD=
IC code table this weekend, now EBCDIC chars</div><div>collate in ASCII ord=
er under this function.</div><div>=C2=A0</div><blockquote class=3D"gmail_qu=
ote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex=
">And in our use case, we<br>
don&#39;t care (and never use) the greater/less-than functionality,<br></bl=
ockquote><div><br></div><div>s/our/my/;s/we/I/; - projecting much?=C2=A0 De=
signing utility functions is about</div><div>designing for utility, not one=
 case.=C2=A0 If it is one case don&#39;t abstract it.=C2=A0 That&#39;s</div=
><div>why util[_string].c has a lot of apparently duplicate functionality t=
hat we</div><div>don&#39;t generally need under stdc &#39;89 and APR, but w=
e just hadn&#39;t gone back</div><div>and mopped up yet.</div><div>=C2=A0</=
div><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-lef=
t:1px #ccc solid;padding-left:1ex">
just the equal to. This allows for possible other improvements/<br>
enhancements which might &quot;break&quot; the &gt;&lt; but doesn&#39;t aff=
ect<br>
how *we* use it.</blockquote><div><br></div><div>Why would we break this?</=
div><div><br></div><div>Right now you can presume that if you are looking s=
trictly for some</div><div>encoding tokens &#39;chunked&#39; &#39;deflate&#=
39; &#39;gzip&#39;, you can actually walk the=C2=A0</div><div>token list in=
 alpha order and find out what was missing or unexpected=C2=A0</div><div>in=
 a slightly more efficient way.=C2=A0</div><div><br></div><div><br></div></=
div></div></div>

--001a1135fe9ada045305254ace13--

From dev-return-84701-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 15:22:13 2015
Return-Path: <dev-return-84701-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3F92318C66
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 15:22:13 +0000 (UTC)
Received: (qmail 6415 invoked by uid 500); 24 Nov 2015 15:22:12 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 6333 invoked by uid 500); 24 Nov 2015 15:22:12 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 6322 invoked by uid 99); 24 Nov 2015 15:22:12 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 15:22:12 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 48D3F180994
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:22:12 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.651
X-Spam-Level:
X-Spam-Status: No, score=0.651 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, RCVD_IN_MSPIKE_H2=-0.001,
	SPF_NEUTRAL=0.652] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id k5mf1efjQgk7 for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 15:22:05 +0000 (UTC)
Received: from resqmta-po-06v.sys.comcast.net (resqmta-po-06v.sys.comcast.net [96.114.154.165])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id A4B0D24E1A
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:22:04 +0000 (UTC)
Received: from resomta-po-17v.sys.comcast.net ([96.114.154.241])
	by resqmta-po-06v.sys.comcast.net with comcast
	id lTMw1r0075Clt1L01TMxcU; Tue, 24 Nov 2015 15:21:57 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-17v.sys.comcast.net with comcast
	id lTMw1r0062U0RYt01TMwG8; Tue, 24 Nov 2015 15:21:56 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <20151123200516.D444B3A043E@svn01-us-west.apache.org>
Date: Tue, 24 Nov 2015 10:21:55 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448378517;
	bh=iPfWXbIPd72SqiIeRfZBYw0OOz4vLXhYaCMUvxVDW0g=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=R1/QSE8GZ8WAhynEhcoT34zUjg+4KV2XvcFBqUzWSd3eoL0c47BzLg4HKVHHw/XdE
	 vGnR5Z44XIvlB16k2aG+hL6P6cgdKTDqxvUBHElFn5BrwdoZdWfXY438FVgpexw/iM
	 EgCeqYVx/0uYPZOP9X+GvcNglslxNNZipJlvKVxVRxm2/b76mPiR7sLGR1tO8DUw+e
	 A4ORs/AEAIT1/AX/Ai+Wl1LijUfhoeSi49N2c/1GY8PY3E0vnVQhDd2/cU+H2SLc9u
	 uq0x/T/MdG4+dNz39zTNjaXQvyOptcM9wti4DbwJ/EysvMJDn8DFHveE1c09qfb7tQ
	 uxqjWizxpXECw==

For these types of paths, where we use a switch/case against
the 1st char of the token, the real reason why we used that
impl was to avoid the (expected) expensive string comparison.

This is really no longer an issue. Sure, we could still use
this "fast path" short-circuit, but even that is non-optimal.
For the below, what we really should be testing is:

	if (!ap_casecmpstr(token+1, "ublic")) {

for example.

Sooooo the question is: Do we remove these silly fast-paths
that no longer make sense[1] or optimize for the "we know the
1st char" case ala the above?


1. eg:

        while (token) {
                if (!ap_casecmpstrn(token, "no-cache", 8)) {
                    if (token[8] =3D=3D '=3D') {
                        cc->no_cache_header =3D 1;
                    }
                    else if (!token[8]) {
                        cc->no_cache =3D 1;
                    }
                }
                else if (!ap_casecmpstr(token, "no-store")) {
                    cc->no_store =3D 1;
                }
                else if (!ap_casecmpstr(token, "no-transform")) {
                    cc->no_transform =3D 1;
                }
                else if (!ap_casecmpstrn(token, "max-age", 7)) {
                    if (token[7] =3D=3D '=3D'
                            && !apr_strtoff(&offt, token + 8, &endp, 10)
                            && endp > token + 8 && !*endp) {
                        cc->max_age =3D 1;
                        cc->max_age_value =3D offt;
                    }
                }
                else if (!ap_casecmpstr(token, "must-revalidate")) {
                    cc->must_revalidate =3D 1;
                }
                else if (!ap_casecmpstrn(token, "max-stale", 9)) {
                    if (token[9] =3D=3D '=3D'
                            && !apr_strtoff(&offt, token + 10, &endp, =
10)
                            && endp > token + 10 && !*endp) {
                        cc->max_stale =3D 1;
                        cc->max_stale_value =3D offt;
                    }
                    else if (!token[9]) {
                        cc->max_stale =3D 1;
                        cc->max_stale_value =3D -1;
                    }
                }
                else if (!ap_casecmpstrn(token, "min-fresh", 9)) {
                    if (token[9] =3D=3D '=3D'
                            && !apr_strtoff(&offt, token + 10, &endp, =
10)
                            && endp > token + 10 && !*endp) {
                        cc->min_fresh =3D 1;
                        cc->min_fresh_value =3D offt;
                    }
                }

	...

> On Nov 23, 2015, at 3:05 PM, ylavic@apache.org wrote:
>=20
> Author: ylavic
> Date: Mon Nov 23 20:05:16 2015
> New Revision: 1715938
>=20
> URL: http://svn.apache.org/viewvc?rev=3D1715938&view=3Drev
> Log:
> Follow up to r1715876: fix typo.
>=20
> Modified:
>    httpd/httpd/trunk/modules/cache/cache_util.c
>=20
> Modified: httpd/httpd/trunk/modules/cache/cache_util.c
> URL: =
http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/cache/cache_util.c?=
rev=3D1715938&r1=3D1715937&r2=3D1715938&view=3Ddiff
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> --- httpd/httpd/trunk/modules/cache/cache_util.c (original)
> +++ httpd/httpd/trunk/modules/cache/cache_util.c Mon Nov 23 20:05:16 =
2015
> @@ -1074,7 +1074,8 @@ int ap_cache_control(request_rec *r, cac
>                 }
>                 break;
>             }
> -            case 'p': {
> +            case 'p':
> +            case 'P': {
>                 if (!ap_casecmpstr(token, "public")) {
>                     cc->public =3D 1;
>                 }
>=20
>=20


From dev-return-84702-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 15:28:33 2015
Return-Path: <dev-return-84702-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7FE2E18C9C
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 15:28:33 +0000 (UTC)
Received: (qmail 27284 invoked by uid 500); 24 Nov 2015 15:28:33 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 27221 invoked by uid 500); 24 Nov 2015 15:28:33 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 27211 invoked by uid 99); 24 Nov 2015 15:28:33 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 15:28:32 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 6F9A31A2751
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:28:32 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id hW7LN30XsZqt for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 15:28:22 +0000 (UTC)
Received: from resqmta-po-10v.sys.comcast.net (resqmta-po-10v.sys.comcast.net [96.114.154.169])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 3496743DB6
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:28:22 +0000 (UTC)
Received: from resomta-po-11v.sys.comcast.net ([96.114.154.235])
	by resqmta-po-10v.sys.comcast.net with comcast
	id lTTt1r00354zqzk01TUMUK; Tue, 24 Nov 2015 15:28:21 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-11v.sys.comcast.net with comcast
	id lTUL1r00J2U0RYt01TUMfy; Tue, 24 Nov 2015 15:28:21 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715859 - /httpd/httpd/trunk/include/httpd.h
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CACsi250cw1NgJs9u6tdDNf90_UOdWHvKvosOmMe9XTbyi0Q_dQ@mail.gmail.com>
Date: Tue, 24 Nov 2015 10:28:20 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <4AFAB327-14AD-44F0-8927-E289B28BCF63@jaguNET.com>
References: <20151123155826.39A703A043E@svn01-us-west.apache.org> <CACsi252Ypb8wgfryMt689sn0nnJwkBrNpjaE7KzFwd3wk2LhdQ@mail.gmail.com> <5437AE63-0061-4346-98B5-F00D6D804E87@jaguNET.com> <CACsi250cw1NgJs9u6tdDNf90_UOdWHvKvosOmMe9XTbyi0Q_dQ@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448378901;
	bh=z+1PRIj50qIVbm27uKh5d6XURu15VM7jJHdd7RMjl6M=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=JzUAn01S9RD7iFq16xvacai7L3UFagQG+k2MCKXRUVA4BArrqaGTI4KofmP76z0R/
	 hz4tUB/Bvbu1EREFNZQQs03kNe11ACLCLp52Rd3js3+G6eQ3lfdVrZD5vp+n9zqlKM
	 m7rmyebVX3DtQzU16TSyUk7WGWYs6qSioeCtSP5VHCW+drwJ4QWj5CjlqXk8UwuqDs
	 tR9spStPjENDg7itYhsByT/a06O+elwzHaIIpHN60R5AVntmfQcj7ziyG3CMQMUIsr
	 F/dmluphrYzKEKlRjZnUjKoS98oaVe7HdC72rCo5K2EabSQ1npgdDX4wpJ0x43iiiQ
	 SnnlTJPzUetzQ==

if the current EBCDIC validates the >< lex, then by all means
update the docs to reflect that. You specifically said that
"The implementation does provide ASCII numeric-alpha ordering."

The main reason I was suggesting this was that, really,
it would make sense for the function to return true if
they compare and 0 if not, which is, of course, not
how strncasecmp does it (which is why we have the weird
looking !strcasecmp() for code paths where they DO compare :) ).
So by allowing that casecmpstr was not, in fact, a *replacement*
implementation of strcasecmp(), we could define it to be more
sensible ;)

Like you said, we aren't creating a replacement clib, so creating
funcs for our own specific usecase does make some sense.
> On Nov 24, 2015, at 10:15 AM, William A Rowe Jr <wrowe@rowe-clan.net> =
wrote:
>=20
> On Tue, Nov 24, 2015 at 6:35 AM, Jim Jagielski <jim@jagunet.com> =
wrote:
> Yeah, but not, afaict, EBCDIC.
>=20
> It would help for you to review the sources.  It wasn't a correct =
alpha sort
> until I put in the EBCDIC code table this weekend, now EBCDIC chars
> collate in ASCII order under this function.
> =20
> And in our use case, we
> don't care (and never use) the greater/less-than functionality,
>=20
> s/our/my/;s/we/I/; - projecting much?  Designing utility functions is =
about
> designing for utility, not one case.  If it is one case don't abstract =
it.  That's
> why util[_string].c has a lot of apparently duplicate functionality =
that we
> don't generally need under stdc '89 and APR, but we just hadn't gone =
back
> and mopped up yet.
> =20
> just the equal to. This allows for possible other improvements/
> enhancements which might "break" the >< but doesn't affect
> how *we* use it.
>=20
> Why would we break this?
>=20
> Right now you can presume that if you are looking strictly for some
> encoding tokens 'chunked' 'deflate' 'gzip', you can actually walk the=20=

> token list in alpha order and find out what was missing or unexpected=20=

> in a slightly more efficient way.=20
>=20
>=20


From dev-return-84703-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 15:29:01 2015
Return-Path: <dev-return-84703-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1395118CA4
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 15:29:01 +0000 (UTC)
Received: (qmail 28596 invoked by uid 500); 24 Nov 2015 15:29:00 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 28512 invoked by uid 500); 24 Nov 2015 15:29:00 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 28502 invoked by uid 99); 24 Nov 2015 15:29:00 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 15:29:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id CA9FB180994
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:28:59 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id lAhjshachpG4 for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 15:28:53 +0000 (UTC)
Received: from mail-ig0-f171.google.com (mail-ig0-f171.google.com [209.85.213.171])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id A7ECD20944
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:28:53 +0000 (UTC)
Received: by igbxm8 with SMTP id xm8so16660765igb.1
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 07:28:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=0Ux8DYbSPPnTr2oODu3/LmDXM/V2l2g4Yy9o3V5IhAc=;
        b=D3FjqDKJxlghPAAXdwsp2pO54KuwMPf4M9QLnJ49nZPKHL/bt0ywYfytx38zq4ehEX
         0Bt2sI6RhyB7ZRNownv5TCfdNkL0dCNrxQcDh7Rjz3nz3pH8CyOA1tMUApcXaRebuhd7
         UOhVE7rE5e/jCJsgOeWjR+eqJddOiBM6ttoprvw/WUy1B/S9XGLwHglw7+9/V8tOIOQE
         h+sMrEeM/OtM4FmfZGWLUgJCA4mnyTDdNARnD4zUa6gO3dzQoiRDKJpnxuNwbfn9twft
         uSg3Fg98JfFR+E43oL/OWrJqW07LHTNj6H4Its3/h5DBpS1B8J+jU3n2S76MU65yeu2A
         PNbQ==
MIME-Version: 1.0
X-Received: by 10.50.155.106 with SMTP id vv10mr18135379igb.36.1448378933114;
 Tue, 24 Nov 2015 07:28:53 -0800 (PST)
Received: by 10.64.114.199 with HTTP; Tue, 24 Nov 2015 07:28:53 -0800 (PST)
In-Reply-To: <CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org>
	<CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com>
Date: Tue, 24 Nov 2015 10:28:53 -0500
Message-ID: <CALK=YjOEWYkx58iWaPrm72T-ZTV05tkA2XcCBhJHnxEdFTdOBw@mail.gmail.com>
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 10:21 AM, Jim Jagielski <jim@jagunet.com> wrote:
> For these types of paths, where we use a switch/case against
> the 1st char of the token, the real reason why we used that
> impl was to avoid the (expected) expensive string comparison.

Maybe naively, I thought we were saving some potential function
call overhead here rather than some strcasecmp overhead.

From dev-return-84704-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 15:32:30 2015
Return-Path: <dev-return-84704-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9268918CD2
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 15:32:30 +0000 (UTC)
Received: (qmail 40916 invoked by uid 500); 24 Nov 2015 15:32:30 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 40842 invoked by uid 500); 24 Nov 2015 15:32:29 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 40832 invoked by uid 99); 24 Nov 2015 15:32:29 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 15:32:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 335C9180994
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:32:29 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id NZv9O6RRAXos for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 15:32:25 +0000 (UTC)
Received: from mail-qg0-f41.google.com (mail-qg0-f41.google.com [209.85.192.41])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 452E0441C9
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:32:25 +0000 (UTC)
Received: by qgec40 with SMTP id c40so12686373qge.2
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 07:32:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Qx1Rzx71fUh/iE01snfCjQGAPs/wxYhwbeq3p2voWdc=;
        b=yKTscVJTjjpx4qWaJyKf/ZkRaVEGtBoCSlv2peswOC5h3YR/53wazgABggWoHySbJM
         cfEvT0pMVx35VSeq8F9bUZ2Arlx+KOF2yVq62zm6NdAqkUKwEM1hAKkbJXZBhqymhG+G
         wUJa7TZKf6ZDp3zVMKmaxFrneS4zd7JO9UE78FNhdGRXY75h8t81bD7GX5UWRMxuykFl
         4QM5b2BpFGUi08iVYbsU/l7shOSHfmdjtRTGSjUsvQHQ9paLohspeFOyQ1c05Z23CwJN
         t+jJEhQj2GSQUigATN3yamrhJo7N6KV0qRSH6dApbRvN3q79EOqlXcMPHjrM/0PlWhwp
         vnqg==
MIME-Version: 1.0
X-Received: by 10.140.101.51 with SMTP id t48mr34753024qge.71.1448379139210;
 Tue, 24 Nov 2015 07:32:19 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 24 Nov 2015 07:32:19 -0800 (PST)
In-Reply-To: <CALK=YjOEWYkx58iWaPrm72T-ZTV05tkA2XcCBhJHnxEdFTdOBw@mail.gmail.com>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org>
	<CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com>
	<CALK=YjOEWYkx58iWaPrm72T-ZTV05tkA2XcCBhJHnxEdFTdOBw@mail.gmail.com>
Date: Tue, 24 Nov 2015 16:32:19 +0100
Message-ID: <CAKQ1sVPFhhGhZaKQnnys82DX01dKxzOqBrGU+-ZSu2uAqzde-g@mail.gmail.com>
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 4:28 PM, Eric Covener <covener@gmail.com> wrote:
> On Tue, Nov 24, 2015 at 10:21 AM, Jim Jagielski <jim@jagunet.com> wrote:
>> For these types of paths, where we use a switch/case against
>> the 1st char of the token, the real reason why we used that
>> impl was to avoid the (expected) expensive string comparison.
>
> Maybe naively, I thought we were saving some potential function
> call overhead here rather than some strcasecmp overhead.

I agree, the switch'ed code is likely to be more efficient because of
that (unless we inline casecmpstr[n], but that's not a good idea
IMHO).

I'll modify Chritophe test a bit (more) to check that...

From dev-return-84705-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 15:38:28 2015
Return-Path: <dev-return-84705-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 354E518D00
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 15:38:28 +0000 (UTC)
Received: (qmail 54467 invoked by uid 500); 24 Nov 2015 15:38:26 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 54397 invoked by uid 500); 24 Nov 2015 15:38:26 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 54387 invoked by uid 99); 24 Nov 2015 15:38:26 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 15:38:26 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 5B6A5C2D16
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:38:26 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.652
X-Spam-Level:
X-Spam-Status: No, score=0.652 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, RCVD_IN_MSPIKE_H2=-0.001,
	SPF_NEUTRAL=0.652, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id gnzNcVyTauIw for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 15:38:16 +0000 (UTC)
Received: from resqmta-po-06v.sys.comcast.net (resqmta-po-06v.sys.comcast.net [96.114.154.165])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 4030D20BC2
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:38:15 +0000 (UTC)
Received: from resomta-po-17v.sys.comcast.net ([96.114.154.241])
	by resqmta-po-06v.sys.comcast.net with comcast
	id lTe31r0055Clt1L01TeEuU; Tue, 24 Nov 2015 15:38:14 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-17v.sys.comcast.net with comcast
	id lTeD1r00C2U0RYt01TeDS2; Tue, 24 Nov 2015 15:38:13 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CALK=YjOEWYkx58iWaPrm72T-ZTV05tkA2XcCBhJHnxEdFTdOBw@mail.gmail.com>
Date: Tue, 24 Nov 2015 10:38:13 -0500
Content-Transfer-Encoding: 7bit
Message-Id: <3A4A28A1-5BC8-4052-8477-9B81EBD3ED9F@jaguNET.com>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org> <CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com> <CALK=YjOEWYkx58iWaPrm72T-ZTV05tkA2XcCBhJHnxEdFTdOBw@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448379494;
	bh=nl/thtYfF/ZOZFw7POUD/fVefIkDx/K5tJnJWzhy97E=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=N2P/XybtQEtfL0Ct3tYNJJAg1l3Xy18Obj72cPt3IBucfX7qWxfyDl0xFzImsunyB
	 Wrv9cZRcR6SqqUuibRTKDblQIaHxcdEDJC8FQqQVq26opxSNmds6dnw9NaCelPpPsu
	 GTXKSuHGWuF5qhUgu3SbDLGfU60PEvBppiW3P0vPlFTDsjL2lsztRMlzt/B+JuFUZ2
	 WvLvTdCd3Br4eTcRkkUlBD8vO+Fr+sAogrY7ecCICqMscg1ZtGDSow/i3wbPhhOqtT
	 KWZYibUPqeeyHJwkYmYAOjDaXvPLMHRaCf7T3jXgQsMu9FF5XCjUdUoq9euIUNWGWh
	 jclmcbIKAlA7A==


> On Nov 24, 2015, at 10:28 AM, Eric Covener <covener@gmail.com> wrote:
> 
> On Tue, Nov 24, 2015 at 10:21 AM, Jim Jagielski <jim@jagunet.com> wrote:
>> For these types of paths, where we use a switch/case against
>> the 1st char of the token, the real reason why we used that
>> impl was to avoid the (expected) expensive string comparison.
> 
> Maybe naively, I thought we were saving some potential function
> call overhead here rather than some strcasecmp overhead.

Yeah... you are likely right. In which case, we should adjust
ala the suggested

	if (!ap_casecmpstr(token+1, "ublic")) {

implementation. Yeah, that's ugly, I agree.

From dev-return-84706-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 15:41:35 2015
Return-Path: <dev-return-84706-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D21D118D1E
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 15:41:35 +0000 (UTC)
Received: (qmail 61778 invoked by uid 500); 24 Nov 2015 15:41:35 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 61709 invoked by uid 500); 24 Nov 2015 15:41:35 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 61699 invoked by uid 99); 24 Nov 2015 15:41:35 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 15:41:35 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id DD892C0F3F
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:41:34 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Ej_0_buwtHIY for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 15:41:27 +0000 (UTC)
Received: from mail-io0-f175.google.com (mail-io0-f175.google.com [209.85.223.175])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 1920624E1A
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:41:27 +0000 (UTC)
Received: by iouu10 with SMTP id u10so24317967iou.0
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 07:41:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=VktIajy2ySlhZ7ZK6L+DchsQe1qGUHRQQ0/WzCnmGHs=;
        b=MW3Y43x4QurFbqtFsh7rP+psF0B8fmpAECoj80zQU9v6e+vB/wxkASilHg2oqSb9Fq
         0TL/BwYF6oKI316IMM6TwXUkrODxeaBF/md6WYyt/G35C7UDN04Cw791N2F3WEqrFC15
         IX2OWnpYyjKD14qGYIttwhj7yX0U8BK1YdRjZq3F5+Ap/Xsara8xKePK80UGvVhS7d6c
         pBkRhfbBzUzaOfoFGc7py7GdqLRtJs1kTGpkMeSvTMWIvrFo8/M9We5QgIQ6mP1wiGfK
         m5X5v1oA65SsWKVmiOfMKtDzowLDWQx7u6UjXypDeSTjn/fUDRAddnIfE0oY6/W8+9Nm
         pH5Q==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=VktIajy2ySlhZ7ZK6L+DchsQe1qGUHRQQ0/WzCnmGHs=;
        b=f/lHmeaW59RhRrOQ9rvojzkHK5iYJpxv4jd+7wKJmh4rGrmiFafrgKWOJcrQKu8/eO
         JssKTov3jPAuu7vygEvr5C3rOwSwswhYlVFiNkQMIDgCIiLIuKb8NO+r2I+KZ4uM5hcW
         VNNWNnQWDT5AlxYbBy1UAMLrE7jCVqamb0LUk1MC8taFxXZF51rb5PFI3knHOZNdnv2d
         2WzAAjdrpn/m+3T+nTy2wRXSlgjoI1dw/S7Uy+F1naWqLBZlIrTa2t17JKHrqDYUUcPE
         qVRjiCfxBP3f3NN63Qdih9lS5bHV70eBzWyqjjW/oc0Ye2dwjw0j7jI1w92/OuHY18j0
         pv0Q==
X-Gm-Message-State: ALoCoQk/Bms78H+Wzy+hM/8zOwIFsmtg8jhjVjB/wKwIZkzv94ouGnN/ETXOYHKRgtBFqiMQLVRV
MIME-Version: 1.0
X-Received: by 10.107.10.66 with SMTP id u63mr28730638ioi.86.1448379685945;
 Tue, 24 Nov 2015 07:41:25 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Tue, 24 Nov 2015 07:41:25 -0800 (PST)
In-Reply-To: <4AFAB327-14AD-44F0-8927-E289B28BCF63@jaguNET.com>
References: <20151123155826.39A703A043E@svn01-us-west.apache.org>
	<CACsi252Ypb8wgfryMt689sn0nnJwkBrNpjaE7KzFwd3wk2LhdQ@mail.gmail.com>
	<5437AE63-0061-4346-98B5-F00D6D804E87@jaguNET.com>
	<CACsi250cw1NgJs9u6tdDNf90_UOdWHvKvosOmMe9XTbyi0Q_dQ@mail.gmail.com>
	<4AFAB327-14AD-44F0-8927-E289B28BCF63@jaguNET.com>
Date: Tue, 24 Nov 2015 09:41:25 -0600
Message-ID: <CACsi250QUg-xra6uwfvsNT_SJ=CPu2UNkQR0aSmLZDxG=hjSAw@mail.gmail.com>
Subject: Re: svn commit: r1715859 - /httpd/httpd/trunk/include/httpd.h
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a113f93beae5eb405254b2ca5

--001a113f93beae5eb405254b2ca5
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 9:28 AM, Jim Jagielski <jim@jagunet.com> wrote:

> if the current EBCDIC validates the >< lex, then by all means
> update the docs to reflect that. You specifically said that
> "The implementation does provide ASCII numeric-alpha ordering."
>

You are right, calling out "This implementation provides ASCII-ordering
of strings (EBCDIC text is also ASCII ordered on those platforms)"
might have been clearer?  Eric, what phrasing would make sense to you
as a user/maintainer of the httpd EBCDIC port?


> The main reason I was suggesting this was that, really,
> it would make sense for the function to return true if
> they compare and 0 if not, which is, of course, not
> how strncasecmp does it (which is why we have the weird
> looking !strcasecmp() for code paths where they DO compare :) ).
> So by allowing that casecmpstr was not, in fact, a *replacement*
> implementation of strcasecmp(), we could define it to be more
> sensible ;)
>

That's possible, although I'm -.5 on losing the functionality for the
earlier reasons stated, and your interpretation is incorrect.  "cmp"
implies compare, lt, 0, gt valuations. "eq" implies equality tests.

Like you said, we aren't creating a replacement clib, so creating
> funcs for our own specific usecase does make some sense.
>

Sure, and the use case(s) can be broad enough to serve more than
one purpose.

If you really need a strict equality test, isn't

#define ap_strcaseequals(s1, s2) (!ap_strcasecmp(s1, s2)) sufficient?

(or choose match or identity but not cmp, please :)

--001a113f93beae5eb405254b2ca5
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On T=
ue, Nov 24, 2015 at 9:28 AM, Jim Jagielski <span dir=3D"ltr">&lt;<a href=3D=
"mailto:jim@jagunet.com" target=3D"_blank">jim@jagunet.com</a>&gt;</span> w=
rote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;borde=
r-left:1px #ccc solid;padding-left:1ex">if the current EBCDIC validates the=
 &gt;&lt; lex, then by all means<br>
update the docs to reflect that. You specifically said that<br>
<span class=3D"">&quot;The implementation does provide ASCII numeric-alpha =
ordering.&quot;<br></span></blockquote><div><br></div><div>You are right, c=
alling out &quot;This implementation provides ASCII-ordering</div><div>of s=
trings (EBCDIC text is also ASCII ordered on those platforms)&quot;=C2=A0</=
div><div>might have been clearer?=C2=A0 Eric, what phrasing would make sens=
e to you</div><div>as a user/maintainer of the httpd EBCDIC port?</div><div=
>=C2=A0</div><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;b=
order-left:1px #ccc solid;padding-left:1ex"><span class=3D"">
</span>The main reason I was suggesting this was that, really,<br>
it would make sense for the function to return true if<br>
they compare and 0 if not, which is, of course, not<br>
how strncasecmp does it (which is why we have the weird<br>
looking !strcasecmp() for code paths where they DO compare :) ).<br>
So by allowing that casecmpstr was not, in fact, a *replacement*<br>
implementation of strcasecmp(), we could define it to be more<br>
sensible ;)<br></blockquote><div><br></div><div>That&#39;s possible, althou=
gh I&#39;m -.5 on losing the functionality for the</div><div>earlier reason=
s stated, and your interpretation is incorrect. =C2=A0&quot;cmp&quot;</div>=
<div>implies compare, lt, 0, gt valuations. &quot;eq&quot; implies equality=
 tests.</div><div><br></div><blockquote class=3D"gmail_quote" style=3D"marg=
in:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
Like you said, we aren&#39;t creating a replacement clib, so creating<br>
funcs for our own specific usecase does make some sense.<br></blockquote><d=
iv><br></div><div>Sure, and the use case(s) can be broad enough to serve mo=
re than</div><div>one purpose.</div><div><br></div><div>If you really need =
a strict equality test, isn&#39;t</div><div><br></div><div>#define ap_strca=
seequals(s1, s2) (!ap_strcasecmp(s1, s2)) sufficient?</div><div><br></div><=
div>(or choose match or identity but not cmp, please :)</div></div></div></=
div>

--001a113f93beae5eb405254b2ca5--

From dev-return-84707-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 15:46:33 2015
Return-Path: <dev-return-84707-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C8FFF18D5D
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 15:46:33 +0000 (UTC)
Received: (qmail 81041 invoked by uid 500); 24 Nov 2015 15:46:33 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 80958 invoked by uid 500); 24 Nov 2015 15:46:33 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 80948 invoked by uid 99); 24 Nov 2015 15:46:33 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 15:46:33 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id E1105C2B18
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:46:32 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id dzDR_oRVQRYj for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 15:46:26 +0000 (UTC)
Received: from mail-ig0-f178.google.com (mail-ig0-f178.google.com [209.85.213.178])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id BB7ED20BC2
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:46:25 +0000 (UTC)
Received: by igcto18 with SMTP id to18so16804180igc.0
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 07:46:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Pb2FOb8xqvwTYddOaTjAJ/9PSO6mIvd0cVfmUyENid8=;
        b=rh0qIr6qlp5iRvNPPhIEwvBq77CNSi2ixf07K0s1h7UEzVDiQJjSbGOhocw673VEuQ
         K7UTKUJ+SvhAONiJX3jv2aYBYKWfO7mibWAgx/HI421vHSaqy5bVthbh7G2sFalU383e
         R2jXZl7hDazy8DBY/6hLeHilHmeAPqFIjcjPSDhrxZe06pX0FsjZF9Ry5feMOaxgD9qU
         agrXgrI2Fo3sC18+aGIPRM4FDXwpzesLZmDmvda957wmkLDFAFWH4iYoXR2pmN1SDHhT
         RfwPRuVMGoHsMUURma7i+U0EyRQDe2l64k7iEPo/tx8rq0o6wjWgGeQPlc6McgKQYNlc
         iX+A==
MIME-Version: 1.0
X-Received: by 10.50.73.227 with SMTP id o3mr18244772igv.56.1448379984748;
 Tue, 24 Nov 2015 07:46:24 -0800 (PST)
Received: by 10.64.114.199 with HTTP; Tue, 24 Nov 2015 07:46:24 -0800 (PST)
In-Reply-To: <CACsi250QUg-xra6uwfvsNT_SJ=CPu2UNkQR0aSmLZDxG=hjSAw@mail.gmail.com>
References: <20151123155826.39A703A043E@svn01-us-west.apache.org>
	<CACsi252Ypb8wgfryMt689sn0nnJwkBrNpjaE7KzFwd3wk2LhdQ@mail.gmail.com>
	<5437AE63-0061-4346-98B5-F00D6D804E87@jaguNET.com>
	<CACsi250cw1NgJs9u6tdDNf90_UOdWHvKvosOmMe9XTbyi0Q_dQ@mail.gmail.com>
	<4AFAB327-14AD-44F0-8927-E289B28BCF63@jaguNET.com>
	<CACsi250QUg-xra6uwfvsNT_SJ=CPu2UNkQR0aSmLZDxG=hjSAw@mail.gmail.com>
Date: Tue, 24 Nov 2015 10:46:24 -0500
Message-ID: <CALK=YjMhgfB+Dtm7=RNVdkPFcMJLN_Zcw-MstFiMomN8fajS7w@mail.gmail.com>
Subject: Re: svn commit: r1715859 - /httpd/httpd/trunk/include/httpd.h
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 10:41 AM, William A Rowe Jr <wrowe@rowe-clan.net> wrote:
> You are right, calling out "This implementation provides ASCII-ordering
> of strings (EBCDIC text is also ASCII ordered on those platforms)"
> might have been clearer?  Eric, what phrasing would make sense to you
> as a user/maintainer of the httpd EBCDIC port?

"Provides C/POSIX strcasecmp ordering, for alpha-numerics only"?

From dev-return-84708-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 15:49:43 2015
Return-Path: <dev-return-84708-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4E45718D84
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 15:49:43 +0000 (UTC)
Received: (qmail 92083 invoked by uid 500); 24 Nov 2015 15:49:42 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 92009 invoked by uid 500); 24 Nov 2015 15:49:42 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 91999 invoked by uid 99); 24 Nov 2015 15:49:42 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 15:49:42 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 5BDCCC2AF3
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:49:42 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.98
X-Spam-Level: **
X-Spam-Status: No, score=2.98 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id wc5IzG8ISiCp for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 15:49:37 +0000 (UTC)
Received: from mail-ig0-f178.google.com (mail-ig0-f178.google.com [209.85.213.178])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 5EC7920C41
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:49:37 +0000 (UTC)
Received: by igl9 with SMTP id 9so75380177igl.0
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 07:49:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=EFqrxzvVwDfG7peVIR+MzBHbIdQeaozZfalHU5B5+J0=;
        b=zKSlocMLqVwPfARqEqKW8LipEP1WzZ6mRYs72cui/ES45haGxStyFGvZjsAg52Bvpo
         fsijn9+Z8HDd930ljDT8HwPYVkAixCJIeRPVdw8BXMf6VhS8KsVyxazDOaETIehEMuvf
         ICIZTZvfs4/98fcVD312roVsgydGnKp5IyiG612aQ8KT+LzUzpSs7DaotZiVoonubq9d
         8oZkOZucL6kBG0P3tr/XfMXZdM4cQXgN0OM6GQcbFVA2BWdOO+h4DPNLxVlGrD5osvk/
         cc+JoMEMlrbvlctc9PvMUeIWzN6si2RsGf/pTAcQnowVjJM+s7fQScsOHHCvS/UdTbF9
         u1XA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=EFqrxzvVwDfG7peVIR+MzBHbIdQeaozZfalHU5B5+J0=;
        b=OOVb/zfQWw2yvvo0kIPQKV/q6dXn1Gn+V8MJxn5x/xRg2vgLTmkbq3MW2phO8yNw7E
         Zd8JJzDFQkxJC/KlwAHD50e17UavU6CzRYdgmxPxvUrZS1XCN8I7rYwom97EYzQywk1v
         /RYO0S9aFZn3I99G9MPD7xQJvN1kv8OXRoIQmjUd73TQM0OdmNKnftgd8/o7uAXeS45/
         fLikniZyiKyJqJDZdwTfePA08HJ4tKLc1+CySSIE7ip6yLaj5rvwMGre2Dk6PGnfapXu
         65oqImK6jKGh9+g0EgbT2ezxRePdM8EjMwEye6jHhIzMWE8kMlWJLnDuMbw0IAHv1Ikx
         Ky0w==
X-Gm-Message-State: ALoCoQk02Naxf69qMRTL8EJJk1MocP0REzlySosGQ/AN3YUyML2MJW93S7/XGy8tlQ/4oh5JT7Db
MIME-Version: 1.0
X-Received: by 10.50.50.71 with SMTP id a7mr18250524igo.32.1448380170349; Tue,
 24 Nov 2015 07:49:30 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Tue, 24 Nov 2015 07:49:30 -0800 (PST)
In-Reply-To: <CALK=YjOEWYkx58iWaPrm72T-ZTV05tkA2XcCBhJHnxEdFTdOBw@mail.gmail.com>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org>
	<CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com>
	<CALK=YjOEWYkx58iWaPrm72T-ZTV05tkA2XcCBhJHnxEdFTdOBw@mail.gmail.com>
Date: Tue, 24 Nov 2015 09:49:30 -0600
Message-ID: <CACsi252e3hQ2+7f2LWLcuDhLMWB=Uv+iOwK+cGQ+mkzaKHRiag@mail.gmail.com>
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=089e013c5c448dc9ad05254b49f4

--089e013c5c448dc9ad05254b49f4
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 9:28 AM, Eric Covener <covener@gmail.com> wrote:

> On Tue, Nov 24, 2015 at 10:21 AM, Jim Jagielski <jim@jagunet.com> wrote:
> > For these types of paths, where we use a switch/case against
> > the 1st char of the token, the real reason why we used that
> > impl was to avoid the (expected) expensive string comparison.
>
> Maybe naively, I thought we were saving some potential function
> call overhead here rather than some strcasecmp overhead.
>

In part, but also in this specific case;

        while (token) {
***
A switch here short circuits three function calls;
                if (!ap_casecmpstrn(token, "no-cache", 8)) {
                    if (token[8] == '=') {
                        cc->no_cache_header = 1;
                    }
                    else if (!token[8]) {
                        cc->no_cache = 1;
                    }
                }
                else if (!ap_casecmpstr(token, "no-store")) {
                    cc->no_store = 1;
                }
                else if (!ap_casecmpstr(token, "no-transform")) {
                    cc->no_transform = 1;
                }
***
A switch here short circuits four function calls;
                else if (!ap_casecmpstrn(token, "max-age", 7)) {
                    if (token[7] == '='
                            && !apr_strtoff(&offt, token + 8, &endp, 10)
                            && endp > token + 8 && !*endp) {
                        cc->max_age = 1;
                        cc->max_age_value = offt;
                    }
                }
                else if (!ap_casecmpstr(token, "must-revalidate")) {
                    cc->must_revalidate = 1;
                }
                else if (!ap_casecmpstrn(token, "max-stale", 9)) {
                    if (token[9] == '='
                            && !apr_strtoff(&offt, token + 10, &endp, 10)
                            && endp > token + 10 && !*endp) {
                        cc->max_stale = 1;
                        cc->max_stale_value = offt;
                    }
                    else if (!token[9]) {
                        cc->max_stale = 1;
                        cc->max_stale_value = -1;
                    }
                }
                else if (!ap_casecmpstrn(token, "min-fresh", 9)) {
                    if (token[9] == '='
                            && !apr_strtoff(&offt, token + 10, &endp, 10)
                            && endp > token + 10 && !*endp) {
                        cc->min_fresh = 1;
                        cc->min_fresh_value = offt;
                    }
                }
***

Plus the overhead if each function call itself, it is still sensible to
narrow out
several groups of tokens (could even use if s[0]=='n' s[1]=='o' tests)

Does it make sense to expose the ap_tolower_ascii() function?  We could
call it ap_tolower_plaintext() or something else to distinguish that it
isn't
lowercasing extended characters?  Or is the case 'N': case 'n': syntax
easier to follow?

--089e013c5c448dc9ad05254b49f4
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On T=
ue, Nov 24, 2015 at 9:28 AM, Eric Covener <span dir=3D"ltr">&lt;<a href=3D"=
mailto:covener@gmail.com" target=3D"_blank">covener@gmail.com</a>&gt;</span=
> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0=
.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-s=
tyle:solid;padding-left:1ex"><span class=3D"">On Tue, Nov 24, 2015 at 10:21=
 AM, Jim Jagielski &lt;<a href=3D"mailto:jim@jagunet.com">jim@jagunet.com</=
a>&gt; wrote:<br>
&gt; For these types of paths, where we use a switch/case against<br>
&gt; the 1st char of the token, the real reason why we used that<br>
&gt; impl was to avoid the (expected) expensive string comparison.<br>
<br>
</span>Maybe naively, I thought we were saving some potential function<br>
call overhead here rather than some strcasecmp overhead.<br>
</blockquote></div><br></div><div class=3D"gmail_extra">In part, but also i=
n this specific case;</div><div class=3D"gmail_extra"><br></div><div class=
=3D"gmail_extra"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 while (token) {</span><br style=3D"font-size:12.8px"><div class=3D"gmai=
l_extra"><span style=3D"font-size:12.8px">***</span></div><div class=3D"gma=
il_extra"><span style=3D"font-size:12.8px">A switch here short circuits thr=
ee function calls;</span></div><span style=3D"font-size:12.8px">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 if (!ap_casecmpstrn(token, &q=
uot;no-cache&quot;, 8)) {</span><br style=3D"font-size:12.8px"><span style=
=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 if (token[8] =3D=3D &#39;=3D&#39;) {</span><br style=3D"f=
ont-size:12.8px"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 cc-&gt;no_cache=
_header =3D 1;</span><br style=3D"font-size:12.8px"><span style=3D"font-siz=
e:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 }</span><br style=3D"font-size:12.8px"><span style=3D"font-size:12.8=
px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 e=
lse if (!token[8]) {</span><br style=3D"font-size:12.8px"><span style=3D"fo=
nt-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 cc-&gt;no_cache =3D 1;</span><br style=3D"font-siz=
e:12.8px"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 }</span><br style=3D"font-size:12.8p=
x"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 }</span><br style=3D"font-size:12.8px"><span style=3D"fon=
t-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 else=
 if (!ap_casecmpstr(token, &quot;no-store&quot;)) {</span><br style=3D"font=
-size:12.8px"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 cc-&gt;no_store =3D 1;</span><br =
style=3D"font-size:12.8px"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 }</span><br style=3D"font-size:12=
.8px"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 else if (!ap_casecmpstr(token, &quot;no-transform&quot=
;)) {</span><br style=3D"font-size:12.8px"><span style=3D"font-size:12.8px"=
>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 cc-&=
gt;no_transform =3D 1;</span><br style=3D"font-size:12.8px"><span style=3D"=
font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 }=
</span><br style=3D"font-size:12.8px"><span style=3D"font-size:12.8px">***<=
/span></div><div class=3D"gmail_extra"><span style=3D"font-size:12.8px">A s=
witch here short circuits four function calls;</span></div><div class=3D"gm=
ail_extra"><span style=3D"font-size:12.8px">=C2=A0=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0else if (!ap_casecmpstrn(token, &quot;max-ag=
e&quot;, 7)) {</span><br style=3D"font-size:12.8px"><span style=3D"font-siz=
e:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 if (token[7] =3D=3D &#39;=3D&#39;</span><br style=3D"font-size:12.8p=
x"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &amp;&amp; !apr=
_strtoff(&amp;offt, token + 8, &amp;endp, 10)</span><br style=3D"font-size:=
12.8px"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &amp;&amp; =
endp &gt; token + 8 &amp;&amp; !*endp) {</span><br style=3D"font-size:12.8p=
x"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 cc-&gt;max_age =3D 1;</span><=
br style=3D"font-size:12.8px"><span style=3D"font-size:12.8px">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 c=
c-&gt;max_age_value =3D offt;</span><br style=3D"font-size:12.8px"><span st=
yle=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 }</span><br style=3D"font-size:12.8px"><span style=3D"=
font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 }=
</span><br style=3D"font-size:12.8px"><span style=3D"font-size:12.8px">=C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 else if (!ap_casecmpst=
r(token, &quot;must-revalidate&quot;)) {</span><br style=3D"font-size:12.8p=
x"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 cc-&gt;must_revalidate =3D 1;</span><br sty=
le=3D"font-size:12.8px"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 }</span><br style=3D"font-size:12.8p=
x"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 else if (!ap_casecmpstrn(token, &quot;max-stale&quot;, 9)=
) {</span><br style=3D"font-size:12.8px"><span style=3D"font-size:12.8px">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 if (t=
oken[9] =3D=3D &#39;=3D&#39;</span><br style=3D"font-size:12.8px"><span sty=
le=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &amp;&amp; !apr_strtoff(&a=
mp;offt, token + 10, &amp;endp, 10)</span><br style=3D"font-size:12.8px"><s=
pan style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &amp;&amp; endp &gt=
; token + 10 &amp;&amp; !*endp) {</span><br style=3D"font-size:12.8px"><spa=
n style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 cc-&gt;max_stale =3D 1;</span><br st=
yle=3D"font-size:12.8px"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 cc-&gt;m=
ax_stale_value =3D offt;</span><br style=3D"font-size:12.8px"><span style=
=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 }</span><br style=3D"font-size:12.8px"><span style=3D"fon=
t-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 else if (!token[9]) {</span><br style=3D"font-size:12.8px"><span=
 style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 cc-&gt;max_stale =3D 1;</span><br st=
yle=3D"font-size:12.8px"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 cc-&gt;m=
ax_stale_value =3D -1;</span><br style=3D"font-size:12.8px"><span style=3D"=
font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 }</span><br style=3D"font-size:12.8px"><span style=3D"font-si=
ze:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 }</span>=
<br style=3D"font-size:12.8px"><span style=3D"font-size:12.8px">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 else if (!ap_casecmpstrn(toke=
n, &quot;min-fresh&quot;, 9)) {</span><br style=3D"font-size:12.8px"><span =
style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 if (token[9] =3D=3D &#39;=3D&#39;</span><br style=3D"=
font-size:12.8px"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &=
amp;&amp; !apr_strtoff(&amp;offt, token + 10, &amp;endp, 10)</span><br styl=
e=3D"font-size:12.8px"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 &amp;&amp; endp &gt; token + 10 &amp;&amp; !*endp) {</span><br style=
=3D"font-size:12.8px"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 cc-&gt;min_=
fresh =3D 1;</span><br style=3D"font-size:12.8px"><span style=3D"font-size:=
12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 cc-&gt;min_fresh_value =3D offt;</span><br style=3D"font-=
size:12.8px"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 }</span><br style=3D"font-size:12=
.8px"><span style=3D"font-size:12.8px">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 }</span><br></div><div class=3D"gmail_extra"><span sty=
le=3D"font-size:12.8px">***</span></div><div class=3D"gmail_extra"><span st=
yle=3D"font-size:12.8px"><br></span></div><div class=3D"gmail_extra"><span =
style=3D"font-size:12.8px">Plus the overhead if each function call itself, =
it is still sensible to narrow out=C2=A0</span></div><div class=3D"gmail_ex=
tra"><span style=3D"font-size:12.8px">several groups of tokens (could even =
use if s[0]=3D=3D&#39;n&#39; s[1]=3D=3D&#39;o&#39; tests)</span></div><div =
class=3D"gmail_extra"><span style=3D"font-size:12.8px"><br></span></div><di=
v class=3D"gmail_extra"><span style=3D"font-size:12.8px">Does it make sense=
 to expose the ap_tolower_ascii() function?=C2=A0 We could</span></div><div=
 class=3D"gmail_extra"><span style=3D"font-size:12.8px">call it ap_tolower_=
plaintext() or something else to distinguish that it isn&#39;t</span></div>=
<div class=3D"gmail_extra"><span style=3D"font-size:12.8px">lowercasing ext=
ended characters?=C2=A0 Or is the case &#39;N&#39;: case &#39;n&#39;: synta=
x</span></div><div class=3D"gmail_extra"><span style=3D"font-size:12.8px">e=
asier to follow?</span></div><div class=3D"gmail_extra"><span style=3D"font=
-size:12.8px"><br></span></div><div class=3D"gmail_extra"><span style=3D"fo=
nt-size:12.8px"><br></span></div></div>

--089e013c5c448dc9ad05254b49f4--

From dev-return-84709-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 15:58:27 2015
Return-Path: <dev-return-84709-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8D9C118DCA
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 15:58:27 +0000 (UTC)
Received: (qmail 21542 invoked by uid 500); 24 Nov 2015 15:58:26 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 21467 invoked by uid 500); 24 Nov 2015 15:58:26 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 21457 invoked by uid 99); 24 Nov 2015 15:58:26 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 15:58:26 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 54297C0E02
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:58:26 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.699
X-Spam-Level:
X-Spam-Status: No, score=0.699 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	KAM_ASCII_DIVIDERS=0.8, RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Bn5GTo5IdhEl for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 15:58:20 +0000 (UTC)
Received: from mail-qg0-f42.google.com (mail-qg0-f42.google.com [209.85.192.42])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id AB98E25E37
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 15:58:19 +0000 (UTC)
Received: by qgeb1 with SMTP id b1so13385411qge.1
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 07:58:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Gwj9nYQLfpflgitEWmqNFmiOgrIhDBNZCIPA/5Fdn10=;
        b=zuAh8IZfRXNEeOxnX9yP4WXCKvxBg7VoXjC6REsb88CmtHQLYhjbrRaB4EFDbLlBry
         7ez3RWGMAwzBYPZhLED5LZxYmsr9MbSbTN5p4cxZcUe2p5YdQNyy38Sms1RfOBRviYld
         XhGbthIzEIIB2HclWP+OliC9NcejPQCflGKWwF+K4YMTN3RO6Nl3SyJzhtRiOj06jzZV
         0lksPwSS7xoTjTDnhHZNfMNi3z3LtRUzbdkTgDWi98jnTRnhqlyiYlLXvOKXnjLJE/oB
         5AOC/rJ4ErxG7l1nKn91tR7H1wtaPjSxu6eD8KkoerT1Qr3pmTuYPW0kYw7JDfPtv1Kn
         dKEQ==
MIME-Version: 1.0
X-Received: by 10.140.248.70 with SMTP id t67mr18171795qhc.97.1448380698633;
 Tue, 24 Nov 2015 07:58:18 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 24 Nov 2015 07:58:18 -0800 (PST)
In-Reply-To: <CACsi253Gb+=S4RJR5TU9DUELyZ13T8SsEsM2wo7_OTsh+tBQZw@mail.gmail.com>
References: <20151123164602.782763A075E@svn01-us-west.apache.org>
	<56537051.3020208@wanadoo.fr>
	<CAKQ1sVO+vOjRDH3=Lru5Mzpf8id2iBS_D3fxCYDg4L=2JAQYqA@mail.gmail.com>
	<CACsi253Gb+=S4RJR5TU9DUELyZ13T8SsEsM2wo7_OTsh+tBQZw@mail.gmail.com>
Date: Tue, 24 Nov 2015 16:58:18 +0100
Message-ID: <CAKQ1sVOf9SAXOdOCj_R59V8VF2QLzNAbMLpwyvct3D2GOXyO=w@mail.gmail.com>
Subject: Re: svn commit: r1715876 - in /httpd/httpd/trunk: modules/cache/
 modules/filters/ modules/generators/ modules/http/ modules/http2/
 modules/loggers/ modules/mappers/ modules/metadata/ modules/proxy/
 modules/slotmem/ modules/test/ server/
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: multipart/mixed; boundary=001a1139b2940acdd305254b6936

--001a1139b2940acdd305254b6936
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Tue, Nov 24, 2015 at 5:28 AM, William A Rowe Jr <wrowe@rowe-clan.net> wr=
ote:
>
> I didn't have a chance to review the patch, but all of the instances that=
 1.
> map to an RFC protocol string comparison and 2. occur in 2.4 code base
> *should* be coalesced into one patch.  I'm +1 for every such change.  The
> rest of the RFC token comparisons can be added individually for later
> merging with their associated bug or enhancement backports.

The goal of the changes I committed (and reverted) so far is to
address the cases where we really expect ASCII comparison (ie. don't
want locale to make us think the compared string matches whereas it is
not, eg. "Connection: cl=C3=B4se").
This mainly concerns header names, header values (known tokens), schemes, .=
..
Hopefully I reverted the other/abusive changes already.

There remain these changes to mod_proxy and mod_rewrite (revert patch
attached, not applied, yet?), which I think makes sense for
performance reasons, but are not strictly required since the compared
strings come from the configuration file (though mod_proxy params may
be configured via the balancer manager).
I whish I could let them applied because of the (huge/costly)
if-else-if-else-if-... pattern, and we do compare real (ours) tokens
here...

--001a1139b2940acdd305254b6936
Content-Type: text/diff; charset=US-ASCII; name="revert.patch"
Content-Disposition: attachment; filename="revert.patch"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_ihdke2ka0

SW5kZXg6IG1vZHVsZXMvbWFwcGVycy9tb2RfcmV3cml0ZS5jCj09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0tIG1vZHVs
ZXMvbWFwcGVycy9tb2RfcmV3cml0ZS5jCShyZXZpc2lvbiAxNzE2MTU5KQorKysgbW9kdWxlcy9t
YXBwZXJzL21vZF9yZXdyaXRlLmMJKHdvcmtpbmcgY29weSkKQEAgLTM0NzcsMTMgKzM0NzcsMTMg
QEAgc3RhdGljIGNvbnN0IGNoYXIgKmNtZF9yZXdyaXRlcnVsZV9zZXRmbGFnKGFwcl9wb28KICAg
ICBzd2l0Y2ggKCprZXkrKykgewogICAgIGNhc2UgJ2InOgogICAgIGNhc2UgJ0InOgotICAgICAg
ICBpZiAoISprZXkgfHwgIWFwX2Nhc2VjbXBzdHIoa2V5LCAiYWNrcmVmZXNjYXBpbmciKSkgewor
ICAgICAgICBpZiAoISprZXkgfHwgIXN0cmNhc2VjbXAoa2V5LCAiYWNrcmVmZXNjYXBpbmciKSkg
ewogICAgICAgICAgICAgY2ZnLT5mbGFncyB8PSBSVUxFRkxBR19FU0NBUEVCQUNLUkVGOwogICAg
ICAgICAgICAgaWYgKHZhbCAmJiAqdmFsKSB7IAogICAgICAgICAgICAgICAgIGNmZy0+ZXNjYXBl
cyA9IHZhbDsKICAgICAgICAgICAgIH0KICAgICAgICAgfQotICAgICAgICBlbHNlIGlmICghYXBf
Y2FzZWNtcHN0cihrZXksICJOUCIpIHx8ICFhcF9jYXNlY21wc3RyKGtleSwgImFja3JlZmVybm9w
bHVzIikpIHsgCisgICAgICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKGtleSwgIk5QIikgfHwgIXN0
cmNhc2VjbXAoa2V5LCAiYWNrcmVmZXJub3BsdXMiKSkgeyAKICAgICAgICAgICAgIGNmZy0+Zmxh
Z3MgfD0gUlVMRUZMQUdfRVNDQVBFTk9QTFVTOwogICAgICAgICB9CiAgICAgICAgIGVsc2UgewpA
QCAtMzQ5MiwxMSArMzQ5MiwxMSBAQCBzdGF0aWMgY29uc3QgY2hhciAqY21kX3Jld3JpdGVydWxl
X3NldGZsYWcoYXByX3BvbwogICAgICAgICBicmVhazsKICAgICBjYXNlICdjJzoKICAgICBjYXNl
ICdDJzoKLSAgICAgICAgaWYgKCEqa2V5IHx8ICFhcF9jYXNlY21wc3RyKGtleSwgImhhaW4iKSkg
eyAgICAgICAgICAgLyogY2hhaW4gKi8KKyAgICAgICAgaWYgKCEqa2V5IHx8ICFzdHJjYXNlY21w
KGtleSwgImhhaW4iKSkgeyAgICAgICAgICAgLyogY2hhaW4gKi8KICAgICAgICAgICAgIGNmZy0+
ZmxhZ3MgfD0gUlVMRUZMQUdfQ0hBSU47CiAgICAgICAgIH0KICAgICAgICAgZWxzZSBpZiAoKCgq
a2V5ID09ICdPJyB8fCAqa2V5ID09ICdvJykgJiYgIWtleVsxXSkKLSAgICAgICAgICAgICAgICAg
fHwgIWFwX2Nhc2VjbXBzdHIoa2V5LCAib29raWUiKSkgeyAgICAgICAgICAgLyogY29va2llICov
CisgICAgICAgICAgICAgICAgIHx8ICFzdHJjYXNlY21wKGtleSwgIm9va2llIikpIHsgICAgICAg
ICAgIC8qIGNvb2tpZSAqLwogICAgICAgICAgICAgZGF0YV9pdGVtICpjcCA9IGNmZy0+Y29va2ll
OwogCiAgICAgICAgICAgICBpZiAoIWNwKSB7CkBAIC0zNTE5LDEzICszNTE5LDEzIEBAIHN0YXRp
YyBjb25zdCBjaGFyICpjbWRfcmV3cml0ZXJ1bGVfc2V0ZmxhZyhhcHJfcG9vCiAgICAgICAgIGJy
ZWFrOwogICAgIGNhc2UgJ2QnOgogICAgIGNhc2UgJ0QnOgotICAgICAgICBpZiAoISprZXkgfHwg
IWFwX2Nhc2VjbXBzdHIoa2V5LCAiUEkiKSB8fCAhYXBfY2FzZWNtcHN0cihrZXksImlzY2FyZHBh
dGgiKSkgeworICAgICAgICBpZiAoISprZXkgfHwgIXN0cmNhc2VjbXAoa2V5LCAiUEkiKSB8fCAh
c3RyY2FzZWNtcChrZXksImlzY2FyZHBhdGgiKSkgewogICAgICAgICAgICAgY2ZnLT5mbGFncyB8
PSAoUlVMRUZMQUdfRElTQ0FSRFBBVEhJTkZPKTsKICAgICAgICAgfQogICAgICAgICBicmVhazsK
ICAgICBjYXNlICdlJzoKICAgICBjYXNlICdFJzoKLSAgICAgICAgaWYgKCEqa2V5IHx8ICFhcF9j
YXNlY21wc3RyKGtleSwgIm52IikpIHsgICAgICAgICAgICAgLyogZW52ICovCisgICAgICAgIGlm
ICghKmtleSB8fCAhc3RyY2FzZWNtcChrZXksICJudiIpKSB7ICAgICAgICAgICAgIC8qIGVudiAq
LwogICAgICAgICAgICAgZGF0YV9pdGVtICpjcCA9IGNmZy0+ZW52OwogCiAgICAgICAgICAgICBp
ZiAoIWNwKSB7CkBAIC0zNTQyLDcgKzM1NDIsNyBAQCBzdGF0aWMgY29uc3QgY2hhciAqY21kX3Jl
d3JpdGVydWxlX3NldGZsYWcoYXByX3BvbwogICAgICAgICAgICAgY3AtPm5leHQgPSBOVUxMOwog
ICAgICAgICAgICAgY3AtPmRhdGEgPSB2YWw7CiAgICAgICAgIH0KLSAgICAgICAgZWxzZSBpZiAo
IWFwX2Nhc2VjbXBzdHIoa2V5LCAibmQiKSkgeyAgICAgICAgICAgICAgICAvKiBlbmQgKi8KKyAg
ICAgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAoa2V5LCAibmQiKSkgeyAgICAgICAgICAgICAgICAv
KiBlbmQgKi8KICAgICAgICAgICAgIGNmZy0+ZmxhZ3MgfD0gUlVMRUZMQUdfRU5EOwogICAgICAg
ICB9CiAgICAgICAgIGVsc2UgewpAQCAtMzU1Miw3ICszNTUyLDcgQEAgc3RhdGljIGNvbnN0IGNo
YXIgKmNtZF9yZXdyaXRlcnVsZV9zZXRmbGFnKGFwcl9wb28KIAogICAgIGNhc2UgJ2YnOgogICAg
IGNhc2UgJ0YnOgotICAgICAgICBpZiAoISprZXkgfHwgIWFwX2Nhc2VjbXBzdHIoa2V5LCAib3Ji
aWRkZW4iKSkgeyAgICAgICAvKiBmb3JiaWRkZW4gKi8KKyAgICAgICAgaWYgKCEqa2V5IHx8ICFz
dHJjYXNlY21wKGtleSwgIm9yYmlkZGVuIikpIHsgICAgICAgLyogZm9yYmlkZGVuICovCiAgICAg
ICAgICAgICBjZmctPmZsYWdzIHw9IChSVUxFRkxBR19TVEFUVVMgfCBSVUxFRkxBR19OT1NVQik7
CiAgICAgICAgICAgICBjZmctPmZvcmNlZF9yZXNwb25zZWNvZGUgPSBIVFRQX0ZPUkJJRERFTjsK
ICAgICAgICAgfQpAQCAtMzU2Myw3ICszNTYzLDcgQEAgc3RhdGljIGNvbnN0IGNoYXIgKmNtZF9y
ZXdyaXRlcnVsZV9zZXRmbGFnKGFwcl9wb28KIAogICAgIGNhc2UgJ2cnOgogICAgIGNhc2UgJ0cn
OgotICAgICAgICBpZiAoISprZXkgfHwgIWFwX2Nhc2VjbXBzdHIoa2V5LCAib25lIikpIHsgICAg
ICAgICAgICAvKiBnb25lICovCisgICAgICAgIGlmICghKmtleSB8fCAhc3RyY2FzZWNtcChrZXks
ICJvbmUiKSkgeyAgICAgICAgICAgIC8qIGdvbmUgKi8KICAgICAgICAgICAgIGNmZy0+ZmxhZ3Mg
fD0gKFJVTEVGTEFHX1NUQVRVUyB8IFJVTEVGTEFHX05PU1VCKTsKICAgICAgICAgICAgIGNmZy0+
Zm9yY2VkX3Jlc3BvbnNlY29kZSA9IEhUVFBfR09ORTsKICAgICAgICAgfQpAQCAtMzU3NCw3ICsz
NTc0LDcgQEAgc3RhdGljIGNvbnN0IGNoYXIgKmNtZF9yZXdyaXRlcnVsZV9zZXRmbGFnKGFwcl9w
b28KIAogICAgIGNhc2UgJ2gnOgogICAgIGNhc2UgJ0gnOgotICAgICAgICBpZiAoISprZXkgfHwg
IWFwX2Nhc2VjbXBzdHIoa2V5LCAiYW5kbGVyIikpIHsgICAgICAgICAvKiBoYW5kbGVyICovCisg
ICAgICAgIGlmICghKmtleSB8fCAhc3RyY2FzZWNtcChrZXksICJhbmRsZXIiKSkgeyAgICAgICAg
IC8qIGhhbmRsZXIgKi8KICAgICAgICAgICAgIGNmZy0+Zm9yY2VkX2hhbmRsZXIgPSB2YWw7CiAg
ICAgICAgIH0KICAgICAgICAgZWxzZSB7CkBAIC0zNTgzLDcgKzM1ODMsNyBAQCBzdGF0aWMgY29u
c3QgY2hhciAqY21kX3Jld3JpdGVydWxlX3NldGZsYWcoYXByX3BvbwogICAgICAgICBicmVhazsK
ICAgICBjYXNlICdsJzoKICAgICBjYXNlICdMJzoKLSAgICAgICAgaWYgKCEqa2V5IHx8ICFhcF9j
YXNlY21wc3RyKGtleSwgImFzdCIpKSB7ICAgICAgICAgICAgLyogbGFzdCAqLworICAgICAgICBp
ZiAoISprZXkgfHwgIXN0cmNhc2VjbXAoa2V5LCAiYXN0IikpIHsgICAgICAgICAgICAvKiBsYXN0
ICovCiAgICAgICAgICAgICBjZmctPmZsYWdzIHw9IFJVTEVGTEFHX0xBU1RSVUxFOwogICAgICAg
ICB9CiAgICAgICAgIGVsc2UgewpAQCAtMzU5NCwxMCArMzU5NCwxMCBAQCBzdGF0aWMgY29uc3Qg
Y2hhciAqY21kX3Jld3JpdGVydWxlX3NldGZsYWcoYXByX3BvbwogICAgIGNhc2UgJ24nOgogICAg
IGNhc2UgJ04nOgogICAgICAgICBpZiAoKCgqa2V5ID09ICdFJyB8fCAqa2V5ID09ICdlJykgJiYg
IWtleVsxXSkKLSAgICAgICAgICAgIHx8ICFhcF9jYXNlY21wc3RyKGtleSwgIm9lc2NhcGUiKSkg
eyAgICAgICAgICAgICAgLyogbm9lc2NhcGUgKi8KKyAgICAgICAgICAgIHx8ICFzdHJjYXNlY21w
KGtleSwgIm9lc2NhcGUiKSkgeyAgICAgICAgICAgICAgLyogbm9lc2NhcGUgKi8KICAgICAgICAg
ICAgIGNmZy0+ZmxhZ3MgfD0gUlVMRUZMQUdfTk9FU0NBUEU7CiAgICAgICAgIH0KLSAgICAgICAg
ZWxzZSBpZiAoISprZXkgfHwgIWFwX2Nhc2VjbXBzdHIoa2V5LCAiZXh0IikpIHsgICAgICAgLyog
bmV4dCAqLworICAgICAgICBlbHNlIGlmICghKmtleSB8fCAhc3RyY2FzZWNtcChrZXksICJleHQi
KSkgeyAgICAgICAvKiBuZXh0ICovCiAgICAgICAgICAgICBjZmctPmZsYWdzIHw9IFJVTEVGTEFH
X05FV1JPVU5EOwogICAgICAgICAgICAgaWYgKHZhbCAmJiAqdmFsKSB7IAogICAgICAgICAgICAg
ICAgIGNmZy0+bWF4cm91bmRzID0gYXRvaSh2YWwpOwpAQCAtMzYwNSwxMSArMzYwNSwxMSBAQCBz
dGF0aWMgY29uc3QgY2hhciAqY21kX3Jld3JpdGVydWxlX3NldGZsYWcoYXByX3BvbwogCiAgICAg
ICAgIH0KICAgICAgICAgZWxzZSBpZiAoKCgqa2V5ID09ICdTJyB8fCAqa2V5ID09ICdzJykgJiYg
IWtleVsxXSkKLSAgICAgICAgICAgIHx8ICFhcF9jYXNlY21wc3RyKGtleSwgIm9zdWJyZXEiKSkg
eyAgICAgICAgICAgICAgLyogbm9zdWJyZXEgKi8KKyAgICAgICAgICAgIHx8ICFzdHJjYXNlY21w
KGtleSwgIm9zdWJyZXEiKSkgeyAgICAgICAgICAgICAgLyogbm9zdWJyZXEgKi8KICAgICAgICAg
ICAgIGNmZy0+ZmxhZ3MgfD0gUlVMRUZMQUdfSUdOT1JFT05TVUJSRVE7CiAgICAgICAgIH0KICAg
ICAgICAgZWxzZSBpZiAoKCgqa2V5ID09ICdDJyB8fCAqa2V5ID09ICdjJykgJiYgIWtleVsxXSkK
LSAgICAgICAgICAgIHx8ICFhcF9jYXNlY21wc3RyKGtleSwgIm9jYXNlIikpIHsgICAgICAgICAg
ICAgICAgLyogbm9jYXNlICovCisgICAgICAgICAgICB8fCAhc3RyY2FzZWNtcChrZXksICJvY2Fz
ZSIpKSB7ICAgICAgICAgICAgICAgIC8qIG5vY2FzZSAqLwogICAgICAgICAgICAgY2ZnLT5mbGFn
cyB8PSBSVUxFRkxBR19OT0NBU0U7CiAgICAgICAgIH0KICAgICAgICAgZWxzZSB7CkBAIC0zNjE5
LDExICszNjE5LDExIEBAIHN0YXRpYyBjb25zdCBjaGFyICpjbWRfcmV3cml0ZXJ1bGVfc2V0Zmxh
ZyhhcHJfcG9vCiAKICAgICBjYXNlICdwJzoKICAgICBjYXNlICdQJzoKLSAgICAgICAgaWYgKCEq
a2V5IHx8ICFhcF9jYXNlY21wc3RyKGtleSwgInJveHkiKSkgeyAgICAgICAgICAgLyogcHJveHkg
Ki8KKyAgICAgICAgaWYgKCEqa2V5IHx8ICFzdHJjYXNlY21wKGtleSwgInJveHkiKSkgeyAgICAg
ICAgICAgLyogcHJveHkgKi8KICAgICAgICAgICAgIGNmZy0+ZmxhZ3MgfD0gUlVMRUZMQUdfUFJP
WFk7CiAgICAgICAgIH0KICAgICAgICAgZWxzZSBpZiAoKCgqa2V5ID09ICdUJyB8fCAqa2V5ID09
ICd0JykgJiYgIWtleVsxXSkKLSAgICAgICAgICAgIHx8ICFhcF9jYXNlY21wc3RyKGtleSwgImFz
c3Rocm91Z2giKSkgeyAgICAgICAgICAgLyogcGFzc3Rocm91Z2ggKi8KKyAgICAgICAgICAgIHx8
ICFzdHJjYXNlY21wKGtleSwgImFzc3Rocm91Z2giKSkgeyAgICAgICAgICAgLyogcGFzc3Rocm91
Z2ggKi8KICAgICAgICAgICAgIGNmZy0+ZmxhZ3MgfD0gUlVMRUZMQUdfUEFTU1RIUk9VR0g7CiAg
ICAgICAgIH0KICAgICAgICAgZWxzZSB7CkBAIC0zNjMzLDExICszNjMzLDExIEBAIHN0YXRpYyBj
b25zdCBjaGFyICpjbWRfcmV3cml0ZXJ1bGVfc2V0ZmxhZyhhcHJfcG9vCiAKICAgICBjYXNlICdx
JzoKICAgICBjYXNlICdRJzoKLSAgICAgICAgaWYgKCAgICFhcF9jYXNlY21wc3RyKGtleSwgIlNB
IikKLSAgICAgICAgICAgIHx8ICFhcF9jYXNlY21wc3RyKGtleSwgInNhcHBlbmQiKSkgeyAgICAg
ICAgICAgICAgLyogcXNhcHBlbmQgKi8KKyAgICAgICAgaWYgKCAgICFzdHJjYXNlY21wKGtleSwg
IlNBIikKKyAgICAgICAgICAgIHx8ICFzdHJjYXNlY21wKGtleSwgInNhcHBlbmQiKSkgeyAgICAg
ICAgICAgICAgLyogcXNhcHBlbmQgKi8KICAgICAgICAgICAgIGNmZy0+ZmxhZ3MgfD0gUlVMRUZM
QUdfUVNBUFBFTkQ7Ci0gICAgICAgIH0gZWxzZSBpZiAoICFhcF9jYXNlY21wc3RyKGtleSwgIlNE
IikKLSAgICAgICAgICAgICAgICB8fCAhYXBfY2FzZWNtcHN0cihrZXksICJzZGlzY2FyZCIpICkg
eyAgICAgICAvKiBxc2Rpc2NhcmQgKi8KKyAgICAgICAgfSBlbHNlIGlmICggIXN0cmNhc2VjbXAo
a2V5LCAiU0QiKQorICAgICAgICAgICAgICAgIHx8ICFzdHJjYXNlY21wKGtleSwgInNkaXNjYXJk
IikgKSB7ICAgICAgIC8qIHFzZGlzY2FyZCAqLwogICAgICAgICAgICAgY2ZnLT5mbGFncyB8PSBS
VUxFRkxBR19RU0RJU0NBUkQ7CiAgICAgICAgIH0KICAgICAgICAgZWxzZSB7CkBAIC0zNjQ3LDE4
ICszNjQ3LDE4IEBAIHN0YXRpYyBjb25zdCBjaGFyICpjbWRfcmV3cml0ZXJ1bGVfc2V0ZmxhZyhh
cHJfcG9vCiAKICAgICBjYXNlICdyJzoKICAgICBjYXNlICdSJzoKLSAgICAgICAgaWYgKCEqa2V5
IHx8ICFhcF9jYXNlY21wc3RyKGtleSwgImVkaXJlY3QiKSkgeyAgICAgICAgLyogcmVkaXJlY3Qg
Ki8KKyAgICAgICAgaWYgKCEqa2V5IHx8ICFzdHJjYXNlY21wKGtleSwgImVkaXJlY3QiKSkgeyAg
ICAgICAgLyogcmVkaXJlY3QgKi8KICAgICAgICAgICAgIGludCBzdGF0dXMgPSAwOwogCiAgICAg
ICAgICAgICBjZmctPmZsYWdzIHw9IFJVTEVGTEFHX0ZPUkNFUkVESVJFQ1Q7CiAgICAgICAgICAg
ICBpZiAoKnZhbCkgewotICAgICAgICAgICAgICAgIGlmIChhcF9jYXNlY21wc3RyKHZhbCwgInBl
cm1hbmVudCIpID09IDApIHsKKyAgICAgICAgICAgICAgICBpZiAoc3RyY2FzZWNtcCh2YWwsICJw
ZXJtYW5lbnQiKSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IEhUVFBfTU9W
RURfUEVSTUFORU5UTFk7CiAgICAgICAgICAgICAgICAgfQotICAgICAgICAgICAgICAgIGVsc2Ug
aWYgKGFwX2Nhc2VjbXBzdHIodmFsLCAidGVtcCIpID09IDApIHsKKyAgICAgICAgICAgICAgICBl
bHNlIGlmIChzdHJjYXNlY21wKHZhbCwgInRlbXAiKSA9PSAwKSB7CiAgICAgICAgICAgICAgICAg
ICAgIHN0YXR1cyA9IEhUVFBfTU9WRURfVEVNUE9SQVJJTFk7CiAgICAgICAgICAgICAgICAgfQot
ICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFwX2Nhc2VjbXBzdHIodmFsLCAic2Vlb3RoZXIiKSA9
PSAwKSB7CisgICAgICAgICAgICAgICAgZWxzZSBpZiAoc3RyY2FzZWNtcCh2YWwsICJzZWVvdGhl
ciIpID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gSFRUUF9TRUVfT1RIRVI7
CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFwcl9pc2RpZ2l0
KCp2YWwpKSB7CkBAIC0zNjg4LDcgKzM2ODgsNyBAQCBzdGF0aWMgY29uc3QgY2hhciAqY21kX3Jl
d3JpdGVydWxlX3NldGZsYWcoYXByX3BvbwogCiAgICAgY2FzZSAncyc6CiAgICAgY2FzZSAnUyc6
Ci0gICAgICAgIGlmICghKmtleSB8fCAhYXBfY2FzZWNtcHN0cihrZXksICJraXAiKSkgeyAgICAg
ICAgICAgIC8qIHNraXAgKi8KKyAgICAgICAgaWYgKCEqa2V5IHx8ICFzdHJjYXNlY21wKGtleSwg
ImtpcCIpKSB7ICAgICAgICAgICAgLyogc2tpcCAqLwogICAgICAgICAgICAgY2ZnLT5za2lwID0g
YXRvaSh2YWwpOwogICAgICAgICB9CiAgICAgICAgIGVsc2UgewpAQCAtMzY5OCw3ICszNjk4LDcg
QEAgc3RhdGljIGNvbnN0IGNoYXIgKmNtZF9yZXdyaXRlcnVsZV9zZXRmbGFnKGFwcl9wb28KIAog
ICAgIGNhc2UgJ3QnOgogICAgIGNhc2UgJ1QnOgotICAgICAgICBpZiAoISprZXkgfHwgIWFwX2Nh
c2VjbXBzdHIoa2V5LCAieXBlIikpIHsgICAgICAgICAgICAvKiB0eXBlICovCisgICAgICAgIGlm
ICghKmtleSB8fCAhc3RyY2FzZWNtcChrZXksICJ5cGUiKSkgeyAgICAgICAgICAgIC8qIHR5cGUg
Ki8KICAgICAgICAgICAgIGNmZy0+Zm9yY2VkX21pbWV0eXBlID0gdmFsOwogICAgICAgICB9CiAg
ICAgICAgIGVsc2UgewpJbmRleDogbW9kdWxlcy9wcm94eS9tb2RfcHJveHkuYwo9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
Ci0tLSBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5jCShyZXZpc2lvbiAxNzE2MTU5KQorKysgbW9k
dWxlcy9wcm94eS9tb2RfcHJveHkuYwkod29ya2luZyBjb3B5KQpAQCAtNjQsNyArNjQsNyBAQCBz
dGF0aWMgY29uc3QgY2hhciAqc2V0X3dvcmtlcl9wYXJhbShhcHJfcG9vbF90ICpwLAogICAgIGlu
dCBpdmFsOwogICAgIGFwcl9pbnRlcnZhbF90aW1lX3QgdGltZW91dDsKIAotICAgIGlmICghYXBf
Y2FzZWNtcHN0cihrZXksICJsb2FkZmFjdG9yIikpIHsKKyAgICBpZiAoIXN0cmNhc2VjbXAoa2V5
LCAibG9hZGZhY3RvciIpKSB7CiAgICAgICAgIC8qIE5vcm1hbGl6ZWQgbG9hZCBmYWN0b3IuIFVz
ZWQgd2l0aCBCYWxhbmNlck1hbWJlciwKICAgICAgICAgICogaXQgaXMgYSBudW1iZXIgYmV0d2Vl
biAxIGFuZCAxMDAuCiAgICAgICAgICAqLwpAQCAtNzIsNyArNzIsNyBAQCBzdGF0aWMgY29uc3Qg
Y2hhciAqc2V0X3dvcmtlcl9wYXJhbShhcHJfcG9vbF90ICpwLAogICAgICAgICBpZiAod29ya2Vy
LT5zLT5sYmZhY3RvciA8IDEgfHwgd29ya2VyLT5zLT5sYmZhY3RvciA+IDEwMCkKICAgICAgICAg
ICAgIHJldHVybiAiTG9hZEZhY3RvciBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gMS4uMTAwIjsK
ICAgICB9Ci0gICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAicmV0cnkiKSkgeworICAg
IGVsc2UgaWYgKCFzdHJjYXNlY21wKGtleSwgInJldHJ5IikpIHsKICAgICAgICAgLyogSWYgc2V0
IGl0IHdpbGwgZ2l2ZSB0aGUgcmV0cnkgdGltZW91dCBmb3IgdGhlIHdvcmtlcgogICAgICAgICAg
KiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyA2MCBzZWNvbmRzLCBtZWFuaW5nIHRoYXQgaWYKICAgICAg
ICAgICogaW4gZXJyb3Igc3RhdGUsIGl0IHdpbGwgYmUgcmV0cmllZCBhZnRlciB0aGF0IHRpbWVv
dXQuCkBAIC04Myw3ICs4Myw3IEBAIHN0YXRpYyBjb25zdCBjaGFyICpzZXRfd29ya2VyX3BhcmFt
KGFwcl9wb29sX3QgKnAsCiAgICAgICAgIHdvcmtlci0+cy0+cmV0cnkgPSBhcHJfdGltZV9mcm9t
X3NlYyhpdmFsKTsKICAgICAgICAgd29ya2VyLT5zLT5yZXRyeV9zZXQgPSAxOwogICAgIH0KLSAg
ICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihrZXksICJ0dGwiKSkgeworICAgIGVsc2UgaWYgKCFz
dHJjYXNlY21wKGtleSwgInR0bCIpKSB7CiAgICAgICAgIC8qIFRpbWUgaW4gc2Vjb25kcyB0aGF0
IHdpbGwgZGVzdHJveSBhbGwgdGhlIGNvbm5lY3Rpb25zCiAgICAgICAgICAqIHRoYXQgZXhjZWVk
IHRoZSBzbWF4CiAgICAgICAgICAqLwpAQCAtOTIsNyArOTIsNyBAQCBzdGF0aWMgY29uc3QgY2hh
ciAqc2V0X3dvcmtlcl9wYXJhbShhcHJfcG9vbF90ICpwLAogICAgICAgICAgICAgcmV0dXJuICJU
VEwgbXVzdCBiZSBhdCBsZWFzdCBvbmUgc2Vjb25kIjsKICAgICAgICAgd29ya2VyLT5zLT50dGwg
PSBhcHJfdGltZV9mcm9tX3NlYyhpdmFsKTsKICAgICB9Ci0gICAgZWxzZSBpZiAoIWFwX2Nhc2Vj
bXBzdHIoa2V5LCAibWluIikpIHsKKyAgICBlbHNlIGlmICghc3RyY2FzZWNtcChrZXksICJtaW4i
KSkgewogICAgICAgICAvKiBJbml0aWFsIG51bWJlciBvZiBjb25uZWN0aW9ucyB0byByZW1vdGUK
ICAgICAgICAgICovCiAgICAgICAgIGl2YWwgPSBhdG9pKHZhbCk7CkBAIC0xMDAsNyArMTAwLDcg
QEAgc3RhdGljIGNvbnN0IGNoYXIgKnNldF93b3JrZXJfcGFyYW0oYXByX3Bvb2xfdCAqcCwKICAg
ICAgICAgICAgIHJldHVybiAiTWluIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXIiOwogICAgICAg
ICB3b3JrZXItPnMtPm1pbiA9IGl2YWw7CiAgICAgfQotICAgIGVsc2UgaWYgKCFhcF9jYXNlY21w
c3RyKGtleSwgIm1heCIpKSB7CisgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAoa2V5LCAibWF4Iikp
IHsKICAgICAgICAgLyogTWF4aW11bSBudW1iZXIgb2YgY29ubmVjdGlvbnMgdG8gcmVtb3RlCiAg
ICAgICAgICAqLwogICAgICAgICBpdmFsID0gYXRvaSh2YWwpOwpAQCAtMTA5LDcgKzEwOSw3IEBA
IHN0YXRpYyBjb25zdCBjaGFyICpzZXRfd29ya2VyX3BhcmFtKGFwcl9wb29sX3QgKnAsCiAgICAg
ICAgIHdvcmtlci0+cy0+aG1heCA9IGl2YWw7CiAgICAgfQogICAgIC8qIFhYWDogTW9yZSBpbnRl
bGlnZW50IG5hbWluZyBuZWVkZWQgKi8KLSAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihrZXks
ICJzbWF4IikpIHsKKyAgICBlbHNlIGlmICghc3RyY2FzZWNtcChrZXksICJzbWF4IikpIHsKICAg
ICAgICAgLyogTWF4aW11bSBudW1iZXIgb2YgY29ubmVjdGlvbnMgdG8gcmVtb3RlIHRoYXQKICAg
ICAgICAgICogd2lsbCBub3QgYmUgZGVzdHJveWVkCiAgICAgICAgICAqLwpAQCAtMTE4LDcgKzEx
OCw3IEBAIHN0YXRpYyBjb25zdCBjaGFyICpzZXRfd29ya2VyX3BhcmFtKGFwcl9wb29sX3QgKnAs
CiAgICAgICAgICAgICByZXR1cm4gIlNtYXggbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlciI7CiAg
ICAgICAgIHdvcmtlci0+cy0+c21heCA9IGl2YWw7CiAgICAgfQotICAgIGVsc2UgaWYgKCFhcF9j
YXNlY21wc3RyKGtleSwgImFjcXVpcmUiKSkgeworICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKGtl
eSwgImFjcXVpcmUiKSkgewogICAgICAgICAvKiBBY3F1aXJlIHRpbWVvdXQgaW4gZ2l2ZW4gdW5p
dCAoZGVmYXVsdCBpcyBtaWxsaXNlY29uZHMpLgogICAgICAgICAgKiBJZiBzZXQgdGhpcyB3aWxs
IGJlIHRoZSBtYXhpbXVtIHRpbWUgdG8KICAgICAgICAgICogd2FpdCBmb3IgYSBmcmVlIGNvbm5l
Y3Rpb24uCkBAIC0xMzAsNyArMTMwLDcgQEAgc3RhdGljIGNvbnN0IGNoYXIgKnNldF93b3JrZXJf
cGFyYW0oYXByX3Bvb2xfdCAqcCwKICAgICAgICAgd29ya2VyLT5zLT5hY3F1aXJlID0gdGltZW91
dDsKICAgICAgICAgd29ya2VyLT5zLT5hY3F1aXJlX3NldCA9IDE7CiAgICAgfQotICAgIGVsc2Ug
aWYgKCFhcF9jYXNlY21wc3RyKGtleSwgInRpbWVvdXQiKSkgeworICAgIGVsc2UgaWYgKCFzdHJj
YXNlY21wKGtleSwgInRpbWVvdXQiKSkgewogICAgICAgICAvKiBDb25uZWN0aW9uIHRpbWVvdXQg
aW4gc2Vjb25kcy4KICAgICAgICAgICogRGVmYXVsdHMgdG8gc2VydmVyIHRpbWVvdXQuCiAgICAg
ICAgICAqLwpAQCAtMTQwLDcgKzE0MCw3IEBAIHN0YXRpYyBjb25zdCBjaGFyICpzZXRfd29ya2Vy
X3BhcmFtKGFwcl9wb29sX3QgKnAsCiAgICAgICAgIHdvcmtlci0+cy0+dGltZW91dCA9IGFwcl90
aW1lX2Zyb21fc2VjKGl2YWwpOwogICAgICAgICB3b3JrZXItPnMtPnRpbWVvdXRfc2V0ID0gMTsK
ICAgICB9Ci0gICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAiaW9idWZmZXJzaXplIikp
IHsKKyAgICBlbHNlIGlmICghc3RyY2FzZWNtcChrZXksICJpb2J1ZmZlcnNpemUiKSkgewogICAg
ICAgICBsb25nIHMgPSBhdG9sKHZhbCk7CiAgICAgICAgIGlmIChzIDwgNTEyICYmIHMpIHsKICAg
ICAgICAgICAgIHJldHVybiAiSU9CdWZmZXJTaXplIG11c3QgYmUgPj0gNTEyIGJ5dGVzLCBvciAw
IGZvciBzeXN0ZW0gZGVmYXVsdC4iOwpAQCAtMTQ4LDcgKzE0OCw3IEBAIHN0YXRpYyBjb25zdCBj
aGFyICpzZXRfd29ya2VyX3BhcmFtKGFwcl9wb29sX3QgKnAsCiAgICAgICAgIHdvcmtlci0+cy0+
aW9fYnVmZmVyX3NpemUgPSAocyA/IHMgOiBBUF9JT0JVRlNJWkUpOwogICAgICAgICB3b3JrZXIt
PnMtPmlvX2J1ZmZlcl9zaXplX3NldCA9IDE7CiAgICAgfQotICAgIGVsc2UgaWYgKCFhcF9jYXNl
Y21wc3RyKGtleSwgInJlY2VpdmVidWZmZXJzaXplIikpIHsKKyAgICBlbHNlIGlmICghc3RyY2Fz
ZWNtcChrZXksICJyZWNlaXZlYnVmZmVyc2l6ZSIpKSB7CiAgICAgICAgIGl2YWwgPSBhdG9pKHZh
bCk7CiAgICAgICAgIGlmIChpdmFsIDwgNTEyICYmIGl2YWwgIT0gMCkgewogICAgICAgICAgICAg
cmV0dXJuICJSZWNlaXZlQnVmZmVyU2l6ZSBtdXN0IGJlID49IDUxMiBieXRlcywgb3IgMCBmb3Ig
c3lzdGVtIGRlZmF1bHQuIjsKQEAgLTE1NiwzNCArMTU2LDM0IEBAIHN0YXRpYyBjb25zdCBjaGFy
ICpzZXRfd29ya2VyX3BhcmFtKGFwcl9wb29sX3QgKnAsCiAgICAgICAgIHdvcmtlci0+cy0+cmVj
dl9idWZmZXJfc2l6ZSA9IGl2YWw7CiAgICAgICAgIHdvcmtlci0+cy0+cmVjdl9idWZmZXJfc2l6
ZV9zZXQgPSAxOwogICAgIH0KLSAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihrZXksICJrZWVw
YWxpdmUiKSkgewotICAgICAgICBpZiAoIWFwX2Nhc2VjbXBzdHIodmFsLCAib24iKSkKKyAgICBl
bHNlIGlmICghc3RyY2FzZWNtcChrZXksICJrZWVwYWxpdmUiKSkgeworICAgICAgICBpZiAoIXN0
cmNhc2VjbXAodmFsLCAib24iKSkKICAgICAgICAgICAgIHdvcmtlci0+cy0+a2VlcGFsaXZlID0g
MTsKLSAgICAgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIodmFsLCAib2ZmIikpCisgICAgICAg
IGVsc2UgaWYgKCFzdHJjYXNlY21wKHZhbCwgIm9mZiIpKQogICAgICAgICAgICAgd29ya2VyLT5z
LT5rZWVwYWxpdmUgPSAwOwogICAgICAgICBlbHNlCiAgICAgICAgICAgICByZXR1cm4gIktlZXBB
bGl2ZSBtdXN0IGJlIE9ufE9mZiI7CiAgICAgICAgIHdvcmtlci0+cy0+a2VlcGFsaXZlX3NldCA9
IDE7CiAgICAgfQotICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGtleSwgImRpc2FibGVyZXVz
ZSIpKSB7Ci0gICAgICAgIGlmICghYXBfY2FzZWNtcHN0cih2YWwsICJvbiIpKQorICAgIGVsc2Ug
aWYgKCFzdHJjYXNlY21wKGtleSwgImRpc2FibGVyZXVzZSIpKSB7CisgICAgICAgIGlmICghc3Ry
Y2FzZWNtcCh2YWwsICJvbiIpKQogICAgICAgICAgICAgd29ya2VyLT5zLT5kaXNhYmxlcmV1c2Ug
PSAxOwotICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cih2YWwsICJvZmYiKSkKKyAgICAg
ICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAodmFsLCAib2ZmIikpCiAgICAgICAgICAgICB3b3JrZXIt
PnMtPmRpc2FibGVyZXVzZSA9IDA7CiAgICAgICAgIGVsc2UKICAgICAgICAgICAgIHJldHVybiAi
RGlzYWJsZVJldXNlIG11c3QgYmUgT258T2ZmIjsKICAgICAgICAgd29ya2VyLT5zLT5kaXNhYmxl
cmV1c2Vfc2V0ID0gMTsKICAgICB9Ci0gICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAi
ZW5hYmxlcmV1c2UiKSkgewotICAgICAgICBpZiAoIWFwX2Nhc2VjbXBzdHIodmFsLCAib24iKSkK
KyAgICBlbHNlIGlmICghc3RyY2FzZWNtcChrZXksICJlbmFibGVyZXVzZSIpKSB7CisgICAgICAg
IGlmICghc3RyY2FzZWNtcCh2YWwsICJvbiIpKQogICAgICAgICAgICAgd29ya2VyLT5zLT5kaXNh
YmxlcmV1c2UgPSAwOwotICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cih2YWwsICJvZmYi
KSkKKyAgICAgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAodmFsLCAib2ZmIikpCiAgICAgICAgICAg
ICB3b3JrZXItPnMtPmRpc2FibGVyZXVzZSA9IDE7CiAgICAgICAgIGVsc2UKICAgICAgICAgICAg
IHJldHVybiAiRW5hYmxlUmV1c2UgbXVzdCBiZSBPbnxPZmYiOwogICAgICAgICB3b3JrZXItPnMt
PmRpc2FibGVyZXVzZV9zZXQgPSAxOwogICAgIH0KLSAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0
cihrZXksICJyb3V0ZSIpKSB7CisgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAoa2V5LCAicm91dGUi
KSkgewogICAgICAgICAvKiBXb3JrZXIgcm91dGUuCiAgICAgICAgICAqLwogICAgICAgICBpZiAo
c3RybGVuKHZhbCkgPj0gc2l6ZW9mKHdvcmtlci0+cy0+cm91dGUpKQpAQCAtMTkxLDcgKzE5MSw3
IEBAIHN0YXRpYyBjb25zdCBjaGFyICpzZXRfd29ya2VyX3BhcmFtKGFwcl9wb29sX3QgKnAsCiAg
ICAgICAgICAgICAgICAgICAgIChpbnQpc2l6ZW9mKHdvcmtlci0+cy0+cm91dGUpKTsKICAgICAg
ICAgUFJPWFlfU1RSTkNQWSh3b3JrZXItPnMtPnJvdXRlLCB2YWwpOwogICAgIH0KLSAgICBlbHNl
IGlmICghYXBfY2FzZWNtcHN0cihrZXksICJyZWRpcmVjdCIpKSB7CisgICAgZWxzZSBpZiAoIXN0
cmNhc2VjbXAoa2V5LCAicmVkaXJlY3QiKSkgewogICAgICAgICAvKiBXb3JrZXIgcmVkaXJlY3Rp
b24gcm91dGUuCiAgICAgICAgICAqLwogICAgICAgICBpZiAoc3RybGVuKHZhbCkgPj0gc2l6ZW9m
KHdvcmtlci0+cy0+cmVkaXJlY3QpKQpAQCAtMTk5LDcgKzE5OSw3IEBAIHN0YXRpYyBjb25zdCBj
aGFyICpzZXRfd29ya2VyX3BhcmFtKGFwcl9wb29sX3QgKnAsCiAgICAgICAgICAgICAgICAgICAg
IChpbnQpc2l6ZW9mKHdvcmtlci0+cy0+cmVkaXJlY3QpKTsKICAgICAgICAgUFJPWFlfU1RSTkNQ
WSh3b3JrZXItPnMtPnJlZGlyZWN0LCB2YWwpOwogICAgIH0KLSAgICBlbHNlIGlmICghYXBfY2Fz
ZWNtcHN0cihrZXksICJzdGF0dXMiKSkgeworICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKGtleSwg
InN0YXR1cyIpKSB7CiAgICAgICAgIGNvbnN0IGNoYXIgKnY7CiAgICAgICAgIGludCBtb2RlID0g
MTsKICAgICAgICAgYXByX3N0YXR1c190IHJ2OwpAQCAtMjE5LDE3ICsyMTksMTcgQEAgc3RhdGlj
IGNvbnN0IGNoYXIgKnNldF93b3JrZXJfcGFyYW0oYXByX3Bvb2xfdCAqcCwKICAgICAgICAgICAg
ICAgICByZXR1cm4gIlVua25vd24gc3RhdHVzIHBhcmFtZXRlciBvcHRpb24iOwogICAgICAgICB9
CiAgICAgfQotICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGtleSwgImZsdXNocGFja2V0cyIp
KSB7Ci0gICAgICAgIGlmICghYXBfY2FzZWNtcHN0cih2YWwsICJvbiIpKQorICAgIGVsc2UgaWYg
KCFzdHJjYXNlY21wKGtleSwgImZsdXNocGFja2V0cyIpKSB7CisgICAgICAgIGlmICghc3RyY2Fz
ZWNtcCh2YWwsICJvbiIpKQogICAgICAgICAgICAgd29ya2VyLT5zLT5mbHVzaF9wYWNrZXRzID0g
Zmx1c2hfb247Ci0gICAgICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKHZhbCwgIm9mZiIpKQor
ICAgICAgICBlbHNlIGlmICghc3RyY2FzZWNtcCh2YWwsICJvZmYiKSkKICAgICAgICAgICAgIHdv
cmtlci0+cy0+Zmx1c2hfcGFja2V0cyA9IGZsdXNoX29mZjsKLSAgICAgICAgZWxzZSBpZiAoIWFw
X2Nhc2VjbXBzdHIodmFsLCAiYXV0byIpKQorICAgICAgICBlbHNlIGlmICghc3RyY2FzZWNtcCh2
YWwsICJhdXRvIikpCiAgICAgICAgICAgICB3b3JrZXItPnMtPmZsdXNoX3BhY2tldHMgPSBmbHVz
aF9hdXRvOwogICAgICAgICBlbHNlCiAgICAgICAgICAgICByZXR1cm4gImZsdXNocGFja2V0cyBt
dXN0IGJlIG9ufG9mZnxhdXRvIjsKICAgICB9Ci0gICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIo
a2V5LCAiZmx1c2h3YWl0IikpIHsKKyAgICBlbHNlIGlmICghc3RyY2FzZWNtcChrZXksICJmbHVz
aHdhaXQiKSkgewogICAgICAgICBpdmFsID0gYXRvaSh2YWwpOwogICAgICAgICBpZiAoaXZhbCA+
IDEwMDAgfHwgaXZhbCA8IDApIHsKICAgICAgICAgICAgIHJldHVybiAiZmx1c2h3YWl0IG11c3Qg
YmUgPD0gMTAwMCwgb3IgMCBmb3Igc3lzdGVtIGRlZmF1bHQgb2YgMTAgbWlsbHNlY29uZHMuIjsK
QEAgLTIzOSw3ICsyMzksNyBAQCBzdGF0aWMgY29uc3QgY2hhciAqc2V0X3dvcmtlcl9wYXJhbShh
cHJfcG9vbF90ICpwLAogICAgICAgICBlbHNlCiAgICAgICAgICAgICB3b3JrZXItPnMtPmZsdXNo
X3dhaXQgPSBpdmFsICogMTAwMDsgICAgLyogY2hhbmdlIHRvIG1pY3Jvc2Vjb25kcyAqLwogICAg
IH0KLSAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihrZXksICJwaW5nIikpIHsKKyAgICBlbHNl
IGlmICghc3RyY2FzZWNtcChrZXksICJwaW5nIikpIHsKICAgICAgICAgLyogUGluZy9Qb25nIHRp
bWVvdXQgaW4gZ2l2ZW4gdW5pdCAoZGVmYXVsdCBpcyBzZWNvbmQpLgogICAgICAgICAgKi8KICAg
ICAgICAgaWYgKGFwX3RpbWVvdXRfcGFyYW1ldGVyX3BhcnNlKHZhbCwgJnRpbWVvdXQsICJzIikg
IT0gQVBSX1NVQ0NFU1MpCkBAIC0yNDksMTMgKzI0OSwxMyBAQCBzdGF0aWMgY29uc3QgY2hhciAq
c2V0X3dvcmtlcl9wYXJhbShhcHJfcG9vbF90ICpwLAogICAgICAgICB3b3JrZXItPnMtPnBpbmdf
dGltZW91dCA9IHRpbWVvdXQ7CiAgICAgICAgIHdvcmtlci0+cy0+cGluZ190aW1lb3V0X3NldCA9
IDE7CiAgICAgfQotICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGtleSwgImxic2V0IikpIHsK
KyAgICBlbHNlIGlmICghc3RyY2FzZWNtcChrZXksICJsYnNldCIpKSB7CiAgICAgICAgIGl2YWwg
PSBhdG9pKHZhbCk7CiAgICAgICAgIGlmIChpdmFsIDwgMCB8fCBpdmFsID4gOTkpCiAgICAgICAg
ICAgICByZXR1cm4gImxic2V0IG11c3QgYmUgYmV0d2VlbiAwIGFuZCA5OSI7CiAgICAgICAgIHdv
cmtlci0+cy0+bGJzZXQgPSBpdmFsOwogICAgIH0KLSAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0
cihrZXksICJjb25uZWN0aW9udGltZW91dCIpKSB7CisgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAo
a2V5LCAiY29ubmVjdGlvbnRpbWVvdXQiKSkgewogICAgICAgICAvKiBSZXF1ZXN0IHRpbWVvdXQg
aW4gZ2l2ZW4gdW5pdCAoZGVmYXVsdCBpcyBzZWNvbmQpLgogICAgICAgICAgKiBEZWZhdWx0cyB0
byBjb25uZWN0aW9uIHRpbWVvdXQKICAgICAgICAgICovCkBAIC0yNjYsNyArMjY2LDcgQEAgc3Rh
dGljIGNvbnN0IGNoYXIgKnNldF93b3JrZXJfcGFyYW0oYXByX3Bvb2xfdCAqcCwKICAgICAgICAg
d29ya2VyLT5zLT5jb25uX3RpbWVvdXQgPSB0aW1lb3V0OwogICAgICAgICB3b3JrZXItPnMtPmNv
bm5fdGltZW91dF9zZXQgPSAxOwogICAgIH0KLSAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihr
ZXksICJmbHVzaGVyIikpIHsKKyAgICBlbHNlIGlmICghc3RyY2FzZWNtcChrZXksICJmbHVzaGVy
IikpIHsKICAgICAgICAgaWYgKHN0cmxlbih2YWwpID49IHNpemVvZih3b3JrZXItPnMtPmZsdXNo
ZXIpKQogICAgICAgICAgICAgYXByX3BzcHJpbnRmKHAsICJmbHVzaGVyIG5hbWUgbGVuZ3RoIG11
c3QgYmUgPCAlZCBjaGFyYWN0ZXJzIiwKICAgICAgICAgICAgICAgICAgICAgKGludClzaXplb2Yo
d29ya2VyLT5zLT5mbHVzaGVyKSk7CkBAIC0yODYsNyArMjg2LDcgQEAgc3RhdGljIGNvbnN0IGNo
YXIgKnNldF9iYWxhbmNlcl9wYXJhbShwcm94eV9zZXJ2ZXIKIHsKIAogICAgIGludCBpdmFsOwot
ICAgIGlmICghYXBfY2FzZWNtcHN0cihrZXksICJzdGlja3lzZXNzaW9uIikpIHsKKyAgICBpZiAo
IXN0cmNhc2VjbXAoa2V5LCAic3RpY2t5c2Vzc2lvbiIpKSB7CiAgICAgICAgIGNoYXIgKnBhdGg7
CiAgICAgICAgIC8qIEJhbGFuY2VyIHN0aWNreSBzZXNzaW9uIG5hbWUuCiAgICAgICAgICAqIFNl
dCB0byBzb21ldGhpbmcgbGlrZSBKU0VTU0lPTklEIG9yCkBAIC0zMDMsMTIgKzMwMywxMiBAQCBz
dGF0aWMgY29uc3QgY2hhciAqc2V0X2JhbGFuY2VyX3BhcmFtKHByb3h5X3NlcnZlcgogICAgICAg
ICAgICAgUFJPWFlfU1RSTkNQWShiYWxhbmNlci0+cy0+c3RpY2t5X3BhdGgsIHBhdGgpOwogICAg
ICAgICB9CiAgICAgfQotICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGtleSwgInN0aWNreXNl
c3Npb25zZXAiKSkgeworICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKGtleSwgInN0aWNreXNlc3Np
b25zZXAiKSkgewogICAgICAgICAvKiBzZXBhcmF0b3IvZGVsaW1pdGVyIGZvciBzZXNzaW9uaWQg
YW5kIHJvdXRlLAogICAgICAgICAgKiBub3JtYWxseSAnLicKICAgICAgICAgICovCiAgICAgICAg
IGlmIChzdHJsZW4odmFsKSAhPSAxKSB7Ci0gICAgICAgICAgICBpZiAoIWFwX2Nhc2VjbXBzdHIo
dmFsLCAib2ZmIikpCisgICAgICAgICAgICBpZiAoIXN0cmNhc2VjbXAodmFsLCAib2ZmIikpCiAg
ICAgICAgICAgICAgICAgYmFsYW5jZXItPnMtPnN0aWNreV9zZXBhcmF0b3IgPSAwOwogICAgICAg
ICAgICAgZWxzZSAgICAgIAogICAgICAgICAgICAgICAgIHJldHVybiAic3RpY2t5c2Vzc2lvbnNl
cCBtdXN0IGJlIGEgc2luZ2xlIGNoYXJhY3RlciBvciBPZmYiOwpAQCAtMzE3LDIwICszMTcsMjAg
QEAgc3RhdGljIGNvbnN0IGNoYXIgKnNldF9iYWxhbmNlcl9wYXJhbShwcm94eV9zZXJ2ZXIKICAg
ICAgICAgICAgIGJhbGFuY2VyLT5zLT5zdGlja3lfc2VwYXJhdG9yID0gKnZhbDsKICAgICAgICAg
YmFsYW5jZXItPnMtPnN0aWNreV9zZXBhcmF0b3Jfc2V0ID0gMTsKICAgICB9Ci0gICAgZWxzZSBp
ZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAibm9mYWlsb3ZlciIpKSB7CisgICAgZWxzZSBpZiAoIXN0
cmNhc2VjbXAoa2V5LCAibm9mYWlsb3ZlciIpKSB7CiAgICAgICAgIC8qIElmIHNldCB0byAnb24n
IHRoZSBzZXNzaW9uIHdpbGwgYnJlYWsKICAgICAgICAgICogaWYgdGhlIHdvcmtlciBpcyBpbiBl
cnJvciBzdGF0ZSBvcgogICAgICAgICAgKiBkaXNhYmxlZC4KICAgICAgICAgICovCi0gICAgICAg
IGlmICghYXBfY2FzZWNtcHN0cih2YWwsICJvbiIpKQorICAgICAgICBpZiAoIXN0cmNhc2VjbXAo
dmFsLCAib24iKSkKICAgICAgICAgICAgIGJhbGFuY2VyLT5zLT5zdGlja3lfZm9yY2UgPSAxOwot
ICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cih2YWwsICJvZmYiKSkKKyAgICAgICAgZWxz
ZSBpZiAoIXN0cmNhc2VjbXAodmFsLCAib2ZmIikpCiAgICAgICAgICAgICBiYWxhbmNlci0+cy0+
c3RpY2t5X2ZvcmNlID0gMDsKICAgICAgICAgZWxzZQogICAgICAgICAgICAgcmV0dXJuICJmYWls
b3ZlciBtdXN0IGJlIE9ufE9mZiI7CiAgICAgICAgIGJhbGFuY2VyLT5zLT5zdGlja3lfZm9yY2Vf
c2V0ID0gMTsKICAgICB9Ci0gICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAidGltZW91
dCIpKSB7CisgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAoa2V5LCAidGltZW91dCIpKSB7CiAgICAg
ICAgIC8qIEJhbGFuY2VyIHRpbWVvdXQgaW4gc2Vjb25kcy4KICAgICAgICAgICogSWYgc2V0IHRo
aXMgd2lsbCBiZSB0aGUgbWF4aW11bSB0aW1lIHRvCiAgICAgICAgICAqIHdhaXQgZm9yIGEgZnJl
ZSB3b3JrZXIuCkBAIC0zNDEsNyArMzQxLDcgQEAgc3RhdGljIGNvbnN0IGNoYXIgKnNldF9iYWxh
bmNlcl9wYXJhbShwcm94eV9zZXJ2ZXIKICAgICAgICAgICAgIHJldHVybiAidGltZW91dCBtdXN0
IGJlIGF0IGxlYXN0IG9uZSBzZWNvbmQiOwogICAgICAgICBiYWxhbmNlci0+cy0+dGltZW91dCA9
IGFwcl90aW1lX2Zyb21fc2VjKGl2YWwpOwogICAgIH0KLSAgICBlbHNlIGlmICghYXBfY2FzZWNt
cHN0cihrZXksICJtYXhhdHRlbXB0cyIpKSB7CisgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAoa2V5
LCAibWF4YXR0ZW1wdHMiKSkgewogICAgICAgICAvKiBNYXhpbXVtIG51bWJlciBvZiBmYWlsb3Zl
ciBhdHRlbXB0cyBiZWZvcmUKICAgICAgICAgICogZ2l2aW5nIHVwLgogICAgICAgICAgKi8KQEAg
LTM1MSw3ICszNTEsNyBAQCBzdGF0aWMgY29uc3QgY2hhciAqc2V0X2JhbGFuY2VyX3BhcmFtKHBy
b3h5X3NlcnZlcgogICAgICAgICBiYWxhbmNlci0+cy0+bWF4X2F0dGVtcHRzID0gaXZhbDsKICAg
ICAgICAgYmFsYW5jZXItPnMtPm1heF9hdHRlbXB0c19zZXQgPSAxOwogICAgIH0KLSAgICBlbHNl
IGlmICghYXBfY2FzZWNtcHN0cihrZXksICJsYm1ldGhvZCIpKSB7CisgICAgZWxzZSBpZiAoIXN0
cmNhc2VjbXAoa2V5LCAibGJtZXRob2QiKSkgewogICAgICAgICBwcm94eV9iYWxhbmNlcl9tZXRo
b2QgKnByb3ZpZGVyOwogICAgICAgICBpZiAoc3RybGVuKHZhbCkgPiAoc2l6ZW9mKGJhbGFuY2Vy
LT5zLT5sYnBuYW1lKS0xKSkKICAgICAgICAgICAgIHJldHVybiAidW5rbm93biBsYm1ldGhvZCI7
CkBAIC0zNjgsMjAgKzM2OCwyMCBAQCBzdGF0aWMgY29uc3QgY2hhciAqc2V0X2JhbGFuY2VyX3Bh
cmFtKHByb3h5X3NlcnZlcgogICAgICAgICB9CiAgICAgICAgIHJldHVybiAidW5rbm93biBsYm1l
dGhvZCI7CiAgICAgfQotICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGtleSwgInNjb2xvbnBh
dGhkZWxpbSIpKSB7CisgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAoa2V5LCAic2NvbG9ucGF0aGRl
bGltIikpIHsKICAgICAgICAgLyogSWYgc2V0IHRvICdvbicgdGhlbiAnOycgd2lsbCBhbHNvIGJl
CiAgICAgICAgICAqIHVzZWQgYXMgYSBzZXNzaW9uIHBhdGggc2VwYXJhdG9yL2RlbGltIChhbGEK
ICAgICAgICAgICogbW9kX2prKQogICAgICAgICAgKi8KLSAgICAgICAgaWYgKCFhcF9jYXNlY21w
c3RyKHZhbCwgIm9uIikpCisgICAgICAgIGlmICghc3RyY2FzZWNtcCh2YWwsICJvbiIpKQogICAg
ICAgICAgICAgYmFsYW5jZXItPnMtPnNjb2xvbnNlcCA9IDE7Ci0gICAgICAgIGVsc2UgaWYgKCFh
cF9jYXNlY21wc3RyKHZhbCwgIm9mZiIpKQorICAgICAgICBlbHNlIGlmICghc3RyY2FzZWNtcCh2
YWwsICJvZmYiKSkKICAgICAgICAgICAgIGJhbGFuY2VyLT5zLT5zY29sb25zZXAgPSAwOwogICAg
ICAgICBlbHNlCiAgICAgICAgICAgICByZXR1cm4gInNjb2xvbnBhdGhkZWxpbSBtdXN0IGJlIE9u
fE9mZiI7CiAgICAgICAgIGJhbGFuY2VyLT5zLT5zY29sb25zZXBfc2V0ID0gMTsKICAgICB9Ci0g
ICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAiZmFpbG9uc3RhdHVzIikpIHsKKyAgICBl
bHNlIGlmICghc3RyY2FzZWNtcChrZXksICJmYWlsb25zdGF0dXMiKSkgewogICAgICAgICBjaGFy
ICp2YWxfc3BsaXQ7CiAgICAgICAgIGNoYXIgKnN0YXR1czsKICAgICAgICAgY2hhciAqdG9rX3N0
YXRlOwpAQCAtNDAzLDE3ICs0MDMsMTcgQEAgc3RhdGljIGNvbnN0IGNoYXIgKnNldF9iYWxhbmNl
cl9wYXJhbShwcm94eV9zZXJ2ZXIKICAgICAgICAgfQogCiAgICAgfQotICAgIGVsc2UgaWYgKCFh
cF9jYXNlY21wc3RyKGtleSwgImZhaWxvbnRpbWVvdXQiKSkgewotICAgICAgICBpZiAoIWFwX2Nh
c2VjbXBzdHIodmFsLCAib24iKSkKKyAgICBlbHNlIGlmICghc3RyY2FzZWNtcChrZXksICJmYWls
b250aW1lb3V0IikpIHsKKyAgICAgICAgaWYgKCFzdHJjYXNlY21wKHZhbCwgIm9uIikpCiAgICAg
ICAgICAgICBiYWxhbmNlci0+ZmFpbG9udGltZW91dCA9IDE7Ci0gICAgICAgIGVsc2UgaWYgKCFh
cF9jYXNlY21wc3RyKHZhbCwgIm9mZiIpKQorICAgICAgICBlbHNlIGlmICghc3RyY2FzZWNtcCh2
YWwsICJvZmYiKSkKICAgICAgICAgICAgIGJhbGFuY2VyLT5mYWlsb250aW1lb3V0ID0gMDsKICAg
ICAgICAgZWxzZQogICAgICAgICAgICAgcmV0dXJuICJmYWlsb250aW1lb3V0IG11c3QgYmUgT258
T2ZmIjsKICAgICAgICAgYmFsYW5jZXItPmZhaWxvbnRpbWVvdXRfc2V0ID0gMTsKICAgICB9Ci0g
ICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAibm9uY2UiKSkgewotICAgICAgICBpZiAo
IWFwX2Nhc2VjbXBzdHIodmFsLCAiTm9uZSIpKSB7CisgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAo
a2V5LCAibm9uY2UiKSkgeworICAgICAgICBpZiAoIXN0cmNhc2VjbXAodmFsLCAiTm9uZSIpKSB7
CiAgICAgICAgICAgICAqYmFsYW5jZXItPnMtPm5vbmNlID0gJ1wwJzsKICAgICAgICAgfQogICAg
ICAgICBlbHNlIHsKQEAgLTQyMyw3ICs0MjMsNyBAQCBzdGF0aWMgY29uc3QgY2hhciAqc2V0X2Jh
bGFuY2VyX3BhcmFtKHByb3h5X3NlcnZlcgogICAgICAgICB9CiAgICAgICAgIGJhbGFuY2VyLT5z
LT5ub25jZV9zZXQgPSAxOwogICAgIH0KLSAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihrZXks
ICJncm93dGgiKSkgeworICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKGtleSwgImdyb3d0aCIpKSB7
CiAgICAgICAgIGl2YWwgPSBhdG9pKHZhbCk7CiAgICAgICAgIGlmIChpdmFsIDwgMSB8fCBpdmFs
ID4gMTAwKSAgIC8qIGFyYml0cmFyeSBsaW1pdCBoZXJlICovCiAgICAgICAgICAgICByZXR1cm4g
Imdyb3d0aCBtdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAwIjsKQEAgLTQzMCwxMCArNDMwLDEwIEBA
IHN0YXRpYyBjb25zdCBjaGFyICpzZXRfYmFsYW5jZXJfcGFyYW0ocHJveHlfc2VydmVyCiAgICAg
ICAgIGJhbGFuY2VyLT5ncm93dGggPSBpdmFsOwogICAgICAgICBiYWxhbmNlci0+Z3Jvd3RoX3Nl
dCA9IDE7CiAgICAgfQotICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGtleSwgImZvcmNlcmVj
b3ZlcnkiKSkgewotICAgICAgICBpZiAoIWFwX2Nhc2VjbXBzdHIodmFsLCAib24iKSkKKyAgICBl
bHNlIGlmICghc3RyY2FzZWNtcChrZXksICJmb3JjZXJlY292ZXJ5IikpIHsKKyAgICAgICAgaWYg
KCFzdHJjYXNlY21wKHZhbCwgIm9uIikpCiAgICAgICAgICAgICBiYWxhbmNlci0+cy0+Zm9yY2Vy
ZWNvdmVyeSA9IDE7Ci0gICAgICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKHZhbCwgIm9mZiIp
KQorICAgICAgICBlbHNlIGlmICghc3RyY2FzZWNtcCh2YWwsICJvZmYiKSkKICAgICAgICAgICAg
IGJhbGFuY2VyLT5zLT5mb3JjZXJlY292ZXJ5ID0gMDsKICAgICAgICAgZWxzZQogICAgICAgICAg
ICAgcmV0dXJuICJmb3JjZXJlY292ZXJ5IG11c3QgYmUgT258T2ZmIjsK
--001a1139b2940acdd305254b6936--

From dev-return-84710-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 16:02:22 2015
Return-Path: <dev-return-84710-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CCDED18DF7
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 16:02:22 +0000 (UTC)
Received: (qmail 28154 invoked by uid 500); 24 Nov 2015 16:02:22 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 28083 invoked by uid 500); 24 Nov 2015 16:02:22 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 28073 invoked by uid 99); 24 Nov 2015 16:02:22 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 16:02:22 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id D5565C2EB8
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:02:21 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id a6lZXeCKaRy1 for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 16:02:15 +0000 (UTC)
Received: from mail-qg0-f48.google.com (mail-qg0-f48.google.com [209.85.192.48])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id D678F441A4
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:02:14 +0000 (UTC)
Received: by qgea14 with SMTP id a14so13367353qge.0
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 08:02:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=OhzqrFQSv6hJxabugjDqmmJX7knWnNoLCMtBE66QZew=;
        b=gDShTehrnJXrsa0NbPilOQxX6kTepzrE1kCISp3kQGW8/7Q3c9rU96vYiPUKtfURDv
         jdi4sp4qfctxK6CBzHZ8i3P3LjKscxcFeWYOo0Yy8jWaQ4U84ce7fON8ebtYFyUwHX9V
         RRgPY1MVsmScWQNmTDwdzBKfQl+CMRKS+iAUuoQ4d9hXgpTpw8RFC/HzsWJPZbAtudqh
         1+1mq7xZM3iV9alE2rUBRSfQYfDDxHIEp4fYm3TboTE3YJiI2/SYTVJ/nKHwdcLz+1vX
         Gt5lZHCcAGAAcPbUnsrLyK4NHUTeHjXFkJ4/Q1YdcE+Qeo9n9Q2ABZR56zPcz+qdrAVG
         ka7Q==
MIME-Version: 1.0
X-Received: by 10.140.95.66 with SMTP id h60mr34389512qge.14.1448380934474;
 Tue, 24 Nov 2015 08:02:14 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 24 Nov 2015 08:02:14 -0800 (PST)
In-Reply-To: <CACsi252e3hQ2+7f2LWLcuDhLMWB=Uv+iOwK+cGQ+mkzaKHRiag@mail.gmail.com>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org>
	<CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com>
	<CALK=YjOEWYkx58iWaPrm72T-ZTV05tkA2XcCBhJHnxEdFTdOBw@mail.gmail.com>
	<CACsi252e3hQ2+7f2LWLcuDhLMWB=Uv+iOwK+cGQ+mkzaKHRiag@mail.gmail.com>
Date: Tue, 24 Nov 2015 17:02:14 +0100
Message-ID: <CAKQ1sVNRKjVkywupqGSUe3fTtWNP_DTBwpRdepQ10mONnLX4AA@mail.gmail.com>
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 4:49 PM, William A Rowe Jr <wrowe@rowe-clan.net> wrote:
>
> Does it make sense to expose the ap_tolower_ascii() function?

+1, possibly an inline one or a macro...

> We could call it ap_tolower_plaintext()

I prefer ascii().

From dev-return-84711-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 16:07:57 2015
Return-Path: <dev-return-84711-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 50E5F18E42
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 16:07:57 +0000 (UTC)
Received: (qmail 47375 invoked by uid 500); 24 Nov 2015 16:07:51 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 47302 invoked by uid 500); 24 Nov 2015 16:07:51 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 47292 invoked by uid 99); 24 Nov 2015 16:07:51 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 16:07:51 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 3B45AC1418
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:07:51 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.98
X-Spam-Level: ***
X-Spam-Status: No, score=3.98 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id ij-Y9TnChuAH for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 16:07:50 +0000 (UTC)
Received: from vms173001pub.verizon.net (vms173001pub.verizon.net [206.46.173.1])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 2506D20C34
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:07:49 +0000 (UTC)
Received: from [192.168.1.8] ([100.1.236.52]) by vms173001.mailsrvcs.net
 (Oracle Communications Messaging Server 7.0.5.32.0 64bit (built Jul 16 2014))
 with ESMTPA id <0NYB0088MU4E7P40@vms173001.mailsrvcs.net> for
 dev@httpd.apache.org; Tue, 24 Nov 2015 10:07:31 -0600 (CST)
X-CMAE-Score: 0
X-CMAE-Analysis: v=2.1 cv=MtGvkDue c=1 sm=1 tr=0	a=UorMnhrCY2jH/mPejITChw==:117
 a=LaogzpLLAAAA:8 a=oR5dmqMzAAAA:8	a=qtqOOiqGOCEA:10 a=r77TgQKjGQsHNAKrUKIA:9
 a=PvkirHTqj-AHnEfnBvEA:9	a=QEXdDO2ut3YA:10 a=3IRvYuqbrpgA:10 a=pGLkceISAAAA:8
	a=aEH_0tp0j7M3ZmcVxxkA:9 a=umPKtbaLSQCDe7C9:21 a=_W_S_7VecoQA:10
Subject: Re: strncasecmp
To: dev@httpd.apache.org
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
 <CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
 <301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
 <5653732E.9030401@wanadoo.fr>
 <6C408DFD-A50D-4DDF-8090-6488CA9C06C4@jaguNET.com>
 <CACsi253ZgU4waaAiEQm8E6X0gVoEfPw=JdQQ5t7KMNcma5EERA@mail.gmail.com>
From: "Mikhail T." <mi+thun@aldan.algebra.com>
Message-id: <56548B3E.7080004@aldan.algebra.com>
Date: Tue, 24 Nov 2015 11:07:26 -0500
User-Agent: Mozilla/5.0 (X11; FreeBSD amd64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-version: 1.0
In-reply-to:
 <CACsi253ZgU4waaAiEQm8E6X0gVoEfPw=JdQQ5t7KMNcma5EERA@mail.gmail.com>
Content-type: multipart/alternative;
 boundary=------------070102070508010202030603

This is a multi-part message in MIME format.
--------------070102070508010202030603
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit

On 24.11.2015 10:08, William A Rowe Jr wrote:
> As long as this function is promoted for fast ASCII-specific token
> recognition and has no other unexpected equalities, it serves a useful
> purpose.
Because of this, I'd suggest renaming it to something, that emphasizes
it being ASCII-only.

    -mi


--------------070102070508010202030603
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: 7bit

<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  </head>
  <body bgcolor="#FFFFFF" text="#000000">
    <div class="moz-cite-prefix">On 24.11.2015 10:08, William A Rowe Jr
      wrote:<br>
    </div>
    <blockquote
cite="mid:CACsi253ZgU4waaAiEQm8E6X0gVoEfPw=JdQQ5t7KMNcma5EERA@mail.gmail.com"
      type="cite">
      <div>As long as this function is promoted for fast ASCII-specific
        token</div>
      <div>recognition and has no other unexpected equalities, it serves
        a useful</div>
      <div>purpose.</div>
    </blockquote>
    Because of this, I'd suggest renaming it to something, that
    emphasizes it being ASCII-only.<br>
    <blockquote>-mi <br>
    </blockquote>
  </body>
</html>

--------------070102070508010202030603--

From dev-return-84712-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 16:08:05 2015
Return-Path: <dev-return-84712-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0681318E43
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 16:08:05 +0000 (UTC)
Received: (qmail 48446 invoked by uid 500); 24 Nov 2015 16:08:04 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 48373 invoked by uid 500); 24 Nov 2015 16:08:04 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 48363 invoked by uid 99); 24 Nov 2015 16:08:04 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 16:08:04 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id D7BE71A0B21
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:08:03 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 7bkh7TaE9d-Z for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 16:07:55 +0000 (UTC)
Received: from mail-io0-f171.google.com (mail-io0-f171.google.com [209.85.223.171])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 8D02F24E1A
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:07:54 +0000 (UTC)
Received: by ioir85 with SMTP id r85so24875421ioi.1
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 08:07:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=MZOuCSDDA4WQKkbZdfr0sbSrPoNUkmEmqgGrMSLpGXg=;
        b=bu8ahVWXmOZGY9h7L2Rifx3GePJy9emWlYikfzrevMcYmc93M9qRF4HZEUCPnzyKDv
         y/iwYlU0M4qt1bNj61/GXIn/SGJol7LX+CEk3YbZqU/Ysr+8XonoFROqP27K8WVFHTBA
         gI5V/CAIHN6kEMdCKrhLgyW8yxToctkxbhJlaPtxMd5ngXvjJfJssp/7RqrWOGfdrDcr
         l2zI1lwcugO5HOFetYVJiMFEVyWegu2o+f9uzQdZFsbY6T73tl1mMmkk3t9TubTNWmxY
         Il+I3RtAzqx0MteFSjCn/KR/b0M1tR2r29en6VK+eF55ZX7uN6uDnlCzwtvEM3IzWaGs
         bRxA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=MZOuCSDDA4WQKkbZdfr0sbSrPoNUkmEmqgGrMSLpGXg=;
        b=XwFUUIqQT3Sgxt1C06Wqd8IZJ2EdfiIkXxWQaxp7TW1MgXTeK3etTcwFVm9a0OE2kK
         RpBL/6Z4bkvLWKsefDjrTRpfatoGomidwLWZ/ctjyhIyyWtxHA/cOAJDpXMKF7ULYaw2
         Pl4JEe7FnrxCCZJQdjKxejVl5FYjNf7+Yg5j4sWTxtG49iorpuMLgcG1rlB7UWiWCmD0
         cH8hYwZqhl2t64fw7eQ7pIM0HOh8EOMYzbl8KR+wnK4059zyWei0sivqgq7nerl7QPec
         rFx7d5paZ5nQCmehGCXyvt6j1xjVE/8Yqk8TnXtLNQjgUuaHSkSG1xE2uajtFUhzHiCd
         /V1A==
X-Gm-Message-State: ALoCoQlVrp4GoX29MFYsxxC8I8akrwKvsg9VB1KIVEx6nMYcHt9nK4iumlFIGllaS+Uz7RUEjXSP
MIME-Version: 1.0
X-Received: by 10.107.34.199 with SMTP id i190mr31935955ioi.150.1448381273399;
 Tue, 24 Nov 2015 08:07:53 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Tue, 24 Nov 2015 08:07:53 -0800 (PST)
In-Reply-To: <CALK=YjMhgfB+Dtm7=RNVdkPFcMJLN_Zcw-MstFiMomN8fajS7w@mail.gmail.com>
References: <20151123155826.39A703A043E@svn01-us-west.apache.org>
	<CACsi252Ypb8wgfryMt689sn0nnJwkBrNpjaE7KzFwd3wk2LhdQ@mail.gmail.com>
	<5437AE63-0061-4346-98B5-F00D6D804E87@jaguNET.com>
	<CACsi250cw1NgJs9u6tdDNf90_UOdWHvKvosOmMe9XTbyi0Q_dQ@mail.gmail.com>
	<4AFAB327-14AD-44F0-8927-E289B28BCF63@jaguNET.com>
	<CACsi250QUg-xra6uwfvsNT_SJ=CPu2UNkQR0aSmLZDxG=hjSAw@mail.gmail.com>
	<CALK=YjMhgfB+Dtm7=RNVdkPFcMJLN_Zcw-MstFiMomN8fajS7w@mail.gmail.com>
Date: Tue, 24 Nov 2015 10:07:53 -0600
Message-ID: <CACsi253sVFy=85nBO4-Vp6REBe_mD2JZX3uPTwv-8Jf1E51EDA@mail.gmail.com>
Subject: Re: svn commit: r1715859 - /httpd/httpd/trunk/include/httpd.h
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1140d9444d2a0205254b8b33

--001a1140d9444d2a0205254b8b33
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 9:46 AM, Eric Covener <covener@gmail.com> wrote:

> On Tue, Nov 24, 2015 at 10:41 AM, William A Rowe Jr <wrowe@rowe-clan.net>
> wrote:
> > You are right, calling out "This implementation provides ASCII-ordering
> > of strings (EBCDIC text is also ASCII ordered on those platforms)"
> > might have been clearer?  Eric, what phrasing would make sense to you
> > as a user/maintainer of the httpd EBCDIC port?
>
> "Provides C/POSIX strcasecmp ordering, for alpha-numerics only"?
>

Well, we are sorting the entire ASCII so I guess we can drop "for
alpha-numerics only".

What we want to warn the user is that the sortation of extended characters
outside of
the normal C/POSIX range is undefined (not rejected), and that extended
characters
are not compared case-insensitively.

For extra confusion note the function says next to nothing in the XL
reference;

https://www-01.ibm.com/support/knowledgecenter/SSLTBW_2.1.0/com.ibm.zos.v2r1.bpxbd00/rsrncp.htm?lang=en

but this function goes into some of the dirty details...

https://www-01.ibm.com/support/knowledgecenter/SSLTBW_2.1.0/com.ibm.zos.v2r1.bpxbd00/risasc.htm

I found a nice summary of the state of EBCDIC for c programming over here;

http://www.longpelaexpertise.com/ezine/LostinTranslation1.php

--001a1140d9444d2a0205254b8b33
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On T=
ue, Nov 24, 2015 at 9:46 AM, Eric Covener <span dir=3D"ltr">&lt;<a href=3D"=
mailto:covener@gmail.com" target=3D"_blank">covener@gmail.com</a>&gt;</span=
> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0=
.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-s=
tyle:solid;padding-left:1ex"><span class=3D"">On Tue, Nov 24, 2015 at 10:41=
 AM, William A Rowe Jr &lt;<a href=3D"mailto:wrowe@rowe-clan.net">wrowe@row=
e-clan.net</a>&gt; wrote:<br>
&gt; You are right, calling out &quot;This implementation provides ASCII-or=
dering<br>
&gt; of strings (EBCDIC text is also ASCII ordered on those platforms)&quot=
;<br>
&gt; might have been clearer?=C2=A0 Eric, what phrasing would make sense to=
 you<br>
&gt; as a user/maintainer of the httpd EBCDIC port?<br>
<br>
</span>&quot;Provides C/POSIX strcasecmp ordering, for alpha-numerics only&=
quot;?<br>
</blockquote></div><br></div><div class=3D"gmail_extra">Well, we are sortin=
g the entire ASCII so I guess we can drop &quot;for alpha-numerics only&quo=
t;.</div><div class=3D"gmail_extra"><br></div><div class=3D"gmail_extra">Wh=
at we want to warn the user is that the sortation of extended characters ou=
tside of</div><div class=3D"gmail_extra">the normal C/POSIX range is undefi=
ned (not rejected), and that extended characters</div><div class=3D"gmail_e=
xtra">are not compared case-insensitively.</div><div class=3D"gmail_extra">=
<br></div><div class=3D"gmail_extra">For extra confusion note the function =
says next to nothing in the XL reference;<br></div><div class=3D"gmail_extr=
a"><br></div><div class=3D"gmail_extra"><a href=3D"https://www-01.ibm.com/s=
upport/knowledgecenter/SSLTBW_2.1.0/com.ibm.zos.v2r1.bpxbd00/rsrncp.htm?lan=
g=3Den">https://www-01.ibm.com/support/knowledgecenter/SSLTBW_2.1.0/com.ibm=
.zos.v2r1.bpxbd00/rsrncp.htm?lang=3Den</a><br></div><div class=3D"gmail_ext=
ra"><br></div><div class=3D"gmail_extra">but this function goes into some o=
f the dirty details...</div><div class=3D"gmail_extra"><br></div><div class=
=3D"gmail_extra"><a href=3D"https://www-01.ibm.com/support/knowledgecenter/=
SSLTBW_2.1.0/com.ibm.zos.v2r1.bpxbd00/risasc.htm">https://www-01.ibm.com/su=
pport/knowledgecenter/SSLTBW_2.1.0/com.ibm.zos.v2r1.bpxbd00/risasc.htm</a><=
br></div><div class=3D"gmail_extra"><br></div><div class=3D"gmail_extra">I =
found a nice summary of the state of EBCDIC for c programming over here;<br=
></div><div class=3D"gmail_extra"><br></div><div class=3D"gmail_extra"><a h=
ref=3D"http://www.longpelaexpertise.com/ezine/LostinTranslation1.php">http:=
//www.longpelaexpertise.com/ezine/LostinTranslation1.php</a><br></div><div =
class=3D"gmail_extra"><br></div><div class=3D"gmail_extra"><br></div></div>

--001a1140d9444d2a0205254b8b33--

From dev-return-84713-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 16:09:23 2015
Return-Path: <dev-return-84713-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D3E5618E5A
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 16:09:23 +0000 (UTC)
Received: (qmail 56074 invoked by uid 500); 24 Nov 2015 16:09:23 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 56002 invoked by uid 500); 24 Nov 2015 16:09:23 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 55992 invoked by uid 99); 24 Nov 2015 16:09:23 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 16:09:23 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id DFEB7C2ECC
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:09:22 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.562
X-Spam-Level:
X-Spam-Status: No, score=-0.562 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.562, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id Xq9r8foSYqCm for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 16:09:15 +0000 (UTC)
Received: from monica.sharp.fm (monica.sharp.fm [80.168.143.5])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTP id C4943441C0
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:09:14 +0000 (UTC)
Received: from [10.105.35.56] (unknown [5.56.169.80])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	(Authenticated sender: minfrin@sharp.fm)
	by monica.sharp.fm (Postfix) with ESMTPSA id F1C8781F2E
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:09:07 +0000 (GMT)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: Graham Leggett <minfrin@sharp.fm>
In-Reply-To: <CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com>
Date: Tue, 24 Nov 2015 18:09:06 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <3F16527F-A2FE-4CEE-A87C-E98BB6DF07ED@sharp.fm>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org> <CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

On 24 Nov 2015, at 5:21 PM, Jim Jagielski <jim@jaguNET.com> wrote:

> For these types of paths, where we use a switch/case against
> the 1st char of the token, the real reason why we used that
> impl was to avoid the (expected) expensive string comparison.
>=20
> This is really no longer an issue. Sure, we could still use
> this "fast path" short-circuit, but even that is non-optimal.
> For the below, what we really should be testing is:
>=20
> 	if (!ap_casecmpstr(token+1, "ublic")) {
>=20
> for example.
>=20
> Sooooo the question is: Do we remove these silly fast-paths
> that no longer make sense[1] or optimize for the "we know the
> 1st char" case ala the above?

A further optimisation - in many cases the fast path is really a case =
sensitive string comparison, given that the vast majority of the time =
the case being used is the case quoted in the spec.

In other words, while mAx-AgE is valid, it is almost always max-age.

Does it make sense to do a case sensitive comparison first, and then =
fall back to case insensitive?

Regards,
Graham
=E2=80=94


From dev-return-84714-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 16:11:59 2015
Return-Path: <dev-return-84714-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B33A018E81
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 16:11:59 +0000 (UTC)
Received: (qmail 64063 invoked by uid 500); 24 Nov 2015 16:11:59 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 63986 invoked by uid 500); 24 Nov 2015 16:11:59 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 63974 invoked by uid 99); 24 Nov 2015 16:11:59 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 16:11:59 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id A038C180994
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:11:58 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id FJiFNSzVW1LQ for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 16:11:53 +0000 (UTC)
Received: from mail-io0-f177.google.com (mail-io0-f177.google.com [209.85.223.177])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 012B020C40
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:11:53 +0000 (UTC)
Received: by ioir85 with SMTP id r85so25011663ioi.1
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 08:11:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=wF/zdOCNTcNv4qrPbzKPrXpUvNGdBllVfoQY13H2Zsk=;
        b=JEFVhhg+9NuPumjuB+pCLG9BVDl+MFuoxDsTs+3qyz9gn62gPt/ggZ1+LPXhh52PM9
         wMF0lwP2UMp2tEPt3jWs8y/cldMylZZa5UiQGWmVBC4zJjma9wLS3egOfOzOcONfbQ20
         YSporEkGc3QTSJSL60B3dVd1BdIg8aOwAhhEUEUu61J1BEfQbD1UtXvYCYdtgVG8mBVo
         DMlwyonvy5Kzc4Gf3HIubq/Bpm2wTP1sIQQPgJ0g1HVWEtIxK5x+f/45V/V/JTodW//2
         s/tKsuOWnBgS1fgd1dPgGL8PmMc8TQcEEHL+ubJYedFdWbMSVXiyhRc32RBJrq7MkTf5
         VXVA==
MIME-Version: 1.0
X-Received: by 10.107.134.103 with SMTP id i100mr31765826iod.90.1448381511961;
 Tue, 24 Nov 2015 08:11:51 -0800 (PST)
Received: by 10.64.114.199 with HTTP; Tue, 24 Nov 2015 08:11:51 -0800 (PST)
In-Reply-To: <CACsi253sVFy=85nBO4-Vp6REBe_mD2JZX3uPTwv-8Jf1E51EDA@mail.gmail.com>
References: <20151123155826.39A703A043E@svn01-us-west.apache.org>
	<CACsi252Ypb8wgfryMt689sn0nnJwkBrNpjaE7KzFwd3wk2LhdQ@mail.gmail.com>
	<5437AE63-0061-4346-98B5-F00D6D804E87@jaguNET.com>
	<CACsi250cw1NgJs9u6tdDNf90_UOdWHvKvosOmMe9XTbyi0Q_dQ@mail.gmail.com>
	<4AFAB327-14AD-44F0-8927-E289B28BCF63@jaguNET.com>
	<CACsi250QUg-xra6uwfvsNT_SJ=CPu2UNkQR0aSmLZDxG=hjSAw@mail.gmail.com>
	<CALK=YjMhgfB+Dtm7=RNVdkPFcMJLN_Zcw-MstFiMomN8fajS7w@mail.gmail.com>
	<CACsi253sVFy=85nBO4-Vp6REBe_mD2JZX3uPTwv-8Jf1E51EDA@mail.gmail.com>
Date: Tue, 24 Nov 2015 11:11:51 -0500
Message-ID: <CALK=YjOmpK=puj_Sb+3DbFz1ZKEnOwGLc83FFu0gKgFOK8OD=g@mail.gmail.com>
Subject: Re: svn commit: r1715859 - /httpd/httpd/trunk/include/httpd.h
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 11:07 AM, William A Rowe Jr <wrowe@rowe-clan.net> wrote:
> Well, we are sorting the entire ASCII so I guess we can drop "for
> alpha-numerics only".

Maybe it was fixed and I missed it, but didn't you point
out that [] were not sorted right relative to alphas per
POSIX strcasecmp?

From dev-return-84715-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 16:15:46 2015
Return-Path: <dev-return-84715-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F356618ECB
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 16:15:45 +0000 (UTC)
Received: (qmail 74188 invoked by uid 500); 24 Nov 2015 16:15:45 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 74122 invoked by uid 500); 24 Nov 2015 16:15:45 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 74112 invoked by uid 99); 24 Nov 2015 16:15:45 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 16:15:45 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id B8757C2D16
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:15:44 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id mINH8ADUFHOb for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 16:15:38 +0000 (UTC)
Received: from mail-qg0-f53.google.com (mail-qg0-f53.google.com [209.85.192.53])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 9484E25E37
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:15:37 +0000 (UTC)
Received: by qgea14 with SMTP id a14so13672067qge.0
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 08:15:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=FP0V1/naYCwO4the7iOQChtuTEeCGpAaBdCeyCO9GCA=;
        b=PENOv4yAkkCsMoQBDVMLAXeYYoE98bhg+SJa5VlwwJ9WXDmEN6WylkzvJJugMg3OUX
         q6GheAW/fmft0N0nCXwQXzlh03xMvhOCLoI5xopH+JFIj0pd1i62iKXWowTNGo5nc+Nw
         f7p0TeOJ/2mNBEtQkK6YkhT6XKll9MJJDFBnDAiyRAVOjC3D1imMe8FsYWtaPDQ57yTd
         yySi5qjSB2ou2lRNb5/AfEMc43awHl+1S4WwkaTMJsqsigle6Wu9EmIin9ZUV91zL93N
         GoBnf1LwFATTf9SoOaiFTaJ83Fp8wcZdODx2sGfbmANfC9Pi2XznBAVxg10NhpG99lnF
         voJA==
MIME-Version: 1.0
X-Received: by 10.140.220.136 with SMTP id q130mr31048757qhb.24.1448381736705;
 Tue, 24 Nov 2015 08:15:36 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 24 Nov 2015 08:15:36 -0800 (PST)
In-Reply-To: <3F16527F-A2FE-4CEE-A87C-E98BB6DF07ED@sharp.fm>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org>
	<CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com>
	<3F16527F-A2FE-4CEE-A87C-E98BB6DF07ED@sharp.fm>
Date: Tue, 24 Nov 2015 17:15:36 +0100
Message-ID: <CAKQ1sVMze747yq7KD70DL2DC8fDtZwKPr310urLD=ndr=kTb0w@mail.gmail.com>
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 5:09 PM, Graham Leggett <minfrin@sharp.fm> wrote:
>
> A further optimisation - in many cases the fast path is really a case sensitive string comparison, given that the vast majority of the time the case being used is the case quoted in the spec.
>
> In other words, while mAx-AgE is valid, it is almost always max-age.
>
> Does it make sense to do a case sensitive comparison first, and then fall back to case insensitive?

Not sure:
    if (!strcmp(h, "max-age")
        || ap_cmpcasestr(h, "max-age"))
is likely to be a bit faster than a single ap_cmpcasestr() when it
matches, but much slower when it does not.

Regards,
Yann.

From dev-return-84716-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 16:18:30 2015
Return-Path: <dev-return-84716-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F1C6E18F17
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 16:18:29 +0000 (UTC)
Received: (qmail 89123 invoked by uid 500); 24 Nov 2015 16:18:29 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 89056 invoked by uid 500); 24 Nov 2015 16:18:29 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 89042 invoked by uid 99); 24 Nov 2015 16:18:28 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 16:18:28 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 84C19C0E02
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:18:28 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.555
X-Spam-Level:
X-Spam-Status: No, score=-0.555 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.554, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id wQBOxkB61IjR for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 16:18:27 +0000 (UTC)
Received: from monica.sharp.fm (monica.sharp.fm [80.168.143.5])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTP id 7871220562
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:18:27 +0000 (UTC)
Received: from [10.105.35.56] (unknown [5.56.169.80])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	(Authenticated sender: minfrin@sharp.fm)
	by monica.sharp.fm (Postfix) with ESMTPSA id 338AE81F2E
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:18:20 +0000 (GMT)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: Graham Leggett <minfrin@sharp.fm>
In-Reply-To: <CAKQ1sVMze747yq7KD70DL2DC8fDtZwKPr310urLD=ndr=kTb0w@mail.gmail.com>
Date: Tue, 24 Nov 2015 18:18:19 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <BCD8A2D9-4A6D-4976-A1FC-6E6B51507875@sharp.fm>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org> <CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com> <3F16527F-A2FE-4CEE-A87C-E98BB6DF07ED@sharp.fm> <CAKQ1sVMze747yq7KD70DL2DC8fDtZwKPr310urLD=ndr=kTb0w@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

On 24 Nov 2015, at 6:15 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:

> Not sure:
>    if (!strcmp(h, "max-age")
>        || ap_cmpcasestr(h, "max-age"))
> is likely to be a bit faster than a single ap_cmpcasestr() when it
> matches, but much slower when it does not.

Yep, that=E2=80=99s the point.

The vast majority of comparisons are lowercase for tokens like this. =
Might as well test that fast path first before testing the worst case =
scenario.

Regards,
Graham
=E2=80=94


From dev-return-84717-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 16:37:16 2015
Return-Path: <dev-return-84717-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D65F118FFA
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 16:37:16 +0000 (UTC)
Received: (qmail 67787 invoked by uid 500); 24 Nov 2015 16:37:11 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 67704 invoked by uid 500); 24 Nov 2015 16:37:11 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 67694 invoked by uid 99); 24 Nov 2015 16:37:11 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 16:37:11 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id D74D4C0FEA
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:37:10 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id PhwDhnGE-4mF for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 16:37:05 +0000 (UTC)
Received: from mail-qg0-f44.google.com (mail-qg0-f44.google.com [209.85.192.44])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 1E41220CF5
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:37:05 +0000 (UTC)
Received: by qgeb1 with SMTP id b1so14281578qge.1
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 08:36:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=7HivE1AHBPjO+U2seWc/k8vF4fR7furu+yPJrLut0iA=;
        b=fjvDnJLyBWeLeTfLkyjhFuucj/sx2tYgUZbqCyb7II/awFQY6aXcakZn3m44xt8j2t
         hi/6VAJk9F6bvfUJeDq/rZZQEyV4+YUsCHWzVmn1ggYtpCbcsfzSCu5ms7Di2e3buXer
         l35/vC6C6nxS1OH6WC95zbq4IWGuiyx4DS+7ymPYf0T8gYPFWlxrbRPfCeUbIssFIgPg
         60OghJAjtcDcXXtpqB7a7XCUd3xN9vDRBya1qvmDfT1Xa1gMFNuxXmgPAR3d0DOgFnuJ
         CLx2dzBM87eMGls+r1+ncTfKpjUyahSrEOE6mj4Sxuulbxh+C8GNbcBsbXwwC1JENTW5
         1CGw==
MIME-Version: 1.0
X-Received: by 10.140.95.66 with SMTP id h60mr34609502qge.14.1448383018623;
 Tue, 24 Nov 2015 08:36:58 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 24 Nov 2015 08:36:58 -0800 (PST)
In-Reply-To: <BCD8A2D9-4A6D-4976-A1FC-6E6B51507875@sharp.fm>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org>
	<CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com>
	<3F16527F-A2FE-4CEE-A87C-E98BB6DF07ED@sharp.fm>
	<CAKQ1sVMze747yq7KD70DL2DC8fDtZwKPr310urLD=ndr=kTb0w@mail.gmail.com>
	<BCD8A2D9-4A6D-4976-A1FC-6E6B51507875@sharp.fm>
Date: Tue, 24 Nov 2015 17:36:58 +0100
Message-ID: <CAKQ1sVPD+sz3mYmSYEL=KTjELocT-_WHRmzbfeD61rNi9YxE2A@mail.gmail.com>
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Tue, Nov 24, 2015 at 5:18 PM, Graham Leggett <minfrin@sharp.fm> wrote:
> On 24 Nov 2015, at 6:15 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>
>> Not sure:
>>    if (!strcmp(h, "max-age")
>>        || ap_cmpcasestr(h, "max-age"))
>> is likely to be a bit faster than a single ap_cmpcasestr() when it
>> matches, but much slower when it does not.
>
> Yep, that=E2=80=99s the point.
>
> The vast majority of comparisons are lowercase for tokens like this. Migh=
t as well test that fast path first before testing the worst case scenario.

Sure, but my point is that the worst case is likely depend on the
application, eg:

    case 'm':
    case 'M':
    if (!strncmp(token, "max-age", 7)
        || !ap_casecmpstrn(token, "max-age", 7)) {
        ...
    }
    else if (!strncmp(token, "max-stale", 9)
             || !ap_casecmpstrn(token, "max-stale", 9)) {
        ...
    }
    else if (!strncmp(token, "min-fresh", 9)
             || !ap_casecmpstrn(token, "min-fresh", 9)) {
        ...
    }
    else if (!strcmp(token, "max-revalidate")
             || !ap_casecmpstr(token, "must-revalidate")) {
        ...
    }
    else if ...

is going to be costly when matched against "must-revalidate", or worse
"my-token".

We could use all str[n]cmp() first, but still it's a lot of
comparisons, and now duplicated code too.

Regards,
Yann.

From dev-return-84718-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 16:53:41 2015
Return-Path: <dev-return-84718-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 61CE318121
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 16:53:41 +0000 (UTC)
Received: (qmail 38890 invoked by uid 500); 24 Nov 2015 16:53:41 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 38815 invoked by uid 500); 24 Nov 2015 16:53:40 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 38805 invoked by uid 99); 24 Nov 2015 16:53:40 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 16:53:40 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 714FBC5936
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:53:40 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 5gBSm8TGSi0o for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 16:53:30 +0000 (UTC)
Received: from mail-io0-f178.google.com (mail-io0-f178.google.com [209.85.223.178])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 0C01C20C61
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:53:30 +0000 (UTC)
Received: by ioir85 with SMTP id r85so26391649ioi.1
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 08:53:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=fgIeLxi4opam1LD16uQEuRiCjpfAQXj9Z0Q3eopUdP0=;
        b=MdKqtkATVU1mjYUJ9xeS/iWqZT4Iej9mEEnI2unzS8oZz30H70zhN/fi0Z6dJtLN0h
         zySS2gfXw+bnLt1qhLP/xkJs04IhwCdYsV+a20M2kRZPijlrBZVa2K2UABMDzEV+bflS
         HUUB7SuwQZAn5cwg7K+2qQIcH59kFPTjqaswL07Y2jD6abK2Qdb4HguiFext1wCaof10
         SnpADM25e5TWl6vDAeCjJq/zkgvv0eXBqiIMSPizvD3KrLTzfbvrfM5j0YwXlE1wz2YO
         YPQzg0a/8QoBm4wE5/jI4yO81N7RMJU3VYjN0g95hRxk3XR2i/AZQ8TvOoJg2EWK4ioc
         bNoA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=fgIeLxi4opam1LD16uQEuRiCjpfAQXj9Z0Q3eopUdP0=;
        b=D9nCogKui26MRoSNHpKXs3zigrvNtVdSvFoYsJSYRL78E+bGmPqLXPpVcYnxMzF3tE
         XiGbMjt+Co9237GKUuXmvlSvihUN3ttiduUeho9UjZu6dPmKEIBOqCq6EoS+KbeueJUm
         KhpXIrVJYNW6SXxaSdPNWsiwUXm96nX/LUicxcn+1CBPodFEdKPIsnEnlmEp9PxSh5uE
         m5x8RwBQqs2WznPt4wXx+Y7pNoY7KDXvA9OgiGaOCCsjHHi7N313yyFCP9R6yjvLXFeD
         3Fc/WHlpvOOHb84WgfN1yfHpTrhXDhx6ZHXsT2qWPwpYkPDN1m1dxwGm3994/Ytp86JT
         wg9g==
X-Gm-Message-State: ALoCoQks3KFL3v7pQXgKGl73K+TBhcwnJi30W6Jv5WQbEJEilZqvRuHh/iO2uMhSWcPMTuSxzQLv
MIME-Version: 1.0
X-Received: by 10.107.10.66 with SMTP id u63mr29059673ioi.86.1448384008931;
 Tue, 24 Nov 2015 08:53:28 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Tue, 24 Nov 2015 08:53:28 -0800 (PST)
In-Reply-To: <56548B3E.7080004@aldan.algebra.com>
References: <FD60B807-973B-4FFD-B32F-E7608A6CD374@jaguNET.com>
	<CAKQ1sVPtxJRfyeS5LBJ7FsYJW5=36p9qp6FuE3hPFi19+WR9Eg@mail.gmail.com>
	<301856DC-1727-4158-96B0-8233D2E01CA9@jaguNET.com>
	<5653732E.9030401@wanadoo.fr>
	<6C408DFD-A50D-4DDF-8090-6488CA9C06C4@jaguNET.com>
	<CACsi253ZgU4waaAiEQm8E6X0gVoEfPw=JdQQ5t7KMNcma5EERA@mail.gmail.com>
	<56548B3E.7080004@aldan.algebra.com>
Date: Tue, 24 Nov 2015 10:53:28 -0600
Message-ID: <CACsi251cmdO_wbjjvDeBc55iZEHKOoNQVvKcnqSxbB6V1W8JKg@mail.gmail.com>
Subject: Re: strncasecmp
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a113f93be5a0c7105254c2ef6

--001a113f93be5a0c7105254c2ef6
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 10:07 AM, Mikhail T. <mi+thun@aldan.algebra.com>
wrote:

> On 24.11.2015 10:08, William A Rowe Jr wrote:
>
> As long as this function is promoted for fast ASCII-specific token
> recognition and has no other unexpected equalities, it serves a useful
> purpose.
>
> Because of this, I'd suggest renaming it to something, that emphasizes it
> being ASCII-only.
>

Strictly speaking, you are referring to US-ASCII, while the actual function
including
the EBCDIC build follows LC_CTYPE/LC_COLLATE C or POSIX (equivalent names
for the same thing) and is honoring LC_COLLATE of the US-ASCII ordering.

apr_strcasecmp_lcposix or apr_strcasecmp_lcc might be a usable name.  Other
suggestions?  I was leaning toward apr_strcasecmp_token since that is a
pretty
well recognized RFC term and usually refers to the ASCII set.  For HTTPbis,
token
is defined at http://tools.ietf.org/html/rfc7230#section-3.2.6

--001a113f93be5a0c7105254c2ef6
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On T=
ue, Nov 24, 2015 at 10:07 AM, Mikhail T. <span dir=3D"ltr">&lt;<a href=3D"m=
ailto:mi+thun@aldan.algebra.com" target=3D"_blank">mi+thun@aldan.algebra.co=
m</a>&gt;</span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margi=
n:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204=
);border-left-style:solid;padding-left:1ex">
 =20
   =20
 =20
  <div bgcolor=3D"#FFFFFF" text=3D"#000000"><span class=3D"">
    <div>On 24.11.2015 10:08, William A Rowe Jr
      wrote:<br>
    </div>
    <blockquote type=3D"cite">
      <div>As long as this function is promoted for fast ASCII-specific
        token</div>
      <div>recognition and has no other unexpected equalities, it serves
        a useful</div>
      <div>purpose.</div>
    </blockquote></span>
    Because of this, I&#39;d suggest renaming it to something, that
    emphasizes it being ASCII-only.</div></blockquote><div><br></div><div>S=
trictly speaking, you are referring to US-ASCII, while the actual function =
including</div><div>the EBCDIC build follows LC_CTYPE/LC_COLLATE C or POSIX=
 (equivalent names</div><div>for the same thing) and is honoring LC_COLLATE=
 of the US-ASCII ordering.</div><div><br></div><div>apr_strcasecmp_lcposix =
or=C2=A0apr_strcasecmp_lcc might be a usable name.=C2=A0 Other</div><div>su=
ggestions?=C2=A0 I was leaning toward apr_strcasecmp_token since that is a =
pretty</div><div>well recognized RFC term and usually refers to the ASCII s=
et.=C2=A0 For HTTPbis, token</div><div>is defined at=C2=A0<a href=3D"http:/=
/tools.ietf.org/html/rfc7230#section-3.2.6">http://tools.ietf.org/html/rfc7=
230#section-3.2.6</a></div><div><br></div><div><br></div><div><br></div><di=
v><br></div><div><br></div><div><br></div></div></div></div>

--001a113f93be5a0c7105254c2ef6--

From dev-return-84719-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 16:57:59 2015
Return-Path: <dev-return-84719-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 25F9618145
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 16:57:59 +0000 (UTC)
Received: (qmail 45424 invoked by uid 500); 24 Nov 2015 16:57:58 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 45343 invoked by uid 500); 24 Nov 2015 16:57:58 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 45333 invoked by uid 99); 24 Nov 2015 16:57:58 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 16:57:58 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 094E11A203B
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:57:58 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.98
X-Spam-Level: **
X-Spam-Status: No, score=2.98 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id zwGHlvoWGkM5 for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 16:57:52 +0000 (UTC)
Received: from mail-ig0-f178.google.com (mail-ig0-f178.google.com [209.85.213.178])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id AA0C724B0A
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 16:57:51 +0000 (UTC)
Received: by igbxm8 with SMTP id xm8so18756128igb.1
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 08:57:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=JrRG8TqEFXTbbAHxN3LP+VK7RgXunWikFPP9uv2PgLE=;
        b=dBAJGq2WJdqvFUZAYHVlOnJ9vrkesAmLCjphfXY6AEOt4zyJ0U8wKmYtwpaEOy5+kY
         LvFSS09WIw0KS8tvZkmOKhEB1vZG9N5gZnuZ8/pYIIdtmPHeidfeh58HazxNyTOb6VYD
         szi2rN/JXPhYZjK4Y/WJfcciDFaz2FqgIH9M+yaNQJ/DPoB6dOtFt1eE5QQahFrFYuy9
         EqZJ3ySWpm/8DMXFhPaTFVzSq+1SuRTkPUqtgIqeUHG2RBX84brBespB3ZITO8RBBXAT
         UP9+XGQIhM3nl0J3faFzKv8ViSqfMWUeAgxtMwY5X73f4HaKSNqX0r8kfqSUEOLVvdKT
         2G5A==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=JrRG8TqEFXTbbAHxN3LP+VK7RgXunWikFPP9uv2PgLE=;
        b=TwHmKTI4OLNiYLjgd+V74Hz7GhAFlBa6K6awsemFD8n6HU3WerXzc+CU9BTShXFmjc
         HxCxe0mH1ecZ+rzsd72YnBQEqs2BDVtb4z95aXg8IJUWaAhLp/wLn6JGcf+GpbGMXUh+
         RAEOnIF/dQEZvVt/2VW7PZha6sTPVg2bIw19gWBfHShpmwAw417OK2Z1q6oudJHkRhTJ
         9yAF8x9qjeZdHjjLMf20gEmFSs/jaKoYvu0GIGHD5BoT/09COYrIrs8jYKiu2qbyOGc8
         IoPIZvTI5Ba1jrf8ULV4SF75O8limZjWh5v7puOmgKuRETUTtlD/+kQlsKrOha0KIPZi
         weuQ==
X-Gm-Message-State: ALoCoQnx6/nut2KgQBAheQ/9ACU3YA0G6urSIP/pzMwN1MEn1r4p40SApp1jspCQkjVJk5ToRZQu
MIME-Version: 1.0
X-Received: by 10.50.50.71 with SMTP id a7mr18613792igo.32.1448384270630; Tue,
 24 Nov 2015 08:57:50 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Tue, 24 Nov 2015 08:57:50 -0800 (PST)
In-Reply-To: <CALK=YjOmpK=puj_Sb+3DbFz1ZKEnOwGLc83FFu0gKgFOK8OD=g@mail.gmail.com>
References: <20151123155826.39A703A043E@svn01-us-west.apache.org>
	<CACsi252Ypb8wgfryMt689sn0nnJwkBrNpjaE7KzFwd3wk2LhdQ@mail.gmail.com>
	<5437AE63-0061-4346-98B5-F00D6D804E87@jaguNET.com>
	<CACsi250cw1NgJs9u6tdDNf90_UOdWHvKvosOmMe9XTbyi0Q_dQ@mail.gmail.com>
	<4AFAB327-14AD-44F0-8927-E289B28BCF63@jaguNET.com>
	<CACsi250QUg-xra6uwfvsNT_SJ=CPu2UNkQR0aSmLZDxG=hjSAw@mail.gmail.com>
	<CALK=YjMhgfB+Dtm7=RNVdkPFcMJLN_Zcw-MstFiMomN8fajS7w@mail.gmail.com>
	<CACsi253sVFy=85nBO4-Vp6REBe_mD2JZX3uPTwv-8Jf1E51EDA@mail.gmail.com>
	<CALK=YjOmpK=puj_Sb+3DbFz1ZKEnOwGLc83FFu0gKgFOK8OD=g@mail.gmail.com>
Date: Tue, 24 Nov 2015 10:57:50 -0600
Message-ID: <CACsi251=bHXz9Lf8MMhBjr_Wk2iDbWo9StQm8KUX_nrTqV5ZiQ@mail.gmail.com>
Subject: Re: svn commit: r1715859 - /httpd/httpd/trunk/include/httpd.h
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=089e013c5c44f31bd705254c3dbc

--089e013c5c44f31bd705254c3dbc
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 10:11 AM, Eric Covener <covener@gmail.com> wrote:

> On Tue, Nov 24, 2015 at 11:07 AM, William A Rowe Jr <wrowe@rowe-clan.net>
> wrote:
> > Well, we are sorting the entire ASCII so I guess we can drop "for
> > alpha-numerics only".
>
> Maybe it was fixed and I missed it, but didn't you point
> out that [] were not sorted right relative to alphas per
> POSIX strcasecmp?
>

I was pointing out that most implementations sort [] in between upper and
lower
case letters, and in the string-folded ordering, all characters are treated
as their
lower case equivalent for collation.

Unsure how POSIX defined this.  The EBCDIC ordering table used the same
lower-case folding as ASCII, so the sortation of all POSIX characters will
be
identical between our EBCDIC (extended) and ASCII implementations.

[I only just realized that original EBCDIC didn't include all the C
characters,
I only used the code page for 15 years for document imaging but always
coded in ANSI :-]

--089e013c5c44f31bd705254c3dbc
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On T=
ue, Nov 24, 2015 at 10:11 AM, Eric Covener <span dir=3D"ltr">&lt;<a href=3D=
"mailto:covener@gmail.com" target=3D"_blank">covener@gmail.com</a>&gt;</spa=
n> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;b=
order-left:1px #ccc solid;padding-left:1ex"><span class=3D"">On Tue, Nov 24=
, 2015 at 11:07 AM, William A Rowe Jr &lt;<a href=3D"mailto:wrowe@rowe-clan=
.net">wrowe@rowe-clan.net</a>&gt; wrote:<br>
&gt; Well, we are sorting the entire ASCII so I guess we can drop &quot;for=
<br>
&gt; alpha-numerics only&quot;.<br>
<br>
</span>Maybe it was fixed and I missed it, but didn&#39;t you point<br>
out that [] were not sorted right relative to alphas per<br>
POSIX strcasecmp?<br>
</blockquote></div><br></div><div class=3D"gmail_extra">I was pointing out =
that most implementations sort [] in between upper and lower</div><div clas=
s=3D"gmail_extra">case letters, and in the string-folded ordering, all char=
acters are treated as their</div><div class=3D"gmail_extra">lower case equi=
valent for collation.</div><div class=3D"gmail_extra"><br></div><div class=
=3D"gmail_extra">Unsure how POSIX defined this.=C2=A0 The EBCDIC ordering t=
able used the same</div><div class=3D"gmail_extra">lower-case folding as AS=
CII, so the sortation of all POSIX characters will be</div><div class=3D"gm=
ail_extra">identical between our EBCDIC (extended) and ASCII implementation=
s.</div><div class=3D"gmail_extra"><br></div><div class=3D"gmail_extra">[I =
only just realized that original EBCDIC didn&#39;t include all the C charac=
ters,</div><div class=3D"gmail_extra">I only used the code page for 15 year=
s for document imaging but always</div><div class=3D"gmail_extra">coded in =
ANSI :-]</div><div class=3D"gmail_extra"><br></div></div>

--089e013c5c44f31bd705254c3dbc--

From dev-return-84720-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 17:40:30 2015
Return-Path: <dev-return-84720-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 18D3918326
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 17:40:30 +0000 (UTC)
Received: (qmail 92667 invoked by uid 500); 24 Nov 2015 17:40:29 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 92581 invoked by uid 500); 24 Nov 2015 17:40:29 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 92571 invoked by uid 99); 24 Nov 2015 17:40:29 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 17:40:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 3151EC11BE
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 17:40:29 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 6mJOCcPMz4lF for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 17:40:22 +0000 (UTC)
Received: from mail-io0-f178.google.com (mail-io0-f178.google.com [209.85.223.178])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id B773D24E50
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 17:40:21 +0000 (UTC)
Received: by ioc74 with SMTP id 74so27794621ioc.2
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 09:40:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=MNznKHxBBA+qmshJUHUb8JvcKQDtGCSuPn2UFSBBvHQ=;
        b=eJse30VFwe7eAk6FShCYz93oIAP1IP6lAGlHx4myWGob1eek8BJrdosVhNnnhfqmeB
         aTl2QkBeCvTVI7zH0twArDGFNQvwyHB4qZbqhIkJmwLE4k8XfWpKMXaCnEV7b9u/RTWp
         6CkhgBBqKizhZileIRnsttUJVkBE+Ffh44cc4kq5tKqdn7FuWSShYFSjGDuaHj571Iyq
         5eE2Z2tSpdoTEVItwGC+GrUK8JYtQXerdQG5mzFThlYycUkj/2xYHZaWZb8xafkAsdps
         GpEtWUMTx1YIPg5NJV9QyiQwMZpn6Ewtnt2wofA7HvJ3bIWQpMjgOVELCsA1CYaz802S
         RL5A==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=MNznKHxBBA+qmshJUHUb8JvcKQDtGCSuPn2UFSBBvHQ=;
        b=IQQmgZT100rgb0PfKQKIa4FYT01Fi387UhxeXNV3FWG/XDXrJUbp1yE/YXvPiI09Ek
         8XvIiubiojXNdQWbPjNO2hmW3iNo1vpwyKXMf6J0Se6n560DP/+xd8sZGT2L6PC727B/
         N0u/JQLnpcdz6kUoUYKPgN6o8ie/TEM5QJMAvmLVj+QaIu70plOpa7TvERBklrFN6z2u
         JDi1xObaiTRl32rTFjHeXamOW/6D3U1qKPAA/FhT0HHF17ka2tft5o9zm8j8AbG7tlIX
         tWMjt+pq4KySKayjutMkfrJUQCErb5g4rdPhaB1rqLB+PrQFP/7f+7hx7wXbwL4GJYhX
         6DpQ==
X-Gm-Message-State: ALoCoQmGLSSyReQs9URKELEGGSLK4VP1xmFYmjzPX3r0ZH7OwnjgZ1ephGy+1O4SE+R2QpQAq8TL
MIME-Version: 1.0
X-Received: by 10.107.34.199 with SMTP id i190mr32399697ioi.150.1448386820677;
 Tue, 24 Nov 2015 09:40:20 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Tue, 24 Nov 2015 09:40:20 -0800 (PST)
In-Reply-To: <BCD8A2D9-4A6D-4976-A1FC-6E6B51507875@sharp.fm>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org>
	<CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com>
	<3F16527F-A2FE-4CEE-A87C-E98BB6DF07ED@sharp.fm>
	<CAKQ1sVMze747yq7KD70DL2DC8fDtZwKPr310urLD=ndr=kTb0w@mail.gmail.com>
	<BCD8A2D9-4A6D-4976-A1FC-6E6B51507875@sharp.fm>
Date: Tue, 24 Nov 2015 11:40:20 -0600
Message-ID: <CACsi251h7L1UdX=XND=-S_HrGGYbDZdw_=RUHpEwCQnTg34jrA@mail.gmail.com>
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1140d944f1bd5105254cd50f

--001a1140d944f1bd5105254cd50f
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Tue, Nov 24, 2015 at 10:18 AM, Graham Leggett <minfrin@sharp.fm> wrote:

> On 24 Nov 2015, at 6:15 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>
> > Not sure:
> >    if (!strcmp(h, "max-age")
> >        || ap_cmpcasestr(h, "max-age"))
> > is likely to be a bit faster than a single ap_cmpcasestr() when it
> > matches, but much slower when it does not.
>
> Yep, that=E2=80=99s the point.
>
> The vast majority of comparisons are lowercase for tokens like this. Migh=
t
> as well test that fast path first before testing the worst case scenario.
>

Hmmm, it's our implementation, why increase the pain?  Consider the
following 'optimization' - fallthrough from identity to case insensitivity
with one wasted equality test...

AP_DECLARE(int) ap_casecmpstr(const char *s1, const char *s2)
{
    const unsigned char *ps1 =3D (const unsigned char *) s1;
    const unsigned char *ps2 =3D (const unsigned char *) s2;

    while (*ps1 =3D=3D *ps2) {
        if (*ps1++ =3D=3D '\0') {
            return (0);
        }
        ps2++;
    }
    while (ucharmap[*ps1] =3D=3D ucharmap[*ps2]) {
        if (*ps1++ =3D=3D '\0') {
            return (0);
        }
        ps2++;
    }
    return (ucharmap[*ps1] - ucharmap[*ps2]);
}


AP_DECLARE(int) ap_casecmpstrn(const char *s1, const char *s2, apr_size_t n=
)
{
    const unsigned char *ps1 =3D (const unsigned char *) s1;
    const unsigned char *ps2 =3D (const unsigned char *) s2;
    while (n) {
        if (*ps1 !=3D *ps2) {
            break;
        }
        if (*ps1++ =3D=3D '\0') {
            return (0);
        }
        ps2++;
        n--;
    }
    while (n--) {
        if (ucharmap[*ps1] !=3D ucharmap[*ps2]) {
            return (ucharmap[*ps1] - ucharmap[*ps2]);
        }
        if (*ps1++ =3D=3D '\0') {
            break;
        }
        ps2++;
    }
    return (0);
}

--001a1140d944f1bd5105254cd50f
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On T=
ue, Nov 24, 2015 at 10:18 AM, Graham Leggett <span dir=3D"ltr">&lt;<a href=
=3D"mailto:minfrin@sharp.fm" target=3D"_blank">minfrin@sharp.fm</a>&gt;</sp=
an> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px=
 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left=
-style:solid;padding-left:1ex"><span class=3D"">On 24 Nov 2015, at 6:15 PM,=
 Yann Ylavic &lt;<a href=3D"mailto:ylavic.dev@gmail.com">ylavic.dev@gmail.c=
om</a>&gt; wrote:<br>
<br>
&gt; Not sure:<br>
&gt;=C2=A0 =C2=A0 if (!strcmp(h, &quot;max-age&quot;)<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 || ap_cmpcasestr(h, &quot;max-age&quot;))<b=
r>
&gt; is likely to be a bit faster than a single ap_cmpcasestr() when it<br>
&gt; matches, but much slower when it does not.<br>
<br>
</span>Yep, that=E2=80=99s the point.<br>
<br>
The vast majority of comparisons are lowercase for tokens like this. Might =
as well test that fast path first before testing the worst case scenario.<b=
r></blockquote><div><br></div><div>Hmmm, it&#39;s our implementation, why i=
ncrease the pain?=C2=A0 Consider the following &#39;optimization&#39; - fal=
lthrough from identity to case insensitivity with one wasted equality test.=
..</div><div><br></div><div><div>AP_DECLARE(int) ap_casecmpstr(const char *=
s1, const char *s2)</div><div>{</div><div>=C2=A0 =C2=A0 const unsigned char=
 *ps1 =3D (const unsigned char *) s1;</div><div>=C2=A0 =C2=A0 const unsigne=
d char *ps2 =3D (const unsigned char *) s2;</div><div><br></div><div>=C2=A0=
 =C2=A0 while (*ps1 =3D=3D *ps2) {</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 if=
 (*ps1++ =3D=3D &#39;\0&#39;) {</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 return (0);</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 }</div><div>=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 ps2++;</div><div>=C2=A0 =C2=A0 }</div><div>=C2=
=A0 =C2=A0 while (ucharmap[*ps1] =3D=3D ucharmap[*ps2]) {</div><div>=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 if (*ps1++ =3D=3D &#39;\0&#39;) {</div><div>=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 return (0);</div><div>=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 }</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 ps2++;</div><div>=C2=A0 =C2=
=A0 }</div><div>=C2=A0 =C2=A0 return (ucharmap[*ps1] - ucharmap[*ps2]);</di=
v><div>}</div></div><div><br></div><div><br></div><div><div>AP_DECLARE(int)=
 ap_casecmpstrn(const char *s1, const char *s2, apr_size_t n)</div><div>{</=
div><div>=C2=A0 =C2=A0 const unsigned char *ps1 =3D (const unsigned char *)=
 s1;</div><div>=C2=A0 =C2=A0 const unsigned char *ps2 =3D (const unsigned c=
har *) s2;</div><div>=C2=A0 =C2=A0 while (n) {</div><div>=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 if (*ps1 !=3D *ps2) {</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 break;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 }</div><div>=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 if (*ps1++ =3D=3D &#39;\0&#39;) {</div><div>=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 return (0);</div><div>=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 }</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 ps2++;</div><div>=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 n--;</div><div>=C2=A0 =C2=A0 }</div><div>=C2=A0 =C2=A0 wh=
ile (n--) {</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 if (ucharmap[*ps1] !=3D u=
charmap[*ps2]) {</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 return=
 (ucharmap[*ps1] - ucharmap[*ps2]);</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 }=
</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 if (*ps1++ =3D=3D &#39;\0&#39;) {</d=
iv><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 break;</div><div>=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 }</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 ps2++;</div></=
div><div><div>=C2=A0 =C2=A0 }</div><div>=C2=A0 =C2=A0 return (0);</div><div=
>}</div><div>=C2=A0 =C2=A0 =C2=A0</div></div><div>=C2=A0</div></div></div><=
/div>

--001a1140d944f1bd5105254cd50f--

From dev-return-84721-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 17:53:57 2015
Return-Path: <dev-return-84721-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 51F0918425
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 17:53:57 +0000 (UTC)
Received: (qmail 46678 invoked by uid 500); 24 Nov 2015 17:53:56 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 46597 invoked by uid 500); 24 Nov 2015 17:53:56 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 46587 invoked by uid 99); 24 Nov 2015 17:53:56 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 17:53:56 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 31071C2E35
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 17:53:56 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id weMzWFWZDAQZ for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 17:53:47 +0000 (UTC)
Received: from resqmta-po-09v.sys.comcast.net (resqmta-po-09v.sys.comcast.net [96.114.154.168])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id C9679441BA
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 17:53:46 +0000 (UTC)
Received: from resomta-po-09v.sys.comcast.net ([96.114.154.233])
	by resqmta-po-09v.sys.comcast.net with comcast
	id lVtP1r00552QWKC01Vtge9; Tue, 24 Nov 2015 17:53:40 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-09v.sys.comcast.net with comcast
	id lVtf1r0042U0RYt01VtfB5; Tue, 24 Nov 2015 17:53:39 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715859 - /httpd/httpd/trunk/include/httpd.h
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CALK=YjOmpK=puj_Sb+3DbFz1ZKEnOwGLc83FFu0gKgFOK8OD=g@mail.gmail.com>
Date: Tue, 24 Nov 2015 12:53:38 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <553DC613-8DC4-4EE8-9C1C-74B7C14C7269@jaguNET.com>
References: <20151123155826.39A703A043E@svn01-us-west.apache.org> <CACsi252Ypb8wgfryMt689sn0nnJwkBrNpjaE7KzFwd3wk2LhdQ@mail.gmail.com> <5437AE63-0061-4346-98B5-F00D6D804E87@jaguNET.com> <CACsi250cw1NgJs9u6tdDNf90_UOdWHvKvosOmMe9XTbyi0Q_dQ@mail.gmail.com> <4AFAB327-14AD-44F0-8927-E289B28BCF63@jaguNET.com> <CACsi250QUg-xra6uwfvsNT_SJ=CPu2UNkQR0aSmLZDxG=hjSAw@mail.gmail.com> <CALK=YjMhgfB+Dtm7=RNVdkPFcMJLN_Zcw-MstFiMomN8fajS7w@mail.gmail.com> <CACsi253sVFy=85nBO4-Vp6REBe_mD2JZX3uPTwv-8Jf1E51EDA@mail.gmail.com> <CALK=YjOmpK=puj_Sb+3DbFz1ZKEnOwGLc83FFu0gKgFOK8OD=g@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448387620;
	bh=o0h9y1owWa9wS4q+4kKdmtUDZGTr7CDjor3afqVbJLE=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=klydhIJLsohR7qdIHnpFZARARKZKcsit87kQNdGa0X4nprWu00ZgVYYdkp7nroOY5
	 Iwy08UAem19Fz2SKTPuYdF4TnPtujZdq8/3JuH9SpsLmaooSHltf6ffY3nzsC9UEMl
	 Rm6ZwqRRXRiajhROGV89BJhPeqdlqvVv5EbH/fAqINh0hNhEI/VDZ9EcN3MQ8ActFz
	 SwKx0IfP6uSTR1vB4+cgN9mT6Jw4RsZC+UkpUiCRaGM+NU4AIpOGsqEYeEdTqo9axs
	 WYo2CXgOPb4qfdL+ks6jbeBp8m0d4tj9bKseOFq59k/S4cmzakltjQOC09oeOgb2gS
	 BoCSK146itZkw==

It's for these types of reasons that I suggest that
instead of looking at this as some replacement for
strcasecmp, we instead look at the function on how we
actually *use* it. As far as I know, we simply use
it to see if 2 strings are equal, ignoring ASCII case.
I could be wrong, and I'm sure someone will point out
if and where I am :) But even so, if *that* is the
use case, then we are free to define the function
(and create whatever name) however we want.

> On Nov 24, 2015, at 11:11 AM, Eric Covener <covener@gmail.com> wrote:
>=20
> On Tue, Nov 24, 2015 at 11:07 AM, William A Rowe Jr =
<wrowe@rowe-clan.net> wrote:
>> Well, we are sorting the entire ASCII so I guess we can drop "for
>> alpha-numerics only".
>=20
> Maybe it was fixed and I missed it, but didn't you point
> out that [] were not sorted right relative to alphas per
> POSIX strcasecmp?


From dev-return-84722-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:03:59 2015
Return-Path: <dev-return-84722-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CBFA418519
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:03:59 +0000 (UTC)
Received: (qmail 95252 invoked by uid 500); 24 Nov 2015 18:03:59 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 95169 invoked by uid 500); 24 Nov 2015 18:03:59 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 95159 invoked by uid 99); 24 Nov 2015 18:03:59 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:03:59 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id C2280180992
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:03:58 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id BLwkk9Pf2CzM for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:03:49 +0000 (UTC)
Received: from resqmta-po-05v.sys.comcast.net (resqmta-po-05v.sys.comcast.net [96.114.154.164])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id CCB582064F
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:03:48 +0000 (UTC)
Received: from resomta-po-18v.sys.comcast.net ([96.114.154.242])
	by resqmta-po-05v.sys.comcast.net with comcast
	id lW3e1r0025E3ZMc01W3niC; Tue, 24 Nov 2015 18:03:47 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-18v.sys.comcast.net with comcast
	id lW3m1r00B2U0RYt01W3mJz; Tue, 24 Nov 2015 18:03:47 +0000
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <BCD8A2D9-4A6D-4976-A1FC-6E6B51507875@sharp.fm>
Date: Tue, 24 Nov 2015 13:03:46 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <3DEF82C9-6DCF-42BF-8B51-AD08B08DAC27@jaguNET.com>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org> <CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com> <3F16527F-A2FE-4CEE-A87C-E98BB6DF07ED@sharp.fm> <CAKQ1sVMze747yq7KD70DL2DC8fDtZwKPr310urLD=ndr=kTb0w@mail.gmail.com> <BCD8A2D9-4A6D-4976-A1FC-6E6B51507875@sharp.fm>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448388227;
	bh=MpVZTUQEI5Q56NIIcVGM/xsjo3NYPtojidIGrgDHqfE=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=UmgkHz4je3sp+Qe4FkcWQVvYFnYlD6S8IRQmbywT6oOBBxJ96fGqP82qHvEe+Xuyb
	 hTIoizB90VBWUXUTZR9g+nj+hOgK+j+S8ZGobCfTWj2gjQv73wTLZve7DzEf2t6u0M
	 jpj/MDJZHnpps30J4NZwHCZV8Vf2z8Br4o7AuJgN+GQCnSxRzma4NSxOgKQAkLq2b3
	 RTKVIGGtnB8cPlxBeHHj/WN1l5ff4yfH83L21js5/0UqdSC4qZMhQWfYts1IVGJ+lX
	 N8/pMktduyzwCgJmgQJIbC0q5VHqe7aolmUDyZP+YJkTpMJNGA60w03tjeAXJWiTTL
	 gEWP4dJ3CFcfw==


> On Nov 24, 2015, at 11:18 AM, Graham Leggett <minfrin@sharp.fm> wrote:
>=20
> On 24 Nov 2015, at 6:15 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>=20
>> Not sure:
>>   if (!strcmp(h, "max-age")
>>       || ap_cmpcasestr(h, "max-age"))
>> is likely to be a bit faster than a single ap_cmpcasestr() when it
>> matches, but much slower when it does not.
>=20
> Yep, that=E2=80=99s the point.
>=20
> The vast majority of comparisons are lowercase for tokens like this. =
Might as well test that fast path first before testing the worst case =
scenario.
>=20

Is there REALLY that much of a diff between

	if (ucharmap[*ps1] !=3D ucharmap[*ps2]) {

and

	if (*ps1 !=3D *ps2) {

to muddle up the code like that though??


From dev-return-84723-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:04:53 2015
Return-Path: <dev-return-84723-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EC82918521
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:04:52 +0000 (UTC)
Received: (qmail 97434 invoked by uid 500); 24 Nov 2015 18:04:52 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 97364 invoked by uid 500); 24 Nov 2015 18:04:52 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 97354 invoked by uid 99); 24 Nov 2015 18:04:52 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:04:52 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 11293C59E2
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:04:52 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.102
X-Spam-Level:
X-Spam-Status: No, score=-0.102 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id WCbjrbGTHsgK for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:04:51 +0000 (UTC)
Received: from mail-qg0-f52.google.com (mail-qg0-f52.google.com [209.85.192.52])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id E661D20C41
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:04:50 +0000 (UTC)
Received: by qgeb1 with SMTP id b1so16186809qge.1
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 10:04:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=DqwB9XMRywlwOPiKtUgzJL8Mc03QnxnQChni1MCxHsw=;
        b=dSlYJh5uwxm9lsYRWy7m1K30ZylKWCpODCroAZ1+LKVAbMxeAVAbFxzwmFYrSILl+Q
         z3VTO4yef8BbANrSbvkHXrgsVPvviDAvFdWDynDBO1HWoi1KcFAlnR8Pwmm63rdoKONd
         zj4QE9NJSzesNByIsqStVS0wDabcyMvyGTOEPSywrGM5lArsj8M05rscJ9mcxj07Cfix
         6JeUVYyFARDTCPWKWeARf4ZipTakfAfpwTETlyatwXB+yPMMoys39z3ERyZjcTqYwoIx
         V1F/JJTHuig/I5A7DJxbHjNcqnzAs2YaeKwN50y1qI9OvW4aF0r+KGyZBcRMMq1y6mY0
         SvTg==
MIME-Version: 1.0
X-Received: by 10.140.251.215 with SMTP id w206mr17014321qhc.73.1448388284420;
 Tue, 24 Nov 2015 10:04:44 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 24 Nov 2015 10:04:44 -0800 (PST)
Date: Tue, 24 Nov 2015 19:04:44 +0100
Message-ID: <CAKQ1sVOgsKky7tLp2nH_t1tMuJX+sgg4hULztMPRtcSx9NEW9Q@mail.gmail.com>
Subject: Better ap_casecmpstr[n]?
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: multipart/mixed; boundary=001a113a76f6310f0905254d2dbe

--001a113a76f6310f0905254d2dbe
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

I did some testing with different impl=C3=A9mentations and my results show
that fastest one is:

int ap_casecmpstr_2(const char *s1, const char *s2)
{
    size_t i;
    const unsigned char *ps1 =3D (const unsigned char *) s1;
    const unsigned char *ps2 =3D (const unsigned char *) s2;

    for (i =3D 0; ; ++i) {
        const int c1 =3D ps1[i];
        const int c2 =3D ps2[i];

        if (c1 !=3D c2) {
            return c1 - c2;
        }
        if (!c1) {
            break;
        }
    }
    return (0);
}

int ap_casecmpstrn_2(const char *s1, const char *s2, size_t n)
{
    size_t i;
    const unsigned char *ps1 =3D (const unsigned char *) s1;
    const unsigned char *ps2 =3D (const unsigned char *) s2;

    for (i =3D 0; i < n; ++i) {
        const int c1 =3D ps1[i];
        const int c2 =3D ps2[i];

        if (c1 !=3D c2) {
            return c1 - c2;
        }
        if (!c1) {
            break;
        }
    }
    return (0);
}

Some samples (test program attached):

$ gcc -Wall -O2 newtest.c -o newtest -lrt
$ for i in `seq 0 2`; do
    ./newtest $i 150000000 \
        xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa \
        xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa \
        0
done
- str[n]casecmp (nb=3D150000000, len=3D0)
time =3D 8.444547186 : res =3D 0
- ap_casecmpstr[n] (nb=3D150000000, len=3D0)
time =3D 8.299781468 : res =3D 0
- ap_casecmpstr[n] w/ index (nb=3D150000000, len=3D0)
time =3D 6.148787259 : res =3D 0

That's ~30% better.

$ gcc -Wall -Os newtest.c -o newtest -lrt
$ for i in `seq 0 2`; do
    ./newtest $i 150000000 \
        xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa \
        xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa \
        0
done
- str[n]casecmp (nb=3D150000000, len=3D0)
time =3D 8.528311136 : res =3D 0
- ap_casecmpstr[n] (nb=3D150000000, len=3D0)
time =3D 10.150553381 : res =3D 0
- ap_casecmpstr[n] w/ index (nb=3D150000000, len=3D0)
time =3D 9.758638566 : res =3D 0

The string.h's str[n]casecmp beat us with -Os, still this new
implementation is better than the current one.

WDYT, should I commit these new versions?

--001a113a76f6310f0905254d2dbe
Content-Type: text/x-csrc; charset=US-ASCII; name="newtest.c"
Content-Disposition: attachment; filename="newtest.c"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_ihdoz0qg0

I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzdGRpbnQuaD4KI2luY2x1ZGUgPHN0ZGxpYi5o
PgojaW5jbHVkZSA8c3RyaW5nLmg+CgojaW5jbHVkZSA8bGltaXRzLmg+CiNpbmNsdWRlIDx0aW1l
Lmg+CgovKgogKiBQcm92aWRlIG91ciBvd24ga25vd24tZmFzdCBpbXBsZW1lbnRhdGlvbiBvZiBz
dHJbbl1jYXNlY21wKCkKICogTk9URTogQVNDSUkgb25seSEKICovCnN0YXRpYyBjb25zdCB1bnNp
Z25lZCBjaGFyIHVjaGFybWFwW10gPSB7CiAgICAweDAsICAweDEsICAweDIsICAweDMsICAweDQs
ICAweDUsICAweDYsICAweDcsCiAgICAweDgsICAweDksICAweGEsICAweGIsICAweGMsICAweGQs
ICAweGUsICAweGYsCiAgICAweDEwLCAweDExLCAweDEyLCAweDEzLCAweDE0LCAweDE1LCAweDE2
LCAweDE3LAogICAgMHgxOCwgMHgxOSwgMHgxYSwgMHgxYiwgMHgxYywgMHgxZCwgMHgxZSwgMHgx
ZiwKICAgIDB4MjAsIDB4MjEsIDB4MjIsIDB4MjMsIDB4MjQsIDB4MjUsIDB4MjYsIDB4MjcsCiAg
ICAweDI4LCAweDI5LCAweDJhLCAweDJiLCAweDJjLCAweDJkLCAweDJlLCAweDJmLAogICAgMHgz
MCwgMHgzMSwgMHgzMiwgMHgzMywgMHgzNCwgMHgzNSwgMHgzNiwgMHgzNywKICAgIDB4MzgsIDB4
MzksIDB4M2EsIDB4M2IsIDB4M2MsIDB4M2QsIDB4M2UsIDB4M2YsCiAgICAweDQwLCAgJ2EnLCAg
J2InLCAgJ2MnLCAgJ2QnLCAgJ2UnLCAgJ2YnLCAgJ2cnLAogICAgICdoJywgICdpJywgICdqJywg
ICdrJywgICdsJywgICdtJywgICduJywgICdvJywKICAgICAncCcsICAncScsICAncicsICAncycs
ICAndCcsICAndScsICAndicsICAndycsCiAgICAgJ3gnLCAgJ3knLCAgJ3onLCAweDViLCAweDVj
LCAweDVkLCAweDVlLCAweDVmLAogICAgMHg2MCwgICdhJywgICdiJywgICdjJywgICdkJywgICdl
JywgICdmJywgICdnJywKICAgICAnaCcsICAnaScsICAnaicsICAnaycsICAnbCcsICAnbScsICAn
bicsICAnbycsCiAgICAgJ3AnLCAgJ3EnLCAgJ3InLCAgJ3MnLCAgJ3QnLCAgJ3UnLCAgJ3YnLCAg
J3cnLAogICAgICd4JywgICd5JywgICd6JywgMHg3YiwgMHg3YywgMHg3ZCwgMHg3ZSwgMHg3ZiwK
ICAgIDB4ODAsIDB4ODEsIDB4ODIsIDB4ODMsIDB4ODQsIDB4ODUsIDB4ODYsIDB4ODcsCiAgICAw
eDg4LCAweDg5LCAweDhhLCAweDhiLCAweDhjLCAweDhkLCAweDhlLCAweDhmLAogICAgMHg5MCwg
MHg5MSwgMHg5MiwgMHg5MywgMHg5NCwgMHg5NSwgMHg5NiwgMHg5NywKICAgIDB4OTgsIDB4OTks
IDB4OWEsIDB4OWIsIDB4OWMsIDB4OWQsIDB4OWUsIDB4OWYsCiAgICAweGEwLCAweGExLCAweGEy
LCAweGEzLCAweGE0LCAweGE1LCAweGE2LCAweGE3LAogICAgMHhhOCwgMHhhOSwgMHhhYSwgMHhh
YiwgMHhhYywgMHhhZCwgMHhhZSwgMHhhZiwKICAgIDB4YjAsIDB4YjEsIDB4YjIsIDB4YjMsIDB4
YjQsIDB4YjUsIDB4YjYsIDB4YjcsCiAgICAweGI4LCAweGI5LCAweGJhLCAweGJiLCAweGJjLCAw
eGJkLCAweGJlLCAweGJmLAogICAgMHhjMCwgMHhjMSwgMHhjMiwgMHhjMywgMHhjNCwgMHhjNSwg
MHhjNiwgMHhjNywKICAgIDB4YzgsIDB4YzksIDB4Y2EsIDB4Y2IsIDB4Y2MsIDB4Y2QsIDB4Y2Us
IDB4Y2YsCiAgICAweGQwLCAweGQxLCAweGQyLCAweGQzLCAweGQ0LCAweGQ1LCAweGQ2LCAweGQ3
LAogICAgMHhkOCwgMHhkOSwgMHhkYSwgMHhkYiwgMHhkYywgMHhkZCwgMHhkZSwgMHhkZiwKICAg
IDB4ZTAsIDB4ZTEsIDB4ZTIsIDB4ZTMsIDB4ZTQsIDB4ZTUsIDB4ZTYsIDB4ZTcsCiAgICAweGU4
LCAweGU5LCAweGVhLCAweGViLCAweGVjLCAweGVkLCAweGVlLCAweGVmLAogICAgMHhmMCwgMHhm
MSwgMHhmMiwgMHhmMywgMHhmNCwgMHhmNSwgMHhmNiwgMHhmNywKICAgIDB4ZjgsIDB4ZjksIDB4
ZmEsIDB4ZmIsIDB4ZmMsIDB4ZmQsIDB4ZmUsIDB4ZmYKfTsKCmludCBhcF9jYXNlY21wc3RyKGNv
bnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMikKewogICAgY29uc3QgdW5zaWduZWQgY2hhciAq
cHMxID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczE7CiAgICBjb25zdCB1bnNpZ25lZCBjaGFy
ICpwczIgPSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMjsKCiAgICB3aGlsZSAodWNoYXJtYXBb
KnBzMV0gPT0gdWNoYXJtYXBbKnBzMisrXSkgewogICAgICAgIGlmICgqcHMxKysgPT0gJ1wwJykg
ewogICAgICAgICAgICByZXR1cm4gKDApOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiAodWNo
YXJtYXBbKnBzMV0gLSB1Y2hhcm1hcFsqLS1wczJdKTsKfQoKaW50IGFwX2Nhc2VjbXBzdHJuKGNv
bnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMiwgc2l6ZV90IG4pCnsKICAgIGNvbnN0IHVuc2ln
bmVkIGNoYXIgKnBzMSA9IChjb25zdCB1bnNpZ25lZCBjaGFyICopIHMxOwogICAgY29uc3QgdW5z
aWduZWQgY2hhciAqcHMyID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczI7CiAgICB3aGlsZSAo
bi0tKSB7CiAgICAgICAgaWYgKHVjaGFybWFwWypwczFdICE9IHVjaGFybWFwWypwczIrK10pIHsK
ICAgICAgICAgICAgcmV0dXJuICh1Y2hhcm1hcFsqcHMxXSAtIHVjaGFybWFwWyotLXBzMl0pOwog
ICAgICAgIH0KICAgICAgICBpZiAoKnBzMSsrID09ICdcMCcpIHsKICAgICAgICAgICAgYnJlYWs7
CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuICgwKTsKfQoKaW50IGFwX2Nhc2VjbXBzdHJfMihj
b25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIpCnsKICAgIHNpemVfdCBpOwogICAgY29uc3Qg
dW5zaWduZWQgY2hhciAqcHMxID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczE7CiAgICBjb25z
dCB1bnNpZ25lZCBjaGFyICpwczIgPSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMjsKCiAgICBm
b3IgKGkgPSAwOyA7ICsraSkgewogICAgICAgIGNvbnN0IGludCBjMSA9IHBzMVtpXTsKICAgICAg
ICBjb25zdCBpbnQgYzIgPSBwczJbaV07CgogICAgICAgIGlmIChjMSAhPSBjMikgewogICAgICAg
ICAgICByZXR1cm4gYzEgLSBjMjsKICAgICAgICB9CiAgICAgICAgaWYgKCFjMSkgewogICAgICAg
ICAgICBicmVhazsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gKDApOwp9CgppbnQgYXBfY2Fz
ZWNtcHN0cm5fMihjb25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIsIHNpemVfdCBuKQp7CiAg
ICBzaXplX3QgaTsKICAgIGNvbnN0IHVuc2lnbmVkIGNoYXIgKnBzMSA9IChjb25zdCB1bnNpZ25l
ZCBjaGFyICopIHMxOwogICAgY29uc3QgdW5zaWduZWQgY2hhciAqcHMyID0gKGNvbnN0IHVuc2ln
bmVkIGNoYXIgKikgczI7CgogICAgZm9yIChpID0gMDsgaSA8IG47ICsraSkgewogICAgICAgIGNv
bnN0IGludCBjMSA9IHBzMVtpXTsKICAgICAgICBjb25zdCBpbnQgYzIgPSBwczJbaV07CgogICAg
ICAgIGlmIChjMSAhPSBjMikgewogICAgICAgICAgICByZXR1cm4gYzEgLSBjMjsKICAgICAgICB9
CiAgICAgICAgaWYgKCFjMSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9CiAg
ICByZXR1cm4gKDApOwp9CgojZGVmaW5lIFBST0cgYXJndlswXQojZGVmaW5lIE1FVEhPRCBhcmd2
WzFdCiNkZWZpbmUgTkIgYXJndlsyXQojZGVmaW5lIFMxIGFyZ3ZbM10KI2RlZmluZSBTMiBhcmd2
WzRdCiNkZWZpbmUgTEVOIGFyZ3ZbNV0KCi8qIFRoZSArKyBhcmUgaGVyZSB0byB0cnkgdG8gcHJl
dmVudCBzb21lIG9wdGltaXphdGlvbiBkb25lIGJ5IGdjYyAqLwojZGVmaW5lIEZPUiBmb3IgKGk9
MDsgaTxuYjsgaSsrLCAoUzFbMF0pKyssIChTMlswXSkrKykKCmludCBtYWluKGludCBhcmdjLCBj
aGFyICphcmd2W10pCnsKICAgIGludDY0X3QgZGlmZjsKICAgIHN0cnVjdCB0aW1lc3BlYyB0dnMs
IHR2ZTsKICAgIGludCBpLCBsZW4sIG5iOwogICAgaW50IHJlcyA9IDA7CiAgICAKICAgIGlmIChh
cmdjIDwgNikgewogICAgICAgIHByaW50ZigiJXMgPDA9c3RkIDsgMT1vcHRpbWl6ZWQ+IDxuYiBp
dGVyPiBTMSBTMiA8bmIgY2hhciB0byBjb21wYXJlIG9yIDA+XG4iLCBQUk9HKTsKICAgICAgICBy
ZXR1cm4gMDsKICAgIH0KICAgICAgICAKICAgIGxlbiA9IGF0b2koTEVOKTsKICAgIG5iICA9IGF0
b2koTkIpOwogICAgCiAgICBpZiAoKk1FVEhPRCA9PSAnMCcpIHsKICAgICAgICBwcmludGYoIi0g
c3RyW25dY2FzZWNtcCAobmI9JWQsIGxlbj0lZClcbiIsIG5iLCBsZW4pOwogICAgICAgIGNsb2Nr
X2dldHRpbWUoQ0xPQ0tfTU9OT1RPTklDLCAmdHZzKTsKICAgICAgICBpZiAobGVuID09IDApIHsK
ICAgICAgICAgICAgRk9SIHsKICAgICAgICAgICAgICAgIC8qIHJlYWxseSB1c2UgdGhlIHJlc3Vs
dCBvZiB0aGUgZnVuY3Rpb24gKi8KICAgICAgICAgICAgICAgIHJlcyB8PSBzdHJjYXNlY21wKFMx
LCBTMik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAg
IEZPUiB7CiAgICAgICAgICAgICAgICByZXMgfD0gc3RybmNhc2VjbXAoUzEsIFMyLCBsZW4pOwog
ICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNsb2NrX2dldHRpbWUoQ0xPQ0tfTU9OT1RP
TklDLCAmdHZlKTsKICAgIH0KICAgIGVsc2UgaWYgKCpNRVRIT0QgPT0gJzEnKSB7CiAgICAgICAg
cHJpbnRmKCItIGFwX2Nhc2VjbXBzdHJbbl0gKG5iPSVkLCBsZW49JWQpXG4iLCBuYiwgbGVuKTsK
ICAgICAgICBjbG9ja19nZXR0aW1lKENMT0NLX01PTk9UT05JQywgJnR2cyk7CiAgICAgICAgaWYg
KGxlbiA9PSAwKSB7CiAgICAgICAgICAgIEZPUiB7CiAgICAgICAgICAgICAgICByZXMgfD0gYXBf
Y2FzZWNtcHN0cihTMSwgUzIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2Ug
ewogICAgICAgICAgICBGT1IgewogICAgICAgICAgICAgICAgcmVzIHw9IGFwX2Nhc2VjbXBzdHJu
KFMxLCBTMiwgbGVuKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjbG9ja19nZXR0
aW1lKENMT0NLX01PTk9UT05JQywgJnR2ZSk7CiAgICB9CiAgICBlbHNlIGlmICgqTUVUSE9EID09
ICcyJykgewogICAgICAgIHByaW50ZigiLSBhcF9jYXNlY21wc3RyW25dIHcvIGluZGV4IChuYj0l
ZCwgbGVuPSVkKVxuIiwgbmIsIGxlbik7CiAgICAgICAgY2xvY2tfZ2V0dGltZShDTE9DS19NT05P
VE9OSUMsICZ0dnMpOwogICAgICAgIGlmIChsZW4gPT0gMCkgewogICAgICAgICAgICBGT1Igewog
ICAgICAgICAgICAgICAgcmVzIHw9IGFwX2Nhc2VjbXBzdHJfMihTMSwgUzIpOwogICAgICAgICAg
ICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBGT1IgewogICAgICAgICAg
ICAgICAgcmVzIHw9IGFwX2Nhc2VjbXBzdHJuXzIoUzEsIFMyLCBsZW4pOwogICAgICAgICAgICB9
CiAgICAgICAgfQogICAgICAgIGNsb2NrX2dldHRpbWUoQ0xPQ0tfTU9OT1RPTklDLCAmdHZlKTsK
ICAgIH0KCiAgICBkaWZmICA9IChpbnQ2NF90KXR2ZS50dl9zZWMgKiAxMDAwMDAwMDAwTCArIHR2
ZS50dl9uc2VjOwogICAgZGlmZiAtPSAoaW50NjRfdCl0dnMudHZfc2VjICogMTAwMDAwMDAwMEwg
KyB0dnMudHZfbnNlYzsKCiAgICAvKiByZWFsbHkgdXNlIHRoZSByZXN1bHQgb2YgdGhlIGZ1bmN0
aW9uICovCiAgICBwcmludGYoInRpbWUgPSAlbGxkLiUuNmxsZCA6IHJlcyA9ICVkXG4iLAogICAg
ICAgICAgICAobG9uZyBsb25nKWRpZmYgLyAxMDAwMDAwMDAwTCwKICAgICAgICAgICAgKGxvbmcg
bG9uZylkaWZmICUgMTAwMDAwMDAwMEwsCiAgICAgICAgICAgIHJlcyk7CiAgICByZXR1cm4gMDsg
Cn0K
--001a113a76f6310f0905254d2dbe--

From dev-return-84724-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:07:44 2015
Return-Path: <dev-return-84724-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 16A9F1854E
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:07:44 +0000 (UTC)
Received: (qmail 6572 invoked by uid 500); 24 Nov 2015 18:07:43 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 6506 invoked by uid 500); 24 Nov 2015 18:07:43 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 6496 invoked by uid 99); 24 Nov 2015 18:07:43 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:07:43 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id B5FEA1A0D10
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:07:42 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id wp6C6Wzomj1k for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:07:29 +0000 (UTC)
Received: from resqmta-po-05v.sys.comcast.net (resqmta-po-05v.sys.comcast.net [96.114.154.164])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 4CB0820EA4
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:07:29 +0000 (UTC)
Received: from resomta-po-06v.sys.comcast.net ([96.114.154.230])
	by resqmta-po-05v.sys.comcast.net with comcast
	id lW7L1r0024yXVJQ01W7UZN; Tue, 24 Nov 2015 18:07:28 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-06v.sys.comcast.net with comcast
	id lW7T1r00X2U0RYt01W7UaU; Tue, 24 Nov 2015 18:07:28 +0000
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CACsi251h7L1UdX=XND=-S_HrGGYbDZdw_=RUHpEwCQnTg34jrA@mail.gmail.com>
Date: Tue, 24 Nov 2015 13:07:27 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <1538BDA6-32D5-4FFF-B22E-F8FDB101F80F@jaguNET.com>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org> <CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com> <3F16527F-A2FE-4CEE-A87C-E98BB6DF07ED@sharp.fm> <CAKQ1sVMze747yq7KD70DL2DC8fDtZwKPr310urLD=ndr=kTb0w@mail.gmail.com> <BCD8A2D9-4A6D-4976-A1FC-6E6B51507875@sharp.fm> <CACsi251h7L1UdX=XND=-S_HrGGYbDZdw_=RUHpEwCQnTg34jrA@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448388448;
	bh=Ml6JKpwTUYDmqpsxPCDfQkUnBK6LPLh1iIqkAeIQ/CA=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=wdF+gtmEN8bF5KQEH5T/XIa3L5vfPoZop5mO/Wj/EIflUICEcXGDI36EHFZt7Xasm
	 KRCJjJr0cB2sux5gYM23zyYW/H9gfFcxsr8iTi0X0qsQg2fZSvxz3Rj4SVZ0tj49zv
	 x/JTEmUd9RIBzMffrY3i377A1HaTHoV6fy3Mc3Hpb4x6QBIE5h3hpMGyS4arecqZKX
	 VnGfh98QJwubDCLtQpCJzGpbNFQqMEF6KONNBTOn+S4gOLKHNAYzdOOFdxXCMdhqn9
	 kOusHQZoOdR3Gzn+v7C+JD0xBpqj/J0GQ4jQSSp8KZsRm5CYJXynphtmyG2CPYtmYE
	 9skheI+kHAn3w==

+1 (concept)

> On Nov 24, 2015, at 12:40 PM, William A Rowe Jr <wrowe@rowe-clan.net> =
wrote:
>=20
> On Tue, Nov 24, 2015 at 10:18 AM, Graham Leggett <minfrin@sharp.fm> =
wrote:
> On 24 Nov 2015, at 6:15 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>=20
> > Not sure:
> >    if (!strcmp(h, "max-age")
> >        || ap_cmpcasestr(h, "max-age"))
> > is likely to be a bit faster than a single ap_cmpcasestr() when it
> > matches, but much slower when it does not.
>=20
> Yep, that=E2=80=99s the point.
>=20
> The vast majority of comparisons are lowercase for tokens like this. =
Might as well test that fast path first before testing the worst case =
scenario.
>=20
> Hmmm, it's our implementation, why increase the pain?  Consider the =
following 'optimization' - fallthrough from identity to case =
insensitivity with one wasted equality test...
>=20
> AP_DECLARE(int) ap_casecmpstr(const char *s1, const char *s2)
> {
>     const unsigned char *ps1 =3D (const unsigned char *) s1;
>     const unsigned char *ps2 =3D (const unsigned char *) s2;
>=20
>     while (*ps1 =3D=3D *ps2) {
>         if (*ps1++ =3D=3D '\0') {
>             return (0);
>         }
>         ps2++;
>     }
>     while (ucharmap[*ps1] =3D=3D ucharmap[*ps2]) {
>         if (*ps1++ =3D=3D '\0') {
>             return (0);
>         }
>         ps2++;
>     }
>     return (ucharmap[*ps1] - ucharmap[*ps2]);
> }
>=20
>=20
> AP_DECLARE(int) ap_casecmpstrn(const char *s1, const char *s2, =
apr_size_t n)
> {
>     const unsigned char *ps1 =3D (const unsigned char *) s1;
>     const unsigned char *ps2 =3D (const unsigned char *) s2;
>     while (n) {
>         if (*ps1 !=3D *ps2) {
>             break;
>         }
>         if (*ps1++ =3D=3D '\0') {
>             return (0);
>         }
>         ps2++;
>         n--;
>     }
>     while (n--) {
>         if (ucharmap[*ps1] !=3D ucharmap[*ps2]) {
>             return (ucharmap[*ps1] - ucharmap[*ps2]);
>         }
>         if (*ps1++ =3D=3D '\0') {
>             break;
>         }
>         ps2++;
>     }
>     return (0);
> }
>     =20
> =20


From dev-return-84725-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:09:49 2015
Return-Path: <dev-return-84725-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A221618586
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:09:49 +0000 (UTC)
Received: (qmail 15871 invoked by uid 500); 24 Nov 2015 18:09:49 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 15804 invoked by uid 500); 24 Nov 2015 18:09:49 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 15794 invoked by uid 99); 24 Nov 2015 18:09:49 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:09:49 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 7F53D1A4246
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:09:48 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.652
X-Spam-Level:
X-Spam-Status: No, score=0.652 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id em5yL4PmI4qW for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:09:43 +0000 (UTC)
Received: from resqmta-po-03v.sys.comcast.net (resqmta-po-03v.sys.comcast.net [96.114.154.162])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id C52BA441BA
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:09:42 +0000 (UTC)
Received: from resomta-po-18v.sys.comcast.net ([96.114.154.242])
	by resqmta-po-03v.sys.comcast.net with comcast
	id lW9b1r0025E3ZMc01W9c5V; Tue, 24 Nov 2015 18:09:36 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-18v.sys.comcast.net with comcast
	id lW9c1r0032U0RYt01W9c75; Tue, 24 Nov 2015 18:09:36 +0000
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: Better ap_casecmpstr[n]?
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CAKQ1sVOgsKky7tLp2nH_t1tMuJX+sgg4hULztMPRtcSx9NEW9Q@mail.gmail.com>
Date: Tue, 24 Nov 2015 13:09:35 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <A2A9F099-9D10-4B83-9CB2-A8CDF1662F9D@jaguNET.com>
References: <CAKQ1sVOgsKky7tLp2nH_t1tMuJX+sgg4hULztMPRtcSx9NEW9Q@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448388576;
	bh=LMw5YFow5BIZbDnpPKcsJeIzQE5riw/4wqqdd5/7fd4=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=rWNi66ZVp7rQCzOARuUK3TmsFQfY8f1SUqXrMiRhkmB/GyunXULjkmOxzeh6sBHpr
	 cTboz3qyOhQqDv7eiwN9l7mVKIcigfdiyj+dncidyLSuz/8/E9aUrfggrbutFOWN/V
	 ZZqjQOhtG+pTvGmp78SD5RzNCoUYhQYN8KALYuSEEUhOu73shsaUSe1KgN9sdJ8HfD
	 SnkFfEcSTsd+OXj7MCOGYcOeABxDgJh48ba6WxK2L2BVTjDr67lCd1cPJ5HulySwM5
	 smhj15g0HmeHcQ3vqB8UKuDBawEqEL0NRYc0w/EveaCGxX+G5TC2x9VyhCTiotDg9i
	 46J3iRhoaM+4g==

If we really want to squeek out optimizations, judicious use
of 'register' might help even...

But after awhile things start getting silly :)

> On Nov 24, 2015, at 1:04 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>=20
> I did some testing with different impl=C3=A9mentations and my results =
show
> that fastest one is:
>=20
> int ap_casecmpstr_2(const char *s1, const char *s2)
> {
>    size_t i;
>    const unsigned char *ps1 =3D (const unsigned char *) s1;
>    const unsigned char *ps2 =3D (const unsigned char *) s2;
>=20
>    for (i =3D 0; ; ++i) {
>        const int c1 =3D ps1[i];
>        const int c2 =3D ps2[i];
>=20
>        if (c1 !=3D c2) {
>            return c1 - c2;
>        }
>        if (!c1) {
>            break;
>        }
>    }
>    return (0);
> }
>=20
> int ap_casecmpstrn_2(const char *s1, const char *s2, size_t n)
> {
>    size_t i;
>    const unsigned char *ps1 =3D (const unsigned char *) s1;
>    const unsigned char *ps2 =3D (const unsigned char *) s2;
>=20
>    for (i =3D 0; i < n; ++i) {
>        const int c1 =3D ps1[i];
>        const int c2 =3D ps2[i];
>=20
>        if (c1 !=3D c2) {
>            return c1 - c2;
>        }
>        if (!c1) {
>            break;
>        }
>    }
>    return (0);
> }
>=20
> Some samples (test program attached):
>=20
> $ gcc -Wall -O2 newtest.c -o newtest -lrt
> $ for i in `seq 0 2`; do
>    ./newtest $i 150000000 \
>        xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa \
>        xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa \
>        0
> done
> - str[n]casecmp (nb=3D150000000, len=3D0)
> time =3D 8.444547186 : res =3D 0
> - ap_casecmpstr[n] (nb=3D150000000, len=3D0)
> time =3D 8.299781468 : res =3D 0
> - ap_casecmpstr[n] w/ index (nb=3D150000000, len=3D0)
> time =3D 6.148787259 : res =3D 0
>=20
> That's ~30% better.
>=20
> $ gcc -Wall -Os newtest.c -o newtest -lrt
> $ for i in `seq 0 2`; do
>    ./newtest $i 150000000 \
>        xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa \
>        xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa \
>        0
> done
> - str[n]casecmp (nb=3D150000000, len=3D0)
> time =3D 8.528311136 : res =3D 0
> - ap_casecmpstr[n] (nb=3D150000000, len=3D0)
> time =3D 10.150553381 : res =3D 0
> - ap_casecmpstr[n] w/ index (nb=3D150000000, len=3D0)
> time =3D 9.758638566 : res =3D 0
>=20
> The string.h's str[n]casecmp beat us with -Os, still this new
> implementation is better than the current one.
>=20
> WDYT, should I commit these new versions?
> <newtest.c>


From dev-return-84726-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:12:05 2015
Return-Path: <dev-return-84726-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EF63F1859E
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:12:04 +0000 (UTC)
Received: (qmail 22005 invoked by uid 500); 24 Nov 2015 18:12:04 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 21927 invoked by uid 500); 24 Nov 2015 18:12:04 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 21917 invoked by uid 99); 24 Nov 2015 18:12:04 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:12:04 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id E53511A4246
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:12:03 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id CdbkWQIlvQuO for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:11:54 +0000 (UTC)
Received: from mail-qg0-f49.google.com (mail-qg0-f49.google.com [209.85.192.49])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id C7F5425E2F
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:11:53 +0000 (UTC)
Received: by qgcc31 with SMTP id c31so16115579qgc.3
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 10:11:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=agP3j6GWLQuOZRFD0Z0IsTjSTkWKZyztO2U3MCD3k/0=;
        b=a369U+tlv1p7n+BahbpdT+FBqddj87vucAM+CR8UUn8UlaQHcuIUWDsJkdmmEK/tTp
         iFvyta12/Iu2cqwt/7w6iyFB+eKVh9AGptxRoEjH3YWAjDLm4nFua8ABJLB3u/0RS6x2
         QSTjX72RWuIe7XW0mlA3oVrru4mk2v0Ju58XrOX8GtP7exUWfQmMj8Gfy134kvFT6ic9
         48GpQsFsplnBwe1b/UAjIMQzX6IPpP1qnYIKBt13H7Mqjv+O1fvBu0q0F+HYBOEQshCF
         CjAQahhLxnHOaJno3t7AtPH3y5pAUHwI7mqjyXmxhwERtzzB1G2B8YAjda1DS2dT7XMM
         Wwrw==
MIME-Version: 1.0
X-Received: by 10.140.101.51 with SMTP id t48mr35695689qge.71.1448388707074;
 Tue, 24 Nov 2015 10:11:47 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 24 Nov 2015 10:11:47 -0800 (PST)
In-Reply-To: <3DEF82C9-6DCF-42BF-8B51-AD08B08DAC27@jaguNET.com>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org>
	<CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com>
	<3F16527F-A2FE-4CEE-A87C-E98BB6DF07ED@sharp.fm>
	<CAKQ1sVMze747yq7KD70DL2DC8fDtZwKPr310urLD=ndr=kTb0w@mail.gmail.com>
	<BCD8A2D9-4A6D-4976-A1FC-6E6B51507875@sharp.fm>
	<3DEF82C9-6DCF-42BF-8B51-AD08B08DAC27@jaguNET.com>
Date: Tue, 24 Nov 2015 19:11:47 +0100
Message-ID: <CAKQ1sVNiuLp5onn+auPDsRP9kWZq72LbbEO_JxJai8jZfMpuFA@mail.gmail.com>
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Tue, Nov 24, 2015 at 7:03 PM, Jim Jagielski <jim@jagunet.com> wrote:
>
>> On Nov 24, 2015, at 11:18 AM, Graham Leggett <minfrin@sharp.fm> wrote:
>>
>> On 24 Nov 2015, at 6:15 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>
>>> Not sure:
>>>   if (!strcmp(h, "max-age")
>>>       || ap_cmpcasestr(h, "max-age"))
>>> is likely to be a bit faster than a single ap_cmpcasestr() when it
>>> matches, but much slower when it does not.
>>
>> Yep, that=E2=80=99s the point.
>>
>> The vast majority of comparisons are lowercase for tokens like this. Mig=
ht as well test that fast path first before testing the worst case scenario=
.
>>
>
> Is there REALLY that much of a diff between
>
>         if (ucharmap[*ps1] !=3D ucharmap[*ps2]) {
>
> and
>
>         if (*ps1 !=3D *ps2) {
>
> to muddle up the code like that though??

The test from the other thread including str[n]cmp() says:

$ for i in `seq 0 3`; do
    ./newtest $i 150000000 \
        xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa \
        xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa \
        0
done
- str[n]casecmp (nb=3D150000000, len=3D0)
time =3D 8.435895804 : res =3D 0
- ap_casecmpstr[n] (nb=3D150000000, len=3D0)
time =3D 8.207019751 : res =3D 0
- ap_casecmpstr[n] w/ index (nb=3D150000000, len=3D0)
time =3D 4.429462481 : res =3D 0
- str[n]cmp (nb=3D150000000, len=3D0)
time =3D 1.923039981 : res =3D 0

So strcmp() is really fast, since it probably advances word per word...

From dev-return-84727-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:16:29 2015
Return-Path: <dev-return-84727-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BB822185DD
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:16:29 +0000 (UTC)
Received: (qmail 38432 invoked by uid 500); 24 Nov 2015 18:16:29 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 38357 invoked by uid 500); 24 Nov 2015 18:16:29 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 38347 invoked by uid 99); 24 Nov 2015 18:16:29 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:16:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id B120E1A0D20
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:16:28 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id sk7ejmL93TW3 for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:16:23 +0000 (UTC)
Received: from mail-qk0-f169.google.com (mail-qk0-f169.google.com [209.85.220.169])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 136AF441BB
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:16:23 +0000 (UTC)
Received: by qkda6 with SMTP id a6so8120317qkd.3
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 10:16:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=vx4yeFmlmG2mB5qS9L5XmT6D/TLi4YMiFBKZ7M0N9G8=;
        b=GEyo21nFfCrIYCSzmyip5x92pOVVSZ1Btk/digLc2eRcW+EhG1psNWzgkHP/gWUdXy
         XnKVBoO3mNA8tkyrN7jMqV4YBHlmfCc05+PD5NGnd/FffT3hp7S/VF+bFDesrd1tw2o7
         /bioXktB4l+HB7G/LJqQMIMz/KGSnt+GHJ3NAx0glzy6Uaw++9qLQCtSIXBSaLdWVNUW
         HsTYyUKf9SGlgxc67uZPDxXQikkOSUo1Jk2DXaAJufeTAOEe54XDKJG7hnxfwpcHg3O/
         88QmSOAJQVXqWCiu1zt28mITJEsP/ztoUHjzN2UNSiljwPWV1K3OI8ASr2aNhGs7viNI
         B9vQ==
MIME-Version: 1.0
X-Received: by 10.55.80.194 with SMTP id e185mr34364863qkb.68.1448388976854;
 Tue, 24 Nov 2015 10:16:16 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 24 Nov 2015 10:16:16 -0800 (PST)
In-Reply-To: <A2A9F099-9D10-4B83-9CB2-A8CDF1662F9D@jaguNET.com>
References: <CAKQ1sVOgsKky7tLp2nH_t1tMuJX+sgg4hULztMPRtcSx9NEW9Q@mail.gmail.com>
	<A2A9F099-9D10-4B83-9CB2-A8CDF1662F9D@jaguNET.com>
Date: Tue, 24 Nov 2015 19:16:16 +0100
Message-ID: <CAKQ1sVPh1DP9UqH7R60pJTe=kQr=3PGTFxWj-XVhsubq+W_MhA@mail.gmail.com>
Subject: Re: Better ap_casecmpstr[n]?
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

register(s) are nicely handled by the compiler today, though locals
may help it ;)

Between 30% and 50% improvements (depending on the run, I'd have to do
an average to be more precise), is not that negligible IMHO.

On Tue, Nov 24, 2015 at 7:09 PM, Jim Jagielski <jim@jagunet.com> wrote:
> If we really want to squeek out optimizations, judicious use
> of 'register' might help even...
>
> But after awhile things start getting silly :)
>
>> On Nov 24, 2015, at 1:04 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>
>> I did some testing with different impl=C3=A9mentations and my results sh=
ow
>> that fastest one is:
>>
>> int ap_casecmpstr_2(const char *s1, const char *s2)
>> {
>>    size_t i;
>>    const unsigned char *ps1 =3D (const unsigned char *) s1;
>>    const unsigned char *ps2 =3D (const unsigned char *) s2;
>>
>>    for (i =3D 0; ; ++i) {
>>        const int c1 =3D ps1[i];
>>        const int c2 =3D ps2[i];
>>
>>        if (c1 !=3D c2) {
>>            return c1 - c2;
>>        }
>>        if (!c1) {
>>            break;
>>        }
>>    }
>>    return (0);
>> }
>>
>> int ap_casecmpstrn_2(const char *s1, const char *s2, size_t n)
>> {
>>    size_t i;
>>    const unsigned char *ps1 =3D (const unsigned char *) s1;
>>    const unsigned char *ps2 =3D (const unsigned char *) s2;
>>
>>    for (i =3D 0; i < n; ++i) {
>>        const int c1 =3D ps1[i];
>>        const int c2 =3D ps2[i];
>>
>>        if (c1 !=3D c2) {
>>            return c1 - c2;
>>        }
>>        if (!c1) {
>>            break;
>>        }
>>    }
>>    return (0);
>> }
>>
>> Some samples (test program attached):
>>
>> $ gcc -Wall -O2 newtest.c -o newtest -lrt
>> $ for i in `seq 0 2`; do
>>    ./newtest $i 150000000 \
>>        xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa \
>>        xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa \
>>        0
>> done
>> - str[n]casecmp (nb=3D150000000, len=3D0)
>> time =3D 8.444547186 : res =3D 0
>> - ap_casecmpstr[n] (nb=3D150000000, len=3D0)
>> time =3D 8.299781468 : res =3D 0
>> - ap_casecmpstr[n] w/ index (nb=3D150000000, len=3D0)
>> time =3D 6.148787259 : res =3D 0
>>
>> That's ~30% better.
>>
>> $ gcc -Wall -Os newtest.c -o newtest -lrt
>> $ for i in `seq 0 2`; do
>>    ./newtest $i 150000000 \
>>        xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa \
>>        xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa \
>>        0
>> done
>> - str[n]casecmp (nb=3D150000000, len=3D0)
>> time =3D 8.528311136 : res =3D 0
>> - ap_casecmpstr[n] (nb=3D150000000, len=3D0)
>> time =3D 10.150553381 : res =3D 0
>> - ap_casecmpstr[n] w/ index (nb=3D150000000, len=3D0)
>> time =3D 9.758638566 : res =3D 0
>>
>> The string.h's str[n]casecmp beat us with -Os, still this new
>> implementation is better than the current one.
>>
>> WDYT, should I commit these new versions?
>> <newtest.c>
>

From dev-return-84728-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:23:35 2015
Return-Path: <dev-return-84728-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4E11E18654
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:23:35 +0000 (UTC)
Received: (qmail 78651 invoked by uid 500); 24 Nov 2015 18:23:34 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 78575 invoked by uid 500); 24 Nov 2015 18:23:34 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 78565 invoked by uid 99); 24 Nov 2015 18:23:34 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:23:34 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 34EA41A0AC9
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:23:33 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.698
X-Spam-Level:
X-Spam-Status: No, score=0.698 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	KAM_ASCII_DIVIDERS=0.8, RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id l4__-252vc77 for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:23:19 +0000 (UTC)
Received: from mail-qg0-f51.google.com (mail-qg0-f51.google.com [209.85.192.51])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 3C3ED441BA
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:23:19 +0000 (UTC)
Received: by qgeb1 with SMTP id b1so16587353qge.1
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 10:23:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=qVozlubAeNGXu+3LviXtt5lo7dGbVKk1ynsbv4mVzYs=;
        b=wl9VrWEXrjxemw2ijS34Am450M7us8mFLb+wkTNTjgpGWy5oj/v8p2SGYcqaYS8T2s
         jhVCPQn31/7jAzPZmn2Ul8p9+l7U1pb2YVhUx9mEJmDYJeCztr5PAPz3L0EatTFsvic5
         5jW8jjCxL9miZsk6Dofj2bhuKYO1FL8pUxF5qviv9xzcVFqFtSb0tSKgb5sfv0hhfioB
         gFL+e00Kfqr0jeBnTJHw81gzxjn1CEDE8wk+OuFYF7XSeH1dUB95A9a3tqJ78A/dv3Yq
         lJN/Bh/G7YgpPD1Xl1eDHaxGIEd0V9ircbZO0E/lugmjJ/e/yKdwyB98Gs655UhQJIse
         TV+g==
MIME-Version: 1.0
X-Received: by 10.140.101.51 with SMTP id t48mr35758597qge.71.1448389393309;
 Tue, 24 Nov 2015 10:23:13 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 24 Nov 2015 10:23:13 -0800 (PST)
Date: Tue, 24 Nov 2015 19:23:13 +0100
Message-ID: <CAKQ1sVM+72RSXKjcuMgyj_ChP-Tg+1ngwYcVQC+DB2KoSMVSSA@mail.gmail.com>
Subject: ap_casecmpstr[n] (or whatever its final name) against 2.4.x
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: multipart/mixed; boundary=001a11c16ee2492b6a05254d6f07

--001a11c16ee2492b6a05254d6f07
Content-Type: text/plain; charset=UTF-8

The patch (attached) would look like this (so far).
It may be easier to review than the succesive commits.
Please let me know if I missed or did something undesirable...

Regards,
Yann.

--001a11c16ee2492b6a05254d6f07
Content-Type: text/diff; charset=US-ASCII; name="httpd-2.4.x-ap_casecmpstr.patch"
Content-Disposition: attachment; filename="httpd-2.4.x-ap_casecmpstr.patch"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_ihdplf4c0

SW5kZXg6IGluY2x1ZGUvYXBfbW1uLmgKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQotLS0gaW5jbHVkZS9hcF9tbW4uaAko
cmV2aXNpb24gMTcxNjE4OSkKKysrIGluY2x1ZGUvYXBfbW1uLmgJKHdvcmtpbmcgY29weSkKQEAg
LTQ1Nyw2ICs0NTcsNyBAQAogICogICAgICAgICAgICAgICAgICAgICAgICAgIGFwX2dldF9wcm90
b2NvbCgpLiBBZGQgSFRUUF9NSVNESVJFQ1RFRF9SRVFVRVNULgogICogICAgICAgICAgICAgICAg
ICAgICAgICAgIEFkZGVkIGFwX3BhcnNlX3Rva2VuX2xpc3Rfc3RyaWN0KCkgdG8gaHR0cGQuaAog
ICogMjAxMjAyMTEuNTIgKDIuNC4xNy1kZXYpIEFkZCBtYXN0ZXIgY29ubl9yZWMqIG1lbWJlciBp
biBjb25uX3JlYy4KKyAqIDIwMTUwMjIyLjcgKDIuNS4wLWRldikgIEFkZCBhcF9zdHJbbl1jYXNl
Y21wKCk7CiAgKi8KIAogI2RlZmluZSBNT0RVTEVfTUFHSUNfQ09PS0lFIDB4NDE1MDMyMzRVTCAv
KiAiQVAyNCIgKi8KSW5kZXg6IGluY2x1ZGUvaHR0cGQuaAo9PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tLSBpbmNsdWRl
L2h0dHBkLmgJKHJldmlzaW9uIDE3MTYxODkpCisrKyBpbmNsdWRlL2h0dHBkLmgJKHdvcmtpbmcg
Y29weSkKQEAgLTIzMDgsNiArMjMwOCwyNyBAQCBBUF9ERUNMQVJFKGludCkgYXBfYXJyYXlfc3Ry
X2luZGV4KGNvbnN0IGFwcl9hcnJheQogQVBfREVDTEFSRShpbnQpIGFwX2FycmF5X3N0cl9jb250
YWlucyhjb25zdCBhcHJfYXJyYXlfaGVhZGVyX3QgKmFycmF5LCAKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhciAqcyk7CiAKKy8qKgorICogS25vd24tZmFz
dCB2ZXJzaW9uIG9mIHN0cmNhc2VjbXAoKTogQVNDSUkgb25seSwgUE9TSVggY29tcGxpYW50Cisg
KiBAcGFyYW0gczEgVGhlIDFzdCBzdHJpbmcgdG8gY29tcGFyZQorICogQHBhcmFtIHMyIFRoZSAy
bmQgc3RyaW5nIHRvIGNvbXBhcmUKKyAqIEByZXR1cm4gaW50ZWdlciBncmVhdGVyIHRoYW4sIGVx
dWFsIHRvLCBvciBsZXNzIHRoYW4gMCwgZGVwZW5kaW5nIG9uCisgKiAgICAgICAgIGlmIHMxIGlz
IGxleGljb2dyYXBoaWNhbGx5IGdyZWF0ZXIgdGhhbiwgZXF1YWwgdG8sIG9yIGxlc3MKKyAqICAg
ICAgICAgdGhhbiBzMiBpZ25vcmluZyBjYXNlLgorICovCitBUF9ERUNMQVJFKGludCkgYXBfY2Fz
ZWNtcHN0cihjb25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIpOworCisvKioKKyAqIEtub3du
LWZhc3QgdmVyc2lvbiBvZiBzdHJuY2FzZWNtcCgpOiBBU0NJSSBvbmx5LCBQT1NJWCBjb21wbGlh
bnQKKyAqIEBwYXJhbSBzMSBUaGUgMXN0IHN0cmluZyB0byBjb21wYXJlCisgKiBAcGFyYW0gczIg
VGhlIDJuZCBzdHJpbmcgdG8gY29tcGFyZQorICogQHBhcmFtIG4gIE1heGltdW0gbnVtYmVyIG9m
IGNoYXJhY3RlcnMgaW4gdGhlIHN0cmluZ3MgdG8gY29tcGFyZQorICogQHJldHVybiBpbnRlZ2Vy
IGdyZWF0ZXIgdGhhbiwgZXF1YWwgdG8sIG9yIGxlc3MgdGhhbiAwLCBkZXBlbmRpbmcgb24KKyAq
ICAgICAgICAgaWYgczEgaXMgbGV4aWNvZ3JhcGhpY2FsbHkgZ3JlYXRlciB0aGFuLCBlcXVhbCB0
bywgb3IgbGVzcworICogICAgICAgICB0aGFuIHMyIGlnbm9yaW5nIGNhc2UuCisgKi8KK0FQX0RF
Q0xBUkUoaW50KSBhcF9jYXNlY21wc3Rybihjb25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIs
IGFwcl9zaXplX3Qgbik7CisKICNpZmRlZiBfX2NwbHVzcGx1cwogfQogI2VuZGlmCkluZGV4OiBt
b2R1bGVzL2FhYS9tb2RfYXV0aF9iYXNpYy5jCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0tIG1vZHVsZXMvYWFhL21v
ZF9hdXRoX2Jhc2ljLmMJKHJldmlzaW9uIDE3MTYxODkpCisrKyBtb2R1bGVzL2FhYS9tb2RfYXV0
aF9iYXNpYy5jCSh3b3JraW5nIGNvcHkpCkBAIC0yNDIsNyArMjQyLDcgQEAgc3RhdGljIHZvaWQg
bm90ZV9iYXNpY19hdXRoX2ZhaWx1cmUocmVxdWVzdF9yZWMgKnIKIAogc3RhdGljIGludCBob29r
X25vdGVfYmFzaWNfYXV0aF9mYWlsdXJlKHJlcXVlc3RfcmVjICpyLCBjb25zdCBjaGFyICphdXRo
X3R5cGUpCiB7Ci0gICAgaWYgKHN0cmNhc2VjbXAoYXV0aF90eXBlLCAiQmFzaWMiKSkKKyAgICBp
ZiAoYXBfY2FzZWNtcHN0cihhdXRoX3R5cGUsICJCYXNpYyIpKQogICAgICAgICByZXR1cm4gREVD
TElORUQ7CiAKICAgICBub3RlX2Jhc2ljX2F1dGhfZmFpbHVyZShyKTsKQEAgLTI2Niw3ICsyNjYs
NyBAQCBzdGF0aWMgaW50IGdldF9iYXNpY19hdXRoKHJlcXVlc3RfcmVjICpyLCBjb25zdCBjaAog
ICAgICAgICByZXR1cm4gSFRUUF9VTkFVVEhPUklaRUQ7CiAgICAgfQogCi0gICAgaWYgKHN0cmNh
c2VjbXAoYXBfZ2V0d29yZChyLT5wb29sLCAmYXV0aF9saW5lLCAnICcpLCAiQmFzaWMiKSkgewor
ICAgIGlmIChhcF9jYXNlY21wc3RyKGFwX2dldHdvcmQoci0+cG9vbCwgJmF1dGhfbGluZSwgJyAn
KSwgIkJhc2ljIikpIHsKICAgICAgICAgLyogQ2xpZW50IHRyaWVkIHRvIGF1dGhlbnRpY2F0ZSB1
c2luZyB3cm9uZyBhdXRoIHNjaGVtZSAqLwogICAgICAgICBhcF9sb2dfcmVycm9yKEFQTE9HX01B
UkssIEFQTE9HX0VSUiwgMCwgciwgQVBMT0dOTygwMTYxNCkKICAgICAgICAgICAgICAgICAgICAg
ICAiY2xpZW50IHVzZWQgd3JvbmcgYXV0aGVudGljYXRpb24gc2NoZW1lOiAlcyIsIHItPnVyaSk7
CkBAIC0zMDksNyArMzA5LDcgQEAgc3RhdGljIGludCBhdXRoZW50aWNhdGVfYmFzaWNfdXNlcihy
ZXF1ZXN0X3JlYyAqcikKIAogICAgIC8qIEFyZSB3ZSBjb25maWd1cmVkIHRvIGJlIEJhc2ljIGF1
dGg/ICovCiAgICAgY3VycmVudF9hdXRoID0gYXBfYXV0aF90eXBlKHIpOwotICAgIGlmICghY3Vy
cmVudF9hdXRoIHx8IHN0cmNhc2VjbXAoY3VycmVudF9hdXRoLCAiQmFzaWMiKSkgeworICAgIGlm
ICghY3VycmVudF9hdXRoIHx8IGFwX2Nhc2VjbXBzdHIoY3VycmVudF9hdXRoLCAiQmFzaWMiKSkg
ewogICAgICAgICByZXR1cm4gREVDTElORUQ7CiAgICAgfQogCkluZGV4OiBtb2R1bGVzL2FhYS9t
b2RfYXV0aF9kaWdlc3QuYwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tLSBtb2R1bGVzL2FhYS9tb2RfYXV0aF9kaWdl
c3QuYwkocmV2aXNpb24gMTcxNjE4OSkKKysrIG1vZHVsZXMvYWFhL21vZF9hdXRoX2RpZ2VzdC5j
CSh3b3JraW5nIGNvcHkpCkBAIC01NDEsNyArNTQxLDcgQEAgc3RhdGljIGNvbnN0IGNoYXIgKnNl
dF9xb3AoY21kX3Bhcm1zICpjbWQsIHZvaWQgKmMKICAgICBpZiAoIXN0cmNhc2VjbXAob3AsICJh
dXRoLWludCIpKSB7CiAgICAgICAgIHJldHVybiAiQXV0aERpZ2VzdFFvcCBhdXRoLWludCBpcyBu
b3QgaW1wbGVtZW50ZWQiOwogICAgIH0KLSAgICBlbHNlIGlmIChzdHJjYXNlY21wKG9wLCAiYXV0
aCIpKSB7CisgICAgZWxzZSBpZiAoYXBfY2FzZWNtcHN0cihvcCwgImF1dGgiKSkgewogICAgICAg
ICByZXR1cm4gYXByX3BzdHJjYXQoY21kLT5wb29sLCAiVW5yZWNvZ25pemVkIHFvcDogIiwgb3As
IE5VTEwpOwogICAgIH0KIApAQCAtNTk0LDcgKzU5NCw3IEBAIHN0YXRpYyBjb25zdCBjaGFyICpz
ZXRfYWxnb3JpdGhtKGNtZF9wYXJtcyAqY21kLCB2CiAgICAgICAgIHJldHVybiAiQXV0aERpZ2Vz
dEFsZ29yaXRobTogRVJST1I6IGFsZ29yaXRobSBgTUQ1LXNlc3MnICIKICAgICAgICAgICAgICAg
ICAiaXMgbm90IGZ1bGx5IGltcGxlbWVudGVkIjsKICAgICB9Ci0gICAgZWxzZSBpZiAoc3RyY2Fz
ZWNtcChhbGcsICJNRDUiKSkgeworICAgIGVsc2UgaWYgKGFwX2Nhc2VjbXBzdHIoYWxnLCAiTUQ1
IikpIHsKICAgICAgICAgcmV0dXJuIGFwcl9wc3RyY2F0KGNtZC0+cG9vbCwgIkludmFsaWQgYWxn
b3JpdGhtIGluIEF1dGhEaWdlc3RBbGdvcml0aG06ICIsIGFsZywgTlVMTCk7CiAgICAgfQogCkBA
IC04OTMsNyArODkzLDcgQEAgc3RhdGljIGludCBnZXRfZGlnZXN0X3JlYyhyZXF1ZXN0X3JlYyAq
ciwgZGlnZXN0X2gKICAgICB9CiAKICAgICByZXNwLT5zY2hlbWUgPSBhcF9nZXR3b3JkX3doaXRl
KHItPnBvb2wsICZhdXRoX2xpbmUpOwotICAgIGlmIChzdHJjYXNlY21wKHJlc3AtPnNjaGVtZSwg
IkRpZ2VzdCIpKSB7CisgICAgaWYgKGFwX2Nhc2VjbXBzdHIocmVzcC0+c2NoZW1lLCAiRGlnZXN0
IikpIHsKICAgICAgICAgcmVzcC0+YXV0aF9oZHJfc3RzID0gTk9UX0RJR0VTVDsKICAgICAgICAg
cmV0dXJuICFPSzsKICAgICB9CkBAIC05NTcsMjUgKzk1NywyNSBAQCBzdGF0aWMgaW50IGdldF9k
aWdlc3RfcmVjKHJlcXVlc3RfcmVjICpyLCBkaWdlc3RfaAogICAgICAgICAgICAgYXV0aF9saW5l
Kys7CiAgICAgICAgIH0KIAotICAgICAgICBpZiAoIXN0cmNhc2VjbXAoa2V5LCAidXNlcm5hbWUi
KSkKKyAgICAgICAgaWYgKCFhcF9jYXNlY21wc3RyKGtleSwgInVzZXJuYW1lIikpCiAgICAgICAg
ICAgICByZXNwLT51c2VybmFtZSA9IGFwcl9wc3RyZHVwKHItPnBvb2wsIHZhbHVlKTsKLSAgICAg
ICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAoa2V5LCAicmVhbG0iKSkKKyAgICAgICAgZWxzZSBpZiAo
IWFwX2Nhc2VjbXBzdHIoa2V5LCAicmVhbG0iKSkKICAgICAgICAgICAgIHJlc3AtPnJlYWxtID0g
YXByX3BzdHJkdXAoci0+cG9vbCwgdmFsdWUpOwotICAgICAgICBlbHNlIGlmICghc3RyY2FzZWNt
cChrZXksICJub25jZSIpKQorICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihrZXksICJu
b25jZSIpKQogICAgICAgICAgICAgcmVzcC0+bm9uY2UgPSBhcHJfcHN0cmR1cChyLT5wb29sLCB2
YWx1ZSk7Ci0gICAgICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKGtleSwgInVyaSIpKQorICAgICAg
ICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihrZXksICJ1cmkiKSkKICAgICAgICAgICAgIHJlc3At
PnVyaSA9IGFwcl9wc3RyZHVwKHItPnBvb2wsIHZhbHVlKTsKLSAgICAgICAgZWxzZSBpZiAoIXN0
cmNhc2VjbXAoa2V5LCAicmVzcG9uc2UiKSkKKyAgICAgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBz
dHIoa2V5LCAicmVzcG9uc2UiKSkKICAgICAgICAgICAgIHJlc3AtPmRpZ2VzdCA9IGFwcl9wc3Ry
ZHVwKHItPnBvb2wsIHZhbHVlKTsKLSAgICAgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAoa2V5LCAi
YWxnb3JpdGhtIikpCisgICAgICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGtleSwgImFsZ29y
aXRobSIpKQogICAgICAgICAgICAgcmVzcC0+YWxnb3JpdGhtID0gYXByX3BzdHJkdXAoci0+cG9v
bCwgdmFsdWUpOwotICAgICAgICBlbHNlIGlmICghc3RyY2FzZWNtcChrZXksICJjbm9uY2UiKSkK
KyAgICAgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAiY25vbmNlIikpCiAgICAgICAg
ICAgICByZXNwLT5jbm9uY2UgPSBhcHJfcHN0cmR1cChyLT5wb29sLCB2YWx1ZSk7Ci0gICAgICAg
IGVsc2UgaWYgKCFzdHJjYXNlY21wKGtleSwgIm9wYXF1ZSIpKQorICAgICAgICBlbHNlIGlmICgh
YXBfY2FzZWNtcHN0cihrZXksICJvcGFxdWUiKSkKICAgICAgICAgICAgIHJlc3AtPm9wYXF1ZSA9
IGFwcl9wc3RyZHVwKHItPnBvb2wsIHZhbHVlKTsKLSAgICAgICAgZWxzZSBpZiAoIXN0cmNhc2Vj
bXAoa2V5LCAicW9wIikpCisgICAgICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGtleSwgInFv
cCIpKQogICAgICAgICAgICAgcmVzcC0+bWVzc2FnZV9xb3AgPSBhcHJfcHN0cmR1cChyLT5wb29s
LCB2YWx1ZSk7Ci0gICAgICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKGtleSwgIm5jIikpCisgICAg
ICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGtleSwgIm5jIikpCiAgICAgICAgICAgICByZXNw
LT5ub25jZV9jb3VudCA9IGFwcl9wc3RyZHVwKHItPnBvb2wsIHZhbHVlKTsKICAgICB9CiAKQEAg
LTEyMzQsNyArMTIzNCw3IEBAIHN0YXRpYyB2b2lkIG5vdGVfZGlnZXN0X2F1dGhfZmFpbHVyZShy
ZXF1ZXN0X3JlYyAqCiAgICAgaWYgKGFwcl9pc19lbXB0eV9hcnJheShjb25mLT5xb3BfbGlzdCkp
IHsKICAgICAgICAgcW9wID0gIiwgcW9wPVwiYXV0aFwiIjsKICAgICB9Ci0gICAgZWxzZSBpZiAo
IXN0cmNhc2VjbXAoKihjb25zdCBjaGFyICoqKShjb25mLT5xb3BfbGlzdC0+ZWx0cyksICJub25l
IikpIHsKKyAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cigqKGNvbnN0IGNoYXIgKiopKGNvbmYt
PnFvcF9saXN0LT5lbHRzKSwgIm5vbmUiKSkgewogICAgICAgICBxb3AgPSAiIjsKICAgICB9CiAg
ICAgZWxzZSB7CkBAIC0xMzMzLDcgKzEzMzMsNyBAQCBzdGF0aWMgaW50IGhvb2tfbm90ZV9kaWdl
c3RfYXV0aF9mYWlsdXJlKHJlcXVlc3RfcgogICAgIGRpZ2VzdF9oZWFkZXJfcmVjICpyZXNwOwog
ICAgIGRpZ2VzdF9jb25maWdfcmVjICpjb25mOwogCi0gICAgaWYgKHN0cmNhc2VjbXAoYXV0aF90
eXBlLCAiRGlnZXN0IikpCisgICAgaWYgKGFwX2Nhc2VjbXBzdHIoYXV0aF90eXBlLCAiRGlnZXN0
IikpCiAgICAgICAgIHJldHVybiBERUNMSU5FRDsKIAogICAgIC8qIGdldCB0aGUgY2xpZW50IHJl
c3BvbnNlIGFuZCBtYXJrICovCkBAIC0xNDQzLDcgKzE0NDMsNyBAQCBzdGF0aWMgaW50IGNoZWNr
X25jKGNvbnN0IHJlcXVlc3RfcmVjICpyLCBjb25zdCBkaQogICAgIH0KIAogICAgIGlmICghYXBy
X2lzX2VtcHR5X2FycmF5KGNvbmYtPnFvcF9saXN0KSAmJgotICAgICAgICAhc3RyY2FzZWNtcCgq
KGNvbnN0IGNoYXIgKiopKGNvbmYtPnFvcF9saXN0LT5lbHRzKSwgIm5vbmUiKSkgeworICAgICAg
ICAhYXBfY2FzZWNtcHN0cigqKGNvbnN0IGNoYXIgKiopKGNvbmYtPnFvcF9saXN0LT5lbHRzKSwg
Im5vbmUiKSkgewogICAgICAgICAvKiBxb3AgaXMgbm9uZSwgY2xpZW50IG11c3Qgbm90IHNlbmQg
YSBub25jZSBjb3VudCAqLwogICAgICAgICBpZiAoc25jICE9IE5VTEwpIHsKICAgICAgICAgICAg
IGFwX2xvZ19yZXJyb3IoQVBMT0dfTUFSSywgQVBMT0dfRVJSLCAwLCByLCBBUExPR05PKDAxNzcy
KQpAQCAtMTY2MCw3ICsxNjYwLDcgQEAgc3RhdGljIGludCBhdXRoZW50aWNhdGVfZGlnZXN0X3Vz
ZXIocmVxdWVzdF9yZWMgKnIKIAogICAgIC8qIGRvIHdlIHJlcXVpcmUgRGlnZXN0IGF1dGggZm9y
IHRoaXMgVVJJPyAqLwogCi0gICAgaWYgKCEodCA9IGFwX2F1dGhfdHlwZShyKSkgfHwgc3RyY2Fz
ZWNtcCh0LCAiRGlnZXN0IikpIHsKKyAgICBpZiAoISh0ID0gYXBfYXV0aF90eXBlKHIpKSB8fCBh
cF9jYXNlY21wc3RyKHQsICJEaWdlc3QiKSkgewogICAgICAgICByZXR1cm4gREVDTElORUQ7CiAg
ICAgfQogCkBAIC0xODI4LDggKzE4MjgsOCBAQCBzdGF0aWMgaW50IGF1dGhlbnRpY2F0ZV9kaWdl
c3RfdXNlcihyZXF1ZXN0X3JlYyAqcgogICAgIH0KIAogICAgIGlmIChyZXNwLT5hbGdvcml0aG0g
IT0gTlVMTAotICAgICAgICAmJiBzdHJjYXNlY21wKHJlc3AtPmFsZ29yaXRobSwgIk1ENSIpCi0g
ICAgICAgICYmIHN0cmNhc2VjbXAocmVzcC0+YWxnb3JpdGhtLCAiTUQ1LXNlc3MiKSkgeworICAg
ICAgICAmJiBhcF9jYXNlY21wc3RyKHJlc3AtPmFsZ29yaXRobSwgIk1ENSIpCisgICAgICAgICYm
IGFwX2Nhc2VjbXBzdHIocmVzcC0+YWxnb3JpdGhtLCAiTUQ1LXNlc3MiKSkgewogICAgICAgICBh
cF9sb2dfcmVycm9yKEFQTE9HX01BUkssIEFQTE9HX0VSUiwgMCwgciwgQVBMT0dOTygwMTc4OSkK
ICAgICAgICAgICAgICAgICAgICAgICAidW5rbm93biBhbGdvcml0aG0gYCVzJyByZWNlaXZlZDog
JXMiLAogICAgICAgICAgICAgICAgICAgICAgIHJlc3AtPmFsZ29yaXRobSwgci0+dXJpKTsKQEAg
LTE4ODAsNyArMTg4MCw3IEBAIHN0YXRpYyBpbnQgYXV0aGVudGljYXRlX2RpZ2VzdF91c2VyKHJl
cXVlc3RfcmVjICpyCiAgICAgICAgIGludCBtYXRjaCA9IDAsIGlkeDsKICAgICAgICAgY29uc3Qg
Y2hhciAqKnRtcCA9IChjb25zdCBjaGFyICoqKShjb25mLT5xb3BfbGlzdC0+ZWx0cyk7CiAgICAg
ICAgIGZvciAoaWR4ID0gMDsgaWR4IDwgY29uZi0+cW9wX2xpc3QtPm5lbHRzOyBpZHgrKykgewot
ICAgICAgICAgICAgaWYgKCFzdHJjYXNlY21wKCp0bXAsIHJlc3AtPm1lc3NhZ2VfcW9wKSkgewor
ICAgICAgICAgICAgaWYgKCFhcF9jYXNlY21wc3RyKCp0bXAsIHJlc3AtPm1lc3NhZ2VfcW9wKSkg
ewogICAgICAgICAgICAgICAgIG1hdGNoID0gMTsKICAgICAgICAgICAgICAgICBicmVhazsKICAg
ICAgICAgICAgIH0KQEAgLTE4ODksNyArMTg4OSw3IEBAIHN0YXRpYyBpbnQgYXV0aGVudGljYXRl
X2RpZ2VzdF91c2VyKHJlcXVlc3RfcmVjICpyCiAKICAgICAgICAgaWYgKCFtYXRjaAogICAgICAg
ICAgICAgJiYgIShhcHJfaXNfZW1wdHlfYXJyYXkoY29uZi0+cW9wX2xpc3QpCi0gICAgICAgICAg
ICAgICAgICYmICFzdHJjYXNlY21wKHJlc3AtPm1lc3NhZ2VfcW9wLCAiYXV0aCIpKSkgeworICAg
ICAgICAgICAgICAgICAmJiAhYXBfY2FzZWNtcHN0cihyZXNwLT5tZXNzYWdlX3FvcCwgImF1dGgi
KSkpIHsKICAgICAgICAgICAgIGFwX2xvZ19yZXJyb3IoQVBMT0dfTUFSSywgQVBMT0dfRVJSLCAw
LCByLCBBUExPR05PKDAxNzkzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAiaW52YWxpZCBx
b3AgYCVzJyByZWNlaXZlZDogJXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwLT5t
ZXNzYWdlX3FvcCwgci0+dXJpKTsKQEAgLTE5NzEsNyArMTk3MSw3IEBAIHN0YXRpYyBpbnQgYWRk
X2F1dGhfaW5mbyhyZXF1ZXN0X3JlYyAqcikKICAgICAvKiBkbyByZmMtMjA2OSBkaWdlc3QKICAg
ICAgKi8KICAgICBpZiAoIWFwcl9pc19lbXB0eV9hcnJheShjb25mLT5xb3BfbGlzdCkgJiYKLSAg
ICAgICAgIXN0cmNhc2VjbXAoKihjb25zdCBjaGFyICoqKShjb25mLT5xb3BfbGlzdC0+ZWx0cyks
ICJub25lIikKKyAgICAgICAgIWFwX2Nhc2VjbXBzdHIoKihjb25zdCBjaGFyICoqKShjb25mLT5x
b3BfbGlzdC0+ZWx0cyksICJub25lIikKICAgICAgICAgJiYgcmVzcC0+bWVzc2FnZV9xb3AgPT0g
TlVMTCkgewogICAgICAgICAvKiB1c2Ugb25seSBSRkMtMjA2OSBmb3JtYXQgKi8KICAgICAgICAg
YWkgPSBuZXh0bm9uY2U7CkluZGV4OiBtb2R1bGVzL2FhYS9tb2RfYXV0aF9mb3JtLmMKPT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PQotLS0gbW9kdWxlcy9hYWEvbW9kX2F1dGhfZm9ybS5jCShyZXZpc2lvbiAxNzE2MTg5KQor
KysgbW9kdWxlcy9hYWEvbW9kX2F1dGhfZm9ybS5jCSh3b3JraW5nIGNvcHkpCkBAIC00MjAsNyAr
NDIwLDcgQEAgc3RhdGljIHZvaWQgbm90ZV9jb29raWVfYXV0aF9mYWlsdXJlKHJlcXVlc3RfcmVj
ICoKIHN0YXRpYyBpbnQgaG9va19ub3RlX2Nvb2tpZV9hdXRoX2ZhaWx1cmUocmVxdWVzdF9yZWMg
KiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFy
ICphdXRoX3R5cGUpCiB7Ci0gICAgaWYgKHN0cmNhc2VjbXAoYXV0aF90eXBlLCAiZm9ybSIpKQor
ICAgIGlmIChhcF9jYXNlY21wc3RyKGF1dGhfdHlwZSwgImZvcm0iKSkKICAgICAgICAgcmV0dXJu
IERFQ0xJTkVEOwogCiAgICAgbm90ZV9jb29raWVfYXV0aF9mYWlsdXJlKHIpOwpAQCAtODkyLDcg
Kzg5Miw3IEBAIHN0YXRpYyBpbnQgYXV0aGVudGljYXRlX2Zvcm1fYXV0aG4ocmVxdWVzdF9yZWMg
KiByCiAKICAgICAvKiBBcmUgd2UgY29uZmlndXJlZCB0byBiZSBGb3JtIGF1dGg/ICovCiAgICAg
Y3VycmVudF9hdXRoID0gYXBfYXV0aF90eXBlKHIpOwotICAgIGlmICghY3VycmVudF9hdXRoIHx8
IHN0cmNhc2VjbXAoY3VycmVudF9hdXRoLCAiZm9ybSIpKSB7CisgICAgaWYgKCFjdXJyZW50X2F1
dGggfHwgYXBfY2FzZWNtcHN0cihjdXJyZW50X2F1dGgsICJmb3JtIikpIHsKICAgICAgICAgcmV0
dXJuIERFQ0xJTkVEOwogICAgIH0KIApJbmRleDogbW9kdWxlcy9hYWEvbW9kX2F1dGhuel9mY2dp
LmMKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PQotLS0gbW9kdWxlcy9hYWEvbW9kX2F1dGhuel9mY2dpLmMJKHJldmlzaW9u
IDE3MTYxODkpCisrKyBtb2R1bGVzL2FhYS9tb2RfYXV0aG56X2ZjZ2kuYwkod29ya2luZyBjb3B5
KQpAQCAtNjgxLDcgKzY4MSw3IEBAIHN0YXRpYyBpbnQgbW9kX2ZjZ2lkX21vZGlmeV9hdXRoX2hl
YWRlcih2b2lkICp2YXJzCiAgICAgLyogV2hlbiB0aGUgYXBwbGljYXRpb24gZ2l2ZXMgYSAyMDAg
cmVzcG9uc2UsIHRoZSBzZXJ2ZXIgaWdub3JlcyByZXNwb25zZQogICAgICAgIGhlYWRlcnMgd2hv
c2UgbmFtZXMgYXJlbid0IHByZWZpeGVkIHdpdGggVmFyaWFibGUtIHByZWZpeCwgYW5kIGlnbm9y
ZXMKICAgICAgICBhbnkgcmVzcG9uc2UgY29udGVudCAqLwotICAgIGlmIChzdHJuY2FzZWNtcChr
ZXksICJWYXJpYWJsZS0iLCA5KSA9PSAwKQorICAgIGlmIChhcF9jYXNlY21wc3RybihrZXksICJW
YXJpYWJsZS0iLCA5KSA9PSAwKQogICAgICAgICBhcHJfdGFibGVfc2V0bih2YXJzLCBrZXksIHZh
bCk7CiAgICAgcmV0dXJuIDE7CiB9CkBAIC04MDksNyArODA5LDcgQEAgc3RhdGljIGludCBmY2dp
X2NoZWNrX2F1dGhuKHJlcXVlc3RfcmVjICpyKQogCiAgICAgcHJvdiA9IGRjb25mICYmIGRjb25m
LT5uYW1lID8gZGNvbmYtPm5hbWUgOiBOVUxMOwogCi0gICAgaWYgKCFwcm92IHx8ICFzdHJjYXNl
Y21wKHByb3YsICJOb25lIikpIHsKKyAgICBpZiAoIXByb3YgfHwgIWFwX2Nhc2VjbXBzdHIocHJv
diwgIk5vbmUiKSkgewogICAgICAgICByZXR1cm4gREVDTElORUQ7CiAgICAgfQogCkBAIC04MjQs
NyArODI0LDcgQEAgc3RhdGljIGludCBmY2dpX2NoZWNrX2F1dGhuKHJlcXVlc3RfcmVjICpyKQog
ICAgICAgICAgICAgICAgICAgZGNvbmYtPnVzZXJfZXhwciA/ICJ5ZXMiIDogIm5vIiwKICAgICAg
ICAgICAgICAgICAgIGF1dGhfdHlwZSk7CiAKLSAgICBpZiAoYXV0aF90eXBlICYmICFzdHJjYXNl
Y21wKGF1dGhfdHlwZSwgIkJhc2ljIikpIHsKKyAgICBpZiAoYXV0aF90eXBlICYmICFhcF9jYXNl
Y21wc3RyKGF1dGhfdHlwZSwgIkJhc2ljIikpIHsKICAgICAgICAgaWYgKChyZXMgPSBhcF9nZXRf
YmFzaWNfYXV0aF9wdyhyLCAmcGFzc3dvcmQpKSkgewogICAgICAgICAgICAgYXBfbG9nX3JlcnJv
cihBUExPR19NQVJLLCBBUExPR19ERUJVRywgMCwgciwKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgQVBMT0dOTygwMjUxNykgIiVzOiBjb3VsZG4ndCByZXRyaWV2ZSBiYXNpYyBhdXRoICIKSW5k
ZXg6IG1vZHVsZXMvY2FjaGUvY2FjaGVfc3RvcmFnZS5jCj09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0tIG1vZHVsZXMv
Y2FjaGUvY2FjaGVfc3RvcmFnZS5jCShyZXZpc2lvbiAxNzE2MTg5KQorKysgbW9kdWxlcy9jYWNo
ZS9jYWNoZV9zdG9yYWdlLmMJKHdvcmtpbmcgY29weSkKQEAgLTExNSw3ICsxMTUsNyBAQCBpbnQg
Y2FjaGVfY3JlYXRlX2VudGl0eShjYWNoZV9yZXF1ZXN0X3JlYyAqY2FjaGUsCiAKIHN0YXRpYyBp
bnQgZmlsdGVyX2hlYWRlcl9kbyh2b2lkICp2LCBjb25zdCBjaGFyICprZXksIGNvbnN0IGNoYXIg
KnZhbCkKIHsKLSAgICBpZiAoKCprZXkgPT0gJ1cnIHx8ICprZXkgPT0gJ3cnKSAmJiAhc3RyY2Fz
ZWNtcChrZXksICJXYXJuaW5nIikKKyAgICBpZiAoKCprZXkgPT0gJ1cnIHx8ICprZXkgPT0gJ3cn
KSAmJiAhYXBfY2FzZWNtcHN0cihrZXksICJXYXJuaW5nIikKICAgICAgICAgICAgICYmICp2YWwg
PT0gJzEnKSB7CiAgICAgICAgIC8qIGFueSBzdG9yZWQgV2FybmluZyBoZWFkZXJzIHdpdGggd2Fy
bi1jb2RlIDF4eCAoc2VlIHNlY3Rpb24KICAgICAgICAgICogMTQuNDYpIE1VU1QgYmUgZGVsZXRl
ZCBmcm9tIHRoZSBjYWNoZSBlbnRyeSBhbmQgdGhlIGZvcndhcmRlZApAQCAtMTI5LDcgKzEyOSw3
IEBAIHN0YXRpYyBpbnQgZmlsdGVyX2hlYWRlcl9kbyh2b2lkICp2LCBjb25zdCBjaGFyICprCiB9
CiBzdGF0aWMgaW50IHJlbW92ZV9oZWFkZXJfZG8odm9pZCAqdiwgY29uc3QgY2hhciAqa2V5LCBj
b25zdCBjaGFyICp2YWwpCiB7Ci0gICAgaWYgKCgqa2V5ID09ICdXJyB8fCAqa2V5ID09ICd3Jykg
JiYgIXN0cmNhc2VjbXAoa2V5LCAiV2FybmluZyIpKSB7CisgICAgaWYgKCgqa2V5ID09ICdXJyB8
fCAqa2V5ID09ICd3JykgJiYgIWFwX2Nhc2VjbXBzdHIoa2V5LCAiV2FybmluZyIpKSB7CiAgICAg
ICAgIC8qIGFueSBzdG9yZWQgV2FybmluZyBoZWFkZXJzIHdpdGggd2Fybi1jb2RlIDJ4eCBNVVNU
IGJlIHJldGFpbmVkCiAgICAgICAgICAqIGluIHRoZSBjYWNoZSBlbnRyeSBhbmQgdGhlIGZvcndh
cmRlZCByZXNwb25zZS4KICAgICAgICAgICovCkluZGV4OiBtb2R1bGVzL2NhY2hlL2NhY2hlX3V0
aWwuYwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09Ci0tLSBtb2R1bGVzL2NhY2hlL2NhY2hlX3V0aWwuYwkocmV2aXNpb24g
MTcxNjE4OSkKKysrIG1vZHVsZXMvY2FjaGUvY2FjaGVfdXRpbC5jCSh3b3JraW5nIGNvcHkpCkBA
IC01NSw3ICs1NSw3IEBAIHN0YXRpYyBpbnQgdXJpX21lZXRzX2NvbmRpdGlvbnMoY29uc3QgYXBy
X3VyaV90ICpmCiAgICAgfQogICAgIGVsc2UgewogICAgICAgICAvKiBUaGUgVVJJIHNjaGVtZSBt
dXN0IGJlIHByZXNlbnQgYW5kIGlkZW50aWNhbCBleGNlcHQgZm9yIGNhc2UuICovCi0gICAgICAg
IGlmICghdXJsLT5zY2hlbWUgfHwgc3RyY2FzZWNtcChmaWx0ZXItPnNjaGVtZSwgdXJsLT5zY2hl
bWUpKSB7CisgICAgICAgIGlmICghdXJsLT5zY2hlbWUgfHwgYXBfY2FzZWNtcHN0cihmaWx0ZXIt
PnNjaGVtZSwgdXJsLT5zY2hlbWUpKSB7CiAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAg
fQogCkBAIC05NzYsMTQgKzk3Niw5IEBAIGludCBhcF9jYWNoZV9jb250cm9sKHJlcXVlc3RfcmVj
ICpyLCBjYWNoZV9jb250cm9sCiAgICAgICAgIGNoYXIgKmhlYWRlciA9IGFwcl9wc3RyZHVwKHIt
PnBvb2wsIHByYWdtYV9oZWFkZXIpOwogICAgICAgICBjb25zdCBjaGFyICp0b2tlbiA9IGNhY2hl
X3N0cnF0b2soaGVhZGVyLCBDQUNIRV9TRVBBUkFUT1IsICZsYXN0KTsKICAgICAgICAgd2hpbGUg
KHRva2VuKSB7Ci0gICAgICAgICAgICAvKiBoYW5kbGUgbW9zdCBjb21tb24gcXVpY2tlc3QgY2Fz
ZS4uLiAqLwotICAgICAgICAgICAgaWYgKCFzdHJjbXAodG9rZW4sICJuby1jYWNoZSIpKSB7Cisg
ICAgICAgICAgICBpZiAoIWFwX2Nhc2VjbXBzdHIodG9rZW4sICJuby1jYWNoZSIpKSB7CiAgICAg
ICAgICAgICAgICAgY2MtPm5vX2NhY2hlID0gMTsKICAgICAgICAgICAgIH0KLSAgICAgICAgICAg
IC8qIC4uLnRoZW4gdHJ5IHNsb3dlc3QgY2FzZSAqLwotICAgICAgICAgICAgZWxzZSBpZiAoIXN0
cmNhc2VjbXAodG9rZW4sICJuby1jYWNoZSIpKSB7Ci0gICAgICAgICAgICAgICAgY2MtPm5vX2Nh
Y2hlID0gMTsKLSAgICAgICAgICAgIH0KICAgICAgICAgICAgIHRva2VuID0gY2FjaGVfc3RycXRv
ayhOVUxMLCBDQUNIRV9TRVBBUkFUT1IsICZsYXN0KTsKICAgICAgICAgfQogICAgICAgICBjYy0+
cHJhZ21hID0gMTsKQEAgLTk5NiwxNSArOTkxLDcgQEAgaW50IGFwX2NhY2hlX2NvbnRyb2wocmVx
dWVzdF9yZWMgKnIsIGNhY2hlX2NvbnRyb2wKICAgICAgICAgICAgIHN3aXRjaCAodG9rZW5bMF0p
IHsKICAgICAgICAgICAgIGNhc2UgJ24nOgogICAgICAgICAgICAgY2FzZSAnTic6IHsKLSAgICAg
ICAgICAgICAgICAvKiBoYW5kbGUgbW9zdCBjb21tb24gcXVpY2tlc3QgY2FzZXMuLi4gKi8KLSAg
ICAgICAgICAgICAgICBpZiAoIXN0cmNtcCh0b2tlbiwgIm5vLWNhY2hlIikpIHsKLSAgICAgICAg
ICAgICAgICAgICAgY2MtPm5vX2NhY2hlID0gMTsKLSAgICAgICAgICAgICAgICB9Ci0gICAgICAg
ICAgICAgICAgZWxzZSBpZiAoIXN0cmNtcCh0b2tlbiwgIm5vLXN0b3JlIikpIHsKLSAgICAgICAg
ICAgICAgICAgICAgY2MtPm5vX3N0b3JlID0gMTsKLSAgICAgICAgICAgICAgICB9Ci0gICAgICAg
ICAgICAgICAgLyogLi4udGhlbiB0cnkgc2xvd2VzdCBjYXNlcyAqLwotICAgICAgICAgICAgICAg
IGVsc2UgaWYgKCFzdHJuY2FzZWNtcCh0b2tlbiwgIm5vLWNhY2hlIiwgOCkpIHsKKyAgICAgICAg
ICAgICAgICBpZiAoIWFwX2Nhc2VjbXBzdHJuKHRva2VuLCAibm8tY2FjaGUiLCA4KSkgewogICAg
ICAgICAgICAgICAgICAgICBpZiAodG9rZW5bOF0gPT0gJz0nKSB7CiAgICAgICAgICAgICAgICAg
ICAgICAgICBjYy0+bm9fY2FjaGVfaGVhZGVyID0gMTsKICAgICAgICAgICAgICAgICAgICAgfQpA
QCAtMTAxMSwxMiArOTk4LDExIEBAIGludCBhcF9jYWNoZV9jb250cm9sKHJlcXVlc3RfcmVjICpy
LCBjYWNoZV9jb250cm9sCiAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCF0b2tlbls4XSkg
ewogICAgICAgICAgICAgICAgICAgICAgICAgY2MtPm5vX2NhY2hlID0gMTsKICAgICAgICAgICAg
ICAgICAgICAgfQotICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICB9
Ci0gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAodG9rZW4sICJuby1zdG9yZSIp
KSB7CisgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIodG9rZW4sICJuby1z
dG9yZSIpKSB7CiAgICAgICAgICAgICAgICAgICAgIGNjLT5ub19zdG9yZSA9IDE7CiAgICAgICAg
ICAgICAgICAgfQotICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKHRva2VuLCAi
bm8tdHJhbnNmb3JtIikpIHsKKyAgICAgICAgICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0
cih0b2tlbiwgIm5vLXRyYW5zZm9ybSIpKSB7CiAgICAgICAgICAgICAgICAgICAgIGNjLT5ub190
cmFuc2Zvcm0gPSAxOwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICBicmVhazsK
QEAgLTEwMjMsMjMgKzEwMDksMTYgQEAgaW50IGFwX2NhY2hlX2NvbnRyb2wocmVxdWVzdF9yZWMg
KnIsIGNhY2hlX2NvbnRyb2wKICAgICAgICAgICAgIH0KICAgICAgICAgICAgIGNhc2UgJ20nOgog
ICAgICAgICAgICAgY2FzZSAnTSc6IHsKLSAgICAgICAgICAgICAgICAvKiBoYW5kbGUgbW9zdCBj
b21tb24gcXVpY2tlc3QgY2FzZXMuLi4gKi8KLSAgICAgICAgICAgICAgICBpZiAoIXN0cmNtcCh0
b2tlbiwgIm1heC1hZ2U9MCIpKSB7Ci0gICAgICAgICAgICAgICAgICAgIGNjLT5tYXhfYWdlID0g
MTsKLSAgICAgICAgICAgICAgICAgICAgY2MtPm1heF9hZ2VfdmFsdWUgPSAwOwotICAgICAgICAg
ICAgICAgIH0KLSAgICAgICAgICAgICAgICBlbHNlIGlmICghc3RyY21wKHRva2VuLCAibXVzdC1y
ZXZhbGlkYXRlIikpIHsKLSAgICAgICAgICAgICAgICAgICAgY2MtPm11c3RfcmV2YWxpZGF0ZSA9
IDE7Ci0gICAgICAgICAgICAgICAgfQotICAgICAgICAgICAgICAgIC8qIC4uLnRoZW4gdHJ5IHNs
b3dlc3QgY2FzZXMgKi8KLSAgICAgICAgICAgICAgICBlbHNlIGlmICghc3RybmNhc2VjbXAodG9r
ZW4sICJtYXgtYWdlIiwgNykpIHsKKyAgICAgICAgICAgICAgICBpZiAoIWFwX2Nhc2VjbXBzdHJu
KHRva2VuLCAibWF4LWFnZSIsIDcpKSB7CiAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbls3
XSA9PSAnPScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgIGNjLT5tYXhfYWdlID0gMTsKICAg
ICAgICAgICAgICAgICAgICAgICAgIGNjLT5tYXhfYWdlX3ZhbHVlID0gYXByX2F0b2k2NCh0b2tl
biArIDgpOwogICAgICAgICAgICAgICAgICAgICB9Ci0gICAgICAgICAgICAgICAgICAgIGJyZWFr
OwogICAgICAgICAgICAgICAgIH0KLSAgICAgICAgICAgICAgICBlbHNlIGlmICghc3RybmNhc2Vj
bXAodG9rZW4sICJtYXgtc3RhbGUiLCA5KSkgeworICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFh
cF9jYXNlY21wc3RyKHRva2VuLCAibXVzdC1yZXZhbGlkYXRlIikpIHsKKyAgICAgICAgICAgICAg
ICAgICAgY2MtPm11c3RfcmV2YWxpZGF0ZSA9IDE7CisgICAgICAgICAgICAgICAgfQorICAgICAg
ICAgICAgICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3Rybih0b2tlbiwgIm1heC1zdGFsZSIsIDkp
KSB7CiAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbls5XSA9PSAnPScpIHsKICAgICAgICAg
ICAgICAgICAgICAgICAgIGNjLT5tYXhfc3RhbGUgPSAxOwogICAgICAgICAgICAgICAgICAgICAg
ICAgY2MtPm1heF9zdGFsZV92YWx1ZSA9IGFwcl9hdG9pNjQodG9rZW4gKyAxMCk7CkBAIC0xMDQ4
LDIzICsxMDI3LDE4IEBAIGludCBhcF9jYWNoZV9jb250cm9sKHJlcXVlc3RfcmVjICpyLCBjYWNo
ZV9jb250cm9sCiAgICAgICAgICAgICAgICAgICAgICAgICBjYy0+bWF4X3N0YWxlID0gMTsKICAg
ICAgICAgICAgICAgICAgICAgICAgIGNjLT5tYXhfc3RhbGVfdmFsdWUgPSAtMTsKICAgICAgICAg
ICAgICAgICAgICAgfQotICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAg
ICB9Ci0gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXN0cm5jYXNlY21wKHRva2VuLCAibWluLWZy
ZXNoIiwgOSkpIHsKKyAgICAgICAgICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cm4odG9r
ZW4sICJtaW4tZnJlc2giLCA5KSkgewogICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW5bOV0g
PT0gJz0nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICBjYy0+bWluX2ZyZXNoID0gMTsKICAg
ICAgICAgICAgICAgICAgICAgICAgIGNjLT5taW5fZnJlc2hfdmFsdWUgPSBhcHJfYXRvaTY0KHRv
a2VuICsgMTApOwogICAgICAgICAgICAgICAgICAgICB9Ci0gICAgICAgICAgICAgICAgICAgIGJy
ZWFrOwogICAgICAgICAgICAgICAgIH0KLSAgICAgICAgICAgICAgICBlbHNlIGlmICghc3RyY2Fz
ZWNtcCh0b2tlbiwgIm11c3QtcmV2YWxpZGF0ZSIpKSB7Ci0gICAgICAgICAgICAgICAgICAgIGNj
LT5tdXN0X3JldmFsaWRhdGUgPSAxOwotICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg
ICBicmVhazsKICAgICAgICAgICAgIH0KICAgICAgICAgICAgIGNhc2UgJ28nOgogICAgICAgICAg
ICAgY2FzZSAnTyc6IHsKLSAgICAgICAgICAgICAgICBpZiAoIXN0cmNhc2VjbXAodG9rZW4sICJv
bmx5LWlmLWNhY2hlZCIpKSB7CisgICAgICAgICAgICAgICAgaWYgKCFhcF9jYXNlY21wc3RyKHRv
a2VuLCAib25seS1pZi1jYWNoZWQiKSkgewogICAgICAgICAgICAgICAgICAgICBjYy0+b25seV9p
Zl9jYWNoZWQgPSAxOwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICBicmVhazsK
QEAgLTEwNzEsMTUgKzEwNDUsMTAgQEAgaW50IGFwX2NhY2hlX2NvbnRyb2wocmVxdWVzdF9yZWMg
KnIsIGNhY2hlX2NvbnRyb2wKICAgICAgICAgICAgIH0KICAgICAgICAgICAgIGNhc2UgJ3AnOgog
ICAgICAgICAgICAgY2FzZSAnUCc6IHsKLSAgICAgICAgICAgICAgICAvKiBoYW5kbGUgbW9zdCBj
b21tb24gcXVpY2tlc3QgY2FzZXMuLi4gKi8KLSAgICAgICAgICAgICAgICBpZiAoIXN0cmNtcCh0
b2tlbiwgInByaXZhdGUiKSkgewotICAgICAgICAgICAgICAgICAgICBjYy0+cHJpdmF0ZSA9IDE7
Ci0gICAgICAgICAgICAgICAgfQotICAgICAgICAgICAgICAgIC8qIC4uLnRoZW4gdHJ5IHNsb3dl
c3QgY2FzZXMgKi8KLSAgICAgICAgICAgICAgICBlbHNlIGlmICghc3RyY2FzZWNtcCh0b2tlbiwg
InB1YmxpYyIpKSB7CisgICAgICAgICAgICAgICAgaWYgKCFhcF9jYXNlY21wc3RyKHRva2VuLCAi
cHVibGljIikpIHsKICAgICAgICAgICAgICAgICAgICAgY2MtPnB1YmxpYyA9IDE7CiAgICAgICAg
ICAgICAgICAgfQotICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzdHJuY2FzZWNtcCh0b2tlbiwg
InByaXZhdGUiLCA3KSkgeworICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3Ry
bih0b2tlbiwgInByaXZhdGUiLCA3KSkgewogICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW5b
N10gPT0gJz0nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICBjYy0+cHJpdmF0ZV9oZWFkZXIg
PSAxOwogICAgICAgICAgICAgICAgICAgICB9CkBAIC0xMDg2LDkgKzEwNTUsOCBAQCBpbnQgYXBf
Y2FjaGVfY29udHJvbChyZXF1ZXN0X3JlYyAqciwgY2FjaGVfY29udHJvbAogICAgICAgICAgICAg
ICAgICAgICBlbHNlIGlmICghdG9rZW5bN10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgIGNj
LT5wcml2YXRlID0gMTsKICAgICAgICAgICAgICAgICAgICAgfQotICAgICAgICAgICAgICAgICAg
ICBicmVhazsKICAgICAgICAgICAgICAgICB9Ci0gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXN0
cmNhc2VjbXAodG9rZW4sICJwcm94eS1yZXZhbGlkYXRlIikpIHsKKyAgICAgICAgICAgICAgICBl
bHNlIGlmICghYXBfY2FzZWNtcHN0cih0b2tlbiwgInByb3h5LXJldmFsaWRhdGUiKSkgewogICAg
ICAgICAgICAgICAgICAgICBjYy0+cHJveHlfcmV2YWxpZGF0ZSA9IDE7CiAgICAgICAgICAgICAg
ICAgfQogICAgICAgICAgICAgICAgIGJyZWFrOwpAQCAtMTA5NSwxMiArMTA2MywxMSBAQCBpbnQg
YXBfY2FjaGVfY29udHJvbChyZXF1ZXN0X3JlYyAqciwgY2FjaGVfY29udHJvbAogICAgICAgICAg
ICAgfQogICAgICAgICAgICAgY2FzZSAncyc6CiAgICAgICAgICAgICBjYXNlICdTJzogewotICAg
ICAgICAgICAgICAgIGlmICghc3RybmNhc2VjbXAodG9rZW4sICJzLW1heGFnZSIsIDgpKSB7Cisg
ICAgICAgICAgICAgICAgaWYgKCFhcF9jYXNlY21wc3Rybih0b2tlbiwgInMtbWF4YWdlIiwgOCkp
IHsKICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuWzhdID09ICc9JykgewogICAgICAgICAg
ICAgICAgICAgICAgICAgY2MtPnNfbWF4YWdlID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAg
IGNjLT5zX21heGFnZV92YWx1ZSA9IGFwcl9hdG9pNjQodG9rZW4gKyA5KTsKICAgICAgICAgICAg
ICAgICAgICAgfQotICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICB9
CiAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICB9CkBAIC0xMTMwLDggKzEwOTcs
NyBAQCBzdGF0aWMgaW50IGNhY2hlX2NvbnRyb2xfcmVtb3ZlKHJlcXVlc3RfcmVjICpyLCBjbwog
ICAgICAgICAgICAgc3dpdGNoICh0b2tlblswXSkgewogICAgICAgICAgICAgY2FzZSAnbic6CiAg
ICAgICAgICAgICBjYXNlICdOJzogewotICAgICAgICAgICAgICAgIGlmICghc3RybmNtcCh0b2tl
biwgIm5vLWNhY2hlIiwgOCkKLSAgICAgICAgICAgICAgICAgICAgICAgIHx8ICFzdHJuY2FzZWNt
cCh0b2tlbiwgIm5vLWNhY2hlIiwgOCkpIHsKKyAgICAgICAgICAgICAgICBpZiAoIWFwX2Nhc2Vj
bXBzdHJuKHRva2VuLCAibm8tY2FjaGUiLCA4KSkgewogICAgICAgICAgICAgICAgICAgICBpZiAo
dG9rZW5bOF0gPT0gJz0nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFyICpo
ZWFkZXIgPSBjYWNoZV9zdHJxdG9rKHRva2VuICsgOSwKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgQ0FDSEVfU0VQQVJBVE9SICJcIiIsICZzbGFzdCk7CkBAIC0xMTQ4LDggKzExMTQs
NyBAQCBzdGF0aWMgaW50IGNhY2hlX2NvbnRyb2xfcmVtb3ZlKHJlcXVlc3RfcmVjICpyLCBjbwog
ICAgICAgICAgICAgfQogICAgICAgICAgICAgY2FzZSAncCc6CiAgICAgICAgICAgICBjYXNlICdQ
JzogewotICAgICAgICAgICAgICAgIGlmICghc3RybmNtcCh0b2tlbiwgInByaXZhdGUiLCA3KQot
ICAgICAgICAgICAgICAgICAgICAgICAgfHwgIXN0cm5jYXNlY21wKHRva2VuLCAicHJpdmF0ZSIs
IDcpKSB7CisgICAgICAgICAgICAgICAgaWYgKCFhcF9jYXNlY21wc3Rybih0b2tlbiwgInByaXZh
dGUiLCA3KSkgewogICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW5bN10gPT0gJz0nKSB7CiAg
ICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFyICpoZWFkZXIgPSBjYWNoZV9zdHJxdG9r
KHRva2VuICsgOCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ0FDSEVfU0VQQVJB
VE9SICJcIiIsICZzbGFzdCk7CkluZGV4OiBtb2R1bGVzL2Rhdi9tYWluL21vZF9kYXYuYwo9PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09Ci0tLSBtb2R1bGVzL2Rhdi9tYWluL21vZF9kYXYuYwkocmV2aXNpb24gMTcxNjE4OSkK
KysrIG1vZHVsZXMvZGF2L21haW4vbW9kX2Rhdi5jCSh3b3JraW5nIGNvcHkpCkBAIC02NTEsNyAr
NjUxLDcgQEAgREFWX0RFQ0xBUkUoaW50KSBkYXZfZ2V0X2RlcHRoKHJlcXVlc3RfcmVjICpyLCBp
bnQKICAgICAgICAgcmV0dXJuIGRlZl9kZXB0aDsKICAgICB9CiAKLSAgICBpZiAoc3RyY2FzZWNt
cChkZXB0aCwgImluZmluaXR5IikgPT0gMCkgeworICAgIGlmIChhcF9jYXNlY21wc3RyKGRlcHRo
LCAiaW5maW5pdHkiKSA9PSAwKSB7CiAgICAgICAgIHJldHVybiBEQVZfSU5GSU5JVFk7CiAgICAg
fQogICAgIGVsc2UgaWYgKHN0cmNtcChkZXB0aCwgIjAiKSA9PSAwKSB7CkBAIC03ODEsNyArNzgx
LDcgQEAgc3RhdGljIGludCBkYXZfcGFyc2VfcmFuZ2UocmVxdWVzdF9yZWMgKnIsCiAgICAgICAg
IHJldHVybiAwOwogCiAgICAgcmFuZ2UgPSBhcHJfcHN0cmR1cChyLT5wb29sLCByYW5nZV9jKTsK
LSAgICBpZiAoc3RybmNhc2VjbXAocmFuZ2UsICJieXRlcyAiLCA2KSAhPSAwCisgICAgaWYgKGFw
X2Nhc2VjbXBzdHJuKHJhbmdlLCAiYnl0ZXMgIiwgNikgIT0gMAogICAgICAgICB8fCAoZGFzaCA9
IGFwX3N0cmNocihyYW5nZSwgJy0nKSkgPT0gTlVMTAogICAgICAgICB8fCAoc2xhc2ggPSBhcF9z
dHJjaHIocmFuZ2UsICcvJykpID09IE5VTEwpIHsKICAgICAgICAgLyogbWFsZm9ybWVkIGhlYWRl
ciAqLwpAQCAtMjQ1MSw3ICsyNDUxLDcgQEAgc3RhdGljIGludCBwcm9jZXNzX21rY29sX2JvZHko
cmVxdWVzdF9yZWMgKnIpCiAgICAgci0+cmVtYWluaW5nID0gMDsKIAogICAgIGlmICh0ZW5jKSB7
Ci0gICAgICAgIGlmIChzdHJjYXNlY21wKHRlbmMsICJjaHVua2VkIikpIHsKKyAgICAgICAgaWYg
KGFwX2Nhc2VjbXBzdHIodGVuYywgImNodW5rZWQiKSkgewogICAgICAgICAgICAgLyogVXNlIHRo
aXMgaW5zdGVhZCBvZiBBcGFjaGUncyBkZWZhdWx0IGVycm9yIHN0cmluZyAqLwogICAgICAgICAg
ICAgYXBfbG9nX3JlcnJvcihBUExPR19NQVJLLCBBUExPR19FUlIsIDAsIHIsIEFQTE9HTk8oMDA1
ODkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICJVbmtub3duIFRyYW5zZmVyLUVuY29kaW5n
ICVzIiwgdGVuYyk7CkluZGV4OiBtb2R1bGVzL2Rhdi9tYWluL3V0aWwuYwo9PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0t
LSBtb2R1bGVzL2Rhdi9tYWluL3V0aWwuYwkocmV2aXNpb24gMTcxNjE4OSkKKysrIG1vZHVsZXMv
ZGF2L21haW4vdXRpbC5jCSh3b3JraW5nIGNvcHkpCkBAIC0yNDAsNyArMjQwLDcgQEAgREFWX0RF
Q0xBUkUoZGF2X2xvb2t1cF9yZXN1bHQpIGRhdl9sb29rdXBfdXJpKGNvbnMKICAgICAgICAgICAg
cmVxdWVzdC4gdGhlIHBvcnQgbXVzdCBtYXRjaCBvdXIgcG9ydC4KICAgICAgICAgKi8KICAgICAg
ICAgcG9ydCA9IHItPmNvbm5lY3Rpb24tPmxvY2FsX2FkZHItPnBvcnQ7Ci0gICAgICAgIGlmIChz
dHJjYXNlY21wKGNvbXAuc2NoZW1lLCBzY2hlbWUpICE9IDAKKyAgICAgICAgaWYgKGFwX2Nhc2Vj
bXBzdHIoY29tcC5zY2hlbWUsIHNjaGVtZSkgIT0gMAogI2lmZGVmIEFQQUNIRV9QT1JUX0hBTkRM
SU5HX0lTX0JVU1RFRAogICAgICAgICAgICAgfHwgY29tcC5wb3J0ICE9IHBvcnQKICNlbmRpZgpJ
bmRleDogbW9kdWxlcy9maWx0ZXJzL21vZF9jaGFyc2V0X2xpdGUuYwo9PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tLSBt
b2R1bGVzL2ZpbHRlcnMvbW9kX2NoYXJzZXRfbGl0ZS5jCShyZXZpc2lvbiAxNzE2MTg5KQorKysg
bW9kdWxlcy9maWx0ZXJzL21vZF9jaGFyc2V0X2xpdGUuYwkod29ya2luZyBjb3B5KQpAQCAtNzkw
LDcgKzc5MCw3IEBAIHN0YXRpYyBhcHJfc3RhdHVzX3QgeGxhdGVfb3V0X2ZpbHRlcihhcF9maWx0
ZXJfdCAqCiAgICAgaWYgKCFjdHgtPm5vb3AgJiYgY3R4LT54bGF0ZSA9PSBOVUxMKSB7CiAgICAg
ICAgIGNvbnN0IGNoYXIgKm1pbWVfdHlwZSA9IGYtPnItPmNvbnRlbnRfdHlwZTsKIAotICAgICAg
ICBpZiAobWltZV90eXBlICYmIChzdHJuY2FzZWNtcChtaW1lX3R5cGUsICJ0ZXh0LyIsIDUpID09
IDAgfHwKKyAgICAgICAgaWYgKG1pbWVfdHlwZSAmJiAoYXBfY2FzZWNtcHN0cm4obWltZV90eXBl
LCAidGV4dC8iLCA1KSA9PSAwIHx8CiAjaWYgQVBSX0NIQVJTRVRfRUJDRElDCiAgICAgICAgIC8q
IE9uIGFuIEVCQ0RJQyBtYWNoaW5lLCBiZSB3aWxsaW5nIHRvIHRyYW5zbGF0ZSBtb2RfYXV0b2lu
ZGV4LQogICAgICAgICAgKiBnZW5lcmF0ZWQgb3V0cHV0LiAgT3RoZXJ3aXNlLCBpdCBkb2Vzbid0
IGxvb2sgdG9vIGNvb2wuCkBAIC04MDYsNyArODA2LDcgQEAgc3RhdGljIGFwcl9zdGF0dXNfdCB4
bGF0ZV9vdXRfZmlsdGVyKGFwX2ZpbHRlcl90ICoKICAgICAgICAgICovCiAgICAgICAgICAgICBz
dHJjbXAobWltZV90eXBlLCBESVJfTUFHSUNfVFlQRSkgPT0gMCB8fAogI2VuZGlmCi0gICAgICAg
ICAgICBzdHJuY2FzZWNtcChtaW1lX3R5cGUsICJtZXNzYWdlLyIsIDgpID09IDAgfHwKKyAgICAg
ICAgICAgIGFwX2Nhc2VjbXBzdHJuKG1pbWVfdHlwZSwgIm1lc3NhZ2UvIiwgOCkgPT0gMCB8fAog
ICAgICAgICAgICAgZGMtPmZvcmNlX3hsYXRlID09IEZYX0ZPUkNFKSkgewogCiAgICAgICAgICAg
ICBydiA9IGFwcl94bGF0ZV9vcGVuKCZjdHgtPnhsYXRlLApJbmRleDogbW9kdWxlcy9maWx0ZXJz
L21vZF9kZWZsYXRlLmMKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PQotLS0gbW9kdWxlcy9maWx0ZXJzL21vZF9kZWZsYXRl
LmMJKHJldmlzaW9uIDE3MTYxODkpCisrKyBtb2R1bGVzL2ZpbHRlcnMvbW9kX2RlZmxhdGUuYwko
d29ya2luZyBjb3B5KQpAQCAtMTE4LDggKzExOCw4IEBAIHN0YXRpYyBpbnQgY2hlY2tfZ3ppcChy
ZXF1ZXN0X3JlYyAqciwgYXByX3RhYmxlX3QKICAgICBpZiAoZW5jb2RpbmcgJiYgKmVuY29kaW5n
KSB7CiAKICAgICAgICAgLyogY2hlY2sgdGhlIHVzdWFsL3NpbXBsZSBjYXNlIGZpcnN0ICovCi0g
ICAgICAgIGlmICghc3RyY2FzZWNtcChlbmNvZGluZywgImd6aXAiKQotICAgICAgICAgICAgfHwg
IXN0cmNhc2VjbXAoZW5jb2RpbmcsICJ4LWd6aXAiKSkgeworICAgICAgICBpZiAoIWFwX2Nhc2Vj
bXBzdHIoZW5jb2RpbmcsICJnemlwIikKKyAgICAgICAgICAgIHx8ICFhcF9jYXNlY21wc3RyKGVu
Y29kaW5nLCAieC1nemlwIikpIHsKICAgICAgICAgICAgIGZvdW5kID0gMTsKICAgICAgICAgICAg
IGlmIChoZHJzKSB7CiAgICAgICAgICAgICAgICAgYXByX3RhYmxlX3Vuc2V0KGhkcnMsICJDb250
ZW50LUVuY29kaW5nIik7CkBAIC0xMzcsOCArMTM3LDggQEAgc3RhdGljIGludCBjaGVja19nemlw
KHJlcXVlc3RfcmVjICpyLCBhcHJfdGFibGVfdAogICAgICAgICAgICAgZm9yKDs7KSB7CiAgICAg
ICAgICAgICAgICAgY2hhciAqdG9rZW4gPSBhcF9zdHJyY2hyKG5ld19lbmNvZGluZywgJywnKTsK
ICAgICAgICAgICAgICAgICBpZiAoIXRva2VuKSB7ICAgICAgICAvKiBnemlwOmlkZW50aXR5IG9y
IG90aGVyOmlkZW50aXR5ICovCi0gICAgICAgICAgICAgICAgICAgIGlmICghc3RyY2FzZWNtcChu
ZXdfZW5jb2RpbmcsICJnemlwIikKLSAgICAgICAgICAgICAgICAgICAgICAgIHx8ICFzdHJjYXNl
Y21wKG5ld19lbmNvZGluZywgIngtZ3ppcCIpKSB7CisgICAgICAgICAgICAgICAgICAgIGlmICgh
YXBfY2FzZWNtcHN0cihuZXdfZW5jb2RpbmcsICJnemlwIikKKyAgICAgICAgICAgICAgICAgICAg
ICAgIHx8ICFhcF9jYXNlY21wc3RyKG5ld19lbmNvZGluZywgIngtZ3ppcCIpKSB7CiAgICAgICAg
ICAgICAgICAgICAgICAgICBmb3VuZCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICBpZiAo
aGRycykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcl90YWJsZV91bnNldChoZHJz
LCAiQ29udGVudC1FbmNvZGluZyIpOwpAQCAtMTUwLDggKzE1MCw4IEBAIHN0YXRpYyBpbnQgY2hl
Y2tfZ3ppcChyZXF1ZXN0X3JlYyAqciwgYXByX3RhYmxlX3QKICAgICAgICAgICAgICAgICAgICAg
YnJlYWs7IC8qIHNlZW4gYWxsIHRva2VucyAqLwogICAgICAgICAgICAgICAgIH0KICAgICAgICAg
ICAgICAgICBmb3IgKHB0cj10b2tlbisxOyBhcHJfaXNzcGFjZSgqcHRyKTsgKytwdHIpOwotICAg
ICAgICAgICAgICAgIGlmICghc3RyY2FzZWNtcChwdHIsICJnemlwIikKLSAgICAgICAgICAgICAg
ICAgICAgfHwgIXN0cmNhc2VjbXAocHRyLCAieC1nemlwIikpIHsKKyAgICAgICAgICAgICAgICBp
ZiAoIWFwX2Nhc2VjbXBzdHIocHRyLCAiZ3ppcCIpCisgICAgICAgICAgICAgICAgICAgIHx8ICFh
cF9jYXNlY21wc3RyKHB0ciwgIngtZ3ppcCIpKSB7CiAgICAgICAgICAgICAgICAgICAgICp0b2tl
biA9ICdcMCc7CiAgICAgICAgICAgICAgICAgICAgIGlmIChoZHJzKSB7CiAgICAgICAgICAgICAg
ICAgICAgICAgICBhcHJfdGFibGVfc2V0bihoZHJzLCAiQ29udGVudC1FbmNvZGluZyIsIG5ld19l
bmNvZGluZyk7CkBAIC0xNjEsNyArMTYxLDcgQEAgc3RhdGljIGludCBjaGVja19nemlwKHJlcXVl
c3RfcmVjICpyLCBhcHJfdGFibGVfdAogICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg
ICAgICAgICAgIGZvdW5kID0gMTsKICAgICAgICAgICAgICAgICB9Ci0gICAgICAgICAgICAgICAg
ZWxzZSBpZiAoIXB0clswXSB8fCAhc3RyY2FzZWNtcChwdHIsICJpZGVudGl0eSIpKSB7CisgICAg
ICAgICAgICAgICAgZWxzZSBpZiAoIXB0clswXSB8fCAhYXBfY2FzZWNtcHN0cihwdHIsICJpZGVu
dGl0eSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICp0b2tlbiA9ICdcMCc7CiAgICAgICAgICAg
ICAgICAgICAgIGNvbnRpbnVlOyAvKiBzdHJpcCB0aGUgdG9rZW4gYW5kIGZpbmQgdGhlIG5leHQg
b25lICovCiAgICAgICAgICAgICAgICAgfQpAQCAtNzA0LDcgKzcwNCw3IEBAIHN0YXRpYyBhcHJf
c3RhdHVzX3QgZGVmbGF0ZV9vdXRfZmlsdGVyKGFwX2ZpbHRlcl90CiAgICAgICAgICAgICB9CiAK
ICAgICAgICAgICAgIHRva2VuID0gYXBfZ2V0X3Rva2VuKHItPnBvb2wsICZhY2NlcHRzLCAwKTsK
LSAgICAgICAgICAgIHdoaWxlICh0b2tlbiAmJiB0b2tlblswXSAmJiBzdHJjYXNlY21wKHRva2Vu
LCAiZ3ppcCIpKSB7CisgICAgICAgICAgICB3aGlsZSAodG9rZW4gJiYgdG9rZW5bMF0gJiYgYXBf
Y2FzZWNtcHN0cih0b2tlbiwgImd6aXAiKSkgewogICAgICAgICAgICAgICAgIC8qIHNraXAgcGFy
YW1ldGVycywgWFhYOiA7cT1mb28gZXZhbHVhdGlvbj8gKi8KICAgICAgICAgICAgICAgICB3aGls
ZSAoKmFjY2VwdHMgPT0gJzsnKSB7CiAgICAgICAgICAgICAgICAgICAgICsrYWNjZXB0czsKQEAg
LTc3OCw3ICs3NzgsNyBAQCBzdGF0aWMgYXByX3N0YXR1c190IGRlZmxhdGVfb3V0X2ZpbHRlcihh
cF9maWx0ZXJfdAogICAgICAgICAgKi8KIAogICAgICAgICAvKiBJZiB0aGUgZW50aXJlIENvbnRl
bnQtRW5jb2RpbmcgaXMgImlkZW50aXR5Iiwgd2UgY2FuIHJlcGxhY2UgaXQuICovCi0gICAgICAg
IGlmICghZW5jb2RpbmcgfHwgIXN0cmNhc2VjbXAoZW5jb2RpbmcsICJpZGVudGl0eSIpKSB7Cisg
ICAgICAgIGlmICghZW5jb2RpbmcgfHwgIWFwX2Nhc2VjbXBzdHIoZW5jb2RpbmcsICJpZGVudGl0
eSIpKSB7CiAgICAgICAgICAgICBhcHJfdGFibGVfc2V0bihyLT5oZWFkZXJzX291dCwgIkNvbnRl
bnQtRW5jb2RpbmciLCAiZ3ppcCIpOwogICAgICAgICB9CiAgICAgICAgIGVsc2UgewpJbmRleDog
bW9kdWxlcy9maWx0ZXJzL21vZF9pbmNsdWRlLmMKPT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQotLS0gbW9kdWxlcy9maWx0
ZXJzL21vZF9pbmNsdWRlLmMJKHJldmlzaW9uIDE3MTYxODkpCisrKyBtb2R1bGVzL2ZpbHRlcnMv
bW9kX2luY2x1ZGUuYwkod29ya2luZyBjb3B5KQpAQCAtNjIxLDE2ICs2MjEsMTYgQEAgc3RhdGlj
IHZvaWQgYWRkX2luY2x1ZGVfdmFycyhyZXF1ZXN0X3JlYyAqcikKIHN0YXRpYyBjb25zdCBjaGFy
ICphZGRfaW5jbHVkZV92YXJzX2xhenkocmVxdWVzdF9yZWMgKnIsIGNvbnN0IGNoYXIgKnZhciwg
Y29uc3QgY2hhciAqdGltZWZtdCkKIHsKICAgICBjaGFyICp2YWw7Ci0gICAgaWYgKCFzdHJjYXNl
Y21wKHZhciwgIkRBVEVfTE9DQUwiKSkgeworICAgIGlmICghYXBfY2FzZWNtcHN0cih2YXIsICJE
QVRFX0xPQ0FMIikpIHsKICAgICAgICAgdmFsID0gYXBfaHRfdGltZShyLT5wb29sLCByLT5yZXF1
ZXN0X3RpbWUsIHRpbWVmbXQsIDApOwogICAgIH0KLSAgICBlbHNlIGlmICghc3RyY2FzZWNtcCh2
YXIsICJEQVRFX0dNVCIpKSB7CisgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIodmFyLCAiREFU
RV9HTVQiKSkgewogICAgICAgICB2YWwgPSBhcF9odF90aW1lKHItPnBvb2wsIHItPnJlcXVlc3Rf
dGltZSwgdGltZWZtdCwgMSk7CiAgICAgfQotICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKHZhciwg
IkxBU1RfTU9ESUZJRUQiKSkgeworICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKHZhciwgIkxB
U1RfTU9ESUZJRUQiKSkgewogICAgICAgICB2YWwgPSBhcF9odF90aW1lKHItPnBvb2wsIHItPmZp
bmZvLm10aW1lLCB0aW1lZm10LCAwKTsKICAgICB9Ci0gICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAo
dmFyLCAiVVNFUl9OQU1FIikpIHsKKyAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cih2YXIsICJV
U0VSX05BTUUiKSkgewogICAgICAgICBpZiAoYXByX3VpZF9uYW1lX2dldCgmdmFsLCByLT5maW5m
by51c2VyLCByLT5wb29sKSAhPSBBUFJfU1VDQ0VTUykgewogICAgICAgICAgICAgdmFsID0gIjx1
bmtub3duPiI7CiAgICAgICAgIH0KQEAgLTcxNSw5ICs3MTUsOSBAQCBzdGF0aWMgaW50IGluY2x1
ZGVfZXhwcl9sb29rdXAoYXBfZXhwcl9sb29rdXBfcGFybQogewogICAgIHN3aXRjaCAocGFybXMt
PnR5cGUpIHsKICAgICBjYXNlIEFQX0VYUFJfRlVOQ19TVFJJTkc6Ci0gICAgICAgIGlmIChzdHJj
YXNlY21wKHBhcm1zLT5uYW1lLCAidiIpID09IDAgfHwKLSAgICAgICAgICAgIHN0cmNhc2VjbXAo
cGFybXMtPm5hbWUsICJyZXFlbnYiKSA9PSAwIHx8Ci0gICAgICAgICAgICBzdHJjYXNlY21wKHBh
cm1zLT5uYW1lLCAiZW52IikgPT0gMCkgeworICAgICAgICBpZiAoYXBfY2FzZWNtcHN0cihwYXJt
cy0+bmFtZSwgInYiKSA9PSAwIHx8CisgICAgICAgICAgICBhcF9jYXNlY21wc3RyKHBhcm1zLT5u
YW1lLCAicmVxZW52IikgPT0gMCB8fAorICAgICAgICAgICAgYXBfY2FzZWNtcHN0cihwYXJtcy0+
bmFtZSwgImVudiIpID09IDApIHsKICAgICAgICAgICAgICpwYXJtcy0+ZnVuYyA9IGluY2x1ZGVf
ZXhwcl92YXJfZm47CiAgICAgICAgICAgICAqcGFybXMtPmRhdGEgPSBwYXJtcy0+bmFtZTsKICAg
ICAgICAgICAgIHJldHVybiBPSzsKQEAgLTE5NTAsMjUgKzE5NTAsMjUgQEAgc3RhdGljIGFwcl9z
dGF0dXNfdCBoYW5kbGVfZWNobyhpbmNsdWRlX2N0eF90ICpjdHgKICAgICAgICAgICAgICAgICB0
b2tlbiA9IGFwcl9zdHJ0b2soZCwgIiwgXHQiLCAmbGFzdCk7CiAKICAgICAgICAgICAgICAgICB3
aGlsZSAodG9rZW4pIHsKLSAgICAgICAgICAgICAgICAgICAgaWYgKCFzdHJjYXNlY21wKHRva2Vu
LCAibm9uZSIpKSB7CisgICAgICAgICAgICAgICAgICAgIGlmICghYXBfY2FzZWNtcHN0cih0b2tl
biwgIm5vbmUiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgLyogZG8gbm90aGluZyAqLwog
ICAgICAgICAgICAgICAgICAgICB9Ci0gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzdHJj
YXNlY21wKHRva2VuLCAidXJsIikpIHsKKyAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWFw
X2Nhc2VjbXBzdHIodG9rZW4sICJ1cmwiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgY2hh
ciAqYnVmID0gYXByX3BzdHJkdXAoY3R4LT5wb29sLCBlY2hvX3RleHQpOwogICAgICAgICAgICAg
ICAgICAgICAgICAgYXBfdW5lc2NhcGVfdXJsKGJ1Zik7CiAgICAgICAgICAgICAgICAgICAgICAg
ICBlY2hvX3RleHQgPSBidWY7CiAgICAgICAgICAgICAgICAgICAgIH0KLSAgICAgICAgICAgICAg
ICAgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAodG9rZW4sICJ1cmxlbmNvZGVkIikpIHsKKyAgICAg
ICAgICAgICAgICAgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIodG9rZW4sICJ1cmxlbmNvZGVk
IikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXIgKmJ1ZiA9IGFwcl9wc3RyZHVwKGN0
eC0+cG9vbCwgZWNob190ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgIGFwX3VuZXNjYXBl
X3VybGVuY29kZWQoYnVmKTsKICAgICAgICAgICAgICAgICAgICAgICAgIGVjaG9fdGV4dCA9IGJ1
ZjsKICAgICAgICAgICAgICAgICAgICAgfQotICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgh
c3RyY2FzZWNtcCh0b2tlbiwgImVudGl0eSIpKSB7CisgICAgICAgICAgICAgICAgICAgIGVsc2Ug
aWYgKCFhcF9jYXNlY21wc3RyKHRva2VuLCAiZW50aXR5IikpIHsKICAgICAgICAgICAgICAgICAg
ICAgICAgIGNoYXIgKmJ1ZiA9IGFwcl9wc3RyZHVwKGN0eC0+cG9vbCwgZWNob190ZXh0KTsKICAg
ICAgICAgICAgICAgICAgICAgICAgIGRlY29kZWh0bWwoYnVmKTsKICAgICAgICAgICAgICAgICAg
ICAgICAgIGVjaG9fdGV4dCA9IGJ1ZjsKICAgICAgICAgICAgICAgICAgICAgfQotICAgICAgICAg
ICAgICAgICAgICBlbHNlIGlmICghc3RyY2FzZWNtcCh0b2tlbiwgImJhc2U2NCIpKSB7CisgICAg
ICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKHRva2VuLCAiYmFzZTY0Iikp
IHsKICAgICAgICAgICAgICAgICAgICAgICAgIGVjaG9fdGV4dCA9IGFwX3BiYXNlNjRkZWNvZGUo
Y3R4LT5kcG9vbCwgZWNob190ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAg
ICAgICAgICAgICBlbHNlIHsKQEAgLTE5ODYsMTkgKzE5ODYsMTkgQEAgc3RhdGljIGFwcl9zdGF0
dXNfdCBoYW5kbGVfZWNobyhpbmNsdWRlX2N0eF90ICpjdHgKICAgICAgICAgICAgICAgICB0b2tl
biA9IGFwcl9zdHJ0b2soZSwgIiwgXHQiLCAmbGFzdCk7CiAKICAgICAgICAgICAgICAgICB3aGls
ZSAodG9rZW4pIHsKLSAgICAgICAgICAgICAgICAgICAgaWYgKCFzdHJjYXNlY21wKHRva2VuLCAi
bm9uZSIpKSB7CisgICAgICAgICAgICAgICAgICAgIGlmICghYXBfY2FzZWNtcHN0cih0b2tlbiwg
Im5vbmUiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgLyogZG8gbm90aGluZyAqLwogICAg
ICAgICAgICAgICAgICAgICB9Ci0gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzdHJjYXNl
Y21wKHRva2VuLCAidXJsIikpIHsKKyAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWFwX2Nh
c2VjbXBzdHIodG9rZW4sICJ1cmwiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgZWNob190
ZXh0ID0gYXBfZXNjYXBlX3VyaShjdHgtPmRwb29sLCBlY2hvX3RleHQpOwogICAgICAgICAgICAg
ICAgICAgICB9Ci0gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKHRva2Vu
LCAidXJsZW5jb2RlZCIpKSB7CisgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFhcF9jYXNl
Y21wc3RyKHRva2VuLCAidXJsZW5jb2RlZCIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICBl
Y2hvX3RleHQgPSBhcF9lc2NhcGVfdXJsZW5jb2RlZChjdHgtPmRwb29sLCBlY2hvX3RleHQpOwog
ICAgICAgICAgICAgICAgICAgICB9Ci0gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzdHJj
YXNlY21wKHRva2VuLCAiZW50aXR5IikpIHsKKyAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAo
IWFwX2Nhc2VjbXBzdHIodG9rZW4sICJlbnRpdHkiKSkgewogICAgICAgICAgICAgICAgICAgICAg
ICAgZWNob190ZXh0ID0gYXBfZXNjYXBlX2h0bWwyKGN0eC0+ZHBvb2wsIGVjaG9fdGV4dCwgMCk7
CiAgICAgICAgICAgICAgICAgICAgIH0KLSAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIXN0
cmNhc2VjbXAodG9rZW4sICJiYXNlNjQiKSkgeworICAgICAgICAgICAgICAgICAgICBlbHNlIGlm
ICghYXBfY2FzZWNtcHN0cih0b2tlbiwgImJhc2U2NCIpKSB7CiAgICAgICAgICAgICAgICAgICAg
ICAgICBjaGFyICpidWY7CiAgICAgICAgICAgICAgICAgICAgICAgICBidWYgPSBhcF9wYmFzZTY0
ZW5jb2RlKGN0eC0+ZHBvb2wsIChjaGFyICopZWNob190ZXh0KTsKICAgICAgICAgICAgICAgICAg
ICAgICAgIGVjaG9fdGV4dCA9IGJ1ZjsKQEAgLTI1ODgsMjUgKzI1ODgsMjUgQEAgc3RhdGljIGFw
cl9zdGF0dXNfdCBoYW5kbGVfc2V0KGluY2x1ZGVfY3R4X3QgKmN0eCwKICAgICAgICAgICAgICAg
ICB0b2tlbiA9IGFwcl9zdHJ0b2soZCwgIiwgXHQiLCAmbGFzdCk7CiAKICAgICAgICAgICAgICAg
ICB3aGlsZSAodG9rZW4pIHsKLSAgICAgICAgICAgICAgICAgICAgaWYgKCFzdHJjYXNlY21wKHRv
a2VuLCAibm9uZSIpKSB7CisgICAgICAgICAgICAgICAgICAgIGlmICghYXBfY2FzZWNtcHN0cih0
b2tlbiwgIm5vbmUiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgLyogZG8gbm90aGluZyAq
LwogICAgICAgICAgICAgICAgICAgICB9Ci0gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFz
dHJjYXNlY21wKHRva2VuLCAidXJsIikpIHsKKyAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAo
IWFwX2Nhc2VjbXBzdHIodG9rZW4sICJ1cmwiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAg
Y2hhciAqYnVmID0gYXByX3BzdHJkdXAoY3R4LT5wb29sLCBwYXJzZWRfc3RyaW5nKTsKICAgICAg
ICAgICAgICAgICAgICAgICAgIGFwX3VuZXNjYXBlX3VybChidWYpOwogICAgICAgICAgICAgICAg
ICAgICAgICAgcGFyc2VkX3N0cmluZyA9IGJ1ZjsKICAgICAgICAgICAgICAgICAgICAgfQotICAg
ICAgICAgICAgICAgICAgICBlbHNlIGlmICghc3RyY2FzZWNtcCh0b2tlbiwgInVybGVuY29kZWQi
KSkgeworICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cih0b2tlbiwg
InVybGVuY29kZWQiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgY2hhciAqYnVmID0gYXBy
X3BzdHJkdXAoY3R4LT5wb29sLCBwYXJzZWRfc3RyaW5nKTsKICAgICAgICAgICAgICAgICAgICAg
ICAgIGFwX3VuZXNjYXBlX3VybGVuY29kZWQoYnVmKTsKICAgICAgICAgICAgICAgICAgICAgICAg
IHBhcnNlZF9zdHJpbmcgPSBidWY7CiAgICAgICAgICAgICAgICAgICAgIH0KLSAgICAgICAgICAg
ICAgICAgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAodG9rZW4sICJlbnRpdHkiKSkgeworICAgICAg
ICAgICAgICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cih0b2tlbiwgImVudGl0eSIpKSB7
CiAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyICpidWYgPSBhcHJfcHN0cmR1cChjdHgtPnBv
b2wsIHBhcnNlZF9zdHJpbmcpOwogICAgICAgICAgICAgICAgICAgICAgICAgZGVjb2RlaHRtbChi
dWYpOwogICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkX3N0cmluZyA9IGJ1ZjsKICAgICAg
ICAgICAgICAgICAgICAgfQotICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghc3RyY2FzZWNt
cCh0b2tlbiwgImJhc2U2NCIpKSB7CisgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFhcF9j
YXNlY21wc3RyKHRva2VuLCAiYmFzZTY0IikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgIHBh
cnNlZF9zdHJpbmcgPSBhcF9wYmFzZTY0ZGVjb2RlKGN0eC0+ZHBvb2wsIHBhcnNlZF9zdHJpbmcp
OwogICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgIGVsc2UgewpAQCAt
MjYyNCwxOSArMjYyNCwxOSBAQCBzdGF0aWMgYXByX3N0YXR1c190IGhhbmRsZV9zZXQoaW5jbHVk
ZV9jdHhfdCAqY3R4LAogICAgICAgICAgICAgICAgIHRva2VuID0gYXByX3N0cnRvayhlLCAiLCBc
dCIsICZsYXN0KTsKIAogICAgICAgICAgICAgICAgIHdoaWxlICh0b2tlbikgewotICAgICAgICAg
ICAgICAgICAgICBpZiAoIXN0cmNhc2VjbXAodG9rZW4sICJub25lIikpIHsKKyAgICAgICAgICAg
ICAgICAgICAgaWYgKCFhcF9jYXNlY21wc3RyKHRva2VuLCAibm9uZSIpKSB7CiAgICAgICAgICAg
ICAgICAgICAgICAgICAvKiBkbyBub3RoaW5nICovCiAgICAgICAgICAgICAgICAgICAgIH0KLSAg
ICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAodG9rZW4sICJ1cmwiKSkgewor
ICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cih0b2tlbiwgInVybCIp
KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRfc3RyaW5nID0gYXBfZXNjYXBlX3Vy
aShjdHgtPmRwb29sLCBwYXJzZWRfc3RyaW5nKTsKICAgICAgICAgICAgICAgICAgICAgfQotICAg
ICAgICAgICAgICAgICAgICBlbHNlIGlmICghc3RyY2FzZWNtcCh0b2tlbiwgInVybGVuY29kZWQi
KSkgeworICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cih0b2tlbiwg
InVybGVuY29kZWQiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkX3N0cmluZyA9
IGFwX2VzY2FwZV91cmxlbmNvZGVkKGN0eC0+ZHBvb2wsIHBhcnNlZF9zdHJpbmcpOwogICAgICAg
ICAgICAgICAgICAgICB9Ci0gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzdHJjYXNlY21w
KHRva2VuLCAiZW50aXR5IikpIHsKKyAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWFwX2Nh
c2VjbXBzdHIodG9rZW4sICJlbnRpdHkiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgcGFy
c2VkX3N0cmluZyA9IGFwX2VzY2FwZV9odG1sMihjdHgtPmRwb29sLCBwYXJzZWRfc3RyaW5nLCAw
KTsKICAgICAgICAgICAgICAgICAgICAgfQotICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgh
c3RyY2FzZWNtcCh0b2tlbiwgImJhc2U2NCIpKSB7CisgICAgICAgICAgICAgICAgICAgIGVsc2Ug
aWYgKCFhcF9jYXNlY21wc3RyKHRva2VuLCAiYmFzZTY0IikpIHsKICAgICAgICAgICAgICAgICAg
ICAgICAgIGNoYXIgKmJ1ZjsKICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZiA9IGFwX3BiYXNl
NjRlbmNvZGUoY3R4LT5kcG9vbCwgKGNoYXIgKilwYXJzZWRfc3RyaW5nKTsKICAgICAgICAgICAg
ICAgICAgICAgICAgIHBhcnNlZF9zdHJpbmcgPSBidWY7CkluZGV4OiBtb2R1bGVzL2ZpbHRlcnMv
bW9kX3Byb3h5X2h0bWwuYwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tLSBtb2R1bGVzL2ZpbHRlcnMvbW9kX3Byb3h5
X2h0bWwuYwkocmV2aXNpb24gMTcxNjE4OSkKKysrIG1vZHVsZXMvZmlsdGVycy9tb2RfcHJveHlf
aHRtbC5jCSh3b3JraW5nIGNvcHkpCkBAIC02NjAsNyArNjYwLDcgQEAgc3RhdGljIG1ldGEgKm1l
dGFmaXgocmVxdWVzdF9yZWMgKnIsIGNvbnN0IGNoYXIgKmIKICAgICAgICAgd2hpbGUgKCFhcHJf
aXNhbHBoYSgqKytwKSk7CiAgICAgICAgIGZvciAocSA9IHA7IGFwcl9pc2FsbnVtKCpxKSB8fCAo
KnEgPT0gJy0nKTsgKytxKTsKICAgICAgICAgaGVhZGVyID0gYXByX3BzdHJuZHVwKHItPnBvb2ws
IHAsIHEtcCk7Ci0gICAgICAgIGlmIChzdHJuY2FzZWNtcChoZWFkZXIsICJDb250ZW50LSIsIDgp
KSB7CisgICAgICAgIGlmIChhcF9jYXNlY21wc3RybihoZWFkZXIsICJDb250ZW50LSIsIDgpKSB7
CiAgICAgICAgICAgICAvKiBmaW5kIGNvbnRlbnQ9Li4uIHN0cmluZyAqLwogICAgICAgICAgICAg
cCA9IGFwcl9zdHJtYXRjaChzZWVrX2NvbnRlbnQsIGJ1ZitvZmZzK3BtYXRjaFswXS5ybV9zbywK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBtYXRjaFswXS5ybV9lbyAtIHBtYXRjaFsw
XS5ybV9zbyk7CkBAIC02ODgsNyArNjg4LDcgQEAgc3RhdGljIG1ldGEgKm1ldGFmaXgocmVxdWVz
dF9yZWMgKnIsIGNvbnN0IGNoYXIgKmIKICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9
CiAgICAgICAgIH0KLSAgICAgICAgZWxzZSBpZiAoIXN0cm5jYXNlY21wKGhlYWRlciwgIkNvbnRl
bnQtVHlwZSIsIDEyKSkgeworICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cm4oaGVhZGVy
LCAiQ29udGVudC1UeXBlIiwgMTIpKSB7CiAgICAgICAgICAgICByZXQgPSBhcHJfcGFsbG9jKHIt
PnBvb2wsIHNpemVvZihtZXRhKSk7CiAgICAgICAgICAgICByZXQtPnN0YXJ0ID0gb2ZmcytwbWF0
Y2hbMF0ucm1fc287CiAgICAgICAgICAgICByZXQtPmVuZCA9IG9mZnMrcG1hdGNoWzBdLnJtX2Vv
OwpAQCAtODEyLDggKzgxMiw4IEBAIHN0YXRpYyBzYXhjdHh0ICpjaGVja19maWx0ZXJfaW5pdCAo
YXBfZmlsdGVyX3QgKmYpCiAgICAgICAgICAgICBlbHNlIGlmICghZi0+ci0+Y29udGVudF90eXBl
KSB7CiAgICAgICAgICAgICAgICAgZXJybXNnID0gIk5vIGNvbnRlbnQtdHlwZTsgYmFpbGluZyBv
dXQgb2YgcHJveHktaHRtbCBmaWx0ZXIiOwogICAgICAgICAgICAgfQotICAgICAgICAgICAgZWxz
ZSBpZiAoc3RybmNhc2VjbXAoZi0+ci0+Y29udGVudF90eXBlLCAidGV4dC9odG1sIiwgOSkgJiYK
LSAgICAgICAgICAgICAgICAgICAgIHN0cm5jYXNlY21wKGYtPnItPmNvbnRlbnRfdHlwZSwKKyAg
ICAgICAgICAgIGVsc2UgaWYgKGFwX2Nhc2VjbXBzdHJuKGYtPnItPmNvbnRlbnRfdHlwZSwgInRl
eHQvaHRtbCIsIDkpICYmCisgICAgICAgICAgICAgICAgICAgICBhcF9jYXNlY21wc3RybihmLT5y
LT5jb250ZW50X3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXBwbGlj
YXRpb24veGh0bWwreG1sIiwgMjEpKSB7CiAgICAgICAgICAgICAgICAgZXJybXNnID0gIk5vbi1I
VE1MIGNvbnRlbnQ7IG5vdCBpbnNlcnRpbmcgcHJveHktaHRtbCBmaWx0ZXIiOwogICAgICAgICAg
ICAgfQpJbmRleDogbW9kdWxlcy9nZW5lcmF0b3JzL21vZF9hdXRvaW5kZXguYwo9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
Ci0tLSBtb2R1bGVzL2dlbmVyYXRvcnMvbW9kX2F1dG9pbmRleC5jCShyZXZpc2lvbiAxNzE2MTg5
KQorKysgbW9kdWxlcy9nZW5lcmF0b3JzL21vZF9hdXRvaW5kZXguYwkod29ya2luZyBjb3B5KQpA
QCAtMTA2OCw3ICsxMDY4LDcgQEAgc3RhdGljIHZvaWQgZW1pdF9oZWFkKHJlcXVlc3RfcmVjICpy
LCBjaGFyICpoZWFkZXIKICAgICAgICAgICAgICAgICAgICAgZW1pdF9IMSA9IDE7CiAgICAgICAg
ICAgICAgICAgfQogICAgICAgICAgICAgfQotICAgICAgICAgICAgZWxzZSBpZiAoIXN0cm5jYXNl
Y21wKCJ0ZXh0LyIsIHJyLT5jb250ZW50X3R5cGUsIDUpKSB7CisgICAgICAgICAgICBlbHNlIGlm
ICghYXBfY2FzZWNtcHN0cm4oInRleHQvIiwgcnItPmNvbnRlbnRfdHlwZSwgNSkpIHsKICAgICAg
ICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgICAqIElmIHdlIGNhbiBvcGVuIHRoZSBmaWxl
LCBwcmVmaXggaXQgd2l0aCB0aGUgcHJlYW1ibGUKICAgICAgICAgICAgICAgICAgKiByZWdhcmRs
ZXNzOyBzaW5jZSB3ZSdsbCBiZSBzZW5kaW5nIGEgPHByZT4gYmxvY2sgYXJvdW5kCkBAIC0xMTYz
LDcgKzExNjMsNyBAQCBzdGF0aWMgdm9pZCBlbWl0X3RhaWwocmVxdWVzdF9yZWMgKnIsIGNoYXIg
KnJlYWRtZQogICAgICAgICAgICAgICAgICAgICBzdXBwcmVzc19wb3N0ID0gc3VwcHJlc3NfYW1i
bGU7CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfQotICAgICAgICAgICAgZWxzZSBp
ZiAoIXN0cm5jYXNlY21wKCJ0ZXh0LyIsIHJyLT5jb250ZW50X3R5cGUsIDUpKSB7CisgICAgICAg
ICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cm4oInRleHQvIiwgcnItPmNvbnRlbnRfdHlwZSwg
NSkpIHsKICAgICAgICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgICAqIElmIHdlIGNhbiBv
cGVuIHRoZSBmaWxlLCBzdXBwcmVzcyB0aGUgc2lnbmF0dXJlLgogICAgICAgICAgICAgICAgICAq
LwpJbmRleDogbW9kdWxlcy9nZW5lcmF0b3JzL21vZF9jZ2kuYwo9PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tLSBtb2R1
bGVzL2dlbmVyYXRvcnMvbW9kX2NnaS5jCShyZXZpc2lvbiAxNzE2MTg5KQorKysgbW9kdWxlcy9n
ZW5lcmF0b3JzL21vZF9jZ2kuYwkod29ya2luZyBjb3B5KQpAQCAtNzgsNyArNzgsNyBAQCBzdGF0
aWMgdm9pZCBkaXNjYXJkX3NjcmlwdF9vdXRwdXQoYXByX2J1Y2tldF9icmlnYQogc3RhdGljIGlu
dCBpc19zY3JpcHRhbGlhc2VkKHJlcXVlc3RfcmVjICpyKQogewogICAgIGNvbnN0IGNoYXIgKnQg
PSBhcHJfdGFibGVfZ2V0KHItPm5vdGVzLCAiYWxpYXMtZm9yY2VkLXR5cGUiKTsKLSAgICByZXR1
cm4gdCAmJiAoIXN0cmNhc2VjbXAodCwgImNnaS1zY3JpcHQiKSk7CisgICAgcmV0dXJuIHQgJiYg
KCFhcF9jYXNlY21wc3RyKHQsICJjZ2ktc2NyaXB0IikpOwogfQogCiAvKiBDb25maWd1cmF0aW9u
IHN0dWZmICovCkluZGV4OiBtb2R1bGVzL2dlbmVyYXRvcnMvbW9kX2NnaWQuYwo9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
Ci0tLSBtb2R1bGVzL2dlbmVyYXRvcnMvbW9kX2NnaWQuYwkocmV2aXNpb24gMTcxNjE4OSkKKysr
IG1vZHVsZXMvZ2VuZXJhdG9ycy9tb2RfY2dpZC5jCSh3b3JraW5nIGNvcHkpCkBAIC0xMzEsNyAr
MTMxLDcgQEAgc3RhdGljIGFwX3VuaXhfaWRlbnRpdHlfdCAqY2dpZF9zdWV4ZWNfaWRfZG9lcihj
b24KIHN0YXRpYyBpbnQgaXNfc2NyaXB0YWxpYXNlZChyZXF1ZXN0X3JlYyAqcikKIHsKICAgICBj
b25zdCBjaGFyICp0ID0gYXByX3RhYmxlX2dldChyLT5ub3RlcywgImFsaWFzLWZvcmNlZC10eXBl
Iik7Ci0gICAgcmV0dXJuIHQgJiYgKCFzdHJjYXNlY21wKHQsICJjZ2ktc2NyaXB0IikpOworICAg
IHJldHVybiB0ICYmICghYXBfY2FzZWNtcHN0cih0LCAiY2dpLXNjcmlwdCIpKTsKIH0KIAogLyog
Q29uZmlndXJhdGlvbiBzdHVmZiAqLwpJbmRleDogbW9kdWxlcy9nZW5lcmF0b3JzL21vZF9pbmZv
LmMKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PQotLS0gbW9kdWxlcy9nZW5lcmF0b3JzL21vZF9pbmZvLmMJKHJldmlzaW9u
IDE3MTYxODkpCisrKyBtb2R1bGVzL2dlbmVyYXRvcnMvbW9kX2luZm8uYwkod29ya2luZyBjb3B5
KQpAQCAtNzg1LDcgKzc4NSw3IEBAIHN0YXRpYyBpbnQgZGlzcGxheV9pbmZvKHJlcXVlc3RfcmVj
ICogcikKICAgICAgICAgICAgICAiICA8dGl0bGU+U2VydmVyIEluZm9ybWF0aW9uPC90aXRsZT5c
biIgIjwvaGVhZD5cbiIsIHIpOwogICAgIGFwX3JwdXRzKCI8Ym9keT48aDEgc3R5bGU9XCJ0ZXh0
LWFsaWduOiBjZW50ZXJcIj4iCiAgICAgICAgICAgICAgIkFwYWNoZSBTZXJ2ZXIgSW5mb3JtYXRp
b248L2gxPlxuIiwgcik7Ci0gICAgaWYgKCFyLT5hcmdzIHx8IHN0cmNhc2VjbXAoci0+YXJncywg
Imxpc3QiKSkgeworICAgIGlmICghci0+YXJncyB8fCBhcF9jYXNlY21wc3RyKHItPmFyZ3MsICJs
aXN0IikpIHsKICAgICAgICAgaWYgKCFyLT5hcmdzKSB7CiAgICAgICAgICAgICBhcF9ycHV0cygi
PGRsPjxkdD48dHQ+U3VicGFnZXM6PGJyIC8+Iiwgcik7CiAgICAgICAgICAgICBhcF9ycHV0cygi
PGEgaHJlZj1cIj9jb25maWdcIj5Db25maWd1cmF0aW9uIEZpbGVzPC9hPiwgIgpAQCAtODE5LDE5
ICs4MTksMTkgQEAgc3RhdGljIGludCBkaXNwbGF5X2luZm8ocmVxdWVzdF9yZWMgKiByKQogICAg
ICAgICAgICAgYXBfcnB1dHMoIjwvdHQ+PC9kdD48L2RsPjxociAvPiIsIHIpOwogICAgICAgICB9
CiAKLSAgICAgICAgaWYgKCFyLT5hcmdzIHx8ICFzdHJjYXNlY21wKHItPmFyZ3MsICJzZXJ2ZXIi
KSkgeworICAgICAgICBpZiAoIXItPmFyZ3MgfHwgIWFwX2Nhc2VjbXBzdHIoci0+YXJncywgInNl
cnZlciIpKSB7CiAgICAgICAgICAgICBzaG93X3NlcnZlcl9zZXR0aW5ncyhyKTsKICAgICAgICAg
fQogCi0gICAgICAgIGlmICghci0+YXJncyB8fCAhc3RyY2FzZWNtcChyLT5hcmdzLCAiaG9va3Mi
KSkgeworICAgICAgICBpZiAoIXItPmFyZ3MgfHwgIWFwX2Nhc2VjbXBzdHIoci0+YXJncywgImhv
b2tzIikpIHsKICAgICAgICAgICAgIHNob3dfYWN0aXZlX2hvb2tzKHIpOwogICAgICAgICB9CiAK
LSAgICAgICAgaWYgKCFyLT5hcmdzIHx8ICFzdHJjYXNlY21wKHItPmFyZ3MsICJwcm92aWRlcnMi
KSkgeworICAgICAgICBpZiAoIXItPmFyZ3MgfHwgIWFwX2Nhc2VjbXBzdHIoci0+YXJncywgInBy
b3ZpZGVycyIpKSB7CiAgICAgICAgICAgICBzaG93X3Byb3ZpZGVycyhyKTsKICAgICAgICAgfQog
Ci0gICAgICAgIGlmIChyLT5hcmdzICYmIDAgPT0gc3RyY2FzZWNtcChyLT5hcmdzLCAiY29uZmln
IikpIHsKKyAgICAgICAgaWYgKHItPmFyZ3MgJiYgMCA9PSBhcF9jYXNlY21wc3RyKHItPmFyZ3Ms
ICJjb25maWciKSkgewogICAgICAgICAgICAgYXBfcnB1dHMoIjxkbD48ZHQ+PHN0cm9uZz5Db25m
aWd1cmF0aW9uOjwvc3Ryb25nPlxuIiwgcik7CiAgICAgICAgICAgICBtb2RfaW5mb19tb2R1bGVf
Y21kcyhyLCBOVUxMLCBhcF9jb25mdHJlZSwgMCwgMCk7CiAgICAgICAgICAgICBhcF9ycHV0cygi
PC9kbD48aHIgLz4iLCByKTsKQEAgLTg0Miw3ICs4NDIsNyBAQCBzdGF0aWMgaW50IGRpc3BsYXlf
aW5mbyhyZXF1ZXN0X3JlYyAqIHIpCiAgICAgICAgICAgICAgICAgIG1vZHVsZXMgPSBnZXRfc29y
dGVkX21vZHVsZXMoci0+cG9vbCk7CiAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbW9kdWxl
cy0+bmVsdHM7IGkrKykgewogICAgICAgICAgICAgICAgIG1vZHAgPSBBUFJfQVJSQVlfSURYKG1v
ZHVsZXMsIGksIG1vZHVsZSAqKTsKLSAgICAgICAgICAgICAgICBpZiAoIXItPmFyZ3MgfHwgIXN0
cmNhc2VjbXAobW9kcC0+bmFtZSwgci0+YXJncykpIHsKKyAgICAgICAgICAgICAgICBpZiAoIXIt
PmFyZ3MgfHwgIWFwX2Nhc2VjbXBzdHIobW9kcC0+bmFtZSwgci0+YXJncykpIHsKICAgICAgICAg
ICAgICAgICAgICAgYXBfcnByaW50ZihyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICI8ZGw+PGR0PjxhIG5hbWU9XCIlc1wiPjxzdHJvbmc+TW9kdWxlIE5hbWU6PC9zdHJvbmc+PC9h
PiAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIjxmb250IHNpemU9XCIrMVwiPjx0
dD48YSBocmVmPVwiPyVzXCI+JXM8L2E+PC90dD48L2ZvbnQ+PC9kdD5cbiIsCkBAIC05NDAsNyAr
OTQwLDcgQEAgc3RhdGljIGludCBkaXNwbGF5X2luZm8ocmVxdWVzdF9yZWMgKiByKQogICAgICAg
ICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfQotICAgICAg
ICAgICAgaWYgKCFtb2RwICYmIHItPmFyZ3MgJiYgc3RyY2FzZWNtcChyLT5hcmdzLCAic2VydmVy
IikpIHsKKyAgICAgICAgICAgIGlmICghbW9kcCAmJiByLT5hcmdzICYmIGFwX2Nhc2VjbXBzdHIo
ci0+YXJncywgInNlcnZlciIpKSB7CiAgICAgICAgICAgICAgICAgYXBfcnB1dHMoIjxwPjxiPk5v
IHN1Y2ggbW9kdWxlPC9iPjwvcD5cbiIsIHIpOwogICAgICAgICAgICAgfQogICAgICAgICB9Cklu
ZGV4OiBtb2R1bGVzL2h0dHAvYnl0ZXJhbmdlX2ZpbHRlci5jCj09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0tIG1vZHVs
ZXMvaHR0cC9ieXRlcmFuZ2VfZmlsdGVyLmMJKHJldmlzaW9uIDE3MTYxODkpCisrKyBtb2R1bGVz
L2h0dHAvYnl0ZXJhbmdlX2ZpbHRlci5jCSh3b3JraW5nIGNvcHkpCkBAIC0xMTUsNyArMTE1LDcg
QEAgc3RhdGljIGludCBhcF9zZXRfYnl0ZXJhbmdlKHJlcXVlc3RfcmVjICpyLCBhcHJfb2YKICAg
ICAgICAgcmFuZ2UgPSBhcHJfdGFibGVfZ2V0KHItPmhlYWRlcnNfaW4sICJSZXF1ZXN0LVJhbmdl
Iik7CiAgICAgfQogCi0gICAgaWYgKCFyYW5nZSB8fCBzdHJuY2FzZWNtcChyYW5nZSwgImJ5dGVz
PSIsIDYpIHx8IHItPnN0YXR1cyAhPSBIVFRQX09LKSB7CisgICAgaWYgKCFyYW5nZSB8fCBhcF9j
YXNlY21wc3RybihyYW5nZSwgImJ5dGVzPSIsIDYpIHx8IHItPnN0YXR1cyAhPSBIVFRQX09LKSB7
CiAgICAgICAgIHJldHVybiAwOwogICAgIH0KIApAQCAtMTI2LDggKzEyNiw4IEBAIHN0YXRpYyBp
bnQgYXBfc2V0X2J5dGVyYW5nZShyZXF1ZXN0X3JlYyAqciwgYXByX29mCiAKICAgICAvKiBpcyBj
b250ZW50IGFscmVhZHkgYSBtdWx0aXBsZSByYW5nZT8gKi8KICAgICBpZiAoKGN0ID0gYXByX3Rh
YmxlX2dldChyLT5oZWFkZXJzX291dCwgIkNvbnRlbnQtVHlwZSIpKQotICAgICAgICAmJiAoIXN0
cm5jYXNlY21wKGN0LCAibXVsdGlwYXJ0L2J5dGVyYW5nZXMiLCAyMCkKLSAgICAgICAgICAgIHx8
ICFzdHJuY2FzZWNtcChjdCwgIm11bHRpcGFydC94LWJ5dGVyYW5nZXMiLCAyMikpKSB7CisgICAg
ICAgICYmICghYXBfY2FzZWNtcHN0cm4oY3QsICJtdWx0aXBhcnQvYnl0ZXJhbmdlcyIsIDIwKQor
ICAgICAgICAgICAgfHwgIWFwX2Nhc2VjbXBzdHJuKGN0LCAibXVsdGlwYXJ0L3gtYnl0ZXJhbmdl
cyIsIDIyKSkpIHsKICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICB9CiAKSW5kZXg6IG1v
ZHVsZXMvaHR0cC9odHRwX2ZpbHRlcnMuYwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tLSBtb2R1bGVzL2h0dHAvaHR0
cF9maWx0ZXJzLmMJKHJldmlzaW9uIDE3MTYxODkpCisrKyBtb2R1bGVzL2h0dHAvaHR0cF9maWx0
ZXJzLmMJKHdvcmtpbmcgY29weSkKQEAgLTM2Myw3ICszNjMsNyBAQCBhcHJfc3RhdHVzX3QgYXBf
aHR0cF9maWx0ZXIoYXBfZmlsdGVyX3QgKmYsIGFwcl9idQogICAgICAgICBsZW5wID0gYXByX3Rh
YmxlX2dldChmLT5yLT5oZWFkZXJzX2luLCAiQ29udGVudC1MZW5ndGgiKTsKIAogICAgICAgICBp
ZiAodGVuYykgewotICAgICAgICAgICAgaWYgKHN0cmNhc2VjbXAodGVuYywgImNodW5rZWQiKSA9
PSAwIC8qIGZhc3QgcGF0aCAqLworICAgICAgICAgICAgaWYgKGFwX2Nhc2VjbXBzdHIodGVuYywg
ImNodW5rZWQiKSA9PSAwIC8qIGZhc3QgcGF0aCAqLwogICAgICAgICAgICAgICAgICAgICB8fCBh
cF9maW5kX2xhc3RfdG9rZW4oZi0+ci0+cG9vbCwgdGVuYywgImNodW5rZWQiKSkgewogICAgICAg
ICAgICAgICAgIGN0eC0+c3RhdGUgPSBCT0RZX0NIVU5LOwogICAgICAgICAgICAgfQpAQCAtNzQ5
LDcgKzc0OSw3IEBAIHN0YXRpYyBpbnQgdW5pcV9maWVsZF92YWx1ZXModm9pZCAqZCwgY29uc3Qg
Y2hhciAqCiAgICAgICAgICAqLwogICAgICAgICBmb3IgKGkgPSAwLCBzdHJwcCA9IChjaGFyICoq
KSB2YWx1ZXMtPmVsdHM7IGkgPCB2YWx1ZXMtPm5lbHRzOwogICAgICAgICAgICAgICsraSwgKytz
dHJwcCkgewotICAgICAgICAgICAgaWYgKCpzdHJwcCAmJiBzdHJjYXNlY21wKCpzdHJwcCwgc3Rh
cnQpID09IDApIHsKKyAgICAgICAgICAgIGlmICgqc3RycHAgJiYgYXBfY2FzZWNtcHN0cigqc3Ry
cHAsIHN0YXJ0KSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICB9
CiAgICAgICAgIH0KQEAgLTEyODIsNyArMTI4Miw3IEBAIEFQX0NPUkVfREVDTEFSRV9OT05TVEQo
YXByX3N0YXR1c190KSBhcF9odHRwX2hlYWRlCiAKICAgICAgICAgd2hpbGUgKGZpZWxkICYmICh0
b2tlbiA9IGFwX2dldF9saXN0X2l0ZW0oci0+cG9vbCwgJmZpZWxkKSkgIT0gTlVMTCkgewogICAg
ICAgICAgICAgZm9yIChpID0gMDsgaSA8IHItPmNvbnRlbnRfbGFuZ3VhZ2VzLT5uZWx0czsgKytp
KSB7Ci0gICAgICAgICAgICAgICAgaWYgKCFzdHJjYXNlY21wKHRva2VuLCBsYW5ndWFnZXNbaV0p
KQorICAgICAgICAgICAgICAgIGlmICghYXBfY2FzZWNtcHN0cih0b2tlbiwgbGFuZ3VhZ2VzW2ld
KSkKICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICB9CiAgICAgICAgICAg
ICBpZiAoaSA9PSByLT5jb250ZW50X2xhbmd1YWdlcy0+bmVsdHMpIHsKQEAgLTE1MzQsNyArMTUz
NCw3IEBAIEFQX0RFQ0xBUkUoaW50KSBhcF9zZXR1cF9jbGllbnRfYmxvY2socmVxdWVzdF9yZWMK
ICAgICByLT5yZW1haW5pbmcgPSAwOwogCiAgICAgaWYgKHRlbmMpIHsKLSAgICAgICAgaWYgKHN0
cmNhc2VjbXAodGVuYywgImNodW5rZWQiKSkgeworICAgICAgICBpZiAoYXBfY2FzZWNtcHN0cih0
ZW5jLCAiY2h1bmtlZCIpKSB7CiAgICAgICAgICAgICBhcF9sb2dfcmVycm9yKEFQTE9HX01BUkss
IEFQTE9HX0lORk8sIDAsIHIsIEFQTE9HTk8oMDE1OTIpCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICJVbmtub3duIFRyYW5zZmVyLUVuY29kaW5nICVzIiwgdGVuYyk7CiAgICAgICAgICAgICBy
ZXR1cm4gSFRUUF9OT1RfSU1QTEVNRU5URUQ7CkluZGV4OiBtb2R1bGVzL2h0dHAyL2gyX2Zyb21f
aDEuYwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09Ci0tLSBtb2R1bGVzL2h0dHAyL2gyX2Zyb21faDEuYwkocmV2aXNpb24g
MTcxNjE4OSkKKysrIG1vZHVsZXMvaHR0cDIvaDJfZnJvbV9oMS5jCSh3b3JraW5nIGNvcHkpCkBA
IC0yNjIsNyArMjYyLDcgQEAgc3RhdGljIGludCB1bmlxX2ZpZWxkX3ZhbHVlcyh2b2lkICpkLCBj
b25zdCBjaGFyICoKICAgICAgICAgICovCiAgICAgICAgIGZvciAoaSA9IDAsIHN0cnBwID0gKGNo
YXIgKiopIHZhbHVlcy0+ZWx0czsgaSA8IHZhbHVlcy0+bmVsdHM7CiAgICAgICAgICAgICAgKytp
LCArK3N0cnBwKSB7Ci0gICAgICAgICAgICBpZiAoKnN0cnBwICYmIHN0cmNhc2VjbXAoKnN0cnBw
LCBzdGFydCkgPT0gMCkgeworICAgICAgICAgICAgaWYgKCpzdHJwcCAmJiBhcF9jYXNlY21wc3Ry
KCpzdHJwcCwgc3RhcnQpID09IDApIHsKICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAg
ICAgIH0KICAgICAgICAgfQpAQCAtNDExLDcgKzQxMSw3IEBAIHN0YXRpYyBoMl9yZXNwb25zZSAq
Y3JlYXRlX3Jlc3BvbnNlKGgyX2Zyb21faDEgKmZyCiAgICAgICAgIAogICAgICAgICB3aGlsZSAo
ZmllbGQgJiYgKHRva2VuID0gYXBfZ2V0X2xpc3RfaXRlbShyLT5wb29sLCAmZmllbGQpKSAhPSBO
VUxMKSB7CiAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgci0+Y29udGVudF9sYW5ndWFnZXMt
Pm5lbHRzOyArK2kpIHsKLSAgICAgICAgICAgICAgICBpZiAoIXN0cmNhc2VjbXAodG9rZW4sIGxh
bmd1YWdlc1tpXSkpCisgICAgICAgICAgICAgICAgaWYgKCFhcF9jYXNlY21wc3RyKHRva2VuLCBs
YW5ndWFnZXNbaV0pKQogICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgIH0K
ICAgICAgICAgICAgIGlmIChpID09IHItPmNvbnRlbnRfbGFuZ3VhZ2VzLT5uZWx0cykgewpJbmRl
eDogbW9kdWxlcy9sb2dnZXJzL21vZF9sb2dfY29uZmlnLmMKPT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQotLS0gbW9kdWxl
cy9sb2dnZXJzL21vZF9sb2dfY29uZmlnLmMJKHJldmlzaW9uIDE3MTYxODkpCisrKyBtb2R1bGVz
L2xvZ2dlcnMvbW9kX2xvZ19jb25maWcuYwkod29ya2luZyBjb3B5KQpAQCAtNDY2LDcgKzQ2Niw3
IEBAIHN0YXRpYyBBUFJfSU5MSU5FIGNoYXIgKmZpbmRfbXVsdGlwbGVfaGVhZGVycyhhcHJfCiAg
ICAgcmVzdWx0X2xpc3QgPSBycCA9IE5VTEw7CiAKICAgICBkbyB7Ci0gICAgICAgIGlmICghc3Ry
Y2FzZWNtcCh0X2VsdC0+a2V5LCBrZXkpKSB7CisgICAgICAgIGlmICghYXBfY2FzZWNtcHN0cih0
X2VsdC0+a2V5LCBrZXkpKSB7CiAgICAgICAgICAgICBpZiAoIXJlc3VsdF9saXN0KSB7CiAgICAg
ICAgICAgICAgICAgcmVzdWx0X2xpc3QgPSBycCA9IGFwcl9wYWxsb2MocG9vbCwgc2l6ZW9mKCpy
cCkpOwogICAgICAgICAgICAgfQpAQCAtNTEwLDEwICs1MTAsMTAgQEAgc3RhdGljIGNvbnN0IGNo
YXIgKmxvZ19oZWFkZXJfb3V0KHJlcXVlc3RfcmVjICpyLAogewogICAgIGNvbnN0IGNoYXIgKmNw
ID0gTlVMTDsKIAotICAgIGlmICghc3RyY2FzZWNtcChhLCAiQ29udGVudC10eXBlIikgJiYgci0+
Y29udGVudF90eXBlKSB7CisgICAgaWYgKCFhcF9jYXNlY21wc3RyKGEsICJDb250ZW50LXR5cGUi
KSAmJiByLT5jb250ZW50X3R5cGUpIHsKICAgICAgICAgY3AgPSBhcF9maWVsZF9ub3BhcmFtKHIt
PnBvb2wsIHItPmNvbnRlbnRfdHlwZSk7CiAgICAgfQotICAgIGVsc2UgaWYgKCFzdHJjYXNlY21w
KGEsICJTZXQtQ29va2llIikpIHsKKyAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihhLCAiU2V0
LUNvb2tpZSIpKSB7CiAgICAgICAgIGNwID0gZmluZF9tdWx0aXBsZV9oZWFkZXJzKHItPnBvb2ws
IHItPmhlYWRlcnNfb3V0LCBhKTsKICAgICB9CiAgICAgZWxzZSB7CkBAIC01NjksNyArNTY5LDcg
QEAgc3RhdGljIGNvbnN0IGNoYXIgKmxvZ19jb29raWUocmVxdWVzdF9yZWMgKnIsIGNoYXIKICAg
ICAgICAgICAgICAgICAgICAgLS1sYXN0OwogICAgICAgICAgICAgICAgIH0KIAotICAgICAgICAg
ICAgICAgIGlmICghc3RyY2FzZWNtcChuYW1lLCBhKSkgeworICAgICAgICAgICAgICAgIGlmICgh
YXBfY2FzZWNtcHN0cihuYW1lLCBhKSkgewogICAgICAgICAgICAgICAgICAgICAvKiBsYXN0MSBw
b2ludHMgdG8gdGhlIG5leHQgY2hhciBmb2xsb3dpbmcgdGhlICc7JyBkZWxpbSwKICAgICAgICAg
ICAgICAgICAgICAgICAgb3IgdGhlIHRyYWlsaW5nIE5VTCBjaGFyIG9mIHRoZSBzdHJpbmcgKi8K
ICAgICAgICAgICAgICAgICAgICAgbGFzdCA9IGxhc3QxIC0gKCpsYXN0MSA/IDIgOiAxKTsKQEAg
LTc3NywxMyArNzc3LDEzIEBAIHN0YXRpYyBjb25zdCBjaGFyICpsb2dfcmVxdWVzdF9kdXJhdGlv
bl9taWNyb3NlY29uCiBzdGF0aWMgY29uc3QgY2hhciAqbG9nX3JlcXVlc3RfZHVyYXRpb25fc2Nh
bGVkKHJlcXVlc3RfcmVjICpyLCBjaGFyICphKQogewogICAgIGFwcl90aW1lX3QgZHVyYXRpb24g
PSBnZXRfcmVxdWVzdF9lbmRfdGltZShyKSAtIHItPnJlcXVlc3RfdGltZTsKLSAgICBpZiAoKmEg
PT0gJ1wwJyB8fCAhc3RyY2FzZWNtcChhLCAicyIpKSB7CisgICAgaWYgKCphID09ICdcMCcgfHwg
IWFwX2Nhc2VjbXBzdHIoYSwgInMiKSkgewogICAgICAgICBkdXJhdGlvbiA9IGFwcl90aW1lX3Nl
YyhkdXJhdGlvbik7CiAgICAgfQotICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKGEsICJtcyIpKSB7
CisgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoYSwgIm1zIikpIHsKICAgICAgICAgZHVyYXRp
b24gPSBhcHJfdGltZV9hc19tc2VjKGR1cmF0aW9uKTsKICAgICB9Ci0gICAgZWxzZSBpZiAoIXN0
cmNhc2VjbXAoYSwgInVzIikpIHsKKyAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihhLCAidXMi
KSkgewogICAgIH0KICAgICBlbHNlIHsKICAgICAgICAgLyogYm9ndXMgZm9ybWF0ICovCkBAIC04
MDQsMTMgKzgwNCwxMyBAQCBzdGF0aWMgY29uc3QgY2hhciAqbG9nX3NlcnZlcl9wb3J0KHJlcXVl
c3RfcmVjICpyLAogewogICAgIGFwcl9wb3J0X3QgcG9ydDsKIAotICAgIGlmICgqYSA9PSAnXDAn
IHx8ICFzdHJjYXNlY21wKGEsICJjYW5vbmljYWwiKSkgeworICAgIGlmICgqYSA9PSAnXDAnIHx8
ICFhcF9jYXNlY21wc3RyKGEsICJjYW5vbmljYWwiKSkgewogICAgICAgICBwb3J0ID0gci0+c2Vy
dmVyLT5wb3J0ID8gci0+c2VydmVyLT5wb3J0IDogYXBfZGVmYXVsdF9wb3J0KHIpOwogICAgIH0K
LSAgICBlbHNlIGlmICghc3RyY2FzZWNtcChhLCAicmVtb3RlIikpIHsKKyAgICBlbHNlIGlmICgh
YXBfY2FzZWNtcHN0cihhLCAicmVtb3RlIikpIHsKICAgICAgICAgcG9ydCA9IHItPnVzZXJhZ2Vu
dF9hZGRyLT5wb3J0OwogICAgIH0KLSAgICBlbHNlIGlmICghc3RyY2FzZWNtcChhLCAibG9jYWwi
KSkgeworICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGEsICJsb2NhbCIpKSB7CiAgICAgICAg
IHBvcnQgPSByLT5jb25uZWN0aW9uLT5sb2NhbF9hZGRyLT5wb3J0OwogICAgIH0KICAgICBlbHNl
IHsKQEAgLTgzMCwxMCArODMwLDEwIEBAIHN0YXRpYyBjb25zdCBjaGFyICpsb2dfc2VydmVyX25h
bWUocmVxdWVzdF9yZWMgKnIsCiAKIHN0YXRpYyBjb25zdCBjaGFyICpsb2dfcGlkX3RpZChyZXF1
ZXN0X3JlYyAqciwgY2hhciAqYSkKIHsKLSAgICBpZiAoKmEgPT0gJ1wwJyB8fCAhc3RyY2FzZWNt
cChhLCAicGlkIikpIHsKKyAgICBpZiAoKmEgPT0gJ1wwJyB8fCAhYXBfY2FzZWNtcHN0cihhLCAi
cGlkIikpIHsKICAgICAgICAgcmV0dXJuIGFwX2FwcGVuZF9waWQoci0+cG9vbCwgIiIsICIiKTsK
ICAgICB9Ci0gICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAoYSwgInRpZCIpIHx8ICFzdHJjYXNlY21w
KGEsICJoZXh0aWQiKSkgeworICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGEsICJ0aWQiKSB8
fCAhYXBfY2FzZWNtcHN0cihhLCAiaGV4dGlkIikpIHsKICNpZiBBUFJfSEFTX1RIUkVBRFMKICAg
ICAgICAgYXByX29zX3RocmVhZF90IHRpZCA9IGFwcl9vc190aHJlYWRfY3VycmVudCgpOwogI2Vs
c2UKQEAgLTEzMDAsNyArMTMwMCw3IEBAIHN0YXRpYyBjb25zdCBjaGFyICphZGRfY3VzdG9tX2xv
ZyhjbWRfcGFybXMgKmNtZCwKICAgICBjbHMtPmNvbmRpdGlvbl92YXIgPSBOVUxMOwogICAgIGNs
cy0+Y29uZGl0aW9uX2V4cHIgPSBOVUxMOwogICAgIGlmIChlbnZjbGF1c2UgIT0gTlVMTCkgewot
ICAgICAgICBpZiAoc3RybmNhc2VjbXAoZW52Y2xhdXNlLCAiZW52PSIsIDQpID09IDApIHsKKyAg
ICAgICAgaWYgKGFwX2Nhc2VjbXBzdHJuKGVudmNsYXVzZSwgImVudj0iLCA0KSA9PSAwKSB7CiAg
ICAgICAgICAgICBpZiAoKGVudmNsYXVzZVs0XSA9PSAnXDAnKQogICAgICAgICAgICAgICAgIHx8
ICgoZW52Y2xhdXNlWzRdID09ICchJykgJiYgKGVudmNsYXVzZVs1XSA9PSAnXDAnKSkpIHsKICAg
ICAgICAgICAgICAgICByZXR1cm4gIm1pc3NpbmcgZW52aXJvbm1lbnQgdmFyaWFibGUgbmFtZSI7
CkBAIC0xMzA3LDcgKzEzMDcsNyBAQCBzdGF0aWMgY29uc3QgY2hhciAqYWRkX2N1c3RvbV9sb2co
Y21kX3Bhcm1zICpjbWQsCiAgICAgICAgICAgICB9CiAgICAgICAgICAgICBjbHMtPmNvbmRpdGlv
bl92YXIgPSBhcHJfcHN0cmR1cChjbWQtPnBvb2wsICZlbnZjbGF1c2VbNF0pOwogICAgICAgICB9
Ci0gICAgICAgIGVsc2UgaWYgKHN0cm5jYXNlY21wKGVudmNsYXVzZSwgImV4cHI9IiwgNSkgPT0g
MCkgeworICAgICAgICBlbHNlIGlmIChhcF9jYXNlY21wc3RybihlbnZjbGF1c2UsICJleHByPSIs
IDUpID09IDApIHsKICAgICAgICAgICAgIGNvbnN0IGNoYXIgKmVycjsKICAgICAgICAgICAgIGlm
ICgoZW52Y2xhdXNlWzVdID09ICdcMCcpKQogICAgICAgICAgICAgICAgIHJldHVybiAibWlzc2lu
ZyBjb25kaXRpb24iOwpJbmRleDogbW9kdWxlcy9tYXBwZXJzL21vZF9uZWdvdGlhdGlvbi5jCj09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT0KLS0tIG1vZHVsZXMvbWFwcGVycy9tb2RfbmVnb3RpYXRpb24uYwkocmV2aXNpb24g
MTcxNjE4OSkKKysrIG1vZHVsZXMvbWFwcGVycy9tb2RfbmVnb3RpYXRpb24uYwkod29ya2luZyBj
b3B5KQpAQCAtNzc0LDcgKzc3NCw3IEBAIHN0YXRpYyBlbnVtIGhlYWRlcl9zdGF0ZSBnZXRfaGVh
ZGVyX2xpbmUoY2hhciAqYnVmCiAgICAgLyogV2UgbmVlZCB0byBzaG9ydGN1dCB0aGUgcmVzdCBv
ZiB0aGlzIGJsb2NrIGZvbGxvd2luZyB0aGUgQm9keToKICAgICAgKiB0YWcgLSB3ZSB3aWxsIG5v
dCBsb29rIGZvciBjb250aW51dGF0aW9uIGFmdGVyIHRoaXMgbGluZS4KICAgICAgKi8KLSAgICBp
ZiAoIXN0cm5jYXNlY21wKGJ1ZmZlciwgIkJvZHk6IiwgNSkpCisgICAgaWYgKCFhcF9jYXNlY21w
c3RybihidWZmZXIsICJCb2R5OiIsIDUpKQogICAgICAgICByZXR1cm4gaGVhZGVyX3NlZW47CiAK
ICAgICB3aGlsZSAoYXByX2ZpbGVfZ2V0YygmYywgbWFwKSAhPSBBUFJfRU9GKSB7CkluZGV4OiBt
b2R1bGVzL21hcHBlcnMvbW9kX3Jld3JpdGUuYwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tLSBtb2R1bGVzL21hcHBl
cnMvbW9kX3Jld3JpdGUuYwkocmV2aXNpb24gMTcxNjE4OSkKKysrIG1vZHVsZXMvbWFwcGVycy9t
b2RfcmV3cml0ZS5jCSh3b3JraW5nIGNvcHkpCkBAIC01MTcsNyArNTE3LDcgQEAgc3RhdGljIHVu
c2lnbmVkIGlzX2Fic29sdXRlX3VyaShjaGFyICp1cmksIGludCAqc3UKICAgICBzd2l0Y2ggKCp1
cmkrKykgewogICAgIGNhc2UgJ2EnOgogICAgIGNhc2UgJ0EnOgotICAgICAgICBpZiAoIXN0cm5j
YXNlY21wKHVyaSwgImpwOi8vIiwgNSkpIHsgICAgICAgIC8qIGFqcDovLyAgICAqLworICAgICAg
ICBpZiAoIWFwX2Nhc2VjbXBzdHJuKHVyaSwgImpwOi8vIiwgNSkpIHsgICAgICAgIC8qIGFqcDov
LyAgICAqLwogICAgICAgICAgICpzcXMgPSAxOwogICAgICAgICAgIHJldHVybiA2OwogICAgICAg
ICB9CkBAIC01MjUsNyArNTI1LDcgQEAgc3RhdGljIHVuc2lnbmVkIGlzX2Fic29sdXRlX3VyaShj
aGFyICp1cmksIGludCAqc3UKIAogICAgIGNhc2UgJ2InOgogICAgIGNhc2UgJ0InOgotICAgICAg
ICBpZiAoIXN0cm5jYXNlY21wKHVyaSwgImFsYW5jZXI6Ly8iLCAxMCkpIHsgICAvKiBiYWxhbmNl
cjovLyAqLworICAgICAgICBpZiAoIWFwX2Nhc2VjbXBzdHJuKHVyaSwgImFsYW5jZXI6Ly8iLCAx
MCkpIHsgICAvKiBiYWxhbmNlcjovLyAqLwogICAgICAgICAgICpzcXMgPSAxOwogICAgICAgICAg
IHJldHVybiAxMTsKICAgICAgICAgfQpAQCAtNTMzLDEwICs1MzMsMTAgQEAgc3RhdGljIHVuc2ln
bmVkIGlzX2Fic29sdXRlX3VyaShjaGFyICp1cmksIGludCAqc3UKIAogICAgIGNhc2UgJ2YnOgog
ICAgIGNhc2UgJ0YnOgotICAgICAgICBpZiAoIXN0cm5jYXNlY21wKHVyaSwgInRwOi8vIiwgNSkp
IHsgICAgICAgIC8qIGZ0cDovLyAgICAqLworICAgICAgICBpZiAoIWFwX2Nhc2VjbXBzdHJuKHVy
aSwgInRwOi8vIiwgNSkpIHsgICAgICAgIC8qIGZ0cDovLyAgICAqLwogICAgICAgICAgICAgcmV0
dXJuIDY7CiAgICAgICAgIH0KLSAgICAgICAgaWYgKCFzdHJuY2FzZWNtcCh1cmksICJjZ2k6Ly8i
LCA2KSkgeyAgICAgICAvKiBmY2dpOi8vICAgKi8KKyAgICAgICAgaWYgKCFhcF9jYXNlY21wc3Ry
bih1cmksICJjZ2k6Ly8iLCA2KSkgeyAgICAgICAvKiBmY2dpOi8vICAgKi8KICAgICAgICAgICAg
ICpzcXMgPSAxOwogICAgICAgICAgICAgcmV0dXJuIDc7CiAgICAgICAgIH0KQEAgLTU0NCw3ICs1
NDQsNyBAQCBzdGF0aWMgdW5zaWduZWQgaXNfYWJzb2x1dGVfdXJpKGNoYXIgKnVyaSwgaW50ICpz
dQogCiAgICAgY2FzZSAnZyc6CiAgICAgY2FzZSAnRyc6Ci0gICAgICAgIGlmICghc3RybmNhc2Vj
bXAodXJpLCAib3BoZXI6Ly8iLCA4KSkgeyAgICAgLyogZ29waGVyOi8vICovCisgICAgICAgIGlm
ICghYXBfY2FzZWNtcHN0cm4odXJpLCAib3BoZXI6Ly8iLCA4KSkgeyAgICAgLyogZ29waGVyOi8v
ICovCiAgICAgICAgICAgICByZXR1cm4gOTsKICAgICAgICAgfQogICAgICAgICBicmVhazsKQEAg
LTU1MSwxMSArNTUxLDExIEBAIHN0YXRpYyB1bnNpZ25lZCBpc19hYnNvbHV0ZV91cmkoY2hhciAq
dXJpLCBpbnQgKnN1CiAKICAgICBjYXNlICdoJzoKICAgICBjYXNlICdIJzoKLSAgICAgICAgaWYg
KCFzdHJuY2FzZWNtcCh1cmksICJ0dHA6Ly8iLCA2KSkgeyAgICAgICAvKiBodHRwOi8vICAgKi8K
KyAgICAgICAgaWYgKCFhcF9jYXNlY21wc3Rybih1cmksICJ0dHA6Ly8iLCA2KSkgeyAgICAgICAv
KiBodHRwOi8vICAgKi8KICAgICAgICAgICAgICpzcXMgPSAxOwogICAgICAgICAgICAgcmV0dXJu
IDc7CiAgICAgICAgIH0KLSAgICAgICAgZWxzZSBpZiAoIXN0cm5jYXNlY21wKHVyaSwgInR0cHM6
Ly8iLCA3KSkgeyAvKiBodHRwczovLyAgKi8KKyAgICAgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBz
dHJuKHVyaSwgInR0cHM6Ly8iLCA3KSkgeyAvKiBodHRwczovLyAgKi8KICAgICAgICAgICAgICpz
cXMgPSAxOwogICAgICAgICAgICAgcmV0dXJuIDg7CiAgICAgICAgIH0KQEAgLTU2Myw3ICs1NjMs
NyBAQCBzdGF0aWMgdW5zaWduZWQgaXNfYWJzb2x1dGVfdXJpKGNoYXIgKnVyaSwgaW50ICpzdQog
CiAgICAgY2FzZSAnbCc6CiAgICAgY2FzZSAnTCc6Ci0gICAgICAgIGlmICghc3RybmNhc2VjbXAo
dXJpLCAiZGFwOi8vIiwgNikpIHsgICAgICAgLyogbGRhcDovLyAgICovCisgICAgICAgIGlmICgh
YXBfY2FzZWNtcHN0cm4odXJpLCAiZGFwOi8vIiwgNikpIHsgICAgICAgLyogbGRhcDovLyAgICov
CiAgICAgICAgICAgICByZXR1cm4gNzsKICAgICAgICAgfQogICAgICAgICBicmVhazsKQEAgLTU3
MCw3ICs1NzAsNyBAQCBzdGF0aWMgdW5zaWduZWQgaXNfYWJzb2x1dGVfdXJpKGNoYXIgKnVyaSwg
aW50ICpzdQogCiAgICAgY2FzZSAnbSc6CiAgICAgY2FzZSAnTSc6Ci0gICAgICAgIGlmICghc3Ry
bmNhc2VjbXAodXJpLCAiYWlsdG86IiwgNikpIHsgICAgICAgLyogbWFpbHRvOiAgICovCisgICAg
ICAgIGlmICghYXBfY2FzZWNtcHN0cm4odXJpLCAiYWlsdG86IiwgNikpIHsgICAgICAgLyogbWFp
bHRvOiAgICovCiAgICAgICAgICAgICAqc3FzID0gMTsKICAgICAgICAgICAgIHJldHVybiA3Owog
ICAgICAgICB9CkBAIC01NzgsMTAgKzU3OCwxMCBAQCBzdGF0aWMgdW5zaWduZWQgaXNfYWJzb2x1
dGVfdXJpKGNoYXIgKnVyaSwgaW50ICpzdQogCiAgICAgY2FzZSAnbic6CiAgICAgY2FzZSAnTic6
Ci0gICAgICAgIGlmICghc3RybmNhc2VjbXAodXJpLCAiZXdzOiIsIDQpKSB7ICAgICAgICAgLyog
bmV3czogICAgICovCisgICAgICAgIGlmICghYXBfY2FzZWNtcHN0cm4odXJpLCAiZXdzOiIsIDQp
KSB7ICAgICAgICAgLyogbmV3czogICAgICovCiAgICAgICAgICAgICByZXR1cm4gNTsKICAgICAg
ICAgfQotICAgICAgICBlbHNlIGlmICghc3RybmNhc2VjbXAodXJpLCAibnRwOi8vIiwgNikpIHsg
IC8qIG5udHA6Ly8gICAqLworICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cm4odXJpLCAi
bnRwOi8vIiwgNikpIHsgIC8qIG5udHA6Ly8gICAqLwogICAgICAgICAgICAgcmV0dXJuIDc7CiAg
ICAgICAgIH0KICAgICAgICAgYnJlYWs7CkBAIC01ODgsNyArNTg4LDcgQEAgc3RhdGljIHVuc2ln
bmVkIGlzX2Fic29sdXRlX3VyaShjaGFyICp1cmksIGludCAqc3UKIAogICAgIGNhc2UgJ3MnOgog
ICAgIGNhc2UgJ1MnOgotICAgICAgICBpZiAoIXN0cm5jYXNlY21wKHVyaSwgImNnaTovLyIsIDYp
KSB7ICAgICAgIC8qIHNjZ2k6Ly8gICAqLworICAgICAgICBpZiAoIWFwX2Nhc2VjbXBzdHJuKHVy
aSwgImNnaTovLyIsIDYpKSB7ICAgICAgIC8qIHNjZ2k6Ly8gICAqLwogICAgICAgICAgICAgKnNx
cyA9IDE7CiAgICAgICAgICAgICByZXR1cm4gNzsKICAgICAgICAgfQpAQCAtNTk2LDExICs1OTYs
MTEgQEAgc3RhdGljIHVuc2lnbmVkIGlzX2Fic29sdXRlX3VyaShjaGFyICp1cmksIGludCAqc3UK
IAogICAgIGNhc2UgJ3cnOgogICAgIGNhc2UgJ1cnOgotICAgICAgICBpZiAoIXN0cm5jYXNlY21w
KHVyaSwgInM6Ly8iLCA0KSkgeyAgICAgICAgLyogd3M6Ly8gICAgICovCisgICAgICAgIGlmICgh
YXBfY2FzZWNtcHN0cm4odXJpLCAiczovLyIsIDQpKSB7ICAgICAgICAvKiB3czovLyAgICAgKi8K
ICAgICAgICAgICAgICpzcXMgPSAxOwogICAgICAgICAgICAgcmV0dXJuIDU7CiAgICAgICAgIH0K
LSAgICAgICAgZWxzZSBpZiAoIXN0cm5jYXNlY21wKHVyaSwgInNzOi8vIiwgNSkpIHsgIC8qIHdz
czovLyAgICAqLworICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cm4odXJpLCAic3M6Ly8i
LCA1KSkgeyAgLyogd3NzOi8vICAgICovCiAgICAgICAgICAgICAqc3FzID0gMTsKICAgICAgICAg
ICAgIHJldHVybiA2OwogICAgICAgICB9CkBAIC02ODgsNyArNjg4LDcgQEAgc3RhdGljIGNoYXIg
KmVzY2FwZV9hYnNvbHV0ZV91cmkoYXByX3Bvb2xfdCAqcCwgY2gKICAgICAgICAgICogICAgICAg
ICAgICAgICBbZG4gWyI/IiBbYXR0cmlidXRlc10gWyI/IiBbc2NvcGVdCiAgICAgICAgICAqICAg
ICAgICAgICAgICAgWyI/IiBbZmlsdGVyXSBbIj8iIGV4dGVuc2lvbnNdXV1dXV0KICAgICAgICAg
ICovCi0gICAgICAgIGlmICghc3RybmNhc2VjbXAodXJpLCAibGRhcCIsIDQpKSB7CisgICAgICAg
IGlmICghYXBfY2FzZWNtcHN0cm4odXJpLCAibGRhcCIsIDQpKSB7CiAgICAgICAgICAgICBjaGFy
ICp0b2tlbls1XTsKICAgICAgICAgICAgIGludCBjID0gMDsKIApAQCAtNzgzLDcgKzc4Myw3IEBA
IHN0YXRpYyB2b2lkIHJlZHVjZV91cmkocmVxdWVzdF9yZWMgKnIpCiAgICAgY3AgPSAoY2hhciAq
KWFwX2h0dHBfc2NoZW1lKHIpOwogICAgIGwgID0gc3RybGVuKGNwKTsKICAgICBpZiAoICAgc3Ry
bGVuKHItPmZpbGVuYW1lKSA+IGwrMwotICAgICAgICAmJiBzdHJuY2FzZWNtcChyLT5maWxlbmFt
ZSwgY3AsIGwpID09IDAKKyAgICAgICAgJiYgYXBfY2FzZWNtcHN0cm4oci0+ZmlsZW5hbWUsIGNw
LCBsKSA9PSAwCiAgICAgICAgICYmIHItPmZpbGVuYW1lW2xdICAgPT0gJzonCiAgICAgICAgICYm
IHItPmZpbGVuYW1lW2wrMV0gPT0gJy8nCiAgICAgICAgICYmIHItPmZpbGVuYW1lW2wrMl0gPT0g
Jy8nICkgewpAQCAtMTU0NCw3ICsxNTQ0LDcgQEAgc3RhdGljIGNoYXIgKmxvb2t1cF9tYXBfcHJv
Z3JhbShyZXF1ZXN0X3JlYyAqciwgYXAKICAgICB9CiAKICAgICAvKiBjYXRjaCB0aGUgImZhaWxl
ZCIgY2FzZSAqLwotICAgIGlmIChpID09IDQgJiYgIXN0cmNhc2VjbXAoYnVmLCAiTlVMTCIpKSB7
CisgICAgaWYgKGkgPT0gNCAmJiAhYXBfY2FzZWNtcHN0cihidWYsICJOVUxMIikpIHsKICAgICAg
ICAgcmV0dXJuIE5VTEw7CiAgICAgfQogCkBAIC0xNzk3LDcgKzE3OTcsNyBAQCBzdGF0aWMgY2hh
ciAqbG9va3VwX3ZhcmlhYmxlKGNoYXIgKnZhciwgcmV3cml0ZV9jdAogCiAgICAgLyogZmFzdCB0
ZXN0cyBmb3IgdmFyaWFibGUgbGVuZ3RoIHZhcmlhYmxlcyAoc2ljKSBmaXJzdCAqLwogICAgIGlm
ICh2YXJbM10gPT0gJzonKSB7Ci0gICAgICAgIGlmICh2YXJbNF0gJiYgIXN0cm5jYXNlY21wKHZh
ciwgIkVOViIsIDMpKSB7CisgICAgICAgIGlmICh2YXJbNF0gJiYgIWFwX2Nhc2VjbXBzdHJuKHZh
ciwgIkVOViIsIDMpKSB7CiAgICAgICAgICAgICB2YXIgKz0gNDsKICAgICAgICAgICAgIHJlc3Vs
dCA9IGFwcl90YWJsZV9nZXQoci0+bm90ZXMsIHZhcik7CiAKQEAgLTE4MDgsNyArMTgwOCw3IEBA
IHN0YXRpYyBjaGFyICpsb29rdXBfdmFyaWFibGUoY2hhciAqdmFyLCByZXdyaXRlX2N0CiAgICAg
ICAgICAgICAgICAgcmVzdWx0ID0gZ2V0ZW52KHZhcik7CiAgICAgICAgICAgICB9CiAgICAgICAg
IH0KLSAgICAgICAgZWxzZSBpZiAodmFyWzRdICYmICFzdHJuY2FzZWNtcCh2YXIsICJTU0wiLCAz
KSAmJiByZXdyaXRlX3NzbF9sb29rdXApIHsKKyAgICAgICAgZWxzZSBpZiAodmFyWzRdICYmICFh
cF9jYXNlY21wc3Rybih2YXIsICJTU0wiLCAzKSAmJiByZXdyaXRlX3NzbF9sb29rdXApIHsKICAg
ICAgICAgICAgIHJlc3VsdCA9IHJld3JpdGVfc3NsX2xvb2t1cChyLT5wb29sLCByLT5zZXJ2ZXIs
IHItPmNvbm5lY3Rpb24sIHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgdmFyICsgNCk7CiAgICAgICAgIH0KQEAgLTE4MTgsMTAgKzE4MTgsMTAgQEAgc3RhdGljIGNo
YXIgKmxvb2t1cF92YXJpYWJsZShjaGFyICp2YXIsIHJld3JpdGVfY3QKICAgICAgICAgICAgIHJl
cXVlc3RfcmVjICpycjsKICAgICAgICAgICAgIGNvbnN0IGNoYXIgKnBhdGg7CiAKLSAgICAgICAg
ICAgIGlmICghc3RybmNhc2VjbXAodmFyLCAiSFRUUCIsIDQpKSB7CisgICAgICAgICAgICBpZiAo
IWFwX2Nhc2VjbXBzdHJuKHZhciwgIkhUVFAiLCA0KSkgewogICAgICAgICAgICAgICAgIHJlc3Vs
dCA9IGxvb2t1cF9oZWFkZXIodmFyKzUsIGN0eCk7CiAgICAgICAgICAgICB9Ci0gICAgICAgICAg
ICBlbHNlIGlmICghc3RybmNhc2VjbXAodmFyLCAiTEEtVSIsIDQpKSB7CisgICAgICAgICAgICBl
bHNlIGlmICghYXBfY2FzZWNtcHN0cm4odmFyLCAiTEEtVSIsIDQpKSB7CiAgICAgICAgICAgICAg
ICAgaWYgKGN0eC0+dXJpICYmIHN1YnJlcV9vayhyKSkgewogICAgICAgICAgICAgICAgICAgICBw
YXRoID0gY3R4LT5wZXJkaXIgPyBsYV91KGN0eCkgOiBjdHgtPnVyaTsKICAgICAgICAgICAgICAg
ICAgICAgcnIgPSBhcF9zdWJfcmVxX2xvb2t1cF91cmkocGF0aCwgciwgTlVMTCk7CkBAIC0xODM2
LDcgKzE4MzYsNyBAQCBzdGF0aWMgY2hhciAqbG9va3VwX3ZhcmlhYmxlKGNoYXIgKnZhciwgcmV3
cml0ZV9jdAogICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGNoYXIgKilyZXN1bHQ7CiAgICAg
ICAgICAgICAgICAgfQogICAgICAgICAgICAgfQotICAgICAgICAgICAgZWxzZSBpZiAoIXN0cm5j
YXNlY21wKHZhciwgIkxBLUYiLCA0KSkgeworICAgICAgICAgICAgZWxzZSBpZiAoIWFwX2Nhc2Vj
bXBzdHJuKHZhciwgIkxBLUYiLCA0KSkgewogICAgICAgICAgICAgICAgIGlmIChjdHgtPnVyaSAm
JiBzdWJyZXFfb2socikpIHsKICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IGN0eC0+dXJpOwog
ICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LT5wZXJkaXIgJiYgKnBhdGggPT0gJy8nKSB7CkBA
IC0yNTQzLDE0ICsyNTQzLDE0IEBAIHN0YXRpYyB2b2lkIGFkZF9jb29raWUocmVxdWVzdF9yZWMg
KnIsIGNoYXIgKnMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IE5VTEwsCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVzID8gKGV4cF90aW1lID8gZXhw
X3RpbWUgOiAiIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogTlVMTCwKLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzZWN1cmUgJiYgKCFzdHJjYXNlY21wKHNl
Y3VyZSwgInRydWUiKQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHNlY3VyZSAm
JiAoIWFwX2Nhc2VjbXBzdHIoc2VjdXJlLCAidHJ1ZSIpCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICB8fCAhc3RyY21wKHNlY3VyZSwgIjEiKQotICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgIXN0cmNhc2VjbXAoc2VjdXJl
LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgIWFwX2Nh
c2VjbXBzdHIoc2VjdXJlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgInNlY3VyZSIpKSkgPwogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICI7IHNlY3VyZSIgOiBOVUxMLAotICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgKGh0dHBvbmx5ICYmICghc3RyY2FzZWNtcChodHRwb25seSwgInRydWUiKQorICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGh0dHBvbmx5ICYmICghYXBfY2FzZWNtcHN0
cihodHRwb25seSwgInRydWUiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB8fCAhc3RyY21wKGh0dHBvbmx5LCAiMSIpCi0gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICFzdHJjYXNlY21wKGh0dHBvbmx5LAorICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAhYXBfY2FzZWNt
cHN0cihodHRwb25seSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIkh0dHBPbmx5IikpKSA/CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIjsgSHR0cE9ubHkiIDogTlVMTCwKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIE5VTEwpOwpAQCAtMzQyOCw3ICszNDI4LDcgQEAgc3RhdGljIGNvbnN0IGNo
YXIgKmNtZF9yZXdyaXRlcnVsZV9zZXRmbGFnKGFwcl9wb28KICAgICBzd2l0Y2ggKCprZXkrKykg
ewogICAgIGNhc2UgJ2InOgogICAgIGNhc2UgJ0InOgotICAgICAgICBpZiAoISprZXkgfHwgIXN0
cmNhc2VjbXAoa2V5LCAiYWNrcmVmZXNjYXBpbmciKSkgeworICAgICAgICBpZiAoISprZXkgfHwg
IWFwX2Nhc2VjbXBzdHIoa2V5LCAiYWNrcmVmZXNjYXBpbmciKSkgewogICAgICAgICAgICAgY2Zn
LT5mbGFncyB8PSBSVUxFRkxBR19FU0NBUEVCQUNLUkVGOwogICAgICAgICB9CiAgICAgICAgIGVs
c2UgewpAQCAtMzQzNywxMSArMzQzNywxMSBAQCBzdGF0aWMgY29uc3QgY2hhciAqY21kX3Jld3Jp
dGVydWxlX3NldGZsYWcoYXByX3BvbwogICAgICAgICBicmVhazsKICAgICBjYXNlICdjJzoKICAg
ICBjYXNlICdDJzoKLSAgICAgICAgaWYgKCEqa2V5IHx8ICFzdHJjYXNlY21wKGtleSwgImhhaW4i
KSkgeyAgICAgICAgICAgLyogY2hhaW4gKi8KKyAgICAgICAgaWYgKCEqa2V5IHx8ICFhcF9jYXNl
Y21wc3RyKGtleSwgImhhaW4iKSkgeyAgICAgICAgICAgLyogY2hhaW4gKi8KICAgICAgICAgICAg
IGNmZy0+ZmxhZ3MgfD0gUlVMRUZMQUdfQ0hBSU47CiAgICAgICAgIH0KICAgICAgICAgZWxzZSBp
ZiAoKCgqa2V5ID09ICdPJyB8fCAqa2V5ID09ICdvJykgJiYgIWtleVsxXSkKLSAgICAgICAgICAg
ICAgICAgfHwgIXN0cmNhc2VjbXAoa2V5LCAib29raWUiKSkgeyAgICAgICAgICAgLyogY29va2ll
ICovCisgICAgICAgICAgICAgICAgIHx8ICFhcF9jYXNlY21wc3RyKGtleSwgIm9va2llIikpIHsg
ICAgICAgICAgIC8qIGNvb2tpZSAqLwogICAgICAgICAgICAgZGF0YV9pdGVtICpjcCA9IGNmZy0+
Y29va2llOwogCiAgICAgICAgICAgICBpZiAoIWNwKSB7CkBAIC0zNDY0LDEzICszNDY0LDEzIEBA
IHN0YXRpYyBjb25zdCBjaGFyICpjbWRfcmV3cml0ZXJ1bGVfc2V0ZmxhZyhhcHJfcG9vCiAgICAg
ICAgIGJyZWFrOwogICAgIGNhc2UgJ2QnOgogICAgIGNhc2UgJ0QnOgotICAgICAgICBpZiAoISpr
ZXkgfHwgIXN0cmNhc2VjbXAoa2V5LCAiUEkiKSB8fCAhc3RyY2FzZWNtcChrZXksImlzY2FyZHBh
dGgiKSkgeworICAgICAgICBpZiAoISprZXkgfHwgIWFwX2Nhc2VjbXBzdHIoa2V5LCAiUEkiKSB8
fCAhYXBfY2FzZWNtcHN0cihrZXksImlzY2FyZHBhdGgiKSkgewogICAgICAgICAgICAgY2ZnLT5m
bGFncyB8PSAoUlVMRUZMQUdfRElTQ0FSRFBBVEhJTkZPKTsKICAgICAgICAgfQogICAgICAgICBi
cmVhazsKICAgICBjYXNlICdlJzoKICAgICBjYXNlICdFJzoKLSAgICAgICAgaWYgKCEqa2V5IHx8
ICFzdHJjYXNlY21wKGtleSwgIm52IikpIHsgICAgICAgICAgICAgLyogZW52ICovCisgICAgICAg
IGlmICghKmtleSB8fCAhYXBfY2FzZWNtcHN0cihrZXksICJudiIpKSB7ICAgICAgICAgICAgIC8q
IGVudiAqLwogICAgICAgICAgICAgZGF0YV9pdGVtICpjcCA9IGNmZy0+ZW52OwogCiAgICAgICAg
ICAgICBpZiAoIWNwKSB7CkBAIC0zNDg3LDcgKzM0ODcsNyBAQCBzdGF0aWMgY29uc3QgY2hhciAq
Y21kX3Jld3JpdGVydWxlX3NldGZsYWcoYXByX3BvbwogICAgICAgICAgICAgY3AtPm5leHQgPSBO
VUxMOwogICAgICAgICAgICAgY3AtPmRhdGEgPSB2YWw7CiAgICAgICAgIH0KLSAgICAgICAgZWxz
ZSBpZiAoIXN0cmNhc2VjbXAoa2V5LCAibmQiKSkgeyAgICAgICAgICAgICAgICAvKiBlbmQgKi8K
KyAgICAgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAibmQiKSkgeyAgICAgICAgICAg
ICAgICAvKiBlbmQgKi8KICAgICAgICAgICAgIGNmZy0+ZmxhZ3MgfD0gUlVMRUZMQUdfRU5EOwog
ICAgICAgICB9CiAgICAgICAgIGVsc2UgewpAQCAtMzQ5Nyw3ICszNDk3LDcgQEAgc3RhdGljIGNv
bnN0IGNoYXIgKmNtZF9yZXdyaXRlcnVsZV9zZXRmbGFnKGFwcl9wb28KIAogICAgIGNhc2UgJ2Yn
OgogICAgIGNhc2UgJ0YnOgotICAgICAgICBpZiAoISprZXkgfHwgIXN0cmNhc2VjbXAoa2V5LCAi
b3JiaWRkZW4iKSkgeyAgICAgICAvKiBmb3JiaWRkZW4gKi8KKyAgICAgICAgaWYgKCEqa2V5IHx8
ICFhcF9jYXNlY21wc3RyKGtleSwgIm9yYmlkZGVuIikpIHsgICAgICAgLyogZm9yYmlkZGVuICov
CiAgICAgICAgICAgICBjZmctPmZsYWdzIHw9IChSVUxFRkxBR19TVEFUVVMgfCBSVUxFRkxBR19O
T1NVQik7CiAgICAgICAgICAgICBjZmctPmZvcmNlZF9yZXNwb25zZWNvZGUgPSBIVFRQX0ZPUkJJ
RERFTjsKICAgICAgICAgfQpAQCAtMzUwOCw3ICszNTA4LDcgQEAgc3RhdGljIGNvbnN0IGNoYXIg
KmNtZF9yZXdyaXRlcnVsZV9zZXRmbGFnKGFwcl9wb28KIAogICAgIGNhc2UgJ2cnOgogICAgIGNh
c2UgJ0cnOgotICAgICAgICBpZiAoISprZXkgfHwgIXN0cmNhc2VjbXAoa2V5LCAib25lIikpIHsg
ICAgICAgICAgICAvKiBnb25lICovCisgICAgICAgIGlmICghKmtleSB8fCAhYXBfY2FzZWNtcHN0
cihrZXksICJvbmUiKSkgeyAgICAgICAgICAgIC8qIGdvbmUgKi8KICAgICAgICAgICAgIGNmZy0+
ZmxhZ3MgfD0gKFJVTEVGTEFHX1NUQVRVUyB8IFJVTEVGTEFHX05PU1VCKTsKICAgICAgICAgICAg
IGNmZy0+Zm9yY2VkX3Jlc3BvbnNlY29kZSA9IEhUVFBfR09ORTsKICAgICAgICAgfQpAQCAtMzUx
OSw3ICszNTE5LDcgQEAgc3RhdGljIGNvbnN0IGNoYXIgKmNtZF9yZXdyaXRlcnVsZV9zZXRmbGFn
KGFwcl9wb28KIAogICAgIGNhc2UgJ2gnOgogICAgIGNhc2UgJ0gnOgotICAgICAgICBpZiAoISpr
ZXkgfHwgIXN0cmNhc2VjbXAoa2V5LCAiYW5kbGVyIikpIHsgICAgICAgICAvKiBoYW5kbGVyICov
CisgICAgICAgIGlmICghKmtleSB8fCAhYXBfY2FzZWNtcHN0cihrZXksICJhbmRsZXIiKSkgeyAg
ICAgICAgIC8qIGhhbmRsZXIgKi8KICAgICAgICAgICAgIGNmZy0+Zm9yY2VkX2hhbmRsZXIgPSB2
YWw7CiAgICAgICAgIH0KICAgICAgICAgZWxzZSB7CkBAIC0zNTI4LDcgKzM1MjgsNyBAQCBzdGF0
aWMgY29uc3QgY2hhciAqY21kX3Jld3JpdGVydWxlX3NldGZsYWcoYXByX3BvbwogICAgICAgICBi
cmVhazsKICAgICBjYXNlICdsJzoKICAgICBjYXNlICdMJzoKLSAgICAgICAgaWYgKCEqa2V5IHx8
ICFzdHJjYXNlY21wKGtleSwgImFzdCIpKSB7ICAgICAgICAgICAgLyogbGFzdCAqLworICAgICAg
ICBpZiAoISprZXkgfHwgIWFwX2Nhc2VjbXBzdHIoa2V5LCAiYXN0IikpIHsgICAgICAgICAgICAv
KiBsYXN0ICovCiAgICAgICAgICAgICBjZmctPmZsYWdzIHw9IFJVTEVGTEFHX0xBU1RSVUxFOwog
ICAgICAgICB9CiAgICAgICAgIGVsc2UgewpAQCAtMzUzOSwxMCArMzUzOSwxMCBAQCBzdGF0aWMg
Y29uc3QgY2hhciAqY21kX3Jld3JpdGVydWxlX3NldGZsYWcoYXByX3BvbwogICAgIGNhc2UgJ24n
OgogICAgIGNhc2UgJ04nOgogICAgICAgICBpZiAoKCgqa2V5ID09ICdFJyB8fCAqa2V5ID09ICdl
JykgJiYgIWtleVsxXSkKLSAgICAgICAgICAgIHx8ICFzdHJjYXNlY21wKGtleSwgIm9lc2NhcGUi
KSkgeyAgICAgICAgICAgICAgLyogbm9lc2NhcGUgKi8KKyAgICAgICAgICAgIHx8ICFhcF9jYXNl
Y21wc3RyKGtleSwgIm9lc2NhcGUiKSkgeyAgICAgICAgICAgICAgLyogbm9lc2NhcGUgKi8KICAg
ICAgICAgICAgIGNmZy0+ZmxhZ3MgfD0gUlVMRUZMQUdfTk9FU0NBUEU7CiAgICAgICAgIH0KLSAg
ICAgICAgZWxzZSBpZiAoISprZXkgfHwgIXN0cmNhc2VjbXAoa2V5LCAiZXh0IikpIHsgICAgICAg
LyogbmV4dCAqLworICAgICAgICBlbHNlIGlmICghKmtleSB8fCAhYXBfY2FzZWNtcHN0cihrZXks
ICJleHQiKSkgeyAgICAgICAvKiBuZXh0ICovCiAgICAgICAgICAgICBjZmctPmZsYWdzIHw9IFJV
TEVGTEFHX05FV1JPVU5EOwogICAgICAgICAgICAgaWYgKHZhbCAmJiAqdmFsKSB7IAogICAgICAg
ICAgICAgICAgIGNmZy0+bWF4cm91bmRzID0gYXRvaSh2YWwpOwpAQCAtMzU1MCwxMSArMzU1MCwx
MSBAQCBzdGF0aWMgY29uc3QgY2hhciAqY21kX3Jld3JpdGVydWxlX3NldGZsYWcoYXByX3Bvbwog
CiAgICAgICAgIH0KICAgICAgICAgZWxzZSBpZiAoKCgqa2V5ID09ICdTJyB8fCAqa2V5ID09ICdz
JykgJiYgIWtleVsxXSkKLSAgICAgICAgICAgIHx8ICFzdHJjYXNlY21wKGtleSwgIm9zdWJyZXEi
KSkgeyAgICAgICAgICAgICAgLyogbm9zdWJyZXEgKi8KKyAgICAgICAgICAgIHx8ICFhcF9jYXNl
Y21wc3RyKGtleSwgIm9zdWJyZXEiKSkgeyAgICAgICAgICAgICAgLyogbm9zdWJyZXEgKi8KICAg
ICAgICAgICAgIGNmZy0+ZmxhZ3MgfD0gUlVMRUZMQUdfSUdOT1JFT05TVUJSRVE7CiAgICAgICAg
IH0KICAgICAgICAgZWxzZSBpZiAoKCgqa2V5ID09ICdDJyB8fCAqa2V5ID09ICdjJykgJiYgIWtl
eVsxXSkKLSAgICAgICAgICAgIHx8ICFzdHJjYXNlY21wKGtleSwgIm9jYXNlIikpIHsgICAgICAg
ICAgICAgICAgLyogbm9jYXNlICovCisgICAgICAgICAgICB8fCAhYXBfY2FzZWNtcHN0cihrZXks
ICJvY2FzZSIpKSB7ICAgICAgICAgICAgICAgIC8qIG5vY2FzZSAqLwogICAgICAgICAgICAgY2Zn
LT5mbGFncyB8PSBSVUxFRkxBR19OT0NBU0U7CiAgICAgICAgIH0KICAgICAgICAgZWxzZSB7CkBA
IC0zNTY0LDExICszNTY0LDExIEBAIHN0YXRpYyBjb25zdCBjaGFyICpjbWRfcmV3cml0ZXJ1bGVf
c2V0ZmxhZyhhcHJfcG9vCiAKICAgICBjYXNlICdwJzoKICAgICBjYXNlICdQJzoKLSAgICAgICAg
aWYgKCEqa2V5IHx8ICFzdHJjYXNlY21wKGtleSwgInJveHkiKSkgeyAgICAgICAgICAgLyogcHJv
eHkgKi8KKyAgICAgICAgaWYgKCEqa2V5IHx8ICFhcF9jYXNlY21wc3RyKGtleSwgInJveHkiKSkg
eyAgICAgICAgICAgLyogcHJveHkgKi8KICAgICAgICAgICAgIGNmZy0+ZmxhZ3MgfD0gUlVMRUZM
QUdfUFJPWFk7CiAgICAgICAgIH0KICAgICAgICAgZWxzZSBpZiAoKCgqa2V5ID09ICdUJyB8fCAq
a2V5ID09ICd0JykgJiYgIWtleVsxXSkKLSAgICAgICAgICAgIHx8ICFzdHJjYXNlY21wKGtleSwg
ImFzc3Rocm91Z2giKSkgeyAgICAgICAgICAgLyogcGFzc3Rocm91Z2ggKi8KKyAgICAgICAgICAg
IHx8ICFhcF9jYXNlY21wc3RyKGtleSwgImFzc3Rocm91Z2giKSkgeyAgICAgICAgICAgLyogcGFz
c3Rocm91Z2ggKi8KICAgICAgICAgICAgIGNmZy0+ZmxhZ3MgfD0gUlVMRUZMQUdfUEFTU1RIUk9V
R0g7CiAgICAgICAgIH0KICAgICAgICAgZWxzZSB7CkBAIC0zNTc4LDExICszNTc4LDExIEBAIHN0
YXRpYyBjb25zdCBjaGFyICpjbWRfcmV3cml0ZXJ1bGVfc2V0ZmxhZyhhcHJfcG9vCiAKICAgICBj
YXNlICdxJzoKICAgICBjYXNlICdRJzoKLSAgICAgICAgaWYgKCAgICFzdHJjYXNlY21wKGtleSwg
IlNBIikKLSAgICAgICAgICAgIHx8ICFzdHJjYXNlY21wKGtleSwgInNhcHBlbmQiKSkgeyAgICAg
ICAgICAgICAgLyogcXNhcHBlbmQgKi8KKyAgICAgICAgaWYgKCAgICFhcF9jYXNlY21wc3RyKGtl
eSwgIlNBIikKKyAgICAgICAgICAgIHx8ICFhcF9jYXNlY21wc3RyKGtleSwgInNhcHBlbmQiKSkg
eyAgICAgICAgICAgICAgLyogcXNhcHBlbmQgKi8KICAgICAgICAgICAgIGNmZy0+ZmxhZ3MgfD0g
UlVMRUZMQUdfUVNBUFBFTkQ7Ci0gICAgICAgIH0gZWxzZSBpZiAoICFzdHJjYXNlY21wKGtleSwg
IlNEIikKLSAgICAgICAgICAgICAgICB8fCAhc3RyY2FzZWNtcChrZXksICJzZGlzY2FyZCIpICkg
eyAgICAgICAvKiBxc2Rpc2NhcmQgKi8KKyAgICAgICAgfSBlbHNlIGlmICggIWFwX2Nhc2VjbXBz
dHIoa2V5LCAiU0QiKQorICAgICAgICAgICAgICAgIHx8ICFhcF9jYXNlY21wc3RyKGtleSwgInNk
aXNjYXJkIikgKSB7ICAgICAgIC8qIHFzZGlzY2FyZCAqLwogICAgICAgICAgICAgY2ZnLT5mbGFn
cyB8PSBSVUxFRkxBR19RU0RJU0NBUkQ7CiAgICAgICAgIH0KICAgICAgICAgZWxzZSB7CkBAIC0z
NTkyLDE4ICszNTkyLDE4IEBAIHN0YXRpYyBjb25zdCBjaGFyICpjbWRfcmV3cml0ZXJ1bGVfc2V0
ZmxhZyhhcHJfcG9vCiAKICAgICBjYXNlICdyJzoKICAgICBjYXNlICdSJzoKLSAgICAgICAgaWYg
KCEqa2V5IHx8ICFzdHJjYXNlY21wKGtleSwgImVkaXJlY3QiKSkgeyAgICAgICAgLyogcmVkaXJl
Y3QgKi8KKyAgICAgICAgaWYgKCEqa2V5IHx8ICFhcF9jYXNlY21wc3RyKGtleSwgImVkaXJlY3Qi
KSkgeyAgICAgICAgLyogcmVkaXJlY3QgKi8KICAgICAgICAgICAgIGludCBzdGF0dXMgPSAwOwog
CiAgICAgICAgICAgICBjZmctPmZsYWdzIHw9IFJVTEVGTEFHX0ZPUkNFUkVESVJFQ1Q7CiAgICAg
ICAgICAgICBpZiAoKnZhbCkgewotICAgICAgICAgICAgICAgIGlmIChzdHJjYXNlY21wKHZhbCwg
InBlcm1hbmVudCIpID09IDApIHsKKyAgICAgICAgICAgICAgICBpZiAoYXBfY2FzZWNtcHN0cih2
YWwsICJwZXJtYW5lbnQiKSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IEhU
VFBfTU9WRURfUEVSTUFORU5UTFk7CiAgICAgICAgICAgICAgICAgfQotICAgICAgICAgICAgICAg
IGVsc2UgaWYgKHN0cmNhc2VjbXAodmFsLCAidGVtcCIpID09IDApIHsKKyAgICAgICAgICAgICAg
ICBlbHNlIGlmIChhcF9jYXNlY21wc3RyKHZhbCwgInRlbXAiKSA9PSAwKSB7CiAgICAgICAgICAg
ICAgICAgICAgIHN0YXR1cyA9IEhUVFBfTU9WRURfVEVNUE9SQVJJTFk7CiAgICAgICAgICAgICAg
ICAgfQotICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0cmNhc2VjbXAodmFsLCAic2Vlb3RoZXIi
KSA9PSAwKSB7CisgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXBfY2FzZWNtcHN0cih2YWwsICJz
ZWVvdGhlciIpID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gSFRUUF9TRUVf
T1RIRVI7CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFwcl9p
c2RpZ2l0KCp2YWwpKSB7CkBAIC0zNjMzLDcgKzM2MzMsNyBAQCBzdGF0aWMgY29uc3QgY2hhciAq
Y21kX3Jld3JpdGVydWxlX3NldGZsYWcoYXByX3BvbwogCiAgICAgY2FzZSAncyc6CiAgICAgY2Fz
ZSAnUyc6Ci0gICAgICAgIGlmICghKmtleSB8fCAhc3RyY2FzZWNtcChrZXksICJraXAiKSkgeyAg
ICAgICAgICAgIC8qIHNraXAgKi8KKyAgICAgICAgaWYgKCEqa2V5IHx8ICFhcF9jYXNlY21wc3Ry
KGtleSwgImtpcCIpKSB7ICAgICAgICAgICAgLyogc2tpcCAqLwogICAgICAgICAgICAgY2ZnLT5z
a2lwID0gYXRvaSh2YWwpOwogICAgICAgICB9CiAgICAgICAgIGVsc2UgewpAQCAtMzY0Myw3ICsz
NjQzLDcgQEAgc3RhdGljIGNvbnN0IGNoYXIgKmNtZF9yZXdyaXRlcnVsZV9zZXRmbGFnKGFwcl9w
b28KIAogICAgIGNhc2UgJ3QnOgogICAgIGNhc2UgJ1QnOgotICAgICAgICBpZiAoISprZXkgfHwg
IXN0cmNhc2VjbXAoa2V5LCAieXBlIikpIHsgICAgICAgICAgICAvKiB0eXBlICovCisgICAgICAg
IGlmICghKmtleSB8fCAhYXBfY2FzZWNtcHN0cihrZXksICJ5cGUiKSkgeyAgICAgICAgICAgIC8q
IHR5cGUgKi8KICAgICAgICAgICAgIGNmZy0+Zm9yY2VkX21pbWV0eXBlID0gdmFsOwogICAgICAg
ICB9CiAgICAgICAgIGVsc2UgewpJbmRleDogbW9kdWxlcy9tYXBwZXJzL21vZF92aG9zdF9hbGlh
cy5jCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT0KLS0tIG1vZHVsZXMvbWFwcGVycy9tb2Rfdmhvc3RfYWxpYXMuYwkocmV2
aXNpb24gMTcxNjE4OSkKKysrIG1vZHVsZXMvbWFwcGVycy9tb2Rfdmhvc3RfYWxpYXMuYwkod29y
a2luZyBjb3B5KQpAQCAtMTUyLDcgKzE1Miw3IEBAIHN0YXRpYyBjb25zdCBjaGFyICp2aG9zdF9h
bGlhc19zZXQoY21kX3Bhcm1zICpjbWQsCiAgICAgfQogCiAgICAgaWYgKCFhcF9vc19pc19wYXRo
X2Fic29sdXRlKGNtZC0+cG9vbCwgbWFwKSkgewotICAgICAgICBpZiAoc3RyY2FzZWNtcChtYXAs
ICJub25lIikpIHsKKyAgICAgICAgaWYgKGFwX2Nhc2VjbXBzdHIobWFwLCAibm9uZSIpKSB7CiAg
ICAgICAgICAgICByZXR1cm4gImZvcm1hdCBzdHJpbmcgbXVzdCBiZSBhbiBhYnNvbHV0ZSBwYXRo
LCBvciAnbm9uZSciOwogICAgICAgICB9CiAgICAgICAgICpwbWFwID0gTlVMTDsKSW5kZXg6IG1v
ZHVsZXMvbWV0YWRhdGEvbW9kX2Nlcm5fbWV0YS5jCj09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0tIG1vZHVsZXMvbWV0
YWRhdGEvbW9kX2Nlcm5fbWV0YS5jCShyZXZpc2lvbiAxNzE2MTg5KQorKysgbW9kdWxlcy9tZXRh
ZGF0YS9tb2RfY2Vybl9tZXRhLmMJKHdvcmtpbmcgY29weSkKQEAgLTI0MCw3ICsyNDAsNyBAQCBz
dGF0aWMgaW50IHNjYW5fbWV0YV9maWxlKHJlcXVlc3RfcmVjICpyLCBhcHJfZmlsZQogICAgICAg
ICB3aGlsZSAoYXByX2lzc3BhY2UoKmwpKQogICAgICAgICAgICAgKytsOwogCi0gICAgICAgIGlm
ICghc3RyY2FzZWNtcCh3LCAiQ29udGVudC10eXBlIikpIHsKKyAgICAgICAgaWYgKCFhcF9jYXNl
Y21wc3RyKHcsICJDb250ZW50LXR5cGUiKSkgewogICAgICAgICAgICAgY2hhciAqdG1wOwogICAg
ICAgICAgICAgLyogTnVrZSB0cmFpbGluZyB3aGl0ZXNwYWNlICovCiAKQEAgLTI1Miw3ICsyNTIs
NyBAQCBzdGF0aWMgaW50IHNjYW5fbWV0YV9maWxlKHJlcXVlc3RfcmVjICpyLCBhcHJfZmlsZQog
ICAgICAgICAgICAgYXBfY29udGVudF90eXBlX3RvbG93ZXIodG1wKTsKICAgICAgICAgICAgIGFw
X3NldF9jb250ZW50X3R5cGUociwgdG1wKTsKICAgICAgICAgfQotICAgICAgICBlbHNlIGlmICgh
c3RyY2FzZWNtcCh3LCAiU3RhdHVzIikpIHsKKyAgICAgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBz
dHIodywgIlN0YXR1cyIpKSB7CiAgICAgICAgICAgICBzc2NhbmYobCwgIiVkIiwgJnItPnN0YXR1
cyk7CiAgICAgICAgICAgICByLT5zdGF0dXNfbGluZSA9IGFwcl9wc3RyZHVwKHItPnBvb2wsIGwp
OwogICAgICAgICB9CkluZGV4OiBtb2R1bGVzL21ldGFkYXRhL21vZF9oZWFkZXJzLmMKPT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PQotLS0gbW9kdWxlcy9tZXRhZGF0YS9tb2RfaGVhZGVycy5jCShyZXZpc2lvbiAxNzE2MTg5
KQorKysgbW9kdWxlcy9tZXRhZGF0YS9tb2RfaGVhZGVycy5jCSh3b3JraW5nIGNvcHkpCkBAIC03
ODksNyArNzg5LDcgQEAgc3RhdGljIGludCBkb19oZWFkZXJzX2ZpeHVwKHJlcXVlc3RfcmVjICpy
LCBhcHJfdGEKICAgICAgICAgICAgIH0KICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICBjYXNl
IGhkcl9zZXQ6Ci0gICAgICAgICAgICBpZiAoIXN0cmNhc2VjbXAoaGRyLT5oZWFkZXIsICJDb250
ZW50LVR5cGUiKSkgeworICAgICAgICAgICAgaWYgKCFhcF9jYXNlY21wc3RyKGhkci0+aGVhZGVy
LCAiQ29udGVudC1UeXBlIikpIHsKICAgICAgICAgICAgICAgICAgYXBfc2V0X2NvbnRlbnRfdHlw
ZShyLCBwcm9jZXNzX3RhZ3MoaGRyLCByKSk7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgICBh
cHJfdGFibGVfc2V0bihoZWFkZXJzLCBoZHItPmhlYWRlciwgcHJvY2Vzc190YWdzKGhkciwgcikp
OwpAQCAtNzk2LDcgKzc5Niw3IEBAIHN0YXRpYyBpbnQgZG9faGVhZGVyc19maXh1cChyZXF1ZXN0
X3JlYyAqciwgYXByX3RhCiAgICAgICAgICAgICBicmVhazsKICAgICAgICAgY2FzZSBoZHJfc2V0
aWZlbXB0eToKICAgICAgICAgICAgIGlmIChOVUxMID09IGFwcl90YWJsZV9nZXQoaGVhZGVycywg
aGRyLT5oZWFkZXIpKSB7Ci0gICAgICAgICAgICAgICAgaWYgKCFzdHJjYXNlY21wKGhkci0+aGVh
ZGVyLCAiQ29udGVudC1UeXBlIikpIHsKKyAgICAgICAgICAgICAgICBpZiAoIWFwX2Nhc2VjbXBz
dHIoaGRyLT5oZWFkZXIsICJDb250ZW50LVR5cGUiKSkgewogICAgICAgICAgICAgICAgICAgICBh
cF9zZXRfY29udGVudF90eXBlKHIsIHByb2Nlc3NfdGFncyhoZHIsIHIpKTsKICAgICAgICAgICAg
ICAgICB9CiAgICAgICAgICAgICAgICAgYXByX3RhYmxlX3NldG4oaGVhZGVycywgaGRyLT5oZWFk
ZXIsIHByb2Nlc3NfdGFncyhoZHIsIHIpKTsKQEAgLTgxMyw3ICs4MTMsNyBAQCBzdGF0aWMgaW50
IGRvX2hlYWRlcnNfZml4dXAocmVxdWVzdF9yZWMgKnIsIGFwcl90YQogICAgICAgICAgICAgYnJl
YWs7CiAgICAgICAgIGNhc2UgaGRyX2VkaXQ6CiAgICAgICAgIGNhc2UgaGRyX2VkaXRfcjoKLSAg
ICAgICAgICAgIGlmICghc3RyY2FzZWNtcChoZHItPmhlYWRlciwgIkNvbnRlbnQtVHlwZSIpICYm
IHItPmNvbnRlbnRfdHlwZSkgeworICAgICAgICAgICAgaWYgKCFhcF9jYXNlY21wc3RyKGhkci0+
aGVhZGVyLCAiQ29udGVudC1UeXBlIikgJiYgci0+Y29udGVudF90eXBlKSB7CiAgICAgICAgICAg
ICAgICAgY29uc3QgY2hhciAqcmVwbCA9IHByb2Nlc3NfcmVnZXhwKGhkciwgci0+Y29udGVudF90
eXBlLCByKTsKICAgICAgICAgICAgICAgICBpZiAocmVwbCA9PSBOVUxMKQogICAgICAgICAgICAg
ICAgICAgICByZXR1cm4gMDsKSW5kZXg6IG1vZHVsZXMvcHJveHkvYWpwX2hlYWRlci5jCj09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT0KLS0tIG1vZHVsZXMvcHJveHkvYWpwX2hlYWRlci5jCShyZXZpc2lvbiAxNzE2MTg5KQor
KysgbW9kdWxlcy9wcm94eS9hanBfaGVhZGVyLmMJKHdvcmtpbmcgY29weSkKQEAgLTYzMywxNSAr
NjMzLDE1IEBAIHN0YXRpYyBhcHJfc3RhdHVzX3QgYWpwX3VubWFyc2hhbF9yZXNwb25zZShhanBf
bXNnCiAgICAgICAgIH0KIAogICAgICAgICAvKiBTZXQtQ29va2llIG5lZWQgYWRkaXRpb25hbCBw
cm9jZXNzaW5nICovCi0gICAgICAgIGlmICghc3RyY2FzZWNtcChzdHJpbmduYW1lLCAiU2V0LUNv
b2tpZSIpKSB7CisgICAgICAgIGlmICghYXBfY2FzZWNtcHN0cihzdHJpbmduYW1lLCAiU2V0LUNv
b2tpZSIpKSB7CiAgICAgICAgICAgICB2YWx1ZSA9IGFwX3Byb3h5X2Nvb2tpZV9yZXZlcnNlX21h
cChyLCBkY29uZiwgdmFsdWUpOwogICAgICAgICB9CiAgICAgICAgIC8qIExvY2F0aW9uLCBDb250
ZW50LUxvY2F0aW9uLCBVUkkgYW5kIERlc3RpbmF0aW9uIG5lZWQgYWRkaXRpb25hbAogICAgICAg
ICAgKiBwcm9jZXNzaW5nICovCi0gICAgICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKHN0cmluZ25h
bWUsICJMb2NhdGlvbiIpCi0gICAgICAgICAgICAgICAgIHx8ICFzdHJjYXNlY21wKHN0cmluZ25h
bWUsICJDb250ZW50LUxvY2F0aW9uIikKLSAgICAgICAgICAgICAgICAgfHwgIXN0cmNhc2VjbXAo
c3RyaW5nbmFtZSwgIlVSSSIpCi0gICAgICAgICAgICAgICAgIHx8ICFzdHJjYXNlY21wKHN0cmlu
Z25hbWUsICJEZXN0aW5hdGlvbiIpKQorICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihz
dHJpbmduYW1lLCAiTG9jYXRpb24iKQorICAgICAgICAgICAgICAgICB8fCAhYXBfY2FzZWNtcHN0
cihzdHJpbmduYW1lLCAiQ29udGVudC1Mb2NhdGlvbiIpCisgICAgICAgICAgICAgICAgIHx8ICFh
cF9jYXNlY21wc3RyKHN0cmluZ25hbWUsICJVUkkiKQorICAgICAgICAgICAgICAgICB8fCAhYXBf
Y2FzZWNtcHN0cihzdHJpbmduYW1lLCAiRGVzdGluYXRpb24iKSkKICAgICAgICAgewogICAgICAg
ICAgIHZhbHVlID0gYXBfcHJveHlfbG9jYXRpb25fcmV2ZXJzZV9tYXAociwgZGNvbmYsIHZhbHVl
KTsKICAgICAgICAgfQpAQCAtNjU0LDcgKzY1NCw3IEBAIHN0YXRpYyBhcHJfc3RhdHVzX3QgYWpw
X3VubWFyc2hhbF9yZXNwb25zZShhanBfbXNnCiAgICAgICAgIGFwcl90YWJsZV9hZGQoci0+aGVh
ZGVyc19vdXQsIHN0cmluZ25hbWUsIHZhbHVlKTsKIAogICAgICAgICAvKiBDb250ZW50LXR5cGUg
bmVlZHMgYW4gYWRkaXRpb25hbCBoYW5kbGluZyAqLwotICAgICAgICBpZiAoc3RyY2FzZWNtcChz
dHJpbmduYW1lLCAiQ29udGVudC1UeXBlIikgPT0gMCkgeworICAgICAgICBpZiAoYXBfY2FzZWNt
cHN0cihzdHJpbmduYW1lLCAiQ29udGVudC1UeXBlIikgPT0gMCkgewogICAgICAgICAgICAgIC8q
IGFkZCBjb3JyZXNwb25kaW5nIGZpbHRlciAqLwogICAgICAgICAgICAgYXBfc2V0X2NvbnRlbnRf
dHlwZShyLCBhcHJfcHN0cmR1cChyLT5wb29sLCB2YWx1ZSkpOwogICAgICAgICAgICAgYXBfbG9n
X3JlcnJvcihBUExPR19NQVJLLCBBUExPR19UUkFDRTUsIDAsIHIsCkluZGV4OiBtb2R1bGVzL3By
b3h5L21vZF9wcm94eS5jCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0tIG1vZHVsZXMvcHJveHkvbW9kX3Byb3h5LmMJ
KHJldmlzaW9uIDE3MTYxODkpCisrKyBtb2R1bGVzL3Byb3h5L21vZF9wcm94eS5jCSh3b3JraW5n
IGNvcHkpCkBAIC02NCw3ICs2NCw3IEBAIHN0YXRpYyBjb25zdCBjaGFyICpzZXRfd29ya2VyX3Bh
cmFtKGFwcl9wb29sX3QgKnAsCiAgICAgaW50IGl2YWw7CiAgICAgYXByX2ludGVydmFsX3RpbWVf
dCB0aW1lb3V0OwogCi0gICAgaWYgKCFzdHJjYXNlY21wKGtleSwgImxvYWRmYWN0b3IiKSkgewor
ICAgIGlmICghYXBfY2FzZWNtcHN0cihrZXksICJsb2FkZmFjdG9yIikpIHsKICAgICAgICAgLyog
Tm9ybWFsaXplZCBsb2FkIGZhY3Rvci4gVXNlZCB3aXRoIEJhbGFuY2VyTWFtYmVyLAogICAgICAg
ICAgKiBpdCBpcyBhIG51bWJlciBiZXR3ZWVuIDEgYW5kIDEwMC4KICAgICAgICAgICovCkBAIC03
Miw3ICs3Miw3IEBAIHN0YXRpYyBjb25zdCBjaGFyICpzZXRfd29ya2VyX3BhcmFtKGFwcl9wb29s
X3QgKnAsCiAgICAgICAgIGlmICh3b3JrZXItPnMtPmxiZmFjdG9yIDwgMSB8fCB3b3JrZXItPnMt
PmxiZmFjdG9yID4gMTAwKQogICAgICAgICAgICAgcmV0dXJuICJMb2FkRmFjdG9yIG11c3QgYmUg
YSBudW1iZXIgYmV0d2VlbiAxLi4xMDAiOwogICAgIH0KLSAgICBlbHNlIGlmICghc3RyY2FzZWNt
cChrZXksICJyZXRyeSIpKSB7CisgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAicmV0
cnkiKSkgewogICAgICAgICAvKiBJZiBzZXQgaXQgd2lsbCBnaXZlIHRoZSByZXRyeSB0aW1lb3V0
IGZvciB0aGUgd29ya2VyCiAgICAgICAgICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIDYwIHNlY29u
ZHMsIG1lYW5pbmcgdGhhdCBpZgogICAgICAgICAgKiBpbiBlcnJvciBzdGF0ZSwgaXQgd2lsbCBi
ZSByZXRyaWVkIGFmdGVyIHRoYXQgdGltZW91dC4KQEAgLTgzLDcgKzgzLDcgQEAgc3RhdGljIGNv
bnN0IGNoYXIgKnNldF93b3JrZXJfcGFyYW0oYXByX3Bvb2xfdCAqcCwKICAgICAgICAgd29ya2Vy
LT5zLT5yZXRyeSA9IGFwcl90aW1lX2Zyb21fc2VjKGl2YWwpOwogICAgICAgICB3b3JrZXItPnMt
PnJldHJ5X3NldCA9IDE7CiAgICAgfQotICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKGtleSwgInR0
bCIpKSB7CisgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAidHRsIikpIHsKICAgICAg
ICAgLyogVGltZSBpbiBzZWNvbmRzIHRoYXQgd2lsbCBkZXN0cm95IGFsbCB0aGUgY29ubmVjdGlv
bnMKICAgICAgICAgICogdGhhdCBleGNlZWQgdGhlIHNtYXgKICAgICAgICAgICovCkBAIC05Miw3
ICs5Miw3IEBAIHN0YXRpYyBjb25zdCBjaGFyICpzZXRfd29ya2VyX3BhcmFtKGFwcl9wb29sX3Qg
KnAsCiAgICAgICAgICAgICByZXR1cm4gIlRUTCBtdXN0IGJlIGF0IGxlYXN0IG9uZSBzZWNvbmQi
OwogICAgICAgICB3b3JrZXItPnMtPnR0bCA9IGFwcl90aW1lX2Zyb21fc2VjKGl2YWwpOwogICAg
IH0KLSAgICBlbHNlIGlmICghc3RyY2FzZWNtcChrZXksICJtaW4iKSkgeworICAgIGVsc2UgaWYg
KCFhcF9jYXNlY21wc3RyKGtleSwgIm1pbiIpKSB7CiAgICAgICAgIC8qIEluaXRpYWwgbnVtYmVy
IG9mIGNvbm5lY3Rpb25zIHRvIHJlbW90ZQogICAgICAgICAgKi8KICAgICAgICAgaXZhbCA9IGF0
b2kodmFsKTsKQEAgLTEwMCw3ICsxMDAsNyBAQCBzdGF0aWMgY29uc3QgY2hhciAqc2V0X3dvcmtl
cl9wYXJhbShhcHJfcG9vbF90ICpwLAogICAgICAgICAgICAgcmV0dXJuICJNaW4gbXVzdCBiZSBh
IHBvc2l0aXZlIG51bWJlciI7CiAgICAgICAgIHdvcmtlci0+cy0+bWluID0gaXZhbDsKICAgICB9
Ci0gICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAoa2V5LCAibWF4IikpIHsKKyAgICBlbHNlIGlmICgh
YXBfY2FzZWNtcHN0cihrZXksICJtYXgiKSkgewogICAgICAgICAvKiBNYXhpbXVtIG51bWJlciBv
ZiBjb25uZWN0aW9ucyB0byByZW1vdGUKICAgICAgICAgICovCiAgICAgICAgIGl2YWwgPSBhdG9p
KHZhbCk7CkBAIC0xMDksNyArMTA5LDcgQEAgc3RhdGljIGNvbnN0IGNoYXIgKnNldF93b3JrZXJf
cGFyYW0oYXByX3Bvb2xfdCAqcCwKICAgICAgICAgd29ya2VyLT5zLT5obWF4ID0gaXZhbDsKICAg
ICB9CiAgICAgLyogWFhYOiBNb3JlIGludGVsaWdlbnQgbmFtaW5nIG5lZWRlZCAqLwotICAgIGVs
c2UgaWYgKCFzdHJjYXNlY21wKGtleSwgInNtYXgiKSkgeworICAgIGVsc2UgaWYgKCFhcF9jYXNl
Y21wc3RyKGtleSwgInNtYXgiKSkgewogICAgICAgICAvKiBNYXhpbXVtIG51bWJlciBvZiBjb25u
ZWN0aW9ucyB0byByZW1vdGUgdGhhdAogICAgICAgICAgKiB3aWxsIG5vdCBiZSBkZXN0cm95ZWQK
ICAgICAgICAgICovCkBAIC0xMTgsNyArMTE4LDcgQEAgc3RhdGljIGNvbnN0IGNoYXIgKnNldF93
b3JrZXJfcGFyYW0oYXByX3Bvb2xfdCAqcCwKICAgICAgICAgICAgIHJldHVybiAiU21heCBtdXN0
IGJlIGEgcG9zaXRpdmUgbnVtYmVyIjsKICAgICAgICAgd29ya2VyLT5zLT5zbWF4ID0gaXZhbDsK
ICAgICB9Ci0gICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAoa2V5LCAiYWNxdWlyZSIpKSB7CisgICAg
ZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAiYWNxdWlyZSIpKSB7CiAgICAgICAgIC8qIEFj
cXVpcmUgdGltZW91dCBpbiBnaXZlbiB1bml0IChkZWZhdWx0IGlzIG1pbGxpc2Vjb25kcykuCiAg
ICAgICAgICAqIElmIHNldCB0aGlzIHdpbGwgYmUgdGhlIG1heGltdW0gdGltZSB0bwogICAgICAg
ICAgKiB3YWl0IGZvciBhIGZyZWUgY29ubmVjdGlvbi4KQEAgLTEzMCw3ICsxMzAsNyBAQCBzdGF0
aWMgY29uc3QgY2hhciAqc2V0X3dvcmtlcl9wYXJhbShhcHJfcG9vbF90ICpwLAogICAgICAgICB3
b3JrZXItPnMtPmFjcXVpcmUgPSB0aW1lb3V0OwogICAgICAgICB3b3JrZXItPnMtPmFjcXVpcmVf
c2V0ID0gMTsKICAgICB9Ci0gICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAoa2V5LCAidGltZW91dCIp
KSB7CisgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAidGltZW91dCIpKSB7CiAgICAg
ICAgIC8qIENvbm5lY3Rpb24gdGltZW91dCBpbiBzZWNvbmRzLgogICAgICAgICAgKiBEZWZhdWx0
cyB0byBzZXJ2ZXIgdGltZW91dC4KICAgICAgICAgICovCkBAIC0xNDAsNyArMTQwLDcgQEAgc3Rh
dGljIGNvbnN0IGNoYXIgKnNldF93b3JrZXJfcGFyYW0oYXByX3Bvb2xfdCAqcCwKICAgICAgICAg
d29ya2VyLT5zLT50aW1lb3V0ID0gYXByX3RpbWVfZnJvbV9zZWMoaXZhbCk7CiAgICAgICAgIHdv
cmtlci0+cy0+dGltZW91dF9zZXQgPSAxOwogICAgIH0KLSAgICBlbHNlIGlmICghc3RyY2FzZWNt
cChrZXksICJpb2J1ZmZlcnNpemUiKSkgeworICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGtl
eSwgImlvYnVmZmVyc2l6ZSIpKSB7CiAgICAgICAgIGxvbmcgcyA9IGF0b2wodmFsKTsKICAgICAg
ICAgaWYgKHMgPCA1MTIgJiYgcykgewogICAgICAgICAgICAgcmV0dXJuICJJT0J1ZmZlclNpemUg
bXVzdCBiZSA+PSA1MTIgYnl0ZXMsIG9yIDAgZm9yIHN5c3RlbSBkZWZhdWx0LiI7CkBAIC0xNDgs
NyArMTQ4LDcgQEAgc3RhdGljIGNvbnN0IGNoYXIgKnNldF93b3JrZXJfcGFyYW0oYXByX3Bvb2xf
dCAqcCwKICAgICAgICAgd29ya2VyLT5zLT5pb19idWZmZXJfc2l6ZSA9IChzID8gcyA6IEFQX0lP
QlVGU0laRSk7CiAgICAgICAgIHdvcmtlci0+cy0+aW9fYnVmZmVyX3NpemVfc2V0ID0gMTsKICAg
ICB9Ci0gICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAoa2V5LCAicmVjZWl2ZWJ1ZmZlcnNpemUiKSkg
eworICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGtleSwgInJlY2VpdmVidWZmZXJzaXplIikp
IHsKICAgICAgICAgaXZhbCA9IGF0b2kodmFsKTsKICAgICAgICAgaWYgKGl2YWwgPCA1MTIgJiYg
aXZhbCAhPSAwKSB7CiAgICAgICAgICAgICByZXR1cm4gIlJlY2VpdmVCdWZmZXJTaXplIG11c3Qg
YmUgPj0gNTEyIGJ5dGVzLCBvciAwIGZvciBzeXN0ZW0gZGVmYXVsdC4iOwpAQCAtMTU2LDM0ICsx
NTYsMzQgQEAgc3RhdGljIGNvbnN0IGNoYXIgKnNldF93b3JrZXJfcGFyYW0oYXByX3Bvb2xfdCAq
cCwKICAgICAgICAgd29ya2VyLT5zLT5yZWN2X2J1ZmZlcl9zaXplID0gaXZhbDsKICAgICAgICAg
d29ya2VyLT5zLT5yZWN2X2J1ZmZlcl9zaXplX3NldCA9IDE7CiAgICAgfQotICAgIGVsc2UgaWYg
KCFzdHJjYXNlY21wKGtleSwgImtlZXBhbGl2ZSIpKSB7Ci0gICAgICAgIGlmICghc3RyY2FzZWNt
cCh2YWwsICJvbiIpKQorICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGtleSwgImtlZXBhbGl2
ZSIpKSB7CisgICAgICAgIGlmICghYXBfY2FzZWNtcHN0cih2YWwsICJvbiIpKQogICAgICAgICAg
ICAgd29ya2VyLT5zLT5rZWVwYWxpdmUgPSAxOwotICAgICAgICBlbHNlIGlmICghc3RyY2FzZWNt
cCh2YWwsICJvZmYiKSkKKyAgICAgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIodmFsLCAib2Zm
IikpCiAgICAgICAgICAgICB3b3JrZXItPnMtPmtlZXBhbGl2ZSA9IDA7CiAgICAgICAgIGVsc2UK
ICAgICAgICAgICAgIHJldHVybiAiS2VlcEFsaXZlIG11c3QgYmUgT258T2ZmIjsKICAgICAgICAg
d29ya2VyLT5zLT5rZWVwYWxpdmVfc2V0ID0gMTsKICAgICB9Ci0gICAgZWxzZSBpZiAoIXN0cmNh
c2VjbXAoa2V5LCAiZGlzYWJsZXJldXNlIikpIHsKLSAgICAgICAgaWYgKCFzdHJjYXNlY21wKHZh
bCwgIm9uIikpCisgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAiZGlzYWJsZXJldXNl
IikpIHsKKyAgICAgICAgaWYgKCFhcF9jYXNlY21wc3RyKHZhbCwgIm9uIikpCiAgICAgICAgICAg
ICB3b3JrZXItPnMtPmRpc2FibGVyZXVzZSA9IDE7Ci0gICAgICAgIGVsc2UgaWYgKCFzdHJjYXNl
Y21wKHZhbCwgIm9mZiIpKQorICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cih2YWwsICJv
ZmYiKSkKICAgICAgICAgICAgIHdvcmtlci0+cy0+ZGlzYWJsZXJldXNlID0gMDsKICAgICAgICAg
ZWxzZQogICAgICAgICAgICAgcmV0dXJuICJEaXNhYmxlUmV1c2UgbXVzdCBiZSBPbnxPZmYiOwog
ICAgICAgICB3b3JrZXItPnMtPmRpc2FibGVyZXVzZV9zZXQgPSAxOwogICAgIH0KLSAgICBlbHNl
IGlmICghc3RyY2FzZWNtcChrZXksICJlbmFibGVyZXVzZSIpKSB7Ci0gICAgICAgIGlmICghc3Ry
Y2FzZWNtcCh2YWwsICJvbiIpKQorICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGtleSwgImVu
YWJsZXJldXNlIikpIHsKKyAgICAgICAgaWYgKCFhcF9jYXNlY21wc3RyKHZhbCwgIm9uIikpCiAg
ICAgICAgICAgICB3b3JrZXItPnMtPmRpc2FibGVyZXVzZSA9IDA7Ci0gICAgICAgIGVsc2UgaWYg
KCFzdHJjYXNlY21wKHZhbCwgIm9mZiIpKQorICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0
cih2YWwsICJvZmYiKSkKICAgICAgICAgICAgIHdvcmtlci0+cy0+ZGlzYWJsZXJldXNlID0gMTsK
ICAgICAgICAgZWxzZQogICAgICAgICAgICAgcmV0dXJuICJFbmFibGVSZXVzZSBtdXN0IGJlIE9u
fE9mZiI7CiAgICAgICAgIHdvcmtlci0+cy0+ZGlzYWJsZXJldXNlX3NldCA9IDE7CiAgICAgfQot
ICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKGtleSwgInJvdXRlIikpIHsKKyAgICBlbHNlIGlmICgh
YXBfY2FzZWNtcHN0cihrZXksICJyb3V0ZSIpKSB7CiAgICAgICAgIC8qIFdvcmtlciByb3V0ZS4K
ICAgICAgICAgICovCiAgICAgICAgIGlmIChzdHJsZW4odmFsKSA+PSBzaXplb2Yod29ya2VyLT5z
LT5yb3V0ZSkpCkBAIC0xOTEsNyArMTkxLDcgQEAgc3RhdGljIGNvbnN0IGNoYXIgKnNldF93b3Jr
ZXJfcGFyYW0oYXByX3Bvb2xfdCAqcCwKICAgICAgICAgICAgICAgICAgICAgKGludClzaXplb2Yo
d29ya2VyLT5zLT5yb3V0ZSkpOwogICAgICAgICBQUk9YWV9TVFJOQ1BZKHdvcmtlci0+cy0+cm91
dGUsIHZhbCk7CiAgICAgfQotICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKGtleSwgInJlZGlyZWN0
IikpIHsKKyAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihrZXksICJyZWRpcmVjdCIpKSB7CiAg
ICAgICAgIC8qIFdvcmtlciByZWRpcmVjdGlvbiByb3V0ZS4KICAgICAgICAgICovCiAgICAgICAg
IGlmIChzdHJsZW4odmFsKSA+PSBzaXplb2Yod29ya2VyLT5zLT5yZWRpcmVjdCkpCkBAIC0xOTks
NyArMTk5LDcgQEAgc3RhdGljIGNvbnN0IGNoYXIgKnNldF93b3JrZXJfcGFyYW0oYXByX3Bvb2xf
dCAqcCwKICAgICAgICAgICAgICAgICAgICAgKGludClzaXplb2Yod29ya2VyLT5zLT5yZWRpcmVj
dCkpOwogICAgICAgICBQUk9YWV9TVFJOQ1BZKHdvcmtlci0+cy0+cmVkaXJlY3QsIHZhbCk7CiAg
ICAgfQotICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKGtleSwgInN0YXR1cyIpKSB7CisgICAgZWxz
ZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAic3RhdHVzIikpIHsKICAgICAgICAgY29uc3QgY2hh
ciAqdjsKICAgICAgICAgaW50IG1vZGUgPSAxOwogICAgICAgICBhcHJfc3RhdHVzX3QgcnY7CkBA
IC0yMTksMTcgKzIxOSwxNyBAQCBzdGF0aWMgY29uc3QgY2hhciAqc2V0X3dvcmtlcl9wYXJhbShh
cHJfcG9vbF90ICpwLAogICAgICAgICAgICAgICAgIHJldHVybiAiVW5rbm93biBzdGF0dXMgcGFy
YW1ldGVyIG9wdGlvbiI7CiAgICAgICAgIH0KICAgICB9Ci0gICAgZWxzZSBpZiAoIXN0cmNhc2Vj
bXAoa2V5LCAiZmx1c2hwYWNrZXRzIikpIHsKLSAgICAgICAgaWYgKCFzdHJjYXNlY21wKHZhbCwg
Im9uIikpCisgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAiZmx1c2hwYWNrZXRzIikp
IHsKKyAgICAgICAgaWYgKCFhcF9jYXNlY21wc3RyKHZhbCwgIm9uIikpCiAgICAgICAgICAgICB3
b3JrZXItPnMtPmZsdXNoX3BhY2tldHMgPSBmbHVzaF9vbjsKLSAgICAgICAgZWxzZSBpZiAoIXN0
cmNhc2VjbXAodmFsLCAib2ZmIikpCisgICAgICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKHZh
bCwgIm9mZiIpKQogICAgICAgICAgICAgd29ya2VyLT5zLT5mbHVzaF9wYWNrZXRzID0gZmx1c2hf
b2ZmOwotICAgICAgICBlbHNlIGlmICghc3RyY2FzZWNtcCh2YWwsICJhdXRvIikpCisgICAgICAg
IGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKHZhbCwgImF1dG8iKSkKICAgICAgICAgICAgIHdvcmtl
ci0+cy0+Zmx1c2hfcGFja2V0cyA9IGZsdXNoX2F1dG87CiAgICAgICAgIGVsc2UKICAgICAgICAg
ICAgIHJldHVybiAiZmx1c2hwYWNrZXRzIG11c3QgYmUgb258b2ZmfGF1dG8iOwogICAgIH0KLSAg
ICBlbHNlIGlmICghc3RyY2FzZWNtcChrZXksICJmbHVzaHdhaXQiKSkgeworICAgIGVsc2UgaWYg
KCFhcF9jYXNlY21wc3RyKGtleSwgImZsdXNod2FpdCIpKSB7CiAgICAgICAgIGl2YWwgPSBhdG9p
KHZhbCk7CiAgICAgICAgIGlmIChpdmFsID4gMTAwMCB8fCBpdmFsIDwgMCkgewogICAgICAgICAg
ICAgcmV0dXJuICJmbHVzaHdhaXQgbXVzdCBiZSA8PSAxMDAwLCBvciAwIGZvciBzeXN0ZW0gZGVm
YXVsdCBvZiAxMCBtaWxsc2Vjb25kcy4iOwpAQCAtMjM5LDcgKzIzOSw3IEBAIHN0YXRpYyBjb25z
dCBjaGFyICpzZXRfd29ya2VyX3BhcmFtKGFwcl9wb29sX3QgKnAsCiAgICAgICAgIGVsc2UKICAg
ICAgICAgICAgIHdvcmtlci0+cy0+Zmx1c2hfd2FpdCA9IGl2YWwgKiAxMDAwOyAgICAvKiBjaGFu
Z2UgdG8gbWljcm9zZWNvbmRzICovCiAgICAgfQotICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKGtl
eSwgInBpbmciKSkgeworICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGtleSwgInBpbmciKSkg
ewogICAgICAgICAvKiBQaW5nL1BvbmcgdGltZW91dCBpbiBnaXZlbiB1bml0IChkZWZhdWx0IGlz
IHNlY29uZCkuCiAgICAgICAgICAqLwogICAgICAgICBpZiAoYXBfdGltZW91dF9wYXJhbWV0ZXJf
cGFyc2UodmFsLCAmdGltZW91dCwgInMiKSAhPSBBUFJfU1VDQ0VTUykKQEAgLTI0OSwxMyArMjQ5
LDEzIEBAIHN0YXRpYyBjb25zdCBjaGFyICpzZXRfd29ya2VyX3BhcmFtKGFwcl9wb29sX3QgKnAs
CiAgICAgICAgIHdvcmtlci0+cy0+cGluZ190aW1lb3V0ID0gdGltZW91dDsKICAgICAgICAgd29y
a2VyLT5zLT5waW5nX3RpbWVvdXRfc2V0ID0gMTsKICAgICB9Ci0gICAgZWxzZSBpZiAoIXN0cmNh
c2VjbXAoa2V5LCAibGJzZXQiKSkgeworICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGtleSwg
Imxic2V0IikpIHsKICAgICAgICAgaXZhbCA9IGF0b2kodmFsKTsKICAgICAgICAgaWYgKGl2YWwg
PCAwIHx8IGl2YWwgPiA5OSkKICAgICAgICAgICAgIHJldHVybiAibGJzZXQgbXVzdCBiZSBiZXR3
ZWVuIDAgYW5kIDk5IjsKICAgICAgICAgd29ya2VyLT5zLT5sYnNldCA9IGl2YWw7CiAgICAgfQot
ICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKGtleSwgImNvbm5lY3Rpb250aW1lb3V0IikpIHsKKyAg
ICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihrZXksICJjb25uZWN0aW9udGltZW91dCIpKSB7CiAg
ICAgICAgIC8qIFJlcXVlc3QgdGltZW91dCBpbiBnaXZlbiB1bml0IChkZWZhdWx0IGlzIHNlY29u
ZCkuCiAgICAgICAgICAqIERlZmF1bHRzIHRvIGNvbm5lY3Rpb24gdGltZW91dAogICAgICAgICAg
Ki8KQEAgLTI2Niw3ICsyNjYsNyBAQCBzdGF0aWMgY29uc3QgY2hhciAqc2V0X3dvcmtlcl9wYXJh
bShhcHJfcG9vbF90ICpwLAogICAgICAgICB3b3JrZXItPnMtPmNvbm5fdGltZW91dCA9IHRpbWVv
dXQ7CiAgICAgICAgIHdvcmtlci0+cy0+Y29ubl90aW1lb3V0X3NldCA9IDE7CiAgICAgfQotICAg
IGVsc2UgaWYgKCFzdHJjYXNlY21wKGtleSwgImZsdXNoZXIiKSkgeworICAgIGVsc2UgaWYgKCFh
cF9jYXNlY21wc3RyKGtleSwgImZsdXNoZXIiKSkgewogICAgICAgICBpZiAoc3RybGVuKHZhbCkg
Pj0gc2l6ZW9mKHdvcmtlci0+cy0+Zmx1c2hlcikpCiAgICAgICAgICAgICBhcHJfcHNwcmludGYo
cCwgImZsdXNoZXIgbmFtZSBsZW5ndGggbXVzdCBiZSA8ICVkIGNoYXJhY3RlcnMiLAogICAgICAg
ICAgICAgICAgICAgICAoaW50KXNpemVvZih3b3JrZXItPnMtPmZsdXNoZXIpKTsKQEAgLTI4Niw3
ICsyODYsNyBAQCBzdGF0aWMgY29uc3QgY2hhciAqc2V0X2JhbGFuY2VyX3BhcmFtKHByb3h5X3Nl
cnZlcgogewogCiAgICAgaW50IGl2YWw7Ci0gICAgaWYgKCFzdHJjYXNlY21wKGtleSwgInN0aWNr
eXNlc3Npb24iKSkgeworICAgIGlmICghYXBfY2FzZWNtcHN0cihrZXksICJzdGlja3lzZXNzaW9u
IikpIHsKICAgICAgICAgY2hhciAqcGF0aDsKICAgICAgICAgLyogQmFsYW5jZXIgc3RpY2t5IHNl
c3Npb24gbmFtZS4KICAgICAgICAgICogU2V0IHRvIHNvbWV0aGluZyBsaWtlIEpTRVNTSU9OSUQg
b3IKQEAgLTMwMywxMiArMzAzLDEyIEBAIHN0YXRpYyBjb25zdCBjaGFyICpzZXRfYmFsYW5jZXJf
cGFyYW0ocHJveHlfc2VydmVyCiAgICAgICAgICAgICBQUk9YWV9TVFJOQ1BZKGJhbGFuY2VyLT5z
LT5zdGlja3lfcGF0aCwgcGF0aCk7CiAgICAgICAgIH0KICAgICB9Ci0gICAgZWxzZSBpZiAoIXN0
cmNhc2VjbXAoa2V5LCAic3RpY2t5c2Vzc2lvbnNlcCIpKSB7CisgICAgZWxzZSBpZiAoIWFwX2Nh
c2VjbXBzdHIoa2V5LCAic3RpY2t5c2Vzc2lvbnNlcCIpKSB7CiAgICAgICAgIC8qIHNlcGFyYXRv
ci9kZWxpbWl0ZXIgZm9yIHNlc3Npb25pZCBhbmQgcm91dGUsCiAgICAgICAgICAqIG5vcm1hbGx5
ICcuJwogICAgICAgICAgKi8KICAgICAgICAgaWYgKHN0cmxlbih2YWwpICE9IDEpIHsKLSAgICAg
ICAgICAgIGlmICghc3RyY2FzZWNtcCh2YWwsICJvZmYiKSkKKyAgICAgICAgICAgIGlmICghYXBf
Y2FzZWNtcHN0cih2YWwsICJvZmYiKSkKICAgICAgICAgICAgICAgICBiYWxhbmNlci0+cy0+c3Rp
Y2t5X3NlcGFyYXRvciA9IDA7CiAgICAgICAgICAgICBlbHNlICAgICAgCiAgICAgICAgICAgICAg
ICAgcmV0dXJuICJzdGlja3lzZXNzaW9uc2VwIG11c3QgYmUgYSBzaW5nbGUgY2hhcmFjdGVyIG9y
IE9mZiI7CkBAIC0zMTYsMTkgKzMxNiwxOSBAQCBzdGF0aWMgY29uc3QgY2hhciAqc2V0X2JhbGFu
Y2VyX3BhcmFtKHByb3h5X3NlcnZlcgogICAgICAgICBlbHNlCiAgICAgICAgICAgICBiYWxhbmNl
ci0+cy0+c3RpY2t5X3NlcGFyYXRvciA9ICp2YWw7CiAgICAgfQotICAgIGVsc2UgaWYgKCFzdHJj
YXNlY21wKGtleSwgIm5vZmFpbG92ZXIiKSkgeworICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3Ry
KGtleSwgIm5vZmFpbG92ZXIiKSkgewogICAgICAgICAvKiBJZiBzZXQgdG8gJ29uJyB0aGUgc2Vz
c2lvbiB3aWxsIGJyZWFrCiAgICAgICAgICAqIGlmIHRoZSB3b3JrZXIgaXMgaW4gZXJyb3Igc3Rh
dGUgb3IKICAgICAgICAgICogZGlzYWJsZWQuCiAgICAgICAgICAqLwotICAgICAgICBpZiAoIXN0
cmNhc2VjbXAodmFsLCAib24iKSkKKyAgICAgICAgaWYgKCFhcF9jYXNlY21wc3RyKHZhbCwgIm9u
IikpCiAgICAgICAgICAgICBiYWxhbmNlci0+cy0+c3RpY2t5X2ZvcmNlID0gMTsKLSAgICAgICAg
ZWxzZSBpZiAoIXN0cmNhc2VjbXAodmFsLCAib2ZmIikpCisgICAgICAgIGVsc2UgaWYgKCFhcF9j
YXNlY21wc3RyKHZhbCwgIm9mZiIpKQogICAgICAgICAgICAgYmFsYW5jZXItPnMtPnN0aWNreV9m
b3JjZSA9IDA7CiAgICAgICAgIGVsc2UKICAgICAgICAgICAgIHJldHVybiAiZmFpbG92ZXIgbXVz
dCBiZSBPbnxPZmYiOwogICAgIH0KLSAgICBlbHNlIGlmICghc3RyY2FzZWNtcChrZXksICJ0aW1l
b3V0IikpIHsKKyAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihrZXksICJ0aW1lb3V0IikpIHsK
ICAgICAgICAgLyogQmFsYW5jZXIgdGltZW91dCBpbiBzZWNvbmRzLgogICAgICAgICAgKiBJZiBz
ZXQgdGhpcyB3aWxsIGJlIHRoZSBtYXhpbXVtIHRpbWUgdG8KICAgICAgICAgICogd2FpdCBmb3Ig
YSBmcmVlIHdvcmtlci4KQEAgLTMzOSw3ICszMzksNyBAQCBzdGF0aWMgY29uc3QgY2hhciAqc2V0
X2JhbGFuY2VyX3BhcmFtKHByb3h5X3NlcnZlcgogICAgICAgICAgICAgcmV0dXJuICJ0aW1lb3V0
IG11c3QgYmUgYXQgbGVhc3Qgb25lIHNlY29uZCI7CiAgICAgICAgIGJhbGFuY2VyLT5zLT50aW1l
b3V0ID0gYXByX3RpbWVfZnJvbV9zZWMoaXZhbCk7CiAgICAgfQotICAgIGVsc2UgaWYgKCFzdHJj
YXNlY21wKGtleSwgIm1heGF0dGVtcHRzIikpIHsKKyAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0
cihrZXksICJtYXhhdHRlbXB0cyIpKSB7CiAgICAgICAgIC8qIE1heGltdW0gbnVtYmVyIG9mIGZh
aWxvdmVyIGF0dGVtcHRzIGJlZm9yZQogICAgICAgICAgKiBnaXZpbmcgdXAuCiAgICAgICAgICAq
LwpAQCAtMzQ5LDcgKzM0OSw3IEBAIHN0YXRpYyBjb25zdCBjaGFyICpzZXRfYmFsYW5jZXJfcGFy
YW0ocHJveHlfc2VydmVyCiAgICAgICAgIGJhbGFuY2VyLT5zLT5tYXhfYXR0ZW1wdHMgPSBpdmFs
OwogICAgICAgICBiYWxhbmNlci0+cy0+bWF4X2F0dGVtcHRzX3NldCA9IDE7CiAgICAgfQotICAg
IGVsc2UgaWYgKCFzdHJjYXNlY21wKGtleSwgImxibWV0aG9kIikpIHsKKyAgICBlbHNlIGlmICgh
YXBfY2FzZWNtcHN0cihrZXksICJsYm1ldGhvZCIpKSB7CiAgICAgICAgIHByb3h5X2JhbGFuY2Vy
X21ldGhvZCAqcHJvdmlkZXI7CiAgICAgICAgIGlmIChzdHJsZW4odmFsKSA+IChzaXplb2YoYmFs
YW5jZXItPnMtPmxicG5hbWUpLTEpKQogICAgICAgICAgICAgcmV0dXJuICJ1bmtub3duIGxibWV0
aG9kIjsKQEAgLTM2NSwxOSArMzY1LDE5IEBAIHN0YXRpYyBjb25zdCBjaGFyICpzZXRfYmFsYW5j
ZXJfcGFyYW0ocHJveHlfc2VydmVyCiAgICAgICAgIH0KICAgICAgICAgcmV0dXJuICJ1bmtub3du
IGxibWV0aG9kIjsKICAgICB9Ci0gICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAoa2V5LCAic2NvbG9u
cGF0aGRlbGltIikpIHsKKyAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihrZXksICJzY29sb25w
YXRoZGVsaW0iKSkgewogICAgICAgICAvKiBJZiBzZXQgdG8gJ29uJyB0aGVuICc7JyB3aWxsIGFs
c28gYmUKICAgICAgICAgICogdXNlZCBhcyBhIHNlc3Npb24gcGF0aCBzZXBhcmF0b3IvZGVsaW0g
KGFsYQogICAgICAgICAgKiBtb2RfamspCiAgICAgICAgICAqLwotICAgICAgICBpZiAoIXN0cmNh
c2VjbXAodmFsLCAib24iKSkKKyAgICAgICAgaWYgKCFhcF9jYXNlY21wc3RyKHZhbCwgIm9uIikp
CiAgICAgICAgICAgICBiYWxhbmNlci0+cy0+c2NvbG9uc2VwID0gMTsKLSAgICAgICAgZWxzZSBp
ZiAoIXN0cmNhc2VjbXAodmFsLCAib2ZmIikpCisgICAgICAgIGVsc2UgaWYgKCFhcF9jYXNlY21w
c3RyKHZhbCwgIm9mZiIpKQogICAgICAgICAgICAgYmFsYW5jZXItPnMtPnNjb2xvbnNlcCA9IDA7
CiAgICAgICAgIGVsc2UKICAgICAgICAgICAgIHJldHVybiAic2NvbG9ucGF0aGRlbGltIG11c3Qg
YmUgT258T2ZmIjsKICAgICB9Ci0gICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAoa2V5LCAiZmFpbG9u
c3RhdHVzIikpIHsKKyAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihrZXksICJmYWlsb25zdGF0
dXMiKSkgewogICAgICAgICBjaGFyICp2YWxfc3BsaXQ7CiAgICAgICAgIGNoYXIgKnN0YXR1czsK
ICAgICAgICAgY2hhciAqdG9rX3N0YXRlOwpAQCAtMzk5LDE2ICszOTksMTYgQEAgc3RhdGljIGNv
bnN0IGNoYXIgKnNldF9iYWxhbmNlcl9wYXJhbShwcm94eV9zZXJ2ZXIKICAgICAgICAgfQogCiAg
ICAgfQotICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKGtleSwgImZhaWxvbnRpbWVvdXQiKSkgewot
ICAgICAgICBpZiAoIXN0cmNhc2VjbXAodmFsLCAib24iKSkKKyAgICBlbHNlIGlmICghYXBfY2Fz
ZWNtcHN0cihrZXksICJmYWlsb250aW1lb3V0IikpIHsKKyAgICAgICAgaWYgKCFhcF9jYXNlY21w
c3RyKHZhbCwgIm9uIikpCiAgICAgICAgICAgICBiYWxhbmNlci0+ZmFpbG9udGltZW91dCA9IDE7
Ci0gICAgICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKHZhbCwgIm9mZiIpKQorICAgICAgICBlbHNl
IGlmICghYXBfY2FzZWNtcHN0cih2YWwsICJvZmYiKSkKICAgICAgICAgICAgIGJhbGFuY2VyLT5m
YWlsb250aW1lb3V0ID0gMDsKICAgICAgICAgZWxzZQogICAgICAgICAgICAgcmV0dXJuICJmYWls
b250aW1lb3V0IG11c3QgYmUgT258T2ZmIjsKICAgICB9Ci0gICAgZWxzZSBpZiAoIXN0cmNhc2Vj
bXAoa2V5LCAibm9uY2UiKSkgewotICAgICAgICBpZiAoIXN0cmNhc2VjbXAodmFsLCAiTm9uZSIp
KSB7CisgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAibm9uY2UiKSkgeworICAgICAg
ICBpZiAoIWFwX2Nhc2VjbXBzdHIodmFsLCAiTm9uZSIpKSB7CiAgICAgICAgICAgICAqYmFsYW5j
ZXItPnMtPm5vbmNlID0gJ1wwJzsKICAgICAgICAgfQogICAgICAgICBlbHNlIHsKQEAgLTQxNywx
NiArNDE3LDE2IEBAIHN0YXRpYyBjb25zdCBjaGFyICpzZXRfYmFsYW5jZXJfcGFyYW0ocHJveHlf
c2VydmVyCiAgICAgICAgICAgICB9CiAgICAgICAgIH0KICAgICB9Ci0gICAgZWxzZSBpZiAoIXN0
cmNhc2VjbXAoa2V5LCAiZ3Jvd3RoIikpIHsKKyAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0cihr
ZXksICJncm93dGgiKSkgewogICAgICAgICBpdmFsID0gYXRvaSh2YWwpOwogICAgICAgICBpZiAo
aXZhbCA8IDEgfHwgaXZhbCA+IDEwMCkgICAvKiBhcmJpdHJhcnkgbGltaXQgaGVyZSAqLwogICAg
ICAgICAgICAgcmV0dXJuICJncm93dGggbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwMCI7CiAgICAg
ICAgIGJhbGFuY2VyLT5ncm93dGggPSBpdmFsOwogICAgIH0KLSAgICBlbHNlIGlmICghc3RyY2Fz
ZWNtcChrZXksICJmb3JjZXJlY292ZXJ5IikpIHsKLSAgICAgICAgaWYgKCFzdHJjYXNlY21wKHZh
bCwgIm9uIikpCisgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIoa2V5LCAiZm9yY2VyZWNvdmVy
eSIpKSB7CisgICAgICAgIGlmICghYXBfY2FzZWNtcHN0cih2YWwsICJvbiIpKQogICAgICAgICAg
ICAgYmFsYW5jZXItPnMtPmZvcmNlcmVjb3ZlcnkgPSAxOwotICAgICAgICBlbHNlIGlmICghc3Ry
Y2FzZWNtcCh2YWwsICJvZmYiKSkKKyAgICAgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIodmFs
LCAib2ZmIikpCiAgICAgICAgICAgICBiYWxhbmNlci0+cy0+Zm9yY2VyZWNvdmVyeSA9IDA7CiAg
ICAgICAgIGVsc2UKICAgICAgICAgICAgIHJldHVybiAiZm9yY2VyZWNvdmVyeSBtdXN0IGJlIE9u
fE9mZiI7CkBAIC01MTIsNyArNTEyLDcgQEAgc3RhdGljIGludCBwcm94eV9kZXRlY3QocmVxdWVz
dF9yZWMgKnIpCiAgICAgaWYgKGNvbmYtPnJlcSAmJiByLT5wYXJzZWRfdXJpLnNjaGVtZSkgewog
ICAgICAgICAvKiBidXQgaXQgbWlnaHQgYmUgc29tZXRoaW5nIHZob3N0ZWQgKi8KICAgICAgICAg
aWYgKCEoci0+cGFyc2VkX3VyaS5ob3N0bmFtZQotICAgICAgICAgICAgICAmJiAhc3RyY2FzZWNt
cChyLT5wYXJzZWRfdXJpLnNjaGVtZSwgYXBfaHR0cF9zY2hlbWUocikpCisgICAgICAgICAgICAg
ICYmICFhcF9jYXNlY21wc3RyKHItPnBhcnNlZF91cmkuc2NoZW1lLCBhcF9odHRwX3NjaGVtZShy
KSkKICAgICAgICAgICAgICAgJiYgYXBfbWF0Y2hlc19yZXF1ZXN0X3Zob3N0KHIsIHItPnBhcnNl
ZF91cmkuaG9zdG5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAoYXByX3BvcnRfdCkoci0+cGFyc2VkX3VyaS5wb3J0X3N0ciA/IHItPnBhcnNlZF91cmkucG9y
dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IDogYXBfZGVmYXVsdF9wb3J0KHIpKSkpKSB7CkBAIC04OTEsNyArODkxLDcgQEAgc3RhdGljIGlu
dCBwcm94eV9uZWVkc2RvbWFpbihyZXF1ZXN0X3JlYyAqciwgY29uc3QKICAgICAvKiBJZiBob3N0
IGRvZXMgY29udGFpbiBhIGRvdCBhbHJlYWR5LCBvciBpdCBpcyAibG9jYWxob3N0IiwgZGVjbGlu
ZSAqLwogICAgIGlmIChzdHJjaHIoci0+cGFyc2VkX3VyaS5ob3N0bmFtZSwgJy4nKSAhPSBOVUxM
IC8qIGhhcyBkb21haW4sIG9yIElQdjQgbGl0ZXJhbCAqLwogICAgICB8fCBzdHJjaHIoci0+cGFy
c2VkX3VyaS5ob3N0bmFtZSwgJzonKSAhPSBOVUxMIC8qIElQdjYgbGl0ZXJhbCAqLwotICAgICB8
fCBzdHJjYXNlY21wKHItPnBhcnNlZF91cmkuaG9zdG5hbWUsICJsb2NhbGhvc3QiKSA9PSAwKQor
ICAgICB8fCBhcF9jYXNlY21wc3RyKHItPnBhcnNlZF91cmkuaG9zdG5hbWUsICJsb2NhbGhvc3Qi
KSA9PSAwKQogICAgICAgICByZXR1cm4gREVDTElORUQ7ICAgIC8qIGhvc3QgbmFtZSBoYXMgYSBk
b3QgYWxyZWFkeSAqLwogCiAgICAgcmVmID0gYXByX3RhYmxlX2dldChyLT5oZWFkZXJzX2luLCAi
UmVmZXJlciIpOwpAQCAtMTA5Nyw5ICsxMDk3LDkgQEAgc3RhdGljIGludCBwcm94eV9oYW5kbGVy
KHJlcXVlc3RfcmVjICpyKQogICAgICAgICAgICAgICAgIGlmIChzdHJjbXAoZW50c1tpXS5zY2hl
bWUsICIqIikgPT0gMCB8fAogICAgICAgICAgICAgICAgICAgICAoZW50c1tpXS51c2VfcmVnZXgg
JiYKICAgICAgICAgICAgICAgICAgICAgIGFwX3JlZ2V4ZWMoZW50c1tpXS5yZWdleHAsIHVybCwg
MCwgTlVMTCwgMCkgPT0gMCkgfHwKLSAgICAgICAgICAgICAgICAgICAgKHAyID09IE5VTEwgJiYg
c3RyY2FzZWNtcChzY2hlbWUsIGVudHNbaV0uc2NoZW1lKSA9PSAwKSB8fAorICAgICAgICAgICAg
ICAgICAgICAocDIgPT0gTlVMTCAmJiBhcF9jYXNlY21wc3RyKHNjaGVtZSwgZW50c1tpXS5zY2hl
bWUpID09IDApIHx8CiAgICAgICAgICAgICAgICAgICAgIChwMiAhPSBOVUxMICYmCi0gICAgICAg
ICAgICAgICAgICAgIHN0cm5jYXNlY21wKHVybCwgZW50c1tpXS5zY2hlbWUsCisgICAgICAgICAg
ICAgICAgICAgIGFwX2Nhc2VjbXBzdHJuKHVybCwgZW50c1tpXS5zY2hlbWUsCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHN0cmxlbihlbnRzW2ldLnNjaGVtZSkpID09IDApKSB7CiAK
ICAgICAgICAgICAgICAgICAgICAgLyogaGFuZGxlIHRoZSBzY2hlbWUgKi8KQEAgLTE0OTAsNyAr
MTQ5MCw3IEBAIFBST1hZX0RFQ0xBUkUoY29uc3QgY2hhciAqKSBhcF9wcm94eV9kZV9zb2NrZXRm
eShhCiAgICAgICogV2UgY291bGQgYmUgcGFzc2VkIGEgVVJMIGR1cmluZyB0aGUgY29uZmlnIHN0
YWdlIHRoYXQgY29udGFpbnMKICAgICAgKiB0aGUgVURTIHBhdGguLi4gaWdub3JlIGl0CiAgICAg
ICovCi0gICAgaWYgKCFzdHJuY2FzZWNtcCh1cmwsICJ1bml4OiIsIDUpICYmCisgICAgaWYgKCFh
cF9jYXNlY21wc3Rybih1cmwsICJ1bml4OiIsIDUpICYmCiAgICAgICAgICgocHRyID0gYXBfc3Ry
Y2hyX2ModXJsLCAnfCcpKSAhPSBOVUxMKSkgewogICAgICAgICAvKiBtb3ZlIHBhc3QgdGhlICd1
bml4Oi4uLnwnIFVEUyBwYXRoIGluZm8gKi8KICAgICAgICAgY29uc3QgY2hhciAqcmV0LCAqYzsK
SW5kZXg6IG1vZHVsZXMvcHJveHkvbW9kX3Byb3h5X2FqcC5jCj09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0tIG1vZHVs
ZXMvcHJveHkvbW9kX3Byb3h5X2FqcC5jCShyZXZpc2lvbiAxNzE2MTg5KQorKysgbW9kdWxlcy9w
cm94eS9tb2RfcHJveHlfYWpwLmMJKHdvcmtpbmcgY29weSkKQEAgLTM1LDcgKzM1LDcgQEAgc3Rh
dGljIGludCBwcm94eV9hanBfY2Fub24ocmVxdWVzdF9yZWMgKnIsIGNoYXIgKnUKICAgICBhcHJf
cG9ydF90IHBvcnQsIGRlZl9wb3J0OwogCiAgICAgLyogYXBfcG9ydF9vZl9zY2hlbWUoKSAqLwot
ICAgIGlmIChzdHJuY2FzZWNtcCh1cmwsICJhanA6IiwgNCkgPT0gMCkgeworICAgIGlmIChhcF9j
YXNlY21wc3Rybih1cmwsICJhanA6IiwgNCkgPT0gMCkgewogICAgICAgICB1cmwgKz0gNDsKICAg
ICB9CiAgICAgZWxzZSB7CkBAIC0yNDUsNyArMjQ1LDcgQEAgc3RhdGljIGludCBhcF9wcm94eV9h
anBfcmVxdWVzdChhcHJfcG9vbF90ICpwLCByZXEKICAgICAvKiByZWFkIHRoZSBmaXJzdCBibG9j
IG9mIGRhdGEgKi8KICAgICBpbnB1dF9icmlnYWRlID0gYXByX2JyaWdhZGVfY3JlYXRlKHAsIHIt
PmNvbm5lY3Rpb24tPmJ1Y2tldF9hbGxvYyk7CiAgICAgdGVuYyA9IGFwcl90YWJsZV9nZXQoci0+
aGVhZGVyc19pbiwgIlRyYW5zZmVyLUVuY29kaW5nIik7Ci0gICAgaWYgKHRlbmMgJiYgKHN0cmNh
c2VjbXAodGVuYywgImNodW5rZWQiKSA9PSAwKSkgeworICAgIGlmICh0ZW5jICYmIChhcF9jYXNl
Y21wc3RyKHRlbmMsICJjaHVua2VkIikgPT0gMCkpIHsKICAgICAgICAgLyogVGhlIEFKUCBwcm90
b2NvbCBkb2VzIG5vdCB3YW50IGJvZHkgZGF0YSB5ZXQgKi8KICAgICAgICAgYXBfbG9nX3JlcnJv
cihBUExPR19NQVJLLCBBUExPR19ERUJVRywgMCwgciwgQVBMT0dOTygwMDg3MCkgInJlcXVlc3Qg
aXMgY2h1bmtlZCIpOwogICAgIH0gZWxzZSB7CkBAIC03MzQsNyArNzM0LDcgQEAgc3RhdGljIGlu
dCBwcm94eV9hanBfaGFuZGxlcihyZXF1ZXN0X3JlYyAqciwgcHJveHkKICAgICBhcHJfcG9vbF90
ICpwID0gci0+cG9vbDsKICAgICBhcHJfdXJpX3QgKnVyaTsKIAotICAgIGlmIChzdHJuY2FzZWNt
cCh1cmwsICJhanA6IiwgNCkgIT0gMCkgeworICAgIGlmIChhcF9jYXNlY21wc3Rybih1cmwsICJh
anA6IiwgNCkgIT0gMCkgewogICAgICAgICBhcF9sb2dfcmVycm9yKEFQTE9HX01BUkssIEFQTE9H
X0RFQlVHLCAwLCByLCBBUExPR05PKDAwODk0KSAiZGVjbGluaW5nIFVSTCAlcyIsIHVybCk7CiAg
ICAgICAgIHJldHVybiBERUNMSU5FRDsKICAgICB9CkluZGV4OiBtb2R1bGVzL3Byb3h5L21vZF9w
cm94eV9iYWxhbmNlci5jCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0tIG1vZHVsZXMvcHJveHkvbW9kX3Byb3h5X2Jh
bGFuY2VyLmMJKHJldmlzaW9uIDE3MTYxODkpCisrKyBtb2R1bGVzL3Byb3h5L21vZF9wcm94eV9i
YWxhbmNlci5jCSh3b3JraW5nIGNvcHkpCkBAIC02Myw3ICs2Myw3IEBAIHN0YXRpYyBpbnQgcHJv
eHlfYmFsYW5jZXJfY2Fub24ocmVxdWVzdF9yZWMgKnIsIGNoCiAgICAgYXByX3BvcnRfdCBwb3J0
ID0gMDsKIAogICAgIC8qIFRPRE86IG9mZnNldCBvZiBCQUxBTkNFUl9QUkVGSVggPz8gKi8KLSAg
ICBpZiAoc3RybmNhc2VjbXAodXJsLCAiYmFsYW5jZXI6IiwgOSkgPT0gMCkgeworICAgIGlmIChh
cF9jYXNlY21wc3Rybih1cmwsICJiYWxhbmNlcjoiLCA5KSA9PSAwKSB7CiAgICAgICAgIHVybCAr
PSA5OwogICAgIH0KICAgICBlbHNlIHsKQEAgLTEzNzgsNyArMTM3OCw3IEBAIHN0YXRpYyBpbnQg
YmFsYW5jZXJfaGFuZGxlcihyZXF1ZXN0X3JlYyAqcikKICAgICAgICAgICAgICAgICBhcF9ycHJp
bnRmKHIsICIgICAgICAgICAgPGh0dHBkOmxic2V0PiVkPC9odHRwZDpsYnNldD5cbiIsCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXItPnMtPmxic2V0KTsKICAgICAgICAgICAgICAg
ICAvKiBFbmQgcHJveHlfd29ya2VyX3N0YXQgKi8KLSAgICAgICAgICAgICAgICBpZiAoIXN0cmNh
c2VjbXAod29ya2VyLT5zLT5zY2hlbWUsICJhanAiKSkgeworICAgICAgICAgICAgICAgIGlmICgh
YXBfY2FzZWNtcHN0cih3b3JrZXItPnMtPnNjaGVtZSwgImFqcCIpKSB7CiAgICAgICAgICAgICAg
ICAgICAgIGFwX3JwdXRzKCIgICAgICAgICAgPGh0dHBkOmZsdXNocGFja2V0cz4iLCByKTsKICAg
ICAgICAgICAgICAgICAgICAgc3dpdGNoICh3b3JrZXItPnMtPmZsdXNoX3BhY2tldHMpIHsKICAg
ICAgICAgICAgICAgICAgICAgICAgIGNhc2UgZmx1c2hfb2ZmOgpJbmRleDogbW9kdWxlcy9wcm94
eS9tb2RfcHJveHlfZmNnaS5jCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0tIG1vZHVsZXMvcHJveHkvbW9kX3Byb3h5
X2ZjZ2kuYwkocmV2aXNpb24gMTcxNjE4OSkKKysrIG1vZHVsZXMvcHJveHkvbW9kX3Byb3h5X2Zj
Z2kuYwkod29ya2luZyBjb3B5KQpAQCAtMzksNyArMzksNyBAQCBzdGF0aWMgaW50IHByb3h5X2Zj
Z2lfY2Fub24ocmVxdWVzdF9yZWMgKnIsIGNoYXIgKgogICAgIGZjZ2lfcmVxX2NvbmZpZ190ICpy
Y29uZiA9IE5VTEw7CiAgICAgY29uc3QgY2hhciAqcGF0aGluZm9fdHlwZSA9IE5VTEw7CiAKLSAg
ICBpZiAoc3RybmNhc2VjbXAodXJsLCAiZmNnaToiLCA1KSA9PSAwKSB7CisgICAgaWYgKGFwX2Nh
c2VjbXBzdHJuKHVybCwgImZjZ2k6IiwgNSkgPT0gMCkgewogICAgICAgICB1cmwgKz0gNTsKICAg
ICB9CiAgICAgZWxzZSB7CkBAIC04NzgsNyArODc4LDcgQEAgc3RhdGljIGludCBwcm94eV9mY2dp
X2hhbmRsZXIocmVxdWVzdF9yZWMgKnIsIHByb3gKICAgICAgICAgICAgICAgICAgICJ1cmw6ICVz
IHByb3h5bmFtZTogJXMgcHJveHlwb3J0OiAlZCIsCiAgICAgICAgICAgICAgICAgIHVybCwgcHJv
eHluYW1lLCBwcm94eXBvcnQpOwogCi0gICAgaWYgKHN0cm5jYXNlY21wKHVybCwgImZjZ2k6Iiwg
NSkgIT0gMCkgeworICAgIGlmIChhcF9jYXNlY21wc3Rybih1cmwsICJmY2dpOiIsIDUpICE9IDAp
IHsKICAgICAgICAgYXBfbG9nX3JlcnJvcihBUExPR19NQVJLLCBBUExPR19ERUJVRywgMCwgciwg
QVBMT0dOTygwMTA3NykgImRlY2xpbmluZyBVUkwgJXMiLCB1cmwpOwogICAgICAgICByZXR1cm4g
REVDTElORUQ7CiAgICAgfQpJbmRleDogbW9kdWxlcy9wcm94eS9tb2RfcHJveHlfZmRwYXNzLmMK
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PQotLS0gbW9kdWxlcy9wcm94eS9tb2RfcHJveHlfZmRwYXNzLmMJKHJldmlzaW9u
IDE3MTYxODkpCisrKyBtb2R1bGVzL3Byb3h5L21vZF9wcm94eV9mZHBhc3MuYwkod29ya2luZyBj
b3B5KQpAQCAtMzIsNyArMzIsNyBAQCBzdGF0aWMgaW50IHByb3h5X2ZkcGFzc19jYW5vbihyZXF1
ZXN0X3JlYyAqciwgY2hhcgogewogICAgIGNvbnN0IGNoYXIgKnBhdGg7CiAKLSAgICBpZiAoc3Ry
bmNhc2VjbXAodXJsLCAiZmQ6Ly8iLCA1KSA9PSAwKSB7CisgICAgaWYgKGFwX2Nhc2VjbXBzdHJu
KHVybCwgImZkOi8vIiwgNSkgPT0gMCkgewogICAgICAgICB1cmwgKz0gNTsKICAgICB9CiAgICAg
ZWxzZSB7CkBAIC0xMzIsNyArMTMyLDcgQEAgc3RhdGljIGludCBwcm94eV9mZHBhc3NfaGFuZGxl
cihyZXF1ZXN0X3JlYyAqciwgcHIKICAgICBhcHJfc29ja2V0X3QgKnNvY2s7CiAgICAgYXByX3Nv
Y2tldF90ICpjbGllbnRzb2NrOwogCi0gICAgaWYgKHN0cm5jYXNlY21wKHVybCwgImZkOi8vIiwg
NSkgPT0gMCkgeworICAgIGlmIChhcF9jYXNlY21wc3Rybih1cmwsICJmZDovLyIsIDUpID09IDAp
IHsKICAgICAgICAgdXJsICs9IDU7CiAgICAgfQogICAgIGVsc2UgewpJbmRleDogbW9kdWxlcy9w
cm94eS9tb2RfcHJveHlfZnRwLmMKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQotLS0gbW9kdWxlcy9wcm94eS9tb2RfcHJv
eHlfZnRwLmMJKHJldmlzaW9uIDE3MTYxODkpCisrKyBtb2R1bGVzL3Byb3h5L21vZF9wcm94eV9m
dHAuYwkod29ya2luZyBjb3B5KQpAQCAtMjk0LDcgKzI5NCw3IEBAIHN0YXRpYyBpbnQgcHJveHlf
ZnRwX2Nhbm9uKHJlcXVlc3RfcmVjICpyLCBjaGFyICp1CiAgICAgYXByX3BvcnRfdCBwb3J0LCBk
ZWZfcG9ydDsKIAogICAgIC8qICovCi0gICAgaWYgKHN0cm5jYXNlY21wKHVybCwgImZ0cDoiLCA0
KSA9PSAwKSB7CisgICAgaWYgKGFwX2Nhc2VjbXBzdHJuKHVybCwgImZ0cDoiLCA0KSA9PSAwKSB7
CiAgICAgICAgIHVybCArPSA0OwogICAgIH0KICAgICBlbHNlIHsKQEAgLTQ5NCw3ICs0OTQsNyBA
QCBzdGF0aWMgYXByX3N0YXR1c190IHByb3h5X3NlbmRfZGlyX2ZpbHRlcihhcF9maWx0ZQogICAg
ICAgICBwYXRoID0gYXByX3VyaV91bnBhcnNlKHAsICZmLT5yLT5wYXJzZWRfdXJpLCBBUFJfVVJJ
X1VOUF9PTUlUU0lURVBBUlQgfCBBUFJfVVJJX1VOUF9PTUlUUVVFUlkpOwogCiAgICAgICAgIC8q
IElmIHBhdGggYmVnYW4gd2l0aCAvJTJmLCBjaGFuZ2UgdGhlIGJhc2VkaXIgKi8KLSAgICAgICAg
aWYgKHN0cm5jYXNlY21wKHBhdGgsICIvJTJmIiwgNCkgPT0gMCkgeworICAgICAgICBpZiAoYXBf
Y2FzZWNtcHN0cm4ocGF0aCwgIi8lMmYiLCA0KSA9PSAwKSB7CiAgICAgICAgICAgICBiYXNlZGly
ID0gIi8lMmYiOwogICAgICAgICB9CiAKQEAgLTEwMDMsNyArMTAwMyw3IEBAIHN0YXRpYyBpbnQg
cHJveHlfZnRwX2hhbmRsZXIocmVxdWVzdF9yZWMgKnIsIHByb3h5CiAgICAgICAgICAgICAgICAg
ICAgICAgcHJveHlob3N0KTsKICAgICAgICAgcmV0dXJuIERFQ0xJTkVEOyAgICAgICAgLyogcHJv
eHkgY29ubmVjdGlvbnMgYXJlIHZpYSBIVFRQICovCiAgICAgfQotICAgIGlmIChzdHJuY2FzZWNt
cCh1cmwsICJmdHA6IiwgNCkpIHsKKyAgICBpZiAoYXBfY2FzZWNtcHN0cm4odXJsLCAiZnRwOiIs
IDQpKSB7CiAgICAgICAgIGFwX2xvZ19yZXJyb3IoQVBMT0dfTUFSSywgQVBMT0dfVFJBQ0UzLCAw
LCByLAogICAgICAgICAgICAgICAgICAgICAgICJkZWNsaW5pbmcgVVJMICVzIC0gbm90IGZ0cDoi
LCB1cmwpOwogICAgICAgICByZXR1cm4gREVDTElORUQ7ICAgICAgICAvKiBvbmx5IGludGVyZXN0
ZWQgaW4gRlRQICovCkBAIC0xMDc0LDcgKzEwNzQsNyBAQCBzdGF0aWMgaW50IHByb3h5X2Z0cF9o
YW5kbGVyKHJlcXVlc3RfcmVjICpyLCBwcm94eQogICAgICAqIHN0aWxsIHNtYWxsZXIgdGhhdCB0
aGUgVVJMIGlzIGxvZ2dlZCByZWd1bGFybHkuCiAgICAgICovCiAgICAgaWYgKChwYXNzd29yZCA9
IGFwcl90YWJsZV9nZXQoci0+aGVhZGVyc19pbiwgIkF1dGhvcml6YXRpb24iKSkgIT0gTlVMTAot
ICAgICAgICAmJiBzdHJjYXNlY21wKGFwX2dldHdvcmQoci0+cG9vbCwgJnBhc3N3b3JkLCAnICcp
LCAiQmFzaWMiKSA9PSAwCisgICAgICAgICYmIGFwX2Nhc2VjbXBzdHIoYXBfZ2V0d29yZChyLT5w
b29sLCAmcGFzc3dvcmQsICcgJyksICJCYXNpYyIpID09IDAKICAgICAgICAgJiYgKHBhc3N3b3Jk
ID0gYXBfcGJhc2U2NGRlY29kZShyLT5wb29sLCBwYXNzd29yZCkpWzBdICE9ICc6JykgewogICAg
ICAgICAvKiBDaGVjayB0aGUgZGVjb2RlZCBzdHJpbmcgZm9yIHNwZWNpYWwgY2hhcmFjdGVycy4g
Ki8KICAgICAgICAgaWYgKCFmdHBfY2hlY2tfc3RyaW5nKHBhc3N3b3JkKSkgewpAQCAtMTMwNiw3
ICsxMzA2LDcgQEAgc3RhdGljIGludCBwcm94eV9mdHBfaGFuZGxlcihyZXF1ZXN0X3JlYyAqciwg
cHJveHkKICAgICAvKiBTcGVjaWFsIGhhbmRsaW5nIGZvciBsZWFkaW5nICIlMmYiOiB0aGlzIGVu
Zm9yY2VzIGEgImN3ZCAvIgogICAgICAqIG91dCBvZiB0aGUgJEhPTUUgZGlyZWN0b3J5IHdoaWNo
IHdhcyB0aGUgc3RhcnRpbmcgcG9pbnQgYWZ0ZXIgbG9naW4KICAgICAgKi8KLSAgICBpZiAoc3Ry
bmNhc2VjbXAocGF0aCwgIiUyZiIsIDMpID09IDApIHsKKyAgICBpZiAoYXBfY2FzZWNtcHN0cm4o
cGF0aCwgIiUyZiIsIDMpID09IDApIHsKICAgICAgICAgcGF0aCArPSAzOwogICAgICAgICB3aGls
ZSAoKnBhdGggPT0gJy8nKSAvKiBza2lwIGxlYWRpbmcgJy8nIChhZnRlciByb290ICUyZikgKi8K
ICAgICAgICAgICAgICsrcGF0aDsKSW5kZXg6IG1vZHVsZXMvcHJveHkvbW9kX3Byb3h5X2h0dHAu
Ywo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09Ci0tLSBtb2R1bGVzL3Byb3h5L21vZF9wcm94eV9odHRwLmMJKHJldmlzaW9u
IDE3MTYxODkpCisrKyBtb2R1bGVzL3Byb3h5L21vZF9wcm94eV9odHRwLmMJKHdvcmtpbmcgY29w
eSkKQEAgLTQzLDExICs0MywxMSBAQCBzdGF0aWMgaW50IHByb3h5X2h0dHBfY2Fub24ocmVxdWVz
dF9yZWMgKnIsIGNoYXIgKgogICAgIGFwcl9wb3J0X3QgcG9ydCwgZGVmX3BvcnQ7CiAKICAgICAv
KiBhcF9wb3J0X29mX3NjaGVtZSgpICovCi0gICAgaWYgKHN0cm5jYXNlY21wKHVybCwgImh0dHA6
IiwgNSkgPT0gMCkgeworICAgIGlmIChhcF9jYXNlY21wc3Rybih1cmwsICJodHRwOiIsIDUpID09
IDApIHsKICAgICAgICAgdXJsICs9IDU7CiAgICAgICAgIHNjaGVtZSA9ICJodHRwIjsKICAgICB9
Ci0gICAgZWxzZSBpZiAoc3RybmNhc2VjbXAodXJsLCAiaHR0cHM6IiwgNikgPT0gMCkgeworICAg
IGVsc2UgaWYgKGFwX2Nhc2VjbXBzdHJuKHVybCwgImh0dHBzOiIsIDYpID09IDApIHsKICAgICAg
ICAgdXJsICs9IDY7CiAgICAgICAgIHNjaGVtZSA9ICJodHRwcyI7CiAgICAgfQpAQCAtNzY1LDcg
Kzc2NSw3IEBAIGludCBhcF9wcm94eV9odHRwX3JlcXVlc3QoYXByX3Bvb2xfdCAqcCwgcmVxdWVz
dF9yCiAgICAgICogZW5jb2RpbmcgaGFzIGJlZW4gZG9uZSBieSB0aGUgZXh0ZW5zaW9ucycgaGFu
ZGxlciwgYW5kCiAgICAgICogZG8gbm90IG1vZGlmeSBhZGRfdGVfY2h1bmtlZCdzIGxvZ2ljCiAg
ICAgICovCi0gICAgaWYgKG9sZF90ZV92YWwgJiYgc3RyY2FzZWNtcChvbGRfdGVfdmFsLCAiY2h1
bmtlZCIpICE9IDApIHsKKyAgICBpZiAob2xkX3RlX3ZhbCAmJiBhcF9jYXNlY21wc3RyKG9sZF90
ZV92YWwsICJjaHVua2VkIikgIT0gMCkgewogICAgICAgICBhcF9sb2dfcmVycm9yKEFQTE9HX01B
UkssIEFQTE9HX0VSUiwgMCwgciwgQVBMT0dOTygwMTA5MykKICAgICAgICAgICAgICAgICAgICAg
ICAiJXMgVHJhbnNmZXItRW5jb2RpbmcgaXMgbm90IHN1cHBvcnRlZCIsIG9sZF90ZV92YWwpOwog
ICAgICAgICByZXR1cm4gSFRUUF9JTlRFUk5BTF9TRVJWRVJfRVJST1I7CkBAIC0xMDQ3LDcgKzEw
NDcsNyBAQCBzdGF0aWMgdm9pZCBwcm9jZXNzX3Byb3h5X2hlYWRlcihyZXF1ZXN0X3JlYyAqciwg
cAogICAgIH07CiAgICAgaW50IGk7CiAgICAgZm9yIChpID0gMDsgZGF0ZV9oZHJzW2ldOyArK2kp
IHsKLSAgICAgICAgaWYgKCFzdHJjYXNlY21wKGRhdGVfaGRyc1tpXSwga2V5KSkgeworICAgICAg
ICBpZiAoIWFwX2Nhc2VjbXBzdHIoZGF0ZV9oZHJzW2ldLCBrZXkpKSB7CiAgICAgICAgICAgICBh
cHJfdGFibGVfYWRkKHItPmhlYWRlcnNfb3V0LCBrZXksCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGRhdGVfY2Fub24oci0+cG9vbCwgdmFsdWUpKTsKICAgICAgICAgICAgIHJldHVybjsKQEAg
LTEwNTQsNyArMTA1NCw3IEBAIHN0YXRpYyB2b2lkIHByb2Nlc3NfcHJveHlfaGVhZGVyKHJlcXVl
c3RfcmVjICpyLCBwCiAgICAgICAgIH0KICAgICB9CiAgICAgZm9yIChpID0gMDsgdHJhbnNmb3Jt
X2hkcnNbaV0ubmFtZTsgKytpKSB7Ci0gICAgICAgIGlmICghc3RyY2FzZWNtcCh0cmFuc2Zvcm1f
aGRyc1tpXS5uYW1lLCBrZXkpKSB7CisgICAgICAgIGlmICghYXBfY2FzZWNtcHN0cih0cmFuc2Zv
cm1faGRyc1tpXS5uYW1lLCBrZXkpKSB7CiAgICAgICAgICAgICBhcHJfdGFibGVfYWRkKHItPmhl
YWRlcnNfb3V0LCBrZXksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICgqdHJhbnNmb3JtX2hk
cnNbaV0uZnVuYykociwgYywgdmFsdWUpKTsKICAgICAgICAgICAgIHJldHVybjsKSW5kZXg6IG1v
ZHVsZXMvcHJveHkvbW9kX3Byb3h5X3NjZ2kuYwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tLSBtb2R1bGVzL3Byb3h5
L21vZF9wcm94eV9zY2dpLmMJKHJldmlzaW9uIDE3MTYxODkpCisrKyBtb2R1bGVzL3Byb3h5L21v
ZF9wcm94eV9zY2dpLmMJKHdvcmtpbmcgY29weSkKQEAgLTE4MCw3ICsxODAsNyBAQCBzdGF0aWMg
aW50IHNjZ2lfY2Fub24ocmVxdWVzdF9yZWMgKnIsIGNoYXIgKnVybCkKICAgICBjb25zdCBjaGFy
ICplcnIsICpwYXRoOwogICAgIGFwcl9wb3J0X3QgcG9ydCwgZGVmX3BvcnQ7CiAKLSAgICBpZiAo
c3RybmNhc2VjbXAodXJsLCBTQ0hFTUUgIjovLyIsIHNpemVvZihTQ0hFTUUpICsgMikpIHsKKyAg
ICBpZiAoYXBfY2FzZWNtcHN0cm4odXJsLCBTQ0hFTUUgIjovLyIsIHNpemVvZihTQ0hFTUUpICsg
MikpIHsKICAgICAgICAgcmV0dXJuIERFQ0xJTkVEOwogICAgIH0KICAgICB1cmwgKz0gc2l6ZW9m
KFNDSEVNRSk7IC8qIEtlZXAgc2xhc2hlcyAqLwpAQCAtNDM0LDcgKzQzNCw3IEBAIHN0YXRpYyBp
bnQgcGFzc19yZXNwb25zZShyZXF1ZXN0X3JlYyAqciwgcHJveHlfY29uCiAgICAgICAgIGlmIChs
b2NhdGlvbiAmJiAqbG9jYXRpb24gPT0gJy8nKSB7CiAgICAgICAgICAgICBzY2dpX3JlcXVlc3Rf
Y29uZmlnICpyZXFfY29uZiA9IGFwcl9wYWxsb2Moci0+cG9vbCwKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplb2YoKnJlcV9jb25mKSk7
Ci0gICAgICAgICAgICBpZiAoc3RyY2FzZWNtcChsb2NhdGlvbl9oZWFkZXIsICJMb2NhdGlvbiIp
KSB7CisgICAgICAgICAgICBpZiAoYXBfY2FzZWNtcHN0cihsb2NhdGlvbl9oZWFkZXIsICJMb2Nh
dGlvbiIpKSB7CiAgICAgICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgICAg
ICBhcHJfdGFibGVfdW5zZXQoci0+ZXJyX2hlYWRlcnNfb3V0LCBsb2NhdGlvbl9oZWFkZXIpOwog
ICAgICAgICAgICAgICAgIH0KQEAgLTUzMyw3ICs1MzMsNyBAQCBzdGF0aWMgaW50IHNjZ2lfaGFu
ZGxlcihyZXF1ZXN0X3JlYyAqciwgcHJveHlfd29yawogICAgIGFwcl91cmlfdCAqdXJpID0gYXBy
X3BhbGxvYyhyLT5wb29sLCBzaXplb2YoKnVyaSkpOwogICAgIGNoYXIgZHVtbXk7CiAKLSAgICBp
ZiAoc3RybmNhc2VjbXAodXJsLCBTQ0hFTUUgIjovLyIsIHNpemVvZihTQ0hFTUUpICsgMikpIHsK
KyAgICBpZiAoYXBfY2FzZWNtcHN0cm4odXJsLCBTQ0hFTUUgIjovLyIsIHNpemVvZihTQ0hFTUUp
ICsgMikpIHsKICAgICAgICAgYXBfbG9nX3JlcnJvcihBUExPR19NQVJLLCBBUExPR19ERUJVRywg
MCwgciwgQVBMT0dOTygwMDg2NSkKICAgICAgICAgICAgICAgICAgICAgICAiZGVjbGluaW5nIFVS
TCAlcyIsIHVybCk7CiAgICAgICAgIHJldHVybiBERUNMSU5FRDsKSW5kZXg6IG1vZHVsZXMvcHJv
eHkvbW9kX3Byb3h5X3dzdHVubmVsLmMKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQotLS0gbW9kdWxlcy9wcm94eS9tb2Rf
cHJveHlfd3N0dW5uZWwuYwkocmV2aXNpb24gMTcxNjE4OSkKKysrIG1vZHVsZXMvcHJveHkvbW9k
X3Byb3h5X3dzdHVubmVsLmMJKHdvcmtpbmcgY29weSkKQEAgLTMzLDEyICszMywxMiBAQCBzdGF0
aWMgaW50IHByb3h5X3dzdHVubmVsX2Nhbm9uKHJlcXVlc3RfcmVjICpyLCBjaAogICAgIGFwcl9w
b3J0X3QgcG9ydCwgZGVmX3BvcnQ7CiAKICAgICAvKiBhcF9wb3J0X29mX3NjaGVtZSgpICovCi0g
ICAgaWYgKHN0cm5jYXNlY21wKHVybCwgIndzOiIsIDMpID09IDApIHsKKyAgICBpZiAoYXBfY2Fz
ZWNtcHN0cm4odXJsLCAid3M6IiwgMykgPT0gMCkgewogICAgICAgICB1cmwgKz0gMzsKICAgICAg
ICAgc2NoZW1lID0gIndzOiI7CiAgICAgICAgIGRlZl9wb3J0ID0gYXByX3VyaV9wb3J0X29mX3Nj
aGVtZSgiaHR0cCIpOwogICAgIH0KLSAgICBlbHNlIGlmIChzdHJuY2FzZWNtcCh1cmwsICJ3c3M6
IiwgNCkgPT0gMCkgeworICAgIGVsc2UgaWYgKGFwX2Nhc2VjbXBzdHJuKHVybCwgIndzczoiLCA0
KSA9PSAwKSB7CiAgICAgICAgIHVybCArPSA0OwogICAgICAgICBzY2hlbWUgPSAid3NzOiI7CiAg
ICAgICAgIGRlZl9wb3J0ID0gYXByX3VyaV9wb3J0X29mX3NjaGVtZSgiaHR0cHMiKTsKQEAgLTMy
MywxMSArMzIzLDExIEBAIHN0YXRpYyBpbnQgcHJveHlfd3N0dW5uZWxfaGFuZGxlcihyZXF1ZXN0
X3JlYyAqciwKICAgICBhcHJfdXJpX3QgKnVyaTsKICAgICBpbnQgaXNfc3NsID0gMDsKIAotICAg
IGlmIChzdHJuY2FzZWNtcCh1cmwsICJ3c3M6IiwgNCkgPT0gMCkgeworICAgIGlmIChhcF9jYXNl
Y21wc3Rybih1cmwsICJ3c3M6IiwgNCkgPT0gMCkgewogICAgICAgICBzY2hlbWUgPSAiV1NTIjsK
ICAgICAgICAgaXNfc3NsID0gMTsKICAgICB9Ci0gICAgZWxzZSBpZiAoc3RybmNhc2VjbXAodXJs
LCAid3M6IiwgMykgPT0gMCkgeworICAgIGVsc2UgaWYgKGFwX2Nhc2VjbXBzdHJuKHVybCwgIndz
OiIsIDMpID09IDApIHsKICAgICAgICAgc2NoZW1lID0gIldTIjsKICAgICB9CiAgICAgZWxzZSB7
CkBAIC0zMzYsNyArMzM2LDcgQEAgc3RhdGljIGludCBwcm94eV93c3R1bm5lbF9oYW5kbGVyKHJl
cXVlc3RfcmVjICpyLAogICAgIH0KIAogICAgIHVwZ3JhZGUgPSBhcHJfdGFibGVfZ2V0KHItPmhl
YWRlcnNfaW4sICJVcGdyYWRlIik7Ci0gICAgaWYgKCF1cGdyYWRlIHx8IHN0cmNhc2VjbXAodXBn
cmFkZSwgIldlYlNvY2tldCIpICE9IDApIHsKKyAgICBpZiAoIXVwZ3JhZGUgfHwgYXBfY2FzZWNt
cHN0cih1cGdyYWRlLCAiV2ViU29ja2V0IikgIT0gMCkgewogICAgICAgICBhcF9sb2dfcmVycm9y
KEFQTE9HX01BUkssIEFQTE9HX0RFQlVHLCAwLCByLCBBUExPR05PKDAyOTAwKQogICAgICAgICAg
ICAgICAgICAgICAgICJkZWNsaW5pbmcgVVJMICVzICAobm90IFdlYlNvY2tldCkiLCB1cmwpOwog
ICAgICAgICByZXR1cm4gREVDTElORUQ7CkluZGV4OiBtb2R1bGVzL3Byb3h5L3Byb3h5X3V0aWwu
Ywo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09Ci0tLSBtb2R1bGVzL3Byb3h5L3Byb3h5X3V0aWwuYwkocmV2aXNpb24gMTcx
NjE4OSkKKysrIG1vZHVsZXMvcHJveHkvcHJveHlfdXRpbC5jCSh3b3JraW5nIGNvcHkpCkBAIC0x
MDgxLDcgKzEwODEsNyBAQCBQUk9YWV9ERUNMQVJFKGludCkgYXBfcHJveHlfdmFsaWRfYmFsYW5j
ZXJfbmFtZShjaAogewogICAgIGlmICghaSkKICAgICAgICAgaSA9IHNpemVvZihCQUxBTkNFUl9Q
UkVGSVgpLTE7Ci0gICAgcmV0dXJuICghc3RybmNhc2VjbXAobmFtZSwgQkFMQU5DRVJfUFJFRklY
LCBpKSk7CisgICAgcmV0dXJuICghYXBfY2FzZWNtcHN0cm4obmFtZSwgQkFMQU5DRVJfUFJFRklY
LCBpKSk7CiB9CiAKIApAQCAtMTYzNCw3ICsxNjM0LDcgQEAgUFJPWFlfREVDTEFSRShjaGFyICop
IGFwX3Byb3h5X2RlZmluZV93b3JrZXIoYXByX3AKICAgICBpZiAocHRyKSB7CiAgICAgICAgICpw
dHIgPSAnXDAnOwogICAgICAgICBydiA9IGFwcl91cmlfcGFyc2UocCwgdXJsLCAmdXJpc29jayk7
Ci0gICAgICAgIGlmIChydiA9PSBBUFJfU1VDQ0VTUyAmJiAhc3RyY2FzZWNtcCh1cmlzb2NrLnNj
aGVtZSwgInVuaXgiKSkgeworICAgICAgICBpZiAocnYgPT0gQVBSX1NVQ0NFU1MgJiYgIWFwX2Nh
c2VjbXBzdHIodXJpc29jay5zY2hlbWUsICJ1bml4IikpIHsKICAgICAgICAgICAgIHNvY2twYXRo
ID0gYXBfcnVudGltZV9kaXJfcmVsYXRpdmUocCwgdXJpc29jay5wYXRoKTs7CiAgICAgICAgICAg
ICB1cmwgPSBwdHIrMTsgICAgLyogc28gd2UgZ2V0IHRoZSBzY2hlbWUgZm9yIHRoZSB1ZHMgKi8K
ICAgICAgICAgfQpAQCAtMzIzMyw3ICszMjMzLDcgQEAgc3RhdGljIGludCBmaW5kX2Nvbm5faGVh
ZGVycyh2b2lkICpkYXRhLCBjb25zdCBjaGEKICAgICAgICAgICAgIHZhbCsrOwogICAgICAgICB9
CiAgICAgICAgIG5hbWUgPSBhcF9nZXRfdG9rZW4oeC0+cG9vbCwgJnZhbCwgMCk7Ci0gICAgICAg
IGlmICghc3RyY2FzZWNtcChuYW1lLCAiY2xvc2UiKSkgeworICAgICAgICBpZiAoIWFwX2Nhc2Vj
bXBzdHIobmFtZSwgImNsb3NlIikpIHsKICAgICAgICAgICAgIHgtPmNsb3NlZCA9IDE7CiAgICAg
ICAgIH0KICAgICAgICAgaWYgKCF4LT5maXJzdCkgewpAQCAtMzQzMSw3ICszNDMxLDcgQEAgUFJP
WFlfREVDTEFSRShpbnQpIGFwX3Byb3h5X2NyZWF0ZV9oZHJicmdkKGFwcl9wb28KIAogICAgICAg
ICAvKiBBZGQgdGhlIEV4cGVjdCBoZWFkZXIgaWYgbm90IGFscmVhZHkgdGhlcmUuICovCiAgICAg
ICAgIGlmICgoKHZhbCA9IGFwcl90YWJsZV9nZXQoci0+aGVhZGVyc19pbiwgIkV4cGVjdCIpKSA9
PSBOVUxMKQotICAgICAgICAgICAgICAgIHx8IChzdHJjYXNlY21wKHZhbCwgIjEwMC1Db250aW51
ZSIpICE9IDAgLyogZmFzdCBwYXRoICovCisgICAgICAgICAgICAgICAgfHwgKGFwX2Nhc2VjbXBz
dHIodmFsLCAiMTAwLUNvbnRpbnVlIikgIT0gMCAvKiBmYXN0IHBhdGggKi8KICAgICAgICAgICAg
ICAgICAgICAgJiYgIWFwX2ZpbmRfdG9rZW4oci0+cG9vbCwgdmFsLCAiMTAwLUNvbnRpbnVlIikp
KSB7CiAgICAgICAgICAgICBhcHJfdGFibGVfbWVyZ2VuKHItPmhlYWRlcnNfaW4sICJFeHBlY3Qi
LCAiMTAwLUNvbnRpbnVlIik7CiAgICAgICAgIH0KQEAgLTM0OTQsMTUgKzM0OTQsMTUgQEAgUFJP
WFlfREVDTEFSRShpbnQpIGFwX3Byb3h5X2NyZWF0ZV9oZHJicmdkKGFwcl9wb28KICAgICAgICAg
ICAgIHx8IGhlYWRlcnNfaW5bY291bnRlcl0udmFsID09IE5VTEwKIAogICAgICAgICAgICAgLyog
QWxyZWFkeSBzZW50ICovCi0gICAgICAgICAgICB8fCAhc3RyY2FzZWNtcChoZWFkZXJzX2luW2Nv
dW50ZXJdLmtleSwgIkhvc3QiKQorICAgICAgICAgICAgfHwgIWFwX2Nhc2VjbXBzdHIoaGVhZGVy
c19pbltjb3VudGVyXS5rZXksICJIb3N0IikKIAogICAgICAgICAgICAgLyogQ2xlYXIgb3V0IGhv
cC1ieS1ob3AgcmVxdWVzdCBoZWFkZXJzIG5vdCB0byBzZW5kCiAgICAgICAgICAgICAgKiBSRkMy
NjE2IDEzLjUuMSBzYXlzIHdlIHNob3VsZCBzdHJpcCB0aGVzZSBoZWFkZXJzCiAgICAgICAgICAg
ICAgKi8KLSAgICAgICAgICAgIHx8ICFzdHJjYXNlY21wKGhlYWRlcnNfaW5bY291bnRlcl0ua2V5
LCAiS2VlcC1BbGl2ZSIpCi0gICAgICAgICAgICB8fCAhc3RyY2FzZWNtcChoZWFkZXJzX2luW2Nv
dW50ZXJdLmtleSwgIlRFIikKLSAgICAgICAgICAgIHx8ICFzdHJjYXNlY21wKGhlYWRlcnNfaW5b
Y291bnRlcl0ua2V5LCAiVHJhaWxlciIpCi0gICAgICAgICAgICB8fCAhc3RyY2FzZWNtcChoZWFk
ZXJzX2luW2NvdW50ZXJdLmtleSwgIlVwZ3JhZGUiKQorICAgICAgICAgICAgfHwgIWFwX2Nhc2Vj
bXBzdHIoaGVhZGVyc19pbltjb3VudGVyXS5rZXksICJLZWVwLUFsaXZlIikKKyAgICAgICAgICAg
IHx8ICFhcF9jYXNlY21wc3RyKGhlYWRlcnNfaW5bY291bnRlcl0ua2V5LCAiVEUiKQorICAgICAg
ICAgICAgfHwgIWFwX2Nhc2VjbXBzdHIoaGVhZGVyc19pbltjb3VudGVyXS5rZXksICJUcmFpbGVy
IikKKyAgICAgICAgICAgIHx8ICFhcF9jYXNlY21wc3RyKGhlYWRlcnNfaW5bY291bnRlcl0ua2V5
LCAiVXBncmFkZSIpCiAKICAgICAgICAgICAgICkgewogICAgICAgICAgICAgY29udGludWU7CkBA
IC0zNTEyLDcgKzM1MTIsNyBAQCBQUk9YWV9ERUNMQVJFKGludCkgYXBfcHJveHlfY3JlYXRlX2hk
cmJyZ2QoYXByX3BvbwogICAgICAgICAgKiBJZiB3ZSBoYXZlIHVzZWQgaXQgdGhlbiBNQVlCRTog
UkZDMjYxNiBzYXlzIHdlIE1BWSBwcm9wYWdhdGUgaXQuCiAgICAgICAgICAqIFNvIGxldCdzIG1h
a2UgaXQgY29uZmlndXJhYmxlIGJ5IGVudi4KICAgICAgICAgICovCi0gICAgICAgIGlmICghc3Ry
Y2FzZWNtcChoZWFkZXJzX2luW2NvdW50ZXJdLmtleSwiUHJveHktQXV0aG9yaXphdGlvbiIpKSB7
CisgICAgICAgIGlmICghYXBfY2FzZWNtcHN0cihoZWFkZXJzX2luW2NvdW50ZXJdLmtleSwiUHJv
eHktQXV0aG9yaXphdGlvbiIpKSB7CiAgICAgICAgICAgICBpZiAoci0+dXNlciAhPSBOVUxMKSB7
IC8qIHdlJ3ZlIGF1dGhlbnRpY2F0ZWQgKi8KICAgICAgICAgICAgICAgICBpZiAoIWFwcl90YWJs
ZV9nZXQoci0+c3VicHJvY2Vzc19lbnYsICJQcm94eS1DaGFpbi1BdXRoIikpIHsKICAgICAgICAg
ICAgICAgICAgICAgY29udGludWU7CkBAIC0zNTIyLDExICszNTIyLDExIEBAIFBST1hZX0RFQ0xB
UkUoaW50KSBhcF9wcm94eV9jcmVhdGVfaGRyYnJnZChhcHJfcG9vCiAKICAgICAgICAgLyogU2tp
cCBUcmFuc2Zlci1FbmNvZGluZyBhbmQgQ29udGVudC1MZW5ndGggZm9yIG5vdy4KICAgICAgICAg
ICovCi0gICAgICAgIGlmICghc3RyY2FzZWNtcChoZWFkZXJzX2luW2NvdW50ZXJdLmtleSwgIlRy
YW5zZmVyLUVuY29kaW5nIikpIHsKKyAgICAgICAgaWYgKCFhcF9jYXNlY21wc3RyKGhlYWRlcnNf
aW5bY291bnRlcl0ua2V5LCAiVHJhbnNmZXItRW5jb2RpbmciKSkgewogICAgICAgICAgICAgKm9s
ZF90ZV92YWwgPSBoZWFkZXJzX2luW2NvdW50ZXJdLnZhbDsKICAgICAgICAgICAgIGNvbnRpbnVl
OwogICAgICAgICB9Ci0gICAgICAgIGlmICghc3RyY2FzZWNtcChoZWFkZXJzX2luW2NvdW50ZXJd
LmtleSwgIkNvbnRlbnQtTGVuZ3RoIikpIHsKKyAgICAgICAgaWYgKCFhcF9jYXNlY21wc3RyKGhl
YWRlcnNfaW5bY291bnRlcl0ua2V5LCAiQ29udGVudC1MZW5ndGgiKSkgewogICAgICAgICAgICAg
Km9sZF9jbF92YWwgPSBoZWFkZXJzX2luW2NvdW50ZXJdLnZhbDsKICAgICAgICAgICAgIGNvbnRp
bnVlOwogICAgICAgICB9CkBAIC0zNTMzLDExICszNTMzLDExIEBAIFBST1hZX0RFQ0xBUkUoaW50
KSBhcF9wcm94eV9jcmVhdGVfaGRyYnJnZChhcHJfcG9vCiAKICAgICAgICAgLyogZm9yIHN1Yi1y
ZXF1ZXN0cywgaWdub3JlIGZyZXNobmVzcy9leHBpcnkgaGVhZGVycyAqLwogICAgICAgICBpZiAo
ci0+bWFpbikgewotICAgICAgICAgICAgaWYgKCAgICFzdHJjYXNlY21wKGhlYWRlcnNfaW5bY291
bnRlcl0ua2V5LCAiSWYtTWF0Y2giKQotICAgICAgICAgICAgICAgIHx8ICFzdHJjYXNlY21wKGhl
YWRlcnNfaW5bY291bnRlcl0ua2V5LCAiSWYtTW9kaWZpZWQtU2luY2UiKQotICAgICAgICAgICAg
ICAgIHx8ICFzdHJjYXNlY21wKGhlYWRlcnNfaW5bY291bnRlcl0ua2V5LCAiSWYtUmFuZ2UiKQot
ICAgICAgICAgICAgICAgIHx8ICFzdHJjYXNlY21wKGhlYWRlcnNfaW5bY291bnRlcl0ua2V5LCAi
SWYtVW5tb2RpZmllZC1TaW5jZSIpCi0gICAgICAgICAgICAgICAgfHwgIXN0cmNhc2VjbXAoaGVh
ZGVyc19pbltjb3VudGVyXS5rZXksICJJZi1Ob25lLU1hdGNoIikpIHsKKyAgICAgICAgICAgIGlm
ICggICAhYXBfY2FzZWNtcHN0cihoZWFkZXJzX2luW2NvdW50ZXJdLmtleSwgIklmLU1hdGNoIikK
KyAgICAgICAgICAgICAgICB8fCAhYXBfY2FzZWNtcHN0cihoZWFkZXJzX2luW2NvdW50ZXJdLmtl
eSwgIklmLU1vZGlmaWVkLVNpbmNlIikKKyAgICAgICAgICAgICAgICB8fCAhYXBfY2FzZWNtcHN0
cihoZWFkZXJzX2luW2NvdW50ZXJdLmtleSwgIklmLVJhbmdlIikKKyAgICAgICAgICAgICAgICB8
fCAhYXBfY2FzZWNtcHN0cihoZWFkZXJzX2luW2NvdW50ZXJdLmtleSwgIklmLVVubW9kaWZpZWQt
U2luY2UiKQorICAgICAgICAgICAgICAgIHx8ICFhcF9jYXNlY21wc3RyKGhlYWRlcnNfaW5bY291
bnRlcl0ua2V5LCAiSWYtTm9uZS1NYXRjaCIpKSB7CiAgICAgICAgICAgICAgICAgY29udGludWU7
CiAgICAgICAgICAgICB9CiAgICAgICAgIH0KQEAgLTM2MjIsNyArMzYyMiw3IEBAIFBST1hZX0RF
Q0xBUkUoYXByX3BvcnRfdCkgYXBfcHJveHlfcG9ydF9vZl9zY2hlbWUoCiAgICAgICAgIH0gZWxz
ZSB7CiAgICAgICAgICAgICBwcm94eV9zY2hlbWVzX3QgKnBzY2hlbWU7CiAgICAgICAgICAgICBm
b3IgKHBzY2hlbWUgPSBwc2NoZW1lczsgcHNjaGVtZS0+bmFtZSAhPSBOVUxMOyArK3BzY2hlbWUp
IHsKLSAgICAgICAgICAgICAgICBpZiAoc3RyY2FzZWNtcChzY2hlbWUsIHBzY2hlbWUtPm5hbWUp
ID09IDApIHsKKyAgICAgICAgICAgICAgICBpZiAoYXBfY2FzZWNtcHN0cihzY2hlbWUsIHBzY2hl
bWUtPm5hbWUpID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBzY2hlbWUtPmRl
ZmF1bHRfcG9ydDsKICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9CkluZGV4OiBtb2R1
bGVzL3Nsb3RtZW0vbW9kX3Nsb3RtZW1fc2htLmMKPT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQotLS0gbW9kdWxlcy9zbG90
bWVtL21vZF9zbG90bWVtX3NobS5jCShyZXZpc2lvbiAxNzE2MTg5KQorKysgbW9kdWxlcy9zbG90
bWVtL21vZF9zbG90bWVtX3NobS5jCSh3b3JraW5nIGNvcHkpCkBAIC0xMTEsNyArMTExLDcgQEAg
c3RhdGljIGludCBzbG90bWVtX2ZpbGVuYW1lcyhhcHJfcG9vbF90ICpwb29sLAogewogICAgIGNv
bnN0IGNoYXIgKmZuYW1lID0gTlVMTCwgKnBuYW1lID0gTlVMTDsKIAotICAgIGlmIChzbG90bmFt
ZSAmJiAqc2xvdG5hbWUgJiYgc3RyY2FzZWNtcChzbG90bmFtZSwgIm5vbmUiKSAhPSAwKSB7Cisg
ICAgaWYgKHNsb3RuYW1lICYmICpzbG90bmFtZSAmJiBhcF9jYXNlY21wc3RyKHNsb3RuYW1lLCAi
bm9uZSIpICE9IDApIHsKICAgICAgICAgaWYgKHNsb3RuYW1lWzBdICE9ICcvJykgewogI2lmICFT
TE9UTUVNX1VOTElOS19TRU1BTlRJQwogICAgICAgICAgICAgLyogRWFjaCBnZW5lcmF0aW9uIG5l
ZWRzIGl0cyBvd24gZmlsZSBuYW1lLiAqLwpJbmRleDogbW9kdWxlcy9zc2wvc3NsX2VuZ2luZV9v
Y3NwLmMKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PQotLS0gbW9kdWxlcy9zc2wvc3NsX2VuZ2luZV9vY3NwLmMJKHJldmlz
aW9uIDE3MTYxODkpCisrKyBtb2R1bGVzL3NzbC9zc2xfZW5naW5lX29jc3AuYwkod29ya2luZyBj
b3B5KQpAQCAtODYsNyArODYsNyBAQCBzdGF0aWMgYXByX3VyaV90ICpkZXRlcm1pbmVfcmVzcG9u
ZGVyX3VyaShTU0xTcnZDbwogICAgICAgICByZXR1cm4gTlVMTDsKICAgICB9CiAKLSAgICBpZiAo
c3RyY2FzZWNtcCh1LT5zY2hlbWUsICJodHRwIikgIT0gMCkgeworICAgIGlmIChhcF9jYXNlY21w
c3RyKHUtPnNjaGVtZSwgImh0dHAiKSAhPSAwKSB7CiAgICAgICAgIGFwX2xvZ19jZXJyb3IoQVBM
T0dfTUFSSywgQVBMT0dfREVCVUcsIHJ2LCBjLCBBUExPR05PKDAxOTIwKQogICAgICAgICAgICAg
ICAgICAgICAgICJjYW5ub3QgaGFuZGxlIE9DU1AgcmVzcG9uZGVyIFVSSSAnJXMnIiwgcyk7CiAg
ICAgICAgIHJldHVybiBOVUxMOwpJbmRleDogc2VydmVyL2xvZy5jCj09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0tIHNl
cnZlci9sb2cuYwkocmV2aXNpb24gMTcxNjE4OSkKKysrIHNlcnZlci9sb2cuYwkod29ya2luZyBj
b3B5KQpAQCAtNjU4LDcgKzY1OCw3IEBAIHN0YXRpYyBpbnQgbG9nX2xvZ19pZChjb25zdCBhcF9l
cnJvcmxvZ19pbmZvICppbmZvCiAgICAgICogYzogbG9nIGNvbm4gbG9nIGlkIGlmIGF2YWlsYWJs
ZSBhbmQgbm90IGEgb25jZS1wZXItcmVxdWVzdCBsb2cgbGluZQogICAgICAqIGVsc2U6IGxvZyBy
ZXF1ZXN0IGxvZyBpZCBpZiBhdmFpbGFibGUKICAgICAgKi8KLSAgICBpZiAoYXJnICYmICFzdHJj
YXNlY21wKGFyZywgImMiKSkgeworICAgIGlmIChhcmcgJiYgKCphcmcgPT0gJ2MnIHx8ICphcmcg
PT0gJ0MnKSkgewogICAgICAgICBpZiAoaW5mby0+YyAmJiAoKmFyZyAhPSAnQycgfHwgIWluZm8t
PnIpKSB7CiAgICAgICAgICAgICByZXR1cm4gY3B5c3RybihidWYsIGluZm8tPmMtPmxvZ19pZCwg
YnVmbGVuKTsKICAgICAgICAgfQpJbmRleDogc2VydmVyL21wbV91bml4LmMKPT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQot
LS0gc2VydmVyL21wbV91bml4LmMJKHJldmlzaW9uIDE3MTYxODkpCisrKyBzZXJ2ZXIvbXBtX3Vu
aXguYwkod29ya2luZyBjb3B5KQpAQCAtNjI3LDcgKzYyNyw3IEBAIHN0YXRpYyBhcHJfc3RhdHVz
X3QgZHVtbXlfY29ubmVjdGlvbihhcF9wb2RfdCAqcG9kCiAgICAgICogZXhwZW5zaXZlIHRvIGRv
IGNvcnJlY3RseSAocGVyZm9ybWluZyBhIGNvbXBsZXRlIFNTTCBoYW5kc2hha2UpCiAgICAgICog
b3IgY2F1c2UgbG9nIHNwYW0gYnkgZG9pbmcgaW5jb3JyZWN0bHkgKHNpbXBseSBzZW5kaW5nIEVP
RikuICovCiAgICAgbHAgPSBhcF9saXN0ZW5lcnM7Ci0gICAgd2hpbGUgKGxwICYmIGxwLT5wcm90
b2NvbCAmJiBzdHJjYXNlY21wKGxwLT5wcm90b2NvbCwgImh0dHAiKSAhPSAwKSB7CisgICAgd2hp
bGUgKGxwICYmIGxwLT5wcm90b2NvbCAmJiBhcF9jYXNlY21wc3RyKGxwLT5wcm90b2NvbCwgImh0
dHAiKSAhPSAwKSB7CiAgICAgICAgIGxwID0gbHAtPm5leHQ7CiAgICAgfQogICAgIGlmICghbHAp
IHsKQEAgLTY3NSw3ICs2NzUsNyBAQCBzdGF0aWMgYXByX3N0YXR1c190IGR1bW15X2Nvbm5lY3Rp
b24oYXBfcG9kX3QgKnBvZAogICAgICAgICByZXR1cm4gcnY7CiAgICAgfQogCi0gICAgaWYgKGxw
LT5wcm90b2NvbCAmJiBzdHJjYXNlY21wKGxwLT5wcm90b2NvbCwgImh0dHBzIikgPT0gMCkgewor
ICAgIGlmIChscC0+cHJvdG9jb2wgJiYgYXBfY2FzZWNtcHN0cihscC0+cHJvdG9jb2wsICJodHRw
cyIpID09IDApIHsKICAgICAgICAgLyogU2VuZCBhIFRMUyAxLjAgY2xvc2Vfbm90aWZ5IGFsZXJ0
LiAgVGhpcyBpcyBwZXJoYXBzIHRoZQogICAgICAgICAgKiAibGVhc3Qgd3JvbmciIHdheSB0byBv
cGVuIGFuZCBjbGVhbmx5IHRlcm1pbmF0ZSBhbiBTU0wKICAgICAgICAgICogY29ubmVjdGlvbi4g
IEl0IHNob3VsZCAid29yayIgd2l0aG91dCBub2lzeSBlcnJvciBsb2dzIGlmCkluZGV4OiBzZXJ2
ZXIvcHJvdG9jb2wuYwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09Ci0tLSBzZXJ2ZXIvcHJvdG9jb2wuYwkocmV2aXNpb24g
MTcxNjE4OSkKKysrIHNlcnZlci9wcm90b2NvbC5jCSh3b3JraW5nIGNvcHkpCkBAIC01MjAsNyAr
NTIwLDcgQEAgQVBfQ09SRV9ERUNMQVJFKHZvaWQpIGFwX3BhcnNlX3VyaShyZXF1ZXN0X3JlYyAq
ciwKICAgICBpZiAoc3RhdHVzID09IEFQUl9TVUNDRVNTKSB7CiAgICAgICAgIC8qIGlmIGl0IGhh
cyBhIHNjaGVtZSB3ZSBtYXkgbmVlZCB0byBkbyBhYnNvbHV0ZVVSSSB2aG9zdCBzdHVmZiAqLwog
ICAgICAgICBpZiAoci0+cGFyc2VkX3VyaS5zY2hlbWUKLSAgICAgICAgICAgICYmICFzdHJjYXNl
Y21wKHItPnBhcnNlZF91cmkuc2NoZW1lLCBhcF9odHRwX3NjaGVtZShyKSkpIHsKKyAgICAgICAg
ICAgICYmICFhcF9jYXNlY21wc3RyKHItPnBhcnNlZF91cmkuc2NoZW1lLCBhcF9odHRwX3NjaGVt
ZShyKSkpIHsKICAgICAgICAgICAgIHItPmhvc3RuYW1lID0gci0+cGFyc2VkX3VyaS5ob3N0bmFt
ZTsKICAgICAgICAgfQogICAgICAgICBlbHNlIGlmIChyLT5tZXRob2RfbnVtYmVyID09IE1fQ09O
TkVDVCkgewpAQCAtNjU1LDcgKzY1NSw3IEBAIHN0YXRpYyBpbnQgcmVhZF9yZXF1ZXN0X2xpbmUo
cmVxdWVzdF9yZWMgKnIsIGFwcl9iCiAgICAgICAgIHItPnByb3RvX251bSA9IEhUVFBfVkVSU0lP
Tihwcm9bNV0gLSAnMCcsIHByb1s3XSAtICcwJyk7CiAgICAgfQogICAgIGVsc2UgaWYgKDMgPT0g
c3NjYW5mKHItPnByb3RvY29sLCAiJTRzLyV1LiV1IiwgaHR0cCwgJm1ham9yLCAmbWlub3IpCi0g
ICAgICAgICAgICAgJiYgKHN0cmNhc2VjbXAoImh0dHAiLCBodHRwKSA9PSAwKQorICAgICAgICAg
ICAgICYmIChhcF9jYXNlY21wc3RyKCJodHRwIiwgaHR0cCkgPT0gMCkKICAgICAgICAgICAgICAm
JiAobWlub3IgPCBIVFRQX1ZFUlNJT04oMSwgMCkpICkgLyogZG9uJ3QgYWxsb3cgSFRUUC8wLjEw
MDAgKi8KICAgICAgICAgci0+cHJvdG9fbnVtID0gSFRUUF9WRVJTSU9OKG1ham9yLCBtaW5vcik7
CiAgICAgZWxzZQpAQCAtMTAzMSw3ICsxMDMxLDcgQEAgcmVxdWVzdF9yZWMgKmFwX3JlYWRfcmVx
dWVzdChjb25uX3JlYyAqY29ubikKICAgICAgICAgICAgICAqIHRoZSBmaW5hbCBlbmNvZGluZyAu
Li47IHRoZSBzZXJ2ZXIgTVVTVCByZXNwb25kIHdpdGggdGhlIDQwMAogICAgICAgICAgICAgICog
KEJhZCBSZXF1ZXN0KSBzdGF0dXMgY29kZSBhbmQgdGhlbiBjbG9zZSB0aGUgY29ubmVjdGlvbiIu
CiAgICAgICAgICAgICAgKi8KLSAgICAgICAgICAgIGlmICghKHN0cmNhc2VjbXAodGVuYywgImNo
dW5rZWQiKSA9PSAwIC8qIGZhc3QgcGF0aCAqLworICAgICAgICAgICAgaWYgKCEoYXBfY2FzZWNt
cHN0cih0ZW5jLCAiY2h1bmtlZCIpID09IDAgLyogZmFzdCBwYXRoICovCiAgICAgICAgICAgICAg
ICAgICAgIHx8IGFwX2ZpbmRfbGFzdF90b2tlbihyLT5wb29sLCB0ZW5jLCAiY2h1bmtlZCIpKSkg
ewogICAgICAgICAgICAgICAgIGFwX2xvZ19yZXJyb3IoQVBMT0dfTUFSSywgQVBMT0dfSU5GTywg
MCwgciwgQVBMT0dOTygwMjUzOSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGll
bnQgc2VudCB1bmtub3duIFRyYW5zZmVyLUVuY29kaW5nICIKQEAgLTExMzUsNyArMTEzNSw3IEBA
IHJlcXVlc3RfcmVjICphcF9yZWFkX3JlcXVlc3QoY29ubl9yZWMgKmNvbm4pCiAgICAgICAgICAq
IHVuZm9ydHVuYXRlbHksIHRvIHNpZ25hbCBhIHBvb3IgbWFuJ3MgbWFuZGF0b3J5IGV4dGVuc2lv
biB0aGF0CiAgICAgICAgICAqIHRoZSBzZXJ2ZXIgbXVzdCB1bmRlcnN0YW5kIG9yIHJldHVybiA0
MTcgRXhwZWN0YXRpb24gRmFpbGVkLgogICAgICAgICAgKi8KLSAgICAgICAgaWYgKHN0cmNhc2Vj
bXAoZXhwZWN0LCAiMTAwLWNvbnRpbnVlIikgPT0gMCkgeworICAgICAgICBpZiAoYXBfY2FzZWNt
cHN0cihleHBlY3QsICIxMDAtY29udGludWUiKSA9PSAwKSB7CiAgICAgICAgICAgICByLT5leHBl
Y3RpbmdfMTAwID0gMTsKICAgICAgICAgfQogICAgICAgICBlbHNlIHsKQEAgLTEyODgsNyArMTI4
OCw3IEBAIEFQX0RFQ0xBUkUoaW50KSBhcF9nZXRfYmFzaWNfYXV0aF9wdyhyZXF1ZXN0X3JlYyAq
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAiQXV0aG9y
aXphdGlvbiIpOwogICAgIGNvbnN0IGNoYXIgKnQ7CiAKLSAgICBpZiAoISh0ID0gYXBfYXV0aF90
eXBlKHIpKSB8fCBzdHJjYXNlY21wKHQsICJCYXNpYyIpKQorICAgIGlmICghKHQgPSBhcF9hdXRo
X3R5cGUocikpIHx8IGFwX2Nhc2VjbXBzdHIodCwgIkJhc2ljIikpCiAgICAgICAgIHJldHVybiBE
RUNMSU5FRDsKIAogICAgIGlmICghYXBfYXV0aF9uYW1lKHIpKSB7CkBAIC0xMzAyLDcgKzEzMDIs
NyBAQCBBUF9ERUNMQVJFKGludCkgYXBfZ2V0X2Jhc2ljX2F1dGhfcHcocmVxdWVzdF9yZWMgKgog
ICAgICAgICByZXR1cm4gSFRUUF9VTkFVVEhPUklaRUQ7CiAgICAgfQogCi0gICAgaWYgKHN0cmNh
c2VjbXAoYXBfZ2V0d29yZChyLT5wb29sLCAmYXV0aF9saW5lLCAnICcpLCAiQmFzaWMiKSkgewor
ICAgIGlmIChhcF9jYXNlY21wc3RyKGFwX2dldHdvcmQoci0+cG9vbCwgJmF1dGhfbGluZSwgJyAn
KSwgIkJhc2ljIikpIHsKICAgICAgICAgLyogQ2xpZW50IHRyaWVkIHRvIGF1dGhlbnRpY2F0ZSB1
c2luZyB3cm9uZyBhdXRoIHNjaGVtZSAqLwogICAgICAgICBhcF9sb2dfcmVycm9yKEFQTE9HX01B
UkssIEFQTE9HX0lORk8sIDAsIHIsIEFQTE9HTk8oMDA1NzMpCiAgICAgICAgICAgICAgICAgICAg
ICAgImNsaWVudCB1c2VkIHdyb25nIGF1dGhlbnRpY2F0aW9uIHNjaGVtZTogJXMiLCByLT51cmkp
OwpJbmRleDogc2VydmVyL3V0aWwuYwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tLSBzZXJ2ZXIvdXRpbC5jCShyZXZp
c2lvbiAxNzE2MTg5KQorKysgc2VydmVyL3V0aWwuYwkod29ya2luZyBjb3B5KQpAQCAtOTYsNyAr
OTYsNiBAQAogI3VuZGVmIEFQTE9HX01PRFVMRV9JTkRFWAogI2RlZmluZSBBUExPR19NT0RVTEVf
SU5ERVggQVBfQ09SRV9NT0RVTEVfSU5ERVgKIAotCiAvKgogICogRXhhbWluZSBhIGZpZWxkIHZh
bHVlIChzdWNoIGFzIGEgbWVkaWEtL2NvbnRlbnQtdHlwZSkgc3RyaW5nIGFuZCByZXR1cm4KICAq
IGl0IHNhbnMgYW55IHBhcmFtZXRlcnM7IGUuZy4sIHN0cmlwIG9mZiBhbnkgJztjaGFyc2V0PWZv
bycgYW5kIHRoZSBsaWtlLgpAQCAtODgxLDcgKzg4MCw3IEBAIEFQX0RFQ0xBUkUoYXByX3N0YXR1
c190KSBhcF9wY2ZnX29wZW5maWxlKGFwX2NvbmZpCiAKICAgICBpZiAoZmluZm8uZmlsZXR5cGUg
IT0gQVBSX1JFRyAmJgogI2lmIGRlZmluZWQoV0lOMzIpIHx8IGRlZmluZWQoT1MyKSB8fCBkZWZp
bmVkKE5FVFdBUkUpCi0gICAgICAgIHN0cmNhc2VjbXAoYXByX2ZpbGVwYXRoX25hbWVfZ2V0KG5h
bWUpLCAibnVsIikgIT0gMCkgeworICAgICAgICBhcF9jYXNlY21wc3RyKGFwcl9maWxlcGF0aF9u
YW1lX2dldChuYW1lKSwgIm51bCIpICE9IDApIHsKICNlbHNlCiAgICAgICAgIHN0cmNtcChuYW1l
LCAiL2Rldi9udWxsIikgIT0gMCkgewogI2VuZGlmIC8qIFdJTjMyIHx8IE9TMiAqLwpAQCAtMTYw
OSw3ICsxNjA4LDcgQEAgQVBfREVDTEFSRShpbnQpIGFwX2ZpbmRfdG9rZW4oYXByX3Bvb2xfdCAq
cCwgY29uc3QKICAgICAgICAgd2hpbGUgKCpzICYmICFURVNUX0NIQVIoKnMsIFRfSFRUUF9UT0tF
Tl9TVE9QKSkgewogICAgICAgICAgICAgKytzOwogICAgICAgICB9Ci0gICAgICAgIGlmICghc3Ry
bmNhc2VjbXAoKGNvbnN0IGNoYXIgKilzdGFydF90b2tlbiwgKGNvbnN0IGNoYXIgKil0b2ssCisg
ICAgICAgIGlmICghYXBfY2FzZWNtcHN0cm4oKGNvbnN0IGNoYXIgKilzdGFydF90b2tlbiwgKGNv
bnN0IGNoYXIgKil0b2ssCiAgICAgICAgICAgICAgICAgICAgICAgICAgcyAtIHN0YXJ0X3Rva2Vu
KSkgewogICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgIH0KQEAgLTE2MzYsNyArMTYzNSw3
IEBAIEFQX0RFQ0xBUkUoaW50KSBhcF9maW5kX2xhc3RfdG9rZW4oYXByX3Bvb2xfdCAqcCwKICAg
ICAgICAgKGxpZHggPiAwICYmICEoYXByX2lzc3BhY2UobGluZVtsaWR4IC0gMV0pIHx8IGxpbmVb
bGlkeCAtIDFdID09ICcsJykpKQogICAgICAgICByZXR1cm4gMDsKIAotICAgIHJldHVybiAoc3Ry
bmNhc2VjbXAoJmxpbmVbbGlkeF0sIHRvaywgdGxlbikgPT0gMCk7CisgICAgcmV0dXJuIChhcF9j
YXNlY21wc3RybigmbGluZVtsaWR4XSwgdG9rLCB0bGVuKSA9PSAwKTsKIH0KIAogQVBfREVDTEFS
RShjaGFyICopIGFwX2VzY2FwZV9zaGVsbF9jbWQoYXByX3Bvb2xfdCAqcCwgY29uc3QgY2hhciAq
c3RyKQpAQCAtMjU4OSw3ICsyNTg4LDcgQEAgQVBfREVDTEFSRShpbnQpIGFwX3BhcnNlX2Zvcm1f
ZGF0YShyZXF1ZXN0X3JlYyAqciwKIAogICAgIC8qIHNhbml0eSBjaGVjayAtIHdlIG9ubHkgc3Vw
cG9ydCBmb3JtcyBmb3Igbm93ICovCiAgICAgY3QgPSBhcHJfdGFibGVfZ2V0KHItPmhlYWRlcnNf
aW4sICJDb250ZW50LVR5cGUiKTsKLSAgICBpZiAoIWN0IHx8IHN0cm5jYXNlY21wKCJhcHBsaWNh
dGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLCBjdCwgMzMpKSB7CisgICAgaWYgKCFjdCB8fCBh
cF9jYXNlY21wc3RybigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwgY3QsIDMz
KSkgewogICAgICAgICByZXR1cm4gYXBfZGlzY2FyZF9yZXF1ZXN0X2JvZHkocik7CiAgICAgfQog
CkBAIC0zMTE5LDMgKzMxMTgsMTE3IEBAIEFQX0RFQ0xBUkUoaW50KSBhcF9hcnJheV9zdHJfY29u
dGFpbnMoY29uc3QgYXByX2FyCiAgICAgcmV0dXJuIChhcF9hcnJheV9zdHJfaW5kZXgoYXJyYXks
IHMsIDApID49IDApOwogfQogCisjaWYgIUFQUl9DSEFSU0VUX0VCQ0RJQworLyoKKyAqIFByb3Zp
ZGUgb3VyIG93biBrbm93bi1mYXN0IGltcGxlbWVudGF0aW9uIG9mIHN0cltuXWNhc2VjbXAoKQor
ICogTk9URTogT25seSBBU0NJSSBhbHBoYSBjaGFyYWN0ZXJzIDQxLTVBIGFyZSBmb2xkZWQgdG8g
NjEtN0EsCisgKiBvdGhlciA4LWJpdCBsYXRpbiBhbHBoYWJldGljcyBhcmUgbmV2ZXIgY2FzZS1m
b2xkZWQhCisgKi8KK3N0YXRpYyBjb25zdCB1bnNpZ25lZCBjaGFyIHVjaGFybWFwW10gPSB7Cisg
ICAgMHgwLCAgMHgxLCAgMHgyLCAgMHgzLCAgMHg0LCAgMHg1LCAgMHg2LCAgMHg3LAorICAgIDB4
OCwgIDB4OSwgIDB4YSwgIDB4YiwgIDB4YywgIDB4ZCwgIDB4ZSwgIDB4ZiwKKyAgICAweDEwLCAw
eDExLCAweDEyLCAweDEzLCAweDE0LCAweDE1LCAweDE2LCAweDE3LAorICAgIDB4MTgsIDB4MTks
IDB4MWEsIDB4MWIsIDB4MWMsIDB4MWQsIDB4MWUsIDB4MWYsCisgICAgMHgyMCwgMHgyMSwgMHgy
MiwgMHgyMywgMHgyNCwgMHgyNSwgMHgyNiwgMHgyNywKKyAgICAweDI4LCAweDI5LCAweDJhLCAw
eDJiLCAweDJjLCAweDJkLCAweDJlLCAweDJmLAorICAgIDB4MzAsIDB4MzEsIDB4MzIsIDB4MzMs
IDB4MzQsIDB4MzUsIDB4MzYsIDB4MzcsCisgICAgMHgzOCwgMHgzOSwgMHgzYSwgMHgzYiwgMHgz
YywgMHgzZCwgMHgzZSwgMHgzZiwKKyAgICAweDQwLCAgJ2EnLCAgJ2InLCAgJ2MnLCAgJ2QnLCAg
J2UnLCAgJ2YnLCAgJ2cnLAorICAgICAnaCcsICAnaScsICAnaicsICAnaycsICAnbCcsICAnbScs
ICAnbicsICAnbycsCisgICAgICdwJywgICdxJywgICdyJywgICdzJywgICd0JywgICd1JywgICd2
JywgICd3JywKKyAgICAgJ3gnLCAgJ3knLCAgJ3onLCAweDViLCAweDVjLCAweDVkLCAweDVlLCAw
eDVmLAorICAgIDB4NjAsICAnYScsICAnYicsICAnYycsICAnZCcsICAnZScsICAnZicsICAnZycs
CisgICAgICdoJywgICdpJywgICdqJywgICdrJywgICdsJywgICdtJywgICduJywgICdvJywKKyAg
ICAgJ3AnLCAgJ3EnLCAgJ3InLCAgJ3MnLCAgJ3QnLCAgJ3UnLCAgJ3YnLCAgJ3cnLAorICAgICAn
eCcsICAneScsICAneicsIDB4N2IsIDB4N2MsIDB4N2QsIDB4N2UsIDB4N2YsCisgICAgMHg4MCwg
MHg4MSwgMHg4MiwgMHg4MywgMHg4NCwgMHg4NSwgMHg4NiwgMHg4NywKKyAgICAweDg4LCAweDg5
LCAweDhhLCAweDhiLCAweDhjLCAweDhkLCAweDhlLCAweDhmLAorICAgIDB4OTAsIDB4OTEsIDB4
OTIsIDB4OTMsIDB4OTQsIDB4OTUsIDB4OTYsIDB4OTcsCisgICAgMHg5OCwgMHg5OSwgMHg5YSwg
MHg5YiwgMHg5YywgMHg5ZCwgMHg5ZSwgMHg5ZiwKKyAgICAweGEwLCAweGExLCAweGEyLCAweGEz
LCAweGE0LCAweGE1LCAweGE2LCAweGE3LAorICAgIDB4YTgsIDB4YTksIDB4YWEsIDB4YWIsIDB4
YWMsIDB4YWQsIDB4YWUsIDB4YWYsCisgICAgMHhiMCwgMHhiMSwgMHhiMiwgMHhiMywgMHhiNCwg
MHhiNSwgMHhiNiwgMHhiNywKKyAgICAweGI4LCAweGI5LCAweGJhLCAweGJiLCAweGJjLCAweGJk
LCAweGJlLCAweGJmLAorICAgIDB4YzAsIDB4YzEsIDB4YzIsIDB4YzMsIDB4YzQsIDB4YzUsIDB4
YzYsIDB4YzcsCisgICAgMHhjOCwgMHhjOSwgMHhjYSwgMHhjYiwgMHhjYywgMHhjZCwgMHhjZSwg
MHhjZiwKKyAgICAweGQwLCAweGQxLCAweGQyLCAweGQzLCAweGQ0LCAweGQ1LCAweGQ2LCAweGQ3
LAorICAgIDB4ZDgsIDB4ZDksIDB4ZGEsIDB4ZGIsIDB4ZGMsIDB4ZGQsIDB4ZGUsIDB4ZGYsCisg
ICAgMHhlMCwgMHhlMSwgMHhlMiwgMHhlMywgMHhlNCwgMHhlNSwgMHhlNiwgMHhlNywKKyAgICAw
eGU4LCAweGU5LCAweGVhLCAweGViLCAweGVjLCAweGVkLCAweGVlLCAweGVmLAorICAgIDB4ZjAs
IDB4ZjEsIDB4ZjIsIDB4ZjMsIDB4ZjQsIDB4ZjUsIDB4ZjYsIDB4ZjcsCisgICAgMHhmOCwgMHhm
OSwgMHhmYSwgMHhmYiwgMHhmYywgMHhmZCwgMHhmZSwgMHhmZgorfTsKKworI2Vsc2UgLyogQVBS
X0NIQVJTRVRfRUJDRElDICovCisvKiBEZXJpdmVkIGZyb20gYXByLWljb252L2Njcy9jcDAzNy5j
IGZvciBFQkNESUMgY2FzZSBjb21wYXJpc29uLAorICAgcHJvdmlkZXMgdW5pcXVlIGlkZW50aXR5
IG9mIGV2ZXJ5IGNoYXIgdmFsdWUgKHN0cmljdCBJU08tNjQ2CisgICBjb25mb3JtYW5jZSwgYXJi
aXRyYXJ5IGVsZWN0aW9uIG9mIGFuIElTTy04ODU5LTEgb3JkZXJpbmcsIGFuZAorICAgdmVyeSBh
cmJpdHJhcnkgY29udHJvbCBjb2RlIGFzc2lnbm1lbnRzIGludG8gQzEgdG8gYWNoaWV2ZQorICAg
aWRlbnRpdHkgYW5kIGEgcmV2ZXJzaWJsZSBtYXBwaW5nIG9mIGNvZGUgcG9pbnRzKSwKKyAgIHRo
ZW4gZm9sZGluZyB0aGUgZXF1aXZhbGVuY2VzIG9mIEFTQ0lJIDQxLTVBIGludG8gNjEtN0EsIAor
ICAgcHJlc2VudGluZyBjb21wYXJpc29uIHJlc3VsdHMgaW4gYSBzb21ld2hhdCBJU08vSUVDIDEw
NjQ2CisgICAoQVNDSUktbGlrZSkgb3JkZXIsIGRlcGVuZGluZyBvbiB0aGUgRUJDRElDIGNvZGUg
cGFnZSBpbiB1c2UuCisgKi8KK3N0YXRpYyBjb25zdCB1bnNpZ25lZCBjaGFyIHVjaGFybWFwW10g
PSB7CisJMHgwMCwgMHgwMSwgMHgwMiwgMHgwMywgMHg5QywgMHgwOSwgMHg4NiwgMHg3RiwKKwkw
eDk3LCAweDhELCAweDhFLCAweDBCLCAweDBDLCAweDBELCAweDBFLCAweDBGLAorCTB4MTAsIDB4
MTEsIDB4MTIsIDB4MTMsIDB4OUQsIDB4ODUsIDB4MDgsIDB4ODcsCisJMHgxOCwgMHgxOSwgMHg5
MiwgMHg4RiwgMHgxQywgMHgxRCwgMHgxRSwgMHgxRiwKKwkweDgwLCAweDgxLCAweDgyLCAweDgz
LCAweDg0LCAweDBBLCAweDE3LCAweDFCLAorCTB4ODgsIDB4ODksIDB4OEEsIDB4OEIsIDB4OEMs
IDB4MDUsIDB4MDYsIDB4MDcsCisJMHg5MCwgMHg5MSwgMHgxNiwgMHg5MywgMHg5NCwgMHg5NSwg
MHg5NiwgMHgwNCwKKwkweDk4LCAweDk5LCAweDlBLCAweDlCLCAweDE0LCAweDE1LCAweDlFLCAw
eDFBLAorCTB4MjAsIDB4QTAsIDB4RTIsIDB4RTQsIDB4RTAsIDB4RTEsIDB4RTMsIDB4RTUsCisJ
MHhFNywgMHhGMSwgMHhBMiwgMHgyRSwgMHgzQywgMHgyOCwgMHgyQiwgMHg3QywKKwkweDI2LCAw
eEU5LCAweEVBLCAweEVCLCAweEU4LCAweEVELCAweEVFLCAweEVGLAorCTB4RUMsIDB4REYsIDB4
MjEsIDB4MjQsIDB4MkEsIDB4MjksIDB4M0IsIDB4QUMsCisJMHgyRCwgMHgyRiwgMHhDMiwgMHhD
NCwgMHhDMCwgMHhDMSwgMHhDMywgMHhDNSwKKwkweEM3LCAweEQxLCAweEE2LCAweDJDLCAweDI1
LCAweDVGLCAweDNFLCAweDNGLAorCTB4RjgsIDB4QzksIDB4Q0EsIDB4Q0IsIDB4QzgsIDB4Q0Qs
IDB4Q0UsIDB4Q0YsCisJMHhDQywgMHg2MCwgMHgzQSwgMHgyMywgMHg0MCwgMHgyNywgMHgzRCwg
MHgyMiwKKwkweEQ4LCAweDYxLCAweDYyLCAweDYzLCAweDY0LCAweDY1LCAweDY2LCAweDY3LAor
CTB4NjgsIDB4NjksIDB4QUIsIDB4QkIsIDB4RjAsIDB4RkQsIDB4RkUsIDB4QjEsCisJMHhCMCwg
MHg2QSwgMHg2QiwgMHg2QywgMHg2RCwgMHg2RSwgMHg2RiwgMHg3MCwKKwkweDcxLCAweDcyLCAw
eEFBLCAweEJBLCAweEU2LCAweEI4LCAweEM2LCAweEE0LAorCTB4QjUsIDB4N0UsIDB4NzMsIDB4
NzQsIDB4NzUsIDB4NzYsIDB4NzcsIDB4NzgsCisJMHg3OSwgMHg3QSwgMHhBMSwgMHhCRiwgMHhE
MCwgMHhERCwgMHhERSwgMHhBRSwKKwkweDVFLCAweEEzLCAweEE1LCAweEI3LCAweEE5LCAweEE3
LCAweEI2LCAweEJDLAorCTB4QkQsIDB4QkUsIDB4NUIsIDB4NUQsIDB4QUYsIDB4QTgsIDB4QjQs
IDB4RDcsCisJMHg3QiwgMHg2MSwgMHg2MiwgMHg2MywgMHg2NCwgMHg2NSwgMHg2NiwgMHg2NywK
KwkweDY4LCAweDY5LCAweEFELCAweEY0LCAweEY2LCAweEYyLCAweEYzLCAweEY1LAorCTB4N0Qs
IDB4NkEsIDB4NkIsIDB4NkMsIDB4NkQsIDB4NkUsIDB4NkYsIDB4NzAsCisJMHg3MSwgMHg3Miwg
MHhCOSwgMHhGQiwgMHhGQywgMHhGOSwgMHhGQSwgMHhGRiwKKwkweDVDLCAweEY3LCAweDczLCAw
eDc0LCAweDc1LCAweDc2LCAweDc3LCAweDc4LAorCTB4NzksIDB4N0EsIDB4QjIsIDB4RDQsIDB4
RDYsIDB4RDIsIDB4RDMsIDB4RDUsCisJMHgzMCwgMHgzMSwgMHgzMiwgMHgzMywgMHgzNCwgMHgz
NSwgMHgzNiwgMHgzNywKKwkweDM4LCAweDM5LCAweEIzLCAweERCLCAweERDLCAweEQ5LCAweERB
LCAweDlGCit9OworI2VuZGlmCisKK0FQX0RFQ0xBUkUoaW50KSBhcF9jYXNlY21wc3RyKGNvbnN0
IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMikKK3sKKyAgICBjb25zdCB1bnNpZ25lZCBjaGFyICpw
czEgPSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMTsKKyAgICBjb25zdCB1bnNpZ25lZCBjaGFy
ICpwczIgPSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMjsKKworICAgIHdoaWxlICh1Y2hhcm1h
cFsqcHMxXSA9PSB1Y2hhcm1hcFsqcHMyKytdKSB7CisgICAgICAgIGlmICgqcHMxKysgPT0gJ1ww
JykgeworICAgICAgICAgICAgcmV0dXJuICgwKTsKKyAgICAgICAgfQorICAgIH0KKyAgICByZXR1
cm4gKHVjaGFybWFwWypwczFdIC0gdWNoYXJtYXBbKi0tcHMyXSk7Cit9CisKK0FQX0RFQ0xBUkUo
aW50KSBhcF9jYXNlY21wc3Rybihjb25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIsIGFwcl9z
aXplX3QgbikKK3sKKyAgICBjb25zdCB1bnNpZ25lZCBjaGFyICpwczEgPSAoY29uc3QgdW5zaWdu
ZWQgY2hhciAqKSBzMTsKKyAgICBjb25zdCB1bnNpZ25lZCBjaGFyICpwczIgPSAoY29uc3QgdW5z
aWduZWQgY2hhciAqKSBzMjsKKyAgICB3aGlsZSAobi0tKSB7CisgICAgICAgIGlmICh1Y2hhcm1h
cFsqcHMxXSAhPSB1Y2hhcm1hcFsqcHMyKytdKSB7CisgICAgICAgICAgICByZXR1cm4gKHVjaGFy
bWFwWypwczFdIC0gdWNoYXJtYXBbKi0tcHMyXSk7CisgICAgICAgIH0KKyAgICAgICAgaWYgKCpw
czErKyA9PSAnXDAnKSB7CisgICAgICAgICAgICBicmVhazsKKyAgICAgICAgfQorICAgIH0KKyAg
ICByZXR1cm4gKDApOworfQpJbmRleDogc2VydmVyL3V0aWxfZXhwcl9ldmFsLmMKPT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PQotLS0gc2VydmVyL3V0aWxfZXhwcl9ldmFsLmMJKHJldmlzaW9uIDE3MTYxODkpCisrKyBzZXJ2
ZXIvdXRpbF9leHByX2V2YWwuYwkod29ya2luZyBjb3B5KQpAQCAtMTU3MywxMyArMTU3MywxMyBA
QCBzdGF0aWMgaW50IG9wX1QoYXBfZXhwcl9ldmFsX2N0eF90ICpjdHgsIGNvbnN0IHZvaQogICAg
ICAgICByZXR1cm4gRkFMU0U7CiAgICAgY2FzZSAnbyc6CiAgICAgY2FzZSAnTyc6Ci0gICAgICAg
IHJldHVybiBzdHJjYXNlY21wKGFyZywgIm9mZiIpID09IDAgPyBGQUxTRSA6IFRSVUU7CisgICAg
ICAgIHJldHVybiBhcF9jYXNlY21wc3RyKGFyZywgIm9mZiIpID09IDAgPyBGQUxTRSA6IFRSVUU7
CiAgICAgY2FzZSAnbic6CiAgICAgY2FzZSAnTic6Ci0gICAgICAgIHJldHVybiBzdHJjYXNlY21w
KGFyZywgIm5vIikgPT0gMCA/IEZBTFNFIDogVFJVRTsKKyAgICAgICAgcmV0dXJuIGFwX2Nhc2Vj
bXBzdHIoYXJnLCAibm8iKSA9PSAwID8gRkFMU0UgOiBUUlVFOwogICAgIGNhc2UgJ2YnOgogICAg
IGNhc2UgJ0YnOgotICAgICAgICByZXR1cm4gc3RyY2FzZWNtcChhcmcsICJmYWxzZSIpID09IDAg
PyBGQUxTRSA6IFRSVUU7CisgICAgICAgIHJldHVybiBhcF9jYXNlY21wc3RyKGFyZywgImZhbHNl
IikgPT0gMCA/IEZBTFNFIDogVFJVRTsKICAgICBjYXNlICcwJzoKICAgICAgICAgcmV0dXJuIGFy
Z1sxXSA9PSAnXDAnID8gRkFMU0UgOiBUUlVFOwogICAgIGRlZmF1bHQ6CkBAIC0xNjgyLDcgKzE2
ODIsNyBAQCBzdGF0aWMgaW50IGNvcmVfZXhwcl9sb29rdXAoYXBfZXhwcl9sb29rdXBfcGFybXMg
KgogICAgICAgICAgICAgd2hpbGUgKHByb3YtPmZ1bmMpIHsKICAgICAgICAgICAgICAgICBjb25z
dCBjaGFyICoqbmFtZSA9IHByb3YtPm5hbWVzOwogICAgICAgICAgICAgICAgIHdoaWxlICgqbmFt
ZSkgewotICAgICAgICAgICAgICAgICAgICBpZiAoc3RyY2FzZWNtcCgqbmFtZSwgcGFybXMtPm5h
bWUpID09IDApIHsKKyAgICAgICAgICAgICAgICAgICAgaWYgKGFwX2Nhc2VjbXBzdHIoKm5hbWUs
IHBhcm1zLT5uYW1lKSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAqcGFybXMtPmZ1
bmMgPSBwcm92LT5mdW5jOwogICAgICAgICAgICAgICAgICAgICAgICAgKnBhcm1zLT5kYXRhID0g
bmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPSzsKQEAgLTE3MTUsNyArMTcx
NSw3IEBAIHN0YXRpYyBpbnQgY29yZV9leHByX2xvb2t1cChhcF9leHByX2xvb2t1cF9wYXJtcyAq
CiAgICAgICAgICAgICAgICAgaWYgKHBhcm1zLT50eXBlID09IEFQX0VYUFJfRlVOQ19PUF9VTkFS
WSkKICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSAhc3RyY21wKHByb3YtPm5hbWUsIHBhcm1z
LT5uYW1lKTsKICAgICAgICAgICAgICAgICBlbHNlCi0gICAgICAgICAgICAgICAgICAgIG1hdGNo
ID0gIXN0cmNhc2VjbXAocHJvdi0+bmFtZSwgcGFybXMtPm5hbWUpOworICAgICAgICAgICAgICAg
ICAgICBtYXRjaCA9ICFhcF9jYXNlY21wc3RyKHByb3YtPm5hbWUsIHBhcm1zLT5uYW1lKTsKICAg
ICAgICAgICAgICAgICBpZiAobWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgaWYgKChwYXJt
cy0+ZmxhZ3MgJiBBUF9FWFBSX0ZMQUdfUkVTVFJJQ1RFRCkKICAgICAgICAgICAgICAgICAgICAg
ICAgICYmIHByb3YtPnJlc3RyaWN0ZWQpIHsKSW5kZXg6IHNlcnZlci91dGlsX3NjcmlwdC5jCj09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT0KLS0tIHNlcnZlci91dGlsX3NjcmlwdC5jCShyZXZpc2lvbiAxNzE2MTg5KQorKysg
c2VydmVyL3V0aWxfc2NyaXB0LmMJKHdvcmtpbmcgY29weSkKQEAgLTE3NiwxMCArMTc2LDEwIEBA
IEFQX0RFQ0xBUkUodm9pZCkgYXBfYWRkX2NvbW1vbl92YXJzKHJlcXVlc3RfcmVjICpyCiAgICAg
ICAgICAqIGZvciBubyBwYXJ0aWN1bGFyIHJlYXNvbi4KICAgICAgICAgICovCiAKLSAgICAgICAg
aWYgKCFzdHJjYXNlY21wKGhkcnNbaV0ua2V5LCAiQ29udGVudC10eXBlIikpIHsKKyAgICAgICAg
aWYgKCFhcF9jYXNlY21wc3RyKGhkcnNbaV0ua2V5LCAiQ29udGVudC10eXBlIikpIHsKICAgICAg
ICAgICAgIGFwcl90YWJsZV9hZGRuKGUsICJDT05URU5UX1RZUEUiLCBoZHJzW2ldLnZhbCk7CiAg
ICAgICAgIH0KLSAgICAgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAoaGRyc1tpXS5rZXksICJDb250
ZW50LWxlbmd0aCIpKSB7CisgICAgICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKGhkcnNbaV0u
a2V5LCAiQ29udGVudC1sZW5ndGgiKSkgewogICAgICAgICAgICAgYXByX3RhYmxlX2FkZG4oZSwg
IkNPTlRFTlRfTEVOR1RIIiwgaGRyc1tpXS52YWwpOwogICAgICAgICB9CiAgICAgICAgIC8qCkBA
IC0xODgsOCArMTg4LDggQEAgQVBfREVDTEFSRSh2b2lkKSBhcF9hZGRfY29tbW9uX3ZhcnMocmVx
dWVzdF9yZWMgKnIKICAgICAgICAgICogaW4gdGhlIGVudmlyb25tZW50IHdpdGggInBzIC1lIi4g
IEJ1dCwgaWYgeW91IG11c3QuLi4KICAgICAgICAgICovCiAjaWZuZGVmIFNFQ1VSSVRZX0hPTEVf
UEFTU19BVVRIT1JJWkFUSU9OCi0gICAgICAgIGVsc2UgaWYgKCFzdHJjYXNlY21wKGhkcnNbaV0u
a2V5LCAiQXV0aG9yaXphdGlvbiIpCi0gICAgICAgICAgICAgICAgIHx8ICFzdHJjYXNlY21wKGhk
cnNbaV0ua2V5LCAiUHJveHktQXV0aG9yaXphdGlvbiIpKSB7CisgICAgICAgIGVsc2UgaWYgKCFh
cF9jYXNlY21wc3RyKGhkcnNbaV0ua2V5LCAiQXV0aG9yaXphdGlvbiIpCisgICAgICAgICAgICAg
ICAgIHx8ICFhcF9jYXNlY21wc3RyKGhkcnNbaV0ua2V5LCAiUHJveHktQXV0aG9yaXphdGlvbiIp
KSB7CiAgICAgICAgICAgICBpZiAoY29uZi0+Y2dpX3Bhc3NfYXV0aCA9PSBBUF9DR0lfUEFTU19B
VVRIX09OKSB7CiAgICAgICAgICAgICAgICAgYWRkX3VubGVzc19udWxsKGUsIGh0dHAyZW52KHIs
IGhkcnNbaV0ua2V5KSwgaGRyc1tpXS52YWwpOwogICAgICAgICAgICAgfQpAQCAtNTkzLDcgKzU5
Myw3IEBAIEFQX0RFQ0xBUkUoaW50KSBhcF9zY2FuX3NjcmlwdF9oZWFkZXJfZXJyX2NvcmVfZXgo
CiAgICAgICAgICAgICArK2w7CiAgICAgICAgIH0KIAotICAgICAgICBpZiAoIXN0cmNhc2VjbXAo
dywgIkNvbnRlbnQtdHlwZSIpKSB7CisgICAgICAgIGlmICghYXBfY2FzZWNtcHN0cih3LCAiQ29u
dGVudC10eXBlIikpIHsKICAgICAgICAgICAgIGNoYXIgKnRtcDsKIAogICAgICAgICAgICAgLyog
TnVrZSB0cmFpbGluZyB3aGl0ZXNwYWNlICovCkBAIC02MTEsNyArNjExLDcgQEAgQVBfREVDTEFS
RShpbnQpIGFwX3NjYW5fc2NyaXB0X2hlYWRlcl9lcnJfY29yZV9leCgKICAgICAgICAgICogSWYg
dGhlIHNjcmlwdCByZXR1cm5lZCBhIHNwZWNpZmljIHN0YXR1cywgdGhhdCdzIHdoYXQKICAgICAg
ICAgICogd2UnbGwgdXNlIC0gb3RoZXJ3aXNlIHdlIGFzc3VtZSAyMDAgT0suCiAgICAgICAgICAq
LwotICAgICAgICBlbHNlIGlmICghc3RyY2FzZWNtcCh3LCAiU3RhdHVzIikpIHsKKyAgICAgICAg
ZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIodywgIlN0YXR1cyIpKSB7CiAgICAgICAgICAgICByLT5z
dGF0dXMgPSBjZ2lfc3RhdHVzID0gYXRvaShsKTsKICAgICAgICAgICAgIGlmICghYXBfaXNfSFRU
UF9WQUxJRF9SRVNQT05TRShjZ2lfc3RhdHVzKSkKICAgICAgICAgICAgICAgICBhcF9sb2dfcmVy
cm9yKFNDUklQVF9MT0dfTUFSSywgQVBMT0dfRVJSfEFQTE9HX1RPQ0xJRU5ULCAwLCByLApAQCAt
NjI0LDE5ICs2MjQsMTkgQEAgQVBfREVDTEFSRShpbnQpIGFwX3NjYW5fc2NyaXB0X2hlYWRlcl9l
cnJfY29yZV9leCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcl9maWxlcGF0
aF9uYW1lX2dldChyLT5maWxlbmFtZSksIGwpOwogICAgICAgICAgICAgci0+c3RhdHVzX2xpbmUg
PSBhcHJfcHN0cmR1cChyLT5wb29sLCBsKTsKICAgICAgICAgfQotICAgICAgICBlbHNlIGlmICgh
c3RyY2FzZWNtcCh3LCAiTG9jYXRpb24iKSkgeworICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNt
cHN0cih3LCAiTG9jYXRpb24iKSkgewogICAgICAgICAgICAgYXByX3RhYmxlX3NldChyLT5oZWFk
ZXJzX291dCwgdywgbCk7CiAgICAgICAgIH0KLSAgICAgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAo
dywgIkNvbnRlbnQtTGVuZ3RoIikpIHsKKyAgICAgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIo
dywgIkNvbnRlbnQtTGVuZ3RoIikpIHsKICAgICAgICAgICAgIGFwcl90YWJsZV9zZXQoci0+aGVh
ZGVyc19vdXQsIHcsIGwpOwogICAgICAgICB9Ci0gICAgICAgIGVsc2UgaWYgKCFzdHJjYXNlY21w
KHcsICJDb250ZW50LVJhbmdlIikpIHsKKyAgICAgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIo
dywgIkNvbnRlbnQtUmFuZ2UiKSkgewogICAgICAgICAgICAgYXByX3RhYmxlX3NldChyLT5oZWFk
ZXJzX291dCwgdywgbCk7CiAgICAgICAgIH0KLSAgICAgICAgZWxzZSBpZiAoIXN0cmNhc2VjbXAo
dywgIlRyYW5zZmVyLUVuY29kaW5nIikpIHsKKyAgICAgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBz
dHIodywgIlRyYW5zZmVyLUVuY29kaW5nIikpIHsKICAgICAgICAgICAgIGFwcl90YWJsZV9zZXQo
ci0+aGVhZGVyc19vdXQsIHcsIGwpOwogICAgICAgICB9Ci0gICAgICAgIGVsc2UgaWYgKCFzdHJj
YXNlY21wKHcsICJFVGFnIikpIHsKKyAgICAgICAgZWxzZSBpZiAoIWFwX2Nhc2VjbXBzdHIodywg
IkVUYWciKSkgewogICAgICAgICAgICAgYXByX3RhYmxlX3NldChyLT5oZWFkZXJzX291dCwgdywg
bCk7CiAgICAgICAgIH0KICAgICAgICAgLyoKQEAgLTY0MywxMSArNjQzLDExIEBAIEFQX0RFQ0xB
UkUoaW50KSBhcF9zY2FuX3NjcmlwdF9oZWFkZXJfZXJyX2NvcmVfZXgoCiAgICAgICAgICAqIElm
IHRoZSBzY3JpcHQgZ2F2ZSB1cyBhIExhc3QtTW9kaWZpZWQgaGVhZGVyLCB3ZSBjYW4ndCBqdXN0
CiAgICAgICAgICAqIHBhc3MgaXQgb24gYmxpbmRseSBiZWNhdXNlIG9mIHJlc3RyaWN0aW9ucyBv
biBmdXR1cmUgdmFsdWVzLgogICAgICAgICAgKi8KLSAgICAgICAgZWxzZSBpZiAoIXN0cmNhc2Vj
bXAodywgIkxhc3QtTW9kaWZpZWQiKSkgeworICAgICAgICBlbHNlIGlmICghYXBfY2FzZWNtcHN0
cih3LCAiTGFzdC1Nb2RpZmllZCIpKSB7CiAgICAgICAgICAgICBhcF91cGRhdGVfbXRpbWUociwg
YXByX2RhdGVfcGFyc2VfaHR0cChsKSk7CiAgICAgICAgICAgICBhcF9zZXRfbGFzdF9tb2RpZmll
ZChyKTsKICAgICAgICAgfQotICAgICAgICBlbHNlIGlmICghc3RyY2FzZWNtcCh3LCAiU2V0LUNv
b2tpZSIpKSB7CisgICAgICAgIGVsc2UgaWYgKCFhcF9jYXNlY21wc3RyKHcsICJTZXQtQ29va2ll
IikpIHsKICAgICAgICAgICAgIGFwcl90YWJsZV9hZGQoY29va2llX3RhYmxlLCB3LCBsKTsKICAg
ICAgICAgfQogICAgICAgICBlbHNlIHsKSW5kZXg6IC4KPT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQotLS0gLgkocmV2aXNp
b24gMTcxNjE4OSkKKysrIC4JKHdvcmtpbmcgY29weSkKClByb3BlcnR5IGNoYW5nZXMgb246IC4K
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpNb2RpZmllZDogc3ZuOm1lcmdlaW5mbwogICBNZXJnZWQgL2h0dHBkL2h0dHBk
L3RydW5rOnIxNzE1NDAxLDE3MTU0MDQsMTcxNTUyNCwxNzE1NTI2LTE3MTU1MjcsMTcxNTU1NCwx
NzE1NTg3LDE3MTU2MzIsMTcxNTczNiwxNzE1ODc2LDE3MTU4ODAsMTcxNTkzOCwxNzE2MTUxCg==
--001a11c16ee2492b6a05254d6f07--

From dev-return-84729-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:24:54 2015
Return-Path: <dev-return-84729-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9812318664
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:24:54 +0000 (UTC)
Received: (qmail 87748 invoked by uid 500); 24 Nov 2015 18:24:54 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 87686 invoked by uid 500); 24 Nov 2015 18:24:54 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 87676 invoked by uid 99); 24 Nov 2015 18:24:53 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:24:53 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 8114DC11BE
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:24:53 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.98
X-Spam-Level: **
X-Spam-Status: No, score=2.98 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id U1yyUJ8vwyW1 for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:24:49 +0000 (UTC)
Received: from mail-ig0-f174.google.com (mail-ig0-f174.google.com [209.85.213.174])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 2A9CD441A4
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:24:49 +0000 (UTC)
Received: by igcph11 with SMTP id ph11so78320865igc.1
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 10:24:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=H2+TLUwXXsaHZHXvHg5QqDip1SqwCFokFDbQ8I3DZgo=;
        b=CrmRGzEq7cwTZPzLgbTGDm5CpeHXD1iIuMQ4LgXrgDGxv4o9uR2ZVWydTWhLqD1UG7
         I/fCovsSKZ2HRVn3TLAx7Z5wlGlvutDjsUv9i60UVw4epbS1RdtyB8v4ROxqmvViGJlA
         qCetSmHG7VkZoLGMNZepc3DgdRrEvLgYLt6cztPEQblYKMg7vSN08MJJ5/D3NJwfob44
         GqLgF5qoTu7kke29WvxH/oyIIwRb74CEQgwKaI1HkLufgl0skbg/V6IqC1mP8wNSIrSH
         ouwj0ARtA/191Ic39PS9Rb9NHyNmD0oSPnmbQIAA2Np6nJ94xqTrEtWkD4begTQn16nm
         daIg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=H2+TLUwXXsaHZHXvHg5QqDip1SqwCFokFDbQ8I3DZgo=;
        b=Z6jyOkqYkf3dx/20aHLT3Ym32RVQkstOV+rYyESy8zeKwg/3fm67wdnOrWMCqqU39J
         puTRhXEYsyDlKfn5v5qwpC9oo+EMpy1lGZT0kevjadyPHBWcMmG5KHIzvPggpuJNP2vp
         6zGKnRHQk2eFGyXPSZsmF3IpqUDekCbnS4ww9rqDGNAs9iQIMvIjW9FX9wqo1qwFj9QD
         808tW0l01Mt8J7h3khuBPGe0sZhLcAXpCf/1DNInHBh7Xb8wtx4slNAsqRbz8eRZe7em
         aF3Gz0bnSPLZCYHrDE3JRg6KxbMDxFMd+79pfnqBwf8GzzH4pTwTaf5cFGdRtNVu78w0
         aaug==
X-Gm-Message-State: ALoCoQmBgwLJ1NTxAXOz4fmrOqsRevg7XP1BiRbGEhBZLp5Jins7eM+qOnfu7GA6OxFtLe5mn2BP
MIME-Version: 1.0
X-Received: by 10.50.20.163 with SMTP id o3mr3730561ige.35.1448389488648; Tue,
 24 Nov 2015 10:24:48 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Tue, 24 Nov 2015 10:24:48 -0800 (PST)
In-Reply-To: <553DC613-8DC4-4EE8-9C1C-74B7C14C7269@jaguNET.com>
References: <20151123155826.39A703A043E@svn01-us-west.apache.org>
	<CACsi252Ypb8wgfryMt689sn0nnJwkBrNpjaE7KzFwd3wk2LhdQ@mail.gmail.com>
	<5437AE63-0061-4346-98B5-F00D6D804E87@jaguNET.com>
	<CACsi250cw1NgJs9u6tdDNf90_UOdWHvKvosOmMe9XTbyi0Q_dQ@mail.gmail.com>
	<4AFAB327-14AD-44F0-8927-E289B28BCF63@jaguNET.com>
	<CACsi250QUg-xra6uwfvsNT_SJ=CPu2UNkQR0aSmLZDxG=hjSAw@mail.gmail.com>
	<CALK=YjMhgfB+Dtm7=RNVdkPFcMJLN_Zcw-MstFiMomN8fajS7w@mail.gmail.com>
	<CACsi253sVFy=85nBO4-Vp6REBe_mD2JZX3uPTwv-8Jf1E51EDA@mail.gmail.com>
	<CALK=YjOmpK=puj_Sb+3DbFz1ZKEnOwGLc83FFu0gKgFOK8OD=g@mail.gmail.com>
	<553DC613-8DC4-4EE8-9C1C-74B7C14C7269@jaguNET.com>
Date: Tue, 24 Nov 2015 12:24:48 -0600
Message-ID: <CACsi252Kfyk6dsZVAf+-yFXDgLp7+ZidDyJFyadREPxyCxG=vA@mail.gmail.com>
Subject: Re: svn commit: r1715859 - /httpd/httpd/trunk/include/httpd.h
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=047d7bd75decf7c7bd05254d74b3

--047d7bd75decf7c7bd05254d74b3
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 11:53 AM, Jim Jagielski <jim@jagunet.com> wrote:

> It's for these types of reasons that I suggest that
> instead of looking at this as some replacement for
> strcasecmp, we instead look at the function on how we
> actually *use* it. As far as I know, we simply use
> it to see if 2 strings are equal, ignoring ASCII case.
> I could be wrong, and I'm sure someone will point out
> if and where I am :) But even so, if *that* is the
> use case, then we are free to define the function
> (and create whatever name) however we want.
>


Well, there is another option, reject API bloat and insist that
users set LC_ALL="C" if they want httpd to behave correctly
and performantly.  I don't suppose you tested the performance
after turning off UTF-8 processing on your Mac?

--047d7bd75decf7c7bd05254d74b3
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On T=
ue, Nov 24, 2015 at 11:53 AM, Jim Jagielski <span dir=3D"ltr">&lt;<a href=
=3D"mailto:jim@jagunet.com" target=3D"_blank">jim@jagunet.com</a>&gt;</span=
> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;bo=
rder-left:1px #ccc solid;padding-left:1ex">It&#39;s for these types of reas=
ons that I suggest that<br>
instead of looking at this as some replacement for<br>
strcasecmp, we instead look at the function on how we<br>
actually *use* it. As far as I know, we simply use<br>
it to see if 2 strings are equal, ignoring ASCII case.<br>
I could be wrong, and I&#39;m sure someone will point out<br>
if and where I am :) But even so, if *that* is the<br>
use case, then we are free to define the function<br>
(and create whatever name) however we want.<br>
<div class=3D"HOEnZb"><div class=3D"h5"></div></div></blockquote></div><br>=
</div><div class=3D"gmail_extra"><br></div><div class=3D"gmail_extra">Well,=
 there is another option, reject API bloat and insist that</div><div class=
=3D"gmail_extra">users set LC_ALL=3D&quot;C&quot; if they want httpd to beh=
ave correctly</div><div class=3D"gmail_extra">and performantly.=C2=A0 I don=
&#39;t suppose you tested the performance</div><div class=3D"gmail_extra">a=
fter turning off UTF-8 processing on your Mac?</div><div class=3D"gmail_ext=
ra"><br></div><div class=3D"gmail_extra"><br></div></div>

--047d7bd75decf7c7bd05254d74b3--

From dev-return-84730-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:28:29 2015
Return-Path: <dev-return-84730-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D374418684
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:28:29 +0000 (UTC)
Received: (qmail 97913 invoked by uid 500); 24 Nov 2015 18:28:29 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 97822 invoked by uid 500); 24 Nov 2015 18:28:29 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 97812 invoked by uid 99); 24 Nov 2015 18:28:29 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:28:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id D0C0CC3912
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:28:28 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.562
X-Spam-Level:
X-Spam-Status: No, score=-0.562 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.562, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id aYbcH6XwOxVY for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:28:21 +0000 (UTC)
Received: from lewis.sophia.w3.org (lewis.sophia.w3.org [193.51.208.79])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 31F55441A4
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:28:21 +0000 (UTC)
Received: from mut38-7-78-226-234-114.fbx.proxad.net ([78.226.234.114] helo=kiribati.inrialpes.fr)
	by lewis.sophia.w3.org with esmtpsa (TLS1.2:DHE_RSA_AES_256_CBC_SHA256:256)
	(Exim 4.80)
	(envelope-from <kahan@w3.org>)
	id 1a1IK6-00071i-2J
	for dev@httpd.apache.org; Tue, 24 Nov 2015 18:28:14 +0000
Received: by kiribati.inrialpes.fr (Postfix, from userid 50104)
	id 6B94B910; Tue, 24 Nov 2015 19:28:12 +0100 (CET)
Date: Tue, 24 Nov 2015 19:28:12 +0100
From: Jose Kahan <jose.kahan@w3.org>
To: dev@httpd.apache.org
Subject: Weird interaction between mod_dir and [P] rewrites
Message-ID: <20151124182812.GA30905@kiribati.inrialpes.fr>
Reply-To: jose.kahan@w3.org
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="82I3+IH0IqGh5yIs"
Content-Disposition: inline
User-Agent: Mutt/1.5.21 (2010-09-15)


--82I3+IH0IqGh5yIs
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

Hi, 

This is something that has changed in 2.4 compared to 2.2.

When I follow the simple scenario (attached file) in a fresh 
install of apache, mod_dir is affecting the first value of 
DirectoryIndex to my request before it is being proxied. 

In 2.2, I was used to browse "https:/example,com/foo/" and have 
this being proxied to a backend as "https://example2.com/bar/". 
But now in 2.4.7, mod_dir is first converting "/foo/" to
"/foo/index.html" and then sending the proxy request as
"/bar/index.html".

Do you know if this is an intended feature or a bug? I would
expect the backend, and not the frontend, to decide what
it wants to add to a url ending by "/".

The code in mod_dir has changed and there's a section with a comment
saying that it steps aside when it detects it is inside a mod_rewrite
fixup. It seems to be missing a provision for proxy requests.

rbowen helped me test this against 2.4.17/fedora. I tested it against
2.4.10/debian jessie with the same result.

Thanks! Cheers.

-jose

--82I3+IH0IqGh5yIs
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename="mod_dir_scenario.txt"

Scenario for mod_dir and mod_rewrite bug

Tested against 2.4.17 in a fresh fedora install (Thanks rbowen!)

I have this setup

   /foo/.htaccess
   /bar/echo.php

Server runs in localhost.

1. In your apache config, make sure you have the DirectoryIndex directive
   e.g. 
        DirectoryIndex index.html

2. Put the following php script under /bar/echo.php Its goal is to echo 
the request URI. You can do it with another script if you want:

[[
$ cat echo.php
<?php
echo "\nRequested: " .  $_SERVER['REQUEST_URI'] . "\n";
?>
]]

3. Put this .htaccess under /foo/.htaccess 
[[
$ cat .htaccess
RewriteEngine on
RewriteBase /foo
RewriteRule ^(.*)$ http://localhost/bar/echo.php/$1 [P,L]
]]

4. Try the test

   GET -Se http://localhost/foo/

If you get back: 

   Requested: ...echo.php/index.html
   # index.html is the first value of my DirectoryIndex directive

You see the bug, mod_dir added the first value of DirectoryIndex 
before doing the proxy request.


--82I3+IH0IqGh5yIs--

From dev-return-84731-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:30:00 2015
Return-Path: <dev-return-84731-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DDFCD18699
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:29:59 +0000 (UTC)
Received: (qmail 4565 invoked by uid 500); 24 Nov 2015 18:29:54 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 4496 invoked by uid 500); 24 Nov 2015 18:29:54 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 4486 invoked by uid 99); 24 Nov 2015 18:29:54 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:29:54 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id E30B9180992
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:29:53 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id Eayru2L6XiAe for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:29:45 +0000 (UTC)
Received: from mail-ig0-f176.google.com (mail-ig0-f176.google.com [209.85.213.176])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id C0B5242AEE
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:29:44 +0000 (UTC)
Received: by igcto18 with SMTP id to18so20428572igc.0
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 10:29:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=MEbHbpAnsti8Y57rq/83DkhligOrWEU/kSFDpc8hKVE=;
        b=XfI8IdFcXPhNjfiMhf1rWhTo1aTnN5xh16J/4GD8w+tyWMlXhfzLWYivL7av6y0HWL
         XNv8aZ6YI6VCcWSdNcKnDapPNjsNJcJNGvWUzXQ5MQnpAHnB/66gb14ok034RKVdV2iR
         ln75rDTufWnt1uZsvLsby12Y5dv/U1G99yPRvQLKgVqdND9v8koMJzJ/RI4W2mMR9FI0
         2k4lObySt+njvcP98bypq1yHKaFNejpm/x4djOlrvjHUyYg/tb/fOUK6ITMmTwIPehwk
         x71RCDuRFMGBtN5DGKl5HXChnQsyfkIGG5ujqJTQSAQWiMGcxhq0aVCcXNhncaTKKPIk
         kZXA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=MEbHbpAnsti8Y57rq/83DkhligOrWEU/kSFDpc8hKVE=;
        b=aOC8b0n+KSrxCbdDFYsA3nl/RdKGKmwo/emqRpjF5M7EF6TzPjmJatzt+XgUN7n2Lb
         wCIOombZNcyTsuU2x60Lr+cY5F5K3RYXzGEdK/xuBI4ZgFASwYKErLIbY8g++eshK/XS
         zsrk7CvnEGWFFpi/TU575xymC5b+2YQNrtHm/yMy4KgiJdU2BVSfYQEC4DO3+KwuZWLn
         7j8kW60EF0Wu6GOonIheY8x8X05LUgu1b70OZT38218QXEjLjhnPAk4TBiB6xvgz1hzh
         lEHCnylTukEj2wKs22SKw6EkrrOCKrcd03om273kiwMKBOQDetxoKU2U6V32Dwu3mGoB
         6EMQ==
X-Gm-Message-State: ALoCoQm9PjRfVnyz7VA7LftL4y1mZvDpIh18e6G8+DjoqIdyemNgEe0ohd96laGdaDBSUdDJ5rkB
MIME-Version: 1.0
X-Received: by 10.50.143.10 with SMTP id sa10mr19490157igb.77.1448389784376;
 Tue, 24 Nov 2015 10:29:44 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Tue, 24 Nov 2015 10:29:44 -0800 (PST)
In-Reply-To: <3DEF82C9-6DCF-42BF-8B51-AD08B08DAC27@jaguNET.com>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org>
	<CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com>
	<3F16527F-A2FE-4CEE-A87C-E98BB6DF07ED@sharp.fm>
	<CAKQ1sVMze747yq7KD70DL2DC8fDtZwKPr310urLD=ndr=kTb0w@mail.gmail.com>
	<BCD8A2D9-4A6D-4976-A1FC-6E6B51507875@sharp.fm>
	<3DEF82C9-6DCF-42BF-8B51-AD08B08DAC27@jaguNET.com>
Date: Tue, 24 Nov 2015 12:29:44 -0600
Message-ID: <CACsi253j3WESGfDDmLagoKpjE8AegO5jkPdMFobSwMOfPKmRSg@mail.gmail.com>
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1135fe9a9836e605254d865e

--001a1135fe9a9836e605254d865e
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Tue, Nov 24, 2015 at 12:03 PM, Jim Jagielski <jim@jagunet.com> wrote:

>
> > On Nov 24, 2015, at 11:18 AM, Graham Leggett <minfrin@sharp.fm> wrote:
> >
> > On 24 Nov 2015, at 6:15 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
> >
> >> Not sure:
> >>   if (!strcmp(h, "max-age")
> >>       || ap_cmpcasestr(h, "max-age"))
> >> is likely to be a bit faster than a single ap_cmpcasestr() when it
> >> matches, but much slower when it does not.
> >
> > Yep, that=E2=80=99s the point.
> >
> > The vast majority of comparisons are lowercase for tokens like this.
> Might as well test that fast path first before testing the worst case
> scenario.
> >
>
> Is there REALLY that much of a diff between
>
>         if (ucharmap[*ps1] !=3D ucharmap[*ps2]) {
>
> and
>
>         if (*ps1 !=3D *ps2) {
>
> to muddle up the code like that though??
>

I'm wondering the other way around.  Even in Yann's latest exercise,
simply testing

   if ((*ps1 =3D=3D *ps2) || (ucharmap[*ps1] !=3D ucharmap[*ps2])) {

(or in Yann's code, use the const int lookups, considering that they
should be optimized out by the compiler if the first pattern matches).

Really we are expecting one of two things in strcmp_token(), we will
usually have an all-samecase (e.g. "GET" or "upgrade") and the
exceptions will largely be proper-case (e.g. "Upgrade").  So doing
the first char case-insensitively always seems smart and then
falling back on casematch until we don't case match.

By the time we've coded all that up, I wonder what the performance
is when simply checking equality and then the lookup match on the
character-by-character basis, for mixed vs Mixed vs MIXED.

--001a1135fe9a9836e605254d865e
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On T=
ue, Nov 24, 2015 at 12:03 PM, Jim Jagielski <span dir=3D"ltr">&lt;<a href=
=3D"mailto:jim@jagunet.com" target=3D"_blank">jim@jagunet.com</a>&gt;</span=
> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0=
.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-s=
tyle:solid;padding-left:1ex"><span class=3D""><br>
&gt; On Nov 24, 2015, at 11:18 AM, Graham Leggett &lt;<a href=3D"mailto:min=
frin@sharp.fm">minfrin@sharp.fm</a>&gt; wrote:<br>
&gt;<br>
&gt; On 24 Nov 2015, at 6:15 PM, Yann Ylavic &lt;<a href=3D"mailto:ylavic.d=
ev@gmail.com">ylavic.dev@gmail.com</a>&gt; wrote:<br>
&gt;<br>
&gt;&gt; Not sure:<br>
&gt;&gt;=C2=A0 =C2=A0if (!strcmp(h, &quot;max-age&quot;)<br>
&gt;&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0|| ap_cmpcasestr(h, &quot;max-age&quot;)=
)<br>
&gt;&gt; is likely to be a bit faster than a single ap_cmpcasestr() when it=
<br>
&gt;&gt; matches, but much slower when it does not.<br>
&gt;<br>
&gt; Yep, that=E2=80=99s the point.<br>
&gt;<br>
&gt; The vast majority of comparisons are lowercase for tokens like this. M=
ight as well test that fast path first before testing the worst case scenar=
io.<br>
&gt;<br>
<br>
</span>Is there REALLY that much of a diff between<br>
<span class=3D""><br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 if (ucharmap[*ps1] !=3D ucharmap[*ps2]) {<br>
<br>
</span>and<br>
<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 if (*ps1 !=3D *ps2) {<br>
<br>
to muddle up the code like that though??<br></blockquote><div><br></div><di=
v>I&#39;m wondering the other way around.=C2=A0 Even in Yann&#39;s latest e=
xercise,</div><div>simply testing=C2=A0</div><div><br></div><div>=C2=A0 =C2=
=A0if ((*ps1 =3D=3D *ps2) || (ucharmap[*ps1] !=3D ucharmap[*ps2])) {</div><=
div><br></div><div>(or in Yann&#39;s code, use the const int lookups, consi=
dering that they=C2=A0</div><div>should be optimized out by the compiler if=
 the first pattern matches).</div><div><br></div><div>Really we are expecti=
ng one of two things in strcmp_token(), we will</div><div>usually have an a=
ll-samecase (e.g. &quot;GET&quot; or &quot;upgrade&quot;) and the<br></div>=
<div>exceptions will largely be proper-case (e.g. &quot;Upgrade&quot;).=C2=
=A0 So doing</div><div>the first char case-insensitively always seems smart=
 and then</div><div>falling back on casematch until we don&#39;t case match=
.</div><div><br></div><div>By the time we&#39;ve coded all that up, I wonde=
r what the performance</div><div>is when simply checking equality and then =
the lookup match on the</div><div>character-by-character basis, for mixed v=
s Mixed vs MIXED.</div></div><br></div><div class=3D"gmail_extra"><br></div=
><div class=3D"gmail_extra"><br></div><div class=3D"gmail_extra"><br></div>=
</div>

--001a1135fe9a9836e605254d865e--

From dev-return-84732-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:32:10 2015
Return-Path: <dev-return-84732-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5D733186B0
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:32:09 +0000 (UTC)
Received: (qmail 14815 invoked by uid 500); 24 Nov 2015 18:32:08 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 14746 invoked by uid 500); 24 Nov 2015 18:32:08 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 14736 invoked by uid 99); 24 Nov 2015 18:32:08 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:32:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 74FCDC11BE
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:32:08 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 8-3ans2i4I8L for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:32:02 +0000 (UTC)
Received: from mail-qg0-f41.google.com (mail-qg0-f41.google.com [209.85.192.41])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id A4986441CC
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:32:02 +0000 (UTC)
Received: by qgea14 with SMTP id a14so16616608qge.0
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 10:32:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=apkwmMvZ/iTeFe2F9Zuz+KwnLTreMGHlHnaHA+4gzU8=;
        b=i3z3FEoJbnsWC+b7xtD91Zfv2ALR1SSpRHKWMwbPxA1oQttxfUi71JCB9KblbDbzuJ
         W8T67lOOSJZIdMVHSG5u6FTSCjTmU/NjwgUWlKDe73PtQL9siqZrx38CYP1wSXlSuR7j
         lP3nhsmcSLAUu5AfMhg4JEZvwy/x37Hbe0wSBsrqH535duqR8QiTfO2pP03aXXIXwmby
         OiOfuXLLiLD+nccAjHrPV9uK28zeWWRD9c0Hz6rP1+Wt2QHRui1Xj0ZlQAiCEgvhrsjJ
         9sBVPgK8bdCJkbzgxIZ2p4xVzc9Cba2O8gJZJasuL14BN5LBuxtmbKk0MxWuZ5PcpwN4
         RinA==
MIME-Version: 1.0
X-Received: by 10.140.226.198 with SMTP id w189mr35610302qhb.83.1448389922310;
 Tue, 24 Nov 2015 10:32:02 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 24 Nov 2015 10:32:02 -0800 (PST)
In-Reply-To: <CACsi252Kfyk6dsZVAf+-yFXDgLp7+ZidDyJFyadREPxyCxG=vA@mail.gmail.com>
References: <20151123155826.39A703A043E@svn01-us-west.apache.org>
	<CACsi252Ypb8wgfryMt689sn0nnJwkBrNpjaE7KzFwd3wk2LhdQ@mail.gmail.com>
	<5437AE63-0061-4346-98B5-F00D6D804E87@jaguNET.com>
	<CACsi250cw1NgJs9u6tdDNf90_UOdWHvKvosOmMe9XTbyi0Q_dQ@mail.gmail.com>
	<4AFAB327-14AD-44F0-8927-E289B28BCF63@jaguNET.com>
	<CACsi250QUg-xra6uwfvsNT_SJ=CPu2UNkQR0aSmLZDxG=hjSAw@mail.gmail.com>
	<CALK=YjMhgfB+Dtm7=RNVdkPFcMJLN_Zcw-MstFiMomN8fajS7w@mail.gmail.com>
	<CACsi253sVFy=85nBO4-Vp6REBe_mD2JZX3uPTwv-8Jf1E51EDA@mail.gmail.com>
	<CALK=YjOmpK=puj_Sb+3DbFz1ZKEnOwGLc83FFu0gKgFOK8OD=g@mail.gmail.com>
	<553DC613-8DC4-4EE8-9C1C-74B7C14C7269@jaguNET.com>
	<CACsi252Kfyk6dsZVAf+-yFXDgLp7+ZidDyJFyadREPxyCxG=vA@mail.gmail.com>
Date: Tue, 24 Nov 2015 19:32:02 +0100
Message-ID: <CAKQ1sVM9qDvuX5T6C7t6EzYgQoUPci=9Ug+tS1eDJuVpn_1N_Q@mail.gmail.com>
Subject: Re: svn commit: r1715859 - /httpd/httpd/trunk/include/httpd.h
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 7:24 PM, William A Rowe Jr <wrowe@rowe-clan.net> wrote:
>
> Well, there is another option, reject API bloat and insist that
> users set LC_ALL="C" if they want httpd to behave correctly
> and performantly.

Which API bloat? If we really want to avoid misleading anybody let's
call the function ap_tokencmp[n](), no?
(but I think casecmpstr[n]() is already quite clear about that...).

Setting the locale to "C" is not always desirable, some modules need
to work in unicode (UTF-8 or whatever), let's simply provide them
helpers, and do the right thing on the HTTP side.

From dev-return-84733-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:34:21 2015
Return-Path: <dev-return-84733-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EB522186D2
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:34:20 +0000 (UTC)
Received: (qmail 21874 invoked by uid 500); 24 Nov 2015 18:34:20 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 21813 invoked by uid 500); 24 Nov 2015 18:34:20 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 21803 invoked by uid 99); 24 Nov 2015 18:34:20 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:34:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id A92A1C39D1
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:34:19 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id SZTJfeoVuh4U for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:34:09 +0000 (UTC)
Received: from resqmta-po-03v.sys.comcast.net (resqmta-po-03v.sys.comcast.net [96.114.154.162])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 5913124E1A
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:34:08 +0000 (UTC)
Received: from resomta-po-15v.sys.comcast.net ([96.114.154.239])
	by resqmta-po-03v.sys.comcast.net with comcast
	id lWZy1r0035AAYLo01Wa1wy; Tue, 24 Nov 2015 18:34:01 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-15v.sys.comcast.net with comcast
	id lWa01r00A2U0RYt01Wa0Pq; Tue, 24 Nov 2015 18:34:01 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715859 - /httpd/httpd/trunk/include/httpd.h
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CACsi252Kfyk6dsZVAf+-yFXDgLp7+ZidDyJFyadREPxyCxG=vA@mail.gmail.com>
Date: Tue, 24 Nov 2015 13:34:00 -0500
Content-Transfer-Encoding: 7bit
Message-Id: <BDF09EFF-824A-40ED-8272-7AF17EBED7DD@jaguNET.com>
References: <20151123155826.39A703A043E@svn01-us-west.apache.org> <CACsi252Ypb8wgfryMt689sn0nnJwkBrNpjaE7KzFwd3wk2LhdQ@mail.gmail.com> <5437AE63-0061-4346-98B5-F00D6D804E87@jaguNET.com> <CACsi250cw1NgJs9u6tdDNf90_UOdWHvKvosOmMe9XTbyi0Q_dQ@mail.gmail.com> <4AFAB327-14AD-44F0-8927-E289B28BCF63@jaguNET.com> <CACsi250QUg-xra6uwfvsNT_SJ=CPu2UNkQR0aSmLZDxG=hjSAw@mail.gmail.com> <CALK=YjMhgfB+Dtm7=RNVdkPFcMJLN_Zcw-MstFiMomN8fajS7w@mail.gmail.com> <CACsi253sVFy=85nBO4-Vp6REBe_mD2JZX3uPTwv-8Jf1E51EDA@mail.gmail.com> <CALK=YjOmpK=puj_Sb+3DbFz1ZKEnOwGLc83FFu0gKgFOK8OD=g@mail.gmail.com> <553DC613-8DC4-4EE8-9C1C-74B7C14C7269@jaguNET.com> <CACsi252Kfyk6dsZVAf+-yFXDgLp7+ZidDyJFyadREPxyCxG=vA@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448390041;
	bh=dT7tx+4aZbj1gGt0IZ1atKmNehasA5R/i5Qu1Q1cEG4=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=fB6Fy4jKsOMYxOIR4XJUPJTJpK+JzvBIkeJTf1cPZiwpiP2j2Wp56PN0Q4awBIgJb
	 pQb5MVvgI8A3upMCREpOxhQjhesMZV3Yd5AVln71TP3QjZtJXqSjj5CataJxBYJf9M
	 cTHsU4ZPaRDoBPIdk5i/jl35xh7/c6MEu3BB+ybs0WoIM7DvOi1tSfAHuyBdRkCseR
	 kCjh2FyrCXDv/sAPAACri9Ly/KRHi3a2qkxlz9Qi6NipveaKgc5M4AmCehng/12hdO
	 DQ0gQeRf7vF3hNkMwaAwSZ3abfXvmo6z5iDcVwWMit+TTYvqmOKsIJhwnXKXX5DRX7
	 V/PfpVIcBq6JA==

At this stage I'm at the point of diminishing returns...

I don't care what color we paint this bike shed.

I'm just glad I was able to come up with something for
people to nit-pick at and get all alpha-male about :P

> On Nov 24, 2015, at 1:24 PM, William A Rowe Jr <wrowe@rowe-clan.net> wrote:
> 
> On Tue, Nov 24, 2015 at 11:53 AM, Jim Jagielski <jim@jagunet.com> wrote:
> It's for these types of reasons that I suggest that
> instead of looking at this as some replacement for
> strcasecmp, we instead look at the function on how we
> actually *use* it. As far as I know, we simply use
> it to see if 2 strings are equal, ignoring ASCII case.
> I could be wrong, and I'm sure someone will point out
> if and where I am :) But even so, if *that* is the
> use case, then we are free to define the function
> (and create whatever name) however we want.
> 
> 
> Well, there is another option, reject API bloat and insist that
> users set LC_ALL="C" if they want httpd to behave correctly
> and performantly.  I don't suppose you tested the performance
> after turning off UTF-8 processing on your Mac?
> 
> 


From dev-return-84734-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:36:19 2015
Return-Path: <dev-return-84734-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B7598186F1
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:36:19 +0000 (UTC)
Received: (qmail 27728 invoked by uid 500); 24 Nov 2015 18:36:19 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 27652 invoked by uid 500); 24 Nov 2015 18:36:19 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 27642 invoked by uid 99); 24 Nov 2015 18:36:19 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:36:19 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 8A9AF1A0AA0
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:36:18 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 3W_P3v8IegJW for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:36:08 +0000 (UTC)
Received: from resqmta-po-05v.sys.comcast.net (resqmta-po-05v.sys.comcast.net [96.114.154.164])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 27F9622F0A
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:36:08 +0000 (UTC)
Received: from resomta-po-14v.sys.comcast.net ([96.114.154.238])
	by resqmta-po-05v.sys.comcast.net with comcast
	id lWb71r00E58ss0Y01Wc7JT; Tue, 24 Nov 2015 18:36:07 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-14v.sys.comcast.net with comcast
	id lWc61r00S2U0RYt01Wc6KV; Tue, 24 Nov 2015 18:36:07 +0000
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CAKQ1sVNiuLp5onn+auPDsRP9kWZq72LbbEO_JxJai8jZfMpuFA@mail.gmail.com>
Date: Tue, 24 Nov 2015 13:36:06 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <A0372E49-CA61-4ADA-B3D0-36631C0DC10F@jaguNET.com>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org> <CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com> <3F16527F-A2FE-4CEE-A87C-E98BB6DF07ED@sharp.fm> <CAKQ1sVMze747yq7KD70DL2DC8fDtZwKPr310urLD=ndr=kTb0w@mail.gmail.com> <BCD8A2D9-4A6D-4976-A1FC-6E6B51507875@sharp.fm> <3DEF82C9-6DCF-42BF-8B51-AD08B08DAC27@jaguNET.com> <CAKQ1sVNiuLp5onn+auPDsRP9kWZq72LbbEO_JxJai8jZfMpuFA@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448390167;
	bh=suPCnOiLysGTK5GZxo1We63m+irGj0lDHmQYelaUpsU=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=u+hnGcFaVo8R74q5ejfl/updoDKBbrobtIEt5E+SusofmwjuvTDWCJqsL8PJWgjhl
	 ygAMwMkHV5mZY0AdHa039XgNfYgVfjF98I+sJg8va8xgZ+l1vRQ98f4WaEIYjzN2w9
	 PRwrqS8/hlXWguCwjGOCUlQaTAwmh32gWLCuOlRxzp1URjL89AMfNmO7ZMqHT8SZyg
	 IYzvvRa4QOf4loNbmGJVCeth6KEe1cBOtiKiu/BpntpA8vexZhDrOHhgKrLyoPf2wp
	 8vrxmp54Sdy6Jdn6uyKzvjcLernSndAf5TGjhFWne8dNnHZvpgzwxnTeKp1GSCZM6v
	 6apZjyMBBvlyw==


> On Nov 24, 2015, at 1:11 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>=20
> On Tue, Nov 24, 2015 at 7:03 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>>=20
>>> On Nov 24, 2015, at 11:18 AM, Graham Leggett <minfrin@sharp.fm> =
wrote:
>>>=20
>>> On 24 Nov 2015, at 6:15 PM, Yann Ylavic <ylavic.dev@gmail.com> =
wrote:
>>>=20
>>>> Not sure:
>>>>  if (!strcmp(h, "max-age")
>>>>      || ap_cmpcasestr(h, "max-age"))
>>>> is likely to be a bit faster than a single ap_cmpcasestr() when it
>>>> matches, but much slower when it does not.
>>>=20
>>> Yep, that=E2=80=99s the point.
>>>=20
>>> The vast majority of comparisons are lowercase for tokens like this. =
Might as well test that fast path first before testing the worst case =
scenario.
>>>=20
>>=20
>> Is there REALLY that much of a diff between
>>=20
>>        if (ucharmap[*ps1] !=3D ucharmap[*ps2]) {
>>=20
>> and
>>=20
>>        if (*ps1 !=3D *ps2) {
>>=20
>> to muddle up the code like that though??
>=20
> The test from the other thread including str[n]cmp() says:
>=20
> $ for i in `seq 0 3`; do
>    ./newtest $i 150000000 \
>        xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa \
>        xcxcxcxcxcxcxcxcxcxcwwwwwwwwwwaaaaaaaaaa \
>        0
> done
> - str[n]casecmp (nb=3D150000000, len=3D0)
> time =3D 8.435895804 : res =3D 0
> - ap_casecmpstr[n] (nb=3D150000000, len=3D0)
> time =3D 8.207019751 : res =3D 0
> - ap_casecmpstr[n] w/ index (nb=3D150000000, len=3D0)
> time =3D 4.429462481 : res =3D 0
> - str[n]cmp (nb=3D150000000, len=3D0)
> time =3D 1.923039981 : res =3D 0
>=20
> So strcmp() is really fast, since it probably advances word per =
word...

Yeah, likely just memcmp()



From dev-return-84735-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:37:22 2015
Return-Path: <dev-return-84735-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1BF9A18701
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:37:22 +0000 (UTC)
Received: (qmail 30940 invoked by uid 500); 24 Nov 2015 18:37:21 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 30861 invoked by uid 500); 24 Nov 2015 18:37:21 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 30851 invoked by uid 99); 24 Nov 2015 18:37:21 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:37:21 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id F1759C1364
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:37:20 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id bmvtHSO603kN for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:37:11 +0000 (UTC)
Received: from mail-ig0-f174.google.com (mail-ig0-f174.google.com [209.85.213.174])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id E987D24E50
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:37:10 +0000 (UTC)
Received: by igcto18 with SMTP id to18so20577623igc.0
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 10:37:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Fz9/Ieaw6ZowTEXZYnc7ebDdCwLmMRtqfeZ8mBHPLvw=;
        b=is0cjBmhUJ3EyCFGMXR2sfqivIiN8QKcQuPWpRQ6vLp/wSi+yXbcWdraL2Dqj1iVqJ
         V9qsH07loXxKtF6cj4ejuhJsyapN/HejFAfJuY98cXXYg0v/AvhQGWNFNbTZNHK0GnUl
         5vJgYgfVc4tPrXtz0/F9l6Gphz0oyqM4sUH1rDKoGUhPMsYTHU2CVMk3gPYBLMHZy1Ft
         B+uLBfzZKsCxfl7doSe7qT7Tqto2N8uBj5gXbC+1pkHJx8DSQJJUWpPpuDE/iOzgsXD4
         py2xY4t2MWw4C6Iz33I0wXMD6gc6WOZG6bsbgHZmSNIfehl1xjQcII1gB8cxidg+cocb
         Dqsw==
MIME-Version: 1.0
X-Received: by 10.50.78.194 with SMTP id d2mr19040869igx.72.1448390230005;
 Tue, 24 Nov 2015 10:37:10 -0800 (PST)
Received: by 10.64.114.199 with HTTP; Tue, 24 Nov 2015 10:37:09 -0800 (PST)
In-Reply-To: <20151124182812.GA30905@kiribati.inrialpes.fr>
References: <20151124182812.GA30905@kiribati.inrialpes.fr>
Date: Tue, 24 Nov 2015 13:37:09 -0500
Message-ID: <CALK=YjPu3N_4ojtOno77vBNdkMJqAtkDbDuRF=dk53LZLZZ1fA@mail.gmail.com>
Subject: Re: Weird interaction between mod_dir and [P] rewrites
From: Eric Covener <covener@gmail.com>
To: Apache HTTP Server Development List <dev@httpd.apache.org>, jose.kahan@w3.org
Content-Type: text/plain; charset=UTF-8

Tried DirectoryCheckHandler? It's a 2.2-vs-2.4 difference discovered a
little too late to change by default.

From dev-return-84736-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:40:10 2015
Return-Path: <dev-return-84736-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 81C0B1871C
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:40:10 +0000 (UTC)
Received: (qmail 36037 invoked by uid 500); 24 Nov 2015 18:40:10 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 35969 invoked by uid 500); 24 Nov 2015 18:40:10 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 35959 invoked by uid 99); 24 Nov 2015 18:40:10 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:40:10 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 7F0A11A28BB
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:40:09 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.98
X-Spam-Level: ***
X-Spam-Status: No, score=3.98 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id oqv77e01Nr5f for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:40:08 +0000 (UTC)
Received: from vms173009pub.verizon.net (vms173009pub.verizon.net [206.46.173.9])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id EC6A720234
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:40:07 +0000 (UTC)
Received: from [192.168.1.8] ([100.1.236.52]) by vms173009.mailsrvcs.net
 (Oracle Communications Messaging Server 7.0.5.32.0 64bit (built Jul 16 2014))
 with ESMTPA id <0NYC00IYA16JTC50@vms173009.mailsrvcs.net> for
 dev@httpd.apache.org; Tue, 24 Nov 2015 12:40:00 -0600 (CST)
X-CMAE-Score: 0
X-CMAE-Analysis: v=2.1 cv=Nc0brD34 c=1 sm=1 tr=0	a=UorMnhrCY2jH/mPejITChw==:117
 a=LaogzpLLAAAA:8 a=oR5dmqMzAAAA:8	a=qtqOOiqGOCEA:10 a=r77TgQKjGQsHNAKrUKIA:9
 a=HT80vRxNDXknmG3lX_gA:9	a=pILNOxqGKmIA:10 a=pGLkceISAAAA:8
 a=M79I34QuLs0uS7shuk4A:9	a=_W_S_7VecoQA:10
Subject: Re: Better ap_casecmpstr[n]?
To: dev@httpd.apache.org
References: <CAKQ1sVOgsKky7tLp2nH_t1tMuJX+sgg4hULztMPRtcSx9NEW9Q@mail.gmail.com>
From: "Mikhail T." <mi+thun@aldan.algebra.com>
Message-id: <5654AEFB.1020704@aldan.algebra.com>
Date: Tue, 24 Nov 2015 13:39:55 -0500
User-Agent: Mozilla/5.0 (X11; FreeBSD amd64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-version: 1.0
In-reply-to:
 <CAKQ1sVOgsKky7tLp2nH_t1tMuJX+sgg4hULztMPRtcSx9NEW9Q@mail.gmail.com>
Content-type: multipart/alternative;
 boundary=------------040004050001090700070904

This is a multi-part message in MIME format.
--------------040004050001090700070904
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: 7bit

On 24.11.2015 13:04, Yann Ylavic wrote:
> int ap_casecmpstr_2(const char *s1, const char *s2)
> {
>     size_t i;
>     const unsigned char *ps1 = (const unsigned char *) s1;
>     const unsigned char *ps2 = (const unsigned char *) s2;
>
>     for (i = 0; ; ++i) {
>         const int c1 = ps1[i];
>         const int c2 = ps2[i];
>
>         if (c1 != c2) {
>             return c1 - c2;
>         }
>         if (!c1) {
>             break;
>         }
>     }
>     return (0);
> }
Sorry, but would not the above declare "A" and "a" to be different?

    -mi


--------------040004050001090700070904
Content-Type: text/html; charset=windows-1252
Content-Transfer-Encoding: 7bit

<html>
  <head>
    <meta content="text/html; charset=windows-1252"
      http-equiv="Content-Type">
  </head>
  <body bgcolor="#FFFFFF" text="#000000">
    <div class="moz-cite-prefix">On 24.11.2015 13:04, Yann Ylavic wrote:<br>
    </div>
    <blockquote
cite="mid:CAKQ1sVOgsKky7tLp2nH_t1tMuJX+sgg4hULztMPRtcSx9NEW9Q@mail.gmail.com"
      type="cite">
      <pre wrap="">int ap_casecmpstr_2(const char *s1, const char *s2)
{
    size_t i;
    const unsigned char *ps1 = (const unsigned char *) s1;
    const unsigned char *ps2 = (const unsigned char *) s2;

    for (i = 0; ; ++i) {
        const int c1 = ps1[i];
        const int c2 = ps2[i];

        if (c1 != c2) {
            return c1 - c2;
        }
        if (!c1) {
            break;
        }
    }
    return (0);
}</pre>
    </blockquote>
    Sorry, but would not the above declare "A" and "a" to be different?<br>
    <blockquote>-mi<br>
    </blockquote>
  </body>
</html>

--------------040004050001090700070904--

From dev-return-84737-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:41:38 2015
Return-Path: <dev-return-84737-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1F67C18741
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:41:38 +0000 (UTC)
Received: (qmail 41977 invoked by uid 500); 24 Nov 2015 18:41:37 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 41891 invoked by uid 500); 24 Nov 2015 18:41:37 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 41881 invoked by uid 99); 24 Nov 2015 18:41:37 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:41:37 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 2DE4BC0E02
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:41:37 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.101
X-Spam-Level:
X-Spam-Status: No, score=-0.101 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Pi1cDXi7CUa2 for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:41:30 +0000 (UTC)
Received: from mail-qg0-f52.google.com (mail-qg0-f52.google.com [209.85.192.52])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 204E120C41
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:41:30 +0000 (UTC)
Received: by qgcc31 with SMTP id c31so16739377qgc.3
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 10:41:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=OMGIW1T2CGAa6AD7vuNLh81W1DpP9HsAfqYULkCilrI=;
        b=nACmpqPmMdvLWhBCiNWZ0/i62/QLpenriQDjCUlc1m0M1LjJBc70MHlB6H9VK9p7kz
         HP2xOtL2a0yf8y5lMNpgoIMhts9jzregyRlBV0QkLjE4pgJFWK1J2WMPWotzLakzTAHk
         WcWxmQA9HfhWJIhrV+hz/rX6EwKyojibAGwze9ITwC2FptTODN8Ud86dmRwxeVmAuzdQ
         VJw77Pm5K03bc+J33PG+NcaWkNSAEcmlh0uno5d1WqPFTwBNFVFNFCz4lkaWC+oPn1kF
         D8vE6jEFQWpqjSjuYJJJ1NdS2uFtBKmQOAMmiEUCtpJVdw5m9/WvGDMOA5ooaKP3Yxl6
         8DoA==
MIME-Version: 1.0
X-Received: by 10.140.220.136 with SMTP id q130mr31909680qhb.24.1448390489414;
 Tue, 24 Nov 2015 10:41:29 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 24 Nov 2015 10:41:29 -0800 (PST)
In-Reply-To: <CACsi253j3WESGfDDmLagoKpjE8AegO5jkPdMFobSwMOfPKmRSg@mail.gmail.com>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org>
	<CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com>
	<3F16527F-A2FE-4CEE-A87C-E98BB6DF07ED@sharp.fm>
	<CAKQ1sVMze747yq7KD70DL2DC8fDtZwKPr310urLD=ndr=kTb0w@mail.gmail.com>
	<BCD8A2D9-4A6D-4976-A1FC-6E6B51507875@sharp.fm>
	<3DEF82C9-6DCF-42BF-8B51-AD08B08DAC27@jaguNET.com>
	<CACsi253j3WESGfDDmLagoKpjE8AegO5jkPdMFobSwMOfPKmRSg@mail.gmail.com>
Date: Tue, 24 Nov 2015 19:41:29 +0100
Message-ID: <CAKQ1sVNkMAtCpGW_AjDZb_a4ZAUpPovmGu26msh7z-oxwfi_0g@mail.gmail.com>
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 7:29 PM, William A Rowe Jr <wrowe@rowe-clan.net> wrote:
>
> I'm wondering the other way around.  Even in Yann's latest exercise,
> simply testing
>
>    if ((*ps1 == *ps2) || (ucharmap[*ps1] != ucharmap[*ps2])) {
>
> (or in Yann's code, use the const int lookups, considering that they
> should be optimized out by the compiler if the first pattern matches).

*blink*
Actually the "indexed" function in my test does not include the
translation, just realized that while wanted to include your proposed
change.

-       const int c1 = ps1[i];
-       const int c2 = ps2[i];
+       const int c1 = ucharmap[ps1[i]];
+       const int c2 = ucharmap[ps2[i]];

So now it's just a tiny faster than Jim's, not worth the commit :) but
for -Os maybe...

BTW, I'll test your change with the original version.

From dev-return-84738-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:43:24 2015
Return-Path: <dev-return-84738-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6ECEE18759
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:43:24 +0000 (UTC)
Received: (qmail 48868 invoked by uid 500); 24 Nov 2015 18:43:24 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 48793 invoked by uid 500); 24 Nov 2015 18:43:24 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 48783 invoked by uid 99); 24 Nov 2015 18:43:23 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:43:23 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 73ADF1A28BB
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:43:23 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id XMU7IuE763EG for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:43:16 +0000 (UTC)
Received: from mail-qk0-f173.google.com (mail-qk0-f173.google.com [209.85.220.173])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 8F5C923288
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:43:16 +0000 (UTC)
Received: by qkao63 with SMTP id o63so8356538qka.2
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 10:43:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=dzM3RugYax2BjD6VHU3qUjMxibGHDCBs+i0NbTgDTpQ=;
        b=ZocF1LLmpL1lDirXzMcXpGMSM5fi9p6HkX5hYqlpfpFO9NOU2fHV1AurARzBxNf6G1
         hxy04j9MBN2uQ47hW7OhqxOS/+JjBBjSf0v7E0fkmTXsuVZlrL9+RLbZCUlTs5lLI5eP
         czJbK0zjdxUcQHAwOIW9AZsGgvfebj2jJDn4iVsNHr7lpwc9FsEYE5rmQwNwGCt6nnWU
         0ppDA7dP2mPwi0I851s+CLY85UH/u9hcGkdd4VzOHDeH+tGJX+LT/Ffck1j+rjbd09iP
         n1kkL/gwSwUFBero8n4fQXhkuirbNFLUNbOqDqcpa9dTYkNsmW09t2V/kaztHk+B/YJT
         iswQ==
MIME-Version: 1.0
X-Received: by 10.55.48.130 with SMTP id w124mr8980976qkw.79.1448390590550;
 Tue, 24 Nov 2015 10:43:10 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 24 Nov 2015 10:43:10 -0800 (PST)
In-Reply-To: <5654AEFB.1020704@aldan.algebra.com>
References: <CAKQ1sVOgsKky7tLp2nH_t1tMuJX+sgg4hULztMPRtcSx9NEW9Q@mail.gmail.com>
	<5654AEFB.1020704@aldan.algebra.com>
Date: Tue, 24 Nov 2015 19:43:10 +0100
Message-ID: <CAKQ1sVMJ1LBDHcoQy1YGa-_OMR2J6To557BwYwCQqDM+SBV8gw@mail.gmail.com>
Subject: Re: Better ap_casecmpstr[n]?
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 7:39 PM, Mikhail T. <mi+thun@aldan.algebra.com> wrote:
> On 24.11.2015 13:04, Yann Ylavic wrote:
>
> int ap_casecmpstr_2(const char *s1, const char *s2)
> {
>     size_t i;
>     const unsigned char *ps1 = (const unsigned char *) s1;
>     const unsigned char *ps2 = (const unsigned char *) s2;
>
>     for (i = 0; ; ++i) {
>         const int c1 = ps1[i];
>         const int c2 = ps2[i];
>
>         if (c1 != c2) {
>             return c1 - c2;
>         }
>         if (!c1) {
>             break;
>         }
>     }
>     return (0);
> }
>
> Sorry, but would not the above declare "A" and "a" to be different?

Yeah, forgot the translation, I went too fast :)

From dev-return-84739-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:47:15 2015
Return-Path: <dev-return-84739-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 734201877F
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:47:15 +0000 (UTC)
Received: (qmail 60690 invoked by uid 500); 24 Nov 2015 18:47:15 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 60625 invoked by uid 500); 24 Nov 2015 18:47:15 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 60614 invoked by uid 99); 24 Nov 2015 18:47:14 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:47:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 7C0B8C0F3F
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:47:14 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id G6ur-JjU6WKN for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:47:05 +0000 (UTC)
Received: from mail-io0-f179.google.com (mail-io0-f179.google.com [209.85.223.179])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 603BF20C34
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:47:05 +0000 (UTC)
Received: by ioc74 with SMTP id 74so29776331ioc.2
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 10:46:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=bXvV4iuFSvy2gyDPdnjzo9IYvo9qczk+Z/2WyKsidSM=;
        b=fvsOjelhFBsg/3SlUlp599Ckf0uloncto5xEVRytbrkLcQ+gHXa4PckQOyYQ3os6EQ
         94VB/4cr/mLT/A9FIFAFjgSmfEtIjhnh8P5S4fZ8OjwWbgz5C0hJ3GJ/O3/KhfAox7qc
         fFf5+CpS7afKVstgP06DY20btgo3uLJaj5pnuqJ5IL9dqKJY5jh5Gkms4rPe5eP63j9m
         TuFXUM+totUdxNGke/OjhAd+iMQX2qoINL/bccuiq4EPDZepSjV+lecrUyxs0WU6hQDC
         zVjJkSMO+vVqoytaI8dXobiVAiKMJgdbTXn7/f2Z5J5MJpYJI3DK1Hp26s4hYcq8YQad
         Skrg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=bXvV4iuFSvy2gyDPdnjzo9IYvo9qczk+Z/2WyKsidSM=;
        b=WEkdx5HsGKlq/7+fCiNTNRH0xvG1dYzHyMsbeSn4xLDOYnrReMeBie2qZfxlM7aVnt
         F7QnqW5Ek5ZyV0nk4nbYM2lPtf+c7NH+fU5ci83q+mmQTM/0KrnTy57g9eTzw/rH7ihy
         vRakcs7ffDjnASQfDbOkLJWxHGs18yoBBP1kBAYgatlm5owHiFNoXn3yGdJbDCR05h3v
         Ln7wkEtKJwTLxLGt/s+DpQj0CMXeKETJcO6JnFgHCEcT689UlF0W+Cqjp8/5+fUfRm9p
         66mcA0f3Yk6fIfyiwCdLEhO74x+vUL9Hx0IiJX0WIY/+5otJx+0xmoldW76Tciikd9ZY
         GQpQ==
X-Gm-Message-State: ALoCoQn+G28EWTzdgDtWdWgpV1gZUB6CeBrV2MYJDyaRwwd7ojwaydiqclFR/Jev6buXNZV/RyM1
MIME-Version: 1.0
X-Received: by 10.107.156.6 with SMTP id f6mr31850878ioe.163.1448390818595;
 Tue, 24 Nov 2015 10:46:58 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Tue, 24 Nov 2015 10:46:58 -0800 (PST)
In-Reply-To: <BDF09EFF-824A-40ED-8272-7AF17EBED7DD@jaguNET.com>
References: <20151123155826.39A703A043E@svn01-us-west.apache.org>
	<CACsi252Ypb8wgfryMt689sn0nnJwkBrNpjaE7KzFwd3wk2LhdQ@mail.gmail.com>
	<5437AE63-0061-4346-98B5-F00D6D804E87@jaguNET.com>
	<CACsi250cw1NgJs9u6tdDNf90_UOdWHvKvosOmMe9XTbyi0Q_dQ@mail.gmail.com>
	<4AFAB327-14AD-44F0-8927-E289B28BCF63@jaguNET.com>
	<CACsi250QUg-xra6uwfvsNT_SJ=CPu2UNkQR0aSmLZDxG=hjSAw@mail.gmail.com>
	<CALK=YjMhgfB+Dtm7=RNVdkPFcMJLN_Zcw-MstFiMomN8fajS7w@mail.gmail.com>
	<CACsi253sVFy=85nBO4-Vp6REBe_mD2JZX3uPTwv-8Jf1E51EDA@mail.gmail.com>
	<CALK=YjOmpK=puj_Sb+3DbFz1ZKEnOwGLc83FFu0gKgFOK8OD=g@mail.gmail.com>
	<553DC613-8DC4-4EE8-9C1C-74B7C14C7269@jaguNET.com>
	<CACsi252Kfyk6dsZVAf+-yFXDgLp7+ZidDyJFyadREPxyCxG=vA@mail.gmail.com>
	<BDF09EFF-824A-40ED-8272-7AF17EBED7DD@jaguNET.com>
Date: Tue, 24 Nov 2015 12:46:58 -0600
Message-ID: <CACsi250UqbF_bPG36h2YZq_tysdQQ5afk_EpdMhV2Qa3EgxqGw@mail.gmail.com>
Subject: Re: svn commit: r1715859 - /httpd/httpd/trunk/include/httpd.h
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1140ccc03d293805254dc47b

--001a1140ccc03d293805254dc47b
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 12:34 PM, Jim Jagielski <jim@jagunet.com> wrote:

> At this stage I'm at the point of diminishing returns...
>
> I don't care what color we paint this bike shed.
>
> I'm just glad I was able to come up with something for
> people to nit-pick at and get all alpha-male about :P
>

Sorry Jim, even board members have to refrain from ad-hominem
attacks on technical discussions, which is what everyone else
has been enjoying.  Good to see so many eyes on this optimization
even if it turned out to be a protocol correctness fix, instead!

--001a1140ccc03d293805254dc47b
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On T=
ue, Nov 24, 2015 at 12:34 PM, Jim Jagielski <span dir=3D"ltr">&lt;<a href=
=3D"mailto:jim@jagunet.com" target=3D"_blank">jim@jagunet.com</a>&gt;</span=
> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0=
.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-s=
tyle:solid;padding-left:1ex">At this stage I&#39;m at the point of diminish=
ing returns...<br>
<br>
I don&#39;t care what color we paint this bike shed.<br>
<br>
I&#39;m just glad I was able to come up with something for<br>
people to nit-pick at and get all alpha-male about :P<br>
<div class=3D""><div class=3D"h5"></div></div></blockquote></div><br></div>=
<div class=3D"gmail_extra">Sorry Jim, even board members have to refrain fr=
om ad-hominem</div><div class=3D"gmail_extra">attacks on technical discussi=
ons, which is what everyone else</div><div class=3D"gmail_extra">has been e=
njoying.=C2=A0 Good to see so many eyes on this optimization</div><div clas=
s=3D"gmail_extra">even if it turned out to be a protocol correctness fix, i=
nstead!</div><div class=3D"gmail_extra"><br></div><div class=3D"gmail_extra=
"><br></div></div>

--001a1140ccc03d293805254dc47b--

From dev-return-84740-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 18:56:45 2015
Return-Path: <dev-return-84740-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9D3A91882F
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 18:56:45 +0000 (UTC)
Received: (qmail 8186 invoked by uid 500); 24 Nov 2015 18:56:45 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 8108 invoked by uid 500); 24 Nov 2015 18:56:44 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 8098 invoked by uid 99); 24 Nov 2015 18:56:44 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 18:56:44 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 70A19180992
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:56:44 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id bDMUv5z_zuk5 for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 18:56:40 +0000 (UTC)
Received: from mail-ig0-f172.google.com (mail-ig0-f172.google.com [209.85.213.172])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 27F5B441AE
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:56:40 +0000 (UTC)
Received: by igbxm8 with SMTP id xm8so21283873igb.1
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 10:56:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Jfml24vafKVeQJqJI+rR3LenQxTnt2aT0h9i9v3Sjfo=;
        b=uJ5I8sFB82CHOggpFgViQ5CgOGGuwlBWn2gptz1e+9ojBTBRcG0IvK+E3CSkio5ds/
         ZSaDk8J6Luizu99NvXtI1+ngFsySpYAdvp9HRJKJOCMIh/BKotyhueY2tP+3A7yncMak
         uBV0xGUToHuJlHvSdXhgAsQpCI2kebZElU4wf5AoO8s4NP4pW7bdr/GhUkf5VfNDSm6W
         pOA5rc/Ll1bChplzRaYEAhk/BkGk3yqCogpDZWPkdumt0RWdP5fViGOhPeSdwJsQsXi9
         hS+7JgkdMuoaKRWaelfxLiSJWjrEH9vKdbpTcZidjTal0K/ObO69yr0p0Pihv0vksTj8
         phhA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=Jfml24vafKVeQJqJI+rR3LenQxTnt2aT0h9i9v3Sjfo=;
        b=W9yisOGOCST/Fejvf45hUVXd2QM3turZNL+n7Lmejjp5SCQDofEWh+YxJdUsO5Jg2x
         fSpr5GLBB3T++8azslZmGgWeyP7JxPl7su8j41PNP1eUklc0LaJdFMdyJigXsxydcRxl
         +n1EMISaEnIkpWPB0tr6CEMXb2CjX7Sgy0U/otrWBDy0p6YsWAimkklCq0XJdNOtAvE/
         A/RbzVo/mLA9CF/fh1Kq7O9O1IAs7mmw82LSOusTITr+Qh0lvJ8qPMUu1RXUcbRN93MQ
         e6tVOlHUxR9NtM0mtmVgTYWevIatzUV5voIJjGvoUtbpuszcHg8jo1ZG0VJ7q6k4nfG0
         lL4A==
X-Gm-Message-State: ALoCoQmFYLmH6e1NOzhfjMxN72Gd1xeO9xlLX9YQwReFnrwFQIz2FgUQk55LV3OMBsMwuGrRtBst
MIME-Version: 1.0
X-Received: by 10.50.20.163 with SMTP id o3mr3879308ige.35.1448391399687; Tue,
 24 Nov 2015 10:56:39 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Tue, 24 Nov 2015 10:56:39 -0800 (PST)
In-Reply-To: <CAKQ1sVMJ1LBDHcoQy1YGa-_OMR2J6To557BwYwCQqDM+SBV8gw@mail.gmail.com>
References: <CAKQ1sVOgsKky7tLp2nH_t1tMuJX+sgg4hULztMPRtcSx9NEW9Q@mail.gmail.com>
	<5654AEFB.1020704@aldan.algebra.com>
	<CAKQ1sVMJ1LBDHcoQy1YGa-_OMR2J6To557BwYwCQqDM+SBV8gw@mail.gmail.com>
Date: Tue, 24 Nov 2015 12:56:39 -0600
Message-ID: <CACsi253_f527B2M8dM1i2KGO8agy_RRrWEd89vAbk1PzcUcFWg@mail.gmail.com>
Subject: Re: Better ap_casecmpstr[n]?
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=047d7bd75decdfe25f05254de623

--047d7bd75decdfe25f05254de623
Content-Type: text/plain; charset=UTF-8

For the optimization cases Graham was proposing, how does this perform
on your test setup? Looking for both absmatches, case mismatches and
proper vs lowercase comparisons...

int ap_casecmpstr_2(const char *s1, const char *s2)
{
    size_t i;
    const unsigned char *ps1 = (const unsigned char *) s1;
    const unsigned char *ps2 = (const unsigned char *) s2;

    for (i = 0; ; ++i) {
        const int c1 = ucharmap[ps1[i]];
        const int c2 = ucharmap[ps2[i]];
        /* Above lookups are optimized away if first test below succeeds */

        if ((ps1[i] != ps2[i]) && (c1 != c2)) {
            return c1 - c2;
        }
        if (!c1) {
            break;
        }
    }
    return (0);
}


On Tue, Nov 24, 2015 at 12:43 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:

> On Tue, Nov 24, 2015 at 7:39 PM, Mikhail T. <mi+thun@aldan.algebra.com>
> wrote:
> > On 24.11.2015 13:04, Yann Ylavic wrote:
> >
> > int ap_casecmpstr_2(const char *s1, const char *s2)
> > {
> >     size_t i;
> >     const unsigned char *ps1 = (const unsigned char *) s1;
> >     const unsigned char *ps2 = (const unsigned char *) s2;
> >
> >     for (i = 0; ; ++i) {
> >         const int c1 = ps1[i];
> >         const int c2 = ps2[i];
> >
> >         if (c1 != c2) {
> >             return c1 - c2;
> >         }
> >         if (!c1) {
> >             break;
> >         }
> >     }
> >     return (0);
> > }
> >
> > Sorry, but would not the above declare "A" and "a" to be different?
>
> Yeah, forgot the translation, I went too fast :)
>

--047d7bd75decdfe25f05254de623
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><blockquote type=3D"cite" style=3D"color:rgb(80,0,80);font=
-size:12.8px"><pre style=3D"white-space:pre-wrap"><span style=3D"font-famil=
y:arial,sans-serif;font-size:small;color:rgb(34,34,34)">For the optimizatio=
n cases Graham was proposing, how does this perform </span><span style=3D"f=
ont-family:arial,sans-serif;font-size:small;color:rgb(34,34,34)">on your te=
st setup? Looking for both absmatches, case mismatches and proper vs lowerc=
ase comparisons...</span></pre><pre style=3D"white-space:pre-wrap">int ap_c=
asecmpstr_2(const char *s1, const char *s2)
{
    size_t i;
    const unsigned char *ps1 =3D (const unsigned char *) s1;
    const unsigned char *ps2 =3D (const unsigned char *) s2;

    for (i =3D 0; ; ++i) {
        const int c1 =3D ucharmap[ps1[i]];
        const int c2 =3D ucharmap[ps2[i]];
        /* Above lookups are optimized away if first test below succeeds */=
</pre><pre style=3D"white-space:pre-wrap">        if ((ps1[i] !=3D ps2[i]) =
&amp;&amp; (c1 !=3D c2)) {
            return c1 - c2;
        }
        if (!c1) {
            break;
        }
    }
    return (0);
}</pre></blockquote></div><div class=3D"gmail_extra"><br><div class=3D"gmai=
l_quote">On Tue, Nov 24, 2015 at 12:43 PM, Yann Ylavic <span dir=3D"ltr">&l=
t;<a href=3D"mailto:ylavic.dev@gmail.com" target=3D"_blank">ylavic.dev@gmai=
l.com</a>&gt;</span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"m=
argin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><span class=
=3D"">On Tue, Nov 24, 2015 at 7:39 PM, Mikhail T. &lt;<a href=3D"mailto:mi%=
2Bthun@aldan.algebra.com">mi+thun@aldan.algebra.com</a>&gt; wrote:<br>
&gt; On 24.11.2015 13:04, Yann Ylavic wrote:<br>
&gt;<br>
&gt; int ap_casecmpstr_2(const char *s1, const char *s2)<br>
&gt; {<br>
&gt;=C2=A0 =C2=A0 =C2=A0size_t i;<br>
&gt;=C2=A0 =C2=A0 =C2=A0const unsigned char *ps1 =3D (const unsigned char *=
) s1;<br>
&gt;=C2=A0 =C2=A0 =C2=A0const unsigned char *ps2 =3D (const unsigned char *=
) s2;<br>
&gt;<br>
&gt;=C2=A0 =C2=A0 =C2=A0for (i =3D 0; ; ++i) {<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0const int c1 =3D ps1[i];<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0const int c2 =3D ps2[i];<br>
&gt;<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0if (c1 !=3D c2) {<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0return c1 - c2;<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0}<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0if (!c1) {<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0break;<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0}<br>
&gt;=C2=A0 =C2=A0 =C2=A0}<br>
&gt;=C2=A0 =C2=A0 =C2=A0return (0);<br>
&gt; }<br>
&gt;<br>
&gt; Sorry, but would not the above declare &quot;A&quot; and &quot;a&quot;=
 to be different?<br>
<br>
</span>Yeah, forgot the translation, I went too fast :)<br>
</blockquote></div><br></div>

--047d7bd75decdfe25f05254de623--

From dev-return-84741-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 19:05:04 2015
Return-Path: <dev-return-84741-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 40B651889D
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 19:05:04 +0000 (UTC)
Received: (qmail 30095 invoked by uid 500); 24 Nov 2015 19:05:03 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 30032 invoked by uid 500); 24 Nov 2015 19:05:03 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 30021 invoked by uid 99); 24 Nov 2015 19:05:03 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 19:05:02 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 6F92A180992
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 19:05:02 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.099
X-Spam-Level:
X-Spam-Status: No, score=-0.099 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 7n4kZYtTMcyR for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 19:04:50 +0000 (UTC)
Received: from mail-qg0-f50.google.com (mail-qg0-f50.google.com [209.85.192.50])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id B92A0428E2
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 19:04:49 +0000 (UTC)
Received: by qgcc31 with SMTP id c31so17232695qgc.3
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 11:04:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=fH+L8s5J26oc9vHY6ZEUhy0JQ014HqI64N/evQToMtU=;
        b=YRs36J1v9ap/Zzg4osecLKX4EZk2lUCXggkZMpkrWUJFDvDP6kZejtM3sT6kwH4WuC
         Hj2e6mMSG/HJVD11+r+MxglFs5Cn1rqsBnEYHbvNXoraTp0cvjzLGAFrJq9MA5KJ0j1w
         xuOkrmW//ANWKw2xgN1Ma9FPIsAmXsMIZFUKdraAS6Yf+RaMpvKeTveTKNxGpT1DFIrB
         wlPx5THExJabxSbcLBJpg3GkZsU/baeGciwkGvAZsb0eVgDjM/r0zQYVbe3BJbvYK8yv
         6/ro3t23z9n2I45k2LTHji7oGGEf49I5TeT1+UdRfJ3HheSSzJx/cqHh/FcNIMgbT8EA
         kFiA==
MIME-Version: 1.0
X-Received: by 10.140.101.51 with SMTP id t48mr35980586qge.71.1448391888229;
 Tue, 24 Nov 2015 11:04:48 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Tue, 24 Nov 2015 11:04:48 -0800 (PST)
In-Reply-To: <CACsi253_f527B2M8dM1i2KGO8agy_RRrWEd89vAbk1PzcUcFWg@mail.gmail.com>
References: <CAKQ1sVOgsKky7tLp2nH_t1tMuJX+sgg4hULztMPRtcSx9NEW9Q@mail.gmail.com>
	<5654AEFB.1020704@aldan.algebra.com>
	<CAKQ1sVMJ1LBDHcoQy1YGa-_OMR2J6To557BwYwCQqDM+SBV8gw@mail.gmail.com>
	<CACsi253_f527B2M8dM1i2KGO8agy_RRrWEd89vAbk1PzcUcFWg@mail.gmail.com>
Date: Tue, 24 Nov 2015 20:04:48 +0100
Message-ID: <CAKQ1sVNS_XFo+4JK85fyF-mPtMdQ+02M=QbSMd34i+FAEh_r9A@mail.gmail.com>
Subject: Re: Better ap_casecmpstr[n]?
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: text/plain; charset=UTF-8

I tested this change with both Jim's and my versions, that's slower.

The better implementation I have so far is:

int ap_casecmpstr_2(const char *s1, const char *s2)
{
    size_t i;
    const unsigned char *ps1 = (const unsigned char *) s1;
    const unsigned char *ps2 = (const unsigned char *) s2;

    for (i = 0; ; ++i) {
        const int c1 = ucharmap[ps1[i]];
        const int c2 = ucharmap[ps2[i]];

        if (c1 != c2) {
            return c1 - c2;
        }
        if (!c1) {
            break;
        }
    }
    return (0);
}

which is ~15% faster than the current one (and not 50% unless I remove
the translation :)

I also tried:

    for (i = 0; ; ++i) {
        const int c1 = ps1[i];
        const int c2 = ps2[i];

        if (c1 != c2 && ucharmap[c1] != ucharmap[c2]) {
            return ucharmap[c1] - ucharmap[c2];
        }
        ...

but no.


On Tue, Nov 24, 2015 at 7:56 PM, William A Rowe Jr <wrowe@rowe-clan.net> wrote:
> For the optimization cases Graham was proposing, how does this perform on
> your test setup? Looking for both absmatches, case mismatches and proper vs
> lowercase comparisons...
>
> int ap_casecmpstr_2(const char *s1, const char *s2)
> {
>     size_t i;
>     const unsigned char *ps1 = (const unsigned char *) s1;
>     const unsigned char *ps2 = (const unsigned char *) s2;
>
>     for (i = 0; ; ++i) {
>         const int c1 = ucharmap[ps1[i]];
>         const int c2 = ucharmap[ps2[i]];
>         /* Above lookups are optimized away if first test below succeeds */
>
>         if ((ps1[i] != ps2[i]) && (c1 != c2)) {
>             return c1 - c2;
>         }
>         if (!c1) {
>             break;
>         }
>     }
>     return (0);
> }
>
>
> On Tue, Nov 24, 2015 at 12:43 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:
>>
>> On Tue, Nov 24, 2015 at 7:39 PM, Mikhail T. <mi+thun@aldan.algebra.com>
>> wrote:
>> > On 24.11.2015 13:04, Yann Ylavic wrote:
>> >
>> > int ap_casecmpstr_2(const char *s1, const char *s2)
>> > {
>> >     size_t i;
>> >     const unsigned char *ps1 = (const unsigned char *) s1;
>> >     const unsigned char *ps2 = (const unsigned char *) s2;
>> >
>> >     for (i = 0; ; ++i) {
>> >         const int c1 = ps1[i];
>> >         const int c2 = ps2[i];
>> >
>> >         if (c1 != c2) {
>> >             return c1 - c2;
>> >         }
>> >         if (!c1) {
>> >             break;
>> >         }
>> >     }
>> >     return (0);
>> > }
>> >
>> > Sorry, but would not the above declare "A" and "a" to be different?
>>
>> Yeah, forgot the translation, I went too fast :)
>
>

From dev-return-84742-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 19:10:10 2015
Return-Path: <dev-return-84742-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 43F29188D8
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 19:10:10 +0000 (UTC)
Received: (qmail 37535 invoked by uid 500); 24 Nov 2015 19:10:09 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 37454 invoked by uid 500); 24 Nov 2015 19:10:09 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 37444 invoked by uid 99); 24 Nov 2015 19:10:09 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 19:10:09 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 08F16C1364
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 19:10:09 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.652
X-Spam-Level:
X-Spam-Status: No, score=0.652 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id QzkPr-AIWGbx for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 19:09:59 +0000 (UTC)
Received: from resqmta-po-07v.sys.comcast.net (resqmta-po-07v.sys.comcast.net [96.114.154.166])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 8740520944
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 19:09:59 +0000 (UTC)
Received: from resomta-po-16v.sys.comcast.net ([96.114.154.240])
	by resqmta-po-07v.sys.comcast.net with comcast
	id lX9m1r00A5BUCh401X9zwg; Tue, 24 Nov 2015 19:09:59 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-16v.sys.comcast.net with comcast
	id lX9y1r00B2U0RYt01X9yVK; Tue, 24 Nov 2015 19:09:58 +0000
From: Jim Jagielski <jim@jaguNET.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Subject: NOTICE: Intent to T&R 2.4.18
Message-Id: <D72D7108-D156-4B96-A136-0BD46E709438@jaguNET.com>
Date: Tue, 24 Nov 2015 14:09:58 -0500
To: httpd <dev@httpd.apache.org>
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448392199;
	bh=lOBbyJW/mIKPX1XMDlHcaB4IsiH/I8gDTR323n/NxZc=;
	h=Received:Received:From:Content-Type:Subject:Message-Id:Date:To:
	 Mime-Version;
	b=OsLkpQ8A01633AvrqS7osTePnMT8AzMc0KzRVTwJR/khXFXer7O8Eb5beYvEty0xK
	 x3KVSKZBkQoepzcUt166Li3UMHvBuMCrusTKgJBbmOeVBg9ez7hFH9NLvxst1NQett
	 2KZXlYtvIE+mlagwG//DrR8nZEkFFhdoucfltgw+CilwJGnr+ICNvLLVO49da0nBAV
	 aGptqHG0mz1wurvrD2qUkxdw/1Gwjz4vr02jK8Cp82OUcE+IDwYIgXjxir2Lv2mpxk
	 Ha7FsZ/8EPfe3QL7BuDgnSVeVfMNqXMVtabQSIEKxUJCmAcHDW+iO2orxGmC3Upq0m
	 L5qOEHEQdkuoQ==

Just a head's up: I intend to T&R 2.4.18 around
Nov 30th...

From dev-return-84743-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 20:02:40 2015
Return-Path: <dev-return-84743-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7948318E4D
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 20:02:40 +0000 (UTC)
Received: (qmail 62969 invoked by uid 500); 24 Nov 2015 20:02:39 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 62896 invoked by uid 500); 24 Nov 2015 20:02:39 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 62879 invoked by uid 99); 24 Nov 2015 20:02:39 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 20:02:39 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 003E8C5B56
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 20:02:39 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.001
X-Spam-Level: ***
X-Spam-Status: No, score=3.001 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 8FvE1Fgws0hI for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 20:02:26 +0000 (UTC)
Received: from mail-io0-f177.google.com (mail-io0-f177.google.com [209.85.223.177])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id EDDB123060
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 20:02:25 +0000 (UTC)
Received: by ioir85 with SMTP id r85so32050715ioi.1
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 12:02:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Lx2UArBWFHwd4w+bI52vAkzG09x69zeobO6srmgWFs4=;
        b=AkpTbN6TGY+0neNID+tCb4p9Qi+tv1HDRuZaC4cGGeG3bNVNBNZegEoEiqusUAoR9x
         fjqCxywztTq9qSrgqi3Dql2+Ql4cQGeXJSaQpg9c2yROv1YYevx5VCrP59OpF0JY3Cpx
         TC3XpjXFHwMxamezQ8aTqV5G1etre3rxLmlOcBkNwFvKK+7UBB8lQ56TIMZYVyTdJ8T2
         l3h71Busgrj8xgHX9w1zc5EGAfEqBZI8A2D/kGdL7d6ynjTZHnYVAzGgdxPkx33dwUjN
         EXxcsnbUSR67X1m60VH5ppRZXQDdehPhxImdILmAd5d/BTwsIaAZ1iAn1JtmwgHeUC5n
         Vcvg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=Lx2UArBWFHwd4w+bI52vAkzG09x69zeobO6srmgWFs4=;
        b=lSPnSvmZeOM26cL9C7oqqH2DHzJxBNcX0wF7BqNYupMnqH1GVRGMJbH3l7ttzpI00Z
         g7sPNFNLxZv5XqsPdoIY/p4S4WKbnZyRxZwc6ycad+uxbzjv4d1LmgionhfXXPCwR/dr
         GPKmsoGDzq+0sD1DKM4+m5VKgeWYMuNlsZDVOR1afh6YeNM35wbYbC6hh8XCPvOvteGS
         mho/OMaOqg0qf2KJP3/eag5AEcwPaFkpeB9Ezs4buJn0FPh9yOjfvGTv/cg1TXRmZBgQ
         2151BuiRpW9pENP9uxSnO/7Gryb8hm4SHRZKGaMD80OGTkA4PENIYsTAvIv5Zk+aCN1O
         npUg==
X-Gm-Message-State: ALoCoQnqfJTWMEnWiN7MzZCGwIVB2Ab2gp2+DrFszidyYfL+cmSNuPiL+mAx15o+HwANQLWJ+UG/
MIME-Version: 1.0
X-Received: by 10.107.34.199 with SMTP id i190mr33049051ioi.150.1448395338896;
 Tue, 24 Nov 2015 12:02:18 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Tue, 24 Nov 2015 12:02:18 -0800 (PST)
In-Reply-To: <CAKQ1sVNS_XFo+4JK85fyF-mPtMdQ+02M=QbSMd34i+FAEh_r9A@mail.gmail.com>
References: <CAKQ1sVOgsKky7tLp2nH_t1tMuJX+sgg4hULztMPRtcSx9NEW9Q@mail.gmail.com>
	<5654AEFB.1020704@aldan.algebra.com>
	<CAKQ1sVMJ1LBDHcoQy1YGa-_OMR2J6To557BwYwCQqDM+SBV8gw@mail.gmail.com>
	<CACsi253_f527B2M8dM1i2KGO8agy_RRrWEd89vAbk1PzcUcFWg@mail.gmail.com>
	<CAKQ1sVNS_XFo+4JK85fyF-mPtMdQ+02M=QbSMd34i+FAEh_r9A@mail.gmail.com>
Date: Tue, 24 Nov 2015 14:02:18 -0600
Message-ID: <CACsi250qDh-xcEG3Zsk7bKWLPs7n0Kh_Pzms_h-UwFTmKN5Odg@mail.gmail.com>
Subject: Re: Better ap_casecmpstr[n]?
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1140d944ab709005254ed172

--001a1140d944ab709005254ed172
Content-Type: text/plain; charset=UTF-8

On Tue, Nov 24, 2015 at 1:04 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:

> I tested this change with both Jim's and my versions, that's slower.
>
> The better implementation I have so far is:
>
> int ap_casecmpstr_2(const char *s1, const char *s2)
> {
>     size_t i;
>     const unsigned char *ps1 = (const unsigned char *) s1;
>     const unsigned char *ps2 = (const unsigned char *) s2;
>
>     for (i = 0; ; ++i) {
>         const int c1 = ucharmap[ps1[i]];
>         const int c2 = ucharmap[ps2[i]];
>
>         if (c1 != c2) {
>             return c1 - c2;
>         }
>         if (!c1) {
>             break;
>         }
>     }
>     return (0);
> }
>
> which is ~15% faster than the current one (and not 50% unless I remove
> the translation :)
>
> I also tried:
>
>     for (i = 0; ; ++i) {
>         const int c1 = ps1[i];
>         const int c2 = ps2[i];
>
>         if (c1 != c2 && ucharmap[c1] != ucharmap[c2]) {
>             return ucharmap[c1] - ucharmap[c2];
>         }
>         ...
>
> but no.
>
>
> On Tue, Nov 24, 2015 at 7:56 PM, William A Rowe Jr <wrowe@rowe-clan.net>
> wrote:
> > For the optimization cases Graham was proposing, how does this perform on
> > your test setup? Looking for both absmatches, case mismatches and proper
> vs
> > lowercase comparisons...
> >
> > int ap_casecmpstr_2(const char *s1, const char *s2)
> > {
> >     size_t i;
> >     const unsigned char *ps1 = (const unsigned char *) s1;
> >     const unsigned char *ps2 = (const unsigned char *) s2;
> >
> >     for (i = 0; ; ++i) {
> >         const int c1 = ucharmap[ps1[i]];
> >         const int c2 = ucharmap[ps2[i]];
> >         /* Above lookups are optimized away if first test below succeeds
> */
> >
> >         if ((ps1[i] != ps2[i]) && (c1 != c2)) {
> >             return c1 - c2;
> >         }
> >         if (!c1) {
> >             break;
> >         }
> >     }
> >     return (0);
> > }
> >
> >
> > On Tue, Nov 24, 2015 at 12:43 PM, Yann Ylavic <ylavic.dev@gmail.com>
> wrote:
> >>
> >> On Tue, Nov 24, 2015 at 7:39 PM, Mikhail T. <mi+thun@aldan.algebra.com>
> >> wrote:
> >> > On 24.11.2015 13:04, Yann Ylavic wrote:
> >> >
> >> > int ap_casecmpstr_2(const char *s1, const char *s2)
> >> > {
> >> >     size_t i;
> >> >     const unsigned char *ps1 = (const unsigned char *) s1;
> >> >     const unsigned char *ps2 = (const unsigned char *) s2;
> >> >
> >> >     for (i = 0; ; ++i) {
> >> >         const int c1 = ps1[i];
> >> >         const int c2 = ps2[i];
> >> >
> >> >         if (c1 != c2) {
> >> >             return c1 - c2;
> >> >         }
> >> >         if (!c1) {
> >> >             break;
> >> >         }
> >> >     }
> >> >     return (0);
> >> > }
> >> >
> >> > Sorry, but would not the above declare "A" and "a" to be different?
> >>
> >> Yeah, forgot the translation, I went too fast :)
> >
> >
>

Sounds like this concludes the discussion of calling strcmp, followed by
this function
for optimization benefits.

Your code is much easier to read, IMHO and I'd prefer that syntax, even if
it optimizes almost identically to the existing code.

The final question was what to call it and how to document it.  Documenting
can be iterative in svn, but do we agree that ap_strcmp_token clarifies that
this is for unambiguous token comparisons, or should we stick with something
that implies ascii (not literally true), or lc_posix (closer)?

--001a1140d944ab709005254ed172
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On T=
ue, Nov 24, 2015 at 1:04 PM, Yann Ylavic <span dir=3D"ltr">&lt;<a href=3D"m=
ailto:ylavic.dev@gmail.com" target=3D"_blank">ylavic.dev@gmail.com</a>&gt;<=
/span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8=
ex;border-left:1px #ccc solid;padding-left:1ex">I tested this change with b=
oth Jim&#39;s and my versions, that&#39;s slower.<br>
<br>
The better implementation I have so far is:<br>
<span class=3D""><br>
int ap_casecmpstr_2(const char *s1, const char *s2)<br>
{<br>
=C2=A0 =C2=A0 size_t i;<br>
=C2=A0 =C2=A0 const unsigned char *ps1 =3D (const unsigned char *) s1;<br>
=C2=A0 =C2=A0 const unsigned char *ps2 =3D (const unsigned char *) s2;<br>
<br>
=C2=A0 =C2=A0 for (i =3D 0; ; ++i) {<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 const int c1 =3D ucharmap[ps1[i]];<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 const int c2 =3D ucharmap[ps2[i]];<br>
<br>
</span><span class=3D"">=C2=A0 =C2=A0 =C2=A0 =C2=A0 if (c1 !=3D c2) {<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 return c1 - c2;<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 }<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 if (!c1) {<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 break;<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 }<br>
=C2=A0 =C2=A0 }<br>
=C2=A0 =C2=A0 return (0);<br>
}<br>
<br>
</span>which is ~15% faster than the current one (and not 50% unless I remo=
ve<br>
the translation :)<br>
<br>
I also tried:<br>
<span class=3D""><br>
=C2=A0 =C2=A0 for (i =3D 0; ; ++i) {<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 const int c1 =3D ps1[i];<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 const int c2 =3D ps2[i];<br>
<br>
</span>=C2=A0 =C2=A0 =C2=A0 =C2=A0 if (c1 !=3D c2 &amp;&amp; ucharmap[c1] !=
=3D ucharmap[c2]) {<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 return ucharmap[c1] - ucharmap[c2=
];<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 }<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 ...<br>
<br>
but no.<br>
<div class=3D"HOEnZb"><div class=3D"h5"><br>
<br>
On Tue, Nov 24, 2015 at 7:56 PM, William A Rowe Jr &lt;<a href=3D"mailto:wr=
owe@rowe-clan.net">wrowe@rowe-clan.net</a>&gt; wrote:<br>
&gt; For the optimization cases Graham was proposing, how does this perform=
 on<br>
&gt; your test setup? Looking for both absmatches, case mismatches and prop=
er vs<br>
&gt; lowercase comparisons...<br>
&gt;<br>
&gt; int ap_casecmpstr_2(const char *s1, const char *s2)<br>
&gt; {<br>
&gt;=C2=A0 =C2=A0 =C2=A0size_t i;<br>
&gt;=C2=A0 =C2=A0 =C2=A0const unsigned char *ps1 =3D (const unsigned char *=
) s1;<br>
&gt;=C2=A0 =C2=A0 =C2=A0const unsigned char *ps2 =3D (const unsigned char *=
) s2;<br>
&gt;<br>
&gt;=C2=A0 =C2=A0 =C2=A0for (i =3D 0; ; ++i) {<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0const int c1 =3D ucharmap[ps1[i]];<br=
>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0const int c2 =3D ucharmap[ps2[i]];<br=
>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0/* Above lookups are optimized away i=
f first test below succeeds */<br>
&gt;<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0if ((ps1[i] !=3D ps2[i]) &amp;&amp; (=
c1 !=3D c2)) {<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0return c1 - c2;<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0}<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0if (!c1) {<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0break;<br>
&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0}<br>
&gt;=C2=A0 =C2=A0 =C2=A0}<br>
&gt;=C2=A0 =C2=A0 =C2=A0return (0);<br>
&gt; }<br>
&gt;<br>
&gt;<br>
&gt; On Tue, Nov 24, 2015 at 12:43 PM, Yann Ylavic &lt;<a href=3D"mailto:yl=
avic.dev@gmail.com">ylavic.dev@gmail.com</a>&gt; wrote:<br>
&gt;&gt;<br>
&gt;&gt; On Tue, Nov 24, 2015 at 7:39 PM, Mikhail T. &lt;<a href=3D"mailto:=
mi%2Bthun@aldan.algebra.com">mi+thun@aldan.algebra.com</a>&gt;<br>
&gt;&gt; wrote:<br>
&gt;&gt; &gt; On 24.11.2015 13:04, Yann Ylavic wrote:<br>
&gt;&gt; &gt;<br>
&gt;&gt; &gt; int ap_casecmpstr_2(const char *s1, const char *s2)<br>
&gt;&gt; &gt; {<br>
&gt;&gt; &gt;=C2=A0 =C2=A0 =C2=A0size_t i;<br>
&gt;&gt; &gt;=C2=A0 =C2=A0 =C2=A0const unsigned char *ps1 =3D (const unsign=
ed char *) s1;<br>
&gt;&gt; &gt;=C2=A0 =C2=A0 =C2=A0const unsigned char *ps2 =3D (const unsign=
ed char *) s2;<br>
&gt;&gt; &gt;<br>
&gt;&gt; &gt;=C2=A0 =C2=A0 =C2=A0for (i =3D 0; ; ++i) {<br>
&gt;&gt; &gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0const int c1 =3D ps1[i];<br>
&gt;&gt; &gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0const int c2 =3D ps2[i];<br>
&gt;&gt; &gt;<br>
&gt;&gt; &gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0if (c1 !=3D c2) {<br>
&gt;&gt; &gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0return c1 - c2=
;<br>
&gt;&gt; &gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0}<br>
&gt;&gt; &gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0if (!c1) {<br>
&gt;&gt; &gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0break;<br>
&gt;&gt; &gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0}<br>
&gt;&gt; &gt;=C2=A0 =C2=A0 =C2=A0}<br>
&gt;&gt; &gt;=C2=A0 =C2=A0 =C2=A0return (0);<br>
&gt;&gt; &gt; }<br>
&gt;&gt; &gt;<br>
&gt;&gt; &gt; Sorry, but would not the above declare &quot;A&quot; and &quo=
t;a&quot; to be different?<br>
&gt;&gt;<br>
&gt;&gt; Yeah, forgot the translation, I went too fast :)<br>
&gt;<br>
&gt;<br>
</div></div></blockquote></div><br></div><div class=3D"gmail_extra">Sounds =
like this concludes the discussion of calling strcmp, followed by this func=
tion</div><div class=3D"gmail_extra">for optimization benefits. =C2=A0</div=
><div class=3D"gmail_extra"><br></div><div class=3D"gmail_extra">Your code =
is much easier to read, IMHO and I&#39;d prefer that syntax, even if</div><=
div class=3D"gmail_extra">it optimizes almost identically to the existing c=
ode.</div><div class=3D"gmail_extra"><br></div><div class=3D"gmail_extra">T=
he final question was what to call it and how to document it.=C2=A0 Documen=
ting</div><div class=3D"gmail_extra">can be iterative in svn, but do we agr=
ee that ap_strcmp_token clarifies that</div><div class=3D"gmail_extra">this=
 is for unambiguous token comparisons, or should we stick with something</d=
iv><div class=3D"gmail_extra">that implies ascii (not literally true), or l=
c_posix (closer)?</div><div class=3D"gmail_extra"><br></div><div class=3D"g=
mail_extra"><br></div><div class=3D"gmail_extra"><br></div></div>

--001a1140d944ab709005254ed172--

From dev-return-84744-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 21:07:28 2015
Return-Path: <dev-return-84744-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5274F18533
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 21:07:28 +0000 (UTC)
Received: (qmail 6605 invoked by uid 500); 24 Nov 2015 21:07:27 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 6548 invoked by uid 500); 24 Nov 2015 21:07:27 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 6538 invoked by uid 99); 24 Nov 2015 21:07:27 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 21:07:27 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 0EFE6C0E02
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 21:07:26 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.555
X-Spam-Level:
X-Spam-Status: No, score=-0.555 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.554, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id rqT-p_aaCqFQ for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 21:07:25 +0000 (UTC)
Received: from monica.sharp.fm (monica.sharp.fm [80.168.143.5])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTP id 25CE225E79
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 21:07:24 +0000 (UTC)
Received: from [192.168.220.248] (unknown [192.168.220.248])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	(Authenticated sender: minfrin@sharp.fm)
	by monica.sharp.fm (Postfix) with ESMTPSA id CF27E81F38
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 21:07:17 +0000 (GMT)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: svn commit: r1715938 - /httpd/httpd/trunk/modules/cache/cache_util.c
From: Graham Leggett <minfrin@sharp.fm>
In-Reply-To: <CAKQ1sVPD+sz3mYmSYEL=KTjELocT-_WHRmzbfeD61rNi9YxE2A@mail.gmail.com>
Date: Tue, 24 Nov 2015 23:07:16 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <678DA4B6-AB66-43D4-B16E-B8BCB339B411@sharp.fm>
References: <20151123200516.D444B3A043E@svn01-us-west.apache.org> <CCB57B20-8E08-4FA2-8A27-169C21A1D755@jaguNET.com> <3F16527F-A2FE-4CEE-A87C-E98BB6DF07ED@sharp.fm> <CAKQ1sVMze747yq7KD70DL2DC8fDtZwKPr310urLD=ndr=kTb0w@mail.gmail.com> <BCD8A2D9-4A6D-4976-A1FC-6E6B51507875@sharp.fm> <CAKQ1sVPD+sz3mYmSYEL=KTjELocT-_WHRmzbfeD61rNi9YxE2A@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)

On 24 Nov 2015, at 6:36 PM, Yann Ylavic <ylavic.dev@gmail.com> wrote:

> Sure, but my point is that the worst case is likely depend on the
> application,

It will depend on the application, yes.

> eg:
>=20
>    case 'm':
>    case 'M':
>    if (!strncmp(token, "max-age", 7)
>        || !ap_casecmpstrn(token, "max-age", 7)) {
>        ...
>    }
>    else if (!strncmp(token, "max-stale", 9)
>             || !ap_casecmpstrn(token, "max-stale", 9)) {
>        ...
>    }
>    else if (!strncmp(token, "min-fresh", 9)
>             || !ap_casecmpstrn(token, "min-fresh", 9)) {
>        ...
>    }
>    else if (!strcmp(token, "max-revalidate")
>             || !ap_casecmpstr(token, "must-revalidate")) {

Oops - max-revalidate !=3D must-revalidate

>        ...
>    }
>    else if ...
>=20
> is going to be costly when matched against "must-revalidate", or worse
> "my-token=E2=80=9D.

In that case make it cheaper for those cases.

Have the length handy to check for a minimum-sane-length, then do a =
switch on the 4th character.

> We could use all str[n]cmp() first, but still it's a lot of
> comparisons, and now duplicated code too.

The duplicated code is not a worry, the worry is to ensure the most =
common cases take the fastest path.

Regards,
Graham
=E2=80=94


From dev-return-84745-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 21:25:47 2015
Return-Path: <dev-return-84745-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 29B7A18699
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 21:25:47 +0000 (UTC)
Received: (qmail 57683 invoked by uid 500); 24 Nov 2015 21:25:46 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 57602 invoked by uid 500); 24 Nov 2015 21:25:46 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 57591 invoked by uid 99); 24 Nov 2015 21:25:46 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 21:25:46 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 4273DC54EB
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 21:25:46 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.654
X-Spam-Level:
X-Spam-Status: No, score=-0.654 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RP_MATCHES_RCVD=-0.554, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id nVarAXrgORbz for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 21:25:38 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id F0CC542989
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 21:25:37 +0000 (UTC)
Received: from [192.168.178.61] (unknown [84.150.77.108])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 0FB9D15A00B6
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 22:25:30 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1448400330; bh=+ckiF7K7wCtUrOdLKhZ5tRJk1JWHISZklnKGw1X9lXQ=;
	h=From:Subject:Date:References:In-Reply-To:To:From;
	b=kqbHxAntMaZ/LX+znKdJPsO7tzXe+d+I2eqB2Mcl5N/qOny3oCI28ONvGmrVvwLZp
	 qeRXPiLiJ99HDWfH9bH9HWGqYcPswxMHjGxfeHDTJ1IVVxV34eoyB5tkBXJQJKr+ng
	 qUGPOgwzIlzAE9X2NXM5e0BAEWw20CnIT5GntDYM=
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (1.0)
Subject: Re: NOTICE: Intent to T&R 2.4.18
Message-Id: <43B47722-1E9C-45AE-9B8A-A7BBE8466201@greenbytes.de>
Date: Tue, 24 Nov 2015 22:25:30 +0100
References: <D72D7108-D156-4B96-A136-0BD46E709438@jaguNET.com>
In-Reply-To: <D72D7108-D156-4B96-A136-0BD46E709438@jaguNET.com>
To: dev@httpd.apache.org
X-Mailer: iPhone Mail (13B143)

Great! I try finish up the http2 stuff until Thursday as I will be unavailab=
le next week. But everything looks good so far from my end.=20

> Am 24.11.2015 um 20:09 schrieb Jim Jagielski <jim@jaguNET.com>:
>=20
> Just a head's up: I intend to T&R 2.4.18 around
> Nov 30th...

From dev-return-84746-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Tue Nov 24 21:42:21 2015
Return-Path: <dev-return-84746-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 62251187B1
	for <apmail-httpd-dev-archive@www.apache.org>; Tue, 24 Nov 2015 21:42:21 +0000 (UTC)
Received: (qmail 15921 invoked by uid 500); 24 Nov 2015 21:42:20 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 15855 invoked by uid 500); 24 Nov 2015 21:42:20 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 15845 invoked by uid 99); 24 Nov 2015 21:42:20 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Nov 2015 21:42:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 560F0C6C70
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 21:42:20 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.563
X-Spam-Level:
X-Spam-Status: No, score=-0.563 tagged_above=-999 required=6.31
	tests=[RP_MATCHES_RCVD=-0.562, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 2Xzr9zYYoYYl for <dev@httpd.apache.org>;
	Tue, 24 Nov 2015 21:42:18 +0000 (UTC)
Received: from lewis.sophia.w3.org (lewis.sophia.w3.org [193.51.208.79])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 7B567428E2
	for <dev@httpd.apache.org>; Tue, 24 Nov 2015 21:42:18 +0000 (UTC)
Received: from mut38-7-78-226-234-114.fbx.proxad.net ([78.226.234.114] helo=kiribati.inrialpes.fr)
	by lewis.sophia.w3.org with esmtpsa (TLS1.2:DHE_RSA_AES_256_CBC_SHA256:256)
	(Exim 4.80)
	(envelope-from <kahan@w3.org>)
	id 1a1LLs-0008Be-AP; Tue, 24 Nov 2015 21:42:16 +0000
Received: by kiribati.inrialpes.fr (Postfix, from userid 50104)
	id 9F893568; Tue, 24 Nov 2015 22:42:15 +0100 (CET)
Date: Tue, 24 Nov 2015 22:42:15 +0100
From: Jose Kahan <jose.kahan@w3.org>
To: Eric Covener <covener@gmail.com>
Cc: Apache HTTP Server Development List <dev@httpd.apache.org>
Subject: Re: Weird interaction between mod_dir and [P] rewrites
Message-ID: <20151124214215.GA32163@kiribati.inrialpes.fr>
Reply-To: jose.kahan@w3.org
References: <20151124182812.GA30905@kiribati.inrialpes.fr>
 <CALK=YjPu3N_4ojtOno77vBNdkMJqAtkDbDuRF=dk53LZLZZ1fA@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <CALK=YjPu3N_4ojtOno77vBNdkMJqAtkDbDuRF=dk53LZLZZ1fA@mail.gmail.com>
User-Agent: Mutt/1.5.21 (2010-09-15)

Eric,

On Tue, Nov 24, 2015 at 01:37:09PM -0500, Eric Covener wrote:
> Tried DirectoryCheckHandler? It's a 2.2-vs-2.4 difference discovered a
> little too late to change by default.

Thank you very much. That fixed my issue. I wonder if it would be
interesting to add a note about this change in behavior and
the directive in [1].

Thank you again for your promt reply.

Cheers,

-jose

[1] http://httpd.apache.org/docs/2.4/upgrading.html

From dev-return-84747-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 02:10:36 2015
Return-Path: <dev-return-84747-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0ED65178B1
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 02:10:36 +0000 (UTC)
Received: (qmail 55374 invoked by uid 500); 25 Nov 2015 02:10:35 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 55297 invoked by uid 500); 25 Nov 2015 02:10:35 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 55287 invoked by uid 99); 25 Nov 2015 02:10:35 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 02:10:35 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id C1DD3C39D7
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 02:10:34 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id yEe4ngBOZ97Y for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 02:10:32 +0000 (UTC)
Received: from mail-wm0-f46.google.com (mail-wm0-f46.google.com [74.125.82.46])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 29F3F40E13
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 02:10:32 +0000 (UTC)
Received: by wmuu63 with SMTP id u63so119896909wmu.0
        for <dev@httpd.apache.org>; Tue, 24 Nov 2015 18:10:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:thread-index
         :content-language;
        bh=Lz0M5fh/xyVGqyBfxBqrpdJTXbN1Uu+OlE6z/AbLbcM=;
        b=ZH/7+yY1VgU9LjPRFiVDQqikQ1IDHfYpdoZeIoyZsMf+vzp5qnT7ODwrvnxxwGxuw4
         E3/FWy+61Y0cKcSsUVuhdh3aHRXHSHjk1nCFBB8wgO9mL5uw7rVvK2UlENNr4Lq8VM+f
         o8hfPwUGflAnL0K2RgF71v8fwpn9FRjdnYE8c=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :thread-index:content-language;
        bh=Lz0M5fh/xyVGqyBfxBqrpdJTXbN1Uu+OlE6z/AbLbcM=;
        b=O/cjQDAkg7sgfgl5Ub8RLKofX+8b4h7TqgejlF53GDSM2JQgQrh3xsBDULkpaU+fbS
         NR3WqpXMDrf2cvOa/JGzLSpIErCroM40vVBumF/FMb/rF4O8VSzZMEMLq130TZab1rH6
         J0b+APQ5wfrbgnX6pF1AFuqCVfkSIz5OJMvCWh7Kt50nivCGGF4e0CGAU5U1NQL/DC1R
         ykKcYZmLbxCZvdgKBKWre24KitoG2s9mbumzexScHwoqzeCaUQHfbgbPz0L5iroPLG2Z
         +IOaPww5awrJMiWTx7TwlLMFjwUSIQN444Ft7iLyP7mM+fkgRt9v4MTjmZ5bGtbnRCsi
         OYRg==
X-Gm-Message-State: ALoCoQn6ypSkRdQzCTu7Hlgv0Ad1sumfuCA/bLYwhgnAd/rD8YLNTHYCTeFGwJRGWRKolssfinZj
X-Received: by 10.28.23.83 with SMTP id 80mr1558360wmx.78.1448417430918;
        Tue, 24 Nov 2015 18:10:30 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id h4sm20788334wjx.41.2015.11.24.18.10.30
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 24 Nov 2015 18:10:30 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <076f01d12320$7e7d1fb0$7b775f10$@qqmail.nl> <5A92C9AE-2C53-42F3-A4B1-5019A92EF6F6@greenbytes.de>
In-Reply-To: <5A92C9AE-2C53-42F3-A4B1-5019A92EF6F6@greenbytes.de>
Subject: RE: H2 stream dependencies
Date: Wed, 25 Nov 2015 03:10:21 +0100
Message-ID: <01e301d12726$716c79b0$54456d10$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AQHV/QgOI/sUUA2RfgLMoIZiYUV50QF0Ev7lnpapxyA=
Content-Language: nl

> -----Original Message-----
> From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
> Sent: vrijdag 20 november 2015 10:26
> To: dev@httpd.apache.org
> Subject: Re: H2 stream dependencies
>=20
> Bert,
>=20
> interesting and nice to see the progress. You probably could use =
priorities for
> ordering, especially when using the stream dependencies. I am not =
certain,
> however, if this will give you totally deterministic behavior. If =
stream B
> depends on A, usually A will be sent out before B. However, should =
stream A
> become suspended - e.g. unable to progress, either because there is no =
data
> available which some other thread needs to produce, or because the =
flow
> control window has not been updated in time - the server will start =
sending
> data for B.
>=20
> The state of the implementation is:
> 2.4.17: fully implemented priority handling on sending stream data, as
> implemented by the nghttp2 library

I'm seeing different behavior when running against my FreeBSD httpd =
2.4.17 (prefork mpm) and Windows (winnt mpm) builds.

Everything appears to work ok when sending a dependency within the =
headers frame to my FreeBSD box, while on my Windows build I get =
responses out of order.

Is it possible that different requests over the same connection are =
handled by different threads in this case?

Is there any logging that may help me diagnose this further?
(See log below)

The propfind is handled by mod_dav, while the report is handled by =
mod_dav_svn.

	Bert

--
[:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_stream.c(58): =
[client ::1:15125] h2_stream(12-11): created
[:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(71): =
[client ::1:15125] h2_session: stream(12-11): opened
[:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_workers.c(303): =
h2_workers: register mplx(12)
[:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_stream.c(167): =
[client ::1:15125] h2_mplx(12-11): start stream, task PROPFIND =
/svn-test-work/local_tmp/repos/!svn/rev/1 (localhost:7829)
[:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_stream.c(180): =
[client ::1:15125] h2_stream(12-11): closing input
[:09.091881 2015] [http2:debug] [pid 1956:tid 572] h2_workers.c(166): =
h2_worker(14): start task(12-11)
[:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(420): =
[client ::1:15125] h2_stream(12-11): input closed
[:09.091881 2015] [http2:debug] [pid 1956:tid 572] h2_task_input.c(84): =
[client ::1:15125] h2_task_input(12-11): request is:=20
[:09.091881 2015] [http2:debug] [pid 1956:tid 572] h2_h2.c(215): [client =
::1:15125] adding h1_to_h2_resp output filter
[:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_stream.c(58): =
[client ::1:15125] h2_stream(12-13): created
[:09.091881 2015] [ssl:debug] [pid 1956:tid 572] =
ssl_engine_kernel.c(238): [client ::1:15125] AH02034: Subsequent (No.2) =
HTTPS request received for child 119652660 (server localhost:443)
[:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(71): =
[client ::1:15125] h2_session: stream(12-13): opened
[:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_workers.c(303): =
h2_workers: register mplx(12)
[:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_stream.c(167): =
[client ::1:15125] h2_mplx(12-13): start stream, task REPORT =
/svn-test-work/local_tmp/repos/!svn/rev/1 (localhost:7829)
[:09.091881 2015] [http2:debug] [pid 1956:tid 340] h2_workers.c(166): =
h2_worker(4): start task(12-13)
[:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_stream.c(180): =
[client ::1:15125] h2_stream(12-13): closing input
[:09.091881 2015] [http2:debug] [pid 1956:tid 340] h2_task_input.c(84): =
[client ::1:15125] h2_task_input(12-13): request is:=20
[:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(420): =
[client ::1:15125] h2_stream(12-13): input closed
[:09.091881 2015] [http2:debug] [pid 1956:tid 340] h2_h2.c(215): [client =
::1:15125] adding h1_to_h2_resp output filter
[:09.091881 2015] [ssl:debug] [pid 1956:tid 340] =
ssl_engine_kernel.c(238): [client ::1:15125] AH02034: Subsequent (No.2) =
HTTPS request received for child 56701100 (server localhost:443)
[:09.091881 2015] [http2:debug] [pid 1956:tid 340] h2_task_input.c(107): =
[client ::1:15125] h2_task_input(12-13): read, block=3D0, mode=3D1, =
readbytes=3D0
[:09.091881 2015] [http2:debug] [pid 1956:tid 340] h2_task_input.c(107): =
[client ::1:15125] h2_task_input(12-13): read, block=3D0, mode=3D0, =
readbytes=3D153
[:09.091881 2015] [http2:debug] [pid 1956:tid 340] h2_task_input.c(107): =
[client ::1:15125] h2_task_input(12-13): read, block=3D0, mode=3D1, =
readbytes=3D0
[:09.091881 2015] [http2:debug] [pid 1956:tid 340] h2_task_input.c(107): =
[client ::1:15125] h2_task_input(12-13): read, block=3D0, mode=3D1, =
readbytes=3D0
[:09.091881 2015] [http2:debug] [pid 1956:tid 340] h2_task_input.c(107): =
[client ::1:15125] h2_task_input(12-13): read, block=3D0, mode=3D1, =
readbytes=3D0
[:09.092880 2015] [http2:debug] [pid 1956:tid 572] h2_task_input.c(107): =
[client ::1:15125] h2_task_input(12-11): read, block=3D0, mode=3D1, =
readbytes=3D0
[:09.092880 2015] [http2:debug] [pid 1956:tid 572] h2_task_input.c(107): =
[client ::1:15125] h2_task_input(12-11): read, block=3D0, mode=3D0, =
readbytes=3D95
[:09.092880 2015] [http2:debug] [pid 1956:tid 572] h2_task_input.c(107): =
[client ::1:15125] h2_task_input(12-11): read, block=3D0, mode=3D1, =
readbytes=3D0
[:09.092880 2015] [http2:debug] [pid 1956:tid 572] h2_task_input.c(107): =
[client ::1:15125] h2_task_input(12-11): read, block=3D0, mode=3D1, =
readbytes=3D0
[:09.092880 2015] [http2:debug] [pid 1956:tid 572] h2_task_input.c(107): =
[client ::1:15125] h2_task_input(12-11): read, block=3D0, mode=3D1, =
readbytes=3D0
[:09.097882 2015] [http2:debug] [pid 1956:tid 340] h2_mplx.c(564): =
[client ::1:15125] h2_mplx(12-13): open response: 200
::1 - jrandom [25/Nov/2015:02:55:09 +0100] "REPORT =
/svn-test-work/local_tmp/repos/!svn/rev/1 HTTP/1.1" 200 2718
[:09.097882 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(1126): =
[client ::1:15125] h2_stream(12-13): submitted response 200, rv=3D0
[:09.097882 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(234): =
[client ::1:15125] h2_stream(12-13): handled, closing
[:09.097882 2015] [http2:debug] [pid 1956:tid 340] h2_task_input.c(107): =
[client ::1:15125] h2_task_input(12-13): read, block=3D1, mode=3D3, =
readbytes=3D1
[:09.097882 2015] [http2:debug] [pid 1956:tid 340] h2_stream.c(75): =
[client ::1:15125] h2_stream(12-13): destroy
[:09.105878 2015] [http2:debug] [pid 1956:tid 572] h2_mplx.c(564): =
[client ::1:15125] h2_mplx(12-11): open response: 207
::1 - jrandom [25/Nov/2015:02:55:09 +0100] "PROPFIND =
/svn-test-work/local_tmp/repos/!svn/rev/1 HTTP/1.1" 207 1267
[:09.105878 2015] [http2:debug] [pid 1956:tid 572] h2_task_input.c(107): =
[client ::1:15125] h2_task_input(12-11): read, block=3D1, mode=3D3, =
readbytes=3D1
[:09.105878 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(1126): =
[client ::1:15125] h2_stream(12-11): submitted response 207, rv=3D0
[:09.105878 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(234): =
[client ::1:15125] h2_stream(12-11): handled, closing
[:09.105878 2015] [http2:debug] [pid 1956:tid 908] h2_stream.c(75): =
[client ::1:15125] h2_stream(12-11): destroy


[:11.307516 2015] [ssl:info] [pid 1956:tid 908] (OS 10054)An existing =
connection was forcibly closed by the remote host.  : [client ::1:15125] =
AH01991: SSL input filter read failed.
[:11.307516 2015] [http2:debug] [pid 1956:tid 908] h2_conn_io.c(170): =
(OS 10054)An existing connection was forcibly closed by the remote host. =
 : [client ::1:15125] h2_conn_io: error reading
[:11.307516 2015] [ssl:info] [pid 1956:tid 904] (OS 10054)An existing =
connection was forcibly closed by the remote host.  : [client ::1:15126] =
AH01991: SSL input filter read failed.
[:11.307516 2015] [http2:info] [pid 1956:tid 908] (OS 10054)An existing =
connection was forcibly closed by the remote host.  : [client ::1:15125] =
AH02950: h2_session(12): error reading, terminating
[:11.307516 2015] [http2:debug] [pid 1956:tid 904] h2_conn_io.c(170): =
(OS 10054)An existing connection was forcibly closed by the remote host. =
 : [client ::1:15126] h2_conn_io: error reading
[:11.307516 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(693): =
[client ::1:15125] session(12): aborting session, reason=3D-505 Protocol =
error
[:11.307516 2015] [http2:info] [pid 1956:tid 904] (OS 10054)An existing =
connection was forcibly closed by the remote host.  : [client ::1:15126] =
AH02950: h2_session(14): error reading, terminating
[:11.308516 2015] [http2:debug] [pid 1956:tid 904] h2_session.c(693): =
[client ::1:15126] session(14): aborting session, reason=3D-505 Protocol =
error
[:11.307516 2015] [http2:debug] [pid 1956:tid 908] h2_conn.c(328): (OS =
10054)An existing connection was forcibly closed by the remote host.  : =
[client ::1:15125] h2_session(12): done
[:11.308516 2015] [http2:debug] [pid 1956:tid 904] h2_conn.c(328): (OS =
10054)An existing connection was forcibly closed by the remote host.  : =
[client ::1:15126] h2_session(14): done
[:11.308516 2015] [ssl:debug] [pid 1956:tid 904] ssl_engine_io.c(1003): =
[client ::1:15126] AH02001: Connection closed to child 14 with standard =
shutdown (server localhost:443)
[:11.308516 2015] [ssl:debug] [pid 1956:tid 908] ssl_engine_io.c(1003): =
[client ::1:15125] AH02001: Connection closed to child 12 with standard =
shutdown (server localhost:443)
[:11.359567 2015] [mpm_winnt:crit] [pid 1956:tid 364] AH02538: Child: =
Parent process exited abruptly. Child process is ending
[:11.359567 2015] [mpm_winnt:warn] [pid 1956:tid 936] (OS 995)The I/O =
operation has been aborted because of either a thread exit or an =
application request.  : AH00341: winnt_accept: Asynchronous AcceptEx =
failed.
[:11.359567 2015] [mpm_winnt:warn] [pid 1956:tid 920] (OS 995)The I/O =
operation has been aborted because of either a thread exit or an =
application request.  : AH00341: winnt_accept: Asynchronous AcceptEx =
failed.
[:11.359567 2015] [mpm_winnt:debug] [pid 1956:tid 936] child.c(735): =
AH00348: Child: Accept thread exiting.
[:11.359567 2015] [mpm_winnt:debug] [pid 1956:tid 920] child.c(735): =
AH00348: Child: Accept thread exiting.
[:12.360520 2015] [mpm_winnt:debug] [pid 1956:tid 364] child.c(1215): =
AH00359: Child: Released the start mutex
[:12.360520 2015] [mpm_winnt:debug] [pid 1956:tid 364] child.c(1227): =
AH00361: Child: 16 threads blocked on the completion port


From dev-return-84748-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 09:04:53 2015
Return-Path: <dev-return-84748-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F1695186EA
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 09:04:52 +0000 (UTC)
Received: (qmail 33240 invoked by uid 500); 25 Nov 2015 09:04:52 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 33172 invoked by uid 500); 25 Nov 2015 09:04:52 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 33162 invoked by uid 99); 25 Nov 2015 09:04:52 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 09:04:52 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 0DDEA18028D
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 09:04:52 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.654
X-Spam-Level:
X-Spam-Status: No, score=-0.654 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RP_MATCHES_RCVD=-0.554, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id ROpZ-5Wmkflw for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 09:04:45 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 3CE2920229
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 09:04:45 +0000 (UTC)
Received: from [192.168.1.42] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 27E2915A027B
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 10:04:37 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1448442278; bh=K/8S2fgSwAju8+yPMvDzZn9bhOjeJUzG7cXIej/9RPg=;
	h=Subject:From:In-Reply-To:Date:References:To:From;
	b=QiBiHGwJJce4MLmHvdfurgeAkgGaBSHPpK6YSZE53eObPeKDoBunMpYHdDoL2n1oK
	 8p7xUJ0QTWcxy8wy1+riS/LjtgG2niZlCbDMzDOBkCZFjQH8RRO31QUDq3v5V4hnBy
	 tV6CpICR9MfXbFKETranyeL3hT5p/Ktzdw+TH/2s=
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
Subject: Re: H2 stream dependencies
From: Stefan Eissing <stefan.eissing@greenbytes.de>
In-Reply-To: <01e301d12726$716c79b0$54456d10$@qqmail.nl>
Date: Wed, 25 Nov 2015 10:04:42 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <966EAA27-78D7-42C6-A5BE-581408C18459@greenbytes.de>
References: <076f01d12320$7e7d1fb0$7b775f10$@qqmail.nl> <5A92C9AE-2C53-42F3-A4B1-5019A92EF6F6@greenbytes.de> <01e301d12726$716c79b0$54456d10$@qqmail.nl>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.3096.5)

The execution order of requests is not defined by the protocol and up to =
the server implementation. As you noticed, one major factor is the mpm =
active in httpd, influencing how, and if, requests are handled in =
parallel.

Even setting dependencies and priorities on streams will not make this =
fully deterministic, as I tried to explain.

The case of a prefork mpm without further configuration is an extreme =
case. Prefork, intended to allow a single thread processing model, has =
by default 1(!) http/2 worker. That means that requests are worked on =
one at a time. A blocking request may therefore block all later =
requests. This is not how HTTP/2 is supposed to work, but  it is how =
prefork is.

You can configure more H2Workers and have multiple threads even in =
prefork. But you need to be sure that the application you run can live =
with multi-threading.

Without knowing your client that well, it seems to assume that requests =
are processed one after the other. And rely on that. This assumption no =
longer holds in HTTP/2. If you send 2 requests, responses may arrive in =
any order or interleaved, not matter what you specify for priority. =
Relying on the exposed behaviour of a certain implementation under =
certain configuration is probably the least that you'd want.

//Stefan



> Am 25.11.2015 um 03:10 schrieb Bert Huijben <bert@qqmail.nl>:
>=20
>> -----Original Message-----
>> From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
>> Sent: vrijdag 20 november 2015 10:26
>> To: dev@httpd.apache.org
>> Subject: Re: H2 stream dependencies
>>=20
>> Bert,
>>=20
>> interesting and nice to see the progress. You probably could use =
priorities for
>> ordering, especially when using the stream dependencies. I am not =
certain,
>> however, if this will give you totally deterministic behavior. If =
stream B
>> depends on A, usually A will be sent out before B. However, should =
stream A
>> become suspended - e.g. unable to progress, either because there is =
no data
>> available which some other thread needs to produce, or because the =
flow
>> control window has not been updated in time - the server will start =
sending
>> data for B.
>>=20
>> The state of the implementation is:
>> 2.4.17: fully implemented priority handling on sending stream data, =
as
>> implemented by the nghttp2 library
>=20
> I'm seeing different behavior when running against my FreeBSD httpd =
2.4.17 (prefork mpm) and Windows (winnt mpm) builds.
>=20
> Everything appears to work ok when sending a dependency within the =
headers frame to my FreeBSD box, while on my Windows build I get =
responses out of order.
>=20
> Is it possible that different requests over the same connection are =
handled by different threads in this case?
>=20
> Is there any logging that may help me diagnose this further?
> (See log below)
>=20
> The propfind is handled by mod_dav, while the report is handled by =
mod_dav_svn.
>=20
> 	Bert
>=20
> --
> [:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_stream.c(58): =
[client ::1:15125] h2_stream(12-11): created
> [:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(71): =
[client ::1:15125] h2_session: stream(12-11): opened
> [:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_workers.c(303): =
h2_workers: register mplx(12)
> [:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_stream.c(167): =
[client ::1:15125] h2_mplx(12-11): start stream, task PROPFIND =
/svn-test-work/local_tmp/repos/!svn/rev/1 (localhost:7829)
> [:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_stream.c(180): =
[client ::1:15125] h2_stream(12-11): closing input
> [:09.091881 2015] [http2:debug] [pid 1956:tid 572] h2_workers.c(166): =
h2_worker(14): start task(12-11)
> [:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(420): =
[client ::1:15125] h2_stream(12-11): input closed
> [:09.091881 2015] [http2:debug] [pid 1956:tid 572] =
h2_task_input.c(84): [client ::1:15125] h2_task_input(12-11): request =
is:=20
> [:09.091881 2015] [http2:debug] [pid 1956:tid 572] h2_h2.c(215): =
[client ::1:15125] adding h1_to_h2_resp output filter
> [:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_stream.c(58): =
[client ::1:15125] h2_stream(12-13): created
> [:09.091881 2015] [ssl:debug] [pid 1956:tid 572] =
ssl_engine_kernel.c(238): [client ::1:15125] AH02034: Subsequent (No.2) =
HTTPS request received for child 119652660 (server localhost:443)
> [:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(71): =
[client ::1:15125] h2_session: stream(12-13): opened
> [:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_workers.c(303): =
h2_workers: register mplx(12)
> [:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_stream.c(167): =
[client ::1:15125] h2_mplx(12-13): start stream, task REPORT =
/svn-test-work/local_tmp/repos/!svn/rev/1 (localhost:7829)
> [:09.091881 2015] [http2:debug] [pid 1956:tid 340] h2_workers.c(166): =
h2_worker(4): start task(12-13)
> [:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_stream.c(180): =
[client ::1:15125] h2_stream(12-13): closing input
> [:09.091881 2015] [http2:debug] [pid 1956:tid 340] =
h2_task_input.c(84): [client ::1:15125] h2_task_input(12-13): request =
is:=20
> [:09.091881 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(420): =
[client ::1:15125] h2_stream(12-13): input closed
> [:09.091881 2015] [http2:debug] [pid 1956:tid 340] h2_h2.c(215): =
[client ::1:15125] adding h1_to_h2_resp output filter
> [:09.091881 2015] [ssl:debug] [pid 1956:tid 340] =
ssl_engine_kernel.c(238): [client ::1:15125] AH02034: Subsequent (No.2) =
HTTPS request received for child 56701100 (server localhost:443)
> [:09.091881 2015] [http2:debug] [pid 1956:tid 340] =
h2_task_input.c(107): [client ::1:15125] h2_task_input(12-13): read, =
block=3D0, mode=3D1, readbytes=3D0
> [:09.091881 2015] [http2:debug] [pid 1956:tid 340] =
h2_task_input.c(107): [client ::1:15125] h2_task_input(12-13): read, =
block=3D0, mode=3D0, readbytes=3D153
> [:09.091881 2015] [http2:debug] [pid 1956:tid 340] =
h2_task_input.c(107): [client ::1:15125] h2_task_input(12-13): read, =
block=3D0, mode=3D1, readbytes=3D0
> [:09.091881 2015] [http2:debug] [pid 1956:tid 340] =
h2_task_input.c(107): [client ::1:15125] h2_task_input(12-13): read, =
block=3D0, mode=3D1, readbytes=3D0
> [:09.091881 2015] [http2:debug] [pid 1956:tid 340] =
h2_task_input.c(107): [client ::1:15125] h2_task_input(12-13): read, =
block=3D0, mode=3D1, readbytes=3D0
> [:09.092880 2015] [http2:debug] [pid 1956:tid 572] =
h2_task_input.c(107): [client ::1:15125] h2_task_input(12-11): read, =
block=3D0, mode=3D1, readbytes=3D0
> [:09.092880 2015] [http2:debug] [pid 1956:tid 572] =
h2_task_input.c(107): [client ::1:15125] h2_task_input(12-11): read, =
block=3D0, mode=3D0, readbytes=3D95
> [:09.092880 2015] [http2:debug] [pid 1956:tid 572] =
h2_task_input.c(107): [client ::1:15125] h2_task_input(12-11): read, =
block=3D0, mode=3D1, readbytes=3D0
> [:09.092880 2015] [http2:debug] [pid 1956:tid 572] =
h2_task_input.c(107): [client ::1:15125] h2_task_input(12-11): read, =
block=3D0, mode=3D1, readbytes=3D0
> [:09.092880 2015] [http2:debug] [pid 1956:tid 572] =
h2_task_input.c(107): [client ::1:15125] h2_task_input(12-11): read, =
block=3D0, mode=3D1, readbytes=3D0
> [:09.097882 2015] [http2:debug] [pid 1956:tid 340] h2_mplx.c(564): =
[client ::1:15125] h2_mplx(12-13): open response: 200
> ::1 - jrandom [25/Nov/2015:02:55:09 +0100] "REPORT =
/svn-test-work/local_tmp/repos/!svn/rev/1 HTTP/1.1" 200 2718
> [:09.097882 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(1126): =
[client ::1:15125] h2_stream(12-13): submitted response 200, rv=3D0
> [:09.097882 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(234): =
[client ::1:15125] h2_stream(12-13): handled, closing
> [:09.097882 2015] [http2:debug] [pid 1956:tid 340] =
h2_task_input.c(107): [client ::1:15125] h2_task_input(12-13): read, =
block=3D1, mode=3D3, readbytes=3D1
> [:09.097882 2015] [http2:debug] [pid 1956:tid 340] h2_stream.c(75): =
[client ::1:15125] h2_stream(12-13): destroy
> [:09.105878 2015] [http2:debug] [pid 1956:tid 572] h2_mplx.c(564): =
[client ::1:15125] h2_mplx(12-11): open response: 207
> ::1 - jrandom [25/Nov/2015:02:55:09 +0100] "PROPFIND =
/svn-test-work/local_tmp/repos/!svn/rev/1 HTTP/1.1" 207 1267
> [:09.105878 2015] [http2:debug] [pid 1956:tid 572] =
h2_task_input.c(107): [client ::1:15125] h2_task_input(12-11): read, =
block=3D1, mode=3D3, readbytes=3D1
> [:09.105878 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(1126): =
[client ::1:15125] h2_stream(12-11): submitted response 207, rv=3D0
> [:09.105878 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(234): =
[client ::1:15125] h2_stream(12-11): handled, closing
> [:09.105878 2015] [http2:debug] [pid 1956:tid 908] h2_stream.c(75): =
[client ::1:15125] h2_stream(12-11): destroy
>=20
>=20
> [:11.307516 2015] [ssl:info] [pid 1956:tid 908] (OS 10054)An existing =
connection was forcibly closed by the remote host.  : [client ::1:15125] =
AH01991: SSL input filter read failed.
> [:11.307516 2015] [http2:debug] [pid 1956:tid 908] h2_conn_io.c(170): =
(OS 10054)An existing connection was forcibly closed by the remote host. =
 : [client ::1:15125] h2_conn_io: error reading
> [:11.307516 2015] [ssl:info] [pid 1956:tid 904] (OS 10054)An existing =
connection was forcibly closed by the remote host.  : [client ::1:15126] =
AH01991: SSL input filter read failed.
> [:11.307516 2015] [http2:info] [pid 1956:tid 908] (OS 10054)An =
existing connection was forcibly closed by the remote host.  : [client =
::1:15125] AH02950: h2_session(12): error reading, terminating
> [:11.307516 2015] [http2:debug] [pid 1956:tid 904] h2_conn_io.c(170): =
(OS 10054)An existing connection was forcibly closed by the remote host. =
 : [client ::1:15126] h2_conn_io: error reading
> [:11.307516 2015] [http2:debug] [pid 1956:tid 908] h2_session.c(693): =
[client ::1:15125] session(12): aborting session, reason=3D-505 Protocol =
error
> [:11.307516 2015] [http2:info] [pid 1956:tid 904] (OS 10054)An =
existing connection was forcibly closed by the remote host.  : [client =
::1:15126] AH02950: h2_session(14): error reading, terminating
> [:11.308516 2015] [http2:debug] [pid 1956:tid 904] h2_session.c(693): =
[client ::1:15126] session(14): aborting session, reason=3D-505 Protocol =
error
> [:11.307516 2015] [http2:debug] [pid 1956:tid 908] h2_conn.c(328): (OS =
10054)An existing connection was forcibly closed by the remote host.  : =
[client ::1:15125] h2_session(12): done
> [:11.308516 2015] [http2:debug] [pid 1956:tid 904] h2_conn.c(328): (OS =
10054)An existing connection was forcibly closed by the remote host.  : =
[client ::1:15126] h2_session(14): done
> [:11.308516 2015] [ssl:debug] [pid 1956:tid 904] =
ssl_engine_io.c(1003): [client ::1:15126] AH02001: Connection closed to =
child 14 with standard shutdown (server localhost:443)
> [:11.308516 2015] [ssl:debug] [pid 1956:tid 908] =
ssl_engine_io.c(1003): [client ::1:15125] AH02001: Connection closed to =
child 12 with standard shutdown (server localhost:443)
> [:11.359567 2015] [mpm_winnt:crit] [pid 1956:tid 364] AH02538: Child: =
Parent process exited abruptly. Child process is ending
> [:11.359567 2015] [mpm_winnt:warn] [pid 1956:tid 936] (OS 995)The I/O =
operation has been aborted because of either a thread exit or an =
application request.  : AH00341: winnt_accept: Asynchronous AcceptEx =
failed.
> [:11.359567 2015] [mpm_winnt:warn] [pid 1956:tid 920] (OS 995)The I/O =
operation has been aborted because of either a thread exit or an =
application request.  : AH00341: winnt_accept: Asynchronous AcceptEx =
failed.
> [:11.359567 2015] [mpm_winnt:debug] [pid 1956:tid 936] child.c(735): =
AH00348: Child: Accept thread exiting.
> [:11.359567 2015] [mpm_winnt:debug] [pid 1956:tid 920] child.c(735): =
AH00348: Child: Accept thread exiting.
> [:12.360520 2015] [mpm_winnt:debug] [pid 1956:tid 364] child.c(1215): =
AH00359: Child: Released the start mutex
> [:12.360520 2015] [mpm_winnt:debug] [pid 1956:tid 364] child.c(1227): =
AH00361: Child: 16 threads blocked on the completion port


From dev-return-84749-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 16:17:32 2015
Return-Path: <dev-return-84749-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 50551188CC
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 16:17:32 +0000 (UTC)
Received: (qmail 32390 invoked by uid 500); 25 Nov 2015 16:17:31 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 32302 invoked by uid 500); 25 Nov 2015 16:17:31 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 32292 invoked by uid 99); 25 Nov 2015 16:17:31 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 16:17:31 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 60647C3DBF
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 16:17:31 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.652
X-Spam-Level:
X-Spam-Status: No, score=0.652 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id cr6V-64NG5c0 for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 16:17:24 +0000 (UTC)
Received: from resqmta-po-06v.sys.comcast.net (resqmta-po-06v.sys.comcast.net [96.114.154.165])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id AD64E20267
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 16:17:24 +0000 (UTC)
Received: from resomta-po-01v.sys.comcast.net ([96.114.154.225])
	by resqmta-po-06v.sys.comcast.net with comcast
	id lsHH1r00D4s37d401sHQAb; Wed, 25 Nov 2015 16:17:24 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-01v.sys.comcast.net with comcast
	id lsHP1r0082U0RYt01sHPXL; Wed, 25 Nov 2015 16:17:24 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: Better ap_casecmpstr[n]?
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CACsi250qDh-xcEG3Zsk7bKWLPs7n0Kh_Pzms_h-UwFTmKN5Odg@mail.gmail.com>
Date: Wed, 25 Nov 2015 11:17:23 -0500
Content-Transfer-Encoding: 7bit
Message-Id: <C60EE890-B1C6-4259-9D11-1FD54637FAF1@jaguNET.com>
References: <CAKQ1sVOgsKky7tLp2nH_t1tMuJX+sgg4hULztMPRtcSx9NEW9Q@mail.gmail.com> <5654AEFB.1020704@aldan.algebra.com> <CAKQ1sVMJ1LBDHcoQy1YGa-_OMR2J6To557BwYwCQqDM+SBV8gw@mail.gmail.com> <CACsi253_f527B2M8dM1i2KGO8agy_RRrWEd89vAbk1PzcUcFWg@mail.gmail.com> <CAKQ1sVNS_XFo+4JK85fyF-mPtMdQ+02M=QbSMd34i+FAEh_r9A@mail.gmail.com> <CACsi250qDh-xcEG3Zsk7bKWLPs7n0Kh_Pzms_h-UwFTmKN5Odg@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448468244;
	bh=eyfkVRgYAAUvDjTlLa0r3Ainj50+HGnglkcIV7zuSGM=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=D5R3NCGxX6bcBBsQn27KWPB4TUMe2THlPWYr+IZbjwfWZgmDXYMmFpLMFIurYNYfl
	 e13beO/H1XAAW0TARU9UaKQzrL1Hxuc6OVLluN9Gv8a8E+c9eQo3SFc1bvJeQGvdzf
	 j/tG+N98kOdc27KQjmvEFi6L+bNQYppYj2pnqkJjUCYg25J4tCvstJ62wKrxVxlgsb
	 f9lHdmDbSMp4nOe2JpJXtWxYe3gimBJcVAR2emczT4KCBVwlVIw7qNebBaItm+Gp5W
	 8g2u4px4ClGfCkOwKHSf8VruZj7PvxAHtGaqvpHpkNm5i/YHRtLOKqksvpTCNyft9y
	 BgWNblGPSBoyg==

What is the current status? Is this on hold?

From dev-return-84750-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 17:34:15 2015
Return-Path: <dev-return-84750-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0046118ECF
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 17:34:15 +0000 (UTC)
Received: (qmail 18952 invoked by uid 500); 25 Nov 2015 17:32:45 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 3876 invoked by uid 500); 25 Nov 2015 17:32:31 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 626 invoked by uid 500); 25 Nov 2015 17:32:28 -0000
Delivered-To: apmail-dev-all@apache.org
Received: (qmail 622 invoked by uid 99); 25 Nov 2015 17:32:28 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 17:32:28 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 29C95C11BE
	for <dev-all@apache.org>; Wed, 25 Nov 2015 17:32:28 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0
X-Spam-Level:
X-Spam-Status: No, score=0 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, RCVD_IN_MSPIKE_H2=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rcbowen-com.20150623.gappssmtp.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id VVO0SpecuV89 for <dev-all@apache.org>;
	Wed, 25 Nov 2015 17:32:20 +0000 (UTC)
Received: from mail-qg0-f44.google.com (mail-qg0-f44.google.com [209.85.192.44])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 44FAB42989
	for <dev-all@apache.org>; Wed, 25 Nov 2015 17:32:20 +0000 (UTC)
Received: by qgeb1 with SMTP id b1so37331531qge.1
        for <dev-all@apache.org>; Wed, 25 Nov 2015 09:32:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rcbowen-com.20150623.gappssmtp.com; s=20150623;
        h=from:reply-to:to:subject:organization:message-id:date:user-agent
         :mime-version:content-type:content-transfer-encoding;
        bh=N6+ODDNxuYT5CpF5xI7p1dASic6QIbBkZeOScYDp/tM=;
        b=w0Q0c1tclUxD4Y8rlWzfQS6TMhwMaGhv8n2aPu4U/rk8SUtPc+gzWtyLGLhrRmVBIG
         daeHJ46God2ohtllggJvVVtd26ukit2hc8FIRSykfsgW+j6r28HqSBw9gtPd8Jc1lH43
         8Md/xpeYmGNisgLQO6KlIwJHfVQmXcyETXmWzNOX1wDq0j4MhlYlgUouGHf3SiYG3yyz
         NfXlG9NQBKlr5xjubhZbfrIEdA3xx3nmIKKu/hmxFUTxeu+riIrLJ1zRPgXg/2XDC7yc
         umjXCG0kkTZqiKJ5trZyMvISQ/2VCwpPVP6YPFMz9IlAs96NT58SNivnCiqrM8/nyjQE
         fqaQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:reply-to:to:subject:organization:message-id
         :date:user-agent:mime-version:content-type:content-transfer-encoding;
        bh=N6+ODDNxuYT5CpF5xI7p1dASic6QIbBkZeOScYDp/tM=;
        b=jWvFL6ig4/PsVQn4QzmHqKXNk+rlVKozMoWtSBs9ZGP8/LnrRVk5RbmfxVUmpubPfZ
         8FjmaZm+Eu4CAKvXZRSXsWuwhCm3us1irRi7WGnLea3d37Xt69A0KGJN6VKlbmxqfIL4
         Puy5I8gGhNYsNPM/gBNfwtFb1S6ql6Feh2RF2ipBOS2mmx7+PKO+OJwnavV9cH98A1jU
         oZFQ5yWV5pkomR+LKNoVddyyQSEUrVbML33rW8faJK/NtnYz+0xaAygqDFR6ntmKV/9h
         JmkSPdZbAdTmeoZQMP50cUWek36rvWjDlbIkKkf/ppnZHt2B0KO9wXCZhtHRbdby2wjp
         WQSw==
X-Gm-Message-State: ALoCoQkbT23nvDvQOTT8kBcGCIFh3t1z+7ejBQxPUOzskS9HwpxnbHiCzwpjEPlbniKvvI2qjiQV
X-Received: by 10.140.39.243 with SMTP id v106mr33883453qgv.17.1448472734694;
        Wed, 25 Nov 2015 09:32:14 -0800 (PST)
Received: from [192.168.0.214] (cpe-74-138-23-246.kya.res.rr.com. [74.138.23.246])
        by smtp.googlemail.com with ESMTPSA id x83sm5556692qka.14.2015.11.25.09.32.12
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 25 Nov 2015 09:32:12 -0800 (PST)
From: Rich Bowen <rbowen@rcbowen.com>
X-Google-Original-From: Rich Bowen <rbowen@apache.org>
Reply-To: rbowen@apache.org
To: Rich Bowen <rbowen@apache.org>
Subject: [ANNOUNCE] CFP open for ApacheCon North America 2016
Organization: The Apache Software Foundation
Message-ID: <5655F09A.7050203@apache.org>
Date: Wed, 25 Nov 2015 12:32:10 -0500
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit

Community growth starts by talking with those interested in your
project. ApacheCon North America is coming, are you?

We are delighted to announce that the Call For Presentations (CFP) is
now open for ApacheCon North America. You can submit your proposed
sessions at
http://events.linuxfoundation.org/events/apache-big-data-north-america/program/cfp
for big data talks and
http://events.linuxfoundation.org/events/apachecon-north-america/program/cfp
for all other topics.

ApacheCon North America will be held in Vancouver, Canada, May 9-13th
2016. ApacheCon has been running every year since 2000, and is the place
to build your project communities.

While we will consider individual talks we prefer to see related
sessions that are likely to draw users and community members. When
submitting your talk work with your project community and with related
communities to come up with a full program that will walk attendees
through the basics and on into mastery of your project in example use
cases. Content that introduces what's new in your latest release is also
of particular interest, especially when it builds upon existing well
know application models. The goal should be to showcase your project in
ways that will attract participants and encourage engagement in your
community, Please remember to involve your whole project community (user
and dev lists) when building content. This is your chance to create a
project specific event within the broader ApacheCon conference.

Content at ApacheCon North America will be cross-promoted as
mini-conferences, such as ApacheCon Big Data, and ApacheCon Mobile, so
be sure to indicate which larger category your proposed sessions fit into.

Finally, please plan to attend ApacheCon, even if you're not proposing a
talk. The biggest value of the event is community building, and we count
on you to make it a place where your project community is likely to
congregate, not just for the technical content in sessions, but for
hackathons, project summits, and good old fashioned face-to-face networking.

-- 
rbowen@apache.org
http://apache.org/

From dev-return-84751-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 17:38:04 2015
Return-Path: <dev-return-84751-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EA1C51818E
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 17:38:03 +0000 (UTC)
Received: (qmail 22701 invoked by uid 500); 25 Nov 2015 17:35:24 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 22596 invoked by uid 500); 25 Nov 2015 17:35:24 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 22557 invoked by uid 99); 25 Nov 2015 17:35:24 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 17:35:24 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 54C90180289
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 17:35:24 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.654
X-Spam-Level:
X-Spam-Status: No, score=-0.654 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RP_MATCHES_RCVD=-0.554] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id xkscnKoH2jPT for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 17:35:14 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id B454925F90
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 17:35:13 +0000 (UTC)
Received: from [192.168.1.42] (unknown [217.91.35.233])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id DCA0E15A0188
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 18:35:12 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1448472912; bh=feM0vgG5E/DZZW7YhzoLphlxYtoWz5IxlomVUpMuPLM=;
	h=From:Subject:Date:To:From;
	b=Nh0KuTt7FKilBecdWiPeM5+jxEYec6Y0hEkEkZ3qPAdssYDmsnaktqM58Bxzd5cLp
	 mYDTKH2pa43TYDc/zNOm+LQtOXpHcdGSRW9n++VBvsFm6oJW+cwoaKo9ZO1bRLkpxb
	 KkAFr0ipRD+CKhlvxb4+Cr6CbEL0tIiEChZis2yc=
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: 2.4.18 and mod_http2
Message-Id: <F5D7679B-D97B-4C75-9D7C-3558435C7F9E@greenbytes.de>
Date: Wed, 25 Nov 2015 18:35:12 +0100
To: dev@httpd.apache.org
Mime-Version: 1.0 (Mac OS X Mail 9.1 \(3096.5\))
X-Mailer: Apple Mail (2.3096.5)

With the latest checkin into 2.4.x mod_http2 has everything I want for =
the 2.4.18 release. Tests work for me here on OS X and Ubuntu, so I hope =
this will be fine.

Tomorrow I hopefully will find the time to make a blog about the =
upcoming changes in 2.4.18 re HTTP/2 and Apache httpd. Make some people =
looking forward to that release.

How would I open a http2 section in docs/manual similar to the ssl one? =
mkdir and index.xml? Link to that from where?=20

Cheers,

  Stefan
=20=

From dev-return-84752-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 17:42:38 2015
Return-Path: <dev-return-84752-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EFD9318238
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 17:42:38 +0000 (UTC)
Received: (qmail 24468 invoked by uid 500); 25 Nov 2015 17:42:38 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 24399 invoked by uid 500); 25 Nov 2015 17:42:38 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 24389 invoked by uid 99); 25 Nov 2015 17:42:38 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 17:42:38 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 77A97C13C7
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 17:42:37 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.98
X-Spam-Level: **
X-Spam-Status: No, score=2.98 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id TDUdXcHzJH8O for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 17:42:31 +0000 (UTC)
Received: from mail-ig0-f170.google.com (mail-ig0-f170.google.com [209.85.213.170])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 6FFE920229
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 17:42:30 +0000 (UTC)
Received: by igcph11 with SMTP id ph11so98251633igc.1
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 09:42:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=aNY9IqL5KNbiInD46Me0sgkpP6jJ6gwDi1yhKUtdpFk=;
        b=hDrgvvesU8gdUiESPfVCbDa5fv8vuq9snboCBPkN+c3+1cxtHa8jXCheBKNBP4+U5q
         tz24MUPzrroG1F7sCGvcDGl4hh8KAcbFoMUUOPvfd9l9t3eiJbMENQ77AmlDcFguBtaD
         2VvWcVqNstvdOBRv3dxFXKLe2Z0e+Y8wMyD+FM1zpZOGB11pHZco/qSUTrHLvOy5r/Yx
         CfHyUvDtONBRzPV8zytgOk3H+j6KZWiwsEvGqikNY0QvMHfY08HJNIezklbtOoE3KqBs
         cXcxxojEt2vx6J1X//L8KsUeiYt1opIX5pM8hTnGRWyY+nc9b+iTu0b2At02qC3OZbUI
         pAnA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=aNY9IqL5KNbiInD46Me0sgkpP6jJ6gwDi1yhKUtdpFk=;
        b=QcDJR0dSkzHi3Qm0y6Q5hkD78LVcUZBD6HTbRq/7bQ8QRw09V5djvWVqPK9LVAOkWS
         0O14c0eTIi8LtPnheAmFa9rIQsOcQEetIVtZGwqrFpUid79UMgOQfO3uCZiBx4OM2UKH
         xQ8eXi+TaWwFYrUMq73eXJ75Ml/BODcI8zhYMtn1e05irp1ljWYBnREJhRCcwpxYD86Q
         qUNTe5lEyQIWeqjUJesMNvvhUhi1Wp5FyCk5p1OdxTtf2kONztv0IEFwjwdcS4CCf6M7
         t7Vz3N71aXEyB6aam2YdpGtlwFnFyXbw7rPwJmaBe8ZviHsQlbovTOTNJVIczekyQgCl
         xlpg==
X-Gm-Message-State: ALoCoQnA0CIVh2UP6rRQe2SuFKpgVmwZqAYYVrOJAxNgokJpjzrkPI78xIij1Z2dUiiJKT/wHAWK
MIME-Version: 1.0
X-Received: by 10.50.20.163 with SMTP id o3mr5417779ige.35.1448473349399; Wed,
 25 Nov 2015 09:42:29 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Wed, 25 Nov 2015 09:42:29 -0800 (PST)
Date: Wed, 25 Nov 2015 11:42:29 -0600
Message-ID: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
Subject: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=047d7bd75dec754220052560fbbb

--047d7bd75dec754220052560fbbb
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Wed, Nov 25, 2015 at 10:17 AM, Jim Jagielski <jim@jagunet.com> wrote:

> What is the current status? Is this on hold?
>

It is looking for a good name.  I'm happy with apr_token_strcasecmp
to best indicate its use-case and provenance.  Does that work for
everyone?

It is looking for clearer docs.  Spent 20 hours just reviewing locale in C
(partly to phrase this discussion more accurately). About to pen those
based on better definitions of terms.

So here are my conclusions as they apply to apr, and to httpd after
all of this locale review...

Background
-----------------

The C spec defines the locale as "C" (e.g. "POSIX") at startup.  Until
somewhere in the code the locale of the current thread is switched with
a call to setlocale(LC_ALL, "") or similar, the application remains in this
non-deterministic (Anglicized) state.  The empty string causes LANG
and the LC_* variables to be evaluated.  Most modern *nix utilities do
this right off the bat in their source.  The compiler should *not* do so
without instruction, so while gcc does the right thing in this respect,
other compilers may not be behaving appropriately.

You might react "how do we handle UTF-8 [or other code page] then?"
The answer is that in the "C" locale, high-bit characters (in ASCII, and
even unusual EBCDIC codes) are effectively opaque.  They *can* be
UTF-8, they might belong to an SBCS (single-byte charset), and they
might be entirely meaningless.  They won't be case folded (but will
keep their unique identity).  Some consumer may recognize them,
others will not.  The C lib functions will treat each octet of an MBCS
as a distinct character, which is a reason that our old-school autoindex
(pre-fancy tables) misaligns the columns when the filename contains
any multibyte characters.  We had simply byte-counted chars.

If our code splits these multibyte sequences, things can go wrong
somewhere down the way.  In particular, treating these multibyte
sequences as distinct characters is fine in UTF-8 where every part
of the multibyte sequence is high-bit-set (and therefore opaque),
but is not fine in ISO2022-JP, where low-bit-set characters may
change their meaning (there are bugs to the effect that we search
a string for pathname separator characters, and these can occur
in multibyte sequences which are valid file names, and not path
separator characters).  There isn't much we can do about this.

When using httpd on a *nix filesystem containing UTF-8 chars, we
accept UTF-8 filenames both in client provided fields and within the
httpd.conf configuration.  On a filesystem containing SBCS filenames,
we similarly accept these without translation.  It's up to the admin
to decide their schema, without a third party module, the UTF-8
name isn't recognized in an SBCS directory, and visa-versa.

On Windows, all system resources, including filenames, are stored
in Unicode by the OS.  Within APR, we simply treat all system
resource strings as UTF-8, and therefore the conf file in httpd needs
to spell out the UTF-8 name of the resource. All that said, other than
these resource names, even on Windows most string processing
follows the same opaque logic as *nix.

The Mac OS is somewhat similar to Windows, in that all of the
resource names are actually UTF-8 encoded, AFAICT. But unlike
windows, these opaque strings "just work", we don't have to do any
Unicode transliteration to get there.

Observations
-------------------

Nowhere in apr or httpd do *we* call setlocale() to change things.  So
the current use of tolower(), toupper(), strcasecmp() etc should not be
subject to dangerous transliterations by *our* doing.

There is nothing that suggests that the APR consumer *cannot*
call setlocale()!  So we need to revisit APR 2.0 and ensure that
our functions perform as-expected even when operating under
some different locale.  This suggests that apr_token_str[n]casecmp,
apr_token_tolower|toupper, and much of the rest of the code that
exists only to evaluate ASCII alpha characters is *not* paying any
attention to the currently defined locale.

In httpd, where things go sideways is if someone is calling setlocale(),
for example in an in-process PHP, Perl or Lua script, because this
changes the core operation of httpd.  If the script switches setlocale
to turkish, for example, our forced-lowercase content-type conversion
will cause "IMAGE/GIF" to become "=C4=B1mage/g=C4=B1f", clearly not what th=
e
specs intended.

I imagine that this has rarely shown up because the few scripts that
might toggle this were correctly written to toggle back the previous
locale upon completion.  But if they are running inline and have
the locale toggled during the filter handoff, the filters themselves
are likely facing some unexpected behavior.

APR conclusions
-------------------------

Adding unambiguous token handling functions would be good for
the few case-insensitive string comparison, string folding, and
search functions.  It allows the spec-consumer to trust their string
processing.  I'm going to suggest apr_token_* as the API prefix.
The API will preserve "POSIX behavior" as defined by A-Z <> a-z
character equivalence and make no compensation for locales
or for MBCS strings.

httpd conclusions
-------------------------

There are so many edge cases that we simply need to preserve
the code as-is in httpd 2.4 and warn off anyone toggling the locale
that httpd is operating under.  Making the 'offer' to run under many
non-POSIX locales is opening up a can of security vulnerabilities.
It would be irresponsible to half-fix this.

We should perform a thorough review of httpd 2.x trunk so as to
make a statement upon release that the code has been adapted
to correctly operate under most non-POSIX locales.  Warn off
users from third party modules that have not yet made a similar
statement.  Kill all the redundant httpd 2.x =3D=3D APR functions that
do not belong in trunk (but may have been appropriate in 2.earlier
while waiting for APR to be released).

To the extent that implementations have very poor implementations
of strcmp(), this isn't justification to overload httpd with more band-aids=
.
Fix the underlying implementation.  So I'm -0.5 on backporting this
change into httpd 2.4 until we see a comprehensive justification, or
until we comprehensively have fixed trunk and are prepared to make
the same "setlocale()-safe" assertion about 2.4.future.

--047d7bd75dec754220052560fbbb
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div>On Wed, Nov 25, 2015 at 10:17 AM, Jim Jagielski=C2=A0=
<span dir=3D"ltr">&lt;<a href=3D"mailto:jim@jagunet.com" target=3D"_blank">=
jim@jagunet.com</a>&gt;</span>=C2=A0wrote:<br><blockquote class=3D"gmail_qu=
ote" style=3D"margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-co=
lor:rgb(204,204,204);border-left-style:solid;padding-left:1ex">What is the =
current status? Is this on hold?<br></blockquote></div><div><br></div>It is=
 looking for a good name.=C2=A0 I&#39;m happy with apr_token_strcasecmp<div=
>to best indicate its use-case and provenance.=C2=A0 Does that work for=C2=
=A0</div><div>everyone?<div><br></div><div><div>It is looking for clearer d=
ocs.=C2=A0 Spent 20 hours just reviewing locale in C=C2=A0</div><div>(partl=
y to phrase this discussion more accurately). About to pen those</div><div>=
based on better definitions of terms. =C2=A0</div><div><br></div><div>So he=
re are my conclusions as they apply to apr, and to httpd after</div><div>al=
l of this locale review...</div><div><br></div></div><div>Background</div><=
div>-----------------</div><div><br></div><div>The C spec defines the local=
e as &quot;C&quot; (e.g. &quot;POSIX&quot;) at startup.=C2=A0 Until<br></di=
v><div>somewhere in the code the locale of the current thread is switched w=
ith</div><div>a call to setlocale(LC_ALL, &quot;&quot;) or similar, the app=
lication remains in this</div><div>non-deterministic (Anglicized) state.=C2=
=A0 The empty string causes LANG</div><div>and the LC_* variables to be eva=
luated.=C2=A0 Most modern *nix utilities do</div><div>this right off the ba=
t in their source.=C2=A0 The compiler should *not* do so=C2=A0</div><div>wi=
thout instruction, so while gcc does the right thing in this respect,=C2=A0=
</div><div>other compilers may not be behaving appropriately.</div><div><br=
></div><div>You might react &quot;how do we handle UTF-8 [or other code pag=
e] then?&quot;</div><div>The answer is that in the &quot;C&quot; locale, hi=
gh-bit characters (in ASCII, and</div><div>even unusual EBCDIC codes) are e=
ffectively opaque.=C2=A0 They *can* be</div><div>UTF-8, they might belong t=
o an SBCS (single-byte charset), and they</div><div>might be entirely meani=
ngless.=C2=A0 They won&#39;t be case folded (but will</div><div>keep their =
unique identity).=C2=A0 Some consumer may recognize them,</div><div>others =
will not.=C2=A0 The C lib functions will treat each octet of an MBCS</div><=
div>as a distinct character, which is a reason that our old-school autoinde=
x</div><div>(pre-fancy tables) misaligns the columns when the filename cont=
ains=C2=A0</div><div>any multibyte characters.=C2=A0 We had simply byte-cou=
nted chars.</div><div><br></div><div>If our code splits these multibyte seq=
uences, things can go wrong</div><div>somewhere down the way.=C2=A0 In part=
icular, treating these multibyte</div><div>sequences as distinct characters=
 is fine in UTF-8 where every part</div><div>of the multibyte sequence is h=
igh-bit-set (and therefore opaque),</div><div>but is not fine in=C2=A0ISO20=
22-JP, where low-bit-set characters may</div><div>change their meaning (the=
re are bugs to the effect that we search</div><div>a string for pathname se=
parator characters, and these can occur</div><div>in multibyte sequences wh=
ich are valid file names, and not path</div><div>separator characters).=C2=
=A0 There isn&#39;t much we can do about this.</div><div><br></div><div>Whe=
n using httpd on a *nix filesystem containing UTF-8 chars, we</div><div>acc=
ept UTF-8 filenames both in client provided fields and within the</div><div=
>httpd.conf configuration.=C2=A0 On a filesystem containing SBCS filenames,=
</div><div>we similarly accept these without translation.=C2=A0 It&#39;s up=
 to the admin</div><div>to decide their schema, without a third party modul=
e, the UTF-8</div><div>name isn&#39;t recognized in an SBCS directory, and =
visa-versa. =C2=A0</div><div><br></div><div>On Windows, all system resource=
s, including filenames, are stored=C2=A0</div><div>in Unicode by the OS.=C2=
=A0 Within APR, we simply treat all system=C2=A0</div><div>resource strings=
 as UTF-8, and therefore the conf file in httpd needs=C2=A0</div><div>to sp=
ell out the UTF-8 name of the resource. All that said, other than=C2=A0</di=
v><div>these resource names, even on Windows most string processing</div><d=
iv>follows the same opaque logic as *nix.</div><div><br></div><div>The Mac =
OS is somewhat similar to Windows, in that all of the</div><div>resource na=
mes are actually UTF-8 encoded, AFAICT. But unlike</div><div>windows, these=
 opaque strings &quot;just work&quot;, we don&#39;t have to do any</div><di=
v>Unicode transliteration to get there.</div><div><br></div><div>Observatio=
ns</div><div>-------------------</div><div><br></div><div>Nowhere in apr or=
 httpd do *we* call setlocale() to change things.=C2=A0 So</div><div>the cu=
rrent use of tolower(), toupper(), strcasecmp() etc should not be=C2=A0</di=
v><div>subject to dangerous transliterations by *our* doing.</div><div><br>=
</div><div>There is nothing that suggests that the APR consumer *cannot*=C2=
=A0</div><div>call setlocale()!=C2=A0 So we need to revisit APR 2.0 and ens=
ure that=C2=A0</div><div>our functions perform as-expected even when operat=
ing under</div><div>some different locale.=C2=A0 This suggests that apr_tok=
en_str[n]casecmp,</div><div>apr_token_tolower|toupper, and much of the rest=
 of the code that</div><div>exists only to evaluate ASCII alpha characters =
is *not* paying any</div><div>attention to the currently defined locale.</d=
iv><div><br></div><div>In httpd, where things go sideways is if someone is =
calling setlocale(),=C2=A0</div><div>for example in an in-process PHP, Perl=
 or Lua script, because this=C2=A0</div><div>changes the core operation of =
httpd.=C2=A0 If the script switches setlocale</div><div>to turkish, for exa=
mple, our forced-lowercase content-type conversion=C2=A0</div><div>will cau=
se &quot;IMAGE/GIF&quot; to become &quot;=C4=B1mage/g=C4=B1f&quot;, clearly=
 not what the</div><div>specs intended.</div><div><br></div><div>I imagine =
that this has rarely shown up because the few scripts that</div><div>might =
toggle this were correctly written to toggle back the previous</div><div>lo=
cale upon completion.=C2=A0 But if they are running inline and have</div><d=
iv>the locale toggled during the filter handoff, the filters themselves</di=
v><div>are likely facing some unexpected behavior.</div><div><br></div><div=
>APR conclusions</div><div>-------------------------</div><div><br></div><d=
iv>Adding unambiguous token handling functions would be good for</div><div>=
the few case-insensitive string comparison, string folding, and=C2=A0</div>=
<div>search functions.=C2=A0 It allows the spec-consumer to trust their str=
ing=C2=A0</div><div>processing.=C2=A0 I&#39;m going to suggest apr_token_* =
as the API prefix.</div><div>The API will preserve &quot;POSIX behavior&quo=
t; as defined by A-Z &lt;&gt; a-z</div><div>character equivalence and make =
no compensation for locales</div><div>or for MBCS strings.=C2=A0</div><div>=
<br></div><div>httpd conclusions</div><div>-------------------------</div><=
div><br></div><div>There are so many edge cases that we simply need to pres=
erve</div><div>the code as-is in httpd 2.4 and warn off anyone toggling the=
 locale</div><div>that httpd is operating under.=C2=A0 Making the &#39;offe=
r&#39; to run under many</div><div>non-POSIX locales is opening up a can of=
 security vulnerabilities.</div><div>It would be irresponsible to half-fix =
this.</div><div><br></div><div>We should perform a thorough review of httpd=
 2.x trunk so as to</div><div>make a statement upon release that the code h=
as been adapted</div><div>to correctly operate under most non-POSIX locales=
.=C2=A0 Warn off</div><div>users from third party modules that have not yet=
 made a similar=C2=A0</div><div>statement.=C2=A0 Kill all the redundant htt=
pd 2.x =3D=3D APR functions that</div><div>do not belong in trunk (but may =
have been appropriate in 2.earlier</div><div>while waiting for APR to be re=
leased).</div><div><br></div><div>To the extent that implementations have v=
ery poor implementations</div><div>of strcmp(), this isn&#39;t justificatio=
n to overload httpd with more band-aids.</div><div>Fix the underlying imple=
mentation.=C2=A0 So I&#39;m -0.5 on backporting this</div><div>change into =
httpd 2.4 until we see a comprehensive justification, or</div><div>until we=
 comprehensively have fixed trunk and are prepared to make</div><div>the sa=
me &quot;setlocale()-safe&quot; assertion about 2.4.future.</div><div><br><=
/div><div><br></div></div></div>

--047d7bd75dec754220052560fbbb--

From dev-return-84753-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 17:44:26 2015
Return-Path: <dev-return-84753-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E090418247
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 17:44:25 +0000 (UTC)
Received: (qmail 27974 invoked by uid 500); 25 Nov 2015 17:44:24 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 27911 invoked by uid 500); 25 Nov 2015 17:44:24 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 27901 invoked by uid 99); 25 Nov 2015 17:44:24 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 17:44:24 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 261EB18098E
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 17:44:24 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 01ditskJN8HT for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 17:44:14 +0000 (UTC)
Received: from mail-io0-f172.google.com (mail-io0-f172.google.com [209.85.223.172])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 65E0F22F20
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 17:44:14 +0000 (UTC)
Received: by ioir85 with SMTP id r85so60968241ioi.1
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 09:44:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=XaWXMPfyOnL+DRJ8ooulIb59V8YlE0tULl4med1xyWs=;
        b=QemexlqB296kucH+P38/DBkmQHzrIypC+5fKMSvkrG538Lf9U1nmMm9wEwG5yh1iki
         HaWRngy2nx7jcIr19jCZ5Qg4pV9gnUUM/YucaqZfS04UaXPATfDi4/gxU5PltD2LSHJU
         w6oM72V1P9xQtVprZe/xpofIuqMeS95/Hyrx4Gajm3EDxyBEw2kDg0heW1h08BUIxM/5
         00IGFQa36Q7kCtUEJJ/osyING324JkarQgT7wnKZOB557aB/ikIMbYBGGShFHQmOpSqD
         KDojOCACQWbThgVbYZuoNKLhhAR4h5SZumKMB+DZZgUT4WjlRxj885JS0lbaVpf4UTTj
         3L0A==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=XaWXMPfyOnL+DRJ8ooulIb59V8YlE0tULl4med1xyWs=;
        b=Z36QsR8XuCHcMAZSyZlV39AeRiA1ph7QenhAtHy31Zr29fSkIVJULvQP4RJSIhbnYl
         +frzTb0WUbNmKT5GKQQZygzSMMFX7ExD73a5ON9V4vWLPiIUTFj5qJ7JhBVtj1KhNPYv
         wwTL4bzsm6O22PinEXZGwLgDttbN1GvNhSFc/YhZjelCm8XIn9m6rSJVtnaZhDDq78lP
         qiEGGwbBkM4XHpQLJiqX7mrRdWWvaGAGfmMFrsLCLv/Gw1U5y4rEPyfiqcxu/BYPWUp0
         UGIkL1mu3yzdXguh9JiJfnq6a88HrLm0ktzj5dJV5k0DL+A6Gjf4pSyDtdJkc+BVsvR3
         dgqg==
X-Gm-Message-State: ALoCoQmW6rDAWCkUPznX4a25Zizru+Pj3KDJ0rVQeAiYO+ElUAtCtTxhShaETqp9y9U8BNAnk3eH
MIME-Version: 1.0
X-Received: by 10.107.10.66 with SMTP id u63mr34422197ioi.86.1448473453798;
 Wed, 25 Nov 2015 09:44:13 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Wed, 25 Nov 2015 09:44:13 -0800 (PST)
In-Reply-To: <F5D7679B-D97B-4C75-9D7C-3558435C7F9E@greenbytes.de>
References: <F5D7679B-D97B-4C75-9D7C-3558435C7F9E@greenbytes.de>
Date: Wed, 25 Nov 2015 11:44:13 -0600
Message-ID: <CACsi250e6TR3GDQsmgAhm7LiD73eh=abygRusukJRgmXUxKX5w@mail.gmail.com>
Subject: Re: 2.4.18 and mod_http2
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>, docs@httpd.apache.org
Content-Type: multipart/alternative; boundary=001a113f93beae3fd10525610158

--001a113f93beae3fd10525610158
Content-Type: text/plain; charset=UTF-8

On Wed, Nov 25, 2015 at 11:35 AM, Stefan Eissing <
stefan.eissing@greenbytes.de> wrote:

> With the latest checkin into 2.4.x mod_http2 has everything I want for the
> 2.4.18 release. Tests work for me here on OS X and Ubuntu, so I hope this
> will be fine.
>
> Tomorrow I hopefully will find the time to make a blog about the upcoming
> changes in 2.4.18 re HTTP/2 and Apache httpd. Make some people looking
> forward to that release.
>
> How would I open a http2 section in docs/manual similar to the ssl one?
> mkdir and index.xml?


Yup, that's the best kick-off.


> Link to that from where?
>

The mod_http2.xml page of course, but our docs crew can help thread the new
docs into the overall manual schema.  CC'ed.

--001a113f93beae3fd10525610158
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On W=
ed, Nov 25, 2015 at 11:35 AM, Stefan Eissing <span dir=3D"ltr">&lt;<a href=
=3D"mailto:stefan.eissing@greenbytes.de" target=3D"_blank">stefan.eissing@g=
reenbytes.de</a>&gt;</span> wrote:<br><blockquote class=3D"gmail_quote" sty=
le=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">With t=
he latest checkin into 2.4.x mod_http2 has everything I want for the 2.4.18=
 release. Tests work for me here on OS X and Ubuntu, so I hope this will be=
 fine.<br>
<br>
Tomorrow I hopefully will find the time to make a blog about the upcoming c=
hanges in 2.4.18 re HTTP/2 and Apache httpd. Make some people looking forwa=
rd to that release.<br>
<br>
How would I open a http2 section in docs/manual similar to the ssl one? mkd=
ir and index.xml? </blockquote><div><br></div><div>Yup, that&#39;s the best=
 kick-off.</div><div>=C2=A0</div><blockquote class=3D"gmail_quote" style=3D=
"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">Link to tha=
t from where?<br></blockquote><div><br></div><div>The mod_http2.xml page of=
 course, but our docs crew can help thread the new docs into the overall ma=
nual schema.=C2=A0 CC&#39;ed.</div><div><br></div></div></div></div>

--001a113f93beae3fd10525610158--

From dev-return-84754-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 18:00:34 2015
Return-Path: <dev-return-84754-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C4F2118398
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 18:00:34 +0000 (UTC)
Received: (qmail 94246 invoked by uid 500); 25 Nov 2015 18:00:34 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 94180 invoked by uid 500); 25 Nov 2015 18:00:34 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 94170 invoked by uid 99); 25 Nov 2015 18:00:34 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 18:00:34 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id DA5D7180A8D
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 18:00:33 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.981
X-Spam-Level: ***
X-Spam-Status: No, score=3.981 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id RrjvifeK7Zs4 for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 18:00:26 +0000 (UTC)
Received: from vms173005pub.verizon.net (vms173005pub.verizon.net [206.46.173.5])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id F3E0F203C1
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 18:00:25 +0000 (UTC)
MIME-version: 1.0
Content-type: multipart/alternative;
 boundary="Boundary_(ID_k4jcQUQqmAe439hUkMX9Eg)"
Received: from [192.168.1.8] ([100.1.236.52]) by vms173005.mailsrvcs.net
 (Oracle Communications Messaging Server 7.0.5.32.0 64bit (built Jul 16 2014))
 with ESMTPA id <0NYD004H6U03M050@vms173005.mailsrvcs.net> for
 dev@httpd.apache.org; Wed, 25 Nov 2015 12:00:04 -0600 (CST)
X-CMAE-Score: 0
X-CMAE-Analysis: v=2.1 cv=btqxfxui c=1 sm=1 tr=0	a=UorMnhrCY2jH/mPejITChw==:117
 a=LaogzpLLAAAA:8 a=oR5dmqMzAAAA:8	a=qtqOOiqGOCEA:10 a=r77TgQKjGQsHNAKrUKIA:9
 a=8pif782wAAAA:8	a=vmJ3H95uhleE97rRBwQA:9 a=QEXdDO2ut3YA:10 a=pGLkceISAAAA:8
	a=PQ9xGIeMQGDE8GYoLdUA:9 a=j2-HJ9bETf4ceus-:21 a=_W_S_7VecoQA:10
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
To: dev@httpd.apache.org
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
From: "Mikhail T." <mi+thun@aldan.algebra.com>
X-Enigmail-Draft-Status: N1110
Message-id: <5655F722.9020608@aldan.algebra.com>
Date: Wed, 25 Nov 2015 13:00:02 -0500
User-Agent: Mozilla/5.0 (X11; FreeBSD amd64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
In-reply-to:
 <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>

This is a multi-part message in MIME format.

--Boundary_(ID_k4jcQUQqmAe439hUkMX9Eg)
Content-type: text/plain; charset=utf-8
Content-transfer-encoding: 8BIT

On 25.11.2015 12:42, William A Rowe Jr wrote:
> If the script switches setlocale to turkish, for example, our
> forced-lowercase content-type conversion 
> will cause "IMAGE/GIF" to become "mage/gf", clearly not what the
> specs intended.
I'm sorry, could you elaborate on this? Would not strtolower(3) convert
"IMAGE/GIF" to "image/gif" in /all/ locales -- including "C"? At least,
in all single-byte charsets -- such as the Turkish ISO 8859-9
<https://en.wikipedia.org/wiki/ISO/IEC_8859-9>? Yes, the function will
act differently on the strings containing octets above 127, but those
would occur neither in content-types nor in header-names...
> Adding unambiguous token handling functions would be good for the few
> case-insensitive string comparison, string folding, and search
> functions.  It allows the spec-consumer to trust their string processing.
Up until now, I thought, the thread was about coming up with a short-cut
-- an optimization for processing tokens, like request-headers, which
are known to be in US-ASCII anyway and where using locale-aware
functions is simply wasteful -- but not incorrect.

You seem to imply, the locale-aware functions might be doing the wrong
thing some times -- and this confuses me...

Yours,

    -mi


--Boundary_(ID_k4jcQUQqmAe439hUkMX9Eg)
Content-type: text/html; charset=utf-8
Content-transfer-encoding: 8BIT

<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  </head>
  <body bgcolor="#FFFFFF" text="#000000">
    <div class="moz-cite-prefix">On 25.11.2015 12:42, William A Rowe Jr
      wrote:<br>
    </div>
    <blockquote
cite="mid:CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com"
      type="cite">
      <div>If the script switches setlocale to turkish, for example, our
        forced-lowercase content-type conversion</div>
      <div>will cause "IMAGE/GIF" to become "mage/gf", clearly not
        what the specs intended.</div>
    </blockquote>
    I'm sorry, could you elaborate on this? Would not strtolower(3)
    convert "IMAGE/GIF" to "image/gif" in <i>all</i> locales --
    including "C"? At least, in all single-byte charsets -- such as the
    Turkish <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-9">ISO
      8859-9</a>? Yes, the function will act differently on the strings
    containing octets above 127, but those would occur neither in
    content-types nor in header-names...<br>
    <blockquote type="cite">
      <div>Adding unambiguous token handling functions would be good for
        the few case-insensitive string comparison, string folding, and
        search functions. It allows the spec-consumer to trust their
        string processing.</div>
    </blockquote>
    Up until now, I thought, the thread was about coming up with a
    short-cut -- an optimization for processing tokens, like
    request-headers, which are known to be in US-ASCII anyway and where
    using locale-aware functions is simply wasteful -- but not
    incorrect.<br>
    <br>
    You seem to imply, the locale-aware functions might be doing the
    wrong thing some times -- and this confuses me...<br>
    <br>
    Yours,<br>
    <blockquote>-mi<br>
    </blockquote>
  </body>
</html>

--Boundary_(ID_k4jcQUQqmAe439hUkMX9Eg)--

From dev-return-84755-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 18:16:40 2015
Return-Path: <dev-return-84755-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 647C718487
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 18:16:40 +0000 (UTC)
Received: (qmail 37063 invoked by uid 500); 25 Nov 2015 18:16:39 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 36981 invoked by uid 500); 25 Nov 2015 18:16:39 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 36971 invoked by uid 99); 25 Nov 2015 18:16:39 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 18:16:39 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 2C015C7247
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 18:16:39 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id p5OKeNFUkH6A for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 18:16:32 +0000 (UTC)
Received: from mail-io0-f175.google.com (mail-io0-f175.google.com [209.85.223.175])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id EEFAE24E1A
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 18:16:31 +0000 (UTC)
Received: by iofh3 with SMTP id h3so61822422iof.3
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 10:16:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=AjKMTGZE7oP5RuekMobRZO+6exWLox7cfGl6h4l0zvg=;
        b=YNgF0T/9AbqdVCFec1loQISUHGIbnJwV4SyKapVAjSw66UjnjW8BG/sZvuXqx3nA+t
         MeGIFZwYXqXQhE+acLab4Gr977W6od02nqanQVuvVgD7QV3Z4PdkVHK8xADCwPc+vh7O
         32Ceg5qbmfFaCDC/e7ETXDJlHQEAhe4UF+wpYKtP67Bd3UsHQePQdJbki1Cz03EkWGME
         eMgsnSzu1P3C4IF13lNL+7T6Djc27RB/nVFCIBGj5aX/0ajbTTxeGCEscldSz4Buh4bq
         t19rH+ZWUo8tzkIB7GBXKy28eNaQnD9eFLTOgoVkpSIxE0YrFAzDNms71VIgI5kjh+8G
         qnDQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=AjKMTGZE7oP5RuekMobRZO+6exWLox7cfGl6h4l0zvg=;
        b=PDCZvmn5jRDpUPqNcEW1O/tZq+WjbNXGw4jRKdISyvmRB6cJztEALBU2UprFH/fZaW
         XfpSkuK8K6chQ+DfHlKXzZqMnoch8G5yiNSD3hkvq3qu2aWdrjsEuGZFO3bIh0ll87oz
         Jt6l7zXqprLI/uvd7yEBJry308QTWgvsD1KUvXCQHj5Km1/RKa6VQXZ0aK2l2bgnQ62J
         bKmU1iXV67cgrEUQWRSdNMYgeBEEM3OzwkCgGP+fxlafRN4msjZJYMhEMb5FFcI/xGoc
         Pa1DjyZWw6Z7Ry8tiNjYVB1xFpnF9w6z8pXZ3yxb580zFo/ACXJqAiaB3vp/YJ2GEzlb
         4Xew==
X-Gm-Message-State: ALoCoQnNtLOXd5JuhZz61mAmKWyjtWp6UtU0LlKQojC0GoI0QQ4gD4plHcTVmqyVKaAIv4i9zXEa
MIME-Version: 1.0
X-Received: by 10.107.156.6 with SMTP id f6mr2383648ioe.163.1448475385100;
 Wed, 25 Nov 2015 10:16:25 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Wed, 25 Nov 2015 10:16:25 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Wed, 25 Nov 2015 10:16:25 -0800 (PST)
In-Reply-To: <5655F722.9020608@aldan.algebra.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
	<5655F722.9020608@aldan.algebra.com>
Date: Wed, 25 Nov 2015 12:16:25 -0600
Message-ID: <CACsi253c5d4b8XOOdERUqij=WR06mEnoBr9Dk808wfdfv00CcQ@mail.gmail.com>
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>, APR Developer List <dev@apr.apache.org>
Content-Type: multipart/alternative; boundary=001a1140ccc0cb930b05256174a4

--001a1140ccc0cb930b05256174a4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Nov 25, 2015 12:00, "Mikhail T." <mi+thun@aldan.algebra.com> wrote:
>
> On 25.11.2015 12:42, William A Rowe Jr wrote:
>>
>> If the script switches setlocale to turkish, for example, our
forced-lowercase content-type conversion
>> will cause "IMAGE/GIF" to become "=C4=B1mage/g=C4=B1f", clearly not what=
 the specs
intended.
>
> I'm sorry, could you elaborate on this? Would not strtolower(3) convert
"IMAGE/GIF" to "image/gif" in all locales -- including "C"? At least, in
all single-byte charsets -- such as the Turkish ISO 8859-9? Yes, the
function will act differently on the strings containing octets above 127,
but those would occur neither in content-types nor in header-names...

Two variables, LC_CTYPE and LC_COLLATE control this text processing
behavior.  The above is the correct lower case transliteration for
Turkish.  In German, the upper case correspondence of sharp-S =C3=9F is 'SS=
',
but multi-char translation is not provided by the simple tolower/toupper
functions.

Consider this is a function of language, and not of 'charset' per-say.  The
same charset behaves differently based on the locale's language.

>> Adding unambiguous token handling functions would be good for the few
case-insensitive string comparison, string folding, and search functions.
It allows the spec-consumer to trust their string processing.
>
> Up until now, I thought, the thread was about coming up with a short-cut
-- an optimization for processing tokens, like request-headers, which are
known to be in US-ASCII anyway and where using locale-aware functions is
simply wasteful -- but not incorrect.

Partially so, that was the motivation behind the proposal.  Apparently OS/X
in particular has a slow implementation of strcasecmp even running under
the Posix locale.

> You seem to imply, the locale-aware functions might be doing the wrong
thing some times -- and this confuses me...

Until the APR consumer, including an instance of httpd, actually calls
setlocale(), everything should be behaving as expected.  If your in-process
code under httpd calls setlocale() to customize its behavior based on the
HTTP consumer's locale, that is when things may go badly under the hood in
both httpd and in APR.

But yes, I flagged this to the security team almost immediately and then
had to research what could introduce such a vulnerability of accepting
unexpected input and treating it as valid ASCII.  I was less concerned with
treating valid ASCII as opaque text which would be rejected.

--001a1140ccc0cb930b05256174a4
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<p dir=3D"ltr">On Nov 25, 2015 12:00, &quot;Mikhail T.&quot; &lt;<a href=3D=
"mailto:mi%2Bthun@aldan.algebra.com">mi+thun@aldan.algebra.com</a>&gt; wrot=
e:<br>
&gt;<br>
&gt; On 25.11.2015 12:42, William A Rowe Jr wrote:<br>
&gt;&gt;<br>
&gt;&gt; If the script switches setlocale to turkish, for example, our forc=
ed-lowercase content-type conversion=C2=A0<br>
&gt;&gt; will cause &quot;IMAGE/GIF&quot; to become &quot;=C4=B1mage/g=C4=
=B1f&quot;, clearly not what the specs intended.<br>
&gt;<br>
&gt; I&#39;m sorry, could you elaborate on this? Would not strtolower(3) co=
nvert &quot;IMAGE/GIF&quot; to &quot;image/gif&quot; in all locales -- incl=
uding &quot;C&quot;? At least, in all single-byte charsets -- such as the T=
urkish ISO 8859-9? Yes, the function will act differently on the strings co=
ntaining octets above 127, but those would occur neither in content-types n=
or in header-names...</p>
<p dir=3D"ltr">Two variables, LC_CTYPE and LC_COLLATE control this text pro=
cessing behavior.=C2=A0 The above is the correct lower case transliteration=
 for Turkish.=C2=A0 In German, the upper case correspondence of sharp-S =C3=
=9F is &#39;SS&#39;, but multi-char translation is not provided by the simp=
le tolower/toupper functions.</p>
<p dir=3D"ltr">Consider this is a function of language, and not of &#39;cha=
rset&#39; per-say.=C2=A0 The same charset behaves differently based on the =
locale&#39;s language.</p>
<p dir=3D"ltr">&gt;&gt; Adding unambiguous token handling functions would b=
e good for the few case-insensitive string comparison, string folding, and =
search functions.=C2=A0 It allows the spec-consumer to trust their string p=
rocessing.<br>
&gt;<br>
&gt; Up until now, I thought, the thread was about coming up with a short-c=
ut -- an optimization for processing tokens, like request-headers, which ar=
e known to be in US-ASCII anyway and where using locale-aware functions is =
simply wasteful -- but not incorrect.</p>
<p dir=3D"ltr">Partially so, that was the motivation behind the proposal.=
=C2=A0 Apparently OS/X in particular has a slow implementation of strcasecm=
p even running under the Posix locale.</p>
<p dir=3D"ltr">&gt; You seem to imply, the locale-aware functions might be =
doing the wrong thing some times -- and this confuses me...</p>
<p dir=3D"ltr">Until the APR consumer, including an instance of httpd, actu=
ally calls setlocale(), everything should be behaving as expected.=C2=A0 If=
 your in-process code under httpd calls setlocale() to customize its behavi=
or based on the HTTP consumer&#39;s locale, that is when things may go badl=
y under the hood in both httpd and in APR.</p>
<p dir=3D"ltr">But yes, I flagged this to the security team almost immediat=
ely and then had to research what could introduce such a vulnerability of a=
ccepting unexpected input and treating it as valid ASCII.=C2=A0 I was less =
concerned with treating valid ASCII as opaque text which would be rejected.=
</p>

--001a1140ccc0cb930b05256174a4--

From dev-return-84756-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 19:11:00 2015
Return-Path: <dev-return-84756-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 086EC18754
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 19:11:00 +0000 (UTC)
Received: (qmail 6709 invoked by uid 500); 25 Nov 2015 19:10:59 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 6632 invoked by uid 500); 25 Nov 2015 19:10:59 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 6622 invoked by uid 99); 25 Nov 2015 19:10:59 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 19:10:59 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id DEAF8180A95
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 19:10:58 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.98
X-Spam-Level: ***
X-Spam-Status: No, score=3.98 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id t0BuI1gSvbSJ for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 19:10:58 +0000 (UTC)
Received: from vms173001pub.verizon.net (vms173001pub.verizon.net [206.46.173.1])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 755F12571E
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 19:10:57 +0000 (UTC)
MIME-version: 1.0
Content-type: multipart/alternative;
 boundary="Boundary_(ID_KkxQP9ph1MUSGkHC6jMQeQ)"
Received: from [192.168.1.8] ([100.1.236.52]) by vms173001.mailsrvcs.net
 (Oracle Communications Messaging Server 7.0.5.32.0 64bit (built Jul 16 2014))
 with ESMTPA id <0NYD004VQX9BZN20@vms173001.mailsrvcs.net> for
 dev@httpd.apache.org; Wed, 25 Nov 2015 13:10:27 -0600 (CST)
X-CMAE-Score: 0
X-CMAE-Analysis: v=2.1 cv=J+9Xl1TS c=1 sm=1 tr=0	a=UorMnhrCY2jH/mPejITChw==:117
 a=LaogzpLLAAAA:8 a=oR5dmqMzAAAA:8	a=qtqOOiqGOCEA:10 a=r77TgQKjGQsHNAKrUKIA:9
 a=kfGZlD8JNi3Kb6VQQ18A:9	a=QEXdDO2ut3YA:10 a=pGLkceISAAAA:8
 a=FHRheWYaAsxvmwTklmwA:9	a=_W_S_7VecoQA:10
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
To: dev@httpd.apache.org
References:
 <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
 <5655F722.9020608@aldan.algebra.com>
 <CACsi253c5d4b8XOOdERUqij=WR06mEnoBr9Dk808wfdfv00CcQ@mail.gmail.com>
From: "Mikhail T." <mi+thun@aldan.algebra.com>
X-Enigmail-Draft-Status: N1110
Message-id: <5656079E.8090705@aldan.algebra.com>
Date: Wed, 25 Nov 2015 14:10:22 -0500
User-Agent: Mozilla/5.0 (X11; FreeBSD amd64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
In-reply-to:
 <CACsi253c5d4b8XOOdERUqij=WR06mEnoBr9Dk808wfdfv00CcQ@mail.gmail.com>

This is a multi-part message in MIME format.

--Boundary_(ID_KkxQP9ph1MUSGkHC6jMQeQ)
Content-type: text/plain; charset=utf-8
Content-transfer-encoding: 8BIT

On 25.11.2015 13:16, William A Rowe Jr wrote:
>
> Two variables, LC_CTYPE and LC_COLLATE control this text processing
> behavior.  The above is the correct lower case transliteration for
> Turkish.  In German, the upper case correspondence of sharp-S  is
> 'SS', but multi-char translation is not provided by the simple
> tolower/toupper functions.
>
So, the concern is, some hypothetical header, such as X-ASSIGN-TO may,
after going through the locale-aware strtolower() unexpectedly become
x-aign-to?

    -mi


--Boundary_(ID_KkxQP9ph1MUSGkHC6jMQeQ)
Content-type: text/html; charset=utf-8
Content-transfer-encoding: 8BIT

<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  </head>
  <body bgcolor="#FFFFFF" text="#000000">
    <div class="moz-cite-prefix">On 25.11.2015 13:16, William A Rowe Jr
      wrote:<br>
    </div>
    <blockquote
cite="mid:CACsi253c5d4b8XOOdERUqij=WR06mEnoBr9Dk808wfdfv00CcQ@mail.gmail.com"
      type="cite">
      <p dir="ltr">Two variables, LC_CTYPE and LC_COLLATE control this
        text processing behavior. The above is the correct lower case
        transliteration for Turkish. In German, the upper case
        correspondence of sharp-S  is 'SS', but multi-char translation
        is not provided by the simple tolower/toupper functions.</p>
    </blockquote>
    So, the concern is, some hypothetical header, such as <tt>X-ASSIGN-TO</tt>
    may, after going through the locale-aware strtolower() unexpectedly
    become <tt>x-aign-to</tt>?<br>
    <blockquote>-mi<br>
    </blockquote>
  </body>
</html>

--Boundary_(ID_KkxQP9ph1MUSGkHC6jMQeQ)--

From dev-return-84757-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 19:12:37 2015
Return-Path: <dev-return-84757-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 36D921876B
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 19:12:37 +0000 (UTC)
Received: (qmail 13684 invoked by uid 500); 25 Nov 2015 19:12:36 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 13607 invoked by uid 500); 25 Nov 2015 19:12:36 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 13597 invoked by uid 99); 25 Nov 2015 19:12:36 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 19:12:36 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 5623B180A95
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 19:12:36 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id OnN9KmbYxVU6 for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 19:12:26 +0000 (UTC)
Received: from resqmta-po-11v.sys.comcast.net (resqmta-po-11v.sys.comcast.net [96.114.154.170])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 6A8B920BC2
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 19:12:25 +0000 (UTC)
Received: from resomta-po-07v.sys.comcast.net ([96.114.154.231])
	by resqmta-po-11v.sys.comcast.net with comcast
	id lvC21r0044zp9eg01vCPRl; Wed, 25 Nov 2015 19:12:23 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-07v.sys.comcast.net with comcast
	id lvCP1r0042U0RYt01vCPFF; Wed, 25 Nov 2015 19:12:23 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
Date: Wed, 25 Nov 2015 14:12:22 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448478743;
	bh=a3BmherEKGMKX8VemFV8xKPY5paT9fXQ3tizFQKJE4g=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=liR+nuGiuQuqnajULosYP+dLlxt42yK2f2dRNNW14xFxs2n1nEF6JBryvLtlPi9qd
	 A9In95agmXhiUrgplW7jT7pQY5PXvMyfpfcacMf5iYJrzxXn1lJzi1TpqOXFNdr2cw
	 xlHhDyKqE9khJ8+1dGcFr8FbMUsEvCFBX46xqNKxLFbfRlgoc9Z/4fUSMsXta5LIvB
	 8LTIA1gpwfJynmoe0K0Zxg1DPb5M8yfHOYRmbFVTBcBF2JXBXhy4IjPKmoPApUC55F
	 DgrLEf4+U43rfgCG/SAiAHY/BOMR8Neq7skWdV76TpLPSbEwfKn86gT6wwbTlTDd5J
	 fd5sw6lxfzKdg==


> On Nov 25, 2015, at 12:42 PM, William A Rowe Jr <wrowe@rowe-clan.net> =
wrote:
>=20
> On Wed, Nov 25, 2015 at 10:17 AM, Jim Jagielski <jim@jagunet.com> =
wrote:
> What is the current status? Is this on hold?
>=20
> It is looking for a good name.  I'm happy with apr_token_strcasecmp
> to best indicate its use-case and provenance.  Does that work for=20
> everyone?

Still not super excited by the use of 'token' since it
implies it should only be used for HTTP tokens and not
in other cases where we use it to do ascii string comparisons
(for example, when we check env-var settings or maybe directives)...
yeah, they could also be lumped as 'tokens' I guess...

ap_casecmpastr[n] for Case-insensitive CoMParison of Ascii STRing


From dev-return-84758-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 19:31:55 2015
Return-Path: <dev-return-84758-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1586418870
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 19:31:55 +0000 (UTC)
Received: (qmail 87490 invoked by uid 500); 25 Nov 2015 19:31:53 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 87418 invoked by uid 500); 25 Nov 2015 19:31:53 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 87408 invoked by uid 99); 25 Nov 2015 19:31:53 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 19:31:53 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 0525E1A29DC
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 19:31:53 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 2wKus7EdgDsh for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 19:31:44 +0000 (UTC)
Received: from mail-io0-f176.google.com (mail-io0-f176.google.com [209.85.223.176])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 9E0DD428FF
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 19:31:44 +0000 (UTC)
Received: by iofh3 with SMTP id h3so63780218iof.3
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 11:31:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=qeAi61cpvLCchVLzX18BCcdb3PVX4ZHeosi+76zgXGg=;
        b=FQTESb3WFy/8B9ft9QieGAIoXDGP3cmboU5fUWikAFrAe9BVZoy1A2CUPutF3q3RyX
         RGaVmM/s94UgGW7AnE3oozeDvY8d6o8BjdF//Bp5gIrdDy549zG6Oe5eOwzI40ncqBBB
         PfYWKI1yMoyTqhmlgw1OY76KIOeVQ3ApcCf5TG7nE2N310J6xFe/kqPEFn/IjFkjOk46
         JcVKvnDnOC5Vn1saznDHtR7dQchkh/bRVAA3/k8c5fn67TUK2TwJo5XFDV3X4EAhG7d+
         rdO1oOtXr9NVal1vuepzOoBaaNvS9seNZkeIeeDyElZuneIVOnfTtOsHOE5nfA+Hdkm1
         6LIg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=qeAi61cpvLCchVLzX18BCcdb3PVX4ZHeosi+76zgXGg=;
        b=fISZyIwf2oPhtpVHfk+Q3jcfzP/318UfZutbNbvWkwoKGn6hCqxwANFM0Hy72gd8wb
         LASaBuzXol+iB7igc4mwIJzVLSQuQf8L9iJXeInwrvZ+ED+6hEMXGe6Q2mwVgxMdmJNG
         9SqdUu4WPYiVo/tUd3TiWGUzaju4NQ5XlBgyJKWI6PbD6jPpN4O7xrFXwnDqkHEwFhzH
         ujSSIWntJpxCJ6WMNuRwU9W0pA30OuKnNpyP6zijsFlGIO699fk1aumr7lP3FSqMUrDL
         RGBFk9uBq7XzkvwLGi/bFRo1VtXsnzrnEWWAzmeGvbtxwt5ABPzojejpPhFgf7Rt9O9d
         7PuA==
X-Gm-Message-State: ALoCoQm9IU7XetyFGxmMmzZB1pyQmdCD7ApkfJxGTnP5e/JJRVpo2Dvg6azXfwKlFAjEwRIEL0gt
MIME-Version: 1.0
X-Received: by 10.107.156.6 with SMTP id f6mr2670438ioe.163.1448479898154;
 Wed, 25 Nov 2015 11:31:38 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Wed, 25 Nov 2015 11:31:38 -0800 (PST)
In-Reply-To: <9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
	<9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com>
Date: Wed, 25 Nov 2015 13:31:38 -0600
Message-ID: <CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com>
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1140ccc0cb82610525628107

--001a1140ccc0cb82610525628107
Content-Type: text/plain; charset=UTF-8

On Wed, Nov 25, 2015 at 1:12 PM, Jim Jagielski <jim@jagunet.com> wrote:

>
> > On Nov 25, 2015, at 12:42 PM, William A Rowe Jr <wrowe@rowe-clan.net>
> wrote:
> >
> > On Wed, Nov 25, 2015 at 10:17 AM, Jim Jagielski <jim@jagunet.com> wrote:
> > What is the current status? Is this on hold?
> >
> > It is looking for a good name.  I'm happy with apr_token_strcasecmp
> > to best indicate its use-case and provenance.  Does that work for
> > everyone?
>
> Still not super excited by the use of 'token' since it
> implies it should only be used for HTTP tokens and not
> in other cases where we use it to do ascii string comparisons
> (for example, when we check env-var settings or maybe directives)...
> yeah, they could also be lumped as 'tokens' I guess...
>
> ap_casecmpastr[n] for Case-insensitive CoMParison of Ascii STRing
>

APR has a naming pattern for various functional groups - this won't be the
last
one that is impacted by POSIX-ing what should already be posix :)

Because this is (a) str[n]casecmp I'm pretty strongly against name mangling
for the sake of name mangling, our consumers are C programmers, after all.
Well, most of them anyways... and they should be familiar enough names
for the Lua and PHP folks too.

And this isn't ASCII actually, we established that we want EBCDIC build of
APR + HTTPD to have the same thing.  Not ASCII, but POSIX locale.  We
will be careful about the description on that count.

Still -0.5 on introducing an ap_function, in light of the current mess in
httpd.h.
I'm only 10% of the way through reviewing @deprecated on that single header.

--001a1140ccc0cb82610525628107
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On W=
ed, Nov 25, 2015 at 1:12 PM, Jim Jagielski <span dir=3D"ltr">&lt;<a href=3D=
"mailto:jim@jagunet.com" target=3D"_blank">jim@jagunet.com</a>&gt;</span> w=
rote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8e=
x;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-styl=
e:solid;padding-left:1ex"><span class=3D""><br>
&gt; On Nov 25, 2015, at 12:42 PM, William A Rowe Jr &lt;<a href=3D"mailto:=
wrowe@rowe-clan.net">wrowe@rowe-clan.net</a>&gt; wrote:<br>
&gt;<br>
&gt; On Wed, Nov 25, 2015 at 10:17 AM, Jim Jagielski &lt;<a href=3D"mailto:=
jim@jagunet.com">jim@jagunet.com</a>&gt; wrote:<br>
&gt; What is the current status? Is this on hold?<br>
&gt;<br>
&gt; It is looking for a good name.=C2=A0 I&#39;m happy with apr_token_strc=
asecmp<br>
&gt; to best indicate its use-case and provenance.=C2=A0 Does that work for=
<br>
&gt; everyone?<br>
<br>
</span>Still not super excited by the use of &#39;token&#39; since it<br>
implies it should only be used for HTTP tokens and not<br>
in other cases where we use it to do ascii string comparisons<br>
(for example, when we check env-var settings or maybe directives)...<br>
yeah, they could also be lumped as &#39;tokens&#39; I guess...<br>
<br>
ap_casecmpastr[n] for Case-insensitive CoMParison of Ascii STRing<br></bloc=
kquote><div><br></div><div>APR has a naming pattern for various functional =
groups - this won&#39;t be the last</div><div>one that is impacted by POSIX=
-ing what should already be posix :)</div><div><br></div><div><div>Because =
this is (a) str[n]casecmp I&#39;m pretty strongly against name mangling</di=
v><div>for the sake of name mangling, our consumers are C programmers, afte=
r all.</div><div>Well, most of them anyways... and they should be familiar =
enough names</div><div>for the Lua and PHP folks too.</div><div><br></div><=
/div><div>And this isn&#39;t ASCII actually, we established that we want EB=
CDIC build of</div><div>APR + HTTPD to have the same thing.=C2=A0 Not ASCII=
, but POSIX locale.=C2=A0 We</div><div>will be careful about the descriptio=
n on that count.</div><div><br></div><div>Still -0.5 on introducing an ap_f=
unction, in light of the current mess in httpd.h.<br></div><div>I&#39;m onl=
y 10% of the way through reviewing @deprecated on that single header.</div>=
<div><br></div><div><br></div></div></div></div>

--001a1140ccc0cb82610525628107--

From dev-return-84759-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 19:51:19 2015
Return-Path: <dev-return-84759-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A910018A40
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 19:51:19 +0000 (UTC)
Received: (qmail 84313 invoked by uid 500); 25 Nov 2015 19:51:19 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 84245 invoked by uid 500); 25 Nov 2015 19:51:19 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 84235 invoked by uid 99); 25 Nov 2015 19:51:19 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 19:51:19 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 917301A0AAE
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 19:51:18 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id Q_CD0xklpold for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 19:51:06 +0000 (UTC)
Received: from resqmta-ch2-06v.sys.comcast.net (resqmta-ch2-06v.sys.comcast.net [69.252.207.38])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id A52DD21157
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 19:51:06 +0000 (UTC)
Received: from resomta-ch2-04v.sys.comcast.net ([69.252.207.100])
	by resqmta-ch2-06v.sys.comcast.net with comcast
	id lvqJ1r0022AWL2D01vr0vD; Wed, 25 Nov 2015 19:51:00 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-04v.sys.comcast.net with comcast
	id lvqz1r00F2U0RYt01vqz8W; Wed, 25 Nov 2015 19:51:00 +0000
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com>
Date: Wed, 25 Nov 2015 14:50:59 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com> <9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com> <CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448481060;
	bh=EFuJUGrVJWNyL718mLWcniPFJvjLmfnqUfCGFa7Jvcc=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=f8ohUnaOjqyIEOAndTAwYxGASRzBuUrQMT2c0MC0KQzOvT6lhWIZi2vscJk7Pl0Qs
	 tcQrD3hPSdBXoj+nWSfXKaChkXF9Ix7aEfvCuCkxY1bWWtUkAkZmGgObGuvKItE8rj
	 r6liJSm8St+ujctdqhM1oMawGDzAQctze43vV9Ht+3ex5vsYSN3tlDNECUueYVmuET
	 rgkUU3I4vGnvFvflpljJk/zwpLgUrQI/vTkr30E2Pds6CtMFLJIHrVFcfXj+WwImKE
	 0wPh6tVd5hm9mwxwy2tNSkzq5htLPgdB47H+Qj5JSZEJzzH3f0PkYZewYt4PuZCDxb
	 RbjUDvyFj2zcQ==

My point is that we use it to compare, for example,
"FoobARski!" with "foOBArsKi!", not "=C3=89bana?" with "=C3=A9bana?" or =
"ebana?"

In that way I mean "ascii"

Heck, we may as well say that we really aren't comparing
"strings" at all, just arrays of 8bit characters :)

Anyway, that was my final post about the name... at this
point I'd just like to see the actual improvement get completely
folded in and used so we (and our users) can start enjoying the
benefit.

> On Nov 25, 2015, at 2:31 PM, William A Rowe Jr <wrowe@rowe-clan.net> =
wrote:
>=20
> On Wed, Nov 25, 2015 at 1:12 PM, Jim Jagielski <jim@jagunet.com> =
wrote:
>=20
> > On Nov 25, 2015, at 12:42 PM, William A Rowe Jr =
<wrowe@rowe-clan.net> wrote:
> >
> > On Wed, Nov 25, 2015 at 10:17 AM, Jim Jagielski <jim@jagunet.com> =
wrote:
> > What is the current status? Is this on hold?
> >
> > It is looking for a good name.  I'm happy with apr_token_strcasecmp
> > to best indicate its use-case and provenance.  Does that work for
> > everyone?
>=20
> Still not super excited by the use of 'token' since it
> implies it should only be used for HTTP tokens and not
> in other cases where we use it to do ascii string comparisons
> (for example, when we check env-var settings or maybe directives)...
> yeah, they could also be lumped as 'tokens' I guess...
>=20
> ap_casecmpastr[n] for Case-insensitive CoMParison of Ascii STRing
>=20
> APR has a naming pattern for various functional groups - this won't be =
the last
> one that is impacted by POSIX-ing what should already be posix :)
>=20
> Because this is (a) str[n]casecmp I'm pretty strongly against name =
mangling
> for the sake of name mangling, our consumers are C programmers, after =
all.
> Well, most of them anyways... and they should be familiar enough names
> for the Lua and PHP folks too.
>=20
> And this isn't ASCII actually, we established that we want EBCDIC =
build of
> APR + HTTPD to have the same thing.  Not ASCII, but POSIX locale.  We
> will be careful about the description on that count.
>=20
> Still -0.5 on introducing an ap_function, in light of the current mess =
in httpd.h.
> I'm only 10% of the way through reviewing @deprecated on that single =
header.
>=20
>=20


From dev-return-84760-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 20:06:17 2015
Return-Path: <dev-return-84760-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5467B18B1C
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 20:06:17 +0000 (UTC)
Received: (qmail 52270 invoked by uid 500); 25 Nov 2015 20:06:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 52195 invoked by uid 500); 25 Nov 2015 20:06:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 52181 invoked by uid 99); 25 Nov 2015 20:06:16 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 20:06:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id DF2F3C08AC
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 20:06:15 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.879
X-Spam-Level: **
X-Spam-Status: No, score=2.879 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01,
	SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id fR-rfzJkI4Kh for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 20:06:15 +0000 (UTC)
Received: from mail-wm0-f51.google.com (mail-wm0-f51.google.com [74.125.82.51])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id AC1EF20BC2
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 20:06:14 +0000 (UTC)
Received: by wmuu63 with SMTP id u63so152195400wmu.0
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 12:06:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=XY0ZjlWdroqkBHF6y8qZhSTVkdsrh3sSZW2aByqmTHQ=;
        b=kMlBfLoYvPlnOW1/m1+AsPL8w6uAuJmW51/nzyqiLC+3VMBy5jf2LaMOzoMrM6QWQj
         nZCNfMVecCIqPlNnPnqQne+KZW5QNZy7P4EsbVm6HWTx3Wgb+uGVs2QvJUWH/Iv74wHf
         gT4fdoHZ1TE74/sMZn0gZPZ/i0cxAK0tUnmmjYJpB8jbLD0yhZBRHOZzW1/yxfZySx3c
         JpKTm43ou1YGT0mWtfMOLr8AZhar/4TZC/jsMzIhtoQwlTz1l+MxbhEtw9QkvZ2A1zv9
         RjGs0NqvCSIcAfZE+A2/oXQnRDbo21aVPdbnCIBnmlPfYj1fbxY4cSL3LckqwCq/KkDO
         dBeA==
MIME-Version: 1.0
X-Received: by 10.194.93.164 with SMTP id cv4mr44287812wjb.43.1448481974436;
 Wed, 25 Nov 2015 12:06:14 -0800 (PST)
Received: by 10.28.111.80 with HTTP; Wed, 25 Nov 2015 12:06:14 -0800 (PST)
In-Reply-To: <34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
	<9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com>
	<CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com>
	<34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com>
Date: Wed, 25 Nov 2015 12:06:14 -0800
Message-ID: <CAGu=u8h2SNJd3boeEmuA9Tb4-8rOdoYw4RkJP6639BkBfr_=bw@mail.gmail.com>
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: Jacob Champion <champion.p@gmail.com>
To: "dev@httpd.apache.org" <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=047d7b5da7b98ccfbf052562fd4d

--047d7b5da7b98ccfbf052562fd4d
Content-Type: text/plain; charset=UTF-8

My two cents: I agree that another "name mangled" abbreviation is not
particularly helpful, but I also agree with Jim's concern: "apr_token" made
me immediately wonder what made this exclusive to HTTP tokens.
Unfortunately I don't have much of an alternative suggestion. I have seen
other frameworks refer to an "invariant" or "independent" locale/culture
before; maybe that helps jog someone's creativity?

Feel free to ignore my rambling. ;) My default naming strategy is to throw
out random ideas.

--Jacob
(on mobile, apologies for strange formatting)

--047d7b5da7b98ccfbf052562fd4d
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

My two cents: I agree that another &quot;name mangled&quot; abbreviation is=
 not particularly helpful, but I also agree with Jim&#39;s concern: &quot;a=
pr_token&quot; made me immediately wonder what made this exclusive to HTTP =
tokens. Unfortunately I don&#39;t have much of an alternative suggestion. I=
 have seen other frameworks refer to an &quot;invariant&quot; or &quot;inde=
pendent&quot; locale/culture before; maybe that helps jog someone&#39;s cre=
ativity?<div><br></div><div>Feel free to ignore my rambling. ;) My default =
naming strategy is to throw out random ideas.</div><div><br></div><div>--Ja=
cob</div><div>(on mobile, apologies for strange formatting)</div>

--047d7b5da7b98ccfbf052562fd4d--

From dev-return-84761-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 20:11:48 2015
Return-Path: <dev-return-84761-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7DA9718B70
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 20:11:48 +0000 (UTC)
Received: (qmail 63066 invoked by uid 500); 25 Nov 2015 20:11:47 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 62986 invoked by uid 500); 25 Nov 2015 20:11:47 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 62976 invoked by uid 99); 25 Nov 2015 20:11:47 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 20:11:47 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 33463180A95
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 20:11:47 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 7g4YHkYwdbdL for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 20:11:40 +0000 (UTC)
Received: from mail-io0-f177.google.com (mail-io0-f177.google.com [209.85.223.177])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 0BD6020C41
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 20:11:39 +0000 (UTC)
Received: by ioc74 with SMTP id 74so64623847ioc.2
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 12:11:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=vhQwl/vnzS7Ad7Gmuu5I2TFHZTW1zYQVKa6UMOUQz9U=;
        b=IR8bZLHVvj9jv1A1WbWGVTBSFv57zF03o6g1Pj+cbOsD/FbGpF9aAQnKS7CoJ8gGPN
         h4kp3MWFgpTzWnKpiUqbevqLPxzImnZbfxbnSSn6TW6MCx53JyLUjmkDr9CUhJIG0cNF
         6MRpQknuZqC6edahA3vj3YhisCKfa/4Eaej3Y1cGjw9RvZjOA+z1EKafB3s48u8gndAF
         q29u/LagMQpAhF+OicrAK+qQ4fkdcmbkx6lHbLVQjm56QYRndTDj8gWYxifLybIFsNt1
         dK4YsJ0kNCwrOt9T7L8XVIBxBOiPk4O5ltHO7i+zAX9NXgcaUBR13TgJycRjJHMp4CKh
         OZjg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=vhQwl/vnzS7Ad7Gmuu5I2TFHZTW1zYQVKa6UMOUQz9U=;
        b=RRxDf/eG1HJTPpolERt8NfeoUktbHW0hCCjA2kgx60ZvS3OA1PwtDpK0bqbnX48hpa
         SmddZpAba6Ng+VA6Ys7H82xGHtCKxaS96+7EOsIFiGbN8rkDv6G7bVCw6zk6JujPGRID
         oUjKNyeNF6Jd8x80QXvvYPFbRjp2sGy9+lEPpia7EI3PpHWMrmPHjMq4Q+VE4NwDPl1W
         TMubxeBtJ4LP9BUhYvP/g0S652KCFdHmLaPE1VbQSVUXeBET9o/ALdKvcf3FWe+BjWj4
         ROiQZTef/H9hyLjd1GVGyuAPTTzZHR7Yco3L1aPn0BBQyQf/+D8OF2uL7fspOUC2p935
         PuOA==
X-Gm-Message-State: ALoCoQlqQvmRVz8JU5okhJ4ZEMOcq1W89cJvOXnwEhV2WodRuEmt/M/rx+DaJaxEQXhblnwsDD4G
MIME-Version: 1.0
X-Received: by 10.107.34.199 with SMTP id i190mr2911875ioi.150.1448482292837;
 Wed, 25 Nov 2015 12:11:32 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Wed, 25 Nov 2015 12:11:32 -0800 (PST)
In-Reply-To: <34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
	<9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com>
	<CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com>
	<34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com>
Date: Wed, 25 Nov 2015 14:11:32 -0600
Message-ID: <CACsi251DTcmki1__9OeBrYrnn_dyrdoo2rL3g6ZspXPx+_nNyg@mail.gmail.com>
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1140d94487466a0525631042

--001a1140d94487466a0525631042
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Wed, Nov 25, 2015 at 1:50 PM, Jim Jagielski <jim@jagunet.com> wrote:

> My point is that we use it to compare, for example,
> "FoobARski!" with "foOBArsKi!", not "=C3=89bana?" with "=C3=A9bana?" or "=
ebana?"
>
> In that way I mean "ascii"
>

But that isn't precisely what you wrote.  It happens to be ASCII here
because
we are corresponding in some offshoot of ISO646 (and yours might be
different
than mine, but gmail resolved it).  We have an EBCDIC modality for APR and
for httpd, and in that case, it is exactly what you meant (only A-Z, a-z)
but
not what you wrote :)


> Heck, we may as well say that we really aren't comparing
> "strings" at all, just arrays of 8bit characters :)
>

True, almost.  That's why I reiterated that the 8-bit values are largely
opaque to the "C" locale.  As long as A-Z, a-z behave as 'we' expect
with protocol conformance, we aren't so worried about the rest, and
that applies equally in ASCII or EBCDIC or Baud=C3=B4t.

Anyway, that was my final post about the name... at this
> point I'd just like to see the actual improvement get completely
> folded in and used so we (and our users) can start enjoying the
> benefit.
>

In terms of your perceived optimization, I'd hate to have the result that
OS/X
hobbled users gain a faster strcmp implementation while others realize a
slower implementation, and I'm thinking of non-locale aware BSD.  That's
often the case with "optimizations" that don't consider what the clib
maintainers are able to accomplish with specialized knowledge of the
target architecture (especially MMX operations across arrays of characters)=
.

And we long ago decided that APR really isn't cut out for those sorts of
optimizations.

I'm also waiting for feedback about the naming convention, I'd like to get
this into APR yesterday and start building on it, but it's hard to name our
generic-posix tolower/toupper until we agree on the naming scheme :)

--001a1140d94487466a0525631042
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On W=
ed, Nov 25, 2015 at 1:50 PM, Jim Jagielski <span dir=3D"ltr">&lt;<a href=3D=
"mailto:jim@jagunet.com" target=3D"_blank">jim@jagunet.com</a>&gt;</span> w=
rote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8e=
x;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-styl=
e:solid;padding-left:1ex">My point is that we use it to compare, for exampl=
e,<br>
&quot;FoobARski!&quot; with &quot;foOBArsKi!&quot;, not &quot;=C3=89bana?&q=
uot; with &quot;=C3=A9bana?&quot; or &quot;ebana?&quot;<br>
<br>
In that way I mean &quot;ascii&quot;<br></blockquote><div><br></div><div>Bu=
t that isn&#39;t precisely what you wrote.=C2=A0 It happens to be ASCII her=
e because</div><div>we are corresponding in some offshoot of ISO646 (and yo=
urs might be different</div><div>than mine, but gmail resolved it).=C2=A0 W=
e have an EBCDIC modality for APR and</div><div>for httpd, and in that case=
, it is exactly what you meant (only A-Z, a-z) but</div><div>not what you w=
rote :)</div><div>=C2=A0</div><blockquote class=3D"gmail_quote" style=3D"ma=
rgin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,=
204);border-left-style:solid;padding-left:1ex">
Heck, we may as well say that we really aren&#39;t comparing<br>
&quot;strings&quot; at all, just arrays of 8bit characters :)<br></blockquo=
te><div>=C2=A0</div><div>True, almost.=C2=A0 That&#39;s why I reiterated th=
at the 8-bit values are largely</div><div>opaque to the &quot;C&quot; local=
e.=C2=A0 As long as A-Z, a-z behave as &#39;we&#39; expect</div><div>with p=
rotocol conformance, we aren&#39;t so worried about the rest, and</div><div=
>that applies equally in ASCII or EBCDIC or Baud=C3=B4t.</div><div><br></di=
v><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8ex;borde=
r-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid=
;padding-left:1ex">
Anyway, that was my final post about the name... at this<br>
point I&#39;d just like to see the actual improvement get completely<br>
folded in and used so we (and our users) can start enjoying the<br>
benefit.<br>
<div class=3D""><div class=3D"h5"></div></div></blockquote></div></div><div=
 class=3D"gmail_extra"><br></div><div class=3D"gmail_extra">In terms of you=
r perceived optimization, I&#39;d hate to have the result that OS/X</div><d=
iv class=3D"gmail_extra">hobbled users gain a faster strcmp implementation =
while others realize a</div><div class=3D"gmail_extra">slower implementatio=
n, and I&#39;m thinking of non-locale aware BSD.=C2=A0 That&#39;s=C2=A0</di=
v><div class=3D"gmail_extra">often the case with &quot;optimizations&quot; =
that don&#39;t consider what the clib=C2=A0</div><div class=3D"gmail_extra"=
>maintainers are able to accomplish with specialized knowledge of the=C2=A0=
</div><div class=3D"gmail_extra">target architecture (especially MMX operat=
ions across arrays of characters).</div><div class=3D"gmail_extra"><br></di=
v><div class=3D"gmail_extra">And we long ago decided that APR really isn&#3=
9;t cut out for those sorts of</div><div class=3D"gmail_extra">optimization=
s.</div><div class=3D"gmail_extra"><br></div><div class=3D"gmail_extra">I&#=
39;m also waiting for feedback about the naming convention, I&#39;d like to=
 get</div><div class=3D"gmail_extra">this into APR yesterday and start buil=
ding on it, but it&#39;s hard to name our</div><div class=3D"gmail_extra">g=
eneric-posix tolower/toupper until we agree on the naming scheme :)</div><d=
iv class=3D"gmail_extra"><br></div><div class=3D"gmail_extra"><br></div></d=
iv>

--001a1140d94487466a0525631042--

From dev-return-84762-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 20:13:35 2015
Return-Path: <dev-return-84762-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5D32718B88
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 20:13:35 +0000 (UTC)
Received: (qmail 69136 invoked by uid 500); 25 Nov 2015 20:13:34 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 69060 invoked by uid 500); 25 Nov 2015 20:13:34 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 69050 invoked by uid 99); 25 Nov 2015 20:13:33 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 20:13:33 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 89218C7251
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 20:13:33 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.998
X-Spam-Level: **
X-Spam-Status: No, score=2.998 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id ARdH0tFDpn2J for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 20:13:32 +0000 (UTC)
Received: from mail-ig0-f172.google.com (mail-ig0-f172.google.com [209.85.213.172])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 9F22922F01
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 20:13:32 +0000 (UTC)
Received: by igcto18 with SMTP id to18so44847821igc.0
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 12:13:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=s2YonnBgk6F5M+Gt+kWDsUDcm1wtHGVSIDbBj03vnHQ=;
        b=XLH3yompdPs7Ic+/0ILqgM9lUaJtYqfN6gufap/aY/RLyI2WJcFsLKaWC3FD+o0sz6
         mNEBgE1jqFLv382m8cxdcx99/VNMqbeNVz+585Ym4cvMbWwhdcFVZhd2cgDucDp+EcYV
         OPSVg6HB1yGO/eCKV/cfi7Mry2F8EuBiuJbAyos8N3xg17MhrbO9Ko0GUdqlfRFoIVqC
         HoyLwhxivsGTbEM2qYqwskM5uuKXMb6O+BqoFwYpZkWos0lQaKW7ocbp77n9E9GYANAS
         WuRX9gAGH8MeSbuOMTn0dkkIImzamS8knQqDrZAE1eeVnF+5v3CxMFs5FVzXIMmQpR31
         HLtg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=s2YonnBgk6F5M+Gt+kWDsUDcm1wtHGVSIDbBj03vnHQ=;
        b=HdcvYPyKqxpY6UhmhFGebjVqQw6vq22vSbseiD+/s3ltX18sLH2aKtG8XMR89XyZ6E
         uZ54zTL+W3IUyA0LaTNo5b59lZX5sTnMWoUkwB066YCd2YoXsrkxLC+gkMeGdqQ61v/x
         JmKZQ1qGufxsTsDyDAasH4OrFqZmOoW9NEen6QPbCo8uz2hZ7ybORt2ZQptqgJJToOP8
         v9gtqMt/VxVLcboq+GEBUx1tp0JSf4xmgYdWJJvpPMVy4taft+IFGGlwjYzFOBnRVIJ0
         IkErGOh4sL/Pq7XtlukZedT/dj1it6Ckg8fxOeJjcdd1Lp1gIJMhcSvAn1bW71CaZ8Zf
         nq3g==
X-Gm-Message-State: ALoCoQkaKdJMBJsqNtmz+9NBdiMlP3wd13iOoksEebT9h2h9Ply3nDhB9nmfzTHZUuLURpxnfgsI
MIME-Version: 1.0
X-Received: by 10.50.20.163 with SMTP id o3mr6033627ige.35.1448482405871; Wed,
 25 Nov 2015 12:13:25 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Wed, 25 Nov 2015 12:13:25 -0800 (PST)
In-Reply-To: <CAGu=u8h2SNJd3boeEmuA9Tb4-8rOdoYw4RkJP6639BkBfr_=bw@mail.gmail.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
	<9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com>
	<CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com>
	<34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com>
	<CAGu=u8h2SNJd3boeEmuA9Tb4-8rOdoYw4RkJP6639BkBfr_=bw@mail.gmail.com>
Date: Wed, 25 Nov 2015 14:13:25 -0600
Message-ID: <CACsi253Mi6V-q9N4RKG5LS6ds1fTqBcRxqE_4ehFe4FrH3cXgQ@mail.gmail.com>
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>, APR Developer List <dev@apr.apache.org>
Content-Type: multipart/alternative; boundary=047d7bd75dec4411dc05256317e3

--047d7bd75dec4411dc05256317e3
Content-Type: text/plain; charset=UTF-8

On Wed, Nov 25, 2015 at 2:06 PM, Jacob Champion <champion.p@gmail.com>
wrote:

> My two cents: I agree that another "name mangled" abbreviation is not
> particularly helpful, but I also agree with Jim's concern: "apr_token" made
> me immediately wonder what made this exclusive to HTTP tokens.
> Unfortunately I don't have much of an alternative suggestion. I have seen
> other frameworks refer to an "invariant" or "independent" locale/culture
> before; maybe that helps jog someone's creativity?
>
> Feel free to ignore my rambling. ;) My default naming strategy is to throw
> out random ideas.
>

I was thinking "_lcc_" for locale-C, short and to the point, but meaningful?

"_lcposix_" is also descriptive but long, and "_posix_" is much too
overloaded
with multiple meanings and implications (locales *are* a posix API :)

--047d7bd75dec4411dc05256317e3
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On W=
ed, Nov 25, 2015 at 2:06 PM, Jacob Champion <span dir=3D"ltr">&lt;<a href=
=3D"mailto:champion.p@gmail.com" target=3D"_blank">champion.p@gmail.com</a>=
&gt;</span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0=
 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">My two cents: I agree =
that another &quot;name mangled&quot; abbreviation is not particularly help=
ful, but I also agree with Jim&#39;s concern: &quot;apr_token&quot; made me=
 immediately wonder what made this exclusive to HTTP tokens. Unfortunately =
I don&#39;t have much of an alternative suggestion. I have seen other frame=
works refer to an &quot;invariant&quot; or &quot;independent&quot; locale/c=
ulture before; maybe that helps jog someone&#39;s creativity?<div><br></div=
><div>Feel free to ignore my rambling. ;) My default naming strategy is to =
throw out random ideas.</div><div></div></blockquote></div><br></div><div c=
lass=3D"gmail_extra">I was thinking &quot;_lcc_&quot; for locale-C, short a=
nd to the point, but meaningful?</div><div class=3D"gmail_extra"><br></div>=
<div class=3D"gmail_extra">&quot;_lcposix_&quot; is also descriptive but lo=
ng, and &quot;_posix_&quot; is much too overloaded</div><div class=3D"gmail=
_extra">with multiple meanings and implications (locales *are* a posix API =
:)</div></div>

--047d7bd75dec4411dc05256317e3--

From dev-return-84763-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 21:02:28 2015
Return-Path: <dev-return-84763-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 931FA18E11
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 21:02:28 +0000 (UTC)
Received: (qmail 1013 invoked by uid 500); 25 Nov 2015 21:02:27 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 932 invoked by uid 500); 25 Nov 2015 21:02:27 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 922 invoked by uid 99); 25 Nov 2015 21:02:27 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 21:02:27 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 533271A2F9A
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 21:02:27 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.652
X-Spam-Level:
X-Spam-Status: No, score=0.652 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id aBj9_Ml2Mnn9 for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 21:02:20 +0000 (UTC)
Received: from resqmta-po-11v.sys.comcast.net (resqmta-po-11v.sys.comcast.net [96.114.154.170])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id D2FA020BC2
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 21:02:19 +0000 (UTC)
Received: from resomta-po-06v.sys.comcast.net ([96.114.154.230])
	by resqmta-po-11v.sys.comcast.net with comcast
	id lx2H1r0014yXVJQ01x2Jlr; Wed, 25 Nov 2015 21:02:18 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-06v.sys.comcast.net with comcast
	id lx2G1r00X2U0RYt01x2Hxw; Wed, 25 Nov 2015 21:02:17 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CACsi251DTcmki1__9OeBrYrnn_dyrdoo2rL3g6ZspXPx+_nNyg@mail.gmail.com>
Date: Wed, 25 Nov 2015 16:02:16 -0500
Content-Transfer-Encoding: 7bit
Message-Id: <A98A2101-77B6-4A52-BF57-5F71348CA167@jaguNET.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com> <9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com> <CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com> <34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com> <CACsi251DTcmki1__9OeBrYrnn_dyrdoo2rL3g6ZspXPx+_nNyg@mail.gmail.com>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448485338;
	bh=ROLIRwh4CRhdl73h5XCLXwHWZyDRxJOU3wDzdX1Ceqo=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=q6xuT2/fXIzy3EqJy/kV0FjBHlQEDWyL0ZZCkMNUBai0pEBRh4SU6cN6I38BFxa3X
	 iR24komLDk8+3nKoUKvPaIXgut0egq382R2BW+k/uv9zTU4ZUk/3p5eWET7IHsLUnV
	 aHS2I0VYjPobi9vpsqpByrb8LATtTlReqoLyLYJTH9hKxoonPgJ2R7TN/NMiw/nZDx
	 rBs3UTmz2D1nPLNuPpC/eYRvvEgdkXW11qqSoA61Fei6OMthZ9AdFG5tDRMkwCcMLZ
	 3B0S/uHto8RUkONd6G3VoE6T0i+fNnFt0jbWETUvLv+yziZDc99zokC3VB4HhR5Y8K
	 Nq9V8scQtS30w==

In general, strcmp() is not implemented via strcmp.c
(although if you do a source code search for strcmp, that's
what you'll get). Most of the time it's implemented in
assembly (strcmp.s) or simply leverages memcmp() where
you aren't doing a byte by byte comparison but are doing
a native memory word (32 or 64bit) comparison. This
makes them super fast.

Once we need to worry about case insensitivity, then
we see a whole gamut of implementations; some use
a mapped array as I did; some go char by char and call
tolower() on each one; some do other things such as
testing if isupper() before calling tolower() if needed.
The word-based optimizations seem less viable, as seen
in test results that I ran and Yann also verified (afaict)

In my tests, my impl was faster on OSX and CentOS5 and 6.
It's a very common function we use and with my test results
it seemed to make sense to provide our own impl, esp if
we decided that what we were really concerned about was
comparing for equality, and so would be able to avoid
the !strcasecmp logic leaping.

If we decide that all this was for moot, that's fine.
That's what these types of investigations and discussions
are for.

From dev-return-84764-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 21:10:49 2015
Return-Path: <dev-return-84764-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D9CB018E73
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 21:10:49 +0000 (UTC)
Received: (qmail 13685 invoked by uid 500); 25 Nov 2015 21:10:49 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 13610 invoked by uid 500); 25 Nov 2015 21:10:49 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 13599 invoked by uid 99); 25 Nov 2015 21:10:49 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 21:10:49 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 08610180A95
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 21:10:49 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.652
X-Spam-Level:
X-Spam-Status: No, score=0.652 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id ab78gWayJ5WH for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 21:10:43 +0000 (UTC)
Received: from resqmta-po-09v.sys.comcast.net (resqmta-po-09v.sys.comcast.net [96.114.154.168])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 45BF440E13
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 21:10:43 +0000 (UTC)
Received: from resomta-po-09v.sys.comcast.net ([96.114.154.233])
	by resqmta-po-09v.sys.comcast.net with comcast
	id lxAU1r00552QWKC01xAcxh; Wed, 25 Nov 2015 21:10:36 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-09v.sys.comcast.net with comcast
	id lxAb1r00F2U0RYt01xAcT9; Wed, 25 Nov 2015 21:10:36 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <CACsi253Mi6V-q9N4RKG5LS6ds1fTqBcRxqE_4ehFe4FrH3cXgQ@mail.gmail.com>
Date: Wed, 25 Nov 2015 16:10:35 -0500
Cc: httpd <dev@httpd.apache.org>
Content-Transfer-Encoding: 7bit
Message-Id: <38935ED2-E3F5-48BA-AC25-DB20DE66F95D@jaguNET.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com> <9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com> <CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com> <34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com> <CAGu=u8h2SNJd3boeEmuA9Tb4-8rOdoYw4RkJP6639BkBfr_=bw@mail.gmail.com> <CACsi253Mi6V-q9N4RKG5LS6ds1fTqBcRxqE_4ehFe4FrH3cXgQ@mail.gmail.com>
To: APR Developer List <dev@apr.apache.org>
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448485836;
	bh=JpXz8PX/smhf+gvXOBz4wbQOrN7BItXVJusf1S9ObPs=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=vGsXUCd8Jj1EWydu+mwAMnM0JasqPN1l/rM6lX0TxuLM8I1467Ib1vmelaBTXYAOC
	 VYuOtbTLI2AInhdYzwWuKpDp7a3PW2Ere4YgwEaB/LuvEo1j2A2qQlP8JhybeAhBjg
	 DrIX8bPMz+2Mez3BqtQqWPEKjcUyyG2B3jWDQgfrEv5ZtgXfUa/Cd8B3BYM5RHL1Eu
	 hh6pS0rUAcK+YASoesIGqgYtN7810is3nQEeGaYyDjzrTqlxlXTUbXcER2FyxeNXTS
	 NoEJyL913Lz5X+p2rOZrp2OTvtbnSDeKTWBpXoYs2AAUM+UI/IzIT8uozRGmxmVvNe
	 qM1JmtfuvzRig==

In a library that has:

	apr_pstrdup()
	apr_pstrndup()
	apr_pstrmemdup()

and apr_pstrmemdup() and apr_pstrndup() are functionally
the same, as well as:

	apr_strnatcasecmp()
	apr_strnatcmp()

neither of which use an 'n' variable to determine string
size, yet is called 'strn...' whereas the dups use that
'n' in 'strndup' to signify that we have a size parameter
BUT its functionally equiv function apr_pstrmemdup() is
called what it is instead of apr_pstrnmemdup()...

... I think we are WAY overthinking naming here.

From dev-return-84765-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 21:37:48 2015
Return-Path: <dev-return-84765-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9BAC618FB9
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 21:37:48 +0000 (UTC)
Received: (qmail 78745 invoked by uid 500); 25 Nov 2015 21:37:48 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 78664 invoked by uid 500); 25 Nov 2015 21:37:48 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 78653 invoked by uid 99); 25 Nov 2015 21:37:48 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 21:37:48 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 988CDC5E9E
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 21:37:47 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.88
X-Spam-Level: **
X-Spam-Status: No, score=2.88 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id k8PId4EVFrKa for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 21:37:41 +0000 (UTC)
Received: from mail-wm0-f42.google.com (mail-wm0-f42.google.com [74.125.82.42])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id B581B20229
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 21:37:40 +0000 (UTC)
Received: by wmuu63 with SMTP id u63so154578409wmu.0
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 13:37:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        bh=sVXLeP6HkbrEMIz6SVGSG7QCdg2NFPb+/J+dBKOO6l4=;
        b=rkVnIRKAPCL+4VaN1hBQf34/+dQOWfkOKZuxrIlFhZ2bjXzqTKocCjOwZCjkxhlkf7
         LRSqFtHGrs68nVCgheCqvHBjZi69DrA3jaoAeRh1CI57yrbZh29rDsxm13eZpQh9gd1A
         BFUGBvCLlCE2tX1/sJgWw2Rbyu8j2tz/5GchnBRxcK1liMLAW864K5hO7XddESKmopu2
         urGTIcT5AdxnMrvVXHPAsRPw5mBWzO7LLpfhW5tlb09VRxWStzW5syECZHs3p0kjbPqY
         sngDOlbIOWoBTGeX5o66ldHPERjvmTj4fufAtUx23pnB80ym6RLgtl+airMTqR4Oc3/7
         kcmg==
MIME-Version: 1.0
X-Received: by 10.194.243.170 with SMTP id wz10mr52221651wjc.80.1448487454059;
 Wed, 25 Nov 2015 13:37:34 -0800 (PST)
Received: by 10.28.111.80 with HTTP; Wed, 25 Nov 2015 13:37:33 -0800 (PST)
Received: by 10.28.111.80 with HTTP; Wed, 25 Nov 2015 13:37:33 -0800 (PST)
In-Reply-To: <38935ED2-E3F5-48BA-AC25-DB20DE66F95D@jaguNET.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
	<9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com>
	<CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com>
	<34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com>
	<CAGu=u8h2SNJd3boeEmuA9Tb4-8rOdoYw4RkJP6639BkBfr_=bw@mail.gmail.com>
	<CACsi253Mi6V-q9N4RKG5LS6ds1fTqBcRxqE_4ehFe4FrH3cXgQ@mail.gmail.com>
	<38935ED2-E3F5-48BA-AC25-DB20DE66F95D@jaguNET.com>
Date: Wed, 25 Nov 2015 13:37:33 -0800
Message-ID: <CAGu=u8hGtL=3Bs6cn1sNZSq=aZqvtqL7ZF+-S9A0aT6Gf85nyw@mail.gmail.com>
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: Jacob Champion <champion.p@gmail.com>
To: dev@httpd.apache.org
Cc: APR Developer List <dev@apr.apache.org>
Content-Type: multipart/alternative; boundary=089e0149411a29357405256444a0

--089e0149411a29357405256444a0
Content-Type: text/plain; charset=UTF-8

On Nov 25, 2015 1:10 PM, "Jim Jagielski" <jim@jagunet.com> wrote:
> ... I think we are WAY overthinking naming here.

I overthink naming constantly, so there's an excellent chance that you're
absolutely correct! That said... your list only ended up convincing me that
APR needs better naming conventions. ;-D

(I do really appreciate this discussion, though. I promise I'm not trying
to stir the pot.)

--Jacob

--089e0149411a29357405256444a0
Content-Type: text/html; charset=UTF-8

<p dir="ltr">On Nov 25, 2015 1:10 PM, &quot;Jim Jagielski&quot; &lt;<a href="mailto:jim@jagunet.com">jim@jagunet.com</a>&gt; wrote:<br>
&gt; ... I think we are WAY overthinking naming here.</p>
<p dir="ltr">I overthink naming constantly, so there&#39;s an excellent chance that you&#39;re absolutely correct! That said... your list only ended up convincing me that APR needs better naming conventions. ;-D</p>
<p dir="ltr">(I do really appreciate this discussion, though. I promise I&#39;m not trying to stir the pot.)</p>
<p dir="ltr">--Jacob</p>

--089e0149411a29357405256444a0--

From dev-return-84766-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 21:39:10 2015
Return-Path: <dev-return-84766-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1E5DC18FC7
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 21:39:10 +0000 (UTC)
Received: (qmail 80963 invoked by uid 500); 25 Nov 2015 21:39:09 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 80887 invoked by uid 500); 25 Nov 2015 21:39:09 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 80877 invoked by uid 99); 25 Nov 2015 21:39:09 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 21:39:09 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 37A9CC143C
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 21:39:09 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 18gPH5CqlpCn for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 21:38:58 +0000 (UTC)
Received: from mail-io0-f177.google.com (mail-io0-f177.google.com [209.85.223.177])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 2EC1A2304A
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 21:38:57 +0000 (UTC)
Received: by iouu10 with SMTP id u10so67648146iou.0
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 13:38:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=dLB4ORPCD1AauFCAwou/dBTh4oNzDggTM+91f5v84VA=;
        b=APys1cF4pXwBNx42goX2P+Ilr6QdVRcp1K3njvQ4AMQ6/iUkhXA/MUSjab1oDfbRL9
         mmsW0ifZBRoIdMXaex7notTV3AiV+kMEVBoi7fdL9oDzFu1CtwuEbVbBB0KU4fm9h2qv
         TPteP9RqUU6Wu/ezANtqYFojCNYQ2xzoQBqpgyHmPq/BCLO3maaM4n2eSj5slTxf/N4z
         oWQSKC5KiIVT/2zGE1/uFI+exUQk37c4bQMURnNeVcJ37rU7lnWCF0/19MZoWRxaFvna
         HGhdgLqMha6xpjTKbLsbsNHumAQk8N8Hbmj7Q+wbxPtoHQJZ26RcAGF/p5gM9TV79YCs
         UWdA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=dLB4ORPCD1AauFCAwou/dBTh4oNzDggTM+91f5v84VA=;
        b=cbcHC5/TI8/3uit94YBzg6hmgeqosUyupDdKdjrn3wAt11FvBJnv8obbIN7bEdWMTF
         Vn+DXqM6Eoz+VZ2pwPK3zp07Js2uIe4pognBKHG8ZYGLU7gp0UFRRYeLNJzmzsQWOhec
         uvqxeh6QkgDAFzRfJU1s7+0fZ2H1tmo9dGx3mUV5qfcdH78bI8SAgA3NczZL/5ScREp9
         IWsbajzRPEq5YCIxMRSWeS0cbdiutt8QSkj57rgf0mHuGUnqRYM24/frCo5YVRCiACC3
         qwPULpwAcZBytz3CRGPNgbbc8ICnh9FQTVz73vc/VRFYJsc7pGtaMS7BpvkBRzvgmYZb
         +/7Q==
X-Gm-Message-State: ALoCoQkP4Y/G3BJIkhI59sPM+hk1q5xD+uWswpMOR20GuYmoMM/fMzgK2U5JVkr5035Be5lfn0cN
MIME-Version: 1.0
X-Received: by 10.107.156.6 with SMTP id f6mr3118469ioe.163.1448487536087;
 Wed, 25 Nov 2015 13:38:56 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Wed, 25 Nov 2015 13:38:56 -0800 (PST)
In-Reply-To: <38935ED2-E3F5-48BA-AC25-DB20DE66F95D@jaguNET.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
	<9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com>
	<CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com>
	<34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com>
	<CAGu=u8h2SNJd3boeEmuA9Tb4-8rOdoYw4RkJP6639BkBfr_=bw@mail.gmail.com>
	<CACsi253Mi6V-q9N4RKG5LS6ds1fTqBcRxqE_4ehFe4FrH3cXgQ@mail.gmail.com>
	<38935ED2-E3F5-48BA-AC25-DB20DE66F95D@jaguNET.com>
Date: Wed, 25 Nov 2015 15:38:56 -0600
Message-ID: <CACsi253A8PVX6CmsLsopMf2fCPEzrmguKiGYQdWJp3GDqWXYWA@mail.gmail.com>
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>, APR Developer List <dev@apr.apache.org>
Content-Type: multipart/alternative; boundary=001a1140ccc00cf7220525644952

--001a1140ccc00cf7220525644952
Content-Type: text/plain; charset=UTF-8

On Wed, Nov 25, 2015 at 3:10 PM, Jim Jagielski <jim@jagunet.com> wrote:

> In a library that has:
>
>         apr_pstrdup()
>         apr_pstrndup()
>         apr_pstrmemdup()
>

which are all semantically and mechanically different...


> and apr_pstrmemdup() and apr_pstrndup() are functionally
> the same,


Are you arguing to remove pstrmemdup?  That's a discussion to have
before APR 2.0, certainly, but it isn't functionally the same; bytes within
the copied pstrmemdup may be null, and it has a trailing null appended,
quite different than a memdup.


> as well as:
>
>         apr_strnatcasecmp()
>         apr_strnatcmp()
>
> neither of which use an 'n' variable to determine string
> size,


So there isn't a strnnat[case]cmp() function, are you offering a patch?


> yet is called 'strn...'


Indeed, possible to trip over with grep, for sure, but what is an 'atcmp'?
Seems clear enough to me, but are you proposing a rename?  APR 2.0
is the right time for that...


> whereas the dups use that
> 'n' in 'strndup' to signify that we have a size parameter
>

Indeed... follows the general stdc pattern.


> BUT its functionally equiv function apr_pstrmemdup() is
> called what it is instead of apr_pstrnmemdup()...
>
> ... I think we are WAY overthinking naming here.
>

People may be overthinking, and stumbling to come up with the
most concise and accurate name.  Renaming suggestions and
deprecation of the old names are welcome.  These are good
discussions to have, we made many improvements between
APR 0.9.x and APR 1.0.0 for exactly these reasons.

I agree we can call your proposal apr_str[n]casecmp because it
is a str[n]casecmp implementation - however, that doesn't tell the
user that it is "unusual" but equivalent function that breaks from
posix in that it deliberately chooses not to use the locale and is
primarily for wire protocols.  Thus the _token_ suggestion, but
I am open to other uniqifiers.  I'm not keen on coming up with
a new mishmash of str case len cmp equality blah that will be
harder for reviewers to decipher when reviewing commits.

I know you are in a hurry to just do something, but usually the stuff
we just hurry through many of us regret later, as piles of httpd.h cruft
can attest.  How many headers do you know that contain explicit
sighs?  APR has attempted to be more deliberate in its naming
conventions, by consensus.

You've certainly raised your ire many times at APR's unwillingness
to just modify an API within a major.minor revision, expressed very
little confidence that waiting for an APR release is ever a good idea,
and might be even perceived at hostile toward the entire APR
approach - which has never offered the shoot-from-the-hip approach
that earlier httpd releases enjoyed.  But these decisions were put
down in reaction to frequent breakage for developers prior to httpd 2,
and are in place precisely because APR wants other developers
beyond the world of httpd to have trust and confidence in the API
they are coding to.  Hopefully httpd module authors can enjoy the
same level of confidence.

--001a1140ccc00cf7220525644952
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On W=
ed, Nov 25, 2015 at 3:10 PM, Jim Jagielski <span dir=3D"ltr">&lt;<a href=3D=
"mailto:jim@jagunet.com" target=3D"_blank">jim@jagunet.com</a>&gt;</span> w=
rote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;borde=
r-left:1px #ccc solid;padding-left:1ex">In a library that has:<br>
<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 apr_pstrdup()<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 apr_pstrndup()<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 apr_pstrmemdup()<br></blockquote><div><br></div=
><div>which are all semantically and mechanically different...</div><div>=
=C2=A0</div><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;bo=
rder-left:1px #ccc solid;padding-left:1ex">
and apr_pstrmemdup() and apr_pstrndup() are functionally<br>
the same, </blockquote><div><br></div><div>Are you arguing to remove pstrme=
mdup?=C2=A0 That&#39;s a discussion to have</div><div>before APR 2.0, certa=
inly, but it isn&#39;t functionally the same; bytes within</div><div>the co=
pied pstrmemdup may be null, and it has a trailing null appended,</div><div=
>quite different than a memdup.</div><div>=C2=A0</div><blockquote class=3D"=
gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-=
left:1ex">as well as:<br>
<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 apr_strnatcasecmp()<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 apr_strnatcmp()<br>
<br>
neither of which use an &#39;n&#39; variable to determine string<br>
size, </blockquote><div><br></div><div>So there isn&#39;t a strnnat[case]cm=
p() function, are you offering a patch?</div><div>=C2=A0</div><blockquote c=
lass=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;=
padding-left:1ex">yet is called &#39;strn...&#39; </blockquote><div><br></d=
iv><div>Indeed, possible to trip over with grep, for sure, but what is an &=
#39;atcmp&#39;?</div><div>Seems clear enough to me, but are you proposing a=
 rename?=C2=A0 APR 2.0</div><div>is the right time for that...</div><div>=
=C2=A0</div><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;bo=
rder-left:1px #ccc solid;padding-left:1ex">whereas the dups use that<br>
&#39;n&#39; in &#39;strndup&#39; to signify that we have a size parameter<b=
r></blockquote><div><br></div><div>Indeed... follows the general stdc patte=
rn.</div><div>=C2=A0</div><blockquote class=3D"gmail_quote" style=3D"margin=
:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
BUT its functionally equiv function apr_pstrmemdup() is<br>
called what it is instead of apr_pstrnmemdup()...<br>
<br>
... I think we are WAY overthinking naming here.<br>
</blockquote></div><br></div><div class=3D"gmail_extra">People may be overt=
hinking, and stumbling to come up with the</div><div class=3D"gmail_extra">=
most concise and accurate name.=C2=A0 Renaming suggestions and</div><div cl=
ass=3D"gmail_extra">deprecation of the old names are welcome.=C2=A0 These a=
re good</div><div class=3D"gmail_extra">discussions to have, we made many i=
mprovements between</div><div class=3D"gmail_extra">APR 0.9.x and APR 1.0.0=
 for exactly these reasons.</div><div class=3D"gmail_extra"><br></div><div =
class=3D"gmail_extra">I agree we can call your proposal apr_str[n]casecmp b=
ecause it</div><div class=3D"gmail_extra">is a str[n]casecmp implementation=
 - however, that doesn&#39;t tell the=C2=A0</div><div class=3D"gmail_extra"=
>user that it is &quot;unusual&quot; but equivalent function that breaks fr=
om</div><div class=3D"gmail_extra">posix in that it deliberately chooses no=
t to use the locale and is</div><div class=3D"gmail_extra">primarily for wi=
re protocols.=C2=A0 Thus the _token_ suggestion, but</div><div class=3D"gma=
il_extra">I am open to other uniqifiers.=C2=A0 I&#39;m not keen on coming u=
p with</div><div class=3D"gmail_extra">a new mishmash of str case len cmp e=
quality blah that will be</div><div class=3D"gmail_extra">harder for review=
ers to decipher when reviewing commits.</div><div class=3D"gmail_extra"><br=
></div><div class=3D"gmail_extra">I know you are in a hurry to just do some=
thing, but usually the stuff=C2=A0</div><div class=3D"gmail_extra">we just =
hurry through many of us regret later, as piles of httpd.h cruft=C2=A0</div=
><div class=3D"gmail_extra">can attest.=C2=A0 How many headers do you know =
that contain explicit</div><div class=3D"gmail_extra">sighs?=C2=A0 APR has =
attempted to be more deliberate in its naming</div><div class=3D"gmail_extr=
a">conventions, by consensus.</div><div class=3D"gmail_extra"><br></div><di=
v class=3D"gmail_extra">You&#39;ve certainly raised your ire many times at =
APR&#39;s unwillingness</div><div class=3D"gmail_extra">to just modify an A=
PI within a major.minor revision, expressed very</div><div class=3D"gmail_e=
xtra">little confidence that waiting for an APR release is ever a good idea=
,</div><div class=3D"gmail_extra">and might be even perceived at hostile to=
ward the entire APR=C2=A0</div><div class=3D"gmail_extra">approach - which =
has never offered the shoot-from-the-hip approach=C2=A0</div><div class=3D"=
gmail_extra">that earlier httpd releases enjoyed.=C2=A0 But these decisions=
 were put=C2=A0</div><div class=3D"gmail_extra">down in reaction to frequen=
t breakage for developers prior to httpd 2,=C2=A0</div><div class=3D"gmail_=
extra">and are in place precisely because APR wants other developers=C2=A0<=
/div><div class=3D"gmail_extra">beyond the world of httpd to have trust and=
 confidence in the API=C2=A0</div><div class=3D"gmail_extra">they are codin=
g to.=C2=A0 Hopefully httpd module authors can enjoy the</div><div class=3D=
"gmail_extra">same level of confidence.</div><div class=3D"gmail_extra"><br=
></div><div class=3D"gmail_extra"><br></div></div>

--001a1140ccc00cf7220525644952--

From dev-return-84767-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 21:45:27 2015
Return-Path: <dev-return-84767-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5ADBA1801F
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 21:45:27 +0000 (UTC)
Received: (qmail 92875 invoked by uid 500); 25 Nov 2015 21:45:26 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 92811 invoked by uid 500); 25 Nov 2015 21:45:26 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 92801 invoked by uid 99); 25 Nov 2015 21:45:26 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 21:45:26 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 385671A2D44
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 21:45:26 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id V7yVjBsdf89A for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 21:45:21 +0000 (UTC)
Received: from mail-wm0-f46.google.com (mail-wm0-f46.google.com [74.125.82.46])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id AC18C429AA
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 21:45:20 +0000 (UTC)
Received: by wmuu63 with SMTP id u63so154759301wmu.0
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 13:45:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:thread-index
         :content-language;
        bh=/QDXCYVTrda1ipQOGCK8rUC5fZfxEaUjQod72Ose1kA=;
        b=e3uk0/YsFgjiGybxfotnD03VoY1BtCuu87p+WYYqiHeOkrmuFNXrJ3p3eykREFPA7s
         XRXy4JGSmOTVwR2jr+eNAnRSOmi7JE/nOka+vgjwRG7++g0/nYa8ck0U/uWDqUHeAUJo
         fDIOkK9TCiEhAih0+Zv6Onh6DUhYoMDTrKlzQ=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :thread-index:content-language;
        bh=/QDXCYVTrda1ipQOGCK8rUC5fZfxEaUjQod72Ose1kA=;
        b=bpVoZ+63hP12yO0oqreNRs5UzgVtavDlNYKLf1UVf39r8kaLRDarfvD8N1HcNFe8gF
         AwBFYz/9fawYg36umklwbicwLIcHwXh7vnCD61+pw0i6qlJBbJJagJBRHEFyI6tpYzK0
         X+oWABhOU7DWZFz/gjx877RsNKOpmrl246a2m67rth8ZdeGkDVnwAvvVEQrw393y+rno
         /eOfmsAif0k1kunspSiXnsY76zrKuFO8lswyZa7TxhWSx0FnFuv+acriEgMT8BlG0BqW
         NWsS2DrHmSCWbdl08HfTiGu1F0Vl0O7cDfZA0SKwV0UcudxdBfNBOiy5LYbDborG75jK
         nCkA==
X-Gm-Message-State: ALoCoQmzuyydrsa2oq8znRwx2mgvXyGwpnZNNKJ6n/YTw8UMrPuCeZ4gb+2EcWFJkvzaSXusY9uk
X-Received: by 10.194.71.16 with SMTP id q16mr46525180wju.49.1448487919686;
        Wed, 25 Nov 2015 13:45:19 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id uz5sm24947936wjc.8.2015.11.25.13.45.18
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 25 Nov 2015 13:45:19 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <076f01d12320$7e7d1fb0$7b775f10$@qqmail.nl> <5A92C9AE-2C53-42F3-A4B1-5019A92EF6F6@greenbytes.de> <01e301d12726$716c79b0$54456d10$@qqmail.nl> <966EAA27-78D7-42C6-A5BE-581408C18459@greenbytes.de>
In-Reply-To: <966EAA27-78D7-42C6-A5BE-581408C18459@greenbytes.de>
Subject: RE: H2 stream dependencies
Date: Wed, 25 Nov 2015 22:45:09 +0100
Message-ID: <00b101d127ca$8fd43060$af7c9120$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AQHV/QgOI/sUUA2RfgLMoIZiYUV50QF0Ev7lAmwEtqcBl1M4Qp533Wzg
Content-Language: nl

> -----Original Message-----
> From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
> Sent: woensdag 25 november 2015 10:05
> To: dev@httpd.apache.org
> Subject: Re: H2 stream dependencies
> 
> The execution order of requests is not defined by the protocol and up to
the
> server implementation. As you noticed, one major factor is the mpm active
in
> httpd, influencing how, and if, requests are handled in parallel.
> 
> Even setting dependencies and priorities on streams will not make this
fully
> deterministic, as I tried to explain.
> 
> The case of a prefork mpm without further configuration is an extreme
case.
> Prefork, intended to allow a single thread processing model, has by
default
> 1(!) http/2 worker. That means that requests are worked on one at a time.
A
> blocking request may therefore block all later requests. This is not how
> HTTP/2 is supposed to work, but  it is how prefork is.
> 
> You can configure more H2Workers and have multiple threads even in
> prefork. But you need to be sure that the application you run can live
with
> multi-threading.
> 
> Without knowing your client that well, it seems to assume that requests
are
> processed one after the other. And rely on that. This assumption no longer
> holds in HTTP/2. If you send 2 requests, responses may arrive in any order
or
> interleaved, not matter what you specify for priority. Relying on the
exposed
> behaviour of a certain implementation under certain configuration is
> probably the least that you'd want.

Ok... I applied a stopgap solution in Subversion until we switch to a
smarter request later on in the 1.10 devcycle. With that my number of failed
tests over h2 dropped to just 5. (Of the several thousand Subversion test
scenarios).
* 2 of these are related to HTTP/1.1 status lines where we no longer have
access to the reason field.
* 2 others somehow run against an httpd limit when I only configure 16
threads (while running 4 tests in parallel; each with potentially multiple
connections)
* and the last one is an interesting crash in the serf code.

With another one of my Subversion hats on I'm wondering what we as a module
should do for optimal performance here. We can deliver data quite fast (as
it is essentially just local file-io) and the threading overhead could be
quite large. Are there any guidelines for this at this time?

Perhaps some of this should be applied to mod_dav directly instead of
mod_dav_svn.

	Bert



From dev-return-84768-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 21:53:07 2015
Return-Path: <dev-return-84768-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DB6DF180BE
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 21:53:06 +0000 (UTC)
Received: (qmail 26498 invoked by uid 500); 25 Nov 2015 21:53:06 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 26427 invoked by uid 500); 25 Nov 2015 21:53:06 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 26417 invoked by uid 99); 25 Nov 2015 21:53:06 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 21:53:06 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 08650C12A0
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 21:53:06 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.5
X-Spam-Level: ***
X-Spam-Status: No, score=3.5 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, KAM_LINKBAIT=2.5,
	RCVD_IN_MSPIKE_H2=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id eQ4ThqvYKizx for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 21:52:59 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp01.smtpout.orange.fr [80.12.242.123])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id B8EB320CF5
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 21:52:58 +0000 (UTC)
Received: from [127.0.0.1] ([92.140.231.6])
	by mwinf5d02 with ME
	id lxsq1r00J08wHE403xsqk2; Wed, 25 Nov 2015 22:52:51 +0100
X-ME-Helo: [127.0.0.1]
X-ME-Date: Wed, 25 Nov 2015 22:52:51 +0100
X-ME-IP: 92.140.231.6
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
To: dev@httpd.apache.org
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
 <9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com>
 <CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com>
 <34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com>
 <CACsi251DTcmki1__9OeBrYrnn_dyrdoo2rL3g6ZspXPx+_nNyg@mail.gmail.com>
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Message-ID: <56562DAF.2080702@wanadoo.fr>
Date: Wed, 25 Nov 2015 22:52:47 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <CACsi251DTcmki1__9OeBrYrnn_dyrdoo2rL3g6ZspXPx+_nNyg@mail.gmail.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 151125-1, 25/11/2015), Outbound message
X-Antivirus-Status: Clean

Hi,

just in case off, gnome as a set of function g_ascii_...
(see 
https://developer.gnome.org/glib/2.28/glib-String-Utility-Functions.html#g-ascii-strcasecmp)

>
> I'm also waiting for feedback about the naming convention, I'd like to get
> this into APR yesterday and start building on it, but it's hard to 
> name our
> generic-posix tolower/toupper until we agree on the naming scheme :)
>
>


From dev-return-84769-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 21:55:22 2015
Return-Path: <dev-return-84769-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8696B180D6
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 21:55:22 +0000 (UTC)
Received: (qmail 30680 invoked by uid 500); 25 Nov 2015 21:55:17 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 30608 invoked by uid 500); 25 Nov 2015 21:55:17 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 30598 invoked by uid 99); 25 Nov 2015 21:55:17 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 21:55:17 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 8C44FC12A0
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 21:55:16 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.999
X-Spam-Level: **
X-Spam-Status: No, score=2.999 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H2=-0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id YywI7t9B_jAp for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 21:55:10 +0000 (UTC)
Received: from mail-io0-f179.google.com (mail-io0-f179.google.com [209.85.223.179])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 8729F428E7
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 21:55:10 +0000 (UTC)
Received: by ioc74 with SMTP id 74so66940608ioc.2
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 13:55:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=b4+MC/63uCWpGboocSbGLM8q7UlQ3h+7eCIj3xPTS0Y=;
        b=FsdWw1tB4rjyNyOICnUCirWF70g6+Y8LqGZgHk3v+aH2f/4iQQ6mh7BFuFrIeH7/Pu
         ftSGHlZwRANTjpoufBp2Lgg1T1B948YkGeMzS52t+kYtaohj89TnuxzTTauWqDg+0d7U
         gAyaNGkkruRisJcqwi25PH886shtBDUhDYGkdfkSBhdnjfJa/AZMDv5t+5TZknQ1sTiV
         /ttX8qVbJX5gNNrLrZWpcK3sv6/QZv995u+/sD6ai/UATWnwl8ihlwey0+XtlWTv15BC
         5hYWikspkcYlkNbpujIc55O1vUfSp556O/Zogj+KkCLGcSnA3WJkW7tLKhSNSgyZN2DZ
         FJ2A==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=b4+MC/63uCWpGboocSbGLM8q7UlQ3h+7eCIj3xPTS0Y=;
        b=KZdMQr+KqNoGwn2zW0m7QF69L0xN75PS/o6aOol6fUVnSK6uqazHs2VRk2WUx6/z+W
         nPWH+X1yTE9hF15A7vF8rCT33Q1GrqNub3Io344rjud1/jXAFcZnnOAU0tGdwaNJLIQ9
         6CsRsrLAFMdMFViF4oC89Ne0eLc2x2mf65T4FnhEUIiTapnJHdZ59kERdfBqRlQm5nkN
         nyoLmXOULMGclXKqI+dpbEjcDe/Mm/NQDRrMrzPPT9W8UGdfq0PUeKef/u7kz/t0lxzK
         sjKvU2JlMa4742AQDuWxN6tIKNn+S14mzJv122OCFxgpQvEC14SRpJed/oGayLCAE9vb
         Tdvg==
X-Gm-Message-State: ALoCoQnHOmokKMXUHDurfim1QMkNsS+0CQVe/MVt9e9fi91OhzoKw0AyvSs+T1RDWP7izClQfiW9
MIME-Version: 1.0
X-Received: by 10.107.34.199 with SMTP id i190mr3272819ioi.150.1448488504114;
 Wed, 25 Nov 2015 13:55:04 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Wed, 25 Nov 2015 13:55:04 -0800 (PST)
In-Reply-To: <56562DAF.2080702@wanadoo.fr>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
	<9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com>
	<CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com>
	<34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com>
	<CACsi251DTcmki1__9OeBrYrnn_dyrdoo2rL3g6ZspXPx+_nNyg@mail.gmail.com>
	<56562DAF.2080702@wanadoo.fr>
Date: Wed, 25 Nov 2015 15:55:04 -0600
Message-ID: <CACsi251YLaMUZ1ZGnZBp9brhNNMt6_Bj5vyAeN25rw8-Zq73kA@mail.gmail.com>
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1140d944c00d710525648251

--001a1140d944c00d710525648251
Content-Type: text/plain; charset=UTF-8

On Wed, Nov 25, 2015 at 3:52 PM, Christophe JAILLET <
christophe.jaillet@wanadoo.fr> wrote:

> Hi,
>
> just in case off, gnome as a set of function g_ascii_...
> (see
> https://developer.gnome.org/glib/2.28/glib-String-Utility-Functions.html#g-ascii-strcasecmp
> )


Interesting, does anyone know offhand whether these perform the expected
or the stated behavior under EBCDIC environments?

--001a1140d944c00d710525648251
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On W=
ed, Nov 25, 2015 at 3:52 PM, Christophe JAILLET <span dir=3D"ltr">&lt;<a hr=
ef=3D"mailto:christophe.jaillet@wanadoo.fr" target=3D"_blank">christophe.ja=
illet@wanadoo.fr</a>&gt;</span> wrote:<br><blockquote class=3D"gmail_quote"=
 style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">Hi=
,<br>
<br>
just in case off, gnome as a set of function g_ascii_...<br>
(see <a href=3D"https://developer.gnome.org/glib/2.28/glib-String-Utility-F=
unctions.html#g-ascii-strcasecmp" rel=3D"noreferrer" target=3D"_blank">http=
s://developer.gnome.org/glib/2.28/glib-String-Utility-Functions.html#g-asci=
i-strcasecmp</a>)</blockquote><div><br></div><div>Interesting, does anyone =
know offhand whether these perform the expected</div><div>or the stated beh=
avior under EBCDIC environments?=C2=A0</div></div><br></div></div>

--001a1140d944c00d710525648251--

From dev-return-84770-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 22:08:03 2015
Return-Path: <dev-return-84770-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 92A85181CF
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 22:08:03 +0000 (UTC)
Received: (qmail 76720 invoked by uid 500); 25 Nov 2015 22:08:03 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 76642 invoked by uid 500); 25 Nov 2015 22:08:03 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 76630 invoked by uid 99); 25 Nov 2015 22:08:03 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 22:08:03 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 85A64C42EE
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 22:08:02 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.999
X-Spam-Level:
X-Spam-Status: No, score=0.999 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, RCVD_IN_MSPIKE_H2=-0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id ESJRfS5VKfUV for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 22:07:49 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp01.smtpout.orange.fr [80.12.242.123])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id C969620CF5
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 22:07:48 +0000 (UTC)
Received: from [127.0.0.1] ([92.140.231.6])
	by mwinf5d02 with ME
	id ly7m1r00K08wHE403y7nq1; Wed, 25 Nov 2015 23:07:47 +0100
X-ME-Helo: [127.0.0.1]
X-ME-Date: Wed, 25 Nov 2015 23:07:47 +0100
X-ME-IP: 92.140.231.6
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
To: dev@httpd.apache.org
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
 <9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com>
 <CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com>
 <34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com>
 <CACsi251DTcmki1__9OeBrYrnn_dyrdoo2rL3g6ZspXPx+_nNyg@mail.gmail.com>
 <A98A2101-77B6-4A52-BF57-5F71348CA167@jaguNET.com>
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Message-ID: <5656312F.8020407@wanadoo.fr>
Date: Wed, 25 Nov 2015 23:07:43 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.3.0
MIME-Version: 1.0
In-Reply-To: <A98A2101-77B6-4A52-BF57-5F71348CA167@jaguNET.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 151125-1, 25/11/2015), Outbound message
X-Antivirus-Status: Clean

Le 25/11/2015 22:02, Jim Jagielski a crit :
> In general, strcmp() is not implemented via strcmp.c
> (although if you do a source code search for strcmp, that's
> what you'll get). Most of the time it's implemented in
> assembly (strcmp.s) or simply leverages memcmp() where
> you aren't doing a byte by byte comparison but are doing
> a native memory word (32 or 64bit) comparison. This
> makes them super fast.
>
> Once we need to worry about case insensitivity, then
> we see a whole gamut of implementations; some use
> a mapped array as I did; some go char by char and call
> tolower() on each one; some do other things such as
> testing if isupper() before calling tolower() if needed.
> The word-based optimizations seem less viable, as seen
> in test results that I ran and Yann also verified (afaict)
>
> In my tests, my impl was faster on OSX and CentOS5 and 6.
> It's a very common function we use and with my test results
> it seemed to make sense to provide our own impl, esp if
> we decided that what we were really concerned about was
> comparing for equality, and so would be able to avoid
> the !strcasecmp logic leaping.
>
> If we decide that all this was for moot, that's fine.
> That's what these types of investigations and discussions
> are for.
>

Personally, my testing shows that faster/slower is not that self 
evident. On my machine, it depends of the length of the string.
With shorter strings (less than ~10 chars) Yann's proposal seems to be 
the best with the test program. What happens if the const char table is 
not in L1 cache? We still have the same speedup?
When strings are longer, std strncasecmp always win.

Short strings are our use case, so, I would say, why not using this 
implementation, after all?


My personal reticence would be:
    - it adds complexity to the code (one more function that looks 
really similar to existing ones)
    - the speed increase is 'only' 15% if I remember well latest numbers 
given by Yann
    - the speed increase is potentially platform/compiler/C library 
dependent.
    - it does not suppress (IMO) the 'switch' for going even faster to 
the right test
    - many off the tests against ASCII strings are hidden in apr 
functions (apr_table_get...)
Do we have an idea of the overall time spent in these str[n]casecmp 
function when processing a request?  15% of that time should be, IMO, 
quite low.
Does it worse the added complexity? For me, the answer is: not sure.

CJ

From dev-return-84771-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 22:10:35 2015
Return-Path: <dev-return-84771-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 91615181EF
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 22:10:35 +0000 (UTC)
Received: (qmail 80759 invoked by uid 500); 25 Nov 2015 22:10:35 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 80669 invoked by uid 500); 25 Nov 2015 22:10:35 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 80659 invoked by uid 99); 25 Nov 2015 22:10:35 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 22:10:35 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 9F30B1A28B9
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 22:10:34 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.9
X-Spam-Level: **
X-Spam-Status: No, score=2.9 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id x-iBBjQRu1Kj for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 22:10:27 +0000 (UTC)
Received: from mail-wm0-f42.google.com (mail-wm0-f42.google.com [74.125.82.42])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 3B15320C8B
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 22:10:27 +0000 (UTC)
Received: by wmuu63 with SMTP id u63so155338955wmu.0
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 14:10:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:thread-index:content-language;
        bh=lmbc9B6pUYXhB1QMlk4o3zeaEYT73rmhJw4J9C/hzM4=;
        b=GQuF21f4J55HtBJM8dB3bfNpJYLTCP1CvOj/frvUx+pVGnHbTC+nu3AbSgW1VT7iAC
         KThqwsIBs/E4i9bwT+4MCFLqX3erpTJLibk9HXSCN5c7CrarxBunkwkHh9diONFnSzj7
         hKHG99p0fgwSJy6UC2FsCui06hPgaPuKsEGtk=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:thread-index:content-language;
        bh=lmbc9B6pUYXhB1QMlk4o3zeaEYT73rmhJw4J9C/hzM4=;
        b=Nih4VVP1+r1x8S85+FOTZVgV/M+OhtnHZp3cd4HvAVDFl6zTX6nbS28rargphYH0C3
         3B0kI//fyPt9dYlmEktiO/5am47y7+DulCKPnv+e0q18MaeSqmthab9B5ZD6VHxqXgur
         Ik1ptV7op3Gz0j9+1AY7YrTFK+QeTqpge6yXzIrOMmYxncGm1Cc0TGuqE4gn33SxgWOp
         1/68sbqeYoqN60qvsLfzc4Qk2k/J4bB664jM+vIgjWv8p52kRG82aHWE3zbSj8imsvOr
         sPAQSAZGumlKMf9GJ145VKgCyJ7K1ZYgOUePNlkI3A2r7VE2LYkA/HfhFQqp9qbsFt/A
         fXyQ==
X-Gm-Message-State: ALoCoQktmrsAVKnwdVQ49BmW1gmCqHuf72pcz+4C4qlt6nTIPt/UBBBk+EICUC28iyS8pGHu+3X9
X-Received: by 10.194.20.164 with SMTP id o4mr28616527wje.105.1448489426915;
        Wed, 25 Nov 2015 14:10:26 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id a76sm5367480wma.19.2015.11.25.14.10.25
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 25 Nov 2015 14:10:26 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>	<9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com>	<CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com>	<34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com>	<CACsi251DTcmki1__9OeBrYrnn_dyrdoo2rL3g6ZspXPx+_nNyg@mail.gmail.com>	<56562DAF.2080702@wanadoo.fr> <CACsi251YLaMUZ1ZGnZBp9brhNNMt6_Bj5vyAeN25rw8-Zq73kA@mail.gmail.com>
In-Reply-To: <CACsi251YLaMUZ1ZGnZBp9brhNNMt6_Bj5vyAeN25rw8-Zq73kA@mail.gmail.com>
Subject: RE: apr_token_* conclusions (was: Better casecmpstr[n]?)
Date: Wed, 25 Nov 2015 23:10:17 +0100
Message-ID: <00ce01d127ce$121901b0$364b0510$@qqmail.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00CF_01D127D6.73DE5410"
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AQIzkocCaIUBpd/vzV+Jc1ei5TFWWwEQvl9wAQhATuYCN2PjUwKAZTIdAk+OhMACKMXyJp2OLcxQ
Content-Language: nl

This is a multipart message in MIME format.

------=_NextPart_000_00CF_01D127D6.73DE5410
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable

We have a set of similar comparison functions in Subversion. I=E2=80=99m =
pretty sure we already had these in the time we still had ebcdic support =
on trunk.

(We removed that support years ago, but the code should still live on a =
branch)

=20

Bert

=20

From: William A Rowe Jr [mailto:wrowe@rowe-clan.net]=20
Sent: woensdag 25 november 2015 22:55
To: httpd <dev@httpd.apache.org>
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)

=20

On Wed, Nov 25, 2015 at 3:52 PM, Christophe JAILLET =
<christophe.jaillet@wanadoo.fr <mailto:christophe.jaillet@wanadoo.fr> > =
wrote:

Hi,

just in case off, gnome as a set of function g_ascii_...
(see =
https://developer.gnome.org/glib/2.28/glib-String-Utility-Functions.html#=
g-ascii-strcasecmp)

=20

Interesting, does anyone know offhand whether these perform the expected

or the stated behavior under EBCDIC environments?=20

=20


------=_NextPart_000_00CF_01D127D6.73DE5410
Content-Type: text/html;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; charset=3Dutf-8"><meta =
name=3DGenerator content=3D"Microsoft Word 15 (filtered =
medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
p.msonormal0, li.msonormal0, div.msonormal0
	{mso-style-name:msonormal;
	mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
span.EmailStyle18
	{mso-style-type:personal-reply;
	font-family:"Calibri",sans-serif;
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri",sans-serif;
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:70.85pt 70.85pt 70.85pt 70.85pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DNL link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal><span =
lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>We have a set of similar comparison =
functions in Subversion. I=E2=80=99m pretty sure we already had these in =
the time we still had ebcdic support on trunk.<o:p></o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>(We removed that support years ago, but the =
code should still live on a branch)<o:p></o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal style=3D'text-indent:5.25pt'><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>Bert<o:p></o:p></span></p><p =
class=3DMsoNormal><a name=3D"_MailEndCompose"><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></a></p><div =
style=3D'border:none;border-left:solid blue 1.5pt;padding:0cm 0cm 0cm =
4.0pt'><div><div style=3D'border:none;border-top:solid #E1E1E1 =
1.0pt;padding:3.0pt 0cm 0cm 0cm'><p class=3DMsoNormal><b><span =
lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif'>From:</span><=
/b><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif'> William A =
Rowe Jr [mailto:wrowe@rowe-clan.net] <br><b>Sent:</b> woensdag 25 =
november 2015 22:55<br><b>To:</b> httpd =
&lt;dev@httpd.apache.org&gt;<br><b>Subject:</b> Re: apr_token_* =
conclusions (was: Better =
casecmpstr[n]?)<o:p></o:p></span></p></div></div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><div><div><div><p =
class=3DMsoNormal>On Wed, Nov 25, 2015 at 3:52 PM, Christophe JAILLET =
&lt;<a href=3D"mailto:christophe.jaillet@wanadoo.fr" =
target=3D"_blank">christophe.jaillet@wanadoo.fr</a>&gt; =
wrote:<o:p></o:p></p><blockquote style=3D'border:none;border-left:solid =
#CCCCCC 1.0pt;padding:0cm 0cm 0cm =
6.0pt;margin-left:4.8pt;margin-right:0cm'><p =
class=3DMsoNormal>Hi,<br><br>just in case off, gnome as a set of =
function g_ascii_...<br>(see <a =
href=3D"https://developer.gnome.org/glib/2.28/glib-String-Utility-Functio=
ns.html#g-ascii-strcasecmp" =
target=3D"_blank">https://developer.gnome.org/glib/2.28/glib-String-Utili=
ty-Functions.html#g-ascii-strcasecmp</a>)<o:p></o:p></p></blockquote><div=
><p class=3DMsoNormal><o:p>&nbsp;</o:p></p></div><div><p =
class=3DMsoNormal>Interesting, does anyone know offhand whether these =
perform the expected<o:p></o:p></p></div><div><p class=3DMsoNormal>or =
the stated behavior under EBCDIC =
environments?&nbsp;<o:p></o:p></p></div></div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div></div></div></div></body></h=
tml>
------=_NextPart_000_00CF_01D127D6.73DE5410--


From dev-return-84772-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 22:19:09 2015
Return-Path: <dev-return-84772-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EA3491825F
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 22:19:08 +0000 (UTC)
Received: (qmail 99791 invoked by uid 500); 25 Nov 2015 22:19:08 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 99728 invoked by uid 500); 25 Nov 2015 22:19:08 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 99715 invoked by uid 99); 25 Nov 2015 22:19:08 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 22:19:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id CFDC4180A95
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 22:19:07 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 4
X-Spam-Level: ****
X-Spam-Status: No, score=4 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, KAM_LAZY_DOMAIN_SECURITY=1] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id YjJ9Vp2r4dI8 for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 22:19:06 +0000 (UTC)
Received: from vms173011pub.verizon.net (vms173011pub.verizon.net [206.46.173.11])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 08A642059D
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 22:19:05 +0000 (UTC)
MIME-version: 1.0
Content-type: multipart/alternative;
 boundary="Boundary_(ID_W7hY65q0kBVXFtfJi970zA)"
Received: from [192.168.1.8] ([100.1.236.52]) by vms173011.mailsrvcs.net
 (Oracle Communications Messaging Server 7.0.5.32.0 64bit (built Jul 16 2014))
 with ESMTPA id <0NYE00E6I5ZF4960@vms173011.mailsrvcs.net> for
 dev@httpd.apache.org; Wed, 25 Nov 2015 16:18:56 -0600 (CST)
X-CMAE-Score: 0
X-CMAE-Analysis: v=2.1 cv=WpDWSorv c=1 sm=1 tr=0	a=UorMnhrCY2jH/mPejITChw==:117
 a=LaogzpLLAAAA:8 a=oR5dmqMzAAAA:8	a=qtqOOiqGOCEA:10 a=r77TgQKjGQsHNAKrUKIA:9
 a=bP3u6oDlIFwil571jdMA:9	a=QEXdDO2ut3YA:10 a=pGLkceISAAAA:8
 a=rL1Oyk_Lb8B0Zs4egZgA:9	a=SYm4HY5rYk6lufkZ:21 a=_W_S_7VecoQA:10
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
To: dev@httpd.apache.org
References:
 <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
 <5655F722.9020608@aldan.algebra.com>
 <CACsi253c5d4b8XOOdERUqij=WR06mEnoBr9Dk808wfdfv00CcQ@mail.gmail.com>
 <5656079E.8090705@aldan.algebra.com>
From: "Mikhail T." <mi+thun@aldan.algebra.com>
X-Enigmail-Draft-Status: N1110
Message-id: <565633CB.6060305@aldan.algebra.com>
Date: Wed, 25 Nov 2015 17:18:51 -0500
User-Agent: Mozilla/5.0 (X11; FreeBSD amd64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
In-reply-to: <5656079E.8090705@aldan.algebra.com>

This is a multi-part message in MIME format.

--Boundary_(ID_W7hY65q0kBVXFtfJi970zA)
Content-type: text/plain; charset=utf-8
Content-transfer-encoding: 8BIT

On 25.11.2015 14:10, Mikhail T. wrote:
>>
>> Two variables, LC_CTYPE and LC_COLLATE control this text processing
>> behavior.  The above is the correct lower case transliteration for
>> Turkish.  In German, the upper case correspondence of sharp-S  is
>> 'SS', but multi-char translation is not provided by the simple
>> tolower/toupper functions.
>>
> So, the concern is, some hypothetical header, such as X-ASSIGN-TO may,
> after going through the locale-aware strtolower() unexpectedly become
> x-aign-to?
I just tested the above on both FreeBSD and Linux, and the results are
encouraging:

    % echo STRASSE | env LANG=de_DE.ISO8859 tr '[[:upper:]]' '[[:lower:]]'
    strasse

Thus, I contend, using C-library will not cause invalid results, and the
only reason to have Apache's own implementation is performance, but not
correctness.

    -mi


--Boundary_(ID_W7hY65q0kBVXFtfJi970zA)
Content-type: text/html; charset=utf-8
Content-transfer-encoding: 8BIT

<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  </head>
  <body bgcolor="#FFFFFF" text="#000000">
    <div class="moz-cite-prefix">On 25.11.2015 14:10, Mikhail T. wrote:<br>
    </div>
    <blockquote cite="mid:5656079E.8090705@aldan.algebra.com"
      type="cite">
      <blockquote
cite="mid:CACsi253c5d4b8XOOdERUqij=WR06mEnoBr9Dk808wfdfv00CcQ@mail.gmail.com"
        type="cite">
        <p dir="ltr">Two variables, LC_CTYPE and LC_COLLATE control this
          text processing behavior. The above is the correct lower case
          transliteration for Turkish. In German, the upper case
          correspondence of sharp-S  is 'SS', but multi-char
          translation is not provided by the simple tolower/toupper
          functions.</p>
      </blockquote>
      So, the concern is, some hypothetical header, such as <tt>X-ASSIGN-TO</tt>
      may, after going through the locale-aware strtolower()
      unexpectedly become <tt>x-aign-to</tt>?</blockquote>
    I just tested the above on both FreeBSD and Linux, and the results
    are encouraging:<br>
    <blockquote><tt>% echo STRASSE | env LANG=de_DE.ISO8859 tr
        '[[:upper:]]' '[[:lower:]]'</tt><tt><br>
      </tt><tt>strasse</tt><br>
    </blockquote>
    Thus, I contend, using C-library will not cause invalid results, and
    the only reason to have Apache's own implementation is performance,
    but not correctness.<br>
    <blockquote>-mi<br>
    </blockquote>
  </body>
</html>

--Boundary_(ID_W7hY65q0kBVXFtfJi970zA)--

From dev-return-84773-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 23:21:50 2015
Return-Path: <dev-return-84773-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2192618577
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 23:21:50 +0000 (UTC)
Received: (qmail 56205 invoked by uid 500); 25 Nov 2015 23:21:49 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 56135 invoked by uid 500); 25 Nov 2015 23:21:49 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 56125 invoked by uid 99); 25 Nov 2015 23:21:49 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 23:21:49 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 3F39EC0845
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 23:21:49 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.889
X-Spam-Level: **
X-Spam-Status: No, score=2.889 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01,
	SPF_PASS=-0.001, T_KAM_HTML_FONT_INVALID=0.01] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id F-xnxfqB_X43 for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 23:21:47 +0000 (UTC)
Received: from mail-wm0-f48.google.com (mail-wm0-f48.google.com [74.125.82.48])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 2F46F20C8B
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 23:21:47 +0000 (UTC)
Received: by wmww144 with SMTP id w144so1370009wmw.0
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 15:21:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:thread-index:content-language;
        bh=OvmB+vnzXjrDJc3OYIOgXv9h4unzv3aHhOQ8OAgWLoo=;
        b=Tp/YAJxnpeLSXKdfgzVcszdzThqAEdn/oZTteIMuX3t1r4HqsWbHmo3UY7gYlpveuq
         7lxrMAMe6fws2jJkLVPype4NbdCSk9/NoKmT27dbPIH79BVdqrHv/pZWFlcdpQeIG5xO
         K5uxmiEyjPYsbpGIzjhWj9lwffzs+iY4HoojQ=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:thread-index:content-language;
        bh=OvmB+vnzXjrDJc3OYIOgXv9h4unzv3aHhOQ8OAgWLoo=;
        b=eoXAiMtazCtn6PcXrKPCGrEELhQrr5RAPUv24kwxKPa+wj2Q3T4v5zjSMk+GeakNv3
         UuKjfbV6Z0YsRlszy+7rrG03GqNcugsMe4V5npKH4VvaCYLU8Jpl7cM4rEOKIaO9+OX3
         RQMnrYPc3d/f1h1STIT6az0sRuCpJiqy436NcvkEtXIAQV6QZssu6qonGhptNNJ/WSfR
         W6rTthNBqBZ9RHBHQRNaMLr7qgEdupsddLEg+bs8L6E2qYCQ0G4LA0k0QBX2V9Ay17Hj
         dL2/nO5iyLQ0MrOapwyyHrT0UVfqhyKvm4ik6wj9N0ztvv9MCj3PtP2/XOB5qELD3RDl
         iuFA==
X-Gm-Message-State: ALoCoQlyD5hl7Yu/zzJRiSfspSx9ZOEypvnnwVPkTzdT2n08wwvkpwxqakSO6wC2OBudg08qR4q8
X-Received: by 10.194.84.42 with SMTP id v10mr46599549wjy.116.1448493706913;
        Wed, 25 Nov 2015 15:21:46 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id q9sm12390816wjo.9.2015.11.25.15.21.46
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 25 Nov 2015 15:21:46 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com> <5655F722.9020608@aldan.algebra.com> <CACsi253c5d4b8XOOdERUqij=WR06mEnoBr9Dk808wfdfv00CcQ@mail.gmail.com> <5656079E.8090705@aldan.algebra.com> <565633CB.6060305@aldan.algebra.com>
In-Reply-To: <565633CB.6060305@aldan.algebra.com>
Subject: RE: apr_token_* conclusions (was: Better casecmpstr[n]?)
Date: Thu, 26 Nov 2015 00:21:37 +0100
Message-ID: <011701d127d8$094cc3a0$1be64ae0$@qqmail.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0118_01D127E0.6B11EEF0"
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AQIzkocCaIUBpd/vzV+Jc1ei5TFWWwF1Q8kqApUZiuMA6DOkTwIim5Qdna/g7rA=
Content-Language: nl

This is a multipart message in MIME format.

------=_NextPart_000_0118_01D127E0.6B11EEF0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable

The example was the other way around. Changing SS to =C3=9F is not a =
valid transform, but the other way is. There are also transforms on the =
combined AE characters, etc.

=20

That Turkish =E2=80=98I=E2=80=99 problem is the only case I know of =
where the collation actually changes behavior within the usual western =
alphabet of ASCII characters.

=20

                Bert

=20

=20

From: Mikhail T. [mailto:mi+thun@aldan.algebra.com]=20
Sent: woensdag 25 november 2015 23:19
To: dev@httpd.apache.org
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)

=20

On 25.11.2015 14:10, Mikhail T. wrote:

Two variables, LC_CTYPE and LC_COLLATE control this text processing =
behavior.  The above is the correct lower case transliteration for =
Turkish.  In German, the upper case correspondence of sharp-S =C3=9F is =
'SS', but multi-char translation is not provided by the simple =
tolower/toupper functions.

So, the concern is, some hypothetical header, such as X-ASSIGN-TO may, =
after going through the locale-aware strtolower() unexpectedly become =
x-a=C3=9Fign-to?

I just tested the above on both FreeBSD and Linux, and the results are =
encouraging:

% echo STRASSE | env LANG=3Dde_DE.ISO8859 tr '[[:upper:]]' '[[:lower:]]'
strasse

Thus, I contend, using C-library will not cause invalid results, and the =
only reason to have Apache's own implementation is performance, but not =
correctness.

-mi


------=_NextPart_000_0118_01D127E0.6B11EEF0
Content-Type: text/html;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; charset=3Dutf-8"><meta =
name=3DGenerator content=3D"Microsoft Word 15 (filtered =
medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;
	color:black;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:#954F72;
	text-decoration:underline;}
p
	{mso-style-priority:99;
	mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;
	color:black;}
tt
	{mso-style-priority:99;
	font-family:"Courier New";}
p.msonormal0, li.msonormal0, div.msonormal0
	{mso-style-name:msonormal;
	mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;
	color:black;}
span.EmailStyle20
	{mso-style-type:personal-reply;
	font-family:"Calibri",sans-serif;
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-size:10.0pt;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:70.85pt 70.85pt 70.85pt 70.85pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body bgcolor=3Dwhite lang=3DNL =
link=3D"#0563C1" vlink=3D"#954F72"><div class=3DWordSection1><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>The example was the other way around. =
Changing SS to =C3=9F is not a valid transform, but the other way is. =
There are also transforms on the combined AE characters, =
etc.<o:p></o:p></span></p><p class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>That Turkish =E2=80=98I=E2=80=99 problem is =
the only case I know of where the collation actually changes behavior =
within the usual western alphabet of ASCII =
characters.<o:p></o:p></span></p><p class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0 =
Bert<o:p></o:p></span></p><p class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><a name=3D"_MailEndCompose"><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></a></p><div =
style=3D'border:none;border-left:solid blue 1.5pt;padding:0cm 0cm 0cm =
4.0pt'><div><div style=3D'border:none;border-top:solid #E1E1E1 =
1.0pt;padding:3.0pt 0cm 0cm 0cm'><p class=3DMsoNormal><b><span =
lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:windowte=
xt'>From:</span></b><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:windowte=
xt'> Mikhail T. [mailto:mi+thun@aldan.algebra.com] <br><b>Sent:</b> =
woensdag 25 november 2015 23:19<br><b>To:</b> =
dev@httpd.apache.org<br><b>Subject:</b> Re: apr_token_* conclusions =
(was: Better casecmpstr[n]?)<o:p></o:p></span></p></div></div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><div><p class=3DMsoNormal>On =
25.11.2015 14:10, Mikhail T. wrote:<o:p></o:p></p></div><blockquote =
style=3D'margin-top:5.0pt;margin-bottom:5.0pt'><blockquote =
style=3D'margin-top:5.0pt;margin-bottom:5.0pt'><p>Two variables, =
LC_CTYPE and LC_COLLATE control this text processing behavior.&nbsp; The =
above is the correct lower case transliteration for Turkish.&nbsp; In =
German, the upper case correspondence of sharp-S =C3=9F is 'SS', but =
multi-char translation is not provided by the simple tolower/toupper =
functions.<o:p></o:p></p></blockquote><p class=3DMsoNormal>So, the =
concern is, some hypothetical header, such as <tt><span =
style=3D'font-size:10.0pt'>X-ASSIGN-TO</span></tt> may, after going =
through the locale-aware strtolower() unexpectedly become <tt><span =
style=3D'font-size:10.0pt'>x-a=C3=9Fign-to</span></tt>?<o:p></o:p></p></b=
lockquote><p class=3DMsoNormal>I just tested the above on both FreeBSD =
and Linux, and the results are encouraging:<o:p></o:p></p><blockquote =
style=3D'margin-top:5.0pt;margin-bottom:5.0pt'><p =
class=3DMsoNormal><tt><span style=3D'font-size:10.0pt'>% echo STRASSE | =
env LANG=3Dde_DE.ISO8859 tr '[[:upper:]]' '[[:lower:]]'</span></tt><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><br><tt>strasse</tt></span><o:p></o:p></p></blockquote><p =
class=3DMsoNormal>Thus, I contend, using C-library will not cause =
invalid results, and the only reason to have Apache's own implementation =
is performance, but not correctness.<o:p></o:p></p><blockquote =
style=3D'margin-top:5.0pt;margin-bottom:5.0pt'><p =
class=3DMsoNormal>-mi<o:p></o:p></p></blockquote></div></div></body></htm=
l>
------=_NextPart_000_0118_01D127E0.6B11EEF0--


From dev-return-84774-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 23:28:15 2015
Return-Path: <dev-return-84774-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8BA82185BF
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 23:28:15 +0000 (UTC)
Received: (qmail 67137 invoked by uid 500); 25 Nov 2015 23:28:15 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 67061 invoked by uid 500); 25 Nov 2015 23:28:15 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 67051 invoked by uid 99); 25 Nov 2015 23:28:14 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 23:28:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 80A85C0845
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 23:28:14 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.89
X-Spam-Level: **
X-Spam-Status: No, score=2.89 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01,
	SPF_PASS=-0.001, T_KAM_HTML_FONT_INVALID=0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id LhL6etNzMJr5 for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 23:28:06 +0000 (UTC)
Received: from mail-wm0-f48.google.com (mail-wm0-f48.google.com [74.125.82.48])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id BD3012059D
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 23:28:05 +0000 (UTC)
Received: by wmuu63 with SMTP id u63so1388622wmu.0
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 15:28:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:thread-index:content-language;
        bh=glw8xmUXZztUmTAZlTaKvJxKKj77nNDQoRmyQrXrjFs=;
        b=CwkxYXlkNHDTEwsWTgNm/INmze0HeIx2r47M7CGcguC3jLGXXrcMovnoRtMjsDpBYp
         saXdmr34nK4b3q9plYY4FeRiRtA416wTAHotQrM4xn8sjaC2jLJjh2vvaapCcxDIbVUB
         Ha+a8ZMtp9RJ3R+AMLuDAo5+XxLi6vYCDwbHw=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:thread-index:content-language;
        bh=glw8xmUXZztUmTAZlTaKvJxKKj77nNDQoRmyQrXrjFs=;
        b=Ah5ME/CpWUviJiam1Fj9X8slQ0A6ZxYAtZ4uPMUCVdVlhmgXntPxaypumcBHwqGSic
         Cvs1GUADdeR6q8gWwDl8rGYyr/1f2eqtxfb86gDdRzsDB/a5vKh5cXpRRH0mTx8md0mp
         KnZUQl4egrUnPW4oz3Uo3JjfqWKjiz8c2kE/CIUlez5F9mlQh2VFOicU9gI9DbJiB+hU
         wYm222KYKToLqY1M6exZuWn3yWW3BwkRLPKDsEqN1Wu1zSrEX+I+M220hV3mwTtzZzdF
         i3lGMG4RyC1bToUmLKGwyuZLnjPckJ1dKCaf7gl9Rl6bu7JqsNOXTQ4fgMSbKDhtA+ti
         OgHQ==
X-Gm-Message-State: ALoCoQkVbXNgjvBAtbv+92qGARLYepSGswa02dhFOfBsnFNgHnSK1KQSwH/Uw6MyaeUI0vvNiFEq
X-Received: by 10.28.217.145 with SMTP id q139mr207570wmg.79.1448494085477;
        Wed, 25 Nov 2015 15:28:05 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id z10sm5612172wmg.4.2015.11.25.15.28.04
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 25 Nov 2015 15:28:05 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com> <5655F722.9020608@aldan.algebra.com> <CACsi253c5d4b8XOOdERUqij=WR06mEnoBr9Dk808wfdfv00CcQ@mail.gmail.com> <5656079E.8090705@aldan.algebra.com> <565633CB.6060305@aldan.algebra.com> <011701d127d8$094cc3a0$1be64ae0$@qqmail.nl>
In-Reply-To: <011701d127d8$094cc3a0$1be64ae0$@qqmail.nl>
Subject: RE: apr_token_* conclusions (was: Better casecmpstr[n]?)
Date: Thu, 26 Nov 2015 00:27:56 +0100
Message-ID: <012001d127d8$eaf99760$c0ecc620$@qqmail.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0121_01D127E1.4CBF10D0"
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AQIzkocCaIUBpd/vzV+Jc1ei5TFWWwF1Q8kqApUZiuMA6DOkTwIim5QdAcPrAXidocOgEA==
Content-Language: nl

This is a multipart message in MIME format.

------=_NextPart_000_0121_01D127E1.4CBF10D0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable

See http://www.siao2.com/2004/12/03/274288.aspx

And http://www.siao2.com/2013/04/04/10407543.aspx

For some background and related bugs in several products.

=20

I hope this blog will stay alive. (The author passed away recently)

=20

                Bert

=20

From: Bert Huijben [mailto:bert@qqmail.nl]=20
Sent: donderdag 26 november 2015 00:22
To: dev@httpd.apache.org
Subject: RE: apr_token_* conclusions (was: Better casecmpstr[n]?)

=20

The example was the other way around. Changing SS to =C3=9F is not a =
valid transform, but the other way is. There are also transforms on the =
combined AE characters, etc.

=20

That Turkish =E2=80=98I=E2=80=99 problem is the only case I know of =
where the collation actually changes behavior within the usual western =
alphabet of ASCII characters.

=20

                Bert

=20

=20

From: Mikhail T. [mailto:mi+thun@aldan.algebra.com]=20
Sent: woensdag 25 november 2015 23:19
To: dev@httpd.apache.org <mailto:dev@httpd.apache.org>=20
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)

=20

On 25.11.2015 14:10, Mikhail T. wrote:

Two variables, LC_CTYPE and LC_COLLATE control this text processing =
behavior.  The above is the correct lower case transliteration for =
Turkish.  In German, the upper case correspondence of sharp-S =C3=9F is =
'SS', but multi-char translation is not provided by the simple =
tolower/toupper functions.

So, the concern is, some hypothetical header, such as X-ASSIGN-TO may, =
after going through the locale-aware strtolower() unexpectedly become =
x-a=C3=9Fign-to?

I just tested the above on both FreeBSD and Linux, and the results are =
encouraging:

% echo STRASSE | env LANG=3Dde_DE.ISO8859 tr '[[:upper:]]' '[[:lower:]]'
strasse

Thus, I contend, using C-library will not cause invalid results, and the =
only reason to have Apache's own implementation is performance, but not =
correctness.

-mi


------=_NextPart_000_0121_01D127E1.4CBF10D0
Content-Type: text/html;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; charset=3Dutf-8"><meta =
name=3DGenerator content=3D"Microsoft Word 15 (filtered =
medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;
	color:black;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:#954F72;
	text-decoration:underline;}
p
	{mso-style-priority:99;
	mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;
	color:black;}
tt
	{mso-style-priority:99;
	font-family:"Courier New";}
p.msonormal0, li.msonormal0, div.msonormal0
	{mso-style-name:msonormal;
	mso-style-priority:99;
	mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;
	color:black;}
span.EmailStyle20
	{mso-style-type:personal;
	font-family:"Calibri",sans-serif;
	color:#1F497D;}
span.EmailStyle21
	{mso-style-type:personal-reply;
	font-family:"Calibri",sans-serif;
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-size:10.0pt;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:70.85pt 70.85pt 70.85pt 70.85pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body bgcolor=3Dwhite lang=3DNL =
link=3D"#0563C1" vlink=3D"#954F72"><div class=3DWordSection1><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>See <a =
href=3D"http://www.siao2.com/2004/12/03/274288.aspx">http://www.siao2.com=
/2004/12/03/274288.aspx</a><o:p></o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>And <a =
href=3D"http://www.siao2.com/2013/04/04/10407543.aspx">http://www.siao2.c=
om/2013/04/04/10407543.aspx</a><o:p></o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>For some background and related bugs in =
several products.<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>I hope this blog will stay alive. (The =
author passed away recently)<o:p></o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0 =
Bert<o:p></o:p></span></p><p class=3DMsoNormal><a =
name=3D"_MailEndCompose"><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></a></p><div =
style=3D'border:none;border-left:solid blue 1.5pt;padding:0cm 0cm 0cm =
4.0pt'><div><div style=3D'border:none;border-top:solid #E1E1E1 =
1.0pt;padding:3.0pt 0cm 0cm 0cm'><p class=3DMsoNormal><b><span =
lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:windowte=
xt'>From:</span></b><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:windowte=
xt'> Bert Huijben [mailto:bert@qqmail.nl] <br><b>Sent:</b> donderdag 26 =
november 2015 00:22<br><b>To:</b> =
dev@httpd.apache.org<br><b>Subject:</b> RE: apr_token_* conclusions =
(was: Better casecmpstr[n]?)<o:p></o:p></span></p></div></div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal><span =
lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>The example was the other way around. =
Changing SS to =C3=9F is not a valid transform, but the other way is. =
There are also transforms on the combined AE characters, =
etc.<o:p></o:p></span></p><p class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>That Turkish =E2=80=98I=E2=80=99 problem is =
the only case I know of where the collation actually changes behavior =
within the usual western alphabet of ASCII =
characters.<o:p></o:p></span></p><p class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
Bert<o:p></o:p></span></p><p class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:#1F497D;=
mso-fareast-language:EN-US'><o:p>&nbsp;</o:p></span></p><div =
style=3D'border:none;border-left:solid blue 1.5pt;padding:0cm 0cm 0cm =
4.0pt'><div><div style=3D'border:none;border-top:solid #E1E1E1 =
1.0pt;padding:3.0pt 0cm 0cm 0cm'><p class=3DMsoNormal><b><span =
lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:windowte=
xt'>From:</span></b><span lang=3DEN-US =
style=3D'font-size:11.0pt;font-family:"Calibri",sans-serif;color:windowte=
xt'> Mikhail T. [<a =
href=3D"mailto:mi+thun@aldan.algebra.com">mailto:mi+thun@aldan.algebra.co=
m</a>] <br><b>Sent:</b> woensdag 25 november 2015 23:19<br><b>To:</b> <a =
href=3D"mailto:dev@httpd.apache.org">dev@httpd.apache.org</a><br><b>Subje=
ct:</b> Re: apr_token_* conclusions (was: Better =
casecmpstr[n]?)<o:p></o:p></span></p></div></div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><div><p class=3DMsoNormal>On =
25.11.2015 14:10, Mikhail T. wrote:<o:p></o:p></p></div><blockquote =
style=3D'margin-top:5.0pt;margin-bottom:5.0pt'><blockquote =
style=3D'margin-top:5.0pt;margin-bottom:5.0pt'><p>Two variables, =
LC_CTYPE and LC_COLLATE control this text processing behavior.&nbsp; The =
above is the correct lower case transliteration for Turkish.&nbsp; In =
German, the upper case correspondence of sharp-S =C3=9F is 'SS', but =
multi-char translation is not provided by the simple tolower/toupper =
functions.<o:p></o:p></p></blockquote><p class=3DMsoNormal>So, the =
concern is, some hypothetical header, such as <tt><span =
style=3D'font-size:10.0pt'>X-ASSIGN-TO</span></tt> may, after going =
through the locale-aware strtolower() unexpectedly become <tt><span =
style=3D'font-size:10.0pt'>x-a=C3=9Fign-to</span></tt>?<o:p></o:p></p></b=
lockquote><p class=3DMsoNormal>I just tested the above on both FreeBSD =
and Linux, and the results are encouraging:<o:p></o:p></p><blockquote =
style=3D'margin-top:5.0pt;margin-bottom:5.0pt'><p =
class=3DMsoNormal><tt><span style=3D'font-size:10.0pt'>% echo STRASSE | =
env LANG=3Dde_DE.ISO8859 tr '[[:upper:]]' '[[:lower:]]'</span></tt><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><br><tt>strasse</tt></span><o:p></o:p></p></blockquote><p =
class=3DMsoNormal>Thus, I contend, using C-library will not cause =
invalid results, and the only reason to have Apache's own implementation =
is performance, but not correctness.<o:p></o:p></p><blockquote =
style=3D'margin-top:5.0pt;margin-bottom:5.0pt'><p =
class=3DMsoNormal>-mi<o:p></o:p></p></blockquote></div></div></div></body=
></html>
------=_NextPart_000_0121_01D127E1.4CBF10D0--


From dev-return-84775-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Wed Nov 25 23:34:58 2015
Return-Path: <dev-return-84775-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6309D1860E
	for <apmail-httpd-dev-archive@www.apache.org>; Wed, 25 Nov 2015 23:34:58 +0000 (UTC)
Received: (qmail 89598 invoked by uid 500); 25 Nov 2015 23:34:57 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 89539 invoked by uid 500); 25 Nov 2015 23:34:57 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 89529 invoked by uid 99); 25 Nov 2015 23:34:57 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Nov 2015 23:34:57 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 6D80F180A8D
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 23:34:57 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3.98
X-Spam-Level: ***
X-Spam-Status: No, score=3.98 tagged_above=-999 required=6.31
	tests=[HTML_MESSAGE=3, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id sS5pvD0ynp9l for <dev@httpd.apache.org>;
	Wed, 25 Nov 2015 23:34:56 +0000 (UTC)
Received: from vms173001pub.verizon.net (vms173001pub.verizon.net [206.46.173.1])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 0760021231
	for <dev@httpd.apache.org>; Wed, 25 Nov 2015 23:34:55 +0000 (UTC)
MIME-version: 1.0
Content-type: multipart/alternative;
 boundary="Boundary_(ID_jtaFT6fXRKz6pZ2kMMqrFQ)"
Received: from [192.168.1.8] ([100.1.236.52]) by vms173001.mailsrvcs.net
 (Oracle Communications Messaging Server 7.0.5.32.0 64bit (built Jul 16 2014))
 with ESMTPA id <0NYE00JCZ9I1ZV50@vms173001.mailsrvcs.net> for
 dev@httpd.apache.org; Wed, 25 Nov 2015 17:34:54 -0600 (CST)
X-CMAE-Score: 0
X-CMAE-Analysis: v=2.1 cv=J+9Xl1TS c=1 sm=1 tr=0	a=UorMnhrCY2jH/mPejITChw==:117
 a=LaogzpLLAAAA:8 a=oR5dmqMzAAAA:8	a=qtqOOiqGOCEA:10 a=r77TgQKjGQsHNAKrUKIA:9
 a=hrRt_IRalbBhOclsZFoA:9	a=QEXdDO2ut3YA:10 a=AYV9bTT9YNkA:10
 a=fJsdJ507WMzMkpIbOsQA:9	a=_W_S_7VecoQA:10
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
To: dev@httpd.apache.org
References:
 <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
 <5655F722.9020608@aldan.algebra.com>
 <CACsi253c5d4b8XOOdERUqij=WR06mEnoBr9Dk808wfdfv00CcQ@mail.gmail.com>
 <5656079E.8090705@aldan.algebra.com> <565633CB.6060305@aldan.algebra.com>
 <011701d127d8$094cc3a0$1be64ae0$@qqmail.nl>
From: "Mikhail T." <mi+thun@aldan.algebra.com>
Message-id: <56564599.90909@aldan.algebra.com>
Date: Wed, 25 Nov 2015 18:34:49 -0500
User-Agent: Mozilla/5.0 (X11; FreeBSD amd64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
In-reply-to: <011701d127d8$094cc3a0$1be64ae0$@qqmail.nl>

This is a multi-part message in MIME format.

--Boundary_(ID_jtaFT6fXRKz6pZ2kMMqrFQ)
Content-type: text/plain; charset=utf-8
Content-transfer-encoding: 8BIT

On 25.11.2015 18:21, Bert Huijben wrote:
> That Turkish I problem is the only case I know of where the
> collation actually changes behavior within the usual western alphabet
> of ASCII characters.
Argh, yes, I see now, what the problem would be... Thank you,

    -mi


--Boundary_(ID_jtaFT6fXRKz6pZ2kMMqrFQ)
Content-type: text/html; charset=utf-8
Content-transfer-encoding: 8BIT

<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  </head>
  <body bgcolor="#FFFFFF" text="#000000">
    <div class="moz-cite-prefix">On 25.11.2015 18:21, Bert Huijben
      wrote:<br>
    </div>
    <blockquote cite="mid:011701d127d8$094cc3a0$1be64ae0$@qqmail.nl"
      type="cite"><span
style="font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif;color:#1F497D;mso-fareast-language:EN-US"
        lang="EN-US">That Turkish I problem is the only case I know of
        where the collation actually changes behavior within the usual
        western alphabet of ASCII characters.</span></blockquote>
    Argh, yes, I see now, what the problem would be... Thank you,<br>
    <blockquote>-mi<br>
    </blockquote>
  </body>
</html>

--Boundary_(ID_jtaFT6fXRKz6pZ2kMMqrFQ)--

From dev-return-84776-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 26 00:45:38 2015
Return-Path: <dev-return-84776-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5B050188A6
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 26 Nov 2015 00:45:38 +0000 (UTC)
Received: (qmail 36445 invoked by uid 500); 26 Nov 2015 00:45:37 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 36390 invoked by uid 500); 26 Nov 2015 00:45:37 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 36380 invoked by uid 99); 26 Nov 2015 00:45:37 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Nov 2015 00:45:37 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 6764D180A8D
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 00:45:37 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.98
X-Spam-Level: **
X-Spam-Status: No, score=2.98 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id OfCjKROle_Ek for <dev@httpd.apache.org>;
	Thu, 26 Nov 2015 00:45:31 +0000 (UTC)
Received: from mail-ig0-f170.google.com (mail-ig0-f170.google.com [209.85.213.170])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 12E3842ABE
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 00:45:31 +0000 (UTC)
Received: by igcph11 with SMTP id ph11so1564145igc.1
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 16:45:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=IBgr/lq21QjEg/YbCIzWnFTB89xHwVcklskljCbQFPw=;
        b=TbHegcS8P2zSWIplj5nWaH2yBmLoFWIzZbNXEL7CZOpKI2TEv0axW/OE8sIKB6LATd
         SFQjq4P4GEWs7B0Jj3z/zccrxfCS+jlK7Ixz+jpSMAuvecHgSkkSLHJRLPfqqcWZCDHq
         0DrCEIjh4ValBAXRlQYETOO8zKJLv1PYoF84Cl6smhfXu+6g2VOOgY0LSoMZMye82yzT
         E7/57PtYVXEeSmY4x/7/ogu6/57bStKvPGqdA9TRzRDhrGNUL1xyz0j5v2RbtMZTNf7A
         366IlxGMToK6+a1X9hZAZAeFP2qKwkk7/JkfkbARrlHr759/vS0516oemFx5u1ObTZN+
         2ugg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=IBgr/lq21QjEg/YbCIzWnFTB89xHwVcklskljCbQFPw=;
        b=MZRF6F9VnUlV9PmKXNZg7ZmI91j9eC9f+6SXwQfsOV4r69z0pDZT3bT4kB10vPAtyk
         P+wpK2aHSuc8eWfgRl/ZRNylX9tvhjbxgwA5lxlhM8G1xbPkzQ8HRHJcYRkuGox1PdnH
         xqVGYImybc/KYzXotFYSHKMf+PRSCtyrlbxxse7kejitAut8jERBpeZAjc6g7T5KYWVJ
         5IRQ8Octf4dmfKz8+JuY2awuTeM5WVvWTGgnyIh/VUHdIa5VyZXUjqS1PdJffgNFSaSZ
         m5b58KfYd3kt0abRq5eLYt9mU7HzohrhRdAzdJ7PCKxu8bXi1hsite2XcUURFrzhWuUA
         vGeQ==
X-Gm-Message-State: ALoCoQl4bcY51C2IG8sX28Hl+EtLrDOT2+0cIYfFLei2xeSXMVGbVPzuJub7BPduh5gZ5v3wvsi5
MIME-Version: 1.0
X-Received: by 10.50.143.10 with SMTP id sa10mr428833igb.77.1448498730647;
 Wed, 25 Nov 2015 16:45:30 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Wed, 25 Nov 2015 16:45:30 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Wed, 25 Nov 2015 16:45:30 -0800 (PST)
In-Reply-To: <565633CB.6060305@aldan.algebra.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
	<5655F722.9020608@aldan.algebra.com>
	<CACsi253c5d4b8XOOdERUqij=WR06mEnoBr9Dk808wfdfv00CcQ@mail.gmail.com>
	<5656079E.8090705@aldan.algebra.com>
	<565633CB.6060305@aldan.algebra.com>
Date: Wed, 25 Nov 2015 18:45:30 -0600
Message-ID: <CACsi250eWmbHO2PCaQjK_+0DWJuHNJU0n0rRDeYgL3ap1o8gQQ@mail.gmail.com>
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1135fe9a4c78ba052566e4e2

--001a1135fe9a4c78ba052566e4e2
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Nov 25, 2015 4:19 PM, "Mikhail T." <mi+thun@aldan.algebra.com> wrote:
>
>
>>
>> So, the concern is, some hypothetical header, such as X-ASSIGN-TO may,
after going through the locale-aware strtolower() unexpectedly become
x-a=C3=9Fign-to?
>
> I just tested the above on both FreeBSD and Linux, and the results are
encouraging:
>>
>> % echo STRASSE | env LANG=3Dde_DE.ISO8859 tr '[[:upper:]]' '[[:lower:]]'
>> strasse
>
> Thus, I contend, using C-library will not cause invalid results, and the
only reason to have Apache's own implementation is performance, but not
correctness.

Well almost but wrong...

The pure char-based =C3=9F processing produced no case change in my reviews=
 of
tolower/toupper in de_DE codeset. If you were to examine string comparison
the collation order changes substantially.

That said, I'm working up a comprehensive audit and other codeset/language
combinations absolutely do.  Code and results forthcoming shortly.

As long as everyone keeps their fingers off the setlocale()/trigger, it's
all fine.

--001a1135fe9a4c78ba052566e4e2
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<p dir=3D"ltr">On Nov 25, 2015 4:19 PM, &quot;Mikhail T.&quot; &lt;<a href=
=3D"mailto:mi%2Bthun@aldan.algebra.com">mi+thun@aldan.algebra.com</a>&gt; w=
rote:<br>
&gt;<br>
&gt; <br>
&gt;&gt;<br>
&gt;&gt; So, the concern is, some hypothetical header, such as X-ASSIGN-TO =
may, after going through the locale-aware strtolower() unexpectedly become =
x-a=C3=9Fign-to?<br>
&gt;<br>
&gt; I just tested the above on both FreeBSD and Linux, and the results are=
 encouraging:<br>
&gt;&gt;<br>
&gt;&gt; % echo STRASSE | env LANG=3Dde_DE.ISO8859 tr &#39;[[:upper:]]&#39;=
 &#39;[[:lower:]]&#39;<br>
&gt;&gt; strasse<br>
&gt;<br>
&gt; Thus, I contend, using C-library will not cause invalid results, and t=
he only reason to have Apache&#39;s own implementation is performance, but =
not correctness.</p>
<p dir=3D"ltr">Well almost but wrong...</p>
<p dir=3D"ltr">The pure char-based =C3=9F processing produced no case chang=
e in my reviews of tolower/toupper in de_DE codeset. If you were to examine=
 string comparison the collation order changes substantially.</p>
<p dir=3D"ltr"> That said, I&#39;m working up a comprehensive audit and oth=
er codeset/language combinations absolutely do.=C2=A0 Code and results fort=
hcoming shortly.</p>
<p dir=3D"ltr">As long as everyone keeps their fingers off the setlocale()/=
trigger, it&#39;s all fine.<br>
</p>

--001a1135fe9a4c78ba052566e4e2--

From dev-return-84777-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 26 03:44:20 2015
Return-Path: <dev-return-84777-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B3FFF18DBE
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 26 Nov 2015 03:44:20 +0000 (UTC)
Received: (qmail 53425 invoked by uid 500); 26 Nov 2015 03:44:20 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 53356 invoked by uid 500); 26 Nov 2015 03:44:20 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 53346 invoked by uid 99); 26 Nov 2015 03:44:19 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Nov 2015 03:44:19 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 57D7CC14AA
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 03:44:19 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 100Y4LM7j5Zz for <dev@httpd.apache.org>;
	Thu, 26 Nov 2015 03:44:05 +0000 (UTC)
Received: from mail-io0-f178.google.com (mail-io0-f178.google.com [209.85.223.178])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 9526F21231
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 03:44:04 +0000 (UTC)
Received: by ioc74 with SMTP id 74so72971848ioc.2
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 19:44:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=cO3sX4sCQbsxoIeOt6/CjGW72k80+MIMiUbcQuRBCuY=;
        b=P+MWqGca+XFD1NGePPtFmmlXXZBQLDt9Cqxzfbe8zz5hdsGY2rp7HZDIrf4LvRJrYA
         tNc0jno89GO5xtk/oXZKViA/ikSCZfy071sZ6QqhTaSNPDeAgRLe5iMCungpxAqGCJ+D
         ZjbtEuWcigR2n8P3dbc+hiNsn72iYSx6HY6Fqq/92ZPaXXrarf+AFXvVB7XAOF0jVzJS
         wWwJbf9/PgGVEV7J43Dzea37XD4CjhmJxhzG19dz+yRJ1zjFlvz2EKp0uaVG76F6pk+C
         koPCU0ZgjCEzhPEv++Yp2k72GZVrp+lko91mCBonu07oU57hQCNFJIyT71pu/MWcg5BB
         nKjw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=cO3sX4sCQbsxoIeOt6/CjGW72k80+MIMiUbcQuRBCuY=;
        b=LibBp2MWfPQTE1CoDkbvuoC24M9QG2irmNutyYsFIzrkPltkHaRhkpEli3UHKqMGGh
         FQPMZQ83lzYCiXxnHdBg56eNEIi6dzamwEzhiTCJTW9T7HDwY1cF3V2dsN0fwbNLwmfk
         WOU7l0aEFO15xwGNz4dsxn0vt81XKMFImy4N17GP1nrG35U5xC1MDYCSsor7fY5nlYe0
         6+U7T8kx94K0zsQD+ejuM/P2jU70a9fEPmWpe38IDgc7wd3ctOf7Id+gXFtuLNS1VZok
         5KSk2dqEaomB02akkiH+ubRPK2iKIpj7i2aMrcqX1N6pleKaOGOa0DnSZI5zhELTK9Wk
         mERg==
X-Gm-Message-State: ALoCoQmFGSsGP/OUTIp5/i0iXxkrbaNOmro8r5mJWOJ7D9gOS0OuD7LzJVCZmYy6UpqcwyKnG9cq
MIME-Version: 1.0
X-Received: by 10.107.34.199 with SMTP id i190mr4307680ioi.150.1448509443508;
 Wed, 25 Nov 2015 19:44:03 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Wed, 25 Nov 2015 19:44:03 -0800 (PST)
In-Reply-To: <CACsi250eWmbHO2PCaQjK_+0DWJuHNJU0n0rRDeYgL3ap1o8gQQ@mail.gmail.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
	<5655F722.9020608@aldan.algebra.com>
	<CACsi253c5d4b8XOOdERUqij=WR06mEnoBr9Dk808wfdfv00CcQ@mail.gmail.com>
	<5656079E.8090705@aldan.algebra.com>
	<565633CB.6060305@aldan.algebra.com>
	<CACsi250eWmbHO2PCaQjK_+0DWJuHNJU0n0rRDeYgL3ap1o8gQQ@mail.gmail.com>
Date: Wed, 25 Nov 2015 21:44:03 -0600
Message-ID: <CACsi25108DG0MmwVXgOx4=xoYo262FZEXhkCBEMeZMW44+-5Jw@mail.gmail.com>
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/mixed; boundary=001a1140d944d5dc480525696211

--001a1140d944d5dc480525696211
Content-Type: multipart/alternative; boundary=001a1140d944d5dc43052569620f

--001a1140d944d5dc43052569620f
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Wed, Nov 25, 2015 at 6:45 PM, William A Rowe Jr <wrowe@rowe-clan.net>
wrote:

> On Nov 25, 2015 4:19 PM, "Mikhail T." <mi+thun@aldan.algebra.com> wrote:
> >
> > Thus, I contend, using C-library will not cause invalid results, and th=
e
> only reason to have Apache's own implementation is performance, but not
> correctness.
>
> Well almost but wrong...
>
> The pure char-based =C3=9F processing produced no case change in my revie=
ws of
> tolower/toupper in de_DE codeset. If you were to examine string compariso=
n
> the collation order changes substantially.
>
> And more to the point, if tolower()/toupper() could handle not only mbcs
but multicharacter transliteration, your results would have varied.  1:1
character translations have their intrinsic limits.

> That said, I'm working up a comprehensive audit and other codeset/languag=
e
> combinations absolutely do.  Code and results forthcoming shortly.
>
As promised, here's a quick review based on the sbcs and utf8 code pages in
the very limited single-byte scope on my machine.

I did not touch the following mbcs because they require 'shift-state' to
toggle into and out of specific characters and that implies a lot of
calculated fuzzing that I didn't have time for this week.  (Since mod_ftp
explicit tls is still broken, I had no time for any of this, either ;-)  I
also didn't get to evaluating the wide chars yet that fall into the
traditional posix/c ascii range, which I still mean to do, and haven't yet
repeated this exercise on win32 or os/x, only on a somewhat multinational
configuration of fedora 22.

The source code is pretty rudimentary.  I used iconv to shove all of the
resulting text evaluation into utf-8 for the console/file output, it really
plays no part in the locality equation.  It can be adapted for testing
similar on an EBCDIC box with a bit of clever coding I never got to.

Untested: ja_JP.eucjp ja_JP.ujis japanese.euc ko_KR.euckr korean.euc
zh_CN.gb18030 zh_CN.gb2312 zh_CN.gbk zh_HK.big5hkscs zh_SG.gb2312 zh_SG.gbk
zh_TW.big5 zh_TW.euctw

Tested and exceptional results noted (source code attached);

LANG=3D"aa_DJ.iso88591";
        no surprises
LANG=3D"af_ZA.iso88591";
        no surprises
LANG=3D"an_ES.iso885915";
        no surprises
LANG=3D"ar_AE.iso88596";
        no surprises
LANG=3D"ar_BH.iso88596";
        no surprises
LANG=3D"ar_DZ.iso88596";
        no surprises
LANG=3D"ar_EG.iso88596";
        no surprises
LANG=3D"ar_IQ.iso88596";
        no surprises
LANG=3D"ar_JO.iso88596";
        no surprises
LANG=3D"ar_KW.iso88596";
        no surprises
LANG=3D"ar_LB.iso88596";
        no surprises
LANG=3D"ar_LY.iso88596";
        no surprises
LANG=3D"ar_MA.iso88596";
        no surprises
LANG=3D"ar_OM.iso88596";
        no surprises
LANG=3D"ar_QA.iso88596";
        no surprises
LANG=3D"ar_SA.iso88596";
        no surprises
LANG=3D"ar_SD.iso88596";
        no surprises
LANG=3D"ar_SY.iso88596";
        no surprises
LANG=3D"ar_TN.iso88596";
        no surprises
LANG=3D"ar_YE.iso88596";
        no surprises
LANG=3D"ast_ES.iso885915";
        no surprises
LANG=3D"be_BY.cp1251";
        no surprises
LANG=3D"bg_BG.cp1251";
        no surprises
LANG=3D"br_FR.iso88591";
        no surprises
LANG=3D"br_FR.iso885915@euro";
        no surprises
LANG=3D"bs_BA.iso88592";
        no surprises
LANG=3D"ca_AD.iso885915";
        no surprises
LANG=3D"ca_ES.iso88591";
        no surprises
LANG=3D"ca_ES.iso885915@euro";
        no surprises
LANG=3D"ca_FR.iso885915";
        no surprises
LANG=3D"ca_IT.iso885915";
        no surprises
LANG=3D"cs_CZ.iso88592";
        no surprises
LANG=3D"cy_GB.iso885914";
        no surprises
LANG=3D"da_DK.iso88591";
        no surprises
LANG=3D"da_DK.iso885915";
        no surprises
LANG=3D"de_AT.iso88591";
        no surprises
LANG=3D"de_AT.iso885915@euro";
        no surprises
LANG=3D"de_BE.iso88591";
        no surprises
LANG=3D"de_BE.iso885915@euro";
        no surprises
LANG=3D"de_CH.iso88591";
        no surprises
LANG=3D"de_DE.iso88591";
        no surprises
LANG=3D"de_DE.iso885915@euro";
        no surprises
LANG=3D"de_LU.iso88591";
        no surprises
LANG=3D"de_LU.iso885915@euro";
        no surprises
LANG=3D"el_CY.iso88597";
        no surprises
LANG=3D"el_GR.iso88597";
        no surprises
LANG=3D"en_AU.iso88591";
        no surprises
LANG=3D"en_BW.iso88591";
        no surprises
LANG=3D"en_CA.iso88591";
        no surprises
LANG=3D"en_DK.iso88591";
        no surprises
LANG=3D"en_GB.iso88591";
        no surprises
LANG=3D"en_GB.iso885915";
        no surprises
LANG=3D"en_HK.iso88591";
        no surprises
LANG=3D"en_IE.iso88591";
        no surprises
LANG=3D"en_IE.iso885915@euro";
        no surprises
LANG=3D"en_NZ.iso88591";
        no surprises
LANG=3D"en_PH.iso88591";
        no surprises
LANG=3D"en_SG.iso88591";
        no surprises
LANG=3D"en_US.iso88591";
        no surprises
LANG=3D"en_US.iso885915";
        no surprises
LANG=3D"en_ZA.iso88591";
        no surprises
LANG=3D"en_ZW.iso88591";
        no surprises
LANG=3D"es_AR.iso88591";
        no surprises
LANG=3D"es_BO.iso88591";
        no surprises
LANG=3D"es_CL.iso88591";
        no surprises
LANG=3D"es_CO.iso88591";
        no surprises
LANG=3D"es_CR.iso88591";
        no surprises
LANG=3D"es_DO.iso88591";
        no surprises
LANG=3D"es_EC.iso88591";
        no surprises
LANG=3D"es_ES.iso88591";
        no surprises
LANG=3D"es_ES.iso885915@euro";
        no surprises
LANG=3D"es_GT.iso88591";
        no surprises
LANG=3D"es_HN.iso88591";
        no surprises
LANG=3D"es_MX.iso88591";
        no surprises
LANG=3D"es_NI.iso88591";
        no surprises
LANG=3D"es_PA.iso88591";
        no surprises
LANG=3D"es_PE.iso88591";
        no surprises
LANG=3D"es_PR.iso88591";
        no surprises
LANG=3D"es_PY.iso88591";
        no surprises
LANG=3D"es_SV.iso88591";
        no surprises
LANG=3D"es_US.iso88591";
        no surprises
LANG=3D"es_UY.iso88591";
        no surprises
LANG=3D"es_VE.iso88591";
        no surprises
LANG=3D"et_EE.iso88591";
        no surprises
LANG=3D"et_EE.iso885915";
        no surprises
LANG=3D"eu_ES.iso88591";
        no surprises
LANG=3D"eu_ES.iso885915@euro";
        no surprises
LANG=3D"fi_FI.iso88591";
        no surprises
LANG=3D"fi_FI.iso885915@euro";
        no surprises
LANG=3D"fo_FO.iso88591";
        no surprises
LANG=3D"fr_BE.iso88591";
        no surprises
LANG=3D"fr_BE.iso885915@euro";
        no surprises
LANG=3D"fr_CA.iso88591";
        no surprises
LANG=3D"fr_CH.iso88591";
        no surprises
LANG=3D"fr_FR.iso88591";
        no surprises
LANG=3D"fr_FR.iso885915@euro";
        no surprises
LANG=3D"fr_LU.iso88591";
        no surprises
LANG=3D"fr_LU.iso885915@euro";
        no surprises
LANG=3D"ga_IE.iso88591";
        no surprises
LANG=3D"ga_IE.iso885915@euro";
        no surprises
LANG=3D"gd_GB.iso885915";
        no surprises
LANG=3D"gl_ES.iso88591";
        no surprises
LANG=3D"gl_ES.iso885915@euro";
        no surprises
LANG=3D"gv_GB.iso88591";
        no surprises
LANG=3D"he_IL.iso88598";
        no surprises
LANG=3D"hr_HR.iso88592";
        no surprises
LANG=3D"hsb_DE.iso88592";
        no surprises
LANG=3D"hu_HU.iso88592";
        no surprises
LANG=3D"hy_AM.armscii8";
        no surprises
LANG=3D"id_ID.iso88591";
        no surprises
LANG=3D"is_IS.iso88591";
        no surprises
LANG=3D"it_CH.iso88591";
        no surprises
LANG=3D"it_IT.iso88591";
        no surprises
LANG=3D"it_IT.iso885915@euro";
        no surprises
LANG=3D"iw_IL.iso88598";
        no surprises
LANG=3D"ka_GE.georgianps";
        no surprises
LANG=3D"kk_KZ.pt154";
        no surprises
LANG=3D"kl_GL.iso88591";
        no surprises
LANG=3D"ku_TR.iso88599";
   64 =3D @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
      ^ @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`ABCDEFGH=C4=B0JKLMNOPQRSTUVWXYZ{|}=
~
      v @abcdefgh=C4=B1jklmnopqrstuvwxyz[\]^_`abcdefghijklmnopqrstuvwxyz{|}=
~
      ?  ........*.................      ''''''''*'''''''''''''''''
  192 =3D =C3=80=C3=81=C3=82=C3=83=C3=84=C3=85=C3=86=C3=87=C3=88=C3=89=C3=
=8A=C3=8B=C3=8C=C3=8D=C3=8E=C3=8F=C4=9E=C3=91=C3=92=C3=93=C3=94=C3=95=C3=96=
=C3=97=C3=98=C3=99=C3=9A=C3=9B=C3=9C=C4=B0=C5=9E=C3=9F=C3=A0=C3=A1=C3=A2=C3=
=A3=C3=A4=C3=A5=C3=A6=C3=A7=C3=A8=C3=A9=C3=AA=C3=AB=C3=AC=C3=AD=C3=AE=C3=AF=
=C4=9F=C3=B1=C3=B2=C3=B3=C3=B4=C3=B5=C3=B6=C3=B7=C3=B8=C3=B9=C3=BA=C3=BB=C3=
=BC=C4=B1=C5=9F=C3=BF
      ^ =C3=80=C3=81=C3=82=C3=83=C3=84=C3=85=C3=86=C3=87=C3=88=C3=89=C3=8A=
=C3=8B=C3=8C=C3=8D=C3=8E=C3=8F=C4=9E=C3=91=C3=92=C3=93=C3=94=C3=95=C3=96=C3=
=97=C3=98=C3=99=C3=9A=C3=9B=C3=9C=C4=B0=C5=9E=C3=9F=C3=80=C3=81=C3=82=C3=83=
=C3=84=C3=85=C3=86=C3=87=C3=88=C3=89=C3=8A=C3=8B=C3=8C=C3=8D=C3=8E=C3=8F=C4=
=9E=C3=91=C3=92=C3=93=C3=94=C3=95=C3=96=C3=B7=C3=98=C3=99=C3=9A=C3=9B=C3=9C=
I=C5=9E=C3=BF
      v =C3=A0=C3=A1=C3=A2=C3=A3=C3=A4=C3=A5=C3=A6=C3=A7=C3=A8=C3=A9=C3=AA=
=C3=AB=C3=AC=C3=AD=C3=AE=C3=AF=C4=9F=C3=B1=C3=B2=C3=B3=C3=B4=C3=B5=C3=B6=C3=
=97=C3=B8=C3=B9=C3=BA=C3=BB=C3=BCi=C5=9F=C3=9F=C3=A0=C3=A1=C3=A2=C3=A3=C3=
=A4=C3=A5=C3=A6=C3=A7=C3=A8=C3=A9=C3=AA=C3=AB=C3=AC=C3=AD=C3=AE=C3=AF=C4=9F=
=C3=B1=C3=B2=C3=B3=C3=B4=C3=B5=C3=B6=C3=B7=C3=B8=C3=B9=C3=BA=C3=BB=C3=BC=C4=
=B1=C5=9F=C3=BF
      ? ....................... .....*. ''''''''''''''''''''''' '''''*'
LANG=3D"kw_GB.iso88591";
        no surprises
LANG=3D"lg_UG.iso885910";
        no surprises
LANG=3D"lt_LT.iso885913";
        no surprises
LANG=3D"lv_LV.iso885913";
        no surprises
LANG=3D"mg_MG.iso885915";
        no surprises
LANG=3D"mi_NZ.iso885913";
        no surprises
LANG=3D"mk_MK.iso88595";
        no surprises
LANG=3D"ms_MY.iso88591";
        no surprises
LANG=3D"mt_MT.iso88593";
  128 =3D                                  =C4=A6=CB=98=C2=A3=C2=A4 =C4=A4=
=C2=A7=C2=A8=C4=B0=C5=9E=C4=9E=C4=B4=C2=AD =C5=BB=C2=B0=C4=A7=C2=B2=C2=B3=
=C2=B4=C2=B5=C4=A5=C2=B7=C2=B8=C4=B1=C5=9F=C4=9F=C4=B5=C2=BD =C5=BC
      ^                                  =C4=A6=CB=98=C2=A3=C2=A4 =C4=A4=C2=
=A7=C2=A8=C4=B0=C5=9E=C4=9E=C4=B4=C2=AD =C5=BB=C2=B0=C4=A6=C2=B2=C2=B3=C2=
=B4=C2=B5=C4=A4=C2=B7=C2=B8I=C5=9E=C4=9E=C4=B4=C2=BD =C5=BB
      v                                  =C4=A7=CB=98=C2=A3=C2=A4 =C4=A5=C2=
=A7=C2=A8i=C5=9F=C4=9F=C4=B5=C2=AD =C5=BC=C2=B0=C4=A7=C2=B2=C2=B3=C2=B4=C2=
=B5=C4=A5=C2=B7=C2=B8=C4=B1=C5=9F=C4=9F=C4=B5=C2=BD =C5=BC
      ?                                  .    .  *...  . '    '  *'''  '
LANG=3D"nb_NO.iso88591";
        no surprises
LANG=3D"nl_BE.iso88591";
        no surprises
LANG=3D"nl_BE.iso885915@euro";
        no surprises
LANG=3D"nl_NL.iso88591";
        no surprises
LANG=3D"nl_NL.iso885915@euro";
        no surprises
LANG=3D"nn_NO.iso88591";
        no surprises
LANG=3D"(null)";
        no surprises
LANG=3D"oc_FR.iso88591";
        no surprises
LANG=3D"om_KE.iso88591";
        no surprises
LANG=3D"pl_PL.iso88592";
        no surprises
LANG=3D"pt_BR.iso88591";
        no surprises
LANG=3D"pt_PT.iso88591";
        no surprises
LANG=3D"pt_PT.iso885915@euro";
        no surprises
LANG=3D"ro_RO.iso88592";
        no surprises
LANG=3D"ru_RU.iso88595";
        no surprises
LANG=3D"ru_RU.koi8r";
        no surprises
LANG=3D"ru_UA.koi8u";
        no surprises
LANG=3D"sk_SK.iso88592";
        no surprises
LANG=3D"sl_SI.iso88592";
        no surprises
LANG=3D"so_DJ.iso88591";
        no surprises
LANG=3D"so_KE.iso88591";
        no surprises
LANG=3D"so_SO.iso88591";
        no surprises
LANG=3D"sq_AL.iso88591";
        no surprises
LANG=3D"st_ZA.iso88591";
        no surprises
LANG=3D"sv_FI.iso88591";
        no surprises
LANG=3D"sv_FI.iso885915@euro";
        no surprises
LANG=3D"sv_SE.iso88591";
        no surprises
LANG=3D"sv_SE.iso885915";
        no surprises
LANG=3D"tg_TJ.koi8t";
        no surprises
LANG=3D"th_TH.tis620";
        no surprises
LANG=3D"tl_PH.iso88591";
        no surprises
LANG=3D"tr_CY.iso88599";
   64 =3D @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
      ^ @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`ABCDEFGH=C4=B0JKLMNOPQRSTUVWXYZ{|}=
~
      v @abcdefgh=C4=B1jklmnopqrstuvwxyz[\]^_`abcdefghijklmnopqrstuvwxyz{|}=
~
      ?  ........*.................      ''''''''*'''''''''''''''''
  192 =3D =C3=80=C3=81=C3=82=C3=83=C3=84=C3=85=C3=86=C3=87=C3=88=C3=89=C3=
=8A=C3=8B=C3=8C=C3=8D=C3=8E=C3=8F=C4=9E=C3=91=C3=92=C3=93=C3=94=C3=95=C3=96=
=C3=97=C3=98=C3=99=C3=9A=C3=9B=C3=9C=C4=B0=C5=9E=C3=9F=C3=A0=C3=A1=C3=A2=C3=
=A3=C3=A4=C3=A5=C3=A6=C3=A7=C3=A8=C3=A9=C3=AA=C3=AB=C3=AC=C3=AD=C3=AE=C3=AF=
=C4=9F=C3=B1=C3=B2=C3=B3=C3=B4=C3=B5=C3=B6=C3=B7=C3=B8=C3=B9=C3=BA=C3=BB=C3=
=BC=C4=B1=C5=9F=C3=BF
      ^ =C3=80=C3=81=C3=82=C3=83=C3=84=C3=85=C3=86=C3=87=C3=88=C3=89=C3=8A=
=C3=8B=C3=8C=C3=8D=C3=8E=C3=8F=C4=9E=C3=91=C3=92=C3=93=C3=94=C3=95=C3=96=C3=
=97=C3=98=C3=99=C3=9A=C3=9B=C3=9C=C4=B0=C5=9E=C3=9F=C3=80=C3=81=C3=82=C3=83=
=C3=84=C3=85=C3=86=C3=87=C3=88=C3=89=C3=8A=C3=8B=C3=8C=C3=8D=C3=8E=C3=8F=C4=
=9E=C3=91=C3=92=C3=93=C3=94=C3=95=C3=96=C3=B7=C3=98=C3=99=C3=9A=C3=9B=C3=9C=
I=C5=9E=C3=BF
      v =C3=A0=C3=A1=C3=A2=C3=A3=C3=A4=C3=A5=C3=A6=C3=A7=C3=A8=C3=A9=C3=AA=
=C3=AB=C3=AC=C3=AD=C3=AE=C3=AF=C4=9F=C3=B1=C3=B2=C3=B3=C3=B4=C3=B5=C3=B6=C3=
=97=C3=B8=C3=B9=C3=BA=C3=BB=C3=BCi=C5=9F=C3=9F=C3=A0=C3=A1=C3=A2=C3=A3=C3=
=A4=C3=A5=C3=A6=C3=A7=C3=A8=C3=A9=C3=AA=C3=AB=C3=AC=C3=AD=C3=AE=C3=AF=C4=9F=
=C3=B1=C3=B2=C3=B3=C3=B4=C3=B5=C3=B6=C3=B7=C3=B8=C3=B9=C3=BA=C3=BB=C3=BC=C4=
=B1=C5=9F=C3=BF
      ? ....................... .....*. ''''''''''''''''''''''' '''''*'
LANG=3D"tr_TR.iso88599";
   64 =3D @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
      ^ @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`ABCDEFGH=C4=B0JKLMNOPQRSTUVWXYZ{|}=
~
      v @abcdefgh=C4=B1jklmnopqrstuvwxyz[\]^_`abcdefghijklmnopqrstuvwxyz{|}=
~
      ?  ........*.................      ''''''''*'''''''''''''''''
  192 =3D =C3=80=C3=81=C3=82=C3=83=C3=84=C3=85=C3=86=C3=87=C3=88=C3=89=C3=
=8A=C3=8B=C3=8C=C3=8D=C3=8E=C3=8F=C4=9E=C3=91=C3=92=C3=93=C3=94=C3=95=C3=96=
=C3=97=C3=98=C3=99=C3=9A=C3=9B=C3=9C=C4=B0=C5=9E=C3=9F=C3=A0=C3=A1=C3=A2=C3=
=A3=C3=A4=C3=A5=C3=A6=C3=A7=C3=A8=C3=A9=C3=AA=C3=AB=C3=AC=C3=AD=C3=AE=C3=AF=
=C4=9F=C3=B1=C3=B2=C3=B3=C3=B4=C3=B5=C3=B6=C3=B7=C3=B8=C3=B9=C3=BA=C3=BB=C3=
=BC=C4=B1=C5=9F=C3=BF
      ^ =C3=80=C3=81=C3=82=C3=83=C3=84=C3=85=C3=86=C3=87=C3=88=C3=89=C3=8A=
=C3=8B=C3=8C=C3=8D=C3=8E=C3=8F=C4=9E=C3=91=C3=92=C3=93=C3=94=C3=95=C3=96=C3=
=97=C3=98=C3=99=C3=9A=C3=9B=C3=9C=C4=B0=C5=9E=C3=9F=C3=80=C3=81=C3=82=C3=83=
=C3=84=C3=85=C3=86=C3=87=C3=88=C3=89=C3=8A=C3=8B=C3=8C=C3=8D=C3=8E=C3=8F=C4=
=9E=C3=91=C3=92=C3=93=C3=94=C3=95=C3=96=C3=B7=C3=98=C3=99=C3=9A=C3=9B=C3=9C=
I=C5=9E=C3=BF
      v =C3=A0=C3=A1=C3=A2=C3=A3=C3=A4=C3=A5=C3=A6=C3=A7=C3=A8=C3=A9=C3=AA=
=C3=AB=C3=AC=C3=AD=C3=AE=C3=AF=C4=9F=C3=B1=C3=B2=C3=B3=C3=B4=C3=B5=C3=B6=C3=
=97=C3=B8=C3=B9=C3=BA=C3=BB=C3=BCi=C5=9F=C3=9F=C3=A0=C3=A1=C3=A2=C3=A3=C3=
=A4=C3=A5=C3=A6=C3=A7=C3=A8=C3=A9=C3=AA=C3=AB=C3=AC=C3=AD=C3=AE=C3=AF=C4=9F=
=C3=B1=C3=B2=C3=B3=C3=B4=C3=B5=C3=B6=C3=B7=C3=B8=C3=B9=C3=BA=C3=BB=C3=BC=C4=
=B1=C5=9F=C3=BF
      ? ....................... .....*. ''''''''''''''''''''''' '''''*'
LANG=3D"uk_UA.koi8u";
        no surprises
LANG=3D"uz_UZ.iso88591";
        no surprises
LANG=3D"wa_BE.iso88591";
        no surprises
LANG=3D"wa_BE.iso885915@euro";
        no surprises
LANG=3D"xh_ZA.iso88591";
        no surprises
LANG=3D"yi_US.cp1255";
        no surprises
LANG=3D"zu_ZA.iso88591";
        no surprises
LANG=3D"aa_DJ.utf8";
        no surprises
LANG=3D"aa_ER.utf8";
        no surprises
LANG=3D"aa_ER.utf8@saaho";
        no surprises
LANG=3D"aa_ET.utf8";
        no surprises
LANG=3D"af_ZA.utf8";
        no surprises
LANG=3D"ak_GH.utf8";
        no surprises
LANG=3D"am_ET.utf8";
        no surprises
LANG=3D"an_ES.utf8";
        no surprises
LANG=3D"anp_IN.utf8";
        no surprises
LANG=3D"ar_AE.utf8";
        no surprises
LANG=3D"ar_BH.utf8";
        no surprises
LANG=3D"ar_DZ.utf8";
        no surprises
LANG=3D"ar_EG.utf8";
        no surprises
LANG=3D"ar_IN.utf8";
        no surprises
LANG=3D"ar_IQ.utf8";
        no surprises
LANG=3D"ar_JO.utf8";
        no surprises
LANG=3D"ar_KW.utf8";
        no surprises
LANG=3D"ar_LB.utf8";
        no surprises
LANG=3D"ar_LY.utf8";
        no surprises
LANG=3D"ar_MA.utf8";
        no surprises
LANG=3D"ar_OM.utf8";
        no surprises
LANG=3D"ar_QA.utf8";
        no surprises
LANG=3D"ar_SA.utf8";
        no surprises
LANG=3D"ar_SD.utf8";
        no surprises
LANG=3D"ar_SS.utf8";
        no surprises
LANG=3D"ar_SY.utf8";
        no surprises
LANG=3D"ar_TN.utf8";
        no surprises
LANG=3D"ar_YE.utf8";
        no surprises
LANG=3D"as_IN.utf8";
        no surprises
LANG=3D"ast_ES.utf8";
        no surprises
LANG=3D"ayc_PE.utf8";
        no surprises
LANG=3D"az_AZ.utf8";
   64 =3D @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
      ^ @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`ABCDEFGHiJKLMNOPQRSTUVWXYZ{|}~
      v @abcdefghIjklmnopqrstuvwxyz[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
      ?  ........*.................      ''''''''*'''''''''''''''''
LANG=3D"be_BY.utf8";
        no surprises
LANG=3D"be_BY.utf8@latin";
        no surprises
LANG=3D"bem_ZM.utf8";
        no surprises
LANG=3D"ber_DZ.utf8";
        no surprises
LANG=3D"ber_MA.utf8";
        no surprises
LANG=3D"bg_BG.utf8";
        no surprises
LANG=3D"bh_IN.utf8";
        no surprises
LANG=3D"bho_IN.utf8";
        no surprises
LANG=3D"bn_BD.utf8";
        no surprises
LANG=3D"bn_IN.utf8";
        no surprises
LANG=3D"bo_CN.utf8";
        no surprises
LANG=3D"bo_IN.utf8";
        no surprises
LANG=3D"br_FR.utf8";
        no surprises
LANG=3D"brx_IN.utf8";
        no surprises
LANG=3D"bs_BA.utf8";
        no surprises
LANG=3D"byn_ER.utf8";
        no surprises
LANG=3D"ca_AD.utf8";
        no surprises
LANG=3D"ca_ES.utf8";
        no surprises
LANG=3D"ca_FR.utf8";
        no surprises
LANG=3D"ca_IT.utf8";
        no surprises
LANG=3D"ce_RU.utf8";
        no surprises
LANG=3D"cmn_TW.utf8";
        no surprises
LANG=3D"crh_UA.utf8";
   64 =3D @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
      ^ @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`ABCDEFGHiJKLMNOPQRSTUVWXYZ{|}~
      v @abcdefghIjklmnopqrstuvwxyz[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
      ?  ........*.................      ''''''''*'''''''''''''''''
LANG=3D"csb_PL.utf8";
        no surprises
LANG=3D"cs_CZ.utf8";
        no surprises
LANG=3D"cv_RU.utf8";
        no surprises
LANG=3D"cy_GB.utf8";
        no surprises
LANG=3D"da_DK.utf8";
        no surprises
LANG=3D"de_AT.utf8";
        no surprises
LANG=3D"de_BE.utf8";
        no surprises
LANG=3D"de_CH.utf8";
        no surprises
LANG=3D"de_DE.utf8";
        no surprises
LANG=3D"de_LU.utf8";
        no surprises
LANG=3D"doi_IN.utf8";
        no surprises
LANG=3D"dv_MV.utf8";
        no surprises
LANG=3D"dz_BT.utf8";
        no surprises
LANG=3D"el_CY.utf8";
        no surprises
LANG=3D"el_GR.utf8";
        no surprises
LANG=3D"en_AG.utf8";
        no surprises
LANG=3D"en_AU.utf8";
        no surprises
LANG=3D"en_BW.utf8";
        no surprises
LANG=3D"en_CA.utf8";
        no surprises
LANG=3D"en_DK.utf8";
        no surprises
LANG=3D"en_GB.utf8";
        no surprises
LANG=3D"en_HK.utf8";
        no surprises
LANG=3D"en_IE.utf8";
        no surprises
LANG=3D"en_IN.utf8";
        no surprises
LANG=3D"en_NG.utf8";
        no surprises
LANG=3D"en_NZ.utf8";
        no surprises
LANG=3D"en_PH.utf8";
        no surprises
LANG=3D"en_SG.utf8";
        no surprises
LANG=3D"en_US.utf8";
        no surprises
LANG=3D"en_ZA.utf8";
        no surprises
LANG=3D"en_ZM.utf8";
        no surprises
LANG=3D"en_ZW.utf8";
        no surprises
LANG=3D"es_AR.utf8";
        no surprises
LANG=3D"es_BO.utf8";
        no surprises
LANG=3D"es_CL.utf8";
        no surprises
LANG=3D"es_CO.utf8";
        no surprises
LANG=3D"es_CR.utf8";
        no surprises
LANG=3D"es_CU.utf8";
        no surprises
LANG=3D"es_DO.utf8";
        no surprises
LANG=3D"es_EC.utf8";
        no surprises
LANG=3D"es_ES.utf8";
        no surprises
LANG=3D"es_GT.utf8";
        no surprises
LANG=3D"es_HN.utf8";
        no surprises
LANG=3D"es_MX.utf8";
        no surprises
LANG=3D"es_NI.utf8";
        no surprises
LANG=3D"es_PA.utf8";
        no surprises
LANG=3D"es_PE.utf8";
        no surprises
LANG=3D"es_PR.utf8";
        no surprises
LANG=3D"es_PY.utf8";
        no surprises
LANG=3D"es_SV.utf8";
        no surprises
LANG=3D"es_US.utf8";
        no surprises
LANG=3D"es_UY.utf8";
        no surprises
LANG=3D"es_VE.utf8";
        no surprises
LANG=3D"et_EE.utf8";
        no surprises
LANG=3D"eu_ES.utf8";
        no surprises
LANG=3D"fa_IR.utf8";
        no surprises
LANG=3D"ff_SN.utf8";
        no surprises
LANG=3D"fi_FI.utf8";
        no surprises
LANG=3D"fil_PH.utf8";
        no surprises
LANG=3D"fo_FO.utf8";
        no surprises
LANG=3D"fr_BE.utf8";
        no surprises
LANG=3D"fr_CA.utf8";
        no surprises
LANG=3D"fr_CH.utf8";
        no surprises
LANG=3D"fr_FR.utf8";
        no surprises
LANG=3D"fr_LU.utf8";
        no surprises
LANG=3D"fur_IT.utf8";
        no surprises
LANG=3D"fy_DE.utf8";
        no surprises
LANG=3D"fy_NL.utf8";
        no surprises
LANG=3D"ga_IE.utf8";
        no surprises
LANG=3D"gd_GB.utf8";
        no surprises
LANG=3D"gez_ER.utf8";
        no surprises
LANG=3D"gez_ER.utf8@abegede";
        no surprises
LANG=3D"gez_ET.utf8";
        no surprises
LANG=3D"gez_ET.utf8@abegede";
        no surprises
LANG=3D"gl_ES.utf8";
        no surprises
LANG=3D"gu_IN.utf8";
        no surprises
LANG=3D"gv_GB.utf8";
        no surprises
LANG=3D"hak_TW.utf8";
        no surprises
LANG=3D"ha_NG.utf8";
        no surprises
LANG=3D"he_IL.utf8";
        no surprises
LANG=3D"hi_IN.utf8";
        no surprises
LANG=3D"hne_IN.utf8";
        no surprises
LANG=3D"hr_HR.utf8";
        no surprises
LANG=3D"hsb_DE.utf8";
        no surprises
LANG=3D"ht_HT.utf8";
        no surprises
LANG=3D"hu_HU.utf8";
        no surprises
LANG=3D"hy_AM.utf8";
        no surprises
LANG=3D"ia_FR.utf8";
        no surprises
LANG=3D"id_ID.utf8";
        no surprises
LANG=3D"ig_NG.utf8";
        no surprises
LANG=3D"ik_CA.utf8";
        no surprises
LANG=3D"is_IS.utf8";
        no surprises
LANG=3D"it_CH.utf8";
        no surprises
LANG=3D"it_IT.utf8";
        no surprises
LANG=3D"iu_CA.utf8";
        no surprises
LANG=3D"iw_IL.utf8";
        no surprises
LANG=3D"ja_JP.utf8";
        no surprises
LANG=3D"ka_GE.utf8";
        no surprises
LANG=3D"kk_KZ.utf8";
        no surprises
LANG=3D"kl_GL.utf8";
        no surprises
LANG=3D"km_KH.utf8";
        no surprises
LANG=3D"kn_IN.utf8";
        no surprises
LANG=3D"kok_IN.utf8";
        no surprises
LANG=3D"ko_KR.utf8";
        no surprises
LANG=3D"ks_IN.utf8";
        no surprises
LANG=3D"ks_IN.utf8@devanagari";
        no surprises
LANG=3D"ku_TR.utf8";
   64 =3D @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
      ^ @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`ABCDEFGHiJKLMNOPQRSTUVWXYZ{|}~
      v @abcdefghIjklmnopqrstuvwxyz[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
      ?  ........*.................      ''''''''*'''''''''''''''''
LANG=3D"kw_GB.utf8";
        no surprises
LANG=3D"ky_KG.utf8";
        no surprises
LANG=3D"lb_LU.utf8";
        no surprises
LANG=3D"lg_UG.utf8";
        no surprises
LANG=3D"li_BE.utf8";
        no surprises
LANG=3D"lij_IT.utf8";
        no surprises
LANG=3D"li_NL.utf8";
        no surprises
LANG=3D"lo_LA.utf8";
        no surprises
LANG=3D"lt_LT.utf8";
        no surprises
LANG=3D"lv_LV.utf8";
        no surprises
LANG=3D"lzh_TW.utf8";
        no surprises
LANG=3D"mag_IN.utf8";
        no surprises
LANG=3D"mai_IN.utf8";
        no surprises
LANG=3D"mg_MG.utf8";
        no surprises
LANG=3D"mhr_RU.utf8";
        no surprises
LANG=3D"mi_NZ.utf8";
        no surprises
LANG=3D"mk_MK.utf8";
        no surprises
LANG=3D"ml_IN.utf8";
        no surprises
LANG=3D"mni_IN.utf8";
        no surprises
LANG=3D"mn_MN.utf8";
        no surprises
LANG=3D"mr_IN.utf8";
        no surprises
LANG=3D"ms_MY.utf8";
        no surprises
LANG=3D"mt_MT.utf8";
        no surprises
LANG=3D"my_MM.utf8";
        no surprises
LANG=3D"nan_TW.utf8";
        no surprises
LANG=3D"nan_TW.utf8@latin";
        no surprises
LANG=3D"nb_NO.utf8";
        no surprises
LANG=3D"nds_DE.utf8";
        no surprises
LANG=3D"nds_NL.utf8";
        no surprises
LANG=3D"ne_NP.utf8";
        no surprises
LANG=3D"nhn_MX.utf8";
        no surprises
LANG=3D"niu_NU.utf8";
        no surprises
LANG=3D"niu_NZ.utf8";
        no surprises
LANG=3D"nl_AW.utf8";
        no surprises
LANG=3D"nl_BE.utf8";
        no surprises
LANG=3D"nl_NL.utf8";
        no surprises
LANG=3D"nn_NO.utf8";
        no surprises
LANG=3D"nr_ZA.utf8";
        no surprises
LANG=3D"nso_ZA.utf8";
        no surprises
LANG=3D"oc_FR.utf8";
        no surprises
LANG=3D"om_ET.utf8";
        no surprises
LANG=3D"om_KE.utf8";
        no surprises
LANG=3D"or_IN.utf8";
        no surprises
LANG=3D"os_RU.utf8";
        no surprises
LANG=3D"pa_IN.utf8";
        no surprises
LANG=3D"pap_AN.utf8";
        no surprises
LANG=3D"pap_AW.utf8";
        no surprises
LANG=3D"pap_CW.utf8";
        no surprises
LANG=3D"pa_PK.utf8";
        no surprises
LANG=3D"pl_PL.utf8";
        no surprises
LANG=3D"ps_AF.utf8";
        no surprises
LANG=3D"pt_BR.utf8";
        no surprises
LANG=3D"pt_PT.utf8";
        no surprises
LANG=3D"quz_PE.utf8";
        no surprises
LANG=3D"raj_IN.utf8";
        no surprises
LANG=3D"ro_RO.utf8";
        no surprises
LANG=3D"ru_RU.utf8";
        no surprises
LANG=3D"ru_UA.utf8";
        no surprises
LANG=3D"rw_RW.utf8";
        no surprises
LANG=3D"sa_IN.utf8";
        no surprises
LANG=3D"sat_IN.utf8";
        no surprises
LANG=3D"sc_IT.utf8";
        no surprises
LANG=3D"sd_IN.utf8";
        no surprises
LANG=3D"sd_IN.utf8@devanagari";
        no surprises
LANG=3D"se_NO.utf8";
        no surprises
LANG=3D"shs_CA.utf8";
        no surprises
LANG=3D"sid_ET.utf8";
        no surprises
LANG=3D"si_LK.utf8";
        no surprises
LANG=3D"sk_SK.utf8";
        no surprises
LANG=3D"sl_SI.utf8";
        no surprises
LANG=3D"so_DJ.utf8";
        no surprises
LANG=3D"so_ET.utf8";
        no surprises
LANG=3D"so_KE.utf8";
        no surprises
LANG=3D"so_SO.utf8";
        no surprises
LANG=3D"sq_AL.utf8";
        no surprises
LANG=3D"sq_MK.utf8";
        no surprises
LANG=3D"sr_ME.utf8";
        no surprises
LANG=3D"sr_RS.utf8";
        no surprises
LANG=3D"sr_RS.utf8@latin";
        no surprises
LANG=3D"ss_ZA.utf8";
        no surprises
LANG=3D"st_ZA.utf8";
        no surprises
LANG=3D"sv_FI.utf8";
        no surprises
LANG=3D"sv_SE.utf8";
        no surprises
LANG=3D"sw_KE.utf8";
        no surprises
LANG=3D"sw_TZ.utf8";
        no surprises
LANG=3D"szl_PL.utf8";
        no surprises
LANG=3D"ta_IN.utf8";
        no surprises
LANG=3D"ta_LK.utf8";
        no surprises
LANG=3D"te_IN.utf8";
        no surprises
LANG=3D"tg_TJ.utf8";
        no surprises
LANG=3D"the_NP.utf8";
        no surprises
LANG=3D"th_TH.utf8";
        no surprises
LANG=3D"ti_ER.utf8";
        no surprises
LANG=3D"ti_ET.utf8";
        no surprises
LANG=3D"tig_ER.utf8";
        no surprises
LANG=3D"tk_TM.utf8";
        no surprises
LANG=3D"tl_PH.utf8";
        no surprises
LANG=3D"tn_ZA.utf8";
        no surprises
LANG=3D"tr_CY.utf8";
   64 =3D @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
      ^ @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`ABCDEFGHiJKLMNOPQRSTUVWXYZ{|}~
      v @abcdefghIjklmnopqrstuvwxyz[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
      ?  ........*.................      ''''''''*'''''''''''''''''
LANG=3D"tr_TR.utf8";
   64 =3D @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
      ^ @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`ABCDEFGHiJKLMNOPQRSTUVWXYZ{|}~
      v @abcdefghIjklmnopqrstuvwxyz[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
      ?  ........*.................      ''''''''*'''''''''''''''''
LANG=3D"ts_ZA.utf8";
        no surprises
LANG=3D"tt_RU.utf8";
        no surprises
LANG=3D"tt_RU.utf8@iqtelif";
   64 =3D @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
      ^ @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`ABCDEFGHiJKLMNOPQRSTUVWXYZ{|}~
      v @abcdefghIjklmnopqrstuvwxyz[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
      ?  ........*.................      ''''''''*'''''''''''''''''
LANG=3D"tu_IN.utf8";
        no surprises
LANG=3D"ug_CN.utf8";
        no surprises
LANG=3D"uk_UA.utf8";
        no surprises
LANG=3D"unm_US.utf8";
        no surprises
LANG=3D"ur_IN.utf8";
        no surprises
LANG=3D"ur_PK.utf8";
        no surprises
LANG=3D"uz_UZ.utf8";
        no surprises
LANG=3D"uz_UZ.utf8@cyrillic";
        no surprises
LANG=3D"ve_ZA.utf8";
        no surprises
LANG=3D"vi_VN.utf8";
        no surprises
LANG=3D"wa_BE.utf8";
        no surprises
LANG=3D"wae_CH.utf8";
        no surprises
LANG=3D"wal_ET.utf8";
        no surprises
LANG=3D"wo_SN.utf8";
        no surprises
LANG=3D"xh_ZA.utf8";
        no surprises
LANG=3D"yi_US.utf8";
        no surprises
LANG=3D"yo_NG.utf8";
        no surprises
LANG=3D"yue_HK.utf8";
        no surprises
LANG=3D"zh_CN.utf8";
        no surprises
LANG=3D"zh_HK.utf8";
        no surprises
LANG=3D"zh_SG.utf8";
        no surprises
LANG=3D"zh_TW.utf8";
        no surprises
LANG=3D"zu_ZA.utf8";
        no surprises

--001a1140d944d5dc43052569620f
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote">On W=
ed, Nov 25, 2015 at 6:45 PM, William A Rowe Jr <span dir=3D"ltr">&lt;<a hre=
f=3D"mailto:wrowe@rowe-clan.net" target=3D"_blank">wrowe@rowe-clan.net</a>&=
gt;</span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0px =
0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);bord=
er-left-style:solid;padding-left:1ex"><span class=3D""><p dir=3D"ltr">On No=
v 25, 2015 4:19 PM, &quot;Mikhail T.&quot; &lt;<a href=3D"mailto:mi%2Bthun@=
aldan.algebra.com" target=3D"_blank">mi+thun@aldan.algebra.com</a>&gt; wrot=
e:<br>
&gt;<br>&gt; Thus, I contend, using C-library will not cause invalid result=
s, and the only reason to have Apache&#39;s own implementation is performan=
ce, but not correctness.</p>
</span><p dir=3D"ltr">Well almost but wrong...</p>
<p dir=3D"ltr">The pure char-based =C3=9F processing produced no case chang=
e in my reviews of tolower/toupper in de_DE codeset. If you were to examine=
 string comparison the collation order changes substantially.</p>
<p dir=3D"ltr"> </p></blockquote><div>And more to the point, if tolower()/t=
oupper() could handle not only mbcs but multicharacter transliteration, you=
r results would have varied. =C2=A01:1 character translations have their in=
trinsic limits.</div><blockquote class=3D"gmail_quote" style=3D"margin:0px =
0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);bord=
er-left-style:solid;padding-left:1ex"><p dir=3D"ltr">That said, I&#39;m wor=
king up a comprehensive audit and other codeset/language combinations absol=
utely do.=C2=A0 Code and results forthcoming shortly.</p></blockquote><div>=
As promised, here&#39;s a quick review based on the sbcs and utf8 code page=
s in the very limited single-byte scope on my machine.</div><div><br></div>=
<div>I did not touch the following mbcs because they require &#39;shift-sta=
te&#39; to toggle into and out of specific characters and that implies a lo=
t of calculated fuzzing that I didn&#39;t have time for this week. =C2=A0(S=
ince mod_ftp explicit tls is still broken, I had no time for any of this, e=
ither ;-) =C2=A0I also didn&#39;t get to evaluating the wide chars yet that=
 fall into the traditional posix/c ascii range, which I still mean to do, a=
nd haven&#39;t yet repeated this exercise on win32 or os/x, only on a somew=
hat multinational configuration of fedora 22.</div><div><br></div><div>The =
source code is pretty rudimentary.=C2=A0 I used iconv to shove all of the r=
esulting text evaluation into utf-8 for the console/file output, it really =
plays no part in the locality equation.=C2=A0 It can be adapted for testing=
 similar on an EBCDIC box with a bit of clever coding I never got to.</div>=
<div><br></div><div><font face=3D"monospace, monospace">Untested: ja_JP.euc=
jp ja_JP.ujis japanese.euc ko_KR.euckr korean.euc zh_CN.gb18030 zh_CN.gb231=
2 zh_CN.gbk zh_HK.big5hkscs zh_SG.gb2312 zh_SG.gbk zh_TW.big5 zh_TW.euctw</=
font></div><div><font face=3D"monospace, monospace"><br></font></div><div><=
font face=3D"monospace, monospace">Tested and exceptional results noted (so=
urce code attached);</font></div><div><font face=3D"monospace, monospace"><=
br></font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;aa_DJ=
.iso88591&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=
=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monosp=
ace, monospace">LANG=3D&quot;af_ZA.iso88591&quot;;</font></div><div><font f=
ace=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font=
></div><div><font face=3D"monospace, monospace">LANG=3D&quot;an_ES.iso88591=
5&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0=
 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monos=
pace">LANG=3D&quot;ar_AE.iso88596&quot;;</font></div><div><font face=3D"mon=
ospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><di=
v><font face=3D"monospace, monospace">LANG=3D&quot;ar_BH.iso88596&quot;;</f=
ont></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;ar_DZ.iso88596&quot;;</font></div><div><font face=3D"monospace, mo=
nospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font fa=
ce=3D"monospace, monospace">LANG=3D&quot;ar_EG.iso88596&quot;;</font></div>=
<div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no sur=
prises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ar=
_IQ.iso88596&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;ar_JO.iso88596&quot;;</font></div><div><fon=
t face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</f=
ont></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ar_KW.iso88=
596&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;ar_LB.iso88596&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;ar_LY.iso88596&quot;;=
</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LA=
NG=3D&quot;ar_MA.iso88596&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;ar_OM.iso88596&quot;;</font></di=
v><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no s=
urprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;=
ar_QA.iso88596&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;ar_SA.iso88596&quot;;</font></div><div><fon=
t face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</f=
ont></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ar_SD.iso88=
596&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;ar_SY.iso88596&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;ar_TN.iso88596&quot;;=
</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LA=
NG=3D&quot;ar_YE.iso88596&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;ast_ES.iso885915&quot;;</font></=
div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no=
 surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quo=
t;be_BY.cp1251&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;bg_BG.cp1251&quot;;</font></div><div><font =
face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</fon=
t></div><div><font face=3D"monospace, monospace">LANG=3D&quot;br_FR.iso8859=
1&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0=
 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monos=
pace">LANG=3D&quot;br_FR.iso885915@euro&quot;;</font></div><div><font face=
=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></=
div><div><font face=3D"monospace, monospace">LANG=3D&quot;bs_BA.iso88592&qu=
ot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;ca_AD.iso885915&quot;;</font></div><div><font face=3D"monosp=
ace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><=
font face=3D"monospace, monospace">LANG=3D&quot;ca_ES.iso88591&quot;;</font=
></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0=
 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&=
quot;ca_ES.iso885915@euro&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;ca_FR.iso885915&quot;;</font></d=
iv><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no =
surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot=
;ca_IT.iso885915&quot;;</font></div><div><font face=3D"monospace, monospace=
">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"m=
onospace, monospace">LANG=3D&quot;cs_CZ.iso88592&quot;;</font></div><div><f=
ont face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises<=
/font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;cy_GB.iso=
885914&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;da_DK.iso88591&quot;;</font></div><div><font face=
=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></=
div><div><font face=3D"monospace, monospace">LANG=3D&quot;da_DK.iso885915&q=
uot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =
=C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monosp=
ace">LANG=3D&quot;de_AT.iso88591&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;de_AT.iso885915@euro&quot=
;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;de_BE.iso88591&quot;;</font></div><div><font face=3D"monospa=
ce, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><f=
ont face=3D"monospace, monospace">LANG=3D&quot;de_BE.iso885915@euro&quot;;<=
/font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LA=
NG=3D&quot;de_CH.iso88591&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;de_DE.iso88591&quot;;</font></di=
v><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no s=
urprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;=
de_DE.iso885915@euro&quot;;</font></div><div><font face=3D"monospace, monos=
pace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;de_LU.iso88591&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;de_L=
U.iso885915@euro&quot;;</font></div><div><font face=3D"monospace, monospace=
">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"m=
onospace, monospace">LANG=3D&quot;el_CY.iso88597&quot;;</font></div><div><f=
ont face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises<=
/font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;el_GR.iso=
88597&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;en_AU.iso88591&quot;;</font></div><div><font face=
=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></=
div><div><font face=3D"monospace, monospace">LANG=3D&quot;en_BW.iso88591&qu=
ot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;en_CA.iso88591&quot;;</font></div><div><font face=3D"monospa=
ce, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><f=
ont face=3D"monospace, monospace">LANG=3D&quot;en_DK.iso88591&quot;;</font>=
</div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =
no surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&q=
uot;en_GB.iso88591&quot;;</font></div><div><font face=3D"monospace, monospa=
ce">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D=
"monospace, monospace">LANG=3D&quot;en_GB.iso885915&quot;;</font></div><div=
><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpris=
es</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;en_HK.=
iso88591&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0=
 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace=
, monospace">LANG=3D&quot;en_IE.iso88591&quot;;</font></div><div><font face=
=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></=
div><div><font face=3D"monospace, monospace">LANG=3D&quot;en_IE.iso885915@e=
uro&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;en_NZ.iso88591&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;en_PH.iso88591&quot;;=
</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LA=
NG=3D&quot;en_SG.iso88591&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;en_US.iso88591&quot;;</font></di=
v><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no s=
urprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;=
en_US.iso885915&quot;;</font></div><div><font face=3D"monospace, monospace"=
>=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mo=
nospace, monospace">LANG=3D&quot;en_ZA.iso88591&quot;;</font></div><div><fo=
nt face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</=
font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;en_ZW.iso8=
8591&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;es_AR.iso88591&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;es_BO.iso88591&quot;;=
</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LA=
NG=3D&quot;es_CL.iso88591&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;es_CO.iso88591&quot;;</font></di=
v><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no s=
urprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;=
es_CR.iso88591&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;es_DO.iso88591&quot;;</font></div><div><fon=
t face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</f=
ont></div><div><font face=3D"monospace, monospace">LANG=3D&quot;es_EC.iso88=
591&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;es_ES.iso88591&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;es_ES.iso885915@euro&=
quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =
=C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monosp=
ace">LANG=3D&quot;es_GT.iso88591&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;es_HN.iso88591&quot;;</fo=
nt></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;es_MX.iso88591&quot;;</font></div><div><font face=3D"monospace, mo=
nospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font fa=
ce=3D"monospace, monospace">LANG=3D&quot;es_NI.iso88591&quot;;</font></div>=
<div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no sur=
prises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;es=
_PA.iso88591&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;es_PE.iso88591&quot;;</font></div><div><fon=
t face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</f=
ont></div><div><font face=3D"monospace, monospace">LANG=3D&quot;es_PR.iso88=
591&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;es_PY.iso88591&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;es_SV.iso88591&quot;;=
</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LA=
NG=3D&quot;es_US.iso88591&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;es_UY.iso88591&quot;;</font></di=
v><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no s=
urprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;=
es_VE.iso88591&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;et_EE.iso88591&quot;;</font></div><div><fon=
t face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</f=
ont></div><div><font face=3D"monospace, monospace">LANG=3D&quot;et_EE.iso88=
5915&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;eu_ES.iso88591&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;eu_ES.iso885915@euro&=
quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =
=C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monosp=
ace">LANG=3D&quot;fi_FI.iso88591&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;fi_FI.iso885915@euro&quot=
;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;fo_FO.iso88591&quot;;</font></div><div><font face=3D"monospa=
ce, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><f=
ont face=3D"monospace, monospace">LANG=3D&quot;fr_BE.iso88591&quot;;</font>=
</div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =
no surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&q=
uot;fr_BE.iso885915@euro&quot;;</font></div><div><font face=3D"monospace, m=
onospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font f=
ace=3D"monospace, monospace">LANG=3D&quot;fr_CA.iso88591&quot;;</font></div=
><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no su=
rprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;f=
r_CH.iso88591&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;fr_FR.iso88591&quot;;</font></div><div><fon=
t face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</f=
ont></div><div><font face=3D"monospace, monospace">LANG=3D&quot;fr_FR.iso88=
5915@euro&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=
=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monosp=
ace, monospace">LANG=3D&quot;fr_LU.iso88591&quot;;</font></div><div><font f=
ace=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font=
></div><div><font face=3D"monospace, monospace">LANG=3D&quot;fr_LU.iso88591=
5@euro&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;ga_IE.iso88591&quot;;</font></div><div><font face=
=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></=
div><div><font face=3D"monospace, monospace">LANG=3D&quot;ga_IE.iso885915@e=
uro&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;gd_GB.iso885915&quot;;</font></div><div><font face=3D=
"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div=
><div><font face=3D"monospace, monospace">LANG=3D&quot;gl_ES.iso88591&quot;=
;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0=
 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace">L=
ANG=3D&quot;gl_ES.iso885915@euro&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;gv_GB.iso88591&quot;;</fo=
nt></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;he_IL.iso88598&quot;;</font></div><div><font face=3D"monospace, mo=
nospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font fa=
ce=3D"monospace, monospace">LANG=3D&quot;hr_HR.iso88592&quot;;</font></div>=
<div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no sur=
prises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;hs=
b_DE.iso88592&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;hu_HU.iso88592&quot;;</font></div><div><fon=
t face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</f=
ont></div><div><font face=3D"monospace, monospace">LANG=3D&quot;hy_AM.armsc=
ii8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;id_ID.iso88591&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;is_IS.iso88591&quot;;=
</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LA=
NG=3D&quot;it_CH.iso88591&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;it_IT.iso88591&quot;;</font></di=
v><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no s=
urprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;=
it_IT.iso885915@euro&quot;;</font></div><div><font face=3D"monospace, monos=
pace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;iw_IL.iso88598&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ka_G=
E.georgianps&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;kk_KZ.pt154&quot;;</font></div><div><font f=
ace=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font=
></div><div><font face=3D"monospace, monospace">LANG=3D&quot;kl_GL.iso88591=
&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =
=C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monosp=
ace">LANG=3D&quot;ku_TR.iso88599&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A064 =3D @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcd=
efghijklmnopqrstuvwxyz{|}~=C2=A0</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 ^ @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`ABCDEFGH=
=C4=B0JKLMNOPQRSTUVWXYZ{|}~=C2=A0</font></div><div><font face=3D"monospace,=
 monospace">=C2=A0 =C2=A0 =C2=A0 v @abcdefgh=C4=B1jklmnopqrstuvwxyz[\]^_`ab=
cdefghijklmnopqrstuvwxyz{|}~=C2=A0</font></div><div><font face=3D"monospace=
, monospace">=C2=A0 =C2=A0 =C2=A0 ? =C2=A0........*................. =C2=A0=
 =C2=A0 =C2=A0&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;*&#39;&#39;&#39;&#39;=
&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39; =C2=A0 =
=C2=A0=C2=A0</font></div><div><font face=3D"monospace, monospace">=C2=A0 19=
2 =3D =C3=80=C3=81=C3=82=C3=83=C3=84=C3=85=C3=86=C3=87=C3=88=C3=89=C3=8A=C3=
=8B=C3=8C=C3=8D=C3=8E=C3=8F=C4=9E=C3=91=C3=92=C3=93=C3=94=C3=95=C3=96=C3=97=
=C3=98=C3=99=C3=9A=C3=9B=C3=9C=C4=B0=C5=9E=C3=9F=C3=A0=C3=A1=C3=A2=C3=A3=C3=
=A4=C3=A5=C3=A6=C3=A7=C3=A8=C3=A9=C3=AA=C3=AB=C3=AC=C3=AD=C3=AE=C3=AF=C4=9F=
=C3=B1=C3=B2=C3=B3=C3=B4=C3=B5=C3=B6=C3=B7=C3=B8=C3=B9=C3=BA=C3=BB=C3=BC=C4=
=B1=C5=9F=C3=BF</font></div><div><font face=3D"monospace, monospace">=C2=A0=
 =C2=A0 =C2=A0 ^ =C3=80=C3=81=C3=82=C3=83=C3=84=C3=85=C3=86=C3=87=C3=88=C3=
=89=C3=8A=C3=8B=C3=8C=C3=8D=C3=8E=C3=8F=C4=9E=C3=91=C3=92=C3=93=C3=94=C3=95=
=C3=96=C3=97=C3=98=C3=99=C3=9A=C3=9B=C3=9C=C4=B0=C5=9E=C3=9F=C3=80=C3=81=C3=
=82=C3=83=C3=84=C3=85=C3=86=C3=87=C3=88=C3=89=C3=8A=C3=8B=C3=8C=C3=8D=C3=8E=
=C3=8F=C4=9E=C3=91=C3=92=C3=93=C3=94=C3=95=C3=96=C3=B7=C3=98=C3=99=C3=9A=C3=
=9B=C3=9CI=C5=9E=C3=BF</font></div><div><font face=3D"monospace, monospace"=
>=C2=A0 =C2=A0 =C2=A0 v =C3=A0=C3=A1=C3=A2=C3=A3=C3=A4=C3=A5=C3=A6=C3=A7=C3=
=A8=C3=A9=C3=AA=C3=AB=C3=AC=C3=AD=C3=AE=C3=AF=C4=9F=C3=B1=C3=B2=C3=B3=C3=B4=
=C3=B5=C3=B6=C3=97=C3=B8=C3=B9=C3=BA=C3=BB=C3=BCi=C5=9F=C3=9F=C3=A0=C3=A1=
=C3=A2=C3=A3=C3=A4=C3=A5=C3=A6=C3=A7=C3=A8=C3=A9=C3=AA=C3=AB=C3=AC=C3=AD=C3=
=AE=C3=AF=C4=9F=C3=B1=C3=B2=C3=B3=C3=B4=C3=B5=C3=B6=C3=B7=C3=B8=C3=B9=C3=BA=
=C3=BB=C3=BC=C4=B1=C5=9F=C3=BF</font></div><div><font face=3D"monospace, mo=
nospace">=C2=A0 =C2=A0 =C2=A0 ? ....................... .....*. &#39;&#39;&=
#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&=
#39;&#39;&#39;&#39;&#39;&#39; &#39;&#39;&#39;&#39;&#39;*&#39;=C2=A0</font><=
/div><div><font face=3D"monospace, monospace">LANG=3D&quot;kw_GB.iso88591&q=
uot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =
=C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monosp=
ace">LANG=3D&quot;lg_UG.iso885910&quot;;</font></div><div><font face=3D"mon=
ospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><di=
v><font face=3D"monospace, monospace">LANG=3D&quot;lt_LT.iso885913&quot;;</=
font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LA=
NG=3D&quot;lv_LV.iso885913&quot;;</font></div><div><font face=3D"monospace,=
 monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font=
 face=3D"monospace, monospace">LANG=3D&quot;mg_MG.iso885915&quot;;</font></=
div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no=
 surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quo=
t;mi_NZ.iso885913&quot;;</font></div><div><font face=3D"monospace, monospac=
e">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"=
monospace, monospace">LANG=3D&quot;mk_MK.iso88595&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ms_MY.is=
o88591&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;mt_MT.iso88593&quot;;</font></div><div><font face=
=3D"monospace, monospace">=C2=A0 128 =3D =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0=C4=A6=CB=98=C2=A3=C2=A4 =C4=A4=C2=A7=C2=A8=C4=B0=C5=9E=C4=9E=C4=
=B4=C2=AD =C5=BB=C2=B0=C4=A7=C2=B2=C2=B3=C2=B4=C2=B5=C4=A5=C2=B7=C2=B8=C4=
=B1=C5=9F=C4=9F=C4=B5=C2=BD =C5=BC</font></div><div><font face=3D"monospace=
, monospace">=C2=A0 =C2=A0 =C2=A0 ^ =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0=C4=A6=CB=98=C2=A3=C2=A4 =C4=A4=C2=A7=C2=A8=C4=B0=C5=9E=C4=9E=C4=B4=
=C2=AD =C5=BB=C2=B0=C4=A6=C2=B2=C2=B3=C2=B4=C2=B5=C4=A4=C2=B7=C2=B8I=C5=9E=
=C4=9E=C4=B4=C2=BD =C5=BB</font></div><div><font face=3D"monospace, monospa=
ce">=C2=A0 =C2=A0 =C2=A0 v =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=C4=
=A7=CB=98=C2=A3=C2=A4 =C4=A5=C2=A7=C2=A8i=C5=9F=C4=9F=C4=B5=C2=AD =C5=BC=C2=
=B0=C4=A7=C2=B2=C2=B3=C2=B4=C2=B5=C4=A5=C2=B7=C2=B8=C4=B1=C5=9F=C4=9F=C4=B5=
=C2=BD =C5=BC</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 ? =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0. =C2=A0 =C2=A0.=
 =C2=A0*... =C2=A0. &#39; =C2=A0 =C2=A0&#39; =C2=A0*&#39;&#39;&#39; =C2=A0&=
#39;</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;nb_N=
O.iso88591&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=
=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monosp=
ace, monospace">LANG=3D&quot;nl_BE.iso88591&quot;;</font></div><div><font f=
ace=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font=
></div><div><font face=3D"monospace, monospace">LANG=3D&quot;nl_BE.iso88591=
5@euro&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;nl_NL.iso88591&quot;;</font></div><div><font face=
=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></=
div><div><font face=3D"monospace, monospace">LANG=3D&quot;nl_NL.iso885915@e=
uro&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;nn_NO.iso88591&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;(null)&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;oc_FR.iso88591&quot;;</font></div><div><font face=3D"monospace, monospac=
e">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"=
monospace, monospace">LANG=3D&quot;om_KE.iso88591&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;pl_PL.is=
o88592&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;pt_BR.iso88591&quot;;</font></div><div><font face=
=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></=
div><div><font face=3D"monospace, monospace">LANG=3D&quot;pt_PT.iso88591&qu=
ot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;pt_PT.iso885915@euro&quot;;</font></div><div><font face=3D"m=
onospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><=
div><font face=3D"monospace, monospace">LANG=3D&quot;ro_RO.iso88592&quot;;<=
/font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LA=
NG=3D&quot;ru_RU.iso88595&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;ru_RU.koi8r&quot;;</font></div><=
div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surp=
rises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ru_=
UA.koi8u&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0=
 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace=
, monospace">LANG=3D&quot;sk_SK.iso88592&quot;;</font></div><div><font face=
=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></=
div><div><font face=3D"monospace, monospace">LANG=3D&quot;sl_SI.iso88592&qu=
ot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;so_DJ.iso88591&quot;;</font></div><div><font face=3D"monospa=
ce, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><f=
ont face=3D"monospace, monospace">LANG=3D&quot;so_KE.iso88591&quot;;</font>=
</div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =
no surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&q=
uot;so_SO.iso88591&quot;;</font></div><div><font face=3D"monospace, monospa=
ce">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D=
"monospace, monospace">LANG=3D&quot;sq_AL.iso88591&quot;;</font></div><div>=
<font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprise=
s</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;st_ZA.i=
so88591&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;sv_FI.iso88591&quot;;</font></div><div><font face=
=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></=
div><div><font face=3D"monospace, monospace">LANG=3D&quot;sv_FI.iso885915@e=
uro&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;sv_SE.iso88591&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;sv_SE.iso885915&quot;=
;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0=
 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace">L=
ANG=3D&quot;tg_TJ.koi8t&quot;;</font></div><div><font face=3D"monospace, mo=
nospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font fa=
ce=3D"monospace, monospace">LANG=3D&quot;th_TH.tis620&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;tl_P=
H.iso88591&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=
=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monosp=
ace, monospace">LANG=3D&quot;tr_CY.iso88599&quot;;</font></div><div><font f=
ace=3D"monospace, monospace">=C2=A0 =C2=A064 =3D @ABCDEFGHIJKLMNOPQRSTUVWXY=
Z[\]^_`abcdefghijklmnopqrstuvwxyz{|}~=C2=A0</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 ^ @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]=
^_`ABCDEFGH=C4=B0JKLMNOPQRSTUVWXYZ{|}~=C2=A0</font></div><div><font face=3D=
"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 v @abcdefgh=C4=B1jklmnopqrstuvw=
xyz[\]^_`abcdefghijklmnopqrstuvwxyz{|}~=C2=A0</font></div><div><font face=
=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 ? =C2=A0........*...........=
...... =C2=A0 =C2=A0 =C2=A0&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;*&#39;&#=
39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#=
39; =C2=A0 =C2=A0=C2=A0</font></div><div><font face=3D"monospace, monospace=
">=C2=A0 192 =3D =C3=80=C3=81=C3=82=C3=83=C3=84=C3=85=C3=86=C3=87=C3=88=C3=
=89=C3=8A=C3=8B=C3=8C=C3=8D=C3=8E=C3=8F=C4=9E=C3=91=C3=92=C3=93=C3=94=C3=95=
=C3=96=C3=97=C3=98=C3=99=C3=9A=C3=9B=C3=9C=C4=B0=C5=9E=C3=9F=C3=A0=C3=A1=C3=
=A2=C3=A3=C3=A4=C3=A5=C3=A6=C3=A7=C3=A8=C3=A9=C3=AA=C3=AB=C3=AC=C3=AD=C3=AE=
=C3=AF=C4=9F=C3=B1=C3=B2=C3=B3=C3=B4=C3=B5=C3=B6=C3=B7=C3=B8=C3=B9=C3=BA=C3=
=BB=C3=BC=C4=B1=C5=9F=C3=BF</font></div><div><font face=3D"monospace, monos=
pace">=C2=A0 =C2=A0 =C2=A0 ^ =C3=80=C3=81=C3=82=C3=83=C3=84=C3=85=C3=86=C3=
=87=C3=88=C3=89=C3=8A=C3=8B=C3=8C=C3=8D=C3=8E=C3=8F=C4=9E=C3=91=C3=92=C3=93=
=C3=94=C3=95=C3=96=C3=97=C3=98=C3=99=C3=9A=C3=9B=C3=9C=C4=B0=C5=9E=C3=9F=C3=
=80=C3=81=C3=82=C3=83=C3=84=C3=85=C3=86=C3=87=C3=88=C3=89=C3=8A=C3=8B=C3=8C=
=C3=8D=C3=8E=C3=8F=C4=9E=C3=91=C3=92=C3=93=C3=94=C3=95=C3=96=C3=B7=C3=98=C3=
=99=C3=9A=C3=9B=C3=9CI=C5=9E=C3=BF</font></div><div><font face=3D"monospace=
, monospace">=C2=A0 =C2=A0 =C2=A0 v =C3=A0=C3=A1=C3=A2=C3=A3=C3=A4=C3=A5=C3=
=A6=C3=A7=C3=A8=C3=A9=C3=AA=C3=AB=C3=AC=C3=AD=C3=AE=C3=AF=C4=9F=C3=B1=C3=B2=
=C3=B3=C3=B4=C3=B5=C3=B6=C3=97=C3=B8=C3=B9=C3=BA=C3=BB=C3=BCi=C5=9F=C3=9F=
=C3=A0=C3=A1=C3=A2=C3=A3=C3=A4=C3=A5=C3=A6=C3=A7=C3=A8=C3=A9=C3=AA=C3=AB=C3=
=AC=C3=AD=C3=AE=C3=AF=C4=9F=C3=B1=C3=B2=C3=B3=C3=B4=C3=B5=C3=B6=C3=B7=C3=B8=
=C3=B9=C3=BA=C3=BB=C3=BC=C4=B1=C5=9F=C3=BF</font></div><div><font face=3D"m=
onospace, monospace">=C2=A0 =C2=A0 =C2=A0 ? ....................... .....*.=
 &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39=
;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39; &#39;&#39;&#39;&#39;&#39;*&#39;=
=C2=A0</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;tr=
_TR.iso88599&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A064 =3D @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuv=
wxyz{|}~=C2=A0</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 ^ @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`ABCDEFGH=C4=B0JKLMNOPQRSTU=
VWXYZ{|}~=C2=A0</font></div><div><font face=3D"monospace, monospace">=C2=A0=
 =C2=A0 =C2=A0 v @abcdefgh=C4=B1jklmnopqrstuvwxyz[\]^_`abcdefghijklmnopqrst=
uvwxyz{|}~=C2=A0</font></div><div><font face=3D"monospace, monospace">=C2=
=A0 =C2=A0 =C2=A0 ? =C2=A0........*................. =C2=A0 =C2=A0 =C2=A0&#=
39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;*&#39;&#39;&#39;&#39;&#39;&#39;&#39;&=
#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39; =C2=A0 =C2=A0=C2=A0</font=
></div><div><font face=3D"monospace, monospace">=C2=A0 192 =3D =C3=80=C3=81=
=C3=82=C3=83=C3=84=C3=85=C3=86=C3=87=C3=88=C3=89=C3=8A=C3=8B=C3=8C=C3=8D=C3=
=8E=C3=8F=C4=9E=C3=91=C3=92=C3=93=C3=94=C3=95=C3=96=C3=97=C3=98=C3=99=C3=9A=
=C3=9B=C3=9C=C4=B0=C5=9E=C3=9F=C3=A0=C3=A1=C3=A2=C3=A3=C3=A4=C3=A5=C3=A6=C3=
=A7=C3=A8=C3=A9=C3=AA=C3=AB=C3=AC=C3=AD=C3=AE=C3=AF=C4=9F=C3=B1=C3=B2=C3=B3=
=C3=B4=C3=B5=C3=B6=C3=B7=C3=B8=C3=B9=C3=BA=C3=BB=C3=BC=C4=B1=C5=9F=C3=BF</f=
ont></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 ^ =
=C3=80=C3=81=C3=82=C3=83=C3=84=C3=85=C3=86=C3=87=C3=88=C3=89=C3=8A=C3=8B=C3=
=8C=C3=8D=C3=8E=C3=8F=C4=9E=C3=91=C3=92=C3=93=C3=94=C3=95=C3=96=C3=97=C3=98=
=C3=99=C3=9A=C3=9B=C3=9C=C4=B0=C5=9E=C3=9F=C3=80=C3=81=C3=82=C3=83=C3=84=C3=
=85=C3=86=C3=87=C3=88=C3=89=C3=8A=C3=8B=C3=8C=C3=8D=C3=8E=C3=8F=C4=9E=C3=91=
=C3=92=C3=93=C3=94=C3=95=C3=96=C3=B7=C3=98=C3=99=C3=9A=C3=9B=C3=9CI=C5=9E=
=C3=BF</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =
=C2=A0 v =C3=A0=C3=A1=C3=A2=C3=A3=C3=A4=C3=A5=C3=A6=C3=A7=C3=A8=C3=A9=C3=AA=
=C3=AB=C3=AC=C3=AD=C3=AE=C3=AF=C4=9F=C3=B1=C3=B2=C3=B3=C3=B4=C3=B5=C3=B6=C3=
=97=C3=B8=C3=B9=C3=BA=C3=BB=C3=BCi=C5=9F=C3=9F=C3=A0=C3=A1=C3=A2=C3=A3=C3=
=A4=C3=A5=C3=A6=C3=A7=C3=A8=C3=A9=C3=AA=C3=AB=C3=AC=C3=AD=C3=AE=C3=AF=C4=9F=
=C3=B1=C3=B2=C3=B3=C3=B4=C3=B5=C3=B6=C3=B7=C3=B8=C3=B9=C3=BA=C3=BB=C3=BC=C4=
=B1=C5=9F=C3=BF</font></div><div><font face=3D"monospace, monospace">=C2=A0=
 =C2=A0 =C2=A0 ? ....................... .....*. &#39;&#39;&#39;&#39;&#39;&=
#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&=
#39;&#39;&#39; &#39;&#39;&#39;&#39;&#39;*&#39;=C2=A0</font></div><div><font=
 face=3D"monospace, monospace">LANG=3D&quot;uk_UA.koi8u&quot;;</font></div>=
<div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no sur=
prises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;uz=
_UZ.iso88591&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;wa_BE.iso88591&quot;;</font></div><div><fon=
t face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</f=
ont></div><div><font face=3D"monospace, monospace">LANG=3D&quot;wa_BE.iso88=
5915@euro&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=
=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monosp=
ace, monospace">LANG=3D&quot;xh_ZA.iso88591&quot;;</font></div><div><font f=
ace=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font=
></div><div><font face=3D"monospace, monospace">LANG=3D&quot;yi_US.cp1255&q=
uot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =
=C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monosp=
ace">LANG=3D&quot;zu_ZA.iso88591&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;aa_DJ.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;aa_ER.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;aa_ER.utf8@saaho&quot;;</font></div><div><f=
ont face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises<=
/font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;aa_ET.utf=
8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0=
 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monos=
pace">LANG=3D&quot;af_ZA.utf8&quot;;</font></div><div><font face=3D"monospa=
ce, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><f=
ont face=3D"monospace, monospace">LANG=3D&quot;ak_GH.utf8&quot;;</font></di=
v><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no s=
urprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;=
am_ET.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=
=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monosp=
ace, monospace">LANG=3D&quot;an_ES.utf8&quot;;</font></div><div><font face=
=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></=
div><div><font face=3D"monospace, monospace">LANG=3D&quot;anp_IN.utf8&quot;=
;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0=
 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace">L=
ANG=3D&quot;ar_AE.utf8&quot;;</font></div><div><font face=3D"monospace, mon=
ospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font fac=
e=3D"monospace, monospace">LANG=3D&quot;ar_BH.utf8&quot;;</font></div><div>=
<font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprise=
s</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ar_DZ.u=
tf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;ar_EG.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;ar_IN.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;ar_IQ.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;ar_JO.utf8&quot;;</font></div><div><font fa=
ce=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font>=
</div><div><font face=3D"monospace, monospace">LANG=3D&quot;ar_KW.utf8&quot=
;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;ar_LB.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;ar_LY.utf8&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ar_M=
A.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;ar_OM.utf8&quot;;</font></div><div><font face=3D"m=
onospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><=
div><font face=3D"monospace, monospace">LANG=3D&quot;ar_QA.utf8&quot;;</fon=
t></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;ar_SA.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;ar_SD.utf8&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ar_SS.ut=
f8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;ar_SY.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;ar_TN.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;ar_YE.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;as_IN.utf8&quot;;</font></div><div><font fa=
ce=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font>=
</div><div><font face=3D"monospace, monospace">LANG=3D&quot;ast_ES.utf8&quo=
t;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;ayc_PE.utf8&quot;;</font></div><div><font face=3D"monospace,=
 monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font=
 face=3D"monospace, monospace">LANG=3D&quot;az_AZ.utf8&quot;;</font></div><=
div><font face=3D"monospace, monospace">=C2=A0 =C2=A064 =3D @ABCDEFGHIJKLMN=
OPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~=C2=A0</font></div><div><fo=
nt face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 ^ @ABCDEFGHIJKLMNOPQR=
STUVWXYZ[\]^_`ABCDEFGHiJKLMNOPQRSTUVWXYZ{|}~=C2=A0</font></div><div><font f=
ace=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 v @abcdefghIjklmnopqrstuv=
wxyz[\]^_`abcdefghijklmnopqrstuvwxyz{|}~=C2=A0</font></div><div><font face=
=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 ? =C2=A0........*...........=
...... =C2=A0 =C2=A0 =C2=A0&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;*&#39;&#=
39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#=
39; =C2=A0 =C2=A0=C2=A0</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;be_BY.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;be_BY.utf8@latin&quot;;</font></=
div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no=
 surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quo=
t;bem_ZM.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;ber_DZ.utf8&quot;;</font></div><div><font f=
ace=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font=
></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ber_MA.utf8&qu=
ot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;bg_BG.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;bh_IN.utf8&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;bho_=
IN.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;bn_BD.utf8&quot;;</font></div><div><font face=3D"m=
onospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><=
div><font face=3D"monospace, monospace">LANG=3D&quot;bn_IN.utf8&quot;;</fon=
t></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;bo_CN.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;bo_IN.utf8&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;br_FR.ut=
f8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;brx_IN.utf8&quot;;</font></div><div><font face=3D"mon=
ospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><di=
v><font face=3D"monospace, monospace">LANG=3D&quot;bs_BA.utf8&quot;;</font>=
</div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =
no surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&q=
uot;byn_ER.utf8&quot;;</font></div><div><font face=3D"monospace, monospace"=
>=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mo=
nospace, monospace">LANG=3D&quot;ca_AD.utf8&quot;;</font></div><div><font f=
ace=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font=
></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ca_ES.utf8&quo=
t;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;ca_FR.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;ca_IT.utf8&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ce_R=
U.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;cmn_TW.utf8&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;crh_UA.utf8&quot;;</f=
ont></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A064 =3D @ABC=
DEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~=C2=A0</font></d=
iv><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 ^ @ABCDEFG=
HIJKLMNOPQRSTUVWXYZ[\]^_`ABCDEFGHiJKLMNOPQRSTUVWXYZ{|}~=C2=A0</font></div><=
div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 v @abcdefghIjk=
lmnopqrstuvwxyz[\]^_`abcdefghijklmnopqrstuvwxyz{|}~=C2=A0</font></div><div>=
<font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 ? =C2=A0........*.=
................ =C2=A0 =C2=A0 =C2=A0&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#3=
9;*&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#=
39;&#39;&#39; =C2=A0 =C2=A0=C2=A0</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;csb_PL.utf8&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;cs_CZ.utf8&quot;;</fo=
nt></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;cv_RU.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;cy_GB.utf8&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;da_DK.ut=
f8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;de_AT.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;de_BE.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;de_CH.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;de_DE.utf8&quot;;</font></div><div><font fa=
ce=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font>=
</div><div><font face=3D"monospace, monospace">LANG=3D&quot;de_LU.utf8&quot=
;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;doi_IN.utf8&quot;;</font></div><div><font face=3D"monospace,=
 monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font=
 face=3D"monospace, monospace">LANG=3D&quot;dv_MV.utf8&quot;;</font></div><=
div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surp=
rises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;dz_=
BT.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;el_CY.utf8&quot;;</font></div><div><font face=3D"m=
onospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><=
div><font face=3D"monospace, monospace">LANG=3D&quot;el_GR.utf8&quot;;</fon=
t></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;en_AG.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;en_AU.utf8&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;en_BW.ut=
f8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;en_CA.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;en_DK.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;en_GB.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;en_HK.utf8&quot;;</font></div><div><font fa=
ce=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font>=
</div><div><font face=3D"monospace, monospace">LANG=3D&quot;en_IE.utf8&quot=
;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;en_IN.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;en_NG.utf8&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;en_N=
Z.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;en_PH.utf8&quot;;</font></div><div><font face=3D"m=
onospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><=
div><font face=3D"monospace, monospace">LANG=3D&quot;en_SG.utf8&quot;;</fon=
t></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;en_US.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;en_ZA.utf8&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;en_ZM.ut=
f8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;en_ZW.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;es_AR.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;es_BO.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;es_CL.utf8&quot;;</font></div><div><font fa=
ce=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font>=
</div><div><font face=3D"monospace, monospace">LANG=3D&quot;es_CO.utf8&quot=
;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;es_CR.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;es_CU.utf8&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;es_D=
O.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;es_EC.utf8&quot;;</font></div><div><font face=3D"m=
onospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><=
div><font face=3D"monospace, monospace">LANG=3D&quot;es_ES.utf8&quot;;</fon=
t></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;es_GT.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;es_HN.utf8&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;es_MX.ut=
f8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;es_NI.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;es_PA.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;es_PE.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;es_PR.utf8&quot;;</font></div><div><font fa=
ce=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font>=
</div><div><font face=3D"monospace, monospace">LANG=3D&quot;es_PY.utf8&quot=
;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;es_SV.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;es_US.utf8&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;es_U=
Y.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;es_VE.utf8&quot;;</font></div><div><font face=3D"m=
onospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><=
div><font face=3D"monospace, monospace">LANG=3D&quot;et_EE.utf8&quot;;</fon=
t></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;eu_ES.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;fa_IR.utf8&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ff_SN.ut=
f8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;fi_FI.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;fil_PH.utf8&quot;;</font>=
</div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =
no surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&q=
uot;fo_FO.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;fr_BE.utf8&quot;;</font></div><div><font fa=
ce=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font>=
</div><div><font face=3D"monospace, monospace">LANG=3D&quot;fr_CA.utf8&quot=
;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;fr_CH.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;fr_FR.utf8&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;fr_L=
U.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;fur_IT.utf8&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;fy_DE.utf8&quot;;</fo=
nt></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;fy_NL.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;ga_IE.utf8&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;gd_GB.ut=
f8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;gez_ER.utf8&quot;;</font></div><div><font face=3D"mon=
ospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><di=
v><font face=3D"monospace, monospace">LANG=3D&quot;gez_ER.utf8@abegede&quot=
;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;gez_ET.utf8&quot;;</font></div><div><font face=3D"monospace,=
 monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font=
 face=3D"monospace, monospace">LANG=3D&quot;gez_ET.utf8@abegede&quot;;</fon=
t></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;gl_ES.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;gu_IN.utf8&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;gv_GB.ut=
f8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;hak_TW.utf8&quot;;</font></div><div><font face=3D"mon=
ospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><di=
v><font face=3D"monospace, monospace">LANG=3D&quot;ha_NG.utf8&quot;;</font>=
</div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =
no surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&q=
uot;he_IL.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;hi_IN.utf8&quot;;</font></div><div><font fa=
ce=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font>=
</div><div><font face=3D"monospace, monospace">LANG=3D&quot;hne_IN.utf8&quo=
t;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;hr_HR.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;hsb_DE.utf8&quot;;</font></div><=
div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surp=
rises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ht_=
HT.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;hu_HU.utf8&quot;;</font></div><div><font face=3D"m=
onospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><=
div><font face=3D"monospace, monospace">LANG=3D&quot;hy_AM.utf8&quot;;</fon=
t></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;ia_FR.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;id_ID.utf8&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ig_NG.ut=
f8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;ik_CA.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;is_IS.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;it_CH.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;it_IT.utf8&quot;;</font></div><div><font fa=
ce=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font>=
</div><div><font face=3D"monospace, monospace">LANG=3D&quot;iu_CA.utf8&quot=
;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;iw_IL.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;ja_JP.utf8&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ka_G=
E.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;kk_KZ.utf8&quot;;</font></div><div><font face=3D"m=
onospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><=
div><font face=3D"monospace, monospace">LANG=3D&quot;kl_GL.utf8&quot;;</fon=
t></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;km_KH.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;kn_IN.utf8&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;kok_IN.u=
tf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;ko_KR.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;ks_IN.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;ks_IN.utf8@devanagari&quot;;</font></div><div><font face=3D"monospace, m=
onospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font f=
ace=3D"monospace, monospace">LANG=3D&quot;ku_TR.utf8&quot;;</font></div><di=
v><font face=3D"monospace, monospace">=C2=A0 =C2=A064 =3D @ABCDEFGHIJKLMNOP=
QRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~=C2=A0</font></div><div><font=
 face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 ^ @ABCDEFGHIJKLMNOPQRST=
UVWXYZ[\]^_`ABCDEFGHiJKLMNOPQRSTUVWXYZ{|}~=C2=A0</font></div><div><font fac=
e=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 v @abcdefghIjklmnopqrstuvwx=
yz[\]^_`abcdefghijklmnopqrstuvwxyz{|}~=C2=A0</font></div><div><font face=3D=
"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 ? =C2=A0........*..............=
... =C2=A0 =C2=A0 =C2=A0&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;*&#39;&#39;=
&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;=
 =C2=A0 =C2=A0=C2=A0</font></div><div><font face=3D"monospace, monospace">L=
ANG=3D&quot;kw_GB.utf8&quot;;</font></div><div><font face=3D"monospace, mon=
ospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font fac=
e=3D"monospace, monospace">LANG=3D&quot;ky_KG.utf8&quot;;</font></div><div>=
<font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprise=
s</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;lb_LU.u=
tf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;lg_UG.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;li_BE.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;lij_IT.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;li_NL.utf8&quot;;</font></div><div><font fa=
ce=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font>=
</div><div><font face=3D"monospace, monospace">LANG=3D&quot;lo_LA.utf8&quot=
;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;lt_LT.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;lv_LV.utf8&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;lzh_=
TW.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;mag_IN.utf8&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;mai_IN.utf8&quot;;</f=
ont></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;mg_MG.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;mhr_RU.utf8&quot;;</font></div><div>=
<font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprise=
s</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;mi_NZ.u=
tf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;mk_MK.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;ml_IN.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;mni_IN.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;mn_MN.utf8&quot;;</font></div><div><font fa=
ce=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font>=
</div><div><font face=3D"monospace, monospace">LANG=3D&quot;mr_IN.utf8&quot=
;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;ms_MY.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;mt_MT.utf8&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;my_M=
M.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;nan_TW.utf8&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;nan_TW.utf8@latin&quo=
t;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;nb_NO.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;nds_DE.utf8&quot;;</font></div><=
div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surp=
rises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;nds=
_NL.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0=
 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace=
, monospace">LANG=3D&quot;ne_NP.utf8&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;nhn_MX.utf8&quot;;</f=
ont></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;niu_NU.utf8&quot;;</font></div><div><font face=3D"monospace, monos=
pace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;niu_NZ.utf8&quot;;</font></div><div>=
<font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprise=
s</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;nl_AW.u=
tf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;nl_BE.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;nl_NL.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;nn_NO.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;nr_ZA.utf8&quot;;</font></div><div><font fa=
ce=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font>=
</div><div><font face=3D"monospace, monospace">LANG=3D&quot;nso_ZA.utf8&quo=
t;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;oc_FR.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;om_ET.utf8&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;om_K=
E.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;or_IN.utf8&quot;;</font></div><div><font face=3D"m=
onospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><=
div><font face=3D"monospace, monospace">LANG=3D&quot;os_RU.utf8&quot;;</fon=
t></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;pa_IN.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;pap_AN.utf8&quot;;</font></div><div>=
<font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprise=
s</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;pap_AW.=
utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;pap_CW.utf8&quot;;</font></div><div><font face=3D"mon=
ospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><di=
v><font face=3D"monospace, monospace">LANG=3D&quot;pa_PK.utf8&quot;;</font>=
</div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =
no surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&q=
uot;pl_PL.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;ps_AF.utf8&quot;;</font></div><div><font fa=
ce=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font>=
</div><div><font face=3D"monospace, monospace">LANG=3D&quot;pt_BR.utf8&quot=
;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;pt_PT.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;quz_PE.utf8&quot;;</font></div><=
div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surp=
rises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;raj=
_IN.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0=
 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace=
, monospace">LANG=3D&quot;ro_RO.utf8&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;ru_RU.utf8&quot;;</fo=
nt></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;ru_UA.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;rw_RW.utf8&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;sa_IN.ut=
f8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;sat_IN.utf8&quot;;</font></div><div><font face=3D"mon=
ospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><di=
v><font face=3D"monospace, monospace">LANG=3D&quot;sc_IT.utf8&quot;;</font>=
</div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 =
no surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&q=
uot;sd_IN.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;sd_IN.utf8@devanagari&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;se_N=
O.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;shs_CA.utf8&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;sid_ET.utf8&quot;;</f=
ont></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;si_LK.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;sk_SK.utf8&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;sl_SI.ut=
f8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;so_DJ.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;so_ET.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;so_KE.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;so_SO.utf8&quot;;</font></div><div><font fa=
ce=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font>=
</div><div><font face=3D"monospace, monospace">LANG=3D&quot;sq_AL.utf8&quot=
;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;sq_MK.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;sr_ME.utf8&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;sr_R=
S.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;sr_RS.utf8@latin&quot;;</font></div><div><font fac=
e=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font><=
/div><div><font face=3D"monospace, monospace">LANG=3D&quot;ss_ZA.utf8&quot;=
;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0=
 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace">L=
ANG=3D&quot;st_ZA.utf8&quot;;</font></div><div><font face=3D"monospace, mon=
ospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font fac=
e=3D"monospace, monospace">LANG=3D&quot;sv_FI.utf8&quot;;</font></div><div>=
<font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprise=
s</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;sv_SE.u=
tf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;sw_KE.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;sw_TZ.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;szl_PL.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;ta_IN.utf8&quot;;</font></div><div><font fa=
ce=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font>=
</div><div><font face=3D"monospace, monospace">LANG=3D&quot;ta_LK.utf8&quot=
;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;te_IN.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;tg_TJ.utf8&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;the_=
NP.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;th_TH.utf8&quot;;</font></div><div><font face=3D"m=
onospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><=
div><font face=3D"monospace, monospace">LANG=3D&quot;ti_ER.utf8&quot;;</fon=
t></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;ti_ET.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;tig_ER.utf8&quot;;</font></div><div>=
<font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprise=
s</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;tk_TM.u=
tf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;tl_PH.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;tn_ZA.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;tr_CY.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A064 =3D @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuv=
wxyz{|}~=C2=A0</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 ^ @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`ABCDEFGHiJKLMNOPQRSTUVWXYZ=
{|}~=C2=A0</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 v @abcdefghIjklmnopqrstuvwxyz[\]^_`abcdefghijklmnopqrstuvwxyz{|}=
~=C2=A0</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =
=C2=A0 ? =C2=A0........*................. =C2=A0 =C2=A0 =C2=A0&#39;&#39;&#3=
9;&#39;&#39;&#39;&#39;&#39;*&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#=
39;&#39;&#39;&#39;&#39;&#39;&#39;&#39; =C2=A0 =C2=A0=C2=A0</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;tr_TR.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A064 =3D @ABCDEFGH=
IJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~=C2=A0</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 ^ @ABCDEFGHIJKL=
MNOPQRSTUVWXYZ[\]^_`ABCDEFGHiJKLMNOPQRSTUVWXYZ{|}~=C2=A0</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 v @abcdefghIjklmnop=
qrstuvwxyz[\]^_`abcdefghijklmnopqrstuvwxyz{|}~=C2=A0</font></div><div><font=
 face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 ? =C2=A0........*......=
........... =C2=A0 =C2=A0 =C2=A0&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;*&#=
39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#=
39;&#39; =C2=A0 =C2=A0=C2=A0</font></div><div><font face=3D"monospace, mono=
space">LANG=3D&quot;ts_ZA.utf8&quot;;</font></div><div><font face=3D"monosp=
ace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><=
font face=3D"monospace, monospace">LANG=3D&quot;tt_RU.utf8&quot;;</font></d=
iv><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no =
surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot=
;tt_RU.utf8@iqtelif&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A064 =3D @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopq=
rstuvwxyz{|}~=C2=A0</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 ^ @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`ABCDEFGHiJKLMNOPQRS=
TUVWXYZ{|}~=C2=A0</font></div><div><font face=3D"monospace, monospace">=C2=
=A0 =C2=A0 =C2=A0 v @abcdefghIjklmnopqrstuvwxyz[\]^_`abcdefghijklmnopqrstuv=
wxyz{|}~=C2=A0</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 ? =C2=A0........*................. =C2=A0 =C2=A0 =C2=A0&#39;&=
#39;&#39;&#39;&#39;&#39;&#39;&#39;*&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;=
&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39; =C2=A0 =C2=A0=C2=A0</font></d=
iv><div><font face=3D"monospace, monospace">LANG=3D&quot;tu_IN.utf8&quot;;<=
/font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LA=
NG=3D&quot;ug_CN.utf8&quot;;</font></div><div><font face=3D"monospace, mono=
space">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;uk_UA.utf8&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;unm_US.u=
tf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;ur_IN.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;ur_PK.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;uz_UZ.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;uz_UZ.utf8@cyrillic&quot;;</font></div><div=
><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpris=
es</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;ve_ZA.=
utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;vi_VN.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace">LANG=3D&quot;wa_BE.utf8&quot;;</font><=
/div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 n=
o surprises</font></div><div><font face=3D"monospace, monospace">LANG=3D&qu=
ot;wae_CH.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"mon=
ospace, monospace">LANG=3D&quot;wal_ET.utf8&quot;;</font></div><div><font f=
ace=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font=
></div><div><font face=3D"monospace, monospace">LANG=3D&quot;wo_SN.utf8&quo=
t;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, monospace=
">LANG=3D&quot;xh_ZA.utf8&quot;;</font></div><div><font face=3D"monospace, =
monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font =
face=3D"monospace, monospace">LANG=3D&quot;yi_US.utf8&quot;;</font></div><d=
iv><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surpr=
ises</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;yo_N=
G.utf8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace,=
 monospace">LANG=3D&quot;yue_HK.utf8&quot;;</font></div><div><font face=3D"=
monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div>=
<div><font face=3D"monospace, monospace">LANG=3D&quot;zh_CN.utf8&quot;;</fo=
nt></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 no surprises</font></div><div><font face=3D"monospace, monospace">LANG=
=3D&quot;zh_HK.utf8&quot;;</font></div><div><font face=3D"monospace, monosp=
ace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=
=3D"monospace, monospace">LANG=3D&quot;zh_SG.utf8&quot;;</font></div><div><=
font face=3D"monospace, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises=
</font></div><div><font face=3D"monospace, monospace">LANG=3D&quot;zh_TW.ut=
f8&quot;;</font></div><div><font face=3D"monospace, monospace">=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 no surprises</font></div><div><font face=3D"monospace, mo=
nospace">LANG=3D&quot;zu_ZA.utf8&quot;;</font></div><div><font face=3D"mono=
space, monospace">=C2=A0 =C2=A0 =C2=A0 =C2=A0 no surprises</font></div><div=
><font face=3D"monospace, monospace"><br></font></div></div></div></div>

--001a1140d944d5dc43052569620f--
--001a1140d944d5dc480525696211
Content-Type: text/x-csrc; charset=US-ASCII; name="q.c"
Content-Disposition: attachment; filename="q.c"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_ihfp0l3f0

I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzdGRsaWIuaD4KI2luY2x1ZGUgPGxvY2FsZS5o
PgojaW5jbHVkZSA8c3RyaW5nLmg+CiNpbmNsdWRlIDxjdHlwZS5oPgojaW5jbHVkZSA8aWNvbnYu
aD4KI2luY2x1ZGUgPGxhbmdpbmZvLmg+CgovKiBFeHByZXNzIHNob2NrIGlmIGEgY2hhcmFjdGVy
IG1hcHMgZnJvbSB0aGUgQVNDSUkvSVNPNjQ2IHJhbmdlIGludG8KICogdGhlIGhpZ2gtYml0IHJh
bmdlLCBvciB2aXNhIHZlcnNhLCBhbmQgdGhlbiBleHBsaWNpdGx5IHZlcmlmeSB0aGF0CiAqIGFs
bCBBU0NJSSB2YWx1ZXMgbWFwIGFzIGV4cGVjdGVkIGlmIGl0IGlzIGluIHRoZSBsb3dlc3QgMTI4
IGNoYXIgcGxhbmUKICogVGhpcyBkb2VzIG5vdCB3b3JrIGZvciB0ZXN0aW5nIG9uIGFuIEVCQ0RJ
QyBhcmNoaXRlY3R1cmUsIGRpZmYgcmFuZ2VzCiAqIGZvciBhbHBoYSBhbmQgJ3dlbGwga25vd24g
cG9zaXggY2hhcmFjdGVycycgYW5kIHUvbCBjYXNlIGFyZSBvZmZzZXQgYnkgNjQuCiAqLwppbnQg
c3VycHJpc2UgKGludCBjaCwgaW50IHVjLCBpbnQgbGMpCnsKICAgIGludCBsY3N1cnByaXNlID0g
KGNoID4gMTI3ICYmIGxjIDwgMTI4KSB8fCAoY2ggPCAxMjggJiYgbGMgPiAxMjcpOwogICAgaW50
IHVjc3VycHJpc2UgPSAoY2ggPiAxMjcgJiYgdWMgPCAxMjgpIHx8IChjaCA8IDEyOCAmJiB1YyA+
IDEyNyk7CiAgICBpZiAoY2ggPCAxMjgpIHsKICAgICAgICBpZiAoY2ggPj0gJ0EnICYmIGNoIDw9
ICdaJykgewogICAgICAgICAgICBpZiAobGMgIT0gY2ggKyAzMikgbGNzdXJwcmlzZSA9IDE7CiAg
ICAgICAgICAgIGlmICh1YyAhPSBjaCkgdWNzdXJwcmlzZSA9IDE7CiAgICAgICAgfSBlbHNlIGlm
IChjaCA+PSAnYScgJiYgY2ggPD0gJ3onKSB7CiAgICAgICAgICAgIGlmIChsYyAhPSBjaCkgbGNz
dXJwcmlzZSA9IDE7CiAgICAgICAgICAgIGlmICh1YyAhPSBjaCAtIDMyKSB1Y3N1cnByaXNlID0g
MTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAobGMgIT0gY2gpIGxjc3VycHJpc2Ug
PSAxOwogICAgICAgICAgICBpZiAodWMgIT0gY2gpIHVjc3VycHJpc2UgPSAxOwogICAgICAgIH0K
ICAgIH0gICAgICAKICAgIHJldHVybiBsY3N1cnByaXNlIHwgdWNzdXJwcmlzZTsKfSAgICAgCgoK
aW50IG1haW4gKGludCBhcmdjLCBjaGFyICphcmd2W10pCnsKICBpbnQgdmVyYm9zZSA9IDA7CiAg
aW50IGNvbHdpZHRoID0gNjQ7CiAgaW50IHJvdywgY29sLCB2aWV3LCBwcmVsZW47CiAgY2hhciBi
dWZbY29sd2lkdGggKyAxNl0sICpidWZjaCwgKmJ1ZnB0cjsKICBjaGFyIHBidWZbY29sd2lkdGgg
KiA0ICsgMTZdLCAqcGJ1ZnB0cjsKICBzaXplX3QgYnVmc3osIHBidWZzejsKICBpY29udl90IGNv
bnZjdHg7CiAgY2hhciAqbG9jYWxlOwogICsrYXJndiwgLS1hcmdjOwoKICBpZiAoKmFyZ3YgJiYg
KHN0cmNtcCgqYXJndiwgIi12IikgPT0gMCkpIHsKICAgIHZlcmJvc2UgPSAxOwogICAgKythcmd2
LCAtLWFyZ2M7CiAgfQoKICBkbyB7CiAgICBpbnQgdmlld2VkID0gMDsKICAgIGlmICghKmFyZ3Yp
CiAgICAgIGxvY2FsZSA9IHNldGxvY2FsZShMQ19BTEwsICIiKTsKICAgIGVsc2UKICAgICAgbG9j
YWxlID0gc2V0bG9jYWxlKExDX0FMTCwgKmFyZ3YrKyk7CiAgICBwcmludGYoIkxBTkc9XCIlc1wi
O1xuIiwgbG9jYWxlKTsKCiAgICBjb252Y3R4ID0gaWNvbnZfb3BlbigiVVRGLTgiLCBubF9sYW5n
aW5mbyhDT0RFU0VUKSk7CiAgICBpZiAoIWNvbnZjdHgpIHsKICAgICAgcHJpbnRmKCJGYWlsZWQg
dG8gaW5pdGlhbGl6ZSBcIiVzXCIgdG8gXCJVVEYtOFwiIGljb252IGNvbnRleHRcbiIsCiAgICAg
ICAgICAgICBubF9sYW5naW5mbyhDT0RFU0VUKSk7CiAgICAgIGNvbnRpbnVlOwogICAgfQoKICAg
IGZvciAocm93ID0gMDsgcm93IDwgKDI1NiAvIGNvbHdpZHRoKTsgKytyb3cpIHsKICAgICAgZm9y
IChjb2wgPSAwLCB2aWV3ID0gMDsgY29sIDwgY29sd2lkdGg7ICsrY29sKSB7CiAgICAgICAgaW50
IGxjc3VycHJpc2UsIHVjc3VycHJpc2U7CiAgICAgICAgdW5zaWduZWQgY2hhciBjaCA9IHJvdyAq
IGNvbHdpZHRoICsgY29sOwogICAgICAgIHVuc2lnbmVkIGNoYXIgbGMgPSB0b2xvd2VyKGNoKSwg
dWMgPSB0b3VwcGVyKGNoKTsKICAgICAgICBpZiAodmVyYm9zZSAmJiAobGMgIT0gY2ggfHwgdWMg
IT0gY2gpKSB7CiAgICAgICAgICB2aWV3ID0gMTsgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGlm
IChzdXJwcmlzZShjaCwgdWMsIGxjKSkgewogICAgICAgICAgdmlldyA9IDE7IGJyZWFrOwogICAg
ICAgIH0KICAgICAgfQogICAgICBpZiAoIXZpZXcpCiAgICAgICAgY29udGludWU7CgogICAgICBi
dWZjaCA9IGJ1ZiArIHNwcmludGYoYnVmLCAiJTVkID0gIiwgcm93ICogY29sd2lkdGgpOwogICAg
ICBwcmVsZW4gPSBidWZjaCAtIGJ1ZiAtIDM7CiAgICAgIGZvciAoY29sID0gMDsgY29sIDwgY29s
d2lkdGg7ICsrY29sKSB7CiAgICAgICAgdW5zaWduZWQgY2hhciBjaCA9IHJvdyAqIGNvbHdpZHRo
ICsgY29sOwogICAgICAgICooYnVmY2grKykgPSBpc3ByaW50KGNoKSA/IGNoIDogJyAnOwogICAg
ICB9CiAgICAgIGJ1ZnB0ciA9IGJ1ZjsgYnVmc3ogPSBidWZjaCAtIGJ1ZjsgcGJ1ZnB0ciA9IHBi
dWY7IHBidWZzeiA9IHNpemVvZihwYnVmKTsKICAgICAgaWNvbnYoY29udmN0eCwgJmJ1ZnB0ciwg
JmJ1ZnN6LCAmcGJ1ZnB0ciwgJnBidWZzeik7CiAgICAgIHByaW50ZigiJS4qc1xuIiwgcGJ1ZnB0
ciAtIHBidWYsIHBidWYpOwoKICAgICAgYnVmY2ggPSBidWYgKyBzcHJpbnRmKGJ1ZiwgIiUuKnMg
XiAiLCBwcmVsZW4sICIgICAgICAgICIpOwogICAgICBmb3IgKGNvbCA9IDA7IGNvbCA8IGNvbHdp
ZHRoOyArK2NvbCkgewogICAgICAgIHVuc2lnbmVkIGNoYXIgY2ggPSByb3cgKiBjb2x3aWR0aCAr
IGNvbDsKICAgICAgICB1bnNpZ25lZCBjaGFyIHVjID0gdG91cHBlcihjaCk7CiAgICAgICAgKihi
dWZjaCsrKSA9IGlzcHJpbnQodWMpID8gdWMgOiAnICc7CiAgICAgIH0KICAgICAgYnVmcHRyID0g
YnVmOyBidWZzeiA9IGJ1ZmNoIC0gYnVmOyBwYnVmcHRyID0gcGJ1ZjsgcGJ1ZnN6ID0gc2l6ZW9m
KHBidWYpOwogICAgICBpY29udihjb252Y3R4LCAmYnVmcHRyLCAmYnVmc3osICZwYnVmcHRyLCAm
cGJ1ZnN6KTsKICAgICAgcHJpbnRmKCIlLipzXG4iLCBwYnVmcHRyIC0gcGJ1ZiwgcGJ1Zik7Cgog
ICAgICBidWZjaCA9IGJ1ZiArIHNwcmludGYoYnVmLCAiJS4qcyB2ICIsIHByZWxlbiwgIiAgICAg
ICAgIik7CiAgICAgIGZvciAoY29sID0gMDsgY29sIDwgY29sd2lkdGg7ICsrY29sKSB7CiAgICAg
ICAgdW5zaWduZWQgY2hhciBjaCA9IHJvdyAqIGNvbHdpZHRoICsgY29sOwogICAgICAgIHVuc2ln
bmVkIGNoYXIgbGMgPSB0b2xvd2VyKGNoKTsKICAgICAgICAqKGJ1ZmNoKyspID0gaXNwcmludChs
YykgPyBsYyA6ICcgJzsKICAgICAgfQogICAgICBidWZwdHIgPSBidWY7IGJ1ZnN6ID0gYnVmY2gg
LSBidWY7IHBidWZwdHIgPSBwYnVmOyBwYnVmc3ogPSBzaXplb2YocGJ1Zik7CiAgICAgIGljb252
KGNvbnZjdHgsICZidWZwdHIsICZidWZzeiwgJnBidWZwdHIsICZwYnVmc3opOwogICAgICBwcmlu
dGYoIiUuKnNcbiIsIHBidWZwdHIgLSBwYnVmLCBwYnVmKTsKCiAgICAgIGJ1ZmNoID0gYnVmICsg
c3ByaW50ZihidWYsICIlLipzID8gIiwgcHJlbGVuLCAiICAgICAgICAiKTsKICAgICAgYnVmY2gg
PSBidWYgKyBwcmVsZW4gKyAzOwogICAgICBmb3IgKGNvbCA9IDA7IGNvbCA8IGNvbHdpZHRoOyAr
K2NvbCkgewogICAgICAgIHVuc2lnbmVkIGNoYXIgY2ggPSByb3cgKiBjb2x3aWR0aCArIGNvbDsK
ICAgICAgICB1bnNpZ25lZCBjaGFyIGxjID0gdG9sb3dlcihjaCk7CiAgICAgICAgdW5zaWduZWQg
Y2hhciB1YyA9IHRvdXBwZXIoY2gpOwogICAgICAgICooYnVmY2grKykgPSBzdXJwcmlzZShjaCwg
dWMsIGxjKSA/ICcqJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6
ICh1YyAhPSBjaCkgPyAnXCcnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICA6IChsYyAhPSBjaCkgPyAnLicgOiAnICc7CiAgICAgIH0KICAgICAg
YnVmcHRyID0gYnVmOyBidWZzeiA9IGJ1ZmNoIC0gYnVmOyBwYnVmcHRyID0gcGJ1ZjsgcGJ1ZnN6
ID0gc2l6ZW9mKHBidWYpOwogICAgICBpY29udihjb252Y3R4LCAmYnVmcHRyLCAmYnVmc3osICZw
YnVmcHRyLCAmcGJ1ZnN6KTsKICAgICAgcHJpbnRmKCIlLipzXG4iLCBwYnVmcHRyIC0gcGJ1Ziwg
cGJ1Zik7CiAgICAgIHZpZXdlZCA9IDE7CiAgICB9CiAgICBpZiAoIXZpZXdlZCkKICAgICAgICBw
cmludGYoIiAgICAgICAgbm8gc3VycHJpc2VzXG4iKTsKICAgIGljb252X2Nsb3NlKGNvbnZjdHgp
OwogIH0gd2hpbGUgKCphcmd2KTsKfQoK
--001a1140d944d5dc480525696211--

From dev-return-84778-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 26 04:01:01 2015
Return-Path: <dev-return-84778-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3389F18E47
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 26 Nov 2015 04:01:01 +0000 (UTC)
Received: (qmail 81171 invoked by uid 500); 26 Nov 2015 04:01:00 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 81102 invoked by uid 500); 26 Nov 2015 04:01:00 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 81092 invoked by uid 99); 26 Nov 2015 04:01:00 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Nov 2015 04:01:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 2C455C4328
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 04:01:00 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.98
X-Spam-Level: **
X-Spam-Status: No, score=2.98 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id tksNxYsNdK4n for <dev@httpd.apache.org>;
	Thu, 26 Nov 2015 04:00:55 +0000 (UTC)
Received: from mail-ig0-f174.google.com (mail-ig0-f174.google.com [209.85.213.174])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id DEBAD42AA6
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 04:00:54 +0000 (UTC)
Received: by igl9 with SMTP id 9so3586390igl.0
        for <dev@httpd.apache.org>; Wed, 25 Nov 2015 20:00:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=K2A96UBaPsPcHFFiLavRj8w4OaKuYn2Owk4AOz1pKzo=;
        b=Y8OkRFvQxbtaF3KH3v9GhqoTO15pRACSxJkI248zrEl/8YZBxuN0MV9mj4D6a6yeVe
         rI0bso8VXsZ/KIZ8p/dogGVMgZkyIMGf03tnis2bJwO0qLRk9wfE+ysvwQyOeNotlrV/
         zj5XuB0fJXyUcHVfsojqX7TY/S6KmDL+053DgEp7GnlSpS3NC7Zm3Lo4N/ds91XV7CsJ
         ZJ28ppx1P+oXroOIc25hAIb+YUG1jOKdZnInta6XKUjGDcHB/ZQNNW+iz6LaBECVfWYp
         a+tZr2bumQAGASjV8CoLl613/NQLTz20Z81Hp151v2SOWfIqgJifPK9tn8RnEm8ZpCjb
         HQ7A==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=K2A96UBaPsPcHFFiLavRj8w4OaKuYn2Owk4AOz1pKzo=;
        b=eGIDZT2z+Uz0exF57EL72MREQZcEkwnRfoDS9E3y2xhz9QXNLML6+/XCQ9bpuQuKHt
         ocXoWzWv/CkMHfr0zpUk6547B8b7tydFt6AvsGA1qf6yNcnCncOKkkY2ZnEYdK+OkH9z
         nBxdO0G4O+J/j/E/7v5xREHUzj+C2rsg2Pu+nSGZuOaZ6CnCOLHvop4GMkZ9fkPAHpTZ
         nMeb9O0KbPWmLlxf4DeUTMJUbTnEtRReptVB8ck9FNKv55u7Kc2VACUdHd6XlL1QIO+c
         iwA+0QaDdNFSekjMbpPDfe72oRrtQ1szFf/rdCsY5wIcSQ13893x/yyHIZJuM84NNMSO
         JuxQ==
X-Gm-Message-State: ALoCoQkKoDMXu5NL07Kob3J+nWoHAHv4a/e1svUMr9ZS3qY5yzY7Hz5eeURn+2FcNxytsCABGUni
MIME-Version: 1.0
X-Received: by 10.50.142.7 with SMTP id rs7mr1022370igb.35.1448510454542; Wed,
 25 Nov 2015 20:00:54 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Wed, 25 Nov 2015 20:00:54 -0800 (PST)
In-Reply-To: <CACsi25108DG0MmwVXgOx4=xoYo262FZEXhkCBEMeZMW44+-5Jw@mail.gmail.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
	<5655F722.9020608@aldan.algebra.com>
	<CACsi253c5d4b8XOOdERUqij=WR06mEnoBr9Dk808wfdfv00CcQ@mail.gmail.com>
	<5656079E.8090705@aldan.algebra.com>
	<565633CB.6060305@aldan.algebra.com>
	<CACsi250eWmbHO2PCaQjK_+0DWJuHNJU0n0rRDeYgL3ap1o8gQQ@mail.gmail.com>
	<CACsi25108DG0MmwVXgOx4=xoYo262FZEXhkCBEMeZMW44+-5Jw@mail.gmail.com>
Date: Wed, 25 Nov 2015 22:00:54 -0600
Message-ID: <CACsi251rmtgahQ1nmuoBSaLoQtwxSHwgs=D98hpJG0trhqRpKg@mail.gmail.com>
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>, APR Developer List <dev@apr.apache.org>
Content-Type: multipart/alternative; boundary=001a11c2eb5a18d49d0525699f22

--001a11c2eb5a18d49d0525699f22
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64

T24gV2VkLCBOb3YgMjUsIDIwMTUgYXQgOTo0NCBQTSwgV2lsbGlhbSBBIFJvd2UgSnIgPHdyb3dl
QHJvd2UtY2xhbi5uZXQ+DQp3cm90ZToNCg0KPiBMQU5HPSJrdV9UUi5pc284ODU5OSI7DQo+ICAg
IDY0ID0gQEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFy
c3R1dnd4eXp7fH1+DQo+ICAgICAgIF4gQEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9g
QUJDREVGR0jEsEpLTE1OT1BRUlNUVVZXWFlae3x9fg0KPiAgICAgICB2IEBhYmNkZWZnaMSxamts
bW5vcHFyc3R1dnd4eXpbXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX4NCj4gICAg
ICAgPyAgLi4uLi4uLi4qLi4uLi4uLi4uLi4uLi4uLi4gICAgICAnJycnJycnJyonJycnJycnJycn
JycnJycnJw0KPiAgIDE5MiA9IMOAw4HDgsODw4TDhcOGw4fDiMOJw4rDi8OMw43DjsOPxJ7DkcOS
w5PDlMOVw5bDl8OYw5nDmsObw5zEsMWew5/DoMOhw6LDo8Okw6XDpsOnw6jDqcOqw6vDrMOtw67D
r8Sfw7HDssOzw7TDtcO2w7fDuMO5w7rDu8O8xLHFn8O/DQo+ICAgICAgIF4gw4DDgcOCw4PDhMOF
w4bDh8OIw4nDisOLw4zDjcOOw4/EnsORw5LDk8OUw5XDlsOXw5jDmcOaw5vDnMSwxZ7Dn8OAw4HD
gsODw4TDhcOGw4fDiMOJw4rDi8OMw43DjsOPxJ7DkcOSw5PDlMOVw5bDt8OYw5nDmsObw5xJxZ7D
vw0KPiAgICAgICB2IMOgw6HDosOjw6TDpcOmw6fDqMOpw6rDq8Osw63DrsOvxJ/DscOyw7PDtMO1
w7bDl8O4w7nDusO7w7xpxZ/Dn8Ogw6HDosOjw6TDpcOmw6fDqMOpw6rDq8Osw63DrsOvxJ/DscOy
w7PDtMO1w7bDt8O4w7nDusO7w7zEscWfw78NCj4gICAgICAgPyAuLi4uLi4uLi4uLi4uLi4uLi4u
Li4uLiAuLi4uLiouICcnJycnJycnJycnJycnJycnJycnJycnICcnJycnKicNCj4NCg0KVGhlIHRy
YW5zbGF0aW9uIGhlcmUgaXMgcHJldHR5IHNpbXBsZS4gIFdlIGRpc3BsYXkgdGhlIF4gdG91cHBl
cigpIGFuZCB0aGUNCnYgdG9sb3dlcigpIHZhbHVlIG9mIGV2ZXJ5IGNoYXJhY3Rlci4gIEZvciB0
aGUgc3VtbWFyeSBsaW5lICc/JywgaW4gbm9ybWFsDQpvciAtdiB2ZXJib3NlIG1vZGUsICcgJyBz
dWdnZXN0cyBubyB0cmFuc2xhdGlvbnMgYXQgYWxsLCAnLicgbWVhbnMgdGhpcyBjaA0KaGFzIGEg
bG93ZXIgY2FzZSB0cmFuc2xhdGlvbiwgJyBtZWFucyB0aGUgY2MgaGFzIGFuIHVwcGVyIGNhc2Ug
dHJhbnNsYXRpb24sDQpidXQgSSBzdHJpcCBtb3N0IG9mIHRoZXNlIGxpbmVzIG91dCB3aGlsZSBz
ZWFyY2hpbmcgZm9yIHRoZSBleGNlcHRpb25hbA0KY2FzZXMuLi4NCg0KJyonIGlzIHRoZSBzdXJw
cmlzaW5nIGNhc2UsIHRoZSBoaWdoIGJpdCBjaGFyYWN0ZXIgdHJhbnNsYXRpb24gZmFsbHMgaW50
bw0KdGhlIGFuY2llbnQgMC0xMjcgY29kZSBwbGFuZSwgb3IgYSBjaCAwLTEyNyBmYWxscyBpbnRv
IHRoZSBoaWdoIGJpdCBwbGFuZSwNCm9yIGFueXRoaW5nIHdpdGhpbiB0aGUgdHJhZGl0aW9uYWwg
MC0xMjcgY29kZSBwbGFuZSB0cmFuc2xhdGVzIGludG8gYW4NCnVuZXhwZWN0ZWQgcG9zaXRpb24u
DQoNCkxBTkc9Im10X01ULmlzbzg4NTkzIjsNCiAgMTI4ID0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgxKbLmMKjwqQgxKTCp8KoxLDFnsSexLTCrSDFu8KwxKfCssKzwrTCtcSlwrfC
uMSxxZ/En8S1wr0gxbwNCiAgICAgIF4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
xKbLmMKjwqQgxKTCp8KoxLDFnsSexLTCrSDFu8KwxKbCssKzwrTCtcSkwrfCuEnFnsSexLTCvSDF
uw0KICAgICAgdiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDEp8uYwqPCpCDEpcKn
wqhpxZ/En8S1wq0gxbzCsMSnwrLCs8K0wrXEpcK3wrjEscWfxJ/EtcK9IMW8DQogICAgICA/ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4gICAgLiAgKi4uLiAgLiAnICAgICcgICon
JycgICcNCg0KVGhlIGxhc3QgZXhhbXBsZSBhYm92ZSBzZWVtcyB0byBpbmRpY2F0ZSBhbiBpc3By
aW50KCkgdmFsaWRhdGlvbiBlcnJvcg0Kb3IgdXRmLTggbWlzLWFzc2lnbm1lbnQgaW4gaWNvbnYs
IHNvbWV3aGVyZSBpbiB0aGUgbGFzdCAxNiBjaGFyYWN0ZXJzDQpvZiB0aGlzIGNvZGUgdGFibGUs
IGFwcGFyZW50bHkgYmV0d2VlbiDEtMKtIGFuZCDFuyA6KQ0K
--001a11c2eb5a18d49d0525699f22
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: base64

PGRpdiBkaXI9Imx0ciI+PGRpdiBjbGFzcz0iZ21haWxfZXh0cmEiPjxkaXYgY2xhc3M9ImdtYWls
X3F1b3RlIj5PbiBXZWQsIE5vdiAyNSwgMjAxNSBhdCA5OjQ0IFBNLCBXaWxsaWFtIEEgUm93ZSBK
ciA8c3BhbiBkaXI9Imx0ciI+Jmx0OzxhIGhyZWY9Im1haWx0bzp3cm93ZUByb3dlLWNsYW4ubmV0
IiB0YXJnZXQ9Il9ibGFuayI+d3Jvd2VAcm93ZS1jbGFuLm5ldDwvYT4mZ3Q7PC9zcGFuPiB3cm90
ZTo8YnI+PGJsb2NrcXVvdGUgY2xhc3M9ImdtYWlsX3F1b3RlIiBzdHlsZT0ibWFyZ2luOjBweCAw
cHggMHB4IDAuOGV4O2JvcmRlci1sZWZ0LXdpZHRoOjFweDtib3JkZXItbGVmdC1jb2xvcjpyZ2Io
MjA0LDIwNCwyMDQpO2JvcmRlci1sZWZ0LXN0eWxlOnNvbGlkO3BhZGRpbmctbGVmdDoxZXgiPjxk
aXYgZGlyPSJsdHIiPjxkaXYgY2xhc3M9ImdtYWlsX2V4dHJhIj48ZGl2IGNsYXNzPSJnbWFpbF9x
dW90ZSI+PGRpdj48Zm9udCBmYWNlPSJtb25vc3BhY2UsIG1vbm9zcGFjZSI+TEFORz0mcXVvdDtr
dV9UUi5pc284ODU5OSZxdW90Ozs8L2ZvbnQ+PC9kaXY+PGRpdj48Zm9udCBmYWNlPSJtb25vc3Bh
Y2UsIG1vbm9zcGFjZSI+wqAgwqA2NCA9IEBBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5f
YGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fsKgPC9mb250PjwvZGl2PjxkaXY+PGZvbnQg
ZmFjZT0ibW9ub3NwYWNlLCBtb25vc3BhY2UiPsKgIMKgIMKgIF4gQEFCQ0RFRkdISUpLTE1OT1BR
UlNUVVZXWFlaW1xdXl9gQUJDREVGR0jEsEpLTE1OT1BRUlNUVVZXWFlae3x9fsKgPC9mb250Pjwv
ZGl2PjxkaXY+PGZvbnQgZmFjZT0ibW9ub3NwYWNlLCBtb25vc3BhY2UiPsKgIMKgIMKgIHYgQGFi
Y2RlZmdoxLFqa2xtbm9wcXJzdHV2d3h5eltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6
e3x9fsKgPC9mb250PjwvZGl2PjxkaXY+PGZvbnQgZmFjZT0ibW9ub3NwYWNlLCBtb25vc3BhY2Ui
PsKgIMKgIMKgID8gwqAuLi4uLi4uLiouLi4uLi4uLi4uLi4uLi4uLiDCoCDCoCDCoCYjMzk7JiMz
OTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsqJiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5
OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsm
IzM5OyDCoCDCoMKgPC9mb250PjwvZGl2PjxkaXY+PGZvbnQgZmFjZT0ibW9ub3NwYWNlLCBtb25v
c3BhY2UiPsKgIDE5MiA9IMOAw4HDgsODw4TDhcOGw4fDiMOJw4rDi8OMw43DjsOPxJ7DkcOSw5PD
lMOVw5bDl8OYw5nDmsObw5zEsMWew5/DoMOhw6LDo8Okw6XDpsOnw6jDqcOqw6vDrMOtw67Dr8Sf
w7HDssOzw7TDtcO2w7fDuMO5w7rDu8O8xLHFn8O/PC9mb250PjwvZGl2PjxkaXY+PGZvbnQgZmFj
ZT0ibW9ub3NwYWNlLCBtb25vc3BhY2UiPsKgIMKgIMKgIF4gw4DDgcOCw4PDhMOFw4bDh8OIw4nD
isOLw4zDjcOOw4/EnsORw5LDk8OUw5XDlsOXw5jDmcOaw5vDnMSwxZ7Dn8OAw4HDgsODw4TDhcOG
w4fDiMOJw4rDi8OMw43DjsOPxJ7DkcOSw5PDlMOVw5bDt8OYw5nDmsObw5xJxZ7DvzwvZm9udD48
L2Rpdj48ZGl2Pjxmb250IGZhY2U9Im1vbm9zcGFjZSwgbW9ub3NwYWNlIj7CoCDCoCDCoCB2IMOg
w6HDosOjw6TDpcOmw6fDqMOpw6rDq8Osw63DrsOvxJ/DscOyw7PDtMO1w7bDl8O4w7nDusO7w7xp
xZ/Dn8Ogw6HDosOjw6TDpcOmw6fDqMOpw6rDq8Osw63DrsOvxJ/DscOyw7PDtMO1w7bDt8O4w7nD
usO7w7zEscWfw788L2ZvbnQ+PC9kaXY+PGRpdj48Zm9udCBmYWNlPSJtb25vc3BhY2UsIG1vbm9z
cGFjZSI+wqAgwqAgwqAgPyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLiAuLi4uLiouICYjMzk7JiMz
OTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7
JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsgJiMzOTsm
IzM5OyYjMzk7JiMzOTsmIzM5OyomIzM5O8KgPC9mb250PjwvZGl2PjxkaXY+PGZvbnQgZmFjZT0i
bW9ub3NwYWNlLCBtb25vc3BhY2UiPjwvZm9udD48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2Js
b2NrcXVvdGU+PC9kaXY+PGJyPjwvZGl2PjxkaXYgY2xhc3M9ImdtYWlsX2V4dHJhIj5UaGUgdHJh
bnNsYXRpb24gaGVyZSBpcyBwcmV0dHkgc2ltcGxlLsKgIFdlIGRpc3BsYXkgdGhlIF4gdG91cHBl
cigpIGFuZCB0aGUgdiB0b2xvd2VyKCkgdmFsdWUgb2YgZXZlcnkgY2hhcmFjdGVyLsKgIEZvciB0
aGUgc3VtbWFyeSBsaW5lICYjMzk7PyYjMzk7LCBpbiBub3JtYWwgb3IgLXYgdmVyYm9zZSBtb2Rl
LCAmIzM5OyAmIzM5OyBzdWdnZXN0cyBubyB0cmFuc2xhdGlvbnMgYXQgYWxsLCAmIzM5Oy4mIzM5
OyBtZWFucyB0aGlzIGNoIGhhcyBhIGxvd2VyIGNhc2UgdHJhbnNsYXRpb24sICYjMzk7IG1lYW5z
IHRoZSBjYyBoYXMgYW4gdXBwZXIgY2FzZSB0cmFuc2xhdGlvbiwgYnV0IEkgc3RyaXAgbW9zdCBv
ZiB0aGVzZSBsaW5lcyBvdXQgd2hpbGUgc2VhcmNoaW5nIGZvciB0aGUgZXhjZXB0aW9uYWwgY2Fz
ZXMuLi48L2Rpdj48ZGl2IGNsYXNzPSJnbWFpbF9leHRyYSI+PGJyPjwvZGl2PjxkaXYgY2xhc3M9
ImdtYWlsX2V4dHJhIj4mIzM5OyomIzM5OyBpcyB0aGUgc3VycHJpc2luZyBjYXNlLCB0aGUgaGln
aCBiaXQgY2hhcmFjdGVyIHRyYW5zbGF0aW9uIGZhbGxzIGludG8gdGhlIGFuY2llbnQgMC0xMjcg
Y29kZSBwbGFuZSwgb3IgYSBjaCAwLTEyNyBmYWxscyBpbnRvIHRoZSBoaWdoIGJpdCBwbGFuZSwg
b3IgYW55dGhpbmcgd2l0aGluIHRoZSB0cmFkaXRpb25hbCAwLTEyNyBjb2RlIHBsYW5lIHRyYW5z
bGF0ZXMgaW50byBhbiB1bmV4cGVjdGVkIHBvc2l0aW9uLjwvZGl2PjxkaXYgY2xhc3M9ImdtYWls
X2V4dHJhIj48YnI+PC9kaXY+PGRpdiBjbGFzcz0iZ21haWxfZXh0cmEiPjxkaXYgc3R5bGU9ImZv
bnQtc2l6ZToxMi44cHgiPjxmb250IGZhY2U9Im1vbm9zcGFjZSwgbW9ub3NwYWNlIj5MQU5HPSZx
dW90O210X01ULmlzbzg4NTkzJnF1b3Q7OzwvZm9udD48L2Rpdj48ZGl2IHN0eWxlPSJmb250LXNp
emU6MTIuOHB4Ij48Zm9udCBmYWNlPSJtb25vc3BhY2UsIG1vbm9zcGFjZSI+wqAgMTI4ID0gwqAg
wqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqDEpsuYwqPCpCDE
pMKnwqjEsMWexJ7EtMKtIMW7wrDEp8KywrPCtMK1xKXCt8K4xLHFn8SfxLXCvSDFvDwvZm9udD48
L2Rpdj48ZGl2IHN0eWxlPSJmb250LXNpemU6MTIuOHB4Ij48Zm9udCBmYWNlPSJtb25vc3BhY2Us
IG1vbm9zcGFjZSI+wqAgwqAgwqAgXiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDC
oCDCoCDCoCDCoCDCoCDCoMSmy5jCo8KkIMSkwqfCqMSwxZ7EnsS0wq0gxbvCsMSmwrLCs8K0wrXE
pMK3wrhJxZ7EnsS0wr0gxbs8L2ZvbnQ+PC9kaXY+PGRpdiBzdHlsZT0iZm9udC1zaXplOjEyLjhw
eCI+PGZvbnQgZmFjZT0ibW9ub3NwYWNlLCBtb25vc3BhY2UiPsKgIMKgIMKgIHYgwqAgwqAgwqAg
wqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqDEp8uYwqPCpCDEpcKnwqhp
xZ/En8S1wq0gxbzCsMSnwrLCs8K0wrXEpcK3wrjEscWfxJ/EtcK9IMW8PC9mb250PjwvZGl2Pjxk
aXYgc3R5bGU9ImZvbnQtc2l6ZToxMi44cHgiPjxmb250IGZhY2U9Im1vbm9zcGFjZSwgbW9ub3Nw
YWNlIj7CoCDCoCDCoCA/IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKg
IMKgIMKgIMKgLiDCoCDCoC4gwqAqLi4uIMKgLiAmIzM5OyDCoCDCoCYjMzk7IMKgKiYjMzk7JiMz
OTsmIzM5OyDCoCYjMzk7PC9mb250PjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9ImdtYWlsX2V4dHJh
Ij48YnI+PC9kaXY+PGRpdiBjbGFzcz0iZ21haWxfZXh0cmEiPlRoZSBsYXN0IGV4YW1wbGUgYWJv
dmUgc2VlbXMgdG8gaW5kaWNhdGUgYW4gaXNwcmludCgpIHZhbGlkYXRpb24gZXJyb3LCoDwvZGl2
PjxkaXYgY2xhc3M9ImdtYWlsX2V4dHJhIj5vciB1dGYtOCBtaXMtYXNzaWdubWVudCBpbiBpY29u
diwgc29tZXdoZXJlIGluIHRoZSBsYXN0IDE2IGNoYXJhY3RlcnPCoDwvZGl2PjxkaXYgY2xhc3M9
ImdtYWlsX2V4dHJhIj5vZiB0aGlzIGNvZGUgdGFibGUsIGFwcGFyZW50bHkgYmV0d2VlbsKgPHNw
YW4gc3R5bGU9ImZvbnQtZmFtaWx5Om1vbm9zcGFjZSxtb25vc3BhY2U7Zm9udC1zaXplOjEyLjhw
eCI+xLTCrSBhbmQgxbs8L3NwYW4+wqA6KTwvZGl2PjxkaXYgY2xhc3M9ImdtYWlsX2V4dHJhIj48
YnI+PC9kaXY+PC9kaXY+DQo=
--001a11c2eb5a18d49d0525699f22--

From dev-return-84779-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 26 13:32:43 2015
Return-Path: <dev-return-84779-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A7414182AC
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 26 Nov 2015 13:32:43 +0000 (UTC)
Received: (qmail 53070 invoked by uid 500); 26 Nov 2015 13:32:35 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 52986 invoked by uid 500); 26 Nov 2015 13:32:33 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 52963 invoked by uid 99); 26 Nov 2015 13:32:32 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Nov 2015 13:32:32 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 64EBCC600D
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 13:32:32 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level:
X-Spam-Status: No, score=0.001 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id LmIPn5iD1auf for <dev@httpd.apache.org>;
	Thu, 26 Nov 2015 13:32:21 +0000 (UTC)
Received: from resqmta-ch2-07v.sys.comcast.net (resqmta-ch2-07v.sys.comcast.net [69.252.207.39])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 715E62050F
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 13:32:20 +0000 (UTC)
Received: from resomta-ch2-03v.sys.comcast.net ([69.252.207.99])
	by resqmta-ch2-07v.sys.comcast.net with comcast
	id mDXw1r00529Cfhx01DYCWH; Thu, 26 Nov 2015 13:32:12 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-03v.sys.comcast.net with comcast
	id mDYC1r0012U0RYt01DYCdB; Thu, 26 Nov 2015 13:32:12 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <56562DAF.2080702@wanadoo.fr>
Date: Thu, 26 Nov 2015 08:32:11 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <ED44CABD-6835-440B-9007-FF50A9251C9B@jaguNET.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com> <9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com> <CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com> <34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com> <CACsi251DTcmki1__9OeBrYrnn_dyrdoo2rL3g6ZspXPx+_nNyg@mail.gmail.com> <56562DAF.2080702@wanadoo.fr>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448544732;
	bh=IKeIr03M98Xpyw9mVWSc3O4x/sSmu6JS6TsDw2njEtg=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=ruZJT/LMRVchrvhpA1np6hFpPXVjuw/1ZHMNzXJylU7WQr61UkTlr+s9eLvEBp22s
	 gExFHTvo88gY2N41y9wN13EMWX2a+q+H0V29+ECtdZJYL4kjKgFN8Mk2dFKmg2J9In
	 35V1Pas4lmFTXgqOb1Iwje+QgB/jPkbPVmzMEP3Jns2ogpF5y+AIhUde8mOxZbTGdj
	 Zlkwewt9rbE5cyU3lj1OscLlP/9vZi0rMPZETPZpT8/FHL0oIB1Oh9qYuIeKAu8lCs
	 dgANB/sjy4IrAmqTbnAedbwK2K61bulVxBbSAST7/2HaHylShRVcCyOemu1jxLPzzQ
	 nnvW4zxLqA0TA==

ascii? ascii? ascii?????

:-)

> On Nov 25, 2015, at 4:52 PM, Christophe JAILLET =
<christophe.jaillet@wanadoo.fr> wrote:
>=20
> Hi,
>=20
> just in case off, gnome as a set of function g_ascii_...
> (see =
https://developer.gnome.org/glib/2.28/glib-String-Utility-Functions.html#g=
-ascii-strcasecmp)
>=20
>>=20
>> I'm also waiting for feedback about the naming convention, I'd like =
to get
>> this into APR yesterday and start building on it, but it's hard to =
name our
>> generic-posix tolower/toupper until we agree on the naming scheme :)
>>=20
>>=20
>=20


From dev-return-84780-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 26 13:38:17 2015
Return-Path: <dev-return-84780-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 38A96182EA
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 26 Nov 2015 13:38:17 +0000 (UTC)
Received: (qmail 69044 invoked by uid 500); 26 Nov 2015 13:38:16 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 68962 invoked by uid 500); 26 Nov 2015 13:38:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 68952 invoked by uid 99); 26 Nov 2015 13:38:16 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Nov 2015 13:38:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 3EADA180ACC
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 13:38:16 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.653
X-Spam-Level:
X-Spam-Status: No, score=0.653 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, SPF_NEUTRAL=0.652,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id AXiDJ5sAGgzi for <dev@httpd.apache.org>;
	Thu, 26 Nov 2015 13:38:03 +0000 (UTC)
Received: from resqmta-ch2-04v.sys.comcast.net (resqmta-ch2-04v.sys.comcast.net [69.252.207.36])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 6B3A1428DC
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 13:38:03 +0000 (UTC)
Received: from resomta-ch2-12v.sys.comcast.net ([69.252.207.108])
	by resqmta-ch2-04v.sys.comcast.net with comcast
	id mDcj1r0022LrikM01Ddxq6; Thu, 26 Nov 2015 13:37:57 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-ch2-12v.sys.comcast.net with comcast
	id mDdw1r00C2U0RYt01Ddw0x; Thu, 26 Nov 2015 13:37:57 +0000
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <00ce01d127ce$121901b0$364b0510$@qqmail.nl>
Date: Thu, 26 Nov 2015 08:37:56 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <BEC946BC-C9CE-47F2-9742-93E1616EF883@jaguNET.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com> <9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com> <CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com> <34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com> <CACsi251DTcmki1__9OeBrYrnn_dyrdoo2rL3g6ZspXPx+_nNyg@mail.gmail.com> <56562DAF.2080702@wanadoo.fr> <CACsi251YLaMUZ1ZGnZBp9brhNNMt6_Bj5vyAeN25rw8-Zq73kA@mail.gmail.com> <00ce01d127ce$121901b0$364b0510$@qqmail.nl>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448545077;
	bh=bIYPa2bdgG3UZHMFCQLsfQuAdNr+vNwKwS5nJs2Ec+c=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=RknocnWjnV9a3TBgdpRwoNKdYOwLmUfRH50OYCo9hqFkN1PAxozXtFptBIR/lSvdU
	 ikRmAEHyMgweWhx6KSg0+Ah79Sd1TuMH3DBcqDz4YPeZMz/YzDCl3jF0ZDXNQJA5L3
	 9fe5FA29wJy3W3yghb4iWQ7l3NmQ7jqRlAqlOq5KL8awVIpBMH+CNn462wElm1QQJU
	 hD15iTTC3BaF0/AzAZg2ejN9ePJE4GV9rqdPArhAgvgNG+ldkrXYmE7tTmXdGcMDzW
	 9AfDns9DVX25zmru9H4UmcdmETsmqHNdkpjqGfJ2vGsaWz+XRJkhxodR+KMvAxa1J6
	 3sJpeptAz6VQA==

Yeah, SVN's 'svn_cstring_casecmp' and how it's used is
pretty much inline with my thoughts on how httpd would
use ours...

> On Nov 25, 2015, at 5:10 PM, Bert Huijben <bert@qqmail.nl> wrote:
>=20
> We have a set of similar comparison functions in Subversion. I=E2=80=99m=
 pretty sure we already had these in the time we still had ebcdic =
support on trunk.
> (We removed that support years ago, but the code should still live on =
a branch)
> =20
> Bert
> =20
> From: William A Rowe Jr [mailto:wrowe@rowe-clan.net]=20
> Sent: woensdag 25 november 2015 22:55
> To: httpd <dev@httpd.apache.org>
> Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
> =20
> On Wed, Nov 25, 2015 at 3:52 PM, Christophe JAILLET =
<christophe.jaillet@wanadoo.fr> wrote:
>> Hi,
>>=20
>> just in case off, gnome as a set of function g_ascii_...
>> (see =
https://developer.gnome.org/glib/2.28/glib-String-Utility-Functions.html#g=
-ascii-strcasecmp)
> =20
> Interesting, does anyone know offhand whether these perform the =
expected
> or the stated behavior under EBCDIC environments?=20


From dev-return-84781-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 26 14:40:10 2015
Return-Path: <dev-return-84781-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8055F185EC
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 26 Nov 2015 14:40:10 +0000 (UTC)
Received: (qmail 3710 invoked by uid 500); 26 Nov 2015 14:40:04 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 3633 invoked by uid 500); 26 Nov 2015 14:40:04 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 3623 invoked by uid 99); 26 Nov 2015 14:40:04 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Nov 2015 14:40:04 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 4122EC0FDE
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 14:40:04 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 3
X-Spam-Level: ***
X-Spam-Status: No, score=3 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, HTML_MESSAGE=3,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=rowe-clan-net.20150623.gappssmtp.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id GRUZzTejy6DL for <dev@httpd.apache.org>;
	Thu, 26 Nov 2015 14:39:52 +0000 (UTC)
Received: from mail-io0-f181.google.com (mail-io0-f181.google.com [209.85.223.181])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 68A5A22F20
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 14:39:52 +0000 (UTC)
Received: by ioir85 with SMTP id r85so89873802ioi.1
        for <dev@httpd.apache.org>; Thu, 26 Nov 2015 06:39:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=rowe-clan-net.20150623.gappssmtp.com; s=20150623;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=rHXNl6E38HrXiYqJbQHJU5mE000FLVoMb7aUWNbT5Rc=;
        b=fixyFQ46qz2I1Bv7vTPQRprAzeZAtErxP8Nvw/b//zRH6DSkYEzzNzI4DwvcYRQXJX
         KBd19uhWtKjg8uATHSiZJcr/LmznwRe/t9sbM6wmU1kFFkLz8EZvDZoVazbVCBl4NOvy
         8bbXzo33eeedaRGXfr7CI7CMIBgOCgGsMV11xpD73NgisZo/kdMkAMsMrGOicL8YQfjJ
         COVAdSkwhUmCHfMSbh4Oj/FHGUU4f30Cxs0bPKbsYJuJIVOBvbPx48ZblUq1WHD7jE7q
         9PECN4mL5TY/xx/RwbKp6T57WMv7q7yW2kuoE1f15HfIJOakOsY5W97XJ5rxYo89JS1b
         1L8A==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=rHXNl6E38HrXiYqJbQHJU5mE000FLVoMb7aUWNbT5Rc=;
        b=mazs3aOjSd+RRiRb6TDctSpdftzsqMajFkeBZJIj75geKAzBy3pHD3FHtDkR1uF0YM
         HGqVsLX05Ovud6g37zUsr7MQcDdznFTB7XJ9HMU8flA7oQSz2TrNO6oJ1Qf60r5XsmJh
         MWFoqNlhJb+jAp3ODVf5BHvjEgZ8kMXrH/EqqBR2W2yLLhNV22nYSaA1ld1MdNwfe3hM
         K2H9Nuq+QKJoQ0L3074YVnOCjpHzdax8uui+2FOKmDqJonUjakFQHXpPk0xcWrZk0l7L
         4EhUv8SSZfhX4gwnKXiEbXXyR9BgpBTVzqalK6TdWqi1KiZlmytJGLH27t5llzZqL9JD
         T1Zg==
X-Gm-Message-State: ALoCoQkU9iV9tlO3RkOHiGtxIhxw+FxdqWFG7e9j3ADvlc+VeOeqf6MiLePp8tYZgLbL6bX4UltC
MIME-Version: 1.0
X-Received: by 10.107.156.6 with SMTP id f6mr6341924ioe.163.1448548791616;
 Thu, 26 Nov 2015 06:39:51 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Thu, 26 Nov 2015 06:39:51 -0800 (PST)
Received: by 10.107.62.136 with HTTP; Thu, 26 Nov 2015 06:39:51 -0800 (PST)
In-Reply-To: <BEC946BC-C9CE-47F2-9742-93E1616EF883@jaguNET.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
	<9F4E6A21-9544-4F43-834A-F8DCF20693C9@jaguNET.com>
	<CACsi251WHHQtc++VUjU+VmOPmkeJmYZzMFninyGktp36CmS-uw@mail.gmail.com>
	<34DA4EC2-039B-40D5-B176-6E0F8517DC5E@jaguNET.com>
	<CACsi251DTcmki1__9OeBrYrnn_dyrdoo2rL3g6ZspXPx+_nNyg@mail.gmail.com>
	<56562DAF.2080702@wanadoo.fr>
	<CACsi251YLaMUZ1ZGnZBp9brhNNMt6_Bj5vyAeN25rw8-Zq73kA@mail.gmail.com>
	<00ce01d127ce$121901b0$364b0510$@qqmail.nl>
	<BEC946BC-C9CE-47F2-9742-93E1616EF883@jaguNET.com>
Date: Thu, 26 Nov 2015 08:39:51 -0600
Message-ID: <CACsi251eBQZxjvSfVy32PCDJUcsSKOR1_i0hvfQduoFS4FoYDA@mail.gmail.com>
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: William A Rowe Jr <wrowe@rowe-clan.net>
To: httpd <dev@httpd.apache.org>
Content-Type: multipart/alternative; boundary=001a1140ccc02a1fbc0525728c2a

--001a1140ccc02a1fbc0525728c2a
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Sounds right... Actually a fusion between svn_cstring_* and several
existing ap_ and apr_ functions would be useful.

SVN folk, any objection to APR appropriating these API's?  20/20 hindsight,
is apr_cstring_ or shorter apr_cstr_ the way to go here?  You all had to
use the thing so I trust your preferences.  Either expresses locale C in my
mind, so they work for me.
On Nov 26, 2015 07:38, "Jim Jagielski" <jim@jagunet.com> wrote:

> Yeah, SVN's 'svn_cstring_casecmp' and how it's used is
> pretty much inline with my thoughts on how httpd would
> use ours...
>
> > On Nov 25, 2015, at 5:10 PM, Bert Huijben <bert@qqmail.nl> wrote:
> >
> > We have a set of similar comparison functions in Subversion. I=E2=80=99=
m pretty
> sure we already had these in the time we still had ebcdic support on trun=
k.
> > (We removed that support years ago, but the code should still live on a
> branch)
> >
> > Bert
> >
> > From: William A Rowe Jr [mailto:wrowe@rowe-clan.net]
> > Sent: woensdag 25 november 2015 22:55
> > To: httpd <dev@httpd.apache.org>
> > Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
> >
> > On Wed, Nov 25, 2015 at 3:52 PM, Christophe JAILLET <
> christophe.jaillet@wanadoo.fr> wrote:
> >> Hi,
> >>
> >> just in case off, gnome as a set of function g_ascii_...
> >> (see
> https://developer.gnome.org/glib/2.28/glib-String-Utility-Functions.html#=
g-ascii-strcasecmp
> )
> >
> > Interesting, does anyone know offhand whether these perform the expecte=
d
> > or the stated behavior under EBCDIC environments?
>
>

--001a1140ccc02a1fbc0525728c2a
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<p dir=3D"ltr">Sounds right... Actually a fusion between svn_cstring_* and =
several existing ap_ and apr_ functions would be useful.</p>
<p dir=3D"ltr">SVN folk, any objection to APR appropriating these API&#39;s=
?=C2=A0 20/20 hindsight, is apr_cstring_ or shorter apr_cstr_ the way to go=
 here?=C2=A0 You all had to use the thing so I trust your preferences.=C2=
=A0 Either expresses locale C in my mind, so they work for me.</p>
<div class=3D"gmail_quote">On Nov 26, 2015 07:38, &quot;Jim Jagielski&quot;=
 &lt;<a href=3D"mailto:jim@jagunet.com">jim@jagunet.com</a>&gt; wrote:<br t=
ype=3D"attribution"><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0=
 .8ex;border-left:1px #ccc solid;padding-left:1ex">Yeah, SVN&#39;s &#39;svn=
_cstring_casecmp&#39; and how it&#39;s used is<br>
pretty much inline with my thoughts on how httpd would<br>
use ours...<br>
<br>
&gt; On Nov 25, 2015, at 5:10 PM, Bert Huijben &lt;<a href=3D"mailto:bert@q=
qmail.nl">bert@qqmail.nl</a>&gt; wrote:<br>
&gt;<br>
&gt; We have a set of similar comparison functions in Subversion. I=E2=80=
=99m pretty sure we already had these in the time we still had ebcdic suppo=
rt on trunk.<br>
&gt; (We removed that support years ago, but the code should still live on =
a branch)<br>
&gt;<br>
&gt; Bert<br>
&gt;<br>
&gt; From: William A Rowe Jr [mailto:<a href=3D"mailto:wrowe@rowe-clan.net"=
>wrowe@rowe-clan.net</a>]<br>
&gt; Sent: woensdag 25 november 2015 22:55<br>
&gt; To: httpd &lt;<a href=3D"mailto:dev@httpd.apache.org">dev@httpd.apache=
.org</a>&gt;<br>
&gt; Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)<br>
&gt;<br>
&gt; On Wed, Nov 25, 2015 at 3:52 PM, Christophe JAILLET &lt;<a href=3D"mai=
lto:christophe.jaillet@wanadoo.fr">christophe.jaillet@wanadoo.fr</a>&gt; wr=
ote:<br>
&gt;&gt; Hi,<br>
&gt;&gt;<br>
&gt;&gt; just in case off, gnome as a set of function g_ascii_...<br>
&gt;&gt; (see <a href=3D"https://developer.gnome.org/glib/2.28/glib-String-=
Utility-Functions.html#g-ascii-strcasecmp" rel=3D"noreferrer" target=3D"_bl=
ank">https://developer.gnome.org/glib/2.28/glib-String-Utility-Functions.ht=
ml#g-ascii-strcasecmp</a>)<br>
&gt;<br>
&gt; Interesting, does anyone know offhand whether these perform the expect=
ed<br>
&gt; or the stated behavior under EBCDIC environments?<br>
<br>
</blockquote></div>

--001a1140ccc02a1fbc0525728c2a--

From dev-return-84782-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 26 17:36:16 2015
Return-Path: <dev-return-84782-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1D0DB18BDF
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 26 Nov 2015 17:36:16 +0000 (UTC)
Received: (qmail 63932 invoked by uid 500); 26 Nov 2015 17:36:15 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 63858 invoked by uid 500); 26 Nov 2015 17:36:15 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 63848 invoked by uid 99); 26 Nov 2015 17:36:15 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Nov 2015 17:36:15 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id D08A0C0845
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 17:36:14 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id MNSKqSs2DnGZ for <dev@httpd.apache.org>;
	Thu, 26 Nov 2015 17:36:13 +0000 (UTC)
Received: from mail-wm0-f54.google.com (mail-wm0-f54.google.com [74.125.82.54])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 893EA22F1D
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 17:36:12 +0000 (UTC)
Received: by wmec201 with SMTP id c201so40534209wme.0
        for <dev@httpd.apache.org>; Thu, 26 Nov 2015 09:36:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:thread-index
         :content-language;
        bh=LmCcgN71cmLm6oatZlc4vDKIgPK/AXz1rlZkvN0/+K0=;
        b=IFC/J/lDlrSz3nr4UeWU2LOqSd98vD4g4xY585AtnjeZsVwSquxNofHoeVhQuxBEu0
         yd8b3yZYBkA5VIZZ5EfK0uj6OQWK5rFXaKUVhisSfkvcDjYwnwxMRXXKoFFFvsLXX7WZ
         owLyXCHXdw2l20bRnii6UeAMP9nrgJEnFLX1k=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :thread-index:content-language;
        bh=LmCcgN71cmLm6oatZlc4vDKIgPK/AXz1rlZkvN0/+K0=;
        b=d9OYaptNleEnRoTMoGiH6r5v7C+FK/cMhNpnrI8j2Qy2X+2MZcaQFHSKTT3vPD/rK2
         k9fDQdZMDZqfcw5cb3H6IUx0xK+8tqRixnvKbzS5PqxQDUjRZ7luOkyIlG7+/UGdPnL3
         iT/Su57Nes+YacNwwoENdZqaCOzsQicNxVYohLKMmmHxQputJh3CxrOImxZJMYnmQIBf
         Z1JRAdNVvESRYqKUzB/ftrLC40QO29dnfLjJEkaVr8/FyOkynu9Hsl7cq/iHayrTHbmb
         MFUPpyXkMUOT6e8MndrsRt1MnqvRZF+3BOzcazmrqagcuYWm7NiLkA0ZQepJ4EQscG6q
         W00g==
X-Gm-Message-State: ALoCoQkXMPTMHKPJKQxUKYWA7F0pIWvg1eBIoaQXQUyYy8igDV2Kx+L/71HyLMk5N5FNXp5a3ML2
X-Received: by 10.28.195.10 with SMTP id t10mr4849215wmf.11.1448559371141;
        Thu, 26 Nov 2015 09:36:11 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id uz5sm29006230wjc.8.2015.11.26.09.36.10
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 26 Nov 2015 09:36:10 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <076f01d12320$7e7d1fb0$7b775f10$@qqmail.nl> <5A92C9AE-2C53-42F3-A4B1-5019A92EF6F6@greenbytes.de> <01e301d12726$716c79b0$54456d10$@qqmail.nl> <966EAA27-78D7-42C6-A5BE-581408C18459@greenbytes.de> <00b101d127ca$8fd43060$af7c9120$@qqmail.nl>
In-Reply-To: <00b101d127ca$8fd43060$af7c9120$@qqmail.nl>
Subject: RE: H2 stream dependencies
Date: Thu, 26 Nov 2015 18:36:00 +0100
Message-ID: <021501d12870$eb41a0d0$c1c4e270$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AQHV/QgOI/sUUA2RfgLMoIZiYUV50QF0Ev7lAmwEtqcBl1M4QgGNyrvznmy8zBA=
Content-Language: nl

> -----Original Message-----
> From: Bert Huijben [mailto:bert@qqmail.nl]
> Sent: woensdag 25 november 2015 22:45
> To: dev@httpd.apache.org
> Subject: RE: H2 stream dependencies


> * 2 of these are related to HTTP/1.1 status lines where we no longer have
> access to the reason field.
> * 2 others somehow run against an httpd limit when I only configure 16
> threads (while running 4 tests in parallel; each with potentially multiple
> connections)
> * and the last one is an interesting crash in the serf code.

The current status is two failures. That last crash is one I reported
earlier, and ... 

The other appears to be related to httpd having a higher limit on total
header size when using http/2 than when using http/1.1. 
Is that an intended behavior change?

The original limit was set a long time as a security measure?
(But perhaps a new default is used for http/2)


And another thing: gor my testing it would be useful if httpd would somehow
start logging how it received the requests... Currently it still logs
HTTP/1.1 in the access logs even for h2 requests.

And when I enable more logging I get an error that Content-Length -1 doesn't
match the actual length on most of my requests... (I don't pass
Content-Length in all those cases)

	Bert


From dev-return-84783-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 26 18:25:15 2015
Return-Path: <dev-return-84783-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8E53D18CE4
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 26 Nov 2015 18:25:15 +0000 (UTC)
Received: (qmail 23167 invoked by uid 500); 26 Nov 2015 18:25:15 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 23086 invoked by uid 500); 26 Nov 2015 18:25:15 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 23076 invoked by uid 99); 26 Nov 2015 18:25:15 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Nov 2015 18:25:15 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id B5454C0F3F
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 18:25:14 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.183
X-Spam-Level: *
X-Spam-Status: No, score=1.183 tagged_above=-999 required=6.31
	tests=[FSL_HELO_BARE_IP_2=0.873, HEADER_FROM_DIFFERENT_DOMAINS=0.001,
	RCVD_NUMERIC_HELO=0.865, RP_MATCHES_RCVD=-0.554, SPF_HELO_PASS=-0.001,
	SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id B_TZ4PTZRUT2 for <dev@httpd.apache.org>;
	Thu, 26 Nov 2015 18:25:13 +0000 (UTC)
Received: from plane.gmane.org (plane.gmane.org [80.91.229.3])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 691C842B0D
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 18:25:13 +0000 (UTC)
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <apache-dev@m.gmane.org>)
	id 1a21E8-000329-9o
	for dev@httpd.apache.org; Thu, 26 Nov 2015 19:25:04 +0100
Received: from 188.88.99.132 ([188.88.99.132])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Thu, 26 Nov 2015 19:25:04 +0100
Received: from phpdev by 188.88.99.132 with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Thu, 26 Nov 2015 19:25:04 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: dev@httpd.apache.org
From: Jan Ehrhardt <phpdev@ehrhardt.nl>
Subject: Re: H2 stream dependencies
Date: Thu, 26 Nov 2015 19:19:43 +0100
Lines: 16
Message-ID: <b9je5blntgg683jqmejng2tm09pv9uk2ck@4ax.com>
References: <076f01d12320$7e7d1fb0$7b775f10$@qqmail.nl> <5A92C9AE-2C53-42F3-A4B1-5019A92EF6F6@greenbytes.de> <01e301d12726$716c79b0$54456d10$@qqmail.nl> <966EAA27-78D7-42C6-A5BE-581408C18459@greenbytes.de> <00b101d127ca$8fd43060$af7c9120$@qqmail.nl> <021501d12870$eb41a0d0$c1c4e270$@qqmail.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: 188.88.99.132
X-Newsreader: Forte Agent 3.3/32.846

Bert Huijben in gmane.comp.apache.devel (Thu, 26 Nov 2015 18:36:00 +0100):
>And another thing: gor my testing it would be useful if httpd would somehow
>start logging how it received the requests... Currently it still logs
>HTTP/1.1 in the access logs even for h2 requests.

Apache 2.4.18-dev does log HTTP/2:

127.0.0.1 - - [26/Nov/2015:12:03:26 +0100] "GET /index.php HTTP/2" 200
3596 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:42.0) Gecko/20100101
Firefox/42.0"

Logformat:
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\"
\"%{User-Agent}i\"" combined

Jan


From dev-return-84784-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 26 20:31:42 2015
Return-Path: <dev-return-84784-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 51DDE18069
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 26 Nov 2015 20:31:42 +0000 (UTC)
Received: (qmail 8504 invoked by uid 500); 26 Nov 2015 20:31:41 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 8428 invoked by uid 500); 26 Nov 2015 20:31:41 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 8418 invoked by uid 99); 26 Nov 2015 20:31:41 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Nov 2015 20:31:41 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id EBA80C08AC
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 20:31:40 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.799
X-Spam-Level: *
X-Spam-Status: No, score=1.799 tagged_above=-999 required=6.31
	tests=[KAM_ASCII_DIVIDERS=0.8, KAM_LAZY_DOMAIN_SECURITY=1,
	RCVD_IN_MSPIKE_H2=-0.001] autolearn=disabled
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id h6d8iJMb-eAE for <dev@httpd.apache.org>;
	Thu, 26 Nov 2015 20:31:39 +0000 (UTC)
Received: from smtp.smtpout.orange.fr (smtp06.smtpout.orange.fr [80.12.242.128])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 5FA6942AA6
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 20:31:39 +0000 (UTC)
Received: from [127.0.0.1] ([92.140.231.6])
	by mwinf5d11 with ME
	id mLXW1r00Z08wHE403LXXVA; Thu, 26 Nov 2015 21:31:31 +0100
X-ME-Helo: [127.0.0.1]
X-ME-Date: Thu, 26 Nov 2015 21:31:31 +0100
X-ME-IP: 92.140.231.6
Subject: Re: svn commit: r1706669 - in /httpd/httpd/trunk: ./ include/
 modules/http/ modules/ssl/ server/ server/mpm/event/ server/mpm/motorz/
 server/mpm/simple/
To: dev@httpd.apache.org
References: <20151004101052.A6E193A0234@svn01-us-west.apache.org>
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Message-ID: <56576C20.8000403@wanadoo.fr>
Date: Thu, 26 Nov 2015 21:31:28 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.4.0
MIME-Version: 1.0
In-Reply-To: <20151004101052.A6E193A0234@svn01-us-west.apache.org>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 151126-1, 26/11/2015), Outbound message
X-Antivirus-Status: Clean

Le 04/10/2015 12:10, minfrin@apache.org a crit :
> Author: minfrin
> Date: Sun Oct  4 10:10:51 2015
> New Revision: 1706669
>
> URL: http://svn.apache.org/viewvc?rev=1706669&view=rev
> Log:
> core: Extend support for asynchronous write completion from the
> network filter to any connection or request filter.
[...]
> Modified: httpd/httpd/trunk/server/util_filter.c
> URL: http://svn.apache.org/viewvc/httpd/httpd/trunk/server/util_filter.c?rev=1706669&r1=1706668&r2=1706669&view=diff
> ==============================================================================
> --- httpd/httpd/trunk/server/util_filter.c (original)
> +++ httpd/httpd/trunk/server/util_filter.c Sun Oct  4 10:10:51 2015
[...]
> +AP_DECLARE(apr_status_t) ap_filter_reinstate_brigade(ap_filter_t *f,
> +                                                     apr_bucket_brigade *bb,
> +                                                     apr_bucket **flush_upto)
> +{
[...]
> +
> +    *flush_upto = NULL;
> +
[...]
> +                ap_log_cerror(APLOG_MARK, APLOG_TRACE8, 0, f->c,
> +                              "seen in brigade%s: bytes: %" APR_SIZE_T_FMT
> +                              ", non-file bytes: %" APR_SIZE_T_FMT ", eor "
> +                              "buckets: %d, morphing buckets: %d",
> +                              flush_upto == NULL ? " so far"				<----------------------
> +                                                 : " since last flush point",
> +                              bytes_in_brigade,
> +                              non_file_bytes_in_brigade,
> +                              eor_buckets_in_brigade,
> +                              morphing_bucket_in_brigade);
> +            }
> +            /*
> +             * Defer the actual blocking write to avoid doing many writes.
> +             */
> +            *flush_upto = next;

Shouldn't the 'flush_upto' indicated here be a '*flush_upto'?
Obviously there is no impact, just TRACE8 message accuracy.

(spotted by smatch)

CJ

From dev-return-84785-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Thu Nov 26 20:42:30 2015
Return-Path: <dev-return-84785-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EBBCA180B8
	for <apmail-httpd-dev-archive@www.apache.org>; Thu, 26 Nov 2015 20:42:29 +0000 (UTC)
Received: (qmail 20015 invoked by uid 500); 26 Nov 2015 20:42:29 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 19941 invoked by uid 500); 26 Nov 2015 20:42:29 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 19931 invoked by uid 99); 26 Nov 2015 20:42:29 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Nov 2015 20:42:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id C14C01A07C9
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 20:42:28 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id x-XkkZ4JZp4U for <dev@httpd.apache.org>;
	Thu, 26 Nov 2015 20:42:27 +0000 (UTC)
Received: from mail-wm0-f45.google.com (mail-wm0-f45.google.com [74.125.82.45])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 9F0842059C
	for <dev@httpd.apache.org>; Thu, 26 Nov 2015 20:42:26 +0000 (UTC)
Received: by wmvv187 with SMTP id v187so45686041wmv.1
        for <dev@httpd.apache.org>; Thu, 26 Nov 2015 12:42:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:thread-index
         :content-language;
        bh=e9jd9hIlS02POJzfkzWjkBoZiFrd69nk9OSHqx4St5o=;
        b=hHLRlkIAwT67A/HUdAedOOIWOScBZQRZARm17izxgSozpf+eHPGXMgQbC2uCghwaHa
         MAl7zcXfsEB60iX1fZtxhx5iVau4iQn1c38KI8vx181R4m2dRn5+Pi1mFwCI3F/Ihn6s
         Cv1OO5N5Kp/cDsCNfE9eOmRRQo1K6ICbXYWbM=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :thread-index:content-language;
        bh=e9jd9hIlS02POJzfkzWjkBoZiFrd69nk9OSHqx4St5o=;
        b=AMs6Cegv0q0rY/T2hR+qf4HDGAjvy+mJIe7UYhdRyBVFyppMu+au+AFaWF+CT1iJha
         cz3GAidN7wJ1ZNSAvfEjghgFosh0SIGxXKve0DRiEZWrczc+GpWaiaqtoCOO6CeUv5VM
         QKwtqhfccbpEltt+gQIVku4hw+Mrv0z4kd6bN6S60DOKxgExFwOkY459r8Navun/o/aB
         ikXkHcIzKSLAHcCQGjUrCM+aBpXsD5CbMzWOtzaxcTyS6mJr0EEj86r92RJ/eP6xAoom
         MflOaNai5xJiBCI0G67bzQZ5NwqxmRMiWbHgQRHY2/MSkR1cGP12f32XNlVh+h++S82+
         /6dg==
X-Gm-Message-State: ALoCoQlghsXbnK+9PQJlt4O8D1H5EERZNkeI/gU2VXh2zntkfPBPYe/5U0pp2nmNhIj4r49DE97z
X-Received: by 10.194.86.161 with SMTP id q1mr48948823wjz.88.1448570546151;
        Thu, 26 Nov 2015 12:42:26 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id u4sm29526762wjz.4.2015.11.26.12.42.25
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 26 Nov 2015 12:42:25 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <076f01d12320$7e7d1fb0$7b775f10$@qqmail.nl> <5A92C9AE-2C53-42F3-A4B1-5019A92EF6F6@greenbytes.de> <01e301d12726$716c79b0$54456d10$@qqmail.nl> <966EAA27-78D7-42C6-A5BE-581408C18459@greenbytes.de> <00b101d127ca$8fd43060$af7c9120$@qqmail.nl> <021501d12870$eb41a0d0$c1c4e270$@qqmail.nl> <b9je5blntgg683jqmejng2tm09pv9uk2ck@4ax.com>
In-Reply-To: <b9je5blntgg683jqmejng2tm09pv9uk2ck@4ax.com>
Subject: RE: H2 stream dependencies
Date: Thu, 26 Nov 2015 21:42:15 +0100
Message-ID: <026401d1288a$f009b160$d01d1420$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AQHV/QgOI/sUUA2RfgLMoIZiYUV50QF0Ev7lAmwEtqcBl1M4QgGNyrvzAWM/BxQCxaEgnZ5LqsaQ
Content-Language: nl



> -----Original Message-----
> From: Jan Ehrhardt [mailto:phpdev@ehrhardt.nl]
> Sent: donderdag 26 november 2015 19:20
> To: dev@httpd.apache.org
> Subject: Re: H2 stream dependencies
> 
> Bert Huijben in gmane.comp.apache.devel (Thu, 26 Nov 2015 18:36:00
> +0100):
> >And another thing: gor my testing it would be useful if httpd would
> somehow
> >start logging how it received the requests... Currently it still logs
> >HTTP/1.1 in the access logs even for h2 requests.
> 
> Apache 2.4.18-dev does log HTTP/2:
> 
> 127.0.0.1 - - [26/Nov/2015:12:03:26 +0100] "GET /index.php HTTP/2" 200
> 3596 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:42.0) Gecko/20100101
> Firefox/42.0"
> 
> Logformat:
>     LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\"
> \"%{User-Agent}i\"" combined

Nice...

Thanks,

I'll switch to testing with 2.4.x then.

	Bert
> 
> Jan



From dev-return-84786-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 27 12:56:32 2015
Return-Path: <dev-return-84786-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 99829187F2
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 27 Nov 2015 12:56:32 +0000 (UTC)
Received: (qmail 33722 invoked by uid 500); 27 Nov 2015 12:56:32 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 33651 invoked by uid 500); 27 Nov 2015 12:56:32 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 33641 invoked by uid 99); 27 Nov 2015 12:56:32 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Nov 2015 12:56:32 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id A8296C0E02
	for <dev@httpd.apache.org>; Fri, 27 Nov 2015 12:56:31 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.879
X-Spam-Level: **
X-Spam-Status: No, score=2.879 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01,
	SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id SWUl_9fT49Yd for <dev@httpd.apache.org>;
	Fri, 27 Nov 2015 12:56:26 +0000 (UTC)
Received: from mail-wm0-f48.google.com (mail-wm0-f48.google.com [74.125.82.48])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 64DEE2026B
	for <dev@httpd.apache.org>; Fri, 27 Nov 2015 12:56:26 +0000 (UTC)
Received: by wmec201 with SMTP id c201so69413186wme.0
        for <dev@httpd.apache.org>; Fri, 27 Nov 2015 04:56:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:subject:date:message-id:mime-version:content-type
         :thread-index:content-language;
        bh=LzKqF1sZRgQfVQuzRvU1ny7IieisqIMtytps82xZ/cg=;
        b=h6Ih9borivvkTajDOQnuQJsa5GybCZx9s65Sh8oaxvbjaGJUfuI1s+n4Auz1f4FhlF
         TNAlhLNPXnYlQLRrdYCmOL6Kiyhoq2e0CT6U3tqqGLoLBnL9iLMDOZgMJHNdKJSuOEo6
         afEgtM7BfT7jNNfC1/eMuAOSYlouS+4kShaKY=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:subject:date:message-id:mime-version
         :content-type:thread-index:content-language;
        bh=LzKqF1sZRgQfVQuzRvU1ny7IieisqIMtytps82xZ/cg=;
        b=UpDWSYlOEPjMx4i2G2XPMTa9gD3aNu1yO6wxnE4ImuSfX56BXaWA8wdR4y7NCCFqNW
         4AY6mexEDxP5eCoxOshFmL0FELbeWxfsI722ZIng7ZM+xcjSODRfUHBf7rEaYB5TVZgF
         XDXuUDW6/LySAD9fInWqjkoZVrWIJ0FfT7yQW2A2ih0Uqy2T+d3W9ONpXbVUVn2AXkXI
         xrneiNc6g89r5sdtA6caOWv/2RSr0qxU6ZS3SKbdcpj3lNAifZKdmDWpcMwudfMvYwx4
         z4uRfCJJldExEG/X0V0gLf6BVcJSW/rb8QR2VOe+sxvZi87vBdmGJYOFTnE/oKAZf4uD
         mw8Q==
X-Gm-Message-State: ALoCoQn+6/ObJFXHF5eSWn1ThcOA5eX3M3dvuqGpko7b20s+lFMsr6jbYHGaKI6z/iXyJkUPvY6Y
X-Received: by 10.28.143.11 with SMTP id r11mr10806272wmd.28.1448628979595;
        Fri, 27 Nov 2015 04:56:19 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id z1sm32569730wje.35.2015.11.27.04.56.18
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 27 Nov 2015 04:56:19 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
Subject: No H2 Window updates!
Date: Fri, 27 Nov 2015 13:56:06 +0100
Message-ID: <02f401d12912$fcba4130$f62ec390$@qqmail.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_02F5_01D1291B.5E7F1E60"
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AdEpEvr7JoThxKs2QGW0A4wrVrWm2g==
Content-Language: nl

This is a multipart message in MIME format.

------=_NextPart_000_02F5_01D1291B.5E7F1E60
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

                Hi,

 

I finally took the time to diagnose that segfault I had, and I think it
points to a serious bug in httpd.

 

To summarize this: I don't receive window updates.

 

In this specific test we set a very huge amount of small requests (bodies of
95 and 113 bytes), until we get out of the 65535 (or 65536) bytes of window
space I get from httpd at the connection level.

(Each stream doesn't get near its limit. I can try if I can receive window
updates there. but currently I can't reproduce ever receiving a window
update)

 

 

Originally this caused a segfault in my code, but I fixed that one. But now
I'm just stuck waiting to receive a window update from httpd.

 

 

My last testing was against 2.4.x (to get the 2.4.18 goodness)

 

                Bert


------=_NextPart_000_02F5_01D1291B.5E7F1E60
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><META =
HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 15 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:#954F72;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri",sans-serif;
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri",sans-serif;
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:70.85pt 70.85pt 70.85pt 70.85pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DNL =
link=3D"#0563C1" vlink=3D"#954F72"><div class=3DWordSection1><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Hi,<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal><span =
lang=3DEN-US>I finally took the time to diagnose that segfault I had, =
and I think it points to a serious bug in httpd.<o:p></o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US>To summarize this: I don&#8217;t =
receive window updates.<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US>In this specific test we set a very huge amount of small =
requests (bodies of 95 and 113 bytes), until we get out of the 65535 (or =
65536) bytes of window space I get from httpd at the connection =
level.<o:p></o:p></span></p><p class=3DMsoNormal><span =
lang=3DEN-US>(Each stream doesn&#8217;t get near its limit. I can try if =
I can receive window updates there&#8230; but currently I can&#8217;t =
reproduce ever receiving a window update)<o:p></o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US>Originally this caused a segfault =
in my code, but I fixed that one. But now I&#8217;m just stuck waiting =
to receive a window update from httpd&#8230;<o:p></o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US>My last testing was against 2.4.x =
(to get the 2.4.18 goodness)<o:p></o:p></span></p><p =
class=3DMsoNormal><span lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span =
lang=3DEN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
Bert<o:p></o:p></span></p></div></body></html>
------=_NextPart_000_02F5_01D1291B.5E7F1E60--


From dev-return-84787-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 27 13:23:52 2015
Return-Path: <dev-return-84787-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0249F18893
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 27 Nov 2015 13:23:52 +0000 (UTC)
Received: (qmail 66912 invoked by uid 500); 27 Nov 2015 13:23:51 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 66851 invoked by uid 500); 27 Nov 2015 13:23:51 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 66839 invoked by uid 99); 27 Nov 2015 13:23:50 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Nov 2015 13:23:50 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id C80761A2446
	for <dev@httpd.apache.org>; Fri, 27 Nov 2015 13:23:49 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id HIz2xraVx8Be for <dev@httpd.apache.org>;
	Fri, 27 Nov 2015 13:23:42 +0000 (UTC)
Received: from mail-wm0-f44.google.com (mail-wm0-f44.google.com [74.125.82.44])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id DF4E420231
	for <dev@httpd.apache.org>; Fri, 27 Nov 2015 13:23:41 +0000 (UTC)
Received: by wmuu63 with SMTP id u63so55550201wmu.0
        for <dev@httpd.apache.org>; Fri, 27 Nov 2015 05:23:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:thread-index
         :content-language;
        bh=9WHwB5O37VAZ5QVWBXDMXFsw5ANOhtCai97fEDqR16g=;
        b=hUBuzMHB5IgMXry3bK9Kp4sF4EocMg7BOen+BfDzvLj59J0Szd4AFkWtP93pDEjz79
         PUdLeC4aOaurJoJKYaUR8aA8dFEADndqXYpVvDPuB+AzAxNWVBFT59alH0TsgB+5lucf
         wmIoaYNTInmmKEmlZc3LXI4fdddM/WIQGauuk=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :thread-index:content-language;
        bh=9WHwB5O37VAZ5QVWBXDMXFsw5ANOhtCai97fEDqR16g=;
        b=T7J/Dx+GO+5kyILba7nO5MNMBUc8dPWmLPNMyGnUsEv/AlsF7p5pdDtOSYpkUtQ2vY
         qOiTlME/y+H64ONnVN8zPXcJd+KDxZaP3fmcC3tVn6qyA+FDs6qpx14wAl2GrpI+aVvA
         CiSeAICwHennpdlb0wv9gqdqq8rM7Nam17XguTmGu15advzSsw9vBjypGfgD3QhkV0Rm
         8+fekvLeHosoY6RG21SsOLWHKFTE+roimdgD4d3dfZK4be3ESFFMZT4ZB0jUq7nV6xHR
         NoEHJ2ZeaY0JVYj4Y40CEiU2bOR144sCM+4T6J34nwv+yrqchkqwaHi4t7KrvghmWT1l
         JJLA==
X-Gm-Message-State: ALoCoQmqRd3lfmZTsi25mZD0FYMM8QY4mA1ipKDmCxmXVR/opvitFpmSR9hqWew6t5GsrZM8k4UT
X-Received: by 10.194.237.230 with SMTP id vf6mr41709079wjc.135.1448630621637;
        Fri, 27 Nov 2015 05:23:41 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id k133sm7483125wmg.18.2015.11.27.05.23.41
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 27 Nov 2015 05:23:41 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl>
In-Reply-To: <02f401d12912$fcba4130$f62ec390$@qqmail.nl>
Subject: RE: No H2 Window updates!
Date: Fri, 27 Nov 2015 14:23:29 +0100
Message-ID: <030501d12916$cf7e1120$6e7a3360$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AQJt5VCTIFs6KteEjCgZz0PozG8d2Z12YR+w
Content-Language: nl

> -----Original Message-----
> From: Bert Huijben [mailto:bert@qqmail.nl]
> Sent: vrijdag 27 november 2015 13:56
> To: bert@qqmail.nl
> Subject:
>=20
> =A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 Hi,
>=20
> I finally took the time to diagnose that segfault I had, and I think =
it
> points to a serious bug in httpd.
>=20
> To summarize this: I don=92t receive window updates.
>=20
> In this specific test we set a very huge amount of small requests =
(bodies
of
> 95 and 113 bytes), until we get out of the 65535 (or 65536) bytes of
window
> space I get from httpd at the connection level.
> (Each stream doesn=92t get near its limit. I can try if I can receive =
window
> updates there=85 but currently I can=92t reproduce ever receiving a =
window
> update)
>=20
>=20
> Originally this caused a segfault in my code, but I fixed that one. =
But
now
> I=92m just stuck waiting to receive a window update from httpd=85
>=20
>=20
> My last testing was against 2.4.x (to get the 2.4.18 goodness)

And I think the combination of:

=3D=3D=3D h2_session.c around line 707 =3D=3D=3D
/* We need to handle window updates ourself, otherwise we
         * get flooded by nghttp2. */
        nghttp2_option_set_no_auto_window_update(options, 1);

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
And not a single call to nghttp2_submit_window_update() to find, =
explains
the situation.

I haven't tried what happens when I disable this auto_window call... but
sending window updates is really required by the H2 specs.



And I totally understand that this wasn't high priority... I worked =
around
not sending updates in my implementation until yesterday :-)


	Bert=20


From dev-return-84788-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 27 16:55:34 2015
Return-Path: <dev-return-84788-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BC72918F03
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 27 Nov 2015 16:55:34 +0000 (UTC)
Received: (qmail 23584 invoked by uid 500); 27 Nov 2015 16:55:34 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 23513 invoked by uid 500); 27 Nov 2015 16:55:34 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 23502 invoked by uid 99); 27 Nov 2015 16:55:34 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Nov 2015 16:55:34 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 97590180A2A
	for <dev@httpd.apache.org>; Fri, 27 Nov 2015 16:55:33 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0
X-Spam-Level:
X-Spam-Status: No, score=0 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id r58bl5ZmXLaw for <dev@httpd.apache.org>;
	Fri, 27 Nov 2015 16:55:27 +0000 (UTC)
Received: from resqmta-po-10v.sys.comcast.net (resqmta-po-10v.sys.comcast.net [96.114.154.169])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id DD3642026B
	for <dev@httpd.apache.org>; Fri, 27 Nov 2015 16:55:26 +0000 (UTC)
Received: from resomta-po-13v.sys.comcast.net ([96.114.154.237])
	by resqmta-po-10v.sys.comcast.net with comcast
	id mgvF1r00457bBgG01gvKaK; Fri, 27 Nov 2015 16:55:19 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-13v.sys.comcast.net with comcast
	id mgvJ1r00D2U0RYt01gvKko; Fri, 27 Nov 2015 16:55:19 +0000
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: No H2 Window updates!
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <030501d12916$cf7e1120$6e7a3360$@qqmail.nl>
Date: Fri, 27 Nov 2015 11:55:18 -0500
Content-Transfer-Encoding: 7bit
Message-Id: <D09A7D78-852D-411D-B175-0B03C151BB29@jaguNET.com>
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl> <030501d12916$cf7e1120$6e7a3360$@qqmail.nl>
To: dev@httpd.apache.org
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448643319;
	bh=K//zFj1nlfWrgvC1AvB24J3EknrhS0wxS5iJ6EWgMtg=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=RVRbrBF+KGtV4X799lz6TgVvsID+frUd7y+u0AH+BJUTfH18JEGMpDCHKqBwYfUVp
	 f3IEKvTlwEMECt0EAKBN40l/FxGh+qsPPGcUOfFBLUWL3Gg3qp/WmPLsaLjsiEBHfs
	 OwTSYw/QfbFXlfECeK2+LuVt8H1SrJe27hbGXumYnoQbQ+s0bQnVZivvFWzcdtGw8Z
	 8E3CoBXwuhTm6VLqh0pBJ2E3nZjPBezVtjtpXoKw/Hs/YifQYUShsbneqVcUrYxKAT
	 D6i5NND3H3PqGQAiQFwazkNLPVxDUOWbuLh05dbWdedwJ2fZPx4PI4Y/rdyWqw/WBZ
	 XbNYY+mSQaIfg==

Hmmm... this seems to me enough to warrant a hold on my T&R
until we dig into this deeper.

From dev-return-84789-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 27 19:04:19 2015
Return-Path: <dev-return-84789-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9CFAE18233
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 27 Nov 2015 19:04:19 +0000 (UTC)
Received: (qmail 91308 invoked by uid 500); 27 Nov 2015 19:04:19 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 91244 invoked by uid 500); 27 Nov 2015 19:04:19 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 91234 invoked by uid 99); 27 Nov 2015 19:04:19 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Nov 2015 19:04:19 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id B3AD8180A59
	for <dev@httpd.apache.org>; Fri, 27 Nov 2015 19:04:18 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.879
X-Spam-Level: **
X-Spam-Status: No, score=2.879 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01,
	SPF_PASS=-0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id E9mC6K4ehGeJ for <dev@httpd.apache.org>;
	Fri, 27 Nov 2015 19:04:17 +0000 (UTC)
Received: from mail-wm0-f46.google.com (mail-wm0-f46.google.com [74.125.82.46])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id BC64420697
	for <dev@httpd.apache.org>; Fri, 27 Nov 2015 19:04:16 +0000 (UTC)
Received: by wmuu63 with SMTP id u63so65195111wmu.0
        for <dev@httpd.apache.org>; Fri, 27 Nov 2015 11:04:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=message-id:mime-version:to:from:subject:date:importance:in-reply-to
         :references:content-type;
        bh=nqlGyfnQd/ybwVRev4zHPQhCRSIwmnpegTkcP/vbws8=;
        b=cHPPGyM71WUGjVwvmot7cVfanMQHjsovFf5aRC/0jInqeIm7xjlfkH8s0nyLz40EZP
         G938eE+gt7sHd9rY95ygssLZR5A+9PbpycxIQKsx93g3HXp5NUfoq2+y7ONzF7qXYe4h
         OyknWJf+QZIzbW3dbvXbCIGBH7UxF95uwul2I=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:message-id:mime-version:to:from:subject:date
         :importance:in-reply-to:references:content-type;
        bh=nqlGyfnQd/ybwVRev4zHPQhCRSIwmnpegTkcP/vbws8=;
        b=P02vO1O3v8OSruTeWPBmV94vWgAQLJK7ITTV7bi9IZJxi7NXIQnQeEdtyaaf2rAwj5
         OmXfjjaZEj6tv6QBoUxMQbXiKTH5andvuq/ODI8cewRwqrvVISeR6sZn92Owb8pkDtdt
         pxDv3psz8OQXYLbFEy2CAlkYW/fmrAVyMjkUIuYEA+5DuU6NUB1GrwsSVgGNJ2nonJWC
         DRyJjfx1NK7Wo4YycHpqcvY1lELTw3sITL0MG6+swCDXFJsDlbmNk2acnnwA5bT7F8tv
         6Pj/WzsMF/z44wZcF8BUwpJbASFTpcPhun//z2W+O+6q0Qkjkbut4W3f0EocRwRM8Djk
         36Rw==
X-Gm-Message-State: ALoCoQlvtNS01tPkGiTWwG6igBz/rYjWJ9+vmTTw/Axir/fq4eq2FNiE7Ydfu7jgKjk/DmnoA8e4
X-Received: by 10.28.125.201 with SMTP id y192mr12961094wmc.23.1448651055364;
        Fri, 27 Nov 2015 11:04:15 -0800 (PST)
Received: from ?IPv6:2001:610:66e:0:6815:a924:ac1:644? ([2001:610:66e:0:6815:a924:ac1:644])
        by smtp.gmail.com with ESMTPSA id q77sm8706572wmd.22.2015.11.27.11.04.14
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 27 Nov 2015 11:04:14 -0800 (PST)
Message-ID: <5658a92e.508e1c0a.fdd3a.ffffe318@mx.google.com>
MIME-Version: 1.0
To: Jim Jagielski <jim@jaguNET.com>, 
	"dev@httpd.apache.org" <dev@httpd.apache.org>
From: Bert Huijben <bert@qqmail.nl>
Subject: RE: No H2 Window updates!
Date: Fri, 27 Nov 2015 20:04:14 +0100
Importance: normal
X-Priority: 3
In-Reply-To: <D09A7D78-852D-411D-B175-0B03C151BB29@jaguNET.com>
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl>
 <030501d12916$cf7e1120$6e7a3360$@qqmail.nl>
 <D09A7D78-852D-411D-B175-0B03C151BB29@jaguNET.com>
Content-Type: multipart/alternative;
	boundary="_94239DDE-01BB-47D7-ACE6-8E44B1AA4B04_"

--_94239DDE-01BB-47D7-ACE6-8E44B1AA4B04_
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="utf-8"

Well=E2=80=A6 it is not a regression, so can it be a show stopper? =E2=98=
=BA=E2=80=A6
But I would like to see this fixed.

I have no idea how hard it would be to fix this though. It could be as simp=
le as removing that config line (which was probably added somewhere early o=
n if I look at that comment). But windowing correctly for optimal performan=
ce isn=E2=80=99t easy.

Luckily most of the windowing works in the other direction.

Bert



From: Jim Jagielski
Sent: vrijdag 27 november 2015 17:55
To: dev@httpd.apache.org
Subject: Re: No H2 Window updates!


Hmmm... this seems to me enough to warrant a hold on my T&R
until we dig into this deeper.



--_94239DDE-01BB-47D7-ACE6-8E44B1AA4B04_
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html; charset="utf-8"

<html xmlns:o=3D"urn:schemas-microsoft-com:office:office" xmlns:w=3D"urn:sc=
hemas-microsoft-com:office:word" xmlns:m=3D"http://schemas.microsoft.com/of=
fice/2004/12/omml" xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta ht=
tp-equiv=3DContent-Type content=3D"text/html; charset=3Dutf-8"><meta name=
=3DGenerator content=3D"Microsoft Word 15 (filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:#954F72;
	text-decoration:underline;}
p
	{mso-style-priority:99;
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman",serif;}
.MsoChpDefault
	{mso-style-type:export-only;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:70.85pt 70.85pt 70.85pt 70.85pt;}
div.WordSection1
	{page:WordSection1;}
--></style></head><body lang=3DNL link=3Dblue vlink=3D"#954F72"><div class=
=3DWordSection1><p class=3DMsoNormal>Well=E2=80=A6 it is not a regression<s=
pan lang=3DEN-US>, so can it be a show stopper? </span><span lang=3DEN-US s=
tyle=3D'font-family:"Segoe UI Emoji",sans-serif'>=E2=98=BA</span>=E2=80=A6<=
/p><p class=3DMsoNormal>But I would like to see this fixed.</p><p class=3DM=
soNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>I have no idea how hard =
it would be to fix this though. It could be as simple as removing that conf=
ig line (<span lang=3DEN-US>which was probably added somewhere early on if =
I look at that comment). But windowing correctly for optimal performance is=
n=E2=80=99t easy.<o:p></o:p></span></p><p class=3DMsoNormal><span lang=3DEN=
-US><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><span lang=3DEN-US>Luc=
kily most of the windowing works in the other direction.<o:p></o:p></span><=
/p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>Bert<o:p>=
</o:p></p><p><o:p>&nbsp;</o:p></p><p><o:p>&nbsp;</o:p></p><div style=3D'mso=
-element:para-border-div;border:none;border-top:solid #E1E1E1 1.0pt;padding=
:3.0pt 0cm 0cm 0cm'><p class=3DMsoNormal style=3D'mso-margin-top-alt:auto;m=
so-margin-bottom-alt:auto;border:none;padding:0cm'><br><b>From: </b>Jim Jag=
ielski<br><b>Sent: </b>vrijdag 27 november 2015 17:55<br><b>To: </b>dev@htt=
pd.apache.org<br><b>Subject: </b>Re: No H2 Window updates!</p></div><p clas=
s=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal><span style=3D'font=
-size:12.0pt;font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span><=
/p><p class=3DMsoNormal>Hmmm... this seems to me enough to warrant a hold o=
n my T&amp;R</p><p class=3DMsoNormal>until we dig into this deeper.</p><p c=
lass=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p=
></p></div></body></html>=

--_94239DDE-01BB-47D7-ACE6-8E44B1AA4B04_--


From dev-return-84790-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 27 19:22:06 2015
Return-Path: <dev-return-84790-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B67F7182D5
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 27 Nov 2015 19:22:06 +0000 (UTC)
Received: (qmail 27617 invoked by uid 500); 27 Nov 2015 19:22:06 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 27552 invoked by uid 500); 27 Nov 2015 19:22:06 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 27509 invoked by uid 99); 27 Nov 2015 19:22:06 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Nov 2015 19:22:06 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id CFB831A20D3
	for <dev@httpd.apache.org>; Fri, 27 Nov 2015 19:22:05 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.554
X-Spam-Level:
X-Spam-Status: No, score=-0.554 tagged_above=-999 required=6.31
	tests=[HEADER_FROM_DIFFERENT_DOMAINS=0.001, RP_MATCHES_RCVD=-0.554,
	SPF_HELO_PASS=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id CI2_td42Jvkw for <dev@httpd.apache.org>;
	Fri, 27 Nov 2015 19:21:51 +0000 (UTC)
Received: from plane.gmane.org (plane.gmane.org [80.91.229.3])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 205BC2026C
	for <dev@httpd.apache.org>; Fri, 27 Nov 2015 19:21:50 +0000 (UTC)
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <apache-dev@m.gmane.org>)
	id 1a2OaS-0002DX-De
	for dev@httpd.apache.org; Fri, 27 Nov 2015 20:21:40 +0100
Received: from aorleans-552-1-103-175.w92-140.abo.wanadoo.fr ([92.140.174.175])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Fri, 27 Nov 2015 20:21:40 +0100
Received: from christophe.jaillet by aorleans-552-1-103-175.w92-140.abo.wanadoo.fr with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Fri, 27 Nov 2015 20:21:40 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: dev@httpd.apache.org
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Subject: Bug in mod_proxvy_fdpass?
Date: Fri, 27 Nov 2015 20:21:32 +0100
Lines: 48
Message-ID: <n3aaft$hp2$1@ger.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: aorleans-552-1-103-175.w92-140.abo.wanadoo.fr
X-Mozilla-News-Host: news://news.gmane.org
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.4.0
X-Antivirus: avast! (VPS 151127-0, 27/11/2015), Outbound message
X-Antivirus-Status: Clean

Hi,

smatch compains that:
     /modules/proxy/mod_proxy_fdpass.c:152 proxy_fdpass_handler() warn: 
this array is probably non-NULL. 'worker->s->flusher'

I think that:
         const char *flush_method = worker->s->flusher ? 
worker->s->flusher : "flush";
should be turned into:
         const char *flush_method = *worker->s->flusher ? 
worker->s->flusher : "flush";


'flusher' is defined as follow:
         /* Runtime worker status informations. Shared in scoreboard */
         typedef struct {
         [...]
             char      flusher[PROXY_WORKER_MAX_SCHEME_SIZE];  /* flush 
provider used by mod_proxy_fdpass */
         [...]
         } proxy_worker_shared;

So, it can not be NULL.
I think that the logic is "If the flusher name is defined, use it, 
otherwise use the default"
Correct?



BTW, the 'flusher' parameter (mod_proxy.c:269) seems to be 
un-documented. 
(http://httpd.apache.org/docs/trunk/mod/mod_proxy.html#proxypass)


What puzzles me is that, with the current code, if the "flusher" 
parameter is not defined, then the code should always trigger an 01153 
error.
And if this parameter is not documented, how one could know that it has 
to be set?

Either no-one ever used this, either the users know that an undocumented 
parameter has to be used. (either I missed something :) )
Doc and code should be fixed.


CJ



From dev-return-84791-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Fri Nov 27 21:35:13 2015
Return-Path: <dev-return-84791-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9BA561873F
	for <apmail-httpd-dev-archive@www.apache.org>; Fri, 27 Nov 2015 21:35:13 +0000 (UTC)
Received: (qmail 89736 invoked by uid 500); 27 Nov 2015 21:35:13 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 89662 invoked by uid 500); 27 Nov 2015 21:35:13 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 89652 invoked by uid 99); 27 Nov 2015 21:35:13 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Nov 2015 21:35:13 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id C8472C4F12
	for <dev@httpd.apache.org>; Fri, 27 Nov 2015 21:35:12 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.976
X-Spam-Level: *
X-Spam-Status: No, score=1.976 tagged_above=-999 required=6.31
	tests=[FSL_HELO_BARE_IP_2=1.121, HEADER_FROM_DIFFERENT_DOMAINS=0.001,
	RCVD_NUMERIC_HELO=0.865, SPF_HELO_PASS=-0.001, SPF_PASS=-0.001,
	T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 1KuvFaXeVrOp for <dev@httpd.apache.org>;
	Fri, 27 Nov 2015 21:35:05 +0000 (UTC)
Received: from plane.gmane.org (plane.gmane.org [80.91.229.3])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id AE9DD2026C
	for <dev@httpd.apache.org>; Fri, 27 Nov 2015 21:35:03 +0000 (UTC)
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <apache-dev@m.gmane.org>)
	id 1a2QfQ-0005tm-MY
	for dev@httpd.apache.org; Fri, 27 Nov 2015 22:34:56 +0100
Received: from 92.109.82.130 ([92.109.82.130])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Fri, 27 Nov 2015 22:34:56 +0100
Received: from phpdev by 92.109.82.130 with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Fri, 27 Nov 2015 22:34:56 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: dev@httpd.apache.org
From: Jan Ehrhardt <phpdev@ehrhardt.nl>
Subject: Re: No H2 Window updates!
Date: Fri, 27 Nov 2015 22:34:53 +0100
Lines: 21
Message-ID: <8dih5bpbk1h8tk88t2n5gjboer7mg9avp7@4ax.com>
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl> <030501d12916$cf7e1120$6e7a3360$@qqmail.nl> <D09A7D78-852D-411D-B175-0B03C151BB29@jaguNET.com> <5658a92e.508e1c0a.fdd3a.ffffe318@mx.google.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: 92.109.82.130
X-Newsreader: Forte Agent 3.3/32.846

Bert Huijben in gmane.comp.apache.devel (Fri, 27 Nov 2015 20:04:14 +0100):
>Well it is not a regression, so can it be a show stopper? ?
>But I would like to see this fixed.

Curious: are you still testing this on Windows? If so, I guess you
compiled your own httpd. I tried to do the same a couple of days ago, but
ran into problems with Drupal7: the admin menu sometimes showed and
sometimes did not show at all. I could not lay my finger on what went
wrong.

Because I did not have the problems with Apachelounge's 2.4.18-dev at
https://www.apachelounge.com/viewtopic.php?t=6842 I checked out an earlier
revision of the alpha branch:
| svn co -r 1715218 http://svn.apache.org/repos/asf/httpd/httpd/branches/2.4-http2-alpha

That revision compiled into a httpd with no problems. I am waiting now for
Stefan Eissing to finish his work on mod_http2.

BTW: did you switch to nghttp2 1.5.0 already?
-- 
Jan


From dev-return-84792-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 28 05:05:34 2015
Return-Path: <dev-return-84792-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 676CC18F36
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 28 Nov 2015 05:05:34 +0000 (UTC)
Received: (qmail 27431 invoked by uid 500); 28 Nov 2015 05:05:34 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 27350 invoked by uid 500); 28 Nov 2015 05:05:33 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 27340 invoked by uid 99); 28 Nov 2015 05:05:33 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Nov 2015 05:05:33 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 5467FC7CA8
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 05:05:33 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.001
X-Spam-Level: *
X-Spam-Status: No, score=1.001 tagged_above=-999 required=6.31
	tests=[KAM_LAZY_DOMAIN_SECURITY=1, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id 3G4KLrl75I4f for <dev@httpd.apache.org>;
	Sat, 28 Nov 2015 05:05:18 +0000 (UTC)
Received: from lb3-smtp-cloud2.xs4all.net (lb3-smtp-cloud2.xs4all.net [194.109.24.29])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id EF24D2059C
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 05:05:17 +0000 (UTC)
Received: from xs9.xs4all.nl ([194.109.21.9])
	by smtp-cloud2.xs4all.net with ESMTP
	id mt5G1r00L0BlZ8J01t5Gn3; Sat, 28 Nov 2015 06:05:17 +0100
Received: from X220 (IDENT:12615@shell.xs4all.nl [194.109.21.9])
	by xs9.xs4all.nl (8.14.4/8.14.4/Debian-4) with ESMTP id tAS55GX3019216;
	Sat, 28 Nov 2015 06:05:16 +0100
From: Jan Ehrhardt <phpdev@ehrhardt.nl>
To: dev@httpd.apache.org
Cc: info@apachelounge.com
Subject: Re: No H2 Window updates!
Date: Sat, 28 Nov 2015 06:05:16 +0100
Message-ID: <j8di5bl5ds33ol2lodceeca1nh15ca9bsp@4ax.com>
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl> <030501d12916$cf7e1120$6e7a3360$@qqmail.nl> <D09A7D78-852D-411D-B175-0B03C151BB29@jaguNET.com> <5658a92e.508e1c0a.fdd3a.ffffe318@mx.google.com> <8dih5bpbk1h8tk88t2n5gjboer7mg9avp7@4ax.com>
In-Reply-To: <8dih5bpbk1h8tk88t2n5gjboer7mg9avp7@4ax.com>
X-Mailer: Forte Agent 3.3/32.846
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Jan Ehrhardt in gmane.comp.apache.devel (Fri, 27 Nov 2015 22:34:53 =
+0100):
>Bert Huijben in gmane.comp.apache.devel (Fri, 27 Nov 2015 20:04:14 =
+0100):
>>Well=85 it is not a regression, so can it be a show stopper? ?=85
>>But I would like to see this fixed.
>
>Curious: are you still testing this on Windows? If so, I guess you
>compiled your own httpd. I tried to do the same a couple of days ago, =
but
>ran into problems with Drupal7: the admin menu sometimes showed and
>sometimes did not show at all. I could not lay my finger on what went
>wrong.
>
>Because I did not have the problems with Apachelounge's 2.4.18-dev at
>https://www.apachelounge.com/viewtopic.php?t=3D6842 I checked out an =
earlier
>revision of the alpha branch:
>| svn co -r 1715218 =
http://svn.apache.org/repos/asf/httpd/httpd/branches/2.4-http2-alpha
>
>That revision compiled into a httpd with no problems. I am waiting now =
for
>Stefan Eissing to finish his work on mod_http2.

Probably Stefan Eissing already completed his work for 2.4.18. I checked
out the current 2.4.x branch with mod_http2 1.8.0 from
http://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/modules/http2/

I rebuilt the complete branch with VC14 x86 and encountered the same
problems with Drupal7. On my dev-server with Win 2008 R2 I now have 3
mod_http2's:

#LoadModule http2_module modules/mod_http2.so
LoadModule http2_module modules/mod_http2-r1715218.so
#LoadModule http2_module modules/mod_http2_al.so=20

The first one is mod_http 1.8.0, the second and the third are 1.5.0 (my
build and Apachelounge's). PHP is 5.6.16 loaded with mod_fcgid 2.3.9,
nghttp2 is version 1.4.0 (but I also tested with 1.5.0).
Only mod_http2 1.8.0 sometimes just does not show the admin menu in
Drupal7, the other 2 work fine.

The same difference exists for VC9 httpd with nghttp2 1.5.0 compiled
statically into mod_http2.so. mod_http2 1.5.0 runs without problems,
mod_http2 1.8.0 sometimes just goes not show the Drupal 7 admin menu.

@Steffen Land of Apachelounge: could you build mod_http2 1.8.0 before
2.4.18 before it goes into T&R?
--=20
Jan

From dev-return-84793-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 28 09:29:44 2015
Return-Path: <dev-return-84793-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8D14518348
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 28 Nov 2015 09:29:44 +0000 (UTC)
Received: (qmail 4564 invoked by uid 500); 28 Nov 2015 09:29:43 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 4489 invoked by uid 500); 28 Nov 2015 09:29:43 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 4479 invoked by uid 99); 28 Nov 2015 09:29:43 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Nov 2015 09:29:43 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 4C0AB1809B6
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 09:29:43 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id 6MiGHmiuwz-n for <dev@httpd.apache.org>;
	Sat, 28 Nov 2015 09:29:33 +0000 (UTC)
Received: from mail-wm0-f51.google.com (mail-wm0-f51.google.com [74.125.82.51])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 7A657429A6
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 09:29:33 +0000 (UTC)
Received: by wmec201 with SMTP id c201so95542723wme.0
        for <dev@httpd.apache.org>; Sat, 28 Nov 2015 01:29:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:thread-index
         :content-language;
        bh=CIsBOgTMfxfmty3DNoZ+/buTm/twC9Q5Z2HdTjFBHMk=;
        b=fzwxamZa+Pwx21sA6TVuVD5r/B4AcohzlU3rdRsSzo/qxKET8CEPyK8YTeAp9RsDz0
         3tPVW0Efu3S4MAB8KXl5t8NGIcjUvMQ8bOuzTNE1NXkZaMns4zmdKU/ATA9DTob9GeL2
         Yk8xDGGA5sVSbXWplCqX60tiz+AbmHDzFW1kU=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :thread-index:content-language;
        bh=CIsBOgTMfxfmty3DNoZ+/buTm/twC9Q5Z2HdTjFBHMk=;
        b=Yd1BIuVZzlmPM9GxqXKcatYFG/XojVokUyzNOItoqr70dXYxJwfqNTmSGAIWl7wW2/
         9LkJK/SSoD7DbxCT7yA/7Q+Sp4nYPdIylEPSjng2Si7NkfozSSq90Zk5euGaSHEULL3j
         iZ5qrEfS9flOT9/29GDjmyARzy9TBLYg6GDNCfvgReBeGTyTc9P7Jbe7a0k/sGAUqRER
         9IkzM4yUvLFxa1Qxi5cnG8xcpUWIZCJnntxIsV3HP/5y7ugVI8IlIWth0tR3sZNu0jvb
         vWLhrM534+wGvZFGrTtKIfw2dp/+EYGQEbuCtdSEI9aR1UnK4yyRG6Pj7YA5LXCGSjQs
         Uj9Q==
X-Gm-Message-State: ALoCoQkGeRFZxcNKMrUeX4PZszh5P9pPFhWihbZRAlC4/zrUKnjSHFjRMo8U3zRV+E+DTE8dpENl
X-Received: by 10.28.95.193 with SMTP id t184mr16381825wmb.7.1448702972605;
        Sat, 28 Nov 2015 01:29:32 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id cw3sm36603629wjb.26.2015.11.28.01.29.31
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 28 Nov 2015 01:29:32 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <phpdev@ehrhardt.nl>,
	<dev@httpd.apache.org>
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl> <030501d12916$cf7e1120$6e7a3360$@qqmail.nl> <D09A7D78-852D-411D-B175-0B03C151BB29@jaguNET.com> <5658a92e.508e1c0a.fdd3a.ffffe318@mx.google.com> <8dih5bpbk1h8tk88t2n5gjboer7mg9avp7@4ax.com>
In-Reply-To: <8dih5bpbk1h8tk88t2n5gjboer7mg9avp7@4ax.com>
Subject: RE: No H2 Window updates!
Date: Sat, 28 Nov 2015 10:29:19 +0100
Message-ID: <039201d129bf$43797260$ca6c5720$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AQJt5VCTIFs6KteEjCgZz0PozG8d2QIIvd2DAeOMtIUCYgdhTgLRm4sznS6uMZA=
Content-Language: nl



> -----Original Message-----
> From: Jan Ehrhardt [mailto:phpdev@ehrhardt.nl]
> Sent: vrijdag 27 november 2015 22:35
> To: dev@httpd.apache.org
> Subject: Re: No H2 Window updates!
> 
> Bert Huijben in gmane.comp.apache.devel (Fri, 27 Nov 2015 20:04:14 +0100):
> >Well. it is not a regression, so can it be a show stopper? ?.
> >But I would like to see this fixed.
> 
> Curious: are you still testing this on Windows? If so, I guess you
> compiled your own httpd. I tried to do the same a couple of days ago, but
> ran into problems with Drupal7: the admin menu sometimes showed and
> sometimes did not show at all. I could not lay my finger on what went
> wrong.
> 
> Because I did not have the problems with Apachelounge's 2.4.18-dev at
> https://www.apachelounge.com/viewtopic.php?t=6842 I checked out an
> earlier
> revision of the alpha branch:
> | svn co -r 1715218
> http://svn.apache.org/repos/asf/httpd/httpd/branches/2.4-http2-alpha
> 
> That revision compiled into a httpd with no problems. I am waiting now for
> Stefan Eissing to finish his work on mod_http2.
> 
> BTW: did you switch to nghttp2 1.5.0 already?

	Hi Jan,

No I didn't switch to nghttp2 1.5.0 yet. Thanks for reminding me to check if
there is a new version :)

The code I wrote for Serf code doesn't use nghttp2... After reading the
specs I didn't think building on nghttp2 would win me a lot of time, and
having multiple separate implementations of the same specification/RFC in
the open source world would be a good thing. (Almost every recent H2 project
I see builds on top of nghttp2)


It is entirely possible that you hit the same problem as I did. (I'm
actually very surprised that I didn't hit this problem much earlier on.
There is just one test in the Subversion testsuite that sends more than 64
Kbyte of request bodies over a single connection... I'll fix that)


But back to that problem... There is an easy workaround, which I used on the
other side until two days ago: just making the H2 default window big enough
that you never get near it.

Just configure 'H2WindowSize' to be something like 1 GB and you probably
never have to think about window updates. (The max allowed value is 2 GB -1)


This windowing allows the server to throttle incoming DATA from the other
side, so servers like httpd really want to tune this dynamically. Note that
headers and new requests are not counted to this limit, so on the server
side it is really just request bodies... (Technically data on already closed
streams should be counted too... but that is an implementation detail).


I remember reading that Stefan Eissing is away for some time ('Re: NOTICE:
Intent to T&R 2.4.18' thread), so perhaps I should spend some time looking
at this myself.


Disabling that line that explicitly disables Window updates from the nghttp
library, could be an easy fix... but it might require some compensating
actions, like lowering the number of supported concurrent streams if that
comment is still up to date. Allowing up to 100 concurrent streams per
connection could be a bit high, although this really depends on what these
connections are used for. I don't know how to test against that 'gets
flooded' problem though, as that isn't measurable by itself.



And yes I build my own binaries for Subversion and all its dependencies...
All my scripting that I use for that is in
https://sharpsvn.open.collab.net/svn/sharpsvn/trunk/imports (username
'guest', no password). The default build doesn't build httpd, but if you use
a Subversion dev build (copy dev-default.build to a directory one level
above imports) it builds httpd. My scripts should work for VS2005 upto 2015
and require nant, and some python and perl versions. Everything else is
built from the scripts.

These same scripts drive the Subversion and Serf win32 buildbots that I
maintain on ci.apache.org... and they also deliver the SharpSvn and 'Slik
Subversion Client' binaries.
(I currently explicitly don't deliver httpd itself or anything that depends
on that though)


Thanks [ / Groeten ;-)],

	Bert

> --
> Jan



From dev-return-84794-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 28 09:45:26 2015
Return-Path: <dev-return-84794-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C768018362
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 28 Nov 2015 09:45:26 +0000 (UTC)
Received: (qmail 10549 invoked by uid 500); 28 Nov 2015 09:45:26 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 10483 invoked by uid 500); 28 Nov 2015 09:45:26 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 10473 invoked by uid 99); 28 Nov 2015 09:45:26 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Nov 2015 09:45:26 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id C0C06C0F4A
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 09:45:25 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 2.9
X-Spam-Level: **
X-Spam-Status: No, score=2.9 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	HTML_MESSAGE=3, MIME_QP_LONG_LINE=0.001, SPF_HELO_PASS=-0.001,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=apachelounge.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id R6IcB1dVvNsf for <dev@httpd.apache.org>;
	Sat, 28 Nov 2015 09:45:17 +0000 (UTC)
Received: from land10web.com (land10web.com [80.101.236.247])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTP id 1F3AE20230
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 09:45:16 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=apachelounge.com;
	s=default; t=1448703894;
	bh=VfdRv2LIBzBAR9vaNIPWlivW1XrQKBDBMm6q+lEHvRM=;
	h=From:To:Subject:Date;
	b=vxUV3kgYpbQEEPPHSRWlhWUPulS7wTWRcwwpr/8kZ9AFA9wyodA/Djx2wgFMYnuB0
	 U+5Uk7Y5j5zWIo2yFbPb9ZbxPd8IV7hJWj1P3tc/kmye0R3v4nz2J/UfQ/0TObBQnB
	 MMFNyXU3ELX1f32KtC8Ok+p+ZXsvFQ8pUrvAYKbU=
X-Default-Received-SPF: pass (skip=forwardok (res=PASS)) x-ip-name=127.0.0.1;
From: Steffen <info@apachelounge.com>
To:  <dev@httpd.apache.org>
Subject: RE: No H2 Window updates!
Date: Sat, 28 Nov 2015 10:44:44 +0100
Message-ID: <5659778c.10e0.1b74.5712@land10.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="----=_SW_25652_1448703884_mpa="
X-Originating-IP: 127.0.0.1
X-Mailer: SurgeWeb - Ajax Webmail Client

This is a multi-part message in MIME format.

------=_SW_25652_1448703884_mpa=
Content-Type: text/plain; charset=us-ascii; format=flowed


I saw issues on  boxes with the default  of number of concurrent 
streams.

Lowering the default 100 value of the directive  H2MaxSessionStreams 
solved it.




On Saturday 28/11/2015 at 10:29, Bert Huijben  wrote:
>
>
>>
>> -----Original Message-----
>> From: Jan Ehrhardt [mailto:phpdev@ehrhardt.nl]
>> Sent: vrijdag 27 november 2015 22:35
>> To: dev@httpd.apache.org
>> Subject: Re: No H2 Window updates!
>>
>> Bert Huijben in gmane.comp.apache.devel (Fri, 27 Nov 2015 20:04:14 
>> +0100):
>>>
>>> Well. it is not a regression, so can it be a show stopper? ?.
>>> But I would like to see this fixed.
>>
>> Curious: are you still testing this on Windows? If so, I guess you
>> compiled your own httpd. I tried to do the same a couple of days ago, 
>> but
>> ran into problems with Drupal7: the admin menu sometimes showed and
>> sometimes did not show at all. I could not lay my finger on what went
>> wrong.
>>
>> Because I did not have the problems with Apachelounge's 2.4.18-dev at
>> https://www.apachelounge.com/viewtopic.php?t=6842 I checked out an
>> earlier
>> revision of the alpha branch:
>> | svn co -r 1715218
>> http://svn.apache.org/repos/asf/httpd/httpd/branches/2.4-http2-alpha
>>
>> That revision compiled into a httpd with no problems. I am waiting now 
>> for
>> Stefan Eissing to finish his work on mod_http2.
>>
>> BTW: did you switch to nghttp2 1.5.0 already?
>
> Hi Jan,
>
> No I didn't switch to nghttp2 1.5.0 yet. Thanks for reminding me to 
> check if
> there is a new version :)
>
> The code I wrote for Serf code doesn't use nghttp2... After reading 
> the
> specs I didn't think building on nghttp2 would win me a lot of time, 
> and
> having multiple separate implementations of the same specification/RFC 
> in
> the open source world would be a good thing. (Almost every recent H2 
> project
> I see builds on top of nghttp2)
>
>
> It is entirely possible that you hit the same problem as I did. (I'm
> actually very surprised that I didn't hit this problem much earlier 
> on.
> There is just one test in the Subversion testsuite that sends more 
> than 64
> Kbyte of request bodies over a single connection... I'll fix that)
>
>
> But back to that problem... There is an easy workaround, which I used 
> on the
> other side until two days ago: just making the H2 default window big 
> enough
> that you never get near it.
>
> Just configure 'H2WindowSize' to be something like 1 GB and you 
> probably
> never have to think about window updates. (The max allowed value is 2 
> GB -1)
>
>
> This windowing allows the server to throttle incoming DATA from the 
> other
> side, so servers like httpd really want to tune this dynamically. Note 
> that
> headers and new requests are not counted to this limit, so on the 
> server
> side it is really just request bodies... (Technically data on already 
> closed
> streams should be counted too... but that is an implementation 
> detail).
>
>
> I remember reading that Stefan Eissing is away for some time ('Re: 
> NOTICE:
> Intent to T&R 2.4.18' thread), so perhaps I should spend some time 
> looking
> at this myself.
>
>
> Disabling that line that explicitly disables Window updates from the 
> nghttp
> library, could be an easy fix... but it might require some 
> compensating
> actions, like lowering the number of supported concurrent streams if 
> that
> comment is still up to date. Allowing up to 100 concurrent streams per
> connection could be a bit high, although this really depends on what 
> these
> connections are used for. I don't know how to test against that 'gets
> flooded' problem though, as that isn't measurable by itself.
>
>
>
> And yes I build my own binaries for Subversion and all its 
> dependencies...
> All my scripting that I use for that is in
> https://sharpsvn.open.collab.net/svn/sharpsvn/trunk/imports (username
> 'guest', no password). The default build doesn't build httpd, but if 
> you use
> a Subversion dev build (copy dev-default.build to a directory one 
> level
> above imports) it builds httpd. My scripts should work for VS2005 upto 
> 2015
> and require nant, and some python and perl versions. Everything else 
> is
> built from the scripts.
>
> These same scripts drive the Subversion and Serf win32 buildbots that 
> I
> maintain on ci.apache.org... and they also deliver the SharpSvn and 
> 'Slik
> Subversion Client' binaries.
> (I currently explicitly don't deliver httpd itself or anything that 
> depends
> on that though)
>
>
> Thanks [ / Groeten ;-)],
>
> Bert
>
>>
>> --
>> Jan
>
>


------=_SW_25652_1448703884_mpa=
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

<html>
<head>
<style>
 .sw_message P{margin:0px;padding:0px;}
 .sw_message {FONT-SIZE: 12pt;FONT-FAMILY:Tahoma,Arial,Helvetica,sans-serif;background:white;}
 .sw_message blockquote{margin-left:5px;padding-left:5px;border-left:2px solid #144fae;color: #144fae;}
 .sw_message blockquote blockquote{border-left:2px solid #006312;color: #006312;}
 .sw_message blockquote blockquote blockquote{border-left:2px solid #8e5656;color: #8e5656;}
 .sw_message blockquote blockquote blockquote blockquote{border-left:2px solid #888;color: #888;}
</style>
</head>
<body class=3d"sw_message">
<div>I saw issues on &nbsp;boxes with the default &nbsp;of number of concurr=
ent streams.</div><div><br></div><div>Lowering the default 100 value of the =
directive &nbsp;H2MaxSessionStreams solved it.</div><div><br></div><div><br>=
</div><div>&nbsp;</div><div id=3d"editor_signature"></div><div>On Saturday 2=
8/11/2015 at 10:29, Bert Huijben  wrote: </div><blockquote type=3d"cite"><br=
><br><blockquote type=3d"cite"> -----Original Message-----<br> From: Jan Ehr=
hardt [mailto:phpdev@ehrhardt.nl]<br> Sent: vrijdag 27 november 2015 22:35<b=
r> To: dev@httpd.apache.org<br> Subject: Re: No H2 Window updates!<br> <br> =
Bert Huijben in gmane.comp.apache.devel (Fri, 27 Nov 2015 20:04:14 +0100):<b=
r><blockquote type=3d"cite">Well. it is not a regression, so can it be a sho=
w stopper? ?.<br>But I would like to see this fixed.<br></blockquote> <br> C=
urious: are you still testing this on Windows? If so, I guess you<br> compil=
ed your own httpd. I tried to do the same a couple of days ago, but<br> ran =
into problems with Drupal7: the admin menu sometimes showed and<br> sometime=
s did not show at all. I could not lay my finger on what went<br> wrong.<br>=
 <br> Because I did not have the problems with Apachelounge's 2.4.18-dev at<=
br> <a target=3d"_blank" href=3d"https://www.apachelounge.com/viewtopic.php?=
t=3d6842">https://www.apachelounge.com/viewtopic.php?t=3d6842</a> I checked =
out an<br> earlier<br> revision of the alpha branch:<br> | svn co -r 1715218=
<br> <a target=3d"_blank" href=3d"http://svn.apache.org/repos/asf/httpd/http=
d/branches/2.4-http2-alpha">http://svn.apache.org/repos/asf/httpd/httpd/bran=
ches/2.4-http2-alpha</a><br> <br> That revision compiled into a httpd with n=
o problems. I am waiting now for<br> Stefan Eissing to finish his work on mo=
d_http2.<br> <br> BTW: did you switch to nghttp2 1.5.0 already?<br></blockqu=
ote><br>=09Hi Jan,<br><br>No I didn't switch to nghttp2 1.5.0 yet. Thanks fo=
r reminding me to check if<br>there is a new version :)<br><br>The code I wr=
ote for Serf code doesn't use nghttp2... After reading the<br>specs I didn't=
 think building on nghttp2 would win me a lot of time, and<br>having multipl=
e separate implementations of the same specification/RFC in<br>the open sour=
ce world would be a good thing. (Almost every recent H2 project<br>I see bui=
lds on top of nghttp2)<br><br><br>It is entirely possible that you hit the s=
ame problem as I did. (I'm<br>actually very surprised that I didn't hit this=
 problem much earlier on.<br>There is just one test in the Subversion testsu=
ite that sends more than 64<br>Kbyte of request bodies over a single connect=
ion... I'll fix that)<br><br><br>But back to that problem... There is an eas=
y workaround, which I used on the<br>other side until two days ago: just mak=
ing the H2 default window big enough<br>that you never get near it.<br><br>J=
ust configure 'H2WindowSize' to be something like 1 GB and you probably<br>n=
ever have to think about window updates. (The max allowed value is 2 GB -1)<=
br><br><br>This windowing allows the server to throttle incoming DATA from t=
he other<br>side, so servers like httpd really want to tune this dynamically=
. Note that<br>headers and new requests are not counted to this limit, so on=
 the server<br>side it is really just request bodies... (Technically data on=
 already closed<br>streams should be counted too... but that is an implement=
ation detail).<br><br><br>I remember reading that Stefan Eissing is away for=
 some time ('Re: NOTICE:<br>Intent to T&amp;R 2.4.18' thread), so perhaps I =
should spend some time looking<br>at this myself.<br><br><br>Disabling that =
line that explicitly disables Window updates from the nghttp<br>library, cou=
ld be an easy fix... but it might require some compensating<br>actions, like=
 lowering the number of supported concurrent streams if that<br>comment is s=
till up to date. Allowing up to 100 concurrent streams per<br>connection cou=
ld be a bit high, although this really depends on what these<br>connections =
are used for. I don't know how to test against that 'gets<br>flooded' proble=
m though, as that isn't measurable by itself.<br><br><br><br>And yes I build=
 my own binaries for Subversion and all its dependencies...<br>All my script=
ing that I use for that is in<br><a target=3d"_blank" href=3d"https://sharps=
vn.open.collab.net/svn/sharpsvn/trunk/imports">https://sharpsvn.open.collab.=
net/svn/sharpsvn/trunk/imports</a> (username<br>'guest', no password). The d=
efault build doesn't build httpd, but if you use<br>a Subversion dev build (=
copy dev-default.build to a directory one level<br>above imports) it builds =
httpd. My scripts should work for VS2005 upto 2015<br>and require nant, and =
some python and perl versions. Everything else is<br>built from the scripts.=
<br><br>These same scripts drive the Subversion and Serf win32 buildbots tha=
t I<br>maintain on ci.apache.org... and they also deliver the SharpSvn and '=
Slik<br>Subversion Client' binaries.<br>(I currently explicitly don't delive=
r httpd itself or anything that depends<br>on that though)<br><br><br>Thanks=
 [ / Groeten ;-)],<br><br>=09Bert<br><br><blockquote type=3d"cite"> --<br> J=
an<br></blockquote><br><br></blockquote><br> 
</body></html>

------=_SW_25652_1448703884_mpa=--


From dev-return-84795-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 28 12:01:40 2015
Return-Path: <dev-return-84795-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0205D1856B
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 28 Nov 2015 12:01:40 +0000 (UTC)
Received: (qmail 1534 invoked by uid 500); 28 Nov 2015 12:01:39 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 1461 invoked by uid 500); 28 Nov 2015 12:01:39 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 1451 invoked by uid 99); 28 Nov 2015 12:01:39 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Nov 2015 12:01:39 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id B1B28C199A
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 12:01:38 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.11
X-Spam-Level:
X-Spam-Status: No, score=-0.11 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id ggSccj59OWBY for <dev@httpd.apache.org>;
	Sat, 28 Nov 2015 12:01:29 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id EBEAC20DD2
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 12:01:28 +0000 (UTC)
Received: from [192.168.0.118] (unknown [78.35.84.207])
	(using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 6D3D815A027A
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 13:01:22 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1448712082; bh=jhoD9d1VYn84BHGHxBD61X/jriQdwaW2U4izcdpvBVo=;
	h=Subject:To:References:From:Date:In-Reply-To:From;
	b=q6rKx5nt0Djuo4V9XHXOYmoGcnSFybjP97G0q1DKLph2b+KadX8pJFKEjOsnFamaF
	 QhMQ+y5hNMsxOEHH3nNDVlvmfMX4slox9kE0zBjC4Jl8mqDXzsBvpK01RTYjWeoQWX
	 SG9FYIKgZFr+nyNNg06PLeKcA6vRD0ApFSj7Mg3Y=
Subject: Re: No H2 Window updates!
To: dev@httpd.apache.org
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl>
 <030501d12916$cf7e1120$6e7a3360$@qqmail.nl>
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Message-ID: <56599792.3060402@greenbytes.de>
Date: Sat, 28 Nov 2015 13:01:22 +0100
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.4.0
MIME-Version: 1.0
In-Reply-To: <030501d12916$cf7e1120$6e7a3360$@qqmail.nl>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit

I am not really here, but...

the window updates are sent out via update_window(), line 1001, 
h2_session.c. If you do not see any window updates with a client, it may 
be that the server app you called does not read its input. I have 
several test cases with uploads and they work with nghttp and curl.

Basics of mod_http2 flow control:
- the auto udates of nghttp2 are disabled because nghttp2 would 
continously update the window for the client, letting the client sent 
more and more - until we run out of memory.
- instead, input reads from workers against the h2_mplx io are recorded 
and lead to regular window update being sent out. So clients can only 
send more when the data is actually consumed by someone.

What is not well tested, I think, is the timeout/cleanup behaviour on 
this. So, as long as the connection is alive, individual stream could 
appear to hang infinitely *if* no one ever reads the data. Maybe you see 
something like this?

//Stefan

Am 27.11.2015 um 14:23 schrieb Bert Huijben:
>> -----Original Message-----
>> From: Bert Huijben [mailto:bert@qqmail.nl]
>> Sent: vrijdag 27 november 2015 13:56
>> To: bert@qqmail.nl
>> Subject:
>>
>>                  Hi,
>>
>> I finally took the time to diagnose that segfault I had, and I think it
>> points to a serious bug in httpd.
>>
>> To summarize this: I dont receive window updates.
>>
>> In this specific test we set a very huge amount of small requests (bodies
> of
>> 95 and 113 bytes), until we get out of the 65535 (or 65536) bytes of
> window
>> space I get from httpd at the connection level.
>> (Each stream doesnt get near its limit. I can try if I can receive window
>> updates there but currently I cant reproduce ever receiving a window
>> update)
>>
>>
>> Originally this caused a segfault in my code, but I fixed that one. But
> now
>> Im just stuck waiting to receive a window update from httpd
>>
>>
>> My last testing was against 2.4.x (to get the 2.4.18 goodness)
> And I think the combination of:
>
> === h2_session.c around line 707 ===
> /* We need to handle window updates ourself, otherwise we
>           * get flooded by nghttp2. */
>          nghttp2_option_set_no_auto_window_update(options, 1);
>
> ====================
> And not a single call to nghttp2_submit_window_update() to find, explains
> the situation.
>
> I haven't tried what happens when I disable this auto_window call... but
> sending window updates is really required by the H2 specs.
>
>
>
> And I totally understand that this wasn't high priority... I worked around
> not sending updates in my implementation until yesterday :-)
>
>
> 	Bert
>


From dev-return-84796-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 28 12:23:40 2015
Return-Path: <dev-return-84796-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B3AB2185C4
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 28 Nov 2015 12:23:40 +0000 (UTC)
Received: (qmail 21015 invoked by uid 500); 28 Nov 2015 12:23:40 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 20935 invoked by uid 500); 28 Nov 2015 12:23:40 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 20925 invoked by uid 99); 28 Nov 2015 12:23:40 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Nov 2015 12:23:40 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 856F1180A18
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 12:23:39 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id Rx7oSM9Ir9MO for <dev@httpd.apache.org>;
	Sat, 28 Nov 2015 12:23:37 +0000 (UTC)
Received: from mail-wm0-f42.google.com (mail-wm0-f42.google.com [74.125.82.42])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 9D16342AA6
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 12:23:37 +0000 (UTC)
Received: by wmww144 with SMTP id w144so80144531wmw.1
        for <dev@httpd.apache.org>; Sat, 28 Nov 2015 04:23:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:thread-index
         :content-language;
        bh=gi2Po98wfAVdp+GcBjgfoDO9X+aI0pdDJ/kFiX/f92s=;
        b=DslMhaSFKL0PLDUa7iSyLgHfwlW8tVQrLAf2IGlWzmzBnwsNfvTYjnxsCFdZJpqg5L
         RamBKxDtDB/GVNkzTnhBtDf8XAzMHEoKKKWVRQuPT882G0VMJ6dOrJS715BjHauSs/Vf
         yoiUTjjGvd1K+WNkOJJ1A/HA+KDDcKh06I36E=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :thread-index:content-language;
        bh=gi2Po98wfAVdp+GcBjgfoDO9X+aI0pdDJ/kFiX/f92s=;
        b=S0zwG9Pl9V+ECfjzlQGwNUtqLHU4ogP6mxrhADMkmZF4CNUBhPwJS2+t3EGGYFRtDi
         1pFUJ2l1Gmd7485pGhThyBnw/CfYD+AHBqAY5DSNpdYU/3FZvbEYGywJqxNyxqytL+m/
         0LxFmPFoaRggyWRQxzCLQNGtrLd1Bhubc+oP2K9ywN3S5/NI2rp1g0IXWyFcY6VLaeem
         mI6cURAkLiLYzx3QtUHGHfC6NDulWcODoraKsNsOD22g85icnGYXH8tquuNr+7Omt6Qg
         JTVhfnZC4RXyNyVh8lp9/RLNP5C+DM9dcGXX7WftsZmIM9QhP1sYmFFCn9xj+n+LMG4U
         q1iA==
X-Gm-Message-State: ALoCoQmg0+ACz4b2tGeWsZqW6UE8mFkW7o4bmsrrLC7RgiidEfZG58e2EvhV9sST7V7vsNehxqQW
X-Received: by 10.194.200.5 with SMTP id jo5mr61618131wjc.79.1448713411091;
        Sat, 28 Nov 2015 04:23:31 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id cv3sm37349384wjc.20.2015.11.28.04.23.30
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 28 Nov 2015 04:23:30 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl> <030501d12916$cf7e1120$6e7a3360$@qqmail.nl> <56599792.3060402@greenbytes.de>
In-Reply-To: <56599792.3060402@greenbytes.de>
Subject: RE: No H2 Window updates!
Date: Sat, 28 Nov 2015 13:23:18 +0100
Message-ID: <03a101d129d7$9140de30$b3c29a90$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AQJt5VCTIFs6KteEjCgZz0PozG8d2QIIvd2DAZcYZYmdWuTVUA==
Content-Language: nl



> -----Original Message-----
> From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
> Sent: zaterdag 28 november 2015 13:01
> To: dev@httpd.apache.org
> Subject: Re: No H2 Window updates!
> 
> I am not really here, but...
> 
> the window updates are sent out via update_window(), line 1001,
> h2_session.c. If you do not see any window updates with a client, it may
> be that the server app you called does not read its input. I have
> several test cases with uploads and they work with nghttp and curl.

I do see window updates against other servers. And I'm pretty sure
Subversion reads its input... things are committed correctly and the
propfinds return their result.

In the testcase at hand I'm sending very small requests (+- 100 bytes max),
so the per stream window updates are not really used... They get nowhere
near the 64K limit and the first data frame has EOS set.

Perhaps this also skips sending window updates on the connection level.

I do remember testing larger uploads as a single stream... So perhaps it is
a combination that makes them not appear for me.

	Bert


From dev-return-84797-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 28 12:34:13 2015
Return-Path: <dev-return-84797-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 805F1185EB
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 28 Nov 2015 12:34:13 +0000 (UTC)
Received: (qmail 25272 invoked by uid 500); 28 Nov 2015 12:34:13 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 25209 invoked by uid 500); 28 Nov 2015 12:34:12 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 25198 invoked by uid 99); 28 Nov 2015 12:34:12 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Nov 2015 12:34:12 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 66AEC1A2529
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 12:34:12 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id Z9iF_Hgmr-sS for <dev@httpd.apache.org>;
	Sat, 28 Nov 2015 12:34:10 +0000 (UTC)
Received: from mail-wm0-f45.google.com (mail-wm0-f45.google.com [74.125.82.45])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 74F9D2059E
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 12:34:10 +0000 (UTC)
Received: by wmww144 with SMTP id w144so80311728wmw.1
        for <dev@httpd.apache.org>; Sat, 28 Nov 2015 04:34:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:thread-index
         :content-language;
        bh=ctrDfHbH9l3axUgiHAiT1ZqEvm2m1waNmY1F446dspI=;
        b=dc22j088pGUimxg3s+SCYcbdk99lu8ABda7WTVr0495tcOOEaFHHvH8VtbgUUr828x
         7k2tIyjKJUh5PjqoXTyBGqJU5PdVxfnDi5AGPPfFF3XcXFskpHXZHuULPVq7up9cE+sP
         3C6LHvLMUVzqWqx82aTpHZpAGtCyh/UftR4oI=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :thread-index:content-language;
        bh=ctrDfHbH9l3axUgiHAiT1ZqEvm2m1waNmY1F446dspI=;
        b=kve53zFRWEXrwZdGBEKXIu8n3vdCVewrm5BkP+cBxdc0VAeke+IjgUjq89YSZ0YLtL
         sONy7MiBJCqYGCI2NUUnKBfxtCeiwkwsZTJvpU2Hz9bnW9ywbrROyXSyKCAEIONNg0tE
         WJXtzAptZJ5/Qm5/WWqiyB6Ui5mbMMX7Fibt6nBUgfRQwzk4Ucb6JozW+SLOgtqMPSyu
         OQrivpXxXNmFp1uNKr1akbbApxWQUY0yLIER3VisbVr1m+EHeUNqceCZdZYRBPUfJJ3J
         URTBi6YiAAWgRYmXFQUT7W2u9z3U+nZ6Bpv+bhHA43aq5iGsNGHYSR+06aFZF2frsO63
         +r9A==
X-Gm-Message-State: ALoCoQmhJZnsqM/OvjdbzdZ/HDN/H1nkwzrCaDw5oJRPl2q2nGPd64BUaZsmcSAPMhTTsPwcg3kh
X-Received: by 10.28.210.137 with SMTP id j131mr17684707wmg.93.1448714049037;
        Sat, 28 Nov 2015 04:34:09 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id w67sm12047141wmw.17.2015.11.28.04.34.08
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 28 Nov 2015 04:34:08 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl> <030501d12916$cf7e1120$6e7a3360$@qqmail.nl> <56599792.3060402@greenbytes.de>
In-Reply-To: <56599792.3060402@greenbytes.de>
Subject: RE: No H2 Window updates!
Date: Sat, 28 Nov 2015 13:33:56 +0100
Message-ID: <03a201d129d9$0d829a00$2887ce00$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AQJt5VCTIFs6KteEjCgZz0PozG8d2QIIvd2DAZcYZYmdWucw8A==
Content-Language: nl



> -----Original Message-----
> From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
> Sent: zaterdag 28 november 2015 13:01
> To: dev@httpd.apache.org
> Subject: Re: No H2 Window updates!
> 
> I am not really here, but...
> 
> the window updates are sent out via update_window(), line 1001,
> h2_session.c. If you do not see any window updates with a client, it may
> be that the server app you called does not read its input. I have
> several test cases with uploads and they work with nghttp and curl.
> 
> Basics of mod_http2 flow control:
> - the auto udates of nghttp2 are disabled because nghttp2 would
> continously update the window for the client, letting the client sent
> more and more - until we run out of memory.
> - instead, input reads from workers against the h2_mplx io are recorded
> and lead to regular window update being sent out. So clients can only
> send more when the data is actually consumed by someone.

>From h2_session.c around line 1640.
=======================
            switch (status) {
                case APR_SUCCESS:       /* successful read, reset our idle
timers */
                    have_read = 1;
                    wait_micros = 0;
                    break;
                case APR_EAGAIN:              /* non-blocking read, nothing
there */
                    break;
                default:
                    if (APR_STATUS_IS_ETIMEDOUT(status)
                        || APR_STATUS_IS_ECONNABORTED(status)
                        || APR_STATUS_IS_ECONNRESET(status)
                        || APR_STATUS_IS_EOF(status)
                        || APR_STATUS_IS_EBADF(status)) {
                        /* common status for a client that has left */
                        ap_log_cerror( APLOG_MARK, APLOG_DEBUG, status,
session->c,
                                      "h2_session(%ld): terminating",
                                      session->id);
                        /* Stolen from mod_reqtimeout to speed up lingering
when
                         * a read timeout happened.
                         */
                        apr_table_setn(session->c->notes,
"short-lingering-close", "1");
                    }
                    else {
                        /* uncommon status, log on INFO so that we see this
*/
                        ap_log_cerror( APLOG_MARK, APLOG_INFO, status,
session->c,
                                      APLOGNO(02950) 
                                      "h2_session(%ld): error reading,
terminating",
                                      session->id);
                    }
                    h2_session_abort(session, status, 0);
                    goto end_process;
            }
===========================

I'm not familiar enough with differences in bucket handling between serf and
httpd to really make the call, but as the serf buckets were designed by the
same group:
I'm guessing that there might be successful reads with different status
values than just APR_SUCCESS.


In serf I would expect to see an immediate APR_EOF when there is only a
single frame to be read (or perhaps a few intermediate APR_EAGAINS and then
a EOF), which may both imply successful reading 0 or more bytes, followed by
their status code.

	Bert



From dev-return-84798-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 28 13:09:38 2015
Return-Path: <dev-return-84798-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2E3E8186BC
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 28 Nov 2015 13:09:38 +0000 (UTC)
Received: (qmail 50848 invoked by uid 500); 28 Nov 2015 13:09:37 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 50764 invoked by uid 500); 28 Nov 2015 13:09:36 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 50754 invoked by uid 99); 28 Nov 2015 13:09:36 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Nov 2015 13:09:36 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id A22CBC06CC
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 13:09:34 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id qqkLi3Jyij2P for <dev@httpd.apache.org>;
	Sat, 28 Nov 2015 13:09:33 +0000 (UTC)
Received: from mail-wm0-f54.google.com (mail-wm0-f54.google.com [74.125.82.54])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 9A559428E2
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 13:09:32 +0000 (UTC)
Received: by wmww144 with SMTP id w144so80876127wmw.1
        for <dev@httpd.apache.org>; Sat, 28 Nov 2015 05:09:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:thread-index
         :content-language;
        bh=W7WtHSnHVGPnmtYd3x+GrzFkRYQlgdcwL8f2rg+Pixw=;
        b=CvPhIcOYg8kNisTqU7d/AeD85W05KJYCUm6sSfM/Ou+u1lxcLfdgLXQpkt0QVudrQE
         0uADH4AEsi5jFchkH4poSjbU61rW9pmR3WRcKuSysihXn4TU+zXgCJW605fz+1KuORye
         bgCUic6ApefOjf5Jqy19Id+TxMP5CUCWs9ZmU=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :thread-index:content-language;
        bh=W7WtHSnHVGPnmtYd3x+GrzFkRYQlgdcwL8f2rg+Pixw=;
        b=RChCp5tFRjQvzii3K2Khvm9GdweixoueAlLr+3Eg07BbnmeCuyCHK60XANPTEeLMlM
         e0VUz0x2JmxDN38vV3P5yMuW15b6C4hEaBxtBfaZfgE+BRaghXnFeme0OsQB4d9rYsLV
         uMnQkGsdjZh3s1/KNi2L6zA/l0I4Z0fyv7Rw+b/WvkgtZd+9Wm2hCg7YxB2Y5RkzeHBO
         O6UAj2mSEDBE7XAPud6c68ceoyVfJ2OZ7YiB5v3hJNASMqVN3wBt3Z/0BdhIRDwPXmBr
         ARvCQ8Pt/ftM6vueljO+eTARSrnOw1wuvotLGLV2N5hH/O9bbzaYhtL7xVH5UZb08BLL
         BB8g==
X-Gm-Message-State: ALoCoQmkA3JK6PxnMJisWrNmQGiBt/3lMVxspUAhK42vQ8eg178Qk+15tXSqnbFigi9t91kGaPoo
X-Received: by 10.28.212.84 with SMTP id l81mr17256440wmg.50.1448716165623;
        Sat, 28 Nov 2015 05:09:25 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id a76sm12173638wma.19.2015.11.28.05.09.24
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 28 Nov 2015 05:09:25 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <stefan.eissing@greenbytes.de>,
	<dev@httpd.apache.org>
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl> <030501d12916$cf7e1120$6e7a3360$@qqmail.nl> <56599792.3060402@greenbytes.de>
In-Reply-To: <56599792.3060402@greenbytes.de>
Subject: RE: No H2 Window updates!
Date: Sat, 28 Nov 2015 14:09:13 +0100
Message-ID: <03a401d129dd$fafdbfe0$f0f93fa0$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AQJt5VCTIFs6KteEjCgZz0PozG8d2QIIvd2DAZcYZYmdWvDCgA==
Content-Language: nl



> -----Original Message-----
> From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
> Sent: zaterdag 28 november 2015 13:01
> To: dev@httpd.apache.org
> Subject: Re: No H2 Window updates!
> 
> I am not really here, but...
> 
> the window updates are sent out via update_window(), line 1001,
> h2_session.c. If you do not see any window updates with a client, it may
> be that the server app you called does not read its input. I have
> several test cases with uploads and they work with nghttp and curl.

In my case it doesn't...

-----------------------
if (h2_stream_set_has_open_input(session->streams)) {
                /* Check that any pending window updates are sent. */
                status = h2_mplx_in_update_windows(session->mplx,
update_window, session);
                if (APR_STATUS_IS_EAGAIN(status)) {
                    status = APR_SUCCESS;
                }
                else if (status == APR_SUCCESS) {
                    /* need to flush window updates onto the connection asap
*/
                    h2_conn_io_flush(&session->io);
                }
            }
------------------------


Looks like that ' h2_stream_set_has_open_input()' always returns false for
me, with those tiny requests of only 1 data frame.

The streams are marked as closed the moment a data frame with EOS is
received... that is: before the frame is processed.

In this testcase all data frames have EOS set, so this value would only be
true for me if some other outstanding request did not receive its data yet.
(Which doesn't happen yet as Subversion still assumes http/1 like
processing)



	Bert


From dev-return-84799-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 28 13:09:39 2015
Return-Path: <dev-return-84799-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E6A50186C0
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 28 Nov 2015 13:09:38 +0000 (UTC)
Received: (qmail 51638 invoked by uid 500); 28 Nov 2015 13:09:38 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 51523 invoked by uid 500); 28 Nov 2015 13:09:37 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 50766 invoked by uid 99); 28 Nov 2015 13:09:37 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Nov 2015 13:09:37 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 2FA83180A18
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 13:09:37 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.184
X-Spam-Level: *
X-Spam-Status: No, score=1.184 tagged_above=-999 required=6.31
	tests=[FSL_HELO_BARE_IP_2=0.873, HEADER_FROM_DIFFERENT_DOMAINS=0.001,
	RCVD_NUMERIC_HELO=0.865, RP_MATCHES_RCVD=-0.554, SPF_HELO_PASS=-0.001,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id mHn0Qp0rwYyU for <dev@httpd.apache.org>;
	Sat, 28 Nov 2015 13:09:26 +0000 (UTC)
Received: from plane.gmane.org (plane.gmane.org [80.91.229.3])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 3567120513
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 13:09:26 +0000 (UTC)
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <apache-dev@m.gmane.org>)
	id 1a2fFf-00010H-3V
	for dev@httpd.apache.org; Sat, 28 Nov 2015 14:09:19 +0100
Received: from 31.21.142.75 ([31.21.142.75])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Sat, 28 Nov 2015 14:09:19 +0100
Received: from phpdev by 31.21.142.75 with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Sat, 28 Nov 2015 14:09:19 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: dev@httpd.apache.org
From: Jan Ehrhardt <phpdev@ehrhardt.nl>
Subject: Re: No H2 Window updates!
Date: Sat, 28 Nov 2015 14:09:07 +0100
Lines: 16
Message-ID: <k89j5b1egob7q4vqd6bfua8ugb2sca3t61@4ax.com>
References: <5659778c.10e0.1b74.5712@land10.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: 31.21.142.75
X-Newsreader: Forte Agent 3.3/32.846

Steffen in gmane.comp.apache.devel (Sat, 28 Nov 2015 10:44:44 +0100):
>I saw issues on  boxes with the default  of number of concurrent 
>streams.
>
>Lowering the default 100 value of the directive  H2MaxSessionStreams 
>solved it.

I know that, because it is in this topic:
https://www.apachelounge.com/viewtopic.php?p=32186#32186

What is worrying me is that I do not have problems with mod_http2 1.0.5,
but mod_http2 1.0.8 in a default installation causes trouble with Drupal7.
It would be great if I could test it with mod_http2.so 1.0.8 from a
Apachelounge build.
-- 
Jan


From dev-return-84800-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 28 13:32:28 2015
Return-Path: <dev-return-84800-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 734B818727
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 28 Nov 2015 13:32:28 +0000 (UTC)
Received: (qmail 72116 invoked by uid 500); 28 Nov 2015 13:32:28 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 72064 invoked by uid 500); 28 Nov 2015 13:32:27 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 72054 invoked by uid 99); 28 Nov 2015 13:32:27 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Nov 2015 13:32:27 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id 7A8D9C7DBF
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 13:32:27 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd1-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id Gm_pVBoN1mAH for <dev@httpd.apache.org>;
	Sat, 28 Nov 2015 13:32:19 +0000 (UTC)
Received: from mail-wm0-f51.google.com (mail-wm0-f51.google.com [74.125.82.51])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 6137C429A6
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 13:32:19 +0000 (UTC)
Received: by wmww144 with SMTP id w144so81238648wmw.1
        for <dev@httpd.apache.org>; Sat, 28 Nov 2015 05:32:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:thread-index
         :content-language;
        bh=n959VJn3APoCiplvqPy/LfWN9DQTFzeBHlHR9z4lwpo=;
        b=H3VECOyiyMW1+I9FRfKvGOo9EY0HWhjHjCHv/D/himJyhhmlHEFSnni0DNGhEZB1vj
         LbWyPlv61HUuOyxYELJa7eQvobv0eZnzIev6TKK7IBsaZGJ4mpI/AVHs0usfcnnIh0JK
         zWo7AAJj/8r07Ln5cdoROqcwDHjXVVUc2MBfw=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :thread-index:content-language;
        bh=n959VJn3APoCiplvqPy/LfWN9DQTFzeBHlHR9z4lwpo=;
        b=KWhSAoihuJljhoykrHYSrLWyUsmNw2Q6g3sPwFR90qCLdOuaLvgSMmFstBpjbKPuan
         nNS5TAPuTOXLOH9LX75WkB0jq6uJu41Gz3GVHBSkp7SGXSqauRL3TZcKITmECz2v0qCY
         HGLtC1HFAQZl1OAAac1hphJiXqrDOncWsq30s6rmcDypOxAjsG/9yeZAjOLNXkg2hsrp
         lRGvE38AIUvyOoFnG4wzHvM0GNnsUy+aOqN7kGPXzehyLFzpV0QlFHgMf5MVRvIQONev
         NlTEzVDgxQoCHxCygCE1X4U96BV8uFo1WwgkxAFQ88Vajb9A+LkN3UMTm8GF3lL8sIKY
         bp9w==
X-Gm-Message-State: ALoCoQm3MztriL90hDIojdEjUvFOApQ9LYQYBRTMxRUMRtx0w6F1zLtGR2gp3fw3Zd/suhUFZ6tw
X-Received: by 10.194.19.168 with SMTP id g8mr27264105wje.38.1448717538521;
        Sat, 28 Nov 2015 05:32:18 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id a186sm12183920wmh.4.2015.11.28.05.32.17
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 28 Nov 2015 05:32:17 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <stefan.eissing@greenbytes.de>,
	<dev@httpd.apache.org>
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl> <030501d12916$cf7e1120$6e7a3360$@qqmail.nl> <56599792.3060402@greenbytes.de> <03a401d129dd$fafdbfe0$f0f93fa0$@qqmail.nl>
In-Reply-To: <03a401d129dd$fafdbfe0$f0f93fa0$@qqmail.nl>
Subject: RE: No H2 Window updates!
Date: Sat, 28 Nov 2015 14:32:05 +0100
Message-ID: <03aa01d129e1$2d49d990$87dd8cb0$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AQJt5VCTIFs6KteEjCgZz0PozG8d2QIIvd2DAZcYZYkCyYw91p1Eqd6g
Content-Language: nl

> -----Original Message-----
> From: Bert Huijben [mailto:bert@qqmail.nl]
> Sent: zaterdag 28 november 2015 14:09
> To: stefan.eissing@greenbytes.de; dev@httpd.apache.org
> Subject: RE: No H2 Window updates!
> 
> 
> 
> > -----Original Message-----
> > From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
> > Sent: zaterdag 28 november 2015 13:01
> > To: dev@httpd.apache.org
> > Subject: Re: No H2 Window updates!
> >
> > I am not really here, but...
> >
> > the window updates are sent out via update_window(), line 1001,
> > h2_session.c. If you do not see any window updates with a client, it may
> > be that the server app you called does not read its input. I have
> > several test cases with uploads and they work with nghttp and curl.
> 
> In my case it doesn't...
> 
> -----------------------
> if (h2_stream_set_has_open_input(session->streams)) {
>                 /* Check that any pending window updates are sent. */
>                 status = h2_mplx_in_update_windows(session->mplx,
> update_window, session);
>                 if (APR_STATUS_IS_EAGAIN(status)) {
>                     status = APR_SUCCESS;
>                 }
>                 else if (status == APR_SUCCESS) {
>                     /* need to flush window updates onto the connection
asap
> */
>                     h2_conn_io_flush(&session->io);
>                 }
>             }
> ------------------------
> 
> 
> Looks like that ' h2_stream_set_has_open_input()' always returns false for
> me, with those tiny requests of only 1 data frame.
> 
> The streams are marked as closed the moment a data frame with EOS is
> received... that is: before the frame is processed.
> 
> In this testcase all data frames have EOS set, so this value would only be
> true for me if some other outstanding request did not receive its data
yet.
> (Which doesn't happen yet as Subversion still assumes http/1 like
> processing)

If I just replace the

if (h2_stream_set_has_open_input(session->streams))

with if(TRUE) {

then I do receive a few window updates... Of a few bytes each though...
I would have expected a few huge returns (Kbyte+) every few requests that
send data.

So over the course of hundreds of requests my connection level window
shrinks to almost zero... at some points I receive a few updates of a few
hundred bytes... I even see one of a single byte.



Data on closed streams must be accounted towards the connection window, so
conditionalizing the whole processing on 'are there any readable streams' is
a clear bug. Skipping all data in the last frame is another one.
Perhaps the code can skip some of the processing in this case, but (as a
client) I would like to see my outgoing window at the connection updated
sooner.


In case of Subversion's real usage, I want to commit potentially hundreds of
MByte, so a connection level window of more than a few bytes would be very
welcome.... With HTTP/1 we send out the data as fast as we can and the TCP
windowing handles this from the httpd side... Now the http/2 level windowing
should handle this.


Mod_dav and mod_dav_svn are usually fast readers; just limited by trivial
disk io or xml processing in the common operations, so I don't expect real
problems there.


	Bert



From dev-return-84801-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sat Nov 28 21:29:35 2015
Return-Path: <dev-return-84801-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 722D118F1F
	for <apmail-httpd-dev-archive@www.apache.org>; Sat, 28 Nov 2015 21:29:35 +0000 (UTC)
Received: (qmail 17665 invoked by uid 500); 28 Nov 2015 21:29:34 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 17603 invoked by uid 500); 28 Nov 2015 21:29:34 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 17593 invoked by uid 99); 28 Nov 2015 21:29:34 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Nov 2015 21:29:34 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 55944180A17
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 21:29:34 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.1
X-Spam-Level:
X-Spam-Status: No, score=-0.1 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd3-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id q2p3sjpeh8uO for <dev@httpd.apache.org>;
	Sat, 28 Nov 2015 21:29:24 +0000 (UTC)
Received: from mail-wm0-f45.google.com (mail-wm0-f45.google.com [74.125.82.45])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 04D6020230
	for <dev@httpd.apache.org>; Sat, 28 Nov 2015 21:29:24 +0000 (UTC)
Received: by wmuu63 with SMTP id u63so88357718wmu.0
        for <dev@httpd.apache.org>; Sat, 28 Nov 2015 13:29:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:thread-index
         :content-language;
        bh=RTvwRaT6yS3o5wu27wdSbOO5Dhmjf5PSPvx/As55NzI=;
        b=JCk/UxoR5wWHM2J5YmJS4Dm6abhg6wbPoK0B7KgvVbc4dqZoDO5K+iOIXBi/97wPJ1
         2Sk2SJr8C60j4pBRHzgQAixtOhU3grwV0Gp5FANl7LyRbCtQggzRSiVtnpM/Q6jOriTL
         uNtcUvsZ0zW0+Cl3u/SwbK33N4L0wrZtZG6bk=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :thread-index:content-language;
        bh=RTvwRaT6yS3o5wu27wdSbOO5Dhmjf5PSPvx/As55NzI=;
        b=lWzGqq28uE1BkJh5oYOOZKv+gzyX8EdwnMijm7+FM/Zsw+5HzToRfJczY753n9BhUc
         utEEqF5YnY5Se/t1+rmnjJ6rYYwoj5+vpBSil1IewgWdbh8kABQfHheoHjZVf66Ubrap
         FMSOCTt/GYjW8+sPfJ0FHZHwXNgCm+HN1caNba08ZzrerAEeOyyYfU/MFJ4nTG/ZNJ4y
         4ja16eZjjqTPExsD6ni0R//Nnk0a+kEWQkQ1Y3U4VyiB8y37EaBMyibM8EX81BQoLH2Y
         CjdKvtepvahzmDr+3bKacRKknvTC7Gi1MClRD0lE7VzjJokJKUlG1KDUOk/EsxtxiIFO
         oZBw==
X-Gm-Message-State: ALoCoQkbzGpKrni3ENp23PWO0JIIodc5YocdbY4UQ3R45l5o94VhBjJE1lEsryA978pK6MmmrHKK
X-Received: by 10.28.187.4 with SMTP id l4mr18197684wmf.33.1448746157179;
        Sat, 28 Nov 2015 13:29:17 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id z1sm39084483wje.35.2015.11.28.13.29.16
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 28 Nov 2015 13:29:16 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl> <030501d12916$cf7e1120$6e7a3360$@qqmail.nl> <56599792.3060402@greenbytes.de> <03a401d129dd$fafdbfe0$f0f93fa0$@qqmail.nl> <03aa01d129e1$2d49d990$87dd8cb0$@qqmail.nl>
In-Reply-To: <03aa01d129e1$2d49d990$87dd8cb0$@qqmail.nl>
Subject: RE: No H2 Window updates!
Date: Sat, 28 Nov 2015 22:29:03 +0100
Message-ID: <040101d12a23$ced65530$6c82ff90$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AQJt5VCTIFs6KteEjCgZz0PozG8d2QIIvd2DAZcYZYkCyYw91gGJZW1znTjeQnA=
Content-Language: nl

> -----Original Message-----
> From: Bert Huijben [mailto:bert@qqmail.nl]
> Sent: zaterdag 28 november 2015 14:32
> To: stefan.eissing@greenbytes.de; dev@httpd.apache.org
> Subject: RE: No H2 Window updates!


> In case of Subversion's real usage, I want to commit potentially hundreds
of
> MByte, so a connection level window of more than a few bytes would be
> very
> welcome.... With HTTP/1 we send out the data as fast as we can and the TCP
> windowing handles this from the httpd side... Now the http/2 level
> windowing
> should handle this.
> 
> 
> Mod_dav and mod_dav_svn are usually fast readers; just limited by trivial
> disk io or xml processing in the common operations, so I don't expect real
> problems there.

For my commits against the svn-master.apache.org repository my latency/ping
time is +- 142 ms.

With the current simple algorithm and a maximum window of 64
Kbyte/connection, I can send a theoretical maximum of 64 Kbyte/142 ms per
connection to that server... which would be about 450 Kbyte/s.
(=1/0.142*65536/1024)

That is < 1/30th of the bandwidth I have at my disposal (+- 150 Mbit).

But currently I don't even get anywhere near that as my window continues to
shrink because some data is missed in accounting even after my simple patch.



For httpd we have to think carefully which algorithm we want to implement
here. Preferably the algorithm should be better than TCP could, as we know
the specifics of the http algorithm better than plain TCP could for
HTTP/1,1. TCP does send a lot of window updates though... Almost every
packet does.


Solving the really hard problems, like this one, is the reason I didn't
think the nghttp2 library would really be the solution for serf. 
It is nice for such a library to provide a head start on the protocol level,
but there is no way a standard library can really solve this scheduling
problem in a generic way. (If it could do it, we had used that solution for
TCP... and never had to resort to designing a HTTP/2 in the first place).

See https://en.wikipedia.org/wiki/TCP_window_scale_option for some
introduction on how TCP was extended to work above the limit that currently
applies to H2.


Dynamic window sizing/scaling will have to be implemented at some point, at
both the stream and the connection level... This will involve timing,
measuring, etc. etc. Things nghttp2 can't do for us right now.
And if I'm right this might take continuous optimizing for years to come.



When I connect to sites like google I immediately receive a large connection
level window, to allow me to post huge blobs without a delay. (Haven't
tested their stream level windows behavior yet)
In serf I do something similar... and then apply a bit of throttling at the
stream level.


I would guess some clients have already implemented some of this, so we
might be able to learn from their implementations... Clients will see much
more incoming data than servers of course :).


	Bert 



From dev-return-84802-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov 29 07:15:17 2015
Return-Path: <dev-return-84802-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6C30D186E4
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 29 Nov 2015 07:15:17 +0000 (UTC)
Received: (qmail 55207 invoked by uid 500); 29 Nov 2015 07:15:17 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 55146 invoked by uid 500); 29 Nov 2015 07:15:16 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 55137 invoked by uid 99); 29 Nov 2015 07:15:16 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Nov 2015 07:15:16 +0000
Received: from asf-bz1-us-mid.priv.apache.org (nat1-us-mid.apache.org [23.253.172.122])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPS id 8D92E1A0149
	for <dev@httpd.apache.org>; Sun, 29 Nov 2015 07:15:16 +0000 (UTC)
Received: by asf-bz1-us-mid.priv.apache.org (ASF Mail Server at asf-bz1-us-mid.priv.apache.org, from userid 0)
	id 1101D604A3; Sun, 29 Nov 2015 07:15:16 +0000 (UTC)
From: bugzilla@apache.org
To: dev@httpd.apache.org
Subject: Bug report for Apache httpd-2 [2015/11/29]
Message-Id: <20151129071516.1101D604A3@asf-bz1-us-mid.priv.apache.org>
Date: Sun, 29 Nov 2015 07:15:06 +0000 (UTC)

+---------------------------------------------------------------------------+
| Bugzilla Bug ID                                                           |
|     +---------------------------------------------------------------------+
|     | Status: UNC=Unconfirmed NEW=New         ASS=Assigned                |
|     |         OPN=Reopened    VER=Verified    (Skipped Closed/Resolved)   |
|     |   +-----------------------------------------------------------------+
|     |   | Severity: BLK=Blocker CRI=Critical  REG=Regression  MAJ=Major   |
|     |   |           MIN=Minor   NOR=Normal    ENH=Enhancement TRV=Trivial |
|     |   |   +-------------------------------------------------------------+
|     |   |   | Date Posted                                                 |
|     |   |   |          +--------------------------------------------------+
|     |   |   |          | Description                                      |
|     |   |   |          |                                                  |
| 7483|Ass|Enh|2002-03-26|Add FileAction directive to assign a cgi interpret|
| 8713|Inf|Min|2002-05-01|No Errorlog on PROPFIND/Depth:Infinity            |
| 8867|Opn|Cri|2002-05-07|exports.c generation fails when using a symlink to|
|10747|New|Maj|2002-07-12|ftp SIZE command and 'smart' ftp servers results i|
|11294|New|Enh|2002-07-30|desired vhost_alias option                        |
|11580|Opn|Enh|2002-08-09|generate Content-Location headers                 |
|12033|Opn|Nor|2002-08-26|Graceful restart immediately result in [warn] long|
|12680|New|Enh|2002-09-16|Digest authentication with integrity protection   |
|13599|Inf|Nor|2002-10-14|autoindex formating broken for multibyte sequences|
|13661|Ass|Enh|2002-10-15|Apache cannot not handle dynamic IP reallocation  |
|14104|Opn|Enh|2002-10-30|not documented: must restart server to load new CR|
|14496|New|Enh|2002-11-13|Cannot upgrade any version on Windows. Must uninst|
|14922|Inf|Enh|2002-11-28|<target> is currently hardcoded to 'apache2'      |
|15719|Inf|Nor|2002-12-30|WebDAV MOVE to destination URI which is content-ne|
|16761|Inf|Nor|2003-02-04|CustomLog with pipe spawns process during config  |
|16802|New|Enh|2003-02-05|Additional AllowOverride directive "Restrict"     |
|16811|Ass|Maj|2003-02-05|mod_autoindex always return webpages in UTF-8.    |
|17107|New|Min|2003-02-16|Windows should not install printenv               |
|17114|New|Enh|2003-02-17|Please add strip and install-strip targets to Make|
|17244|Ass|Nor|2003-02-20|./configure --help gives false information regardi|
|17497|Opn|Nor|2003-02-27|mod_mime_magic generates incorrect response header|
|18325|New|Enh|2003-03-25|PAM support for suEXEC                            |
|18334|Inf|Cri|2003-03-25|Server crashes when authenticating users against L|
|18497|New|Min|2003-03-30|configure --help gives wrong default for sysconfdi|
|19043|New|Min|2003-04-15|Interesting interaction between cern_meta module a|
|19670|New|Enh|2003-05-05|content type header supplied upon PUT is thrown aw|
|20036|Ass|Nor|2003-05-19|Trailing Dots stripped from PATH_INFO environment |
|21253|New|Nor|2003-07-01|Mime magic doesn't continue if type is specifed fo|
|21260|New|Nor|2003-07-02|CacheMaxExpire directive not enforced !           |
|21533|Ass|Cri|2003-07-11|Multiple levels of htacces files can cause mod_aut|
|22138|Inf|Cri|2003-08-05|Webdav is not preccessing special chars right.    |
|22237|New|Enh|2003-08-08|option to disable ServerSignature on index pages  |
|22484|Opn|Maj|2003-08-16|semaphore problem takes httpd down                |
|22686|Opn|Nor|2003-08-25|ab: apr_poll: The timeout specified has expired (7|
|22898|Opn|Nor|2003-09-02|nph scripts with two HTTP header                  |
|23167|Inf|Cri|2003-09-14|--enable-layout never goes to apr apr-util        |
|23181|New|Nor|2003-09-15|Status 304 (Not modified) and chunking leads to an|
|23238|New|Cri|2003-09-18|non-async-signal-safe operations from signal handl|
|23330|New|Enh|2003-09-22|Enhance ApacheMonitor to view and control Tomcat s|
|23911|Opn|Cri|2003-10-18|CGI processes left defunct/zombie under 2.0.54    |
|24031|New|Enh|2003-10-23|Passphrase protected private key in SSLProxyMachin|
|24095|Opn|Cri|2003-10-24|ERROR "Parent: child process exited with status 32|
|24437|Opn|Nor|2003-11-05|mod_auth_ldap doubly-escapes backslash (\) charact|
|24890|Opn|Nor|2003-11-21|Apache config parser should not be local aware ( g|
|25014|New|Enh|2003-11-26|A flexible interface for mod_log_config           |
|25201|New|Enh|2003-12-04|Provide Cache Purge operation                     |
|25240|Inf|Enh|2003-12-05|SSL Library Error: 336105671 logged as information|
|25435|New|Enh|2003-12-11|sethandler and directoryindex not playing nice    |
|25469|Opn|Enh|2003-12-12|create AuthRoot for defining paths to auth files  |
|25484|Ass|Nor|2003-12-12|Non-service Apache cannot be stopped in WinXP     |
|25543|Inf|Nor|2003-12-15|mod_proxy_ajp overwrites existing response headers|
|25667|New|Nor|2003-12-19|Memory leak in function ssl_scache_dbm_retrieve().|
|25863|New|Enh|2004-01-02|new per-host initialization hooks                 |
|26005|New|Nor|2004-01-08|SERVER_NAME incorrect when using IPv6 address in U|
|26142|New|Maj|2004-01-14|EnableSendFile Off for Windows XP Home            |
|26153|Opn|Cri|2004-01-15|Apache cygwin directory traversal vulnerability   |
|26368|New|Min|2004-01-23|File extensions in AddDescription treated as part |
|26446|New|Nor|2004-01-26|flush buckets followed by eos bucket emit multiple|
|26478|New|Enh|2004-01-28|mod_dav does not expose a method for setting the D|
|26835|New|Enh|2004-02-10|[PATCH] Mod_status Readability & Browser Side Tabl|
|27257|Ass|Enh|2004-02-26|rotatelogs with getopt and setuid                 |
|27578|New|Enh|2004-03-10|made getlastmodified a writable property          |
|27715|Ass|Enh|2004-03-16|Client sending misformed Range "bytes = 0-100" ins|
|27791|Inf|Nor|2004-03-18|mod_cache doesn't re-cache expired content        |
|27835|New|Enh|2004-03-22|When proxying FTP, all errors turns into 404      |
|27869|New|Enh|2004-03-23|stopping and starting httpd again immediately caus|
|28854|Inf|Nor|2004-05-09|Build fails with missing library call on Solaris i|
|28903|New|Enh|2004-05-11|Hooks to add environment variables to CGI and othe|
|29090|Ass|Enh|2004-05-19|MultiviewsMatch NegotiatedOnly extensions not resp|
|29165|New|Nor|2004-05-24|Parent directory icon not correct                 |
|29446|New|Enh|2004-06-08|want directive for setting content negotiation qua|
|29449|New|Enh|2004-06-09|Limit length of specified fields in LogFormat     |
|29450|New|Enh|2004-06-09|Improved logging for mod_access                   |
|29510|Ass|Enh|2004-06-10|ab does not support multiple cookies              |
|29644|Ver|Nor|2004-06-17|mod_proxy keeps downloading even after the client |
|29755|Opn|Nor|2004-06-23|mod_usertrack should use err_headers_out          |
|29822|New|Enh|2004-06-26|implement FTP 'PUT' support in proxy_ftp.c        |
|29941|Ass|Enh|2004-07-06|log files are not tested for availability on confi|
|30259|Ass|Enh|2004-07-22|When proxy connects to backend, a DNS lookup is do|
|30505|Ass|Enh|2004-08-05|Apache uses 'Error', and not lower level event typ|
|30730|Inf|Nor|2004-08-18|[PatchAvailable] mod_actions and Server-Status    |
|30865|Inf|Maj|2004-08-26|mod_disk_cache leaves many temporary files slowing|
|31302|Opn|Cri|2004-09-19|suexec doesn't execute commands if they're not in |
|31311|New|Enh|2004-09-20|Remote user not logged in reverse proxy scenario  |
|31352|Ass|Enh|2004-09-21|RFE, Bind to LDAP server with browser supplier use|
|31418|Opn|Nor|2004-09-25|SSLUserName is not usable by other modules        |
|31484|New|Maj|2004-09-30|Custom environment variables not passed to content|
|31490|New|Nor|2004-09-30|mod_proxy_ftp renders filenames with spaces badly |
|31565|New|Enh|2004-10-06|Won't start correctly if parent closed stdin, stdo|
|31679|New|Enh|2004-10-12|If the argument of a CGI has two or more consecuti|
|31709|Inf|Nor|2004-10-13|Raises an error on SSL name based virtualhosts (wi|
|31712|New|Enh|2004-10-14|config_file is NULL at ap_walk_config etc         |
|31952|New|Enh|2004-10-29|mod_proxy and RealPlayer: audio content streaming |
|32051|Opn|Nor|2004-11-04|mod_example is not thread safe                    |
|32328|Opn|Enh|2004-11-19|Make mod_rewrite escaping optional / expose intern|
|32346|New|Enh|2004-11-22|mod_include/include virtual checks content-type is|
|32524|New|Enh|2004-12-03|ab: add an option to specify a source address     |
|32703|Inf|Enh|2004-12-14|Cannot determine that Apache is frozen if /var fil|
|32750|Ass|Maj|2004-12-17|mod_proxy + Win32DisableAcceptEx = memory leak    |
|32877|New|Enh|2004-12-29|wrong utf-8 encoding/escaping in a href for umlaut|
|33084|New|Enh|2005-01-13|Optional certificate validity period check on SSLV|
|33089|New|Nor|2005-01-13|mod_include: Options +Includes (or IncludesNoExec)|
|33207|New|Nor|2005-01-23|Results of my suexec.c code audit                 |
|33215|New|Nor|2005-01-24|Cygwin build/install.sh fix (OSTYPE => ext=.exe)  |
|33512|Inf|Maj|2005-02-11|mod_mem_cache and possibly mod_deflate            |
|33627|New|Nor|2005-02-18|Bite-sized changes making progress towards compila|
|33685|New|Maj|2005-02-22|Unable to install in the path containing non engli|
|34270|Inf|Nor|2005-04-01|Large POSTs over SSL from Internet Explorer do not|
|34375|New|Enh|2005-04-08|enhancements for mod_include                      |
|34377|New|Enh|2005-04-08|Allow the overriding of 401 Unauthorized returns f|
|34405|New|Enh|2005-04-11|adds DOCUMENT_NAME_WITHOUT_SUFFIX to mod_include  |
|34508|New|Nor|2005-04-19|Randomly slow graceful restart, not accepting new |
|34519|New|Enh|2005-04-19|Directory index should emit valid XHTML           |
|35049|New|Nor|2005-05-24|let AddDefaultCharset apply to text/css and applic|
|35077|New|Nor|2005-05-26|mod_dav passes incorrect paths with LocationMatch |
|35083|Inf|Enh|2005-05-26|Certificate validation problems trapping          |
|35098|Ver|Maj|2005-05-27|Install fails using --prefix                      |
|35154|New|Nor|2005-06-01|Support for NID_serialNumber, etc. in SSLUserName |
|35245|New|Nor|2005-06-06|cache ignores max-age cache-directive in requests |
|35250|New|Enh|2005-06-07|[PatchAvailable] add logging to mod_proxy_connect |
|35280|New|Nor|2005-06-09|FTP proxy breaks RFC 2428 when trying to fall back|
|35556|Inf|Nor|2005-06-30|CRL files not re-read by HUP                      |
|35652|Opn|Min|2005-07-07|Improve error message: "pcfg_openfile: unable to c|
|35702|New|Nor|2005-07-12|Using with https URL, ab freezes or gets SIGSEGV o|
|35781|New|Nor|2005-07-18|ap_sub_req_method_uri() bypasses Limit security co|
|35981|Inf|Maj|2005-08-02|mod_dav overrides dav_fs response on PUT failure  |
|36286|New|Enh|2005-08-20|configtest doesn't check SSL certificates         |
|36492|New|Nor|2005-09-04|split-logfile script dies when splitting log of ma|
|36495|Inf|Nor|2005-09-05|mod_proxy_ajp: ajp_check_msg_header() got bad sign|
|36564|New|Enh|2005-09-08|make mod_ldap really universal                    |
|36636|New|Maj|2005-09-13|database write lock taken for PROPFIND operations |
|36676|New|Nor|2005-09-15|time() bug in httpd/os/win32/util_win32.c:wait_for|
|36710|Opn|Blk|2005-09-19|CGI output not captured                           |
|36724|New|Nor|2005-09-20|Don't install Apache Monitor by default           |
|37110|New|Nor|2005-10-17|Build fails when source tree is read-only         |
|37196|Inf|Min|2005-10-21|Wrong "Parent directory" link                     |
|37201|New|Enh|2005-10-21|Add <IfInterface IP> syntax to apache configuratio|
|37290|Opn|Min|2005-10-28|DirectoryIndex don't work in scriptaliased directo|
|37307|New|Enh|2005-10-31|Can't suppress error messages                     |
|37355|New|Enh|2005-11-04|Allow to specify Proxy-Authorization in ProxyRemot|
|37360|New|Maj|2005-11-04|Install fails on Windows XP x64 when program files|
|37402|New|Nor|2005-11-08|mod_proxy has stopped allowing POST sub-requests  |
|37514|Inf|Nor|2005-11-15|mod_proxy buffers chunked data.                   |
|37564|New|Enh|2005-11-19|Suggestion: mod_suexec SuexecUserGroup directive i|
|37587|Inf|Min|2005-11-22|mod_status Total Traffic value goes up then down? |
|37770|Opn|Blk|2005-12-03|proxy: error reading status line from remote serve|
|37823|Inf|Nor|2005-12-07|The openssl library linked is different between ht|
|37920|New|Maj|2005-12-15|mod_proxy does not flush data on POST requests fro|
|38116|New|Enh|2006-01-04|Chroot-Patch for SuExec                           |
|38164|New|Nor|2006-01-06|wrong status code for failed COPY/MOVE            |
|38182|New|Nor|2006-01-08|COPY ignores authority in Destination header      |
|38218|New|Enh|2006-01-10|Multiline Comments for *.conf files               |
|38240|Inf|Nor|2006-01-12|apache restart segfault with mutliple Include dire|
|38325|Opn|Nor|2006-01-20|impossible to determine AUTH_TYPE of interpreted r|
|38355|Unc|Enh|2006-01-23|DSO support for mod_rewrite                       |
|38369|New|Enh|2006-01-24|mod_proxy keeps alive connections that should be b|
|38408|New|Nor|2006-01-27|SSI environment vars not set in spawned processes |
|38419|New|Nor|2006-01-27|Problems with large WebDAV properties             |
|38478|New|Maj|2006-02-01|A client starting a SSL renegotiation can crash th|
|38515|New|Enh|2006-02-05|Dynamic LDAP Group Support                        |
|38550|New|Enh|2006-02-07|Setting headers based on proxied data             |
|38571|New|Enh|2006-02-08|CustomLog directive checked by apachectl configtes|
|38756|Inf|Nor|2006-02-22|errors with running make                          |
|38786|New|Nor|2006-02-26|"IndexOption VersionSort" has problems with traili|
|38827|New|Reg|2006-03-02|mod_disk_cache trying to rename locked tempfile on|
|38864|Inf|Enh|2006-03-06|ProxyPassReverse fails in <Location>              |
|38903|New|Maj|2006-03-09|r->allowed does not affect Allow response header  |
|38923|New|Min|2006-03-10|mod_speling incorrectly escapes linked URLs       |
|38928|New|Min|2006-03-11|propose removing "VARIANTS" feature               |
|38995|New|Nor|2006-03-16|httpd tries to communicate with the CGI daemon eve|
|39111|New|Nor|2006-03-27|Potential bug brought by mmapfile (mod_file_cache)|
|39128|Inf|Maj|2006-03-28|Apache 2.2 will not compile mod_ssl library's corr|
|39185|Inf|Nor|2006-04-03|Approximately in 1-2 weeks of work the server hang|
|39216|New|Maj|2006-04-05|mod_disk_cache trying to rename locked file, decre|
|39238|New|Nor|2006-04-07|mod_auth_dbm requires mod_auth or "no groups file?|
|39275|Opn|Nor|2006-04-11|slow child_init causes MaxClients warning         |
|39287|New|Nor|2006-04-12|Incorrect If-Modified-Since validation (due to syn|
|39299|New|Nor|2006-04-13|Internal Server Error (500) on COPY               |
|39329|Inf|Nor|2006-04-17|mod_dbd reconnection and prepared statements      |
|39370|New|Nor|2006-04-20|SSL session will be removed if the client is sendi|
|39380|Inf|Nor|2006-04-21|mod_disk_cache eats memory, has no LFS support, et|
|39418|New|Nor|2006-04-26|CacheMaxExpire directive not enforced             |
|39448|New|Min|2006-04-29|old-style <directory proxy:*> doesn't give any war|
|39498|New|Nor|2006-05-06|accept_filter in apr assumes if found in sys/socke|
|39517|New|Nor|2006-05-08|Corrupt chunked transfer-encoding with Content Neg|
|39658|Opn|Nor|2006-05-25|mod_proxy_ajp SSL Key Size Bug                    |
|39673|New|Nor|2006-05-29|mod_proxy opens connections that disturb NTLM     |
|39692|New|Nor|2006-05-31|mod_proxy_balancer doesn't retry a failed request |
|39723|Inf|Enh|2006-06-05|Forward proxy does not work in tranparent mode    |
|39727|Ass|Nor|2006-06-05|Incorrect ETag on gzip:ed content                 |
|39730|New|Nor|2006-06-06|LanguagePriority and DefaultLanguage are Case Sens|
|39737|New|Nor|2006-06-06|LogFormat "%{tid}P" reports wrong thread id on Win|
|39748|New|Enh|2006-06-07|Header and POST support for mod_include           |
|39753|New|Nor|2006-06-07|incorrect source for LOCALE Decimal Symbol in Win2|
|39785|Inf|Nor|2006-06-12|Status code 408 (Request Timeout) is not logged   |
|39807|Opn|Enh|2006-06-13|large files / filesystem corruption can cause apac|
|39902|New|Nor|2006-06-27|HeaderName directive breaks mod_filter somehow    |
|39904|New|Nor|2006-06-27|graceful restart error and cpu load               |
|39913|Ass|Blk|2006-06-27|detection of static OpenSSL libraries requiring li|
|39916|New|Nor|2006-06-28|Core Filters & non-blocking Sendfile              |
|39923|New|Nor|2006-06-28|AddDescription doesn't work in server config with |
|39928|New|Nor|2006-06-28|port no detected when file name not in URL        |
|39935|New|Nor|2006-06-29|AddDescription does not do literal comparisons on |
|39973|Ass|Enh|2006-07-06|apache software folder should be movable          |
|40035|New|Cri|2006-07-13|Windows Server 2003 "("R2")" 64-Bit Edition no cgi|
|40060|New|Nor|2006-07-17|AuthGroupFile should accept /etc/group syntax     |
|40075|New|Enh|2006-07-19|unable to use ldap groups that contain DNs and use|
|40102|Opn|Nor|2006-07-24|SCRIPT_NAME set incorrectly with mod_rewrite      |
|40146|New|Nor|2006-07-31|mod_ssl info in server_info is blank              |
|40174|New|Min|2006-08-03|Unable to get IndexOptionis ScanHTMLTitles to work|
|40180|Inf|Maj|2006-08-03|Mod_dav and remove folder doesn't work with Micros|
|40190|New|Nor|2006-08-05|translate file                                    |
|40196|New|Nor|2006-08-06|EILSEQ handling, NoImplicitAdd should work, and so|
|40217|Opn|Nor|2006-08-08|mod_dav PROPFIND ignores access restrictions on it|
|40266|Inf|Blk|2006-08-16|berkeley db support in httpd is screwed           |
|40312|New|Nor|2006-08-24|ssl_engine_init.c, ssl_init_ctx_verify contains a |
|40373|New|Nor|2006-08-31|mod_dir adds trailing slash after internal redirec|
|40408|New|Blk|2006-09-04|Apache 2.2.3 is not starting                      |
|40416|New|Maj|2006-09-05|mod_proxy_ftp cannot connect under http load in fo|
|40441|New|Enh|2006-09-08|intelligently handling dynamic subdomains         |
|40453|New|Nor|2006-09-09|lexicographic compare in RewriteCond isn't lexicog|
|40463|New|Nor|2006-09-11|piped logging causes some weird kill()ing         |
|40513|Opn|Maj|2006-09-14|Seeding PRNG with 0 bytes of entropy              |
|40514|New|Nor|2006-09-14|would like GracefulShutdownTimeout to work for gra|
|40540|Inf|Nor|2006-09-19|Bad interaction between MultiViews and SetOutputFi|
|40541|New|Nor|2006-09-19|Action rewrites URI used by Location?             |
|40571|New|Nor|2006-09-21|mod_proxy_ajp don't works with mod_usertrack      |
|40586|New|Enh|2006-09-22|Add option to supress default '-' output          |
|40746|New|Enh|2006-10-12|Feature request: ProxyAllow directive             |
|40749|New|Min|2006-10-12|magic file with string and "%n" causes Apache chil|
|40781|New|Nor|2006-10-17|PATH_TRANSLATED: 'redirect:/~jablko/gallery2/main.|
|40808|New|Enh|2006-10-23|ProxyRemote with optional proxy authentication    |
|40859|New|Enh|2006-11-01|[PATCH] Support -F force option to 'ab' support to|
|40917|New|Nor|2006-11-07|configure does not detect OpenSSL shared lib on HP|
|40953|New|Min|2006-11-12|Should not send any data in 1xx/204/304 reply from|
|40984|Inf|Enh|2006-11-16|AddIcon, AddIconByType for OpenDocument format    |
|40987|Opn|Enh|2006-11-16|ProxyVia Block doesn't remove Via: header for reve|
|41000|New|Nor|2006-11-19|mod_authn_dbd have an error, in function 'authn_db|
|41025|New|Nor|2006-11-23|ROBOTS META-Tag directive needed in mod_autoindex |
|41088|New|Nor|2006-11-30|installation backcolor is wrong (white)           |
|41111|New|Enh|2006-12-05|New option for filters: run only if there are spar|
|41114|New|Blk|2006-12-06|ACL HTTP method is rejected by mod_proxy_ajp      |
|41130|New|Nor|2006-12-07|mod_mime and mod_negotiation type-map both clobber|
|41143|Opn|Nor|2006-12-10|Incorrect ap_getline assumption in mod_proxy_http |
|41195|New|Nor|2006-12-17|properly set the parent pid on shutdown           |
|41196|New|Nor|2006-12-17|worker mpm usage of apr's memory pools is not thre|
|41200|Inf|Maj|2006-12-18|SSI include, prevent client from receiving full ou|
|41240|Inf|Enh|2006-12-25|BRF files support                                 |
|41262|Inf|Nor|2006-12-29|Embedded pcre causes runtime segfault             |
|41362|Inf|Maj|2007-01-14|mod_disk_cache and mod_include conflict generating|
|41375|Inf|Min|2007-01-15|Using same SSL Certificate with different ServerNa|
|41391|New|Min|2007-01-17|too long period setting makes max-age overflow    |
|41412|New|Enh|2007-01-19|RewriteRule Skip should take negative arguments   |
|41435|New|Nor|2007-01-22|Authentication fails with 500 Server Error        |
|41450|Inf|Cri|2007-01-24|Empty page (200 OK) while max-age is empty        |
|41485|New|Nor|2007-01-28|LDAP client certificates not usable in 2.2.x/trunk|
|41529|New|Enh|2007-02-02|Accept BOM in .htaccess                           |
|41556|New|Enh|2007-02-07|Feature Request: format string for masking ip addr|
|41621|New|Maj|2007-02-15|Apache 2.2.4 backend problem with Apache 2.0.59 Re|
|41646|New|Nor|2007-02-16|wrong headers are sent for HEAD requests when Prox|
|41676|Opn|Enh|2007-02-22|Refactor mod_proxy_ftp                            |
|41685|New|Enh|2007-02-22|Implement optional HTTP Authentication in a standa|
|41712|Inf|Nor|2007-02-26|threads locked at logging state                   |
|41729|New|Maj|2007-02-28|error message: ap_get_scoreboard_lb(130) failed in|
|41744|Inf|Maj|2007-03-01|SSI resolves includes but removes original HTML   |
|41763|Opn|Nor|2007-03-05|mod_disk_cache ignores CacheDirLevels and CacheDir|
|41764|New|Nor|2007-03-05|error state and conf                              |
|41771|Inf|Nor|2007-03-06|Erro with mod_proxy_ajp or mod_prox_balancer      |
|41867|New|Nor|2007-03-16|<DirectoryMatch> Matches Files                    |
|41925|New|Nor|2007-03-21|trivial patch to add automatic crypting to 'dbmman|
|41929|New|Nor|2007-03-22|ISAPI ssl variables                               |
|41953|New|Nor|2007-03-26|pidfile remains when 2nd pass of post-config retur|
|41962|New|Min|2007-03-27|Need mod_auth_ldap to authenticate with Active Dir|
|42027|Inf|Nor|2007-04-02|FileETag directive appears to be ignored          |
|42054|New|Nor|2007-04-04|service name and parameter issues                 |
|42079|New|Nor|2007-04-10|SSLRequire: Additional access in sub-directoies   |
|42082|New|Nor|2007-04-10|filter_init is called multiple times after an INCL|
|42182|Inf|Nor|2007-04-22|Mime types for cached proxied content             |
|42216|New|Enh|2007-04-24|RFE -- external overload procedure                |
|42262|Inf|Nor|2007-04-26|mod_dav /  worker fails to allocate memory and seg|
|42287|Inf|Nor|2007-04-28|chunked encoded response to POST request to cgi sc|
|42368|Inf|Nor|2007-05-09|httpd is crashing if conf/extra/httpd-manual.conf |
|42373|Inf|Maj|2007-05-09|REPORT request fails over mod_proxy               |
|42404|New|Enh|2007-05-13|Filename/info for disk-cached proxied remote URLs |
|42425|Inf|Nor|2007-05-15|Additional freshness checks in mod_cache.c cause m|
|42471|Inf|Nor|2007-05-21|clients with IE7 take 3megs per page load. httpd.e|
|42492|Inf|Nor|2007-05-22|mod_proxy_ajp with SSL front end: data corruption |
|42499|Inf|Nor|2007-05-23|Backslash produces a 404 error instead of going to|
|42548|New|Nor|2007-05-30|INCLUDE negotiating language aborts with APR_POOL_|
|42561|New|Enh|2007-05-31|[PATCH] AuthLDAPRemoteUserAttribute only applies i|
|42633|New|Min|2007-06-11|mod_info gives wrong information about actual conf|
|42665|New|Nor|2007-06-14|spurious attempt to open ".../file.html/.htaccess"|
|42666|New|Nor|2007-06-14|code & docs corrections for FollowSymLinks and Sym|
|42667|New|Nor|2007-06-14|mod_proxy_balancer not reporting when workers are |
|42668|Inf|Nor|2007-06-14|balancer_manager shows Ok status for the workers t|
|42687|New|Nor|2007-06-18|Fully delegate certificate & key semantics to the |
|42688|New|Enh|2007-06-18|engine managed keys: per process openssl context  |
|42690|New|Nor|2007-06-18|realm is not set for each configured directory whe|
|42695|Inf|Cri|2007-06-18|mod_proxy balancer problem                        |
|42699|New|Enh|2007-06-20|share mod_logio data with other modules           |
|42711|New|Enh|2007-06-20|format string for whole log entries not just id   |
|42732|Opn|Maj|2007-06-25|Authentication against database issue.            |
|42763|New|Nor|2007-06-28|graceful-stop/restart loops go loop too far       |
|42923|Inf|Maj|2007-07-17|vhost certificate NOT overriding cert from the _de|
|42972|Inf|Nor|2007-07-25|Certificate list in mod_ssl module context are not|
|42977|New|Nor|2007-07-25|DAV locking is busted when apr-util is built with |
|42987|New|Nor|2007-07-27|Weak Etags in Apache are useless and violate RFC 2|
|43012|New|Nor|2007-08-02|AIX instdso.sh libphp5.so                         |
|43027|New|Enh|2007-08-03|Header in default language                        |
|43033|New|Nor|2007-08-04|apxs does not correctly detect module name (w/o -n|
|43177|New|Nor|2007-08-21|child pid xxxxx exit signal Segmentation fault    |
|43218|New|Nor|2007-08-27|Wrong cert used for vhost if ServerName is same   |
|43220|Opn|Cri|2007-08-27|mod_proxy truncating ajp output                   |
|43249|Inf|Maj|2007-08-30|ldap_simple_bind_s failed when using SUN LDAP Libs|
|43275|New|Enh|2007-08-31|Remove avoidable network transactions in mod_proxy|
|43289|New|Nor|2007-09-02|XBitHack full g+x returns zero sized response on I|
|43308|New|Nor|2007-09-04|Persistent backend connections not supported for R|
|43352|New|Nor|2007-09-11|Apache2: out of memory during heavy webdav files c|
|43441|New|Nor|2007-09-20|Incorrect HTTP status for pre-commit-blocked autov|
|43471|New|Min|2007-09-25|no need to create a global pool on open_scoreboard|
|43481|New|Cri|2007-09-26|AuthLDAPURL must contain a final path of branch?(l|
|43494|New|Nor|2007-09-26|mod_cgid does not kill never ending scripts       |
|43502|New|Enh|2007-09-28|httpd fails to start if log directory does not exi|
|43513|New|Nor|2007-09-29|Persistent backend connections for ProxyPassMatch |
|43532|Inf|Cri|2007-10-02|Error while compiling Apache 2.2.3 on HPUX        |
|43533|Opn|Nor|2007-10-02|Frequent crashes in mod_include's bndm()          |
|43561|New|Nor|2007-10-05|apxs -q anomaly                                   |
|43577|Inf|Blk|2007-10-09|mod_authnz_ldap not working under WLDAP32 (novell/|
|43607|New|Nor|2007-10-11|mod_proxy sends data on closed connections without|
|43649|Opn|Trv|2007-10-18|mod_autoindex is generating invalid XHTML markup  |
|43652|New|Enh|2007-10-18|Suggest small change for big fix with SuExec & Vir|
|43666|New|Nor|2007-10-20|CGI works, but client denied error messages in err|
|43679|New|Enh|2007-10-23|Contributed tests for checking that subrequests ta|
|43723|Inf|Cri|2007-10-29|Apache 2.2.6 segfault when using mod_dbd          |
|43724|New|Cri|2007-10-29|Apache 2.2.6 segfault on url wich not in cache    |
|43755|New|Enh|2007-10-31|Add a SSLOptions to don't fill SSL_CLIENT_VERIFY  |
|43762|New|Enh|2007-10-31|Misleading tips in an error message about internal|
|43777|New|Nor|2007-11-01|Wrong encoding of <href> element in response      |
|43778|New|Nor|2007-11-01|Wrong responses if httpd has not access to some el|
|43785|New|Enh|2007-11-02|Tracking the per-hit impact of mod_include        |
|43792|New|Enh|2007-11-04|Feature proposal - bind phase                     |
|43818|New|Nor|2007-11-08|PROPFIND on -w- collections returns 207 MULTI-STAT|
|43838|New|Enh|2007-11-11|If-Modified-Since request and htcacheclean conflic|
|43895|New|Nor|2007-11-18|mod_mbox improvements                             |
|43897|Inf|Cri|2007-11-18|Huge memory consumption httpd 2.2.6, mod_proxy - m|
|43931|New|Enh|2007-11-21|OpenSSL autoconfig support for mod_ssl            |
|43943|New|Nor|2007-11-22|SHMCB crash due to misalignment and GCC 4 optimiza|
|43958|Inf|Maj|2007-11-26|mod_proxy_balancer not balancing correct in combin|
|43997|Opn|Min|2007-11-29|Only issue "Init: SSL server IP/Port conflict" if |
|44025|Inf|Nor|2007-12-05|Apache 2.2.6 fails to configure on OpenBSD 4.1    |
|44027|Ass|Enh|2007-12-05|Internationalized Domain Name (IDN) support       |
|44031|Opn|Maj|2007-12-06|RemoveHandler inside subdir location              |
|44034|Ass|Enh|2007-12-06|mpm_winnt doesn't call monitor hook               |
|44105|New|Nor|2007-12-19|Core dumps when using Proxy Keepalive             |
|44155|New|Enh|2007-12-31|smarter retry for LDAP_UNAVAILABLE, LDAP_BUSY, etc|
|44181|Opn|Enh|2008-01-07|add UnAlias                                       |
|44188|Inf|Cri|2008-01-08|Empty response for certain requests (mod_proxy as |
|44218|New|Min|2008-01-13|mod_autoindex shows the default icon for files wit|
|44221|Opn|Cri|2008-01-14|CheckCaseOnly On does not stop Multiple Choices ba|
|44250|New|Nor|2008-01-16|OSX 10.5: __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_|
|44279|New|Enh|2008-01-22|Add "iterate" flag to apply rule in a loop while p|
|44302|New|Nor|2008-01-27|AuthLDAPURL does not accept ldapi:// urls         |
|44305|New|Nor|2008-01-28|Inconsistent configuration for suexec path        |
|44316|New|Nor|2008-01-28|httpd 2.0 does not follow ScriptAliases when invok|
|44322|New|Enh|2008-01-29|mod_proxy ProxyPassReverseCookieDomain with no dom|
|44351|New|Nor|2008-02-04|File descriptor leak when using prg RewriteMap    |
|44363|Inf|Maj|2008-02-05|Slow file transfers                               |
|44384|Ass|Nor|2008-02-09|mod_ssl on MacOS X 10.5.1 does not work because of|
|44453|New|Nor|2008-02-19|list_hooks.pl doesn't parse declarations that span|
|44476|New|Maj|2008-02-23|Apache service fails to start due to missing depen|
|44503|Inf|Blk|2008-02-27|Errors during SSL handshake                       |
|44518|New|Enh|2008-03-02|Don't set expires header on HTTP redirect.        |
|44578|New|Enh|2008-03-11|mod_authn_dbd option to let database validate pass|
|44601|New|Trv|2008-03-13|Add a lowercase value to Vary header for consisten|
|44602|New|Enh|2008-03-13|Options for modfying Content-Location (relative OR|
|44622|Inf|Nor|2008-03-17|POST fails to SSL vhost with proxy to HTTP backend|
|44631|New|Nor|2008-03-18|with-included-apr fails to work when using a separ|
|44638|New|Nor|2008-03-19|sed error in httpd.spec.in                        |
|44656|New|Nor|2008-03-22|Tries to retrive error document 404 instead of 406|
|44657|New|Enh|2008-03-22|prefer-type, -encoding, and -charset cookie? (as p|
|44670|New|Min|2008-03-25|Apache httpd 2.2.8 : Cannot ./configure when curre|
|44696|Inf|Nor|2008-03-27|mod_cache sometimes serves old content despite hav|
|44730|New|Nor|2008-04-01|duplicate query string in remote server url when u|
|44752|New|Nor|2008-04-03|Suexec does not correctly check that scripts are i|
|44757|New|Enh|2008-04-04|adding stderr buckets to mod_cgi                  |
|44758|New|Enh|2008-04-04|LimitRequestBody undocumented behaviour with proxi|
|44779|New|Enh|2008-04-08|Using commas and semicolons for content negotiatio|
|44855|New|Nor|2008-04-22|irregular balancing with sticky-session after re-e|
|44865|Ass|Nor|2008-04-23|mod_dav's lock database becomes consistently corru|
|44870|Inf|Nor|2008-04-24|process spinning on 100% cpu                      |
|44923|Inf|Min|2008-05-02|consequences of multiple LDAPTrustedGlobalCert    |
|44924|New|Enh|2008-05-02|allow 'CACERTDIR' in mod_ldap                     |
|44940|New|Maj|2008-05-06|Httpd randomly breaks when verifying client certif|
|44981|New|Enh|2008-05-12|Digital Certificates (CN Based) for Authorization |
|45022|New|Nor|2008-05-16|Processing of escaped glob patterns in "Include" d|
|45023|Opn|Reg|2008-05-16|DEFLATE preventing 304 NOT MODIFIED response      |
|45049|Opn|Nor|2008-05-20|mod_mem_cache caches partial content when client c|
|45054|New|Nor|2008-05-21|SSLVerifyClient optional_no_ca is broken          |
|45058|New|Nor|2008-05-21|Mod_SSL does not set AUTH_TYPE with client certifi|
|45078|New|Nor|2008-05-27|mod_proxy stalls when uploading files             |
|45103|Ass|Min|2008-05-30|apachectl should do config test before reload/rest|
|45111|New|Enh|2008-06-01|make mod_usertrack use mod_unique_id if available |
|45116|New|Nor|2008-06-02|fail to check return value of apr_file_dup2() in /|
|45148|New|Enh|2008-06-06|The actual host of the request will be more helpfu|
|45184|New|Enh|2008-06-11|Regular Expression in directive ServerAlias       |
|45187|New|Maj|2008-06-11|Long File name requests gives FORBIDDEN response  |
|45225|New|Nor|2008-06-17|XBitHack breaks DirectoryIndex + MultiViews conten|
|45253|New|Nor|2008-06-23|Unable to build httpd 2.2.9 on Solaris/SPARC      |
|45257|New|Enh|2008-06-23|add (en)force option for UseCanonicalName         |
|45259|New|Enh|2008-06-23|Add /home/[a-z]/* scheme to UserDir conf          |
|45275|New|Maj|2008-06-25|Locked files during expired page renew in disk cac|
|45281|New|Enh|2008-06-25|SITE CHMOD/SEARCH                                 |
|45287|Inf|Min|2008-06-26|build failure because of difference between BSD an|
|45297|New|Min|2008-06-27|mod_dir does not manage correctly the user (r->use|
|45302|New|Enh|2008-06-28|ServerRoot directive                              |
|45355|New|Nor|2008-07-07|ab text and html output jumbo unification         |
|45356|New|Nor|2008-07-07|ab: optionally reduce resource usage (qsort and me|
|45371|New|Nor|2008-07-10|MSI installer requires uninstall of previous versi|
|45374|New|Blk|2008-07-10|Shared memory error on starting httpd with mod_lda|
|45379|Inf|Nor|2008-07-11|[Bug] svn merge, apache and trailing slashes      |
|45385|Inf|Nor|2008-07-11|unable to compile/make 2.2.9 with --enable-ldap   |
|45393|New|Nor|2008-07-14|Apache returns 500 Error when no LDAP credentials |
|45402|New|Nor|2008-07-15|mod_autoindex incorrectly fails to list files     |
|45405|New|Enh|2008-07-16|Allow binding port to be set for individual worker|
|45449|New|Nor|2008-07-21|[PATCH] Add support to WebDav to MOVE/COPY to remo|
|45456|New|Enh|2008-07-22|mod_dbd don't allow more then one database pool   |
|45487|New|Trv|2008-07-27|broken log messages on startup in win32 version   |
|45497|New|Nor|2008-07-29|Scoreboard slot leaked using MaxRequestsPerChild a|
|45512|Ass|Maj|2008-07-31|Bad Performance of mod_proxy with SSL on Solaris 1|
|45524|New|Enh|2008-08-01|Specifying multiple vhost aliases                 |
|45525|New|Enh|2008-08-01|Switch mod_autoindex to Tango icons               |
|45579|New|Nor|2008-08-06|unknown URI scheme in request-URI ignored         |
|45674|New|Enh|2008-08-22|Allow to change error code returned by "Require ld|
|45726|New|Enh|2008-09-02|Build in a maintenance functionallity             |
|45736|New|Nor|2008-09-03|mod_dav needs a directory for its locks and one sh|
|45754|New|Enh|2008-09-06|autoconf macros                                   |
|45763|New|Nor|2008-09-08|No openssl.cnf defined by default causes OpenSSL c|
|45773|New|Nor|2008-09-09|pcre build generates sources to srcdir rather than|
|45788|New|Nor|2008-09-11|mod_log_forensic output shouldn't be buffered when|
|45801|Opn|Nor|2008-09-13|SSLRequireSSL with strictrequire and satisfy any d|
|45838|New|Nor|2008-09-18|mod_authz_owner & directories                     |
|45868|New|Nor|2008-09-23|mod_mem_cache update of headers in cache object is|
|45900|New|Nor|2008-09-26|"make install" fails from read-only filesystem    |
|45905|New|Enh|2008-09-26|ErrorDocument and default URL                     |
|45922|New|Enh|2008-09-30|Expand the conditions under which "SSLVerifyClient|
|45923|New|Nor|2008-09-30|htpasswd tries to open(file, O_RDONLY | O_APPEND) |
|45926|Inf|Nor|2008-10-01|Unable to start apache 2.2.9                      |
|45986|New|Nor|2008-10-10|[info]...Invalid argument: core_output_filter: wri|
|46024|Opn|Nor|2008-10-16|--enable-static is not available in apache's confi|
|46037|Inf|Nor|2008-10-18|Configuration of trusted OCSP responder certificat|
|46040|New|Enh|2008-10-20|Check for existing version of Apache while install|
|46054|New|Nor|2008-10-21|Running httpd returns the error "bad user name nob|
|46070|New|Nor|2008-10-22|MSI installer does not validate custom installatio|
|46071|New|Enh|2008-10-22|Allowing space in between comma and last option in|
|46074|New|Enh|2008-10-23|Need of friendly and easy to use configuration gra|
|46139|New|Nor|2008-11-02|Apache Restart option is not working              |
|46140|New|Enh|2008-11-03|Change error state in balancer manager            |
|46188|Inf|Nor|2008-11-11|Core dumps in apache 2.0.59                       |
|46195|Opn|Nor|2008-11-12|ProxyPass fails with literal IPv6 address         |
|46215|New|Nor|2008-11-14|Race condition in bybusyness algorithm            |
|46231|New|Maj|2008-11-18|Connection Pooling with ajp depends on syntax ?   |
|46241|New|Enh|2008-11-19|mod_expires - ExpiresByPattern or ExpiresIf       |
|46267|New|Nor|2008-11-22|No shared modules build if use --with-apr and --wi|
|46270|New|Enh|2008-11-23|Add FIPS 140-2 mode for mod_ssl for FIPS 1.2 modul|
|46282|New|Nor|2008-11-24|apache2.2 reverse proxy causing full memory and sw|
|46316|New|Maj|2008-12-01|Proxied SSI ProxyTimeout render failure           |
|46317|Inf|Nor|2008-12-01|mod_authnz_ldap.c(373)  seg fault                 |
|46412|New|Nor|2008-12-17|make_child return value not checked               |
|46417|New|Cri|2008-12-19|[notice] Parent: child process exited with status |
|46428|Opn|Nor|2008-12-21|Spaces in URI doesn't encode in proxy-requests    |
|46442|New|Nor|2008-12-29|Semicolon in allow/deny all rules cause reverse lo|
|46449|New|Maj|2008-12-30|Output out of order from SSI include virtual      |
|46454|New|Min|2008-12-30|escaping wildcards in AddIcon filename matching   |
|46475|New|Nor|2009-01-04|build warnings.                                   |
|46499|New|Maj|2009-01-09|httpd accept() return EAGAIN error                |
|46521|New|Nor|2009-01-13|mod_dav doesn't show symlinks                     |
|46529|Ass|Nor|2009-01-14|Child httpd processes crash with Segmentation faul|
|46534|New|Nor|2009-01-14|mod_proxy_ajp scheme and port do not follow UseCan|
|46578|New|Nor|2009-01-21|Flawed header                                     |
|46582|Ver|Min|2009-01-22|RewriteMap internal functions are not well documen|
|46604|New|Nor|2009-01-26|Error thrown when trying to rpmbuild -tb httpd sou|
|46629|New|Maj|2009-01-29|Apache hanging on system calls for php and perl   |
|46634|Ass|Nor|2009-01-30|Requests sometimes take too long, wrong time taken|
|46644|New|Enh|2009-01-31|Clean way to pass custom environment variables to |
|46646|Ass|Nor|2009-02-01|check group membership is sometimes case sensitive|
|46650|Opn|Nor|2009-02-02|CustomLog enviroment condition SCRIPT_FILENAME    |
|46656|New|Enh|2009-02-03|ProxyErrorOverride inside location                |
|46669|New|Enh|2009-02-06|rotatelogs doesn't autocreate directories         |
|46671|Opn|Cri|2009-02-07|Apache periodicaly crashes .                      |
|46678|New|Nor|2009-02-09|Fixed Content-Length using mod_ext_filter with mod|
|46682|New|Nor|2009-02-09|mod_proxy EAI_AGAIN DNS failure                   |
|46685|Opn|Nor|2009-02-09|401 sent without WWW-Authenticate header when requ|
|46709|Opn|Reg|2009-02-12|Expect: 100-continue to an HTTP/1.0 server change |
|46724|Inf|Cri|2009-02-17|WinXP SP3 - Apache crashes on startup in libapr-1.|
|46743|New|Nor|2009-02-19|Inconsistent behavior of "RewriteOptions inherit" |
|46745|New|Maj|2009-02-20|ab.c error :  undefined reference to `BIO_set_call|
|46751|New|Nor|2009-02-21|Can passenv variables who's name contain '(' or ')|
|46762|New|Nor|2009-02-24|Error, SSL/TLS libraries were missing or unusable |
|46765|Opn|Nor|2009-02-25|doubled HTTP header leads to error (Redmine)      |
|46785|Inf|Nor|2009-03-02|Child process increases to 100% (CPU)             |
|46788|New|Nor|2009-03-02|Set resource limits to avoid denial of service att|
|46810|New|Nor|2009-03-05|apxs / apu-1-config outputting erroneous include p|
|46824|New|Nor|2009-03-09|RemoveOutputFilter will not work for Filters added|
|46845|Inf|Cri|2009-03-12|Apache crashes in Windows when using subversion(pr|
|46847|New|Nor|2009-03-13|WebDAV methods with encoding other than "identity"|
|46873|New|Nor|2009-03-18|feature request: connection count on balancer-mana|
|46884|New|Min|2009-03-20|Call to apu_dso_load Fails In apr_ldap_stub.c On O|
|46946|Inf|Nor|2009-03-31|mod_mbox shows email addresses in plain text      |
|46963|New|Nor|2009-04-03|KeepAliveTimout prevents child process from exitin|
|46969|New|Nor|2009-04-05|CustomLog format %m always GET on errors with loca|
|46970|New|Nor|2009-04-05|CustomLog %X does not record aborted connections w|
|47011|New|Reg|2009-04-09|mod_proxy/mod_proxy_balancer hot-standby BalancerM|
|47055|New|Blk|2009-04-20|SSLVerifyClient + Directory doesn't use cache sess|
|47063|New|Nor|2009-04-21|mod_proxy doesn't call post_request handler when t|
|47134|New|Nor|2009-05-01|Last resolve handling when sending client certific|
|47138|New|Nor|2009-05-01|Reverse Proxy & Balancer generate error fault when|
|47152|New|Maj|2009-05-04|Apache is only serving the first character in the |
|47159|New|Nor|2009-05-06|2.2.x logresolve doesn't support ipv6             |
|47167|New|Nor|2009-05-07|Authenticated sessions being switched by reverse p|
|47170|New|Enh|2009-05-08|rotatelogs ring buffer option                     |
|47180|New|Nor|2009-05-11|DBM ssl_scache setting can cause extreme performan|
|47220|Opn|Enh|2009-05-19|Access to environment variables                   |
|47256|New|Enh|2009-05-23|Enable SSL on a per-port basis                    |
|47289|New|Nor|2009-05-30|Can't build with dynamic libraries on Mac OS 10.4 |
|47295|New|Nor|2009-06-01|AuthDBDUserPWQueryFmt/AuthDBDUserRealmQueryFmt in |
|47329|New|Nor|2009-06-07|SSLCADNRequest* & SSLCACertificate* silently do no|
|47340|New|Nor|2009-06-09|uldap_cache_comparedn() called without a lock     |
|47344|New|Enh|2009-06-10|[FEATURE REQUEST] RedirectCanonicalName           |
|47345|New|Enh|2009-06-10|rotatelogs timeout patch                          |
|47346|New|Maj|2009-06-10|mod_cache doesn't re-cache expired content when La|
|47387|Inf|Nor|2009-06-18|SSL_CLIENT_I_DN and SSL_CLIENT_S_DN use Email inst|
|47392|Opn|Nor|2009-06-18|<FilesMatch> is using the wrong directory         |
|47435|New|Nor|2009-06-26|mod_authz_host does reading of /etc/hosts on each |
|47438|Inf|Enh|2009-06-27|how to create a non-html "listing generated by the|
|47447|New|Enh|2009-06-29|Add possibility to use client IP as a value in Req|
|47484|New|Nor|2009-07-06|Spurious RewriteLock warning when using external m|
|47485|New|Enh|2009-07-06|HTML5 Websocket implementation                    |
|47514|New|Enh|2009-07-12|Personal data and restrictions based on subject di|
|47528|New|Maj|2009-07-14|Worker process won't restart more than once using |
|47542|New|Nor|2009-07-16|Piped logging processes killed before other proces|
|47562|Inf|Nor|2009-07-23|Apache/2.2.3 (Win32) mod_perl/2.0.3-rc1           |
|47578|New|Nor|2009-07-24|compile ERROR with ssl                            |
|47580|Opn|Nor|2009-07-25|mod_cache sends 200 response instead of 304       |
|47586|New|Nor|2009-07-27|httpd -k start doesn't start service when rotatelo|
|47591|New|Min|2009-07-27|show current HTTP_HOST in mod_status scoreboard   |
|47601|New|Enh|2009-07-29|Support X-Forwarded-For in forward proxy requests |
|47625|New|Nor|2009-08-02|2.2.12 win32 msi installer missing                |
|47634|New|Maj|2009-08-04|mod_ldap connection pool session keepalive not imp|
|47643|New|Enh|2009-08-04|added meta tags to xhtml output for ease of search|
|47650|Opn|Trv|2009-08-05|httxt2dbm calculates value size incorrectly       |
|47657|New|Nor|2009-08-06|Make WebDAV MOVE atomic when replacing files on sa|
|47659|New|Nor|2009-08-07|makefile.win needs check for DBM_LIST, dies on bui|
|47664|New|Nor|2009-08-07|ap_proxy_canonenc: does not recode all high-byte c|
|47665|Inf|Blk|2009-08-09|Apache service well launched but blank Screen     |
|47691|New|Enh|2009-08-12|libtool invocations should use --tag              |
|47693|Opn|Nor|2009-08-13|GET request has race condition w.r.t. replacement |
|47706|Inf|Nor|2009-08-19|(20014)Internal error: proxy: error reading status|
|47716|New|Min|2009-08-20|LimitRequestFieldSize and friends not merged well |
|47719|Opn|Enh|2009-08-20|Broken symbolic link (symlink) causes wrong ErrorD|
|47723|New|Nor|2009-08-22|suEXEC and low RLimitMem gives "crit: invalid uid"|
|47743|Inf|Nor|2009-08-26|mod_so segfaults at server startup in ap_find_load|
|47753|New|Nor|2009-08-27|output and error channels not explicitly passed fo|
|47778|Opn|Enh|2009-09-03|wrong exit value on graceful restart              |
|47780|New|Nor|2009-09-03|Critical errors should be marked by time and level|
|47807|Inf|Nor|2009-09-09|Proxy dialog error with Apache 2.2.13             |
|47808|New|Maj|2009-09-09|Child process core dumps when enabling CRL        |
|47814|Inf|Maj|2009-09-10|openssl_pkcs7_sign error                          |
|47838|New|Enh|2009-09-14|Ability to Dynamically Inject Current Time Into a |
|47874|New|Nor|2009-09-18|mod_fcgid crashes if added during restart         |
|47895|New|Maj|2009-09-24|Incorrect 413 error handling                      |
|47908|New|Min|2009-09-27|'invalid result code' in error_log                |
|47981|New|Nor|2009-10-12|allow language specific html-versions (index.html.|
|47982|New|Nor|2009-10-12|correctly interprete non-standard HTTP_ACCEPT_LANG|
|47988|New|Nor|2009-10-12|Segmentation fault                                |
|47989|New|Nor|2009-10-13|Junk string appended to compressed dynamic content|
|47994|New|Enh|2009-10-14|ScriptInterpreterSource apparently broken in Windo|
|48020|New|Nor|2009-10-17|KCP+ Opera support for mod_auth_digest            |
|48037|Inf|Nor|2009-10-21|mod_proxy_http does not handle asynchronous keepal|
|48045|New|Nor|2009-10-23|Apache 2 initgroups alert, Max OS X, abnormal exit|
|48057|New|Nor|2009-10-26|mod_fcgid creates 1 more process then allowed     |
|48094|New|Nor|2009-11-01|Avoid a race condition in close_worker_sockets()  |
|48107|New|Maj|2009-11-02|Mutual Authentication: Order in ca-bundle influenc|
|48115|New|Enh|2009-11-03|Duration to receive the request, generate response|
|48130|New|Maj|2009-11-04|DAV operations on large filesets consume all the O|
|48154|New|Nor|2009-11-06|Requests through mod_isapi are not parsed by HTTP_|
|48164|New|Enh|2009-11-09|add new parameters to rotatelogs                  |
|48219|New|Nor|2009-11-17|Retrying the worker for seems to omit POST variabl|
|48228|New|Nor|2009-11-18|Renegocation requires multiple client authenticati|
|48246|New|Enh|2009-11-19|Check permissions on file/directory specified for |
|48254|New|Trv|2009-11-20|Bogus "DocumentRoot does not exist" warning when s|
|48283|New|Nor|2009-11-25|Proxy errors since httpd 2.2.12 with Tomcat 6.0.20|
|48291|New|Maj|2009-11-26|mod_substitute loops                              |
|48295|Opn|Nor|2009-11-27|ProxyPassReverseCookiePath: Not changing path corr|
|48301|New|Enh|2009-11-30|Feature request: improved connection status report|
|48309|New|Maj|2009-11-30|libapreq2-2.12: "make test" fails at request.t and|
|48312|Opn|Nor|2009-11-30|ProxyPassReverseCookiePath: Not changing path corr|
|48316|Inf|Nor|2009-12-01|ap_run_insert_filter doesn't work in cache_url_han|
|48354|New|Enh|2009-12-08|void ap_custom_response is not supporting the bina|
|48360|New|Enh|2009-12-09|provide sample configuration file for inclusion in|
|48361|New|Enh|2009-12-09|Add global server option for specifying desired DS|
|48364|Opn|Nor|2009-12-10|PHP-generated pages are not cached in spite of per|
|48369|New|Enh|2009-12-10|add option to automatically restart if a script is|
|48431|New|Nor|2009-12-22|Error logging doesn't work when configured to use |
|48440|Inf|Cri|2009-12-23|Segmentation Fault                                |
|48449|Inf|Nor|2009-12-28|make distclean removes core.c and core_filters.c  |
|48465|Opn|Enh|2009-12-30|Support TCP to connect to backends                |
|48499|New|Nor|2010-01-06|mod_rewrite can't redirect to files with ? in them|
|48500|New|Nor|2010-01-06|mod_mbox mishandles right-click to open msg in new|
|48508|New|Nor|2010-01-07|BalancerMember doesn't accept nocanon directive   |
|48549|New|Enh|2010-01-14|Add Cache-Control s-maxage support                |
|48576|New|Nor|2010-01-19|MOVE or COPY in WebDAV fails with 404 when file ex|
|48585|New|Enh|2010-01-20|mod_cache no longer caches expired content        |
|48602|New|Enh|2010-01-23|use asynch ldap_compare so LDAPTimeout applies    |
|48623|New|Maj|2010-01-26|AuthLDAPURL syntax is not RFC-compliant, prevents |
|48639|New|Enh|2010-01-29|Add htcacheclean as a core monitored process      |
|48652|New|Maj|2010-02-01|"AuthType form" fails if a password contains  '&' |
|48659|New|Maj|2010-02-02|Problem with accents in filename and byte serving |
|48687|New|Nor|2010-02-05|mod_rewrite ignores trailing dot in request URI on|
|48705|New|Enh|2010-02-08|flag to allow newlines in the error log as opposed|
|48712|New|Enh|2010-02-09|Add UID and GID to status page                    |
|48719|New|Nor|2010-02-09|[BUG] mod_proxy_ajp return wrong error message whe|
|48721|New|Nor|2010-02-10|[Patch] Add ProxyAllow to mod_proxy               |
|48731|New|Maj|2010-02-11|Prefork not creating processes after 10 servers ar|
|48732|New|Nor|2010-02-12|[BUG] environment variable SCRIPT_NAME output erro|
|48769|New|Nor|2010-02-18|[PATCH] Processes in the busy list should not be k|
|48777|New|Maj|2010-02-19|proxy balancer not detecting correctly when host (|
|48780|New|Enh|2010-02-19|Enable mod_authnz_ldap to accept valid client cert|
|48792|New|Enh|2010-02-22|httpd util apachectl returns wrong status informat|
|48805|New|Nor|2010-02-23|Corrupted response for HTTPS + KEEPALIVE=ON       |
|48808|New|Enh|2010-02-24|mod_authz_owner support for POSIX access control l|
|48819|Inf|Nor|2010-02-25|After users login on the web page, the page does n|
|48842|Inf|Nor|2010-03-02|mod_log_config logs the full size of the file inst|
|48880|Opn|Nor|2010-03-09|error on make                                     |
|48888|New|Nor|2010-03-10|DOCTYPE definitions nearly 11 years out-of-date   |
|48920|New|Enh|2010-03-15|Breadcrumbs on mod_autoindex path                 |
|48921|Inf|Nor|2010-03-16|mod_mem_cache crash, version 2.2.15.0             |
|48937|New|Enh|2010-03-18|Feature proposal - support sasl_bind              |
|48949|Inf|Cri|2010-03-20|fcgid processes never get killed after graceful re|
|48958|New|Nor|2010-03-22|mod_ldap, ldap credential cache & graceful restart|
|48987|New|Trv|2010-03-25|typo in polish translation of HTTP_UNAUTHORIZED.ht|
|49037|New|Enh|2010-04-02|SSLVerifyClient require_no_ca                     |
|49043|New|Maj|2010-04-04|Using ssi include directive overwrites QUERY_STRIN|
|49058|New|Nor|2010-04-06|Prefork MPM tries to accept on closed listener soc|
|49067|New|Nor|2010-04-08|FTPOptions ShowUnAuthorizedFiles does not work    |
|49068|New|Nor|2010-04-08|UTF-8 URL Encode error                            |
|49087|New|Maj|2010-04-11|MSI installation reports "interrupted installation|
|49114|New|Maj|2010-04-13|NTFS junction directories missing from directory l|
|49123|New|Nor|2010-04-14|mod_proxy_ajp does not send the client's SSL chain|
|49131|New|Nor|2010-04-15|Very long URLs cause 404 or 403 errors with SetAct|
|49133|New|Maj|2010-04-16|Windows service recovery options do not work for A|
|49157|New|Nor|2010-04-20|Issues with xml interface for balancer manager    |
|49187|New|Nor|2010-04-26|Crash mod_mem_cache and mod_svn                   |
|49199|New|Enh|2010-04-27|Implement LDAP scope-aware caching in mod_ldap    |
|49220|New|Nor|2010-04-29|feature request for being able to disable FcgidWra|
|49239|New|Blk|2010-05-01|Apache mod_ssl gives coredump with openssl 0.9.8  |
|49277|New|Nor|2010-05-12|Expose a variable to identify SSL Session renegoti|
|49283|New|Nor|2010-05-12|Language of dates on SSI                          |
|49285|New|Enh|2010-05-13|Relative (local to current directory) URLs do not |
|49348|New|Enh|2010-05-27|[mod_log_config] Output log file name format capab|
|49385|New|Maj|2010-06-03|mod_disk_cache server side included files are inte|
|49387|Inf|Cri|2010-06-03|Unable to modify default charset setting to UTF-8 |
|49391|New|Nor|2010-06-05|mod_disk_cache needs to register a cleanup to kill|
|49396|New|Enh|2010-06-06|PATH_INFO normalization, especially relating to vo|
|49427|New|Nor|2010-06-11|mod_cgid and mod_cgi do not return proper value wh|
|49433|New|Enh|2010-06-13|improving info in server status                   |
|49439|New|Nor|2010-06-14|Bug in mod_userdir which prevents suexec from runn|
|49504|New|Nor|2010-06-25|Solaris 10/x64 worker graceful restart problem    |
|49532|New|Nor|2010-06-30|mod_cache: Set-Cookie headers are appended to cach|
|49553|New|Min|2010-07-05|Set QoS bits via APR2 API instead                 |
|49568|New|Maj|2010-07-07|Apache mod_authnz_ldap built with the MS LDAPSDK d|
|49632|Inf|Nor|2010-07-21|mod_authnz_ldap denies users when search is perfor|
|49633|New|Enh|2010-07-21|Handle AD primary groups in mod_authnz_ldap       |
|49642|New|Nor|2010-07-23|mod_rewrite mistakes encoded question mark as path|
|49643|New|Nor|2010-07-23|WebDav plus mod Negotiation causes directory creat|
|49676|New|Nor|2010-07-30|directory with german umlauts are indented by one |
|49680|New|Maj|2010-07-30|Perl script are not running on Win32, Apache 2.2.1|
|49684|New|Enh|2010-08-01|enhancement for ipv6 implementation               |
|49699|New|Nor|2010-08-03|Inconsistent Keep-alive from proxy to the origin s|
|49715|New|Maj|2010-08-06|ProxyPassMatch Url Encoder Problem                |
|49717|New|Enh|2010-08-06|PATCH: Enable SSL Timeout                         |
|49737|Inf|Nor|2010-08-10|order allow,deny does not work on IPv6            |
|49743|New|Maj|2010-08-12|SSI 'echo encoding="(url/none)"' bug              |
|49746|Opn|Enh|2010-08-12|mod_rewrite urlencode option                      |
|49766|New|Maj|2010-08-17|POST request on CGI script generating empty body c|
|49771|New|Nor|2010-08-17|After graceful restart using mod_proxy_ajp, couldn|
|49772|New|Nor|2010-08-18|mod_deflate kicks itself out on Content-Range resp|
|49798|Opn|Nor|2010-08-22|[mod_log_config] Piped Log scripts process cause w|
|49807|New|Enh|2010-08-23|hard to force Content-Type header for non static f|
|49810|New|Nor|2010-08-23|Mod_autoindex output of header/body/footer scrambl|
|49815|New|Enh|2010-08-24|Enable caching for HTTP Range requests / 206 respo|
|49829|New|Trv|2010-08-26|CGI index command line arguments excessively escap|
|49832|New|Enh|2010-08-26|void ap_custom_response is not supporting the bina|
|49859|Opn|Nor|2010-09-01|url with additional filepath generates bad environ|
|49921|New|Nor|2010-09-13|Trailers in chunked http requests are not handled |
|49926|New|Enh|2010-09-14|New option for mod_log_forensics or mod_log_config|
|49980|New|Nor|2010-09-22|can't use a FIFO for SSL key file; mod_ssl checks |
|49981|New|Enh|2010-09-22|Requesting SSLCertificateKeyFile Dialog functional|
|49990|New|Nor|2010-09-23|Feature request: implement ExpiresActive reset    |
|49996|New|Nor|2010-09-24|Proxied ErrorDocument returns 200 OK response code|
|49997|New|Nor|2010-09-24|wrowe promised me...                              |
|50004|New|Nor|2010-09-26|per-dir rewrite without DocumentRoot or RewriteBas|
|50011|New|Cri|2010-09-27|error running apache, and installing apache as a s|
|50024|New|Min|2010-09-29|Mod_cache/mod_mem_cache and mod_security combinati|
|50038|New|Enh|2010-10-01|What Directives apply to a file/directory? Resulta|
|50041|New|Min|2010-10-04|(9)Bad file descriptor: apr_socket_accept: (client|
|50051|New|Nor|2010-10-07|Log PID in first entry logged for each request    |
|50061|New|Nor|2010-10-08|Semicolon character '%3B' seems to be decoded to '|
|50082|New|Nor|2010-10-12|apachectl status returns incorrect exit code      |
|50112|New|Nor|2010-10-18|buildconf broken in two places                    |
|50116|New|Nor|2010-10-19|Apache fragments packets unnecessarily            |
|50151|New|Nor|2010-10-25|Software caused connection abort and apache proces|
|50155|Inf|Nor|2010-10-25|httpd -s attempts to read SSL certificates        |
|50172|Inf|Nor|2010-10-28|Digest allows access bypassing secuity            |
|50227|New|Enh|2010-11-07|Option to fail SSL handshake for diverted SNI conn|
|50237|Inf|Nor|2010-11-08|webdav LOCK access with multiple threads to same f|
|50261|New|Nor|2010-11-12|graceful restart with multiple listeners using pre|
|50262|New|Nor|2010-11-12|mod_rewrite log ip address vs hostname            |
|50274|New|Nor|2010-11-15|always pass CONTENT_LENGTH to the application     |
|50278|New|Nor|2010-11-16|-DFOREGROUND and ap_unixd_killpg()/ap_os_killpg() |
|50290|Inf|Nor|2010-11-18|vanilla apache 2.2.17 installation crashes (lib-ap|
|50296|New|Nor|2010-11-18|LDAPVerifyServerCert and possibly LDAPTrustedMode |
|50317|New|Nor|2010-11-22|Possible error in mod_cache's "Avoiding the Thunde|
|50336|New|Min|2010-11-25|PUT failures do not emit Allow:                   |
|50344|New|Nor|2010-11-26|ProxyPass does not handle different protocols when|
|50357|New|Enh|2010-11-28|improve matching mechanisms for mime type and enco|
|50372|New|Enh|2010-11-29|any reason for allowing ModMimeUsePathInfo only in|
|50390|New|Nor|2010-11-30|WARNING: Unrecognized options : --disable-ipv6    |
|50402|New|Nor|2010-12-02|SetEnv proxy-sendchunks is ignored for small amoun|
|50412|New|Nor|2010-12-04|if IndexOptions +XHTML, the correct MIME type shou|
|50423|Inf|Nor|2010-12-06|Apache is terminated with signal 11, Segmentation |
|50427|New|Nor|2010-12-07|Windows>=Vista+mod_auth_digest+command line=proble|
|50432|New|Enh|2010-12-08|add PCRE-mode for file based matches              |
|50436|New|Enh|2010-12-08|VirtualHost could behave like people expect it to |
|50444|New|Enh|2010-12-09|Pre-close logging handles in cgid agent           |
|50456|Inf|Nor|2010-12-10|Invalid Error 413 crash Apache                    |
|50464|New|Blk|2010-12-13|undefined reference to `BIO_set_callback' `BIO_set|
|50466|Inf|Maj|2010-12-13|httpd process doesn't recycle                     |
|50473|New|Maj|2010-12-14|zlib.dll Problem                                  |
|50521|New|Nor|2010-12-25|Comment at top of sample main config file is wrong|
|50525|New|Nor|2010-12-28|Header directive won't edit Location header from P|
|50530|New|Enh|2010-12-29|Provide rate limiting for failed authentication at|
|50532|New|Enh|2010-12-30|Mail protection                                   |
|50551|New|Nor|2011-01-06|Some proxied connections ignore ttl setting       |
|50562|Opn|Cri|2011-01-09|wrong PATH_INFO CGI environment with non-ASCII UTF|
|50584|New|Enh|2011-01-14|Add error message when RequestReadTimeout triggere|
|50592|New|Maj|2011-01-15|httpd dumps core on an IPv6 only system           |
|50602|New|Nor|2011-01-17|non thread safe functions used in apache httpd pro|
|50619|New|Min|2011-01-19|After changing resolv.conf signaling httpd doesn't|
|50628|New|Blk|2011-01-21|Core dump happens with Apache 2.2.15 using openssl|
|50630|New|Nor|2011-01-21|Apache return 500 error with authentication by LDA|
|50644|New|Enh|2011-01-24|Add support for maximum number of requests per Kee|
|50654|New|Nor|2011-01-25|FileETag ContentMD5 & Filename, optimisation to Co|
|50693|New|Nor|2011-01-31|AllowOverride Options=(not Foo) should permit no-o|
|50704|Inf|Nor|2011-02-01|mod_cache doesn't cache MultiViews                |
|50712|New|Maj|2011-02-02|Restart button only stops the server ...and do not|
|50727|New|Nor|2011-02-07|ISAPI EXTENSION_CONTROL_BLOCK Missing PostData wit|
|50765|New|Enh|2011-02-11|Runtime Backend Pinning via balancer-manager      |
|50770|New|Nor|2011-02-14|a rotatelogs issue, if time changed               |
|50773|Inf|Nor|2011-02-14|Dav lock database corruption                      |
|50774|New|Enh|2011-02-14|Have a way to invalidate cache without other reque|
|50777|New|Nor|2011-02-14|Back port buildconf specifies AC_PREREQ(2.13) fix |
|50796|New|Enh|2011-02-16|record time between keepalives in access log      |
|50807|New|Maj|2011-02-18|mod_proxy fails to send FIN response when a FIN is|
|50814|New|Nor|2011-02-21|SSI exec not working on Windows (Apache 2.x)      |
|50848|New|Enh|2011-03-01|Content Negotiation type map file precedence could|
|50869|New|Enh|2011-03-04|Need directive to control use and timeout of sessi|
|50873|New|Nor|2011-03-04|httpd does not start properly when built from sour|
|50878|New|Nor|2011-03-05|redundant operation when calling apr_stat         |
|50891|New|Nor|2011-03-08|Apache rewrites WWW-Authenticate headers from CGI |
|50902|Inf|Maj|2011-03-09|on major load on the server, poll() hangs         |
|50916|New|Nor|2011-03-11|RewriteMap program: mod_rewrite sends request but |
|50926|New|Nor|2011-03-14|unexpected <Directory> file-matching behavior     |
|50942|New|Maj|2011-03-17|Apache 2.2.16 forward proxy is 5x times slower tha|
|50945|Opn|Nor|2011-03-18|AJP: Missing support for ErrorOverride            |
|50948|Opn|Nor|2011-03-19|Connection not closed when CGI dies waiting for PO|
|50954|New|Nor|2011-03-21|ProxyRemote doesnt use CONNECT method with https s|
|50959|New|Enh|2011-03-23|Add cache-manifest to the mime type list          |
|50976|New|Nor|2011-03-26|Apache losts client's ip (%a or %h) sometimes.    |
|50999|Opn|Nor|2011-03-30|it seems the configure wrong detect my apr-util ve|
|51001|New|Nor|2011-03-31|patch for hook ap_lua_run_lua_open                |
|51005|New|Enh|2011-04-01|Allow to use username in LDAP filter              |
|51006|New|Blk|2011-04-01|Apache consume all memory and swap when setup as r|
|51019|New|Enh|2011-04-04|[PATCH] Implementation of Asynchronous processing |
|51020|Opn|Nor|2011-04-04|[PATCH] Apache/mod_fcgid.so does not start in comp|
|51022|New|Nor|2011-04-05|Segmentation fault on PUT request                 |
|51030|New|Enh|2011-04-06|Way to terminate CGI immediatly after closing conn|
|51078|Inf|Nor|2011-04-18|[PATCH] mod_fcgid spawned CGI Processes gets orpha|
|51079|New|Enh|2011-04-18|[PATCH] mod_fcgid spawned CGI Process cannot imper|
|51080|New|Nor|2011-04-18|[PATCH] mod_isapi does not support Except:100-Cont|
|51103|Opn|Nor|2011-04-21|mod_reqtimeout does not drop connection and return|
|51104|Opn|Maj|2011-04-21|C++ support about httpd_config.h                  |
|51107|New|Min|2011-04-22|SetOutputFilter and SetInputFilter should allow "n|
|51118|New|Nor|2011-04-26|LDAP cache is cleared after graceful/restart and o|
|51127|New|Nor|2011-04-27|Make ProxyPassReverseCookiePath work as expected  |
|51168|New|Nor|2011-05-08|mod_status Total Traffic won't take account of int|
|51170|New|Nor|2011-05-09|I/O errors when using keep-alive + mod_ssl        |
|51174|New|Min|2011-05-09|SSLRequire predicates using OIDs unknown to openss|
|51186|New|Blk|2011-05-11|NEw Openssl 1.0.1 with new FIPS                   |
|51190|New|Min|2011-05-12|::/0 does not work with allow from and deny from  |
|51194|New|Nor|2011-05-13|FcgidWrapper does not support paths containing a s|
|51201|Inf|Nor|2011-05-15|Strange behavior REQUEST_METHOD & GET in mod_rewri|
|51223|New|Nor|2011-05-18|304 HTTP Not Modified strips out CORS headers     |
|51224|New|Nor|2011-05-18|mod_dav_fs should respect FileETag                |
|51239|New|Nor|2011-05-21|ap_get_client_block may block continuously sometim|
|51257|New|Nor|2011-05-24|Build failed when cross-compiling: ./gen_test_char|
|51258|Opn|Enh|2011-05-24|new features for mod_substitute                   |
|51296|New|Enh|2011-05-31|Dynamic engine support using SSLCryptoDevice suppo|
|51297|New|Nor|2011-05-31|Improve error handling during "UNLOCK"            |
|51303|New|Nor|2011-05-31|TraceEnable 500 error                             |
|51312|New|Nor|2011-06-01|mod_filter should support adding to the Vary heade|
|51322|New|Enh|2011-06-04|Prepend and append string to LDAP search parameter|
|51359|Inf|Enh|2011-06-11|Added shebang check for //! so that .js scripts wo|
|51365|New|Nor|2011-06-13|Mod_proxy mangles query string with mod_security  |
|51402|New|Nor|2011-06-21|"ForceLanguagePriority Fallback" not working as im|
|51406|New|Maj|2011-06-21|When listing files in subdirectories, the path is |
|51409|New|Nor|2011-06-21|Sorting options accepted by ls, but ignored       |
|51471|New|Nor|2011-07-04|<DirectoryMatch>ed IndexIgnore doesn't            |
|51479|New|Enh|2011-07-05|[PATCH] AB feature to optionally read in a reusabl|
|51491|New|Nor|2011-07-08|mod_dir breaks POSTs to URLs not ending in /      |
|51495|New|Nor|2011-07-11|mod_substitute cpu and memory limit               |
|51517|New|Maj|2011-07-16|mod_proxy_fcgi is not RFC 3875 compliant (SCRIPT_F|
|51522|Ver|Trv|2011-07-18|Wrong French translation in mpm.html ("Certains Mo|
|51542|New|Nor|2011-07-22|Apache HTTP Server vs PVS-Studio                  |
|51543|New|Nor|2011-07-22|Space in username not properly escaped in log file|
|51552|Inf|Cri|2011-07-25|Apache is not starting (2.2.15)                   |
|51573|New|Enh|2011-07-28|Easy way to erase log files                       |
|51576|Inf|Nor|2011-07-28|mod_rewrite rule stopped working                  |
|51600|New|Enh|2011-08-02|Loading the same certificate in multiple virtual h|
|51603|Inf|Maj|2011-08-02|Apache accepts completely bogus HTTP requests (pos|
|51607|Inf|Nor|2011-08-03|DBDPrepareSQL ( ap_dbd_prepare ) does not work cor|
|51629|New|Nor|2011-08-05|DocumentRoot check incorrect when running under ch|
|51674|New|Blk|2011-08-18|AJP Module Bad Request                            |
|51679|New|Min|2011-08-18|Code signature key expired                        |
|51689|New|Trv|2011-08-19|Cross compiling causes multiple Listen directives |
|51695|New|Trv|2011-08-20|Code clean up (ap_rputs merge)                    |
|51707|New|Nor|2011-08-22|ProxyPassReverse issues within <Location> (differe|
|51709|New|Nor|2011-08-23|ServerName/ServerAlias don't work if Host: header |
|51711|New|Nor|2011-08-23|mod_auth_digest have broken shared mem (nonce) cod|
|51718|New|Enh|2011-08-24|Feature Request: Add shorthand to redirect any Ser|
|51725|New|Nor|2011-08-26|Multiple Range: request accepted as "Range: n-m"  |
|51732|New|Nor|2011-08-29|Inconsistencies in log messages' verbosity levels |
|51747|New|Blk|2011-08-31|mod_fcgid loads entire request into memory while p|
|51757|Inf|Enh|2011-09-02|Add support for SASL auth in LDAP                 |
|51778|Inf|Cri|2011-09-07|while buliding(make) a unix source "httpd-2.2.20.t|
|51797|Inf|Maj|2011-09-10|Crash HTTPD(Windows)                              |
|51814|New|Enh|2011-09-14|mod_proxy in Apache HTTP 2.2 FIN_WAIT2 in server s|
|51858|Inf|Nor|2011-09-21|weird error for mod_rewrite with more then 3 param|
|51864|New|Nor|2011-09-22|mod_cache returns entire entity from origin server|
|51904|New|Nor|2011-09-28|output to stderr from cgi script causes script to |
|51951|New|Nor|2011-10-04|mod_mbox hang on some e-mails on press@a.o - was I|
|51964|Ver|Nor|2011-10-05|Documentation of RewriteRule flag skip unclear    |
|51965|New|Nor|2011-10-05|--with-z=DIR not being honored                    |
|51982|Opn|Nor|2011-10-06|ProxyPassReverse / balancer://cluster/ adds slash |
|51987|Inf|Nor|2011-10-07|RewriteRule doesn't work correctly with apache 2.3|
|51994|New|Enh|2011-10-07|Mod_authn_socache should have some way to flush th|
|52004|Ver|Trv|2011-10-10|Typo "indexe" in French translation of mpm.html   |
|52007|New|Nor|2011-10-10|Content-Length: 0 not set on proxy response       |
|52038|New|Nor|2011-10-16|NameWidth works incorrectly together with Charset=|
|52039|Inf|Nor|2011-10-16|Browser mode does not always work                 |
|52043|New|Nor|2011-10-17|Directories ".", "..", and "/" do not work correct|
|52081|New|Nor|2011-10-24|segfault if mbox files have unexpected names      |
|52090|New|Maj|2011-10-26|Apache thread hangs with error 500 when sending a |
|52120|Opn|Nor|2011-11-01|mod_cache edge case: uncacheable 304 sends cached |
|52123|New|Maj|2011-11-02|DoS: High memory usage in propfind                |
|52132|New|Nor|2011-11-03|[PATCH] process activity score calculated incorrec|
|52139|New|Nor|2011-11-05|Never Syntax Error on non-existent DocumentRoot   |
|52171|Ver|Nor|2011-11-13|confusing documentation of request phases         |
|52174|New|Enh|2011-11-13|Allow hard lower-limits on the number of fcgi serv|
|52178|New|Nor|2011-11-14|IPv6 IPs as ServerName not allowed                |
|52181|Ver|Nor|2011-11-14|mod_rewrite Technical Details Ruleset Processing d|
|52195|Inf|Nor|2011-11-16|Japanese texts are garbled on mailing list archive|
|52196|Inf|Nor|2011-11-16|winnt mpm, others mpm also have this bug. pool sha|
|52207|Inf|Maj|2011-11-18|Upgrade apache version from 2.0.59 to 2.2.12 or ab|
|52222|New|Nor|2011-11-21|IndexIgnore ignores parent directories in argument|
|52247|New|Nor|2011-11-26|mod_mbox gives up on unexpected message format    |
|52248|New|Nor|2011-11-26|Bugzilla version drop-down list does not offer "un|
|52252|New|Nor|2011-11-27|luajit support broken for (at least) luajit 2.0   |
|52253|Inf|Nor|2011-11-28|Timeout doesn't work. mod_proxy_balancer strongly |
|52264|New|Enh|2011-11-30|Update and complete balancer-manager XML output   |
|52269|Inf|Nor|2011-12-01|[mod_proxy] Apache reverse proxy status code trans|
|52275|New|Nor|2011-12-02|memory leak in proxy_ajp_handler                  |
|52298|Inf|Nor|2011-12-07|Can't enter website with client certificate on an |
|52301|New|Enh|2011-12-07|Error message "RSA server certificate ... CN ... d|
|52302|New|Enh|2011-12-07|Better documentation of how server name is determi|
|52304|New|Nor|2011-12-08|<Limit> Does Not Apply When URI Is Folder         |
|52313|New|Enh|2011-12-09|htdbm enhancement: options for colon-in-username, |
|52322|Inf|Enh|2011-12-13|Providing BBC developed httpd modules for inclusio|
|52342|New|Nor|2011-12-15|ap_internal_redirect dropping filters means incons|
|52370|New|Nor|2011-12-19|apreq_decode/url_decode length miscalculation     |
|52377|New|Enh|2011-12-20|Add Directives to assert user, group, and permissi|
|52383|New|Trv|2011-12-24|Instllation log typo                              |
|52391|New|Cri|2011-12-27|100% CPU usage while using Forward Proxy          |
|52395|New|Nor|2011-12-29|reload results in different end environment to res|
|52403|New|Nor|2011-12-31|FallbackResource doesn't work for non-existent PHP|
|52408|New|Nor|2012-01-01|Directoryindex matching automatically redirects   |
|52415|New|Nor|2012-01-03|LockFile placed inappropriately                   |
|52417|New|Nor|2012-01-03|HEADERS information in the file                   |
|52435|New|Nor|2012-01-06|Apache shutdown automatically                     |
|52439|New|Nor|2012-01-09|It should be possible to treat errors in .htaccess|
|52453|New|Enh|2012-01-11|Ability to configure --logfiledir                 |
|52465|New|Nor|2012-01-13|mod_dir is allowed to redirect proxy requests     |
|52481|New|Nor|2012-01-18|Rotatelog.exe crashes Apache after setting 256MB r|
|52485|New|Nor|2012-01-19|CPU load 100%                                     |
|52494|New|Enh|2012-01-22|allow the Action directive to point in the filesys|
|52495|New|Enh|2012-01-22|CACertificate, CADNCertificate, CARevocation, Cert|
|52501|New|Cri|2012-01-23|child pid 10824 exit signal Segmentation fault (11|
|52505|New|Nor|2012-01-23|Include with directory wildcards gives errors for |
|52509|New|Nor|2012-01-23|Resources protected by .htaccess file may not be a|
|52510|New|Cri|2012-01-23|Segmentation Fault 11                             |
|52520|New|Nor|2012-01-24|ProxyRemote & NoProxy directive can not take IPv6 |
|52532|New|Trv|2012-01-26|VirtualHost added TWICE to name-virtual-host list |
|52539|New|Nor|2012-01-26|Apache mod_dav 400 Bad Request for non-existent co|
|52546|New|Nor|2012-01-27|overwrite SERVER_PROTOCOL environment             |
|52573|New|Nor|2012-02-01|mod_speling case correction fails when URI has dou|
|52578|Opn|Enh|2012-02-02|Wrong "bytes sent" logged when connection is close|
|52594|New|Nor|2012-02-03|rpmbuild -ba errors out with "File not found by gl|
|52595|New|Nor|2012-02-03|requests with gzip+chunked encoded body don't prox|
|52605|Inf|Min|2012-02-05|Please allow request lines longer than 8k         |
|52612|New|Nor|2012-02-06|Default Service Account                           |
|52616|Opn|Enh|2012-02-07|SSLUserName uses SSL_CLIENT_S_DN insted of SSL_CLI|
|52617|New|Maj|2012-02-07|Visit the rewrite page from ServerAlias domain vho|
|52623|New|Nor|2012-02-08|does not build with pcre-8.30                     |
|52644|New|Nor|2012-02-12|document how SSL FakeBasicAuth works with strange |
|52668|New|Trv|2012-02-14|More future safe patch for old MSIE ssl-unclean-sh|
|52670|New|Trv|2012-02-15|please clarify the effect of SSLStrictSNIVHostChec|
|52683|New|Enh|2012-02-16|add a symlink option that rechecks the access perm|
|52700|Inf|Blk|2012-02-17|Not rendering html content instead displaying clie|
|52703|Inf|Maj|2012-02-18|SSL+SNI+client-auth "lost" after some time        |
|52710|New|Nor|2012-02-19|mod_fcgid should set PATH_INFO when configured in |
|52756|Inf|Trv|2012-02-24|proxy_html_module LoadModule line not created in h|
|52759|New|Cri|2012-02-24|Apache httpd child process consuming high CPU Util|
|52790|New|Nor|2012-02-28|ldap caching not sufficient                       |
|52795|Opn|Nor|2012-02-29|mod_fcgid fails to spawn process in C:\Program Fil|
|52806|New|Nor|2012-03-01|configure: --with-included-apr is not supported in|
|52807|New|Nor|2012-03-01|some random strings are accepted by "configure" as|
|52816|New|Nor|2012-03-03|Potential segfault in socache_shmcb_create        |
|52817|New|Nor|2012-03-03|Long directory path sucks (but it's really a valid|
|52822|New|Nor|2012-03-04|Quiet installation not fully quiet                |
|52824|Inf|Nor|2012-03-04|Conflicts between AllowOverride and AllowOverrideL|
|52828|New|Maj|2012-03-05|Child process is not replaced in Windows, after a |
|52832|New|Nor|2012-03-05|numerical configuration entry can be mistakenly in|
|52841|Opn|Nor|2012-03-06|[proxy_balancer:emerg] [pid 25593] AH01177: Failed|
|52851|New|Nor|2012-03-07|Core TimeOut directive doesn't work               |
|52860|New|Enh|2012-03-08|Support Transfer-Encoding: gzip                   |
|52865|New|Nor|2012-03-09|Crash by segmentation fault in mod_authn_core in A|
|52870|New|Cri|2012-03-09|100% CPU usage while using Forward Proxy          |
|52874|New|Enh|2012-03-09|Support Use TrustedFirst checking when verifying c|
|52884|New|Nor|2012-03-12|"localhost" leads to start failure                |
|52890|Inf|Nor|2012-03-12|--with-included-apr doesn't work when srclib/apr a|
|52891|New|Nor|2012-03-12|2.2 doesn't perform as well as 1.3                |
|52894|Inf|Nor|2012-03-13|Apache aborts abnormally when ChrootDir is set    |
|52927|Inf|Nor|2012-03-16|[Bug in httpd 2.2.4] [error] (70014)End of file fo|
|52933|New|Nor|2012-03-17|Child survives '-k stop', consuming lots of CPU   |
|52950|New|Nor|2012-03-20|Error when set AuthType to None with valid-user   |
|52963|New|Nor|2012-03-21|Typo in AuthLDAPURL RFC 2255 error message        |
|52975|New|Nor|2012-03-23|Receiving files is suboptimal                     |
|52976|New|Min|2012-03-23|Gratuitous string-duplication in module-configurat|
|52978|New|Enh|2012-03-23|Binding to an interface instead of an address     |
|52995|New|Nor|2012-03-28|httpd -V does not print the default Mutex         |
|53002|New|Nor|2012-03-29|<Location> and auth_form (trailing slash problem?)|
|53015|New|Nor|2012-03-31|missing apr_socket_close                          |
|53016|New|Nor|2012-03-31|missing apr_brigade_destroy                       |
|53023|New|Nor|2012-04-02|mod_rewrite RewriteCond parser error and documenta|
|53037|New|Enh|2012-04-05|clarify mod_ssl documentation on the UID/GID conte|
|53059|New|Nor|2012-04-10|Make httpd easier relocatable by using a variable |
|53098|New|Nor|2012-04-18|mod_proxy_ajp: patch to set worker secret passed t|
|53099|New|Enh|2012-04-18|feature request for mod_remoteip                  |
|53108|New|Enh|2012-04-19|clarification on url-path vs full filesystem path |
|53111|New|Nor|2012-04-20|1% of CMS sites expose database passwords         |
|53121|New|Nor|2012-04-22|Confusing documentation, gzip and deflate         |
|53149|New|Enh|2012-04-25|mod_ldap should/could use mod_socache             |
|53152|Opn|Nor|2012-04-26|RewriteRule documentation: Error about per-directo|
|53156|New|Enh|2012-04-27|CRL validation fails if CRL is missing            |
|53160|New|Cri|2012-04-29|Reverse Proxy mod_deflate doesn't zip back content|
|53183|New|Min|2012-05-03|mod_apreq2 entry point is apreq_module and not apr|
|53193|New|Nor|2012-05-04|SLVerifyClient optional_no_ca + SSLSessionCache = |
|53218|New|Blk|2012-05-11|ProxyPass worker name(http://localhost:3128/...|
|53233|New|Maj|2012-05-15|Internal error: proxy: error reading status line f|
|53239|New|Maj|2012-05-16|Httpd has problems delivering data on rate-limited|
|53253|New|Maj|2012-05-17|TCP_NOPUSH used with sendfile(2), cause transfers |
|53284|New|Nor|2012-05-24|crash                                             |
|53290|New|Maj|2012-05-24|memory usage                                      |
|53292|New|Min|2012-05-25|add support for HTTP status code 308              |
|53305|New|Nor|2012-05-28|404 errors when adding query string in a balancer |
|53313|New|Nor|2012-05-28|SSI #echo VAR fails (#include OK) if URI/URL has f|
|53319|New|Nor|2012-05-29|Multiple DirectoryIndex statements in the same con|
|53332|New|Nor|2012-05-30|Requests with chunked encoding have no body availa|
|53350|New|Nor|2012-06-01|mod_cache caching 403 responses Apahce 2.2.22     |
|53351|New|Nor|2012-06-02|make fails if layout begins on first line of confi|
|53388|Opn|Nor|2012-06-08|mod_proxy_balanser generates 503 when proxying to |
|53402|New|Trv|2012-06-12|Incorrect error message for mod_ldap params       |
|53461|Inf|Cri|2012-06-23|Compilation problems                              |
|53462|New|Nor|2012-06-25|mod_rewrite does not remove trailing slash when as|
|53479|New|Nor|2012-06-27|mod_rewrite [B] flag should percent-encode the spa|
|53483|New|Enh|2012-06-29|dangerous PCRE patterns in *Match directives      |
|53539|New|Maj|2012-07-12|content type and character set are changing when t|
|53554|New|Nor|2012-07-16|Wrong case for hexadecimal percent encoding [patch|
|53555|New|Maj|2012-07-17|Scoreboard full error with event/ssl              |
|53579|New|Cri|2012-07-20|httpd looping writing on a pipe and unresponsive (|
|53581|New|Blk|2012-07-21|FollowSymlinks doesn't work with DirectoryMatch an|
|53594|New|Enh|2012-07-24|ipad as webserver                                 |
|53595|New|Nor|2012-07-24|Media type qs parameters for MultiViews sent in Co|
|53612|Inf|Nor|2012-07-27|Reverse Proxy causing 500 error SSL proxy 1.0.1c O|
|53618|New|Nor|2012-07-29|proxy_worker_shared fields not maintained in threa|
|53634|New|Nor|2012-08-01|mod_cache returning HTTP 200 for nonexistent resou|
|53638|New|Nor|2012-08-02|Problem with shortcuts to bugzilla in http://httpd|
|53640|Inf|Maj|2012-08-02|make: Fatal error: Command failed for target `htpa|
|53643|New|Cri|2012-08-02|apache segfaults with mod_authn_dbd when dbd_min i|
|53646|New|Nor|2012-08-02|Invalid uniformly distributed balancing of request|
|53651|New|Nor|2012-08-03|Worker failure doesn't have same behaviour as work|
|53667|New|Enh|2012-08-07|Add an equivalent option to "JkOptions ForwardLoca|
|53669|New|Nor|2012-08-07|IndexOptions Incremental IndexOptions documentatio|
|53686|New|Enh|2012-08-09|Status "501 Not Implemented" sent very late       |
|53690|New|Nor|2012-08-09|Calls to semctl() trigger "uninitialized memory" w|
|53692|New|Nor|2012-08-10|mod_auth_form loses request body before login page|
|53693|Opn|Nor|2012-08-10|mod_fcgid performance suffers under increase in re|
|53704|New|Enh|2012-08-13|True online configuration is needed - via LDAP?   |
|53705|New|Nor|2012-08-13|Align server-status balancer display to balancer-m|
|53706|New|Enh|2012-08-13|Include a status display for mod_ldap when present|
|53722|New|Nor|2012-08-15|when -D NO_DETACH is used, no PID file should be c|
|53736|New|Nor|2012-08-17|/balancer-manager doesn't save runtime adjusted se|
|53757|New|Enh|2012-08-21|RewriteMap of type txt should allow specifying col|
|53767|New|Nor|2012-08-23|htcacheclean deletes stale "vary" header files eve|
|53772|New|Nor|2012-08-24|REDIRECT_URL not accessible in mod_proxy          |
|53787|New|Reg|2012-08-28|In forward proxy, doesn't cache disk anymore      |
|53823|New|Nor|2012-09-03|[patch] pure IPv6 only host fix (server/config.c) |
|53835|New|Cri|2012-09-06|mod_proxy_ajp truncate output when using deflate i|
|53870|New|Maj|2012-09-13|Deadlock in CRYPTO_add_lock with Apache 2.2.22 wor|
|53886|New|Nor|2012-09-18|can't start apache control in Redhat Linux 3 X64  |
|53899|New|Nor|2012-09-19|SSL_OP_ALL disables the mitigation code for CVE-20|
|53915|New|Nor|2012-09-21|Colon lost when :port is used in CacheKeyBaseURL  |
|53919|Inf|Enh|2012-09-21|DEFAULT_LOG_FORMAT is not RFC6302 compliant       |
|53923|New|Min|2012-09-23|Overriding CustomLog directive seems impossible   |
|53932|New|Nor|2012-09-25|PROPFIND doesn't support If, If-Match ETag predica|
|53947|New|Enh|2012-09-29|Feature Request, RewriteRule - ProxyPreserveHost f|
|53961|New|Nor|2012-10-04|Null sessions to the default vhost                |
|53970|New|Nor|2012-10-05|Network control directives affects internal subreq|
|53981|New|Nor|2012-10-08|move def of log_request_state from mod_log_config.|
|53988|New|Enh|2012-10-10|Missing FCGIWrapper script should not be a critica|
|53999|Opn|Nor|2012-10-13|Deadlock between procmgr_send_spawn_cmd()/proctabl|
|54030|New|Enh|2012-10-19|Support subjectAltName when (reverse-)proxying    |
|54033|New|Enh|2012-10-21|Parent languages are not ordered according to Acce|
|54072|New|Reg|2012-10-30|Syntax error front-end virtual-path too long      |
|54102|New|Enh|2012-11-05|new feature: automatic route detection            |
|54118|New|Nor|2012-11-08|Handle leak on parent httpd process when rotatelog|
|54126|New|Maj|2012-11-09|Mod_rewrite failing because of url in query string|
|54134|New|Enh|2012-11-11|new feature: ability to use multiple routes in sti|
|54136|New|Min|2012-11-11|balancer-handler shows xml not, when only xml para|
|54158|New|Nor|2012-11-16|Suggestion regarding 2.0 to 2.2 Upgrade Documentat|
|54183|Inf|Nor|2012-11-21|PROPFIND doesn't report getcontenttype property   |
|54215|New|Maj|2012-11-27|configure fails for httpd 2.2.3 with openssl 1.0.1|
|54221|Opn|Nor|2012-11-28|no ErrorLog prefix on CGI errors                  |
|54222|New|Min|2012-11-28|ServerTokens checking is not complete             |
|54223|New|Nor|2012-11-29|AH00554 error when runtime configuration Includes |
|54252|New|Nor|2012-12-05|acinclude.m4 requires -lz when linking with ssl st|
|54253|New|Nor|2012-12-05|mod_proxy_ftp doesn't handle/log partial or cancel|
|54255|New|Nor|2012-12-06|mod_deflate adjusts the headers "too late", should|
|54269|New|Maj|2012-12-09|mod_proxy_html documentation misses several things|
|54276|New|Nor|2012-12-10|rotatelogs not getting killed on graceful restart |
|54280|New|Nor|2012-12-11|mod_auth_form inline login not working with traili|
|54281|New|Nor|2012-12-11|Stick use Partial parameters from query string    |
|54289|New|Nor|2012-12-13|"ap_get_brigade" api is failing in "AP_MODE_SPECUL|
|54306|New|Enh|2012-12-15|add regexp versions of ProxyPassReverse, ProxyPass|
|54309|New|Trv|2012-12-15|clarification on the <Location> directive when use|
|54310|Opn|Nor|2012-12-15|mod_proxy_html drops meta elements with http-equiv|
|54319|New|Reg|2012-12-17|ProxyPass has no effect in <Location> if rewrite o|
|54339|New|Nor|2012-12-21|piped log entries > PIPE_BUF can be interleaved   |
|54342|New|Nor|2012-12-22|AuthnCacheSOCache can't pass args to socache provi|
|54343|New|Maj|2012-12-22|Add sanity checks for malloc() in mpm_winnt.c and |
|54358|New|Nor|2012-12-29|Status 500 when using ldap on Solaris because apr_|
|54363|New|Nor|2012-12-31|make time conversion caching functions thread-safe|
|54364|New|Nor|2012-12-31|Add ref to mod_fcgid docs                         |
|54365|New|Nor|2013-01-02|Connection closed by server during file transfer  |
|54366|New|Nor|2013-01-02|$sysconfdir/extra/httpd-dav.conf is not built base|
|54367|Opn|Maj|2013-01-02|Location header in response to PUT is not %-escape|
|54385|New|Enh|2013-01-08|SSL configuration independent from virtual hosts, |
|54401|New|Nor|2013-01-10|Suggest to make ProxyPassReverseCookieDomain accep|
|54415|New|Enh|2013-01-14|Please tell the root cause of mutex and scoreboard|
|54431|Inf|Blk|2013-01-16|Unable to start the Apache 2.4.3 windows service. |
|54498|New|Nor|2013-01-28|apache crash on any cgi request with certain http |
|54502|New|Nor|2013-01-29|Apache deadlock on epoll_ctl error (1000 process l|
|54512|Inf|Cri|2013-01-31|Apache hung                                       |
|54517|New|Nor|2013-02-01|proxy balancer: timeout or partial failure of back|
|54518|New|Nor|2013-02-01|mod_rewrite not adding Vary header                |
|54519|New|Nor|2013-02-02|httpd already running                             |
|54526|New|Nor|2013-02-05|mod_proxy_http ignores request abortion           |
|54543|New|Enh|2013-02-10|Compile regex only when need                      |
|54546|New|Nor|2013-02-11|httpd crashes on first HUP after change Listen dir|
|54549|New|Nor|2013-02-11|mod_mime AddEncoding and mod_negotiation fix_encod|
|54556|New|Enh|2013-02-13|New flag to add default rule in rule chain        |
|54560|New|Nor|2013-02-13|Potential segfault on return from ap_server_root_r|
|54563|New|Maj|2013-02-15|mod_webdav ignores quota                          |
|54578|New|Nor|2013-02-18|Bad docs or unchecked code for "LimitRequestFields|
|54605|New|Enh|2013-02-24|mod_negotiation should cache the info it generates|
|54608|New|Enh|2013-02-25|Support an option to allow page caching when using|
|54622|New|Nor|2013-02-28|shared memory cleanup                             |
|54626|New|Nor|2013-03-01|mod_authnz_ldap through util_ldap.c does not suppo|
|54633|New|Nor|2013-03-04|Invalid % encoding not rejected                   |
|54637|New|Nor|2013-03-05|Digest: secret not used                           |
|54640|New|Nor|2013-03-05|Slow transaction on a balance member is holding su|
|54649|New|Nor|2013-03-06|Incorrect PIDFILE prevent httpd restart           |
|54653|New|Min|2013-03-08|Suggestion to add https example for forward proxy |
|54656|New|Maj|2013-03-09|SNI and SSLProxyCheckPeerCN based on "connection" |
|54657|New|Nor|2013-03-09|DNS lookup failure for load balancer member does n|
|54683|New|Min|2013-03-13|Ignor directive ErrorDocument with null byte      |
|54699|Opn|Enh|2013-03-15|[feature request] cli webaccess tester            |
|54701|New|Cri|2013-03-15|Apache 2.4.3 Migration Issue Not loading the pages|
|54704|New|Nor|2013-03-15|Web Services stalling on it's own                 |
|54719|New|Nor|2013-03-18|httpd should check for and eventually create pid f|
|54752|New|Nor|2013-03-25|mod_ssl should not use uninitialized memory as ran|
|54782|New|Nor|2013-04-02|Memory Corruption errors - mpm_worker mod_perl    |
|54785|New|Nor|2013-04-02|Random crash when httpd server is stopped         |
|54793|New|Nor|2013-04-03|Socket timeout handler can delete uploaded files P|
|54794|New|Reg|2013-04-03|mod_wsgi|fcgid and subversion >= 1.7 issues       |
|54795|New|Nor|2013-04-03|'apxs -g -n' should be self-referring             |
|54796|Inf|Enh|2013-04-03|CustomLog should be able to use syslog as ErrorLog|
|54804|New|Nor|2013-04-05|mod_fcgid sends a Continue 100 response automatica|
|54813|New|Nor|2013-04-08|documnt the Require args used by authz_dbm includi|
|54816|Inf|Nor|2013-04-08|AH00566: request failed: invalid characters in URI|
|54817|New|Nor|2013-04-09|if prefix and sysconfdir are the same then http.co|
|54820|Inf|Cri|2013-04-09|REwriterule stops working                         |
|54824|New|Nor|2013-04-10|Spec file is missing libuuid-devel requirement    |
|54830|New|Enh|2013-04-11|Make SSLPProxyMachineCertificateFile configurable |
|54848|New|Nor|2013-04-15|Client field too short for IPv6 addresses         |
|54856|Inf|Enh|2013-04-17|NSCreateObjectFileImageFromFile                   |
|54858|New|Nor|2013-04-17|ld duplicate                                      |
|54861|New|Blk|2013-04-18|The number of connections with mysql is more      |
|54869|Inf|Nor|2013-04-19|Non-breaking space characters cause httpd to choke|
|54875|New|Nor|2013-04-23|Conditional request predicated on another URL's ET|
|54878|New|Nor|2013-04-23|Multiple Listen directives prevent server to start|
|54905|Inf|Cri|2013-04-29|Apache2 loops in child Segfaults                  |
|54910|New|Enh|2013-04-30|Format %{Foobar}o cannot be used to log Date and S|
|54911|New|Enh|2013-04-30|Allow logging of fields set by a backend server in|
|54914|New|Nor|2013-04-30|mod_dir DirectoryIndex breaks WebDAV PROPFIND / DE|
|54915|New|Nor|2013-04-30|GET on a WebDAV-enabled collection, with Directory|
|54918|New|Enh|2013-05-02|Implement RFC 6797 HTTP Strict Transport Security |
|54919|Inf|Nor|2013-05-02|*** glibc detected *** /usr/sbin/httpd: double fre|
|54930|New|Nor|2013-05-06|Allow empty message in ErrorDocument directive    |
|54934|Inf|Cri|2013-05-07|Apache is crashing intermittently with a message "|
|54936|New|Nor|2013-05-08|Some potential bugs reported by static analysis to|
|54949|New|Nor|2013-05-10|[PATCH] mod_cache: fix uninitialized tmppath varia|
|54952|Inf|Cri|2013-05-10|[Fri May 10 17:39:01 2013] [error] proxy: CLUSTER:|
|54953|New|Nor|2013-05-11|<VirtualHost 0.0.0.0:80> matches IPv6             |
|54958|New|Nor|2013-05-13|mod_deflate + mod_mime with SSI gives mixed compre|
|54962|New|Maj|2013-05-14|Apache will set incorrect Content-Length header an|
|54965|New|Enh|2013-05-14|Allow ProxyPassMatch in Directory context         |
|54976|New|Nor|2013-05-15|ProxyPass parameter "acquire" and "ttl" ignored in|
|54986|New|Maj|2013-05-16|httpd hanging on large form submit in ap_run_handl|
|54989|New|Nor|2013-05-17|Apache Segfaults on OS X at random - how can I dia|
|54993|New|Nor|2013-05-20|Critical error: File descriptor in bad state: apr_|
|54998|Ver|Nor|2013-05-21|Apache 2.4 terminates all SSL connections using an|
|55000|New|Nor|2013-05-21|Memory usage per process doubles when Apache is co|
|55021|New|Enh|2013-05-28|Support arbitrary sql to authentication username/p|
|55022|Inf|Cri|2013-05-28|child pid 3123 exit signal Bus error (10) - Apache|
|55034|Inf|Maj|2013-05-31|Apache 2.4.4 won't open more that 32k VH file hand|
|55039|New|Enh|2013-05-31|"RequestHeader edit" can't access environment vari|
|55045|New|Nor|2013-06-01|calls to gets() in test_find.c and test_parser.c  |
|55068|New|Enh|2013-06-06|root permissions when writing to per vhosts errorl|
|55069|New|Min|2013-06-06|notice message in error_log even when LogLevel err|
|55070|Opn|Enh|2013-06-06|mod_fcgid stderr always goes to main error log    |
|55072|New|Nor|2013-06-07|ErrorLog doesn't work well when apache shutdown   |
|55093|New|Nor|2013-06-12|[PATCH] mod_fcgid 2.3.7 truncates large posts on R|
|55096|New|Nor|2013-06-12|Make not running on httpd configure Solaris       |
|55098|New|Nor|2013-06-13|does not listen to IP4 when both IP4 address and I|
|55106|New|Enh|2013-06-17|ProxyErrorOverride considers response codes >= 400|
|55117|New|Nor|2013-06-18|GracefullTimeout for worker threads               |
|55148|Inf|Nor|2013-06-26|Error during SSL Handshake with remote server     |
|55152|New|Nor|2013-06-28|graceful restart adjusts to new balancer members, |
|55156|New|Nor|2013-06-28|mod_cache not respecting s-maxage cache-control he|
|55178|New|Nor|2013-07-01|[PATCH] mod_authnz_ldap SASL authentication suppor|
|55192|New|Trv|2013-07-03|htaccess error messages missing request context   |
|55193|New|Min|2013-07-03|ErrorLogFormat is ignored by some modules         |
|55226|New|Enh|2013-07-09|Request for "domain cluster" feature for mod_proxy|
|55234|New|Maj|2013-07-10|Working of attribute "protocol" attribute "protoco|
|55276|Inf|Enh|2013-07-17|Add REST API for load balancer for dynamic registr|
|55278|New|Nor|2013-07-18|mod_session's cookie may be empty, is repeated twi|
|55284|New|Nor|2013-07-20|repeatable segv                                   |
|55286|New|Nor|2013-07-21|Floating point exception (8) in mod_auth_digest   |
|55293|New|Nor|2013-07-22|Incorrect default MIME type for .woff fonts       |
|55306|New|Nor|2013-07-25|Error when copying svn repository, which contains |
|55323|New|Nor|2013-07-29|Double unescaped uri in sub request handler       |
|55327|New|Nor|2013-07-30|Segmentation fault when stopping Apache 2.4.6 norm|
|55340|New|Maj|2013-08-01|Listen for valid, unconfigured IP address passes c|
|55344|New|Nor|2013-08-02|missing ap_hook_monitor on windows                |
|55346|New|Nor|2013-08-02|When on filled quota filesystem, mod_fcgid init in|
|55348|New|Nor|2013-08-02|%h is not changed in logging, only %a             |
|55351|New|Enh|2013-08-04|allow ProxyPassReverseCookieDomain to automaticall|
|55362|New|Nor|2013-08-05|Apache httpd sends "400 Bad Request" to client due|
|55379|New|Min|2013-08-07|htdigest -c doesn't behave as described anymore   |
|55394|New|Nor|2013-08-09|apache 2.4 randomy crashes with signal 6          |
|55401|New|Enh|2013-08-11|document that force-proxy-request-1.0 implies prox|
|55415|New|Maj|2013-08-14|Proxy loop caused by ProxyErrorOverride and ErrorD|
|55431|New|Nor|2013-08-16|mod_negotation does not force the mime type listed|
|55433|New|Nor|2013-08-16|mod_proxy ignores final status code for aborted re|
|55443|Inf|Maj|2013-08-17|never gives 300 multiple choices                  |
|55445|New|Maj|2013-08-18|mod_socache_memcache ignores expiry, creating eter|
|55447|New|Enh|2013-08-18|make type-maps usable again, by making them access|
|55448|New|Nor|2013-08-19|segfault in set_max_workers at event.c:3194 on SIG|
|55449|New|Maj|2013-08-19|AH01185: worker slotmem_create failed --> slotmem |
|55452|New|Maj|2013-08-19|Redirect                                          |
|55458|New|Enh|2013-08-20|allow to configure what mod_ssl responds when one |
|55460|New|Enh|2013-08-21|allow service names to be used in the Listen direc|
|55467|New|Nor|2013-08-21|Support for OpenSSL custom TLS extensions and supp|
|55523|New|Trv|2013-09-04|auth_groupfile error log on access even though suc|
|55535|Inf|Nor|2013-09-08|incorrect check state parametr                    |
|55540|New|Cri|2013-09-09|mod_proxy gzip chunked issue (sample site provided|
|55549|New|Min|2013-09-11|AuthLDAPSubGroupAttribute doesn't do anything     |
|55550|New|Nor|2013-09-11|AuthLDAPSubGroupClass checking is very inefficient|
|55556|New|Nor|2013-09-13|apachebench (ab) doesn't use so_reuseaddr         |
|55557|New|Nor|2013-09-14|Some cppcheck reports                             |
|55573|New|Enh|2013-09-19|FileETag needs MTimeSeconds, MTime with granularit|
|55581|New|Enh|2013-09-22|Support concurrent connections to same FastCGI pro|
|55590|Inf|Maj|2013-09-24|second commit is failing if space is in file name |
|55596|New|Enh|2013-09-25|Add date format used by Expires header            |
|55607|New|Enh|2013-09-28|Re-set HOME environment variable to directory from|
|55615|New|Nor|2013-09-30|Connections are starved and not balanced when conc|
|55619|New|Nor|2013-10-02|Apache httpd reported 500 internal error when uplo|
|55627|New|Min|2013-10-04|Remove unnecessary APLOGNO() for trace logging per|
|55636|Inf|Cri|2013-10-07|long lost child came home - Apache is not respondi|
|55646|Inf|Nor|2013-10-10|non-2xx responses are not considered errors       |
|55654|New|Nor|2013-10-15|Extract variables from configuration without start|
|55670|New|Min|2013-10-18|Startup may fail silently at post_config          |
|55673|New|Nor|2013-10-18|httpd fails to start with SSLProxyMachineCertifica|
|55680|New|Enh|2013-10-20|online manual directory option doesn't exist      |
|55698|New|Maj|2013-10-24|Apache 2.2 + mod_fcgid 2.3.7 (CentOS 6.4) graceful|
|55700|New|Enh|2013-10-24|add something like RewriteOptions InheritDown     |
|55707|New|Nor|2013-10-25|SSLProtocol directive seem to be ignored over diff|
|55708|New|Nor|2013-10-25|Access violation in msvcrt.dll when calling getenv|
|55711|New|Min|2013-10-28|--enable-foo doesn't enable foo                   |
|55712|New|Nor|2013-10-28|Relative <!--#include virtual="../file.shtml"--> g|
|55720|New|Enh|2013-10-29|separate LDAP Bind timeout from LDAPTimeout       |
|55738|New|Nor|2013-11-03|PVS-Studio: few issues                            |
|55763|New|Nor|2013-11-09|raise roots soft RLIMIT_NPROC on linux for high ma|
|55774|New|Nor|2013-11-13|ab: optionally accept tls client certificate      |
|55781|New|Nor|2013-11-15|ajp_read_header: ajp_ilink_receive failed; 120006)|
|55786|New|Maj|2013-11-16|SSLVerifyClient and OptRenegotiate result in a 403|
|55787|New|Maj|2013-11-16|Chroot fails with "Cannot chroot when not started |
|55790|New|Maj|2013-11-17|mod_fcgid lockfile hardcoded to be in /tmp        |
|55793|New|Enh|2013-11-18|DTrace/SystemTap support                          |
|55808|New|Nor|2013-11-21|File integrity verification using MD5 and SHA1    |
|55819|Inf|Nor|2013-11-27|Closing connection behaviour                      |
|55828|New|Cri|2013-11-28|Httpd not start if use ProxyPass balancer://      |
|55834|New|Maj|2013-12-02|Apache does not honor the openssl library path giv|
|55838|New|Nor|2013-12-03|PHP files are being executed instead of downloaded|
|55841|New|Nor|2013-12-04|Misleading news items on bugfix releases ("This ve|
|55856|New|Nor|2013-12-08|YYEMPTY (-2) used as index into yytname (const arr|
|55866|New|Nor|2013-12-11|When ProxyPreserveHost is on, SSL expects the wron|
|55878|New|Nor|2013-12-12|mod_fcgid kills spawned processes too early       |
|55881|New|Nor|2013-12-13|segmentation fault at proxy_util.c:1546           |
|55883|New|Enh|2013-12-14|string callers of ap_expr should be able to transf|
|55887|New|Maj|2013-12-16|In Windows apache, when user access to /con, apach|
|55898|New|Enh|2013-12-17|[RFE] listen on unix socket?                      |
|55914|New|Reg|2013-12-20|child exit segmentation fault after apache gracefu|
|55919|New|Nor|2013-12-22|EPREFIX and dynamic modules                       |
|55942|New|Nor|2014-01-01|400 - Bad Request on POST (Windows Server 2012 Hyp|
|55952|New|Nor|2014-01-05|ab: SSL keep-alive fails with apr_pollset_poll: Th|
|55962|New|Enh|2014-01-06|mod_remoteip should not allow an external proxy to|
|55963|New|Nor|2014-01-07|Add application/ld+json to mime.types             |
|55981|Opn|Nor|2014-01-09|mod_mbox hang on some e-mails on user@openoffice.a|
|55985|Opn|Nor|2014-01-10|apache does not reopen logs when multiple graceful|
|55989|Opn|Enh|2014-01-11|write to error log upon RewriteRule [F]orbidden   |
|55991|New|Nor|2014-01-12|mod_charset_lite doesn't bail out on non-identity |
|56009|Inf|Cri|2014-01-14|Memory leak in httpd 2.4.3 over time with persista|
|56014|New|Nor|2014-01-15|MOd rewrite CO Cookie method the lifetime flag not|
|56028|New|Enh|2014-01-17|Add http/1.0, http/1.1 NPN advertisement to enable|
|56034|New|Nor|2014-01-20|CPU consumption due to circular linked list in ap_|
|56040|New|Enh|2014-01-21|should be able to remove Max-Age cookie parameter |
|56041|New|Enh|2014-01-21|should be able to disable session expiry increment|
|56052|New|Nor|2014-01-22|ap_session_load called multiple times for expired |
|56055|New|Nor|2014-01-23|Route is not extracted properly when a session coo|
|56064|New|Enh|2014-01-25|Optimize PNGs                                     |
|56067|New|Nor|2014-01-27|FallbackResource doesn't work if directory exists |
|56081|New|Maj|2014-01-28|Apache 2.2.26 SIGSEGVs when POST'ing data         |
|56091|Inf|Nor|2014-01-30|SSL handshake error when httpd compiled on Oracle |
|56098|New|Nor|2014-02-01|duplicate cookie                                  |
|56101|New|Cri|2014-02-03|Apache 2.4.6 ceases processing requests (scoreboar|
|56102|New|Nor|2014-02-03|SSL_CLIENT_S_DN_x509_0 is undefined in the environ|
|56109|New|Nor|2014-02-05|Cannot increase the read limit                    |
|56113|New|Nor|2014-02-06|dist commit messages missing from mail-archives di|
|56131|New|Nor|2014-02-12|ProxyPassReverse / zealously replaces Location hea|
|56135|New|Nor|2014-02-13|Add DC to list of x509 components                 |
|56152|New|Nor|2014-02-18|ProxyBlock does not accept network addresses      |
|56176|New|Nor|2014-02-21|mod_substitute truncates the response body if the |
|56188|New|Nor|2014-02-25|mod_proxy_fcgi does not send FCGI_ABORT_REQUEST on|
|56209|New|Nor|2014-03-03|Uninitialised variables in os/win32/ap_regkey.c   |
|56226|Ver|Nor|2014-03-06|per VirtualHost KeepAliveTimeout is not recognized|
|56229|New|Enh|2014-03-06|ocsp ProxyHost and ProxyPort support              |
|56230|New|Nor|2014-03-07|mod_access_compat can log a bogus client denied me|
|56235|New|Nor|2014-03-07|quotes should be optional around expr             |
|56247|New|Cri|2014-03-12|semaphore creation for proxypass                  |
|56250|New|Nor|2014-03-12|sbindir in config.layout for Apache has bin instea|
|56251|New|Nor|2014-03-12|Increase maximum length of FcgidInitialEnv string |
|56252|New|Enh|2014-03-12|make install as privileged user creates files not |
|56262|New|Nor|2014-03-14|ab does not work with extremely long cookies      |
|56264|New|Trv|2014-03-14|Confusing error with .htaccess rewrite to proxy wh|
|56270|New|Enh|2014-03-15|--with-ssl=/foo w/o pkgconfig needs help on AIX 64|
|56288|New|Enh|2014-03-19|rewrite URLs in style attributes                  |
|56289|New|Nor|2014-03-19|Buffer overflow in mod_proxy_html's string replace|
|56308|New|Nor|2014-03-24|1 second delay in handle request kills performance|
|56312|New|Nor|2014-03-25|Can't configure different balancing workers that c|
|56314|New|Nor|2014-03-25|exiting from MPM-worker child caused assert in apr|
|56326|New|Nor|2014-03-27|cache_quick_handler does not serve responses with |
|56331|New|Nor|2014-03-29|windows 'access denied' during revalidaton of reso|
|56333|New|Enh|2014-03-31|API to resume a SUSPENDED connection              |
|56362|New|Maj|2014-04-08|ldaps only works with port 636. Non-standard port |
|56379|New|Nor|2014-04-09|Number of columns in the results returned from pgs|
|56395|New|Enh|2014-04-11|Allow SERVER_ADDR environment variable to be optio|
|56404|New|Nor|2014-04-12|endless loop  when connect to a website(https)  wh|
|56413|New|Blk|2014-04-15|can not restart httpd on centos 5.10 64bit        |
|56422|New|Nor|2014-04-17|authnz_ldap with other forms of authn can fail req|
|56457|New|Nor|2014-04-25|mod_proxy_html.c: 2 * cut'n'paste errors          |
|56473|New|Nor|2014-04-30|ETags don't change when headers do                |
|56475|New|Enh|2014-04-30|Allow TLS record size to be configured            |
|56483|New|Enh|2014-05-02|add disableKeepAlivePercentage similar to tomcat h|
|56493|New|Min|2014-05-06|mod_expires should not set expires in future for s|
|56495|New|Nor|2014-05-06|Application behind mod_proxy does not get SessionH|
|56500|Opn|Enh|2014-05-07|vhosts priority order with wildcard               |
|56504|New|Nor|2014-05-08|cannot build static support binaries              |
|56508|New|Nor|2014-05-09|Requiring SNI - SSLStrictSNIVHostCheck semantics  |
|56517|New|Enh|2014-05-12|Virtualhosts cannot inherit parent CustomLog      |
|56528|New|Enh|2014-05-15|"bad flags delimiter" - improve helpfulness       |
|56541|New|Nor|2014-05-18|Proxy 502's on large file post requests           |
|56559|New|Nor|2014-05-25|multiple unix sockets in one virtualhost fails    |
|56569|New|Nor|2014-05-27|Null CRC in gzip footer with mod_cgid and ErrorDoc|
|56587|New|Nor|2014-06-03|Many VirtualHost's with SSLEngine On              |
|56590|New|Enh|2014-06-04|(REST-) API for configuring balancer manager remot|
|56594|Inf|Nor|2014-06-05|mod_authn_dbd, mod_dbd and mod_ssl                |
|56598|New|Nor|2014-06-06|Content-Length header should be always interpreted|
|56621|New|Nor|2014-06-13|Rotatelogs.exe first start                        |
|56622|New|Nor|2014-06-13|mod_reqtimeout incorrectly applies timeouts to CON|
|56626|New|Nor|2014-06-15|Add info about rotatelogs to log rotation document|
|56633|New|Nor|2014-06-16|mod_auth_basic breaks mod_autoindex               |
|56645|New|Maj|2014-06-19|socket callback with timeout callback causes infin|
|56664|New|Nor|2014-06-24|Proxy retry timeout does not cope with system time|
|56697|New|Maj|2014-07-04|status page still shown while blocked             |
|56718|New|Nor|2014-07-14|Cleanup request Host headers when absolute URI are|
|56719|New|Nor|2014-07-14|parallel requests get served with delays          |
|56738|New|Enh|2014-07-17|Ability to extract route from cookie with regexp  |
|56740|New|Nor|2014-07-18|suspended_count not maintained properly with wstun|
|56750|New|Enh|2014-07-20|SuexecUserGroup replacement                       |
|56751|New|Maj|2014-07-20|Fails to properly mitigate Slow Post DoS attack   |
|56753|New|Nor|2014-07-21|mod_lua.so: symbol luaL_openlib: referenced symbol|
|56778|New|Nor|2014-07-28|while running make command i got this error       |
|56794|New|Nor|2014-07-31|Added AuthDBDFullAuthQuery option                 |
|56795|Inf|Nor|2014-07-31|Apache 2.4.10 Program received signal SIGPIPE, Bro|
|56818|Inf|Nor|2014-08-05|SetEnvIf may set invalid string length on empty st|
|56843|New|Enh|2014-08-12|Support different OCSP stapling max ages          |
|56868|New|Nor|2014-08-18|relative LuaRoot broken                           |
|56879|New|Nor|2014-08-22|Information disclosure                            |
|56889|New|Nor|2014-08-26|Close state never dies                            |
|56918|Opn|Blk|2014-09-06|error: 'ap_copy_scoreboard_worker' undeclared here|
|56926|New|Nor|2014-09-08|Filename causes AH02599 slotmem issue             |
|56933|New|Min|2014-09-09|not sure it's an appache bug : some browser want t|
|56942|New|Reg|2014-09-10|Unable to implement TRANSFER-CHUNKED:ENCODING with|
|56943|New|Nor|2014-09-10|mod_proxy_connect - AH02447: err/hup on backconn  |
|56977|New|Maj|2014-09-12|segfaults when using mod_mem_cache + mod_disk_cach|
|56986|New|Blk|2014-09-17|chunked Transfer-Encoding forbidden: /test/test.dl|
|57014|New|Cri|2014-09-24|Incorrect test for CC_FOR_BUILD prevents build (on|
|57023|New|Nor|2014-09-26|Socache shmcb don't cache file bigger than 11k    |
|57028|New|Enh|2014-09-27|mod_spdy - support Apache 2.4                     |
|57044|New|Nor|2014-09-29|[PatchAvailable] Use base64url in mod_unique_id ('|
|57045|New|Nor|2014-09-30|dumpio output strings are missing                 |
|57046|New|Enh|2014-09-30|Add additional parameter to enable check URL befor|
|57056|New|Maj|2014-10-03|Rewrite port is taken into hostname               |
|57067|New|Nor|2014-10-08|A proxy worker both standalone and balancer member|
|57069|New|Nor|2014-10-08|apache ssl timeout during chunked request in rever|
|57073|New|Cri|2014-10-09|Intermittent Connection Issues using default httpd|
|57085|New|Enh|2014-10-14|Implement Proxy Protocol in httpd                 |
|57087|New|Nor|2014-10-14|mod_proxy_fcgi doesn't send cgi CONTENT_LENGTH var|
|57100|Ver|Nor|2014-10-16|"SSLProtocol ALL" is ignored for virtual hosts    |
|57101|New|Enh|2014-10-16|[PATCH] Better error reporting when child spawn fa|
|57109|New|Nor|2014-10-17|GPG verification examples are wrong               |
|57119|Opn|Enh|2014-10-20|Suppress address reuse / DNS cache in mod_proxy   |
|57121|New|Nor|2014-10-21|ocsp stapling should not pass temporary server out|
|57131|New|Nor|2014-10-22|OCSP Stapling scalability concern                 |
|57159|New|Min|2014-10-28|mod_ssl OCSP Stapling directives don't support per|
|57160|New|Nor|2014-10-29|httxt2dbm doesn't generate files on NAS           |
|57174|New|Nor|2014-10-31|Update windows visual studio build                |
|57210|New|Nor|2014-11-14|LuaHookMapToStorage not firing in per-directory co|
|57211|New|Enh|2014-11-14|Config-time options                               |
|57212|Opn|Nor|2014-11-14|Headers returned by scripts are limited to 8190 by|
|57218|New|Nor|2014-11-15|[Feature Request] Apache Bench (AB) to output a cs|
|57219|New|Nor|2014-11-15|ApacheBench quits unexpectedly with high concurren|
|57220|New|Nor|2014-11-15|[Feature Request] Add option to ApacheBench to giv|
|57228|New|Nor|2014-11-17|glibc detected *** httpd: double free or corruptio|
|57229|New|Maj|2014-11-17|mod_sed dies on long lines                        |
|57286|New|Nor|2014-11-29|Symbolic links are not honoured                   |
|57298|New|Min|2014-12-02|RewriteBase inside FilesMatch behaves oddly       |
|57299|New|Enh|2014-12-02|mod_session_dbd should not make a database call pe|
|57300|New|Enh|2014-12-02|mod_session_dbd should not save the session at eac|
|57301|New|Enh|2014-12-02|Add SessionMaxAgeAbsolute Directive               |
|57304|Inf|Nor|2014-12-03|MySQL DBD Authentication Incompatible with SSL    |
|57311|New|Nor|2014-12-04|BalancerMember enclosed by <If> gives syntax error|
|57313|New|Nor|2014-12-05|The DefaultType directive has been removed        |
|57327|New|Nor|2014-12-08|mod_ssl seg fault on exit                         |
|57334|Ver|Maj|2014-12-09|Segmentation fault in SSL_renegotiate at ssl_lib.c|
|57337|New|Nor|2014-12-10|Content negotiation fails with conditional Redirec|
|57339|New|Enh|2014-12-10|ErrorLogFormat doesn't allow logging in Internet d|
|57360|New|Nor|2014-12-17|Fail gracefully on certificate/key mismatch       |
|57372|New|Nor|2014-12-19|httpd will lookup every home directory while start|
|57374|Ver|Nor|2014-12-19|Event MPM: Wrong KeepAliveTimeout when system cloc|
|57379|New|Nor|2014-12-20|[patch] Makefile.in  with mpm-shared, cgi and cgid|
|57383|New|Cri|2014-12-21|Error retrieving Report: An Existing connection wa|
|57386|New|Blk|2014-12-22|html5 lost some comments                          |
|57398|New|Maj|2014-12-26|AH01075: Error dispatching request to : (passing b|
|57399|New|Nor|2014-12-28|Many unnecessary CPU wakeups per second           |
|57406|New|Nor|2014-12-31|cgi-bin script is not executing                   |
|57412|New|Maj|2015-01-04|rewrite rules causes duplicate requests           |
|57416|New|Nor|2015-01-06|htcacheclean thinks the cache is smaller than it a|
|57424|Opn|Nor|2015-01-07|mod_rewrite not using ap_context_document_root    |
|57436|New|Enh|2015-01-12|Option to strip extra data after websocket request|
|57439|New|Enh|2015-01-13|Allow to change body timeout per location         |
|57448|New|Nor|2015-01-16|SSI <!--#set --> cannot capture backreferences fro|
|57453|New|Maj|2015-01-17|403 error when virtualhost configured with non-exi|
|57471|New|Nor|2015-01-20|Apache 2.4.10 Compilation fails when compiling aga|
|57477|New|Nor|2015-01-21|mod_auth_digest AH00052: child pid $pid exit signa|
|57483|New|Nor|2015-01-22|Omit "Keep-Alive" header on 1.1 connections       |
|57492|New|Nor|2015-01-24|incomplete chunked-transfered request body is not |
|57506|New|Nor|2015-01-27|<If> directive doesn't work within a <Location> se|
|57510|New|Enh|2015-01-28|Engine keyform support for private keys           |
|57511|New|Maj|2015-01-28|Opening plain TCP Socket on SSL port causes denial|
|57515|New|Nor|2015-01-30|Define/Undefine don't work reasonably outside of g|
|57519|New|Nor|2015-02-01|change SSLv2 to SSLv3 or remove SSLv2 support allt|
|57526|Opn|Maj|2015-02-03|Apache 2.2.29_openssl-1.0.1k_x86_64 Error creating|
|57529|Opn|Nor|2015-02-03|htcacheclean doesn't show the cached URL with '-a'|
|57585|New|Nor|2015-02-13|httpd fails to start if there is an IncludeOptiona|
|57590|New|Nor|2015-02-18|loading mod_proxy_http makes rewriteRule's [proxy]|
|57591|New|Nor|2015-02-18|DirectoryIndex directive cannot be overwritten    |
|57616|New|Maj|2015-02-23|AB - DNS roundrobin support                       |
|57624|New|Enh|2015-02-23|Provide support for http/2.0                      |
|57631|New|Nor|2015-02-24|Useless test in acinclude.m4                      |
|57632|New|Nor|2015-02-24|mod_systemd passes invalid default to APACHE_MODUL|
|57635|New|Nor|2015-02-25|meta-refresh is not rewritten by mod_proxy_html   |
|57636|New|Nor|2015-02-25|URLs without protocol are not rewriten by mod_prox|
|57641|New|Maj|2015-02-27|mod_substitute: Invalid merge order               |
|57646|New|Enh|2015-02-27|SSLEngine inside If directive                     |
|57660|New|Trv|2015-03-04|AB - free memory allocated by xmalloc and xcalloc |
|57680|New|Nor|2015-03-09|SSLSessionCacheTimeout has no effect              |
|57685|New|Nor|2015-03-10|Requests are denied while the mod_cgid daemon star|
|57691|New|Nor|2015-03-12|mod_proxy/proxy_util confuses UDS scheme with HTTP|
|57695|New|Nor|2015-03-12|[core:warn] [pid 1120] (101)Network is unreachable|
|57710|New|Nor|2015-03-15|Wildcard matching for logging headers             |
|57725|New|Enh|2015-03-18|ApacheBench: include http status code in gnuplot o|
|57742|New|Nor|2015-03-23|"reliable piped logging" doesn't work for ErrorLog|
|57745|New|Nor|2015-03-23|httpd exits 1 with no stderr when proxy_balancer_m|
|57746|New|Nor|2015-03-23|Apache hangs on startup using MPM event           |
|57751|Inf|Maj|2015-03-24|Problems with proxy reverse to websockets         |
|57756|New|Enh|2015-03-25|Config options for handling of pipelined request  |
|57757|New|Cri|2015-03-25|extern apr_xlate_t *ap_locale_to_ascii variable gi|
|57771|New|Nor|2015-03-27|cleanup_script uses incorrect connection ID       |
|57774|Inf|Nor|2015-03-28|httpd.conf <IfModule proxy_html_module> content er|
|57777|New|Nor|2015-03-30|Security concerns with documentation of AddHandler|
|57781|New|Nor|2015-03-31|disable reconnection after connection error       |
|57784|New|Enh|2015-03-31|[RFE] Multiple ErrorLog directives                |
|57785|Opn|Nor|2015-04-01|REDIRECT_URL is not suitable for use in server-gen|
|57795|Opn|Maj|2015-04-07|mod_proxy_wstunnel sometimes does not connect and |
|57800|New|Nor|2015-04-09|High CPU usage in ap_core_output_filter           |
|57807|New|Enh|2015-04-13|Build-configurable environment variable length    |
|57810|New|Nor|2015-04-13|Should apache ignore difference in trailing dot be|
|57813|New|Nor|2015-04-14|Rewrite 'pre-compressed content' recipe using 2.4 |
|57814|New|Nor|2015-04-14|Teach mod_deflate how to serve pre-comressed conte|
|57819|New|Nor|2015-04-15|Need a conventions document                       |
|57832|New|Enh|2015-04-19|Reduction of response splitting attacks consequenc|
|57853|Inf|Nor|2015-04-24|mod_proxy_http sends request with header 'Expect: |
|57876|New|Reg|2015-04-30|logresolve.exe on any Windows immediately crashes |
|57878|New|Nor|2015-04-30|Using UTF-8 for all languages, and avoiding html-e|
|57895|New|Min|2015-05-05|missing m4a mimeType in mime.types                |
|57911|New|Min|2015-05-09|Rewrite documentation unclear or wrong about what |
|57927|New|Maj|2015-05-13|Segmentation Fault at proxy_util.c:994            |
|57933|New|Min|2015-05-18|apr_port_t returns constant                       |
|57941|New|Nor|2015-05-21|config.status: line 331: syntax error near unexpec|
|57949|New|Enh|2015-05-25|new mod_ssl environment variable SSL_{CLIENT|SERVE|
|57950|New|Nor|2015-05-26|[patch] buildconf change hint in build to newer ap|
|57960|New|Nor|2015-05-27|PUT truncates response body; status_line appears t|
|57976|New|Cri|2015-05-30|Server threads stale when sending 500 status with |
|57978|New|Nor|2015-06-01|unix:/ works with any number of / slashes  except |
|57979|New|Nor|2015-06-01|can not turn change log level for mod_filter      |
|57996|New|Nor|2015-06-03|Symlinks erroneously not followed when target inod|
|57997|New|Nor|2015-06-03|Threads started during child_init don't block sign|
|57999|New|Nor|2015-06-04|ap_getparents() may remove start slash of uri     |
|58001|New|Enh|2015-06-04|Implement Forwarded header (RFC 7239) to mod_proxy|
|58007|New|Nor|2015-06-06|400 Bad Request with fully qualified domain name o|
|58025|New|Enh|2015-06-11|mod_authz_dbd : new dbd-query and AuthzDBDQuery op|
|58026|New|Nor|2015-06-11|return 421 status code when SNI and Host: header d|
|58044|New|Cri|2015-06-16|Error sintax 'lua_dump'                           |
|58050|New|Nor|2015-06-17|ErrorDocument does not always work                |
|58073|New|Nor|2015-06-24|Extremely long time for graceful restart          |
|58089|New|Nor|2015-07-01|mod_authz_host uses proxy IP even when mod_remotei|
|58097|New|Enh|2015-07-03|[feat] Preserve original connecting IP            |
|58101|New|Nor|2015-07-05|DeflateCompressionLevel inside vhost resets logfor|
|58107|New|Blk|2015-07-06|Httpd crashes on startup every time, dump file att|
|58109|New|Nor|2015-07-06|Apache on windows cannot handle the hash symbol (#|
|58118|Inf|Min|2015-07-09|mod_proxy_fcgi logs 503 when user aborts connectio|
|58120|New|Nor|2015-07-10|ProxyPassInherit does not work as expect          |
|58121|New|Nor|2015-07-10|ProxyHTMLMeta seems to ignore all <meta http-equiv|
|58129|New|Nor|2015-07-12|man pages are not generated correctly             |
|58132|New|Nor|2015-07-12|non-standard, non-traditional man page layout make|
|58135|New|Nor|2015-07-14|mod_cache sends client "if-Modified-Since" to back|
|58141|New|Nor|2015-07-15|Apache Service doesn't start when rotatlogs.exe pa|
|58142|New|Nor|2015-07-15|authz_core ignores loglevel                       |
|58158|New|Nor|2015-07-21|Not honoring HTTP spec with regard to Accept-Encod|
|58168|New|Enh|2015-07-21|Would like full request evaluation support in Rewr|
|58171|New|Nor|2015-07-22|ap_session_save saves the wrong session after a de|
|58177|New|Enh|2015-07-24|Mod Proxy forward trailers in http chunked request|
|58180|New|Enh|2015-07-24|ErrorDocument original URL in subsequent <Location|
|58181|New|Enh|2015-07-25|mod_expire should allow "minus" keyword same like |
|58188|New|Nor|2015-07-28|http2 mod_lua: support build with lua 5.2+        |
|58197|New|Nor|2015-07-31|apr-util-1.5.4 build against openldap - "could not|
|58225|New|Reg|2015-08-08|intermitant segfault 11 in session_identity_encode|
|58226|New|Nor|2015-08-08|XSS in Error Page                                 |
|58231|New|Nor|2015-08-11|RewriteCond can add "Host" to the Vary-Header     |
|58235|New|Enh|2015-08-12|Ability to allow from domain but with using forwar|
|58243|New|Nor|2015-08-14|rotatelogs goes infinite at startup               |
|58248|New|Nor|2015-08-17|Error 404 in use some characters of utf8 in url   |
|58257|New|Nor|2015-08-18|require ldap-group does not work if account-fullna|
|58278|Inf|Blk|2015-08-24|apache - mod_security Issue : apache no releasing |
|58280|New|Nor|2015-08-24|Backend connection not closed until timeout if cli|
|58288|New|Blk|2015-08-27|Semaphore amount increase until crash when enablin|
|58292|New|Nor|2015-08-27|FallbackResource breaks chunked encoding sometimes|
|58304|New|Nor|2015-08-30|Unexpected Warnings from Macro Use in 2.4         |
|58305|New|Nor|2015-08-30|mod_cgi documentation not clear about what is pass|
|58306|New|Nor|2015-08-30|documentation needs to make it clear which directi|
|58307|New|Nor|2015-08-31|Segmentation fault in child in "read(__nbytes, __b|
|58317|New|Min|2015-09-02|Error message AH01630 is missing file name on deny|
|58334|New|Min|2015-09-06|WebDAV HTTP access does not include meta tag for c|
|58335|New|Nor|2015-09-07|mod_authnz_ldap mismatch                          |
|58343|New|Nor|2015-09-08|The pdf files come up as a blank page.            |
|58354|New|Maj|2015-09-10|(20014)Internal error (specific information not av|
|58356|New|Blk|2015-09-10|Session jumping due to incorrect route            |
|58364|New|Reg|2015-09-11|Apache Server is restarted time to time (Release 2|
|58417|New|Min|2015-09-16|ApacheBench (ab) won't display Server Software of |
|58419|New|Nor|2015-09-16|ApacheBench (ab) doesn't work with keep-alives aga|
|58423|New|Reg|2015-09-17|Apache >= 2.4.8 PCRE_DUPNAMES causes build failure|
|58467|New|Maj|2015-09-29|Environment Variables in ProxyHTMLURLMap produces |
|58475|New|Nor|2015-10-03|Support append/merge with semicolon-separated head|
|58488|New|Nor|2015-10-08|Stoped PHP-FPM pool in multi-pool system with comu|
|58491|New|Maj|2015-10-09|Core dumps appear when the load increases         |
|58492|Inf|Nor|2015-10-09|I think LDAPConnectionPoolTTL is not being honored|
|58498|New|Nor|2015-10-16|Apache 2.4.17: Regression with mod_autoindex (in c|
|58500|New|Nor|2015-10-16|dav_fs not enabled by default                     |
|58503|New|Cri|2015-10-16|segfault in apr_brigade_cleanup() under high load |
|58509|New|Trv|2015-10-20|2.4.17-dev introduces second core.c handler at sta|
|58513|New|Maj|2015-10-21|httpd code documentation is missing               |
|58524|New|Nor|2015-10-23|mod_http2 segfaults when under heavy load         |
|58528|New|Nor|2015-10-23|AllowOverrideList None gets misparsed and .htacces|
|58529|New|Maj|2015-10-23|Segmentation fault after modifying a proxy Balance|
|58550|New|Enh|2015-10-26|During load, Apache 2.2.x with prefork MPM didn|
|58574|New|Nor|2015-11-02|Apache error AH01630 (client denied) but working  |
|58593|New|Nor|2015-11-06|mod_proxy wrong decision between http and ws      |
|58598|New|Enh|2015-11-08|Internal Server Error (500) when requesting non-ex|
|58602|New|Nor|2015-11-11|Priority issue on DirectoryMatch directive        |
|58604|New|Reg|2015-11-12|Plaintext auth broken in any Explicit FTP/AUTH TLS|
|58612|New|Min|2015-11-16|mod_webdav when write_stream failed should break a|
|58666|New|Nor|2015-11-29|"HTTPS" enviroment var is set to 'off' when mod_ht|
+-----+---+---+----------+--------------------------------------------------+
| Total 1554 bugs                                                           |
+---------------------------------------------------------------------------+

From dev-return-84803-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov 29 08:04:15 2015
Return-Path: <dev-return-84803-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A0F38187CD
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 29 Nov 2015 08:04:15 +0000 (UTC)
Received: (qmail 99039 invoked by uid 500); 29 Nov 2015 08:04:15 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 98966 invoked by uid 500); 29 Nov 2015 08:04:15 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 98956 invoked by uid 99); 29 Nov 2015 08:04:15 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Nov 2015 08:04:15 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id A902FC059B
	for <dev@httpd.apache.org>; Sun, 29 Nov 2015 08:04:14 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.654
X-Spam-Level:
X-Spam-Status: No, score=-0.654 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RP_MATCHES_RCVD=-0.554, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=greenbytes.de
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id BDlaKZ2qmf-7 for <dev@httpd.apache.org>;
	Sun, 29 Nov 2015 08:04:03 +0000 (UTC)
Received: from mail.greenbytes.de (mail.greenbytes.de [217.91.35.233])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 72C0D20697
	for <dev@httpd.apache.org>; Sun, 29 Nov 2015 08:04:02 +0000 (UTC)
Received: from [192.168.0.130] (unknown [78.35.84.207])
	(using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by mail.greenbytes.de (Postfix) with ESMTPSA id 450A515A0199
	for <dev@httpd.apache.org>; Sun, 29 Nov 2015 09:03:53 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=greenbytes.de; s=mail;
	t=1448784233; bh=yFFZLJM39GvxgZFg0wVZ9eiILugGQ53H3jFMG8SdCiQ=;
	h=From:Subject:Date:References:In-Reply-To:To:From;
	b=CQEXWP/oarElHu8wsM+i8/eg4rx4Cub49uaWG8te5FcF0mSoBo0SuuM6trG0Vkhk9
	 o2HSQ3mLx80r8itdM32O96yll/vH+OxyqR6Lsmopm3+pJZYIOlAOmtBpZo2to0ZjLz
	 yK9vTPDaewycnMBVgQ9RUSoov0poqqBSS9h+muWg=
From: Stefan Eissing <stefan.eissing@greenbytes.de>
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (1.0)
Subject: Re: No H2 Window updates!
Message-Id: <40F35186-1FFF-48EF-BB67-DAE432526244@greenbytes.de>
Date: Sun, 29 Nov 2015 09:03:52 +0100
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl> <030501d12916$cf7e1120$6e7a3360$@qqmail.nl> <56599792.3060402@greenbytes.de> <03a401d129dd$fafdbfe0$f0f93fa0$@qqmail.nl> <03aa01d129e1$2d49d990$87dd8cb0$@qqmail.nl> <040101d12a23$ced65530$6c82ff90$@qqmail.nl>
In-Reply-To: <040101d12a23$ced65530$6c82ff90$@qqmail.nl>
To: dev@httpd.apache.org
X-Mailer: iPhone Mail (13B143)

Ok, thanks. I think I have an idea of what's happening:
- on short request bodies, window updates get omitted and gives a shrinking c=
onnection window
- the window size of the connection itself should be at max Value right from=
 the start

I won't be able to do anything about it until later this week, though.=20

//stefan

Am 28.11.2015 um 22:29 schrieb Bert Huijben <bert@qqmail.nl>:

>> -----Original Message-----
>> From: Bert Huijben [mailto:bert@qqmail.nl]
>> Sent: zaterdag 28 november 2015 14:32
>> To: stefan.eissing@greenbytes.de; dev@httpd.apache.org
>> Subject: RE: No H2 Window updates!
>=20
>=20
>> In case of Subversion's real usage, I want to commit potentially hundreds=

> of
>> MByte, so a connection level window of more than a few bytes would be
>> very
>> welcome.... With HTTP/1 we send out the data as fast as we can and the TC=
P
>> windowing handles this from the httpd side... Now the http/2 level
>> windowing
>> should handle this.
>>=20
>>=20
>> Mod_dav and mod_dav_svn are usually fast readers; just limited by trivial=

>> disk io or xml processing in the common operations, so I don't expect rea=
l
>> problems there.
>=20
> For my commits against the svn-master.apache.org repository my latency/pin=
g
> time is +- 142 ms.
>=20
> With the current simple algorithm and a maximum window of 64
> Kbyte/connection, I can send a theoretical maximum of 64 Kbyte/142 ms per
> connection to that server... which would be about 450 Kbyte/s.
> (=3D1/0.142*65536/1024)
>=20
> That is < 1/30th of the bandwidth I have at my disposal (+- 150 Mbit).
>=20
> But currently I don't even get anywhere near that as my window continues t=
o
> shrink because some data is missed in accounting even after my simple patc=
h.
>=20
>=20
>=20
> For httpd we have to think carefully which algorithm we want to implement
> here. Preferably the algorithm should be better than TCP could, as we know=

> the specifics of the http algorithm better than plain TCP could for
> HTTP/1,1. TCP does send a lot of window updates though... Almost every
> packet does.
>=20
>=20
> Solving the really hard problems, like this one, is the reason I didn't
> think the nghttp2 library would really be the solution for serf.=20
> It is nice for such a library to provide a head start on the protocol leve=
l,
> but there is no way a standard library can really solve this scheduling
> problem in a generic way. (If it could do it, we had used that solution fo=
r
> TCP... and never had to resort to designing a HTTP/2 in the first place).
>=20
> See https://en.wikipedia.org/wiki/TCP_window_scale_option for some
> introduction on how TCP was extended to work above the limit that currentl=
y
> applies to H2.
>=20
>=20
> Dynamic window sizing/scaling will have to be implemented at some point, a=
t
> both the stream and the connection level... This will involve timing,
> measuring, etc. etc. Things nghttp2 can't do for us right now.
> And if I'm right this might take continuous optimizing for years to come.
>=20
>=20
>=20
> When I connect to sites like google I immediately receive a large connecti=
on
> level window, to allow me to post huge blobs without a delay. (Haven't
> tested their stream level windows behavior yet)
> In serf I do something similar... and then apply a bit of throttling at th=
e
> stream level.
>=20
>=20
> I would guess some clients have already implemented some of this, so we
> might be able to learn from their implementations... Clients will see much=

> more incoming data than servers of course :).
>=20
>=20
>    Bert=20
>=20
>=20

From dev-return-84804-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov 29 13:49:12 2015
Return-Path: <dev-return-84804-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 87A6D18CB3
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 29 Nov 2015 13:49:12 +0000 (UTC)
Received: (qmail 37973 invoked by uid 500); 29 Nov 2015 13:49:12 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 37905 invoked by uid 500); 29 Nov 2015 13:49:12 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 37895 invoked by uid 99); 29 Nov 2015 13:49:12 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Nov 2015 13:49:12 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 86BA8C05AC
	for <dev@httpd.apache.org>; Sun, 29 Nov 2015 13:49:11 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.121
X-Spam-Level:
X-Spam-Status: No, score=-0.121 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001]
	autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (1024-bit key) header.d=qqmail.nl
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id jr6NkvXNL9y5 for <dev@httpd.apache.org>;
	Sun, 29 Nov 2015 13:49:09 +0000 (UTC)
Received: from mail-wm0-f52.google.com (mail-wm0-f52.google.com [74.125.82.52])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id AF3F221270
	for <dev@httpd.apache.org>; Sun, 29 Nov 2015 13:49:08 +0000 (UTC)
Received: by wmww144 with SMTP id w144so99965383wmw.1
        for <dev@httpd.apache.org>; Sun, 29 Nov 2015 05:49:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=qqmail.nl; s=google;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:thread-index
         :content-language;
        bh=wIMVad6FWrgyNWxovTjoo98SOVFKSaCcPNI6BtIcO7M=;
        b=agtlC4yU4H3ry6S0D8O00g7AnC1UugriSn6qA1olHQYMQt9n8glVMD2NtkZuXaRf/C
         hfsoD7/kgXC2NKwq8H0bD0i6n3BcssLj8IZJBHJ9E/W6fB6FmDhuFOUAhG3G2AtT/XmL
         O+7JlasTv8eZ61xJPnC287kL2Ys/pUqGsYJNY=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :thread-index:content-language;
        bh=wIMVad6FWrgyNWxovTjoo98SOVFKSaCcPNI6BtIcO7M=;
        b=N0a5624G8ZgBQKMJPze0LcTOPkIjGsee8ymdMd9szgEJNy89bvqgSEZIeWQqaYVJ50
         IyIQuV1JuncbFeYjVLGEqecV/iBm79kAIHqDacJaf73K7yTwCcLZoQSYbFb5NPd47orp
         eMmbZ7EmlnhPyCaySM5hH+4vNuRkYr4xqBZDmWsz9+2RXxsC6Z7qXxpVT4FGrxsYTLcm
         xFcYgcAGipuADgRAi8RNxKrhQTVQPWKtoUtnbPF8OSbP92hJysP7RnzAHOZVkPfrrtZk
         cgUE2F6ZbJ2oRL8BZV8ndwWXD8KrQlSdIZOpc4YRfdACEYLab91CpWqjTL4dA9ZlykLz
         EzkQ==
X-Gm-Message-State: ALoCoQnDHqfBUVvkJExF5NxmBzv8XkgOyU4oXilyLWVd7NL16BjEM/rHH1SX/9YU/5KP9zKYhOa3
X-Received: by 10.28.0.149 with SMTP id 143mr22460926wma.103.1448804941908;
        Sun, 29 Nov 2015 05:49:01 -0800 (PST)
Received: from i72600 ([2001:610:66e:0:52e5:49ff:fee1:96b7])
        by smtp.gmail.com with ESMTPSA id h67sm16669898wmf.17.2015.11.29.05.49.01
        for <dev@httpd.apache.org>
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 29 Nov 2015 05:49:01 -0800 (PST)
From: "Bert Huijben" <bert@qqmail.nl>
To: <dev@httpd.apache.org>
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl> <030501d12916$cf7e1120$6e7a3360$@qqmail.nl> <56599792.3060402@greenbytes.de> <03a401d129dd$fafdbfe0$f0f93fa0$@qqmail.nl> <03aa01d129e1$2d49d990$87dd8cb0$@qqmail.nl> <040101d12a23$ced65530$6c82ff90$@qqmail.nl> <40F35186-1FFF-48EF-BB67-DAE432526244@greenbytes.de>
In-Reply-To: <40F35186-1FFF-48EF-BB67-DAE432526244@greenbytes.de>
Subject: RE: No H2 Window updates!
Date: Sun, 29 Nov 2015 14:48:46 +0100
Message-ID: <044701d12aac$acf3b7d0$06db2770$@qqmail.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AQJt5VCTIFs6KteEjCgZz0PozG8d2QIIvd2DAZcYZYkCyYw91gGJZW1zAbrPaIMCr7A/zJ0WoYDg
Content-Language: nl

> -----Original Message-----
> From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
> Sent: zondag 29 november 2015 09:04
> To: dev@httpd.apache.org
> Subject: Re: No H2 Window updates!
> 
> Ok, thanks. I think I have an idea of what's happening:
> - on short request bodies, window updates get omitted and gives a
shrinking
> connection window

Yes, this is the problem I'm seeing. 
I would like to see this fixed for 2.4.18... and I wouldn't be surprised if
this also fixes Jan Erhardts problem.

Web frameworks are likely to issue many small (<16K) posts to a server,
which all fit in a single frame. In my testcase I needed > 500 requests
though.

> - the window size of the connection itself should be at max Value right
from
> the start

That is one solution.  (Google sends one huge window update on the
connection directly at the start, after the settings frame)
But this really needs a proper design behind it...

Optimal windowing is a hard topic. The window needs to be large enough not
to slow down the client... but not too big to hog the server (and by that
the connection), etc. etc.

The problem with a huge connection window up front is that it may be used
for a lot of small requests.... or one large. That large one can easily be
throttled at the stream level, while those small ones can't.
> 
> I won't be able to do anything about it until later this week, though.


With an increased default window on the httpd site the Subversion test now
completes successfully over H2 on 2.4.17 and 2.4.18.
It just reports an XPASS in a specific case where we assume that httpd
handles a request as invalid because one header is to long with the http/1.1
rules.

If this change is expected on the httpd site, the assumption should be fixed
in the Subversion testsuite.

Thanks,

	Bert


From dev-return-84805-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov 29 17:45:20 2015
Return-Path: <dev-return-84805-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 892541822E
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 29 Nov 2015 17:45:20 +0000 (UTC)
Received: (qmail 67230 invoked by uid 500); 29 Nov 2015 17:45:20 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 67157 invoked by uid 500); 29 Nov 2015 17:45:20 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 67147 invoked by uid 99); 29 Nov 2015 17:45:20 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Nov 2015 17:45:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id B0C8FC11C2
	for <dev@httpd.apache.org>; Sun, 29 Nov 2015 17:45:19 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.184
X-Spam-Level: *
X-Spam-Status: No, score=1.184 tagged_above=-999 required=6.31
	tests=[FSL_HELO_BARE_IP_2=0.873, HEADER_FROM_DIFFERENT_DOMAINS=0.001,
	RCVD_NUMERIC_HELO=0.865, RP_MATCHES_RCVD=-0.554, SPF_HELO_PASS=-0.001,
	SPF_PASS=-0.001, URIBL_BLOCKED=0.001] autolearn=disabled
Received: from mx1-eu-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id F0D2LY0VjHZc for <dev@httpd.apache.org>;
	Sun, 29 Nov 2015 17:45:10 +0000 (UTC)
Received: from plane.gmane.org (plane.gmane.org [80.91.229.3])
	by mx1-eu-west.apache.org (ASF Mail Server at mx1-eu-west.apache.org) with ESMTPS id 7BBF420BF1
	for <dev@httpd.apache.org>; Sun, 29 Nov 2015 17:45:09 +0000 (UTC)
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <apache-dev@m.gmane.org>)
	id 1a361v-0006OO-3X
	for dev@httpd.apache.org; Sun, 29 Nov 2015 18:44:55 +0100
Received: from 178.229.165.223 ([178.229.165.223])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Sun, 29 Nov 2015 18:44:55 +0100
Received: from phpdev by 178.229.165.223 with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Sun, 29 Nov 2015 18:44:55 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: dev@httpd.apache.org
From: Jan Ehrhardt <phpdev@ehrhardt.nl>
Subject: Re: No H2 Window updates!
Date: Sun, 29 Nov 2015 18:38:57 +0100
Lines: 14
Message-ID: <npdm5bpk8hrp2eaq462t3fnc9dhlet8fg6@4ax.com>
References: <5659778c.10e0.1b74.5712@land10.nl> <k89j5b1egob7q4vqd6bfua8ugb2sca3t61@4ax.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: 178.229.165.223
X-Newsreader: Forte Agent 3.3/32.846

Jan Ehrhardt in gmane.comp.apache.devel (Sat, 28 Nov 2015 14:09:07 +0100):
>What is worrying me is that I do not have problems with mod_http2 1.0.5,
>but mod_http2 1.0.8 in a default installation causes trouble with Drupal7.
>It would be great if I could test it with mod_http2.so 1.0.8 from a
>Apachelounge build.

Apachelounge now has a new build for 2.4.18:
https://www.apachelounge.com/viewtopic.php?t=6842

This build has the same problems with the admin manu in Drupal7 as my own
build had. The admin menu just does not show up sometimes. Conclusion:
there is a regression between mod_http2 1.0.5 and mod_http2 1.0.8.
-- 
Jan


From dev-return-84806-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Sun Nov 29 18:26:49 2015
Return-Path: <dev-return-84806-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A94A9182DF
	for <apmail-httpd-dev-archive@www.apache.org>; Sun, 29 Nov 2015 18:26:49 +0000 (UTC)
Received: (qmail 22777 invoked by uid 500); 29 Nov 2015 18:26:48 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 22702 invoked by uid 500); 29 Nov 2015 18:26:48 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 22691 invoked by uid 99); 29 Nov 2015 18:26:48 -0000
Received: from Unknown (HELO spamd3-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Nov 2015 18:26:48 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd3-us-west.apache.org (ASF Mail Server at spamd3-us-west.apache.org) with ESMTP id 4D0EA18098E
	for <dev@httpd.apache.org>; Sun, 29 Nov 2015 18:26:48 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd3-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 1.183
X-Spam-Level: *
X-Spam-Status: No, score=1.183 tagged_above=-999 required=6.31
	tests=[FSL_HELO_BARE_IP_2=0.873, HEADER_FROM_DIFFERENT_DOMAINS=0.001,
	RCVD_NUMERIC_HELO=0.865, RP_MATCHES_RCVD=-0.554, SPF_HELO_PASS=-0.001,
	SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd3-us-west.apache.org [10.40.0.10]) (amavisd-new, port 10024)
	with ESMTP id xVv9UmX_Z-u9 for <dev@httpd.apache.org>;
	Sun, 29 Nov 2015 18:26:47 +0000 (UTC)
Received: from plane.gmane.org (plane.gmane.org [80.91.229.3])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 06BA02059E
	for <dev@httpd.apache.org>; Sun, 29 Nov 2015 18:26:46 +0000 (UTC)
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <apache-dev@m.gmane.org>)
	id 1a36gH-0005fL-To
	for dev@httpd.apache.org; Sun, 29 Nov 2015 19:26:38 +0100
Received: from 178.229.165.223 ([178.229.165.223])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Sun, 29 Nov 2015 19:26:37 +0100
Received: from phpdev by 178.229.165.223 with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Sun, 29 Nov 2015 19:26:37 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: dev@httpd.apache.org
From: Jan Ehrhardt <phpdev@ehrhardt.nl>
Subject: Re: No H2 Window updates!
Date: Sun, 29 Nov 2015 19:26:34 +0100
Lines: 31
Message-ID: <0dgm5b9q7dgajn1j3a95vbg0khhr90d94s@4ax.com>
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl> <030501d12916$cf7e1120$6e7a3360$@qqmail.nl> <56599792.3060402@greenbytes.de> <03a401d129dd$fafdbfe0$f0f93fa0$@qqmail.nl> <03aa01d129e1$2d49d990$87dd8cb0$@qqmail.nl> <040101d12a23$ced65530$6c82ff90$@qqmail.nl> <40F35186-1FFF-48EF-BB67-DAE432526244@greenbytes.de> <044701d12aac$acf3b7d0$06db2770$@qqmail.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: 178.229.165.223
X-Newsreader: Forte Agent 3.3/32.846

Bert Huijben in gmane.comp.apache.devel (Sun, 29 Nov 2015 14:48:46 +0100):
>> -----Original Message-----
>> From: Stefan Eissing [mailto:stefan.eissing@greenbytes.de]
>> Sent: zondag 29 november 2015 09:04
>> To: dev@httpd.apache.org
>> Subject: Re: No H2 Window updates!
>> 
>> Ok, thanks. I think I have an idea of what's happening:
>> - on short request bodies, window updates get omitted and gives a shrinking
>> connection window
>
>Yes, this is the problem I'm seeing. 
>I would like to see this fixed for 2.4.18... and I wouldn't be surprised if
>this also fixes Jan Erhardts problem.
>
>Web frameworks are likely to issue many small (<16K) posts to a server,
>which all fit in a single frame. In my testcase I needed > 500 requests
>though.

If we are facing the same problem, there is a chance that your problem
does not occur with mod_http2 1.0.5. To be precise, I did not have
problems with the mod_http2 from revision 1715218 of the 2.4-http2-alpha
branch:

svn co -r 1715218 \
 http://svn.apache.org/repos/asf/httpd/httpd/branches/2.4-http2-alpha 

I do not have time at the moment to dive deeper into the problem with
Drupal 7 and mod_http2 1.0.8, so you are on your own right now.
-- 
Jan


From dev-return-84807-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 30 14:49:52 2015
Return-Path: <dev-return-84807-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 200A618242
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 30 Nov 2015 14:49:52 +0000 (UTC)
Received: (qmail 22599 invoked by uid 500); 30 Nov 2015 14:49:51 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 22478 invoked by uid 500); 30 Nov 2015 14:49:51 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 22459 invoked by uid 99); 30 Nov 2015 14:49:51 -0000
Received: from Unknown (HELO spamd2-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Nov 2015 14:49:51 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd2-us-west.apache.org (ASF Mail Server at spamd2-us-west.apache.org) with ESMTP id 3B4A71A5B3B
	for <dev@httpd.apache.org>; Mon, 30 Nov 2015 12:24:27 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd2-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level:
X-Spam-Status: No, score=0.001 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, URIBL_BLOCKED=0.001]
	autolearn=disabled
Authentication-Results: spamd2-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=comcast.net
Received: from mx1-us-east.apache.org ([10.40.0.8])
	by localhost (spamd2-us-west.apache.org [10.40.0.9]) (amavisd-new, port 10024)
	with ESMTP id 4SbWi4Qm4U2w for <dev@httpd.apache.org>;
	Mon, 30 Nov 2015 12:24:16 +0000 (UTC)
Received: from resqmta-po-06v.sys.comcast.net (resqmta-po-06v.sys.comcast.net [96.114.154.165])
	by mx1-us-east.apache.org (ASF Mail Server at mx1-us-east.apache.org) with ESMTPS id 4AE5542B96
	for <dev@httpd.apache.org>; Mon, 30 Nov 2015 12:24:16 +0000 (UTC)
Received: from resomta-po-20v.sys.comcast.net ([96.114.154.244])
	by resqmta-po-06v.sys.comcast.net with comcast
	id noQ81r0055Geu2801oQ9mp; Mon, 30 Nov 2015 12:24:09 +0000
Received: from [192.168.199.10] ([69.251.84.114])
	by resomta-po-20v.sys.comcast.net with comcast
	id noQ71r00B2U0RYt01oQ7bw; Mon, 30 Nov 2015 12:24:08 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: No H2 Window updates!
From: Jim Jagielski <jim@jaguNET.com>
In-Reply-To: <40F35186-1FFF-48EF-BB67-DAE432526244@greenbytes.de>
Date: Mon, 30 Nov 2015 07:24:07 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <46014DD1-B5DA-4920-B0E2-C43B43EB4816@jaguNET.com>
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl> <030501d12916$cf7e1120$6e7a3360$@qqmail.nl> <56599792.3060402@greenbytes.de> <03a401d129dd$fafdbfe0$f0f93fa0$@qqmail.nl> <03aa01d129e1$2d49d990$87dd8cb0$@qqmail.nl> <040101d12a23$ced65530$6c82ff90$@qqmail.nl> <40F35186-1FFF-48EF-BB67-DAE432526244@greenbytes.de>
To: httpd <dev@httpd.apache.org>,
 Bert Huijben <bert@qqmail.nl>,
 Jan Ehrhardt <phpdev@ehrhardt.nl>
X-Mailer: Apple Mail (2.2104)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=comcast.net;
	s=q20140121; t=1448886249;
	bh=BM3FkGbSNcdtgAb3BWyZRBor+eSiHWRE9/C+CqhdJMg=;
	h=Received:Received:Content-Type:Mime-Version:Subject:From:Date:
	 Message-Id:To;
	b=V3jRChmsgg1Cjkex80eFVWx1OwfmF9wGu7N7CMrokW7vjYxu29jWldjMtF+pkuBFa
	 bEV6/ZofAN3rgWErnNjuAWWaXECwldOP5f/nbx8cw7vWP/Jn+mqqehqdf2yVwcoMjK
	 vPynY31ndmXtI1BOMWDw5AOjf+F3M9pWfitrkB2kgi6+R53FzTDftWmTbLlu9VAoEv
	 xf8E13iQcrGhrY87GCHxeI097vDAk6UG11ECMgCBJky4AQ1jVXxMC6ekFZt86rspjL
	 VEHGJz4xVFeUd4e6zJzUD1akz5ptBCM78zgyWez0l90b5QZruERUAdpeo7NnQflrPY
	 55TXQxInkv/qQ==

I'm assuming that the brokenness also shows up on trunk,
right?

Bert, Jan, can you check if trunk shows the same behavior?
I would prefer not hacking away on 2.4 directly and independently.

tia!!

> On Nov 29, 2015, at 3:03 AM, Stefan Eissing =
<stefan.eissing@greenbytes.de> wrote:
>=20
> Ok, thanks. I think I have an idea of what's happening:
> - on short request bodies, window updates get omitted and gives a =
shrinking connection window
> - the window size of the connection itself should be at max Value =
right from the start
>=20
> I won't be able to do anything about it until later this week, though.=20=

>=20
> //stefan
>=20
> Am 28.11.2015 um 22:29 schrieb Bert Huijben <bert@qqmail.nl>:
>=20
>>> -----Original Message-----
>>> From: Bert Huijben [mailto:bert@qqmail.nl]
>>> Sent: zaterdag 28 november 2015 14:32
>>> To: stefan.eissing@greenbytes.de; dev@httpd.apache.org
>>> Subject: RE: No H2 Window updates!
>>=20
>>=20
>>> In case of Subversion's real usage, I want to commit potentially =
hundreds
>> of
>>> MByte, so a connection level window of more than a few bytes would =
be
>>> very
>>> welcome.... With HTTP/1 we send out the data as fast as we can and =
the TCP
>>> windowing handles this from the httpd side... Now the http/2 level
>>> windowing
>>> should handle this.
>>>=20
>>>=20
>>> Mod_dav and mod_dav_svn are usually fast readers; just limited by =
trivial
>>> disk io or xml processing in the common operations, so I don't =
expect real
>>> problems there.
>>=20
>> For my commits against the svn-master.apache.org repository my =
latency/ping
>> time is +- 142 ms.
>>=20
>> With the current simple algorithm and a maximum window of 64
>> Kbyte/connection, I can send a theoretical maximum of 64 Kbyte/142 ms =
per
>> connection to that server... which would be about 450 Kbyte/s.
>> (=3D1/0.142*65536/1024)
>>=20
>> That is < 1/30th of the bandwidth I have at my disposal (+- 150 =
Mbit).
>>=20
>> But currently I don't even get anywhere near that as my window =
continues to
>> shrink because some data is missed in accounting even after my simple =
patch.
>>=20
>>=20
>>=20
>> For httpd we have to think carefully which algorithm we want to =
implement
>> here. Preferably the algorithm should be better than TCP could, as we =
know
>> the specifics of the http algorithm better than plain TCP could for
>> HTTP/1,1. TCP does send a lot of window updates though... Almost =
every
>> packet does.
>>=20
>>=20
>> Solving the really hard problems, like this one, is the reason I =
didn't
>> think the nghttp2 library would really be the solution for serf.=20
>> It is nice for such a library to provide a head start on the protocol =
level,
>> but there is no way a standard library can really solve this =
scheduling
>> problem in a generic way. (If it could do it, we had used that =
solution for
>> TCP... and never had to resort to designing a HTTP/2 in the first =
place).
>>=20
>> See https://en.wikipedia.org/wiki/TCP_window_scale_option for some
>> introduction on how TCP was extended to work above the limit that =
currently
>> applies to H2.
>>=20
>>=20
>> Dynamic window sizing/scaling will have to be implemented at some =
point, at
>> both the stream and the connection level... This will involve timing,
>> measuring, etc. etc. Things nghttp2 can't do for us right now.
>> And if I'm right this might take continuous optimizing for years to =
come.
>>=20
>>=20
>>=20
>> When I connect to sites like google I immediately receive a large =
connection
>> level window, to allow me to post huge blobs without a delay. =
(Haven't
>> tested their stream level windows behavior yet)
>> In serf I do something similar... and then apply a bit of throttling =
at the
>> stream level.
>>=20
>>=20
>> I would guess some clients have already implemented some of this, so =
we
>> might be able to learn from their implementations... Clients will see =
much
>> more incoming data than servers of course :).
>>=20
>>=20
>>   Bert=20
>>=20
>>=20


From dev-return-84808-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 30 17:20:19 2015
Return-Path: <dev-return-84808-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3FE1518C05
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 30 Nov 2015 17:20:19 +0000 (UTC)
Received: (qmail 6402 invoked by uid 500); 30 Nov 2015 17:20:18 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 6327 invoked by uid 500); 30 Nov 2015 17:20:18 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 6317 invoked by uid 99); 30 Nov 2015 17:20:18 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Nov 2015 17:20:18 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id D0507C0472
	for <dev@httpd.apache.org>; Mon, 30 Nov 2015 17:20:17 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.12
X-Spam-Level:
X-Spam-Status: No, score=-0.12 tagged_above=-999 required=6.31
	tests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,
	RCVD_IN_MSPIKE_H3=-0.01, RCVD_IN_MSPIKE_WL=-0.01, SPF_PASS=-0.001,
	URIBL_BLOCKED=0.001] autolearn=disabled
Authentication-Results: spamd4-us-west.apache.org (amavisd-new);
	dkim=pass (2048-bit key) header.d=gmail.com
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id 4Kki08JowM7l for <dev@httpd.apache.org>;
	Mon, 30 Nov 2015 17:20:08 +0000 (UTC)
Received: from mail-qk0-f174.google.com (mail-qk0-f174.google.com [209.85.220.174])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id BA4A82026C
	for <dev@httpd.apache.org>; Mon, 30 Nov 2015 17:20:07 +0000 (UTC)
Received: by qkao63 with SMTP id o63so61266924qka.2
        for <dev@httpd.apache.org>; Mon, 30 Nov 2015 09:20:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=NbInvbNkaalXZoUvOZi7HnQEUgzqv8ojUXEa05eCncg=;
        b=f3XnHWJQF5yogxjLheu9rvwJTBtUZbki4+ONIxM5QU+hFmX58Jr7uJMBCUNrL3slly
         wcoXonJo9ZOWToL2wyyUBZwwtPgVae2nzW1RgjzU7YGj1NyMQZK29PLvt2fRFjtpzZ8U
         k/7MMx4vWyEObfw9Yjlmia/AtRdAbSTbFKdUVYTI7Myoq0l/EZQft3wK6ExArwF5A7tv
         bE9dnKPY8eZa3eO7bx20HwUKUFW22QzN/2uxiIsV8cAM1DbJQuzWYm9oCpHldeTC5t/Y
         PjlHqCb4wqsm12L6j4eRo0OsawSSrArnrhZAZ4lAB4f+5htcvZsDTSHAU1Wdh8r+c+jI
         IyZw==
MIME-Version: 1.0
X-Received: by 10.55.77.9 with SMTP id a9mr9385995qkb.38.1448904007007; Mon,
 30 Nov 2015 09:20:07 -0800 (PST)
Received: by 10.55.101.84 with HTTP; Mon, 30 Nov 2015 09:20:06 -0800 (PST)
In-Reply-To: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
References: <CACsi253BCKpDOTmShACc3K1KCXeTBb1ugAgaioPXHvDCM+AGiw@mail.gmail.com>
Date: Mon, 30 Nov 2015 18:20:06 +0100
Message-ID: <CAKQ1sVOU7xmY-_PaQb0et0GXO-NxtTPBsD4ZU_UbtUzWYOUVTg@mail.gmail.com>
Subject: Re: apr_token_* conclusions (was: Better casecmpstr[n]?)
From: Yann Ylavic <ylavic.dev@gmail.com>
To: httpd-dev <dev@httpd.apache.org>
Content-Type: multipart/mixed; boundary=001a114a9bc4a736220525c540bd

--001a114a9bc4a736220525c540bd
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Sorry for the late, was afk this times...

Regarding the name, I'm fine with ap[r]_cstr[n]casecmp(),
ap[r]_casecmpcstr[n]() or ap[r]_cstr_*() (if we need a set of
functions in this area)..

I think we all agree that the new function(s) would help protocol
"validation" being agnostic wrt the locale, though httpd (as any *nix
program) runs in the "C" locale by default (hence str[n]casecmp()
behave as expected), and this can't be changed unless some
(third-party-)module plays with setlocale(), as Bill said).

So the new function(s) would address two concerns:
1. doing the right thing at the protocol level if/when modules need
custom locales,
2. have an effecient "C"-string caseless comparison function on all
platforms (see tests results below).

For 1. I agree we should not hurry and take the time to review the
kind of changes I proposed in [1].

For 2. I think we can start using the new function(s) whenever we are
dealing with "C"-strings and this is a fast path (eg. Jean-Frederic's
report about ap_proxy_port_of_scheme(), which should be addressed both
in httpd and APR IMHO).


Regarding performances, attached are the tests (and results) I ran on
different systems (linuxes+glibc+gcc only!, i.e.
Debian6+glibc-2.11+gcc-4.4, Debian8+glibc-2.19+gcc-4.9 and
CentOS7+glibc-2.17+gcc-4.8) for the different implementations that
were discussed so far (including standard strncasecmp,
svn_cstring_casecmp, and Mikhail's mi_strcasecmp).

<tl;dr>

a. Our implementation(s) are faster than str[n]casecmp() for strings
lengths < 4 or 8 (depending on sizeof(long), ie. 32bit vs 64bit
system), which matters not only for such short strings but also when
the compared strings differ in these first bytes (our implementation
fails faster too here),

b. Latests str[n]casecmp() (or/and gcc) are far faster (x3) than any
of our proposal in the "C" (or "UTF-8") locale for longer strings, too
bad there is no strcasecmp[_loc]() taking the locale as argument (=C3=A0 la
stdc++)...
*However*, whenever mappings are in place, eg. the famous
mt_MT.ISO-8859, str[n]casecmp() takes the same time as our
implementation (comparing the same number of caseless-equal
characters),

c. Our best implementation, which is performing well in all cases (ie.
no "pathological" behaviour with some cases) is Jim's "ap_casestrcmp"
(the current one).
Actually the ones performing a bit better are those called
"ap_casestrcmp_1" and "ap_casestrcmp_2" in the test, the former being
the same as Jim's but with "++ps1; ++ps2;" done at the end of the
loop, and the latter being my proposed version using an index instead
of char pointers (no gain compared to "ap_casestrcmp_1", not worth the
change...).
So I'd be for using Jim's with the simple "++ps1; ++ps2;" change.

</tl;dr>


The attached test results are the ones run on CentOS7 (because this is
the system of a real/performant machine I can access, and running the
tests on my Debian laptop make it hot enough to be unfair :)
Since I'm not very used to CentOS, I could not make the
"mt_MT.ISO-8859" locale work/being applied, either because I'm doing
things wrong, or sowehow the locale has been updated to avoid this
mapping (though I was able to make it work with latest debians, where
strcasecmp() performs differently depending on the locale...).

So for completeness, I'm pasting the results on a debian jessie for
locales "mt_MT.ISO-8859" and "C" here, since it matters there:

$ LC_ALL=3Dmt_MT.iso88593 ./ap_casecmpstr-O2 'a' 100000000
'CyCyCyCyCyCyCyCyCyCoOoOoOoOoOaAaAaAaAaAa'
'cYcYcYcYcYcYcYcYcYcOoOoOoOoOoAaAaAaAaAaa' 0
./ap_casecmpstr-O2 'a' 100000000
"CyCyCyCyCyCyCyCyCyCoOoOoOoOoOaAaAaAaAaAa"
"cYcYcYcYcYcYcYcYcYcOoOoOoOoOoAaAaAaAaAaa" 0: locale "mt_MT.iso88593"
- ap_casecmpstr       : time=3D06.160937456, res=3D0
- ap_casecmpstr_1     : time=3D06.256894742, res=3D0
- ap_casecmpstr_2     : time=3D06.136213804, res=3D0
- ap_casecmpstr_4     : time=3D06.787756289, res=3D0
- ap_casecmpstr_3     : time=3D06.110559311, res=3D0
- ap_casecmpstr_7     : time=3D06.844624092, res=3D0
- ap_casecmpstr_5     : time=3D06.820174763, res=3D0
- ap_casecmpstr_6     : time=3D10.488436936, res=3D0
- svn_cstring_casecmp : time=3D07.329213881, res=3D0
- mi_strcasecmp       : time=3D10.165367784, res=3D0
- strcasecmp_ext      : time=3D06.274211596, res=3D0
- strcasecmp          : time=3D06.126361486, res=3D0
- strcmp              : time=3D00.590613344, res=3D-32 !=3D str[n]casecmp()=
's result!

$ LC_ALL=3Dmt_MT.iso88593 ./ap_casecmpstr-O2 'a' 100000000
$'\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\=
xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9=
\xa9\xa9\xa9'
'iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii' 0
./ap_casecmpstr-O2 'a' 100000000 "<...40 unprintable chars here...>"
"iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii" 0: locale "mt_MT.iso88593"
- ap_casecmpstr       : time=3D00.479203198, res=3D64 !=3D str[n]casecmp()'=
s result!
- ap_casecmpstr_1     : time=3D00.526867671, res=3D64 !=3D str[n]casecmp()'=
s result!
- ap_casecmpstr_2     : time=3D00.525341010, res=3D64 !=3D str[n]casecmp()'=
s result!
- ap_casecmpstr_4     : time=3D00.529071848, res=3D64 !=3D str[n]casecmp()'=
s result!
- ap_casecmpstr_3     : time=3D00.528699442, res=3D64 !=3D str[n]casecmp()'=
s result!
- ap_casecmpstr_7     : time=3D00.507921257, res=3D64 !=3D str[n]casecmp()'=
s result!
- ap_casecmpstr_5     : time=3D00.524753726, res=3D64 !=3D str[n]casecmp()'=
s result!
- ap_casecmpstr_6     : time=3D00.524081999, res=3D64 !=3D str[n]casecmp()'=
s result!
- svn_cstring_casecmp : time=3D00.509402346, res=3D64 !=3D str[n]casecmp()'=
s result!
- mi_strcasecmp       : time=3D00.532081427, res=3D96 !=3D str[n]casecmp()'=
s result!
- strcasecmp_ext      : time=3D06.309950716, res=3D0
- strcasecmp          : time=3D06.148251655, res=3D0
- strcmp              : time=3D00.525644420, res=3D64 !=3D str[n]casecmp()'=
s result!

Whereas with "C" locale, I've got:

$ LC_ALL=3DC ./ap_casecmpstr-O2 'a' 100000000
'CyCyCyCyCyCyCyCyCyCoOoOoOoOoOaAaAaAaAaAa'
'cYcYcYcYcYcYcYcYcYcOoOoOoOoOoAaAaAaAaAaa' 0
./ap_casecmpstr-O2 'a' 100000000
"CyCyCyCyCyCyCyCyCyCoOoOoOoOoOaAaAaAaAaAa"
"cYcYcYcYcYcYcYcYcYcOoOoOoOoOoAaAaAaAaAaa" 0: locale "C"
- ap_casecmpstr       : time=3D06.191792200, res=3D0
- ap_casecmpstr_1     : time=3D06.147878566, res=3D0
- ap_casecmpstr_2     : time=3D06.333936899, res=3D0
- ap_casecmpstr_4     : time=3D06.870865790, res=3D0
- ap_casecmpstr_3     : time=3D06.227310131, res=3D0
- ap_casecmpstr_7     : time=3D06.856304522, res=3D0
- ap_casecmpstr_5     : time=3D06.788184432, res=3D0
- ap_casecmpstr_6     : time=3D10.437171106, res=3D0
- svn_cstring_casecmp : time=3D07.325735333, res=3D0
- mi_strcasecmp       : time=3D10.351743646, res=3D0
- strcasecmp_ext      : time=3D01.649636857, res=3D0
- strcasecmp          : time=3D01.443062626, res=3D0
- strcmp              : time=3D00.502131680, res=3D-32 !=3D str[n]casecmp()=
's result!

$ LC_ALL=3DC ./ap_casecmpstr-O2 'a' 100000000
$'\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\=
xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9\xa9=
\xa9\xa9\xa9'
'iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii' 0
./ap_casecmpstr-O2 'a' 100000000 "<...40 unprintable chars here...>"
"iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii" 0: locale "C"
- ap_casecmpstr       : time=3D00.489929313, res=3D64
- ap_casecmpstr_1     : time=3D00.537979168, res=3D64
- ap_casecmpstr_2     : time=3D00.528165151, res=3D64
- ap_casecmpstr_4     : time=3D00.541039123, res=3D64
- ap_casecmpstr_3     : time=3D00.545316485, res=3D64
- ap_casecmpstr_7     : time=3D00.522669572, res=3D64
- ap_casecmpstr_5     : time=3D00.541433772, res=3D64
- ap_casecmpstr_6     : time=3D00.529486005, res=3D64
- svn_cstring_casecmp : time=3D00.518018373, res=3D64
- mi_strcasecmp       : time=3D00.551022179, res=3D96 !=3D str[n]casecmp()'=
s result!
- strcasecmp_ext      : time=3D01.070935658, res=3D64
- strcasecmp          : time=3D00.950721549, res=3D64
- strcmp              : time=3D00.529242598, res=3D64

Regards,
Yann.

[1] http://permalink.gmane.org/gmane.comp.apache.devel/57670

--001a114a9bc4a736220525c540bd
Content-Type: text/plain; charset=windows-1252; name="ap_casecmpstr.output.txt"
Content-Disposition: attachment; filename="ap_casecmpstr.output.txt"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_ihm7x0881

Li9hcF9jYXNlY21wc3RyLU8yICdhJyAxMDAwMDAwMDAgIiIgIiIgMDogbG9jYWxlICJDIgotIGFw
X2Nhc2VjbXBzdHIgICAgICAgOiB0aW1lPTAwLjY0MDM4NDAzOCwgcmVzPTAKLSBhcF9jYXNlY21w
c3RyXzEgICAgIDogdGltZT0wMC41OTMxMzA1MDYsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl8yICAg
ICA6IHRpbWU9MDAuNTk3MTkzNDk4LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNCAgICAgOiB0aW1l
PTAwLjU2NTA0NDQyNiwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0wMC43NTMz
OTcyMzEsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl83ICAgICA6IHRpbWU9MDAuNjAzMTg4MzYyLCBy
ZXM9MAotIGFwX2Nhc2VjbXBzdHJfNSAgICAgOiB0aW1lPTAwLjc2NTg4NzgxMSwgcmVzPTAKLSBh
cF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0wMC42OTA2MjY5ODYsIHJlcz0wCi0gc3ZuX2NzdHJp
bmdfY2FzZWNtcCA6IHRpbWU9MDAuNjc4MTY1NDA4LCByZXM9MAotIG1pX3N0cmNhc2VjbXAgICAg
ICAgOiB0aW1lPTAwLjYxMDYxOTAzOCwgcmVzPTAKLSBzdHJjYXNlY21wX2V4dCAgICAgIDogdGlt
ZT0wMS43NjI3ODkzNjYsIHJlcz0wCi0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEuNzUw
OTQ2MDYzLCByZXM9MAotIHN0cmNtcCAgICAgICAgICAgICAgOiB0aW1lPTAxLjMxODY2MDI3OCwg
cmVzPTAKCi4vYXBfY2FzZWNtcHN0ci1PMiAnYScgMTAwMDAwMDAwICJ5IiAiWSIgMDogbG9jYWxl
ICJDIgotIGFwX2Nhc2VjbXBzdHIgICAgICAgOiB0aW1lPTAwLjc1MzQzNzM2NCwgcmVzPTAKLSBh
cF9jYXNlY21wc3RyXzEgICAgIDogdGltZT0wMC43Mzc2ODk3MTMsIHJlcz0wCi0gYXBfY2FzZWNt
cHN0cl8yICAgICA6IHRpbWU9MDAuNzM1MjcyMjU3LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNCAg
ICAgOiB0aW1lPTAwLjY5NTU4MjQ5MywgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGlt
ZT0wMC45OTgzNjY0NDgsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl83ICAgICA6IHRpbWU9MDAuNzM4
Mzc2Mzg0LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNSAgICAgOiB0aW1lPTAwLjkwNDg0NDEwMSwg
cmVzPTAKLSBhcF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0wMC44NjM4OTI4MjUsIHJlcz0wCi0g
c3ZuX2NzdHJpbmdfY2FzZWNtcCA6IHRpbWU9MDAuNzc1NDI3ODcyLCByZXM9MAotIG1pX3N0cmNh
c2VjbXAgICAgICAgOiB0aW1lPTAwLjkyOTk1NzUyMSwgcmVzPTAKLSBzdHJjYXNlY21wX2V4dCAg
ICAgIDogdGltZT0wMS43NjI1ODkyODYsIHJlcz0wCi0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRp
bWU9MDEuNzU0OTY2MzA1LCByZXM9MAotIHN0cmNtcCAgICAgICAgICAgICAgOiB0aW1lPTAxLjMy
MDY5Nzc0MiwgcmVzPTMyICE9IHN0cltuXWNhc2VjbXAoKSdzIHJlc3VsdCEKCi4vYXBfY2FzZWNt
cHN0ci1PMiAnYScgMTAwMDAwMDAwICJZIiAieVkiIDA6IGxvY2FsZSAiQyIKLSBhcF9jYXNlY21w
c3RyICAgICAgIDogdGltZT0wMC43NTc1NzI1NDEsIHJlcz0tMQotIGFwX2Nhc2VjbXBzdHJfMSAg
ICAgOiB0aW1lPTAwLjc1NDExNjMxMSwgcmVzPS0xCi0gYXBfY2FzZWNtcHN0cl8yICAgICA6IHRp
bWU9MDAuNzM1MTEzNjQ1LCByZXM9LTEKLSBhcF9jYXNlY21wc3RyXzQgICAgIDogdGltZT0wMC44
MDU0MzIyNTEsIHJlcz0tMQotIGFwX2Nhc2VjbXBzdHJfMyAgICAgOiB0aW1lPTAxLjAxMzAxNzg4
NiwgcmVzPS0xCi0gYXBfY2FzZWNtcHN0cl83ICAgICA6IHRpbWU9MDAuNzkwMzE5NjE2LCByZXM9
LTEKLSBhcF9jYXNlY21wc3RyXzUgICAgIDogdGltZT0wMC44MjkzODgwMDgsIHJlcz0tMQotIGFw
X2Nhc2VjbXBzdHJfNiAgICAgOiB0aW1lPTAwLjg2NTg0MTEwNywgcmVzPS0xCi0gc3ZuX2NzdHJp
bmdfY2FzZWNtcCA6IHRpbWU9MDAuNzkxOTk1NzQ2LCByZXM9LTEKLSBtaV9zdHJjYXNlY21wICAg
ICAgIDogdGltZT0wMC44NjcxNDA1ODcsIHJlcz0tMQotIHN0cmNhc2VjbXBfZXh0ICAgICAgOiB0
aW1lPTAxLjc2MjAyOTAwNywgcmVzPS0xCi0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEu
NzUyMjk4MzY4LCByZXM9LTEKLSBzdHJjbXAgICAgICAgICAgICAgIDogdGltZT0wMS4zMjUyMzc0
NzAsIHJlcz0tMzIgIT0gc3RyW25dY2FzZWNtcCgpJ3MgcmVzdWx0IQoKLi9hcF9jYXNlY21wc3Ry
LU8yICdhJyAxMDAwMDAwMDAgInlZIiAiWXlZIiAwOiBsb2NhbGUgIkMiCi0gYXBfY2FzZWNtcHN0
ciAgICAgICA6IHRpbWU9MDAuOTQzMjE5NDE0LCByZXM9LTEKLSBhcF9jYXNlY21wc3RyXzEgICAg
IDogdGltZT0wMC45NDI5MTc1NzMsIHJlcz0tMQotIGFwX2Nhc2VjbXBzdHJfMiAgICAgOiB0aW1l
PTAwLjkyMzg2NzQ4NywgcmVzPS0xCi0gYXBfY2FzZWNtcHN0cl80ICAgICA6IHRpbWU9MDAuOTIw
MjkxNzQ4LCByZXM9LTEKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0wMS4xMzA5NjMwOTks
IHJlcz0tMQotIGFwX2Nhc2VjbXBzdHJfNyAgICAgOiB0aW1lPTAwLjkxODc0NDMxMSwgcmVzPS0x
Ci0gYXBfY2FzZWNtcHN0cl81ICAgICA6IHRpbWU9MDEuMDE4MTcyNDIyLCByZXM9LTEKLSBhcF9j
YXNlY21wc3RyXzYgICAgIDogdGltZT0wMS4xMzgyNzY1MTAsIHJlcz0tMQotIHN2bl9jc3RyaW5n
X2Nhc2VjbXAgOiB0aW1lPTAwLjk3OTM1NDk5MCwgcmVzPS0xCi0gbWlfc3RyY2FzZWNtcCAgICAg
ICA6IHRpbWU9MDEuMDkyMzY4MzQ1LCByZXM9LTEKLSBzdHJjYXNlY21wX2V4dCAgICAgIDogdGlt
ZT0wMS43NjAwMDAwNzIsIHJlcz0tMQotIHN0cmNhc2VjbXAgICAgICAgICAgOiB0aW1lPTAxLjc1
MDAxMDU0MSwgcmVzPS0xCi0gc3RyY21wICAgICAgICAgICAgICA6IHRpbWU9MDEuMzE4MjI4MTQ5
LCByZXM9MzIgIT0gc3RyW25dY2FzZWNtcCgpJ3MgcmVzdWx0IQoKLi9hcF9jYXNlY21wc3RyLU8y
ICdhJyAxMDAwMDAwMDAgIqkiICJpIiAwOiBsb2NhbGUgIkMiCi0gYXBfY2FzZWNtcHN0ciAgICAg
ICA6IHRpbWU9MDAuNDE5NzI5NTA4LCByZXM9NjQKLSBhcF9jYXNlY21wc3RyXzEgICAgIDogdGlt
ZT0wMC40MTc1NTQ0ODYsIHJlcz02NAotIGFwX2Nhc2VjbXBzdHJfMiAgICAgOiB0aW1lPTAwLjQy
MjEzMzMyMiwgcmVzPTY0Ci0gYXBfY2FzZWNtcHN0cl80ICAgICA6IHRpbWU9MDAuNDUxOTE5MjEw
LCByZXM9NjQKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0wMC41MjcyODI2MzAsIHJlcz02
NAotIGFwX2Nhc2VjbXBzdHJfNyAgICAgOiB0aW1lPTAwLjQ1MTkyMDk2MiwgcmVzPTY0Ci0gYXBf
Y2FzZWNtcHN0cl81ICAgICA6IHRpbWU9MDAuNDUxOTgxNTI1LCByZXM9NjQKLSBhcF9jYXNlY21w
c3RyXzYgICAgIDogdGltZT0wMC40OTAyMjI5NTUsIHJlcz02NAotIHN2bl9jc3RyaW5nX2Nhc2Vj
bXAgOiB0aW1lPTAwLjQxNDI3MzU5OSwgcmVzPTY0Ci0gbWlfc3RyY2FzZWNtcCAgICAgICA6IHRp
bWU9MDAuNDg5NTMwMTE0LCByZXM9OTYgIT0gc3RyW25dY2FzZWNtcCgpJ3MgcmVzdWx0IQotIHN0
cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAxLjc2MDA1NDYyMywgcmVzPTY0Ci0gc3RyY2FzZWNt
cCAgICAgICAgICA6IHRpbWU9MDEuNzQ3MjQ2MTYwLCByZXM9NjQKLSBzdHJjbXAgICAgICAgICAg
ICAgIDogdGltZT0wMS4zMTgwNzYyNjUsIHJlcz02NAoKLi9hcF9jYXNlY21wc3RyLU8yICdhJyAx
MDAwMDAwMDAgImN5Y29PYUEiICJjeWNvT2FBIiAwOiBsb2NhbGUgIkMiCi0gYXBfY2FzZWNtcHN0
ciAgICAgICA6IHRpbWU9MDEuNjk0NjMwMzA1LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfMSAgICAg
OiB0aW1lPTAxLjY1OTQwMjE2NCwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzIgICAgIDogdGltZT0w
MS43MTA1MjM2MTMsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl80ICAgICA6IHRpbWU9MDEuNjIzMTAy
NTA0LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfMyAgICAgOiB0aW1lPTAyLjM0NDM0ODUzNiwgcmVz
PTAKLSBhcF9jYXNlY21wc3RyXzcgICAgIDogdGltZT0wMS44NDg0ODI0OTIsIHJlcz0wCi0gYXBf
Y2FzZWNtcHN0cl81ICAgICA6IHRpbWU9MDIuNDUxNDgyNTU4LCByZXM9MAotIGFwX2Nhc2VjbXBz
dHJfNiAgICAgOiB0aW1lPTAyLjE0OTU3OTQ1NCwgcmVzPTAKLSBzdm5fY3N0cmluZ19jYXNlY21w
IDogdGltZT0wMS44OTEwNjczNjAsIHJlcz0wCi0gbWlfc3RyY2FzZWNtcCAgICAgICA6IHRpbWU9
MDIuMzAwNjI2ODE1LCByZXM9MAotIHN0cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAxLjc2Mjc3
NDcyNSwgcmVzPTAKLSBzdHJjYXNlY21wICAgICAgICAgIDogdGltZT0wMS43NTI5MDI2ODcsIHJl
cz0wCi0gc3RyY21wICAgICAgICAgICAgICA6IHRpbWU9MDEuMzIwMDAyODQ1LCByZXM9MAoKLi9h
cF9jYXNlY21wc3RyLU8yICdhJyAxMDAwMDAwMDAgImN5Y3ljb09vT2FBYUEiICJjeWN5Y29Pb09h
QWFBIiAwOiBsb2NhbGUgIkMiCi0gYXBfY2FzZWNtcHN0ciAgICAgICA6IHRpbWU9MDIuNTYzODMw
MjYwLCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfMSAgICAgOiB0aW1lPTAyLjU4NTI1MDYzOSwgcmVz
PTAKLSBhcF9jYXNlY21wc3RyXzIgICAgIDogdGltZT0wMi42Nzc0MjE4MTksIHJlcz0wCi0gYXBf
Y2FzZWNtcHN0cl80ICAgICA6IHRpbWU9MDIuNTM5MzM4NzI4LCByZXM9MAotIGFwX2Nhc2VjbXBz
dHJfMyAgICAgOiB0aW1lPTAzLjY5NjYxNTI5NCwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzcgICAg
IDogdGltZT0wMi43NTMyMTcyOTksIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl81ICAgICA6IHRpbWU9
MDMuODA4ODc2MTY3LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNiAgICAgOiB0aW1lPTAzLjI4MDg0
MTU0MywgcmVzPTAKLSBzdm5fY3N0cmluZ19jYXNlY21wIDogdGltZT0wMy4wNDkxODM2MDgsIHJl
cz0wCi0gbWlfc3RyY2FzZWNtcCAgICAgICA6IHRpbWU9MDMuNjc2MzA2MzkyLCByZXM9MAotIHN0
cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAxLjc2NzU2ODA3NSwgcmVzPTAKLSBzdHJjYXNlY21w
ICAgICAgICAgIDogdGltZT0wMS43NDgyODU3MzEsIHJlcz0wCi0gc3RyY21wICAgICAgICAgICAg
ICA6IHRpbWU9MDEuMzE5NTQ3MTg3LCByZXM9MAoKLi9hcF9jYXNlY21wc3RyLU8yICdhJyAxMDAw
MDAwMDAgIoCBgoOE/P3+/yIgIoCBgoOE/P3+/yIgMDogbG9jYWxlICJDIgotIGFwX2Nhc2VjbXBz
dHIgICAgICAgOiB0aW1lPTAxLjk5NDQ1MTI2OCwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzEgICAg
IDogdGltZT0wMS45NTg2ODM3MjIsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl8yICAgICA6IHRpbWU9
MDEuOTk2NDQzOTIwLCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNCAgICAgOiB0aW1lPTAxLjk2NDE5
NDUwMCwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0wMi43ODc0NjUxOTUsIHJl
cz0wCi0gYXBfY2FzZWNtcHN0cl83ICAgICA6IHRpbWU9MDIuMTY3NDAwMzcxLCByZXM9MAotIGFw
X2Nhc2VjbXBzdHJfNSAgICAgOiB0aW1lPTAyLjkwMzQ5Njk5MywgcmVzPTAKLSBhcF9jYXNlY21w
c3RyXzYgICAgIDogdGltZT0wMi41MjM1Mzg2OTUsIHJlcz0wCi0gc3ZuX2NzdHJpbmdfY2FzZWNt
cCA6IHRpbWU9MDIuMjYwMzMxNzI2LCByZXM9MAotIG1pX3N0cmNhc2VjbXAgICAgICAgOiB0aW1l
PTAyLjc0OTc0MTA1NywgcmVzPTAKLSBzdHJjYXNlY21wX2V4dCAgICAgIDogdGltZT0wMS43NDg3
NjMyODYsIHJlcz0wCi0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEuNzQ0MzAzOTA2LCBy
ZXM9MAotIHN0cmNtcCAgICAgICAgICAgICAgOiB0aW1lPTAxLjMxODM5MTA1OSwgcmVzPTAKCi4v
YXBfY2FzZWNtcHN0ci1PMiAnYScgMTAwMDAwMDAwICJjeWN5Y3ljeWN5Y3ljeWN5Y3ljb09vT29P
b09vT2FBYUFhQWFBYUFhIiAiY3ljeWN5Y3ljeWN5Y3ljeWN5Y29Pb09vT29Pb09hQWFBYUFhQWFB
YSIgMDogbG9jYWxlICJDIgotIGFwX2Nhc2VjbXBzdHIgICAgICAgOiB0aW1lPTA2LjY2OTI1NjU2
MCwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzEgICAgIDogdGltZT0wNi42Mzk3MDczMjIsIHJlcz0w
Ci0gYXBfY2FzZWNtcHN0cl8yICAgICA6IHRpbWU9MDYuNjM2ODg0OTU2LCByZXM9MAotIGFwX2Nh
c2VjbXBzdHJfNCAgICAgOiB0aW1lPTA2LjU5NDY5NDU1NiwgcmVzPTAKLSBhcF9jYXNlY21wc3Ry
XzMgICAgIDogdGltZT0wOS43OTcxNTYzMzcsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl83ICAgICA6
IHRpbWU9MDYuODE5MTcwNDk4LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNSAgICAgOiB0aW1lPTA5
LjkwOTMzMDM4MSwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0wOC4zNzE2ODI0
MDgsIHJlcz0wCi0gc3ZuX2NzdHJpbmdfY2FzZWNtcCA6IHRpbWU9MDguMTU3NzgzMTkzLCByZXM9
MAotIG1pX3N0cmNhc2VjbXAgICAgICAgOiB0aW1lPTA5LjgzMjQzNzgwMSwgcmVzPTAKLSBzdHJj
YXNlY21wX2V4dCAgICAgIDogdGltZT0wMS41ODM5NDkxMTUsIHJlcz0wCi0gc3RyY2FzZWNtcCAg
ICAgICAgICA6IHRpbWU9MDEuNTYwMjI1MzA0LCByZXM9MAotIHN0cmNtcCAgICAgICAgICAgICAg
OiB0aW1lPTAxLjAwMTk2NDM3MCwgcmVzPTAKCi4vYXBfY2FzZWNtcHN0ci1PMiAnYScgMTAwMDAw
MDAwICJDeUN5Q3lDeUN5Q3lDeUN5Q3lDb29vb29vb29vb2FhYWFhYWFhYWFhIiAiQ3lDeUN5Q3lD
eUN5Q3lDeUN5Q29vb29vb29vb29hYWFhYWFhYWFhYSIgMDogbG9jYWxlICJDIgotIGFwX2Nhc2Vj
bXBzdHIgICAgICAgOiB0aW1lPTA2LjY1MDMwNTM3MSwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzEg
ICAgIDogdGltZT0wNi42NTQ1NzY0ODEsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl8yICAgICA6IHRp
bWU9MDYuNjQ5MjgwMTUyLCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNCAgICAgOiB0aW1lPTA2LjYy
NDcyMDg2NCwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0wOS44MTM5MTY2MTQs
IHJlcz0wCi0gYXBfY2FzZWNtcHN0cl83ICAgICA6IHRpbWU9MDYuODIwMjc5ODEzLCByZXM9MAot
IGFwX2Nhc2VjbXBzdHJfNSAgICAgOiB0aW1lPTA5LjkxOTQzMzQzMCwgcmVzPTAKLSBhcF9jYXNl
Y21wc3RyXzYgICAgIDogdGltZT0wOC4zODc3MzcyNTEsIHJlcz0wCi0gc3ZuX2NzdHJpbmdfY2Fz
ZWNtcCA6IHRpbWU9MDguMTA2MDgxNjA3LCByZXM9MAotIG1pX3N0cmNhc2VjbXAgICAgICAgOiB0
aW1lPTA5LjgwNjg4MjY4OCwgcmVzPTAKLSBzdHJjYXNlY21wX2V4dCAgICAgIDogdGltZT0wMS41
ODIyNjY2NTksIHJlcz0wCi0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEuNTU2MTUyOTQ5
LCByZXM9MAotIHN0cmNtcCAgICAgICAgICAgICAgOiB0aW1lPTAwLjk5ODgzNDE2OCwgcmVzPTAK
Ci4vYXBfY2FzZWNtcHN0ci1PMiAnYScgMTAwMDAwMDAwICJDeUN5Q3lDeUN5Q3lDeUN5Q3lDb09v
T29Pb09vT2FBYUFhQWFBYUFhIiAiY1ljWWNZY1ljWWNZY1ljWWNZY09vT29Pb09vT29BYUFhQWFB
YUFhYSIgMDogbG9jYWxlICJDIgotIGFwX2Nhc2VjbXBzdHIgICAgICAgOiB0aW1lPTA2LjY1NTM0
ODQ5OSwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzEgICAgIDogdGltZT0wNi42Mzg2NjE1MTYsIHJl
cz0wCi0gYXBfY2FzZWNtcHN0cl8yICAgICA6IHRpbWU9MDYuNjM3MDM5OTc2LCByZXM9MAotIGFw
X2Nhc2VjbXBzdHJfNCAgICAgOiB0aW1lPTA3LjU2MzAwNjI3MiwgcmVzPTAKLSBhcF9jYXNlY21w
c3RyXzMgICAgIDogdGltZT0xMS44MTgxODA4ODgsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl83ICAg
ICA6IHRpbWU9MDcuNzUwNTYxMjY0LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNSAgICAgOiB0aW1l
PTA3Ljg3MDQ0MTgzMCwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0xMi42Nzc5
NjczMDIsIHJlcz0wCi0gc3ZuX2NzdHJpbmdfY2FzZWNtcCA6IHRpbWU9MDguMTc1NDMzOTIzLCBy
ZXM9MAotIG1pX3N0cmNhc2VjbXAgICAgICAgOiB0aW1lPTEyLjI4Njc5MTAwMSwgcmVzPTAKLSBz
dHJjYXNlY21wX2V4dCAgICAgIDogdGltZT0wMS41ODMzODk3MjcsIHJlcz0wCi0gc3RyY2FzZWNt
cCAgICAgICAgICA6IHRpbWU9MDEuNTU5Mzc1MTQ2LCByZXM9MAotIHN0cmNtcCAgICAgICAgICAg
ICAgOiB0aW1lPTAwLjQ5MTY2NTE3NCwgcmVzPS0zMiAhPSBzdHJbbl1jYXNlY21wKCkncyByZXN1
bHQhCgouL2FwX2Nhc2VjbXBzdHItTzIgJ2EnIDEwMDAwMDAwMCAiQ3lDeUN5Q3lDeUN5Q3lDeUN5
Q29Pb09vT29Pb09hQWFBYUFhQWFBWyIgImNZY1ljWWNZY1ljWWNZY1ljWWNPb09vT29Pb09vQWFB
YUFhQWFBYV0iIDA6IGxvY2FsZSAiQyIKLSBhcF9jYXNlY21wc3RyICAgICAgIDogdGltZT0wNi4z
MzU5ODAwMTksIHJlcz0tMgotIGFwX2Nhc2VjbXBzdHJfMSAgICAgOiB0aW1lPTA2LjMzMTcyNjM0
MiwgcmVzPS0yCi0gYXBfY2FzZWNtcHN0cl8yICAgICA6IHRpbWU9MDYuMzM1OTg5MDIxLCByZXM9
LTIKLSBhcF9jYXNlY21wc3RyXzQgICAgIDogdGltZT0wNi4zMzU0MTQzNTEsIHJlcz0tMgotIGFw
X2Nhc2VjbXBzdHJfMyAgICAgOiB0aW1lPTA3Ljc3NTIyMzQ2MCwgcmVzPS0yCi0gYXBfY2FzZWNt
cHN0cl83ICAgICA6IHRpbWU9MDYuMzM2MjM2MjE5LCByZXM9LTIKLSBhcF9jYXNlY21wc3RyXzUg
ICAgIDogdGltZT0wNi4zNTQyODQ3NDMsIHJlcz0tMgotIGFwX2Nhc2VjbXBzdHJfNiAgICAgOiB0
aW1lPTExLjI0MjA0NTk2NiwgcmVzPS0yCi0gc3ZuX2NzdHJpbmdfY2FzZWNtcCA6IHRpbWU9MDcu
NzQ2Njk1MDY5LCByZXM9LTIKLSBtaV9zdHJjYXNlY21wICAgICAgIDogdGltZT0xMC4xOTY1NzE3
MzQsIHJlcz0tMgotIHN0cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAxLjY4MjY1NTQ2MCwgcmVz
PS0yCi0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEuNjM4MzM5MDk5LCByZXM9LTIKLSBz
dHJjbXAgICAgICAgICAgICAgIDogdGltZT0wMC40OTA4MDA1ODgsIHJlcz0tMzIgIT0gc3RyW25d
Y2FzZWNtcCgpJ3MgcmVzdWx0IQoKLi9hcF9jYXNlY21wc3RyLU8yICdhJyAxMDAwMDAwMDAgIqmp
qampqampqampqampqampqampqampqampqampqampqampqampqakiICJpaWlpaWlpaWlpaWlpaWlp
aWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpIiAwOiBsb2NhbGUgIkMiCi0gYXBfY2FzZWNtcHN0ciAg
ICAgICA6IHRpbWU9MDAuNDE0NDEzNjQxLCByZXM9NjQKLSBhcF9jYXNlY21wc3RyXzEgICAgIDog
dGltZT0wMC40MTQ1MzQ0MDcsIHJlcz02NAotIGFwX2Nhc2VjbXBzdHJfMiAgICAgOiB0aW1lPTAw
LjQxNDMxNzI4MSwgcmVzPTY0Ci0gYXBfY2FzZWNtcHN0cl80ICAgICA6IHRpbWU9MDAuNDUyMDk2
NDUwLCByZXM9NjQKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0wMC41Mjc0NDg5ODEsIHJl
cz02NAotIGFwX2Nhc2VjbXBzdHJfNyAgICAgOiB0aW1lPTAwLjQ1MjAyMDA5MiwgcmVzPTY0Ci0g
YXBfY2FzZWNtcHN0cl81ICAgICA6IHRpbWU9MDAuNDUyMDk5MjI0LCByZXM9NjQKLSBhcF9jYXNl
Y21wc3RyXzYgICAgIDogdGltZT0wMC40ODk3ODMwNDYsIHJlcz02NAotIHN2bl9jc3RyaW5nX2Nh
c2VjbXAgOiB0aW1lPTAwLjQxNDg0NjUyOCwgcmVzPTY0Ci0gbWlfc3RyY2FzZWNtcCAgICAgICA6
IHRpbWU9MDAuNDUyMDM1ODU2LCByZXM9OTYgIT0gc3RyW25dY2FzZWNtcCgpJ3MgcmVzdWx0IQot
IHN0cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAwLjg2MDYwODc5NiwgcmVzPTY0Ci0gc3RyY2Fz
ZWNtcCAgICAgICAgICA6IHRpbWU9MDAuODMxMTUxMTE3LCByZXM9NjQKLSBzdHJjbXAgICAgICAg
ICAgICAgIDogdGltZT0wMC40OTAzOTM0NDcsIHJlcz02NAoKLi9hcF9jYXNlY21wc3RyLU8yICdh
JyAxMDAwMDAwMDAgIqlpqWmpaalpqWmpaalpqWmpaalpqWmpaalpqWmpaalpqWmpaalpqWkiICJp
qWmpaalpqWmpaalpqWmpaalpqWmpaalpqWmpaalpqWmpaalpqWmpIiAwOiBsb2NhbGUgIkMiCi0g
YXBfY2FzZWNtcHN0ciAgICAgICA6IHRpbWU9MDAuNDE0NTc3MzczLCByZXM9NjQKLSBhcF9jYXNl
Y21wc3RyXzEgICAgIDogdGltZT0wMC40MTQ4Njc2MDQsIHJlcz02NAotIGFwX2Nhc2VjbXBzdHJf
MiAgICAgOiB0aW1lPTAwLjQxNTAwNDg3NSwgcmVzPTY0Ci0gYXBfY2FzZWNtcHN0cl80ICAgICA6
IHRpbWU9MDAuNDUyODQ3MzYyLCByZXM9NjQKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0w
MC41MjgzMDk4MTEsIHJlcz02NAotIGFwX2Nhc2VjbXBzdHJfNyAgICAgOiB0aW1lPTAwLjQ1MjMx
NDg1MSwgcmVzPTY0Ci0gYXBfY2FzZWNtcHN0cl81ICAgICA6IHRpbWU9MDAuNDUyNDY5MzE4LCBy
ZXM9NjQKLSBhcF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0wMC40OTAxNTIzOTEsIHJlcz02NAot
IHN2bl9jc3RyaW5nX2Nhc2VjbXAgOiB0aW1lPTAwLjQxNDY4MDg2OCwgcmVzPTY0Ci0gbWlfc3Ry
Y2FzZWNtcCAgICAgICA6IHRpbWU9MDAuNDUyNTg2NTk4LCByZXM9OTYgIT0gc3RyW25dY2FzZWNt
cCgpJ3MgcmVzdWx0IQotIHN0cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAwLjg2MTkyMjY4NSwg
cmVzPTY0Ci0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDAuODMxOTkyMTkwLCByZXM9NjQK
LSBzdHJjbXAgICAgICAgICAgICAgIDogdGltZT0wMC40OTA5MDcyMDIsIHJlcz02NAoKLi9hcF9j
YXNlY21wc3RyLU8yICdhJyAxMDAwMDAwMDAgIiIgIiIgMDogbG9jYWxlICJlbl9VUy51dGY4Igot
IGFwX2Nhc2VjbXBzdHIgICAgICAgOiB0aW1lPTAwLjY0MTE0NTU2NywgcmVzPTAKLSBhcF9jYXNl
Y21wc3RyXzEgICAgIDogdGltZT0wMC42MDk4ODgzNTgsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl8y
ICAgICA6IHRpbWU9MDAuNjAxNTM4ODc5LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNCAgICAgOiB0
aW1lPTAwLjU2NTY5OTQ3NywgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0wMC43
NTQ0OTI2NDYsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl83ICAgICA6IHRpbWU9MDAuNjAzMzI2MTMw
LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNSAgICAgOiB0aW1lPTAwLjc2Njg2OTM4NSwgcmVzPTAK
LSBhcF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0wMC42OTEyNDk3NzEsIHJlcz0wCi0gc3ZuX2Nz
dHJpbmdfY2FzZWNtcCA6IHRpbWU9MDAuNjgwNTMxNTM4LCByZXM9MAotIG1pX3N0cmNhc2VjbXAg
ICAgICAgOiB0aW1lPTAwLjYwMjc5NTQ2NiwgcmVzPTAKLSBzdHJjYXNlY21wX2V4dCAgICAgIDog
dGltZT0wMS43NjQ3NDU5NjYsIHJlcz0wCi0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEu
NzUzNDA3NTEzLCByZXM9MAotIHN0cmNtcCAgICAgICAgICAgICAgOiB0aW1lPTAxLjMyMDA0MTc0
NywgcmVzPTAKCi4vYXBfY2FzZWNtcHN0ci1PMiAnYScgMTAwMDAwMDAwICJ5IiAiWSIgMDogbG9j
YWxlICJlbl9VUy51dGY4IgotIGFwX2Nhc2VjbXBzdHIgICAgICAgOiB0aW1lPTAxLjI4MjIyMTM0
NywgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzEgICAgIDogdGltZT0wMS4yNDQyNDU0MjIsIHJlcz0w
Ci0gYXBfY2FzZWNtcHN0cl8yICAgICA6IHRpbWU9MDAuOTk2MTM5OTUxLCByZXM9MAotIGFwX2Nh
c2VjbXBzdHJfNCAgICAgOiB0aW1lPTAxLjEzMTMwOTM4OCwgcmVzPTAKLSBhcF9jYXNlY21wc3Ry
XzMgICAgIDogdGltZT0wMS4zMjAxNDQ2MjQsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl83ICAgICA6
IHRpbWU9MDAuOTMwMzY3ODYyLCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNSAgICAgOiB0aW1lPTAw
Ljk0MzY4MDY5NiwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0wMS4yMTg3OTM1
MjMsIHJlcz0wCi0gc3ZuX2NzdHJpbmdfY2FzZWNtcCA6IHRpbWU9MDEuMDgzMjQ4NzI5LCByZXM9
MAotIG1pX3N0cmNhc2VjbXAgICAgICAgOiB0aW1lPTAxLjI0NzgyNjE3NCwgcmVzPTAKLSBzdHJj
YXNlY21wX2V4dCAgICAgIDogdGltZT0wMS43OTY2Njg4NTksIHJlcz0wCi0gc3RyY2FzZWNtcCAg
ICAgICAgICA6IHRpbWU9MDEuODg5NDg3OTEwLCByZXM9MAotIHN0cmNtcCAgICAgICAgICAgICAg
OiB0aW1lPTAxLjU0MjY1Njg1MiwgcmVzPTMyICE9IHN0cltuXWNhc2VjbXAoKSdzIHJlc3VsdCEK
Ci4vYXBfY2FzZWNtcHN0ci1PMiAnYScgMTAwMDAwMDAwICJZIiAieVkiIDA6IGxvY2FsZSAiZW5f
VVMudXRmOCIKLSBhcF9jYXNlY21wc3RyICAgICAgIDogdGltZT0wMC43NTcyMDMwOTgsIHJlcz0t
MQotIGFwX2Nhc2VjbXBzdHJfMSAgICAgOiB0aW1lPTAwLjc1NDQxOTczNywgcmVzPS0xCi0gYXBf
Y2FzZWNtcHN0cl8yICAgICA6IHRpbWU9MDAuNzI2NzA2NDM0LCByZXM9LTEKLSBhcF9jYXNlY21w
c3RyXzQgICAgIDogdGltZT0wMC44MTE4OTgxNDAsIHJlcz0tMQotIGFwX2Nhc2VjbXBzdHJfMyAg
ICAgOiB0aW1lPTAxLjAxMjY5MDkxOSwgcmVzPS0xCi0gYXBfY2FzZWNtcHN0cl83ICAgICA6IHRp
bWU9MDAuNzY2NjQ3OTkwLCByZXM9LTEKLSBhcF9jYXNlY21wc3RyXzUgICAgIDogdGltZT0wMC44
Mjk1OTQ1NDUsIHJlcz0tMQotIGFwX2Nhc2VjbXBzdHJfNiAgICAgOiB0aW1lPTAwLjg2NzQ2NTc3
MywgcmVzPS0xCi0gc3ZuX2NzdHJpbmdfY2FzZWNtcCA6IHRpbWU9MDAuNzk4MzcwMjY1LCByZXM9
LTEKLSBtaV9zdHJjYXNlY21wICAgICAgIDogdGltZT0wMC44OTc2NDk5MTAsIHJlcz0tMQotIHN0
cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAxLjc2MTgxNjE2NywgcmVzPS0xCi0gc3RyY2FzZWNt
cCAgICAgICAgICA6IHRpbWU9MDEuNzUzNTMyMjkzLCByZXM9LTEKLSBzdHJjbXAgICAgICAgICAg
ICAgIDogdGltZT0wMS4zMTk1NjEwMDAsIHJlcz0tMzIgIT0gc3RyW25dY2FzZWNtcCgpJ3MgcmVz
dWx0IQoKLi9hcF9jYXNlY21wc3RyLU8yICdhJyAxMDAwMDAwMDAgInlZIiAiWXlZIiAwOiBsb2Nh
bGUgImVuX1VTLnV0ZjgiCi0gYXBfY2FzZWNtcHN0ciAgICAgICA6IHRpbWU9MDAuOTUzMDk1NTcy
LCByZXM9LTEKLSBhcF9jYXNlY21wc3RyXzEgICAgIDogdGltZT0wMC45NDMyMDYwMTcsIHJlcz0t
MQotIGFwX2Nhc2VjbXBzdHJfMiAgICAgOiB0aW1lPTAwLjkyMzk2MjA3MSwgcmVzPS0xCi0gYXBf
Y2FzZWNtcHN0cl80ICAgICA6IHRpbWU9MDAuOTI4NjM0NDMzLCByZXM9LTEKLSBhcF9jYXNlY21w
c3RyXzMgICAgIDogdGltZT0wMS4xMzQwNTY3MTksIHJlcz0tMQotIGFwX2Nhc2VjbXBzdHJfNyAg
ICAgOiB0aW1lPTAwLjkwNzQ5MjI4NiwgcmVzPS0xCi0gYXBfY2FzZWNtcHN0cl81ICAgICA6IHRp
bWU9MDAuOTgwNTI4Njc3LCByZXM9LTEKLSBhcF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0wMS4x
MzkwMzIyNDUsIHJlcz0tMQotIHN2bl9jc3RyaW5nX2Nhc2VjbXAgOiB0aW1lPTAwLjk4MDgwMDIz
NCwgcmVzPS0xCi0gbWlfc3RyY2FzZWNtcCAgICAgICA6IHRpbWU9MDEuMDk0MDAwMzMyLCByZXM9
LTEKLSBzdHJjYXNlY21wX2V4dCAgICAgIDogdGltZT0wMS43NjIwMDgxNjcsIHJlcz0tMQotIHN0
cmNhc2VjbXAgICAgICAgICAgOiB0aW1lPTAxLjc1MzU0MzU2MSwgcmVzPS0xCi0gc3RyY21wICAg
ICAgICAgICAgICA6IHRpbWU9MDEuMzE5ODM0OTY1LCByZXM9MzIgIT0gc3RyW25dY2FzZWNtcCgp
J3MgcmVzdWx0IQoKLi9hcF9jYXNlY21wc3RyLU8yICdhJyAxMDAwMDAwMDAgIqkiICJpIiAwOiBs
b2NhbGUgImVuX1VTLnV0ZjgiCi0gYXBfY2FzZWNtcHN0ciAgICAgICA6IHRpbWU9MDAuNDI2ODQw
NjY5LCByZXM9NjQKLSBhcF9jYXNlY21wc3RyXzEgICAgIDogdGltZT0wMC40Mjc5MzUwNTcsIHJl
cz02NAotIGFwX2Nhc2VjbXBzdHJfMiAgICAgOiB0aW1lPTAwLjQyNDMwMjkxMiwgcmVzPTY0Ci0g
YXBfY2FzZWNtcHN0cl80ICAgICA6IHRpbWU9MDAuNDUyNTMyOTI1LCByZXM9NjQKLSBhcF9jYXNl
Y21wc3RyXzMgICAgIDogdGltZT0wMC41MzE5OTUyOTMsIHJlcz02NAotIGFwX2Nhc2VjbXBzdHJf
NyAgICAgOiB0aW1lPTAwLjQ1Mjk1ODMxMywgcmVzPTY0Ci0gYXBfY2FzZWNtcHN0cl81ICAgICA6
IHRpbWU9MDAuNDUyNjE1ODYyLCByZXM9NjQKLSBhcF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0w
MC40OTA3MTI5MjYsIHJlcz02NAotIHN2bl9jc3RyaW5nX2Nhc2VjbXAgOiB0aW1lPTAwLjQxNTA0
ODEzNCwgcmVzPTY0Ci0gbWlfc3RyY2FzZWNtcCAgICAgICA6IHRpbWU9MDAuNDkyMzA3OTk2LCBy
ZXM9OTYgIT0gc3RyW25dY2FzZWNtcCgpJ3MgcmVzdWx0IQotIHN0cmNhc2VjbXBfZXh0ICAgICAg
OiB0aW1lPTAxLjc2MjM4MTg0OCwgcmVzPTY0Ci0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9
MDEuNzUyNjI5NzA0LCByZXM9NjQKLSBzdHJjbXAgICAgICAgICAgICAgIDogdGltZT0wMS4zMTkx
MTk0MTgsIHJlcz02NAoKLi9hcF9jYXNlY21wc3RyLU8yICdhJyAxMDAwMDAwMDAgImN5Y29PYUEi
ICJjeWNvT2FBIiAwOiBsb2NhbGUgImVuX1VTLnV0ZjgiCi0gYXBfY2FzZWNtcHN0ciAgICAgICA6
IHRpbWU9MDEuNjU3OTEzNzc3LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfMSAgICAgOiB0aW1lPTAx
LjY1ODI2NDgyMCwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzIgICAgIDogdGltZT0wMS43MjIwODE0
NzgsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl80ICAgICA6IHRpbWU9MDEuNjIxNTg3NTQ2LCByZXM9
MAotIGFwX2Nhc2VjbXBzdHJfMyAgICAgOiB0aW1lPTAyLjMzNjExNjg0MCwgcmVzPTAKLSBhcF9j
YXNlY21wc3RyXzcgICAgIDogdGltZT0wMS44NDY2NzMyOTQsIHJlcz0wCi0gYXBfY2FzZWNtcHN0
cl81ICAgICA6IHRpbWU9MDIuNDQ5MzY4OTkxLCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNiAgICAg
OiB0aW1lPTAyLjE0ODQzMDY3MywgcmVzPTAKLSBzdm5fY3N0cmluZ19jYXNlY21wIDogdGltZT0w
MS44ODkyODMzNTAsIHJlcz0wCi0gbWlfc3RyY2FzZWNtcCAgICAgICA6IHRpbWU9MDIuMzAwMzc5
MzM5LCByZXM9MAotIHN0cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAxLjc2Mjc0NjYyNCwgcmVz
PTAKLSBzdHJjYXNlY21wICAgICAgICAgIDogdGltZT0wMS43NTQyODIxMzMsIHJlcz0wCi0gc3Ry
Y21wICAgICAgICAgICAgICA6IHRpbWU9MDEuMzIwNDA4MTA5LCByZXM9MAoKLi9hcF9jYXNlY21w
c3RyLU8yICdhJyAxMDAwMDAwMDAgImN5Y3ljb09vT2FBYUEiICJjeWN5Y29Pb09hQWFBIiAwOiBs
b2NhbGUgImVuX1VTLnV0ZjgiCi0gYXBfY2FzZWNtcHN0ciAgICAgICA6IHRpbWU9MDIuNTY0NDA2
NTc1LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfMSAgICAgOiB0aW1lPTAyLjU4NTc3OTk5MywgcmVz
PTAKLSBhcF9jYXNlY21wc3RyXzIgICAgIDogdGltZT0wMi42MDE1NTQ4ODMsIHJlcz0wCi0gYXBf
Y2FzZWNtcHN0cl80ICAgICA6IHRpbWU9MDIuNTI2MzMyODI2LCByZXM9MAotIGFwX2Nhc2VjbXBz
dHJfMyAgICAgOiB0aW1lPTAzLjY5MzYyMDQ0NywgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzcgICAg
IDogdGltZT0wMi43NTA3Mjc4OTgsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl81ICAgICA6IHRpbWU9
MDMuODE1NzU5Mzg1LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNiAgICAgOiB0aW1lPTAzLjI3ODQx
MDA4OSwgcmVzPTAKLSBzdm5fY3N0cmluZ19jYXNlY21wIDogdGltZT0wMy4wMTQzMzE0NjksIHJl
cz0wCi0gbWlfc3RyY2FzZWNtcCAgICAgICA6IHRpbWU9MDMuNjgyOTYwNTg4LCByZXM9MAotIHN0
cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAxLjc2MTg5Njg4NiwgcmVzPTAKLSBzdHJjYXNlY21w
ICAgICAgICAgIDogdGltZT0wMS43NTEwOTMyNzAsIHJlcz0wCi0gc3RyY21wICAgICAgICAgICAg
ICA6IHRpbWU9MDEuMzE4NjQwOTA5LCByZXM9MAoKLi9hcF9jYXNlY21wc3RyLU8yICdhJyAxMDAw
MDAwMDAgIoCBgoOE/P3+/yIgIoCBgoOE/P3+/yIgMDogbG9jYWxlICJlbl9VUy51dGY4IgotIGFw
X2Nhc2VjbXBzdHIgICAgICAgOiB0aW1lPTAxLjk2MDA1MDA4MiwgcmVzPTAKLSBhcF9jYXNlY21w
c3RyXzEgICAgIDogdGltZT0wMS45NTk1NDE0NTMsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl8yICAg
ICA6IHRpbWU9MDEuOTk3MjUzOTY5LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNCAgICAgOiB0aW1l
PTAxLjk3NTIzNjE4OCwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0wMi43ODgz
Njk5NjgsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl83ICAgICA6IHRpbWU9MDIuMTc2NDEwNDg4LCBy
ZXM9MAotIGFwX2Nhc2VjbXBzdHJfNSAgICAgOiB0aW1lPTAyLjkyNTE3MDQ4OSwgcmVzPTAKLSBh
cF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0wMi41Mjc1NzgxMzgsIHJlcz0wCi0gc3ZuX2NzdHJp
bmdfY2FzZWNtcCA6IHRpbWU9MDIuMjgzOTY0MzMyLCByZXM9MAotIG1pX3N0cmNhc2VjbXAgICAg
ICAgOiB0aW1lPTAyLjc1MjM4NTI1MCwgcmVzPTAKLSBzdHJjYXNlY21wX2V4dCAgICAgIDogdGlt
ZT0wMS43NjcxOTEwNjEsIHJlcz0wCi0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEuNzU0
Mzk4NzY2LCByZXM9MAotIHN0cmNtcCAgICAgICAgICAgICAgOiB0aW1lPTAxLjMxOTczODYxNywg
cmVzPTAKCi4vYXBfY2FzZWNtcHN0ci1PMiAnYScgMTAwMDAwMDAwICJjeWN5Y3ljeWN5Y3ljeWN5
Y3ljb09vT29Pb09vT2FBYUFhQWFBYUFhIiAiY3ljeWN5Y3ljeWN5Y3ljeWN5Y29Pb09vT29Pb09h
QWFBYUFhQWFBYSIgMDogbG9jYWxlICJlbl9VUy51dGY4IgotIGFwX2Nhc2VjbXBzdHIgICAgICAg
OiB0aW1lPTA2LjYzNTkxNTE3MSwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzEgICAgIDogdGltZT0w
Ni42Nzg3ODA4NjUsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl8yICAgICA6IHRpbWU9MDYuNjM2MzIx
ODcwLCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNCAgICAgOiB0aW1lPTA2LjU5NDk4MTM1NSwgcmVz
PTAKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0wOS44MjA1Nzc3NTgsIHJlcz0wCi0gYXBf
Y2FzZWNtcHN0cl83ICAgICA6IHRpbWU9MDYuODMyMjI2NDU4LCByZXM9MAotIGFwX2Nhc2VjbXBz
dHJfNSAgICAgOiB0aW1lPTA5LjkyODU1MTY3MiwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzYgICAg
IDogdGltZT0wOC4zODg1MjMxMTMsIHJlcz0wCi0gc3ZuX2NzdHJpbmdfY2FzZWNtcCA6IHRpbWU9
MDguMTAwOTg5MzM3LCByZXM9MAotIG1pX3N0cmNhc2VjbXAgICAgICAgOiB0aW1lPTA5LjgyNDUy
OTg4MSwgcmVzPTAKLSBzdHJjYXNlY21wX2V4dCAgICAgIDogdGltZT0wMi4xMTAwNzAyOTksIHJl
cz0wCi0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEuODA4NDA0MDI2LCByZXM9MAotIHN0
cmNtcCAgICAgICAgICAgICAgOiB0aW1lPTAxLjExMTM3MzU1NCwgcmVzPTAKCi4vYXBfY2FzZWNt
cHN0ci1PMiAnYScgMTAwMDAwMDAwICJDeUN5Q3lDeUN5Q3lDeUN5Q3lDb29vb29vb29vb2FhYWFh
YWFhYWFhIiAiQ3lDeUN5Q3lDeUN5Q3lDeUN5Q29vb29vb29vb29hYWFhYWFhYWFhYSIgMDogbG9j
YWxlICJlbl9VUy51dGY4IgotIGFwX2Nhc2VjbXBzdHIgICAgICAgOiB0aW1lPTA2LjY1MTIwNTcx
MywgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzEgICAgIDogdGltZT0wNi42MjkxMDg5NjAsIHJlcz0w
Ci0gYXBfY2FzZWNtcHN0cl8yICAgICA6IHRpbWU9MDYuNjI5NzgzOTgyLCByZXM9MAotIGFwX2Nh
c2VjbXBzdHJfNCAgICAgOiB0aW1lPTA2LjU5MTc0NTUzOCwgcmVzPTAKLSBhcF9jYXNlY21wc3Ry
XzMgICAgIDogdGltZT0wOS43OTMyOTY3NDEsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl83ICAgICA6
IHRpbWU9MDYuODE3MjI4OTkzLCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNSAgICAgOiB0aW1lPTA5
LjQ5NDc5ODgxNSwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0wOC4zNjEyNjgw
NzcsIHJlcz0wCi0gc3ZuX2NzdHJpbmdfY2FzZWNtcCA6IHRpbWU9MDguMDk4NTM3NDY1LCByZXM9
MAotIG1pX3N0cmNhc2VjbXAgICAgICAgOiB0aW1lPTA5Ljc5MTU0MjQxNywgcmVzPTAKLSBzdHJj
YXNlY21wX2V4dCAgICAgIDogdGltZT0wMS41OTc4NzIwNzEsIHJlcz0wCi0gc3RyY2FzZWNtcCAg
ICAgICAgICA6IHRpbWU9MDEuNTU1MTc1MDM2LCByZXM9MAotIHN0cmNtcCAgICAgICAgICAgICAg
OiB0aW1lPTAxLjExMTIzNzY0NCwgcmVzPTAKCi4vYXBfY2FzZWNtcHN0ci1PMiAnYScgMTAwMDAw
MDAwICJDeUN5Q3lDeUN5Q3lDeUN5Q3lDb09vT29Pb09vT2FBYUFhQWFBYUFhIiAiY1ljWWNZY1lj
WWNZY1ljWWNZY09vT29Pb09vT29BYUFhQWFBYUFhYSIgMDogbG9jYWxlICJlbl9VUy51dGY4Igot
IGFwX2Nhc2VjbXBzdHIgICAgICAgOiB0aW1lPTA2LjY0OTQ0ODUzMCwgcmVzPTAKLSBhcF9jYXNl
Y21wc3RyXzEgICAgIDogdGltZT0wNi42MjkyMzI2ODUsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl8y
ICAgICA6IHRpbWU9MDYuNjI5MTAzNTYwLCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNCAgICAgOiB0
aW1lPTA3LjU1NjYxMzYwMiwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0xMS43
MTM5OTI2NjksIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl83ICAgICA6IHRpbWU9MDcuNzQwNjQwMzE1
LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNSAgICAgOiB0aW1lPTA3LjgzMzgzODc1MiwgcmVzPTAK
LSBhcF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0xMi42NTUyNTQ0MDUsIHJlcz0wCi0gc3ZuX2Nz
dHJpbmdfY2FzZWNtcCA6IHRpbWU9MDguMDk4MzUyMDMyLCByZXM9MAotIG1pX3N0cmNhc2VjbXAg
ICAgICAgOiB0aW1lPTEyLjI0MDIwMzYwMiwgcmVzPTAKLSBzdHJjYXNlY21wX2V4dCAgICAgIDog
dGltZT0wMS41OTg1MTg5ODAsIHJlcz0wCi0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEu
NTU3NjA5OTM5LCByZXM9MAotIHN0cmNtcCAgICAgICAgICAgICAgOiB0aW1lPTAwLjg4NzA2MzIx
NCwgcmVzPS0zMiAhPSBzdHJbbl1jYXNlY21wKCkncyByZXN1bHQhCgouL2FwX2Nhc2VjbXBzdHIt
TzIgJ2EnIDEwMDAwMDAwMCAiQ3lDeUN5Q3lDeUN5Q3lDeUN5Q29Pb09vT29Pb09hQWFBYUFhQWFB
WyIgImNZY1ljWWNZY1ljWWNZY1ljWWNPb09vT29Pb09vQWFBYUFhQWFBYV0iIDA6IGxvY2FsZSAi
ZW5fVVMudXRmOCIKLSBhcF9jYXNlY21wc3RyICAgICAgIDogdGltZT0wNi4zMjc1Mzg5ODEsIHJl
cz0tMgotIGFwX2Nhc2VjbXBzdHJfMSAgICAgOiB0aW1lPTA2LjMyODY2NTc3OSwgcmVzPS0yCi0g
YXBfY2FzZWNtcHN0cl8yICAgICA6IHRpbWU9MDYuMzI3OTQ5ODgwLCByZXM9LTIKLSBhcF9jYXNl
Y21wc3RyXzQgICAgIDogdGltZT0wNi4zMjczNjgyMDQsIHJlcz0tMgotIGFwX2Nhc2VjbXBzdHJf
MyAgICAgOiB0aW1lPTA3Ljc1OTYwMjk0OSwgcmVzPS0yCi0gYXBfY2FzZWNtcHN0cl83ICAgICA6
IHRpbWU9MDYuMzI3OTk4Nzk3LCByZXM9LTIKLSBhcF9jYXNlY21wc3RyXzUgICAgIDogdGltZT0w
Ni4zMjc1MTkxNjgsIHJlcz0tMgotIGFwX2Nhc2VjbXBzdHJfNiAgICAgOiB0aW1lPTExLjE3ODg5
NDE4NiwgcmVzPS0yCi0gc3ZuX2NzdHJpbmdfY2FzZWNtcCA6IHRpbWU9MDcuNzIwOTMzMzYzLCBy
ZXM9LTIKLSBtaV9zdHJjYXNlY21wICAgICAgIDogdGltZT0xMC4yMjI4OTI0NDUsIHJlcz0tMgot
IHN0cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAxLjkwMDQ4NjM0MSwgcmVzPS0yCi0gc3RyY2Fz
ZWNtcCAgICAgICAgICA6IHRpbWU9MDEuNjM2NTQzMDQwLCByZXM9LTIKLSBzdHJjbXAgICAgICAg
ICAgICAgIDogdGltZT0wMS4wMTcwOTQ3MjMsIHJlcz0tMzIgIT0gc3RyW25dY2FzZWNtcCgpJ3Mg
cmVzdWx0IQoKLi9hcF9jYXNlY21wc3RyLU8yICdhJyAxMDAwMDAwMDAgIqmpqampqampqampqamp
qampqampqampqampqampqampqampqampqakiICJpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlp
aWlpaWlpaWlpaWlpIiAwOiBsb2NhbGUgImVuX1VTLnV0ZjgiCi0gYXBfY2FzZWNtcHN0ciAgICAg
ICA6IHRpbWU9MDAuNDE0MzkwODczLCByZXM9NjQKLSBhcF9jYXNlY21wc3RyXzEgICAgIDogdGlt
ZT0wMC40MTQyNTgzMDgsIHJlcz02NAotIGFwX2Nhc2VjbXBzdHJfMiAgICAgOiB0aW1lPTAwLjQx
NDQyNzAxNywgcmVzPTY0Ci0gYXBfY2FzZWNtcHN0cl80ICAgICA6IHRpbWU9MDAuNDUyMTAxNTk4
LCByZXM9NjQKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0wMC41MjcyOTY2MTQsIHJlcz02
NAotIGFwX2Nhc2VjbXBzdHJfNyAgICAgOiB0aW1lPTAwLjQ1MjA1ODExMiwgcmVzPTY0Ci0gYXBf
Y2FzZWNtcHN0cl81ICAgICA6IHRpbWU9MDAuNDUxODg5NzIyLCByZXM9NjQKLSBhcF9jYXNlY21w
c3RyXzYgICAgIDogdGltZT0wMC40ODk1ODY3MjUsIHJlcz02NAotIHN2bl9jc3RyaW5nX2Nhc2Vj
bXAgOiB0aW1lPTAwLjQxNDQ0NjAzMiwgcmVzPTY0Ci0gbWlfc3RyY2FzZWNtcCAgICAgICA6IHRp
bWU9MDAuNDUxOTA3MjQzLCByZXM9OTYgIT0gc3RyW25dY2FzZWNtcCgpJ3MgcmVzdWx0IQotIHN0
cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAwLjg3MDQ3MDMyOCwgcmVzPTY0Ci0gc3RyY2FzZWNt
cCAgICAgICAgICA6IHRpbWU9MDAuODMwMzkzOTYwLCByZXM9NjQKLSBzdHJjbXAgICAgICAgICAg
ICAgIDogdGltZT0wMC44OTAxODEyNTUsIHJlcz02NAoKLi9hcF9jYXNlY21wc3RyLU8yICdhJyAx
MDAwMDAwMDAgIqlpqWmpaalpqWmpaalpqWmpaalpqWmpaalpqWmpaalpqWmpaalpqWkiICJpqWmp
aalpqWmpaalpqWmpaalpqWmpaalpqWmpaalpqWmpaalpqWmpIiAwOiBsb2NhbGUgImVuX1VTLnV0
ZjgiCi0gYXBfY2FzZWNtcHN0ciAgICAgICA6IHRpbWU9MDAuNDE0MzE3NTQ4LCByZXM9NjQKLSBh
cF9jYXNlY21wc3RyXzEgICAgIDogdGltZT0wMC40MTQyODk3MjAsIHJlcz02NAotIGFwX2Nhc2Vj
bXBzdHJfMiAgICAgOiB0aW1lPTAwLjQxNDMwODI1MywgcmVzPTY0Ci0gYXBfY2FzZWNtcHN0cl80
ICAgICA6IHRpbWU9MDAuNDUxODk2Njc2LCByZXM9NjQKLSBhcF9jYXNlY21wc3RyXzMgICAgIDog
dGltZT0wMC41MjcyODk1MTksIHJlcz02NAotIGFwX2Nhc2VjbXBzdHJfNyAgICAgOiB0aW1lPTAw
LjQ1MjE1NDI3OSwgcmVzPTY0Ci0gYXBfY2FzZWNtcHN0cl81ICAgICA6IHRpbWU9MDAuNDUyMDY3
MTEzLCByZXM9NjQKLSBhcF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0wMC40ODk2MzU3NDcsIHJl
cz02NAotIHN2bl9jc3RyaW5nX2Nhc2VjbXAgOiB0aW1lPTAwLjQxNDI3OTQzNiwgcmVzPTY0Ci0g
bWlfc3RyY2FzZWNtcCAgICAgICA6IHRpbWU9MDAuNDUyMDEwMzUwLCByZXM9OTYgIT0gc3RyW25d
Y2FzZWNtcCgpJ3MgcmVzdWx0IQotIHN0cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAwLjg2ODMz
ODA5OCwgcmVzPTY0Ci0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDAuODMwMzkyNzc5LCBy
ZXM9NjQKLSBzdHJjbXAgICAgICAgICAgICAgIDogdGltZT0wMC44ODc4MDAzNTksIHJlcz02NAoK
Li9hcF9jYXNlY21wc3RyLU8yICdhJyAxMDAwMDAwMDAgIiIgIiIgMDogbG9jYWxlICJtdF9NVC5J
U08tODg1OS0zIgotIGFwX2Nhc2VjbXBzdHIgICAgICAgOiB0aW1lPTAwLjY0MDM3MTA0MywgcmVz
PTAKLSBhcF9jYXNlY21wc3RyXzEgICAgIDogdGltZT0wMC41OTQ3MTc3MjQsIHJlcz0wCi0gYXBf
Y2FzZWNtcHN0cl8yICAgICA6IHRpbWU9MDAuNTg0NTk5NDY0LCByZXM9MAotIGFwX2Nhc2VjbXBz
dHJfNCAgICAgOiB0aW1lPTAwLjU2NDkxNTQ5MywgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzMgICAg
IDogdGltZT0wMC43NTMxNDQyNDYsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl83ICAgICA6IHRpbWU9
MDAuNjAyNTUxMzkwLCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNSAgICAgOiB0aW1lPTAwLjc2NjA2
MDM3NywgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0wMC42OTA1NTYyNzMsIHJl
cz0wCi0gc3ZuX2NzdHJpbmdfY2FzZWNtcCA6IHRpbWU9MDAuNjc3OTM0ODIzLCByZXM9MAotIG1p
X3N0cmNhc2VjbXAgICAgICAgOiB0aW1lPTAwLjYwMjEyMjkzNywgcmVzPTAKLSBzdHJjYXNlY21w
X2V4dCAgICAgIDogdGltZT0wMS43NjAxNzU5MDgsIHJlcz0wCi0gc3RyY2FzZWNtcCAgICAgICAg
ICA6IHRpbWU9MDEuNzUyNzUyNDg4LCByZXM9MAotIHN0cmNtcCAgICAgICAgICAgICAgOiB0aW1l
PTAxLjMxODE5NTc4MSwgcmVzPTAKCi4vYXBfY2FzZWNtcHN0ci1PMiAnYScgMTAwMDAwMDAwICJ5
IiAiWSIgMDogbG9jYWxlICJtdF9NVC5JU08tODg1OS0zIgotIGFwX2Nhc2VjbXBzdHIgICAgICAg
OiB0aW1lPTAwLjc5MjUwODY1MSwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzEgICAgIDogdGltZT0w
MC43NDY0MTcwMTQsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl8yICAgICA6IHRpbWU9MDAuNzM1ODk0
MjQxLCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNCAgICAgOiB0aW1lPTAwLjcxNjM2MTIwMywgcmVz
PTAKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0wMC45OTE4MjcxMDAsIHJlcz0wCi0gYXBf
Y2FzZWNtcHN0cl83ICAgICA6IHRpbWU9MDAuNzgwMjM4NTgzLCByZXM9MAotIGFwX2Nhc2VjbXBz
dHJfNSAgICAgOiB0aW1lPTAwLjkwNTE0NDc4NCwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzYgICAg
IDogdGltZT0wMC44NjM3MTUzNDksIHJlcz0wCi0gc3ZuX2NzdHJpbmdfY2FzZWNtcCA6IHRpbWU9
MDAuNzcyNjU3MDU4LCByZXM9MAotIG1pX3N0cmNhc2VjbXAgICAgICAgOiB0aW1lPTAwLjkyODEw
NjM3MiwgcmVzPTAKLSBzdHJjYXNlY21wX2V4dCAgICAgIDogdGltZT0wMS43NjEwNTAzNDAsIHJl
cz0wCi0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEuNzU1NTQyNzc2LCByZXM9MAotIHN0
cmNtcCAgICAgICAgICAgICAgOiB0aW1lPTAxLjMxODQyNzkyNSwgcmVzPTMyICE9IHN0cltuXWNh
c2VjbXAoKSdzIHJlc3VsdCEKCi4vYXBfY2FzZWNtcHN0ci1PMiAnYScgMTAwMDAwMDAwICJZIiAi
eVkiIDA6IGxvY2FsZSAibXRfTVQuSVNPLTg4NTktMyIKLSBhcF9jYXNlY21wc3RyICAgICAgIDog
dGltZT0wMC43NTY0NjE2ODAsIHJlcz0tMQotIGFwX2Nhc2VjbXBzdHJfMSAgICAgOiB0aW1lPTAw
Ljc1MzgzMzY2NSwgcmVzPS0xCi0gYXBfY2FzZWNtcHN0cl8yICAgICA6IHRpbWU9MDAuNzI1OTg2
NDE5LCByZXM9LTEKLSBhcF9jYXNlY21wc3RyXzQgICAgIDogdGltZT0wMC43OTM0NzY4MDYsIHJl
cz0tMQotIGFwX2Nhc2VjbXBzdHJfMyAgICAgOiB0aW1lPTAxLjAxMTQ4MTAzOCwgcmVzPS0xCi0g
YXBfY2FzZWNtcHN0cl83ICAgICA6IHRpbWU9MDAuODI4OTUwNzc3LCByZXM9LTEKLSBhcF9jYXNl
Y21wc3RyXzUgICAgIDogdGltZT0wMC44Mjg3MjIwMTksIHJlcz0tMQotIGFwX2Nhc2VjbXBzdHJf
NiAgICAgOiB0aW1lPTAwLjg2NjExNjUwNywgcmVzPS0xCi0gc3ZuX2NzdHJpbmdfY2FzZWNtcCA6
IHRpbWU9MDAuNzkzMzQ3NDUwLCByZXM9LTEKLSBtaV9zdHJjYXNlY21wICAgICAgIDogdGltZT0w
MC44NzA1NjY0NTUsIHJlcz0tMQotIHN0cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAxLjc2MDU5
NzY0NiwgcmVzPS0xCi0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEuNzUyMjQyODkyLCBy
ZXM9LTEKLSBzdHJjbXAgICAgICAgICAgICAgIDogdGltZT0wMS4zMTk0MTQ0OTUsIHJlcz0tMzIg
IT0gc3RyW25dY2FzZWNtcCgpJ3MgcmVzdWx0IQoKLi9hcF9jYXNlY21wc3RyLU8yICdhJyAxMDAw
MDAwMDAgInlZIiAiWXlZIiAwOiBsb2NhbGUgIm10X01ULklTTy04ODU5LTMiCi0gYXBfY2FzZWNt
cHN0ciAgICAgICA6IHRpbWU9MDAuOTQxNzU2MDcwLCByZXM9LTEKLSBhcF9jYXNlY21wc3RyXzEg
ICAgIDogdGltZT0wMC45NDIwMjY2MjgsIHJlcz0tMQotIGFwX2Nhc2VjbXBzdHJfMiAgICAgOiB0
aW1lPTAwLjkyMjUxOTA1MSwgcmVzPS0xCi0gYXBfY2FzZWNtcHN0cl80ICAgICA6IHRpbWU9MDAu
OTE1MzM2Njc5LCByZXM9LTEKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0wMS4xNDM1NDc5
NDYsIHJlcz0tMQotIGFwX2Nhc2VjbXBzdHJfNyAgICAgOiB0aW1lPTAwLjkxNTEyODc3NSwgcmVz
PS0xCi0gYXBfY2FzZWNtcHN0cl81ICAgICA6IHRpbWU9MDAuOTc5NDAwMjAyLCByZXM9LTEKLSBh
cF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0wMS4xMzgzNzg3NDYsIHJlcz0tMQotIHN2bl9jc3Ry
aW5nX2Nhc2VjbXAgOiB0aW1lPTAwLjk3OTQ3NDYyMCwgcmVzPS0xCi0gbWlfc3RyY2FzZWNtcCAg
ICAgICA6IHRpbWU9MDEuMDkyNjQ0OTI1LCByZXM9LTEKLSBzdHJjYXNlY21wX2V4dCAgICAgIDog
dGltZT0wMS43NjQyNDcyMzIsIHJlcz0tMQotIHN0cmNhc2VjbXAgICAgICAgICAgOiB0aW1lPTAx
Ljc1MTQ5NjY4MywgcmVzPS0xCi0gc3RyY21wICAgICAgICAgICAgICA6IHRpbWU9MDEuMzE4Nzg5
MTgwLCByZXM9MzIgIT0gc3RyW25dY2FzZWNtcCgpJ3MgcmVzdWx0IQoKLi9hcF9jYXNlY21wc3Ry
LU8yICdhJyAxMDAwMDAwMDAgIqkiICJpIiAwOiBsb2NhbGUgIm10X01ULklTTy04ODU5LTMiCi0g
YXBfY2FzZWNtcHN0ciAgICAgICA6IHRpbWU9MDAuNDI4ODIzNTk5LCByZXM9NjQKLSBhcF9jYXNl
Y21wc3RyXzEgICAgIDogdGltZT0wMC40MjgyMDgzNDgsIHJlcz02NAotIGFwX2Nhc2VjbXBzdHJf
MiAgICAgOiB0aW1lPTAwLjQyNDQ1MDQ2MCwgcmVzPTY0Ci0gYXBfY2FzZWNtcHN0cl80ICAgICA6
IHRpbWU9MDAuNDUxOTcwNzg2LCByZXM9NjQKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0w
MC41Mjc0NDE2NTQsIHJlcz02NAotIGFwX2Nhc2VjbXBzdHJfNyAgICAgOiB0aW1lPTAwLjQ1MTk4
OTE2MCwgcmVzPTY0Ci0gYXBfY2FzZWNtcHN0cl81ICAgICA6IHRpbWU9MDAuNDUyMTI3MTI4LCBy
ZXM9NjQKLSBhcF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0wMC40OTIzMjgzNzUsIHJlcz02NAot
IHN2bl9jc3RyaW5nX2Nhc2VjbXAgOiB0aW1lPTAwLjQxNDQ5MjY2NSwgcmVzPTY0Ci0gbWlfc3Ry
Y2FzZWNtcCAgICAgICA6IHRpbWU9MDAuNDkwMTMyNTMwLCByZXM9OTYgIT0gc3RyW25dY2FzZWNt
cCgpJ3MgcmVzdWx0IQotIHN0cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAxLjc2NjE3NjEzOSwg
cmVzPTY0Ci0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEuNzU0OTY5MTU0LCByZXM9NjQK
LSBzdHJjbXAgICAgICAgICAgICAgIDogdGltZT0wMS4zMTkzNTQ0MTUsIHJlcz02NAoKLi9hcF9j
YXNlY21wc3RyLU8yICdhJyAxMDAwMDAwMDAgImN5Y29PYUEiICJjeWNvT2FBIiAwOiBsb2NhbGUg
Im10X01ULklTTy04ODU5LTMiCi0gYXBfY2FzZWNtcHN0ciAgICAgICA6IHRpbWU9MDEuNjU3NjMz
MzA3LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfMSAgICAgOiB0aW1lPTAxLjY1ODA2MjA5OCwgcmVz
PTAKLSBhcF9jYXNlY21wc3RyXzIgICAgIDogdGltZT0wMS43MzI5NTM1NTcsIHJlcz0wCi0gYXBf
Y2FzZWNtcHN0cl80ICAgICA6IHRpbWU9MDEuNjIwMjM4MTk5LCByZXM9MAotIGFwX2Nhc2VjbXBz
dHJfMyAgICAgOiB0aW1lPTAyLjMzNjI3NTMwMCwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzcgICAg
IDogdGltZT0wMS44NDcxNDA2MDMsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl81ICAgICA6IHRpbWU9
MDIuNDQ5MTAwMzEzLCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNiAgICAgOiB0aW1lPTAyLjE0Nzkw
NjAxMCwgcmVzPTAKLSBzdm5fY3N0cmluZ19jYXNlY21wIDogdGltZT0wMS44ODgxNjk2OTksIHJl
cz0wCi0gbWlfc3RyY2FzZWNtcCAgICAgICA6IHRpbWU9MDIuMjk5NDE4OTk2LCByZXM9MAotIHN0
cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAxLjc2MTc4MjU2NywgcmVzPTAKLSBzdHJjYXNlY21w
ICAgICAgICAgIDogdGltZT0wMS43NTQxNDQxNzIsIHJlcz0wCi0gc3RyY21wICAgICAgICAgICAg
ICA6IHRpbWU9MDEuMzE5NTg3MTU0LCByZXM9MAoKLi9hcF9jYXNlY21wc3RyLU8yICdhJyAxMDAw
MDAwMDAgImN5Y3ljb09vT2FBYUEiICJjeWN5Y29Pb09hQWFBIiAwOiBsb2NhbGUgIm10X01ULklT
Ty04ODU5LTMiCi0gYXBfY2FzZWNtcHN0ciAgICAgICA6IHRpbWU9MDIuNjAzODU5NjYyLCByZXM9
MAotIGFwX2Nhc2VjbXBzdHJfMSAgICAgOiB0aW1lPTAyLjU2Mzc0Njc1MSwgcmVzPTAKLSBhcF9j
YXNlY21wc3RyXzIgICAgIDogdGltZT0wMi42MTQ4NTI2ODksIHJlcz0wCi0gYXBfY2FzZWNtcHN0
cl80ICAgICA6IHRpbWU9MDIuNTI2NjA4OTM3LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfMyAgICAg
OiB0aW1lPTAzLjcxMDY5ODgwMywgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzcgICAgIDogdGltZT0w
Mi43NTMwMTM2NzgsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl81ICAgICA6IHRpbWU9MDMuODA4MjQw
MjI2LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNiAgICAgOiB0aW1lPTAzLjI4OTYwNzUyOCwgcmVz
PTAKLSBzdm5fY3N0cmluZ19jYXNlY21wIDogdGltZT0wMy4wMTYzNzU4MzYsIHJlcz0wCi0gbWlf
c3RyY2FzZWNtcCAgICAgICA6IHRpbWU9MDMuNjU4MjU5NTc3LCByZXM9MAotIHN0cmNhc2VjbXBf
ZXh0ICAgICAgOiB0aW1lPTAxLjc2NjE1OTUwOCwgcmVzPTAKLSBzdHJjYXNlY21wICAgICAgICAg
IDogdGltZT0wMS43NTcwMTU2NzAsIHJlcz0wCi0gc3RyY21wICAgICAgICAgICAgICA6IHRpbWU9
MDEuMzE5ODQ4Nzk5LCByZXM9MAoKLi9hcF9jYXNlY21wc3RyLU8yICdhJyAxMDAwMDAwMDAgIoCB
goOE/P3+/yIgIoCBgoOE/P3+/yIgMDogbG9jYWxlICJtdF9NVC5JU08tODg1OS0zIgotIGFwX2Nh
c2VjbXBzdHIgICAgICAgOiB0aW1lPTAxLjk2MDU0NTA5NiwgcmVzPTAKLSBhcF9jYXNlY21wc3Ry
XzEgICAgIDogdGltZT0wMS45NjA5Mjg3NTgsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl8yICAgICA6
IHRpbWU9MDIuMDEzNjE0ODUxLCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNCAgICAgOiB0aW1lPTAy
LjAxMzc0ODk0NiwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0wMi43ODk5ODkw
MjMsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl83ICAgICA6IHRpbWU9MDIuMTYzNjY4NjUyLCByZXM9
MAotIGFwX2Nhc2VjbXBzdHJfNSAgICAgOiB0aW1lPTAyLjkwMTI2MTQ1MCwgcmVzPTAKLSBhcF9j
YXNlY21wc3RyXzYgICAgIDogdGltZT0wMi41MjQwNDA4ODUsIHJlcz0wCi0gc3ZuX2NzdHJpbmdf
Y2FzZWNtcCA6IHRpbWU9MDIuMjYxOTE5Nzc3LCByZXM9MAotIG1pX3N0cmNhc2VjbXAgICAgICAg
OiB0aW1lPTAyLjc1OTE3MjEyNCwgcmVzPTAKLSBzdHJjYXNlY21wX2V4dCAgICAgIDogdGltZT0w
MS43NjIyMzM0MTMsIHJlcz0wCi0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEuNzU3ODcw
ODgxLCByZXM9MAotIHN0cmNtcCAgICAgICAgICAgICAgOiB0aW1lPTAxLjMxOTgwNTY3NiwgcmVz
PTAKCi4vYXBfY2FzZWNtcHN0ci1PMiAnYScgMTAwMDAwMDAwICJjeWN5Y3ljeWN5Y3ljeWN5Y3lj
b09vT29Pb09vT2FBYUFhQWFBYUFhIiAiY3ljeWN5Y3ljeWN5Y3ljeWN5Y29Pb09vT29Pb09hQWFB
YUFhQWFBYSIgMDogbG9jYWxlICJtdF9NVC5JU08tODg1OS0zIgotIGFwX2Nhc2VjbXBzdHIgICAg
ICAgOiB0aW1lPTA2LjY1MjAwMTA2MSwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzEgICAgIDogdGlt
ZT0wNi43MDI2NDAyMDEsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl8yICAgICA6IHRpbWU9MDYuNjM2
OTkxNDc1LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNCAgICAgOiB0aW1lPTA2LjU5NTc4NTc2NSwg
cmVzPTAKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0wOS43OTk1NzcxMTksIHJlcz0wCi0g
YXBfY2FzZWNtcHN0cl83ICAgICA6IHRpbWU9MDYuODM2OTYyNDcyLCByZXM9MAotIGFwX2Nhc2Vj
bXBzdHJfNSAgICAgOiB0aW1lPTA5LjkzNzQyNDk2NCwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzYg
ICAgIDogdGltZT0wOC4zNjk5NzU3MzUsIHJlcz0wCi0gc3ZuX2NzdHJpbmdfY2FzZWNtcCA6IHRp
bWU9MDguMTQxODY1MDMyLCByZXM9MAotIG1pX3N0cmNhc2VjbXAgICAgICAgOiB0aW1lPTA5Ljgx
NTE1NTM1MSwgcmVzPTAKLSBzdHJjYXNlY21wX2V4dCAgICAgIDogdGltZT0wMS41OTkzODMwMzUs
IHJlcz0wCi0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEuNTU2MzI3ODM3LCByZXM9MAot
IHN0cmNtcCAgICAgICAgICAgICAgOiB0aW1lPTAxLjExMjQ4OTU2OCwgcmVzPTAKCi4vYXBfY2Fz
ZWNtcHN0ci1PMiAnYScgMTAwMDAwMDAwICJDeUN5Q3lDeUN5Q3lDeUN5Q3lDb29vb29vb29vb2Fh
YWFhYWFhYWFhIiAiQ3lDeUN5Q3lDeUN5Q3lDeUN5Q29vb29vb29vb29hYWFhYWFhYWFhYSIgMDog
bG9jYWxlICJtdF9NVC5JU08tODg1OS0zIgotIGFwX2Nhc2VjbXBzdHIgICAgICAgOiB0aW1lPTA2
LjY2NDQzNzExOCwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzEgICAgIDogdGltZT0wNi42NjM5MzQz
NjgsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl8yICAgICA6IHRpbWU9MDYuNjM4NDc3NTM3LCByZXM9
MAotIGFwX2Nhc2VjbXBzdHJfNCAgICAgOiB0aW1lPTA2LjYwNDU3MzE5NywgcmVzPTAKLSBhcF9j
YXNlY21wc3RyXzMgICAgIDogdGltZT0wOS43OTY3NjQxNzUsIHJlcz0wCi0gYXBfY2FzZWNtcHN0
cl83ICAgICA6IHRpbWU9MDYuODI4MTUyNjUzLCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNSAgICAg
OiB0aW1lPTA5LjkyMjU2NDIwOSwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0w
OC4zNjUyNDY2MzQsIHJlcz0wCi0gc3ZuX2NzdHJpbmdfY2FzZWNtcCA6IHRpbWU9MDguMTQzMjM3
NzgyLCByZXM9MAotIG1pX3N0cmNhc2VjbXAgICAgICAgOiB0aW1lPTA5Ljc5Njc3NTEyMiwgcmVz
PTAKLSBzdHJjYXNlY21wX2V4dCAgICAgIDogdGltZT0wMS44NDMyMzM3NjQsIHJlcz0wCi0gc3Ry
Y2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEuNzcxMTU5Njk5LCByZXM9MAotIHN0cmNtcCAgICAg
ICAgICAgICAgOiB0aW1lPTAxLjExMTMwMTgxOSwgcmVzPTAKCi4vYXBfY2FzZWNtcHN0ci1PMiAn
YScgMTAwMDAwMDAwICJDeUN5Q3lDeUN5Q3lDeUN5Q3lDb09vT29Pb09vT2FBYUFhQWFBYUFhIiAi
Y1ljWWNZY1ljWWNZY1ljWWNZY09vT29Pb09vT29BYUFhQWFBYUFhYSIgMDogbG9jYWxlICJtdF9N
VC5JU08tODg1OS0zIgotIGFwX2Nhc2VjbXBzdHIgICAgICAgOiB0aW1lPTA2LjY0NDM2NTY5MCwg
cmVzPTAKLSBhcF9jYXNlY21wc3RyXzEgICAgIDogdGltZT0wNi42MzE0OTk3OTAsIHJlcz0wCi0g
YXBfY2FzZWNtcHN0cl8yICAgICA6IHRpbWU9MDYuNjM1MjI5NTE1LCByZXM9MAotIGFwX2Nhc2Vj
bXBzdHJfNCAgICAgOiB0aW1lPTA3LjUxNTYxOTEyMiwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzMg
ICAgIDogdGltZT0xMS43ODg3MDI1MjUsIHJlcz0wCi0gYXBfY2FzZWNtcHN0cl83ICAgICA6IHRp
bWU9MDcuNzc0NTg1NjU3LCByZXM9MAotIGFwX2Nhc2VjbXBzdHJfNSAgICAgOiB0aW1lPTA3Ljgz
NjE0OTQ2OSwgcmVzPTAKLSBhcF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0xMi42NjA0ODM4NjMs
IHJlcz0wCi0gc3ZuX2NzdHJpbmdfY2FzZWNtcCA6IHRpbWU9MDguMTAwMjE5Njg3LCByZXM9MAot
IG1pX3N0cmNhc2VjbXAgICAgICAgOiB0aW1lPTEyLjI4OTE3MTY3OCwgcmVzPTAKLSBzdHJjYXNl
Y21wX2V4dCAgICAgIDogdGltZT0wMS42MDA0MDU4MTYsIHJlcz0wCi0gc3RyY2FzZWNtcCAgICAg
ICAgICA6IHRpbWU9MDEuNTU5NDA5MDg5LCByZXM9MAotIHN0cmNtcCAgICAgICAgICAgICAgOiB0
aW1lPTAwLjg4ODQwMjE0NiwgcmVzPS0zMiAhPSBzdHJbbl1jYXNlY21wKCkncyByZXN1bHQhCgou
L2FwX2Nhc2VjbXBzdHItTzIgJ2EnIDEwMDAwMDAwMCAiQ3lDeUN5Q3lDeUN5Q3lDeUN5Q29Pb09v
T29Pb09hQWFBYUFhQWFBWyIgImNZY1ljWWNZY1ljWWNZY1ljWWNPb09vT29Pb09vQWFBYUFhQWFB
YV0iIDA6IGxvY2FsZSAibXRfTVQuSVNPLTg4NTktMyIKLSBhcF9jYXNlY21wc3RyICAgICAgIDog
dGltZT0wNi4zNjczMDA3MTEsIHJlcz0tMgotIGFwX2Nhc2VjbXBzdHJfMSAgICAgOiB0aW1lPTA2
LjMyOTUwMTIzNywgcmVzPS0yCi0gYXBfY2FzZWNtcHN0cl8yICAgICA6IHRpbWU9MDYuMzI3ODAz
NTU4LCByZXM9LTIKLSBhcF9jYXNlY21wc3RyXzQgICAgIDogdGltZT0wNi4zMjgzNjA3NjcsIHJl
cz0tMgotIGFwX2Nhc2VjbXBzdHJfMyAgICAgOiB0aW1lPTA3Ljc2MDMxODU1MiwgcmVzPS0yCi0g
YXBfY2FzZWNtcHN0cl83ICAgICA6IHRpbWU9MDYuMzI5NjAyMDYwLCByZXM9LTIKLSBhcF9jYXNl
Y21wc3RyXzUgICAgIDogdGltZT0wNi4zMjg1Njk2OTcsIHJlcz0tMgotIGFwX2Nhc2VjbXBzdHJf
NiAgICAgOiB0aW1lPTExLjE4MDgzMDkyMywgcmVzPS0yCi0gc3ZuX2NzdHJpbmdfY2FzZWNtcCA6
IHRpbWU9MDcuNzIzNzYyNjg0LCByZXM9LTIKLSBtaV9zdHJjYXNlY21wICAgICAgIDogdGltZT0x
MC4xODQxNjM1MTcsIHJlcz0tMgotIHN0cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAxLjY4NDkw
Mjg0NSwgcmVzPS0yCi0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEuNjM2MDY0OTc2LCBy
ZXM9LTIKLSBzdHJjbXAgICAgICAgICAgICAgIDogdGltZT0wMC44ODc5MTIwMDMsIHJlcz0tMzIg
IT0gc3RyW25dY2FzZWNtcCgpJ3MgcmVzdWx0IQoKLi9hcF9jYXNlY21wc3RyLU8yICdhJyAxMDAw
MDAwMDAgIqmpqampqampqampqampqampqampqampqampqampqampqampqampqakiICJpaWlpaWlp
aWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpIiAwOiBsb2NhbGUgIm10X01ULklTTy04
ODU5LTMiCi0gYXBfY2FzZWNtcHN0ciAgICAgICA6IHRpbWU9MDAuNDQ5MjAyOTA4LCByZXM9NjQK
LSBhcF9jYXNlY21wc3RyXzEgICAgIDogdGltZT0wMC40MTQ0MjEyOTEsIHJlcz02NAotIGFwX2Nh
c2VjbXBzdHJfMiAgICAgOiB0aW1lPTAwLjQxNDMxOTM1OSwgcmVzPTY0Ci0gYXBfY2FzZWNtcHN0
cl80ICAgICA6IHRpbWU9MDAuNDUyMTI0MjM5LCByZXM9NjQKLSBhcF9jYXNlY21wc3RyXzMgICAg
IDogdGltZT0wMC41MjcyNjc4NzgsIHJlcz02NAotIGFwX2Nhc2VjbXBzdHJfNyAgICAgOiB0aW1l
PTAwLjQ1MTk4NTM1NiwgcmVzPTY0Ci0gYXBfY2FzZWNtcHN0cl81ICAgICA6IHRpbWU9MDAuNDUx
OTQwNDQxLCByZXM9NjQKLSBhcF9jYXNlY21wc3RyXzYgICAgIDogdGltZT0wMC40ODk2NDU5MzIs
IHJlcz02NAotIHN2bl9jc3RyaW5nX2Nhc2VjbXAgOiB0aW1lPTAwLjQxNDM4MDgxOSwgcmVzPTY0
Ci0gbWlfc3RyY2FzZWNtcCAgICAgICA6IHRpbWU9MDAuNDUyMjAxMzgxLCByZXM9OTYgIT0gc3Ry
W25dY2FzZWNtcCgpJ3MgcmVzdWx0IQotIHN0cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAxLjA5
MjMzNTczMCwgcmVzPTY0Ci0gc3RyY2FzZWNtcCAgICAgICAgICA6IHRpbWU9MDEuMDU0NTI2ODQ2
LCByZXM9NjQKLSBzdHJjbXAgICAgICAgICAgICAgIDogdGltZT0wMC44ODczODkzNzcsIHJlcz02
NAoKLi9hcF9jYXNlY21wc3RyLU8yICdhJyAxMDAwMDAwMDAgIqlpqWmpaalpqWmpaalpqWmpaalp
qWmpaalpqWmpaalpqWmpaalpqWkiICJpqWmpaalpqWmpaalpqWmpaalpqWmpaalpqWmpaalpqWmp
aalpqWmpIiAwOiBsb2NhbGUgIm10X01ULklTTy04ODU5LTMiCi0gYXBfY2FzZWNtcHN0ciAgICAg
ICA6IHRpbWU9MDAuNDE0NDgxNDQwLCByZXM9NjQKLSBhcF9jYXNlY21wc3RyXzEgICAgIDogdGlt
ZT0wMC40MTQzMDMwNzksIHJlcz02NAotIGFwX2Nhc2VjbXBzdHJfMiAgICAgOiB0aW1lPTAwLjQx
NDM4ODEwNiwgcmVzPTY0Ci0gYXBfY2FzZWNtcHN0cl80ICAgICA6IHRpbWU9MDAuNDUyMDMxNjEw
LCByZXM9NjQKLSBhcF9jYXNlY21wc3RyXzMgICAgIDogdGltZT0wMC41MjcyOTY2OTQsIHJlcz02
NAotIGFwX2Nhc2VjbXBzdHJfNyAgICAgOiB0aW1lPTAwLjQ1MTk3MjU2OSwgcmVzPTY0Ci0gYXBf
Y2FzZWNtcHN0cl81ICAgICA6IHRpbWU9MDAuNDUyMDEyNDcwLCByZXM9NjQKLSBhcF9jYXNlY21w
c3RyXzYgICAgIDogdGltZT0wMC40ODk2NDU0MDksIHJlcz02NAotIHN2bl9jc3RyaW5nX2Nhc2Vj
bXAgOiB0aW1lPTAwLjQxNDMzOTAwMCwgcmVzPTY0Ci0gbWlfc3RyY2FzZWNtcCAgICAgICA6IHRp
bWU9MDAuNDUyMTU4MjgwLCByZXM9OTYgIT0gc3RyW25dY2FzZWNtcCgpJ3MgcmVzdWx0IQotIHN0
cmNhc2VjbXBfZXh0ICAgICAgOiB0aW1lPTAwLjg2ODg0NzMwMiwgcmVzPTY0Ci0gc3RyY2FzZWNt
cCAgICAgICAgICA6IHRpbWU9MDAuODMwNDk1MDkyLCByZXM9NjQKLSBzdHJjbXAgICAgICAgICAg
ICAgIDogdGltZT0wMC44OTMwMjM4OTcsIHJlcz02NAoK
--001a114a9bc4a736220525c540bd
Content-Type: text/x-csrc; charset=US-ASCII; name="ap_casecmpstr.c"
Content-Disposition: attachment; filename="ap_casecmpstr.c"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_ihm7x07i0

I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzdGRpbnQuaD4KI2luY2x1ZGUgPHN0ZGxpYi5o
PgojaW5jbHVkZSA8c3RyaW5nLmg+CiNpbmNsdWRlIDxzdHJpbmdzLmg+CiNpbmNsdWRlIDxsaW1p
dHMuaD4KI2luY2x1ZGUgPHRpbWUuaD4KI2luY2x1ZGUgPGxvY2FsZS5oPgojaW5jbHVkZSA8YXNz
ZXJ0Lmg+CgpleHRlcm4gaW50IGFwX2Nhc2VjbXBzdHIoY29uc3QgY2hhciAqczEsIGNvbnN0IGNo
YXIgKnMyKTsKZXh0ZXJuIGludCBhcF9jYXNlY21wc3Rybihjb25zdCBjaGFyICpzMSwgY29uc3Qg
Y2hhciAqczIsIHNpemVfdCBuKTsKCmV4dGVybiBpbnQgYXBfY2FzZWNtcHN0cl8xKGNvbnN0IGNo
YXIgKnMxLCBjb25zdCBjaGFyICpzMik7CmV4dGVybiBpbnQgYXBfY2FzZWNtcHN0cm5fMShjb25z
dCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIsIHNpemVfdCBuKTsKCmV4dGVybiBpbnQgYXBfY2Fz
ZWNtcHN0cl8yKGNvbnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMik7CmV4dGVybiBpbnQgYXBf
Y2FzZWNtcHN0cm5fMihjb25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIsIHNpemVfdCBuKTsK
CmV4dGVybiBpbnQgYXBfY2FzZWNtcHN0cl8zKGNvbnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpz
Mik7CmV4dGVybiBpbnQgYXBfY2FzZWNtcHN0cm5fMyhjb25zdCBjaGFyICpzMSwgY29uc3QgY2hh
ciAqczIsIHNpemVfdCBuKTsKCmV4dGVybiBpbnQgYXBfY2FzZWNtcHN0cl80KGNvbnN0IGNoYXIg
KnMxLCBjb25zdCBjaGFyICpzMik7CmV4dGVybiBpbnQgYXBfY2FzZWNtcHN0cm5fNChjb25zdCBj
aGFyICpzMSwgY29uc3QgY2hhciAqczIsIHNpemVfdCBuKTsKCmV4dGVybiBpbnQgYXBfY2FzZWNt
cHN0cl81KGNvbnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMik7CmV4dGVybiBpbnQgYXBfY2Fz
ZWNtcHN0cm5fNShjb25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIsIHNpemVfdCBuKTsKCmV4
dGVybiBpbnQgYXBfY2FzZWNtcHN0cl82KGNvbnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMik7
CmV4dGVybiBpbnQgYXBfY2FzZWNtcHN0cm5fNihjb25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAq
czIsIHNpemVfdCBuKTsKCmV4dGVybiBpbnQgYXBfY2FzZWNtcHN0cl83KGNvbnN0IGNoYXIgKnMx
LCBjb25zdCBjaGFyICpzMik7CmV4dGVybiBpbnQgYXBfY2FzZWNtcHN0cm5fNyhjb25zdCBjaGFy
ICpzMSwgY29uc3QgY2hhciAqczIsIHNpemVfdCBuKTsKCmV4dGVybiBpbnQgbWlfc3RyY2FzZWNt
cChjb25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIpOwpleHRlcm4gaW50IG1pX3N0cm5jYXNl
Y21wKGNvbnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMiwgc2l6ZV90IG4pOwoKZXh0ZXJuIGlu
dCBzdHJjYXNlY21wX2V4dChjb25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIpOwpleHRlcm4g
aW50IHN0cm5jYXNlY21wX2V4dChjb25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIsIHNpemVf
dCBuKTsKCmV4dGVybiBpbnQgc3ZuX2NzdHJpbmdfY2FzZWNtcChjb25zdCBjaGFyICpzdHIxLCBj
b25zdCBjaGFyICpzdHIyKTsKZXh0ZXJuIGludCBzdm5fY3N0cmluZ19uY2FzZWNtcChjb25zdCBj
aGFyICpzdHIxLCBjb25zdCBjaGFyICpzdHIyLCBzaXplX3Qgbik7CgoKI2RlZmluZSBQUk9HIGFy
Z3ZbMF0KI2RlZmluZSBNRVRIT0QgYXJndlsxXQojZGVmaW5lIE5CIGF0b2koYXJndlsyXSkKI2Rl
ZmluZSBTMSBhcmd2WzNdCiNkZWZpbmUgUzIgYXJndls0XQojZGVmaW5lIExFTiBhdG9pKGFyZ3Zb
NV0pCgovKiBUaGUgKysgYXJlIGhlcmUgdG8gdHJ5IHRvIHByZXZlbnQgc29tZSBvcHRpbWl6YXRp
b24gZG9uZSBieSBnY2MgKi8KI2RlZmluZSBGT1IgZm9yIChpPTA7IGk8bmI7IGkrKywgKFMxW2J1
cm5dKSs9MiwgKFMyW2J1cm5dKSs9MikKCiNkZWZpbmUgUlVOKG0sIG1uLCBpZCkgXApkbyB7IFwK
ICAgIGlmICgqTUVUSE9EID09ICdhJyB8fCBzdHJjaHIoTUVUSE9ELCBpZCkpIHsgXAogICAgICAg
IGludCByZXMgPSAwOyBcCiAgICAgICAgaW50IGksIG5iID0gTkIsIGxlbiA9IExFTjsgXAogICAg
ICAgIHN0cnVjdCB0aW1lc3BlYyB0dnMsIHR2ZTsgXAogICAgICAgIGludDY0X3QgZGlmZjsgXAog
ICAgICAgIHNpemVfdCBidXJuOyBcCiAgICAgICAgaW50IG1hdGNoOyBcCiAgICAgICAgXAogICAg
ICAgIGJ1cm4gPSBzdHJsZW4oUzEpIDwgc3RybGVuKFMyKSA/IHN0cmxlbihTMSkgOiBzdHJsZW4o
UzIpOyBcCiAgICAgICAgYXNzZXJ0KGJ1cm4gPiAwKTsgXAogICAgICAgIGJ1cm4tLTsgXAogICAg
ICAgIFMxW2J1cm5dID0gMTsgXAogICAgICAgIFMyW2J1cm5dID0gMTsgXAogICAgICAgIFwKICAg
ICAgICBwcmludGYoIi0gJS0yMHM6ICIsIGxlbiA9PSAwID8gI20gOiAjbW4pOyBcCiAgICAgICAg
ZmZsdXNoKHN0ZG91dCk7IFwKICAgICAgICBcCiAgICAgICAgaWYgKGxlbiA9PSAwKSB7IFwKICAg
ICAgICAgICAgbWF0Y2ggPSAobShTMSwgUzIpID09IHN0cmNhc2VjbXAoUzEsIFMyKSk7IFwKICAg
ICAgICB9IFwKICAgICAgICBlbHNlIHsgXAogICAgICAgICAgICBtYXRjaCA9IChtbihTMSwgUzIs
IGxlbikgIT0gc3RybmNhc2VjbXAoUzEsIFMyLCBsZW4pKTsgXAogICAgICAgIH0gXAogICAgICAg
IFwKICAgICAgICBjbG9ja19nZXR0aW1lKENMT0NLX01PTk9UT05JQywgJnR2cyk7IFwKICAgICAg
ICBpZiAobGVuID09IDApIHsgXAogICAgICAgICAgICBGT1IgeyBcCiAgICAgICAgICAgICAgICBy
ZXMgfD0gbShTMSwgUzIpOyBcCiAgICAgICAgICAgIH0gXAogICAgICAgIH0gXAogICAgICAgIGVs
c2UgeyBcCiAgICAgICAgICAgIEZPUiB7IFwKICAgICAgICAgICAgICAgIHJlcyB8PSBtbihTMSwg
UzIsIGxlbik7IFwKICAgICAgICAgICAgfSBcCiAgICAgICAgfSBcCiAgICAgICAgY2xvY2tfZ2V0
dGltZShDTE9DS19NT05PVE9OSUMsICZ0dmUpOyBcCiAgICAgICAgXAogICAgICAgIGRpZmYgID0g
KGludDY0X3QpdHZlLnR2X3NlYyAqIDEwMDAwMDAwMDBMICsgdHZlLnR2X25zZWM7IFwKICAgICAg
ICBkaWZmIC09IChpbnQ2NF90KXR2cy50dl9zZWMgKiAxMDAwMDAwMDAwTCArIHR2cy50dl9uc2Vj
OyBcCiAgICAgICAgcHJpbnRmKCJ0aW1lPSUuMmxsZC4lLjlsbGQsIHJlcz0lZCVzXG4iLCBcCiAg
ICAgICAgICAgICAgIChsb25nIGxvbmcpZGlmZiAvIDEwMDAwMDAwMDBMLCBcCiAgICAgICAgICAg
ICAgIChsb25nIGxvbmcpZGlmZiAlIDEwMDAwMDAwMDBMLCBcCiAgICAgICAgICAgICAgIHJlcywg
bWF0Y2ggPyAiIiA6ICIgIT0gc3RyW25dY2FzZWNtcCgpJ3MgcmVzdWx0ISIpOyBcCiAgICAgICAg
ZmZsdXNoKHN0ZG91dCk7IFwKICAgIH0gXAp9IHdoaWxlICgwKQoKaW50IG1haW4oaW50IGFyZ2Ms
IGNoYXIgKmFyZ3ZbXSkKewogICAgY2hhciAqcHRyOwoKICAgIGlmIChhcmdjIDwgNikgewogICAg
ICAgIHByaW50ZigiJXMgPCo9YWxsOyAtPXN0ZDsgbisrPW50aD4gPG5iIGl0ZXI+IFMxIFMyIDxu
YiBjaGFyIHRvIGNvbXBhcmUgb3IgXFwwPlxuIiwgUFJPRyk7CiAgICAgICAgcmV0dXJuIDA7CiAg
ICB9CgogICAgc2V0bG9jYWxlKExDX0FMTCwgIiIpOwogICAgcHJpbnRmKCIlcyAnJXMnICVzIFwi
JXNcIiBcIiVzXCIgJXM6IGxvY2FsZSBcIiVzXCJcbiIsCiAgICAgICAgICAgYXJndlswXSwgYXJn
dlsxXSwgYXJndlsyXSwgYXJndlszXSwgYXJndls0XSwgYXJndls1XSwKICAgICAgICAgICBzZXRs
b2NhbGUoTENfQUxMLCBOVUxMKSk7CiAgICBmZmx1c2goc3Rkb3V0KTsKCiAgICAvKiBsYXN0IGNo
YXIgb2YgUzEgaXMgYnVybnQgKi8KICAgIHB0ciA9IG1hbGxvYyhzdHJsZW4oYXJndlszXSkgKyAy
KTsKICAgIG1lbWNweShwdHIsIGFyZ3ZbM10sIHN0cmxlbihhcmd2WzNdKSk7CiAgICBwdHJbc3Ry
bGVuKGFyZ3ZbM10pICsgMV0gPSAnXDAnOwogICAgcHRyW3N0cmxlbihhcmd2WzNdKV0gPSAhJ1ww
JzsKICAgIGFyZ3ZbM10gPSBwdHI7CgogICAgLyogbGFzdCBjaGFyIG9mIFMyIGlzIGJ1cm50ICov
CiAgICBwdHIgPSBtYWxsb2Moc3RybGVuKGFyZ3ZbNF0pICsgMik7CiAgICBtZW1jcHkocHRyLCBh
cmd2WzRdLCBzdHJsZW4oYXJndls0XSkpOwogICAgcHRyW3N0cmxlbihhcmd2WzRdKSArIDFdID0g
J1wwJzsKICAgIHB0cltzdHJsZW4oYXJndls0XSldID0gISdcMCc7CiAgICBhcmd2WzRdID0gcHRy
OwoKICAgIFJVTihhcF9jYXNlY21wc3RyLCAgIGFwX2Nhc2VjbXBzdHJuLCAgICcwJyk7CiAgICBS
VU4oYXBfY2FzZWNtcHN0cl8xLCBhcF9jYXNlY21wc3Rybl8xLCAnMScpOwogICAgUlVOKGFwX2Nh
c2VjbXBzdHJfMiwgYXBfY2FzZWNtcHN0cm5fMiwgJzInKTsKICAgIFJVTihhcF9jYXNlY21wc3Ry
XzQsIGFwX2Nhc2VjbXBzdHJuXzQsICc0Jyk7CiAgICBSVU4oYXBfY2FzZWNtcHN0cl8zLCBhcF9j
YXNlY21wc3Rybl8zLCAnMycpOwogICAgUlVOKGFwX2Nhc2VjbXBzdHJfNywgYXBfY2FzZWNtcHN0
cm5fNywgJzcnKTsKICAgIFJVTihhcF9jYXNlY21wc3RyXzUsIGFwX2Nhc2VjbXBzdHJuXzUsICc1
Jyk7CiAgICBSVU4oYXBfY2FzZWNtcHN0cl82LCBhcF9jYXNlY21wc3Rybl82LCAnNicpOwoKICAg
IFJVTihzdm5fY3N0cmluZ19jYXNlY21wLCBzdm5fY3N0cmluZ19uY2FzZWNtcCwgJ3YnKTsKCiAg
ICBSVU4obWlfc3RyY2FzZWNtcCwgbWlfc3RybmNhc2VjbXAsICdtJyk7CgogICAgUlVOKHN0cmNh
c2VjbXBfZXh0LCBzdHJuY2FzZWNtcF9leHQsICdzJyk7CiAgICBSVU4oc3RyY2FzZWNtcCwgc3Ry
bmNhc2VjbXAsICdzJyk7CiAgICBSVU4oc3RyY21wLCBzdHJuY21wLCAncycpOwoKICAgIHJldHVy
biAwOwp9Cgo=
--001a114a9bc4a736220525c540bd
Content-Type: text/x-csrc; charset=US-ASCII; name="ap_casecmpstr_impl.c"
Content-Disposition: attachment; filename="ap_casecmpstr_impl.c"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_ihm7x08e2

I2luY2x1ZGUgPHN0ZGxpYi5oPgojaW5jbHVkZSA8c3RyaW5nLmg+CiNpbmNsdWRlIDxzdHJpbmdz
Lmg+CgovKgogKiBQcm92aWRlIG91ciBvd24ga25vd24tZmFzdCBpbXBsZW1lbnRhdGlvbiBvZiBz
dHJbbl1jYXNlY21wKCkKICogTk9URTogQVNDSUkgb25seSEKICovCnN0YXRpYyBjb25zdCB1bnNp
Z25lZCBjaGFyIHVjaGFybWFwW10gPSB7CiAgICAweDAsICAweDEsICAweDIsICAweDMsICAweDQs
ICAweDUsICAweDYsICAweDcsCiAgICAweDgsICAweDksICAweGEsICAweGIsICAweGMsICAweGQs
ICAweGUsICAweGYsCiAgICAweDEwLCAweDExLCAweDEyLCAweDEzLCAweDE0LCAweDE1LCAweDE2
LCAweDE3LAogICAgMHgxOCwgMHgxOSwgMHgxYSwgMHgxYiwgMHgxYywgMHgxZCwgMHgxZSwgMHgx
ZiwKICAgIDB4MjAsIDB4MjEsIDB4MjIsIDB4MjMsIDB4MjQsIDB4MjUsIDB4MjYsIDB4MjcsCiAg
ICAweDI4LCAweDI5LCAweDJhLCAweDJiLCAweDJjLCAweDJkLCAweDJlLCAweDJmLAogICAgMHgz
MCwgMHgzMSwgMHgzMiwgMHgzMywgMHgzNCwgMHgzNSwgMHgzNiwgMHgzNywKICAgIDB4MzgsIDB4
MzksIDB4M2EsIDB4M2IsIDB4M2MsIDB4M2QsIDB4M2UsIDB4M2YsCiAgICAweDQwLCAgJ2EnLCAg
J2InLCAgJ2MnLCAgJ2QnLCAgJ2UnLCAgJ2YnLCAgJ2cnLAogICAgICdoJywgICdpJywgICdqJywg
ICdrJywgICdsJywgICdtJywgICduJywgICdvJywKICAgICAncCcsICAncScsICAncicsICAncycs
ICAndCcsICAndScsICAndicsICAndycsCiAgICAgJ3gnLCAgJ3knLCAgJ3onLCAweDViLCAweDVj
LCAweDVkLCAweDVlLCAweDVmLAogICAgMHg2MCwgICdhJywgICdiJywgICdjJywgICdkJywgICdl
JywgICdmJywgICdnJywKICAgICAnaCcsICAnaScsICAnaicsICAnaycsICAnbCcsICAnbScsICAn
bicsICAnbycsCiAgICAgJ3AnLCAgJ3EnLCAgJ3InLCAgJ3MnLCAgJ3QnLCAgJ3UnLCAgJ3YnLCAg
J3cnLAogICAgICd4JywgICd5JywgICd6JywgMHg3YiwgMHg3YywgMHg3ZCwgMHg3ZSwgMHg3ZiwK
ICAgIDB4ODAsIDB4ODEsIDB4ODIsIDB4ODMsIDB4ODQsIDB4ODUsIDB4ODYsIDB4ODcsCiAgICAw
eDg4LCAweDg5LCAweDhhLCAweDhiLCAweDhjLCAweDhkLCAweDhlLCAweDhmLAogICAgMHg5MCwg
MHg5MSwgMHg5MiwgMHg5MywgMHg5NCwgMHg5NSwgMHg5NiwgMHg5NywKICAgIDB4OTgsIDB4OTks
IDB4OWEsIDB4OWIsIDB4OWMsIDB4OWQsIDB4OWUsIDB4OWYsCiAgICAweGEwLCAweGExLCAweGEy
LCAweGEzLCAweGE0LCAweGE1LCAweGE2LCAweGE3LAogICAgMHhhOCwgMHhhOSwgMHhhYSwgMHhh
YiwgMHhhYywgMHhhZCwgMHhhZSwgMHhhZiwKICAgIDB4YjAsIDB4YjEsIDB4YjIsIDB4YjMsIDB4
YjQsIDB4YjUsIDB4YjYsIDB4YjcsCiAgICAweGI4LCAweGI5LCAweGJhLCAweGJiLCAweGJjLCAw
eGJkLCAweGJlLCAweGJmLAogICAgMHhjMCwgMHhjMSwgMHhjMiwgMHhjMywgMHhjNCwgMHhjNSwg
MHhjNiwgMHhjNywKICAgIDB4YzgsIDB4YzksIDB4Y2EsIDB4Y2IsIDB4Y2MsIDB4Y2QsIDB4Y2Us
IDB4Y2YsCiAgICAweGQwLCAweGQxLCAweGQyLCAweGQzLCAweGQ0LCAweGQ1LCAweGQ2LCAweGQ3
LAogICAgMHhkOCwgMHhkOSwgMHhkYSwgMHhkYiwgMHhkYywgMHhkZCwgMHhkZSwgMHhkZiwKICAg
IDB4ZTAsIDB4ZTEsIDB4ZTIsIDB4ZTMsIDB4ZTQsIDB4ZTUsIDB4ZTYsIDB4ZTcsCiAgICAweGU4
LCAweGU5LCAweGVhLCAweGViLCAweGVjLCAweGVkLCAweGVlLCAweGVmLAogICAgMHhmMCwgMHhm
MSwgMHhmMiwgMHhmMywgMHhmNCwgMHhmNSwgMHhmNiwgMHhmNywKICAgIDB4ZjgsIDB4ZjksIDB4
ZmEsIDB4ZmIsIDB4ZmMsIDB4ZmQsIDB4ZmUsIDB4ZmYKfTsKCmludCBhcF9jYXNlY21wc3RyKGNv
bnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMikKewogICAgY29uc3QgdW5zaWduZWQgY2hhciAq
cHMxID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczE7CiAgICBjb25zdCB1bnNpZ25lZCBjaGFy
ICpwczIgPSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMjsKCiAgICB3aGlsZSAodWNoYXJtYXBb
KnBzMV0gPT0gdWNoYXJtYXBbKnBzMisrXSkgewogICAgICAgIGlmICgqcHMxKysgPT0gJ1wwJykg
ewogICAgICAgICAgICByZXR1cm4gKDApOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiAodWNo
YXJtYXBbKnBzMV0gLSB1Y2hhcm1hcFsqLS1wczJdKTsKfQoKaW50IGFwX2Nhc2VjbXBzdHJuKGNv
bnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMiwgc2l6ZV90IG4pCnsKICAgIGNvbnN0IHVuc2ln
bmVkIGNoYXIgKnBzMSA9IChjb25zdCB1bnNpZ25lZCBjaGFyICopIHMxOwogICAgY29uc3QgdW5z
aWduZWQgY2hhciAqcHMyID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczI7CiAgICB3aGlsZSAo
bi0tKSB7CiAgICAgICAgaWYgKHVjaGFybWFwWypwczFdICE9IHVjaGFybWFwWypwczIrK10pIHsK
ICAgICAgICAgICAgcmV0dXJuICh1Y2hhcm1hcFsqcHMxXSAtIHVjaGFybWFwWyotLXBzMl0pOwog
ICAgICAgIH0KICAgICAgICBpZiAoKnBzMSsrID09ICdcMCcpIHsKICAgICAgICAgICAgYnJlYWs7
CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuICgwKTsKfQoKaW50IGFwX2Nhc2VjbXBzdHJfMShj
b25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIpCnsKICAgIGNvbnN0IHVuc2lnbmVkIGNoYXIg
KnBzMSA9IChjb25zdCB1bnNpZ25lZCBjaGFyICopIHMxOwogICAgY29uc3QgdW5zaWduZWQgY2hh
ciAqcHMyID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczI7CgogICAgd2hpbGUgKHVjaGFybWFw
WypwczFdID09IHVjaGFybWFwWypwczJdKSB7CiAgICAgICAgaWYgKCpwczEgPT0gJ1wwJykgewog
ICAgICAgICAgICByZXR1cm4gKDApOwogICAgICAgIH0KICAgICAgICArK3BzMTsKICAgICAgICAr
K3BzMjsKICAgIH0KICAgIHJldHVybiAodWNoYXJtYXBbKnBzMV0gLSB1Y2hhcm1hcFsqcHMyXSk7
Cn0KCmludCBhcF9jYXNlY21wc3Rybl8xKGNvbnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMiwg
c2l6ZV90IG4pCnsKICAgIGNvbnN0IHVuc2lnbmVkIGNoYXIgKnBzMSA9IChjb25zdCB1bnNpZ25l
ZCBjaGFyICopIHMxOwogICAgY29uc3QgdW5zaWduZWQgY2hhciAqcHMyID0gKGNvbnN0IHVuc2ln
bmVkIGNoYXIgKikgczI7CiAgICB3aGlsZSAobi0tKSB7CiAgICAgICAgaWYgKHVjaGFybWFwWypw
czFdICE9IHVjaGFybWFwWypwczJdKSB7CiAgICAgICAgICAgIHJldHVybiAodWNoYXJtYXBbKnBz
MV0gLSB1Y2hhcm1hcFsqcHMyXSk7CiAgICAgICAgfQogICAgICAgIGlmICgqcHMxID09ICdcMCcp
IHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgICsrcHMxOwogICAgICAgICsr
cHMyOwogICAgfQogICAgcmV0dXJuICgwKTsKfQoKaW50IGFwX2Nhc2VjbXBzdHJfMihjb25zdCBj
aGFyICpzMSwgY29uc3QgY2hhciAqczIpCnsKICAgIHNpemVfdCBpOwogICAgY29uc3QgdW5zaWdu
ZWQgY2hhciAqcHMxID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczE7CiAgICBjb25zdCB1bnNp
Z25lZCBjaGFyICpwczIgPSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMjsKCiAgICBmb3IgKGkg
PSAwOyA7ICsraSkgewogICAgICAgIGludCBjMSA9IHVjaGFybWFwW3BzMVtpXV07CiAgICAgICAg
aW50IGMyID0gdWNoYXJtYXBbcHMyW2ldXTsKCiAgICAgICAgaWYgKGMxICE9IGMyKSB7CiAgICAg
ICAgICAgIHJldHVybiBjMSAtIGMyOwogICAgICAgIH0KICAgICAgICBpZiAoIWMxKSB7CiAgICAg
ICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiAoMCk7Cn0KCmludCBhcF9j
YXNlY21wc3Rybl8yKGNvbnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMiwgc2l6ZV90IG4pCnsK
ICAgIHNpemVfdCBpOwogICAgY29uc3QgdW5zaWduZWQgY2hhciAqcHMxID0gKGNvbnN0IHVuc2ln
bmVkIGNoYXIgKikgczE7CiAgICBjb25zdCB1bnNpZ25lZCBjaGFyICpwczIgPSAoY29uc3QgdW5z
aWduZWQgY2hhciAqKSBzMjsKCiAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAg
aW50IGMxID0gdWNoYXJtYXBbcHMxW2ldXTsKICAgICAgICBpbnQgYzIgPSB1Y2hhcm1hcFtwczJb
aV1dOwoKICAgICAgICBpZiAoYzEgIT0gYzIpIHsKICAgICAgICAgICAgcmV0dXJuIGMxIC0gYzI7
CiAgICAgICAgfQogICAgICAgIGlmICghYzEpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg
fQogICAgfQogICAgcmV0dXJuICgwKTsKfQoKaW50IGFwX2Nhc2VjbXBzdHJfMyhjb25zdCBjaGFy
ICpzMSwgY29uc3QgY2hhciAqczIpCnsKICAgIHNpemVfdCBpOwogICAgY29uc3QgdW5zaWduZWQg
Y2hhciAqcHMxID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczE7CiAgICBjb25zdCB1bnNpZ25l
ZCBjaGFyICpwczIgPSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMjsKCiAgICBmb3IgKGkgPSAw
OyA7ICsraSkgewogICAgICAgIGludCBjMSA9IHVjaGFybWFwW3BzMVtpXV07CiAgICAgICAgaW50
IGMyID0gdWNoYXJtYXBbcHMyW2ldXTsKCiAgICAgICAgLyogQWJvdmUgbG9va3VwcyBhcmUgb3B0
aW1pemVkIGF3YXkgaWYgZmlyc3QgdGVzdCBiZWxvdyBmYWlscyAqLwogICAgICAgIGlmIChwczFb
aV0gIT0gcHMyW2ldICYmIGMxICE9IGMyKSB7CiAgICAgICAgICAgIHJldHVybiBjMSAtIGMyOwog
ICAgICAgIH0KICAgICAgICBpZiAoIWMxKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0K
ICAgIH0KICAgIHJldHVybiAoMCk7Cn0KCmludCBhcF9jYXNlY21wc3Rybl8zKGNvbnN0IGNoYXIg
KnMxLCBjb25zdCBjaGFyICpzMiwgc2l6ZV90IG4pCnsKICAgIHNpemVfdCBpOwogICAgY29uc3Qg
dW5zaWduZWQgY2hhciAqcHMxID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczE7CiAgICBjb25z
dCB1bnNpZ25lZCBjaGFyICpwczIgPSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMjsKCiAgICBm
b3IgKGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaW50IGMxID0gdWNoYXJtYXBbcHMxW2ld
XTsKICAgICAgICBpbnQgYzIgPSB1Y2hhcm1hcFtwczJbaV1dOwoKICAgICAgICAvKiBBYm92ZSBs
b29rdXBzIGFyZSBvcHRpbWl6ZWQgYXdheSBpZiBmaXJzdCB0ZXN0IGJlbG93IGZhaWxzICovCiAg
ICAgICAgaWYgKHBzMVtpXSAhPSBwczJbaV0gJiYgYzEgIT0gYzIpIHsKICAgICAgICAgICAgcmV0
dXJuIGMxIC0gYzI7CiAgICAgICAgfQogICAgICAgIGlmICghYzEpIHsKICAgICAgICAgICAgYnJl
YWs7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuICgwKTsKfQoKaW50IGFwX2Nhc2VjbXBzdHJf
NChjb25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIpCnsKICAgIHNpemVfdCBpOwogICAgY29u
c3QgdW5zaWduZWQgY2hhciAqcHMxID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczE7CiAgICBj
b25zdCB1bnNpZ25lZCBjaGFyICpwczIgPSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMjsKCiAg
ICBmb3IgKGkgPSAwOyA7ICsraSkgewogICAgICAgIGludCBjMSA9IHBzMVtpXSwKICAgICAgICAg
ICAgYzIgPSBwczJbaV07CiAgICAgICAgaWYgKGMxICE9IGMyKSB7CiAgICAgICAgICAgIGMxID0g
dWNoYXJtYXBbYzFdOwogICAgICAgICAgICBjMiA9IHVjaGFybWFwW2MyXTsKICAgICAgICAgICAg
aWYgKGMxICE9IGMyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYzEgLSBjMjsKICAgICAgICAg
ICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIWMxKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAg
ICAgIH0KICAgIH0KICAgIHJldHVybiAoMCk7Cn0KCmludCBhcF9jYXNlY21wc3Rybl80KGNvbnN0
IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMiwgc2l6ZV90IG4pCnsKICAgIHNpemVfdCBpOwogICAg
Y29uc3QgdW5zaWduZWQgY2hhciAqcHMxID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczE7CiAg
ICBjb25zdCB1bnNpZ25lZCBjaGFyICpwczIgPSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMjsK
CiAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaW50IGMxID0gcHMxW2ldLAog
ICAgICAgICAgICBjMiA9IHBzMltpXTsKICAgICAgICBpZiAoYzEgIT0gYzIpIHsKICAgICAgICAg
ICAgYzEgPSB1Y2hhcm1hcFtjMV07CiAgICAgICAgICAgIGMyID0gdWNoYXJtYXBbYzJdOwogICAg
ICAgICAgICBpZiAoYzEgIT0gYzIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBjMSAtIGMyOwog
ICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghYzEpIHsKICAgICAgICAgICAgYnJl
YWs7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuICgwKTsKfQoKaW50IGFwX2Nhc2VjbXBzdHJf
NShjb25zdCBjaGFyICpzMSwgY29uc3QgY2hhciAqczIpCnsKICAgIHNpemVfdCBpOwogICAgY29u
c3QgdW5zaWduZWQgY2hhciAqcHMxID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczE7CiAgICBj
b25zdCB1bnNpZ25lZCBjaGFyICpwczIgPSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMjsKCiAg
ICBmb3IgKGkgPSAwOyA7ICsraSkgewogICAgICAgIGludCBjMSA9IHBzMVtpXTsKICAgICAgICBp
ZiAoYzEgIT0gcHMyW2ldKSB7CiAgICAgICAgICAgIGludCBjMiA9IHVjaGFybWFwW3BzMltpXV07
CiAgICAgICAgICAgIGlmICh1Y2hhcm1hcFtjMV0gIT0gYzIpIHsKICAgICAgICAgICAgICAgIHJl
dHVybiB1Y2hhcm1hcFtjMV0gLSBjMjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBp
ZiAoIWMxKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiAo
MCk7Cn0KCmludCBhcF9jYXNlY21wc3Rybl81KGNvbnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpz
Miwgc2l6ZV90IG4pCnsKICAgIHNpemVfdCBpOwogICAgY29uc3QgdW5zaWduZWQgY2hhciAqcHMx
ID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczE7CiAgICBjb25zdCB1bnNpZ25lZCBjaGFyICpw
czIgPSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMjsKCiAgICBmb3IgKGkgPSAwOyBpIDwgbjsg
KytpKSB7CiAgICAgICAgaW50IGMxID0gcHMxW2ldOwogICAgICAgIGlmIChjMSAhPSBwczJbaV0p
IHsKICAgICAgICAgICAgaW50IGMyID0gdWNoYXJtYXBbcHMyW2ldXTsKICAgICAgICAgICAgYzEg
PSB1Y2hhcm1hcFtjMV07CiAgICAgICAgICAgIGlmIChjMSAhPSBjMikgewogICAgICAgICAgICAg
ICAgcmV0dXJuIGMxIC0gYzI7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFj
MSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gKDApOwp9
CgppbnQgYXBfY2FzZWNtcHN0cl82KGNvbnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMikKewog
ICAgc2l6ZV90IGk7CiAgICBjb25zdCB1bnNpZ25lZCBjaGFyICpwczEgPSAoY29uc3QgdW5zaWdu
ZWQgY2hhciAqKSBzMTsKICAgIGNvbnN0IHVuc2lnbmVkIGNoYXIgKnBzMiA9IChjb25zdCB1bnNp
Z25lZCBjaGFyICopIHMyOwoKICAgIGZvciAoaSA9IDAgOzsgKytpKSB7CiAgICAgICAgaW50IGMx
ID0gcHMxW2ldLAogICAgICAgICAgICBjMiA9IHBzMltpXTsKICAgICAgICBpZiAoYzEgIT0gYzIp
IHsKICAgICAgICAgICAgYzEgKz0gKGMxID49ICdBJyAmJiBjMSA8PSAnWicpIDw8IDU7CiAgICAg
ICAgICAgIGMyICs9IChjMiA+PSAnQScgJiYgYzIgPD0gJ1onKSA8PCA1OwogICAgICAgICAgICBp
ZiAoYzEgIT0gYzIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBjMSAtIGMyOwogICAgICAgICAg
ICB9CiAgICAgICAgfQogICAgICAgIGlmICghYzEpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAg
ICAgfQogICAgfQogICAgcmV0dXJuICgwKTsKfQoKaW50IGFwX2Nhc2VjbXBzdHJuXzYoY29uc3Qg
Y2hhciAqczEsIGNvbnN0IGNoYXIgKnMyLCBzaXplX3QgbikKewogICAgc2l6ZV90IGk7CiAgICBj
b25zdCB1bnNpZ25lZCBjaGFyICpwczEgPSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMTsKICAg
IGNvbnN0IHVuc2lnbmVkIGNoYXIgKnBzMiA9IChjb25zdCB1bnNpZ25lZCBjaGFyICopIHMyOwoK
ICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHsKICAgICAgICBpbnQgYzEgPSBwczFbaV0sCiAg
ICAgICAgICAgIGMyID0gcHMyW2ldOwogICAgICAgIGlmIChjMSAhPSBjMikgewogICAgICAgICAg
ICBjMSArPSAoYzEgPj0gJ0EnICYmIGMxIDw9ICdaJykgPDwgNTsKICAgICAgICAgICAgYzIgKz0g
KGMyID49ICdBJyAmJiBjMiA8PSAnWicpIDw8IDU7CiAgICAgICAgICAgIGlmIChjMSAhPSBjMikg
ewogICAgICAgICAgICAgICAgcmV0dXJuIGMxIC0gYzI7CiAgICAgICAgICAgIH0KICAgICAgICB9
CiAgICAgICAgaWYgKCFjMSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9CiAg
ICByZXR1cm4gKDApOwp9CgppbnQgYXBfY2FzZWNtcHN0cl83KGNvbnN0IGNoYXIgKnMxLCBjb25z
dCBjaGFyICpzMikKewogICAgc2l6ZV90IGk7CiAgICBjb25zdCB1bnNpZ25lZCBjaGFyICpwczEg
PSAoY29uc3QgdW5zaWduZWQgY2hhciAqKSBzMTsKICAgIGNvbnN0IHVuc2lnbmVkIGNoYXIgKnBz
MiA9IChjb25zdCB1bnNpZ25lZCBjaGFyICopIHMyOwoKICAgIGZvciAoaSA9IDA7IDsgKytpKSB7
CiAgICAgICAgaWYgKHBzMVtpXSAhPSBwczJbaV0gJiYgdWNoYXJtYXBbcHMxW2ldXSAhPSB1Y2hh
cm1hcFtwczJbaV1dKSB7CiAgICAgICAgICAgIHJldHVybiB1Y2hhcm1hcFtwczFbaV1dIC0gdWNo
YXJtYXBbcHMyW2ldXTsKICAgICAgICB9CiAgICAgICAgaWYgKCFwczFbaV0pIHsKICAgICAgICAg
ICAgYnJlYWs7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuICgwKTsKfQoKaW50IGFwX2Nhc2Vj
bXBzdHJuXzcoY29uc3QgY2hhciAqczEsIGNvbnN0IGNoYXIgKnMyLCBzaXplX3QgbikKewogICAg
c2l6ZV90IGk7CiAgICBjb25zdCB1bnNpZ25lZCBjaGFyICpwczEgPSAoY29uc3QgdW5zaWduZWQg
Y2hhciAqKSBzMTsKICAgIGNvbnN0IHVuc2lnbmVkIGNoYXIgKnBzMiA9IChjb25zdCB1bnNpZ25l
ZCBjaGFyICopIHMyOwoKICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHsKICAgICAgICBpZiAo
cHMxW2ldICE9IHBzMltpXSAmJiB1Y2hhcm1hcFtwczFbaV1dICE9IHVjaGFybWFwW3BzMltpXV0p
IHsKICAgICAgICAgICAgcmV0dXJuIHVjaGFybWFwW3BzMVtpXV0gLSB1Y2hhcm1hcFtwczJbaV1d
OwogICAgICAgIH0KICAgICAgICBpZiAoIXBzMVtpXSkgewogICAgICAgICAgICBicmVhazsKICAg
ICAgICB9CiAgICB9CiAgICByZXR1cm4gKDApOwp9CgoKLyoKICogc3ZuJ3MKICovCgppbnQgc3Zu
X2N0eXBlX2Nhc2VjbXAoaW50IGEsIGludCBiKQp7CiAgY29uc3QgaW50IEEgPSB1Y2hhcm1hcFso
dW5zaWduZWQgY2hhcilhXTsKICBjb25zdCBpbnQgQiA9IHVjaGFybWFwWyh1bnNpZ25lZCBjaGFy
KWJdOwogIHJldHVybiBBIC0gQjsKfQoKaW50IHN2bl9jc3RyaW5nX2Nhc2VjbXAoY29uc3QgY2hh
ciAqc3RyMSwgY29uc3QgY2hhciAqc3RyMikKewogICAgZm9yICg7OykKICAgIHsKICAgICAgICBj
b25zdCBpbnQgYSA9ICpzdHIxKys7CiAgICAgICAgY29uc3QgaW50IGIgPSAqc3RyMisrOwogICAg
ICAgIGNvbnN0IGludCBjbXAgPSBzdm5fY3R5cGVfY2FzZWNtcChhLCBiKTsKICAgICAgICBpZiAo
Y21wIHx8ICFhIHx8ICFiKQogICAgICAgICAgICByZXR1cm4gY21wOwogICAgfQp9CgppbnQgc3Zu
X2NzdHJpbmdfbmNhc2VjbXAoY29uc3QgY2hhciAqc3RyMSwgY29uc3QgY2hhciAqc3RyMiwgc2l6
ZV90IG4pCnsKICAgIHdoaWxlIChuLS0pCiAgICB7CiAgICAgICAgY29uc3QgaW50IGEgPSAqc3Ry
MSsrOwogICAgICAgIGNvbnN0IGludCBiID0gKnN0cjIrKzsKICAgICAgICBjb25zdCBpbnQgY21w
ID0gc3ZuX2N0eXBlX2Nhc2VjbXAoYSwgYik7CiAgICAgICAgaWYgKGNtcCB8fCAhYSB8fCAhYikK
ICAgICAgICAgICAgcmV0dXJuIGNtcDsKICAgIH0KICAgIHJldHVybiAwOwp9CgoKLyoKICogbWkn
cwogKi8KCmludCBtaV9zdHJjYXNlY21wKGNvbnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMikK
ewogICAgY29uc3QgdW5zaWduZWQgY2hhciAqcHMxID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikg
czE7CiAgICBjb25zdCB1bnNpZ25lZCBjaGFyICpwczIgPSAoY29uc3QgdW5zaWduZWQgY2hhciAq
KSBzMjsKCiAgICBmb3IgKDs7KSB7CiAgICAgICAgaW50CWRpZmYgPSAqcHMxIC0gKnBzMjsKICAg
ICAgICBzd2l0Y2ggKGRpZmYpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGJyZWFrOwog
ICAgICAgIGNhc2UgJ0EnIC0gJ2EnOgogICAgICAgICAgICBpZiAoKnBzMSA8PSAnWicgJiYgKnBz
MSA+PSAnQScpCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgcmV0dXJuIDE7CiAg
ICAgICAgY2FzZSAnYScgLSAnQSc6CiAgICAgICAgICAgIGlmICgqcHMyIDw9ICdaJyAmJiAqcHMy
ID49ICdBJykKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICByZXR1cm4gLTE7CiAg
ICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgLyogRG8sIHdoYXQgdG9sb3dlcigpIHdvdWxkJ3Zl
IGRvbmUgKi8KICAgICAgICAgICAgaWYgKCpwczEgPD0gJ3onICYmICpwczEgPj0gJ2EnKQogICAg
ICAgICAgICAgICAgZGlmZiAtPSAoJ2EnIC0gJ0EnKTsKICAgICAgICAgICAgaWYgKCpwczIgPD0g
J3onICYmICpwczIgPj0gJ2EnKQogICAgICAgICAgICAgICAgZGlmZiArPSAoJ2EnIC0gJ0EnKTsK
ICAgICAgICAgICAgcmV0dXJuIGRpZmY7CiAgICAgICAgfQogICAgICAgIGlmICgqcHMxID09ICdc
MCcpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgICsrcHMxOwogICAgICAg
ICsrcHMyOwogICAgfQogICAgcmV0dXJuICgwKTsKfQoKaW50IG1pX3N0cm5jYXNlY21wKGNvbnN0
IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMiwgc2l6ZV90IG4pCnsKICAgIGNvbnN0IHVuc2lnbmVk
IGNoYXIgKnBzMSA9IChjb25zdCB1bnNpZ25lZCBjaGFyICopIHMxOwogICAgY29uc3QgdW5zaWdu
ZWQgY2hhciAqcHMyID0gKGNvbnN0IHVuc2lnbmVkIGNoYXIgKikgczI7CgogICAgd2hpbGUgKG4t
LSkgewogICAgICAgIGludCBkaWZmID0gKnBzMSAtICpwczI7CiAgICAgICAgc3dpdGNoIChkaWZm
KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdBJyAt
ICdhJzoKICAgICAgICAgICAgaWYgKCpwczEgPD0gJ1onICYmICpwczEgPj0gJ0EnKQogICAgICAg
ICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgIGNhc2UgJ2EnIC0g
J0EnOgogICAgICAgICAgICBpZiAoKnBzMiA8PSAnWicgJiYgKnBzMiA+PSAnQScpCiAgICAgICAg
ICAgICAgICBicmVhazsKICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgIGRlZmF1bHQ6CiAg
ICAgICAgICAgIC8qIERvLCB3aGF0IHRvbG93ZXIoKSB3b3VsZCd2ZSBkb25lICovCiAgICAgICAg
ICAgIGlmICgqcHMxIDw9ICd6JyAmJiAqcHMxID49ICdhJykKICAgICAgICAgICAgICAgIGRpZmYg
LT0gKCdhJyAtICdBJyk7CiAgICAgICAgICAgIGlmICgqcHMyIDw9ICd6JyAmJiAqcHMyID49ICdh
JykKICAgICAgICAgICAgICAgIGRpZmYgKz0gKCdhJyAtICdBJyk7CiAgICAgICAgICAgIHJldHVy
biBkaWZmOwogICAgICAgIH0KICAgICAgICBpZiAoKnBzMSA9PSAnXDAnKSB7CiAgICAgICAgICAg
IGJyZWFrOwogICAgICAgIH0KICAgICAgICArK3BzMTsKICAgICAgICArK3BzMjsKICAgIH0KICAg
IHJldHVybiAoMCk7Cn0KCgovKgogKiBzdGFuZGFyZCAoZXh0ZXJuKQogKi8KaW50IHN0cmNhc2Vj
bXBfZXh0KGNvbnN0IGNoYXIgKnMxLCBjb25zdCBjaGFyICpzMikKewogICAgcmV0dXJuIHN0cmNh
c2VjbXAoczEsIHMyKTsKfQoKaW50IHN0cm5jYXNlY21wX2V4dChjb25zdCBjaGFyICpzMSwgY29u
c3QgY2hhciAqczIsIHNpemVfdCBuKQp7CiAgICByZXR1cm4gc3RybmNhc2VjbXAoczEsIHMyLCBu
KTsKfQoK
--001a114a9bc4a736220525c540bd
Content-Type: application/x-sh; name="ap_casecmpstr.sh"
Content-Disposition: attachment; filename="ap_casecmpstr.sh"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_ihm7z7bi3

IyEvYmluL3NoCigKICAgIE49MTAwMDAwMDAwCiAgICBJRD0kezE6LWFwX2Nhc2VjbXBzdHJ9CiAg
ICBmb3IgbyBpbiAiMiI7IGRvCiAgICAgICAgZ2NjIC1XYWxsIC1XZXJyb3IgLU8kbyAtbyAiJHtJ
RH0ubyIgLWMgIiR7SUR9LmMiIHx8IGV4aXQgJD8KICAgICAgICBnY2MgLVdhbGwgLVdlcnJvciAt
TyRvIC1vICIke0lEfV9pbXBsLm8iIC1jICIke0lEfV9pbXBsLmMiIHx8IGV4aXQgJD8KICAgICAg
ICBnY2MgLVdhbGwgLVdlcnJvciAtTyRvIC1vICIke0lEfS1PJG8iICIke0lEfS5vIiAiJHtJRH1f
aW1wbC5vIiAtbHJ0IHx8IGV4aXQgJD8KICAgICAgICBmb3IgbCBpbiAiQyIgIiRMQU5HIiAibXRf
TVQuSVNPLTg4NTktMyI7IGRvCiAgICAgICAgICAgIGZvciBzIGluIFwKICAgICAgICAgICAgICAg
ICInJyAnJyIgXAogICAgICAgICAgICAgICAgIid5JyAnWSciIFwKICAgICAgICAgICAgICAgICIn
WScgJ3lZJyIgXAogICAgICAgICAgICAgICAgIid5WScgJ1l5WSciIFwKICAgICAgICAgICAgICAg
ICIkJ1x4YTknICdpJyIgXAogICAgICAgICAgICAgICAgIidjeWNvT2FBJyAnY3ljb09hQSciIFwK
ICAgICAgICAgICAgICAgICInY3ljeWNvT29PYUFhQScgJ2N5Y3ljb09vT2FBYUEnIiBcCiAgICAg
ICAgICAgICAgICAiJCdceDgwXHg4MVx4ODJceDgzXHg4NFx4RkNceEZEXHhGRVx4RkYnICAgICQn
XHg4MFx4ODFceDgyXHg4M1x4ODRceEZDXHhGRFx4RkVceEZGJyIgXAogICAgICAgICAgICAgICAg
IidjeWN5Y3ljeWN5Y3ljeWN5Y3ljb09vT29Pb09vT2FBYUFhQWFBYUFhJyAnY3ljeWN5Y3ljeWN5
Y3ljeWN5Y29Pb09vT29Pb09hQWFBYUFhQWFBYSciIFwKICAgICAgICAgICAgICAgICInQ3lDeUN5
Q3lDeUN5Q3lDeUN5Q29vb29vb29vb29hYWFhYWFhYWFhYScgJ0N5Q3lDeUN5Q3lDeUN5Q3lDeUNv
b29vb29vb29vYWFhYWFhYWFhYWEnIiBcCiAgICAgICAgICAgICAgICAiJ0N5Q3lDeUN5Q3lDeUN5
Q3lDeUNvT29Pb09vT29PYUFhQWFBYUFhQWEnICdjWWNZY1ljWWNZY1ljWWNZY1ljT29Pb09vT29P
b0FhQWFBYUFhQWFhJyIgXAogICAgICAgICAgICAgICAgIidDeUN5Q3lDeUN5Q3lDeUN5Q3lDb09v
T29Pb09vT2FBYUFhQWFBYUFbJyAnY1ljWWNZY1ljWWNZY1ljWWNZY09vT29Pb09vT29BYUFhQWFB
YUFhXSciIFwKICAgICAgICAgICAgICAgICIkJ1x4YTlceGE5XHhhOVx4YTlceGE5XHhhOVx4YTlc
eGE5XHhhOVx4YTlceGE5XHhhOVx4YTlceGE5XHhhOVx4YTlceGE5XHhhOVx4YTlceGE5XHhhOVx4
YTlceGE5XHhhOVx4YTlceGE5XHhhOVx4YTlceGE5XHhhOVx4YTlceGE5XHhhOVx4YTlceGE5XHhh
OVx4YTlceGE5XHhhOVx4YTknICdpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlp
aWlpJyIgXAogICAgICAgICAgICAgICAgIiQnXHhhOWlceGE5aVx4YTlpXHhhOWlceGE5aVx4YTlp
XHhhOWlceGE5aVx4YTlpXHhhOWlceGE5aVx4YTlpXHhhOWlceGE5aVx4YTlpXHhhOWlceGE5aVx4
YTlpXHhhOWlceGE5aScgJCdpXHhhOWlceGE5aVx4YTlpXHhhOWlceGE5aVx4YTlpXHhhOWlceGE5
aVx4YTlpXHhhOWlceGE5aVx4YTlpXHhhOWlceGE5aVx4YTlpXHhhOWlceGE5aVx4YTlpXHhhOWlc
eGE5JyIgXAogICAgICAgICAgICA7IGRvCiAgICAgICAgICAgICAgICBMQU5HVUFHRT0iJGwiIExD
X0FMTD0iJGwiIGV2YWwgJy4vJHtJRH0tTyRvJyAnYScgJyROJyAiJHMiIDAKICAgICAgICAgICAg
ICAgIGVjaG8KICAgICAgICAgICAgZG9uZQogICAgICAgIGRvbmUKICAgIGRvbmUKKQoKZXhpdCAk
PwoK
--001a114a9bc4a736220525c540bd--

From dev-return-84809-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 30 22:54:35 2015
Return-Path: <dev-return-84809-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 67E0C18CB5
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 30 Nov 2015 22:54:35 +0000 (UTC)
Received: (qmail 69590 invoked by uid 500); 30 Nov 2015 22:54:34 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 69508 invoked by uid 500); 30 Nov 2015 22:54:34 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 69498 invoked by uid 99); 30 Nov 2015 22:54:34 -0000
Received: from Unknown (HELO spamd1-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Nov 2015 22:54:34 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd1-us-west.apache.org (ASF Mail Server at spamd1-us-west.apache.org) with ESMTP id C20F6C2787
	for <dev@httpd.apache.org>; Mon, 30 Nov 2015 22:54:33 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd1-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.01
X-Spam-Level:
X-Spam-Status: No, score=-0.01 tagged_above=-999 required=6.31
	tests=[HEADER_FROM_DIFFERENT_DOMAINS=0.001, SPF_HELO_PASS=-0.001,
	SPF_PASS=-0.001, T_RP_MATCHES_RCVD=-0.01, URIBL_BLOCKED=0.001]
	autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd1-us-west.apache.org [10.40.0.7]) (amavisd-new, port 10024)
	with ESMTP id amiYZghd6pku for <dev@httpd.apache.org>;
	Mon, 30 Nov 2015 22:54:24 +0000 (UTC)
Received: from plane.gmane.org (plane.gmane.org [80.91.229.3])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id 1F60120230
	for <dev@httpd.apache.org>; Mon, 30 Nov 2015 22:54:23 +0000 (UTC)
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <apache-dev@m.gmane.org>)
	id 1a3XKm-0006SZ-HB
	for dev@httpd.apache.org; Mon, 30 Nov 2015 23:54:12 +0100
Received: from ip-213-127-155-185.ip.prioritytelecom.net ([213.127.155.185])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Mon, 30 Nov 2015 23:54:12 +0100
Received: from phpdev by ip-213-127-155-185.ip.prioritytelecom.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Mon, 30 Nov 2015 23:54:12 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: dev@httpd.apache.org
From: Jan Ehrhardt <phpdev@ehrhardt.nl>
Subject: Re: No H2 Window updates!
Date: Mon, 30 Nov 2015 23:53:49 +0100
Lines: 19
Message-ID: <mnjp5b1qdm4sgu56t413p2bmblsqjpd9og@4ax.com>
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl> <030501d12916$cf7e1120$6e7a3360$@qqmail.nl> <56599792.3060402@greenbytes.de> <03a401d129dd$fafdbfe0$f0f93fa0$@qqmail.nl> <03aa01d129e1$2d49d990$87dd8cb0$@qqmail.nl> <040101d12a23$ced65530$6c82ff90$@qqmail.nl> <40F35186-1FFF-48EF-BB67-DAE432526244@greenbytes.de> <46014DD1-B5DA-4920-B0E2-C43B43EB4816@jaguNET.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: ip-213-127-155-185.ip.prioritytelecom.net
X-Newsreader: Forte Agent 3.3/32.846

Jim Jagielski in gmane.comp.apache.devel (Mon, 30 Nov 2015 07:24:07 -0500):
>I'm assuming that the brokenness also shows up on trunk,
>right?
>
>Bert, Jan, can you check if trunk shows the same behavior?
>I would prefer not hacking away on 2.4 directly and independently.

I checked out revision 1717334 from trunk and tried to update mod_http2
without updating the other sources. Surprise:

Creating library .\Release/mod_http2.lib and object .\Release/mod_http2.exp
 1>h2_from_h1.obj : error LNK2019: unresolved external symbol _ap_casecmpstr
   referenced in function _create_response
 1>.\Release\mod_http2.so : fatal error LNK1120: 1 unresolved externals

Somebody followed your advice and actually wrote some code! I cannot easily
test mod_http2 from trunk, because it involves updating APR as well.
-- 
Jan


From dev-return-84810-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org  Mon Nov 30 23:41:07 2015
Return-Path: <dev-return-84810-apmail-httpd-dev-archive=httpd.apache.org@httpd.apache.org>
X-Original-To: apmail-httpd-dev-archive@www.apache.org
Delivered-To: apmail-httpd-dev-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4598818F74
	for <apmail-httpd-dev-archive@www.apache.org>; Mon, 30 Nov 2015 23:41:07 +0000 (UTC)
Received: (qmail 82173 invoked by uid 500); 30 Nov 2015 23:41:06 -0000
Delivered-To: apmail-httpd-dev-archive@httpd.apache.org
Received: (qmail 82086 invoked by uid 500); 30 Nov 2015 23:41:06 -0000
Mailing-List: contact dev-help@httpd.apache.org; run by ezmlm
Precedence: bulk
Reply-To: dev@httpd.apache.org
list-help: <mailto:dev-help@httpd.apache.org>
list-unsubscribe: <mailto:dev-unsubscribe@httpd.apache.org>
List-Post: <mailto:dev@httpd.apache.org>
List-Id: <dev.httpd.apache.org>
Delivered-To: mailing list dev@httpd.apache.org
Received: (qmail 82076 invoked by uid 99); 30 Nov 2015 23:41:06 -0000
Received: from Unknown (HELO spamd4-us-west.apache.org) (209.188.14.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Nov 2015 23:41:06 +0000
Received: from localhost (localhost [127.0.0.1])
	by spamd4-us-west.apache.org (ASF Mail Server at spamd4-us-west.apache.org) with ESMTP id 33316C05AC
	for <dev@httpd.apache.org>; Mon, 30 Nov 2015 23:41:06 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at spamd4-us-west.apache.org
X-Spam-Flag: NO
X-Spam-Score: -0.555
X-Spam-Level:
X-Spam-Status: No, score=-0.555 tagged_above=-999 required=6.31
	tests=[HEADER_FROM_DIFFERENT_DOMAINS=0.001, RP_MATCHES_RCVD=-0.554,
	SPF_HELO_PASS=-0.001, SPF_PASS=-0.001] autolearn=disabled
Received: from mx1-us-west.apache.org ([10.40.0.8])
	by localhost (spamd4-us-west.apache.org [10.40.0.11]) (amavisd-new, port 10024)
	with ESMTP id Yfpp1-rZsdG5 for <dev@httpd.apache.org>;
	Mon, 30 Nov 2015 23:41:05 +0000 (UTC)
Received: from plane.gmane.org (plane.gmane.org [80.91.229.3])
	by mx1-us-west.apache.org (ASF Mail Server at mx1-us-west.apache.org) with ESMTPS id AEA2320230
	for <dev@httpd.apache.org>; Mon, 30 Nov 2015 23:41:04 +0000 (UTC)
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <apache-dev@m.gmane.org>)
	id 1a3Y46-00081h-EA
	for dev@httpd.apache.org; Tue, 01 Dec 2015 00:41:02 +0100
Received: from ip-213-127-155-185.ip.prioritytelecom.net ([213.127.155.185])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Tue, 01 Dec 2015 00:41:02 +0100
Received: from phpdev by ip-213-127-155-185.ip.prioritytelecom.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <dev@httpd.apache.org>; Tue, 01 Dec 2015 00:41:02 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: dev@httpd.apache.org
From: Jan Ehrhardt <phpdev@ehrhardt.nl>
Subject: Re: No H2 Window updates!
Date: Tue, 01 Dec 2015 00:40:51 +0100
Lines: 11
Message-ID: <menp5btal5gqib4phhf7j8a6dp5cs2qqq4@4ax.com>
References: <02f401d12912$fcba4130$f62ec390$@qqmail.nl> <030501d12916$cf7e1120$6e7a3360$@qqmail.nl> <56599792.3060402@greenbytes.de> <03a401d129dd$fafdbfe0$f0f93fa0$@qqmail.nl> <03aa01d129e1$2d49d990$87dd8cb0$@qqmail.nl> <040101d12a23$ced65530$6c82ff90$@qqmail.nl> <40F35186-1FFF-48EF-BB67-DAE432526244@greenbytes.de> <46014DD1-B5DA-4920-B0E2-C43B43EB4816@jaguNET.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: ip-213-127-155-185.ip.prioritytelecom.net
X-Newsreader: Forte Agent 3.3/32.846

Jim Jagielski in gmane.comp.apache.devel (Mon, 30 Nov 2015 07:24:07 -0500):
>I'm assuming that the brokenness also shows up on trunk,
>right?
>
>Bert, Jan, can you check if trunk shows the same behavior?
>I would prefer not hacking away on 2.4 directly and independently.

FYI: the only differences between trunk and mod_http2 1.0.8 were ap_strcasecmp
vs. strcasecmp and 1.0.9-dev vs 1.0.8.
-- 
Jan


